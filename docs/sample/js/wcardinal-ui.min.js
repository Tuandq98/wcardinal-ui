/*
 Winter Cardinal UI v0.2.4
 Copyright (C) 2019 Toshiba Corporation
 SPDX-License-Identifier: Apache-2.0

 Material Design icons by Google
 Apache license version 2.0.
*/
!function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(t,i)};function i(t,i){function r(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var r,e=function(){function t(){}return t.setInstace=function(n){var i=t.INSTANCE;return t.INSTANCE=n,i},t.getInstance=function(){if(null==t.INSTANCE)throw new Error("Must create a DApplication instance at first");return t.INSTANCE},t.update=function(){this.getInstance().update()},t.INSTANCE=null,t}(),u=function(t){return"function"==typeof t},s=function(){function t(t,n,i){if(this.t=t,this.i=i,null!=n&&null!=n.background){var r=n.background;this.u=r.color,this.h=r.alpha}}return t.prototype.getTheme=function(){return this.t},t.prototype.setTheme=function(t){this.t=t},t.prototype.getColor=function(t){var n=this.u;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getBackgroundColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.h;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getBackgroundAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.h},set:function(t){this.h!==t&&(this.h=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.onChange=function(){var t=this.i;null!=t&&t()},t}();!function(t){t[t.NONE=0]="NONE",t[t.TOP=1]="TOP",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=4]="BOTTOM",t[t.LEFT=8]="LEFT",t[t.TOP_RIGHT=3]="TOP_RIGHT",t[t.TOP_BOTTOM=5]="TOP_BOTTOM",t[t.TOP_LEFT=9]="TOP_LEFT",t[t.RIGHT_BOTTOM=6]="RIGHT_BOTTOM",t[t.RIGHT_LEFT=10]="RIGHT_LEFT",t[t.BOTTOM_LEFT=12]="BOTTOM_LEFT",t[t.NOT_TOP=14]="NOT_TOP",t[t.NOT_RIGHT=13]="NOT_RIGHT",t[t.NOT_BOTTOM=11]="NOT_BOTTOM",t[t.NOT_LEFT=7]="NOT_LEFT",t[t.ALL=15]="ALL"}(r||(r={}));var h,o=function(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)},c=function(){function t(t,n,i){if(this.t=t,this.i=i,null!=n&&null!=n.border){var e=n.border;this.u=e.color,this.h=e.alpha,this.o=e.width,this.l=e.align,this.v=o(e.mask)?r[e.mask]:e.mask}}return t.prototype.getTheme=function(){return this.t},t.prototype.setTheme=function(t){this.t=t},t.prototype.getColor=function(t){var n=this.u;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getBorderColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.h;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getBorderAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.h},set:function(t){this.h!==t&&(this.h=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.getWidth=function(t){var n=this.o;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getBorderWidth(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.getAlign=function(t){var n=this.l;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getBorderAlign(t)},Object.defineProperty(t.prototype,"align",{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.getMask=function(t){var n=this.v;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getBorderMask(t)},Object.defineProperty(t.prototype,"mask",{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.onChange=function(){var t=this.i;null!=t&&t()},t}();!function(t){t[t.NONE=0]="NONE",t[t.TOP_LEFT=1]="TOP_LEFT",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.BOTTOM_LEFT=4]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=8]="BOTTOM_RIGHT",t[t.TOP=3]="TOP",t[t.BOTTOM=12]="BOTTOM",t[t.LEFT=5]="LEFT",t[t.RIGHT=10]="RIGHT",t[t.ALL=15]="ALL"}(h||(h={}));var f,a=function(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)},l=function(){function t(t,n,i){if(this.t=t,this.i=i,null!=n&&null!=n.corner){var r=n.corner;a(r)?(this.g=r,this.v=void 0):(this.g=r.radius,this.v=o(r.mask)?h[r.mask]:r.mask)}}return t.prototype.getTheme=function(){return this.t},t.prototype.setTheme=function(t){this.t=t},t.prototype.getRadius=function(){var t=this.g;return void 0!==t?t:this.t.getCornerRadius()},Object.defineProperty(t.prototype,"radius",{get:function(){return this.g},set:function(t){if(this.g!==t){this.g=t;var n=this.i;null!=n&&n()}},enumerable:!0,configurable:!0}),t.prototype.getMask=function(){var t=this.v;return void 0!==t?t:this.t.getCornerMask()},Object.defineProperty(t.prototype,"mask",{get:function(){return this.v},set:function(t){if(this.v!==t){this.v=t;var n=this.i;null!=n&&n()}},enumerable:!0,configurable:!0}),t.prototype.set=function(t,n){var i=!1;this.g!==t&&(this.g=t,i=!0),this.v!==n&&(this.v=n,i=!0);var r=this.i;i&&null!=r&&r()},t}();!function(t){t[t.NONE=0]="NONE",t[t.SELF=1]="SELF",t[t.CHILDREN=2]="CHILDREN",t[t.BOTH=3]="BOTH"}(f||(f={}));var v,b=function(){function t(t,n,i){if(this.t=t,this.i=i,null!=n&&null!=n.outline){var e=n.outline;this.u=e.color,this.h=e.alpha,this.o=e.width,this.T=e.offset,this.l=e.align,this.v=o(e.mask)?r[e.mask]:e.mask}}return t.prototype.getTheme=function(){return this.t},t.prototype.setTheme=function(t){this.t=t},t.prototype.getColor=function(t){var n=this.u;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getOutlineColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.u},set:function(t){if(this.u!==t){this.u=t;var n=this.i;null!=n&&n()}},enumerable:!0,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.h;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getOutlineAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.h},set:function(t){if(this.h!==t){this.h=t;var n=this.i;null!=n&&n()}},enumerable:!0,configurable:!0}),t.prototype.getWidth=function(t){var n=this.o;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getOutlineWidth(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.o},set:function(t){if(this.o!==t){this.o=t;var n=this.i;null!=n&&n()}},enumerable:!0,configurable:!0}),t.prototype.getOffset=function(t){var n=this.T;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getOutlineOffset(t)},Object.defineProperty(t.prototype,"offset",{get:function(){return this.T},set:function(t){if(this.T!==t){this.T=t;var n=this.i;null!=n&&n()}},enumerable:!0,configurable:!0}),t.prototype.getAlign=function(t){var n=this.l;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getOutlineAlign(t)},Object.defineProperty(t.prototype,"align",{get:function(){return this.l},set:function(t){if(this.l!==t){this.l=t;var n=this.i;null!=n&&n()}},enumerable:!0,configurable:!0}),t.prototype.getMask=function(t){var n=this.v;if(void 0!==n){if(!u(n))return n;var i=n(t);if(void 0!==i)return i}return this.t.getOutlineMask(t)},Object.defineProperty(t.prototype,"mask",{get:function(){return this.v},set:function(t){if(this.v!==t){this.v=t;var n=this.i;null!=n&&n()}},enumerable:!0,configurable:!0}),t}(),d=function(){function t(t,n,i){if(this.t=t,this.i=i,null!=n&&null!=n.padding){var r=n.padding;a(r)?(this.O=r,this.S=r,this.k=r,this.I=r):(this.O=r.left,this.S=r.top,this.k=r.right,this.I=r.bottom)}}return t.prototype.getTheme=function(){return this.t},t.prototype.setTheme=function(t){this.t=t},t.prototype.getLeft=function(){var t=this.O;return void 0!==t?t:this.t.getPaddingLeft()},Object.defineProperty(t.prototype,"left",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,null!=this.i&&this.i())},enumerable:!0,configurable:!0}),t.prototype.getTop=function(){var t=this.S;return void 0!==t?t:this.t.getPaddingTop()},Object.defineProperty(t.prototype,"top",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,null!=this.i&&this.i())},enumerable:!0,configurable:!0}),t.prototype.getRight=function(){var t=this.k;return void 0!==t?t:this.t.getPaddingRight()},Object.defineProperty(t.prototype,"right",{get:function(){return this.k},set:function(t){this.k!==t&&(this.k=t,null!=this.i&&this.i())},enumerable:!0,configurable:!0}),t.prototype.getBottom=function(){var t=this.I;return void 0!==t?t:this.t.getPaddingBottom()},Object.defineProperty(t.prototype,"bottom",{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t,null!=this.i&&this.i())},enumerable:!0,configurable:!0}),t.prototype.set=function(t,n,i,r){null==n?(this.top=t,this.right=t,this.bottom=t,this.left=t):null==i?(this.top=t,this.right=n,this.bottom=t,this.left=n):null==r?(this.top=t,this.right=n,this.bottom=i,this.left=n):(this.top=t,this.right=n,this.bottom=i,this.left=r),null!=this.i&&this.i()},t}(),g=function(){function t(t,n,i){this.N=t,this.cb=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this.N.x},set:function(t){var n=this.N;n.x!==t&&(n.x=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.N.y},set:function(t){var n=this.N;n.y!==t&&(n.y=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),t.prototype.set=function(t,n){var i=this.N;i.x===t&&i.y===n||(i.set(t,n),this.cb.call(this.scope))},t.prototype.copyFrom=function(t){var n=this.N;return n.x===t.x&&n.y===t.y||(n.copyFrom(t),this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.copyFrom(this.N)},t.prototype.copy=function(){return this.copyFrom(arguments[0])},t.prototype.clone=function(n,i){return n=n||this.cb,i=i||this.scope,new t(this.N,n,i)},t.prototype.equals=function(t){return this.N.equals(t)},t}(),m=function(t){function n(n,i,r,e,u){var s=t.call(this,new Float32Array(56),new Float32Array(56),new Uint16Array(42))||this;return s.o=i,s.C=r,s.j=n,s.A=e,s.B=u,s.R=!0,s.L=NaN,s.W=s.getBuffer("aVertexPosition"),s._=s.W.data,s.F=s.getBuffer("aTextureCoord"),s._uvs=s.F.data,s.P=s.getIndex(),s.U=s.P.data,s}return i(n,t),Object.defineProperty(n.prototype,"borderSize",{get:function(){return this.A},set:function(t){this.A!==t&&(this.A=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cornerMask",{get:function(){return this.B},set:function(t){this.B!==t&&(this.B=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.R=!0,this.L=NaN)},enumerable:!0,configurable:!0}),n.prototype.getTextureId=function(){return this.j._updateID},n.prototype.fillVertices=function(t,n,i,r,e,u){n[t+0]=i,n[t+1]=e,n[t+2]=r,n[t+3]=e,n[t+4]=i,n[t+5]=u,n[t+6]=r,n[t+7]=u},n.prototype.fillIndices=function(t,n,i){n[t+0]=i+0,n[t+1]=i+1,n[t+2]=i+2,n[t+3]=i+1,n[t+4]=i+3,n[t+5]=i+2},n.prototype.fillUvsCorner=function(t,n,i,r,e,u,s,h,o,c,f){i?this.fillVertices(t,n,r,e,h,o):this.fillVertices(t,n,s,u,h,o)},n.prototype.fillUvs=function(t,n,i,r,e,u){this.fillVertices(t,n,i,r,e,u)},n.prototype.update=function(){var t=this.texture;if(t.valid){var n=this.getTextureId();if(this.R||this.L!==n){this.R=!1,this.L=n;var i=this._,r=this._uvs,e=this.U,u=this.o,s=this.C,o=this.A,c=Math.min(.5*u,o),f=Math.max(.5*u,u-o),a=u,l=Math.min(.5*s,o),v=Math.max(.5*s,s-o),b=s,d=t._uvs,g=d.x0,m=d.x1,p=d.y0,w=d.y3,D=(m-g)*(o/t.width),T=(w-p)*(o/t.height),O=g,S=g+D,M=m-D,E=m,k=p,I=p+T,N=w-T,y=w,x=this.B,C=!(x&h.TOP_LEFT),j=!(x&h.TOP_RIGHT),A=!(x&h.BOTTOM_LEFT),B=!(x&h.BOTTOM_RIGHT),R=0,L=0,W=0;this.fillVertices(R,i,0,c,0,l),this.fillUvsCorner(R,r,C,O,S,M,E,k,I,N,y),this.fillIndices(W,e,L),R+=8,L+=4,W+=6,this.fillVertices(R,i,c,f,0,l),this.fillUvs(R,r,S,M,k,I),this.fillIndices(W,e,L),R+=8,L+=4,W+=6,this.fillVertices(R,i,a,f,0,l),this.fillUvsCorner(R,r,j,O,S,M,E,k,I,N,y),this.fillIndices(W,e,L),R+=8,L+=4,W+=6,this.fillVertices(R,i,0,a,l,v),this.fillUvs(R,r,O,E,I,N),this.fillIndices(W,e,L),R+=8,L+=4,W+=6,this.fillVertices(R,i,0,c,b,v),this.fillUvsCorner(R,r,A,O,S,M,E,k,I,N,y),this.fillIndices(W,e,L),R+=8,L+=4,W+=6,this.fillVertices(R,i,c,f,v,b),this.fillUvs(R,r,S,M,N,y),this.fillIndices(W,e,L),R+=8,L+=4,W+=6,this.fillVertices(R,i,a,f,b,v),this.fillUvsCorner(R,r,B,E,M,S,O,y,N,I,k),this.fillIndices(W,e,L),this.W.update(),this.F.update(),this.P.update()}}},n}(t.MeshGeometry),p=function(n){function r(i,r,e){return n.call(this,new m(i,100,100,r,e),new t.MeshMaterial(i))||this}return i(r,n),Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this.geometry.texture=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.geometry.width},set:function(t){this.geometry.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.geometry.height},set:function(t){this.geometry.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"borderSize",{get:function(){return this.geometry.cornerMask},set:function(t){this.geometry.borderSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cornerMask",{get:function(){return this.geometry.cornerMask},set:function(t){this.geometry.cornerMask=t},enumerable:!0,configurable:!0}),r.prototype._render=function(t){this.geometry.update(),n.prototype._render.call(this,t)},r.prototype.update=function(){this.geometry.update()},r}(t.Mesh),w=function(t){function n(n,i,r,e,u,s){var h=t.call(this,new Float32Array(64),new Float32Array(64),new Uint16Array(48))||this;return h.o=i,h.C=r,h.j=n,h.A=e,h.G=u,h.B=s,h.R=!0,h.L=NaN,h.W=h.getBuffer("aVertexPosition"),h._=h.W.data,h.F=h.getBuffer("aTextureCoord"),h._uvs=h.F.data,h.P=h.getIndex(),h.U=h.P.data,h}return i(n,t),Object.defineProperty(n.prototype,"borderMask",{get:function(){return this.G},set:function(t){this.G!==t&&(this.G=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cornerMask",{get:function(){return this.B},set:function(t){this.B!==t&&(this.B=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"borderSize",{get:function(){return this.A},set:function(t){this.A!==t&&(this.A=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t,this.R=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.R=!0,this.L=NaN)},enumerable:!0,configurable:!0}),n.prototype.fillVertices=function(t,n,i,r,e,u){n[t+0]=i,n[t+1]=e,n[t+2]=r,n[t+3]=e,n[t+4]=i,n[t+5]=u,n[t+6]=r,n[t+7]=u},n.prototype.fillIndices=function(t,n,i){n[t+0]=i+0,n[t+1]=i+1,n[t+2]=i+2,n[t+3]=i+1,n[t+4]=i+3,n[t+5]=i+2},n.prototype.fillUvsCorner=function(t,n,i,r,e,u,s,h,o,c,f,a,l){i||r?e?this.fillVertices(t,n,u,s,c,f):i&&r?this.fillVertices(t,n,o,h,c,f):i?this.fillVertices(t,n,s,h,c,f):this.fillVertices(t,n,u,s,f,a):this.fillVertices(t,n,s,s,f,f)},n.prototype.fillUvs=function(t,n,i,r,e,u,s,h,o){i?this.fillVertices(t,n,r,e,u,s):this.fillVertices(t,n,h,h,o,o)},n.prototype.update=function(){var t=this.j;if(t.valid){var n=t._updateID;if(this.R||this.L!==n){this.R=!1,this.L=n;var i=this._,e=this._uvs,u=this.U,s=this.o,o=this.C,c=this.A,f=Math.min(.5*s,c),a=Math.max(.5*s,s-c),l=s,v=Math.min(.5*o,c),b=Math.max(.5*o,o-c),d=o,g=t._uvs,m=g.x0,p=g.x1,w=g.y0,D=g.y3,T=(p-m)*(c/t.width),O=(D-w)*(c/t.height),S=m,M=m+T,E=p-T,k=p,I=w,N=w+O,y=D-O,x=D,C=this.G,j=!(C&r.TOP),A=!(C&r.BOTTOM),B=!(C&r.LEFT),R=!(C&r.RIGHT),L=this.B,W=!(L&h.TOP_LEFT),_=!(L&h.TOP_RIGHT),F=!(L&h.BOTTOM_LEFT),P=!(L&h.BOTTOM_RIGHT),U=0,z=0,G=0;this.fillVertices(U,i,0,f,0,v),this.fillUvsCorner(U,e,j,B,W,S,M,E,k,I,N,y,x),this.fillIndices(G,u,z),U+=8,z+=4,G+=6,this.fillVertices(U,i,f,a,0,v),this.fillUvs(U,e,j,M,E,I,N,M,N),this.fillIndices(G,u,z),U+=8,z+=4,G+=6,this.fillVertices(U,i,l,a,0,v),this.fillUvsCorner(U,e,j,R,_,S,M,E,k,I,N,y,x),this.fillIndices(G,u,z),U+=8,z+=4,G+=6,this.fillVertices(U,i,0,f,v,b),this.fillUvs(U,e,B,S,M,N,y,M,N),this.fillIndices(G,u,z),U+=8,z+=4,G+=6,this.fillVertices(U,i,a,l,v,b),this.fillUvs(U,e,R,E,k,N,y,E,y),this.fillIndices(G,u,z),U+=8,z+=4,G+=6,this.fillVertices(U,i,0,f,d,b),this.fillUvsCorner(U,e,A,B,F,S,M,E,k,I,N,y,x),this.fillIndices(G,u,z),U+=8,z+=4,G+=6,this.fillVertices(U,i,f,a,b,d),this.fillUvs(U,e,A,M,E,y,x,E,y),this.fillIndices(G,u,z),U+=8,z+=4,G+=6,this.fillVertices(U,i,l,a,d,b),this.fillUvsCorner(U,e,A,R,P,k,E,M,S,x,y,N,I),this.fillIndices(G,u,z),this.W.update(),this.F.update(),this.P.update()}}},n}(t.MeshGeometry),D=function(n){function r(i,r,e,u){return n.call(this,new w(i,100,100,r,e,u),new t.MeshMaterial(i))||this}return i(r,n),Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this.geometry.texture=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.geometry.width},set:function(t){this.geometry.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.geometry.height},set:function(t){this.geometry.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"borderSize",{get:function(){return this.geometry.borderSize},set:function(t){this.geometry.borderSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"borderMask",{get:function(){return this.geometry.borderMask},set:function(t){this.geometry.borderMask=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cornerMask",{get:function(){return this.geometry.cornerMask},set:function(t){this.geometry.cornerMask=t},enumerable:!0,configurable:!0}),r.prototype._render=function(t){this.geometry.update(),n.prototype._render.call(this,t)},r.prototype.update=function(){this.geometry.update()},r}(t.Mesh),T=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(D),O=function(){function t(t){var n=t.theme,i=t.corner,r=i.getRadius(),e=r+1,u=i.getMask(),s=this.V=new p(n.getBackgroundTexture(r),e,u);t.appendRenderable(s,!0);var h=t.state,o=t.border,c=o.getWidth(h),f=o.getMask(h),a=this.K=new D(n.getBorderTexture(r,c),e,f,u);t.appendRenderable(a,!1);var l=t.outline,v=l.getWidth(h),b=l.getMask(h),d=this.J=new T(n.getBorderTexture(r,v),e,b,u);t.appendRenderable(d,!1),this.Z=r,this.q=r,this.$=c,this.tt=r,this.nt=v,t.addReflowable(this)}return t.prototype.onReflow=function(t,n,i){var r=t.theme,e=t.state,u=t.corner,s=u.getRadius(),h=s+1,o=u.getMask(),c=t.background,f=this.V,a=c.getColor(e);if(null!=a){var l=c.getAlpha(e);0<l?(this.Z!==s&&(this.Z=s,f.texture=r.getBackgroundTexture(s),f.borderSize=h),f.tint=a,f.alpha=l,f.width=n,f.height=i,f.cornerMask=o,f.visible=!0):f.visible=!1}else f.visible=!1;var v=t.border,b=this.K,d=v.getColor(e);if(null!=d){var g=v.getAlpha(e);if(0<g){var m=v.getWidth(e);this.q===s&&this.$===m||(this.q=s,this.$=m,b.texture=r.getBorderTexture(s,m),b.borderSize=h);var p=v.getAlign(e),w=v.getMask(e);b.tint=d,b.alpha=g;var D=p*m;b.x=-D,b.y=-D,b.width=n+2*D,b.height=i+2*D,b.borderMask=w,b.cornerMask=o,b.visible=!0}else b.visible=!1}else b.visible=!1;var T=t.outline,O=this.J,S=T.getColor(e);if(null!=S){var M=T.getAlpha(e);if(0<M){var E=T.getWidth(e);this.tt===s&&this.nt===E||(this.tt=s,this.nt=E,O.texture=r.getBorderTexture(s,E),O.borderSize=h);var k=T.getMask(e),I=T.getOffset(e),N=T.getAlign(e);O.tint=S,O.alpha=M;var y=I+N*E;O.x=-y,O.y=-y,O.width=n+2*y,O.height=i+2*y,O.borderMask=k,O.cornerMask=o,O.visible=!0}else O.visible=!1}else O.visible=!1},t}();!function(t){t[t.NONE=0]="NONE",t[t.HOVERED=1]="HOVERED",t[t.ACTIVE=2]="ACTIVE",t[t.ACTIVE_IN=4]="ACTIVE_IN",t[t.FOCUSED=8]="FOCUSED",t[t.FOCUSED_IN=16]="FOCUSED_IN",t[t.UNFOCUSABLE=32]="UNFOCUSABLE",t[t.FOCUS_ROOT=64]="FOCUS_ROOT",t[t.READ_ONLY=128]="READ_ONLY",t[t.DISABLED=256]="DISABLED",t[t.DRAGGING=512]="DRAGGING",t[t.PRESSED=1024]="PRESSED",t[t.INVALID=2048]="INVALID",t[t.SUCCEEDED=4096]="SUCCEEDED",t[t.FAILED=8192]="FAILED",t[t.EXTENSION_0=1048576]="EXTENSION_0",t[t.EXTENSION_1=2097152]="EXTENSION_1",t[t.EXTENSION_2=4194304]="EXTENSION_2",t[t.EXTENSION_3=8388608]="EXTENSION_3",t[t.CUSTOM=16777216]="CUSTOM"}(v||(v={}));var S,M=function(){function t(){}return t.is=function(t,n){return 0!=(t&n)},t.isHovered=function(n){return t.is(n,v.HOVERED)},t.isDragging=function(n){return t.is(n,v.DRAGGING)},t.isFocused=function(n){return t.is(n,v.FOCUSED)},t.isFocusedIn=function(n){return t.is(n,v.FOCUSED|v.FOCUSED_IN)},t.isActive=function(n){return t.is(n,v.ACTIVE)},t.isActiveIn=function(n){return t.is(n,v.ACTIVE|v.ACTIVE_IN)},t.isNotActive=function(n){return t.is(n,v.DISABLED)||!t.is(n,v.ACTIVE)},t.isPressed=function(n){return t.is(n,v.PRESSED)},t.isDisabled=function(n){return t.is(n,v.DISABLED)},t.isReadOnly=function(n){return t.is(n,v.READ_ONLY)},t.isActionable=function(n){return!t.is(n,v.DISABLED|v.READ_ONLY)},t.isInvalid=function(n){return t.is(n,v.INVALID)},t.isSucceeded=function(n){return t.is(n,v.SUCCEEDED)},t.isFailed=function(n){return t.is(n,v.FAILED)},t.bind=function(t,n,i,r){t.setState(n,r(i.state)),i.on("statechange",(function(i){t.setState(n,r(i))}))},t.disable=function(n,i,r){void 0===r&&(r=t.isNotActive),t.bind(n,v.DISABLED,i,r)},t}();!function(t){t[t.NONE=0]="NONE",t[t.UNSTORABLE=1]="UNSTORABLE",t[t.CLEAR=2]="CLEAR"}(S||(S={}));var E,k=function(){function t(){}return t.prototype.execute=function(){return!0},t.prototype.redo=function(){throw new Error("Method not implemented.")},t.prototype.undo=function(){throw new Error("Method not implemented.")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return S.UNSTORABLE|S.CLEAR},t}(),I=function(){function t(){}return t.prototype.execute=function(){throw new Error("Not supported")},t.prototype.redo=function(){throw new Error("Not supported")},t.prototype.undo=function(){throw new Error("Not supported")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return S.UNSTORABLE},t}(),N=function(){function t(){}return t.prototype.execute=function(){throw new Error("Not supported")},t.prototype.redo=function(){throw new Error("Not supported")},t.prototype.undo=function(){throw new Error("Not supported")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return S.UNSTORABLE},t}(),y=function(t){return 0==(t.getFlag()&S.UNSTORABLE)},x=function(t){function n(){var n=t.call(this)||this;return n.it=0,n.rt=[],n.et=[],n.ut=null,n}return i(n,t),n.prototype.last=function(){var t=this.rt,n=this.et;return n.length<=0?0<t.length?t[t.length-1]:null:n[n.length-1]},n.prototype.push=function(t){this.et.push(t),this.next()},n.prototype.next=function(){var t=this;if(null==this.ut){var n=this.et;if(0<n.length){var i=n.shift();if(null!=i)if(i instanceof N){var r=this.rt;if(this.it<r.length){var e=r[r.length-1-this.it];this.it+=1,this.emit("change",this),!0===(u=e.undo())?this.onSuccess(i):!1===u?this.onFail(i):this.ut=u.then((function(){t.onSuccess(i)}),(function(){t.onFail(i)}))}}else if(i instanceof I)r=this.rt,0<this.it&&(e=r[r.length-this.it],this.it-=1,this.emit("change",this),!0===(u=e.redo())?this.onSuccess(i):!1===u?this.onFail(i):this.ut=u.then((function(){t.onSuccess(i)}),(function(){t.onFail(i)})));else{var u,s=0!=(i.getFlag()&S.CLEAR),h=y(i);if(s||h){var o=s?this.rt.length:this.it;0<o&&(this.remove(o),this.it=0,this.emit("change",this)),this.cleanup()}!0===(u=i.execute())?this.onSuccess(i):!1===u?this.onFail(i):this.ut=u.then((function(){t.onSuccess(i)}),(function(){t.onFail(i)}))}}}},n.prototype.cleanup=function(){var t=this.rt,n=t.length-100;if(0<n)for(var i=0;i<n;++i)t[i].destroy(),t.shift()},n.prototype.remove=function(t){var n=this.rt;if(0<t){var i=Math.max(0,n.length-t);if(0<(t=n.length-i)){for(var r=i,e=n.length;r<e;++r)n[r].destroy();return n.splice(i,n.length-i),!0}}return!1},n.prototype.onSuccess=function(t){this.ut=null,y(t)?(this.rt.push(t),this.emit("dirty",this)):(t instanceof N||t instanceof I)&&this.emit("dirty",this),this.emit("change",this),this.next()},n.prototype.onFail=function(t){this.ut=null;var n=this.et;t.destroy();for(var i=0,r=n.length;i<r;++i)n[i].destroy();n.length=0,this.emit("change",this)},n.prototype.size=function(){return this.rt.length},n.prototype.clear=function(){this.push(new k)},n.prototype.redo=function(){this.isRedoable()&&(this.et.push(new I),this.next())},n.prototype.undo=function(){this.isUndoable()&&(this.et.push(new N),this.next())},n.prototype.isRedoable=function(){return 0<this.it&&null==this.ut},n.prototype.isUndoable=function(){return this.it<this.rt.length&&null==this.ut},n}(t.utils.EventEmitter),C=function(t){return null!=t&&"setState"in t},j=function(t){return null!=t&&"children"in t},A=function(t){return null!=t&&"select"in t},B=function(){function t(){this.st=null}return t.prototype.setFocused=function(t,n,i){if(n){var r=this.st;return r!==t?(null!=r&&r.setState(v.FOCUSED,!1),this.st=t,null!=t&&this.isFocusable(t)&&(t.setState(v.FOCUSED,!0),i&&A(t)&&t.select()),r):null}return null!=t&&this.st===t?(t.setState(v.FOCUSED,!1),i&&A(t)&&t.select(),t):null},t.prototype.getFocused=function(){return this.st},t.prototype.findFocusableParent=function(t){for(var n=t;null!=n;){if(this.isFocusable(n))return n;n=n.parent}return null},t.prototype.isFocusable=function(t){return C(t)&&!t.hasState(v.DISABLED|v.UNFOCUSABLE)&&t.visible},t.prototype.isFocusRoot=function(t){return C(t)&&t.hasState(v.FOCUS_ROOT)&&t.visible},t.prototype.findFocusable=function(t,n,i,r){if(r){if(null!=(h=this.findFocusableNext(t,n,i)))return h;var e=t.parent;if(null!=e&&0<=(c=(o=e.children).indexOf(t))){for(var u=c+1,s=o.length;u<s;++u)if(null!=(a=this.findFocusableNext(o[u],!0,!0)))return a;if(this.isFocusRoot(e))for(u=0,s=c+1;u<s;++u)if(null!=(a=this.findFocusableNext(o[u],!0,!0)))return a;return this.findFocusable(e,!1,!1,!0)}}else{var h;if(null!=(h=this.findFocusablePrevious(t,n,i)))return h;var o,c,f=t.parent;if(null!=f&&0<=(c=(o=f.children).indexOf(t))){for(u=c-1;0<=u;--u)if(null!=(a=this.findFocusablePrevious(o[u],!0,!0)))return a;if(this.isFocusRoot(f)){for(u=o.length-1;c<=u;--u){var a;if(null!=(a=this.findFocusablePrevious(o[u],!0,!0)))return a}return f}return this.findFocusable(f,!0,!1,!1)}}return null},t.prototype.findFocusableNext=function(t,n,i){if(n&&this.isFocusable(t))return t;if(i&&j(t)&&t.visible)for(var r=t.children,e=0,u=r.length;e<u;++e){var s=this.findFocusableNext(r[e],!0,!0);if(null!=s)return s}return this.isFocusRoot(t)?t:null},t.prototype.findFocusablePrevious=function(t,n,i){if(i&&j(t)&&t.visible)for(var r=t.children,e=r.length-1;0<=e;--e){var u=this.findFocusablePrevious(r[e],!0,!0);if(null!=u)return u}return n&&this.isFocusable(t)?t:this.isFocusRoot(t)?t:null},t}(),R=function(){function t(){}return t.isActivateKey=function(t){return"Space"===t.key||"Enter"===t.key||32===t.which||13===t.which},t.isArrowUpKey=function(t){return"ArrowUp"===t.key||38===t.which},t.isArrowDownKey=function(t){return"ArrowDown"===t.key||40===t.which},t.isArrowLeftKey=function(t){return"ArrowLeft"===t.key||37===t.which},t.isArrowRightKey=function(t){return"ArrowRight"===t.key||39===t.which},t.isCancelKey=function(t){return"Esc"===t.key||27===t.which},t.isFocusKey=function(t){return"Tab"===t.key||9===t.which},t.isUndoKey=function(t){return t.ctrlKey&&("z"===t.key||90===t.which)},t.isRedoKey=function(t){return t.ctrlKey&&("y"===t.key||89===t.which)},t.isSaveKey=function(t){return t.ctrlKey&&!t.shiftKey&&("s"===t.key||83===t.which)},t.isSaveAsKey=function(t){return t.ctrlKey&&t.shiftKey&&("S"===t.key||83===t.which)},t.isDeleteKey=function(t){return"Delete"===t.key||46===t.which},t.isSelectAllKey=function(t){return t.ctrlKey&&!t.shiftKey&&("a"===t.key||65===t.which)},t.isOkKey=function(t){return"Enter"===t.key||13===t.which},t.getFocusDirection=function(t){return!0!==t.shiftKey},t.toShortcut=function(t){if(o(t)){var n,i=t,r=i.indexOf("->"),e=void 0;0<=r?(e=i.substring(0,r).trim(),n=i.substring(r+2).trim()):e=i.trim();var u=e.toLowerCase().split("+");return function(t){var n=t.key;if(n.length<=1){t.shift&&(t.key=n.toUpperCase());var i=n.charCodeAt(0);t.which=97<=i&&i<=122?i-32:i}else switch(n){case"Enter":t.which=13;break;case"Space":t.key=" ",t.which=32;break;case"Escape":t.which=27;break;case"F1":t.which=112;break;case"F2":t.which=113;break;case"F3":t.which=114;break;case"F4":t.which=115;break;case"F5":t.which=116;break;case"F6":t.which=117;break;case"F7":t.which=118;break;case"F8":t.which=119;break;case"F9":t.which=120;break;case"F10":t.which=121;break;case"F11":t.which=122;break;case"F12":t.which=123;break;case"CapsLock":t.shift?t.which=20:t.which=240;break;case"ArrowUp":t.which=38;break;case"ArrowDown":t.which=40;break;case"ArrowLeft":t.which=37;break;case"ArrowRight":t.which=39;break;case"Insert":t.which=45;break;case"Delete":t.which=46;break;case"PageUp":t.which=33;break;case"PageDown":t.which=34;break;case"Backspace":t.which=8;break;case";":t.which=187;break;case"Pause":t.which=19;break;case"ScrollLock":t.which=145;break;case"Tab":t.which=9}return t}({alt:0<=u.indexOf("alt"),ctrl:0<=u.indexOf("ctrl"),shift:0<=u.indexOf("shift"),key:u[u.length-1],which:0,event:n})}return t},t.toString=function(t){var n=[];return t.ctrl&&n.push("Ctrl"),t.shift&&n.push("Shift"),t.alt&&n.push("Alt"),n.push(t.key.toUpperCase()),n.join("+")},t.on=function(t,n,i){var r=this.toShortcut(n);document.body.addEventListener("keydown",(function(n){n.altKey!==r.alt||n.ctrlKey!==r.ctrl||n.shiftKey!==r.shift||n.key!==r.key&&n.which!==r.which||(t.isActionable()&&(null!=r.event?t.emit(r.event):null!=i&&i(n)),n.preventDefault())}))},t}(),L=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(t,n,i){var r=this;t.addEventListener("keydown",(function(t){r.emit("keydown",t);var e=i.getFocused();if(null!=e)for(var u=e;null!=u;){if(r.hasOnKeyDown(u)&&u.onKeyDown(t))return;u=u.parent}if(R.isFocusKey(t)){var s=R.getFocusDirection(t),h=null!=e?i.findFocusable(e,!1,e.hasState(v.FOCUS_ROOT)||s,s):i.findFocusable(n,!1,!0,s);null!=h&&(i.setFocused(h,!0,!0),t.preventDefault(),t.stopImmediatePropagation())}})),t.addEventListener("keyup",(function(t){r.emit("keyup",t);var n=i.getFocused();if(null!=n)for(var e=n;null!=e;){if(r.hasOnKeyUp(e)&&e.onKeyUp(t))return;e=e.parent}}))},n.prototype.hasOnKeyDown=function(t){return"onKeyDown"in t},n.prototype.hasOnKeyUp=function(t){return"onKeyUp"in t},n}(t.utils.EventEmitter),W=function(){function t(){}return t.getFocusController=function(){return null==this.FOCUS&&(this.FOCUS=new B),this.FOCUS},t.setFocusController=function(t){var n=this.FOCUS;return this.FOCUS=t,n},t.getKeyboardController=function(){return null==this.KEYBOARD&&(this.KEYBOARD=new L),this.KEYBOARD},t.setKeyboardController=function(t){var n=this.KEYBOARD;return this.KEYBOARD=t,n},t.getCommandController=function(){return null==this.COMMAND&&(this.COMMAND=new x),this.COMMAND},t.setCommandController=function(t){var n=this.COMMAND;return this.COMMAND=t,n},t.getDocumentController=function(){if(null==this.DOCUMENT)throw new Error("Not supported");return this.DOCUMENT},t.setDocumentController=function(t){var n=this.DOCUMENT;return this.DOCUMENT=t,n},t}();!function(t){t[t.OPEN=0]="OPEN",t[t.CLOSE=1]="CLOSE",t[t.PARENSESIS=2]="PARENSESIS",t[t.ADD_OR_PLUS=3]="ADD_OR_PLUS",t[t.SUB_OR_MINUS=4]="SUB_OR_MINUS",t[t.PLUS=5]="PLUS",t[t.MINUS=6]="MINUS",t[t.ADD=7]="ADD",t[t.SUB=8]="SUB",t[t.MUL=9]="MUL",t[t.DIV=10]="DIV",t[t.PARENT=11]="PARENT",t[t.SELF=12]="SELF",t[t.PADDING=13]="PADDING",t[t.CURRENT=14]="CURRENT",t[t.NUMBER=15]="NUMBER"}(E||(E={}));var _,F={"+":3,"-":4,"*":9,"/":10,"(":0,")":1},P={"%":11,s:12,p:13,c:14},U=function(){function t(t){var n=this.toToken(t);if(this.toParensesis(n,0),this.toUnary(n),this.toArithmetic(n,9,10),this.toArithmetic(n,7,8),1===n.length){var i=n[0];if(!a(i))return void(this.ht=i)}throw new Error("Failed to parse '"+t+"'")}return t.prototype.toParensesis=function(t,n){for(var i=n,r=t.length;i<r;++i)if(0===t[i]){for(var e=i+1,u=t.length;e<u;++e)switch(t[e]){case 1:var s=t.splice(i+1,e-i);return s.length-=1,void(t[i]=[2,s]);case 0:this.toParensesis(t,e),u=t.length}throw new Error("Malformed parensesis")}},t.prototype.toUnaryNode=function(t){a(t)||2!==t[0]||this.toUnary(t[1])},t.prototype.toUnary=function(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(3===r||4===r)if(n<=0||a(t[n-1])){if(!(n+1<i)||a(t[n+1]))throw new Error("Malformed unary operator");var e=t.splice(n+1,1)[0],u=3===r?5:6;t[n]=[u,e],i=t.length,this.toUnaryNode(e)}else u=3===r?7:8,t[n]=u;else this.toUnaryNode(r),i=t.length}},t.prototype.toArithmeticNode=function(t,n,i){a(t)||(2===t[0]?this.toArithmetic(t[1],n,i):5===t[0]||6===t[0]?this.toArithmeticNode(t[1],n,i):7!==t[0]&&8!==t[0]&&9!==t[0]&&10!==t[0]||(this.toArithmeticNode(t[1],n,i),this.toArithmeticNode(t[2],n,i)))},t.prototype.toArithmetic=function(t,n,i){for(var r=0,e=t.length;r<e;++r){var u=t[r];if(u===n||u===i){if(0<r&&r+1<e){var s=t[r-1],h=t[r+1];if(!a(s)&&!a(h)){t.splice(r,2),t[r-1]=[u,s,h],r-=1,e=t.length,this.toArithmeticNode(s,n,i),this.toArithmeticNode(h,n,i);continue}}throw new Error("Malformed operands for the operator "+u)}this.toArithmeticNode(u,n,i),e=t.length}},t.prototype.toToken=function(t){for(var n=/(?:\+|-|\*|\/|\(|\)|(?:\d+(?:\.\d*)?[%psc]?))/g,i=[];;){var r=n.exec(t);if(null==r)break;var e=r[0],u=F[e];if(null!=u)i.push(u);else{var s=parseFloat(e);if(s!=s)throw new Error("Unexpected token '"+e+"' at "+r.index+" in '"+t+"'");var h=P[e[e.length-1]];null!=h?i.push([h,.01*s]):i.push([15,s])}}return i},t.prototype.evaluate=function(t,n,i,r,e){switch(t[0]){case 2:return this.evaluate(t[1][0],n,i,r,e);case 5:return+this.evaluate(t[1],n,i,r,e);case 6:return-this.evaluate(t[1],n,i,r,e);case 7:return this.evaluate(t[1],n,i,r,e)+this.evaluate(t[2],n,i,r,e);case 8:return this.evaluate(t[1],n,i,r,e)-this.evaluate(t[2],n,i,r,e);case 9:return this.evaluate(t[1],n,i,r,e)*this.evaluate(t[2],n,i,r,e);case 10:return this.evaluate(t[1],n,i,r,e)/this.evaluate(t[2],n,i,r,e);case 11:return t[1]*n;case 12:return t[1]*i;case 13:return t[1]*r;case 14:return t[1]*e;case 15:return t[1]}return 0},t.prototype.calculate=function(t,n,i,r){return this.evaluate(this.ht,t,n,i,r)},t}(),z=function(){function t(){}return t.position=function(t){return this.from(t,!0)},t.size=function(t){return this.from(t,!1)},t.from=function(n,i){if(null==n||a(n))return null;if(o(n)){if(i)switch(n){case"center":return t.POSITION.CENTER;case"padding":return t.POSITION.PADDING}else switch(n){case"100%":case"maximized":return t.SIZE.MAXIMIZED;case"padding":return t.SIZE.PADDING}var r=new U(n);return function(t,n,i,e){return r.calculate(t,n,i,e)}}if(u(n))return n;var e=n;return function(t,n,i,r){return e.calculate(t,n,i,r)}},t.POSITION={PADDING:function(t,n,i){return i},CENTER:function(t,n){return.5*(t-n)}},t.SIZE={MAXIMIZED:function(t){return t},PADDING:function(t,n,i){return t-i}},t}();!function(t){t[t.NONE=0]="NONE",t[t.WIDTH=1]="WIDTH",t[t.HEIGHT=2]="HEIGHT"}(_||(_={}));var G,H=function(){function t(t,n){this.ot=t,this.ct=n,this.ft=0}return Object.defineProperty(t.prototype,"x",{get:function(){var t=this.ct;return null!=t.x?t.x:this.ot.x},set:function(t){var n=this.ot;if(a(t))n.x=t;else{var i=this.ct,r=z.position(t);i.x!==r&&(i.x=r,n.layout())}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){var t=this.ct;return null!=t.y?t.y:this.ot.y},set:function(t){var n=this.ot;if(a(t))n.y=t;else{var i=this.ct,r=z.position(t);i.y!==r&&(i.y=r,n.layout())}},enumerable:!0,configurable:!0}),t.prototype.toAutoWidth=function(){this.ft|=1},t.prototype.isWidthAuto=function(){return 0!=(1&this.ft)},Object.defineProperty(t.prototype,"width",{get:function(){var t=this.ct;return this.isWidthAuto()?"auto":null!=t.width?t.width:this.ot.width},set:function(t){if(a(t))this.ot.width=t;else if("auto"===t)this.isWidthAuto()||(this.toAutoWidth(),this.ot.toChildrenDirty(),e.update());else{var n=this.ct,i=z.size(t);n.width!==i&&(n.width=i,this.ot.layout())}},enumerable:!0,configurable:!0}),t.prototype.toAutoHeight=function(){this.ft|=2},t.prototype.isHeightAuto=function(){return 0!=(2&this.ft)},Object.defineProperty(t.prototype,"height",{get:function(){var t=this.ct;return this.isHeightAuto()?"auto":null!=t.height?t.height:this.ot.height},set:function(t){if(a(t))this.ot.height=t;else if("auto"===t)this.isHeightAuto()||(this.toAutoHeight(),this.ot.toChildrenDirty(),e.update());else{var n=this.ct,i=z.size(t);n.height!==i&&(n.height=i,this.ot.layout())}},enumerable:!0,configurable:!0}),t}();!function(t){t[t.NONE=0]="NONE",t[t.BEFORE=1]="BEFORE",t[t.AFTER=2]="AFTER",t[t.BOTH=3]="BOTH"}(G||(G={}));var V,X,Y,K=function(){function t(){}return t.setDefaultThemeClass=function(t){this.DEFAULT_THEME_CLASS=t},t.getDefaultThemeClass=function(){return this.DEFAULT_THEME_CLASS},t.getInstance=function(){if(null==this.INSTANCE){var t=this.getDefaultThemeClass();if(null==t)throw new Error("No default theme class found");this.INSTANCE=new t}return this.INSTANCE},t.setInstance=function(t){var n=this.INSTANCE;return this.INSTANCE=t,n},t.DEFAULT_THEME_CLASS=null,t.INSTANCE=null,t}(),J=function(){function t(){}return t.create=function(t){var n=this.at;return t in n?t+" "+ ++n[t]:(n[t]=1,t+" 1")},t.at={},t}(),Z=function(){function t(){}return Object.defineProperty(t,"touchable",{get:function(){return"ontouchstart"in document},enumerable:!0,configurable:!0}),Object.defineProperty(t,"tap",{get:function(){return"pointertap"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"down",{get:function(){return"pointerdown"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"enter",{get:function(){return"pointerenter"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"leave",{get:function(){return"pointerleave"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"move",{get:function(){return"pointermove"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"out",{get:function(){return"pointerout"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"over",{get:function(){return"pointerover"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"up",{get:function(){return"pointerup"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cancel",{get:function(){return"pointercancel"},enumerable:!0,configurable:!0}),t.toGlobal=function(t,n){var i=e.getInstance().renderer.plugins.interaction;if("touches"in t){var r=t.changedTouches,u=r[r.length-1];null!=u?i.mapPositionToPoint(n,u.clientX,u.clientY):i.mapPositionToPoint(n,0,0)}else i.mapPositionToPoint(n,t.clientX,t.clientY);return n},t.onClick=function(t,n){var i=this;if(this.touchable){var r=!1,u=0,s=0,h=function(){r=!1,f.off(o,c)};t.on("click",(function(t){r&&h(),n(t)}));var o=this.up,c=function(e){r&&(h(),i.contains(t,e.target)&&function(t){var n=t.data.global,r=Math.abs(u-n.x),e=Math.abs(s-n.y),h=i.CLICK_DISTANCE_THRESHOLD;return r<h&&e<h}(e)&&n(e))},f=e.getInstance().renderer.plugins.interaction;t.on(this.down,(function(t){if(!r){r=!0;var n=t.data.global;u=n.x,s=n.y,f.off(o,c),f.once(o,c)}}))}else t.on("click",n)},t.onLongClick=function(t,n,i){var r=this;if(this.touchable){var u=!1,s=0,h=0,o=null,c=function(){null!=o&&(clearTimeout(o),o=null)},f=function(){u=!1,g.off(l,b),g.off(v,d),c()},a=function(t){var n=t.data.global,i=Math.abs(s-n.x),e=Math.abs(h-n.y),u=r.CLICK_DISTANCE_THRESHOLD;return i<u&&e<u};t.on("click",(function(t){u&&f(),n(t)}));var l=this.up,v=this.move,b=function(i){u&&(f(),r.contains(t,i.target)&&a(i)&&n(i))},d=function(n){u&&r.contains(t,n.target)&&(a(n)||f())},g=e.getInstance().renderer.plugins.interaction;t.on(this.down,(function(t){if(!u){u=!0;var n=t.data.global;s=n.x,h=n.y,c(),"touches"in t.data.originalEvent&&(o=window.setTimeout((function(){u&&(f(),i(t))}),r.LONG_CLICK_THRESHOLD)),g.off(l,b),g.off(v,d),g.once(l,b),g.on(v,d)}}))}else t.on("click",n)},t.onDblClick=function(t,n){var i=this;if(this.touchable){var r=0,e=0,u=0,s=0;t.addEventListener("dblclick",n),t.addEventListener("touchend",(function(t){if(1===r||3===r){var h=t.changedTouches,o=h[h.length-1];if(null!=o){var c=e-o.clientX,f=u-o.clientY;if(Math.abs(c)+Math.abs(f)<i.CLICK_DISTANCE_THRESHOLD)return void(4===(r+=1)?(r=0,t.timeStamp-s<i.DBLCLICK_INTERVAL_THRESHOLD?n(t):(s=t.timeStamp,r=2)):s=t.timeStamp)}}r=0})),t.addEventListener("touchstart",(function(t){if(0===r){if(null!=(n=t.touches.item(t.touches.length-1)))return r=1,e=n.clientX,void(u=n.clientY)}else if(2===r){var n;if(null!=(n=t.touches.item(t.touches.length-1)))return r=3,e=n.clientX,void(u=n.clientY)}r=0}))}else t.addEventListener("dblclick",n)},t.contains=function(t,n){for(var i=n;null!=i&&i!==t;)i=i.parent;return i===t},t.CLICK_DISTANCE_THRESHOLD=5,t.DBLCLICK_INTERVAL_THRESHOLD=333,t.LONG_CLICK_THRESHOLD=750,t}(),q=function(t){if(null!=t&&null!=t.theme){var n=t.theme;return o(n)?K.getInstance().get(n):n}return null},Q=function(t){if(null!=t&&(null!=t.shortcuts||null!=t.shortcut)){var n=[];if(null!=t.shortcut&&n.push(R.toShortcut(t.shortcut)),null!=t.shortcuts)for(var i=t.shortcuts,r=0,e=i.length;r<e;++r)R.toShortcut(i[r]);return n}},$=function(n){function r(t){var i=n.call(this)||this,r=i.lt=i.transform;i.it=new g(r.position,(function(){i.onMove()})),i.vt=new g(r.scale,(function(){i.onScale()})),i.bt=new g(r.skew,(function(){i.onSkew()})),i.gt=t;var u=i.ct={};i.pt=new H(i,u),i.R=!0,i.wt=!1,i.Dt=!1,i.Tt=null,i.Ot=t&&null!=t.name?t.name:J.create(i.getType());var h=i.t=q(t)||i.getThemeDefault();i.St=[],i.Mt=[],i.Et=[],i.kt=t&&null!=t.clear?o(t.clear)?G[t.clear]:t.clear:h.getClearType(),i.It=new d(h,t,(function(){i.layout(),i.toChildrenDirty(),e.update()}));var m=function(){i.toDirty(),e.update()};i.Nt=new s(h,t,m),i.yt=new c(h,t,m),i.xt=new b(h,t,m),i.Ct=new l(h,t,m),i.initReflowable();var p=r.position,w=t&&null!=t.x?t.x:h.getX();a(w)?p.x=w:(p.x=0,u.x=z.position(w));var D=t&&null!=t.y?t.y:h.getY();a(D)?p.y=D:(p.y=0,u.y=z.position(D));var T=t&&null!=t.width?t.width:h.getWidth();a(T)?i.o=T:"auto"===T?(i.o=100,i.pt.toAutoWidth()):(i.o=100,u.width=z.size(T));var O=t&&null!=t.height?t.height:h.getHeight();a(O)?i.C=O:"auto"===O?(i.C=100,i.pt.toAutoHeight()):(i.C=100,u.height=z.size(O)),t&&null!=t.visible&&(i.visible=t.visible),i.jt=v.NONE,i.At=v.NONE;var S=t&&null!=t.interactive?o(t.interactive)?f[t.interactive]:t.interactive:h.getInteractive();if(i.interactive=0!=(S&f.SELF),i.interactiveChildren=0!=(S&f.CHILDREN),null!=t){var M=t.on;if(null!=M)for(var E in M)i.on(E,M[E])}i.Bt=t&&null!=t.title?t.title:h.getTitle(),i.Rt=t&&null!=t.weight?t.weight:h.getWeight(),i.Lt=function(){e.update()};var k=t&&t.shadow||h.getShadow();k&&(i.shadow=k),i.on(Z.over,(function(t){i.setHovered(!0),t.target===i&&i.applyTitle()})),i.on(Z.out,(function(){i.setHovered(!1)})),i.on(Z.down,(function(t){i.onDown(t)})),i.on("added",(function(){i.layout(),(i.isDirty()||i.hasDirty())&&i.toParentHasDirty(),i.Dt&&i.toParentChildrenDirty(),i.updateState(),e.update()})),i.on("removed",(function(){i.blur(!0),i.updateState(),e.update()}));var I=i.Wt=Q(t);if(null!=I)for(var N=function(t){i.onShortcut(t)},y=0,x=I.length;y<x;++y)R.on(i,I[y],N);if(i.init(t),t&&null!=t.state)if(o(t.state))i.setState(v[t.state],!0);else if(a(t.state))i.setState(t.state,!0);else{var C=t.state;for(y=0,x=C.length;y<x;++y)i.setState(v[C[y]],!0)}if(t&&null!=t.parent&&t.parent.addChild(i),t&&null!=t.children){var j=t.children;for(y=0,x=j.length;y<x;++y){var A=j[y];null!=A&&i.addChild(A)}}return i.emit("init",i),i}return i(r,n),r.prototype.prependRenderable=function(t,n){t.parent=this,(n?this.St:this.Mt).unshift(t)},r.prototype.appendRenderable=function(t,n){t.parent=this,(n?this.St:this.Mt).push(t)},r.prototype.removeRenderable=function(t,n){t.parent=null;var i=n?this.St:this.Mt,r=i.indexOf(t);0<=r&&i.splice(r,1)},r.prototype.addReflowable=function(t){this.Et.push(t)},r.prototype.removeReflowable=function(t){var n=this.Et,i=n.indexOf(t);0<=i&&n.splice(i,1)},r.prototype.initReflowable=function(){new O(this)},r.prototype.onChildrenChange=function(){this.toChildrenDirty(),n.prototype.onChildrenChange.call(this)},r.prototype.onShortcut=function(t){},Object.defineProperty(r.prototype,"coordinate",{get:function(){return this.pt},enumerable:!0,configurable:!0}),r.prototype.init=function(t){},Object.defineProperty(r.prototype,"weight",{get:function(){return this.Rt},enumerable:!0,configurable:!0}),r.prototype.onMove=function(){this.moveChildren(),e.update(),this.emit("move",this)},r.prototype.resize=function(t,n){var i=this.o,r=this.C,e=i!==t,u=r!==n;e&&(this.o=t),u&&(this.C=n);var s,h=e||u;if(h&&this.onResize(t,n,i,r),e&&null!=(s=this.ct).x){var o=this.lt.position,c=this.getParentOfSize();this.x=s.x(c.width,t,c.padding.getLeft(),o.x)}if(u&&null!=(s=this.ct).y){o=this.lt.position;var f=this.getParentOfSize();this.y=s.y(f.height,n,f.padding.getTop(),o.y)}return h},r.prototype.getClearType=function(){return this.kt},r.prototype.onResize=function(t,n,i,r){this.toDirty(),this.toChildrenDirty(),this.resizeChildren(),e.update(),this.emit("resize",t,n,i,r,this)},r.prototype.onScale=function(){e.update(),this.emit("scale",this)},r.prototype.onSkew=function(){e.update(),this.emit("skew",this)},Object.defineProperty(r.prototype,"type",{get:function(){return this.getType()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this.Ot},set:function(t){this.Ot=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.it.x},set:function(t){this.it.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.it.y},set:function(t){this.it.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.o},set:function(t){var n=this.o;if(n!==t){this.o=t;var i=this.C;this.onResize(t,i,n,i);var r=this.ct;if(null!=r.x){var e=this.lt.position,u=this.getParentOfSize();this.x=r.x(u.width,t,u.padding.getLeft(),e.x)}}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.C},set:function(t){var n=this.C;if(n!==t){this.C=t;var i=this.o;this.onResize(i,t,i,n);var r=this.ct;if(null!=r.y){var e=this.lt.position,u=this.getParentOfSize();this.y=r.y(u.height,t,u.padding.getTop(),e.y)}}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.it},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this.vt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"skew",{get:function(){return this.bt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this.It},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"corner",{get:function(){return this.Ct},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"background",{get:function(){return this.Nt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"border",{get:function(){return this.yt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"outline",{get:function(){return this.xt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"unsafe",{get:function(){return this.lt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"title",{get:function(){return this.Bt},set:function(t){this.Bt!==t&&(this.Bt=t,this.isHovered()&&this.applyTitle())},enumerable:!0,configurable:!0}),r.prototype.applyTitle=function(){e.getInstance().view.title=this.Bt},r.prototype.show=function(){return this.visible||(this.visible=!0,this.toParentChildrenDirty(),e.update()),this},r.prototype.isShown=function(){return this.visible},r.prototype.hide=function(){return this.visible&&(this.visible=!1,this.toParentChildrenDirty(),e.update()),this},r.prototype.isHidden=function(){return!this.visible},r.prototype.toDirty=function(){return!this.R&&(this.R=!0,this.toParentHasDirty(),!0)},r.prototype.toHasDirty=function(){return!this.wt&&(this.wt=!0,this.toParentHasDirty(),!0)},r.prototype.toParentHasDirty=function(){var t=this.parent;t instanceof r&&t.toHasDirty()},r.prototype.toChildrenDirty=function(){return!this.Dt&&(this.Dt=!0,this.onChildrenDirty(),this.toParentChildrenDirty(),!0)},r.prototype.toParentChildrenDirty=function(){var t=this.parent;t instanceof r&&t.toChildrenDirty()},r.prototype.isChildrenDirty=function(){return this.Dt},r.prototype.onChildrenDirty=function(){},r.prototype.isDirty=function(){return this.R},r.prototype.hasDirty=function(){return this.wt},r.prototype.setHovered=function(t){return this.setState(v.HOVERED,t)},r.prototype.setActive=function(t){return this.setState(v.ACTIVE,t)},r.prototype.setPressed=function(t){return this.setState(v.PRESSED,t)},r.prototype.setReadOnly=function(t){return this.setState(v.READ_ONLY,t)},r.prototype.setDisabled=function(t){return this.setState(v.DISABLED,t)},r.prototype.setDragging=function(t){return this.setState(v.DRAGGING,t)},r.prototype.setInvalid=function(t){return this.setState(v.INVALID,t)},r.prototype.setSucceeded=function(t){return this.setState(v.SUCCEEDED,t)},r.prototype.setFailed=function(t){return this.setState(v.FAILED,t)},r.prototype.setFocused=function(t){return this.isFocused()!==t&&W.getFocusController().setFocused(this,t,!1),this},r.prototype.focus=function(){return this.setFocused(!0)},r.prototype.blur=function(t){if(t){var n=W.getFocusController().getFocused();if(n instanceof r)for(var i=n;i;){if(i===this){n.setFocused(!1);break}i=i.parent}}else this.setFocused(!1);return this},r.prototype.isHovered=function(){return this.hasState(v.HOVERED)},r.prototype.isActive=function(){return this.hasState(v.ACTIVE)},r.prototype.isActiveIn=function(){return this.hasState(v.ACTIVE|v.ACTIVE_IN)},r.prototype.isPressed=function(){return this.hasState(v.PRESSED)},r.prototype.isReadOnly=function(){return this.hasState(v.READ_ONLY)},r.prototype.isDisabled=function(){return this.hasState(v.DISABLED)},r.prototype.isActionable=function(){return!this.hasState(v.DISABLED|v.READ_ONLY)},r.prototype.isDragging=function(){return this.hasState(v.DRAGGING)},r.prototype.isFocused=function(){return this.hasState(v.FOCUSED)},r.prototype.isFocusedIn=function(){return this.hasState(v.FOCUSED|v.FOCUSED_IN)},r.prototype.isUnfocusable=function(){return this.hasState(v.UNFOCUSABLE)},r.prototype.isInvalid=function(){return this.hasState(v.INVALID)},r.prototype.isSucceeded=function(){return this.hasState(v.SUCCEEDED)},r.prototype.isFailed=function(){return this.hasState(v.FAILED)},r.prototype.setState=function(t,n){var i=this.At,r=n?i|t:i&~t;return i!==r&&(this.At=r,this.updateState()),this},r.prototype.setStates=function(t,n){var i=this.At,r=(i|t)&~n;return i!==r&&(this.At=r,this.updateState()),this},r.prototype.updateState=function(){var t=this.parent,n=this.At,i=t instanceof r?this.mergeState(n,t.state):n,e=this.jt;e!==i&&(this.jt=i,this.onStateChange(i,e))},r.prototype.mergeState=function(t,n){return t|n&v.DISABLED|(n&(v.FOCUSED|v.FOCUSED_IN)?v.FOCUSED_IN:v.NONE)|(n&(v.ACTIVE|v.ACTIVE_IN)?v.ACTIVE_IN:v.NONE)},r.prototype.onStateChange=function(t,n){this.toDirty(),e.update(),this.emit("statechange",t,n,this);for(var i=this.children,u=0,s=i.length;u<s;++u){var h=i[u];h instanceof r&&h.onParentStateChange(t,n)}M.isFocused(t)?M.isFocused(n)||this.onFocused():M.isFocused(n)&&this.onBlured()},r.prototype.onChildFocused=function(t){var n=this.parent;n instanceof r&&n.onChildFocused(t)},r.prototype.onFocused=function(){var t=this.parent;t instanceof r&&t.onChildFocused(this)},r.prototype.onBlured=function(){},r.prototype.onParentStateChange=function(t,n){var i=this.mergeState(this.At,t),r=this.jt;r!==i&&(this.jt=i,this.onStateChange(i,r))},Object.defineProperty(r.prototype,"state",{get:function(){return this.jt},enumerable:!0,configurable:!0}),r.prototype.getState=function(){return this.jt},r.prototype.hasState=function(t){return M.is(this.jt,t)},Object.defineProperty(r.prototype,"theme",{get:function(){return this.t},set:function(t){this.t!==t&&(this.t=t,this.It.setTheme(t),this.Nt.setTheme(t),this.yt.setTheme(t),this.xt.setTheme(t),this.Ct.setTheme(t),this.toDirty(),e.update())},enumerable:!0,configurable:!0}),r.prototype.refit=function(){if(this.Dt){this.Dt=!1;for(var t=this.children,n=0,i=t.length;n<i;++n){var e=t[n];e instanceof r&&e.refit()}this.onRefit()}},r.prototype.onRefit=function(){var t=this.pt,n=t.isWidthAuto(),i=t.isHeightAuto();if(n&&i){for(var r=0,e=0,u=0,s=(o=this.children).length;u<s;++u)(c=o[u]).visible&&(this.hasRefitableWidth(c)&&(r=Math.max(r,c.x+c.width)),this.hasRefitableHeight(c)&&(e=Math.max(e,c.y+c.height)));var h=this.padding;this.resize(r+h.getRight(),e+h.getBottom())}else if(n){for(r=0,u=0,s=(o=this.children).length;u<s;++u)(c=o[u]).visible&&this.hasRefitableWidth(c)&&(r=Math.max(r,c.x+c.width));h=this.padding,this.width=r+h.getRight()}else if(i){var o;for(e=0,u=0,s=(o=this.children).length;u<s;++u){var c;(c=o[u]).visible&&this.hasRefitableHeight(c)&&(e=Math.max(e,c.y+c.height))}h=this.padding,this.height=e+h.getBottom()}},r.prototype.isRefitable=function(t){return t instanceof r},r.prototype.hasRefitableHeight=function(t){return this.isRefitable(t)&&!(t instanceof r&&u(t.coordinate.height))},r.prototype.hasRefitableWidth=function(t){return this.isRefitable(t)&&!(t instanceof r&&u(t.coordinate.width))},r.prototype.reflow=function(){if(this.R&&(this.onReflow(),this.R=!1),this.wt){for(var t=this.children,n=0,i=t.length;n<i;++n){var e=t[n];e instanceof r&&e.reflow()}this.wt=!1}},r.prototype.onReflow=function(){for(var t=this.width,n=this.height,i=this.Et,r=0,e=i.length;r<e;++r)i[r].onReflow(this,t,n)},Object.defineProperty(r.prototype,"shadow",{get:function(){return this.Tt},set:function(t){var n=this.Tt;n!==t&&(null!=n&&(n.off("update",this.Lt),this.removeReflowable(n),this.removeRenderable(n,!0)),this.Tt=t,null!=t&&(t.on("update",this.Lt),this.addReflowable(t),this.prependRenderable(t,!0)),e.update())},enumerable:!0,configurable:!0}),r.prototype.layout=function(){var t=this.getParentOfSize();this.onParentResize(t.width,t.height,t.padding)},r.prototype.getParentOfSize=function(){var t=this.parent;return t instanceof r?t:e.getInstance()},r.prototype.onParentResize=function(t,n,i){var r=this.ct,e=this.lt.position,u=e.x,s=e.y,h=this.o,o=this.C,c=i.getLeft()+i.getRight(),f=i.getTop()+i.getBottom(),a=null!=r.width?r.width(t,h,c,h):h,l=null!=r.height?r.height(n,o,f,o):o;this.resize(a,l);var v=null!=r.x?r.x(t,this.width,i.getLeft(),u):u,b=null!=r.y?r.y(n,this.height,i.getTop(),s):s;this.position.set(v,b)},r.prototype.resizeChildren=function(){for(var t=this.width,n=this.height,i=this.It,e=this.children,u=0,s=e.length;u<s;++u){var h=e[u];h instanceof r&&h.onParentResize(t,n,i)}},r.prototype.onParentMove=function(t,n){},r.prototype.moveChildren=function(){for(var t=this.x,n=this.y,i=this.children,e=0,u=i.length;e<u;++e){var s=i[e];s instanceof r&&s.onParentMove(t,n)}},r.prototype.onWheel=function(t,n,i){return this.emit("wheel",t,n,i,this),!1},r.prototype.onKeyDown=function(t){return this.emit("keydown",t,this),!1},r.prototype.onKeyUp=function(t){return this.emit("keyup",t,this),!1},r.prototype.onDown=function(t){var n=t.target;if(n===this)this.onDownThis(t);else if(!(n instanceof r)){for(var i=n.parent;null!=i&&!(i instanceof r);)i=i.parent;i===this&&this.onDownThis(t)}},r.prototype.onDownThis=function(t){var n=W.getFocusController();n.setFocused(n.findFocusableParent(this),!0,!0)},r.prototype.onDblClick=function(t){return this.emit("dblclick",t,this),!1},r.prototype.render=function(t){this.visible&&0<this.worldAlpha&&this.renderable&&(this.renderBefore(t),n.prototype.render.call(this,t),this.renderAfter(t))},r.prototype.renderBefore=function(t){for(var n=this.St,i=0,r=n.length;i<r;++i){var e=n[i];e.updateTransform(),e.render(t)}},r.prototype.renderAfter=function(t){for(var n=this.Mt,i=0,r=n.length;i<r;++i){var e=n[i];e.updateTransform(),e.render(t)}},r.prototype.getThemeDefault=function(){return K.getInstance().get(this.getType())},r.prototype.getType=function(){return"DBase"},r.prototype._calculateBounds=function(){var t=this.lt.worldTransform,i=this._bounds,e=r.WORK_CONTAINS_POINT;e.set(0,0),t.apply(e,e),i.addPoint(e),e.set(this.o,this.C),t.apply(e,e),i.addPoint(e),n.prototype._calculateBounds.call(this)},r.prototype.containsPoint=function(t){return this.containsGlobalPoint(t)||this.containsLocalPoint(this.worldTransform.applyInverse(t,r.WORK_CONTAINS_POINT))},r.prototype.containsGlobalPoint=function(t){return!1},r.prototype.containsLocalPoint=function(t){return 0<=t.x&&t.x<=this.width&&0<=t.y&&t.y<=this.height},r.prototype.destroy=function(){var t=this.ct;t.x=null,t.y=null,t.width=null,t.height=null;var i=this.Tt;i&&(this.Tt=null,i.destroy());for(var r=this.children,e=r.length-1;0<=e;--e)r[e].destroy();r.length=0,n.prototype.destroy.call(this)},r.WORK_CONTAINS_POINT=new t.Point,r}(t.Container),tt=function(t){function n(){var n=t.call(this,new Float32Array(64),new Float32Array(64),new Uint16Array(48))||this;return n.width=0,n.height=0,n}return i(n,t),n.prototype.update=function(t,n,i){var r=this.getBuffer("aVertexPosition"),e=this.getBuffer("aTextureCoord"),u=this.getIndex(),s=this.measureText(t,n,i),h=Math.ceil(s[1]/8)<<3,o=h<<3;r.data.length<o&&(r.data=new Float32Array(o),e.data=new Float32Array(o));var c=6*h;u.data.length<c&&(u.data=new Uint16Array(c));var f=r.data,a=e.data,l=u.data;if(null!=n){for(var v=0,b=0,d=0,g=0,m=s[0];g<m;++g){for(var p=3*(1+g),w=s[p+0],D=s[p+1];w<D;w+=1,d+=1){var T;null!=(T=n.get(t[w]))?(this.writeCharacter(f,a,l,d,v,b,T,n.width,n.height),v+=T.advance):this.writeCharacterEmpty(f,a,l,d)}s[p+2]&&(null!=(T=n.get("..."))?(this.writeCharacter(f,a,l,d,v,b,T,n.width,n.height),v+=T.advance):this.writeCharacterEmpty(f,a,l,d),d+=1),v=0,b+=n.font.height}for(g=d,m=f.length>>3;g<m;++g)this.writeCharacterEmpty(f,a,l,g);this.width=s[2],this.height=b}else{for(g=0,m=f.length>>3;g<m;++g)this.writeCharacterEmpty(f,a,l,g);this.width=0,this.height=0}r.update(),e.update(),u.update()},n.prototype.writeCharacter=function(t,n,i,r,e,u,s,h,o){var c=s.x-s.origin.x,f=r<<3;t[f+0]=e+c,t[f+1]=u+0,t[f+2]=e+c+s.width,t[f+3]=u+0,t[f+4]=e+c+s.width,t[f+5]=u+0+s.height,t[f+6]=e+c,t[f+7]=u+0+s.height;var a=s.x/h,l=s.y/o,v=(s.x+s.width)/h,b=(s.y+s.height)/o;n[f+0]=a,n[f+1]=l,n[f+2]=v,n[f+3]=l,n[f+4]=v,n[f+5]=b,n[f+6]=a,n[f+7]=b;var d=6*r,g=r<<2;i[d+0]=g+0,i[d+1]=g+1,i[d+2]=g+3,i[d+3]=g+1,i[d+4]=g+2,i[d+5]=g+3},n.prototype.writeCharacterEmpty=function(t,n,i,r){var e=r<<3;t[e+0]=0,t[e+1]=0,t[e+2]=0,t[e+3]=0,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=0,n[e+0]=0,n[e+1]=0,n[e+2]=0,n[e+3]=0,n[e+4]=0,n[e+5]=0,n[e+6]=0,n[e+7]=0;var u=6*r,s=r<<2;i[u+0]=s+0,i[u+1]=s+1,i[u+2]=s+3,i[u+3]=s+1,i[u+4]=s+2,i[u+5]=s+3},n.prototype.measureText=function(t,i,r){var e=n.WORK=n.WORK||new Uint32Array(48);if(e[0]=0,e[1]=0,e[2]=0,e[3]=0,null!=i){for(var u=0,s=t.length,h=0;h<s;++h){var o=t[h];if("\n"===o)e=this.setResult(e,h,!1,u,h+1),u=0;else{var c=i.get(o);if(null!=c)if(null!=r&&r<u+c.advance){for(var f=i.get("..."),a=null!=f&&r<u+f.advance?h-1:h,l=h+1;l<s;++l)if("\n"===t[l]){l+=1;break}e=this.setResult(e,a,!0,u,l),h=l-1,u=0}else u+=c.advance}}e=this.setResult(e,s,!1,u,s)}return e},n.prototype.setResult=function(t,i,r,e,u){var s=3*(1+t[0]),h=t[s+0];if(h<i||r){if(h=Math.min(h,i),t[s+0]=h,t[s+1]=i,t[s+2]=r?1:0,t.length<=s+3){var o=new Uint32Array(t.length+48);o.set(t),t=o,n.WORK=o}t[0]+=1,t[1]+=i-h,t[2]=Math.max(t[2],Math.ceil(e)),t[s+3]=u}else t[s+0]=u;return t},n.WORK=null,n}(t.MeshGeometry),nt=function(){function t(n,i){this._t=0,this.Ft=-1;var r=t.FONT=t.FONT||K.getInstance().get("DBase");this.l=n&&n.align||"left",this.Pt=n&&n.fontFamily||r.getFontFamilly(),this.Ut=n&&n.fontSize||r.getFontSize(),this.zt=n&&n.fontStyle||"normal",this.Gt=n&&n.fontVariant||"normal",this.Ht=n&&n.fontWeight||"normal",this.Vt=-1,this.Xt="",this.Yt="",this.Kt=n&&n.fill||r.getColor(0),this.Jt=0,this.Zt=!n||null==n.clipping||n.clipping,this.qt=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"idApproved",{get:function(){return this.Ft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontId",{get:function(){return this.update(),this.Xt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontIdApproved",{get:function(){return this.Yt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.Kt},set:function(t){this.Kt!==t&&(this.Kt=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.onChange=function(){this._t+=1,this.qt()},Object.defineProperty(t.prototype,"fillApproved",{get:function(){return this.Jt},enumerable:!0,configurable:!0}),t.prototype.approve=function(){this.update(),this.Ft=this._t,this.Yt=this.Xt,this.Jt=this.Kt},Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.Pt},set:function(t){this.Pt!==t&&(this.Pt=t,this.onChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.Ut},set:function(t){this.Ut!==t&&(this.Ut=t,this.onChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this.zt},set:function(t){this.zt!==t&&(this.zt=t,this.onChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this.Gt},set:function(t){this.Gt!==t&&(this.Gt=t,this.onChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.Ht},set:function(t){this.Ht!==t&&(this.Ht=t,this.onChange())},enumerable:!0,configurable:!0}),t.prototype.update=function(){this.Vt!==this._t&&(this.Vt=this._t,this.Xt=this.newFontId())},t.prototype.newFontId=function(){return this.zt+" "+this.Gt+" "+this.Ht+" "+this.Ut+"px "+this.Pt},Object.defineProperty(t.prototype,"clipping",{get:function(){return this.Zt},set:function(t){this.Zt!==t&&(this.Zt=t,this.onChange())},enumerable:!0,configurable:!0}),t.FONT=null,t}(),it=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",rt=function(t,n){this.x=t,this.y=n},et=function(t,n,i,r){this.ref=1,this.life=10,this.x=0,this.y=0,this.width=n,this.height=i,this.advance=t,this.origin=new rt(0,0),this.reserved=r},ut=function(n,i,r,e){this.id=n,this.size=i,this.color=t.utils.hex2string(r),this.height=this.size+2*e;var u=t.TextMetrics.measureFont(n);this.ascent=u.ascent,this.descent=u.descent},st=3,ht=function(){function n(n,i,r){this._t=n,this.Qt=document.createElement("canvas"),this.$t=null,this.tn=new ut(n,i,r,st),this.nn={},this.in=0,this.rn=0,this.o=1,this.C=1,this.en=0,this.un=0,this.j=t.Texture.from(this.Qt,{mipmap:t.MIPMAP_MODES.OFF,resolution:t.settings.RESOLUTION,scaleMode:t.SCALE_MODES.NEAREST}),this.add(it,!0),this.sn("...",this.nn,!0)}return Object.defineProperty(n.prototype,"id",{get:function(){return this._t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this.tn},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.o},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.C},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvas",{get:function(){return this.Qt},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"characters",{get:function(){return this.nn},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this.j},enumerable:!0,configurable:!0}),n.prototype.sn=function(t,n,i){if("\n"!==t){var r=n[t];if(null!=r)r.reserved||(0===r.ref&&(this.rn-=1),r.ref+=1);else{var e=this.getAdvance(t),u=Math.ceil(st+e+st),s=this.font.height;n[t]=new et(e,u,s,!!i),this.in+=1,this.en+=1}}},n.prototype.hn=function(t,n){if("\n"!==t){var i=n[t];null!=i&&!i.reserved&&0<i.ref&&(i.ref-=1,0===i.ref&&(this.rn+=1))}},n.prototype.cn=function(){if(this.in>>1<=this.rn){var t=this.nn;for(var n in t)t[n].ref<=0&&delete t[n];this.in-=this.rn,this.en+=1,this.rn=0}},n.prototype.add=function(t,n){for(var i=this.nn,r=0,e=t.length;r<e;++r)this.sn(t[r],i,n)},n.prototype.remove=function(t){for(var n=this.nn,i=0,r=t.length;i<r;++i)this.hn(t[i],n)},n.prototype.get=function(t){return this.nn[t]},n.prototype.getAdvance=function(t){var n=this.getContext();return null!=n?n.measureText(t).width:0},n.prototype.getContext=function(){var t=this.$t;if(null==t){var n=this.Qt;if(null==n)return null;if(null==(t=this.$t=n.getContext("2d",{alpha:!0})))return null}var i=this.tn;return t.font!==i.id&&(t.font=i.id,i.id=t.font,t.textAlign="left",t.textBaseline="alphabetic",t.lineWidth=0,t.lineCap="round",t.lineJoin="miter",t.miterLimit=0,t.fillStyle=i.color,t.strokeStyle="#0000ff"),t},n.prototype.update=function(){if(this.cn(),this.un<this.en){this.un=this.en;var t=this.Qt;if(null!=t){var n=this.tn,i=n.height,r=this.nn,e=this.o=this.toPowerOf2(Math.ceil(Math.sqrt(this.in))*i),u=st,s=Math.round(.5*(i-(n.ascent+n.descent))+n.ascent),h=0,o=0;for(var c in r)e<=h+(g=r[c]).width&&(h=0,o+=i),g.x=h,g.y=o,g.origin.x=h+u,g.origin.y=o+s,h+=g.width;var f=this.C=o+i,a=this.j.baseTexture,l=a.resolution,v=Math.ceil(e*l),b=Math.ceil(f*l);t.width=v,t.height=b;var d=this.getContext();if(null!=d){for(var c in d.save(),d.scale(l,l),d.clearRect(0,0,e,f),r){var g=r[c];d.fillText(c,g.origin.x,g.origin.y)}d.restore()}return a.setRealSize(v,b),!0}}return!1},n.prototype.getRevision=function(){return this.en},n.prototype.getRevisionUpdate=function(){return this.un},Object.defineProperty(n.prototype,"length",{get:function(){return this.in},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){null!=this.Qt&&(this.Qt=null);var t=this.nn;for(var n in t)delete t[n]},n.prototype.toPowerOf2=function(t){for(var n=32;n<t;)n<<=1;return n},n}(),ot=function(t){t.update()},ct=function(t){t.forEach(ot)},ft=function(t){t.update()},at=function(t){t.forEach(ft)},lt=function(){function t(){var t=this;this.fn=new Map,e.getInstance().renderer.on("prerender",(function(){t.update()}))}return t.prototype.add=function(t,n,i,r){var e=this.fn,u=e.get(t);null==u&&(u=new Map,e.set(t,u));var s=u.get(i);null==s&&(s=new ht(t,n,i),u.set(i,s)),s.add(r)},t.prototype.remove=function(t,n,i){var r=this.fn.get(t);if(null!=r){var e=r.get(n);null!=e&&e.remove(i)}},t.prototype.get=function(t,n){var i=this.fn.get(t);if(null==i)return null;var r=i.get(n);return null==r?null:r},t.prototype.update=function(){this.fn.forEach(ct)},t.prototype.destroy=function(){var t=this.fn;t.forEach(at),t.clear()},t.getInstance=function(){return null==t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},t.INSTANCE=null,t}(),vt=function(n){function r(i,r){var e=n.call(this,new tt,new t.MeshMaterial(t.Texture.EMPTY))||this;return e.an=new nt(r,(function(){e.R=!0,e.ln=!0,e.vn=null,e.bn()})),e.dn=i,e.gn="",e.R=!0,e.ln=!0,e.vn=null,e.mn=0,e.o=0,e.C=0,e.pn=0,e.bn(),e}return i(r,n),r.prototype.bn=function(){var t=this.an;if(this.R){this.R=!1;var n=this.dn,i=this.gn;this.gn=n;var r=t.fontId,e=t.fontIdApproved,u=t.fontSize,s=t.fill,h=t.fillApproved;t.approve();var o=lt.getInstance();n===i&&r===e&&s===h||(o.add(r,u,s,n),o.remove(e,h,i))}},Object.defineProperty(r.prototype,"text",{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t,this.R=!0,this.ln=!0,this.bn())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.update(),Math.abs(this.scale.x)*this.geometry.width},set:function(t){this.update();var n=this.geometry.width;if(1e-4<n){var i=t/n;this.scale.x=0<=this.scale.x?+i:-i}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.update(),Math.abs(this.scale.y)*this.geometry.height},set:function(t){this.update();var n=this.geometry.height;if(1e-4<n){var i=t/n;this.scale.y=0<=this.scale.y?+i:-i}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this.an},enumerable:!0,configurable:!0}),r.prototype.update=function(){this.bn();var t=this.vn;if(null==t){var n=this.an;null!=(t=lt.getInstance().get(n.fontId,n.fill))&&(this.mn=t.getRevisionUpdate(),this.vn=t,this.texture=t.texture,this.ln=!0)}else{var i=t.getRevisionUpdate();i!==this.mn&&(this.mn=i,this.ln=!0)}var r=this.wn,e=this.getClippingWidth();r!==e&&(this.wn=e,this.ln=!0),this.ln&&(this.ln=!1,this.geometry.update(this.dn,t,e))},r.prototype.getClippingWidth=function(){if(this.an.clipping){var t=this.parent;if(t instanceof $)return t.width-t.padding.getLeft()-t.padding.getRight()-this.pn}},r.prototype.setClippingWidthDelta=function(t){this.pn=t},r.prototype._calculateBounds=function(){this.update(),n.prototype._calculateBounds.call(this)},r.prototype._render=function(t){this.update(),n.prototype._render.call(this,t)},r}(t.Mesh);!function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}(V||(V={})),function(t){t[t.TOP=0]="TOP",t[t.MIDDLE=1]="MIDDLE",t[t.BOTTOM=2]="BOTTOM"}(X||(X={})),function(t){t[t.TEXT=0]="TEXT",t[t.PADDING=1]="PADDING",t[t.BORDER=2]="BORDER"}(Y||(Y={}));var bt=function(t){function n(n){var i=t.call(this)||this;return i.parent=n,i}return i(n,t),n.prototype.render=function(n){this.updateTransform(),t.prototype.render.call(this,n)},n.prototype.onReflow=function(t,n,i){this.clear(),this.beginFill(16777215,1),this.drawRect(0,0,n,i),this.endFill()},n}(t.Graphics),dt=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(t){n.prototype.init.call(this,t),this.dn=null;var i=this.theme;this.Dn=function(t,n){return n&&n.text&&void 0!==n.text.value?n.text.value:t.newTextValue()}(i,t),this.Tn=this.computeTextValue(),this.On=t&&t.text&&t.text.color,this.Sn=t&&t.text&&t.text.alpha,this.Mn=function(t,n,i){if(n&&n.text&&null!=n.text.style){var r=n.text.style;return{fill:null!=r.fill?r.fill:t.getColor(i),fontSize:null!=r.fontSize?r.fontSize:t.getFontSize(),fontFamily:null!=r.fontFamily?r.fontFamily:t.getFontFamilly(),fontWeight:null!=r.fontWeight?r.fontWeight:t.getFontWeight(),fontStyle:null!=r.fontStyle?r.fontStyle:t.getFontStyle(),fontVariant:null!=r.fontVariant?r.fontVariant:t.getFontVariant(),clipping:null!=r.clipping?r.clipping:t.getTextStyleClipping()}}return{fill:t.getColor(i),fontSize:t.getFontSize(),fontFamily:t.getFontFamilly(),fontWeight:t.getFontWeight(),fontStyle:t.getFontStyle(),fontVariant:t.getFontVariant(),clipping:t.getTextStyleClipping()}}(i,t,this.state),this.En=function(t,n){if(n&&n.text&&n.text.align){var i=n.text.align;return{vertical:null!=i.vertical?o(i.vertical)?X[i.vertical]:i.vertical:t.getTextAlignVertical(),horizontal:null!=i.horizontal?o(i.horizontal)?V[i.horizontal]:i.horizontal:t.getTextAlignHorizontal()}}return{vertical:t.getTextAlignVertical(),horizontal:t.getTextAlignHorizontal()}}(i,t),this.kn=function(t,n){return n&&n.text&&n.text.formatter?n.text.formatter:t.getTextFormatter()}(i,t),this.In=function(t,n){return n&&n.text&&null!=n.text.dynamic?n.text.dynamic:t.isTextDynamic()}(i,t),this.Nn=function(t,n){return n&&null!=n.mask?n.mask:t.isOverflowMaskEnabled()}(i,t),this.yn=null,this.onTextChange(),this.createOrUpdateText()},Object.defineProperty(r.prototype,"text",{get:function(){return this.Dn},set:function(t){this.Dn!==t&&(this.Dn=t,this.updateTextValue())},enumerable:!0,configurable:!0}),r.prototype.onTextChange=function(){},r.prototype.computeTextValue=function(){var t=this.Dn;if(void 0!==t){if(!u(t))return t;var n=t(this.state);if(void 0!==n)return n}return this.theme.getTextValue(this.state)},r.prototype.createOrUpdateText=function(){var t=this.kn(this.Tn,this);if(null==this.dn){if(0<t.length){var n=this.createText(t);this.dn=n,this.addChild(n),this.updateTextPosition(n),this.Nn&&(n.mask=this.getOrCreateOverflowMask()),this.toDirty(),e.update()}}else this.dn.text=t,this.toDirty(),e.update()},r.prototype.createText=function(n){return this.In?new vt(n,this.Mn):new t.Text(n,this.Mn)},r.prototype.getOrCreateOverflowMask=function(){return null==this.yn&&(this.yn=new bt(this),this.addReflowable(this.yn),this.toDirty()),this.yn},r.prototype.updateTextPosition=function(t){var n=this.En,i=this.It;switch(n.horizontal){case V.LEFT:t.x=this.toRounded(i.getLeft());break;case V.CENTER:t.x=this.toRounded(.5*(this.width-t.width));break;case V.RIGHT:t.x=this.toRounded(this.width-t.width-i.getRight())}switch(n.vertical){case X.TOP:t.y=this.toRounded(i.getTop());break;case X.MIDDLE:t.y=this.toRounded(.5*(this.height-t.height));break;case X.BOTTOM:t.y=this.toRounded(this.height-t.height-i.getBottom())}},r.prototype.toRounded=function(t){return Math.round(t)},r.prototype.getTextColor=function(t,n){var i=this.On;if(void 0!==i){if(!u(i))return i;var r=i(n);if(void 0!==r)return r}return t.getColor(n)},r.prototype.getTextAlpha=function(t,n){var i=this.Sn;if(void 0!==i){if(!u(i))return i;var r=i(n);if(void 0!==r)return r}return t.getAlpha(n)},r.prototype.updateTextColor=function(t){var n=this.theme,i=this.state;t.style.fill=this.getTextColor(n,i),t.alpha=this.getTextAlpha(n,i)},r.prototype.updateTextValue=function(){var t=this.computeTextValue();this.Tn!==t&&(this.Tn=t,this.onTextChange(),this.createOrUpdateText())},r.prototype.updateText=function(){var t=this.dn;null!=t&&(this.updateTextValue(),this.updateTextPosition(t),this.updateTextColor(t))},r.prototype.onReflow=function(){n.prototype.onReflow.call(this),this.updateText()},r.prototype.isRefitable=function(t){return n.prototype.isRefitable.call(this,t)||null!=t&&t===this.dn},r.prototype.getType=function(){return"DTextBase"},r.prototype.destroy=function(){var t=this.dn;null!=t&&(this.dn=null,t.destroy());var i=this.yn;null!=i&&(this.yn=null,i.destroy()),n.prototype.destroy.call(this)},r}($),gt=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(i){var r=this;n.prototype.init.call(this,i),this.xn=null;var e=this.theme;this.Cn=function(t,n){if(null!=n&&null!=n.image&&null!=n.image.align){var i=n.image.align;return{with:null!=i.with?o(i.with)?Y[i.with]:i.with:t.getImageAlignWith(),vertical:null!=i.vertical?o(i.vertical)?X[i.vertical]:i.vertical:t.getImageAlignVertical(),horizontal:null!=i.horizontal?o(i.horizontal)?V[i.horizontal]:i.horizontal:t.getImageAlignHorizontal()}}return{with:t.getImageAlignWith(),vertical:t.getImageAlignVertical(),horizontal:t.getImageAlignHorizontal()}}(e,i),this.jn=function(t,n){if(null!=n&&null!=n.image&&null!=n.image.margin){var i=n.image.margin;return{vertical:null!=i.vertical?i.vertical:t.getImageMarginVertial(),horizontal:null!=i.horizontal?i.horizontal:t.getImageMarginHorizontal()}}return{vertical:t.getImageMarginVertial(),horizontal:t.getImageMarginHorizontal()}}(e,i),this.An=function(t,n){if(null!=n&&null!=n.image&&null!=n.image.tint)return n.image.tint}(0,i),this.Bn=new t.Rectangle,this.Rn=new t.Point,this.Ln=i&&i.image&&i.image.source,this.Wn=null,this._n=function(){r.onImageChange()}},Object.defineProperty(r.prototype,"image",{get:function(){return this.Ln},set:function(t){this.Ln!==t&&(this.Ln=t,this.toDirty(),e.update())},enumerable:!0,configurable:!0}),r.prototype.computeImageSource=function(){var t=this.Ln;if(void 0!==t){if(!u(t))return t;var n=t(this.state);if(void 0!==n)return n}return this.theme.getImageSource(this.state)},r.prototype.onImageChange=function(){this.toDirty(),e.update()},r.prototype.onStateChange=function(t,i){n.prototype.onStateChange.call(this,t,i);var r=this.xn;null!=r&&this.updateImageTint(r)},r.prototype.getImageRect=function(t){t.updateTransform();var n=t.getLocalBounds(this.Bn),i=this.Rn;i.set(n.left,n.top),t.localTransform.apply(i,i);var r=i.x,e=i.y;i.set(n.right,n.top),t.localTransform.apply(i,i);var u=i.x,s=i.y;i.set(n.right,n.bottom),t.localTransform.apply(i,i);var h=i.x,o=i.y;i.set(n.left,n.bottom),t.localTransform.apply(i,i);var c=i.x,f=i.y;return n.x=Math.min(r,u,h,c),n.y=Math.min(e,s,o,f),n.width=Math.max(r,u,h,c)-n.x,n.height=Math.max(e,s,o,f)-n.y,n},r.prototype.updateTextAndImagePosition=function(t,n){var i=this.getImageRect(n),r=i.width,e=i.height,u=this.En,s=this.Cn,h=this.jn,o=this.It,c=h.horizontal,f=r+c;switch(s.horizontal){case V.LEFT:switch(u.horizontal){case V.LEFT:t instanceof vt&&t.setClippingWidthDelta(f),n.x=this.toRounded(o.getLeft());break;case V.CENTER:t instanceof vt&&t.setClippingWidthDelta(f),n.x=this.toRounded(.5*(this.width-t.width-f));break;case V.RIGHT:t instanceof vt&&t.setClippingWidthDelta(0),n.x=this.toRounded(this.width-t.width-o.getRight()-f)}t.x=this.toRounded(n.x+f);break;case V.CENTER:switch(t instanceof vt&&t.setClippingWidthDelta(0),u.horizontal){case V.LEFT:t.x=this.toRounded(o.getLeft());break;case V.CENTER:t.x=this.toRounded(.5*(this.width-t.width));break;case V.RIGHT:t.x=this.toRounded(this.width-t.width-o.getRight())}n.x=this.toRounded(t.x+.5*(t.width-r));break;case V.RIGHT:switch(u.horizontal){case V.LEFT:t instanceof vt&&t.setClippingWidthDelta(0),t.x=this.toRounded(o.getLeft());break;case V.CENTER:t instanceof vt&&t.setClippingWidthDelta(f),t.x=this.toRounded(.5*(this.width-t.width-f));break;case V.RIGHT:t instanceof vt&&t.setClippingWidthDelta(f),t.x=this.toRounded(this.width-t.width-o.getRight()-f)}n.x=this.toRounded(t.x+t.width+c)}var a=h.vertical,l=r+c;switch(s.vertical){case X.TOP:switch(u.vertical){case X.TOP:n.y=this.toRounded(o.getTop());break;case X.MIDDLE:n.y=this.toRounded(.5*(this.height-t.height-l));break;case X.BOTTOM:n.y=this.toRounded(this.height-t.height-o.getBottom()-l)}t.y=this.toRounded(n.y+l);break;case X.MIDDLE:switch(u.vertical){case X.TOP:t.y=this.toRounded(o.getTop());break;case X.MIDDLE:t.y=this.toRounded(.5*(this.height-t.height));break;case X.BOTTOM:t.y=this.toRounded(this.height-t.height-o.getBottom())}n.y=this.toRounded(t.y+.5*(t.height-e));break;case X.BOTTOM:switch(u.vertical){case X.TOP:t.y=this.toRounded(o.getTop());break;case X.MIDDLE:t.y=this.toRounded(.5*(this.height-t.height-l));break;case X.BOTTOM:t.y=this.toRounded(this.height-t.height-o.getBottom()-l)}n.y=this.toRounded(t.y+t.height+a)}},r.prototype.updateImagePositionText=function(t){var n=this.getImageRect(t);t.x=this.toRounded(.5*(this.width-n.width)),t.y=this.toRounded(.5*(this.height-n.height))},r.prototype.updateImagePositionPadding=function(t){var n=this.jn,i=this.Cn,r=this.It,e=this.getImageRect(t),u=e.width,s=e.height,h=n.horizontal;switch(i.horizontal){case V.LEFT:t.x=this.toRounded(r.getLeft()+h);break;case V.CENTER:t.x=this.toRounded(.5*(this.width-u));break;case V.RIGHT:t.x=this.toRounded(this.width-r.getRight()-h-u)}var o=n.vertical;switch(i.vertical){case X.TOP:t.y=this.toRounded(r.getTop()+o);break;case X.MIDDLE:t.y=this.toRounded(.5*(this.height-s));break;case X.BOTTOM:t.y=this.toRounded(this.height-r.getBottom()-o)}},r.prototype.updateImagePositionBorder=function(t){var n=this.jn,i=this.Cn,r=this.getImageRect(t),e=r.width,u=r.height,s=n.horizontal;switch(i.horizontal){case V.LEFT:t.x=this.toRounded(s);break;case V.CENTER:t.x=this.toRounded(.5*(this.width-e));break;case V.RIGHT:t.x=this.toRounded(this.width-s-e)}var h=n.vertical;switch(i.vertical){case X.TOP:t.y=this.toRounded(h);break;case X.MIDDLE:t.y=this.toRounded(.5*(this.height-u));break;case X.BOTTOM:t.y=this.toRounded(this.height-h)}},r.prototype.getImageTintColor=function(t,n){var i=this.An;if(null!=i){var r=i.color;if(void 0!==r){if(!u(r))return r;var e=r(n);if(void 0!==e)return e}}return t.getImageTintColor(n)},r.prototype.getImageTintAlpha=function(t,n){var i=this.An;if(null!=i){var r=i.alpha;if(void 0!==r){if(!u(r))return r;var e=r(n);if(void 0!==e)return e}}return t.getImageTintAlpha(n)},r.prototype.updateImageTint=function(t){if(this.isTintAware(t)){var n=this.theme,i=this.state,r=this.getImageTintColor(n,i);if(null!=r){t.tint!==r&&(t.tint=r);var e=this.getImageTintAlpha(n,i);t.alpha!==e&&(t.alpha=e)}}},r.prototype.isTintAware=function(t){return null!=t&&"tint"in t},r.prototype.updateImageSource=function(){var n=this.computeImageSource(),i=this.Wn;if(n!==i){this.Wn=n;var r=this.xn;if(n instanceof t.Texture)if(i instanceof t.Texture)i.off("update",this._n),r instanceof t.Sprite&&(r.texture=n,n.on("update",this._n));else{null!=r&&this.removeChild(r);var e=new t.Sprite(n);this.Nn&&(e.mask=this.getOrCreateOverflowMask()),n.on("update",this._n),this.addChild(e),this.xn=e}else i instanceof t.Texture?(i.off("update",this._n),null!=r&&(this.removeChild(r),r.destroy())):null!=r&&this.removeChild(r),null!=n&&(this.Nn&&(n.mask=this.getOrCreateOverflowMask()),this.addChild(n)),this.xn=n}},r.prototype.updateText=function(){this.updateTextValue(),this.updateImageSource();var t=this.dn,n=this.xn;if(null!=t)if(null!=n){switch(this.Cn.with){case Y.TEXT:this.updateTextAndImagePosition(t,n);break;case Y.PADDING:t instanceof vt&&t.setClippingWidthDelta(0),this.updateTextPosition(t),this.updateImagePositionPadding(n);break;case Y.BORDER:t instanceof vt&&t.setClippingWidthDelta(0),this.updateTextPosition(t),this.updateImagePositionBorder(n)}this.updateTextColor(t),this.updateImageTint(n)}else t instanceof vt&&t.setClippingWidthDelta(0),this.updateTextPosition(t),this.updateTextColor(t);else if(null!=n){switch(this.Cn.with){case Y.TEXT:this.updateImagePositionText(n);break;case Y.PADDING:this.updateImagePositionPadding(n);break;case Y.BORDER:this.updateImagePositionBorder(n)}this.updateImageTint(n)}},r.prototype.isRefitable=function(t){return n.prototype.isRefitable.call(this,t)||null!=t&&t===this.xn},r.prototype.getType=function(){return"DImageBase"},r.prototype.destroy=function(){var i=this.xn;if(null!=i){this.xn=null;var r=this.Wn;r instanceof t.Texture&&(r.off("update",this._n,this),i.destroy())}n.prototype.destroy.call(this)},r}(dt),mt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DImage"},n}(gt),pt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.buttonMode=!0,this.Fn=function(t){return null!=t&&null!=t.value?t.value:null}(n)},Object.defineProperty(n.prototype,"value",{get:function(){return this.Fn},set:function(t){this.Fn=t},enumerable:!0,configurable:!0}),n.prototype.hasSelection=function(t){return t&&t.selection&&t.selection.add},n.prototype.getSelection=function(){for(var t=this.parent;t;){if(this.hasSelection(t))return t.selection;t=t.parent}return null},n.prototype.onSelect=function(t){var n=this.getSelection();n&&n.add(this)},n.prototype.onKeyDown=function(n){return this.isActionable()&&this.isFocused()&&R.isActivateKey(n)&&this.onSelect(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onStateChange=function(n,i){t.prototype.onStateChange.call(this,n,i),this.buttonMode=M.isActionable(n)},n.prototype.getType=function(){return"DListItem"},n}(mt),wt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getContext=function(){for(var t=this.parent;t;){if(t.getContext)return t.getContext();t=t.parent}return null},n.prototype.getCloseable=function(){for(var t=this.parent;t;){if(t.getCloseable)return t.getCloseable();t=t.parent}return null},n.prototype.getType=function(){return"DMenuItem"},n}(pt),Dt=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(t){n.prototype.init.call(this,t),this.initOnClick(t),this.initOnOver(t),this.initShortcuts(t)},r.prototype.initOnClick=function(t){var n=this;Z.onClick(this,(function(t){n.isActionable()&&n.onSelect(t)}))},r.prototype.initOnOver=function(t){var n=this;this.on(Z.over,(function(){var t=n.getContext();null!=t&&n.parent instanceof $&&t.trim(n.getCloseable())}))},r.prototype.initShortcuts=function(n){var i=this.Wt;if(this.Pn=this.theme.getShortcutTextMargin(),null!=i&&0<i.length){var r=i[0],e=R.toString(r);this.Un=this.In?new vt(e,this.Mn):new t.Text(e,this.Mn),this.appendRenderable(this.Un,!0)}else this.Un=null},r.prototype.updateShortcutText=function(){var t=this.Un;null!=t&&t.position.set(this.toRounded(this.width-this.Pn-t.width),this.toRounded(.5*(this.height-t.height)))},r.prototype.updateTextColor=function(t){n.prototype.updateTextColor.call(this,t);var i=this.Un;if(null!=i){var r=this.theme,e=this.state;i.style.fill=r.getColor(e),i.alpha=r.getAlpha(e)}},r.prototype.updateText=function(){n.prototype.updateText.call(this),this.updateShortcutText()},r.prototype.getType=function(){return"DMenuItemText"},r.prototype.onSelect=function(t){var i=this.getCloseable();null!=i&&i.emit("select",this.value,this,i),n.prototype.onSelect.call(this,t)},r.prototype.onShortcut=function(t){n.prototype.onShortcut.call(this,t),this.onSelect(t)},r}(wt),Tt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),n&&n.check&&this.setActive(!0)},n.prototype.getType=function(){return"DMenuItemCheck"},n.prototype.onSelect=function(n){this.setActive(!this.isActive()),t.prototype.onSelect.call(this,n)},n.isCompatible=function(t){return"check"in t},n}(Dt),Ot=function(){function n(){}return n.addItemCreator=function(t){this.CREATORS.push(t)},n.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},n.setMenuCreator=function(t){this.MENU_CREATOR=t},n.newItemOf=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){var s=t[e](i,r);if(null!=s)return s}return n?n(i,r):null},n.newItem=function(t,n){return this.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)},n.newItemsOf=function(n,i,r,e){for(var u=0,s=r.length;u<s;++u){var h=r[u];if(h instanceof t.DisplayObject)i.addChild(h);else{var o=n.newItem(h,e);if(null==o)throw new Error("No matching menu item creator found: "+JSON.stringify(h));i.addChild(o)}}},n.newItems=function(t,n,i){this.newItemsOf(this,t,n,i)},n.newMenu=function(t){if(null!=this.MENU_CREATOR)return this.MENU_CREATOR(t);throw new Error("Missing DMenu creator.")},n.CREATORS=[],n.CREATOR_DEFAULT=null,n}(),St=function(){function n(n,i,r,e,u){this.id=n,this.ref=0;var s=u.resolution;this.frame=new t.Rectangle(0,0,i*s,r*s),this.texture=new t.Texture(u,new t.Rectangle(0,0,1,1)),this.width=i,this.height=r,this.strokeWidth=e}return n.prototype.applyFrame=function(){var t=1/this.texture.baseTexture.resolution;this.texture.frame.x=this.frame.x*t,this.texture.frame.y=this.frame.y*t,this.texture.frame.width=this.width,this.texture.frame.height=this.height,this.texture.updateUvs(),this.texture.emit("update",this)},n.prototype.destroy=function(){this.texture.destroy()},n}(),Mt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.render=function(t){},n}(St),Et=function(t){function n(n,i){var r=t.call(this,n.id,n.width/i.resolution,n.height/i.resolution,0,i)||this;return r.canvas=n.canvas,r}return i(n,t),n.prototype.render=function(t){var n=this.canvas;if(null!=n){var i=this.frame;t.drawImage(n,i.x,i.y,i.width,i.height)}},n}(St),kt=function(t){function n(n,i){var r=t.call(this,n.src,n.width/i.resolution,n.height/i.resolution,0,i)||this;return r.image=n,r}return i(n,t),n.prototype.render=function(t){var n=this.frame,i=n.x,r=n.y,e=n.width,u=n.height,s=this.image;t.drawImage(s,i,r,e,u),t.drawImage(s,0,0,1,u,i-1,r-1,1,u+2),t.drawImage(s,0,0,e,1,i,r-1,e,1),t.drawImage(s,e-1,0,1,u,i+e,r-1,1,u+2),t.drawImage(s,0,u-1,e,1,i,r+u,e,1)},n}(St),It=function(t){function n(n,i,r){var e=t.call(this,n,i.width,i.height,0,r)||this;return e.dn=i,e}return i(n,t),n.prototype.render=function(t){var n=this.frame;t.drawImage(this.dn.canvas,n.x,n.y,n.width,n.height)},n}(St),Nt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.render=function(t){var n=this.frame;t.save(),t.fillStyle="#ffffff",t.fillRect(n.x-1,n.y-1,n.width+2,n.height+2),t.restore()},n}(St),yt=function(){function n(){var n=this.Qt=document.createElement("canvas");n.width=n.height=256;var i=this.zn=t.BaseTexture.from(n,{mipmap:t.MIPMAP_MODES.OFF,resolution:t.settings.RESOLUTION});this.Gn={},this.Hn=[],this.Vn={empty:new Mt("empty",10,10,0,i),white:new Nt("white",10,10,0,i)},this.R=!0}return n.prototype.updateFrames=function(t,n){for(var i=4,r=4,e=0,u=0,s=n.length;u<s;++u){var h=n[u];t<i+h.frame.width+4&&(i=4,r+=e+4,e=0),h.frame.x=0|i,h.frame.y=0|r,i+=h.frame.width+4,e=Math.max(e,h.frame.height)}for(var o=r+e+4,c=256;c<o;)c<<=1;return Math.min(4096,c)},n.prototype.renderFrames=function(t,n,i){var r=this.Qt;r.width=t,r.height=n;var e=r.getContext("2d");if(null!=e)for(var u=0,s=i.length;u<s;++u)i[u].render(e)},n.prototype.applyFrames=function(t){for(var n=0,i=t.length;n<i;++n)t[n].applyFrame()},n.prototype.calcCanvasWidth=function(t){for(var n=128,i=t.length-1;0<=i;--i)for(var r=t[i],e=Math.max(r.frame.width,r.frame.height);n<e;)n<<=1;return Math.min(4096,n<<1)},n.prototype.cleanup=function(t){t.sort(n.ITEM_COMPARATOR);for(var i=t.length-1;0<=i;--i)if(0<t[i].ref)return void(t.length=i+1);t.length=0},n.prototype.begin=function(){for(var t=this.Hn,n=0,i=t.length;n<i;++n)t[n].ref=0;this.R=!1},n.prototype.end=function(){for(var t=this.Gn,n=this.Hn,i=0,r=n.length;i<r;++i){var e=n[i];e.ref<=0&&(e.id in this.Vn||e.destroy(),delete t[e.id],this.R=!0)}},n.prototype.repack=function(t){if(!0===t||this.R){this.R=!1;var n=this.Hn;this.cleanup(n);var i=this.calcCanvasWidth(n),r=this.updateFrames(i,n);this.renderFrames(i,r,n),this.zn.setRealSize(i,r),this.applyFrames(n)}},n.prototype.get=function(t){var n=this.Gn[t];if(null!=n)return n.ref+=1,n;var i=this.Vn[t];return null!=i?(this.set(t,i),i):null},n.prototype.set=function(t,n){var i=this.Gn[t];return n.ref+=1,this.Gn[t]=n,this.Hn.push(n),this.R=!0,i},n.prototype.toDirty=function(){this.R=!0},n.prototype.getDefaultTexture=function(){return this.get("white").texture},n.prototype.getBaseTexture=function(){return this.zn},n.prototype.release=function(t){var n=this.Gn,i=n[t];null!=i&&(i.ref-=1,i.ref<=0&&(i.id in this.Vn||i.destroy(),delete n[t],this.R=!0))},n.ITEM_COMPARATOR=function(t,n){return t.ref<=0?n.ref<=0?0:1:n.ref<=0?-1:t.frame.height<n.frame.height?-1:n.frame.height<t.frame.height?1:t.frame.width-n.frame.width},n}(),xt=function(){function t(){var t=this;this.Xn=null,this.j=null,this.Yn=null,this.Kn=NaN,this.Jn=NaN,this.Zn=NaN,this.qn=NaN,this.Qn=null,this.$n=null;var n=this.Qt=document.createElement("canvas");n.width=64,n.height=64,this.ti=function(t){t.preventDefault()},this.ni=function(){t.restore()},this.ii=function(){t.destroy()},n.addEventListener("webglcontextlost",this.ti,!1),n.addEventListener("webglcontextrestored",this.ni,!1),window.addEventListener("unload",this.ii,!1)}return t.prototype.init=function(){var t=this.Qt;if(null!=t&&(null==this.Xn||this.Xn.isContextLost())){var n={alpha:!0,antialias:!1,depth:!1,stencil:!1,premultipliedAlpha:!1},i=this.Xn=t.getContext("webgl",n)||t.getContext("experimental-webgl",n);null!=i&&(i.clearColor(1,1,1,0),this.makeVertexBuffer(),this.makeUvBuffer(),this.makeShaders(),this.j=null)}return this},t.prototype.restore=function(){this.init()},t.prototype.getCanvas=function(){return this.Qt},t.prototype.getShader=function(t,n,i){var r=i?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);return null==r||(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))?r:(console&&console.error("Failed to compile the shader: "+t.getShaderInfoLog(r)),null)},t.prototype.makeShaders=function(){var t=this.Xn;if(null!=t&&!0!==t.isContextLost()){var n=this.getShader(t,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying mediump vec2 vTextureCoord;\nvoid main(void) {\n\tgl_Position = vec4(aVertexPosition, 0.0, 1.0);\n\tvTextureCoord = aTextureCoord;\n}\n",!1);if(null!=n){var i=this.getShader(t,"\nprecision mediump float;\n\nvarying mediump vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uSize;\n\nfloat calcDistance( float x, float y, float dx, float dy ) {\n\tfloat xd = x + dx;\n\tfloat yd = y + dy;\n\tfloat u = xd / uSize.x;\n\tfloat v = yd / uSize.y;\n\tfloat ul = (xd - 1.0) / uSize.x;\n\tfloat vt = (yd - 1.0) / uSize.y;\n\n\tfloat m = texture2D(uSampler, vec2(u , v )).a;\n\tfloat l = texture2D(uSampler, vec2(ul, v )).a;\n\tfloat t = texture2D(uSampler, vec2(u , vt)).a;\n\n\tfloat xl = mix( xd - 1.0, xd, (0.5 - l) / (m - l) );\n\tfloat yt = mix( yd - 1.0, yd, (0.5 - t) / (m - t) );\n\n\tbool bl = ( min(l, m) < 0.5 && 0.5 <= max(l, m) );\n\tbool bt = ( min(t, m) < 0.5 && 0.5 <= max(t, m) );\n\n\tfloat ll = (bl ? length( vec2( xl - x, yd - y ) ) : 100.0);\n\tfloat lt = (bt ? length( vec2( xd - x, yt - y ) ) : 100.0);\n\n\treturn min( ll, lt );\n}\n\nfloat calcDistancesY( float x, float y, float dx ) {\n\tfloat d = 100.0;\n\tfor( float dy=-6.0; dy<6.5; dy++ ) {\n\t\td = min( d, calcDistance( x, y, dx, dy ) );\n\t}\n\treturn d;\n}\n\nfloat calcDistances( float x, float y ) {\n\tfloat d = 100.0;\n\tfor( float dx=-6.0; dx<6.5; dx++ ) {\n\t\td = min( d, calcDistancesY( x, y, dx ) );\n\t}\n\treturn d;\n}\n\nvoid main(void) {\n\tfloat t = texture2D(uSampler, vTextureCoord).a;\n\tfloat x = vTextureCoord.x * uSize.x;\n\tfloat y = vTextureCoord.y * uSize.y;\n\tfloat d = min( 6.0, calcDistances( x, y ) ) / 12.0;\n\td = clamp( mix( 0.5 - d, 0.5 + d, step( 0.5, t ) ), 0.0, 1.0 );\n\tgl_FragColor = vec4(1.0, 1.0, 1.0, d);\n}\n",!0);if(null!=i){var r=this.Yn=t.createProgram();if(null!=r)return t.attachShader(r,n),t.attachShader(r,i),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?(t.deleteShader(n),t.deleteShader(i),t.useProgram(r),this.Kn=t.getAttribLocation(r,"aVertexPosition"),this.Jn=t.getAttribLocation(r,"aTextureCoord"),this.Zn=t.getUniformLocation(r,"uSampler"),this.qn=t.getUniformLocation(r,"uSize"),t.useProgram(null),r):(console&&console.error("Failed to link the program: "+t.getError()),t.deleteShader(n),t.deleteShader(i),null);t.deleteShader(n),t.deleteShader(i)}else t.deleteShader(n)}}return null},t.prototype.destroyShaders=function(){var t=this.Xn;if(null!=t&&!0!==t.isContextLost()){var n=this.Yn;null!=n&&(this.Yn=null,t.useProgram(null),t.deleteProgram(n))}},t.prototype.updateTexture=function(t){var n=this.Xn,i=this.Qt;if(null!=n&&!0!==n.isContextLost()&&null!=i){var r=t.width,e=t.height;i.width===r&&i.height===e||(i.width=r,i.height=e,n.viewport(0,0,r,e));var u=this.j;return null==u?(u=this.j=n.createTexture(),n.bindTexture(n.TEXTURE_2D,u),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.bindTexture(n.TEXTURE_2D,null)):(n.bindTexture(n.TEXTURE_2D,u),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.bindTexture(n.TEXTURE_2D,null)),u}return null},t.prototype.destroyTexture=function(){var t=this.Xn,n=this.j;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.j=null,t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(n))},t.prototype.makeVertexBuffer=function(){var t=this.Xn;if(null!=t&&!0!==t.isContextLost()){var n=this.Qn=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),t.STATIC_DRAW),n}return null},t.prototype.destroyVertexBuffer=function(){var t=this.Xn,n=this.Qn;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.Qn=null,t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(n))},t.prototype.makeUvBuffer=function(){var t=this.Xn;if(null!=t&&!0!==t.isContextLost()){var n=this.$n=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),t.STATIC_DRAW),n}return null},t.prototype.destroyUvBuffer=function(){var t=this.Xn,n=this.$n;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.$n=null,t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(n))},t.prototype.render=function(){var t=this.Xn,n=this.Qt,i=this.Yn,r=this.Qn,e=this.$n,u=this.j;if(null!=t&&!0!==t.isContextLost()&&null!=n&&null!=i&&null!=r&&null!=e&&null!=u){t.clear(t.COLOR_BUFFER_BIT),t.useProgram(i),t.bindBuffer(t.ARRAY_BUFFER,r);var s=this.Kn;t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e);var h=this.Jn;t.enableVertexAttribArray(h),t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,u),t.uniform1i(this.Zn,0),t.uniform2f(this.qn,n.width,n.height),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.bindTexture(t.TEXTURE_2D,null),t.bindBuffer(t.ARRAY_BUFFER,null),t.useProgram(null)}},t.prototype.read=function(t){var n=this.Xn,i=this.Qt;if(null!=n&&!0!==n.isContextLost()&&null!=i){var r=i.width,e=i.height;t.width=r,t.height=e;var u=t.getContext("2d");null!=u&&u.drawImage(i,0,0)}},t.prototype.destroy=function(){this.destroyVertexBuffer(),this.destroyUvBuffer(),this.destroyShaders();var t=this.Qt;null!=t&&(this.Qt=null,t.removeEventListener("webglcontextlost",this.ti,!1),t.removeEventListener("webglcontextrestored",this.ni,!1),window.removeEventListener("unload",this.ii,!1));var n=this.Xn;if(null!=n){this.Xn=null;var i=n.getExtension("WEBGL_lose_context");null!=i&&i.loseContext()}},t}(),Ct=function(){function t(n){this._t="font-atlas:"+n,this.ri=t.getGenerator().init(),this.Qt=document.createElement("canvas"),this.tn={family:t.toFontFamily(n),size:32,italic:!1},this.nn={},this.in=0,this.o=1,this.C=1,this.R=!0}return Object.defineProperty(t.prototype,"id",{get:function(){return this._t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.tn},set:function(t){this.tn.family=t.family,this.tn.size=t.size,this.tn.italic=t.italic},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.o},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.C},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this.Qt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"generator",{get:function(){return this.ri},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characters",{get:function(){return this.nn},enumerable:!0,configurable:!0}),t.prototype.begin=function(){this.in=0;var t=this.nn;for(var n in t)t[n].ref=0},t.prototype.end=function(){var t=this.nn;for(var n in t){var i=t[n];i.ref<=0&&(i.life-=1,i.life<=0&&(delete t[n],this.R=!0))}},t.prototype.addAscii=function(){this.add(it),this.addChar("...")},t.prototype.addChar=function(t){var n=this.nn;if("\n"!==t){var i=n[t];null!=i?(i.ref<=0&&(this.in+=1),i.ref+=1):(n[t]=new et(0,1,1,!1),this.in+=1,this.R=!0)}},t.prototype.add=function(t){for(var n=0,i=t.length;n<i;++n)this.addChar(t[n])},t.prototype.get=function(t){return this.nn[t]},t.prototype.update=function(){if(this.R){var n=this.Qt,i=this.ri;if(null!=n&&null!=i){var r=n.getContext("2d");if(null!=r){this.R=!1;var e=this.tn,u=this.nn,s=e.size+14,h=t.toPowerOf2(Math.ceil(Math.sqrt(this.in))*s);this.o=h;var o=(e.italic?"italic ":"")+e.size+"px "+e.family;r.font=o,r.textAlign="left",r.textBaseline="middle",r.lineWidth=0,r.lineCap="round",r.lineJoin="miter",r.miterLimit=0,r.fillStyle="#FFFFFF";var c=s>>1,f=0,a=0;for(var l in u){var v=u[l],b=r.measureText(l).width,d=Math.ceil(7+b+7),g=s;h<=f+d&&(f=0,a+=s),v.x=f,v.y=a,v.width=d,v.height=g,v.advance=b,v.origin.x=f+7,v.origin.y=a+c,f+=d}var m=this.C=a+s;for(var l in n.width=h,n.height=m,r.font=o,r.textAlign="left",r.textBaseline="middle",r.lineWidth=0,r.lineCap="round",r.lineJoin="miter",r.miterLimit=4,r.fillStyle="#FFFFFF",r.clearRect(0,0,h,m),u)v=u[l],r.fillText(l,v.origin.x,v.origin.y);return i.updateTexture(n),i.render(),i.read(n),!0}}}return!1},Object.defineProperty(t.prototype,"length",{get:function(){return this.in},enumerable:!0,configurable:!0}),t.prototype.toJson=function(){return{width:this.o,height:this.C,font:this.tn,characters:this.nn}},t.prototype.toString=function(){return JSON.stringify(this.toJson())},t.prototype.destroy=function(){null!=this.ri&&(this.ri=null),null!=this.Qt&&(this.Qt=null);var t=this.nn;for(var n in t)delete t[n]},t.toFontFamily=function(n){return"auto"===n?t.getAutoFontFamily():n},t.toPowerOf2=function(t){for(var n=32;n<t;)n<<=1;return n},t.getGenerator=function(){return null==t.GENERATOR&&(t.GENERATOR=new xt),t.GENERATOR},t.getAutoFontFamily=function(){return null==t.FONT_FAMILY_AUTO&&(t.FONT_FAMILY_AUTO=K.getInstance().get("DBase").getFontFamilly()),t.FONT_FAMILY_AUTO},t.GENERATOR=null,t.FONT_FAMILY_AUTO=null,t}(),jt=function(){function t(){this.fn={}}return t.prototype.begin=function(){var t=this.fn;for(var n in t)t[n].begin()},t.prototype.end=function(){var t=this.fn;for(var n in t){var i=t[n];0<i.length&&i.addAscii(),i.end(),i.length<=0&&(i.destroy(),delete t[n])}},t.prototype.add=function(t,n){var i=this.fn[t];if(null!=i)i.add(n);else{var r=new Ct(t);r.add(n),this.fn[t]=r}},t.prototype.get=function(t){var n=this.fn[t];return null!=n?n:null},t.prototype.update=function(t){var n=this.fn,i=t.getBaseTexture();for(var r in n){var e=n[r];if(e.update()){var u=e.id,s=t.get(u);if(null!=s){var h=e.width,o=e.height,c=i.resolution;s.frame.width=h,s.frame.height=o,s.width=h/c,s.height=o/c,t.toDirty()}else t.set(u,new Et(e,i))}}},t.prototype.destroy=function(){var t=this.fn;for(var n in t)t[n].destroy();this.fn={}},t}(),At=function(){function t(t,n,i){var r=this;this.instance=null,this.newInstance=t,this.options=n,null!=i&&(i.isActive()&&setTimeout((function(){r.get()}),0),i.on("active",(function(){r.get()})))}return t.prototype.get=function(){var t=this.instance;return null==t&&(t=this.instance=new this.newInstance(this.options)),t},t}(),Bt=function(){function t(){}return t.prototype.format=function(t,n,i){return i.getHours()<12?"AM":"PM"},t}(),Rt=function(){function t(){}return t.prototype.format=function(t,n,i){return i.getHours()<12?"am":"pm"},t}(),Lt=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getDate())},t}(),Wt=function(){function t(){}return t.prototype.format=function(t,n,i){return""+(0|t)},t}(),_t=function(t){this.precision=null!=t?+t.substring(1,t.length):0},Ft=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.format=function(t,n,i){return t.toExponential(this.precision)},n}(_t),Pt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.format=function(t,n,i){return t.toFixed(this.precision)},n}(_t),Ut=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.format=function(t,n,i){var r=this.toAbs(t,n,i);return r<1e-24?this.ei(t,1,""):r<1e-21?this.ei(t,1e24,"y"):r<1e-18?this.ei(t,1e21,"z"):r<1e-15?this.ei(t,1e18,"a"):r<1e-12?this.ei(t,1e15,"f"):r<1e-9?this.ei(t,1e12,"p"):r<1e-6?this.ei(t,1e9,"n"):r<.001?this.ei(t,1e6,"μ"):r<1?this.ei(t,1e3,"m"):r<1e3?this.ei(t,1,""):r<1e6?this.ei(t,.001,"k"):r<1e9?this.ei(t,1e-6,"M"):r<1e12?this.ei(t,1e-9,"G"):r<1e15?this.ei(t,1e-12,"T"):r<1e18?this.ei(t,1e-15,"P"):r<1e21?this.ei(t,1e-18,"E"):r<1e24?this.ei(t,1e-21,"Z"):this.ei(t,1e-24,"Y")},n.prototype.toAbs=function(t,n,i){return Math.abs(t)},n.prototype.ei=function(t,n,i){return""+(t*n).toFixed(this.precision)+i},n}(_t),zt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.format=function(t,n,i){return t.toPrecision(this.precision)},n}(_t),Gt=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getHours())},t}(),Ht=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getHours()%12)},t}(),Vt=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMonth()+1)},t}(),Xt=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMinutes())},t}(),Yt=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMilliseconds())},t}(),Kt=function(){function t(){}return t.prototype.format=function(t,n,i){return(100*t|0)+"%"},t}(),Jt=function(){function t(){}return t.prototype.format=function(t,n,i){return(0|t)+"%"},t}(),Zt=function(t,n,i){var r=t.length;if(n<r)return t;for(var e="",u=0,s=n-r;u<s;++u)e+=i;return e+t},qt=function(){function t(t,n,i){this.length=t,this.character=n,this.node=i}return t.prototype.format=function(t,n,i){return Zt(this.node.format(t,n,i),this.length,this.character)},t}(),Qt=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"===r[0]?"("+r.substring(1,r.length)+")":r},t}(),$t=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"!==r[0]?"+"+r:r},t}(),tn=function(){function t(){}return t.prototype.format=function(t,n,i){return Math.round(100*t)+"%"},t}(),nn=function(){function t(){}return t.prototype.format=function(t,n,i){return Math.round(t)+"%"},t}(),rn=function(){function t(t,n,i,r,e,u,s){this.Y=t,this.M=n,this.D=i,this.H=r,this.m=e,this.s=u,this.mi=s}return t.prototype.format=function(t,n,i){return n<1e3?this.s.format(t,n,i)+"."+this.mi.format(t,n,i):n<6e4?this.m.format(t,n,i)+":"+this.s.format(t,n,i):n<36e5?this.H.format(t,n,i)+":"+this.m.format(t,n,i):n<864e5?this.M.format(t,n,i)+"/"+this.D.format(t,n,i)+" "+this.H.format(t,n,i):n<2592e6?this.M.format(t,n,i)+"/"+this.D.format(t,n,i):this.Y.format(t,n,i)+"/"+this.M.format(t,n,i)},t}(),en=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"!==r[0]?" "+r:r},t}(),un=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.toAbs=function(t,n,i){return Math.abs(n)},n}(Ut),sn=function(){function t(t){this.str=t}return t.prototype.format=function(t,n,i){return this.str},t}(),hn=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getFullYear())},t}(),on=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getFullYear()%100)},t}(),cn=function(){function t(){}return t.prototype.format=function(t,n,i){var r=i.getTimezoneOffset();return(r<=0?"+":"-")+Zt(String(Math.floor(Math.abs(r)/60)),2,"0")+":"+Zt(String(Math.floor(Math.abs(r)%60)),2,"0")},t}(),fn=function(){function t(){}return t.prototype.format=function(t,n,i){return""+Math.round(t)},t}(),an=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getSeconds())},t}(),ln=/%(0|_|-|\+|\()?(\.\d+)?(Y(?:MD?)?|y(?:MD?)?|MD?|D|H(?:ms?)?|h(?:ms?)?|m(?:i|s)?|a|A|s(?:s?i|dt)?|z|%|f(?:si)?|e|g|d|r(?:d|p)|p|P|RP)/g,vn=function(){function t(t){var n=0,i=!1,r=[];for(ln.lastIndex=0;;){var e=ln.exec(t);if(null==e){n<t.length&&r.push(new sn(t.substring(n,t.length)));break}var u=e.index;n<u&&r.push(new sn(t.substring(n,u))),n=u+e[0].length;var s=e[0],h=e[1],o=e[2];switch(e[3]){case"Y":i=!0,r.push(new hn);break;case"YM":i=!0,r.push(new hn,new sn("/"),this.toModifiedNodeDatetime2(h,new Vt));break;case"YMD":i=!0,r.push(new hn,new sn("/"),this.toModifiedNodeDatetime2(h,new Vt),new sn("/"),this.toModifiedNodeDatetime2(h,new Lt));break;case"y":i=!0,r.push(this.toModifiedNodeDatetime2(h,new on));break;case"yM":i=!0,r.push(this.toModifiedNodeDatetime2(h,new on),new sn("/"),this.toModifiedNodeDatetime2(h,new Vt));break;case"yMD":r.push(this.toModifiedNodeDatetime2(h,new on),new sn("/"),this.toModifiedNodeDatetime2(h,new Vt),new sn("/"),this.toModifiedNodeDatetime2(h,new Lt));break;case"M":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Vt));break;case"MD":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Vt),new sn("/"),this.toModifiedNodeDatetime2(h,new Lt));break;case"D":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Lt));break;case"H":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Gt));break;case"Hm":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Gt),new sn(":"),this.toModifiedNodeDatetime2(h,new Xt));break;case"Hms":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Gt),new sn(":"),this.toModifiedNodeDatetime2(h,new Xt),new sn(":"),this.toModifiedNodeDatetime2(h,new an));break;case"h":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Ht));break;case"hm":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Ht),new sn(":"),this.toModifiedNodeDatetime2(h,new Xt));break;case"hms":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Ht),new sn(":"),this.toModifiedNodeDatetime2(h,new Xt),new sn(":"),this.toModifiedNodeDatetime2(h,new an));break;case"m":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Xt));break;case"ms":i=!0,r.push(this.toModifiedNodeDatetime2(h,new Xt),new sn(":"),this.toModifiedNodeDatetime2(h,new an));break;case"mi":i=!0,r.push(this.toModifiedNodeDatetime3(h,new Yt));break;case"a":i=!0,r.push(new Rt);break;case"A":i=!0,r.push(new Bt);break;case"s":i=!0,r.push(this.toModifiedNodeDatetime2(h,new an));break;case"sdt":i=!0,r.push(new rn(new hn,this.toModifiedNodeDatetime2(h,new Vt),this.toModifiedNodeDatetime2(h,new Lt),this.toModifiedNodeDatetime2(h,new Gt),this.toModifiedNodeDatetime2(h,new Xt),this.toModifiedNodeDatetime2(h,new an),this.toModifiedNodeDatetime3(h,new Yt)));break;case"z":i=!0,r.push(new cn);break;case"%":r.push(new sn("%"));break;case"f":r.push(this.toModifiedNodeNumber(h,new Pt(o)));break;case"e":r.push(this.toModifiedNodeNumber(h,new Ft(o)));break;case"g":r.push(this.toModifiedNodeNumber(h,new zt(o)));break;case"rd":r.push(this.toModifiedNodeNumber(h,new fn));break;case"d":r.push(this.toModifiedNodeNumber(h,new Wt));break;case"P":r.push(this.toModifiedNodeNumber(h,new Kt));break;case"p":r.push(this.toModifiedNodeNumber(h,new Jt));break;case"RP":r.push(this.toModifiedNodeNumber(h,new tn));break;case"rp":r.push(this.toModifiedNodeNumber(h,new nn));break;case"fsi":r.push(this.toModifiedNodeNumber(h,new Ut(o)));break;case"ssi":r.push(this.toModifiedNodeNumber(h,new un(o)));break;default:r.push(new sn(s))}}this.isDateRequired=i,this.nodes=r,this.date=new Date}return t.prototype.toModifiedNodeDatetime2=function(t,n){switch(t){case"_":return new qt(2," ",n);case"-":return n;default:return new qt(2,"0",n)}},t.prototype.toModifiedNodeDatetime3=function(t,n){switch(t){case"_":return new qt(3," ",n);case"-":return n;default:return new qt(3,"0",n)}},t.prototype.toModifiedNodeNumber=function(t,n){switch(t){case"_":return new en(n);case"+":return new $t(n);case"(":return new Qt(n);default:return n}},t.prototype.format=function(t,n){var i=this.nodes,r=this.date;this.isDateRequired&&r.setTime(t);for(var e="",u=0,s=i.length;u<s;++u)e+=i[u].format(t,n,r);return e},t.prototype.toFunction=function(){var t=this;return function(n,i){return t.format(n,i)}},t}(),bn=function(){function t(){}return t.create=function(t){return new vn(t)},t}(),dn=function(){function t(){}return t.blend=function(t,n,i){var r=Math.max(0,Math.min(1,i));return Math.max(0,Math.min(1,t*(1-r)+n*r))},t}(),gn=function(n){function r(i,r){var e=n.call(this,new Image)||this;return e.si=null,e.o=0,e.C=0,e.svg=i,t.resources.BaseImageResource.crossOrigin(e.source,e.svg,r&&r.crossorigin),r&&!1===r.autoLoad||e.load(),e}return i(r,n),r.prototype.load=function(){var t=this;return this.si?this.si:(this.si=new Promise((function(n){var i=t.source;i.onerror=function(n){i.onerror=null,t.onError.run(n)},i.onload=function(){t.resize(i.width,i.height),n()},i.src=t.svg})),this.si)},r.test=function(t,n){return"svg"===n||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},r}(t.resources.BaseImageResource),mn=function(t){return"data:image/svg+xml;base64,"+btoa(t)};t.resources.INSTALLED.push(gn);var pn,wn=function(){function n(t,n,i){this.o=t,this.hi=n,this.oi=i,this.ci={},this.fi="",this.ai=0,this.li=0,this.C=0}return Object.defineProperty(n.prototype,"width",{get:function(){return this.o},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ratio",{get:function(){return this.hi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"margin",{get:function(){return this.oi},enumerable:!0,configurable:!0}),n.prototype.add=function(n,i,r,e){var u=this.ci;if(!(n in u)){var s=this.oi,h=this.ai,o=this.li;this.o<=h+i?(h=0,o=this.li+this.C+s,this.C=r,this.li=o):this.C=Math.max(this.C,r),this.ai=h+i+s,u[n]=new t.Rectangle(h,o,i,r);var c=this.hi;return this.fi+='<g transform="translate('+h*c+","+o*c+')">'+e+"</g>",!0}return!1},Object.defineProperty(n.prototype,"mappings",{get:function(){return this.build()},enumerable:!0,configurable:!0}),n.prototype.build=function(n){var i=this.vi;if(null==i||n&&n.force){var r=t.settings.RESOLUTION,e=this.o,u=Math.pow(2,Math.ceil(Math.log(this.li+this.C)/Math.LN2)),s=e*r,h=u*r,o=this.hi,c=mn('<svg width="'+s+'" height="'+h+'" viewBox="0 0 '+e*o+" "+u*o+'" xmlns="http://www.w3.org/2000/svg">'+this.fi+"</svg>"),f=n&&null!=n.scaling?n.scaling:t.SCALE_MODES.NEAREST,a=t.BaseTexture.from(c,{resolution:r,scaleMode:f}),l=this.ci;for(var v in i=this.vi={},l)i[v]=new t.Texture(a,l[v])}return i},n}();!function(t){t[t.TOP=0]="TOP",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=3]="BOTTOM"}(pn||(pn={}));var Dn,Tn=function(){function t(){}return t.attach=function(t,n,i,r,e,u,s){var h=t.width,o=t.height,c=0,f=0;switch(s){case pn.LEFT:(c=n.left-h-i)<0&&e<(c=n.right+i)+h&&(c=0),f=this.adjust(n.top,o,u);break;case pn.TOP:c=this.adjust(n.left,h,e),(f=n.top-o-r)<0&&u<(f=n.bottom+r)+o&&(f=0);break;case pn.RIGHT:e<(c=n.right+i)+h&&(c=n.left-h-i)<0&&(c=e-h),f=this.adjust(n.top,o,u);break;case pn.BOTTOM:c=this.adjust(n.left,h,e),u<(f=n.bottom+r)+o&&(f=n.top-o-r)<0&&(f=u-o)}t.position.set(c,f)},t.adjust=function(t,n,i){return t<0?i<t+n?.5*(i-n):0:i<t+n?i<n?.5*(i-n):i-n:t},t}(),On=function(){function n(){}return n.apply=function(t,n){var i=this;t.on(Z.down,(function(r){if(r.target===t){var e=i.point;e.copyFrom(r.data.global),t.toLocal(e,void 0,e,!0);var u=e.x,s=e.y;(u<0||s<0||t.width<u||t.height<s)&&n(r)}}))},n.point=new t.Point,n}(),Sn=function(t){var n=document.getSelection();if(n){var i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i)}return n},Mn=function(t){return t.clipboardData||window.clipboardData},En=function(t){function n(){var n=t.call(this)||this,i=document.body;return i.addEventListener("copy",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("copy",Mn(t)))})),i.addEventListener("cut",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("cut",Mn(t)))})),i.addEventListener("paste",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("paste",Mn(t)))})),n}return i(n,t),n.copy=function(t){var n=navigator.clipboard;n&&n.writeText?n.writeText(t):function(t,n){if("undefined"==typeof ClipboardEvent){var i=t.clipboardData;if(void 0!==i&&void 0!==i.setData)return i.setData("Text",n),!0}return!1}(window,t)||function(t){var n=document.createElement("div");n.setAttribute("style","-webkit-user-select: text !important"),n.textContent="Dummy",document.body.appendChild(n);var i=Sn(n),r=!1;if(i){var e=function(i){if(i.target===n){var e=Mn(i);e.setData("text/plain",t),r=e.getData("text/plain")===t,i.preventDefault()}};document.addEventListener("copy",e);try{document.execCommand("copy")}finally{document.removeEventListener("copy",e)}i.removeAllRanges()}return document.body.removeChild(n),r}(t)||navigator.userAgent.indexOf("Edge")<0&&function(t){var n=document.createElement("div");n.setAttribute("style","-webkit-user-select: text !important");var i=document.createElement("span");i.innerText=t,(n.attachShadow?n.attachShadow({mode:"open"}):n).appendChild(i),document.body.appendChild(n);var r=Sn(n);r&&(document.execCommand("copy"),r.removeAllRanges()),document.body.removeChild(n)}(t)},n}(t.utils.EventEmitter),kn=function(){function t(t,n,i,r){this.dx=t,this.dy=n,this.ds=i,this.dt=r}return t.prototype.set=function(t,n,i,r){this.dx=t,this.dy=n,this.ds=i,this.dt=r},t}(),In=function(){function t(){}return t.LINEAR=function(t){return t},t.ELASTIC=function(t){return t*(3*(1-t)*(1-t)+t*(3*(1-t)+t))},t.QUAD_IN_OUT=function(t){return t<.5?2*t*t:(4-2*t)*t-1},t}(),Nn=function(t){function n(n){var i=t.call(this)||this;return i._t=null,i.bi=null,i.di=0,i.gi=null!=n&&null!=n.duration?n.duration:200,i.pi=1/Math.max(1,i.gi),i.wi=!1,i.Di=null!=n?n.onTime:void 0,i.Ti=function(){i.onTimeBase()},i.Oi=null!=n?n.onStart:void 0,i.Si=null!=n?n.onEnd:void 0,i.Mi=null!=n&&null!=n.timing?n.timing:In.ELASTIC,i}return i(n,t),Object.defineProperty(n.prototype,"target",{get:function(){return this.bi},set:function(t){this.bi=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this.gi},set:function(t){this.gi=t,this.pi=1/Math.max(1,t)},enumerable:!0,configurable:!0}),n.prototype.start=function(t){void 0===t&&(t=!1),this.stop(),this.di=Date.now(),this.wi=t,this._t=window.setTimeout(this.Ti,0),this.onStart(t);var n=this.gi,i=this.toTime(t?n:0);this.onTime(i,t,0)},n.prototype.onStart=function(t){var n=this.Oi;null!=n&&n(t,this),this.emit("start",t,this)},n.prototype.onTime=function(t,n,i){var r=this.Di;null!=r&&r(t,n,i,this),this.emit("time",t,n,i,this)},n.prototype.onEnd=function(t){var n=this.Si;null!=n&&n(t,this),this.emit("end",t,this)},n.prototype.isStarted=function(){return null!=this._t},n.prototype.isReverse=function(){return this.wi},n.prototype.onTimeBase=function(){if(null!=this._t){this._t=null;var t=Date.now()-this.di,n=this.gi,i=this.wi;if(t<n){this._t=window.setTimeout(this.Ti,0);var r=this.toTime(i?n-t:t);this.onTime(r,i,t)}else r=this.toTime(i?0:n),this.onTime(r,i,t),this.onEnd(i)}},n.prototype.toTime=function(t){return this.Mi(t*this.pi,this)},n.prototype.stop=function(){var t=this._t;null!=t&&(this._t=null,window.clearTimeout(t))},n.prototype.end=function(){var t=this._t;if(null!=t){this._t=null,window.clearTimeout(t);var n=this.wi,i=Date.now()-this.di,r=this.gi,e=this.toTime(n?0:r);this.onTime(e,n,i),this.onEnd(n)}},n}(t.utils.EventEmitter),yn=function(){function t(t){var n=this;this.Ei=[],this.ki=[],this.Ii=0,this.Ni=-1,this.yi=0,this.xi=0,this.Ci=0,this.ji=0,this.Ai=new Nn({onTime:function(t){n.onEase(t)},timing:In.LINEAR,duration:1e3});var i=t&&t.duration;i?(this.Bi=null!=i.position?i.position:1,this.Ri=null!=i.scale?i.scale:1):(this.Bi=1,this.Ri=1),this.Li=t.on.move}return t.prototype.onStart=function(){for(var n=this.Ei,i=n.length,r=t.HISTORY_CAPACITY;i<r;++i)n.push(new kn(0,0,1,0));this.Ii=0,this.Ni=-1,this.Ai.stop()},t.prototype.onMove=function(n,i,r,e){var u=t.HISTORY_CAPACITY,s=this.Ni,h=(s+1)%u;this.Ni=h;var o=this.Ii;(h<s||0<=s&&s<o)&&(this.Ii=(o+1)%u),this.Ei[h].set(n,i,r,e)},t.prototype.updateHistoriesSorted=function(t){var n=this.Ei,i=this.ki,r=this.Ii,e=this.Ni,u=n.length;if(e<0)return i.length=0,t;if(e<r){var s=t;i.length=0;for(var h=e;0<=h;--h){var o=n[h];if(!(s+o.dt<160))return s;s+=o.dt,i.push(o)}for(h=u-1;r<=h;--h){var c=n[h];if(!(s+c.dt<160))return s;s+=c.dt,i.push(c)}return s}for(s=t,i.length=0,h=e;r<=h;--h){var f=n[h];if(!(s+f.dt<160))return s;s+=f.dt,i.push(f)}return s},t.prototype.onEnd=function(t){var n=this.updateHistoriesSorted(t),i=this.ki,r=i.length;if(0<r){for(var e=0,u=0,s=0,h=0,o=0;o<r;++o){var c=i[o];e+=c.dx,u+=c.dy,s+=c.ds,h+=c.dt}var f=(1-t/n)/r;e*=f,u*=f,s=1+(s-r)*f,h*=f,this.yi=e,this.xi=u,this.Ci=s,this.ji=h;var a=40*this.Bi*Math.sqrt(e*e+u*u),l=1e4*this.Ri*Math.abs(s-1),v=this.Ai;v.duration=Math.max(a,l),v.start()}},t.prototype.onEase=function(t){var n=1-t;this.Li(this.yi*n,this.xi*n,1+(this.Ci-1)*n,t)},t.prototype.stop=function(){this.Ai.stop()},t.HISTORY_CAPACITY=5,t}();!function(t){t[t.NONE=0]="NONE",t[t.CTRL=1]="CTRL",t[t.SHIFT=2]="SHIFT",t[t.ALT=4]="ALT",t[t.AND=8]="AND",t[t.OR=16]="OR",t[t.NOT_NONE=23]="NOT_NONE"}(Dn||(Dn={}));var xn,Cn=function(){function t(){}return t.from=function(t){var n="data"in t?t.data.originalEvent:t;return(n.ctrlKey?Dn.CTRL:Dn.NONE)|(n.altKey?Dn.ALT:Dn.NONE)|(n.shiftKey?Dn.SHIFT:Dn.NONE)},t.match=function(n,i){return i&Dn.OR?!!(t.from(n)&i):t.from(n)===i},t}(),jn=function(t,n){if(null==t||!0===t)return{on:{move:n}};var i=t.duration;return a(i)?{duration:{position:i,scale:i},on:{move:n}}:{duration:i,on:{move:n}}},An=function(t){var n=t&&t.checker,i=Cn.match;return n?{start:n.start||i,move:n.move||i}:{start:i,move:i}},Bn=function(){function n(n){var i=this,r=this.bi=n.target,u=n.on;u&&(this.Oi=u.start,this.Li=u.move,this.Si=u.end),this.Wi=n&&n.modifier||Dn.NONE,this._i=An(n),this.Fi=e.getInstance().renderer.plugins.interaction,this.Pi=new t.Point,this.vt=1,this.Ui=new t.Point,this.zi=0;var s=n.easing;null!=s&&!1===s||(this.Gi=new yn(jn(s,(function(t,n,r,e){i.onEasingMove(t,n,r,e)})))),this.Hi=function(t){i.onDown(t)},this.Vi=function(t){i.onMove(t)},this.Xi=function(t){i.onEnd(t)},n.touch?(this.Yi="touchstart",this.Ki="touchmove",this.Ji="touchend"):(this.Yi=Z.down,this.Ki=Z.move,this.Ji=Z.up),r.on(this.Yi,this.Hi)}return n.prototype.calcCenterAndScale=function(t,n){var i=t.data.originalEvent,r=t.data.global;if("touches"in i){var e=i.touches,u=e.length;if(0<u){for(var s=e[0],h=s.clientX,o=s.clientY,c=1,f=e.length;c<f;++c)h+=(l=e[c]).clientX,o+=l.clientY;if(h/=u,o/=u,this.Fi.mapPositionToPoint(n,h,o),1<u){var a=0;for(c=1,f=e.length;c<f;++c){var l,v=(l=e[c]).clientX-h,b=l.clientY-o;a=Math.max(a,v*v+b*b)}return Math.sqrt(a)}return 0}}return n.copyFrom(r),0},n.prototype.onDown=function(t){var n=this.bi;if(this._i.start(t,this.Wi,n)){t.stopPropagation();var i=this.Pi;if(this.vt=this.calcCenterAndScale(t,i),!n.isDragging()){n.setDragging(!0),this.zi=t.data.originalEvent.timeStamp;var r=this.Gi;r&&r.onStart();var e=this.Oi;null!=e&&e();var u=this.Fi;u.on(this.Ki,this.Vi),u.on(this.Ji,this.Xi)}}},n.prototype.onMove=function(t){var i=this.bi;if(this._i.move(t,this.Wi,i)&&i.isDragging()){var r=this.Pi,e=r.x,u=r.y,s=this.calcCenterAndScale(t,r),h=this.vt;this.vt=s;var o=this.zi,c=t.data.originalEvent.timeStamp;this.zi=c;var f=r.x-e,a=r.y-u,l=c-o,v=n.EPSILON<h?s/h:1,b=this.Gi;b&&b.onMove(f,a,v,l);var d=this.Li;null!=d&&(0===f&&0===a&&1===v||d(f,a,r.x,r.y,v))}},n.prototype.onEnd=function(t){var n=this.bi;if(n.isDragging()){var i=this.Pi;this.Ui.copyFrom(i),this.vt=this.calcCenterAndScale(t,i);var r=t.data.originalEvent;if(!("touches"in r)||r.touches.length<=0){n.setDragging(!1);var e=this.Fi;e.off(this.Ki,this.Vi),e.off(this.Ji,this.Xi);var u=this.Si;null!=u&&u();var s=this.Gi;s&&s.onEnd(t.data.originalEvent.timeStamp-this.zi)}}},n.prototype.onEasingMove=function(t,n,i,r){var e=this.Li;if(null!=e&&(0!==t||0!==n||1!==i)){var u=this.Ui;u.set(u.x+t,u.y+n),e(t,n,u.x,u.y,i)}},n.prototype.stop=function(){var t=this.Gi;t&&t.stop()},n.EPSILON=1e-5,n}(),Rn=function(){function t(){}return t.toTexture=function(t,n,i,r){var u=PIXI.RenderTexture.create({width:t.width,height:t.height,scaleMode:PIXI.SCALE_MODES.LINEAR,resolution:n}),s=new PIXI.Matrix(void 0,void 0,void 0,void 0,-t.position.x,-t.position.y);return e.getInstance().renderer.render(t,u,i,s,r),u},t.toPixels=function(t){var n=t.resolution,i=t.frame,r=Math.floor(i.width*n),u=Math.floor(i.height*n),s=new Uint8Array(4*r*u),h=e.getInstance().renderer;h.renderTexture.bind(t);var o=h.gl;return o.readPixels(i.x*n,i.y*n,r,u,o.RGBA,o.UNSIGNED_BYTE,s),{width:r,height:u,array:s}},t.toCanvas=function(t,n,i){var r=t.width,e=t.height,u=t.array,s=new PIXI.utils.CanvasRenderTarget(r,e,1),h=s.context.getImageData(0,0,r,e);if(i?h.data.set(u):PIXI.extract.Extract.arrayPostDivide(u,h.data),s.context.putImageData(h,0,0),null!=n&&1!==n){s.context.scale(n,n),s.context.drawImage(s.canvas,0,0);var o=Math.floor(r*n),c=Math.floor(e*n),f=s.context.getImageData(0,0,o,c);s.resize(o,c),s.context.putImageData(f,0,0)}return s.canvas},t.toBase64=function(t,n,i){return t.toDataURL(n,i)},t}(),Ln=function(){function t(){}return t.downloadUrl=function(t,n){var i=document.createElement("a");"download"in i?(i.href=n,i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i)}),66)):window.open(n)||(location.href=n)},t.download=function(t,n){var i=new Blob([n],{type:"text/plain"});window.navigator.msSaveBlob?window.navigator.msSaveBlob(i,t):this.downloadUrl(t,URL.createObjectURL(i))},t}(),Wn=function(){function t(){}return t.texture=function(t){var n=t.target,i=function(t){var n=t.target;return null!=t.resolution?a(t.resolution)?t.resolution:Math.min(1,t.resolution.size/Math.max(n.width,n.height)):PIXI.settings.RESOLUTION}(t),r=function(t){return t.transform&&t.transform.update}(t);return Rn.toTexture(n,i,t.clear,r)},t.pixels=function(t){return Rn.toPixels(this.texture(t))},t.canvas=function(t){var n=this.pixels(t),i=function(t){return t.alpha&&t.alpha.premultiplied&&t.alpha.premultiplied.ignore}(t),r=function(t,n){if(null!=n.scale){if(a(n.scale))return n.scale;var i=n.scale.size;return Math.min(1,i/t.width,i/t.height)}}(n,t);return Rn.toCanvas(n,r,i)},t.base64=function(t){return Rn.toBase64(this.canvas(t),t.format,t.quality)},t.file=function(t){Ln.downloadUrl(t.filename,this.base64(t))},t}();!function(t){t[t.TEXT=0]="TEXT",t[t.DATA_URL=1]="DATA_URL",t[t.BINARY_STRING=2]="BINARY_STRING",t[t.ARRAY_BUTTER=3]="ARRAY_BUTTER"}(xn||(xn={}));var _n,Fn,Pn=function(){function t(t,n){this.Zi=null,this.qi=t,this.Qi=n}return t.prototype.open=function(){var t=this.getOrCreateInput();null!=t?t.click():this.onCancel()},t.prototype.getOrCreateInput=function(){var t=this;if("FileReader"in window&&null==this.Zi){var n=this.Zi=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("style","display:none"),n.addEventListener("change",(function(i){t.onInputChange(n),n.value="",i.stopImmediatePropagation(),i.preventDefault()})),e.getInstance().view.appendChild(n)}return this.Zi},t.prototype.onInputChange=function(t){var n=this,i=t.files;if(null!=i&&0<i.length){var r=i[0],e=new FileReader;switch(e.onload=function(t){if(null!=t.target){var i=t.target;n.onOpen(i.result)}},e.onabort=function(t){n.onAboart(t)},this.qi){case xn.TEXT:e.readAsText(r);break;case xn.DATA_URL:e.readAsDataURL(r);break;case xn.BINARY_STRING:e.readAsBinaryString(r);break;case xn.ARRAY_BUTTER:e.readAsArrayBuffer(r);break;default:e.readAsText(r)}}else this.onCancel()},t.prototype.onOpen=function(t){var n=this.Qi;n.emit("open",t,n)},t.prototype.onAboart=function(t){var n=this.Qi;n.emit("abort",t,n)},t.prototype.onCancel=function(){var t=this.Qi;t.emit("cancel",t)},t}(),Un=function(){function t(){}return t.fromRgb=function(t){var n=(16711680&t)>>16,i=(65280&t)>>8,r=255&t|0,e=Math.max(n,i,r),u=e-Math.min(n,i,r),s=0;return 0<u&&(n===e?s=60*(i-r)/u:i===e?s=60*(r-n)/u+120:r===e&&(s=60*(n-i)/u+240),s<0&&(s+=360)),[s,u/e*255,e]},t.toRgb=function(t,n,i){var r=i-n/255*i,e=i-r,u=0,s=0,h=0;return t<=60?(u=i,s=t/60*e+r,h=r):t<=120?(u=(120-t)/60*e+r,s=i,h=r):t<=180?(u=r,s=i,h=(t-120)/60*e+r):t<=240?(u=r,s=(240-t)/60*e+r,h=i):t<=300?(u=(t-240)/60*e+r,s=r,h=i):(u=i,s=r,h=(360-t)/60*e+r),(u=Math.max(0,Math.min(255,u)))<<16|(s=Math.max(0,Math.min(255,s)))<<8|Math.max(0,Math.min(255,h))},t}(),zn=function(t,n){for(var i=0,r=t.length-1;i<=r;){var e=i+(r-i>>1),u=t[e];if(n<u)r=e-1;else{if(!(u<n))return e;i=e+1}}return-1},Gn=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Hn=function(t){return t!=t},Vn=function(){function t(){}return t.IDENTITY=function(){},t}(),Xn=function(){function t(){}return t.toCode=function(t){return Zt(t.toString(16).toUpperCase(),6,"0")},t.fromCode=function(t){var n=t.trim().toLowerCase();if(6===n.length){var i=Number("0x"+n);if(i==i)return i}return null},t.fromRgb=function(t,n,i){return(255*t<<16)+(255*n<<8)+(255*i|0)},t.blend=function(t,n,i){var r=t>>16&255,e=t>>8&255,u=255&(0|t),s=n>>16&255,h=n>>8&255,o=255&(0|n),c=Math.max(0,Math.min(1,i)),f=1-c;return(Math.max(0,Math.min(255,r*f+s*c))<<16)+(Math.max(0,Math.min(255,e*f+h*c))<<8)+(0|Math.max(0,Math.min(255,u*f+o*c)))},t.brighten=function(t,n){return this.blend(t,16777215,n)},t.darken=function(t,n){return this.blend(t,0,n)},t}(),Yn=function(){function t(){}return t.toCode=function(t,n){return"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+n+")"},t}(),Kn=function(){function n(){}return n.make=function(t,n,i){var r=Math.max(0,t-n),e=2*r+4,u=e+2*n,s="M"+(n+r)+" "+n+"L"+(n+e)+" "+n+"L"+(n+e)+" "+(n+e-r)+function(t,n,i){return 0<i?"A"+i+" "+i+" 0 0 1 "+(t+n-i)+" "+(t+n):""}(n,e,r)+"L"+n+" "+(n+e)+"L"+n+" "+(n+r)+function(t,n,i){return 0<i?"A"+i+" "+i+" 0 0 1 "+(t+i)+" "+t:""}(n,0,r)+"Z";return this.toSvg(u,i,s)},n.toSvg=function(n,i,r){var e=t.settings.RESOLUTION,u='<svg width="'+n*e+'" height="'+n*e+'" viewBox="0 0 '+n+" "+n+'" xmlns="http://www.w3.org/2000/svg"><path '+i+' d="'+r+'"></path></svg>';return t.Texture.from(mn(u),{resolution:e})},n.onUpdate=function(){e.update()},n.newBackground=function(t){var n=this.make(t,0,this.BACKGROUND_ATTRIBUTE);return n.on("update",this.onUpdate),n},n.newBorder=function(t,n){var i=this.make(t,.5*n,this.BORDER_ATTRIBUTE(n));return i.on("update",this.onUpdate),i},n.getBackground=function(t){var n=this.BACKGROUND_CACHE,i=n.get(t);return null==i&&(i=this.newBackground(t),n.set(t,i)),i},n.getBorder=function(t,n){var i=this.BORDER_CACHE,r=i.get(t);null==r&&(r=new Map,i.set(t,r));var e=r.get(n);return null==e&&(e=this.newBorder(t,n),r.set(n,e)),e},n.BACKGROUND_CACHE=new Map,n.BACKGROUND_ATTRIBUTE='fill="#fff" stroke="none"',n.BORDER_CACHE=new Map,n.BORDER_ATTRIBUTE=function(t){return'fill="none" stroke="#fff" stroke-width="'+t+'"'},n}(),Jn=function(){function n(){}return n.fromImage=function(n,i,r){var e=t.Texture.from(n,{resolution:i});e.baseTexture.valid?r(e):e.once("update",r)},n}(),Zn=function(t){return null!=t?String(t):""},qn=function(){function t(t){this.gi=null!=t&&null!=t.duration?t.duration:300,this.$i=null,this.tr=0,this.nr=null}return t.prototype.show=function(t,n){var i=this,r=this.nr;null!=r&&clearTimeout(r);var e=this.$i;if(t!==e){var u=this.gi,s=this.tr,h=Date.now(),o=s+u-h;!0===n||o<=0?this.update(h,t):this.nr=window.setTimeout((function(){i.update(Date.now(),t)}),o)}},t.prototype.update=function(t,n){var i=this.$i;i!==n&&(this.tr=t,null!==i&&i.hide(),this.$i=n,null!=n&&n.show())},t.prototype.hide=function(){this.show(null)},t}(),Qn=function(){function t(){this.ir=null,this.rr=0,this.er=null,this.ur=null,this.sr="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DOMMouseScroll","MozMousePixelScroll"]}return t.prototype.on=function(t,n,i){void 0===i&&(i=!1);for(var r=this.sr,e=r.length-1;0<=e;--e){var u=r[e];t.addEventListener(u,n,i)}},t.prototype.off=function(t,n,i){void 0===i&&(i=!1);for(var r=this.sr,e=r.length-1;0<=e;--e){var u=r[e];t.removeEventListener(u,n,i)}},t.prototype.getLineHeight=function(){if(null==this.er){var t=K.getInstance().get("DBase");this.er=t.getLineHeight()}return this.er},t.prototype.getPageHeight=function(){return null==this.ur&&(this.ur=12*this.getLineHeight()),this.ur},t.prototype.normalize=function(t){var n=0,i=0;if("detail"in t&&(i=-1*t.detail),"wheelDelta"in t&&(i=t.wheelDelta),"wheelDeltaY"in t&&(i=t.wheelDeltaY),"wheelDeltaX"in t&&(n=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(n=-1*i,i=0),"deltaY"in t&&(i=-1*t.deltaY),"deltaX"in t&&(n=t.deltaX),0===i&&0===n)return null;var r=Math.max(Math.abs(i),Math.abs(n)),e=Date.now();this.rr+200<=e&&(this.ir=null),this.rr=e;var u="mousewheel"===t.type&&r%120==0;(!this.ir||r<this.ir)&&(this.ir=r,u&&(this.ir/=40)),u&&(r/=40,n/=40,i/=40);var s=this.ir;r=Math.floor(r/s),n=Math[1<=n?"floor":"ceil"](n/s),i=Math[1<=i?"floor":"ceil"](i/s);var h=t.deltaMode||0;if(0!==h){var o=1===h?this.getLineHeight():this.getPageHeight();r*=o,n*=o,i*=o}return{mode:h,delta:r,deltaX:n,deltaY:i,lowest:s}},t.getInstance=function(){return null==this.INSTANCE&&(this.INSTANCE=new t),this.INSTANCE},t}();!function(t){t[t.OPEN_LINK_IN_NEW_WINDOW=0]="OPEN_LINK_IN_NEW_WINDOW",t[t.COPY_LINK_ADDRESS=1]="COPY_LINK_ADDRESS"}(_n||(_n={})),function(t){t[t.AUTO=0]="AUTO",t[t.THIS_WINDOW=1]="THIS_WINDOW",t[t.NEW_WINDOW=2]="NEW_WINDOW"}(Fn||(Fn={}));var $n,ti=function(n){function r(t){var i=n.call(this,t)||this;return i.hr=t.link,i.bi=t.target,i._i=t.checker,i.or=t.menu,i}return i(r,n),r.prototype.init=function(t){t.target===Fn.NEW_WINDOW&&(t.state=t.state||v.NONE||v.EXTENSION_0),n.prototype.init.call(this,t)},Object.defineProperty(r.prototype,"link",{get:function(){var t=this.hr;return o(t)||null==t?t:t(this)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"menu",{get:function(){var t=this,n=this.cr;if(null==n){var i=this.theme,r=this.or||i.getMenuOptions();n=this.toMenu(r),this.cr=n,n.on("select",(function(n,i,r){t.onMenuSelect(n,i,r)}))}return n},enumerable:!0,configurable:!0}),r.prototype.toMenu=function(n){return n instanceof t.DisplayObject?n:this.newMenu(n)},r.prototype.newMenu=function(t){return Ot.newMenu(t)},r.prototype.onMenuSelect=function(t,n,i){var r=this;switch(t){case _n.OPEN_LINK_IN_NEW_WINDOW:this.open(!0);break;case _n.COPY_LINK_ADDRESS:var e=this.link;null!=e&&(o(e)?this.copy(e):e.then((function(t){null!=t&&r.copy(t)})))}},r.prototype.copy=function(t){var n=document.createElement("a");n.href=t,En.copy(n.href)},r.prototype.initOnClick=function(t){var n=this,i=function(t){n.isActionable()&&n.onSelect(t)};(t&&t.target)===Fn.NEW_WINDOW?Z.onClick(this,i):Z.onLongClick(this,i,(function(t){if(n.isActionable()){var i=n.menu;i.isHidden()&&i.open(n)}}))},r.prototype.getType=function(){return"DMenuItemLink"},r.prototype.onSelect=function(t){n.prototype.onSelect.call(this,t),this.open(this.inNewWindow(t))},r.prototype.open=function(t){var n=this,i=this.link;null!=i&&(o(i)?this.check(i,t):i.then((function(i){i&&n.check(i,t)})))},r.prototype.check=function(t,n){var i=this,r=this._i;if(r){var e=r(this);!0===e?this.exec(t,n):!1===e||e.then((function(r){r&&i.exec(t,n)}))}else this.exec(t,n)},r.prototype.exec=function(t,n){if(n){var i=document.createElement("a");i.href=t,i.target="_blank",i.style.display="none",i.rel="noopener noreferrer",document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i)}),100)}else window.location.href=t},r.prototype.inNewWindow=function(n){if(this.bi===Fn.NEW_WINDOW)return!0;var i=n instanceof t.interaction.InteractionEvent?n.data.originalEvent:n;return i.ctrlKey||i.shiftKey||i.altKey||i.metaKey||"button"in i&&0!==i.button},r.prototype.onShortcut=function(t){n.prototype.onShortcut.call(this,t),this.onSelect(t)},r.isCompatible=function(t){return"link"in t},r}(Dt),ni=pn,ii=function(n){function r(t){return n.call(this,t)||this}return i(r,n),r.prototype.init=function(t){var i=this;n.prototype.init.call(this,t),Z.onClick(this,(function(){i.isActionable()&&i.toggle()})),this.initHover(t);var r=this.toMenu(t);this.cr=r,r.on("select",(function(t,n,r){i.onMenuSelect(t,n,r)}))},r.prototype.initHover=function(t){var n=this;this.on(Z.over,(function(){n.isActionable()&&n.open()}))},r.prototype.toMenu=function(n){var i=n.menu;return i instanceof t.DisplayObject?i:this.newMenu(i)},r.prototype.newMenu=function(t){return Ot.newMenu(t)},Object.defineProperty(r.prototype,"menu",{get:function(){return this.cr},enumerable:!0,configurable:!0}),r.prototype.getType=function(){return"DMenuItemMenu"},r.prototype.open=function(){var t=this.cr;t.isHidden()&&this.onOpen(t)},r.prototype.onOpen=function(t){var n=this.getContext();null!=n&&t.open(this,this.getCloseable(),n)},r.prototype.close=function(){this.cr.close()},r.prototype.toggle=function(){var t=this.cr;t.isHidden()?this.onOpen(t):t.close()},r.prototype.onSelect=function(t){this.open(),n.prototype.onSelect.call(this,t)},r.prototype.onMenuSelect=function(t,n,i){var r=this.getCloseable();null!=r&&r.emit("select",t,n,i)},r.isCompatible=function(t){return"menu"in t},r.toSubMenuOptions=function(n,i){var r=n.menu;return r instanceof t.DisplayObject||(null==r.sticky&&(r.sticky=i),null==r.align&&(r.align=ni.RIGHT)),n},r}(wt),ri=function(t){function n(n){var i=t.call(this)||this;return n.appendRenderable(i,!0),n.addReflowable(i),i}return i(n,t),n.prototype.onReflow=function(t,n,i){var r=t.state,e=t.border,u=e.getWidth(r),s=e.getColor(r);if(null!=s){var h=e.getAlpha(r),o=e.getAlign(r),c=t.padding,f=.5*i;this.clear(),this.lineStyle(u,s,h,o),this.moveTo(c.getLeft(),f),this.lineTo(n-c.getRight(),f),this.visible=!0}else this.clear(),this.visible=!1},n}(t.Graphics),ei=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.interactive=!1,this.buttonMode=!1,this.setState(v.UNFOCUSABLE,!0)},n.prototype.initReflowable=function(){new ri(this)},n.prototype.getType=function(){return"DListItemSeparator"},n}(pt),ui=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemSeparator"},n.isCompatible=function(t){return"separator"in t},n}(ei),si=function(t){function n(n){var i=t.call(this,n)||this;return i.visible=!1,i.setState(v.UNFOCUSABLE,!0),i}return i(n,t),n.prototype.getType=function(){return"DLayoutSpace"},n}($),hi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemSpace"},n.isCompatible=function(t){return"space"in t},n}(si),oi=function(){Ot.addItemCreator((function(t){return Tt.isCompatible(t)?new Tt(t):null})),Ot.addItemCreator((function(t){return ti.isCompatible(t)?new ti(t):null})),Ot.addItemCreator((function(t,n){return ii.isCompatible(t)?new ii(ii.toSubMenuOptions(t,n)):null})),Ot.addItemCreator((function(t){return ui.isCompatible(t)?new ui(t):null})),Ot.addItemCreator((function(t){return hi.isCompatible(t)?new hi(t):null})),Ot.setItemCreatorDefault((function(t){return new Dt(t)}))};!function(t){t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL"}($n||($n={}));var ci,fi=function(t){return t instanceof $&&(t.visible||t instanceof si)},ai=function(t,n){if(n){if(null!=n.row)return n.row;if(null!=n.column)return n.column}return t.getMultiplicity()},li=function(t,n){if(n&&null!=n.margin){var i=n.margin;if(a(i))return{horizontal:i,vertical:i};var r=t.getMargin();return{horizontal:null!=i.horizontal?i.horizontal:r,vertical:null!=i.vertical?i.vertical:r}}return{horizontal:r=t.getMargin(),vertical:r}},vi=function(t,n){if(n&&null!=n.direction){var i=n.direction;return o(i)?$n[i]:i}return t.getDirection()},bi=function(t,n){return n&&null!=n.corner&&!a(n.corner)&&null!=n.corner.adjust?n.corner.adjust:t.getCornerAdjust()},di=function(t){function n(n){var i=t.call(this,n)||this;i.setState(v.UNFOCUSABLE,!0);var r=i.theme;return i.oi=li(r,n),i.ar=vi(r,n),i.lr=bi(r,n),i.vr=ai(r,n),i}return i(n,t),n.prototype.getWeightTotal=function(){for(var t=this.children,n=0,i=this.vr,r=0,e=t.length;r<e;){for(var u=-1,s=0;s<i&&r+s<e;++s){var h=t[r+s];if(fi(h)){var o=h.getClearType();if(0!==s&&o&G.BEFORE)break;if(u=Math.max(u,h.weight),o&&G.AFTER){s+=1;break}}else r+=1,s-=1}r+=s,0<=u&&(n+=u)}return n},n.prototype.getSpaceLeft=function(t,n){var i=this.children,r=this.vr;if(this.ar===$n.VERTICAL){for(var e=t,u=0,s=0,h=i.length;s<h;){for(var o=0,c=-1,f=0;f<r&&s+f<h;++f){var a=i[s+f];if(fi(a)){var l=a.getClearType();if(0!==f&&l&G.BEFORE)break;if(o=(c=Math.max(c,a.weight))<0?Math.max(o,a.height+u):u,l&G.AFTER){f+=1;break}}else s+=1,f-=1}s+=f,e-=o,u=n}return Math.max(0,e)}for(e=t,u=0,s=0,h=i.length;s<h;){var v=0;for(c=-1,f=0;f<r&&s+f<h;++f)if(a=i[s+f],fi(a)){if(l=a.getClearType(),0!==f&&l&G.BEFORE)break;if(v=(c=Math.max(c,a.weight))<0?Math.max(v,a.width+u):u,l&G.AFTER){f+=1;break}}else s+=1,f-=1;s+=f,e-=v,u=n}return Math.max(0,e)},n.prototype.onRefit=function(){var i=this.children,r=this.It,e=r.getTop(),u=r.getBottom(),s=r.getLeft(),h=r.getRight(),o=this.oi,c=o.vertical,f=o.horizontal,a=this.getWeightTotal(),l=this.vr,v=null;if(this.lr){var b=4+(i.length<<1);(null==n.CORNER_ADJUST_WORK||n.CORNER_ADJUST_WORK.length<b)&&(n.CORNER_ADJUST_WORK=new Float32Array(b)),(v=n.CORNER_ADJUST_WORK)[0]=-2,v[1]=-2,v[b-2]=-3,v[b-1]=-3}if(this.ar===$n.VERTICAL){var d=0,g=e-c;if(0<a){for(var m=1/a,p=this.height-e-u,w=this.getSpaceLeft(p,c),D=0,T=i.length;D<T;){for(var O=s-f,S=0,M=0;M<l&&D+M<T;++M){var E=i[D+M];if(fi(E)){var k=E.getClearType();if(0!==M&&k&G.BEFORE)break;if(E.position.set(f+O,c+g),0<=(F=E.weight)&&(E.height=w*(F*m)),O+=f+E.width,S=Math.max(S,E.height),k&G.AFTER){null!=v&&(v[0+(P=D+M+1<<1)]=M,v[P+1]=d),M+=1;break}null!=v&&(v[0+(P=D+M+1<<1)]=M,v[P+1]=d)}else null!=v&&(v[0+(P=D+M+1<<1)]=M-1,v[P+1]=d),D+=1,M-=1}g+=c+S,D+=M,d+=1}if(null!=v)for(D=0,T=i.length;D<T;++D)if(E=i[D],fi(E)){var I=v[0+(U=2+(D<<1))],N=v[U+1],y=-2;if(!((k=E.getClearType())&G.BEFORE)){var x=this.findRowIndexPrevious(U,N,v);this.hasClearTypeAfter(i,x)||(y=v[x])}var C=-2;if(!(k&G.AFTER)){var j=this.findRowIndexNext(U,N,v);this.hasClearTypeBefore(i,j)||(C=v[j])}var A=this.countColumn(U,N,v);E.corner.mask=this.toCornerMaskColumn(y,I,C,A)}}else{for(D=0,T=i.length;D<T;){for(O=s-f,S=0,M=0;M<l&&D+M<T;++M)if(E=i[D+M],fi(E)){if(k=E.getClearType(),0!==M&&k&G.BEFORE)break;if(E.position.set(f+O,c+g),0<=(F=E.weight)&&(E.height=0),O+=f+E.width,S=Math.max(S,E.height),k&G.AFTER){null!=v&&(v[0+(P=D+M+1<<1)]=M,v[P+1]=d),M+=1;break}null!=v&&(v[0+(P=D+M+1<<1)]=M,v[P+1]=d)}else null!=v&&(v[0+(P=D+M+1<<1)]=M-1,v[P+1]=d),D+=1,M-=1;g+=c+S,D+=M,d+=1}if(null!=v)for(D=0,T=i.length;D<T;++D)E=i[D],fi(E)&&(I=v[0+(U=2+(D<<1))],N=v[U+1],y=-2,(k=E.getClearType())&G.BEFORE||(x=this.findRowIndexPrevious(U,N,v),this.hasClearTypeAfter(i,x)||(y=v[x])),C=-2,k&G.AFTER||(j=this.findRowIndexNext(U,N,v),this.hasClearTypeBefore(i,j)||(C=v[j])),A=this.countColumn(U,N,v),E.corner.mask=this.toCornerMaskColumn(y,I,C,A))}}else{var B=0;if(O=s-f,0<a){for(m=1/a,p=this.width-s-h,w=this.getSpaceLeft(p,f),D=0,T=i.length;D<T;){g=e-c;var R=0;for(M=0;M<l&&D+M<T;++M)if(E=i[D+M],fi(E)){if(k=E.getClearType(),0!==M&&k&G.BEFORE)break;if(E.position.set(f+O,c+g),0<=(F=E.weight)&&(E.width=w*(F*m)),R=Math.max(R,E.width),g+=c+E.height,k&G.AFTER){null!=v&&(v[0+(P=D+M+1<<1)]=B,v[P+1]=M),M+=1;break}null!=v&&(v[0+(P=D+M+1<<1)]=B,v[P+1]=M)}else null!=v&&(v[0+(P=D+M+1<<1)]=B,v[P+1]=M-1),D+=1,M-=1;O+=f+R,D+=M,B+=1}if(null!=v)for(D=0,T=i.length;D<T;++D)if(E=i[D],fi(E)){I=v[0+(U=2+(D<<1))],N=v[U+1];var L=-2;(k=E.getClearType())&G.BEFORE||(x=this.findColumnIndexPrevious(U,I,v),this.hasClearTypeAfter(i,x)||(L=v[x+1]));var W=-2;k&G.AFTER||(j=this.findColumnIndexNext(U,I,v),this.hasClearTypeBefore(i,j)||(W=v[j+1]));var _=this.countRow(U,I,v);E.corner.mask=this.toCornerMaskRow(L,N,W,_)}}else{for(D=0,T=i.length;D<T;){for(g=e-c,R=0,M=0;M<l&&D+M<T;++M)if(E=i[D+M],fi(E)){var F;if(k=E.getClearType(),0!==M&&k&G.BEFORE)break;if(E.position.set(f+O,c+g),0<=(F=E.weight)&&(E.width=0),R=Math.max(R,E.width),g+=c+E.height,k&G.AFTER){null!=v&&(v[0+(P=D+M+1<<1)]=B,v[P+1]=M),M+=1;break}null!=v&&(v[0+(P=D+M+1<<1)]=B,v[P+1]=M)}else{var P;null!=v&&(v[0+(P=D+M+1<<1)]=B,v[P+1]=M-1),D+=1,M-=1}O+=f+R,D+=M,B+=1}if(null!=v)for(D=0,T=i.length;D<T;++D){var U;E=i[D],fi(E)&&(I=v[0+(U=2+(D<<1))],N=v[U+1],L=-2,(k=E.getClearType())&G.BEFORE||(x=this.findColumnIndexPrevious(U,I,v),this.hasClearTypeAfter(i,x)||(L=v[x+1])),W=-2,k&G.AFTER||(j=this.findColumnIndexNext(U,I,v),this.hasClearTypeBefore(i,j)||(W=v[j+1])),_=this.countRow(U,I,v),E.corner.mask=this.toCornerMaskRow(L,N,W,_))}}}t.prototype.onRefit.call(this)},n.prototype.hasClearTypeBefore=function(t,n){return this.hasClearType(t,n,G.BEFORE)},n.prototype.hasClearTypeAfter=function(t,n){return this.hasClearType(t,n,G.AFTER)},n.prototype.hasClearType=function(t,n,i){if(2<=n){var r=n-2>>1;if(0<=r&&r<t.length){var e=t[r];if(e instanceof $)return!!(e.getClearType()&i)}}return!1},n.prototype.findColumnIndexPrevious=function(t,n,i){for(var r=t-2;0<=r;r-=2)if(i[r]!==n)return r;return 0},n.prototype.findColumnIndexNext=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2){var u=i[r];if(u!==n){for(var s=r+2;s<e;s+=2)if(i[s]!==u)return s-2;return r}}return i.length-2},n.prototype.countRow=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2)if(i[r]!==n)return i[r-2+1]+1;return 0},n.prototype.findRowIndexPrevious=function(t,n,i){for(var r=t-2;0<=r;r-=2)if(i[r+1]!==n)return r;return 0},n.prototype.findRowIndexNext=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2){var u=i[r+1];if(u!==n){for(var s=r+2;s<e;s+=2)if(i[s+1]!==u)return s-2;return r}}return i.length-2},n.prototype.countColumn=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2)if(i[r+1]!==n)return i[r-2+0]+1;return 0},n.prototype.toCornerMaskColumn=function(t,n,i,r){var e=h.NONE;return t+1<n&&0===n&&(e|=h.TOP_LEFT),i+1<n&&0===n&&(e|=h.BOTTOM_LEFT),t<n&&n+1===r&&(e|=h.TOP_RIGHT),i<n&&n+1===r&&(e|=h.BOTTOM_RIGHT),h.ALL&~e},n.prototype.toCornerMaskRow=function(t,n,i,r){var e=h.NONE;return t+1<n&&0===n&&(e|=h.TOP_LEFT),i+1<n&&0===n&&(e|=h.TOP_RIGHT),t<n&&n+1===r&&(e|=h.BOTTOM_LEFT),i<n&&n+1===r&&(e|=h.BOTTOM_RIGHT),h.ALL&~e},n.prototype.addSpace=function(t){return this.addChild(new si(t))},n.prototype.getType=function(){return"DLayout"},n.CORNER_ADJUST_WORK=null,n}($),gi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DLayoutVertical"},n}(di),mi=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemExpandableBody"},n}(gi),pi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.on(Z.down,(function(t){i.isActionable()&&i.onSelect(t)}))},n.prototype.getSelection=function(){return null},n.prototype.getType=function(){return"DMenuItemExpandableHeader"},n.prototype.onSelect=function(n){this.emit("select",this),t.prototype.onSelect.call(this,n)},n}(pt),wi=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return Ot.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||Ot.newItem(t,n)},t.newItems=function(t,n,i){Ot.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),Di=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(t){var i=this;n.prototype.init.call(this,t);var r=this.theme,e=this.toHeader(r,t);this.br=e,e.on("select",(function(){i.toggle()})),this.addChild(e);var u=this.toBody(r,t);this.dr=u;var s=!(!t||null==t.sticky)&&t.sticky;this.newItems(u,s,r,t),this.addChild(u),this.isActive()?this.onActivated():this.onDeactivated()},r.prototype.newItems=function(t,n,i,r){null!=r&&null!=r.items&&wi.newItems(t,r.items,n)},r.prototype.toHeader=function(n,i){return i?i.header instanceof t.DisplayObject?i.header:this.newHeader(n,i.header):this.newHeader(n)},r.prototype.newHeader=function(t,n){return new pi(n)},r.prototype.toBody=function(n,i){return i&&i.body?i.body instanceof t.DisplayObject?i.body:this.newBody(n,i.body):this.newBody(n)},r.prototype.newBody=function(t,n){return new mi(n)},r.prototype.open=function(){this.setActive(!0)},r.prototype.close=function(){this.setActive(!1)},r.prototype.toggle=function(){this.setActive(!this.isActive())},r.prototype.onActivated=function(){var t=this.dr;t instanceof $?t.show():t.visible=!0},r.prototype.onDeactivated=function(){var t=this.dr;t instanceof $?t.hide():t.visible=!1},r.prototype.onStateChange=function(t,i){n.prototype.onStateChange.call(this,t,i),M.isActive(t)?M.isActive(i)||this.onActivated():M.isActive(i)&&this.onDeactivated()},r.prototype.getType=function(){return"DMenuItemExpandable"},r.isCompatible=function(t){return"header"in t},r}(gi),Ti=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemCheck"},n}(Tt),Oi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemLink"},n}(ti),Si=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemSeparator"},n}(ui),Mi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemSpace"},n}(hi),Ei=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemText"},n}(Dt),ki=function(){Ot.addItemCreator((function(t){return Di.isCompatible(t)?new Di(t):null})),wi.addItemCreator((function(t){return Tt.isCompatible(t)?new Ti(t):null})),wi.addItemCreator((function(t){return ti.isCompatible(t)?new Oi(t):null})),wi.addItemCreator((function(t){return ui.isCompatible(t)?new Si(t):null})),wi.addItemCreator((function(t){return hi.isCompatible(t)?new Mi(t):null})),wi.setItemCreatorDefault((function(t){return new Ei(t)}))},Ii=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemCheck"},n}(Tt),Ni=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getSelection=function(){return null},n.prototype.getType=function(){return"DMenuSidedItemLink"},n}(ti),yi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.initHover=function(t){},n.prototype.onMenuSelect=function(n,i,r){t.prototype.onMenuSelect.call(this,n,i,r);var e=this.getSelection();e&&e.add(i)},n.prototype.onOpen=function(t){t.open(this,this)},n.prototype.getType=function(){return"DMenuSidedItemMenu"},n}(ii),xi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemSeparator"},n}(ui),Ci=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemSpace"},n}(hi),ji=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemText"},n}(Dt),Ai=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return Ot.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||Ot.newItem(t,n)},t.newItems=function(t,n,i){Ot.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),Bi=function(){Ai.setItemCreatorDefault((function(t){return new ji(t)})),Ai.addItemCreator((function(t){return hi.isCompatible(t)?new Ci(t):null})),Ai.addItemCreator((function(t){return ui.isCompatible(t)?new xi(t):null})),Ai.addItemCreator((function(t,n){return ii.isCompatible(t)?new yi(ii.toSubMenuOptions(t,n)):null})),Ai.addItemCreator((function(t){return ti.isCompatible(t)?new Ni(t):null})),Ai.addItemCreator((function(t){return Tt.isCompatible(t)?new Ii(t):null}))},Ri=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return Ot.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||Ai.newItem(t,n)},t.newItems=function(t,n,i){Ot.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),Li=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.newItems=function(t,n,i,r){null!=r&&null!=r.items&&Ri.newItems(t,r.items,n)},n.prototype.getType=function(){return"DMenuSidedItemExpandable"},n}(Di),Wi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemCheck"},n}(Ti),_i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemLink"},n}(ti),Fi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemMenu"},n}(ii),Pi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onOpen=function(t){t.open(this,this)},n.prototype.getType=function(){return"DMenuSidedItemExpandableItemMenu"},n}(Fi),Ui=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemSeparator"},n}(Si),zi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemSpace"},n}(Mi),Gi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemText"},n}(Ei),Hi=function(){Ai.addItemCreator((function(t){return Di.isCompatible(t)?new Li(t):null})),Ri.addItemCreator((function(t){return Tt.isCompatible(t)?new Wi(t):null})),Ri.addItemCreator((function(t){return ti.isCompatible(t)?new _i(t):null})),Ri.addItemCreator((function(t,n){return ii.isCompatible(t)?new Pi(ii.toSubMenuOptions(t,n)):null})),Ri.addItemCreator((function(t){return ui.isCompatible(t)?new Ui(t):null})),Ri.addItemCreator((function(t){return hi.isCompatible(t)?new zi(t):null})),Ri.setItemCreatorDefault((function(t){return new Gi(t)}))},Vi=function(){oi(),ki(),Bi(),Hi()},Xi={};!function(t){t[t.CIRCLE=0]="CIRCLE",t[t.RECTANGLE=1]="RECTANGLE",t[t.RECTANGLE_ROUNDED=2]="RECTANGLE_ROUNDED",t[t.TRIANGLE=3]="TRIANGLE",t[t.TRIANGLE_ROUNDED=4]="TRIANGLE_ROUNDED",t[t.LINE=5]="LINE",t[t.IMAGE=6]="IMAGE",t[t.GROUP=7]="GROUP",t[t.BAR=8]="BAR",t[t.LABEL=9]="LABEL",t[t.NULL=10]="NULL",t[t.GROUP_SHADOWED=11]="GROUP_SHADOWED",t[t.EXTENSION=1e3]="EXTENSION"}(ci||(ci={}));var Yi,Ki={};!function(t){t[t.NONE=0]="NONE",t[t.CLOSED=1]="CLOSED",t[t.NON_EXPANDING_WIDTH=2]="NON_EXPANDING_WIDTH",t[t.NON_SHRINKING_WIDTH=4]="NON_SHRINKING_WIDTH",t[t.NON_SCALING_DOT_AND_DASH=8]="NON_SCALING_DOT_AND_DASH",t[t.DOTTED=16]="DOTTED",t[t.DOTTED_DENSELY=32]="DOTTED_DENSELY",t[t.DOTTED_LOOSELY=64]="DOTTED_LOOSELY",t[t.DASHED=128]="DASHED",t[t.DASHED_DENSELY=256]="DASHED_DENSELY",t[t.DASHED_LOOSELY=512]="DASHED_LOOSELY",t[t.DOTTED_MASK=112]="DOTTED_MASK",t[t.DASHED_MASK=896]="DASHED_MASK",t[t.NON_SOLID_MASK=1008]="NON_SOLID_MASK"}(Yi||(Yi={}));var Ji,Zi=function(){function t(){}return t.toScaleInvariant=function(t){var n=t&Yi.NON_EXPANDING_WIDTH?1:0,i=t&Yi.NON_SHRINKING_WIDTH?2:0,r=t&Yi.NON_SCALING_DOT_AND_DASH?4:0;return t&Yi.NON_SOLID_MASK?n|i|r:n|i},t.toDash=function(t,n,i,r){return r.set(2*t,0),i&Yi.NON_SOLID_MASK&&(i&Yi.DOTTED?r.set(n,n):i&Yi.DOTTED_DENSELY?r.set(n,.5*n):i&Yi.DOTTED_LOOSELY?r.set(n,2*n):i&Yi.DASHED?r.set(2*n,n):i&Yi.DASHED_DENSELY?r.set(2*n,.5*n):i&Yi.DASHED_LOOSELY&&r.set(2*n,2*n)),r},t}();!function(t){t[t.TOP=0]="TOP",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=3]="BOTTOM"}(Ji||(Ji={}));var qi,Qi,$i=function(){function n(t,n,i,r){this.gr=t,this._t=0,this.mr=[0,0,0,0],this.pr=[],this.an=r,this.wr=i,this.it=n,this.Dr=NaN,this.Tr=NaN,this.Or=NaN,this.Sr=NaN}return n.prototype.getComputedSize=function(t,n,i,r){if(0<=t)return t;switch(n){case Ji.TOP:case Ji.BOTTOM:return Math.abs(r);case Ji.RIGHT:case Ji.LEFT:return Math.abs(i)}return 0},n.prototype.update=function(){var t=this.gr.size,n=t.x,i=t.y,r=this.it,e=this.wr;if(this.Dr!==e||this.Tr!==n||this.Or!==i||this.Sr!==r){this._t+=1,this.Dr=e,this.Tr=n,this.Or=i,this.Sr=r;var u=.5*n,s=.5*i,h=this.getComputedSize(e,r,n,i),o=this.mr;switch(r){case Ji.TOP:o[0]=0,o[1]=-s,o[2]=0,o[3]=-s+h;break;case Ji.RIGHT:o[0]=u,o[1]=0,o[2]=u-h,o[3]=0;break;case Ji.BOTTOM:o[0]=0,o[1]=s,o[2]=0,o[3]=s-h;break;case Ji.LEFT:o[0]=-u,o[1]=0,o[2]=-u+h,o[3]=0}}},Object.defineProperty(n.prototype,"length",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.update(),this._t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this.update(),this.mr},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"segments",{get:function(){return this.pr},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.wr},set:function(t){this.moveTo(void 0,t,void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this.it},set:function(t){this.moveTo(t,void 0,void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this.an},set:function(t){this.moveTo(void 0,void 0,t)},enumerable:!0,configurable:!0}),n.prototype.copy=function(t){return t instanceof n?this.moveTo(t.position,t.size,t.style):this.moveTo(void 0,void 0,t.style)},n.prototype.set=function(t,n,i){var r,e;if(null!=t){var u=t[0];if(0===u){var s=t[1];r=s<=0?Ji.TOP:Ji.BOTTOM,e=Math.abs(t[3]-s)}else r=u<=0?Ji.LEFT:Ji.RIGHT,e=Math.abs(t[2]-u)}return this.moveTo(r,e,i)},n.prototype.moveTo=function(t,n,i){var r=!1;return null!=i&&this.an!==i&&(this.an=i,r=!0),null!=t&&this.it!==t&&(this.it=t,r=!0),null!=n&&this.wr!==n&&(this.wr=n,r=!0),r&&this.gr.updateUploaded(),this},n.prototype.clone=function(t){return new n(t,this.it,this.wr,this.an)},n.prototype.toPoints=function(n){for(var i=[],r=this.values,e=0,u=r.length;e<u;e+=2){var s=new t.Point(r[e+0],r[e+1]);i.push(n.apply(s,s))}return i},n.prototype.serialize=function(t){return t.add("["+this.it+","+this.wr+","+this.an+"]")},n.prototype.deserialize=function(t,n){if(0<=t&&t<n.resources.length){var i=n.resources[t],r=JSON.parse(i);this.moveTo(r[0],r[1],r[2])}},n}();!function(t){t[t.NONE=0]="NONE",t[t.TOP_LEFT=1]="TOP_LEFT",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.BOTTOM_LEFT=4]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=8]="BOTTOM_RIGHT",t[t.TOP=3]="TOP",t[t.BOTTOM=12]="BOTTOM",t[t.LEFT=5]="LEFT",t[t.RIGHT=10]="RIGHT",t[t.ALL=15]="ALL"}(qi||(qi={})),function(t){t[t.NONE=0]="NONE",t[t.TOP=1]="TOP",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=4]="BOTTOM",t[t.LEFT=8]="LEFT",t[t.TOP_OR_LEFT=9]="TOP_OR_LEFT",t[t.TOP_OR_RIGHT=3]="TOP_OR_RIGHT",t[t.BOTTOM_OR_LEFT=12]="BOTTOM_OR_LEFT",t[t.BOTTOM_OR_RIGHT=6]="BOTTOM_OR_RIGHT",t[t.ALL=15]="ALL"}(Qi||(Qi={}));var tr,nr,ir,rr=function(){function t(){}return t.IS_EDIT_MODE=!1,t.FILL_COLOR=16777215,t.FILL_ALPHA=.5,t.STROKE_COLOR=5197647,t.STROKE_COLOR_DARK=5197647,t.STROKE_COLOR_LIGHT=13684944,t.STROKE_ALPHA=1,t.STROKE_WIDTH=2,t.STROKE_ALIGN=0,t.STROKE_SIDE=Qi.ALL,t.TEXT_VALUE="",t.TEXT_FAMILY="auto",t.TEXT_SIZE=14,t.CURSOR="",t.RADIUS=.25,t.SIZE_X=100,t.SIZE_Y=100,t.ANTIALIAS_WEIGHT=1.25/(window.devicePixelRatio||1),t.HIGHLIGHT_COLOR=2000880,t}(),er=function(){function t(){this.values=[]}return t.prototype.add=function(t,n){var i=this.values;null!=n?i.splice(n,0,t):i.push(t)},t.prototype.addAll=function(t){for(var n=t,i=this.values,r=0,e=n.length;r<e;++r)i.push(n[r])},t.prototype.indexOf=function(t){for(var n=this.values,i=0,r=n.length;i<r;++i)if(n[i]===t)return i;for(i=0,r=n.length;i<r;++i)if(n[i].isEquals(t))return i;return-1},t.prototype.get=function(t){var n=this.values[t];return null!=n?n:null},t.prototype.set=function(t,n){this.values[t]=n},t.prototype.remove=function(t){this.values.splice(t,1)},t.prototype.clear=function(){this.values.length=0},t.prototype.size=function(){return this.values.length},t.prototype.swap=function(t,n){var i=this.values,r=i[n];i[n]=i[t],i[t]=r},t.prototype.serialize=function(t){for(var n=[],i=this.values,r=0,e=i.length;r<e;++r)n.push(i[r].serialize(t));return n},t}();!function(t){t[t.NONE=0]="NONE",t[t.TRANSFORM=1]="TRANSFORM",t[t.SIZE=2]="SIZE",t[t.STYLE=4]="STYLE",t[t.ACTION=8]="ACTION",t[t.POINTS=16]="POINTS",t[t.STATE=32]="STATE",t[t.ALL=63]="ALL"}(tr||(tr={})),function(t){t[t.NONE=0]="NONE",t[t.POSITION_X=1]="POSITION_X",t[t.POSITION_Y=2]="POSITION_Y",t[t.POSITION=3]="POSITION",t[t.ROTATION=4]="ROTATION",t[t.COLOR_FILL=8]="COLOR_FILL",t[t.COLOR_STROKE=16]="COLOR_STROKE",t[t.COLOR_FILL_AND_STROKE=24]="COLOR_FILL_AND_STROKE",t[t.COLOR_TEXT=32]="COLOR_TEXT",t[t.COLOR_TEXT_OUTLINE=64]="COLOR_TEXT_OUTLINE",t[t.COLOR=120]="COLOR",t[t.VISIBILITY=128]="VISIBILITY",t[t.HEIGHT=256]="HEIGHT",t[t.WIDTH=512]="WIDTH",t[t.SIZE=768]="SIZE",t[t.TEXT=1024]="TEXT",t[t.CURSOR=2048]="CURSOR"}(nr||(nr={})),function(t){t[t.NONE=0]="NONE",t[t.CHANGED=1]="CHANGED",t[t.CLICKED=2]="CLICKED",t[t.DOWN=4]="DOWN",t[t.UP=8]="UP",t[t.PRESSED=16]="PRESSED",t[t.PERSISTENT=16]="PERSISTENT"}(ir||(ir={}));var ur,sr,hr=function(){function n(n){var i=n.transform,r=i.position;this.x=r.x,this.y=r.y,this.size=new t.Point(n.size.x,n.size.y),this.rotation=i.rotation,this.actions=[],this.fill=n.fill.toObject(),this.stroke=n.stroke.toObject(),this.text=n.text.toObject(),this.cursor=n.cursor,this.reset=nr.NONE,this.written=nr.NONE,this.effect=NaN,this.state=ir.NONE,this.interactive=!1}return n.prototype.onPointerClick=function(t,n){t.disabled||this.state&ir.CLICKED||(this.state|=ir.CHANGED|ir.CLICKED,e.update())},n.prototype.onPointerDblClick=function(t,n){return!1},n.prototype.onPointerOver=function(t,n){t.hovered=!0},n.prototype.onPointerOut=function(t,n){t.hovered=!1},n.prototype.onPointerDown=function(t,n){this.state&ir.DOWN||(this.state|=ir.CHANGED|ir.DOWN|ir.PRESSED,e.update());var i=W.getFocusController();i.setFocused(i.findFocusableParent(t),!0,!0)},n.prototype.onPointerUp=function(t,n){this.state&ir.UP||(this.state|=ir.CHANGED|ir.UP,this.state&=~ir.PRESSED,e.update())},n.prototype.onPointerMove=function(t,n){},n.prototype.onKeyDown=function(t,n){return R.isActivateKey(n)&&this.onPointerDown(t),!1},n.prototype.onKeyUp=function(t,n){return R.isActivateKey(n)&&(this.onPointerUp(t),this.onPointerClick(t)),!1},n.prototype.onStateChange=function(t,n,i){this.state|=ir.CHANGED,e.update()},n.prototype.update=function(t,n){var i=t.tag,r=this.effect<=n;(i.isChanged||this.state&ir.CHANGED||r)&&(r&&(this.effect=NaN),t.disallowUploadedUpdate(),this.onUpdate(t,n),t.allowUploadedUpdate(),this.state&=ir.PERSISTENT,i.isChanged=!1)},n.prototype.onUpdate=function(t,n){0<this.actions.length&&(this.executeActions(t,n),this.resetUnwrittenProperties(t))},n.prototype.executeActions=function(t,n){this.written=nr.NONE;for(var i=this.actions,r=0,e=i.length;r<e;++r)i[r].execute(t,this,n)},n.prototype.resetUnwrittenProperties=function(t){var n=~this.written&this.reset;if(n!==nr.NONE){if(n&nr.POSITION_X&&(t.transform.position.x=this.x),n&nr.POSITION_Y&&(t.transform.position.y=this.y),n&nr.VISIBILITY&&(t.visible=!0),n&nr.COLOR_FILL){var i=this.fill;t.fill.set(void 0,i.color,i.alpha)}if(n&nr.COLOR_STROKE){var r=this.stroke;t.stroke.set(void 0,r.color,r.alpha)}if(n&nr.COLOR_TEXT){var e=this.text;t.text.set(void 0,e.color,e.alpha)}if(n&nr.COLOR_TEXT_OUTLINE){var u=this.text.outline;t.text.outline.set(void 0,u.color,u.alpha)}n&nr.HEIGHT&&(t.size.y=this.size.y),n&nr.WIDTH&&(t.size.x=this.size.x),n&nr.ROTATION&&(t.transform.rotation=this.rotation),n&nr.TEXT&&(t.text.value=this.text.value),n&nr.CURSOR&&(t.cursor=this.cursor)}},n}(),or=function(n){function r(i){var r=n.call(this)||this;return r.internalTransform=new t.Matrix,r.gr=i,r}return i(r,n),r.prototype.onChange=function(){t.Transform.prototype.onChange.call(this),this.gr.onTransformChange()},r.prototype.updateSkew=function(){t.Transform.prototype.updateSkew.call(this),this.gr.onTransformChange()},r.prototype.getLocalIdCurrent=function(){return this._currentLocalID},r.prototype.getLocalId=function(){return this._localID},r.prototype.getParentId=function(){return this._parentID},r.prototype.getWorldId=function(){return this._worldID},r.prototype.updateTransform=function(t){var i=this._currentLocalID,e=this._worldID;n.prototype.updateTransform.call(this,t);var u=this._currentLocalID,s=this._worldID;if(i!==u){var h=this.localTransform,o=this.internalTransform;h.copyTo(o),t instanceof r&&o.prepend(t.internalTransform)}else e!==s&&(h=this.localTransform,o=this.internalTransform,t instanceof r&&(h.copyTo(o).prepend(t.internalTransform),this._currentLocalID+=1,this._localID=this._currentLocalID))},r}(t.Transform),cr=function(){function t(){}return t.serializeGradient=function(t){for(var n=t.points,i="["+t.direction,r=0,e=n.length,u=1;r<e;r+=1,u+=3){var s=n[r];i+=","+s.color+","+s.alpha+","+s.position}return i+"]"},t.parseGradient=function(t){try{return JSON.parse(t)}catch(t){return null}},t.deserializeGradient=function(t){var n=this.parseGradient(t);if(!(null==n||n.length<7)){for(var i=n[0],r=[],e=1,u=n.length;e<u;e+=3)r.push({color:n[e+0],alpha:n[e+1],position:n[e+2]});return{points:r,direction:i}}},t.toGradientId=function(t,n){return null!=t?(null==t.serialized&&(t.serialized=this.serializeGradient(t)),n.add(t.serialized)):-1},t.toGradientImageUrl=function(t){for(var n=t.direction,i=t.points,r="",e=0,u=i.length;e<u;++e){var s=i[e],h=Xn.toCode(s.color),o=s.alpha;r+='<stop offset="'+100*s.position+'%" stop-color="#'+h+'" stop-opacity="'+o+'" />'}var c=n*Math.PI/180,f=.5*Math.cos(c),a=-.5*Math.sin(c);return"data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs><linearGradient id="o2glkm3aeu2oio" x1="'+(.5-f)+'" x2="'+(.5+f)+'" y1="'+(.5-a)+'" y2="'+(.5+a)+'">'+r+'</linearGradient></defs><rect x="0" y="0" width="32" height="32" stroke="none" fill="url(#o2glkm3aeu2oio)" /></svg>')},t}(),fr=function(n){function r(t){var i=n.call(this)||this;return i.id="",i.type=t,i.transform=i.newTransform(),i.Mr=0,i.Er=!1,i.action=new er,i.kr=!0,i.Ir=0,i.Nr=!1,i.yr=!1,i.xr=NaN,i.Cr=NaN,i.jr=NaN,i.jt=i.At=v.UNFOCUSABLE,i.interactive=!1,i.parent=null,i.children=[],i.selected=!1,i.index=0,i.reference=0,i}return i(r,n),r.prototype.newTransform=function(){return new or(this)},r.prototype.onSizeChange=function(){this.xr=NaN,this.Cr=NaN,this.jr=NaN,this.Ar(),this.updateUploaded()},r.prototype.onTransformChange=function(){this.Ar(),this.updateUploadedRecursively()},r.prototype.Ar=function(){if(0===this.Mr){var t=this.parent;null!=t&&t.onChildTransformChange()}else this.Er=!0},r.prototype.disallowOnTransformChange=function(){this.Mr+=1,1===this.Mr&&(this.Er=!1)},r.prototype.allowOnTransformChange=function(t){this.Mr-=1,0===this.Mr&&this.Er&&(this.Er=!1,t&&this.onTransformChange())},r.prototype.onChildTransformChange=function(){},r.prototype.disallowUploadedUpdate=function(){this.Ir+=1,1===this.Ir&&(this.Nr=!1,this.yr=!1)},r.prototype.allowUploadedUpdate=function(){this.Ir-=1,0===this.Ir&&(this.yr?(this.yr=!1,this.Nr=!1,this.updateUploadedRecursively()):this.Nr&&(this.Nr=!1,this.updateUploaded()))},r.prototype.updateUploadedRecursively=function(){if(0===this.Ir){this.updateUploaded();for(var t=this.children,n=0,i=t.length;n<i;++n)t[n].updateUploadedRecursively()}else this.yr=!0},r.prototype.updateUploaded=function(){if(0===this.Ir){var t=this.uploaded;null!=t&&t.update(this)}else this.Nr=!0},Object.defineProperty(r.prototype,"root",{get:function(){for(var t=this;t.parent instanceof r;)t=t.parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visible",{get:function(){var t=this.parent;return t instanceof r?t.visible&&this.kr:this.kr},set:function(t){this.kr!==t&&(this.kr=t,this.updateUploadedRecursively())},enumerable:!0,configurable:!0}),r.prototype.toDirty=function(){var t=this.parent;null!=t&&t.toDirty()},r.prototype.attach=function(t,n){this.detach(),this.parent=t;var i=t.children;return null!=n&&0<=n&&n<i.length?i.splice(n,0,this):i.push(this),this.uploaded=void 0,t.onChildTransformChange(),t.toDirty(),this},r.prototype.detach=function(){var t=this.parent;if(null!=t){this.parent=null,this.uploaded=void 0;var n=t.children,i=n.indexOf(this);0<=i&&(n.splice(i,1),t.onChildTransformChange(),t.toDirty())}return this},r.prototype.updateTransform=function(){var n=this.parent;null!=n?(n.updateTransform(),this.transform.updateTransform(n.transform)):this.transform.updateTransform(t.Transform.IDENTITY)},r.prototype.serializeChildren=function(t){for(var n=this.children,i=[],r=0,e=n.length;r<e;++r){var u=n[r];i.push(u.serialize(t))}return i},r.prototype.serializeImage=function(t){var n=this.image;return null!=n?t.add(n.src):-1},r.prototype.serializeGradient=function(t){return cr.toGradientId(this.gradient,t)},r.prototype.serialize=function(t){var n=this.transform,i=n.position,r=n.pivot,e=this.size,u=this.shortcut,s=null!=u?t.add(u):-1,h=this.title,o=null!=h?t.add(h):-1;return[this.type,t.add(this.id),i.x,i.y,e.x,e.y,n.rotation,n.skew.x,this.fill.serialize(t),this.stroke.serialize(t),t.add(this.cursor.trim()),this.text.serialize(t),this.tag.serialize(t),this.radius,this.corner,-1,-1,this.action.serialize(t),this.serializeImage(t),this.serializeGradient(t),this.serializeChildren(t),r.x,r.y,(this.interactive?1:0)|(this.unfocusable?2:0),s,o]},r.prototype.contains=function(t){var n=t.x,i=t.y,r=this.size,e=.5*r.x,u=.5*r.y,s=this.transform.pivot,h=n-s.x,o=i-s.y,c=this.stroke,f=c.width*c.align;if(0<=e){if(0<=u){if(this.containsAbs(+h,+o,+e+f,+u+f))return this}else if(this.containsAbs(+h,-o,+e+f,-u+f))return this}else if(0<=u){if(this.containsAbs(-h,+o,-e+f,+u+f))return this}else if(this.containsAbs(-h,-o,-e+f,-u+f))return this;return this.containsText(n,i,t)||this.containsChildren(n,i,t)},r.prototype.containsText=function(t,n,i){var r=this.text;if(null!=r.atlas){var e=r.world;if(null!=e){i.set(t,n),this.transform.internalTransform.apply(i,i);var u=i.x-e[0],s=i.y-e[1],h=e[2]*u+e[3]*s,o=e[4]*u+e[5]*s;if(0<=h&&h<=e[6]&&0<=o&&o<=e[7])return this}}return null},r.prototype.containsChildren=function(t,n,i){for(var r=this.children,e=r.length-1;0<=e;--e){var u=r[e];i.set(t,n),u.updateTransform(),u.transform.localTransform.applyInverse(i,i);var s=u.contains(i);if(null!=s)return this.shadowed?this:s}return null},r.prototype.containsBBox=function(t){var n=t.x,i=t.y,r=this.size,e=.5*r.x,u=.5*r.y,s=this.transform.pivot,h=n-s.x,o=i-s.y,c=this.stroke,f=c.width*c.align;return 0<=e?0<=u?this.containsAbsBBox(+h,+o,+e+f,+u+f):this.containsAbsBBox(+h,-o,+e+f,-u+f):0<=u?this.containsAbsBBox(-h,+o,-e+f,+u+f):this.containsAbsBBox(-h,-o,-e+f,-u+f)},r.prototype.containsAbs=function(t,n,i,r){return this.containsAbsBBox(t,n,i,r)},r.prototype.containsAbsBBox=function(t,n,i,r){return-i<=t&&t<=+i&&-r<=n&&n<=+r},r.prototype.select=function(t){return!1},r.prototype.toGlobal=function(t,n,i){return!0!==i&&this.updateTransform(),n.copyFrom(t),this.transform.worldTransform.apply(n,n),n},r.prototype.toLocal=function(n,i,r,e){return!0!==e&&this.updateTransform(),void 0===r&&(r=new t.Point),r.copyFrom(n),this.transform.worldTransform.applyInverse(r,r),r},r.prototype.getBounds=function(n,i,r){!0!==i&&this.updateTransform();var e=this._bounds=this._bounds||new t.Rectangle,u=this.transform.getWorldId();return u!==this.xr&&(this.xr=u,this.Br(this.transform.worldTransform,n,e)),r.copyFrom(e),r},r.prototype.getBoundsInternal=function(n,i,r){!0!==i&&this.updateTransform();var e=this.Rr=this.Rr||new t.Rectangle,u=this.transform.getLocalIdCurrent();return u!==this.Cr&&(this.Cr=u,this.Br(this.transform.internalTransform,n,e)),r.copyFrom(e),r},r.prototype.getBoundsLocal=function(n,i,r){!0!==i&&this.updateTransform();var e=this.Lr=this.Lr||new t.Rectangle,u=this.transform.getLocalIdCurrent();return u!==this.jr&&(this.jr=u,this.Br(this.transform.localTransform,n,e)),r.copyFrom(e),r},r.prototype.getBoundsSize=function(){return this.size},r.prototype.Br=function(t,n,i){var r=this.transform.pivot,e=r.x,u=r.y,s=this.getBoundsSize(),h=.5*s.x,o=.5*s.y,c=t.a,f=t.b,a=t.c,l=t.d,v=-h+e,b=-o+u,d=c*v+a*b,g=f*v+l*b,m=c*(v=+h+e)+a*(b=-o+u),p=f*v+l*b,w=c*(v=-h+e)+a*(b=+o+u),D=f*v+l*b,T=c*(v=+h+e)+a*(b=+o+u),O=f*v+l*b,S=Math.min(d,m,w,T),M=Math.min(g,p,D,O),E=Math.max(d,m,w,T),k=Math.max(g,p,D,O);return i.x=S+t.tx,i.y=M+t.ty,i.width=E-S,i.height=k-M,i},r.prototype.destroy=function(){for(var t=this.children,n=t.length-1;0<=n;--n)t[n].destroy();t.length=0},r.prototype.updateState=function(){var t=this.parent,n=this.At,i=t instanceof r?this.mergeState(n,t.getState()):n,e=this.jt;e!==i&&(this.jt=i,this.onStateChange(i,e))},r.prototype.mergeState=function(t,n){return t|n&v.DISABLED|(n&(v.FOCUSED|v.FOCUSED_IN)?v.FOCUSED_IN:v.NONE)},r.prototype.onStateChange=function(t,n){var i=this.runtime;null!=i&&i.onStateChange(this,t,n);for(var e=this.children,u=0,s=e.length;u<s;++u){var h=e[u];h instanceof r&&h.onParentStateChange(t,n)}},r.prototype.onParentStateChange=function(t,n){var i=this.mergeState(this.At,t),r=this.jt;r!==i&&(this.jt=i,this.onStateChange(i,r))},r.prototype.getState=function(){return this.jt},r.prototype.setState=function(t,n){return M.is(this.At,t)!==n&&(n?this.At|=t:this.At&=~t,this.updateState()),this},r.prototype.hasState=function(t){return M.is(this.jt,t)},r.prototype.focus=function(){return this.focused=!0,this},r.prototype.blur=function(){return this.focused=!1,this},Object.defineProperty(r.prototype,"hovered",{get:function(){return this.hasState(v.HOVERED)},set:function(t){this.setState(v.HOVERED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this.hasState(v.ACTIVE)},set:function(t){this.setState(v.ACTIVE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"readonly",{get:function(){return this.hasState(v.READ_ONLY)},set:function(t){this.setState(v.READ_ONLY,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"enabled",{get:function(){return!this.hasState(v.DISABLED)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"disabled",{get:function(){return this.hasState(v.DISABLED)},set:function(t){this.setState(v.DISABLED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dragging",{get:function(){return this.hasState(v.DRAGGING)},set:function(t){this.setState(v.DRAGGING,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"focused",{get:function(){return this.hasState(v.FOCUSED)},set:function(t){this.focused!==t&&W.getFocusController().setFocused(this,t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"focusedin",{get:function(){return this.hasState(v.FOCUSED|v.FOCUSED_IN)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"unfocusable",{get:function(){return this.hasState(v.UNFOCUSABLE)},set:function(t){this.setState(v.UNFOCUSABLE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"clicked",{get:function(){var t=this.runtime;return!!(t&&t.state&ir.CLICKED)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pressed",{get:function(){var t=this.runtime;return!!(t&&t.state&ir.PRESSED)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"down",{get:function(){var t=this.runtime;return!!(t&&t.state&ir.DOWN)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"up",{get:function(){var t=this.runtime;return!!(t&&t.state&ir.UP)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"shadowed",{get:function(){return!1},enumerable:!0,configurable:!0}),r.prototype.onDblClick=function(t){var n=this.runtime;return null!=n&&n.onPointerDblClick(this)},r.prototype.onShortcut=function(t){var n=this.runtime;if(null!=n)return n.onPointerClick(this)},r.prototype.onKeyDown=function(t){var n=this.runtime;return null!=n&&n.onKeyDown(this,t)},r.prototype.onKeyUp=function(t){var n=this.runtime;return null!=n&&n.onKeyUp(this,t)},r.prototype.update=function(t){var n=this.runtime;null!=n&&n.update(this,t)},r.prototype.updateRecursively=function(t){this.update(t);for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].update(t)},r.prototype.copy=function(t,n){if(void 0===n&&(n=tr.ALL),this.id=t.id,0!=(n&tr.TRANSFORM)){var i=this.transform,r=t.transform;i.position.copyFrom(r.position),i.rotation=r.rotation,i.skew.copyFrom(r.skew),i.pivot.copyFrom(r.pivot),i.scale.copyFrom(r.scale)}if(0!=(n&tr.SIZE)&&this.size.copyFrom(t.size),0!=(n&tr.STYLE)&&(this.fill.copy(t.fill),this.stroke.copy(t.stroke),this.tag.copy(t.tag),this.text.copy(t.text),this.radius=t.radius,this.corner=t.corner,null==this.image&&(this.image=t.image)),0!=(n&tr.ACTION)&&(this.action.addAll(t.action.values),this.interactive=t.interactive,this.cursor=t.cursor,this.shortcut=t.shortcut),0!=(n&tr.POINTS)){var e=t.points;if(null!=e){var u=this.points;null!=u?u.copy(e):this.points=e.clone(this)}}return 0!=(n&tr.STATE)&&this.setState(t.getState(),!0),this},r}(t.utils.EventEmitter),ar=function(){function t(t,n,i,r){this.gr=t,this.Wr=n,this.u=i,this.h=r}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.Wr},set:function(t){this.Wr!==t&&(this.Wr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.h},set:function(t){this.h!==t&&(this.h=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){this.set(t.enable,t.color,t.alpha)},t.prototype.set=function(t,n,i){var r=!1;void 0!==t&&this.Wr!==t&&(this.Wr=t,r=!0),void 0!==n&&this.u!==n&&(this.u=n,r=!0),void 0!==i&&this.h!==i&&(this.h=i,r=!0),r&&this.gr.updateUploaded()},t.prototype.clone=function(){return new t(this.gr,this.Wr,this.u,this.h)},t.prototype.toObject=function(){return{enable:this.Wr,color:this.u,alpha:this.h}},t.prototype.serialize=function(t){var n="["+(this.Wr?1:0)+","+this.u+","+this.h+"]";return t.add(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.fills.get(t);if(null!=r)this.set(0!==r[0],r[1],r[2]);else{var e=JSON.parse(i[t]);n.fills.set(t,e),this.set(0!==e[0],e[1],e[2])}}},t}(),lr=function(){function t(t,n,i,r,e,u,s){this.gr=t,this.Wr=n,this.u=i,this.h=r,this.o=e,this.l=u,this._r=s}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.Wr},set:function(t){this.Wr!==t&&(this.Wr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.h},set:function(t){this.h!==t&&(this.h=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){return this._r},set:function(t){this._r!==t&&(this._r=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.enable,t.color,t.alpha,t.width,t.align,t.side)},t.prototype.set=function(t,n,i,r,e,u){var s=!1;void 0!==t&&this.Wr!==t&&(this.Wr=t,s=!0),void 0!==n&&this.u!==n&&(this.u=n,s=!0),void 0!==i&&this.h!==i&&(this.h=i,s=!0),void 0!==r&&this.o!==r&&(this.o=r,s=!0),void 0!==e&&this.l!==e&&(this.l=e,s=!0),void 0!==u&&this._r!==u&&(this._r=u,s=!0),s&&this.gr.updateUploaded()},t.prototype.clone=function(){return new t(this.gr,this.Wr,this.u,this.h,this.o,this.l,this._r)},t.prototype.toObject=function(){return{enable:this.Wr,color:this.u,alpha:this.h,width:this.o,align:this.l,side:this._r}},t.prototype.serialize=function(t){var n="["+(this.Wr?1:0)+","+this.u+","+this.h+","+this.o+","+this.l+","+this._r+"]";return t.add(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.strokes.get(t);if(null!=r)this.set(0!==r[0],r[1],r[2],r[3],r[4],r[5]);else{var e=JSON.parse(i[t]);n.strokes.set(t,e),this.set(0!==e[0],e[1],e[2],e[3],e[4],e[5])}}},t}();!function(t){t[t.ASCENDING=0]="ASCENDING",t[t.DESCENDING=1]="DESCENDING"}(ur||(ur={})),function(t){t[t.NONE=0]="NONE",t[t.FROM=1]="FROM",t[t.TO=2]="TO",t[t.FROM_TO=3]="FROM_TO"}(sr||(sr={}));var vr,br,dr,gr,mr,pr=function(){function t(){this.Fr=sr.NONE,this.Pr=0,this.Ur=1}return Object.defineProperty(t.prototype,"type",{get:function(){return this.Fr},set:function(t){if(this.Fr!==t){this.Fr=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.Pr},set:function(t){if(this.Pr!==t){this.Pr=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.Ur},set:function(t){if(this.Ur!==t){this.Ur=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!0,configurable:!0}),t.prototype.set=function(t,n){var i=!1;if(void 0!==t&&void 0!==n)if(null!==t&&null!==n){var r=this.Fr|sr.FROM|sr.TO;this.Fr===r&&this.Pr===t&&this.Ur===n||(this.Fr=r,this.Pr=t,this.Ur=n,i=!0)}else null!==t?(r=(this.Fr|sr.FROM)&~sr.TO,this.Fr===r&&this.Pr===t||(this.Fr=r,this.Pr=t,i=!0)):null!==n?(r=(this.Fr|sr.TO)&~sr.FROM,this.Fr===r&&this.Pr===t||(this.Fr=r,this.Ur=n,i=!0)):(r=this.Fr&~(sr.TO|sr.FROM),this.Fr!==r&&(this.Fr=r,i=!0));else void 0!==t?null!==t?(r=this.Fr|sr.FROM,this.Fr===r&&this.Pr===t||(this.Fr=r,this.Pr=t,i=!0)):(r=this.Fr&~sr.FROM,this.Fr!==r&&(this.Fr=r,i=!0)):void 0!==n&&(null!==n?(r=this.Fr|sr.TO,this.Fr===r&&this.Ur===n||(this.Fr=r,this.Ur=n,i=!0)):(r=this.Fr&~sr.TO,this.Fr!==r&&(this.Fr=r,i=!0)));if(i){var e=this.parent;null!=e&&(e.isChanged=!0)}return i},t.prototype.normalize=function(t){var n=this.Fr,i=this.Pr,r=this.Ur;switch(n){case sr.FROM_TO:return(t-i)/(r-i);case sr.FROM:return t-i;case sr.TO:return r-t;case sr.NONE:default:return t}},t.prototype.isEquals=function(t){return this.Fr===t.type&&this.Pr===t.from&&this.Ur===t.to},t.prototype.copy=function(t){return this.zr(t.type,t.from,t.to)},t.prototype.zr=function(t,n,i){var r=!1;if(this.Fr!==t&&(this.Fr=t,r=!0),this.Pr!==n&&(this.Pr=n,r=!0),this.Ur!==i&&(this.Ur=i,r=!0),r){var e=this.parent;null!=e&&(e.isChanged=!0)}return this},t.prototype.toObject=function(){return{type:this.type,from:this.from,to:this.to}},t.prototype.serialize=function(t){var n="["+this.Fr+","+this.Pr+","+this.Ur+"]";return t.add(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.ranges.get(t);if(null!=r)this.zr(r[0],r[1],r[2]);else{var e=JSON.parse(i[t]);n.ranges.set(t,e),this.zr(e[0],e[1],e[2])}}},t}(),wr=function(t,n){return t-n},Dr=function(){function t(){this.id="",this.initial="",this.format="",this.range=new pr,this.Fn=0,this.zi=0,this.Gr=0,this.Hr=ur.ASCENDING}return Object.defineProperty(t.prototype,"parent",{get:function(){return this.gr},set:function(t){this.gr!==t&&(this.gr=t,this.range.parent=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.Fn},set:function(t){var n=this.formatter;null!=n&&(t=n(t));var i=this.Gr;if(i<=0){if(this.Fn!==t){this.Fn=t;var r=this.parent;null!=r&&(r.isChanged=!0)}}else{var e=this.mr;null==e&&(e=[],this.mr=e),this.Fn=t;var u=this.Hr;u===ur.ASCENDING?e.push(t):e.unshift(t);var s=e.length-i;if(0<s)if(u===ur.ASCENDING)for(var h=0;h<s;++h)e.shift();else e.length=i;var o=this.parent;null!=o&&(o.isChanged=!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nvalue",{get:function(){return this.range.normalize(this.Fn)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var t=this.mr;return null==t&&(t=[],this.mr=t),t},set:function(t){if(0<t.length){var n=this.Gr;if(n<=0){var i=t[t.length-1];if(null!=(u=this.formatter)&&(i=u(i)),this.Fn!==i){this.Fn=i;var r=this.parent;null!=r&&(r.isChanged=!0)}}else{var e=this.mr;null==e&&(e=[],this.mr=e);var u,s=this.Hr;if(null!=(u=this.formatter))if(this.Fn=u(t[t.length-1]),s===ur.ASCENDING)for(var h=0,o=t.length;h<o;++h)e.push(u(t[h]));else for(h=0,o=t.length;h<o;++h)e.unshift(u(t[h]));else if(this.Fn=t[t.length-1],s===ur.ASCENDING)for(h=0,o=t.length;h<o;++h)e.push(t[h]);else for(h=0,o=t.length;h<o;++h)e.unshift(t[h]);var c=e.length-n;if(0<c)if(s===ur.ASCENDING)for(h=0;h<c;++h)e.shift();else e.length=n;var f=this.parent;null!=f&&(f.isChanged=!0)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.zi},set:function(t){var n=this.Gr;if(n<=0){if(this.zi!==t){this.zi=t;var i=this.parent;null!=i&&(i.isChanged=!0)}}else{var r=this.Vr;null==r&&(r=[],this.Vr=r),this.zi=t;var e=this.Hr;e===ur.ASCENDING?r.push(t):r.unshift(t);var u=r.length-n;if(0<u)if(e===ur.ASCENDING)for(var s=0;s<u;++s)r.shift();else r.length=n;var h=this.parent;null!=h&&(h.isChanged=!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"times",{get:function(){var t=this.Vr;return null==t&&(t=[],this.Vr=t),t},set:function(t){if(0<t.length){var n=this.Gr;if(n<=0){var i=t[t.length-1];if(this.zi!==i){this.zi=i;var r=this.parent;null!=r&&(r.isChanged=!0)}}else{var e=this.Vr;null==e&&(e=[],this.Vr=e),this.zi=t[t.length-1];var u=this.Hr;if(u===ur.ASCENDING)for(var s=0,h=t.length;s<h;++s)e.push(t[s]);else for(s=0,h=t.length;s<h;++s)e.unshift(t[s]);var o=e.length-n;if(0<o)if(u===ur.ASCENDING)for(s=0;s<o;++s)e.shift();else e.length=n;var c=this.parent;null!=c&&(c.isChanged=!0)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"capacity",{get:function(){return this.Gr},set:function(t){if(this.Gr<t)this.Gr=t;else if(t<this.Gr){this.Gr=t;var n=!1,i=this.Hr,r=this.mr;if(null!=r&&0<(u=r.length-t)){if(i===ur.ASCENDING)for(var e=0;e<u;++e)r.shift();else r.length=t;n=!0}var u,s=this.Vr;if(null!=s&&0<(u=s.length-t)){if(i===ur.ASCENDING)for(e=0;e<u;++e)s.shift();else s.length=t;n=!0}if(n){var h=this.parent;null!=h&&(h.isChanged=!0)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this.Hr},set:function(t){this.Hr=t},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){var n=!1,i=this.mr;null!=i&&0<=t&&t<i.length&&(i.splice(t,1),n=!0);var r=this.Vr;if(null!=r&&0<=t&&t<r.length&&(r.splice(t,1),n=!0),n){var e=this.parent;null!=e&&(e.isChanged=!0)}},t.prototype.removeAll=function(t){var n=!1,i=this.mr,r=this.Vr,e=t.slice(0).sort(wr);if(null!=i)if(null!=r)for(var u=e.length-1;0<=u;--u)0<=(s=e[u])&&(s<i.length&&(i.splice(s,1),n=!0),s<r.length&&(r.splice(s,1),n=!0));else for(u=e.length-1;0<=u;--u)0<=(s=e[u])&&s<i.length&&(i.splice(s,1),n=!0);else if(null!=r)for(u=e.length-1;0<=u;--u){var s;0<=(s=e[u])&&s<r.length&&(r.splice(s,1),n=!0)}if(n){var h=this.parent;null!=h&&(h.isChanged=!0)}},t.prototype.clear=function(){var t=!1,n=this.mr;null!=n&&(n.length=0,t=!0);var i=this.Vr;if(null!=i&&(i.length=0,t=!0),t){var r=this.parent;null!=r&&(r.isChanged=!0)}},t.prototype.copy=function(t){return this.id=t.id,this.initial=t.initial,this.format=t.format,this.formatter=t.formatter,this.range.copy(t.range),this.Fn=t.value,this.zi=t.time,this.Gr=t.capacity,this},t.prototype.serialize=function(t){var n=t.add(this.id),i=t.add(this.initial),r=t.add(this.format.trim()),e=this.range.serialize(t);return t.add("["+n+","+i+","+r+","+e+","+this.Gr+","+this.Hr+"]")},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.tagValues.get(t);null==r&&(r=JSON.parse(i[t]),n.tagValues.set(t,r)),this.id=i[r[0]]||"",this.initial=i[r[1]]||"",this.format=i[r[2]]||"",this.range.deserialize(r[3],n),this.Gr=r[4],this.Hr=r[5]}return this},t}(),Tr=function(){function t(){this.mr=[],this.isChanged=!0}return Object.defineProperty(t.prototype,"id",{get:function(){var t=this.mr;if(0<t.length)return t[0].id;var n=this.inherited;return null!=n?n.id:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initial",{get:function(){var t=this.mr;if(0<t.length)return t[0].initial;var n=this.inherited;return null!=n?n.initial:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){var t=this.mr;if(0<t.length)return t[0].format;var n=this.inherited;return null!=n?n.format:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){var n=this.mr;if(0<n.length)return n[0].range;var i=this.inherited;return null!=i?i.range:t.RANGE_DUMMY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this.mr;if(0<t.length)return t[0].value;var n=this.inherited;return null!=n?n.value:0},set:function(t){var n=this.mr;if(0<n.length)n[0].value=t;else{var i=this.inherited;null!=i&&(i.value=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nvalue",{get:function(){var t=this.mr;if(0<t.length)return t[0].nvalue;var n=this.inherited;return null!=n?n.nvalue:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var t=this.mr;if(0<t.length)return t[0].time;var n=this.inherited;return null!=n?n.time:0},set:function(t){var n=this.mr;if(0<n.length)n[0].time=t;else{var i=this.inherited;null!=i&&(i.time=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var n=this.mr;if(0<n.length)return n[0].values;var i=this.inherited;return null!=i?i.values:t.EMPTY_ARRAY},set:function(t){var n=this.mr;if(0<n.length)n[0].values=t;else{var i=this.inherited;null!=i&&(i.values=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"times",{get:function(){var n=this.mr;if(0<n.length)return n[0].times;var i=this.inherited;return null!=i?i.times:t.EMPTY_ARRAY},set:function(t){var n=this.mr;if(0<n.length)n[0].times=t;else{var i=this.inherited;null!=i&&(i.times=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"capacity",{get:function(){var t=this.mr;if(0<t.length)return t[0].capacity;var n=this.inherited;return null!=n?n.capacity:0},set:function(t){var n=this.mr;if(0<n.length)n[0].capacity=t;else{var i=this.inherited;null!=i&&(i.capacity=t)}},enumerable:!0,configurable:!0}),t.prototype.add=function(t,n){var i=this.mr;t.parent=this,void 0===n?i.push(t):i.splice(n,0,t)},t.prototype.set=function(t,n){var i=this.mr;if(0<=t&&t<i.length){var r=i[t];return n.parent=this,i[t]=n,r.parent=void 0,r}return null},t.prototype.remove=function(t){var n=this.mr;0<=t&&t<n.length&&(n.splice(t,1)[0].parent=void 0)},t.prototype.indexOf=function(t){for(var n=this.mr,i=0,r=n.length;i<r;++i)if((e=n[i])===t)return i;for(i=0,r=n.length;i<r;++i)if((e=n[i]).id===t.id&&e.initial===t.initial&&e.formatter===t.formatter&&e.range.isEquals(t.range))return i;for(i=0,r=n.length;i<r;++i){var e;if((e=n[i]).id===t.id)return i}return-1},t.prototype.get=function(t){var n=this.mr;return 0<=t&&t<n.length?n[t]:null},t.prototype.size=function(){return this.mr.length},t.prototype.swap=function(t,n){var i=this.mr,r=i[n];i[n]=i[t],i[t]=r},t.prototype.copy=function(t){var n=this.mr;n.length=0;for(var i=0,r=t.size();i<r;++i){var e=t.get(i);if(null!=e){var u=(new Dr).copy(e);u.parent=this,n.push(u)}}return this},t.prototype.serialize=function(t){var n=this.mr;if(n.length<=0)return t.add("[]");for(var i="["+n[0].serialize(t),r=1,e=n.length;r<e;++r)i+=","+n[r].serialize(t);return i+="]",t.add(i)},t.prototype.deserialize=function(t,n){if(0<=t&&t<n.resources.length){var i=n.tags.get(t);null==i&&(i=JSON.parse(n.resources[t]),n.tags.set(t,i));var r=this.mr;r.length=0;for(var e=0,u=i.length;e<u;++e){var s=i[e],h=new Dr;h.parent=this,h.deserialize(s,n),r.push(h)}}},t.RANGE_DUMMY=new pr,t.EMPTY_ARRAY=[],t}();!function(t){t[t.NORMAL=0]="NORMAL",t[t.BOLD=1]="BOLD"}(vr||(vr={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ITALIC=1]="ITALIC"}(br||(br={})),function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT",t[t.OUTSIDE_LEFT=3]="OUTSIDE_LEFT",t[t.OUTSIDE_RIGHT=4]="OUTSIDE_RIGHT"}(dr||(dr={})),function(t){t[t.TOP=0]="TOP",t[t.MIDDLE=1]="MIDDLE",t[t.BOTTOM=2]="BOTTOM",t[t.OUTSIDE_TOP=3]="OUTSIDE_TOP",t[t.OUTSIDE_BOTTOM=4]="OUTSIDE_BOTTOM"}(gr||(gr={})),function(t){t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.TOP_TO_BOTTOM=1]="TOP_TO_BOTTOM",t[t.BOTTOM_TO_TOP=2]="BOTTOM_TO_TOP"}(mr||(mr={}));var Or,Sr=function(){function t(t,n,i){this.gr=t,this.Xr=n,this.Yr=i}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.Xr},set:function(t){this.Xr!==t&&(this.Xr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return this.Yr},set:function(t){this.Yr!==t&&(this.Yr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.horizontal,t.vertical)},t.prototype.set=function(t,n){var i=!1;null!=t&&this.Xr!==t&&(this.Xr=t,i=!0),null!=n&&this.Yr!==n&&(this.Yr=n,i=!0),i&&this.gr.updateUploaded()},t.prototype.toObject=function(){return{horizontal:this.Xr,vertical:this.Yr}},t.prototype.serialize=function(t){return t.add("["+this.Xr+","+this.Yr+"]")},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.aligns.get(t);if(null!=r)this.set(r[0],r[1]);else{var e=JSON.parse(i[t]);n.aligns.set(t,e),this.set(e[0],e[1])}}},t}(),Mr=function(){function t(t,n,i){this.gr=t,this.Xr=n,this.Yr=i}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.Xr},set:function(t){this.Xr!==t&&(this.Xr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return this.Yr},set:function(t){this.Yr!==t&&(this.Yr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.horizontal,t.vertical)},t.prototype.set=function(t,n){var i=!1;null!=t&&this.Xr!==t&&(this.Xr=t,i=!0),null!=n&&this.Yr!==n&&(this.Yr=n,i=!0),i&&this.gr.updateUploaded()},t.prototype.toObject=function(){return{horizontal:this.Xr,vertical:this.Yr}},t.prototype.serialize=function(t){return t.add("["+this.Xr+","+this.Yr+"]")},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.margins.get(t);if(null!=r)this.set(r[0],r[1]);else{var e=JSON.parse(i[t]);n.margins.set(t,e),this.set(e[0],e[1])}}},t}(),Er=function(){function t(t,n,i,r,e){this.gr=t,this.Wr=n,this.u=i,this.h=r,this.o=e}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.Wr},set:function(t){this.Wr!==t&&(this.Wr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.h},set:function(t){this.h!==t&&(this.h=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.enable,t.color,t.alpha,t.width)},t.prototype.set=function(t,n,i,r){var e=!1;void 0!==t&&this.Wr!==t&&(this.Wr=t,e=!0),void 0!==n&&this.u!==n&&(this.u=n,e=!0),void 0!==i&&this.h!==i&&(this.h=i,e=!0),void 0!==r&&this.o!==r&&(this.o=r,e=!0),e&&this.gr.updateUploaded()},t.prototype.clone=function(){return new t(this.gr,this.Wr,this.u,this.h,this.o)},t.prototype.toObject=function(){return{enable:this.Wr,color:this.u,alpha:this.h,width:this.o}},t.prototype.serialize=function(t){var n="["+(this.Wr?1:0)+","+this.u+","+this.h+","+this.o+"]";return t.add(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.textOutlines.get(t);if(null!=r)this.set(0!==r[0],r[1],r[2],r[3]);else{var e=JSON.parse(i[t]);n.textOutlines.set(t,e),this.set(0!==e[0],e[1],e[2],e[3])}}},t}(),kr=function(){function t(t,n,i,r,e,u){this.gr=t,this.Wr=!0,this.Fn=n,this.u=i,this.h=r,this.Kr=e,this.wr=u,this.Rt=vr.NORMAL,this.align=new Sr(t,dr.CENTER,gr.MIDDLE),this.offset=new Mr(t,0,0),this.an=br.NORMAL,this.spacing=new Mr(t,0,0),this.outline=new Er(t,!1,16777215,1,.5),this.ar=mr.LEFT_TO_RIGHT,this.padding=new Mr(t,10,10),this.Zt=!1}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.Wr},set:function(t){this.Wr!==t&&(this.Wr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.Fn},set:function(t){if(this.Fn!==t){this.Fn=t;var n=this.gr,i=n.uploaded;if(null==i||!i.isCompatible(n))return this.atlas=void 0,void n.toDirty();var r=this.atlas,e=r&&r.characters;if(null==e)return this.atlas=void 0,void n.toDirty();for(var u=0,s=t.length;u<s;++u)if(!(t[u]in e))return this.atlas=void 0,void n.toDirty();n.updateUploaded()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.Kr},set:function(t){this.Kr!==t&&(this.Kr=t,this.gr.toDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.h},set:function(t){this.h!==t&&(this.h=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.wr},set:function(t){this.wr!==t&&(this.wr=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this.Rt},set:function(t){this.Rt!==t&&(this.Rt=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.an},set:function(t){this.an!==t&&(this.an=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this.ar},set:function(t){this.ar!==t&&(this.ar=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipping",{get:function(){return this.Zt},set:function(t){this.Zt!==t&&(this.Zt=t,this.gr.updateUploaded())},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){return t&&(this.set(t.value,t.color,t.alpha,t.family,t.size,t.weight,t.style,t.direction,t.clipping),this.align.copy(t.align),this.offset.copy(t.offset),this.outline.copy(t.outline),this.spacing.copy(t.spacing),this.padding.copy(t.padding)),this},t.prototype.set=function(t,n,i,r,e,u,s,h,o){var c=!1,f=!1;return null!=t&&this.Fn!==t&&(this.Fn=t,c=!0),null!=n&&this.u!==n&&(this.u=n,f=!0),null!=i&&this.h!==i&&(this.h=i,f=!0),null!=r&&this.Kr!==r&&(this.Kr=r,c=!0),null!=e&&this.wr!==e&&(this.wr=e,f=!0),null!=u&&this.Rt!==u&&(this.Rt=u,f=!0),null!=s&&this.an!==s&&(this.an=s,f=!0),null!=h&&this.ar!==h&&(this.ar=h,f=!0),null!=o&&this.Zt!==o&&(this.Zt=o,f=!0),c?this.gr.toDirty():f&&this.gr.updateUploaded(),this},t.prototype.toObject=function(){return{value:this.Fn,color:this.u,alpha:this.h,family:this.Kr,size:this.wr,weight:this.Rt,align:this.align.toObject(),offset:this.offset.toObject(),style:this.an,outline:this.outline.toObject(),direction:this.ar,spacing:this.spacing.toObject(),padding:this.padding.toObject(),clipping:this.Zt}},t.prototype.serialize=function(t){var n=this.align.serialize(t),i=this.offset.serialize(t),r=this.outline.serialize(t),e=this.spacing.serialize(t),u=this.padding.serialize(t),s="["+t.add(this.Fn)+","+this.u+","+this.h+","+t.add(this.Kr)+","+this.wr+","+this.Rt+","+n+","+i+","+this.an+","+r+","+e+","+this.ar+","+u+","+(this.Zt?1:0)+"]";return t.add(s)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.texts.get(t);null==r&&(r=JSON.parse(i[t]),n.texts.set(t,r)),this.set(i[r[0]]||"",r[1],r[2],i[r[3]]||"auto",r[4],r[5],r[8],r[11],0!==r[13]),this.align.deserialize(r[6],n),this.offset.deserialize(r[7],n),this.outline.deserialize(r[9],n),this.spacing.deserialize(r[10],n),this.padding.deserialize(r[12],n)}},t}(),Ir=function(n){function r(t){var i=n.call(this,t)||this;return i.size=i.newSize(),i.fill=i.newFill(),i.stroke=i.newStroke(),i.g=rr.RADIUS,i.Ct=qi.ALL,i.tag=new Tr,i.text=i.newText(),i.cursor=rr.CURSOR,i}return i(r,n),r.prototype.newSize=function(){var n=this;return new t.ObservablePoint((function(){n.onSizeChange()}),void 0,rr.SIZE_X,rr.SIZE_Y)},r.prototype.newFill=function(){return new ar(this,!0,rr.FILL_COLOR,rr.FILL_ALPHA)},r.prototype.newStroke=function(){return new lr(this,!0,rr.STROKE_COLOR,rr.STROKE_ALPHA,rr.STROKE_WIDTH,rr.STROKE_ALIGN,rr.STROKE_SIDE)},r.prototype.newText=function(){return new kr(this,rr.TEXT_VALUE,rr.STROKE_COLOR,rr.STROKE_ALPHA,rr.TEXT_FAMILY,rr.TEXT_SIZE)},Object.defineProperty(r.prototype,"corner",{get:function(){return this.Ct},set:function(t){this.Ct!==t&&(this.Ct=t,this.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this.g},set:function(t){this.g!==t&&(this.g=t,this.updateUploaded())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"image",{get:function(){return this.xn},set:function(t){if(this.xn!==t){null!=t?(this.xn=t,this.imageSrc=t.src):(this.xn=void 0,this.imageSrc=void 0);var n=this.parent;null!=n&&n.toDirty()}},enumerable:!0,configurable:!0}),r}(fr),Nr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n);return i[15]=this.points.serialize(n),i},n.prototype.getPixelScale=function(){var t=this.root.parent;return null!=t&&null!=t.getPixelScale?t.getPixelScale():1},n.prototype.getStrokeWidthScale=function(t){var n=t.style;return n&Yi.NON_EXPANDING_WIDTH?n&Yi.NON_SHRINKING_WIDTH?this.getPixelScale():Math.min(1,this.getPixelScale()):n&Yi.NON_SHRINKING_WIDTH?Math.max(1,this.getPixelScale()):1},n.prototype.getStrokeWidthScaled=function(t){var n=this.stroke;return n.enable?n.width*this.getStrokeWidthScale(t):0},n.prototype.containsAbs=function(t,i,r,e){var u=this.points,s=.5*this.getStrokeWidthScaled(u);if(this.containsAbsBBox(t,i,r+s,e+s)){var h=s*s,o=u.length;if(2<=o){for(var c=u.values,f=u.segments,a=0,l=o-1,v=0;a<l;a+=1,v+=2)if(zn(f,a+1)<0){var b=c[v+0],d=c[v+1],g=c[v+2],m=c[v+3];if(0<=n.calcHitPosition(t,i,b,d,g,m,h))return!0}if(2<o&&u.style&Yi.CLOSED&&zn(f,0)<0&&(b=c[0+(v=o-1<<1)],d=c[v+1],g=c[0],m=c[1],0<=n.calcHitPosition(t,i,b,d,g,m,h)))return!0}}return!1},n.calcHitPosition=function(t,n,i,r,e,u,s){var h=e-i,o=u-r,c=t-i,f=n-r,a=h*h+o*o,l=h*c+o*f,v=c*c+f*f;if(1e-4<a){var b=Math.max(0,Math.min(1,l/a));if(a*b*b-2*l*b+v<s)return b}return-1},n}(Ir),yr=function(t){function n(n,i,r,e){var u=t.call(this,ci.BAR)||this;return u.fill.enable=!1,u.stroke.set(!0,void 0,void 0,r),u.points=new $i(u,n,i,e),u}return i(n,t),n.prototype.clone=function(){var t=this.points;return new n(t.position,t.size,this.stroke.width,t.style).copy(this)},n.prototype.containsAbsBBox=function(n,i,r,e){var u=Math.max(0,this.points.size);return t.prototype.containsAbsBBox.call(this,n,i,r+u,e+u)},n}(Nr),xr=function(){function n(t,n,i,r,e){this.buffer=t,this.transformLocalId=-1,this.vertexOffset=n,this.vertexCount=r,this.indexOffset=i,this.indexCount=e,this.colorFill=NaN,this.alphaFill=-1,this.colorStroke=NaN,this.alphaStroke=-1,this.sizeX=NaN,this.sizeY=NaN,this.worldSizeXHalf=NaN,this.worldSizeYHalf=NaN,this.worldSizeZHalf=NaN,this.worldSizeWHalf=NaN,this.worldSizeR=NaN,this.strokeWidth=NaN,this.strokeAlign=NaN,this.strokeSide=NaN,this.radius=NaN,this.corner=NaN,this.texture=null,this.textureTransformId=NaN}return n.prototype.init=function(t){return t.uploaded=this,this},n.prototype.isCompatible=function(t){return!0},n.prototype.getBuffer=function(){return this.buffer},n.prototype.getVertexOffset=function(){return this.vertexOffset},n.prototype.getVertexCount=function(){return this.vertexCount},n.prototype.getIndexOffset=function(){return this.indexOffset},n.prototype.getIndexCount=function(){return this.indexCount},n.prototype.toTransformLocalId=function(t){return t.updateTransform(),t.transform.getLocalId()},n.prototype.toTexture=function(n){return n.texture||t.Texture.WHITE},n.prototype.toTextureTransformId=function(t){var n=t;return null==n._uvs&&t.updateUvs(),n._updateID},n.prototype.toTextureUvs=function(t){return t._uvs},n.prototype.fillColor=function(n,i,r,e,u){for(var s=t.utils.premultiplyTintToRgba(n,i,this.buffer.workColor),h=s[0],o=s[1],c=s[2],f=s[3],a=4*r,l=a+4*e;a<l;a+=4)u[a+0]=h,u[a+1]=o,u[a+2]=c,u[a+3]=f},n.prototype.updateColorFill=function(t,n,i){var r=n.fill,e=n.visible&&r.enable,u=r.color,s=e?r.alpha:0;u===this.colorFill&&s===this.alphaFill||(this.colorFill=u,this.alphaFill=s,t.colorFillBuffer.update(),this.fillColor(u,s,this.vertexOffset,i,t.colorFills))},n.prototype.updateColorStroke=function(t,n,i){var r=n.stroke,e=n.visible&&r.enable&&0<r.width,u=r.color,s=e?r.alpha:0;u===this.colorStroke&&s===this.alphaStroke||(this.colorStroke=u,this.alphaStroke=s,t.colorStrokeBuffer.update(),this.fillColor(u,s,this.vertexOffset,i,t.colorStrokes))},n.prototype.updateColorFillAndStroke=function(t,n,i){this.updateColorFill(t,n,i),this.updateColorStroke(t,n,i)},n.prototype.calcStep=function(t,n,i){var r=rr.ANTIALIAS_WEIGHT;if(1e-5<n){var e=t-n;if(1e-5<e){var u=r/e,s=r/Math.max(1e-5,t),h=1/Math.max(1e-5,1-n/t);i[0]=h,i[1]=u,i[2]=s}else u=r/1e-5,s=r/Math.max(1e-5,t),h=1/1e-5,i[0]=h,i[1]=u,i[2]=s}else{var o=r/Math.max(1e-5,t);i[0]=1,i[1]=o,i[2]=o}return i},n.prototype.updateStep=function(t,n,i,r,e,u,s,h,o){for(var c=t.steps,f=t.antialiases,a=t.clippings,l=2*n,v=l+2*i,b=l,d=3*n,g=4*n;b<v;b+=2,d+=3,g+=4){var m=a[d+0],p=a[d+1];c[b+0]=r*m,c[b+1]=e*p,f[g+0]=u,f[g+1]=s,f[g+2]=h,f[g+3]=o}},n.prototype.updateStepIf=function(t,n,i,r,e,u,s,h,o,c,f,a){for(var l=t.steps,v=t.antialiases,b=t.clippings,d=2*n,g=d+2*i,m=d,p=3*n,w=4*n;m<g;m+=2,p+=3,w+=4){var D=b[p+0],T=b[p+1];.5<b[p+2]?(l[m+0]=r*D,l[m+1]=r*T,v[w+0]=e,v[w+1]=e,v[w+2]=u,v[w+3]=u):(l[m+0]=s*D,l[m+1]=h*T,v[w+0]=o,v[w+1]=c,v[w+2]=f,v[w+3]=a)}},n.prototype.calcLength=function(t,n,i,r){var e=i-t,u=r-n;return Math.sqrt(e*e+u*u)},n.prototype.buildUnit=function(n){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;if(r!==n.baseTexture){n.baseTexture=r;var e=this.indexOffset;n.push(i,e)}},n}(),Cr=function(){function t(){}return t.getTextCount=function(t,n){var i=t.text.value.length,r=12*Math.ceil(i/12);return n.vertexCount=r<<2,n.indexCount=r<<1,n},t}(),jr=function(n){function r(t,i,r,e,u,s,h){var o=n.call(this,t,i,r,s,h)||this;return o.textSize=NaN,o.textFamily="auto",o.textValue="",o.textTexture=null,o.textTextureTransformId=NaN,o.textColor=NaN,o.textAlpha=NaN,o.textWeight=NaN,o.textStyle=NaN,o.textAlignHorizontal=NaN,o.textAlignVertical=NaN,o.textOffsetHorizontal=NaN,o.textOffsetVertical=NaN,o.textOutlineWidth=NaN,o.textOutlineColor=NaN,o.textOutlineAlpha=NaN,o.textSpacingHorizontal=NaN,o.textSpacingVertical=NaN,o.textDirection=NaN,o.textPaddingHorizontal=NaN,o.textPaddingVertical=NaN,o.textClipping=!1,o.textVertexCount=e,o.textIndexCount=u,o}return i(r,n),r.prototype.isCompatible=function(t){return!!n.prototype.isCompatible.call(this,t)&&Cr.getTextCount(t,this.buffer.workCount).vertexCount===this.textVertexCount},r.prototype.updateColor=function(t,n){var i=this.vertexCount-this.textVertexCount;this.updateColorFillAndStroke(t,n,i)},r.prototype.getTextBBox=function(t,n,i,r,e,u,s,h,o,c,f,a,l,v,b,d,g,m,p,w,D){switch(t){case dr.LEFT:switch(n){case gr.TOP:D.x=o+g*(i+e)+p*(r+u),D.y=c+m*(i+e)+w*(r+u);break;case gr.MIDDLE:D.x=.5*(o+b)+g*(i+e)+p*(r-.5*h),D.y=.5*(c+d)+m*(i+e)+w*(r-.5*h);break;case gr.BOTTOM:D.x=b+g*(i+e)+p*(r-u-h),D.y=d+m*(i+e)+w*(r-u-h);break;case gr.OUTSIDE_TOP:D.x=o+g*(i+e)+p*(r-u-h),D.y=c+m*(i+e)+w*(r-u-h);break;case gr.OUTSIDE_BOTTOM:D.x=b+g*(i+e)+p*(r+u),D.y=d+m*(i+e)+w*(r+u)}break;case dr.CENTER:switch(n){case gr.TOP:D.x=.5*(o+f)+g*(i-.5*s)+p*(r+u),D.y=.5*(c+a)+m*(i-.5*s)+w*(r+u);break;case gr.MIDDLE:D.x=.5*(o+l)+g*(i-.5*s)+p*(r-.5*h),D.y=.5*(c+v)+m*(i-.5*s)+w*(r-.5*h);break;case gr.BOTTOM:D.x=.5*(b+l)+g*(i-.5*s)+p*(r-u-h),D.y=.5*(d+v)+m*(i-.5*s)+w*(r-u-h);break;case gr.OUTSIDE_TOP:D.x=.5*(o+f)+g*(i-.5*s)+p*(r-u-h),D.y=.5*(c+a)+m*(i-.5*s)+w*(r-u-h);break;case gr.OUTSIDE_BOTTOM:D.x=.5*(b+l)+g*(i-.5*s)+p*(r+u),D.y=.5*(d+v)+m*(i-.5*s)+w*(r+u)}break;case dr.RIGHT:switch(n){case gr.TOP:D.x=f+g*(i-e-s)+p*(r+u),D.y=a+m*(i-e-s)+w*(r+u);break;case gr.MIDDLE:D.x=.5*(f+l)+g*(i-e-s)+p*(r-.5*h),D.y=.5*(a+v)+m*(i-e-s)+w*(r-.5*h);break;case gr.BOTTOM:D.x=l+g*(i-e-s)+p*(r-u-h),D.y=v+m*(i-e-s)+w*(r-u-h);break;case gr.OUTSIDE_TOP:D.x=f+g*(i-e-s)+p*(r-u-h),D.y=a+m*(i-e-s)+w*(r-u-h);break;case gr.OUTSIDE_BOTTOM:D.x=l+g*(i-e-s)+p*(r+u),D.y=v+m*(i-e-s)+w*(r+u)}break;case dr.OUTSIDE_LEFT:switch(n){case gr.TOP:D.x=o+g*(i-e-s)+p*(r+u),D.y=c+m*(i-e-s)+w*(r+u);break;case gr.MIDDLE:D.x=.5*(o+b)+g*(i-e-s)+p*(r-.5*h),D.y=.5*(c+d)+m*(i-e-s)+w*(r-.5*h);break;case gr.BOTTOM:D.x=b+g*(i-e-s)+p*(r-u-h),D.y=d+m*(i-e-s)+w*(r-u-h);break;case gr.OUTSIDE_TOP:D.x=o+g*(i-e-s)+p*(r-u-h),D.y=c+m*(i-e-s)+w*(r-u-h);break;case gr.OUTSIDE_BOTTOM:D.x=b+g*(i-e-s)+p*(r+u),D.y=d+m*(i-e-s)+w*(r+u)}break;case dr.OUTSIDE_RIGHT:switch(n){case gr.TOP:D.x=f+g*(i+e)+p*(r+u),D.y=a+m*(i+e)+w*(r+u);break;case gr.MIDDLE:D.x=.5*(f+l)+g*(i+e)+p*(r-.5*h),D.y=.5*(a+v)+m*(i+e)+w*(r-.5*h);break;case gr.BOTTOM:D.x=l+g*(i+e)+p*(r-u-h),D.y=v+m*(i+e)+w*(r-u-h);break;case gr.OUTSIDE_TOP:D.x=f+g*(i+e)+p*(r-u-h),D.y=a+m*(i+e)+w*(r-u-h);break;case gr.OUTSIDE_BOTTOM:D.x=l+g*(i+e)+p*(r+u),D.y=v+m*(i+e)+w*(r+u)}}},r.prototype.normalize=function(t,n,i,r,e){var u=t*t+n*n;if(1e-5<u){var s=Math.sqrt(u),h=1/s;return e.set(t*h,n*h),s}return e.set(i,r),0},r.prototype.rotateAlignHorizontalRight=function(t){switch(t){case dr.LEFT:return gr.BOTTOM;case dr.CENTER:return gr.MIDDLE;case dr.RIGHT:return gr.TOP;case dr.OUTSIDE_LEFT:return gr.OUTSIDE_BOTTOM;case dr.OUTSIDE_RIGHT:return gr.OUTSIDE_TOP}},r.prototype.rotateAlignVerticalRight=function(t){switch(t){case gr.TOP:return dr.LEFT;case gr.MIDDLE:return dr.CENTER;case gr.BOTTOM:return dr.RIGHT;case gr.OUTSIDE_TOP:return dr.OUTSIDE_LEFT;case gr.OUTSIDE_BOTTOM:return dr.OUTSIDE_RIGHT}},r.prototype.rotateAlignHorizontalLeft=function(t){switch(t){case dr.LEFT:return gr.TOP;case dr.CENTER:return gr.MIDDLE;case dr.RIGHT:return gr.BOTTOM;case dr.OUTSIDE_LEFT:return gr.OUTSIDE_TOP;case dr.OUTSIDE_RIGHT:return gr.OUTSIDE_BOTTOM}},r.prototype.rotateAlignVerticalLeft=function(t){switch(t){case gr.TOP:return dr.RIGHT;case gr.MIDDLE:return dr.CENTER;case gr.BOTTOM:return dr.LEFT;case gr.OUTSIDE_TOP:return dr.OUTSIDE_RIGHT;case gr.OUTSIDE_BOTTOM:return dr.OUTSIDE_LEFT}},r.prototype.updateTextVertex=function(n,i,r){var e=i.text,u=e.size,s=e.family,h=e.value,o=e.style,c=e.align.horizontal,f=e.align.vertical,a=e.offset.horizontal,l=e.offset.vertical,v=e.spacing.horizontal,b=e.spacing.vertical,d=e.direction,g=e.padding.horizontal,m=e.padding.vertical,p=e.clipping,w=e.texture||t.Texture.WHITE,D=this.toTextureTransformId(w),T=h!==this.textValue||s!==this.textFamily,O=u!==this.textSize,S=o!==this.textStyle,M=c!==this.textAlignHorizontal||f!==this.textAlignVertical,E=a!==this.textOffsetHorizontal||l!==this.textOffsetVertical,k=v!==this.textSpacingHorizontal||b!==this.textSpacingVertical||g!==this.textPaddingHorizontal||m!==this.textPaddingVertical,I=d!==this.textDirection,N=this.textClipping!==p,y=w!==this.textTexture||D!==this.textTextureTransformId;if(T||O||S||M||E||k||I||N||y){this.textSize=u,this.textFamily=s,this.textValue=h,this.textStyle=o,this.textAlignHorizontal=c,this.textAlignVertical=f,this.textOffsetHorizontal=a,this.textOffsetVertical=l,this.textSpacingHorizontal=v,this.textSpacingVertical=b,this.textDirection=d,this.textPaddingHorizontal=g,this.textPaddingVertical=m,this.textClipping=p,this.textTexture=w,this.textTextureTransformId=D,O&&(this.textWeight=NaN);var x=i.size,C=.5*x.x,j=.5*x.y;i.updateTransform();var A=i.transform.internalTransform,B=n.work;B.set(-C,-j),A.apply(B,B);var R=B.x,L=B.y;B.set(+C,-j),A.apply(B,B);var W=B.x,_=B.y;B.set(+C,+j),A.apply(B,B);var F=B.x,P=B.y,U=R+(F-W),z=L+(P-_),G=this.calcLength(R,L,W,_);this.normalize(A.a,A.b,1,0,B);var H=B.x,V=B.y,X=this.calcLength(R,L,U,z);this.normalize(A.c,A.d,0,1,B);for(var Y=B.x,K=B.y,J=0,Z=0,q=0,Q=Math.max(0,u+b),$=0,tt=r.characters,nt=0,it=h.length;nt<it;++nt)"\n"!==(Gt=h[nt])?null!=(Ht=tt[Gt])&&($+=this.toAdvance(nt,it,h,Ht.advance,v),q=Ht.height):(J=Math.max(J,$),$=0,Z+=Q);var rt=u/r.font.size;J=Math.max(J,$)*rt,q*=rt,Z+=u;var et=0,ut=0,st=NaN;switch(d){case mr.LEFT_TO_RIGHT:if(this.getTextBBox(c,f,a,l,g,m,J,Z,R,L,W,_,F,P,U,z,H,V,Y,K,B),et=B.x,ut=B.y,p)switch(c){case dr.LEFT:case dr.CENTER:case dr.RIGHT:switch(f){case gr.TOP:case gr.MIDDLE:case gr.BOTTOM:st=G-2*g}}break;case mr.TOP_TO_BOTTOM:if(B.set(Y,K),Y=-H,K=-V,H=B.x,V=B.y,this.getTextBBox(this.rotateAlignVerticalRight(f),this.rotateAlignHorizontalRight(c),l,a,m,g,J,Z,W,_,F,P,U,z,R,L,H,V,Y,K,B),et=B.x,ut=B.y,p)switch(f){case gr.TOP:case gr.MIDDLE:case gr.BOTTOM:switch(c){case dr.LEFT:case dr.CENTER:case dr.RIGHT:st=X-2*m}}break;case mr.BOTTOM_TO_TOP:if(B.set(Y,K),Y=H,K=V,H=-B.x,V=-B.y,this.getTextBBox(this.rotateAlignVerticalLeft(f),this.rotateAlignHorizontalLeft(c),l,a,m,g,J,Z,U,z,R,L,W,_,F,P,H,V,Y,K,B),et=B.x,ut=B.y,p)switch(f){case gr.TOP:case gr.MIDDLE:case gr.BOTTOM:switch(c){case dr.LEFT:case dr.CENTER:case dr.RIGHT:st=X-2*m}}}var ht=e.world=e.world||new Float32Array(8);if(st<J){var ot=.5*(J-st);ht[0]=et+H*ot,ht[1]=ut+V*ot,ht[2]=H,ht[3]=V,ht[4]=Y,ht[5]=K,ht[6]=st,ht[7]=Z}else ht[0]=et,ht[1]=ut,ht[2]=H,ht[3]=V,ht[4]=Y,ht[5]=K,ht[6]=J,ht[7]=Z;var ct=this.toTextureUvs(w),ft=ct.x0,at=ct.x1,lt=ct.x3,vt=ct.y0,bt=ct.y1,dt=ct.y3,gt=at-ft,mt=bt-vt,pt=lt-ft,wt=dt-vt,Dt=this.textVertexCount,Tt=this.vertexOffset+this.vertexCount-Dt,Ot=n.vertices,St=n.uvs;n.vertexBuffer.update(),n.uvBuffer.update();var Mt=Q*Y,Et=Q*K,kt=rt*H,It=rt*V,Nt=.5*(q-u),yt=Nt*Y,xt=Nt*K,Ct=o===br.NORMAL?0:.25*e.size,jt=et-yt+Ct*kt,At=ut-xt+Ct*It,Bt=et+yt+u*Y,Rt=ut+xt+u*K,Lt=jt,Wt=At,_t=Bt,Ft=Rt;$=0;for(var Pt=0,Ut=h.length,zt=(nt=0,2*Tt);nt<Ut;nt+=1,zt+=8){var Gt,Ht;if("\n"!==(Gt=h[nt]))if(Pt+=1,null!=(Ht=tt[Gt])){var Vt=this.toAdvance(nt,Ut,h,Ht.advance,v);if(st<($+=Vt*rt)){var Xt=tt["..."];if(null!=Xt){this.writeCharacter(Ot,St,zt,Xt,r,kt,It,Lt,Wt,_t,Ft,gt,mt,pt,wt,ft,vt);var Yt=this.toAdvance(nt,Ut,h,Xt.advance,v);for($+=(Yt-Vt)*rt,Lt+=Kt=Yt*kt,Wt+=Jt=Yt*It,_t+=Kt,Ft+=Jt,nt+=1,zt+=8;nt<Ut;nt+=1,zt+=8){if("\n"===h[nt]){nt-=1,zt-=8;break}this.writeCharacterEmpty(Ot,St,zt,Lt,Wt,_t,Ft,ft,vt,lt,dt),Pt+=1}}else this.writeCharacterEmpty(Ot,St,zt,Lt,Wt,_t,Ft,ft,vt,lt,dt)}else{var Kt,Jt;this.writeCharacter(Ot,St,zt,Ht,r,kt,It,Lt,Wt,_t,Ft,gt,mt,pt,wt,ft,vt),Lt+=Kt=Vt*kt,Wt+=Jt=Vt*It,_t+=Kt,Ft+=Jt}}else this.writeCharacterEmpty(Ot,St,zt,Lt,Wt,_t,Ft,ft,vt,lt,dt);else this.writeCharacterEmpty(Ot,St,zt,Lt,Wt,_t,Ft,ft,vt,lt,dt),Lt=jt+=Mt,Wt=At+=Et,_t=Bt+=Mt,Ft=Rt+=Et,this.adjustTextAlignment(Ot,H,V,Pt,zt,J-$,d,c,f),$=0,Pt=0}for(this.adjustTextAlignment(Ot,H,V,Pt,2*Tt+8*Ut,J-$,d,c,f),nt=2*Tt+8*h.length,it=2*(Tt+Dt);nt<it;nt+=2)Ot[nt+0]=et,Ot[nt+1]=ut,St[nt+0]=ft,St[nt+1]=vt}},r.prototype.toAdvance=function(t,n,i,r,e){return t+1<n&&"\n"!==i[t+1]?Math.max(0,r+e):r},r.prototype.writeCharacterEmpty=function(t,n,i,r,e,u,s,h,o,c,f){t[i+0]=r,t[i+1]=e,t[i+2]=r,t[i+3]=e,t[i+4]=u,t[i+5]=s,t[i+6]=u,t[i+7]=s,n[i+0]=h,n[i+1]=o,n[i+2]=h,n[i+3]=o,n[i+4]=c,n[i+5]=f,n[i+6]=c,n[i+7]=f},r.prototype.writeCharacter=function(t,n,i,r,e,u,s,h,o,c,f,a,l,v,b,d,g){var m=r.x-r.origin.x,p=r.width,w=m*u,D=m*s,T=(m+p)*u,O=(m+p)*s;t[i+0]=h+w,t[i+1]=o+D,t[i+2]=h+T,t[i+3]=o+O,t[i+4]=c+T,t[i+5]=f+O,t[i+6]=c+w,t[i+7]=f+D;var S=r.x/e.width,M=r.y/e.height,E=(r.x+r.width)/e.width,k=(r.y+r.height)/e.height,I=a*S,N=l*S,y=a*E,x=l*E,C=v*M,j=b*M,A=v*k,B=b*k;n[i+0]=d+I+C,n[i+1]=g+N+j,n[i+2]=d+y+C,n[i+3]=g+x+j,n[i+4]=d+y+A,n[i+5]=g+x+B,n[i+6]=d+I+A,n[i+7]=g+N+B},r.prototype.moveText=function(t,n,i,r,e){for(var u=0,s=n-8*i;u<i;u+=1,s+=8)t[s+0]+=r,t[s+1]+=e,t[s+2]+=r,t[s+3]+=e,t[s+4]+=r,t[s+5]+=e,t[s+6]+=r,t[s+7]+=e},r.prototype.moveTextHalf=function(t,n,i,r,e,u){r*=.5,this.moveText(t,n,i,r*e,r*u)},r.prototype.moveTextFull=function(t,n,i,r,e,u){this.moveText(t,n,i,r*e,r*u)},r.prototype.adjustTextAlignment=function(t,n,i,r,e,u,s,h,o){if(1e-5<u)switch(s){case mr.LEFT_TO_RIGHT:switch(h){case dr.OUTSIDE_RIGHT:case dr.LEFT:break;case dr.CENTER:this.moveTextHalf(t,e,r,u,n,i);break;case dr.OUTSIDE_LEFT:case dr.RIGHT:this.moveTextFull(t,e,r,u,n,i)}break;case mr.TOP_TO_BOTTOM:switch(o){case gr.OUTSIDE_BOTTOM:case gr.TOP:break;case gr.MIDDLE:this.moveTextHalf(t,e,r,u,n,i);break;case gr.OUTSIDE_TOP:case gr.BOTTOM:this.moveTextFull(t,e,r,u,n,i)}break;case mr.BOTTOM_TO_TOP:switch(o){case gr.OUTSIDE_BOTTOM:case gr.TOP:this.moveTextFull(t,e,r,u,n,i);break;case gr.MIDDLE:this.moveTextHalf(t,e,r,u,n,i);break;case gr.OUTSIDE_TOP:case gr.BOTTOM:}}},r.prototype.updateTextColorFill=function(t,n){var i=n.text,r=i.color,e=n.visible&&i.enable?i.alpha:0;r===this.textColor&&e===this.textAlpha||(this.textColor=r,this.textAlpha=e,t.colorFillBuffer.update(),this.fillColor(r,e,this.vertexOffset+this.vertexCount-this.textVertexCount,this.textVertexCount,t.colorFills))},r.prototype.updateTextColorStroke=function(t,n){var i=n.text,r=i.outline,e=r.color,u=n.visible&&i.enable?r.alpha:0;e===this.textOutlineColor&&u===this.textOutlineAlpha||(this.textOutlineColor=e,this.textOutlineAlpha=u,t.colorStrokeBuffer.update(),this.fillColor(e,u,this.vertexOffset+this.vertexCount-this.textVertexCount,this.textVertexCount,t.colorStrokes))},r.prototype.updateTextStep=function(t,n){var i=n.text,r=i.outline,e=r.enable?r.width:0,u=i.weight;if(u!==this.textWeight||e!==this.textOutlineWidth){this.textWeight=u,this.textOutlineWidth=e,t.stepBuffer.update(),t.antialiasBuffer.update();var s=t.steps,h=t.antialiases,o=this.textVertexCount,c=this.vertexOffset+this.vertexCount-o,f=i.atlas;if(null!=f){for(var a=.05/(i.size/f.font.size),l=.4*e,v=(u===vr.NORMAL?0:.05)-.025,b=(d=2*c)+2*o;d<b;d+=2)s[d+0]=a,s[d+1]=l;for(b=(d=4*c)+4*o;d<b;d+=4)h[d+0]=v,h[d+1]=1e-5,h[d+2]=1e-5,h[d+3]=1e-5}else{for(b=(d=2*c)+2*o;d<b;d+=2)s[d+0]=0,s[d+1]=0;var d;for(b=(d=4*c)+4*o;d<b;d+=4)h[d+0]=1e-5,h[d+1]=1e-5,h[d+2]=1e-5,h[d+3]=1e-5}}},r.prototype.updateText=function(t,n){if(0<this.textVertexCount){var i=n.text.atlas;null!=i&&(this.updateTextVertex(t,n,i),this.updateTextColorFill(t,n),this.updateTextColorStroke(t,n),this.updateTextStep(t,n))}},r.prototype.initText=function(){var t=this.textVertexCount;if(0<t){var n=this.textIndexCount,i=this.vertexOffset+this.vertexCount-t,r=this.indexOffset+this.indexCount-n,e=this.buffer;e.clippingBuffer.update();for(var u=e.clippings,s=(o=3*i)+3*t;o<s;o+=3)u[o+0]=0,u[o+1]=0,u[o+2]=2;e.indexBuffer.update();var h=e.indices,o=0,c=3*r;for(s=n>>1;o<s;o+=1,c+=6){var f=i+(o<<2);h[c+0]=f+0,h[c+1]=f+1,h[c+2]=f+3,h[c+3]=f+1,h[c+4]=f+2,h[c+5]=f+3}}},r.prototype.buildUnit=function(i){if(n.prototype.buildUnit.call(this,i),0<this.textVertexCount){var r=this.textTexture||t.Texture.WHITE,e=r.baseTexture;if(e!==i.baseTexture){i.baseTexture=e;var u=this.indexOffset+this.indexCount-this.textIndexCount;i.push(r,u)}}},r}(xr),Ar=function(t){function n(n,i,r,e,u,s,h){var o=t.call(this,n,i,r,e,u,s,h)||this;return o.pointsId=NaN,o.pointsStyle=Yi.NONE,o}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.buffer,r=this.vertexOffset,e=this.indexOffset;i.clippingBuffer.update();var u=i.clippings;i.indexBuffer.update();var s=i.indices,h=3*r;u[h+0]=1,u[h+1]=0,u[h+2]=3,u[h+3]=0,u[h+4]=1,u[h+5]=5,u[h+6]=1,u[h+7]=0,u[h+8]=3,u[h+9]=0,u[h+10]=1,u[h+11]=5;var o=3*e;return s[o+0]=r+0,s[o+1]=r+2,s[o+2]=r+1,s[o+3]=r+1,s[o+4]=r+2,s[o+5]=r+3,this.initText(),this.update(n),this},n.prototype.update=function(t){var n=this.buffer;if(t instanceof yr){var i=t.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=t.stroke,h=s.enable?s.width:0,o=h!==this.strokeWidth,c=this.toTransformLocalId(t),f=this.transformLocalId!==c,a=t.points.id,l=a!==this.pointsId,v=t.points.style,b=v!==this.pointsStyle;if(u||f||o||l||b){this.sizeX=r,this.sizeY=e,this.strokeWidth=h,this.transformLocalId=c,this.pointsId=a,this.pointsStyle=v,n.vertexBuffer.update(),n.stepBuffer.update(),n.antialiasBuffer.update(),n.colorFillBuffer.update(),(u||f)&&(this.textSpacingHorizontal=NaN),l&&(this.textureTransformId=NaN);var d=this.vertexOffset,g=this.vertexCount-this.textVertexCount;this.updateLineVertexStepAndColorFill(n,t.points,h,t.transform.internalTransform,d,g)}}this.updateColor(n,t),this.updateBarUv(n,t),this.updateText(n,t)},n.prototype.updateColorFillAndStroke=function(t,n,i){this.updateColorStroke(t,n,i)},n.prototype.updateLineVertexStepAndColorFill=function(t,n,i,r,e,u){var s=2*e,h=4*e,o=t.vertices,c=t.steps,f=t.antialiases,a=t.colorFills,l=n.length,v=n.values,b=n.style,d=n.size,g=Zi.toScaleInvariant(b),m=t.work;m.set(v[0],v[1]),r.apply(m,m);var p=m.x,w=m.y,D=l-1<<1;m.set(v[D+0],v[D+1]),r.apply(m,m);var T=m.x,O=m.y,S=T-p,M=O-w,E=Math.sqrt(S*S+M*M),k=E;if(0<=d&&1e-5<E){var I=d/E;T=p+(S*=I),O=w+(M*=I),k=d}var N=p-S,y=w-M,x=T+S,C=O+M;o[s+0]=p,o[s+1]=w,o[s+2]=p,o[s+3]=w,c[s+0]=i,c[s+1]=g,c[s+2]=i,c[s+3]=g,f[h+0]=N,f[h+1]=y,f[h+2]=T,f[h+3]=O,f[h+4]=N,f[h+5]=y,f[h+6]=T,f[h+7]=O,a[h+0]=0,a[h+4]=0,o[s+4]=T,o[s+5]=O,o[s+6]=T,o[s+7]=O,c[s+4]=i,c[s+5]=g,c[s+6]=i,c[s+7]=g,f[h+8]=p,f[h+9]=w,f[h+10]=x,f[h+11]=C,f[h+12]=p,f[h+13]=w,f[h+14]=x,f[h+15]=C,a[h+8]=k,a[h+12]=k,Zi.toDash(k,i,b,m);for(var j=m.x,A=m.y,B=4*e,R=B+4*u;B<R;B+=4)a[B+1]=j,a[B+2]=A,a[B+3]=k},n.prototype.updateBarUv=function(t,n){var i=this.toTexture(n),r=this.toTextureTransformId(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r;var e=this.toTextureUvs(i);t.uvBuffer.update();var u=t.uvs,s=2*this.vertexOffset;u[s+0]=e.x0,u[s+1]=e.y0,u[s+2]=e.x3,u[s+3]=e.y3,u[s+4]=e.x1,u[s+5]=e.y1,u[s+6]=e.x2,u[s+7]=e.y2}},n}(jr),Br=function(){function t(){}return t.create=function(t,n,i,r){var e=Cr.getTextCount(n,t.workCount),u=e.vertexCount,s=e.indexCount,h=4+u,o=2+s;return i+h<t.vertexCapacity&&r+o<t.indexCapacity?new Ar(t,i,r,u,s,h,o).init(n):null},t}(),Rr=function(){function t(){}return t.toBaseFill=function(t,n){return(n.written&nr.COLOR_FILL?t:n).fill},t.toBaseStroke=function(t,n){return(n.written&nr.COLOR_STROKE?t:n).stroke},t.toBaseText=function(t,n){return(n.written&nr.COLOR_TEXT?t:n).text},t.toBaseTextOutline=function(t,n){return(n.written&nr.COLOR_TEXT_OUTLINE?t:n).text.outline},t}(),Lr=function(){function t(t){this.reset=t||nr.NONE}return t.prototype.toExpression=function(t,n,i){if(t.trim().length<=0)return n;try{return Function("shape","time","try{ with( shape ) { return ("+t+"); } } catch( e ) { return "+i+"; }")}catch(t){return n}},t.prototype.emit=function(t,n,i,r){void 0===i?n.emit(t,n):void 0===r?n.emit(t,n,i):n.emit(t,n,i,r);var u=e.getInstance();"shape"in u&&(void 0===i?u.shape.emit(t,n):void 0===r?u.shape.emit(t,n,i):u.shape.emit(t,n,i,r))},t.prototype.execute=function(t,n,i){},t}(),Wr=function(){return!0},_r=function(t){function n(n,i){var r=t.call(this,i)||this;return r.condition=r.toExpression(n.condition,Wr,"true"),r}return i(n,t),n}(Lr),Fr=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.interval=n.interval,r}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.interval,e=r<<1,u=i%e;u<r?(this.toOff(t,n),n.effect=i+(r-u)):(this.toOn(t,n),n.effect=i+(e-u))}},n.prototype.toOn=function(t,n){},n.prototype.toOff=function(t,n){},n}(_r),Pr=function(t){function n(n){return t.call(this,n,nr.COLOR)||this}return i(n,t),n.prototype.toOn=function(t,n){var i=Rr.toBaseFill(t,n);t.fill.set(void 0,Xn.brighten(i.color,.5),i.alpha);var r=Rr.toBaseStroke(t,n);t.stroke.set(void 0,Xn.brighten(r.color,.5),r.alpha);var e=Rr.toBaseText(t,n);t.text.set(void 0,Xn.brighten(e.color,.5),e.alpha);var u=Rr.toBaseTextOutline(t,n);t.text.outline.set(void 0,Xn.brighten(u.color,.5),u.alpha),n.written|=this.reset},n}(Fr),Ur=function(t){function n(n){var i=t.call(this,n,nr.COLOR_FILL)||this;return i.color=n.color,i.alpha=n.alpha,i}return i(n,t),n.prototype.toOn=function(t,n){t.fill.set(void 0,this.color,this.alpha),n.written|=this.reset},n}(Fr),zr=function(t){function n(n){var i=t.call(this,n,nr.COLOR_STROKE)||this;return i.color=n.color,i.alpha=n.alpha,i}return i(n,t),n.prototype.toOn=function(t,n){t.stroke.set(void 0,this.color,this.alpha),n.written|=this.reset},n}(Fr),Gr=function(t){function n(n){return t.call(this,n,nr.COLOR)||this}return i(n,t),n.prototype.toOn=function(t,n){var i=Rr.toBaseFill(t,n);t.fill.set(void 0,Xn.darken(i.color,.5),i.alpha);var r=Rr.toBaseStroke(t,n);t.stroke.set(void 0,Xn.darken(r.color,.5),r.alpha);var e=Rr.toBaseText(t,n);t.text.set(void 0,Xn.darken(e.color,.5),e.alpha);var u=Rr.toBaseTextOutline(t,n);t.text.outline.set(void 0,Xn.darken(u.color,.5),u.alpha),n.written|=this.reset},n}(Fr),Hr=function(t){function n(n){return t.call(this,n,nr.COLOR_FILL_AND_STROKE)||this}return i(n,t),n.prototype.toOn=function(t,n){var i=Rr.toBaseFill(t,n);t.fill.set(void 0,i.color,.5*i.alpha);var r=Rr.toBaseStroke(t,n);t.stroke.set(void 0,r.color,.5*r.alpha),n.written|=this.reset},n}(Fr),Vr=function(t){function n(n){return t.call(this,n,nr.VISIBILITY)||this}return i(n,t),n.prototype.toOn=function(t,n){t.visible=!0,n.written|=this.reset},n.prototype.toOff=function(t,n){t.visible=!1,n.written|=this.reset},n}(Fr);!function(t){t[t.VISIBILITY=0]="VISIBILITY",t[t.BRIGHTEN=1]="BRIGHTEN",t[t.DARKEN=2]="DARKEN",t[t.OPACITY=3]="OPACITY",t[t.COLOR_FILL=4]="COLOR_FILL",t[t.COLOR_STROKE=5]="COLOR_STROKE"}(Or||(Or={}));var Xr,Yr=function(){function t(t,n){this.type=t,this.condition=n}return t.prototype.isEquals=function(t){return this.type===t.type&&this.condition===t.condition},t.prototype.toLabel=function(){return K.getInstance().get("EShapeActionValue").toLabel(this)},t}(),Kr=function(t){function n(n,i,r){var e=t.call(this,n,i)||this;return e.subtype=r,e}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.subtype===i.subtype},n}(Yr);!function(t){t[t.SHOW_HIDE=0]="SHOW_HIDE",t[t.BLINK=1]="BLINK",t[t.TRANSFORM=2]="TRANSFORM",t[t.OPEN=3]="OPEN",t[t.EMIT_EVENT=4]="EMIT_EVENT",t[t.CHANGE_COLOR=5]="CHANGE_COLOR",t[t.CHANGE_TEXT=6]="CHANGE_TEXT",t[t.CHANGE_CURSOR=7]="CHANGE_CURSOR",t[t.MISC=8]="MISC"}(Xr||(Xr={}));var Jr,Zr,qr=function(){function t(){}return t.toResource=function(t,n,i){if(0<=t&&t<n.length){var r=n[t];if(a(r)&&0<=r&&r<i.length)return i[r]}return""},t}(),Qr=function(t){function n(n,i,r,e,u){var s=t.call(this,Xr.BLINK,i,n)||this;return s.interval=r,s.color=e,s.alpha=u,s}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.interval===i.interval&&this.color===i.color&&this.alpha===i.alpha},n.prototype.toRuntime=function(){switch(this.subtype){case Or.BRIGHTEN:return new Pr(this);case Or.COLOR_FILL:return new Ur(this);case Or.COLOR_STROKE:return new zr(this);case Or.DARKEN:return new Gr(this);case Or.OPACITY:return new Hr(this);case Or.VISIBILITY:return new Vr(this)}},n.prototype.serialize=function(t){var n=t.add(this.condition);return t.add("["+this.type+","+n+","+this.subtype+","+this.interval+","+this.color+","+this.alpha+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources);return new n(t[2],r,t[3],t[4],t[5])},n}(Kr);!function(t){t[t.FILL=0]="FILL",t[t.STROKE=1]="STROKE",t[t.FILL_AND_STROKE=2]="FILL_AND_STROKE",t[t.TEXT=3]="TEXT",t[t.TEXT_OUTLINE=4]="TEXT_OUTLINE",t[t.ALL=5]="ALL"}(Jr||(Jr={})),function(t){t[t.COLOR_AND_ALPHA=0]="COLOR_AND_ALPHA",t[t.COLOR=1]="COLOR",t[t.ALPHA=2]="ALPHA",t[t.CODE=3]="CODE",t[t.BRIGHTNESS=4]="BRIGHTNESS"}(Zr||(Zr={}));var $r,te=function(){return null},ne=function(t){function n(n,i){var r=t.call(this,n,i)||this;switch(n.target){case Zr.COLOR:r.color=n.color,r.alpha=void 0;break;case Zr.ALPHA:r.color=void 0,r.alpha=n.alpha;break;default:r.color=n.color,r.alpha=n.alpha}return r.blend=r.toExpression(n.blend,te,"null"),r}return i(n,t),n.prototype.set=function(t,n,i,r,e){var u=this.color,s=this.alpha;if(null!=u)null!=s?null!=(h=this.blend(t,i))?r.set(void 0,Xn.blend(e.color,u,h),dn.blend(e.alpha,s,h)):r.set(void 0,u,s):null!=(h=this.blend(t,i))?r.set(void 0,Xn.blend(e.color,u,h),e.alpha):r.set(void 0,u,e.alpha),n.written|=this.reset;else if(null!=s){var h;null!=(h=this.blend(t,i))?r.set(void 0,e.color,dn.blend(e.alpha,s,h)):r.set(void 0,e.color,s),n.written|=this.reset}},n.prototype.sets=function(t,n,i,r,e,u,s){var h=this.color,o=this.alpha;if(null!=h)null!=o?null!=(c=this.blend(t,i))?(r.set(void 0,Xn.blend(u.color,h,c),dn.blend(u.alpha,o,c)),e.set(void 0,Xn.blend(s.color,h,c),dn.blend(s.alpha,o,c))):(r.set(void 0,h,o),e.set(void 0,h,o)):null!=(c=this.blend(t,i))?(r.set(void 0,Xn.blend(u.color,h,c),u.alpha),e.set(void 0,Xn.blend(s.color,h,c),s.alpha)):(r.set(void 0,h,u.alpha),e.set(void 0,h,s.alpha)),n.written|=this.reset;else if(null!=o){var c;null!=(c=this.blend(t,i))?(r.set(void 0,u.color,dn.blend(u.alpha,o,c)),e.set(void 0,s.color,dn.blend(s.alpha,o,c))):(r.set(void 0,u.color,o),e.set(void 0,s.color,o)),n.written|=this.reset}},n.prototype.setAll=function(t,n,i,r,e,u,s,h,o,c,f){var a=this.color,l=this.alpha;if(null!=a)null!=l?null!=(v=this.blend(t,i))?(r.set(void 0,Xn.blend(h.color,a,v),dn.blend(h.alpha,l,v)),e.set(void 0,Xn.blend(o.color,a,v),dn.blend(o.alpha,l,v)),u.set(void 0,Xn.blend(c.color,a,v),dn.blend(c.alpha,l,v)),s.set(void 0,Xn.blend(f.color,a,v),dn.blend(f.alpha,l,v))):(r.set(void 0,a,l),e.set(void 0,a,l),u.set(void 0,a,l),s.set(void 0,a,l)):null!=(v=this.blend(t,i))?(r.set(void 0,Xn.blend(h.color,a,v),h.alpha),e.set(void 0,Xn.blend(o.color,a,v),o.alpha),u.set(void 0,Xn.blend(c.color,a,v),c.alpha),s.set(void 0,Xn.blend(f.color,a,v),f.alpha)):(r.set(void 0,a,h.alpha),e.set(void 0,a,o.alpha),u.set(void 0,a,c.alpha),s.set(void 0,a,f.alpha)),n.written|=this.reset;else if(null!=l){var v;null!=(v=this.blend(t,i))?(r.set(void 0,h.color,dn.blend(h.alpha,l,v)),e.set(void 0,o.color,dn.blend(o.alpha,l,v)),u.set(void 0,h.color,dn.blend(c.alpha,l,v)),s.set(void 0,o.color,dn.blend(f.alpha,l,v))):(r.set(void 0,h.color,l),e.set(void 0,o.color,l),u.set(void 0,c.color,l),s.set(void 0,f.color,l)),n.written|=this.reset}},n}(_r),ie=function(t){function n(n){return t.call(this,n,nr.COLOR)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.setAll(t,n,i,t.fill,t.stroke,t.text,t.text.outline,Rr.toBaseFill(t,n),Rr.toBaseStroke(t,n),Rr.toBaseText(t,n),Rr.toBaseTextOutline(t,n))},n}(ne),re=function(t){function n(n){return t.call(this,n,nr.COLOR_FILL)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.fill,Rr.toBaseFill(t,n))},n}(ne),ee=function(t){function n(n){return t.call(this,n,nr.COLOR_FILL_AND_STROKE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.sets(t,n,i,t.fill,t.stroke,Rr.toBaseFill(t,n),Rr.toBaseStroke(t,n))},n}(ne),ue=function(t){function n(n){return t.call(this,n,nr.COLOR_STROKE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.stroke,Rr.toBaseStroke(t,n))},n}(ne),se=function(t){function n(n){return t.call(this,n,nr.COLOR_TEXT)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.text,Rr.toBaseText(t,n))},n}(ne),he=function(t){function n(n){return t.call(this,n,nr.COLOR_TEXT_OUTLINE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.text.outline,Rr.toBaseTextOutline(t,n))},n}(ne),oe=function(t){function n(n,i,r,e,u,s){var h=t.call(this,Xr.CHANGE_COLOR,i,n)||this;return h.target=r,h.color=e,h.alpha=u,h.blend=s,h}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.color===i.color&&this.alpha===i.alpha&&this.blend===i.blend},n.prototype.toRuntime=function(){switch(this.subtype){case Jr.FILL:return new re(this);case Jr.STROKE:return new ue(this);case Jr.FILL_AND_STROKE:return new ee(this);case Jr.TEXT:return new se(this);case Jr.TEXT_OUTLINE:return new he(this);case Jr.ALL:return new ie(this)}},n.prototype.serialize=function(t){var n=t.add(this.condition),i=t.add(this.blend);return t.add("["+this.type+","+n+","+this.subtype+","+this.target+","+this.color+","+this.alpha+","+i+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources),e=qr.toResource(6,t,i.resources);return new n(t[2],r,t[3],t[4],t[5],e)},n}(Kr),ce=function(){return null},fe=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.brightness=r.toExpression(n.brightness,ce,"null"),r}return i(n,t),n.prototype.set=function(t,n,i,r,e){var u=this.brightness(t,i);null!=u&&(r.set(void 0,this.toColorAdjusted(e.color,u),e.alpha),n.written|=this.reset)},n.prototype.sets=function(t,n,i,r,e,u,s){var h=this.brightness(t,i);null!=h&&(r.set(void 0,this.toColorAdjusted(u.color,h),u.alpha),e.set(void 0,this.toColorAdjusted(s.color,h),s.alpha),n.written|=this.reset)},n.prototype.setAll=function(t,n,i,r,e,u,s,h,o,c,f){var a=this.brightness(t,i);null!=a&&(r.set(void 0,this.toColorAdjusted(h.color,a),h.alpha),e.set(void 0,this.toColorAdjusted(o.color,a),o.alpha),u.set(void 0,this.toColorAdjusted(c.color,a),c.alpha),s.set(void 0,this.toColorAdjusted(f.color,a),f.alpha),n.written|=this.reset)},n.prototype.toColorAdjusted=function(t,n){return 0<=n?Xn.brighten(t,+n):Xn.darken(t,-n)},n}(_r),ae=function(t){function n(n){return t.call(this,n,nr.COLOR)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.setAll(t,n,i,t.fill,t.stroke,t.text,t.text.outline,Rr.toBaseFill(t,n),Rr.toBaseStroke(t,n),Rr.toBaseText(t,n),Rr.toBaseTextOutline(t,n))},n}(fe),le=function(t){function n(n){return t.call(this,n,nr.COLOR_FILL)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.fill,Rr.toBaseFill(t,n))},n}(fe),ve=function(t){function n(n){return t.call(this,n,nr.COLOR_FILL_AND_STROKE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.sets(t,n,i,t.fill,t.stroke,Rr.toBaseFill(t,n),Rr.toBaseStroke(t,n))},n}(fe),be=function(t){function n(n){return t.call(this,n,nr.COLOR_STROKE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.stroke,Rr.toBaseStroke(t,n))},n}(fe),de=function(t){function n(n){return t.call(this,n,nr.COLOR_TEXT)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.text,Rr.toBaseText(t,n))},n}(fe),ge=function(t){function n(n){return t.call(this,n,nr.COLOR_TEXT_OUTLINE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.text.outline,Rr.toBaseTextOutline(t,n))},n}(fe),me=function(t){function n(n,i,r){var e=t.call(this,Xr.CHANGE_COLOR,i,n)||this;return e.brightness=r,e}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.brightness===i.brightness},n.prototype.toRuntime=function(){switch(this.subtype){case Jr.FILL:return new le(this);case Jr.STROKE:return new be(this);case Jr.FILL_AND_STROKE:return new ve(this);case Jr.TEXT:return new de(this);case Jr.TEXT_OUTLINE:return new ge(this);case Jr.ALL:return new ae(this)}},n.prototype.serialize=function(t){var n=t.add(this.condition),i=Zr.BRIGHTNESS,r=t.add(this.brightness);return t.add("["+this.type+","+n+","+this.subtype+","+i+","+r+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources),e=qr.toResource(4,t,i.resources);return new n(t[2],r,e)},n}(Kr),pe=function(){return null},we=function(){return null},De=function(){return null},Te=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.color=r.toExpression(n.color,pe,"null"),r.alpha=r.toExpression(n.alpha,we,"null"),r.blend=r.toExpression(n.blend,De,"null"),r}return i(n,t),n.prototype.set=function(t,n,i,r,e){var u=this.color(t,i),s=this.alpha(t,i);if(null!=u)null!=s?null!=(h=this.blend(t,i))?r.set(void 0,Xn.blend(e.color,u,h),dn.blend(e.alpha,s,h)):r.set(void 0,u,s):null!=(h=this.blend(t,i))?r.set(void 0,Xn.blend(e.color,u,h),e.alpha):r.set(void 0,u,e.alpha),n.written|=this.reset;else if(null!=s){var h;null!=(h=this.blend(t,i))?r.set(void 0,e.color,dn.blend(e.alpha,s,h)):r.set(void 0,e.color,s),n.written|=this.reset}},n.prototype.sets=function(t,n,i,r,e,u,s){var h=this.color(t,i),o=this.alpha(t,i);if(null!=h)null!=o?null!=(c=this.blend(t,i))?(r.set(void 0,Xn.blend(u.color,h,c),dn.blend(u.alpha,o,c)),e.set(void 0,Xn.blend(s.color,h,c),dn.blend(s.alpha,o,c))):(r.set(void 0,h,o),e.set(void 0,h,o)):null!=(c=this.blend(t,i))?(r.set(void 0,Xn.blend(u.color,h,c),u.alpha),e.set(void 0,Xn.blend(s.color,h,c),s.alpha)):(r.set(void 0,h,u.alpha),e.set(void 0,h,s.alpha)),n.written|=this.reset;else if(null!=o){var c;null!=(c=this.blend(t,i))?(r.set(void 0,u.color,dn.blend(u.alpha,o,c)),e.set(void 0,s.color,dn.blend(s.alpha,o,c))):(r.set(void 0,u.color,o),e.set(void 0,s.color,o)),n.written|=this.reset}},n.prototype.setAll=function(t,n,i,r,e,u,s,h,o,c,f){var a=this.color(t,i),l=this.alpha(t,i);if(null!=a)null!=l?null!=(v=this.blend(t,i))?(r.set(void 0,Xn.blend(h.color,a,v),dn.blend(h.alpha,l,v)),e.set(void 0,Xn.blend(o.color,a,v),dn.blend(o.alpha,l,v)),u.set(void 0,Xn.blend(c.color,a,v),dn.blend(c.alpha,l,v)),s.set(void 0,Xn.blend(f.color,a,v),dn.blend(f.alpha,l,v))):(r.set(void 0,a,l),e.set(void 0,a,l),u.set(void 0,a,l),s.set(void 0,a,l)):null!=(v=this.blend(t,i))?(r.set(void 0,Xn.blend(h.color,a,v),h.alpha),e.set(void 0,Xn.blend(o.color,a,v),o.alpha),u.set(void 0,Xn.blend(c.color,a,v),c.alpha),s.set(void 0,Xn.blend(f.color,a,v),f.alpha)):(r.set(void 0,a,h.alpha),e.set(void 0,a,o.alpha),u.set(void 0,a,c.alpha),s.set(void 0,a,f.alpha)),n.written|=this.reset;else if(null!=l){var v;null!=(v=this.blend(t,i))?(r.set(void 0,h.color,dn.blend(h.alpha,l,v)),e.set(void 0,o.color,dn.blend(o.alpha,l,v)),u.set(void 0,h.color,dn.blend(c.alpha,l,v)),s.set(void 0,o.color,dn.blend(f.alpha,l,v))):(r.set(void 0,h.color,l),e.set(void 0,o.color,l),u.set(void 0,c.color,l),s.set(void 0,f.color,l)),n.written|=this.reset}},n}(_r),Oe=function(t){function n(n){return t.call(this,n,nr.COLOR)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.setAll(t,n,i,t.fill,t.stroke,t.text,t.text.outline,Rr.toBaseFill(t,n),Rr.toBaseStroke(t,n),Rr.toBaseText(t,n),Rr.toBaseTextOutline(t,n))},n}(Te),Se=function(t){function n(n){return t.call(this,n,nr.COLOR_FILL)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.fill,Rr.toBaseFill(t,n))},n}(Te),Me=function(t){function n(n){return t.call(this,n,nr.COLOR_FILL_AND_STROKE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.sets(t,n,i,t.fill,t.stroke,Rr.toBaseFill(t,n),Rr.toBaseStroke(t,n))},n}(Te),Ee=function(t){function n(n){return t.call(this,n,nr.COLOR_STROKE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.stroke,Rr.toBaseStroke(t,n))},n}(Te),ke=function(t){function n(n){return t.call(this,n,nr.COLOR_TEXT)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.text,Rr.toBaseText(t,n))},n}(Te),Ie=function(t){function n(n){return t.call(this,n,nr.COLOR_TEXT_OUTLINE)||this}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&this.set(t,n,i,t.text.outline,Rr.toBaseTextOutline(t,n))},n}(Te),Ne=function(t){function n(n,i,r,e,u){var s=t.call(this,Xr.CHANGE_COLOR,i,n)||this;return s.color=r,s.alpha=e,s.blend=u,s}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.color===i.color&&this.alpha===i.alpha&&this.blend===i.blend},n.prototype.toRuntime=function(){switch(this.subtype){case Jr.FILL:return new Se(this);case Jr.STROKE:return new Ee(this);case Jr.FILL_AND_STROKE:return new Me(this);case Jr.TEXT:return new ke(this);case Jr.TEXT_OUTLINE:return new Ie(this);case Jr.ALL:return new Oe(this)}},n.prototype.serialize=function(t){var n=t.add(this.condition),i=Zr.CODE,r=t.add(this.color),e=t.add(this.alpha),u=t.add(this.blend);return t.add("["+this.type+","+n+","+this.subtype+","+i+","+r+","+e+","+u+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources),e=qr.toResource(4,t,i.resources),u=qr.toResource(5,t,i.resources),s=qr.toResource(6,t,i.resources);return new n(t[2],r,e,u,s)},n}(Kr),ye=function(){return null},xe=function(t){function n(n){var i=t.call(this,n,nr.CURSOR)||this;return i.name=i.toExpression(n.name,ye,"null"),i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.name(t,i);null!=r&&(t.cursor=r,n.written|=this.reset)}},n}(_r),Ce=function(t){function n(n,i){var r=t.call(this,Xr.CHANGE_CURSOR,n)||this;return r.name=i,r}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.name===i.name},n.prototype.toRuntime=function(){return new xe(this)},n.prototype.serialize=function(t){var n=t.add(this.condition),i=t.add(this.name);return t.add("["+this.type+","+n+","+i+"]")},n.deserialize=function(t,i){return new n(qr.toResource(1,t,i.resources),qr.toResource(2,t,i.resources))},n}(Yr),je=function(){return 0},Ae=function(t){function n(n,i){var r=t.call(this,n,nr.TEXT)||this;return r.number=r.toExpression(n.value,je,"0"),i=i.trim(),r.formatter=0<i.length?bn.create(i):null,r}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.number(t,i);t.text.value=null!=this.formatter?this.formatter.format(r,0):String(r),n.written|=this.reset}},n}(_r),Be=function(){return""},Re=function(t){function n(n){var i=t.call(this,n,nr.TEXT)||this;return i.text=i.toExpression(n.value,Be,'""'),i}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&(t.text.value=String(this.text(t,i)),n.written|=this.reset)},n}(_r);!function(t){t[t.TEXT=0]="TEXT",t[t.NUMBER=1]="NUMBER"}($r||($r={}));var Le,We=function(t){function n(n,i,r){var e=t.call(this,Xr.CHANGE_TEXT,i,n)||this;return e.value=r,e}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.value===i.value},n.prototype.toRuntime=function(t){switch(this.subtype){case $r.TEXT:return new Re(this);case $r.NUMBER:return new Ae(this,t.text.value)}},n.prototype.serialize=function(t){var n=t.add(this.condition),i=t.add(this.value);return t.add("["+this.type+","+n+","+this.subtype+","+i+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources),e=qr.toResource(3,t,i.resources);return new n(t[2],r,e)},n}(Kr),_e=function(){return null},Fe=function(t){function n(n){var i=t.call(this,n,nr.NONE)||this;return i.name=i.toExpression(n.name,_e,"null"),i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.name(t,i);null!=r&&this.emit(r,t)}},n}(_r),Pe=function(t){function n(n,i){var r=t.call(this,Xr.EMIT_EVENT,n)||this;return r.name=i,r}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.name===i.name},n.prototype.toRuntime=function(){return new Fe(this)},n.prototype.serialize=function(t){var n=t.add(this.condition),i=t.add(this.name);return t.add("["+this.type+","+n+","+i+"]")},n.deserialize=function(t,i){return new n(qr.toResource(1,t,i.resources),qr.toResource(2,t,i.resources))},n}(Yr),Ue=function(){function n(){var n=this;this.input=null,this.shape=null,this.value="",this.point=new t.Point,this.rect=new t.Rectangle,this.Jr=function(t){n.onInputKeyDown(t)},this.Zr=function(t){n.onInputBlur(t)},this.qr=function(){n.updateInput()},this.Qr=function(){n.onInputChange()},this.$r=function(t){n.onInputInput(t)},this.te=null}return n.prototype.getInput=function(){return null==this.input&&e.getInstance().getRootElement().appendChild(this.input=this.createInput()),this.input},n.prototype.createInput=function(){var t=document.createElement("input");return t.setAttribute("spellcheck","false"),t},n.prototype.getInputType=function(){return"text"},n.prototype.initInput=function(t,n,i){n.type=this.getInputType(),n.value=i,n.addEventListener("keydown",this.Jr),n.addEventListener("blur",this.Zr),n.addEventListener("change",this.Qr),n.addEventListener("input",this.$r),n.setAttribute("style",this.getInputStyle(t)),t.readonly?n.setAttribute("readonly","readonly"):n.removeAttribute("readonly"),t.disabled?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled")},n.prototype.getInputStyleBackground=function(){return"background-color: transparent;"},n.prototype.getInputStyleBorder=function(){return"border: none; box-sizing: border-box;"},n.prototype.getInputStylePadding=function(t,n){var i=t.text.padding.horizontal*n;return"padding: 0px "+i+"px 0px "+i+"px;"},n.prototype.getInputStyleOutline=function(){return"outline: none;"},n.prototype.getInputStylePosition=function(t,n){return"position: absolute;left: "+t.x+"px;top: "+t.y+"px;width: "+t.width+"px;height: "+t.height+"px;line-height: "+t.height+"px;transform: matrix("+n.a+","+n.b+","+n.c+","+n.d+","+n.tx+","+n.ty+");"},n.prototype.getInputStyleText=function(t,n,i){var r=t.text;return"font-family: "+Ct.toFontFamily(r.family)+";font-size: "+r.size*i+"px;font-weight: "+(r.weight===vr.NORMAL?"normal":"bold")+";color: #"+r.color.toString(16)+";"},n.prototype.getInputStyleMargin=function(t,n,i){return"margin: 0;"},n.prototype.getInputStyle=function(t){var n=t.transform.pivot,i=t.size,r=i.x,e=i.y,u=this.rect;u.x=-.5*r+n.x,u.y=-.5*e+n.y,u.width=r,u.height=e,t.updateTransform();var s=t.transform.worldTransform;return this.getInputStylePosition(u,s)+this.getInputStyleMargin(t,u,1)+this.getInputStyleText(t,u,1)+this.getInputStyleBackground()+this.getInputStyleBorder()+this.getInputStylePadding(t,1)+this.getInputStyleOutline()},n.prototype.onInputKeyDown=function(t){if(R.isFocusKey(t)){var n=this.shape;if(null!=n){this.onInputChange(),this.hide();var i=W.getFocusController(),r=R.getFocusDirection(t),u=i.findFocusable(n,!1,!1,r);null!=u&&(e.getInstance().view.focus(),t.preventDefault(),i.setFocused(u,!0,!0))}}else R.isOkKey(t)&&(this.onInputChange(),this.hide())},n.prototype.onInputBlur=function(t){this.onInputChange(),this.hide()},n.prototype.onInputInput=function(t){if(t.target instanceof HTMLInputElement){var n=this.shape,i=this.onInput;null!=n&&null!=i&&i(n,t.target.value)}},n.prototype.updateInput=function(){var t=this.shape;if(null!=t)if(t.visible){var n=this.input;null!=n&&n.setAttribute("style",this.getInputStyle(t))}else this.hide()},n.prototype.isShown=function(t){return this.shape===t},n.prototype.show=function(t,n,i,r){var u=this.shape;if(null!=u&&u!==t&&this.hide(),null==this.shape){this.shape=t,this.value=n,this.onChange=i,this.onInput=r;var s=t.text;null!=s&&(s.enable=!1);var h=e.getInstance(),o=this.getInput();if(null!=o){this.initInput(t,o,n);var c=this.qr,f=this.te;null!=f&&f.off("postrender",c),this.te=h.renderer,h.renderer.on("postrender",c),o.style.display="",o.focus(),o.select()}e.update()}},n.prototype.hide=function(){var t=this.shape;if(null!=t){this.shape=null,this.value="";var n=t.text;null!=n&&(n.enable=!0);var i=this.input;null!=i&&(i.removeEventListener("keydown",this.Jr),i.removeEventListener("blur",this.Zr),i.removeEventListener("change",this.Qr),i.removeEventListener("input",this.$r),i.style.display="none");var r=this.te;null!=r&&(this.te=null,r.off("postrender",this.qr)),e.update()}},n.prototype.onInputChange=function(){var t=this.shape,n=this.input,i=this.onChange;if(null!=t&&null!=n&&null!=i){var r=n.value;this.value!==r&&i(t,r)}},n}(),ze=function(t){function n(){return t.call(this)||this}return i(n,t),n.prototype.execute=function(t,i,r){var e=this;if(!t.disabled){var u=n.getData();t.focused?u.isShown(t)||setTimeout((function(){u.show(t,t.text.value,(function(n,i){t.text.value=i,e.emit("change",t,i)}))}),0):u.isShown(t)&&(u.onInputChange(),u.hide())}},n.getData=function(){return null==n.data&&(n.data=new Ue),n.data},n.data=null,n}(Lr);!function(t){t[t.INPUT=0]="INPUT"}(Le||(Le={}));var Ge,He=function(t){function n(n,i){return t.call(this,Xr.MISC,i,n)||this}return i(n,t),n.prototype.toRuntime=function(t){switch(this.subtype){case Le.INPUT:return new ze}},n.prototype.serialize=function(t){var n=t.add(this.condition);return t.add("["+this.type+","+n+","+this.subtype+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources);return new n(t[2],r)},n}(Kr),Ve=function(){return null},Xe=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.target=r.toExpression(n.target,Ve,"null"),r}return i(n,t),n}(_r),Ye=function(t){function n(n){return t.call(this,n,nr.NONE)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.target(t,i);if(null!=r){var u=e.getInstance();"opener"in u&&u.opener(r)}}},n}(Xe),Ke=function(t){function n(n){return t.call(this,n,nr.NONE)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.target(t,i);null!=r&&window.open(r)}},n}(Xe),Je=function(t){function n(n){return t.call(this,n,nr.NONE)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.target(t,i);null!=r&&(window.location.href=r)}},n}(Xe);!function(t){t[t.FLOW=0]="FLOW",t[t.PAGE=1]="PAGE",t[t.PAGE_INPLACE=2]="PAGE_INPLACE"}(Ge||(Ge={}));var Ze,qe=function(t){function n(n,i,r){var e=t.call(this,Xr.OPEN,i,n)||this;return e.target=r,e}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target},n.prototype.toRuntime=function(){switch(this.subtype){case Ge.FLOW:return new Ye(this);case Ge.PAGE:return new Ke(this);case Ge.PAGE_INPLACE:return new Je(this)}},n.prototype.serialize=function(t){var n=t.add(this.condition),i=t.add(this.target);return t.add("["+this.type+","+n+","+this.subtype+","+i+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources),e=qr.toResource(3,t,i.resources);return new n(t[2],r,e)},n}(Kr);!function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"}(Ze||(Ze={}));var Qe,$e,tu=function(t){function n(n){var i=t.call(this,n,nr.VISIBILITY)||this;return i.visibility=n.subtype===Ze.SHOW,i}return i(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i)&&(t.visible=this.visibility,n.written|=this.reset)},n}(_r),nu=function(t){function n(n,i){return t.call(this,Xr.SHOW_HIDE,i,n)||this}return i(n,t),n.prototype.toRuntime=function(){return new tu(this)},n.prototype.serialize=function(t){var n=t.add(this.condition);return t.add("["+this.type+","+n+","+this.subtype+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources);return new n(t[2],r)},n}(Kr),iu=function(){return 0},ru=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.amount=r.toExpression(n.amount,iu,"0"),r}return i(n,t),n}(_r),eu=function(t){function n(n){return t.call(this,n,nr.POSITION_X)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.amount(t,i);t.transform.position.x=r,n.written|=this.reset}},n}(ru),uu=function(t){function n(n){return t.call(this,n,nr.POSITION_Y)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.amount(t,i);t.transform.position.y=r,n.written|=this.reset}},n}(ru),su=function(t){function n(n){return t.call(this,n,nr.POSITION)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.amount(t,i),e=t.transform.position,u=0!=(n.written&nr.POSITION_X),s=0!=(n.written&nr.POSITION_Y),h=u?e.x:n.x,o=s?e.y:n.y;t.updateTransform();var c=t.transform.localTransform;e.set(h-c.c*r,o-c.d*r),n.written|=this.reset}},n}(ru),hu=function(t){function n(n){return t.call(this,n,nr.POSITION)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.amount(t,i),e=t.transform.position,u=0!=(n.written&nr.POSITION_X),s=0!=(n.written&nr.POSITION_Y),h=u?e.x:n.x,o=s?e.y:n.y;t.updateTransform();var c=t.transform.localTransform;e.set(h+c.a*r,o+c.b*r),n.written|=this.reset}},n}(ru),ou=function(t){function n(n){return t.call(this,n,nr.POSITION_X)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.amount(t,i),e=0!=(n.written&nr.POSITION_X),u=t.transform.position,s=e?u.x:n.x;u.x=s+r,n.written|=this.reset}},n}(ru),cu=function(t){function n(n){return t.call(this,n,nr.POSITION_Y)||this}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.amount(t,i),e=0!=(n.written&nr.POSITION_Y),u=t.transform.position,s=e?u.y:n.y;u.y=s+r,n.written|=this.reset}},n}(ru),fu=function(t){function n(n,i,r,e){var u=t.call(this,n,i,r)||this;return u.opetype=e,u}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.opetype===i.opetype},n}(Kr);!function(t){t[t.RELATIVE_X=0]="RELATIVE_X",t[t.RELATIVE_Y=1]="RELATIVE_Y",t[t.ABSOLUTE_X=2]="ABSOLUTE_X",t[t.ABSOLUTE_Y=3]="ABSOLUTE_Y",t[t.FORWARD_OR_BACKWARD=4]="FORWARD_OR_BACKWARD",t[t.LEFT_OR_RIGHT=5]="LEFT_OR_RIGHT"}(Qe||(Qe={})),function(t){t[t.RESIZE=0]="RESIZE",t[t.MOVE=1]="MOVE",t[t.ROTATE=2]="ROTATE"}($e||($e={}));var au,lu=function(t){function n(n,i,r){var e=t.call(this,Xr.TRANSFORM,i,$e.MOVE,n)||this;return e.amount=r,e}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case Qe.ABSOLUTE_X:return new eu(this);case Qe.ABSOLUTE_Y:return new uu(this);case Qe.FORWARD_OR_BACKWARD:return new su(this);case Qe.LEFT_OR_RIGHT:return new hu(this);case Qe.RELATIVE_X:return new ou(this);case Qe.RELATIVE_Y:return new cu(this)}},n.prototype.serialize=function(t){var n=t.add(this.condition),i=t.add(this.amount);return t.add("["+this.type+","+n+","+this.subtype+","+this.opetype+","+i+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources),e=qr.toResource(4,t,i.resources);return new n(t[3],r,e)},n}(fu),vu=function(){function t(){}return t.toRounded=function(t){return Math.round(100*t)/100},t.toNormalized=function(n){return Math.abs(n)<.001?n<0?-.001:.001:t.toRounded(n)},t.resize=function(n,i,r,e,u){n.disallowUploadedUpdate();var s=n.transform.position;if(e){var h=Math.abs(r.x-i.x),o=Math.abs(r.y-i.y);if(u){var c=(l=Math.max(h,o))+l;n.size.set(t.toNormalized(c),t.toNormalized(c)),s.set(t.toRounded(i.x),t.toRounded(i.y))}else n.size.set(t.toNormalized(h+h),t.toNormalized(o+o)),s.set(t.toRounded(i.x),t.toRounded(i.y))}else if(u){h=r.x-i.x,o=r.y-i.y,c=Math.max(Math.abs(h),Math.abs(o));var f=i.x+(h<0?-c:+c),a=i.y+(o<0?-c:+c),l=.5*c,v=Math.min(i.x,f)+l,b=Math.min(i.y,a)+l;n.size.set(t.toNormalized(c),t.toNormalized(c)),s.set(t.toRounded(v),t.toRounded(b))}else{var d=Math.min(i.x,r.x),g=Math.min(i.y,r.y),m=Math.max(i.x,r.x)-d,p=Math.max(i.y,r.y)-g,w=.5*m,D=.5*p;n.size.set(t.toNormalized(m),t.toNormalized(p)),s.set(t.toRounded(d+w),t.toRounded(g+D))}n.allowUploadedUpdate()},t}();!function(t){t[t.RELATIVE_SIZE=0]="RELATIVE_SIZE",t[t.RELATIVE_HEIGHT=1]="RELATIVE_HEIGHT",t[t.RELATIVE_WIDTH=2]="RELATIVE_WIDTH",t[t.ABSOLUTE_SIZE=3]="ABSOLUTE_SIZE",t[t.ABSOLUTE_HEIGHT=4]="ABSOLUTE_HEIGHT",t[t.ABSOLUTE_WIDTH=5]="ABSOLUTE_WIDTH"}(au||(au={}));var bu,du=function(){return 1},gu=function(){return 100},mu=function(t){function n(n,i){var r=t.call(this,n,i)||this;switch(n.opetype){case au.RELATIVE_SIZE:r.size=r.toExpression(n.amount,du,"1");break;case au.ABSOLUTE_SIZE:r.size=r.toExpression(n.amount,gu,"100");break;case au.RELATIVE_HEIGHT:r.size=r.toExpression(n.amount,du,"1");break;case au.ABSOLUTE_HEIGHT:r.size=r.toExpression(n.amount,gu,"100");break;case au.RELATIVE_WIDTH:r.size=r.toExpression(n.amount,du,"1");break;case au.ABSOLUTE_WIDTH:r.size=r.toExpression(n.amount,gu,"100");break;default:r.size=du}return r}return i(n,t),n.prototype.adjustPosition=function(t,n,i,r,e,u){var s=(-.5+e)*i,h=(-.5+u)*r;t.updateTransform();var o=t.transform,c=o.position,f=o.localTransform,a=0!=(n.written&nr.POSITION_X),l=0!=(n.written&nr.POSITION_Y),v=a?c.x:n.x,b=l?c.y:n.y;n.written|=nr.POSITION,c.set(v+s*f.a+h*f.c,b+s*f.b+h*f.d)},n}(_r),pu=function(t){function n(n){var i=t.call(this,n,nr.HEIGHT)||this;return i.origin=n.originY,i.reset|=nr.POSITION,i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.size(t,i),e=t.size,u=0!=(n.written&nr.HEIGHT)?e.y:n.size.y;e.y=vu.toNormalized(r),n.written|=nr.HEIGHT,this.adjustPosition(t,n,0,u-e.y,.5,this.origin)}},n}(mu),wu=function(t){function n(n){var i=t.call(this,n,nr.HEIGHT)||this;return i.origin=n.originY,i.reset|=nr.POSITION,i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.size(t,i),e=t.size,u=0!=(n.written&nr.HEIGHT)?e.y:n.size.y;e.y=vu.toNormalized(u*r),n.written|=nr.HEIGHT,this.adjustPosition(t,n,0,u-e.y,.5,this.origin)}},n}(mu),Du=function(t){function n(n){var i=t.call(this,n,nr.SIZE)||this;return i.originX=n.originX,i.originY=n.originY,i.reset|=nr.POSITION,i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=vu.toNormalized(this.size(t,i)),e=t.size,u=0!=(n.written&nr.WIDTH),s=0!=(n.written&nr.HEIGHT),h=u?e.x:n.size.x,o=s?e.y:n.size.y;e.set(r,r),n.written|=nr.SIZE,this.adjustPosition(t,n,h-e.x,o-e.y,this.originX,this.originY)}},n}(mu),Tu=function(t){function n(n){var i=t.call(this,n,nr.SIZE)||this;return i.originX=n.originX,i.originY=n.originY,i.reset|=nr.POSITION,i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.size(t,i),e=t.size,u=0!=(n.written&nr.WIDTH),s=0!=(n.written&nr.HEIGHT),h=u?e.x:n.size.x,o=s?e.y:n.size.y;e.set(vu.toNormalized(h*r),vu.toNormalized(o*r)),n.written|=nr.SIZE,this.adjustPosition(t,n,h-e.x,o-e.y,this.originX,this.originY)}},n}(mu),Ou=function(t){function n(n){var i=t.call(this,n,nr.WIDTH)||this;return i.origin=n.originX,i.reset|=nr.POSITION,i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.size(t,i),e=t.size,u=0!=(n.written&nr.WIDTH)?e.x:n.size.x;e.x=vu.toNormalized(r),n.written|=nr.WIDTH,this.adjustPosition(t,n,u-e.x,0,this.origin,.5)}},n}(mu),Su=function(t){function n(n){var i=t.call(this,n,nr.WIDTH)||this;return i.origin=n.originX,i.reset|=nr.POSITION,i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.size(t,i),e=t.size,u=0!=(n.written&nr.WIDTH)?e.x:n.size.x;e.x=vu.toNormalized(u*r),n.written|=nr.WIDTH,this.adjustPosition(t,n,u-e.x,0,this.origin,.5)}},n}(mu),Mu=function(t){function n(n,i,r,e,u){var s=t.call(this,Xr.TRANSFORM,i,$e.RESIZE,n)||this;return s.originX=r,s.originY=e,s.amount=u,s}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.originX===i.originX&&this.originY===i.originY&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case au.ABSOLUTE_HEIGHT:return new pu(this);case au.ABSOLUTE_WIDTH:return new Ou(this);case au.ABSOLUTE_SIZE:return new Du(this);case au.RELATIVE_HEIGHT:return new wu(this);case au.RELATIVE_WIDTH:return new Su(this);case au.RELATIVE_SIZE:return new Tu(this)}},n.prototype.serialize=function(t){var n=t.add(this.condition),i=t.add(this.amount);return t.add("["+this.type+","+n+","+this.subtype+","+this.opetype+","+this.originX+","+this.originY+","+i+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources),e=qr.toResource(6,t,i.resources);return new n(t[3],r,t[4],t[5],e)},n}(fu),Eu=function(){return 0},ku=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.originX=n.originX,r.originY=n.originY,r.amount=r.toExpression("("+n.amount+") * (Math.PI / 180)",Eu,"0"),r}return i(n,t),n.prototype.adjustPosition=function(t,n,i,r,e,u){var s=0!=(n.written&nr.WIDTH),h=0!=(n.written&nr.HEIGHT),o=(-.5+e)*(s?t.size.x:n.size.x),c=(-.5+u)*(h?t.size.y:n.size.y),f=Math.sin(i)-Math.sin(r),a=Math.cos(i)-Math.cos(r),l=t.transform.position,v=0!=(n.written&nr.POSITION_X),b=0!=(n.written&nr.POSITION_Y),d=v?l.x:n.x,g=b?l.y:n.y;n.written|=nr.POSITION,l.set(d+o*a-c*f,g+o*f+c*a)},n}(_r),Iu=function(t){function n(n){var i=t.call(this,n,nr.ROTATION)||this;return i.reset|=nr.POSITION,i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.amount(t,i),e=t.transform,u=0!=(n.written&nr.ROTATION)?e.rotation:n.rotation;e.rotation=r,n.written|=nr.ROTATION,this.adjustPosition(t,n,u,r,this.originX,this.originY)}},n}(ku),Nu=function(t){function n(n){var i=t.call(this,n,nr.ROTATION)||this;return i.reset|=nr.POSITION,i}return i(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i)){var r=this.amount(t,i),e=t.transform,u=0!=(n.written&nr.ROTATION)?e.rotation:n.rotation;e.rotation=u+r,n.written|=nr.ROTATION,this.adjustPosition(t,n,u,e.rotation,this.originX,this.originY)}},n}(ku);!function(t){t[t.RELATIVE=0]="RELATIVE",t[t.ABSOLUTE=1]="ABSOLUTE"}(bu||(bu={}));var yu,xu=function(t){function n(n,i,r,e,u){var s=t.call(this,Xr.TRANSFORM,i,$e.ROTATE,n)||this;return s.originX=r,s.originY=e,s.amount=u,s}return i(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.originX===i.originX&&this.originY===i.originY&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case bu.ABSOLUTE:return new Iu(this);case bu.RELATIVE:return new Nu(this)}},n.prototype.serialize=function(t){var n=t.add(this.condition),i=t.add(this.amount);return t.add("["+this.type+","+n+","+this.subtype+","+this.opetype+","+this.originX+","+this.originY+","+i+"]")},n.deserialize=function(t,i){var r=qr.toResource(1,t,i.resources),e=qr.toResource(6,t,i.resources);return new n(t[3],r,t[4],t[5],e)},n}(fu),Cu=function(){function t(){}return t.toSerialized=function(t){try{var n=JSON.parse(t);if(Gn(n)){for(var i=0,r=n.length;i<r;++i)if(!a(n[i]))return null;if(2<=n.length)return n}return null}catch(t){return null}},t.deserialize=function(t,n){var i=n.actions.get(t);if(null!=i)return i;var r=n.resources[t];if(null!=r){var e=this.toSerialized(r);if(null!=e)switch(e[0]){case Xr.SHOW_HIDE:return nu.deserialize(e,n);case Xr.BLINK:return Qr.deserialize(e,n);case Xr.CHANGE_COLOR:switch(e[3]){case Zr.COLOR_AND_ALPHA:case Zr.COLOR:case Zr.ALPHA:return oe.deserialize(e,n);case Zr.CODE:return Ne.deserialize(e,n);case Zr.BRIGHTNESS:return me.deserialize(e,n)}case Xr.CHANGE_TEXT:return We.deserialize(e,n);case Xr.CHANGE_CURSOR:return Ce.deserialize(e,n);case Xr.EMIT_EVENT:return Pe.deserialize(e,n);case Xr.OPEN:return qe.deserialize(e,n);case Xr.TRANSFORM:switch(e[2]){case $e.MOVE:return lu.deserialize(e,n);case $e.RESIZE:return Mu.deserialize(e,n);case $e.ROTATE:return xu.deserialize(e,n)}break;case Xr.MISC:return He.deserialize(e,n)}}return new nu(Ze.SHOW,"")},t}(),ju=function(){function t(){}return t.toImageElement=function(n){var i=t.imageElements,r=i[n];if(null!=r)return r instanceof HTMLImageElement?Promise.resolve(r):r;var e=new Promise((function(t,r){var e=document.createElement("img");e.onload=function(){i[n]=e,t(e)},e.onabort=e.onerror=function(){r()},e.src=n}));return i[n]=e,e},t.imageElements={},t}(),Au=function(t){this.resources=t,this.actions=new Map,this.fills=new Map,this.strokes=new Map,this.tags=new Map,this.tagValues=new Map,this.ranges=new Map,this.aligns=new Map,this.margins=new Map,this.texts=new Map,this.textOutlines=new Map,this.extensions=new Map},Bu=function(){function t(){}return t.toShape=function(t,n){var i=Xi[t[0]];return null!=i?i(t,n):null},t.deserialize=function(n,i,r){r.id=i.resources[n[1]]||"",r.transform.position.set(n[2],n[3]),r.transform.rotation=n[6],r.transform.skew.set(n[7],n[7]),r.transform.pivot.set(n[21],n[22]),r.size.set(vu.toNormalized(n[4]),vu.toNormalized(n[5])),r.fill.deserialize(n[8],i),r.stroke.deserialize(n[9],i),r.cursor=i.resources[n[10]]||"",r.text.deserialize(n[11],i),r.tag.deserialize(n[12],i),r.radius=n[13],r.corner=n[14],r.interactive=!!(1&n[23]),r.unfocusable=!!(2&n[23]),r.shortcut=0<=n[24]?i.resources[n[24]]:void 0,r.title=0<=n[25]?i.resources[n[25]]:void 0;var e=null,u=n[20];if(0<u.length){for(var s=[],h=0,c=u.length;h<c;++h){var f=u[h],a=t.toShape(f,i);null!=a&&s.push(a)}e=Promise.all(s).then((function(t){r.children=t;for(var n=0,i=t.length;n<i;++n)t[n].parent=r;return r.onChildTransformChange(),r.toDirty(),r}))}var l=n[17];for(h=0,c=l.length;h<c;++h)r.action.add(Cu.deserialize(l[h],i));var v=n[19];if(0<=v&&v<i.resources.length){var b=i.resources[v];o(b)&&(r.gradient=cr.deserializeGradient(b))}var d=null,g=n[18];if(0<=g&&g<i.resources.length){var m=i.resources[g];o(m)&&(d=ju.toImageElement(m).then((function(t){return r.image=t,r})))}return null!=e?null!=d?Promise.all([e,d]).then((function(){return r})):e:null!=d?d:r},t.deserializeAll=function(n,i){for(var r=new Au(i),e=[],u=0,s=n.length;u<s;++u){var h=n[u],o=t.toShape(h,r);if(null==o)return 0<e.length&&Promise.all(e).then((function(t){for(var n=0,i=t.length;n<i;++n)t[n].destroy()})),null;e.push(o)}return 0<e.length?Promise.all(e):null},t}(),Ru=function(){function t(){}return t.deserialize=function(t,n){var i=new yr(Ji.RIGHT,10,3,Yi.NONE),r=Bu.deserialize(t,n,i);return i.points.deserialize(t[15],n),r},t}(),Lu=function(){Ki[ci.BAR]=Br.create,Xi[ci.BAR]=Ru.deserialize},Wu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.buffer,r=this.vertexOffset,e=this.indexOffset;i.clippingBuffer.update();var u=i.clippings,s=3*r;u[s+0]=1,u[s+1]=1,u[s+2]=1,u[s+3]=0,u[s+4]=1,u[s+5]=1,u[s+6]=1,u[s+7]=1,u[s+8]=1,u[s+9]=1,u[s+10]=0,u[s+11]=1,u[s+12]=0,u[s+13]=0,u[s+14]=1,u[s+15]=1,u[s+16]=0,u[s+17]=1,u[s+18]=1,u[s+19]=1,u[s+20]=1,u[s+21]=0,u[s+22]=1,u[s+23]=1,u[s+24]=1,u[s+25]=1,u[s+26]=1,i.indexBuffer.update();var h=i.indices,o=3*e;return h[o+0]=r+0,h[o+1]=r+1,h[o+2]=r+3,h[o+3]=r+1,h[o+4]=r+4,h[o+5]=r+3,h[o+6]=r+1,h[o+7]=r+2,h[o+8]=r+4,h[o+9]=r+2,h[o+10]=r+5,h[o+11]=r+4,h[o+12]=r+3,h[o+13]=r+4,h[o+14]=r+6,h[o+15]=r+4,h[o+16]=r+7,h[o+17]=r+6,h[o+18]=r+4,h[o+19]=r+5,h[o+20]=r+7,h[o+21]=r+5,h[o+22]=r+8,h[o+23]=r+7,this.initText(),this.update(n),this},n.prototype.update=function(t){var n=this.buffer;this.updateType0Vertex(n,t),this.updateColor(n,t),this.updateType0Step(n,t),this.updateType0Uv(n,t),this.updateText(n,t)},n.prototype.updateType0Vertex=function(t,n){var i=n.size,r=i.x,e=i.y,u=this.toTransformLocalId(n),s=r!==this.sizeX||e!==this.sizeY,h=this.transformLocalId!==u,o=n.stroke,c=o.enable?o.width:0,f=o.align,a=this.strokeAlign!==f||this.strokeWidth!==c;if(s||h||a){this.sizeX=r,this.sizeY=e,this.transformLocalId=u,this.strokeWidth=NaN,this.textSpacingHorizontal=NaN,t.vertexBuffer.update();var l=f*c,v=.5*r+(0<=r?+l:-l),b=.5*e+(0<=e?+l:-l),d=n.transform.internalTransform,g=this.buffer.work;g.set(-v,-b),d.apply(g,g);var m=g.x,p=g.y;g.set(0,-b),d.apply(g,g);var w=g.x,D=g.y,T=w-m,O=D-p,S=d.tx,M=d.ty,E=S+(S-w),k=M+(M-D),I=S-T,N=M-O;this.worldSizeXHalf=this.calcLength(m,p,w,D),this.worldSizeYHalf=this.calcLength(m,p,I,N);var y=this.vertexOffset,x=t.vertices,C=2*y;x[C+0]=m,x[C+1]=p,x[C+2]=w,x[C+3]=D,x[C+4]=w+T,x[C+5]=D+O,x[C+6]=I,x[C+7]=N,x[C+8]=S,x[C+9]=M,x[C+10]=S+T,x[C+11]=M+O,x[C+12]=E-T,x[C+13]=k-O,x[C+14]=E,x[C+15]=k,x[C+16]=E+T,x[C+17]=k+O}},n.prototype.updateType0Step=function(t,n){var i=n.stroke,r=i.enable?i.width:0,e=i.align;if(this.strokeAlign!==e||this.strokeWidth!==r){this.strokeWidth=r,this.strokeAlign=e,t.stepBuffer.update(),t.antialiasBuffer.update();var u=t.workStep;this.calcStep(this.worldSizeXHalf,r,u);var s=u[0],h=u[1],o=u[2];this.calcStep(this.worldSizeYHalf,r,u);var c=u[0],f=u[1],a=u[2],l=this.vertexOffset,v=this.vertexCount-this.textVertexCount;this.updateStep(t,l,v,s,c,h,f,o,a)}},n.prototype.updateType0Uv=function(t,n){var i=this.toTexture(n),r=this.toTextureTransformId(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r;var e=this.toTextureUvs(i),u=e.x0,s=e.x1,h=e.x2,o=e.x3,c=e.y0,f=e.y1,a=e.y2,l=e.y3;t.uvBuffer.update();var v=t.uvs,b=2*this.vertexOffset;v[b+0]=u,v[b+1]=c,v[b+2]=.5*(u+s),v[b+3]=.5*(c+f),v[b+4]=s,v[b+5]=f,v[b+6]=.5*(u+o),v[b+7]=.5*(c+l),v[b+8]=.5*(u+h),v[b+9]=.5*(c+a),v[b+10]=.5*(s+h),v[b+11]=.5*(f+a),v[b+12]=o,v[b+13]=l,v[b+14]=.5*(o+h),v[b+15]=.5*(l+a),v[b+16]=h,v[b+17]=a}},n}(jr),_u=function(){function t(){}return t.create=function(t,n,i,r){var e=Cr.getTextCount(n,t.workCount),u=e.vertexCount,s=e.indexCount,h=9+u,o=8+s;return i+h<t.vertexCapacity&&r+o<t.indexCapacity?new Wu(t,i,r,u,s,h,o).init(n):null},t}(),Fu=function(t){function n(n){return void 0===n&&(n=ci.CIRCLE),t.call(this,n)||this}return i(n,t),n.prototype.clone=function(){return(new n).copy(this)},n.prototype.containsAbs=function(n,i,r,e){if(t.prototype.containsAbsBBox.call(this,n,i,r,e)){var u=this.fill,s=this.stroke;if(u.enable){if((f=n*n)*(c=e*e)+(a=i*i)*(o=r*r)<=o*c)return!0}else{var h=s.width;if(s.enable&&0<h){var o,c,f=n*n,a=i*i,l=Math.max(0,r-h),v=Math.max(0,e-h),b=l*l,d=v*v;if(b*d<=f*d+a*b&&f*(c=e*e)+a*(o=r*r)<=o*c)return!0}}}return!1},n}(Ir),Pu=function(){function t(){}return t.deserialize=function(n,i){return Bu.deserialize(n,i,t.create())},t.create=function(){return new Fu},t}(),Uu=function(){Ki[ci.CIRCLE]=_u.create,Xi[ci.CIRCLE]=Pu.deserialize},zu=function(n){function r(t,i,r){return n.call(this,t,i,r,0,0)||this}return i(r,n),r.prototype.init=function(i){return n.prototype.init.call(this,i),this.texture=i.texture||t.Texture.WHITE,this},r.prototype.update=function(t){},r}(xr),Gu=function(){function t(){}return t.create=function(t,n,i,r){return new zu(t,i,r).init(n)},t}(),Hu=function(){function t(t){this.gr=t}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.gr.children;return!(0<t.length)||t[t.length-1].fill.enable},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].fill.enable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].fill.color:16777215},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].fill.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].fill.alpha:1},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].fill.alpha=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].fill.copy(t)},t.prototype.set=function(t,n,i){for(var r=this.gr.children,e=0,u=r.length;e<u;++e)r[e].fill.set(t,n,i)},t.prototype.clone=function(){return new t(this.gr)},t.prototype.toObject=function(){var t=this.gr.children;return 0<t.length?t[t.length-1].fill.toObject():{enable:!0,color:16777215,alpha:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Vu=function(){function t(t){this.gr=t}return Object.defineProperty(t.prototype,"length",{get:function(){var t=this.gr.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.length}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){var t=this.gr.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.id}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var t=this.gr.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.values}return[]},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.values=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){var t=this.gr.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.segments}return[]},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.segments=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){var t=this.gr.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.style}return Yi.NONE},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.style=t)}},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&e.copy(t)}return this},t.prototype.set=function(t,n,i){for(var r=this.gr.children,e=0,u=r.length;e<u;++e){var s=r[e].points;null!=s&&s.set(t,n,i)}return this},t.prototype.clone=function(n){return new t(n)},t.prototype.toPoints=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i){var e=n[i].points;if(null!=e)return e.toPoints(t)}return[]},t.prototype.serialize=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i){var e=n[i].points;if(null!=e)return e.serialize(t)}return-1},t}(),Xu=function(){this.localTransform=new t.Matrix,this.internalTransform=new t.Matrix,this.internalTransformParentInverse=new t.Matrix,this.rotation=0,this.size=new t.Point},Yu=function(){function t(){}return t.prepare=function(t){var n=t.editor=t.editor||new Xu;t.updateTransform();var i=t.parent;i instanceof fr?i.transform.internalTransform.copyTo(n.internalTransformParentInverse).invert():n.internalTransformParentInverse.identity(),t.transform.internalTransform.copyTo(n.internalTransform),n.rotation=t.transform.rotation,n.size.copyFrom(t.size),t.disallowOnTransformChange()},t.finalize=function(t){t.allowOnTransformChange(!0)},t.apply=function(t,n,i){var r=t.editor;if(null!=r){var e=r.localTransform;if(r.internalTransformParentInverse.copyTo(e).append(n).append(r.internalTransform),i)this.applyLocal(t,e);else{var u=r.size;this.applyLocal(t,e,u.x,u.y)}}},t.applyLocal=function(t,n,i,r){t.disallowUploadedUpdate();var e=n.a,u=n.b,s=n.c,h=n.d,o=n.tx,c=n.ty,f=t.transform,a=Math.atan2(-s,h),l=Math.atan2(+u,e);f.rotation=.5*(a+l);var v=.5*(l-a);f.skew.set(v,v);var b=f.pivot,d=b.x,g=b.y;if(f.position.set(o+(e*d+s*g),c+(u*d+h*g)),null!=i&&null!=r){var m=Math.sqrt(e*e+u*u),p=Math.sqrt(s*s+h*h);t.size.set(vu.toNormalized(i*m),vu.toNormalized(r*p))}t.allowUploadedUpdate()},t}(),Ku=function(){function n(n,i,r){this.shape=n,this.base=new t.Point(i,r);var e=n.size;this.shapeBase=new t.Point(e.x,e.y),this.transform=new t.Matrix,n.updateTransform(),n.transform.localTransform.copyTo(this.transform)}return n.prototype.isCompatible=function(t){return this.shape===t},n.prototype.reset=function(t,n,i){this.base.set(n,i);var r=t.size;this.shapeBase.copyFrom(r),t.updateTransform(),t.transform.localTransform.copyTo(this.transform)},n.prototype.update=function(t,i,r,e,u){var s=i/this.base.x,h=r/this.base.y,o=this.shapeBase,c=n.WORK_TRANSFORM;c.identity().append(this.transform).translate(-e,-u).scale(s,h).translate(+e,+u),t.disallowOnTransformChange(),Yu.applyLocal(t,c,o.x,o.y),t.allowOnTransformChange(!1)},n.WORK_TRANSFORM=new t.Matrix,n}(),Ju=function(){function n(n,i,r){this.ne=new t.Point,this.ie=new t.Rectangle,this.re=new t.Rectangle,this.gr=n,this.ee=[],this.wr=new t.Point(i,r)}return n.prototype.init=function(){},Object.defineProperty(n.prototype,"x",{get:function(){return this.wr.x},set:function(t){var n=this.wr;if(n.x!==t){var i=n.x;n.x=t,this.onChange(i,n.y)}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.wr.y},set:function(t){var n=this.wr;if(n.y!==t){var i=n.y;n.y=t,this.onChange(n.x,i)}},enumerable:!0,configurable:!0}),n.prototype.set=function(t,n){var i=!1,r=this.wr,e=r.x,u=r.y;null!=t&&e!==t&&(i=!0,r.x=t),null!=n&&u!==n&&(i=!0,r.y=n),i&&this.onChange(e,u)},n.prototype.clone=function(){var t=this.wr;return new n(this.gr,t.x,t.y)},n.prototype.copy=function(){},n.prototype.copyFrom=function(t){var n=t.x,i=t.y,r=this.wr,e=r.x,u=r.y;return e===n&&u===i||(r.x=n,r.y=i,this.onChange(e,u)),this},n.prototype.copyTo=function(t){return this.wr.copyTo(t)},n.prototype.equals=function(t){return this.wr.equals(t)},n.prototype.fit=function(){var t=this.gr;t.disallowOnTransformChange();var n=this.calcRect(this.re),i=this.wr;i.set(n.width,n.height),t.updateTransform();var r=t.transform,e=n.x+.5*n.width,u=n.y+.5*n.height,s=r.position,h=r.localTransform,o=h.a,c=h.b,f=h.c,a=h.d,l=r.pivot;s.set(s.x+(o*e+f*u)-(o*l.x+f*l.y),s.y+(c*e+a*u)-(c*l.x+a*l.y)),l.set(e,u),this.reset(t.children,this.ee,i),t.allowOnTransformChange(!0)},n.prototype.reset=function(t,n,i){for(var r=0,e=Math.min(n.length,t.length);r<e;++r){var u=t[r],s=n[r];if(!s.isCompatible(u)){n.length=r;break}s.reset(u,i.x,i.y)}t.length<n.length&&(n.length=t.length)},n.prototype.calcRect=function(t){var n=this.gr.children;if(n.length<=0)t.x=0,t.y=0,t.width=0,t.height=0;else{var i=this.ne,r=this.ie;n[0].getBoundsLocal(i,!1,t);for(var e=1,u=n.length;e<u;++e)n[e].getBoundsLocal(i,!1,r),t.enlarge(r)}return t},n.prototype.onChange=function(t,n){var i=this.gr,r=this.wr,e=i.transform.pivot;this.ue(i.children,this.ee,r.x,r.y,e.x,e.y,t,n),i.onSizeChange()},n.prototype.ue=function(t,n,i,r,e,u,s,h){for(var o=0,c=Math.min(n.length,t.length);o<c;++o){var f=t[o];if(!(a=n[o]).isCompatible(f)){n.length=o;break}a.update(f,i,r,e,u)}for(o=n.length,c=t.length;o<c;++o){var a;f=t[o],(a=this.newLayout(f,s,h)).update(f,i,r,e,u),n.push(a)}n.length!==t.length&&(n.length=t.length)},n.prototype.newLayout=function(t,n,i){return t.layout||new Ku(t,n,i)},n}(),Zu=function(n){function r(i,r,e){var u=n.call(this,i,void 0,r,e)||this;return u.base=new t.Point(r,e),u}return i(r,n),r.prototype.init=function(){this.base.copyFrom(this),this.cb()},r.prototype.fit=function(){},r}(t.ObservablePoint),qu=function(){function t(t){this.gr=t}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.gr.children;return 0<t.length&&t[t.length-1].stroke.enable},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].stroke.enable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].stroke.color:16777215},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].stroke.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].stroke.alpha:1},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].stroke.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].stroke.width:1},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].stroke.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].stroke.align:1},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].stroke.align=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].stroke.side:1},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].stroke.side=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].stroke.copy(t)},t.prototype.set=function(t,n,i,r,e){for(var u=this.gr.children,s=0,h=u.length;s<h;++s)u[s].stroke.set(t,n,i,r,e)},t.prototype.clone=function(){return new t(this.gr)},t.prototype.toObject=function(){var t=this.gr.children;return 0<t.length?t[t.length-1].stroke.toObject():{enable:!1,color:16777215,alpha:1,width:1,align:0,side:Qi.NONE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Qu=function(){function t(t){this.gr=t}return Object.defineProperty(t.prototype,"horizontal",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.align.horizontal:dr.CENTER},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.align.horizontal=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.align.vertical:gr.MIDDLE},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.align.vertical=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.align.copy(t)},t.prototype.set=function(t,n){for(var i=this.gr.children,r=0,e=i.length;r<e;++r)i[r].text.align.set(t,n)},t.prototype.toObject=function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.align.toObject():{horizontal:dr.CENTER,vertical:gr.MIDDLE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),$u=function(){function t(t){this.gr=t}return Object.defineProperty(t.prototype,"horizontal",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.offset.horizontal:0},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.offset.horizontal=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.offset.vertical:0},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.offset.vertical=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.offset.copy(t)},t.prototype.set=function(t,n){for(var i=this.gr.children,r=0,e=i.length;r<e;++r)i[r].text.offset.set(t,n)},t.prototype.toObject=function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.offset.toObject():{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),ts=function(){function t(t){this.gr=t}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.gr.children;return 0<t.length&&t[t.length-1].text.outline.enable},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.outline.enable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.outline.color:16777215},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.outline.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.outline.alpha:1},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.outline.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.outline.width:1},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.outline.width=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.outline.copy(t)},t.prototype.set=function(t,n,i,r){for(var e=this.gr.children,u=0,s=e.length;u<s;++u)e[u].text.outline.set(t,n,i,r)},t.prototype.clone=function(){return new t(this.gr)},t.prototype.toObject=function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.outline.toObject():{enable:!1,color:16777215,alpha:1,width:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),ns=function(){function t(t){this.gr=t}return Object.defineProperty(t.prototype,"horizontal",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.padding.horizontal:0},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.padding.horizontal=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.padding.vertical:0},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.padding.vertical=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.padding.copy(t)},t.prototype.set=function(t,n){for(var i=this.gr.children,r=0,e=i.length;r<e;++r)i[r].text.padding.set(t,n)},t.prototype.toObject=function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.padding.toObject():{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),is=function(){function t(t){this.gr=t}return Object.defineProperty(t.prototype,"horizontal",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.spacing.horizontal:0},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.spacing.horizontal=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.spacing.vertical:0},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.spacing.vertical=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.spacing.copy(t)},t.prototype.set=function(t,n){for(var i=this.gr.children,r=0,e=i.length;r<e;++r)i[r].text.spacing.set(t,n)},t.prototype.toObject=function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.spacing.toObject():{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),rs=function(){function t(t){this.gr=t,this.align=new Qu(t),this.offset=new $u(t),this.outline=new ts(t),this.spacing=new is(t),this.padding=new ns(t)}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.gr.children;return!(0<t.length)||t[t.length-1].text.enable},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.enable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.value:""},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.color:0},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.alpha:1},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.family:"auto"},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.family=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.size:24},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.size=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.weight:vr.NORMAL},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.weight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.style:br.NORMAL},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.style=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.direction:0},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipping",{get:function(){var t=this.gr.children;return 0<t.length&&t[t.length-1].text.clipping},set:function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.clipping=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){for(var n=this.gr.children,i=0,r=n.length;i<r;++i)n[i].text.copy(t);return this},t.prototype.set=function(t,n,i,r,e,u,s,h){for(var o=this.gr.children,c=0,f=o.length;c<f;++c)o[c].text.set(t,n,i,r,e,u,s,h);return this},t.prototype.toObject=function(){var t=this.gr.children;return 0<t.length?t[t.length-1].text.toObject():{value:"",color:0,alpha:1,family:"auto",size:24,weight:vr.NORMAL,align:this.align.toObject(),offset:this.offset.toObject(),style:br.NORMAL,outline:this.outline.toObject(),spacing:this.spacing.toObject(),direction:mr.LEFT_TO_RIGHT,padding:this.padding.toObject(),clipping:!1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),es=function(t){function n(n){void 0===n&&(n=ci.GROUP);var i=t.call(this,n)||this;return i.tag=new Tr,i.size=i.newGroupSize(),i.fill=i.newGroupFill(),i.stroke=i.newGroupStroke(),i.text=i.newGroupText(),i.points=i.newGroupPoints(),i}return i(n,t),n.prototype.newGroupSize=function(){var t=this;if(rr.IS_EDIT_MODE)return new Ju(this,rr.SIZE_X,rr.SIZE_Y);var n=new Zu((function(){var i=n.base;t.transform.scale.set(n.x/i.x,n.y/i.y)}),rr.SIZE_X,rr.SIZE_Y);return n},n.prototype.newGroupFill=function(){return new Hu(this)},n.prototype.newGroupStroke=function(){return new qu(this)},n.prototype.newGroupText=function(){return new rs(this)},n.prototype.newGroupPoints=function(){return new Vu(this)},n.prototype.getBoundsSize=function(){var t=this.size;return t instanceof Zu?t.base:t},n.prototype.onChildTransformChange=function(){t.prototype.onChildTransformChange.call(this),this.size.fit()},Object.defineProperty(n.prototype,"corner",{get:function(){var t=this.children;return 0<t.length?t[t.length-1].corner:qi.ALL},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].corner=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cursor",{get:function(){var t=this.children;return 0<t.length?t[t.length-1].cursor:""},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].cursor=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gradient",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n){var i=t[n].gradient;if(null!=i)return i}},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].gradient=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){var t=this.children;return 0<t.length?t[t.length-1].radius:.5},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].radius=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"image",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n){var i=t[n].image;if(null!=i)return i}},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].image=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"points",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n)if(null!=t[n].points)return this.se},set:function(t){},enumerable:!0,configurable:!0}),n.prototype.clone=function(){for(var t=(new(0,this.constructor)).copy(this),n=this.children,i=0,r=n.length;i<r;++i){var e=n[i].clone();e.parent=t,t.children.push(e)}return t.onChildTransformChange(),t.toDirty(),t},n.prototype.containsAbs=function(t,n,i,r){return!1},n}(fr),us=function(){function t(){}return t.deserialize=function(n,i){var r=t.create(),e=Bu.deserialize(n,i,r);return r.size.init(),e},t.create=function(){return new es},t}(),ss=function(){Ki[ci.GROUP]=Gu.create,Xi[ci.GROUP]=us.deserialize},hs=function(){function n(n,i,r){this.gr=n,this.wr=new t.Point(i,r)}return n.prototype.init=function(){},Object.defineProperty(n.prototype,"x",{get:function(){return this.wr.x},set:function(t){var n=this.wr;if(n.x!==t){var i=n.x;n.x=t,this.onChange(i,n.y)}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.wr.y},set:function(t){var n=this.wr;if(n.y!==t){var i=n.y;n.y=t,this.onChange(n.x,i)}},enumerable:!0,configurable:!0}),n.prototype.set=function(t,n){var i=!1,r=this.wr,e=r.x,u=r.y;null!=t&&e!==t&&(i=!0,r.x=t),null!=n&&u!==n&&(i=!0,r.y=n),i&&this.onChange(e,u)},n.prototype.clone=function(){var t=this.wr;return new n(this.gr,t.x,t.y)},n.prototype.copy=function(){},n.prototype.copyFrom=function(t){var n=t.x,i=t.y,r=this.wr,e=r.x,u=r.y;return e===n&&u===i||(r.x=n,r.y=i,this.onChange(e,u)),this},n.prototype.copyTo=function(t){return this.wr.copyTo(t)},n.prototype.equals=function(t){return this.wr.equals(t)},n.prototype.fit=function(){},n.prototype.onChange=function(t,n){this.gr.onSizeChange()},n}(),os=function(t){function n(n){return void 0===n&&(n=ci.GROUP_SHADOWED),t.call(this,n)||this}return i(n,t),n.prototype.newGroupSize=function(){return rr.IS_EDIT_MODE?new hs(this,rr.SIZE_X,rr.SIZE_Y):t.prototype.newGroupSize.call(this)},n}(es),cs=function(){function t(){}return t.deserialize=function(n,i){var r=t.create(),e=Bu.deserialize(n,i,r);return r.size.init(),e},t.create=function(){return new os},t}(),fs=function(){Ki[ci.GROUP_SHADOWED]=Gu.create,Xi[ci.GROUP_SHADOWED]=cs.deserialize},as=function(t){function n(n){return void 0===n&&(n=ci.RECTANGLE),t.call(this,n)||this}return i(n,t),n.prototype.clone=function(){return(new n).copy(this)},n.prototype.containsAbs=function(n,i,r,e){if(t.prototype.containsAbsBBox.call(this,n,i,r,e)){var u=this.fill,s=this.stroke;if(u.enable)return!0;var h=s.width,o=s.side;if(s.enable&&0<h&&o!==Qi.NONE){var c=Math.max(0,r-h),f=Math.max(0,e-h);if(!this.containsAbsBBox(n,i,c,f))return o===Qi.ALL||(n<=-c?i<=-f?0!=(o&Qi.TOP_OR_LEFT):+f<=i?0!=(o&Qi.BOTTOM_OR_LEFT):0!=(o&Qi.LEFT):+c<=n?i<=-f?0!=(o&Qi.TOP_OR_RIGHT):+f<=i?0!=(o&Qi.BOTTOM_OR_RIGHT):0!=(o&Qi.RIGHT):i<=-f?0!=(o&Qi.TOP):+f<=i&&0!=(o&Qi.BOTTOM))}}return!1},n}(Ir),ls=function(t){function n(n,i){void 0===i&&(i=ci.IMAGE);var r=t.call(this,i)||this;return null!=n&&(r.image=n,r.size.set(n.width,n.height)),r.fill.alpha=1,r}return i(n,t),n.prototype.clone=function(){return new n(this.image).copy(this)},n}(as),vs=function(){function t(){}return t.from=function(t){return ju.toImageElement(t).then((function(t){return new ls(t)}))},t.deserialize=function(n,i){return Bu.deserialize(n,i,t.create())},t.create=function(){return new ls},t}(),bs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.buffer,r=this.vertexOffset,e=this.indexOffset;i.clippingBuffer.update();var u=i.clippings,s=3*r;u[s+0]=1,u[s+1]=1,u[s+2]=0,u[s+3]=0,u[s+4]=1,u[s+5]=0,u[s+6]=1,u[s+7]=1,u[s+8]=0,u[(s+=9)+0]=0,u[s+1]=0,u[s+2]=0,u[(s+=3)+0]=1,u[s+1]=0,u[s+2]=0,u[s+3]=0,u[s+4]=0,u[s+5]=0,u[s+6]=0,u[s+7]=0,u[s+8]=0,u[s+9]=1,u[s+10]=0,u[s+11]=0,u[(s+=12)+0]=0,u[s+1]=0,u[s+2]=0,u[(s+=3)+0]=1,u[s+1]=1,u[s+2]=0,u[s+3]=0,u[s+4]=1,u[s+5]=0,u[s+6]=1,u[s+7]=1,u[s+8]=0,i.indexBuffer.update();var h=i.indices,o=3*e;return h[o+0]=r+0,h[o+1]=r+1,h[o+2]=r+3,h[o+3]=r+1,h[o+4]=r+2,h[o+5]=r+3,h[o+6]=r+0,h[o+7]=r+5,h[o+8]=r+4,h[o+9]=r+6,h[o+10]=r+2,h[o+11]=r+7,h[o+12]=r+4,h[o+13]=r+5,h[o+14]=r+9,h[o+15]=r+9,h[o+16]=r+8,h[o+17]=r+10,h[o+18]=r+8,h[o+19]=r+11,h[o+20]=r+10,h[o+21]=r+6,h[o+22]=r+7,h[o+23]=r+11,this.initText(),this.update(n),this},n.prototype.update=function(t){var n=this.buffer;this.updateType0Vertex(n,t),this.updateColor(n,t),this.updateType0Step(n,t),this.updateType0Uv(n,t),this.updateText(n,t)},n.prototype.updateType0Vertex=function(t,n){var i=n.size,r=i.x,e=i.y,u=this.toTransformLocalId(n),s=r!==this.sizeX||e!==this.sizeY,h=this.transformLocalId!==u,o=n.stroke,c=o.enable?o.width:0,f=o.align,a=this.strokeAlign!==f||this.strokeWidth!==c;if(s||h||a){this.sizeX=r,this.sizeY=e,this.transformLocalId=u,this.strokeWidth=NaN,this.textSpacingHorizontal=NaN,t.vertexBuffer.update();var l=f*c,v=.5*r+(0<=r?+l:-l),b=.5*e+(0<=e?+l:-l),d=n.transform.internalTransform,g=this.buffer.work;g.set(-v,-b),d.apply(g,g);var m=g.x,p=g.y;g.set(0,-b),d.apply(g,g);var w=g.x,D=g.y,T=w-m,O=D-p,S=d.tx,M=d.ty,E=S+(S-w),k=M+(M-D),I=S-T,N=M-O;this.worldSizeXHalf=this.calcLength(m,p,w,D),this.worldSizeYHalf=this.calcLength(m,p,I,N);var y=this.vertexOffset,x=t.vertices,C=2*y;x[C+0]=m,x[C+1]=p,x[C+2]=w,x[C+3]=D,x[C+4]=w+T,x[C+5]=D+O,x[(C+=6)+0]=S,x[C+1]=M,x[(C+=2)+0]=I,x[C+1]=N,x[C+2]=S,x[C+3]=M,x[C+4]=S,x[C+5]=M,x[C+6]=S+T,x[C+7]=M+O,x[(C+=8)+0]=S,x[C+1]=M,x[(C+=2)+0]=E-T,x[C+1]=k-O,x[C+2]=E,x[C+3]=k,x[C+4]=E+T,x[C+5]=k+O}},n.prototype.updateType0Step=function(t,n){var i=n.stroke,r=i.enable?i.width:0,e=i.align,u=i.side;if(this.strokeAlign!==e||this.strokeWidth!==r||this.strokeSide!==u){this.strokeWidth=r,this.strokeAlign=e,this.strokeSide=u,t.stepBuffer.update(),t.antialiasBuffer.update();var s=t.workStep;this.calcStep(this.worldSizeXHalf,r,s);var h=s[0],o=s[1],c=s[2];this.calcStep(this.worldSizeYHalf,r,s);var f=s[0],a=s[1],l=s[2],v=f,b=a;u&Qi.TOP||(v=1,b=l);var d=h,g=o;u&Qi.RIGHT||(d=1,g=c);var m=f,p=a;u&Qi.BOTTOM||(m=1,p=l);var w=h,D=o;u&Qi.LEFT||(w=1,D=c);var T=.5*(D+g),O=.5*(b+p),S=t.steps,M=t.antialiases,E=this.vertexOffset,k=2*E,I=4*E;S[k+0]=w,S[k+1]=v,M[I+0]=D,M[I+1]=b,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=0,S[k+1]=v,M[I+0]=T,M[I+1]=b,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=d,S[k+1]=v,M[I+0]=g,M[I+1]=b,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=0,S[k+1]=0,M[I+0]=T,M[I+1]=b,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=w,S[k+1]=0,M[I+0]=D,M[I+1]=O,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=0,S[k+1]=0,M[I+0]=D,M[I+1]=O,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=0,S[k+1]=0,M[I+0]=g,M[I+1]=O,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=d,S[k+1]=0,M[I+0]=g,M[I+1]=O,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=0,S[k+1]=0,M[I+0]=T,M[I+1]=p,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=w,S[k+1]=m,M[I+0]=D,M[I+1]=p,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=0,S[k+1]=m,M[I+0]=T,M[I+1]=p,M[I+2]=c,M[I+3]=l,I+=4,S[(k+=2)+0]=d,S[k+1]=m,M[I+0]=g,M[I+1]=p,M[I+2]=c,M[I+3]=l,k+=2,I+=4}},n.prototype.updateType0Uv=function(t,n){var i=this.toTexture(n),r=this.toTextureTransformId(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r;var e=this.toTextureUvs(i),u=e.x0,s=e.x1,h=e.x2,o=e.x3,c=e.y0,f=e.y1,a=e.y2,l=e.y3,v=.5*(u+h),b=.5*(c+a);t.uvBuffer.update();var d=t.uvs,g=2*this.vertexOffset;d[g+0]=u,d[g+1]=c,d[g+2]=.5*(u+s),d[g+3]=.5*(c+f),d[g+4]=s,d[g+5]=f,d[(g+=6)+0]=v,d[g+1]=b,d[(g+=2)+0]=.5*(u+o),d[g+1]=.5*(c+l),d[g+2]=v,d[g+3]=b,d[g+4]=v,d[g+5]=b,d[g+6]=.5*(s+h),d[g+7]=.5*(f+a),d[(g+=8)+0]=v,d[g+1]=b,d[(g+=2)+0]=o,d[g+1]=l,d[g+2]=.5*(o+h),d[g+3]=.5*(l+a),d[g+4]=h,d[g+5]=a}},n}(jr),ds=function(){function t(){}return t.create=function(t,n,i,r){var e=Cr.getTextCount(n,t.workCount),u=e.vertexCount,s=e.indexCount,h=12+u,o=8+s;return i+h<t.vertexCapacity&&r+o<t.indexCapacity?new bs(t,i,r,u,s,h,o).init(n):null},t}(),gs=function(){Ki[ci.IMAGE]=ds.create,Xi[ci.IMAGE]=vs.deserialize},ms=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){return t.prototype.init.call(this,n),this.initText(),this.update(n),this},n.prototype.update=function(t){var n=this.buffer;this.updateLabelVertex(n,t),this.updateLabelUv(n,t),this.updateText(n,t)},n.prototype.updateLabelVertex=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=this.toTransformLocalId(n),h=this.transformLocalId!==s;(u||h)&&(this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.textSpacingHorizontal=NaN)},n.prototype.updateLabelUv=function(t,n){this.texture=this.toTexture(n)},n}(jr),ps=function(){function t(){}return t.create=function(t,n,i,r){var e=Cr.getTextCount(n,t.workCount),u=e.vertexCount,s=e.indexCount,h=u,o=s;return i+h<t.vertexCapacity&&r+o<t.indexCapacity?new ms(t,i,r,u,s,h,o).init(n):null},t}(),ws=function(t){function n(n){return void 0===n&&(n=ci.LABEL),t.call(this,n)||this}return i(n,t),n.prototype.clone=function(){return(new n).copy(this)},n}(Ir),Ds=function(){function t(){}return t.deserialize=function(t,n){return Bu.deserialize(t,n,new ws)},t}(),Ts=function(){Ki[ci.LABEL]=ps.create,Xi[ci.LABEL]=Ds.deserialize},Os=function(t){function n(n,i,r,e,u,s,h,o,c){var f=t.call(this,n,i,r,e,u,s,h)||this;return f.pointId=NaN,f.pointCount=o,f.pointsClosed=c,f.pointsStyle=Yi.NONE,f.length=1,f}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.buffer,r=this.vertexOffset,e=this.indexOffset,u=this.pointCount,s=this.pointsClosed;if(2<=u){i.clippingBuffer.update();var h=i.clippings;i.indexBuffer.update();var o=i.indices,c=3*r,f=3*e,a=r;s||(h[c+0]=1,h[c+1]=0,h[c+2]=3,h[c+3]=0,h[c+4]=1,h[c+5]=5,c+=6,o[f+0]=a+0,o[f+1]=a+2,o[f+2]=a+1,o[f+3]=a+1,o[f+4]=a+2,o[f+5]=a+3,a+=2,f+=6);for(var l=s?0:1,v=u-l;l<v;++l)h[c+0]=1,h[c+1]=0,h[c+2]=3,h[c+3]=0,h[c+4]=1,h[c+5]=5,h[c+6]=1,h[c+7]=0,h[c+8]=4,h[c+9]=0,h[c+10]=1,h[c+11]=6,c+=12,o[f+0]=a+0,o[f+1]=a+2,o[f+2]=a+1,o[f+3]=a+1,o[f+4]=a+2,o[f+5]=a+3,o[f+6]=a+2,o[f+7]=a+4,o[f+8]=a+3,o[f+9]=a+3,o[f+10]=a+4,o[f+11]=a+5,a+=4,f+=12;h[c+0]=1,h[c+1]=0,h[c+2]=3,h[c+3]=0,h[c+4]=1,h[c+5]=5}return this.initText(),this.update(n),this},n.prototype.update=function(t){var n=this.buffer,i=t.points;if(null!=i&&2<=i.length){var r=i.id,e=r!==this.pointId,u=t.stroke,s=u.enable?u.width:0,h=s!==this.strokeWidth,o=this.toTransformLocalId(t),c=this.transformLocalId!==o,f=i.style,a=f!==this.pointsStyle;if(e||c||h||a){this.pointId=r,this.strokeWidth=s,this.transformLocalId=o,this.pointsStyle=f,n.vertexBuffer.update(),n.stepBuffer.update(),n.antialiasBuffer.update(),n.colorFillBuffer.update(),(e||c)&&(this.textSpacingHorizontal=NaN),e&&(this.textureTransformId=NaN);var l=this.vertexOffset,v=this.vertexCount-this.textVertexCount;this.updateLineVertexStepAndColorFill(n,i,s,t.transform.internalTransform,l,v)}}this.updateColor(n,t),this.updateLineUv(n,t),this.updateText(n,t)},n.prototype.updateColorFillAndStroke=function(t,n,i){this.updateColorStroke(t,n,i)},n.prototype.isCompatible=function(n){if(t.prototype.isCompatible.call(this,n)){var i=n.points;return i?this.pointCount===i.length&&this.pointsClosed===!!(i.style&Yi.CLOSED):0===this.pointCount&&!1===this.pointsClosed}return!1},n.prototype.updateLineVertexStepAndColorFill=function(t,n,i,r,e,u){var s=2*e,h=4*e,o=t.vertices,c=t.steps,f=t.antialiases,a=t.colorFills,l=n.length,v=n.values,b=n.segments,d=n.style,g=0!=(d&Yi.CLOSED),m=Zi.toScaleInvariant(d),p=0,w=0,D=0,T=0,O=0,S=0,M=0,E=0,k=0,I=0,N=0,y=0,x=!1,C=!1,j=4*e,A=0,B=t.work;B.set(v[0],v[1]),r.apply(B,B);var R=B.x,L=B.y,W=0<=zn(b,0),_=l-1<<1;B.set(v[_+0],v[_+1]),r.apply(B,B);var F=B.x,P=B.y,U=0<=zn(b,l-1),z=F,G=P,H=U;2<l&&(B.set(v[2],v[3]),r.apply(B,B),z=B.x,G=B.y,H=0<=zn(b,1)),g?(k=F,I=P,N=R,y=L,x=U,C=W):(M=R-(z-R),E=L-(G-L),k=R,I=L,N=z,y=G,x=W,C=H,D+=this.calcLength(k,I,N,y),o[s+0]=k,o[s+1]=I,o[s+2]=k,o[s+3]=I,c[s+0]=i,c[s+1]=m,c[s+2]=i,c[s+3]=m,f[h+0]=M,f[h+1]=E,f[h+2]=N,f[h+3]=y,f[h+4]=M,f[h+5]=E,f[h+6]=N,f[h+7]=y,a[h+0]=O,a[h+4]=O,s+=4,h+=8);for(var V=l-($=g?0:1);$<V;++$){if(M=k,E=I,k=N,I=y,x=C,$===l-2)N=F,y=P,C=U;else if(0===$)N=z,y=G,C=H;else if($<l-1){var X=$+1<<1;B.set(v[X+0],v[X+1]),r.apply(B,B),N=B.x,y=B.y,C=0<=zn(b,$+1)}else N=R,y=L,C=W;w=p,p=D,D+=this.calcLength(k,I,N,y);var Y=N,K=y,J=A;if(x){M=k-(N-k),E=I-(y-I),S=Math.max(S,O),T=w-A,Zi.toDash(T,i,d,B);for(var Z=B.x,q=B.y,Q=j;Q<h+8;Q+=4)a[Q+1]=Z,a[Q+2]=q,a[Q+3]=T;j=h+8,J=A,A=p}else C&&(Y=k+(k-M),K=I+(I-E));o[s+0]=k,o[s+1]=I,o[s+2]=k,o[s+3]=I,c[s+0]=i,c[s+1]=m,c[s+2]=i,c[s+3]=m,f[h+0]=M,f[h+1]=E,f[h+2]=Y,f[h+3]=K,f[h+4]=M,f[h+5]=E,f[h+6]=Y,f[h+7]=K,T=p-J,a[h+0]=T,a[h+4]=T,h+=8,o[(s+=4)+0]=k,o[s+1]=I,o[s+2]=k,o[s+3]=I,c[s+0]=i,c[s+1]=m,c[s+2]=i,c[s+3]=m,f[h+0]=M,f[h+1]=E,f[h+2]=Y,f[h+3]=K,f[h+4]=M,f[h+5]=E,f[h+6]=Y,f[h+7]=K,O=p-A,a[h+0]=O,a[h+4]=O,s+=4,h+=8}if(M=k,E=I,k=N,I=y,x=C,g?(N=z,y=G,C=H):(N=k+(k-M),y=I+(I-E),C=!1),w=p,p=D,Y=N,K=y,J=A,x){for(M=k-(N-k),E=I-(y-I),S=Math.max(S,O),T=w-A,Zi.toDash(T,i,d,B),Z=B.x,q=B.y,Q=j;Q<h+8;Q+=4)a[Q+1]=Z,a[Q+2]=q,a[Q+3]=T;j=h+8,J=A,A=p}else C&&(Y=k+(k-M),K=I+(I-E));if(o[s+0]=k,o[s+1]=I,o[s+2]=k,o[s+3]=I,c[s+0]=i,c[s+1]=m,c[s+2]=i,c[s+3]=m,f[h+0]=M,f[h+1]=E,f[h+2]=Y,f[h+3]=K,f[h+4]=M,f[h+5]=E,f[h+6]=Y,f[h+7]=K,T=p-J,S=Math.max(S,T),a[h+0]=T,a[h+4]=T,s+=4,h+=8,this.length=S,j<h)if(Zi.toDash(T,i,d,B),Z=B.x,q=B.y,g)for(var $=j;$<h;$+=4)a[$+1]=Z,a[$+2]=q,a[$+3]=-1;else for($=j;$<h;$+=4)a[$+1]=Z,a[$+2]=q,a[$+3]=T},n.prototype.updateLineUv=function(t,n){var i=this.toTexture(n),r=this.toTextureTransformId(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r;var e=this.pointCount;if(2<=e){var u=this.toTextureUvs(i),s=u.x0,h=u.x1,o=u.x2,c=u.x3,f=u.y0,a=u.y1,l=u.y2,v=u.y3,b=h-s,d=a-f,g=o-c,m=l-v;t.uvBuffer.update();var p=t.uvs,w=t.colorFills,D=this.pointsClosed,T=this.vertexOffset,O=2*T,S=4*T,M=1/Math.max(1e-5,this.length),E=0;D||(E=w[S]*M,p[O+0]=s+E*b,p[O+1]=f+E*d,p[O+2]=c+E*g,p[O+3]=v+E*m,O+=4,S+=8);for(var k=D?0:1,I=e-k;k<I;++k)E=w[S]*M,p[O+0]=s+E*b,p[O+1]=f+E*d,p[O+2]=c+E*g,p[O+3]=v+E*m,O+=4,E=w[S+=8]*M,p[O+0]=s+E*b,p[O+1]=f+E*d,p[O+2]=c+E*g,p[O+3]=v+E*m,O+=4,S+=8;E=w[S]*M,p[O+0]=s+E*b,p[O+1]=f+E*d,p[O+2]=c+E*g,p[O+3]=v+E*m}}},n}(jr),Ss=function(){function t(){}return t.create=function(t,n,i,r){var e=n.points,u=!!e&&0!=(e.style&Yi.CLOSED),s=e?e.length:0,h=Cr.getTextCount(n,t.workCount),o=h.vertexCount,c=h.indexCount,f=o,a=c;return 2<=s&&(u?(f+=4*s+2,a+=4*s):(f+=4*(s-2)+2+2,a+=4*(s-2)+2)),i+f<t.vertexCapacity&&r+a<t.indexCapacity?new Os(t,i,r,o,c,f,a,s,u).init(n):null},t}(),Ms=function(){function n(n,i,r,e){var u=[],s=0,h=0,o=0,c=0,f=i.length;if(2<=f){s=h=i[0],o=c=i[1];for(var a=2;a<f;a+=2){var l=i[a],v=i[a+1];s=Math.min(s,l),h=Math.max(h,l),o=Math.min(o,v),c=Math.max(c,v)}}var b=.5*(h+s),d=.5*(c+o);for(a=0;a<f;a+=2)l=i[a+0]-b,v=i[a+1]-d,u.push(l,v);var g=h-s,m=c-o;this.gr=n,this.he=void 0,this.oe=u.length,this.mr=u,this.pr=r.slice(0),this.ce=new t.Point(g,m),this.size=new t.Point(g,m),this.position=new t.Point(b,d),this._t=0,this.an=e}return Object.defineProperty(n.prototype,"length",{get:function(){return this.mr.length>>1},enumerable:!0,configurable:!0}),n.prototype.fitToParentSize=function(){var t=this.size,n=this.gr.size,i=n.x,r=n.y;if(1e-5<Math.abs(i-t.x)||1e-5<Math.abs(r-t.y)){t.set(i,r);var e=this.ce,u=1e-5<Math.abs(e.x),s=1e-5<Math.abs(e.y);if(u||s){var h=u?i/e.x:1,o=s?r/e.y:1,c=this.mr,f=this.he;if(null==f){f=[],this.he=f;for(var a=0,l=this.length<<1;a<l;a+=2){var v=c[a],b=c[a+1];c[a]=v*h,c[a+1]=b*o,f.push(v,b)}}else for(a=0,l=this.length<<1;a<l;a+=2)c[a]=f[a]*h,c[a+1]=f[a+1]*o;this._t+=1}}},Object.defineProperty(n.prototype,"id",{get:function(){return this.fitToParentSize(),this._t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this.fitToParentSize(),this.mr},set:function(t){this.set(t,void 0,void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"segments",{get:function(){return this.pr},set:function(t){this.set(void 0,t,void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this.an},set:function(t){this.set(void 0,void 0,t)},enumerable:!0,configurable:!0}),n.prototype.copy=function(t){return this.set(t.values,t.segments,t.style)},n.prototype.set=function(t,n,i){var r=!1,e=!1;if(null!=t){var u=this.mr,s=this.oe,h=t.length,o=Math.min(h,s);if(this.he=void 0,this._t+=1,u!==t){for(var c=0;c<o;++c)u[c]=t[c];for(c=o;c<h;++c)u.push(t[c]);s!==h?(u.length=h,this.oe=h,r=!0):e=!0}else s!==h?(this.oe=h,r=!0):e=!0}if(null!=n){var f=this.pr;if(this._t+=1,f!==n){var a=n.length;for(o=Math.min(f.length,a),c=0;c<o;++c)f[c]=n[c];for(c=o;c<a;++c)f.push(n[c]);f.length!==a&&(f.length=a)}e=!0}if(null!=i){var l=this.an;l!==i&&(this.an=i,(l&Yi.CLOSED)!=(i&Yi.CLOSED)?r=!0:e=!0)}if(r){var v=this.gr;v.uploaded=void 0,v.toDirty()}else e&&this.gr.updateUploaded();return this},n.prototype.clone=function(t){return new n(t,this.mr,this.pr,this.an)},n.prototype.toPoints=function(n){for(var i=[],r=this.values,e=0,u=r.length;e<u;e+=2){var s=new t.Point(r[e+0],r[e+1]);i.push(n.apply(s,s))}return i},n.prototype.serialize=function(t){return t.add("["+JSON.stringify(this.mr)+","+JSON.stringify(this.pr)+","+this.an+"]")},n}(),Es=function(t){function n(i,r,e,u){var s=t.call(this,ci.LINE)||this;return i instanceof n?s.copy(i):(s.fill.enable=!1,s.stroke.set(!0,void 0,void 0,e),s.points=new Ms(s,i,r,u),s.transform.position.copyFrom(s.points.position),s.size.copyFrom(s.points.size)),s}return i(n,t),n.prototype.clone=function(){return new n(this)},n}(Nr),ks=function(){function t(){}return t.toStrokeWidth=function(t,n){if(0<=t&&t<n.length)try{return JSON.parse(n[t])[3]}catch(t){}return 8},t.deserialize=function(n,i){var r=i.resources,e=n[15];if(0<=e&&e<r.length){var u=i.extensions.get(e);null==u&&(u=JSON.parse(r[e]),i.extensions.set(e,u));var s=t.create(u[0],u[1],rr.STROKE_WIDTH,u[2]);return Bu.deserialize(n,i,s)}return null},t.create=function(t,n,i,r){return new Es(t,n,i,r)},t}(),Is=function(){Ki[ci.LINE]=Ss.create,Xi[ci.LINE]=ks.deserialize},Ns=function(n){function r(t,i,r){return n.call(this,t,i,r,0,0)||this}return i(r,n),r.prototype.init=function(i){return n.prototype.init.call(this,i),this.texture=i.texture||t.Texture.WHITE,this},r.prototype.update=function(t){},r}(xr),ys=function(){function t(){}return t.create=function(t,n,i,r){return new Ns(t,i,r).init(n)},t}(),xs=function(t){function n(n){return void 0===n&&(n=ci.NULL),t.call(this,n)||this}return i(n,t),n.prototype.clone=function(){return(new n).copy(this)},n}(Ir),Cs=function(){function t(){}return t.deserialize=function(t,n){return Bu.deserialize(t,n,new xs)},t}(),js=function(){Ki[ci.NULL]=ys.create,Xi[ci.NULL]=Cs.deserialize};!function(t){t[t.NONE=0]="NONE",t[t.ID=1]="ID",t[t.POSITION=2]="POSITION",t[t.WIDTH=4]="WIDTH",t[t.HEIGHT=8]="HEIGHT",t[t.ROTATION=16]="ROTATION",t[t.SKEW=32]="SKEW",t[t.ALIGN=64]="ALIGN",t[t.REPLACING=128]="REPLACING",t[t.GROUPING=256]="GROUPING",t[t.FILL=512]="FILL",t[t.STROKE=1024]="STROKE",t[t.STROKE_SIDE=2048]="STROKE_SIDE",t[t.BORDER_RADIUS=4096]="BORDER_RADIUS",t[t.TEXT=8192]="TEXT",t[t.TEXTURE=16384]="TEXTURE",t[t.TAG=32768]="TAG",t[t.ACTION=65536]="ACTION",t[t.CURSOR=131072]="CURSOR",t[t.ORDER_IN_LAYER=262144]="ORDER_IN_LAYER",t[t.COORDINATE=127]="COORDINATE",t[t.SHAPE=1920]="SHAPE",t[t.SHAPE_ROUNDED=6016]="SHAPE_ROUNDED",t[t.SHAPE_SIDED=3968]="SHAPE_SIDED",t[t.SHAPE_SIDED_AND_ROUNDED=8064]="SHAPE_SIDED_AND_ROUNDED",t[t.LAYER=262144]="LAYER",t[t.PRIMITIVE=518143]="PRIMITIVE",t[t.SHADOW=0]="SHADOW",t[t.ALL=524287]="ALL"}(yu||(yu={}));var As=function(){function t(){}return t.get=function(t){return this.mappings[t]||yu.PRIMITIVE},t.contains=function(t,n){if(null!=t){if(this.get(t.type)&n)return!0;for(var i=t.children,r=0,e=i.length;r<e;++r)if(this.contains(i[r],n))return!0}return!1},t.set=function(t,n){this.mappings[t]=n},t.mappings={},t}(),Bs=function(){function t(){}return t.deserialize=function(n,i){return Bu.deserialize(n,i,t.create())},t.create=function(){return new as},t}(),Rs=function(){Ki[ci.RECTANGLE]=ds.create,Xi[ci.RECTANGLE]=Bs.deserialize,As.set(ci.RECTANGLE,yu.PRIMITIVE|yu.STROKE_SIDE)},Ls=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.buffer,r=this.vertexOffset,e=this.indexOffset;i.indexBuffer.update();var u=i.indices,s=3*e;return u[s+0]=r+0,u[s+1]=r+1,u[s+2]=r+2,u[s+3]=r+1,u[s+4]=r+3,u[s+5]=r+2,u[(s+=6)+0]=r+4,u[s+1]=r+5,u[s+2]=r+6,u[s+3]=r+5,u[s+4]=r+7,u[s+5]=r+6,u[(s+=6)+0]=r+8,u[s+1]=r+9,u[s+2]=r+10,u[s+3]=r+9,u[s+4]=r+11,u[s+5]=r+10,u[(s+=6)+0]=r+12,u[s+1]=r+13,u[s+2]=r+14,u[s+3]=r+13,u[s+4]=r+15,u[s+5]=r+14,u[(s+=6)+0]=r+16,u[s+1]=r+17,u[s+2]=r+20,u[s+3]=r+17,u[s+4]=r+21,u[s+5]=r+20,u[(s+=6)+0]=r+17,u[s+1]=r+18,u[s+2]=r+21,u[s+3]=r+18,u[s+4]=r+22,u[s+5]=r+21,u[(s+=6)+0]=r+19,u[s+1]=r+21,u[s+2]=r+24,u[s+3]=r+21,u[s+4]=r+25,u[s+5]=r+24,u[(s+=6)+0]=r+21,u[s+1]=r+23,u[s+2]=r+26,u[s+3]=r+23,u[s+4]=r+27,u[s+5]=r+26,u[(s+=6)+0]=r+24,u[s+1]=r+25,u[s+2]=r+28,u[s+3]=r+25,u[s+4]=r+30,u[s+5]=r+28,u[(s+=6)+0]=r+26,u[s+1]=r+27,u[s+2]=r+30,u[s+3]=r+27,u[s+4]=r+32,u[s+5]=r+30,u[(s+=6)+0]=r+29,u[s+1]=r+30,u[s+2]=r+33,u[s+3]=r+30,u[s+4]=r+34,u[s+5]=r+33,u[(s+=6)+0]=r+30,u[s+1]=r+31,u[s+2]=r+34,u[s+3]=r+31,u[s+4]=r+35,u[s+5]=r+34,this.initText(),this.update(n),this},n.prototype.update=function(t){var n=this.buffer;this.updateType1Vertex(n,t),this.updateType1Clipping(n,t),this.updateColor(n,t),this.updateType1Step(n,t),this.updateType1Uv(n,t),this.updateText(n,t)},n.prototype.updateType1Vertex=function(t,n){var i=n.size,r=i.x,e=i.y,u=this.toTransformLocalId(n),s=n.radius,h=r!==this.sizeX||e!==this.sizeY||s!==this.radius,o=this.transformLocalId!==u,c=n.stroke,f=c.enable?c.width:0,a=c.align,l=this.strokeAlign!==a||this.strokeWidth!==f;if(h||o||l){this.sizeX=r,this.sizeY=e,this.transformLocalId=u,this.radius=s,h&&(this.corner=NaN,this.textureTransformId=NaN),this.strokeWidth=NaN,this.textSpacingHorizontal=NaN,t.vertexBuffer.update();var v=a*f,b=.5*r+(0<=r?+v:-v),d=.5*e+(0<=e?+v:-v),g=Math.abs(b),m=Math.abs(d),p=s*Math.min(g,m),w=p/g,D=p/m,T=n.transform.internalTransform,O=t.work;O.set(-b,-d),T.apply(O,O);var S=O.x,M=O.y;O.set(0,-d),T.apply(O,O);var E=O.x,k=O.y,I=E-S,N=k-M,y=w*I,x=w*N,C=S+y,j=M+x,A=E+I,B=k+N,R=A-y,L=B-x,W=T.tx,_=T.ty,F=W-E,P=_-k,U=D*F,z=D*P,G=E+U,H=k+z,V=G-I,X=H-N,Y=V+y,K=X+x,J=G+I,Z=H+N,q=J-y,Q=Z-x,$=W-I,tt=_-N,nt=W+I,it=_+N,rt=W+F,et=_+P,ut=rt-U,st=et-z,ht=ut-I,ot=st-N,ct=ht+y,ft=ot+x,at=ut+I,lt=st+N,vt=at-y,bt=lt-x,dt=rt-I,gt=et-N,mt=dt+y,pt=gt+x,wt=rt+I,Dt=et+N,Tt=wt-y,Ot=Dt-x;this.worldSizeXHalf=this.calcLength(S,M,E,k),this.worldSizeYHalf=this.calcLength(S,M,$,tt),this.worldSizeR=this.calcLength(S,M,C,j);var St=this.vertexOffset,Mt=t.vertices,Et=2*St;Mt[Et+0]=S,Mt[Et+1]=M,Mt[Et+2]=C,Mt[Et+3]=j,Mt[Et+4]=V,Mt[Et+5]=X,Mt[Et+6]=Y,Mt[Et+7]=K,Mt[(Et+=8)+0]=R,Mt[Et+1]=L,Mt[Et+2]=A,Mt[Et+3]=B,Mt[Et+4]=q,Mt[Et+5]=Q,Mt[Et+6]=J,Mt[Et+7]=Z,Mt[(Et+=8)+0]=ht,Mt[Et+1]=ot,Mt[Et+2]=ct,Mt[Et+3]=ft,Mt[Et+4]=dt,Mt[Et+5]=gt,Mt[Et+6]=mt,Mt[Et+7]=pt,Mt[(Et+=8)+0]=vt,Mt[Et+1]=bt,Mt[Et+2]=at,Mt[Et+3]=lt,Mt[Et+4]=Tt,Mt[Et+5]=Ot,Mt[Et+6]=wt,Mt[Et+7]=Dt,Mt[(Et+=8)+0]=C,Mt[Et+1]=j,Mt[Et+2]=E,Mt[Et+3]=k,Mt[Et+4]=R,Mt[Et+5]=L,Mt[(Et+=6)+0]=V,Mt[Et+1]=X,Mt[Et+2]=Y,Mt[Et+3]=K,Mt[Et+4]=G,Mt[Et+5]=H,Mt[Et+6]=q,Mt[Et+7]=Q,Mt[Et+8]=J,Mt[Et+9]=Z,Mt[(Et+=10)+0]=$,Mt[Et+1]=tt,Mt[Et+2]=W,Mt[Et+3]=_,Mt[Et+4]=W,Mt[Et+5]=_,Mt[Et+6]=nt,Mt[Et+7]=it,Mt[(Et+=8)+0]=ht,Mt[Et+1]=ot,Mt[Et+2]=ct,Mt[Et+3]=ft,Mt[Et+4]=ut,Mt[Et+5]=st,Mt[Et+6]=vt,Mt[Et+7]=bt,Mt[Et+8]=at,Mt[Et+9]=lt,Mt[(Et+=10)+0]=mt,Mt[Et+1]=pt,Mt[Et+2]=rt,Mt[Et+3]=et,Mt[Et+4]=Tt,Mt[Et+5]=Ot}},n.prototype.updateType1Clipping=function(t,n){var i=n.corner;if(i!==this.corner){this.corner=i,this.strokeWidth=NaN,t.clippingBuffer.update();var r=t.clippings,e=3*this.vertexOffset,u=1-this.worldSizeR/this.worldSizeXHalf,s=1-this.worldSizeR/this.worldSizeYHalf;i&qi.TOP_LEFT?(r[e+0]=1,r[e+1]=1,r[e+2]=1,r[(e+=3)+0]=0,r[e+1]=1,r[e+2]=1,r[(e+=3)+0]=1,r[e+1]=0,r[e+2]=1,r[(e+=3)+0]=0,r[e+1]=0,r[e+2]=1,e+=3):(r[e+0]=1,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=s,r[e+2]=0,e+=3),i&qi.TOP_RIGHT?(r[e+0]=0,r[e+1]=1,r[e+2]=1,r[(e+=3)+0]=1,r[e+1]=1,r[e+2]=1,r[(e+=3)+0]=0,r[e+1]=0,r[e+2]=1,r[(e+=3)+0]=1,r[e+1]=0,r[e+2]=1,e+=3):(r[e+0]=u,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=s,r[e+2]=0,e+=3),i&qi.BOTTOM_LEFT?(r[e+0]=1,r[e+1]=0,r[e+2]=1,r[(e+=3)+0]=0,r[e+1]=0,r[e+2]=1,r[(e+=3)+0]=1,r[e+1]=1,r[e+2]=1,r[(e+=3)+0]=0,r[e+1]=1,r[e+2]=1,e+=3):(r[e+0]=1,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=1,r[e+2]=0,e+=3),i&qi.BOTTOM_RIGHT?(r[e+0]=0,r[e+1]=0,r[e+2]=1,r[(e+=3)+0]=1,r[e+1]=0,r[e+2]=1,r[(e+=3)+0]=0,r[e+1]=1,r[e+2]=1,r[(e+=3)+0]=1,r[e+1]=1,r[e+2]=1,e+=3):(r[e+0]=u,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=1,r[e+2]=0,e+=3),r[e+0]=u,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=0,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=0,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=0,r[e+2]=0,r[(e+=3)+0]=0,r[e+1]=0,r[e+2]=0,r[(e+=3)+0]=0,r[e+1]=0,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=0,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=0,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=1,r[e+1]=s,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=0,r[e+1]=1,r[e+2]=0,r[(e+=3)+0]=u,r[e+1]=1,r[e+2]=0,e+=3}},n.prototype.updateType1Step=function(t,n){var i=n.stroke,r=i.enable?i.width:0,e=i.align,u=n.stroke.side;if(this.strokeAlign!==e||this.strokeWidth!==r||u!==this.strokeSide){this.strokeWidth=r,this.strokeAlign=e,this.strokeSide=u,t.stepBuffer.update(),t.antialiasBuffer.update();var s=t.workStep;this.calcStep(this.worldSizeR,r,s);var h=s[0],o=s[1],c=s[2];this.calcStep(this.worldSizeXHalf,r,s);var f=s[0],a=s[1],l=s[2];this.calcStep(this.worldSizeYHalf,r,s);var v=s[0],b=s[1],d=s[2],g=this.vertexOffset,m=t.steps,p=t.antialiases,w=2*g,D=4*g,T=1-this.worldSizeR/this.worldSizeXHalf,O=1-this.worldSizeR/this.worldSizeYHalf,S=v,M=b,E=h,k=o;u&Qi.TOP||(S=1,M=d,E=1,k=c);var I=f,N=a,y=h,x=o;u&Qi.RIGHT||(I=1,N=l,y=1,x=c);var C=v,j=b,A=h,B=o;u&Qi.BOTTOM||(C=1,j=d,A=1,B=c);var R=f,L=a,W=h,_=o;u&Qi.LEFT||(R=1,L=l,W=1,_=c);var F=.5*(L+N),P=.5*(M+j),U=this.corner;U&qi.TOP_LEFT?(m[w+0]=W,m[w+1]=E,p[D+0]=_,p[D+1]=k,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=0,m[w+1]=E,p[D+0]=_,p[D+1]=k,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=W,m[w+1]=0,p[D+0]=_,p[D+1]=k,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=0,m[w+1]=0,p[D+0]=_,p[D+1]=k,p[D+2]=c,p[D+3]=c,w+=2,D+=4):(m[w+0]=R,m[w+1]=S,p[D+0]=L,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R*T,m[w+1]=S,p[D+0]=L,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R,m[w+1]=S*O,p[D+0]=L,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R*T,m[w+1]=S*O,p[D+0]=L,p[D+1]=M,p[D+2]=l,p[D+3]=d,w+=2,D+=4),U&qi.TOP_RIGHT?(m[w+0]=0,m[w+1]=E,p[D+0]=x,p[D+1]=k,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=y,m[w+1]=E,p[D+0]=x,p[D+1]=k,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=0,m[w+1]=0,p[D+0]=x,p[D+1]=k,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=y,m[w+1]=0,p[D+0]=x,p[D+1]=k,p[D+2]=c,p[D+3]=c,w+=2,D+=4):(m[w+0]=I*T,m[w+1]=S,p[D+0]=N,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I,m[w+1]=S,p[D+0]=N,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I*T,m[w+1]=S*O,p[D+0]=N,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I,m[w+1]=S*O,p[D+0]=N,p[D+1]=M,p[D+2]=l,p[D+3]=d,w+=2,D+=4),U&qi.BOTTOM_LEFT?(m[w+0]=W,m[w+1]=0,p[D+0]=_,p[D+1]=B,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=0,m[w+1]=0,p[D+0]=_,p[D+1]=B,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=W,m[w+1]=A,p[D+0]=_,p[D+1]=B,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=0,m[w+1]=A,p[D+0]=_,p[D+1]=B,p[D+2]=c,p[D+3]=c,w+=2,D+=4):(m[w+0]=R,m[w+1]=C*O,p[D+0]=L,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R*T,m[w+1]=C*O,p[D+0]=L,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R,m[w+1]=C,p[D+0]=L,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R*T,m[w+1]=C,p[D+0]=L,p[D+1]=j,p[D+2]=l,p[D+3]=d,w+=2,D+=4),U&qi.BOTTOM_RIGHT?(m[w+0]=0,m[w+1]=0,p[D+0]=x,p[D+1]=B,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=y,m[w+1]=0,p[D+0]=x,p[D+1]=B,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=0,m[w+1]=A,p[D+0]=x,p[D+1]=B,p[D+2]=c,p[D+3]=c,D+=4,m[(w+=2)+0]=y,m[w+1]=A,p[D+0]=x,p[D+1]=B,p[D+2]=c,p[D+3]=c,w+=2,D+=4):(m[w+0]=I*T,m[w+1]=C*O,p[D+0]=N,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I,m[w+1]=C*O,p[D+0]=N,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I*T,m[w+1]=C,p[D+0]=N,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I,m[w+1]=C,p[D+0]=N,p[D+1]=j,p[D+2]=l,p[D+3]=d,w+=2,D+=4),m[w+0]=R*T,m[w+1]=S,p[D+0]=L,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=0,m[w+1]=S,p[D+0]=F,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I*T,m[w+1]=S,p[D+0]=F,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R,m[w+1]=S*O,p[D+0]=L,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R*T,m[w+1]=S*O,p[D+0]=L,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=0,m[w+1]=S*O,p[D+0]=F,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I*T,m[w+1]=S*O,p[D+0]=N,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I,m[w+1]=S*O,p[D+0]=N,p[D+1]=M,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R,m[w+1]=0,p[D+0]=L,p[D+1]=P,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=0,m[w+1]=0,p[D+0]=L,p[D+1]=P,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=0,m[w+1]=0,p[D+0]=N,p[D+1]=P,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I,m[w+1]=0,p[D+0]=N,p[D+1]=P,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R,m[w+1]=C*O,p[D+0]=L,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R*T,m[w+1]=C*O,p[D+0]=L,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=0,m[w+1]=C*O,p[D+0]=F,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I*T,m[w+1]=C*O,p[D+0]=N,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I,m[w+1]=C*O,p[D+0]=N,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=R*T,m[w+1]=C,p[D+0]=L,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=0,m[w+1]=C,p[D+0]=F,p[D+1]=j,p[D+2]=l,p[D+3]=d,D+=4,m[(w+=2)+0]=I*T,m[w+1]=C,p[D+0]=N,p[D+1]=j,p[D+2]=l,p[D+3]=d,w+=2,D+=4}},n.prototype.updateType1Uv=function(t,n){var i=this.toTexture(n),r=this.toTextureTransformId(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r;var e=this.toTextureUvs(i),u=e.x0,s=e.x1,h=e.x2,o=e.x3,c=e.y0,f=e.y1,a=e.y2,l=e.y3,v=.5*(u+s),b=.5*(c+f),d=.5*(o+h),g=.5*(l+a),m=.5*this.worldSizeR/this.worldSizeXHalf,p=.5*this.worldSizeR/this.worldSizeYHalf,w=m*(s-u),D=m*(f-c),T=p*(o-u),O=p*(l-c);t.uvBuffer.update();var S=t.uvs,M=2*this.vertexOffset;S[M+0]=u,S[M+1]=c,S[M+2]=u+w,S[M+3]=c+D,S[M+4]=u+T,S[M+5]=c+O,S[M+6]=u+w+T,S[M+7]=c+D+O,S[(M+=8)+0]=s-w,S[M+1]=f-D,S[M+2]=s,S[M+3]=f,S[M+4]=s-w+T,S[M+5]=f-D+O,S[M+6]=s+T,S[M+7]=f+O,S[(M+=8)+0]=o-T,S[M+1]=l-O,S[M+2]=o+w-T,S[M+3]=l+D-O,S[M+4]=o,S[M+5]=l,S[M+6]=o+w,S[M+7]=l+D,S[(M+=8)+0]=h-w-T,S[M+1]=a-D-O,S[M+2]=h-T,S[M+3]=a-O,S[M+4]=h-w,S[M+5]=a-D,S[M+6]=h,S[M+7]=a,S[(M+=8)+0]=u+w,S[M+1]=c+D,S[M+2]=v,S[M+3]=b,S[M+4]=s-w,S[M+5]=f-D,S[(M+=6)+0]=u+T,S[M+1]=c+O,S[M+2]=u+T+w,S[M+3]=c+O+D,S[M+4]=v+T,S[M+5]=b+O,S[M+6]=s+T-w,S[M+7]=f+O-D,S[M+8]=s+T,S[M+9]=f+O;var E=.5*(u+h),k=.5*(c+a);S[(M+=10)+0]=.5*(u+o),S[M+1]=.5*(c+l),S[M+2]=E,S[M+3]=k,S[M+4]=E,S[M+5]=k,S[M+6]=.5*(s+h),S[M+7]=.5*(f+a),S[(M+=8)+0]=o-T,S[M+1]=l-O,S[M+2]=o-T+w,S[M+3]=l-O+D,S[M+4]=d-T,S[M+5]=g-O,S[M+6]=h-T-w,S[M+7]=a-O-D,S[M+8]=h-T,S[M+9]=a-O,S[(M+=10)+0]=o+w,S[M+1]=l+D,S[M+2]=d,S[M+3]=g,S[M+4]=h-w,S[M+5]=a-D}},n}(jr),Ws=function(){function t(){}return t.create=function(t,n,i,r){var e=Cr.getTextCount(n,t.workCount),u=e.vertexCount,s=e.indexCount,h=36+u,o=24+s;return i+h<t.vertexCapacity&&r+o<t.indexCapacity?new Ls(t,i,r,u,s,h,o).init(n):null},t}(),_s=function(t){function n(n){return void 0===n&&(n=ci.RECTANGLE_ROUNDED),t.call(this,n)||this}return i(n,t),n.prototype.clone=function(){return(new n).copy(this)},n.prototype.fe=function(t,n,i,r,e,u){var s=-i+e;if(t<=s)return n<=(h=-r+e)&&u&qi.TOP_LEFT?(c=t-s)*c+(f=n-h)*f<=e*e:(o=+r-e)<=n&&u&qi.BOTTOM_LEFT?(c=t-s)*c+(f=n-o)*f<=e*e:-i<=t;var h,o,c,f,a=+i-e;return a<=t?n<=(h=-r+e)&&u&qi.TOP_RIGHT?(c=t-a)*c+(f=n-h)*f<=e*e:(o=+r-e)<=n&&u&qi.BOTTOM_RIGHT?(c=t-a)*c+(f=n-o)*f<=e*e:t<=+i:-r<=n&&n<=+r},n.prototype.containsAbs=function(n,i,r,e){if(t.prototype.containsAbsBBox.call(this,n,i,r,e)){var u=this.fill,s=this.stroke,h=s.enable?s.width:0;if(u.enable||0<h){var o=this.radius*Math.min(r,e),c=this.corner,f=s.side;if(this.fe(n,i,r,e,o,c)){if(u.enable)return!0;var a=Math.max(0,r-h),l=Math.max(0,e-h),v=Math.max(0,o-h);if(!this.fe(n,i,a,l,v,c)){if(f===Qi.ALL)return!0;if(n<=-a+v){var b=0!=(f&Qi.LEFT);return i<=-l+v?!(!(d=f&Qi.TOP)||!b)||(d?-a<=i:!!b&&n<=-a):+l-v<=i?!(!(g=f&Qi.BOTTOM)||!b)||(g?+a<=i:!!b&&n<=-a):b}if(+a-v<=n){var d,g,m=0!=(f&Qi.RIGHT);return i<=-l+v?!(!(d=f&Qi.TOP)||!m)||(d?-a<=i:!!m&&+a<=n):+l-v<=i?!(!(g=f&Qi.BOTTOM)||!m)||(g?+a<=i:!!m&&+a<=n):m}return i<=-l+v?0!=(f&Qi.TOP):+l-v<=i&&0!=(f&Qi.BOTTOM)}}}}return!1},n}(Ir),Fs=function(){function t(){}return t.deserialize=function(n,i){return Bu.deserialize(n,i,t.create())},t.create=function(){return new _s},t}(),Ps=function(){Ki[ci.RECTANGLE_ROUNDED]=Ws.create,Xi[ci.RECTANGLE_ROUNDED]=Fs.deserialize,As.set(ci.RECTANGLE_ROUNDED,yu.PRIMITIVE|yu.STROKE_SIDE|yu.BORDER_RADIUS)},Us=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.buffer,r=this.vertexOffset,e=this.indexOffset;i.clippingBuffer.update();var u=i.clippings,s=3*r;u[s+0]=0,u[s+1]=0,u[s+2]=0,u[s+3]=1,u[s+4]=0,u[s+5]=0,u[s+6]=1,u[s+7]=0,u[s+8]=0,u[s+9]=0,u[s+10]=1,u[s+11]=0,u[s+12]=0,u[s+13]=1,u[s+14]=0,u[s+15]=1,u[s+16]=0,u[s+17]=0,u[s+18]=1,u[s+19]=0,u[s+20]=0,i.indexBuffer.update();var h=i.indices,o=3*e;return h[o+0]=r+0,h[o+1]=r+1,h[o+2]=r+2,h[o+3]=r+0,h[o+4]=r+3,h[o+5]=r+4,h[o+6]=r+0,h[o+7]=r+5,h[o+8]=r+6,this.initText(),this.update(n),this},n.prototype.update=function(t){var n=this.buffer;this.updateTriangleVertex(n,t),this.updateColor(n,t),this.updateTriangleStep(n,t),this.updateTriangleUv(n,t),this.updateText(n,t)},n.prototype.updateTriangleVertex=function(t,n){var i=n.size,r=i.x,e=i.y,u=this.toTransformLocalId(n),s=r!==this.sizeX||e!==this.sizeY,h=this.transformLocalId!==u,o=n.stroke,c=o.enable?o.width:0,f=o.align,a=this.strokeAlign!==f||this.strokeWidth!==c;if(s||h||a){this.sizeX=r,this.sizeY=e,this.transformLocalId=u,s&&(this.textureTransformId=NaN),this.strokeWidth=NaN,this.textSpacingHorizontal=NaN,t.vertexBuffer.update();var l=f*c,v=.5*r+(0<=r?+l:-l),b=.5*e+(0<=e?+l:-l),d=2*v*b/(v+Math.sqrt(v*v+4*b*b)),g=n.transform.internalTransform,m=t.work;m.set(0,-b),g.apply(m,m);var p=m.x,w=m.y;m.set(+v,0),g.apply(m,m);var D=g.tx,T=g.ty,O=D-p,S=T-w,M=m.x+O,E=m.y+S,k=D+(D-m.x)+O,I=T+(T-m.y)+S;m.set(0,b-d),g.apply(m,m);var N=m.x,y=m.y,x=D+O,C=T+S;this.worldSizeXHalf=this.calcLength(M,E,x,C),this.worldSizeYHalf=this.calcLength(p,w,D,T),this.worldSizeR=this.calcLength(x,C,N,y);var j=this.vertexOffset,A=t.vertices,B=2*j;A[B+0]=N,A[B+1]=y,A[B+2]=p,A[B+3]=w,A[B+4]=M,A[B+5]=E,A[B+6]=M,A[B+7]=E,A[B+8]=k,A[B+9]=I,A[B+10]=k,A[B+11]=I,A[B+12]=p,A[B+13]=w}},n.prototype.updateTriangleStep=function(t,n){var i=n.stroke,r=i.enable?i.width:0,e=i.align;if(this.strokeAlign!==e||this.strokeWidth!==r){this.strokeWidth=r,this.strokeAlign=e,t.stepBuffer.update(),t.antialiasBuffer.update();var u=t.workStep;this.calcStep(this.worldSizeR,r,u);var s=u[0],h=u[1],o=u[2],c=this.vertexOffset,f=this.vertexCount-this.textVertexCount;this.updateStep(t,c,f,s,s,h,h,o,o)}},n.prototype.updateTriangleUv=function(t,n){var i=this.toTexture(n),r=this.toTextureTransformId(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r;var e=this.toTextureUvs(i),u=e.x0,s=e.x1,h=e.x2,o=e.x3,c=e.y0,f=e.y1,a=e.y2,l=e.y3,v=.5*(u+s),b=.5*(c+f),d=1-.5*this.worldSizeR/this.worldSizeYHalf,g=v+d*(o-u),m=b+d*(l-c);t.uvBuffer.update();var p=t.uvs,w=2*this.vertexOffset;p[w+0]=g,p[w+1]=m,p[w+2]=v,p[w+3]=b,p[w+4]=h,p[w+5]=a,p[w+6]=h,p[w+7]=a,p[w+8]=o,p[w+9]=l,p[w+10]=o,p[w+11]=l,p[w+12]=v,p[w+13]=b}},n}(jr),zs=function(){function t(){}return t.create=function(t,n,i,r){var e=Cr.getTextCount(n,t.workCount),u=e.vertexCount,s=e.indexCount,h=7+u,o=3+s;return i+h<t.vertexCapacity&&r+o<t.indexCapacity?new Us(t,i,r,u,s,h,o).init(n):null},t}(),Gs=function(t){function n(n){return void 0===n&&(n=ci.TRIANGLE),t.call(this,n)||this}return i(n,t),n.prototype.clone=function(){return(new n).copy(this)},n.prototype.fe=function(t,n,i,r,e){return+i*t+r-n<=0&&-i*t+r-n<=0&&n<=e},n.prototype.containsAbs=function(n,i,r,e){if(t.prototype.containsAbsBBox.call(this,n,i,r,e)){var u=2*e/r;if(this.fill.enable){if(this.fe(n,i,u,-e,+e))return!0}else{var s=this.stroke,h=s.width;if(s.enable&&0<h&&this.fe(n,i,u,-e,+e)){var o=2*r*e/(r+Math.sqrt(r*r+4*e*e)),c=e-o,f=c+(-e-c)*Math.max(0,o-h)/o,a=e-h;if(!this.fe(n,i,u,f,a))return!0}}}return!1},n}(Ir),Hs=function(){function t(){}return t.deserialize=function(n,i){return Bu.deserialize(n,i,t.create())},t.create=function(){return new Gs},t}(),Vs=function(){Ki[ci.TRIANGLE]=zs.create,Xi[ci.TRIANGLE]=Hs.deserialize},Xs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.buffer,r=this.vertexOffset,e=this.indexOffset;i.indexBuffer.update();var u=i.indices,s=3*e;return u[s+0]=r+0,u[s+1]=r+1,u[s+2]=r+3,u[s+3]=r+1,u[s+4]=r+2,u[s+5]=r+3,u[s+6]=r+4,u[s+7]=r+5,u[s+8]=r+7,u[s+9]=r+5,u[s+10]=r+6,u[s+11]=r+7,u[s+12]=r+8,u[s+13]=r+9,u[s+14]=r+11,u[s+15]=r+9,u[s+16]=r+10,u[s+17]=r+11,u[s+18]=r+12,u[s+19]=r+13,u[s+20]=r+16,u[s+21]=r+13,u[s+22]=r+14,u[s+23]=r+16,u[s+24]=r+14,u[s+25]=r+15,u[s+26]=r+16,u[s+27]=r+12,u[s+28]=r+16,u[s+29]=r+19,u[s+30]=r+16,u[s+31]=r+17,u[s+32]=r+19,u[s+33]=r+17,u[s+34]=r+18,u[s+35]=r+19,u[s+36]=r+12,u[s+37]=r+19,u[s+38]=r+13,u[s+39]=r+19,u[s+40]=r+20,u[s+41]=r+13,u[s+42]=r+20,u[s+43]=r+21,u[s+44]=r+13,this.initText(),this.update(n),this},n.prototype.update=function(t){var n=this.buffer;this.updateTriangleRoundedVertex(n,t),this.updateTriangleRoundedClipping(n,t),this.updateColor(n,t),this.updateTriangleRoundedStep(n,t),this.updateTriangleRoundedUv(n,t),this.updateText(n,t)},n.prototype.updateTriangleRoundedVertex=function(t,n){var i=n.size,r=i.x,e=i.y,u=this.toTransformLocalId(n),s=n.radius,h=s!==this.radius,o=r!==this.sizeX||e!==this.sizeY,c=this.transformLocalId!==u,f=n.stroke,a=f.enable?f.width:0,l=f.align,v=this.strokeAlign!==l||this.strokeWidth!==a;if(o||c||h||v){this.sizeX=r,this.sizeY=e,this.transformLocalId=u,this.radius=s,h&&(this.corner=NaN),(o||h)&&(this.textureTransformId=NaN),this.strokeWidth=NaN,this.textSpacingHorizontal=NaN,t.vertexBuffer.update();var b=l*a,d=.5*r+(0<=r?+b:-b),g=.5*e+(0<=e?+b:-b),m=Math.sqrt(d*d+4*g*g),p=2*d*g/(d+m),w=p*s/(2*g),D=.5*(m-p)*s/m,T=w*m/(2*d),O=n.transform.internalTransform,S=t.work;S.set(0,-g),O.apply(S,S);var M=S.x,E=S.y;S.set(+d,0),O.apply(S,S);var k=O.tx,I=O.ty,N=k-M,y=I-E,x=S.x+N,C=S.y+y,j=k+(k-S.x)+N,A=I+(I-S.y)+y,B=x-M,R=C-E,L=M+D*B,W=E+D*R,_=x-w*B,F=C-w*R,P=T*(j-x),U=T*(A-C),z=x+P,G=C+U,H=j-P,V=A-U,X=M-j,Y=E-A,K=j+w*X,J=A+w*Y,Z=M-D*X,q=E-D*Y;S.set(0,g-p),O.apply(S,S);var Q=S.x,$=S.y,tt=M+s*(Q-M),nt=E+s*($-E),it=x+s*(Q-x),rt=C+s*($-C),et=j+s*(Q-j),ut=A+s*($-A),st=k+N,ht=I+y;this.worldSizeXHalf=T,this.worldSizeYHalf=w,this.worldSizeZHalf=D,this.worldSizeWHalf=1-.5*p/g,this.worldSizeR=this.calcLength(st,ht,Q,$);var ot=this.vertexOffset,ct=t.vertices,ft=2*ot;ct[ft+0]=tt,ct[ft+1]=nt,ct[ft+2]=Z,ct[ft+3]=q,ct[ft+4]=M,ct[ft+5]=E,ct[ft+6]=L,ct[ft+7]=W,ct[ft+8]=it,ct[ft+9]=rt,ct[ft+10]=_,ct[ft+11]=F,ct[ft+12]=x,ct[ft+13]=C,ct[ft+14]=z,ct[ft+15]=G,ct[ft+16]=et,ct[ft+17]=ut,ct[ft+18]=H,ct[ft+19]=V,ct[ft+20]=j,ct[ft+21]=A,ct[ft+22]=K,ct[ft+23]=J,ct[ft+24]=Q,ct[ft+25]=$,ct[ft+26]=tt,ct[ft+27]=nt,ct[ft+28]=L,ct[ft+29]=W,ct[ft+30]=_,ct[ft+31]=F,ct[ft+32]=it,ct[ft+33]=rt,ct[ft+34]=z,ct[ft+35]=G,ct[ft+36]=H,ct[ft+37]=V,ct[ft+38]=et,ct[ft+39]=ut,ct[ft+40]=K,ct[ft+41]=J,ct[ft+42]=Z,ct[ft+43]=q}},n.prototype.updateTriangleRoundedClipping=function(t,n){var i=n.corner;if(i!==this.corner){this.corner=i,this.strokeWidth=NaN,t.clippingBuffer.update();var r=t.clippings,e=3*this.vertexOffset,u=1-n.radius;i&qi.TOP?(r[e+0]=0,r[e+1]=0,r[e+2]=1,r[e+3]=1,r[e+4]=0,r[e+5]=1,r[e+6]=1,r[e+7]=1,r[e+8]=1,r[e+9]=0,r[e+10]=1,r[e+11]=1):(r[e+0]=u,r[e+1]=u,r[e+2]=0,r[e+3]=1,r[e+4]=u,r[e+5]=0,r[e+6]=1,r[e+7]=1,r[e+8]=0,r[e+9]=u,r[e+10]=1,r[e+11]=0),i&qi.BOTTOM_RIGHT?(r[e+12]=0,r[e+13]=0,r[e+14]=1,r[e+15]=1,r[e+16]=0,r[e+17]=1,r[e+18]=1,r[e+19]=1,r[e+20]=1,r[e+21]=0,r[e+22]=1,r[e+23]=1):(r[e+12]=u,r[e+13]=u,r[e+14]=0,r[e+15]=1,r[e+16]=u,r[e+17]=0,r[e+18]=1,r[e+19]=1,r[e+20]=0,r[e+21]=u,r[e+22]=1,r[e+23]=0),i&qi.BOTTOM_LEFT?(r[e+24]=0,r[e+25]=0,r[e+26]=1,r[e+27]=1,r[e+28]=0,r[e+29]=1,r[e+30]=1,r[e+31]=1,r[e+32]=1,r[e+33]=0,r[e+34]=1,r[e+35]=1):(r[e+24]=u,r[e+25]=u,r[e+26]=0,r[e+27]=1,r[e+28]=u,r[e+29]=0,r[e+30]=1,r[e+31]=1,r[e+32]=0,r[e+33]=u,r[e+34]=1,r[e+35]=0),r[e+36]=0,r[e+37]=0,r[e+38]=0,r[e+39]=u,r[e+40]=0,r[e+41]=0,r[e+42]=1,r[e+43]=0,r[e+44]=0,r[e+45]=1,r[e+46]=0,r[e+47]=0,r[e+48]=u,r[e+49]=0,r[e+50]=0,r[e+51]=1,r[e+52]=0,r[e+53]=0,r[e+54]=1,r[e+55]=0,r[e+56]=0,r[e+57]=u,r[e+58]=0,r[e+59]=0,r[e+60]=1,r[e+61]=0,r[e+62]=0,r[e+63]=1,r[e+64]=0,r[e+65]=0}},n.prototype.updateTriangleRoundedStep=function(t,n){var i=n.stroke,r=i.enable?i.width:0,e=i.align;if(this.strokeAlign!==e||this.strokeWidth!==r){this.strokeWidth=r,this.strokeAlign=e,t.stepBuffer.update(),t.antialiasBuffer.update();var u=t.workStep,s=this.worldSizeR;this.calcStep(s,r,u);var h=u[0],o=u[1],c=u[2];this.calcStep(n.radius*s,r,u);var f=u[0],a=u[1],l=u[2],v=this.vertexOffset,b=this.vertexCount-this.textVertexCount;this.updateStepIf(t,v,b,f,a,l,h,h,o,o,c,c)}},n.prototype.updateTriangleRoundedUv=function(t,n){var i=this.toTexture(n),r=this.toTextureTransformId(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r;var e=this.toTextureUvs(i),u=e.x0,s=e.x1,h=e.x2,o=e.x3,c=e.y0,f=e.y1,a=e.y2,l=e.y3,v=.5*(u+s),b=.5*(c+f),d=this.worldSizeWHalf,g=v+d*(o-u),m=b+d*(l-c),p=n.radius,w=this.worldSizeXHalf,D=this.worldSizeYHalf,T=this.worldSizeZHalf,O=v+T*(o-v),S=b+T*(l-b),M=v+p*(g-v),E=b+p*(m-b),k=v+T*(h-v),I=b+T*(a-b),N=h+D*(v-h),y=a+D*(b-a),x=h+p*(g-h),C=a+p*(m-a),j=h+w*(o-h),A=a+w*(l-a),B=o+w*(h-o),R=l+w*(a-l),L=o+p*(g-o),W=l+p*(m-l),_=o+D*(v-o),F=l+D*(b-l);t.uvBuffer.update();var P=t.uvs,U=2*this.vertexOffset;P[U+0]=M,P[U+1]=E,P[U+2]=O,P[U+3]=S,P[U+4]=v,P[U+5]=b,P[U+6]=k,P[U+7]=I,P[(U+=8)+0]=x,P[U+1]=C,P[U+2]=N,P[U+3]=y,P[U+4]=h,P[U+5]=a,P[U+6]=j,P[U+7]=A,P[(U+=8)+0]=L,P[U+1]=W,P[U+2]=B,P[U+3]=R,P[U+4]=o,P[U+5]=l,P[U+6]=_,P[U+7]=F,P[(U+=8)+0]=g,P[U+1]=m,P[U+2]=M,P[U+3]=E,P[U+4]=k,P[U+5]=I,P[U+6]=N,P[U+7]=y,P[U+8]=x,P[U+9]=C,P[U+10]=j,P[U+11]=A,P[U+12]=B,P[U+13]=R,P[U+14]=L,P[U+15]=W,P[U+16]=_,P[U+17]=F,P[U+18]=O,P[U+19]=S}},n}(jr),Ys=function(){function t(){}return t.create=function(t,n,i,r){var e=Cr.getTextCount(n,t.workCount),u=e.vertexCount,s=e.indexCount,h=22+u,o=15+s;return i+h<t.vertexCapacity&&r+o<t.indexCapacity?new Xs(t,i,r,u,s,h,o).init(n):null},t}(),Ks=function(t){function n(n){return void 0===n&&(n=ci.TRIANGLE_ROUNDED),t.call(this,n)||this}return i(n,t),n.prototype.clone=function(){return(new n).copy(this)},n.prototype.ae=function(t,n,i,r){if(this.fill.enable){if(t*t+n*n<=i*i)return!0}else{var e=this.stroke,u=e.width;if(e.enable&&0<u){var s=t*t+n*n;if(s<=i*i){var h=Math.max(0,i*(1-u/r));if(h*h<=s)return!0}}}},n.prototype.containsCorner=function(t,n,i,r,e,u,s,h,o,c,f,a,l,v){var b=e+f*(s-e)-i,d=u+f*(h-u)-r,g=Math.sqrt(b*b+d*d);if(1e-5<g){var m=1/g,p=b*m,w=d*m,D=(e+a*(o-e)-i)*m,T=(u+a*(c-u)-r)*m,O=p*T-D*w;if(1e-5<Math.abs(O)){var S=1/O,M=t-i,E=n-r,k=(+T*M-D*E)*S,I=(-w*M+p*E)*S;if(this.ae(k,I,g,l*v))return!0}}},n.prototype.containsAbs=function(n,i,r,e){if(t.prototype.containsAbsBBox.call(this,n,i,r,e)){var u=2*e/r;if(this.fe(n,i,u,-e,+e)){var s=Math.sqrt(r*r+4*e*e),h=2*r*e/(r+s),o=this.radius,c=e-h,f=-e,a=+r,l=+e,v=-a,b=+l,d=0+0*o,g=f+o*(c-f),m=a+o*(0-a),p=l+o*(c-l),w=+p,D=-m,T=-u*n+g-i<=0,O=+u*n+g-i<=0,S=i<=p,M=this.corner;if(!T&&!O&&M&qi.TOP){var E=.5*(s-h)*o/s;if(this.containsCorner(n,i,d,g,0,f,v,b,a,l,E,E,h,o))return!0}else if(!T&&!S&&M&qi.BOTTOM_LEFT){var k=(I=h*o/(2*e))*s/(2*r);if(this.containsCorner(n,i,D,w,v,b,a,l,0,f,k,I,h,o))return!0}else if(!O&&!S&&M&qi.BOTTOM_RIGHT){var I;if(k=(I=h*o/(2*e))*s/(2*r),this.containsCorner(n,i,m,p,a,l,0,f,v,b,I,k,h,o))return!0}else{if(this.fill.enable)return!0;var N=this.stroke,y=N.width;if(N.enable&&0<y){var x=e-h,C=x+(-e-x)*Math.max(0,h-y)/h,j=e-y;if(!this.fe(n,i,u,C,j))return!0}}}}return!1},n}(Gs),Js=function(){function t(){}return t.deserialize=function(n,i){return Bu.deserialize(n,i,t.create())},t.create=function(){return new Ks},t}(),Zs=function(){Ki[ci.TRIANGLE_ROUNDED]=Ys.create,Xi[ci.TRIANGLE_ROUNDED]=Js.deserialize,As.set(ci.TRIANGLE_ROUNDED,yu.PRIMITIVE|yu.BORDER_RADIUS)},qs=function(){Lu(),Uu(),fs(),ss(),gs(),Ts(),Is(),js(),Ps(),Rs(),Zs(),Vs()},Qs=new wn(256,1,3),$s=function(){function t(){this.le={}}return t.prototype.get=function(n){var i=this.le[n];if(null!=i)return i;var r=t.ve[n];if(null!=r)return this.le[n]=new r;throw new Error("No theme for the type '"+n+"'")},t.prototype.getAtlas=function(){return Qs},t.set=function(t,n){this.ve[t]=n},t.ve={},t}(),th=function(){K.setDefaultThemeClass($s)},nh=function(t){function n(n,i,r,e,u){var s=t.call(this,n,i,r,i,r)||this;return s.be=e,s.de=u,s.interactive=!1,s.interactiveChildren=!1,n.on("update",(function(){s.onTextureUpdate()})),s}return i(n,t),n.prototype.onTextureUpdate=function(){this.emit("update",this)},n.prototype.onReflow=function(t,n,i){this.x=-this.leftWidth+this.be,this.y=-this.topHeight+this.de,this.width=this.leftWidth+n+this.rightWidth,this.height=this.topHeight+i+this.bottomHeight},n}(t.NineSlicePlane),ih=function(){function t(){}return t.HIGHLIGHT_COLOR=3381759,t.HIGHLIGHT_ALPHA=.2,t.HIGHLIGHT_BLENDED=14544639,t.WEAK_HIGHLIGHT_COLOR=13421772,t.WEAK_HIGHLIGHT_ALPHA=.2,t.WEAK_HIGHLIGHT_BLENDED=16185078,t.INVALID_COLOR=16755370,t.INVALID_ALPHA=.2,t.INVALID_BLENDED=16773360,t.BACKGROUND_COLOR=15921906,t}(),rh=function(){function t(){}return t.prototype.getFontFamilly=function(){return'ProximaNova,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif'},t.prototype.getFontSize=function(){return 14},t.prototype.getColor=function(n){return t.getColor(n)},t.prototype.getFontWeight=function(){return"normal"},t.prototype.getFontStyle=function(){return"normal"},t.prototype.getFontVariant=function(){return"normal"},t.prototype.getAlpha=function(n){return t.getAlpha(n)},t.prototype.getLineHeight=function(){return 30},t.getColor=function(t){return 6250335},t.getAlpha=function(t){return M.isDisabled(t)?.5:1},t}(),eh=function(t,n,i,r,e){void 0===n&&(n=8),void 0===i&&(i=.1),void 0===r&&(r=.125*n),void 0===e&&(e=.375*n);var u=2*n;Qs.add(t,u,u,'<g><defs><filter id="'+t+'_filter" x="0" y="0" width="'+u+'" height="'+u+'" filterUnits="userSpaceOnUse"><feGaussianBlur in="SourceAlpha" stdDeviation="'+e+'"></feGaussianBlur></filter></defs><circle cx="'+n+'" cy="'+n+'" r="'+r+'" stroke="none" fill="rgba(0,0,0,'+i+')" filter="url(#'+t+'_filter)" /></g>')};eh("shadow_weak",8,1),eh("shadow",12,1);var uh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getX=function(){return 0},n.prototype.getY=function(){return 0},n.prototype.getHeight=function(){return 100},n.prototype.getWidth=function(){return 100},n.prototype.getBackgroundColor=function(t){return null},n.prototype.getBackgroundAlpha=function(t){return 1},n.prototype.getBackgroundTexture=function(t){return Kn.getBackground(t)},n.prototype.getBorderColor=function(t){return M.isFocused(t)?ih.HIGHLIGHT_COLOR:null},n.prototype.getBorderAlpha=function(t){return 1},n.prototype.getBorderWidth=function(t){return 1},n.prototype.getBorderAlign=function(t){return.5},n.prototype.getBorderMask=function(t){return r.NONE},n.prototype.getBorderTexture=function(t,n){return Kn.getBorder(t,n)},n.prototype.getPaddingLeft=function(){return 0},n.prototype.getPaddingRight=function(){return 0},n.prototype.getPaddingTop=function(){return 0},n.prototype.getPaddingBottom=function(){return 0},n.prototype.getCornerRadius=function(){return 4},n.prototype.getCornerMask=function(){return h.NONE},n.prototype.getOutlineColor=function(t){return null},n.prototype.getOutlineAlpha=function(t){return 1},n.prototype.getOutlineWidth=function(t){return 1},n.prototype.getOutlineOffset=function(t){return 1},n.prototype.getOutlineAlign=function(t){return 1},n.prototype.getOutlineMask=function(t){return r.NONE},n.prototype.getClearType=function(){return G.NONE},n.prototype.getShadow=function(){return null},n.prototype.getInteractive=function(){return f.SELF},n.prototype.getTitle=function(){return""},n.prototype.getWeight=function(){return-1},n.prototype.newShadow=function(){return new nh(Qs.mappings.shadow,12,12,0,6)},n.prototype.newShadowWeak=function(){return new nh(Qs.mappings.shadow_weak,8,8,0,4)},n}(rh),sh=function(){$s.set("DBase",uh)},hh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(){return ih.BACKGROUND_COLOR},n.prototype.getBorderColor=function(t){return null},n.prototype.getCornerMask=function(){return h.ALL},n.prototype.getPaddingLeft=function(){return 16},n.prototype.getPaddingTop=function(){return 16},n.prototype.getPaddingRight=function(){return 16},n.prototype.getPaddingBottom=function(){return 16},n.prototype.getInteractive=function(){return f.BOTH},n}(uh),oh=function(){$s.set("DBoard",hh)},ch=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextAlignVertical=function(){return X.MIDDLE},n.prototype.getTextAlignHorizontal=function(){return V.LEFT},n.prototype.isOverflowMaskEnabled=function(){return!1},n.prototype.isTextDynamic=function(){return!0},n.prototype.getTextStyleClipping=function(){return!0},n.prototype.newTextValue=function(){return""},n.prototype.getTextValue=function(t){return""},n.prototype.getTextFormatter=function(){return Zn},n}(uh),fh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getImageAlignHorizontal=function(){return V.LEFT},n.prototype.getImageAlignVertical=function(){return X.MIDDLE},n.prototype.getImageAlignWith=function(){return Y.TEXT},n.prototype.getImageMarginHorizontal=function(){return 5},n.prototype.getImageMarginVertial=function(){return 5},n.prototype.getImageTintColor=function(t){return this.getColor(t)},n.prototype.getImageTintAlpha=function(t){return this.getAlpha(t)},n.prototype.getImageSource=function(t){return null},n}(ch),ah=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.COLOR=16777215,n.COLOR_HOVERED=Xn.darken(n.COLOR,.017),n.COLOR_PRESSED=Xn.darken(n.COLOR,.034),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?null:M.isActive(t)?ih.HIGHLIGHT_COLOR:M.isPressed(t)?this.COLOR_PRESSED:M.isFocused(t)||M.isHovered(t)?this.COLOR_HOVERED:this.COLOR},n.prototype.getColor=function(n){return M.isDisabled(n)||!M.isActive(n)?t.prototype.getColor.call(this,n):16777215},n.prototype.getBorderColor=function(t){return M.isDisabled(t)||!M.isActive(t)?15066597:null},n.prototype.getHeight=function(){return 30},n.prototype.getWidth=function(){return 100},n.prototype.getTextAlignHorizontal=function(){return V.CENTER},n.prototype.getPaddingLeft=function(){return 10},n.prototype.getPaddingRight=function(){return 10},n.prototype.isToggle=function(){return!1},n}(fh),lh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(ah),vh=function(){$s.set("DButton",lh)},bh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isActive(t)?ih.HIGHLIGHT_COLOR:ih.WEAK_HIGHLIGHT_COLOR},n.prototype.getBackgroundAlpha=function(t){if(!M.isDisabled(t)){if(M.isActive(t))return 1;if(M.isPressed(t))return 2*ih.WEAK_HIGHLIGHT_ALPHA;if(M.isFocused(t)||M.isHovered(t))return ih.WEAK_HIGHLIGHT_ALPHA}return 0},n.prototype.getBorderColor=function(t){return null},n}(ah),dh=function(){$s.set("DButtonAmbient",bh)};Qs.add("button_check_mark_on",21,21,'<g transform="scale(0.875,0.875)"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#fff" /></g>'),Qs.add("button_check_mark_off",21,21,'<g transform="scale(0.875,0.875)"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="#fff" /></g>');var gh=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.IMAGE_TINT_COLOR_FOCUSED=Xn.darken(ih.WEAK_HIGHLIGHT_COLOR,.1),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return ih.WEAK_HIGHLIGHT_COLOR},n.prototype.getColor=function(t){return rh.getColor(t)},n.prototype.getBackgroundAlpha=function(t){return M.isDisabled(t)||!M.isFocused(t)&&!M.isHovered(t)?0:ih.WEAK_HIGHLIGHT_ALPHA},n.prototype.getImageTintColor=function(t){return M.isDisabled(t)||M.isReadOnly(t)||!M.isActive(t)?M.isFocused(t)?this.IMAGE_TINT_COLOR_FOCUSED:ih.WEAK_HIGHLIGHT_COLOR:ih.HIGHLIGHT_COLOR},n.prototype.isToggle=function(){return!0},n.prototype.getImageSource=function(t){return M.isActive(t)?Qs.mappings.button_check_mark_on:Qs.mappings.button_check_mark_off},n}(bh),mh=function(){$s.set("DButtonCheck",gh)},ph=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getImageAlignWith=function(){return Y.PADDING},n.prototype.getImageAlignHorizontal=function(){return V.RIGHT},n.prototype.getImageMarginHorizontal=function(){return 0},n.prototype.getTextAlignHorizontal=function(){return V.LEFT},n}(gh),wh=function(){$s.set("DButtonCheckRight",ph)};Qs.add("button_color_sample",21,21,'<g transform="scale(0.875,0.875)"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="#fff"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="#eee" /></g>');var Dh,Th=function(t){return"#"+Xn.toCode(t.color)+" A"+t.alpha.toFixed(2)},Oh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getImageTintColor=function(t){return null},n.prototype.getImageSource=function(t){return Qs.mappings.button_color_sample},n.prototype.getTextFormatter=function(){return Th},n.prototype.newTextValue=function(){return{color:16777215,alpha:1}},n}(lh),Sh=function(t){function n(n){var i=t.call(this,n)||this;if(i.ge=0,i.me=0,i.pe=0,i.we=0,i.De=null,null!=n&&null!=n.shift){var r=n.shift;i.Te=null!=r.x?r.x:0,i.Oe=null!=r.y?r.y:15}else i.Te=0,i.Oe=15;return i.Se=function(){i.onPrerender()},i.Me=function(){i.onPostrender()},i}return i(n,t),n.prototype.stop=function(){this.we=0,e.getInstance().renderer.off("prerender",this.Se).off("postrender",this.Me),t.prototype.stop.call(this)},n.prototype.onStart=function(n){var i=this.De=this.bi;null!=i&&(this.we=0,e.getInstance().renderer.on("prerender",this.Se).on("postrender",this.Me),n||(i.visible=!0),t.prototype.onStart.call(this,n))},n.prototype.onTime=function(n,i,r){if(null!=this.De){var u=e.getInstance();u.disallowUpdate(),this.we=n,t.prototype.onTime.call(this,n,i,r),u.allowUpdate(),u.render()}},n.prototype.onEnd=function(n){var i=this.De;null!=i&&(e.getInstance().renderer.off("prerender",this.Se).off("postrender",this.Me),n&&(i.visible=!1),t.prototype.onEnd.call(this,n))},n.prototype.onPrerender=function(){var t=this.De;if(null!=t){var n=this.we,i=t.unsafe.position;this.ge=i.x,this.me=i.y,i.set(i.x-this.Te*(1-n),i.y-this.Oe*(1-n)),this.pe=t.alpha,t.alpha=n}},n.prototype.onPostrender=function(){var t=this.De;null!=t&&(t.unsafe.position.set(this.ge,this.me),t.alpha=this.pe)},n}(Nn);!function(t){t[t.NONE=0]="NONE",t[t.ESC=1]="ESC",t[t.CLICK_OUTSIDE=2]="CLICK_OUTSIDE"}(Dh||(Dh={}));var Mh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.visible=!1,this.setState(v.FOCUS_ROOT,!0),this.Ee=null,this.ke=!1;var r=this.Ai=n&&n.animation?n.animation:new Sh;r.target=this,r.on("end",(function(t){i.onAnimationEnd(t)})),(this.Ie=n&&null!=n.closeOn?n.closeOn:this.theme.closeOn())&Dh.CLICK_OUTSIDE&&On.apply(this,(function(){i.onCloseOn()})),null!=n&&null!=n.parent||e.getInstance().stage.addChild(this)},n.prototype.onAnimationEnd=function(t){if(!t){var n=W.getFocusController();this.Ee=n.getFocused();var i=n.findFocusable(this,!1,!0,!0);n.setFocused(i||this,!0,!0)}},n.prototype.open=function(){if(!this.ke){this.ke=!0;var t=this.parent;null!=t&&t.addChild(this),this.onOpen()}},n.prototype.onOpen=function(){this.emit("open",this),this.Ai.start()},n.prototype.isOpened=function(){return this.ke},n.prototype.close=function(){this.ke&&(this.ke=!1,this.onClose())},n.prototype.onClose=function(){var t=this.Ee;null!=t&&(this.Ee=null,W.getFocusController().setFocused(t,!0,!1)),this.Ai.start(!0),this.emit("close",this)},n.prototype.getType=function(){return"DDialog"},n.prototype.onKeyDown=function(n){return this.Ie&Dh.ESC&&R.isCancelKey(n)&&this.onCloseOn(),t.prototype.onKeyDown.call(this,n)},n.prototype.onCloseOn=function(){this.close()},n.prototype.containsGlobalPoint=function(t){return!0},n}($),Eh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.closeOn=function(){return Dh.ESC|Dh.CLICK_OUTSIDE},n.prototype.getBackgroundColor=function(){return ih.BACKGROUND_COLOR},n.prototype.getBorderColor=function(t){return ih.WEAK_HIGHLIGHT_COLOR},n.prototype.getPaddingLeft=function(){return 16},n.prototype.getPaddingTop=function(){return 16},n.prototype.getPaddingRight=function(){return 16},n.prototype.getPaddingBottom=function(){return 16},n.prototype.getX=function(){return"center"},n.prototype.getY=function(){return"center"},n.prototype.getWidth=function(){return 400},n.prototype.getHeight=function(){return"auto"},n.prototype.getShadow=function(){return this.newShadow()},n.prototype.getInteractive=function(){return f.BOTH},n}(uh),kh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getOk=function(){return"OK"},n.prototype.getCancel=function(){return"Cacnel"},n.prototype.getLayoutX=function(){return"padding"},n.prototype.getLayoutY=function(){return"padding"},n.prototype.getLayoutWidth=function(){return"padding"},n.prototype.getLayoutHeight=function(){return"auto"},n}(Eh),Ih=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"auto"},n.prototype.getHeight=function(){return"auto"},n.prototype.getLayoutWidth=function(){return"auto"},n.prototype.getLayoutHeight=function(){return"auto"},n}(kh);Qs.add("picker_color_main",234,156,'<g><linearGradient id="fs7w3iusfdnb" x1="0%" y1="0%" x2="100%" y2="0%"><stop stop-color="#FFFFFF" stop-opacity="0" offset="0"/><stop stop-color="#FFFFFF" stop-opacity="1" offset="1"/></linearGradient><linearGradient id="2rfcfe9874bw" x1="0%" y1="0%" x2="0%" y2="100%"><stop stop-color="#000000" stop-opacity="0" offset="0"/><stop stop-color="#000000" stop-opacity="1" offset="1"/></linearGradient><rect x="0" y="0" width="234" height="156" fill="url(#fs7w3iusfdnb)" /><rect x="0" y="0" width="234" height="156" fill="url(#2rfcfe9874bw)" /></g>');var Nh=function(t,n){t+=t;for(var i="<g>",r=0;r<n;++r){for(var e=0;e<t;++e)i+='<rect x="'+9*e+'" y="'+(18*r+0)+'" width="9" height="9" fill="'+(e%2==0?"#bfbfbf":"#a5a5a5")+'" />';for(e=0;e<t;++e)i+='<rect x="'+9*e+'" y="'+(18*r+9)+'" width="9" height="9" fill="'+(e%2==1?"#bfbfbf":"#a5a5a5")+'" />'}return i+"</g>"};Qs.add("picker_color_alpha_checkerboard",234,18,Nh(13,1)),Qs.add("picker_color_alpha",234,18,'<g><linearGradient id="s48afbuh44" x1="0%" y1="0%" x2="100%" y2="0%"><stop stop-color="#FFFFFF" stop-opacity="0" offset="0"/><stop stop-color="#FFFFFF" stop-opacity="1" offset="1"/></linearGradient><rect x="0" y="0" width="234" height="18" fill="url(#s48afbuh44)" /></g>'),Qs.add("picker_color_base",234,18,'<g><linearGradient id="ni2rbisdf3" x1="0%" y1="0%" x2="100%" y2="0%"><stop stop-color="#FF0000" offset="0"/><stop stop-color="#FFFF00" offset="0.167"/><stop stop-color="#00FF00" offset="0.333"/><stop stop-color="#00FFFF" offset="0.5"/><stop stop-color="#0000FF" offset="0.667"/><stop stop-color="#FF00FF" offset="0.833"/><stop stop-color="#FF0000" offset="1"/></linearGradient><rect x="0" y="0" width="234" height="18" fill="url(#ni2rbisdf3)" /></g>'),Qs.add("picker_color_base_pointer",16.2,31.8,'<rect x="4.5" y="4.5" width="7.2" height="22.8" stroke="#5f5f5f" stroke-width="2.4" fill="none" />'),Qs.add("picker_color_pointer",25.8,25.8,'<circle cx="12.9" cy="12.9" r="4.8" stroke="#5f5f5f" stroke-width="2.4" fill="none" /><circle cx="12.9" cy="12.9" r="7.2" stroke="#ffffff" stroke-width="2.4" fill="none" />'),Qs.add("picker_color_recent_checkerboard",18,18,Nh(1,1)),Qs.add("picker_color_recent_null",18,18,'<g><rect x="1.2" y="1.2" width="15.6" height="15.6" stroke="#fff" stroke-width="0.8" fill="none" /><line x1="16.8" y1="1.2" x2="1.2" y2="16.8" stroke="#fff" stroke-width="0.8" stroke-linecap="round" /><line x1="1.2" y1="1.2" x2="16.8" y2="16.8" stroke="#fff" stroke-width="0.8" stroke-linecap="round" /></g>'),Qs.add("picker_color_sample_checkerboard",54,54,Nh(3,3)),Qs.add("picker_color_sample_null",54,54,'<g><rect x="3.6" y="3.6" width="46.8" height="46.8" stroke="#fff" stroke-width="2.4" fill="none" /><line x1="50.4" y1="3.6" x2="3.6" y2="50.4" stroke="#fff" stroke-width="2.4" stroke-linecap="round" /><line x1="3.6" y1="3.6" x2="50.4" y2="50.4" stroke="#fff" stroke-width="2.4" stroke-linecap="round" /></g>'),Qs.add("picker_color_anchor_outlined",25.8,25.8,'<circle cx="12.9" cy="12.9" r="8.4" stroke="none" fill="#ffffff" /><circle cx="12.9" cy="12.9" r="9.6" stroke="#5f5f5f" stroke-width="2.4" fill="none" />'),Qs.add("picker_color_anchor",28.2,28.2,'<circle cx="14.1" cy="14.1" r="6" stroke="none" fill="#ffffff" /><circle cx="14.1" cy="14.1" r="7.2" stroke="#5f5f5f" stroke-width="2.4" fill="none" />'),Qs.add("picker_color_direction",12,30,'<path d="M0.6 25.8 L 12.0375 5.9895" stroke="#5f5f5f" stroke-width="1.2" fill="none" /><path d="M8.5125 25.8 A 8.475 8.475 0 0 0 4.275 18.4605" stroke="#5f5f5f" stroke-width="1.2" fill="none" /><rect x="0.6" y="24.6" width="11.4375" height="1.2" rx="0.6" ry="0.6" stroke="none" fill="#5f5f5f" />');var yh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getMainWidth=function(){return 234},n.prototype.getMainHeight=function(){return 156},n.prototype.getMainTexture=function(){return Qs.mappings.picker_color_main},n.prototype.getMainPointerTexture=function(){return Qs.mappings.picker_color_pointer},n.prototype.getMainPointerColor=function(){return 16777215},n.prototype.getMainPointerAlpha=function(){return 1},n.prototype.getBaseHeight=function(){return 18},n.prototype.getBaseMargin=function(){return 6},n.prototype.getBaseTexture=function(){return Qs.mappings.picker_color_base},n.prototype.getBasePointerTexture=function(){return Qs.mappings.picker_color_base_pointer},n.prototype.getBasePointerColor=function(){return 16777215},n.prototype.getBasePointerAlpha=function(){return this.getMainPointerAlpha()},n.prototype.getAlphaHeight=function(){return this.getBaseHeight()},n.prototype.getAlphaMargin=function(){return this.getBaseMargin()},n.prototype.getAlphaTexture=function(){return Qs.mappings.picker_color_alpha},n.prototype.getAlphaCheckerboardTexture=function(){return Qs.mappings.picker_color_alpha_checkerboard},n.prototype.getAlphaPointerTexture=function(){return this.getBasePointerTexture()},n.prototype.getAlphaPointerColor=function(){return this.getBasePointerColor()},n.prototype.getAlphaPointerAlpha=function(){return this.getMainPointerAlpha()},n.prototype.getRecentMargin=function(){return this.getBaseMargin()},n.prototype.getRecentColorWidth=function(){return this.getBaseHeight()},n.prototype.getRecentColorHeight=function(){return this.getRecentColorWidth()},n.prototype.getRecentColorMargin=function(){return this.getRecentMargin()},n.prototype.getRecentColorCount=function(){return 10},n.prototype.getRecentCheckerboardTexture=function(){return Qs.mappings.picker_color_recent_checkerboard},n.prototype.getRecentNullTexture=function(){return Qs.mappings.picker_color_recent_null},n.prototype.getRecents=function(){return[]},n.prototype.getInputMargin=function(){return this.getBaseMargin()},n.prototype.getInputLabelWidth=function(){return 20},n.prototype.getSampleWidth=function(){return 54},n.prototype.getSampleHeight=function(){return this.getSampleWidth()},n.prototype.getSampleCheckerboardTexture=function(){return Qs.mappings.picker_color_sample_checkerboard},n.prototype.getSampleNullTexture=function(){return Qs.mappings.picker_color_sample_null},n.prototype.getBackgroundColor=function(t){return null},n.prototype.getBorderColor=function(t){return null},n.prototype.getInteractive=function(){return f.BOTH},n}(uh),xh=function(){$s.set("DPickerColor",yh)},Ch=function(){$s.set("DDialogColor",Ih),xh()},jh=function(){$s.set("DButtonColor",Oh),Ch()},Ah=function(){function t(t,n,i,r,e){this.u=t,this.h=n,this.it=i,this.i=e,this.Ne=r}return t.prototype.set=function(t,n,i,r){this.u===t&&this.h===n&&this.it===i&&this.Ne===r||(this.u=t,this.h=n,this.it=i,this.Ne=r,this.i(this))},Object.defineProperty(t.prototype,"color",{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.h},set:function(t){this.h!==t&&(this.h=t,this.i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.it},set:function(t){this.it!==t&&(this.it=t,this.i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.Ne},set:function(t){this.Ne!==t&&(this.Ne=t,this.i(this))},enumerable:!0,configurable:!0}),t.prototype.toObject=function(){return{color:this.u,alpha:this.h,position:this.it}},t}(),Bh=function(t,n){return t.position-n.position},Rh=function(n){function r(){var t=n.call(this)||this;t.ye=function(n){t.onChange(n)};var i=new Ah(16777215,1,0,!1,t.ye),r=new Ah(8421504,1,1,!0,t.ye);return t.se=[i,r],t.ar=-90,t.Ne=r,t.xe=[0,0,0],t}return i(r,n),r.prototype.onChange=function(t){var n=t.selected&&this.Ne!==t;if(n){var i=this.Ne;null!=i&&(i.Ne=!1),this.Ne=t}this.se.sort(Bh),n&&this.emit("selectionchange",this.Ne,this),this.emit("change",this)},Object.defineProperty(r.prototype,"points",{get:function(){return this.se},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"direction",{get:function(){return this.ar},set:function(t){this.ar!==t&&(this.ar=t,this.emit("directionchange",t,this),this.emit("change",this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.Ne},enumerable:!0,configurable:!0}),r.prototype.size=function(){return this.se.length},r.prototype.get=function(t){var n=this.se;return 0<=t&&t<n.length?n[t]:null},r.prototype.addAt=function(n){for(var i=this.se,r=null,e=0,u=i.length;e<u;++e){var s=i[e];if(n<=s.position){if(null==r)return this.add(s.color,s.alpha,n,!0);var h=s.position-r.position;if(.001<h){var o=t.utils.hex2rgb(s.color,this.xe),c=o[0],f=o[1],a=o[2],l=t.utils.hex2rgb(r.color,this.xe),v=l[0],b=l[1],d=l[2],g=(n-r.position)/h,m=c*g+v*(1-g),p=f*g+b*(1-g),w=a*g+d*(1-g),D=this.xe;D[0]=m,D[1]=p,D[2]=w;var T=t.utils.rgb2hex(D),O=s.alpha*g+r.alpha*(1-g);return this.add(T,O,n,!0)}}r=s}return null!=r?this.add(r.color,r.alpha,n,!0):this.add(16777215,1,n,!0)},r.prototype.add=function(t,n,i,r){var e=new Ah(t,n,i,r,this.ye);return this.se.push(e),this.ye(e),e},r.prototype.remove=function(t){var n=this.se;if(2<n.length)for(var i=0,r=n.length;i<r;++i)if(n[i]===t){n.splice(i,1);var e=this.Ne===t;return e&&(this.Ne=i+1<r?n[i]:n[i-1]),e&&this.emit("selectionchange",this.Ne,this),this.emit("change",this),!0}return!1},r.prototype.reset=function(){var t=this.ar;this.ar=-90;var n=this.se,i=this.Ne,r=i?n.indexOf(i):-1;if(n.length=0,n.push(new Ah(16777215,0,0,!1,this.ye)),n.push(new Ah(16777215,0,1,!1,this.ye)),0<=r&&r<n.length)(e=n[r]).Ne=!0,this.Ne=e;else if(0<n.length){var e;(e=n[n.length-1]).Ne=!0,this.Ne=e}else this.Ne=null;i!==this.Ne&&this.emit("selectionchange",this.Ne,this),t!==this.ar&&this.emit("directionchange",this.ar,this),this.emit("change",this)},r.prototype.toObject=function(){for(var t=[],n=this.se,i=0,r=n.length;i<r;++i)t.push(n[i].toObject());return{points:t,direction:this.ar}},r.prototype.fromObject=function(t){var n=this.ar;this.ar=t.direction;var i=this.se,r=this.Ne,e=r?i.indexOf(r):-1;i.length=0;for(var u=0,s=t.points.length;u<s;++u){var h=t.points[u],o=new Ah(h.color,h.alpha,h.position,!1,this.ye);i.push(o)}i.sort(Bh),0<=e&&e<i.length?((o=i[e]).Ne=!0,this.Ne=o):0<i.length?((o=i[i.length-1]).Ne=!0,this.Ne=o):this.Ne=null,r!==this.Ne&&this.emit("selectionchange",this.Ne,this),n!==this.ar&&this.emit("directionchange",this.ar,this),this.emit("change",this)},r}(t.utils.EventEmitter);Qs.add("button_color_gradient_sample",21,21,'<g transform="scale(0.875,0.875)"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="#fff"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="#eee" /></g>');var Lh,Wh=function(){return""},_h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getViewBaseTexture=function(){return Qs.mappings.button_color_gradient_sample},n.prototype.getTextFormatter=function(){return Wh},n.prototype.newTextValue=function(){return new Rh},n}(lh),Fh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"auto"},n.prototype.getHeight=function(){return"auto"},n.prototype.getLayoutWidth=function(){return"auto"},n.prototype.getLayoutHeight=function(){return"auto"},n}(kh),Ph=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getGradientPointsWidth=function(){return 30},n.prototype.getGradientPointsMargin=function(){return 24},n.prototype.getGradientAnchorTexture=function(){return Qs.mappings.picker_color_anchor},n.prototype.getGradientAnchorOutlinedTexture=function(){return Qs.mappings.picker_color_anchor_outlined},n.prototype.getGradientAnchorOutlineTexture=function(){return Qs.mappings.picker_color_anchor_outline},n.prototype.getGradientDirectionMargin=function(){return 5},n.prototype.getGradientDirectionTexture=function(){return Qs.mappings.picker_color_direction},n.prototype.getGradientRecentColumn=function(){return 4},n.prototype.getGradientRecentWidth=function(){return 30},n.prototype.getGradientRecentMargin=function(){return 5},n.prototype.getGradientRecentCount=function(){return 16},n.prototype.getGradientRecents=function(){return[]},n.prototype.getBackgroundColor=function(t){return null},n.prototype.getBorderColor=function(t){return null},n.prototype.getInteractive=function(){return f.BOTH},n}(uh),Uh=function(){$s.set("DPickerColorGradient",Ph),xh()},zh=function(){$s.set("DDialogColorGradient",Fh),Uh()},Gh=function(){$s.set("DButtonColorGradient",_h),zh()},Hh=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.COLOR=16733542,n.COLOR_HOVERED=Xn.darken(n.COLOR,.1),n.COLOR_PRESSED=Xn.darken(n.COLOR,.2),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?null:M.isPressed(t)||M.isActive(t)?this.COLOR_PRESSED:M.isFocused(t)||M.isHovered(t)?this.COLOR_HOVERED:this.COLOR},n.prototype.getBorderColor=function(t){return M.isDisabled(t)?15066597:null},n.prototype.getColor=function(n){return M.isDisabled(n)?t.prototype.getColor.call(this,n):16777215},n}(ah),Vh=function(){$s.set("DButtonDanger",Hh)},Xh=function(){function t(){}return t.format=function(t){return Zt(String(t.getFullYear()),4,"0")+"/"+Zt(String(t.getMonth()+1),2,"0")+"/"+Zt(String(t.getDate()),2,"0")},t}(),Yh=function(t){return Xh.format(t)},Kh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextFormatter=function(){return Yh},n.prototype.newTextValue=function(){return new Date},n}(lh),Jh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"auto"},n.prototype.getHeight=function(){return"auto"},n.prototype.getLayoutWidth=function(){return"auto"},n.prototype.getLayoutHeight=function(){return"auto"},n}(kh);!function(t){t[t.NONE=0]="NONE",t[t.DATE=1]="DATE",t[t.HOURS=2]="HOURS",t[t.MINUTES=4]="MINUTES",t[t.SECONDS=8]="SECONDS",t[t.ALL=15]="ALL"}(Lh||(Lh={}));var Zh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getInteractive=function(){return f.BOTH},n.prototype.getMargin=function(){return 8},n.prototype.getHoursOptions=function(){return{width:100,title:"Hours"}},n.prototype.getMinutesOptions=function(){return{width:100,title:"Minutes"}},n.prototype.getSecondsOptions=function(){return{width:100,title:"Seconds"}},n.prototype.getMask=function(){return Lh.HOURS|Lh.MINUTES},n.prototype.getWidth=function(){return"auto"},n.prototype.getHeight=function(){return"auto"},n.prototype.getLowerBound=function(){return null},n.prototype.isLowerBoundInclusive=function(){return!1},n.prototype.getUpperBound=function(){return null},n.prototype.isUpperBoundInclusive=function(){return!1},n}(uh),qh=["January","February","March","April","May","June","July","August","September","October","November","December"],Qh=["Su","Mo","Tu","We","Th","Fr","Sa"],$h=function(t){return qh[t.getMonth()]+" "+t.getFullYear()},to=function(){},no=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getDayLabels=function(){return Qh},n.prototype.getDayStart=function(){return 0},n.prototype.getLabelFormatter=function(){return $h},n.prototype.getDateDecorator=function(){return to},n.prototype.getBackButtonOptions=function(){return{title:"Previous"}},n.prototype.getNextButtonOptions=function(){return{title:"Next"}},n.prototype.getMask=function(){return Lh.DATE|t.prototype.getMask.call(this)},n}(Zh),io=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getMask=function(){return Lh.DATE},n}(no);Qs.add("picker_date_back",24,24,'<g><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" fill="#fff" /></g>');var ro=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"auto"},n.prototype.getImageAlignWith=function(){return Y.PADDING},n.prototype.getImageMarginHorizontal=function(){return 0},n.prototype.getImageAlignHorizontal=function(){return V.LEFT},n.prototype.getImageSource=function(t){return Qs.mappings.picker_date_back},n.prototype.getColor=function(){return 7303023},n}(bh),eo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextAlignHorizontal=function(){return V.CENTER},n.prototype.getTextStyleClipping=function(){return!1},n.prototype.getWidth=function(){return 30},n.prototype.getHeight=function(){return 30},n.prototype.isToggle=function(){return!0},n}(bh);Qs.add("picker_date_next",24,24,'<g><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" fill="#fff" /></g>');var uo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"auto"},n.prototype.getImageAlignWith=function(){return Y.PADDING},n.prototype.getImageMarginHorizontal=function(){return 0},n.prototype.getImageAlignHorizontal=function(){return V.LEFT},n.prototype.getImageSource=function(t){return Qs.mappings.picker_date_next},n.prototype.getColor=function(){return 7303023},n}(bh),so=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getHeight=function(){return this.getLineHeight()},n}(ch),ho=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return 30},n.prototype.getHeight=function(){return 30},n.prototype.getTextStyleClipping=function(){return!1},n.prototype.getTextAlignHorizontal=function(){return V.CENTER},n.prototype.getColor=function(){return 7303023},n.prototype.getFontWeight=function(){return"bold"},n.prototype.getFontSize=function(){return Math.round(1.25*t.prototype.getFontSize.call(this))},n}(so),oo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return 30},n.prototype.getHeight=function(){return 30},n.prototype.getTextStyleClipping=function(){return!1},n.prototype.getTextAlignHorizontal=function(){return V.CENTER},n.prototype.getColor=function(){return 7303023},n.prototype.getFontWeight=function(){return"bold"},n}(so),co=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return null},n.prototype.getBorderColor=function(t){return null},n.prototype.getWidth=function(){return 30},n.prototype.getHeight=function(){return 30},n}(uh),fo=function(){$s.set("DPickerTime",Zh)},ao=function(){$s.set("DPickerDatetimeButtonBack",ro),$s.set("DPickerDatetimeButtonDate",eo),$s.set("DPickerDatetimeButtonNext",uo),$s.set("DPickerDatetimeLabelDate",oo),$s.set("DPickerDatetimeLabel",ho),$s.set("DPickerDatetimeSpace",co),$s.set("DPickerDatetime",no),fo()},lo=function(){$s.set("DPickerDate",io),ao()},vo=function(){$s.set("DDialogDate",Jh),lo()},bo=function(){$s.set("DButtonDate",Kh),vo()},go=function(){function t(){}return t.format=function(t,n){var i="";return n&Lh.HOURS&&(i+=Zt(String(t.getHours()),2,"0")),n&Lh.MINUTES&&(0<i.length&&(i+=":"),i+=Zt(String(t.getMinutes()),2,"0")),n&Lh.SECONDS&&(0<i.length&&(i+=":"),i+=Zt(String(t.getSeconds()),2,"0")),i},t.toMask=function(t){return t&&null!=t.mask?t.mask:K.getInstance().get("DPickerTime").getMask()},t}(),mo=function(){function t(){}return t.format=function(t,n){var i=go.format(t,n);return 0<i.length?Xh.format(t)+" "+i:""+Xh.format(t)},t.toMask=function(t){return t&&null!=t.mask?t.mask:K.getInstance().get("DPickerDatetime").getMask()},t}(),po=function(t,n){return mo.format(t,n.getDatetimeMask())},wo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextFormatter=function(){return po},n.prototype.newTextValue=function(){return new Date},n}(lh),Do=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"auto"},n.prototype.getHeight=function(){return"auto"},n.prototype.getLayoutWidth=function(){return"auto"},n.prototype.getLayoutHeight=function(){return"auto"},n}(kh),To=function(){$s.set("DDialogDatetime",Do),ao()},Oo=function(){$s.set("DButtonDatetime",wo),To()},So=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(lh),Mo=function(){$s.set("DButtonFile",So)},Eo=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.COLOR=ih.HIGHLIGHT_COLOR,n.COLOR_HOVERED=Xn.darken(n.COLOR,.1),n.COLOR_PRESSED=Xn.darken(n.COLOR,.2),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?null:M.isPressed(t)||M.isActive(t)?this.COLOR_PRESSED:M.isFocused(t)||M.isHovered(t)?this.COLOR_HOVERED:this.COLOR},n.prototype.getBorderColor=function(t){return M.isDisabled(t)?15066597:null},n.prototype.getColor=function(n){return M.isDisabled(n)?t.prototype.getColor.call(this,n):16777215},n}(ah),ko=function(){$s.set("DButtonPrimary",Eo)};Qs.add("button_radio_mark_on",21,21,'<g transform="scale(0.875,0.875)"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" fill="#fff" /></g>'),Qs.add("button_radio_mark_off",21,21,'<g transform="scale(0.875,0.875)"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" fill="#fff" /></g>');var Io,No=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.IMAGE_TINT_COLOR_FOCUSED=Xn.darken(ih.WEAK_HIGHLIGHT_COLOR,.1),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return ih.WEAK_HIGHLIGHT_COLOR},n.prototype.getColor=function(t){return rh.getColor(t)},n.prototype.getBackgroundAlpha=function(t){return M.isDisabled(t)||!M.isFocused(t)&&!M.isHovered(t)?0:ih.WEAK_HIGHLIGHT_ALPHA},n.prototype.getImageTintColor=function(t){return M.isDisabled(t)||!M.isActive(t)?M.isFocused(t)?this.IMAGE_TINT_COLOR_FOCUSED:ih.WEAK_HIGHLIGHT_COLOR:ih.HIGHLIGHT_COLOR},n.prototype.isToggle=function(){return!0},n.prototype.getImageSource=function(t){return M.isActive(t)?Qs.mappings.button_radio_mark_on:Qs.mappings.button_radio_mark_off},n}(bh),yo=function(){$s.set("DButtonRadio",No)},xo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getImageAlignWith=function(){return Y.PADDING},n.prototype.getImageAlignHorizontal=function(){return V.RIGHT},n.prototype.getImageMarginHorizontal=function(){return 0},n.prototype.getTextAlignHorizontal=function(){return V.LEFT},n}(No),Co=function(){$s.set("DButtonRadioRight",xo)},jo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(ah),Ao=function(){$s.set("DButtonSecondary",jo)},Bo=function(t,n){return go.format(t,n.getDatetimeMask())},Ro=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextFormatter=function(){return Bo},n.prototype.newTextValue=function(){return new Date},n}(lh),Lo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"auto"},n.prototype.getHeight=function(){return"auto"},n.prototype.getLayoutWidth=function(){return"auto"},n.prototype.getLayoutHeight=function(){return"auto"},n}(kh),Wo=function(){$s.set("DDialogTime",Lo),fo()},_o=function(){$s.set("DButtonTime",Ro),Wo()},Fo=function(){dh(),wh(),mh(),Gh(),jh(),Vh(),bo(),Oo(),Mo(),ko(),Co(),yo(),Ao(),_o(),vh()},Po=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(){return 16777215},n.prototype.getBorderColor=function(t){return null},n.prototype.getCornerMask=function(){return h.ALL},n.prototype.getInteractive=function(){return f.BOTH},n}(uh);!function(t){t[t.OFF=0]="OFF",t[t.ON=1]="ON",t[t.TOUCH=2]="TOUCH"}(Io||(Io={}));var Uo,zo,Go=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return null},n.prototype.getBorderColor=function(t){return null},n.prototype.getPaddingLeft=function(){return 50},n.prototype.getPaddingTop=function(){return 50},n.prototype.getPaddingRight=function(){return 50},n.prototype.getPaddingBottom=function(){return 50},n.prototype.isWheelZoomEnabled=function(){return!0},n.prototype.getWheelZoomSpeed=function(){return.004},n.prototype.getWheelZoomModifier=function(){return Dn.NOT_NONE},n.prototype.isWheelTranslationEnabled=function(){return!0},n.prototype.getWheelTranslationSpeed=function(){return.16*this.getFontSize()},n.prototype.getWheelTranslationModifier=function(){return Dn.NONE},n.prototype.isDblClickZoomEnabled=function(){return!0},n.prototype.getDblClickZoomSpeed=function(){return 2},n.prototype.getDblClickZoomModifier=function(){return Dn.NONE},n.prototype.getDblClickZoomDuration=function(){return 333},n.prototype.getZoomMin=function(){return.1},n.prototype.getZoomMax=function(){return 20},n.prototype.getDragMode=function(){return Io.ON},n.prototype.getDragModifier=function(){return Dn.NONE},n.prototype.getDragDurationPosition=function(){return 1},n.prototype.getDragDurationScale=function(){return 1},n.prototype.isOverflowMaskEnabled=function(){return!1},n.prototype.getInteractive=function(){return f.BOTH},n}(uh),Ho=function(){$s.set("DCanvasContainer",Go),$s.set("DCanvas",Po)},Vo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(uh);!function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(Uo||(Uo={})),function(t){t[t.INSIDE=0]="INSIDE",t[t.OUTSIDE=1]="OUTSIDE"}(zo||(zo={}));var Xo=function(){function t(){}return Object.defineProperty(t.prototype,"enable",{get:function(){return!0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 16777215},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n,i){},t.prototype.clone=function(){return new t},t.prototype.toObject=function(){return{enable:!0,color:16777215,alpha:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Yo=function(){function t(){}return Object.defineProperty(t.prototype,"enable",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 16777215},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){return Qi.NONE},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n,i,r,e){},t.prototype.clone=function(){return new t},t.prototype.toObject=function(){return{enable:!1,color:16777215,alpha:1,width:1,align:0,side:Qi.NONE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Ko=function(){function t(){}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return dr.CENTER},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return gr.MIDDLE},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n){},t.prototype.toObject=function(){return{horizontal:dr.CENTER,vertical:gr.MIDDLE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Jo=function(){function t(){}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n){},t.prototype.toObject=function(){return{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Zo=function(){function t(){}return Object.defineProperty(t.prototype,"enable",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 16777215},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 1},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n,i,r){},t.prototype.clone=function(){return new t},t.prototype.toObject=function(){return{enable:!1,color:16777215,alpha:1,width:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),qo=function(){function t(){}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n){},t.prototype.toObject=function(){return{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Qo=function(){function t(){}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n){},t.prototype.toObject=function(){return{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),$o=function(){function t(){this.align=new Ko,this.offset=new Jo,this.outline=new Zo,this.spacing=new Qo,this.padding=new qo}return Object.defineProperty(t.prototype,"enable",{get:function(){return!0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return""},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return"auto"},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return 24},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return vr.NORMAL},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return br.NORMAL},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return mr.LEFT_TO_RIGHT},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipping",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){return this},t.prototype.set=function(t,n,i,r,e,u,s,h,o){return this},t.prototype.toObject=function(){return{value:"",color:0,alpha:1,family:"auto",size:24,weight:vr.NORMAL,align:this.align.toObject(),offset:this.offset.toObject(),style:br.NORMAL,outline:this.outline.toObject(),spacing:this.spacing.toObject(),direction:mr.LEFT_TO_RIGHT,padding:this.padding.toObject(),clipping:!1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),tc=function(){this.vertexCount=0,this.indexCount=0},nc=function(t,n){this.texture=t,this.indexOffset=n},ic=function(){function t(){this.index=0,this.baseTexture=null,this.units=[]}return t.prototype.begin=function(){this.index=0,this.baseTexture=null},t.prototype.push=function(t,n){if(this.index<this.units.length){var i=this.units[this.index];i.texture=t,i.indexOffset=n}else this.units.push(new nc(t,n));this.index+=1},t.prototype.end=function(){this.units.length!==this.index&&(this.units.length=this.index)},t.prototype.destroy=function(){this.units.length=0},t}(),rc=function(){function n(n,i,r){var e=3*n,u=e;this.vertices=new Float32Array(2*u),this.vertexCapacity=u,this.vertexCount=0,this.vertexBuffer=new t.Buffer(this.vertices,!1,!1),this.clippings=new Float32Array(3*u),this.clippingBuffer=new t.Buffer(this.clippings,!1,!1),this.steps=new Float32Array(2*u),this.stepBuffer=new t.Buffer(this.steps,!1,!1),this.antialiases=new Float32Array(4*u),this.antialiasBuffer=new t.Buffer(this.antialiases,!1,!1),this.colorFills=new Float32Array(4*u),this.colorFillBuffer=new t.Buffer(this.colorFills,!1,!1),this.colorStrokes=new Float32Array(4*u),this.colorStrokeBuffer=new t.Buffer(this.colorStrokes,!1,!1),this.uvs=new Float32Array(2*u),this.uvBuffer=new t.Buffer(this.uvs,!1,!1);var s=u<=65535;this.indices=s?new Uint16Array(e):new Uint32Array(e),this.indexCapacity=n,this.indexCount=0,this.indexBuffer=new t.Buffer(this.indices,!1,!0),this.renderer=i,this.builder=new ic,this.work=new t.Point,this.workColor=new Float32Array(4),this.workStep=new Float32Array(3),this.workCount=new tc,this.geometry=(new t.Geometry).addIndex(this.indexBuffer).addAttribute("aPosition",this.vertexBuffer,2).addAttribute("aClipping",this.clippingBuffer,3).addAttribute("aStep",this.stepBuffer,2).addAttribute("aAntialias",this.antialiasBuffer,4).addAttribute("aColorFill",this.colorFillBuffer,4).addAttribute("aColorStroke",this.colorStrokeBuffer,4).addAttribute("aUv",this.uvBuffer,2)}return n.prototype.render=function(n){var i=this.renderer;i.geometry.bind(this.geometry);var r=this.builder.units,e=r.length;if(0<e){for(var u=t.DRAW_MODES.TRIANGLES,s=null,h=r[0],o=0,c=3*h.indexOffset,f=0,a=t.Texture.WHITE,l=0,v=e-1;l<v;++l)s=h,o=c,f=(c=3*(h=r[l+1]).indexOffset)-o,a=s.texture||t.Texture.WHITE,0<f&&a.valid&&(n.uniforms.sampler=i.texture.bind(a),i.geometry.draw(u,f,o));f=3*this.indexCount-c,a=h.texture||t.Texture.WHITE,0<f&&a.valid&&(n.uniforms.sampler=i.texture.bind(a),i.geometry.draw(u,f,c))}},n.prototype.isCompatible=function(t,n,i,r){return n.getBuffer()===this&&n.getVertexOffset()===i&&n.getIndexOffset()===r&&n.isCompatible(t)},n.prototype.update=function(t){var n=this.builder;n.begin();for(var i=0,r=0,e=t.get();null!=e&&null!=(u=e.uploaded)&&this.isCompatible(e,u,i,r);e=t.next())u.update(e),u.buildUnit(n),i+=u.getVertexCount(),r+=u.getIndexCount();for(;null!=e;e=t.next()){var u,s=Ki[e.type]||Ki[ci.GROUP];if(null==s)break;if(null==(u=s(this,e,i,r)))break;u.buildUnit(n),i+=u.getVertexCount(),r+=u.getIndexCount()}return n.end(),this.vertexCount=i,this.indexCount=r,0<n.units.length},n.prototype.destroy=function(){this.geometry.destroy(),this.builder.destroy()},n}(),ec=[],uc=function(){function t(){this.index=0,this.shapes=ec}return t.prototype.reset=function(t){this.index=-1,this.shapes=t},t.prototype.next=function(){var t=this.index=this.index+1,n=this.shapes;return t<n.length?n[t]:null},t}(),sc=function(){function t(){this.Ce=-1,this.je=new uc,this.Ae=[this.je],this.$i=null}return t.prototype.reset=function(t){return this.Ce=0,(this.je=this.Ae[0]).reset(t),this.$i=null,this.next()},t.prototype.get=function(){return this.$i},t.prototype.next=function(){var t=this.je.next();if(null!=t){this.$i=t;var n=t.children;if(0<n.length)if((r=this.Ce=this.Ce+1)<(e=this.Ae).length)(i=e[r]).reset(n),this.je=i;else{var i=new uc;e.push(i),i.reset(n),this.je=i}return t}var r=this.Ce=this.Ce-1,e=this.Ae;return 0<=r?(this.je=e[r],this.$i=null,this.next()):(this.$i=null,null)},t}(),hc="\nattribute vec2 aPosition;\nattribute vec3 aClipping;\nattribute vec2 aStep;\nattribute vec4 aAntialias;\nattribute vec4 aColorFill;\nattribute vec4 aColorStroke;\nattribute vec2 aUv;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mediump float pixelScale;\nuniform mediump float antialiasWeight;\n\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nvec2 toInverse( in vec2 v ) {\n\treturn vec2( -v.y, v.x );\n}\n\nvec2 toTransformedPosition( in vec2 v ) {\n\treturn (projectionMatrix * translationMatrix * vec3(v, 1.0)).xy;\n}\n\nvec4 toAntialias01( in vec4 antialias, in float scale ) {\n\t// Taylor series of 1 / ( 1 - a ) = 1 + a + a^2 + ....\n\treturn 1.0 + min( vec4( 1.0 ), antialias * scale );\n}\n\nvec4 toAntialias2( in vec2 step, in vec4 antialias, in float scale ) {\n\tfloat x = min( 0.4, step.x * scale );\n\tfloat y = 0.5 - antialias.x;\n\tfloat z = 0.5 - antialias.x - step.y;\n\treturn vec4( y, z, y - max( 0.01, y - x ), z - max( 0.01, z - x ) );\n}\n\nvec2 toPosition3456( in float type, in vec2 p, in vec2 pprev, in vec2 pnext, in float strokeWidth, out float shift ) {\n\tvec2 d0 = p - pprev;\n\tvec2 d1 = pnext - p;\n\tfloat l0 = dot( d0, d0 );\n\tfloat l1 = dot( d1, d1 );\n\tvec2 nd0 = normalize( toInverse( d0 ) );\n\tvec2 nd1 = normalize( toInverse( d1 ) );\n\tvec2 n0 = 0.00001 < l0 ? nd0 : nd1;\n\tvec2 n1 = 0.00001 < l1 ? nd1 : nd0;\n\tvec2 n0i = toInverse( n0 );\n\tvec2 n1i = toInverse( n1 );\n\tfloat direction = sign( 4.5 - type );\n\n\t// Offset\n\tfloat cross = dot( n0i, n1 );\n\tfloat crossInverse = ( 0.00001 < abs( cross ) ? 1.0 / cross : 0.0 );\n\tfloat b = dot(n1 - n0, n0) * crossInverse;\n\tfloat offsetSize = direction * strokeWidth * 0.5;\n\tvec2 offset = n1 + n1i * b;\n\n\t// Miter\n\tvec2 pmiter = p + offsetSize * offset;\n\tfloat miterAngle0 = dot( n0i, pmiter - pprev );\n\tfloat miterAngle1 = dot( n1i, pmiter - pnext );\n\tfloat miterLength = dot( offset, offset );\n\tfloat miterSide = direction * cross;\n\n\t// Bevel\n\tvec2 n = ( type == 4.0 || type == 6.0 ? n1 : n0 );\n\tvec2 pbevel = p + offsetSize * n;\n\n\t//\n\tvec2 presult = (\n\t\t0.0 <= miterAngle0 || miterAngle1 < 0.0 || miterSide < 0.0 ?\n\t\tpbevel : pmiter\n\t);\n\t/*\n\tvec2 presult = (\n\t\tmiterAngle0 < 0.0 && 0.0 <= miterAngle1 && miterLength < 50.0 ?\n\t\tpmiter : pbevel\n\t);\n\t*/\n\tvec2 ni = ( type == 4.0 || type == 6.0 ? n1i : n0i );\n\tshift = dot( ni, p - presult );\n\treturn toTransformedPosition( presult );\n}\n\nvec2 toStep3456( in float type ) {\n\treturn ( type < 4.5 ? vec2( 1.0, 0.0 ) : vec2( 0.0, 1.0 ) );\n}\n\nvec4 toAntialias3456( in float strokeWidth, in float scale ) {\n\tfloat a = antialiasWeight / max( 0.0001, strokeWidth );\n\treturn toAntialias01( vec4( a, a, a, a ), scale );\n}\n\nfloat toDotAndDashScale( in float scale, in float strokeWidthScale ) {\n\treturn (\n\t\tscale == 4.0 || scale == 5.0 || scale == 6.0 || scale == 7.0 ?\n\t\tstrokeWidthScale : 1.0\n\t);\n}\n\nvec4 toColorStroke3456( in float shift, in float scale ) {\n\tfloat x = aColorFill.x + shift;\n\tfloat y = scale * aColorFill.y;\n\tfloat z = scale * aColorFill.z;\n\tfloat w = aColorFill.w;\n\treturn vec4( x, y, z, w );\n}\n\nfloat toStrokeWidthScale( in float scale ) {\n\treturn (\n\t\tscale == 3.0 || scale == 7.0 ?\n\t\tpixelScale : (\n\t\t\tscale == 1.0 || scale == 5.0 ?\n\t\t\tmin( 1.0, pixelScale ) : (\n\t\t\t\tscale == 2.0 || scale == 6.0 ?\n\t\t\t\tmax( 1.0, pixelScale ) : 1.0\n\t\t\t)\n\t\t)\n\t);\n}\n\nvoid main(void) {\n\tvec2 p012 = toTransformedPosition( aPosition );\n\n\tfloat type = aClipping.z;\n\n\t// type === 0 or 1\n\tvec4 a01 = toAntialias01( aAntialias, pixelScale );\n\n\t// type === 2\n\tvec4 a2 = toAntialias2( aStep, aAntialias, pixelScale );\n\n\t// type === 3, 4, 5 or 6\n\tfloat shift3456 = 0.0;\n\tfloat strokeWidthScale = toStrokeWidthScale( aStep.y );\n\tfloat strokeWidth = strokeWidthScale * aStep.x;\n\tvec2 p3456 = toPosition3456( type, aPosition, aAntialias.xy, aAntialias.zw, strokeWidth, shift3456 );\n\tvec2 step3456 = toStep3456( type );\n\tvec4 a3456 = toAntialias3456( strokeWidth, pixelScale );\n\tvec4 colorStroke3456 = toColorStroke3456( shift3456, toDotAndDashScale( aStep.y, strokeWidthScale ) );\n\n\t//\n\tgl_Position = vec4( ( 2.5 < type ? p3456 : p012 ), 0.0, 1.0 );\n\tvAntialias = ( 1.5 < type ? ( 2.5 < type ? a3456 : a2 ) : a01 );\n\tvClipping = aClipping;\n\tvStep = ( 2.5 < type ? step3456 : aStep );\n\tvColorFill = ( 2.5 < type ? aColorStroke : aColorFill );\n\tvColorStroke = ( 2.5 < type ? colorStroke3456 : aColorStroke );\n\tvUv = aUv;\n}",oc="\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nuniform sampler2D sampler;\nuniform mediump float pixelScale;\n\nvoid main(void) {\n\tvec4 texture = texture2D(sampler, vUv);\n\tfloat type = vClipping.z;\n\tvec2 v0 = vStep;\n\tvec2 v1 = vClipping.xy;\n\tvec2 v2 = v0 * vAntialias.xy;\n\tvec2 v3 = v1 * vAntialias.zw;\n\tvec4 d0 = vec4( max( v0.x, v0.y ), max( v1.x, v1.y ), max( v2.x, v2.y ), max( v3.x, v3.y ) );\n\tvec4 d1 = vec4( dot( v0, v0 ), dot( v1, v1 ), dot( v2, v2 ), dot( v3, v3 ) );\n\tvec4 d = ( type == 1.0 ? d1 : d0 );\n\tvec2 s = smoothstep( 1.0 - (d.zw - d.xy), vec2( 1.0 ), d.xy );\n\tvec4 color01 = texture * (vColorStroke * (s.x - s.y) + vColorFill * (1.0 - s.x));\n\n\tfloat l = vColorStroke.x;\n\tfloat lp0 = vColorStroke.y;\n\tfloat lp1 = vColorStroke.z;\n\tfloat lt = vColorStroke.w;\n\tfloat ld = 0.5 * pixelScale;\n\tfloat lm = mod( l, lp0 + lp1 );\n\tfloat ls0 = smoothstep( 0.0, 0.0 + ld, lm );\n\tfloat ls1 = smoothstep( lp0, lp0 + ld, lm );\n\tfloat ls2 = ( 0.0 <= lt ? 1.0 - smoothstep( lt - ld, lt, l ) : 1.0 );\n\tvec4 color3456 = color01 * ( ls0 - ls1 ) * ls2;\n\n\tvec2 a0 = vAntialias.xy;\n\tvec2 a1 = vAntialias.zw;\n\tvec2 a2 = vec2( texture.a );\n\tvec2 a = smoothstep( a0 - a1, a0 + a1, a2 );\n\tvec4 color2 = a.x * vColorFill + ( a.y - a.x ) * vColorStroke;\n\tgl_FragColor = ( type == 2.0 ? color2 : (2.5 < type ? color3456 : color01) );\n}",cc=function(n){function r(i){var r=n.call(this,i)||this;return r.Be=t.Shader.from(hc,oc),r.Re=new sc,r.Le=5e3,r.We=r.getBufferSizeMax(i),r}return i(r,n),r.prototype.getBufferSizeMax=function(t){var n=t.context,i=n.extensions;return 1<n.webGLVersion||i.uint32ElementIndex?1431655765:21845},r.prototype.updateAtlas=function(t,n,i,r,e){var u=t.imageSrc;if(null!=u){var s=n.get(u);if(null!=s)t.texture=s.texture;else{var h=new kt(t.image,e);t.texture=h.texture,n.set(h.id,h)}}else t.texture=r;var o=t.text,c=o.value;0<c.length&&i.add(o.family,c)},r.prototype.updateAtlases=function(t,n,i,r,e){for(var u=0,s=t.length;u<s;++u){var h=t[u];this.updateAtlas(h,n,i,r,e);for(var o=h.children,c=0,f=o.length;c<f;++c){var a=o[c];this.updateAtlas(a,n,i,r,e),this.updateAtlases(a.children,n,i,r,e)}}},r.prototype.updateFontAtlas=function(t,n,i,r){var e=t.text,u=i.get(e.family);if(null!=u){var s=n.get(u.id);null!=s?(e.atlas=u,e.texture=s.texture):(e.atlas=void 0,e.texture=r)}else e.atlas=void 0,e.texture=r},r.prototype.updateFontAtlases=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){var s=t[e];this.updateFontAtlas(s,n,i,r);for(var h=s.children,o=0,c=h.length;o<c;++o){var f=h[o];this.updateFontAtlas(f,n,i,r),this.updateFontAtlases(f.children,n,i,r)}}},r.prototype._e=function(n,i,r,e,u,s){var h=this.renderer,o=this.Be;if(null!=o&&0<i.length){if(u){r.begin(),e.begin();var c=r.getDefaultTexture(),f=r.getBaseTexture();this.updateAtlases(i,r,e,c,f),e.end(),e.update(r),this.updateFontAtlases(i,r,e,c),r.end(),r.repack(),this.updateBuffers(i,s,h,o)}o.uniforms.pixelScale=n.getPixelScale(),o.uniforms.antialiasWeight=rr.ANTIALIAS_WEIGHT,o.uniforms.translationMatrix=n.worldTransform.toArray(!0),h.shader.bind(o,!1),h.state.setBlendMode(t.utils.correctBlendMode(t.BLEND_MODES.NORMAL,!0));for(var a=0,l=s.length;a<l;++a)s[a].render(o)}},r.prototype.increaseBufferSize=function(){var t=this.Le,n=this.We;return t<n&&(this.Le=Math.min(n,t<<1),!0)},r.prototype.getBufferSize=function(){return this.Le},r.prototype.updateBuffers=function(t,n,i,r){var e=this.Re;e.reset(t);for(var u=0,s=n.length;null!=e.get()&&u<s;++u)if(!n[u].update(e)){this.increaseBufferSize();break}if(u<s){for(var h=u;h<s;++h)n[h].destroy();n.length=u}for(;null!=e.get();){var o=new rc(this.getBufferSize(),i,r);if(o.update(e))n.push(o);else if(o.destroy(),!this.increaseBufferSize())return}},r}(t.ObjectRenderer),fc=function(n){function r(){var i=n.call(this)||this;return i.children=[],i.Fe=0,i.Pe=-1,i.vn=new yt,i.Ue=new jt,i.ze=1,i.Ge=NaN,i.He=new t.Point,i.Ve=[],i}return i(r,n),r.prototype.calculateBounds=function(){this._bounds.clear()},r.prototype.onChildTransformChange=function(){},r.prototype.toDirty=function(){return this.Fe+=1},r.prototype.isDirty=function(){return this.Pe<this.Fe},r.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var n=this.Fe,i=this.Pe;this.Pe=n;var e=r.SHAPE_RENDERER;null==e&&(e=r.SHAPE_RENDERER=new cc(t)),t.batch.setObjectRenderer(e),e._e(this,this.children,this.vn,this.Ue,i<n,this.Ve)}},r.prototype.containsPoint=function(t){return!1},r.prototype.getPixelScale=function(){this.updateTransform();var t=this.transform,n=t._worldID;if(n!==this.Ge){this.Ge=n;var i=t.worldTransform,r=i.a,e=i.b,u=Math.sqrt(r*r+e*e),s=window.devicePixelRatio||1;this.ze=1/(s*u)}return this.ze},r.prototype.hitTest=function(t,n){for(var i=this.He,r=this.children,e=r.length-1;0<=e;--e){var u=r[e];if(u.visible){var s=u.toLocal(t,void 0,i),h=u.contains(s);if(null!=h&&(null==n||n(h)))return h}}return null},r.prototype.hitTestBBox=function(t,n){for(var i=this.He,r=this.children,e=r.length-1;0<=e;--e){var u=r[e];if(u.visible){var s=u.toLocal(t,void 0,i);if(u.containsBBox(s)&&(null==n||n(u)))return u}}return null},r.prototype.destroy=function(){var t=this.Ve;if(null!=t)for(var i=0,r=t.length;i<r;++i)t[i].destroy();this.Ve.length=0;var e=this.children;for(i=e.length-1;0<=i;--i)e[i].destroy();e.length=0,n.prototype.destroy.call(this)},r.SHAPE_RENDERER=null,r}(t.DisplayObject),ac=function(){function t(){}return t.toIndices=function(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].index);return n},t.toDepth=function(t){for(var n=0,i=t.parent;i instanceof fr;)n+=1,i=i.parent;return n},t.toSharedParent=function(t,n){if(this.toDepth(t)<this.toDepth(n)){for(var i=t.parent;i instanceof fr;){if(this.isParent(n,i))return i;i=i.parent}return i}for(var r=n.parent;r instanceof fr;){if(this.isParent(t,r))return r;r=r.parent}return r},t.toOfParent=function(t,n){for(var i=t.parent;i!==n&&i instanceof fr;)t=i,i=i.parent;return t},t.isParent=function(t,n){for(var i=t.parent;i instanceof fr;){if(i===n)return!0;i=i.parent}return!1},t.toSelected=function(t){for(var n=t;n instanceof fr;){if(n.selected)return n;n=n.parent}return null},t.findChildById=function(n,i,r){for(var e=n.children,u=0,s=e.length;u<s;++u){var h=e[u];if(h.id===i)return h;if(!0===r){var o=t.findChildById(h,i,r);if(null!=o)return o}}return null},t.findChildByType=function(n,i,r){for(var e=n.children,u=0,s=e.length;u<s;++u){var h=e[u];if(h.type===i)return h;if(!0===r){var o=t.findChildByType(h,i,r);if(null!=o)return o}}return null},t.findChild=function(n,i,r){for(var e=n.children,u=0,s=e.length;u<s;++u){var h=e[u];if(i(h))return h;if(!0===r){var o=t.findChild(h,i,r);if(null!=o)return o}}return null},t.findChildrenByType=function(n,i,r,e){e=e||[];for(var u=n.children,s=0,h=u.length;s<h;++s){var o=u[s];o.type===i&&e.push(o),!0===r&&t.findChildrenByType(o,i,r,e)}return e},t.findChildren=function(n,i,r,e){e=e||[];for(var u=n.children,s=0,h=u.length;s<h;++s){var o=u[s];i(o)&&e.push(o),!0===r&&t.findChildren(o,i,r,e)}return e},t.COMPARATOR_INDEX=function(t,n){return t.index-n.index},t}(),lc=function(){function t(){}return t.delete=function(t,n,i){for(var r=t.children,e=r.length,u=0;u<e;++u)(o=r[u]).selected?o.index=e+u:o.index=u;if(r.sort(ac.COMPARATOR_INDEX),!0===i){for(u=e-1;0<=u;--u){if(!(o=r[u]).selected){var s=r.length-(u+1);if(0<s){var h=r.splice(u+1,s);return null!=n&&(n.length=0),t.onChildTransformChange(),t.toDirty(),h}return null!=n&&(n.length=0),null}o.index-=e,o.parent=null,o.selected=!1,o.uploaded=void 0}return 0<r.length?(h=r.splice(0,r.length),null!=n&&(n.length=0),t.onChildTransformChange(),t.toDirty(),h):(null!=n&&(n.length=0),null)}for(u=e-1;0<=u;--u){var o;if(!(o=r[u]).selected)return r.length=u+1,null!=n&&(n.length=0),t.onChildTransformChange(),t.toDirty(),null;o.parent=null,o.selected=!1,o.uploaded=void 0}return 0<r.length?(r.length=0,null!=n&&(n.length=0),t.onChildTransformChange(),t.toDirty()):null!=n&&(n.length=0),null},t}(),vc=function(){function t(){this.resources=[],this.resourceToIndex=new Map}return t.prototype.add=function(t){var n=this.resources,i=this.resourceToIndex,r=i.get(t);if(null!=r)return r;var e=n.length;return n.push(t),i.set(t,e),e},t.prototype.serialize=function(){return this.resources},t}(),bc={},dc=function(){function t(){}return t.prototype.getPosition=function(){return Uo.BOTTOM},t.prototype.getPadding=function(){return 75},t.prototype.getLabelAlignHorizontal=function(t){switch(t){case Uo.TOP:case Uo.BOTTOM:return dr.CENTER;case Uo.LEFT:return dr.OUTSIDE_LEFT;case Uo.RIGHT:return dr.OUTSIDE_RIGHT}},t.prototype.getLabelAlignVertical=function(t){switch(t){case Uo.TOP:return gr.OUTSIDE_TOP;case Uo.BOTTOM:return gr.OUTSIDE_BOTTOM;case Uo.LEFT:case Uo.RIGHT:return gr.MIDDLE}},t.prototype.getLabelPaddingHorizontal=function(){return 50},t.prototype.getLabelPaddingVertical=function(){return 50},t.prototype.getLabelDirection=function(){return mr.LEFT_TO_RIGHT},t.prototype.getTickEnable=function(){return!0},t.prototype.getMajorTickCount=function(){return 3},t.prototype.getMajorTickSize=function(){return 10},t.prototype.getMajorTickPosition=function(){return zo.OUTSIDE},t.prototype.getMajorTickStyle=function(){return Yi.NONE},t.prototype.getMajorTickTextAlignHorizontal=function(t){switch(t){case Uo.TOP:case Uo.BOTTOM:return dr.CENTER;case Uo.LEFT:return dr.OUTSIDE_LEFT;case Uo.RIGHT:return dr.OUTSIDE_RIGHT}},t.prototype.getMajorTickTextAlignVertical=function(t){switch(t){case Uo.TOP:return gr.OUTSIDE_TOP;case Uo.BOTTOM:return gr.OUTSIDE_BOTTOM;case Uo.LEFT:case Uo.RIGHT:return gr.MIDDLE}},t.prototype.getMajorTickTextDirection=function(){return mr.LEFT_TO_RIGHT},t.prototype.getMajorTickTextFormat=function(){return"%YMD\n%Hms.%mi"},t.prototype.getMajorTickTextPaddingHorizontal=function(){return 15},t.prototype.getMajorTickTextPaddingVertical=function(){return 15},t.prototype.getMinorTickCount=function(){return 3},t.prototype.getMinorTickSize=function(){return 5},t.prototype.getMinorTickPosition=function(){return zo.OUTSIDE},t.prototype.getMinorTickStyle=function(){return Yi.NONE},t}(),gc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(dc),mc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPosition=function(){return Uo.LEFT},n.prototype.getMajorTickTextFormat=function(){return"%ssi"},n.prototype.getLabelDirection=function(){return mr.BOTTOM_TO_TOP},n}(dc),pc=function(){function t(){}return t.prototype.getPadding=function(){return 10},t.prototype.isZero=function(t){return Math.abs(t)<1e-5},t.prototype.toStepScale=function(t){return 5.5<=t?10:2.2<=t?5:1.1<=t?2:1},t}(),wc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Go),Dc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(wc),Tc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Po),Oc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Tc),Sc=function(){$s.set("DDiagram",Dc),$s.set("DDiagramCanvas",Oc)},Mc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Tc),Ec=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getDragModifier=function(){return Dn.ALT},n}(wc),kc=function(){function t(){}return t.prototype.toLabel=function(t){var n=t.type;if(t instanceof Kr){var i,r=t.subtype;if(t instanceof fu){if(null!=(i=this.toOpetypedLabel(n,r,t.opetype,t)))return i}else if(null!=(i=this.toSubtypedLabel(n,r,t)))return i}return this.toTypedLabel(n,t)},t.prototype.toTypedLabel=function(t,n){return this.toTypeLabel(t)+": "+this.toConditionLabel(n.condition)},t.prototype.toSubtypedLabel=function(t,n,i){var r=this.toTypeLabel(t);switch(t){case Xr.SHOW_HIDE:return""+this.toShowHideTypeLabel(n);case Xr.BLINK:return r+": "+this.toBlinkTypeLabel(n);case Xr.CHANGE_COLOR:return r+": "+this.toChangeColorTypeLabel(n);case Xr.MISC:return r+": "+this.toMiscTypeLabel(n)}return null},t.prototype.toOpetypedLabel=function(t,n,i,r){switch(t){case Xr.TRANSFORM:var e=this.toTransformTypeLabel(n);switch(n){case $e.ROTATE:return e+": "+this.toTransformRotateTypeLabel(i);case $e.MOVE:return e+": "+this.toTransformMoveTypeLabel(i);case $e.RESIZE:return e+": "+this.toTransformResizeTypeLabel(i)}}return null},t.prototype.toTypeLabel=function(t){switch(t){case Xr.SHOW_HIDE:return"Show / hide";case Xr.BLINK:return"Blink";case Xr.TRANSFORM:return"Transform";case Xr.OPEN:return"Open";case Xr.CHANGE_COLOR:return"Change color";case Xr.CHANGE_TEXT:return"Change text";case Xr.CHANGE_CURSOR:return"Change cursor";case Xr.EMIT_EVENT:return"Emit an event";case Xr.MISC:return"Misc."}return"Unknown"},t.prototype.toConditionLabel=function(t){return 20<t.length?t.substring(0,20)+"...":t},t.prototype.toBlinkTypeLabel=function(t){switch(t){case Or.VISIBILITY:return"Visibility";case Or.BRIGHTEN:return"Brighten";case Or.DARKEN:return"Darken";case Or.OPACITY:return"Opacity";case Or.COLOR_FILL:return"Fill";case Or.COLOR_STROKE:return"Stroke"}return"Unknown"},t.prototype.toShowHideTypeLabel=function(t){switch(t){case Ze.SHOW:return"Show";case Ze.HIDE:return"Hide"}return"Unknown"},t.prototype.toTransformTypeLabel=function(t){switch(t){case $e.RESIZE:return"Resize";case $e.MOVE:return"Move";case $e.ROTATE:return"Rotate"}return"Unknown"},t.prototype.toTransformRotateTypeLabel=function(t){switch(t){case bu.RELATIVE:return"Relative";case bu.ABSOLUTE:return"Absolute"}return"Unknown"},t.prototype.toTransformMoveTypeLabel=function(t){switch(t){case Qe.RELATIVE_X:return"Relative X";case Qe.RELATIVE_Y:return"Relative Y";case Qe.ABSOLUTE_X:return"Absolute X";case Qe.ABSOLUTE_Y:return"Absolute Y";case Qe.FORWARD_OR_BACKWARD:return"Forward / backward";case Qe.LEFT_OR_RIGHT:return"Left / right"}return"Unknown"},t.prototype.toTransformResizeTypeLabel=function(t){switch(t){case au.ABSOLUTE_SIZE:return"Height & width";case au.RELATIVE_SIZE:return"Height & width (%)";case au.ABSOLUTE_HEIGHT:return"Height";case au.RELATIVE_HEIGHT:return"Height (%)";case au.ABSOLUTE_WIDTH:return"Width";case au.RELATIVE_WIDTH:return"Width (%)"}return"Unknown"},t.prototype.toChangeColorTypeLabel=function(t){switch(t){case Jr.FILL:return"Fill";case Jr.STROKE:return"Stroke";case Jr.FILL_AND_STROKE:return"Fill and stroke";case Jr.TEXT:return"Text";case Jr.TEXT_OUTLINE:return"Text outline";case Jr.ALL:return"ALL"}return"Unknown"},t.prototype.toChangeColorTargetLabel=function(t){switch(t){case Zr.COLOR_AND_ALPHA:return"Color";case Zr.COLOR:return"RGB";case Zr.ALPHA:return"Alpha";case Zr.CODE:return"Dynamic color";case Zr.BRIGHTNESS:return"Brightness"}return"Unknown"},t.prototype.toChangeTextTypeLabel=function(t){switch(t){case $r.TEXT:return"Text";case $r.NUMBER:return"Number"}return"Unknown"},t.prototype.toOpenTypeLabel=function(t){switch(t){case Ge.FLOW:return"Flow";case Ge.PAGE:return"Page (New window)";case Ge.PAGE_INPLACE:return"Page (In-place)"}return"Unknown"},t.prototype.toMiscTypeLabel=function(t){switch(t){case Le.INPUT:return"Input"}},t}(),Ic=function(){$s.set("EShapeActionValue",kc)},Nc=function(){$s.set("DDiagramEditor",Ec),$s.set("DDiagramCanvasEditor",Mc),Ic()},yc=function(){$s.set("DDialog",Eh)},xc=function(){$s.set("DDialogCommand",kh)},Cc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getOk=function(){return"Yes"},n.prototype.getCancel=function(){return"No"},n.prototype.getMessage=function(){return""},n}(kh),jc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(fh),Ac=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"padding"},n.prototype.getHeight=function(){return 200},n.prototype.getTextAlignHorizontal=function(){return V.CENTER},n}(jc),Bc=function(){$s.set("DDialogConfirm",Cc),$s.set("DDialogConfirmMessage",Ac)},Rc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getMessage=function(){return"Are you sure you want to delete this data?"},n}(Cc),Lc=function(){$s.set("DDialogConfirmDelete",Rc)},Wc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getMessage=function(){return"Your changes have not been saved.\nDo you want to discard the changes and continue?"},n}(Cc),_c=function(){$s.set("DDialogConfirmDiscard",Wc)},Fc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getOk=function(){return"OK"},n.prototype.getCancel=function(){return"Cancel"},n.prototype.getLabel=function(){return""},n.prototype.getLabelWidth=function(){return 60},n.prototype.getHeight=function(){return"auto"},n}(Eh),Pc=function(){$s.set("DDialogInputText",Fc)},Uc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getOk=function(){return"OK"},n.prototype.getCancel=function(){return null},n}(Cc),zc=function(){$s.set("DDialogMessage",Uc)},Gc=function(t){return M.isSucceeded(t)?"Processed successfully":M.isFailed(t)?"Failed to process the request":"Processing..."},Hc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getOk=function(){return"OK"},n.prototype.getCancel=function(){return null},n.prototype.getMessage=function(){return Gc},n.prototype.getInterval=function(){return 400},n}(Cc),Vc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getHeight=function(){return 90},n}(Ac),Xc=function(){$s.set("DDialogProcessing",Hc),$s.set("DDialogProcessingMessage",Vc)},Yc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getOk=function(){return"Save"},n}(Fc),Kc=function(){$s.set("DDialogSaveAs",Yc)},Jc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getNoteNoItemsText=function(){return"No Items"},n.prototype.getNoteSearchingText=function(){return"Searching..."},n}(Eh),Zc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.isOverflowMaskEnabled=function(){return!0},n.prototype.getBackgroundColor=function(t){return ih.BACKGROUND_COLOR},n.prototype.getInteractive=function(){return f.BOTH},n.prototype.getWheelSpeed=function(){return 2.24},n.prototype.getDragMode=function(){return Io.TOUCH},n}(uh),qc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return 16777215},n.prototype.getBorderAlign=function(t){return 1},n}(Zc),Qc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(){return null},n.prototype.getBorderColor=function(){return null},n.prototype.getHeight=function(){return 250},n.prototype.getCornerMask=function(){return h.ALL},n}(qc),$c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?null:M.isActive(t)?ih.HIGHLIGHT_COLOR:M.isFocused(t)||M.isHovered(t)?ih.WEAK_HIGHLIGHT_COLOR:null},n.prototype.getBackgroundAlpha=function(t){return ih.HIGHLIGHT_ALPHA},n.prototype.getBorderColor=function(t){return null},n.prototype.getHeight=function(){return 30},n.prototype.getWidth=function(){return"padding"},n.prototype.getTextAlignHorizontal=function(){return V.LEFT},n.prototype.getPaddingLeft=function(){return 10},n.prototype.getPaddingRight=function(){return 10},n.prototype.getCornerMask=function(){return h.ALL},n}(jc),tf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(n){return t.prototype.getBackgroundColor.call(this,n&~v.ACTIVE)},n.prototype.getBackgroundAlpha=function(n){return t.prototype.getBackgroundAlpha.call(this,n&~v.ACTIVE)},n.prototype.getColor=function(t){return rh.getColor(t)},n.prototype.getCornerMask=function(){return h.NONE},n}($c),nf=function(){$s.set("DDialogSelect",Jc),$s.set("DDialogSelectList",Qc),$s.set("DDialogSelectListItem",tf)},rf=function(){zh(),Ch(),xc(),Lc(),_c(),Bc(),vo(),To(),Pc(),zc(),Xc(),Kc(),nf(),Wo(),yc()};Qs.add("dropdown_mark",20,14,'<g><polyline fill="none" stroke="#fff" stroke-width="1" points="16 5 10 11 4 5"></polyline></g>');var ef=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getImageAlignHorizontal=function(){return V.RIGHT},n.prototype.getImageAlignWith=function(){return Y.PADDING},n.prototype.getImageMarginHorizontal=function(){return.5*-this.getPaddingRight()},n.prototype.getImageSource=function(t){return Qs.mappings.dropdown_mark},n.prototype.newTextValue=function(){return""},n.prototype.getTextValue=function(t){return""},n}(ah),uf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return null},n.prototype.getBorderColor=function(t){return null},n.prototype.getMargin=function(){return 5},n.prototype.getInteractive=function(){return f.CHILDREN},n.prototype.getDirection=function(){return $n.VERTICAL},n.prototype.getCornerAdjust=function(){return!1},n.prototype.getMultiplicity=function(){return 1},n}(uh),sf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getDirection=function(){return $n.VERTICAL},n.prototype.getHeight=function(){return"auto"},n}(uf),hf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return 16777215},n.prototype.getOffsetX=function(){return 5},n.prototype.getOffsetY=function(){return 5},n.prototype.getPaddingTop=function(){return 5},n.prototype.getPaddingBottom=function(){return 5},n.prototype.getWidth=function(){return 200},n.prototype.getMargin=function(){return 0},n.prototype.getShadow=function(){return this.newShadowWeak()},n.prototype.getInteractive=function(){return f.BOTH},n}(sf),of=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPaddingLeft=function(){return this.getPaddingRight()},n.prototype.getPaddingRight=function(){return 26},n}($c),cf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getShortcutTextMargin=function(){return this.getPaddingRight()},n}(of);Qs.add("menu_item_mark_check_active",14,14,'<g><polyline fill="none" stroke="#fff" stroke-width="1" points="1 6.5 5 11 13 2.5"></polyline></g>'),Qs.add("menu_item_mark_check_inactive",14,14,"<g></g>");var ff=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(n){return t.prototype.getBackgroundColor.call(this,n&~v.ACTIVE)},n.prototype.getColor=function(n){return t.prototype.getColor.call(this,n&~v.ACTIVE)},n.prototype.getImageSource=function(t){return M.isActive(t)?Qs.mappings.menu_item_mark_check_active:Qs.mappings.menu_item_mark_check_inactive},n.prototype.getImageAlignWith=function(){return Y.BORDER},n.prototype.getImageMarginHorizontal=function(){return 7},n}(cf),af=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isActive(t)?15792383:null},n.prototype.getBackgroundAlpha=function(t){return M.isActive(t)?.1:0},n.prototype.getMargin=function(){return 0},n.prototype.getWidth=function(){return"padding"},n.prototype.getCornerMask=function(){return h.ALL},n}(sf),lf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"padding"},n.prototype.getCornerMask=function(){return h.ALL},n}(sf);Qs.add("menu_item_expandable_header_closed",14,14,'<g transform="scale(1, 0.7)"><polyline fill="none" stroke="#fff" stroke-width="1" points="6 16 10 10 6 4"></polyline></g>'),Qs.add("menu_item_expandable_header_opened",14,14,'<g transform="scale(0.7, 1)"><polyline fill="none" stroke="#fff" stroke-width="1" points="16 6 10 10 4 6"></polyline></g>');var vf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPaddingLeft=function(){return this.getPaddingRight()},n.prototype.getPaddingRight=function(){return 26},n.prototype.getImageSource=function(t){return M.isActiveIn(t)?Qs.mappings.menu_item_expandable_header_opened:Qs.mappings.menu_item_expandable_header_closed},n.prototype.getImageAlignWith=function(){return Y.BORDER},n.prototype.getImageMarginHorizontal=function(){return 7},n}($c),bf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPaddingLeft=function(){return t.prototype.getPaddingLeft.call(this)+16},n.prototype.getImageMarginHorizontal=function(){return t.prototype.getImageMarginHorizontal.call(this)+16},n}(ff);Qs.add("menu_item_mark_link",24,24,'<g><path fill="none" stroke="#fff" stroke-width="1" d="M10 6H7c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2v-3 M19 11V4h-7 M18.75 4.5l-8 8" /></g>');var df=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getImageSource=function(t){return t&v.EXTENSION_0?Qs.mappings.menu_item_mark_link:null},n.prototype.getImageTintAlpha=function(n){return n&v.HOVERED?t.prototype.getImageTintAlpha.call(this,n):0},n.prototype.getImageAlignWith=function(){return Y.BORDER},n.prototype.getImageAlignHorizontal=function(){return V.RIGHT},n.prototype.getMenuOptions=function(){return{sticky:!0,fit:!0,items:[{value:_n.OPEN_LINK_IN_NEW_WINDOW,text:{value:this.getOpenLinkInNewWindow()}},{value:_n.COPY_LINK_ADDRESS,text:{value:this.getCopyLinkAddress()}}]}},n.prototype.getOpenLinkInNewWindow=function(){return"Open link in new window"},n.prototype.getCopyLinkAddress=function(){return"Copy link address"},n}(cf),gf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPaddingLeft=function(){return t.prototype.getPaddingLeft.call(this)+16},n}(df);Qs.add("menu_item_mark_next",14,20,'<g><polyline fill="none" stroke="#fff" stroke-width="1" points="5 16 11 10 5 4"></polyline></g>');var mf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getImageSource=function(t){return Qs.mappings.menu_item_mark_next},n.prototype.getImageAlignWith=function(){return Y.BORDER},n.prototype.getImageAlignHorizontal=function(){return V.RIGHT},n.prototype.getImageMarginHorizontal=function(){return 12},n}(of),pf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPaddingLeft=function(){return t.prototype.getPaddingLeft.call(this)+16},n}(mf),wf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBorderColor=function(t){return ih.WEAK_HIGHLIGHT_COLOR},n.prototype.getBorderAlpha=function(t){return ih.WEAK_HIGHLIGHT_ALPHA},n.prototype.getHeight=function(){return 15},n.prototype.getWidth=function(){return"padding"},n.prototype.getPaddingLeft=function(){return 10},n.prototype.getPaddingRight=function(){return 10},n}(jc),Df=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(wf),Tf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPaddingLeft=function(){return t.prototype.getPaddingLeft.call(this)+16},n}(Df),Of=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return null},n.prototype.getBorderColor=function(t){return null},n.prototype.getWidth=function(){return 0},n.prototype.getHeight=function(){return 0},n.prototype.getClearType=function(){return G.BOTH},n.prototype.getInteractive=function(){return f.CHILDREN},n}(uh),Sf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Of),Mf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPaddingLeft=function(){return t.prototype.getPaddingLeft.call(this)+16},n}(Sf),Ef=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getPaddingLeft=function(){return t.prototype.getPaddingLeft.call(this)+16},n}(cf),kf=function(){$s.set("DMenu",hf),$s.set("DMenuItem",of),$s.set("DMenuItemCheck",ff),$s.set("DMenuItemLink",df),$s.set("DMenuItemMenu",mf),$s.set("DMenuItemSeparator",Df),$s.set("DMenuItemSpace",Sf),$s.set("DMenuItemText",cf),$s.set("DMenuItemExpandableBody",lf),$s.set("DMenuItemExpandableHeader",vf),$s.set("DMenuItemExpandableItemCheck",bf),$s.set("DMenuItemExpandableItemLink",gf),$s.set("DMenuItemExpandableItemMenu",pf),$s.set("DMenuItemExpandableItemSeparator",Tf),$s.set("DMenuItemExpandableItemSpace",Mf),$s.set("DMenuItemExpandableItemText",Ef),$s.set("DMenuItemExpandable",af)},If=function(){$s.set("DDropdown",ef),kf()},Nf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isActive(t)?15792383:null},n.prototype.getBackgroundAlpha=function(t){return M.isActive(t)?.1:0},n.prototype.getMargin=function(){return 0},n.prototype.getCornerMask=function(){return h.ALL},n}(sf);Qs.add("menu_item_expandable_header_closed",14,14,'<g transform="scale(1, 0.7)"><polyline fill="none" stroke="#fff" stroke-width="1" points="6 16 10 10 6 4"></polyline></g>'),Qs.add("menu_item_expandable_header_opened",14,14,'<g transform="scale(0.7, 1)"><polyline fill="none" stroke="#fff" stroke-width="1" points="16 6 10 10 4 6"></polyline></g>');var yf,xf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?null:M.isFocused(t)||M.isHovered(t)?16316664:M.isActiveIn(t)?16316664:null},n.prototype.getBorderColor=function(t){return null},n.prototype.getHeight=function(){return 30},n.prototype.getWidth=function(){return"padding"},n.prototype.getPaddingLeft=function(){return 16},n.prototype.getPaddingRight=function(){return 16},n.prototype.getCornerMask=function(){return h.ALL},n}(jc),Cf=function(){$s.set("DExpandableHeader",xf),$s.set("DExpandable",Nf)},jf=function(){$s.set("DImage",jc)},Af=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getDirection=function(){return $n.HORIZONTAL},n.prototype.getWidth=function(){return"auto"},n}(uf),Bf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getHeight=function(){return this.getLineHeight()},n}(Af),Rf=function(){$s.set("DInputAndLabel",Bf)},Lf=function(){return null},Wf=function(t){return t},_f=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.COLOR=16777215,n.COLOR_HOVERED=Xn.darken(n.COLOR,.017),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)||M.isReadOnly(t)?null:M.isFocused(t)||M.isHovered(t)?this.COLOR_HOVERED:this.COLOR},n.prototype.getBorderColor=function(t){return 15066597},n.prototype.getOutlineColor=function(n){return M.isInvalid(n)?ih.INVALID_COLOR:t.prototype.getOutlineColor.call(this,n)},n.prototype.getHeight=function(){return this.getLineHeight()},n.prototype.getWidth=function(){return 100},n.prototype.getPlaceholder=function(){return""},n.prototype.getPaddingLeft=function(){return 10},n.prototype.getPaddingRight=function(){return 10},n.prototype.getEditingFormatter=function(){return this.getTextFormatter()},n.prototype.getEditingUnformatter=function(){return Wf},n.prototype.getEditingValidator=function(){return Lf},n}(fh),Ff=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextAlignHorizontal=function(){return V.CENTER},n.prototype.getStep=function(){return 1},n.prototype.getMin=function(){return null},n.prototype.getMax=function(){return null},n.prototype.newTextValue=function(){return 0},n.prototype.getTextValue=function(t){return 0},n}(_f),Pf=function(t){return parseInt(t,10)},Uf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getEditingUnformatter=function(){return Pf},n}(Ff),zf=function(){$s.set("DInputInteger",Uf)},Gf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextAlignHorizontal=function(){return V.RIGHT},n.prototype.getWidth=function(){return 60},n.prototype.getHeight=function(){return this.getLineHeight()},n}(so),Hf=function(){$s.set("DInputLabel",Gf)},Vf=function(t){return parseFloat(t)},Xf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getStep=function(){return.1},n.prototype.getEditingUnformatter=function(){return Vf},n}(Ff),Yf=function(){$s.set("DInputReal",Xf)},Kf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.newTextValue=function(){return""},n.prototype.getTextValue=function(t){return""},n}(_f),Jf=function(){$s.set("DInputText",Kf)},Zf=function(){Rf(),zf(),Hf(),Yf(),Jf()},qf=function(){$s.set("DLayout",uf),$s.set("DLayoutHorizontal",Af),$s.set("DLayoutSpace",Of),$s.set("DLayoutVertical",sf)},Qf=function(){$s.set("DListItemSeparator",wf),$s.set("DListItem",$c),$s.set("DList",qc)},$f=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(){return ih.BACKGROUND_COLOR},n.prototype.getBorderColor=function(t){return null},n.prototype.getHeight=function(){return 30},n.prototype.getMargin=function(){return 0},n.prototype.getInteractive=function(){return f.BOTH},n}(Af),ta=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.COLOR=16777215,n.COLOR_HOVERED=Xn.darken(n.COLOR,.017),n.COLOR_PRESSED=Xn.darken(n.COLOR,.034),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?null:M.isActive(t)?ih.HIGHLIGHT_COLOR:M.isPressed(t)?this.COLOR_PRESSED:M.isFocused(t)||M.isHovered(t)?this.COLOR_HOVERED:null},n.prototype.getBorderColor=function(){return null},n.prototype.getWidth=function(){return"auto"},n.prototype.getHeight=function(){return"100%"},n.prototype.getPaddingLeft=function(){return 10},n.prototype.getPaddingRight=function(){return 10},n.prototype.getCornerMask=function(){return h.ALL},n.prototype.getTextAlignHorizontal=function(){return V.LEFT},n}(lh),na=function(){$s.set("DMenuBarItem",ta),$s.set("DMenuBar",$f),kf()},ia=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return 16777215},n.prototype.getBorderColor=function(t){return null},n.prototype.getInteractive=function(){return f.BOTH},n}(Zc),ra=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"100%"},n.prototype.getHeight=function(){return"auto"},n.prototype.getPaddingTop=function(){return 16},n.prototype.getPaddingBottom=function(){return 16},n.prototype.getMargin=function(){return 0},n}(sf),ea=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(ff),ua=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(af),sa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(bf),ha=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(gf),oa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(pf),ca=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Tf),fa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Mf),aa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Ef),la=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(df),va=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(mf),ba=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Df),da=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(Sf),ga=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(cf),ma=function(){$s.set("DMenuSided",ia),$s.set("DMenuSidedContent",ra),$s.set("DMenuSidedItemCheck",ea),$s.set("DMenuSidedItemLink",la),$s.set("DMenuSidedItemMenu",va),$s.set("DMenuSidedItemSeparator",ba),$s.set("DMenuSidedItemSpace",da),$s.set("DMenuSidedItemText",ga),$s.set("DMenuSidedItemExpandable",ua),$s.set("DMenuSidedItemExpandableItemCheck",sa),$s.set("DMenuSidedItemExpandableItemLink",ha),$s.set("DMenuSidedItemExpandableItemMenu",oa),$s.set("DMenuSidedItemExpandableItemSeparator",ca),$s.set("DMenuSidedItemExpandableItemSpace",fa),$s.set("DMenuSidedItemExpandableItemText",aa)},pa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"100%"},n.prototype.getHeight=function(){return"100%"},n.prototype.getTextAlignHorizontal=function(){return V.CENTER},n.prototype.getInteractive=function(){return f.NONE},n}(so),wa=function(){$s.set("DNote",pa)},Da=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"100%"},n.prototype.getBorderColor=function(t){return null},n.prototype.getInteractive=function(){return f.BOTH},n}(uh),Ta=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return 0},n.prototype.getBackgroundAlpha=function(t){return 0},n.prototype.getWidth=function(){return 13},n.prototype.getHeight=function(){return 13},n.prototype.getInteractive=function(){return f.BOTH},n}(uh),Oa=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.COLOR=Xn.darken(ih.WEAK_HIGHLIGHT_COLOR,.25),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isHovered(t)||M.isDragging(t)?ih.HIGHLIGHT_COLOR:this.COLOR},n.prototype.getBackgroundAlpha=function(t){return M.isHovered(t)||M.isDragging(t)?1:ih.WEAK_HIGHLIGHT_ALPHA},n.prototype.getBorderColor=function(t){return null},n.prototype.getBorderAlpha=function(t){return 0},n.prototype.getBorderWidth=function(t){return 1},n.prototype.getWidth=function(){return 13},n.prototype.getHeight=function(){return 13},n.prototype.getMinimumSize=function(){return 16},n}(uh),Sa=function(){$s.set("DScrollBar",Ta),$s.set("DScrollBarThumb",Oa)},Ma=function(){$s.set("DPane",Zc),$s.set("DContent",Da),Sa()},Ea=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(ef),ka=function(){$s.set("DSelect",Ea),If()},Ia=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(){return ih.BACKGROUND_COLOR},n.prototype.getBorderColor=function(t){return 14540253},n.prototype.getMargin=function(){return 0},n.prototype.getInteractive=function(){return f.BOTH},n}(sf),Na=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"100%"},n.prototype.getCornerMask=function(){return h.TOP},n.prototype.getBorderColor=function(t){return null},n.prototype.getRowHeight=function(){return 30},n}(Zc),ya=function(){function t(){}return t.getBackgroundColor=function(t){return M.isInvalid(t)?ih.INVALID_COLOR:t&v.ACTIVE_IN?ih.HIGHLIGHT_COLOR:ih.WEAK_HIGHLIGHT_COLOR},t.getBackgroundAlpha=function(t){return M.isDisabled(t)||!M.isPressed(t)&&!M.isFocused(t)?0:ih.HIGHLIGHT_ALPHA},t.getBorderColor=function(t){return 16185078},t.getBorderAlign=function(t){return.5},t.getBorderMask=function(t){return r.TOP_BOTTOM},t.getColor=function(t){return rh.getColor(t)},t.getAlpha=function(t){return M.isDisabled(t)?0:rh.getAlpha(t)},t.getImageTintColor=function(t){return M.isDisabled(t)||M.isReadOnly(t)||!M.isActive(t)?M.isFocused(t)?this.IMAGE_TINT_COLOR_FOCUSED:ih.WEAK_HIGHLIGHT_COLOR:ih.HIGHLIGHT_COLOR},t.getOutlineAlign=function(t){return-2},t.getHeight=function(){return"padding"},t.getCornerMask=function(){return h.ALL},t.IMAGE_TINT_COLOR_FOCUSED=Xn.darken(ih.WEAK_HIGHLIGHT_COLOR,.1),t}(),xa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getImageTintColor=function(t){return ya.getImageTintColor(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n}(gh),Ca=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n}(Oh),ja=function(t){return Xh.format(t)},Aa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getTextFormatter=function(){return ja},n.prototype.getTextValue=function(t){return new Date},n.prototype.newTextValue=function(){return new Date},n}(lh),Ba=function(t,n){return mo.format(t,n.getDatetimeMask())},Ra=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getTextFormatter=function(){return Ba},n.prototype.getTextValue=function(t){return new Date},n.prototype.newTextValue=function(){return new Date},n}(lh),La=function(t){return String(Number(t)+1)},Wa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getPaddingLeft=function(){return 10},n.prototype.getPaddingRight=function(){return 10},n.prototype.getTextFormatter=function(){return La},n.prototype.getTextValue=function(t){return 0},n.prototype.newTextValue=function(){return 0},n}(fh),_a=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextAlignHorizontal=function(){return V.RIGHT},n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getOutlineColor=function(n){return M.isDisabled(n)?null:t.prototype.getOutlineColor.call(this,n)},n.prototype.getOutlineAlign=function(t){return ya.getOutlineAlign(t)},n}(Uf),Fa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextAlignHorizontal=function(){return V.RIGHT},n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getOutlineColor=function(n){return M.isDisabled(n)?null:t.prototype.getOutlineColor.call(this,n)},n.prototype.getOutlineAlign=function(t){return ya.getOutlineAlign(t)},n}(Xf),Pa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getOutlineColor=function(n){return M.isDisabled(n)?null:t.prototype.getOutlineColor.call(this,n)},n.prototype.getOutlineAlign=function(t){return ya.getOutlineAlign(t)},n}(Kf),Ua=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n}(lh),za=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n}(lh),Ga=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getImageSource=function(t){return null},n}(Ea),Ha=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getPaddingLeft=function(){return 10},n.prototype.getPaddingRight=function(){return 10},n}(fh),Va=function(t,n){return go.format(t,n.getDatetimeMask())},Xa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return ya.getBackgroundColor(t)},n.prototype.getBackgroundAlpha=function(t){return ya.getBackgroundAlpha(t)},n.prototype.getBorderColor=function(t){return ya.getBorderColor(t)},n.prototype.getBorderAlign=function(t){return ya.getBorderAlign(t)},n.prototype.getBorderMask=function(t){return ya.getBorderMask(t)},n.prototype.getColor=function(t){return ya.getColor(t)},n.prototype.getAlpha=function(t){return ya.getAlpha(t)},n.prototype.getHeight=function(){return ya.getHeight()},n.prototype.getCornerMask=function(){return ya.getCornerMask()},n.prototype.getTextFormatter=function(){return Va},n.prototype.getTextValue=function(t){return new Date},n.prototype.newTextValue=function(){return new Date},n}(lh),Ya=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBorderColor=function(t){return null},n.prototype.getCornerMask=function(){return h.ALL},n.prototype.getMargin=function(){return 0},n.prototype.getInteractive=function(){return f.BOTH},n}(Af),Ka=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getWidth=function(){return"100%"},n}(Ya),Ja=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?16777215:M.isActive(t)?ih.HIGHLIGHT_BLENDED:M.isFocused(t)||M.isHovered(t)?ih.WEAK_HIGHLIGHT_BLENDED:16777215},n}(Ka),Za=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.COLOR=Xn.darken(16777215,.017),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?this.COLOR:M.isActive(t)?ih.HIGHLIGHT_BLENDED:M.isFocused(t)||M.isHovered(t)?ih.WEAK_HIGHLIGHT_BLENDED:this.COLOR},n}(Ka),qa=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.COLOR=16382457,n.COLOR_HOVERED=Xn.darken(n.COLOR,.017),n.COLOR_PRESSED=Xn.darken(n.COLOR,.034),n}return i(n,t),n.prototype.getBackgroundColor=function(t){return M.isDisabled(t)?null:M.isActive(t)?ih.HIGHLIGHT_COLOR:M.isPressed(t)?this.COLOR_PRESSED:M.isFocused(t)||M.isHovered(t)?this.COLOR_HOVERED:this.COLOR},n.prototype.getWidth=function(){return"100%"},n.prototype.getHeight=function(){return 30},n}(Ya),Qa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getTextAlignHorizontal=function(){return V.CENTER},n.prototype.getCornerMask=function(){return h.ALL},n.prototype.getHeight=function(){return"padding"},n.prototype.getPaddingLeft=function(){return 10},n.prototype.getPaddingRight=function(){return 10},n.prototype.getTextValue=function(t){return null},n.prototype.newTextValue=function(){return null},n}(ch),$a=function(){$s.set("DTableBodyCellCheck",xa),$s.set("DTableBodyCellColor",Ca),$s.set("DTableBodyCellDate",Aa),$s.set("DTableBodyCellDatetime",Ra),$s.set("DTableBodyCellIndex",Wa),$s.set("DTableBodyCellInputInteger",_a),$s.set("DTableBodyCellInputReal",Fa),$s.set("DTableBodyCellInputText",Pa),$s.set("DTableBodyCellSelectDialog",Ua),$s.set("DTableBodyCellSelectFetcher",za),$s.set("DTableBodyCellSelectMenu",Ga),$s.set("DTableBodyCellText",Ha),$s.set("DTableBodyCellTime",Xa),$s.set("DTableBodyRowEven",Ja),$s.set("DTableBodyRowOdd",Za),$s.set("DTableBodyRow",Ka),$s.set("DTableBody",Na),$s.set("DTableHeaderCell",Qa),$s.set("DTableHeader",qa),$s.set("DTableRow",Ya),$s.set("DTable",Ia),mh(),jh(),bo(),Oo(),zf(),Yf(),Jf(),nf(),kf()},tl=function(){$s.set("DText",so)},nl=function(){th(),sh(),oh(),Fo(),Ho(),$s.set("DChart",Vo),$s.set("DChartAxisX",gc),$s.set("DChartAxisY",mc),$s.set("DChartCoordinateLinear",pc),Nc(),Sc(),rf(),If(),Cf(),jf(),Zf(),qf(),Qf(),na(),ma(),kf(),wa(),Ma(),Uh(),xh(),lo(),ao(),fo(),ka(),$a(),tl()},il=function(){Vi(),nl(),qs()},rl=function(t){function n(){var n=t.call(this)||this;return n.Xe=!0,n.wr=10,n}return i(n,t),n.prototype.toggle=function(){return this.Xe=!this.Xe,this.emit("change",this),this.Xe},n.prototype.enable=function(){!0!==this.Xe&&(this.Xe=!0,this.emit("change",this))},n.prototype.disable=function(){!1!==this.Xe&&(this.Xe=!1,this.emit("change",this))},n.prototype.isEnabled=function(){return this.Xe},Object.defineProperty(n.prototype,"size",{get:function(){return this.wr},set:function(t){this.wr!==t&&(this.wr=t,this.emit("change",t,this))},enumerable:!0,configurable:!0}),n.prototype.snap=function(t,n){if(this.Xe){var i=this.wr;n.set(t,Math.round(t/i)*i)}},n.prototype.reset=function(){this.Xe=!0,this.wr=10,this.emit("change",this)},n.prototype.serialize=function(){return[this.Xe?1:0,this.wr]},n.prototype.deserialize=function(t){0!==t[0]?this.enable():this.disable(),this.size=t[1]},n}(t.utils.EventEmitter),el=function(){function t(){this.distance=NaN,this.result=0,this.threshold=10}return t.prototype.reset=function(t,n){this.distance=NaN,this.result=t,this.threshold=1e-4<n?10/n:10},t.prototype.set=function(t,n){var i=Math.abs(n-t);if(i<=this.threshold){var r=this.distance;(r!=r||i<r)&&(this.distance=i,this.result=n)}},t}();!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(yf||(yf={}));var ul,sl=function(){function t(t,n){this.type=t,this.position=n}return t.prototype.serialize=function(){return[this.type,this.position]},t}(),hl=function(t){function n(){var n=t.call(this)||this;return n.values=[],n.Ye=!0,n.Xe=!0,n}return i(n,t),n.prototype.isEnabled=function(){return this.Xe},n.prototype.toggle=function(){return this.Xe=!this.Xe,this.emit("change",this),this.Xe},n.prototype.enable=function(){!0!==this.Xe&&(this.Xe=!0,this.emit("change",this))},n.prototype.disable=function(){!1!==this.Xe&&(this.Xe=!1,this.emit("change",this))},n.prototype.add=function(t,n){null!=n?this.values.splice(n,0,t):this.values.push(t),this.emit("change",this)},n.prototype.remove=function(t){var n=this.values;0<=t&&t<n.length&&(n.splice(t,1),this.emit("change",this))},n.prototype.size=function(){return this.values.length},n.prototype.replace=function(t,n){var i=this.values;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.emit("change",this),r}return null},n.prototype.swap=function(t,n){if(t!==n){var i=this.values,r=i[t];i[t]=i[n],i[n]=r}},Object.defineProperty(n.prototype,"visible",{get:function(){return this.Ye},set:function(t){this.Ye!==t&&(this.Ye=t,this.emit("change",this))},enumerable:!0,configurable:!0}),n.prototype.snap=function(t,n,i,r){if(this.Xe)for(var e=this.values,u=0,s=e.length;u<s;++u){var h=e[u];h.type===yf.VERTICAL?i.set(t,h.position):r.set(n,h.position)}},n.prototype.reset=function(){this.Xe=!0,this.Ye=!0,this.values.length=0,this.emit("change",this)},n.prototype.serialize=function(){for(var t=[],n=this.values,i=0,r=n.length;i<r;++i)t.push(n[i].serialize());return[this.Xe?1:0,this.Ye?1:0,t]},n.prototype.deserialize=function(t){this.Xe=0!==t[0],this.Ye=0!==t[1];var n=t[2],i=this.values;i.length=0;for(var r=0,e=n.length;r<e;++r){var u=n[r];i.push(new sl(u[0],u[1]))}this.emit("change",this)},n}(t.utils.EventEmitter);!function(t){t[t.NONE=0]="NONE",t[t.TOP_LEFT=1]="TOP_LEFT",t[t.TOP_CENTER=2]="TOP_CENTER",t[t.TOP_RIGHT=3]="TOP_RIGHT",t[t.MIDDLE_LEFT=4]="MIDDLE_LEFT",t[t.MIDDLE_RIGHT=5]="MIDDLE_RIGHT",t[t.BOTTOM_LEFT=6]="BOTTOM_LEFT",t[t.BOTTOM_CENTER=7]="BOTTOM_CENTER",t[t.BOTTOM_RIGHT=8]="BOTTOM_RIGHT",t[t.ROTATION=9]="ROTATION"}(ul||(ul={}));var ol=function(n){function r(i){var r=n.call(this)||this;return r.se=[new t.Point,new t.Point,new t.Point,new t.Point,new t.Point],r.Ke=[new t.Point,new t.Point],r.Je=[1,1],r.Ze=new t.Point,r.qe=new el,r.Qe=new el,r.$e={distance:0,scale:new t.Point},r.tu=new t.Point,r.nu=new t.Rectangle,r.iu=new t.Point,r.grid=new rl,r.target=new hl,r.gr=i,r.Xe=!0,r}return i(r,n),r.prototype.isEnabled=function(){return this.Xe},r.prototype.toggle=function(){return this.Xe=!this.Xe,this.emit("change",this),this.Xe},r.prototype.enable=function(){!0!==this.Xe&&(this.Xe=!0,this.emit("change",this))},r.prototype.disable=function(){!1!==this.Xe&&(this.Xe=!1,this.emit("change",this))},r.prototype.prepare=function(t){t.updateTransform();var n=t.transform.localTransform,i=t.width,r=t.height,e=this.se;e[0].set(0,0),e[1].set(i,0),e[2].set(i,r),e[3].set(0,r),e[4].set(.5*i,.5*r),n.apply(e[0],e[0]),n.apply(e[1],e[1]),n.apply(e[2],e[2]),n.apply(e[3],e[3]),n.apply(e[4],e[4])},r.prototype.prepareForTranslate=function(t){this.Xe&&this.prepare(t)},r.prototype.snap=function(t,n){var i=t.x,r=t.y,e=this.gr.canvas,u=this.qe,s=this.Qe;if(null!=e){var h=Math.max(e.scale.x,e.scale.y);u.reset(i,h),s.reset(r,h),u.set(i,0),u.set(i,e.width),s.set(r,0),s.set(r,e.height)}else u.reset(i,1),s.reset(r,1);return this.target.snap(i,r,u,s),this.grid.snap(i,u),this.grid.snap(r,s),n.x=Hn(u.distance)?NaN:u.result,n.y=Hn(s.distance)?NaN:s.result,n},r.prototype.toSnapped=function(t,n){var i=t.x,r=t.y;if(this.Xe){this.snap(t,n);var e=n.x,u=n.y;n.set(Hn(e)?i:e,Hn(u)?r:u)}else n.set(i,r);return n},r.prototype.toTranslationSnapped=function(t,n){var i=t.x,r=t.y,e=NaN,u=NaN;if(this.Xe)for(var s=this.tu,h=this.se,o=0,c=h.length;o<c;++o){var f=h[o];if(s.set(f.x+i,f.y+r),this.snap(s,s),!Hn(s.x)){var a=s.x-f.x;(Hn(e)||Math.abs(a-i)<Math.abs(e-i))&&(e=a)}if(!Hn(s.y)){var l=s.y-f.y;(Hn(u)||Math.abs(l-r)<Math.abs(u-r))&&(u=l)}}return n.x=Hn(e)?i:e,n.y=Hn(u)?r:u,n},r.prototype.prepareForRotate=function(t){},r.prototype.getGridSizeRotation=function(){return 5},r.prototype.toRadian=function(t){return t/180*Math.PI},r.prototype.toDegree=function(t){return t/Math.PI*180},r.prototype.toRotationSnapped=function(t,n){if(this.Xe){var i=this.getGridSizeRotation(),r=t+n,e=Math.round(this.toDegree(r)),u=e%90;return Math.abs(u)<=i?this.toRadian(e-u)-t:90-i<=u?this.toRadian(e+(90-u))-t:u<=-90+i?this.toRadian(e-(90+u))-t:n}return n},r.prototype.calcNormalizedVector=function(t,n,i){var r=n.x-t.x,e=n.y-t.y,u=Math.sqrt(r*r+e*e);if(1e-5<u){var s=1/u;i.x=r*s,i.y=e*s}else i.x=1,i.y=0;return u},r.prototype.prepareForScale=function(t,n){if(this.Xe){this.prepare(t);var i=this.se,r=this.Ke,e=this.Je;switch(n){case ul.TOP_LEFT:e[0]=this.calcNormalizedVector(i[1],i[0],r[0]),e[1]=this.calcNormalizedVector(i[3],i[0],r[1]);break;case ul.TOP_CENTER:e[0]=this.calcNormalizedVector(i[3],i[0],r[0]);break;case ul.TOP_RIGHT:e[0]=this.calcNormalizedVector(i[0],i[1],r[0]),e[1]=this.calcNormalizedVector(i[2],i[1],r[1]);break;case ul.MIDDLE_LEFT:e[0]=this.calcNormalizedVector(i[1],i[0],r[0]);break;case ul.NONE:break;case ul.MIDDLE_RIGHT:e[0]=this.calcNormalizedVector(i[0],i[1],r[0]);break;case ul.BOTTOM_LEFT:e[0]=this.calcNormalizedVector(i[2],i[3],r[0]),e[1]=this.calcNormalizedVector(i[0],i[3],r[1]);break;case ul.BOTTOM_CENTER:e[0]=this.calcNormalizedVector(i[0],i[3],r[0]);break;case ul.BOTTOM_RIGHT:e[0]=this.calcNormalizedVector(i[3],i[2],r[0]),e[1]=this.calcNormalizedVector(i[1],i[2],r[1])}}},r.prototype.setScaleSnappedResult=function(t,n,i,r,e){if(1e-5<n&&(Hn(e.distance)||t<e.distance)){e.distance=t;var u=1+i/n;r?e.scale.x=u:e.scale.y=u}},r.prototype.calcScaleSnapped1D=function(t,n,i,r,e,u){var s=this.Ze;t.apply(n,s);var h=s.x,o=s.y;this.snap(s,s);var c=s.x,f=s.y;if(!Hn(c)&&1e-5<Math.abs(i.x)){var a=(c-h)/i.x,l=Math.abs(a),v=(c-n.x)/i.x;this.setScaleSnappedResult(l,r,v,e,u)}if(!Hn(f)&&1e-5<Math.abs(i.y)){var b=(f-o)/i.y,d=(l=Math.abs(b),(f-n.y)/i.y);this.setScaleSnappedResult(l,r,d,e,u)}},r.prototype.calcScaleSnappedX=function(t,n,i,r,e){this.calcScaleSnapped1D(t,n,i,r,!0,e)},r.prototype.calcScaleSnappedY=function(t,n,i,r,e){this.calcScaleSnapped1D(t,n,i,r,!1,e)},r.prototype.calcScaleSnapped2D=function(t,n,i,r,e){var u=this.Ze;t.apply(n,u);var s=u.x,h=u.y;this.snap(u,u);var o=u.x,c=u.y;if(Hn(o)){if(Hn(c))return;o=s}else Hn(c)&&(c=h);var f=i[0].x*i[1].y-i[1].x*i[0].y;if(1e-5<Math.abs(f)){var a=o-s,l=c-h,v=Math.abs(a*a+l*l);if(Hn(e.distance)||v<e.distance){e.distance=v;var b=o-n.x,d=c-n.y,g=(+i[1].y*b-i[1].x*d)/f,m=(-i[0].y*b+i[0].x*d)/f;e.scale.set(1+g/r[0],1+m/r[1])}}},r.prototype.calcScaleSnappedXY=function(t,n,i,r,e,u,s){this.calcScaleSnapped2D(t,n,e,u,s),this.calcScaleSnappedX(t,r,e[0],u[0],s),this.calcScaleSnappedY(t,i,e[1],u[1],s)},r.prototype.toScaleSnapped=function(t,n,i,r){if(this.Xe){var e=this.se,u=this.Ke,s=this.Je,h=this.$e;switch(h.distance=NaN,h.scale.set(r.x,r.y),n){case ul.TOP_LEFT:this.calcScaleSnappedXY(t,e[0],e[1],e[3],u,s,h);break;case ul.TOP_CENTER:this.calcScaleSnappedY(t,e[0],u[0],s[0],h),this.calcScaleSnappedY(t,e[1],u[0],s[0],h);break;case ul.TOP_RIGHT:this.calcScaleSnappedXY(t,e[1],e[0],e[2],u,s,h);break;case ul.MIDDLE_LEFT:this.calcScaleSnappedX(t,e[0],u[0],s[0],h),this.calcScaleSnappedX(t,e[3],u[0],s[0],h);break;case ul.NONE:break;case ul.MIDDLE_RIGHT:this.calcScaleSnappedX(t,e[1],u[0],s[0],h),this.calcScaleSnappedX(t,e[2],u[0],s[0],h);break;case ul.BOTTOM_LEFT:this.calcScaleSnappedXY(t,e[3],e[2],e[0],u,s,h);break;case ul.BOTTOM_CENTER:this.calcScaleSnappedY(t,e[2],u[0],s[0],h),this.calcScaleSnappedY(t,e[3],u[0],s[0],h);break;case ul.BOTTOM_RIGHT:this.calcScaleSnappedXY(t,e[2],e[3],e[1],u,s,h)}if(!Hn(h.distance)){if(r.copyFrom(h.scale),i)switch(n){case ul.TOP_LEFT:case ul.TOP_RIGHT:case ul.BOTTOM_LEFT:case ul.BOTTOM_RIGHT:r.x=r.y=Math.max(r.x,r.y);break;case ul.TOP_CENTER:case ul.BOTTOM_CENTER:r.x=r.y;break;case ul.MIDDLE_LEFT:case ul.MIDDLE_RIGHT:r.y=r.x;break;case ul.NONE:}return!0}}return!1},r.prototype.reset=function(){this.enable(),this.target.reset(),this.grid.reset()},r.prototype.serialize=function(){return[this.Xe?1:0,this.target.serialize(),this.grid.serialize()]},r.prototype.deserialize=function(t){0!==t[0]?this.enable():this.disable(),this.target.deserialize(t[1]),this.grid.deserialize(t[2])},r}(t.utils.EventEmitter),cl=function(t){function n(n){var i=t.call(this)||this;return i.bi=null,i.wi=!1,i.ru=!1,i.Di=null!=n?n.onTime:void 0,i.Oi=null!=n?n.onStart:void 0,i.Si=null!=n?n.onEnd:void 0,i}return i(n,t),Object.defineProperty(n.prototype,"target",{get:function(){return this.bi},set:function(t){this.bi=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),n.prototype.start=function(t){void 0===t&&(t=!1),this.stop(),this.ru=!0,this.wi=t,this.onStart(t),this.ru&&(this.onTime(t?1:0,t,0),this.ru&&(this.onTime(t?0:1,t,0),this.ru||this.onEnd(t)))},n.prototype.onStart=function(t){var n=this.Oi;null!=n&&n(t,this),this.emit("start",t,this)},n.prototype.onTime=function(t,n,i){var r=this.Di;null!=r&&r(t,n,i,this),this.emit("time",t,n,i,this)},n.prototype.onEnd=function(t){var n=this.Si;null!=n&&n(t,this),this.emit("end",t,this)},n.prototype.isStarted=function(){return this.ru},n.prototype.isReverse=function(){return this.wi},n.prototype.stop=function(){this.ru=!1},n.prototype.end=function(){if(this.ru){this.ru=!1;var t=this.wi,n=t?0:1;this.onTime(n,t,0),this.onEnd(t)}},n}(t.utils.EventEmitter),fl=function(){function t(t,n,i,r){this.left=r,this.top=t,this.right=n,this.bottom=i}return t.prototype.getTheme=function(){throw new Error("Not supported")},t.prototype.setTheme=function(t){throw new Error("Not supported")},t.prototype.getTop=function(){return this.left},t.prototype.getRight=function(){return this.right},t.prototype.getBottom=function(){return this.bottom},t.prototype.getLeft=function(){return this.left},t.prototype.set=function(t,n,i,r){null==n?(this.top=t,this.right=t,this.bottom=t,this.left=t):null==i?(this.top=t,this.right=n,this.bottom=t,this.left=n):null==r?(this.top=t,this.right=n,this.bottom=i,this.left=n):(this.top=t,this.right=n,this.bottom=i,this.left=r)},t}(),al=function(){function t(){var t=(this.eu=document.body).getBoundingClientRect();this.It=new fl(6,6,6,6),this.uu={width:t.width,height:t.height,autoStart:!1,backgroundColor:15658734,antialias:!1}}return t.prototype.getRootElement=function(){return this.eu},t.prototype.setRootElement=function(t,n){if(this.eu!==t&&(this.eu=t,!1!==n)){var i=t.getBoundingClientRect(),r=this.uu;r.width=i.width,r.height=i.height}return this},t.prototype.getWidth=function(){return this.uu.width},t.prototype.setWidth=function(t){return this.uu.width=t,this},t.prototype.getHeight=function(){return this.uu.height},t.prototype.setHeight=function(t){return this.uu.height=t,this},t.prototype.getPadding=function(){return this.It},t.prototype.setPadding=function(t,n,i,r){var e=this.It;return e.left=t,e.top=n,e.right=i,e.bottom=r,this},t.prototype.getBackgroundColor=function(){return this.uu.backgroundColor},t.prototype.setBackgroundColor=function(t){return this.uu.backgroundColor=t,this},t.prototype.getAntialias=function(){return this.uu.antialias},t.prototype.setAntialias=function(t){return this.uu.antialias=t,this},t.prototype.getPixiApplicationOptions=function(){return this.uu},t}();t.settings.RESOLUTION=window.devicePixelRatio||1,t.settings.ROUND_PIXELS=!1,delete t.Renderer.__plugins.accessibility;var ll,vl=function(t){return null!=t&&null!=t.onDblClick},bl=function(t){return null!=t&&null!=t.onWheel},dl=function(n){function r(i){void 0===i&&(i=new al);var r=n.call(this,i.getPixiApplicationOptions())||this;r.su=null,e.setInstace(r),r.gt=i,r.hu=!0,r.ou=5,r.cu=5,r.fu=function(){null!=r.su&&r.render()};var u=i.getRootElement(),s=u.children;0<s.length?u.insertBefore(r.view,s[0]):u.appendChild(r.view),u.style.margin="0px",u.style.padding="0px",u.style.overflow="hidden",r.view.style.width="100%",r.view.style.height="100%",r.view.style.display="block";var h=!1,o=W.getFocusController(),c=function(){h||o.setFocused(null,!0,!1)};u.addEventListener("focus",(function(t){h=!0}),!0),u.addEventListener("blur",(function(t){h=!1,setTimeout(c,0)}),!0),r.view.setAttribute("tabindex","0"),W.getKeyboardController().init(r.view,r.stage,o);var f=r.renderer.plugins.interaction;f.on(Z.down,(function(t){null==t.target&&o.setFocused(null,!0,!1)}));var a=function(){var t=i.getRootElement().getBoundingClientRect();r.renderer.resize(t.width,t.height),r.resizeChildren(t.width,t.height,i.getPadding()),r.update()};window.addEventListener("resize",a),window.addEventListener("orientationchange",a);var l=new t.Point,v=Qn.getInstance();return v.on(r.view,(function(t){var n=t;Z.toGlobal(n,l);var i=f.hitTest(l),r=v.normalize(t);if(null!=r)for(;null!=i;){if(bl(i)&&i.onWheel(n,r,l)){n.preventDefault();break}i=i.parent}})),Z.onDblClick(r.view,(function(t){var n=o.getFocused();if(null!=n)for(var i=n;!(null==i||vl(i)&&i.onDblClick(t));)i=i.parent})),r.stage.interactive=!0,r}return i(r,n),r.prototype.disallowUpdate=function(){this.hu=!1},r.prototype.allowUpdate=function(){this.hu=!0},r.prototype.update=function(){this.hu&&null==this.su&&(this.su=requestAnimationFrame(this.fu))},r.prototype.render=function(){var t=this.su;this.su=null,this.onRendering();var i=this.su;this.su=t,this.refit(),this.reflow(),n.prototype.render.call(this),this.su=i},r.prototype.onRendering=function(){},Object.defineProperty(r.prototype,"width",{get:function(){return this.screen.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.screen.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this.gt.getPadding()},enumerable:!0,configurable:!0}),r.prototype.resizeChildren=function(t,n,i){for(var r=this.stage.children,e=0,u=r.length;e<u;++e){var s=r[e];s instanceof $&&s.onParentResize(t,n,i)}},r.prototype.refit=function(){for(var t=this.stage.children,n=0,i=this.ou;n<i;++n){for(var r=!1,e=0,u=t.length;e<u;++e){var s=t[e];s instanceof $&&(s.refit(),r=r||s.isChildrenDirty())}if(!r)break}},r.prototype.reflow=function(){for(var t=this.stage.children,n=0,i=this.ou;n<i;++n){for(var r=!1,e=0,u=t.length;e<u;++e){var s=t[e];s instanceof $&&(s.reflow(),r=r||s.isDirty()||s.hasDirty())}if(!r)break}},r.prototype.getRootElement=function(){return this.gt.getRootElement()},r.prototype.getOptions=function(){return this.gt},r}(t.Application),gl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n)},n.prototype.getType=function(){return"DBoard"},n}($),ml=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.buttonMode=!0,this.au=function(t,n){return null!=n&&null!=n.toggle?n.toggle:t.isToggle()}(this.theme,n),this.lu=function(){i.setPressed(!1);var t=i.vu;null!=t&&t.off(Z.up,i.lu)},this.vu=null,this.setActiveHandlers(),null!=n&&null!=n.group&&n.group.add(this)},n.prototype.onShortcut=function(n){t.prototype.onShortcut.call(this,n),this.onClick()},n.prototype.isToggle=function(){return this.au},n.prototype.setActiveHandlers=function(){var t=this;Z.onClick(this,(function(){t.onClick()})),this.isToggle()||this.on(Z.down,(function(){t.setPressed(!0),(t.vu=e.getInstance().stage).on(Z.up,t.lu)}))},n.prototype.onStateChange=function(n,i){t.prototype.onStateChange.call(this,n,i),this.buttonMode=M.isActionable(n)},n.prototype.getType=function(){return"DButton"},n.prototype.onClick=function(){this.isActionable()&&(this.isToggle()?(this.onToggleStart(),this.onToggleEnd()):this.emit("active",this))},n.prototype.onToggleStart=function(){this.setActive(!this.isActive())},n.prototype.onToggleEnd=function(){this.emit(this.isActive()?"active":"inactive",this)},n.prototype.onActivateKeyDown=function(){this.isActionable()&&(this.isToggle()?this.onToggleStart():this.setPressed(!0))},n.prototype.onActivateKeyUp=function(){this.isActionable()&&(this.isToggle()?this.onToggleEnd():(this.isPressed()&&this.emit("active",this),this.setPressed(!1)))},n.prototype.onKeyDown=function(n){return R.isActivateKey(n)&&this.onActivateKeyDown(),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return R.isActivateKey(n)&&this.onActivateKeyUp(),t.prototype.onKeyUp.call(this,n)},n.prototype.destroy=function(){var n=this.gt;null!=n&&null!=n.group&&n.group.remove(this),t.prototype.destroy.call(this)},n}(gt),pl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButton"},n}(ml),wl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButtonAmbient"},n}(pl),Dl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButtonCheck"},n}(ml),Tl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButtonCheckRight"},n}(Dl),Ol=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButtonPrimary"},n}(pl),Sl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DLayoutHorizontal"},n}(di),Ml=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.bu=null,n.du=null,n.gu=null,n}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n);var r=this.theme,e=new gi({parent:this,x:r.getLayoutX(),y:r.getLayoutY(),width:r.getLayoutWidth(),height:r.getLayoutHeight()});this.onInit(e,n);var u=n&&n.ok||r.getOk(),s=n&&n.cancel||r.getCancel();if(null!=u||null!=s){var h=new Sl({parent:e,width:"padding",height:"auto",padding:{top:this.padding.getTop()}});this.mu=h,new si({parent:h,weight:1}),null!=u&&null!=s?(this.pu=new Ol({parent:h,text:{value:s},on:{active:function(){i.onCancel()}}}),this.wu=new pl({parent:h,text:{value:u},on:{active:function(){i.onOk()}}})):null!=u?this.wu=new Ol({parent:h,text:{value:u},on:{active:function(){i.onOk()}}}):null!=s&&(this.pu=new Ol({parent:h,text:{value:s},on:{active:function(){i.onCancel()}}})),new si({parent:h,weight:1})}},n.prototype.onInit=function(t,n){},n.prototype.open=function(){return t.prototype.open.call(this),this.bu},n.prototype.onOpen=function(){var n=this;t.prototype.onOpen.call(this),null==this.bu&&(this.bu=new Promise((function(t,i){n.du=t,n.gu=i})))},n.prototype.onClose=function(){t.prototype.onClose.call(this);var n=this.gu;this.bu=null,this.du=null,this.gu=null,null!=n&&n()},n.prototype.onOk=function(){var t=this.du;this.bu=null,this.du=null,this.gu=null,this.close(),null!=t&&t(),this.emit("ok",this)},n.prototype.onCancel=function(){var t=this.gu;this.bu=null,this.du=null,this.gu=null,this.close(),null!=t&&t(),this.emit("cancel",this)},n.prototype.getType=function(){return"DDialogCommand"},n}(Mh),El=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(t){var i=this;this.Du=null,this.Tu=t&&t.editing&&t.editing.validator||this.theme.getEditingValidator(),n.prototype.init.call(this,t),this.Ou=!1,this.Su=null,this.Mu=!1,this.ru=!1,this.Eu=null,this.cursor="text",this.ku=t&&t.description||"",this.Iu=t&&t.editing&&t.editing.formatter||this.theme.getEditingFormatter(),this.Nu=t&&t.editing&&t.editing.unformatter||this.theme.getEditingUnformatter(),this.Jr=function(t){i.onInputKeyDown(t)},this.Zr=function(t){i.onInputBlur(t)},this.qr=function(){i.updateInput()},this.Qr=function(){i.onInputChange()},this.$r=function(t){i.onInputInput(t)},this.yu=function(){i.onPreRender()},this.te=null},Object.defineProperty(r.prototype,"value",{get:function(){return this.Tn},set:function(t){this.text=t},enumerable:!0,configurable:!0}),r.prototype.onTextChange=function(){n.prototype.onTextChange.call(this),this.validate()},r.prototype.validate=function(){var t=this.Tu(this.Tn,this);return this.Du!==t&&(this.Du=t,this.setInvalid(null!=t),this.isHovered()&&this.applyTitle()),t},r.prototype.applyTitle=function(){var t=this.Du;o(t)?e.getInstance().view.title=t:n.prototype.applyTitle.call(this)},r.prototype.onFocused=function(){n.prototype.onFocused.call(this),this.start()},r.prototype.onBlured=function(){n.prototype.onBlured.call(this),this.Ou&&this.onInputChange(),this.cancel()},r.prototype.onPreRender=function(){this.ru&&(this.ru=!1,this.xu(!1))},r.prototype.start=function(){this.isDisabled()||!0===this.ru||(this.ru=!0,e.getInstance().renderer.once("prerender",this.yu),e.update())},r.prototype.xu=function(t){if(!this.Ou){this.Ou=!0;var n=this.dn;null!=n&&(n.visible=!1);var i=e.getInstance(),r=this.getClipper();if(null!=r){var u=this.getInput(r);if(null!=u){var s=i.renderer.resolution,h=this.getInputRect(s),o=this.getClipperRect(h,s);this.initInput(u,r,h,o);var c=this.qr,f=this.te;null!=f&&f.off("postrender",c),this.te=i.renderer,i.renderer.on("postrender",c),r.style.display="",u.focus(),r.scrollTop=0,r.scrollLeft=0,this.Mu&&(this.Mu=!1,u.select())}}!1!==t&&e.update()}},r.prototype.createText=function(t){var i=n.prototype.createText.call(this,t);return this.Ou&&(i.visible=!1),i},r.prototype.getClipperRect=function(n,i){var r=this.Eu=null!=this.Eu?this.Eu:new t.Rectangle;r.copyFrom(n);for(var e=new t.Point(0,0),u=this.parent;u instanceof $;){e.set(0,0),u.toGlobal(e,e,!1);var s=e.x,h=e.y;e.set(u.width,u.height),u.toGlobal(e,e,!0);var o=e.x-s,c=e.y-h;s=(s*i|0)/i,h=(h*i|0)/i;var f=r.x,a=r.y,l=r.x+r.width,v=r.y+r.height;r.x=Math.min(Math.max(f,s),s+o),r.y=Math.min(Math.max(a,h),h+c),r.width=Math.min(Math.max(l,s),s+o)-r.x,r.height=Math.min(Math.max(v,h),h+c)-r.y,u=u.parent}return r},r.prototype.getInputRect=function(n){var i=this.Su=null!=this.Su?this.Su:new t.Rectangle,r=new t.Point(0,0);return this.toGlobal(r,r,!1),i.x=r.x,i.y=r.y,r.set(this.width,this.height),this.toGlobal(r,r,!0),i.width=r.x-i.x,i.height=r.y-i.y,i.x=(i.x*n|0)/n,i.y=(i.y*n|0)/n,i},r.prototype.initInput=function(t,n,i,r){t.type=this.getInputType(),t.value=this.Iu(this.Tn,this),t.addEventListener("keydown",this.Jr),t.addEventListener("blur",this.Zr),t.addEventListener("change",this.Qr),t.addEventListener("input",this.$r);var e=this.theme,u=this.state;n.setAttribute("style",this.getClipperStyle(u,e,i,r)),t.setAttribute("style",this.getInputStyle(u,e,i,r)),this.isReadOnly()?t.setAttribute("readonly","readonly"):t.removeAttribute("readonly"),this.isDisabled()?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")},r.prototype.cancel=function(){if(this.Ou){this.Ou=!1;var t=this.dn;null!=t&&(t.visible=!0);var n=r.Zi;null!=n&&(n.removeEventListener("keydown",this.Jr),n.removeEventListener("blur",this.Zr),n.removeEventListener("change",this.Qr),n.removeEventListener("input",this.$r),n.type="text",this.resetSelection(n));var i=r.Cu;null!=i&&(i.style.display="none");var u=this.te;null!=u&&(this.te=null,u.off("postrender",this.qr)),this.Mu=!1;var s=e.getInstance(),h=s.view;h.focus();var o=s.renderer.plugins.interaction;this.containsPoint(o.mouse.global)&&!this.isHovered()&&(this.setHovered(!0),h.style.cursor=this.cursor),e.update()}},r.prototype.resetSelection=function(t){t.setSelectionRange(t.value.length,t.value.length,"backward")},r.prototype.getInput=function(t){return null==r.Zi&&t.appendChild(r.Zi=this.createInput()),r.Zi},r.prototype.createInput=function(){var t=document.createElement("input");return t.setAttribute("spellcheck","false"),t},r.prototype.getClipper=function(){if(null==r.Cu){var t=r.Cu=this.createClipper();e.getInstance().getRootElement().appendChild(t)}return r.Cu},r.prototype.createClipper=function(){return document.createElement("div")},r.prototype.getInputStyleBackground=function(t,n){return"background-color: transparent;"},r.prototype.getInputStyleBorder=function(t,n){return"border: none; box-sizing: border-box;"},r.prototype.getInputStylePadding=function(t,n,i){return"padding: "+n.getPaddingTop()+"px "+n.getPaddingRight()+"px "+n.getPaddingBottom()+"px "+n.getPaddingLeft()+"px;"},r.prototype.getInputStyleOutline=function(t,n){return"outline: none;"},r.prototype.getInputStylePosition=function(t,n,i,r){return"position: absolute;left: "+(i.x-r.x)+"px;top: "+(i.y-r.y)+"px;width: "+i.width+"px;height: "+i.height+"px;line-height: "+i.height+"px;"},r.prototype.getInputStyleText=function(t,n){return"font-family: "+n.getFontFamilly()+";font-size: "+n.getFontSize()+"px;color: #"+n.getColor(t).toString(16)+";"},r.prototype.getInputStyleMargin=function(t,n){return"margin: 0;"},r.prototype.getInputStyle=function(t,n,i,r){return this.getInputStylePosition(t,n,i,r)+this.getInputStyleMargin(t,n)+this.getInputStyleText(t,n)+this.getInputStyleBackground(t,n)+this.getInputStyleBorder(t,n)+this.getInputStylePadding(t,n,i)+this.getInputStyleOutline(t,n)},r.prototype.getClipperStylePosition=function(t,n,i,r){return"position: absolute;left: "+r.x+"px;top: "+r.y+"px;width: "+r.width+"px;height: "+r.height+"px;line-height: "+i.height+"px;"},r.prototype.getClipperStyle=function(t,n,i,r){return"overflow: hidden; outline: none;padding: 0; margin: 0; border: none; background-color: transparent;"+this.getClipperStylePosition(t,n,i,r)},r.prototype.onInputKeyDown=function(t){if(R.isFocusKey(t)){this.end();var n=W.getFocusController(),i=R.getFocusDirection(t),r=n.findFocusable(this,!1,!1,i);null!=r&&(e.getInstance().view.focus(),n.setFocused(r,!0,!0),t.preventDefault(),t.stopImmediatePropagation())}else R.isOkKey(t)?(this.end(),this.emit("enter",this)):R.isCancelKey(t)&&this.cancel()},r.prototype.onInputBlur=function(t){this.end()},r.prototype.end=function(){this.onInputChange(),this.cancel()},r.prototype.onInputInput=function(t){t.target instanceof HTMLInputElement&&this.emit("input",this.toValue(t.target.value),this)},r.prototype.onInputChange=function(){if(this.Ou){var t=r.Zi;if(null!=t){var n=this.toValue(t.value),i=this.Tn;i!==n&&(this.text=n,this.onTextValueChange(n,i))}}},r.prototype.onTextValueChange=function(t,n){this.validate(),this.emit("change",t,n,this)},r.prototype.select=function(){var t=r.Zi;return null!=t&&this.Ou?t.select():this.Mu=!0,this},r.prototype.updateInput=function(){if(this.Ou)if(this.worldVisible){var t=r.Zi,n=r.Cu;if(null!=t&&null!=n){var i=e.getInstance().renderer.resolution,u=this.getInputRect(i),s=this.getClipperRect(u,i),h=this.theme,o=this.state;t.setAttribute("style",this.getInputStyle(o,h,u,s)),n.setAttribute("style",this.getClipperStyle(o,h,u,s))}}else this.cancel()},r.prototype.onDownThis=function(t){this.isFocused()&&this.start(),n.prototype.onDownThis.call(this,t)},r.Zi=null,r.Cu=null,r}(gt),kl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.theme;this.ju=function(t,n){return null!=n?null!=n.step?n.step:t.getStep():null}(i,n),this.Au=function(t,n){return null!=n?null!=n.min?n.min:t.getMin():null}(i,n),this.Bu=function(t,n){return null!=n?null!=n.max?n.max:t.getMax():null}(i,n)},Object.defineProperty(n.prototype,"step",{get:function(){return this.ju},set:function(t){this.ju!==t&&(this.ju=t,this.updateInputStep())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this.Au},set:function(t){this.Au!==t&&(this.Au=t,this.updateInputMin())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this.Bu},set:function(t){this.Bu!==t&&(this.Bu=t,this.updateInputMax())},enumerable:!0,configurable:!0}),n.prototype.toValue=function(t){var n=this.Nu(t,this);return n==n?null!=this.Au&&n<this.Au?this.Au:null!=this.Bu&&this.Bu<n?this.Bu:n:this.value},n.prototype.updateInputStep=function(){if(this.Ou){var t=El.Zi;null!=t&&this.initInputStep(t)}},n.prototype.updateInputMin=function(){if(this.Ou){var t=El.Zi;null!=t&&this.initInputMin(t)}},n.prototype.updateInputMax=function(){if(this.Ou){var t=El.Zi;null!=t&&this.initInputMax(t)}},n.prototype.initInputStep=function(t){null!=this.ju?t.step=String(this.ju):t.removeAttribute("step")},n.prototype.initInputMin=function(t){null!=this.Au?t.min=""+this.Au:t.removeAttribute("min")},n.prototype.initInputMax=function(t){null!=this.Bu?t.max=""+this.Bu:t.removeAttribute("max")},n.prototype.initInput=function(n,i,r,e){t.prototype.initInput.call(this,n,i,r,e),this.initInputStep(n),this.initInputMin(n),this.initInputMax(n)},n.prototype.resetSelection=function(n){n.type="text",t.prototype.resetSelection.call(this,n),n.type="number"},n.prototype.getInputType=function(){return"number"},n}(El),Il=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DInputReal"},n}(kl),Nl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.setState(v.UNFOCUSABLE,!0)},n.prototype.getType=function(){return"DText"},n}(dt),yl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DInputLabel"},n}(Nl),xl=function(t){function n(n){var i=t.call(this,n)||this;return i.addChild(i.Ru=new yl(null!=n?n.label:void 0)),i.addChild(i.Zi=i.createInput(null!=n?n.input:void 0)),null!=n&&null!=n.space&&i.addChild(new si(n.space)),i}return i(n,t),Object.defineProperty(n.prototype,"input",{get:function(){return this.Zi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.Ru},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DInputAndLabel"},n}(Sl),Cl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.createInput=function(t){return new Il(t)},n}(xl),jl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.toValue=function(t){return this.Nu(t,this)},n.prototype.getInputType=function(){return"text"},n.prototype.getType=function(){return"DInputText"},n}(El),Al=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.createInput=function(t){return new jl(t)},n}(xl),Bl=function(){function t(t,n,i){this.Lu=t,this.Wu=n,this._u=i}return Object.defineProperty(t.prototype,"color",{get:function(){return this.Lu.color},set:function(t){if(this.Lu.color!==t){var n=this.Wu;null!=n&&n(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.Lu.alpha},set:function(t){if(this.Lu.alpha!==t){var n=this._u;null!=n&&n(t)}},enumerable:!0,configurable:!0}),t}(),Rl=function(t){function n(n,i){var r=t.call(this)||this;return r.Fu=n,r.Gr=i,r}return i(n,t),n.prototype.get=function(t){var n=this.Fu;return 0<=t&&t<n.length?n[n.length-1-t]:null},n.prototype.set=function(t,n){var i=this.Fu;if(0<=t&&t<i.length){var r=i[i.length-1-t];return i[i.length-1-t]={color:n.color,alpha:n.alpha},this.emit("change",this),r}return null},n.prototype.contains=function(t){for(var n=this.Fu,i=0,r=n.length;i<r;++i){var e=n[i];if(e.color===t.color&&e.alpha===t.alpha)return!0}return!1},n.prototype.add=function(t){var n=this.Fu;return n.push({color:t.color,alpha:t.alpha}),this.Gr<n.length&&n.shift(),this.emit("change",this),this},n.prototype.pop=function(){var t=this.Fu.shift();return null!=t?(this.emit("change",this),t):null},n.prototype.size=function(){return this.Fu.length},n}(t.utils.EventEmitter),Ll=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),Object.defineProperty(r.prototype,"current",{get:function(){return this.Pu},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"new",{get:function(){return this.Uu},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recent",{get:function(){return this.zu},enumerable:!0,configurable:!0}),r.prototype.init=function(i){var e=this;n.prototype.init.call(this,i),this.setState(v.UNFOCUSABLE,!0),this.ot=16711680,this.Gu={color:16777215,alpha:1},this.Uu=new Bl(this.Gu,(function(t){e.setColorNew(t)}),(function(t){e.setAlphaNew(t)})),this.$i={color:16777215,alpha:1},this.Pu=new Bl(this.$i,(function(t){e.setColorCurrent(t)}),(function(t){e.setAlphaCurrent(t)}));var u=this.theme,s=this.It,h=s.getTop(),o=s.getRight(),c=s.getBottom(),f=s.getLeft();this.Hu=new t.Point;var a=u.getMainWidth(),l=u.getMainHeight(),b=this.Vu=new t.Sprite(t.Texture.WHITE);b.x=f,b.y=h,b.width=a,b.height=l,b.interactive=!0,this.addChild(b);var d=this.Xu=new t.Sprite(u.getMainTexture());d.x=f,d.y=h,d.tint=this.ot,d.interactive=!1,this.addChild(d),this.Yu=function(t){e.onMainMove(t)},this.Ku=function(t){e.onMainUp(t)},b.on(Z.down,(function(t){e.onMainDown(t)}));var g=this.Ju=new t.Sprite(u.getBaseTexture());g.x=f,g.y=b.y+b.height+u.getBaseMargin(),g.interactive=!0,this.addChild(g),this.Zu=function(t){e.onBaseMove(t)},this.qu=function(t){e.onBaseUp(t)},g.on(Z.down,(function(t){e.onBaseDown(t)}));var m=this.Qu=new t.Sprite(u.getAlphaCheckerboardTexture());m.x=s.getLeft(),m.y=g.y+u.getBaseHeight()+u.getBaseMargin(),m.interactive=!1,this.addChild(m);var p=new t.Sprite(u.getAlphaTexture());p.tint=this.Gu.color,p.interactive=!0,m.addChild(p),this.$u=function(t){e.onAlphaMove(t)},this.ts=function(t){e.onAlphaUp(t)},p.on(Z.down,(function(t){e.onAlphaDown(t)}));var w=this.ns=new t.Sprite(u.getMainPointerTexture());w.x=f,w.y=h,w.anchor.x=.5,w.anchor.y=.5,w.tint=u.getMainPointerColor(),w.alpha=u.getMainPointerAlpha(),w.interactive=!1,this.addChild(w);var D=this.rs=new t.Sprite(u.getAlphaPointerTexture());D.x=a,D.y=.5*m.height,D.tint=u.getAlphaPointerColor(),D.alpha=u.getAlphaPointerAlpha(),D.anchor.set(.5,.5),D.interactive=!1,m.addChild(D);var T=this.es=new t.Sprite(u.getBasePointerTexture());T.x=0,T.y=.5*g.height,T.tint=u.getBasePointerColor(),T.alpha=u.getBasePointerAlpha(),T.anchor.set(.5,.5),T.interactive=!1,g.addChild(T),this.us=[];var O=this.us,S=u.getRecentColorCount(),M=u.getRecentColorWidth(),E=u.getRecentColorHeight(),k=.5*M,I=.5*E,N=u.getRecentColorMargin(),y=m.y+u.getAlphaHeight()+u.getRecentMargin(),x=u.getRecentCheckerboardTexture();null==r.RECENT_COLORS&&(r.RECENT_COLORS=new Rl(u.getRecents().slice(0),S));var C=this.zu=r.RECENT_COLORS;C.on("change",(function(){e.onRecentChange()}));for(var j=function(n){var i=n.currentTarget;if(i instanceof t.Container){var r=i.children[0];r instanceof t.Sprite&&(e.setColorNew(r.tint),e.setAlphaNew(r.alpha))}},A=0;A<S;++A){var B=f+A*(M+N),R=new t.Sprite(x);R.x=B+k,R.y=y+I,R.anchor.x=.5,R.anchor.y=.5,R.buttonMode=!0,R.interactive=!0,Z.onClick(R,j),this.addChild(R);var L=new t.Sprite(t.Texture.WHITE),W=C.get(A);null!=W?(L.tint=W.color,L.alpha=W.alpha):(L.tint=16777215,L.alpha=0),L.width=M,L.height=E,L.anchor.x=.5,L.anchor.y=.5,L.interactive=!1,R.addChild(L),O.push(L)}var _=u.getInputMargin(),F=y+E+_,P=.5*a,U=this.ss=new Al({parent:this,x:f,y:F,width:P,label:{width:u.getInputLabelWidth(),text:{value:"#"}},input:{weight:1,text:{value:"FFFFFF"},on:{input:function(t){var n=Xn.fromCode(t);null!=n&&e.setColorNew(n)}}}}),z=this.hs=new Cl({parent:this,x:f,y:F+U.height+_,width:P,label:{width:u.getInputLabelWidth(),text:{value:"A"}},input:{weight:1,text:{value:1},min:0,max:1,on:{input:function(t){e.setAlphaNew(t)}}}}),G=u.getSampleWidth(),H=u.getSampleHeight(),V=f+.75*a-G,X=F+.5*(U.height+_+z.height-H),Y=this.os=new t.Sprite(u.getSampleCheckerboardTexture());Y.x=V,Y.y=X,Y.width=G,Y.height=H,Y.interactive=!1,this.addChild(Y);var K=this.$i,J=this.cs=new t.Sprite(t.Texture.WHITE);J.x=V,J.y=X,J.tint=K.color,J.alpha=K.alpha,J.width=G,J.height=H,J.interactive=!0,J.buttonMode=!0,Z.onClick(J,(function(){e.setColorNew(K.color),e.setAlphaNew(K.alpha)})),this.addChild(J);var q=this.fs=new t.Sprite(u.getSampleCheckerboardTexture());q.x=V+G,q.y=X,q.width=G,q.height=H,q.interactive=!1,this.addChild(q);var Q=this.ls=new t.Sprite(t.Texture.WHITE);Q.x=V+G,Q.y=X,Q.tint=this.Gu.color,Q.alpha=this.Gu.alpha,Q.width=G,Q.height=H,Q.interactive=!1,this.addChild(Q),null!=i&&null!=i.width||(this.width=f+a+o),null!=i&&null!=i.height||(this.height=F+U.height+_+z.height+c)},r.prototype.onMainDown=function(t){this.onMainPick(t.data.global);var n=e.getInstance().stage;n.on(Z.move,this.Yu),n.on(Z.up,this.Ku)},r.prototype.onMainMove=function(t){this.onMainPick(t.data.global)},r.prototype.onMainUp=function(t){var n=e.getInstance().stage;n.off(Z.move,this.Yu),n.off(Z.up,this.Ku)},r.prototype.toMainHex=function(t,n,i,r){return Math.max(0,Math.min(255,255*n+i*(t>>r&255)))<<r},r.prototype.toMainColor=function(t,n,i,r,e){var u=.5*r,s=Math.max(0,Math.min(1,((n-u)*(1-i/e)+u)/r)),h=Math.max(0,Math.min(1,i/e)),o=Math.abs(.5*h-s),c=1-o-h;return this.toMainHex(t,c,o,16)|this.toMainHex(t,c,o,8)|this.toMainHex(t,c,o,0)},r.prototype.onMainPick=function(t){var n=this.Hu,i=this.It,r=i.getLeft(),e=i.getTop(),u=this.theme,s=u.getMainWidth(),h=u.getMainHeight();this.toLocal(t,void 0,n);var o=Math.max(0,Math.min(s,n.x-r)),c=Math.max(0,Math.min(h,n.y-e));this.ns.position.set(r+o,e+c),this.onColorNew(this.toMainColor(this.ot,o,c,s,h))},r.prototype.setColorCurrent=function(t){this.cs.tint=this.$i.color=t},r.prototype.setAlphaCurrent=function(t){this.cs.alpha=this.$i.alpha=t},r.prototype.setColorNew=function(t){var n=this.theme,i=n.getMainWidth(),r=n.getMainHeight(),e=this.It,u=Un.fromRgb(t);this.Xu.tint=this.ot=Un.toRgb(u[0],255,255),this.es.x=Math.max(0,Math.min(1,u[0]/360))*i;var s=Math.max(0,Math.min(1,u[1]/255)),h=Math.max(0,Math.min(1,1-u[2]/255)),o=this.ns;o.tint=h<.45?n.getMainPointerColor():16777215,o.position.set(e.getLeft()+s*i,e.getTop()+h*r),this.onColorNew(t)},r.prototype.onColorNew=function(t){var n=e.getInstance();n.disallowUpdate(),this.ls.tint=this.Gu.color=t,this.ss.input.value=Xn.toCode(t),this.emit("newcolorchange",t,this),n.allowUpdate(),n.update()},r.prototype.onBaseDown=function(t){this.onBasePick(t.data.global);var n=e.getInstance().stage;n.on(Z.move,this.Zu),n.on(Z.up,this.qu)},r.prototype.onBaseMove=function(t){this.onBasePick(t.data.global)},r.prototype.onBaseUp=function(t){var n=e.getInstance().stage;n.off(Z.move,this.Zu),n.off(Z.up,this.qu)},r.prototype.toBaseHex=function(t,n){return Math.max(0,Math.min(255,6*t*255))<<n},r.prototype.toBaseColor=function(t){return t<=.167?16711680+this.toBaseHex(t,8):t<=.333?(t=.333-t,65280+this.toBaseHex(t,16)):t<=.5?(t-=.333,65280+this.toBaseHex(t,0)):t<.667?(t=.667-t,255+this.toBaseHex(t,8)):t<.883?(t-=.667,255+this.toBaseHex(t,16)):(t=.883-t,16711680+this.toBaseHex(t,0))},r.prototype.onBasePick=function(t){var n=this.Hu,i=this.It,r=this.theme.getMainWidth();this.toLocal(t,void 0,n);var e=Math.max(0,Math.min(r,n.x-i.getLeft()));this.es.x=e,this.onColorBase(this.toBaseColor(e/r))},r.prototype.setColorBase=function(t){var n=this.theme.getMainWidth();this.es.x=Math.max(0,Math.min(1,t/360))*n,this.onColorBase(Un.toRgb(t,255,255))},r.prototype.onColorBase=function(t){this.Xu.tint=this.ot=t;var n=this.ns,i=this.theme,r=i.getMainWidth(),e=i.getMainHeight(),u=this.It;this.onColorNew(this.toMainColor(this.ot,n.x-u.getLeft(),n.y-u.getTop(),r,e))},r.prototype.onAlphaDown=function(t){this.onAlphaPick(t.data.global);var n=e.getInstance().stage;n.on(Z.move,this.$u),n.on(Z.up,this.ts)},r.prototype.onAlphaMove=function(t){this.onAlphaPick(t.data.global)},r.prototype.onAlphaUp=function(t){var n=e.getInstance().stage;n.off(Z.move,this.$u),n.off(Z.up,this.ts)},r.prototype.onAlphaPick=function(t){var n=this.Hu,i=this.It,r=this.theme.getMainWidth();this.toLocal(t,void 0,n);var e=Math.max(0,Math.min(r,n.x-i.getLeft()));this.rs.x=e,this.onAlphaNew(e/r)},r.prototype.setAlphaNew=function(t){var n=this.theme.getMainWidth();this.rs.x=Math.max(0,Math.min(1,t))*n,this.onAlphaNew(t)},r.prototype.onAlphaNew=function(t){var n=e.getInstance();n.disallowUpdate(),this.ls.alpha=this.Gu.alpha=t,this.hs.input.value=Number(t.toFixed(2)),this.emit("newalphachange",t,this),n.allowUpdate(),n.update()},r.prototype.onRecentChange=function(){for(var t=this.us,n=this.zu,i=0,r=t.length;i<r;++i){var e=t[i],u=n.get(i);null!=u?(e.tint=u.color,e.alpha=u.alpha):(e.tint=16777215,e.alpha=0)}},r.prototype.getType=function(){return"DPickerColor"},r.RECENT_COLORS=null,r}($),Wl=function(n){function r(i,r,u,s,h,o,c,f){var a=n.call(this,c,f)||this;return a.interactive=!0,a.interactiveChildren=!1,a.cursor="pointer",a.vs=i,a._=r,a._uvs=u,a.bs=s,a.U=h,a.gs=-1,a.xe=[0,0,0],a.ne=new t.Point,a.ms=o,f.uniforms.uSampler.on("update",(function(){a.update(),e.update()})),a.update(),a}return i(r,n),r.prototype.getRectangle=function(t){var n=this.ms;return 0<=t&&t<n.length?n[t].rect:null},r.prototype.setRectangle=function(t,n,i,r,e){var u=this.ms;if(0<=t&&t<u.length){var s=u[t].rect;s.x=n,s.y=i,s.width=r,s.height=e}},r.prototype.getData=function(t){var n=this.ms;return 0<=t&&t<n.length?n[t].data:null},r.prototype.setData=function(t,n){var i=this.ms;0<=t&&t<i.length&&(i[t].data=n)},r.prototype.getLastHitIndex=function(){return this.gs},r.prototype.setColors=function(t,n,i,r){n[t+0]=i[0],n[t+1]=i[1],n[t+2]=i[2],n[t+3]=r,n[t+4]=i[0],n[t+5]=i[1],n[t+6]=i[2],n[t+7]=r},r.prototype.setColorsHex=function(n,i,r,e){var u=t.utils.hex2rgb(r,this.xe);this.setColors(n,i,u,e)},r.prototype.setColorsWhite=function(t,n){var i=this.xe;i[0]=1,i[1]=1,i[2]=1,this.setColors(t,n,i,0)},r.prototype.setColorsPoint=function(t,n,i,r){var e=n.points[i];null!=e?this.setColorsHex(t,r,e.color,e.alpha):this.setColorsWhite(t,r)},r.prototype.setVertices=function(t,n,i,r){var e=r.y+r.height*i;n[t+0]=r.x,n[t+1]=e,n[t+2]=r.x+r.width,n[t+3]=e},r.prototype.setUvs=function(t,n,i,r){var e=r.x0+(r.x3-r.x0)*i,u=r.y0+(r.y3-r.y0)*i,s=r.x1+(r.x2-r.x1)*i,h=r.y1+(r.y2-r.y1)*i;n[t+0]=e,n[t+1]=u,n[t+2]=s,n[t+3]=h},r.prototype.newIndices=function(t,n,i,r){for(var e=0;e<i;++e)r[t+0]=n+0,r[t+1]=n+1,r[t+2]=n+2,r[t+3]=n+2,r[t+4]=n+1,r[t+5]=n+3,t+=6,n+=2;return r},r.prototype._calculateBounds=function(){var t=this.ms[0].rect,n=this._bounds,i=this.ne;i.set(t.x,t.y),n.addPoint(i),i.set(t.x+t.width,t.y+t.height),n.addPoint(i)},r.prototype.update=function(){var t=this._,n=this._uvs,i=this.bs,r=this.U,e=this.shader.uniforms.uSampler;null==e._uvs&&e.updateUvs();for(var u=e._uvs,s=0,h=0,o=0,c=0,f=this.ms,a=0,l=f.length;a<l;++a){var v=f[a].data,b=f[a].rect;if(null==v)this.setVertices(s,t,0,b),this.setUvs(s,n,0,u),this.setColorsWhite(o,i),this.setVertices(s+4,t,1,b),this.setUvs(s,n,1,u),this.setColorsWhite(o+8,i),this.newIndices(c,h,1,r),s+=8,o+=16,h+=4,c+=6;else{this.setVertices(s,t,0,b),this.setUvs(s,n,0,u),this.setColorsPoint(o,v,0,i),s+=4,o+=8;for(var d=v.points.length,g=0,m=Math.min(d,this.vs);g<m;++g){var p=v.points[g];this.setVertices(s,t,p.position,b),this.setUvs(s,n,p.position,u),this.setColorsHex(o,i,p.color,p.alpha),s+=4,o+=8}this.setVertices(s,t,1,b),this.setUvs(s,n,1,u),this.setColorsPoint(o,v,d-1,i),s+=4,o+=8,this.newIndices(c,h,d+1,r),c+=6*(d+1),h+=2*(d+2)}}this.size=c;var w=this.geometry;w.getBuffer("aPosition").update(),w.getBuffer("aUv").update(),w.getBuffer("aColor").update(),w.getIndex().update()},r.prototype.containsPoint=function(t){for(var n=this.toLocal(t,void 0,this.ne),i=this.ms,r=0,e=i.length;r<e;++r)if(i[r].rect.contains(n.x,n.y))return this.gs=r,!0;return!1},r.from=function(n,i,e){void 0===e&&(e=t.Texture.WHITE);for(var u=new Float32Array(n*(i+2)*2*2),s=new Float32Array(n*(i+2)*2*2),h=new Float32Array(n*(i+2)*2*4),o=new Uint16Array(n*(i+1)*6),c=[],f=0;f<n;++f)c.push({data:null,rect:new t.Rectangle});return new r(i,u,s,h,o,c,(new t.Geometry).addIndex(new t.Buffer(o,!1,!0)).addAttribute("aPosition",new t.Buffer(u,!1,!1),2).addAttribute("aUv",new t.Buffer(s,!1,!1),2).addAttribute("aColor",new t.Buffer(h,!1,!1),4),t.Shader.from("\nattribute vec2 aPosition;\nattribute vec2 aUv;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nvoid main(void) {\n\tvec3 position = vec3(aPosition.x, aPosition.y, 1.0);\n\tgl_Position = vec4((projectionMatrix * translationMatrix * position).xy, 0.0, 1.0);\n\tvUv = aUv;\n\tvColor = aColor;\n}\n","\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void) {\n\tvec4 texture = texture2D(uSampler, vUv);\n\tfloat cy = step( 1.0, mod( gl_FragCoord.y / 10.0, 2.0 ) );\n\tfloat cx = step( 1.0, mod( gl_FragCoord.x / 10.0 + cy, 2.0 ) );\n\tfloat c = mix( 0.75, 0.65, cx );\n\tgl_FragColor = texture * vec4( mix( vec3( c ), vColor.xyz, vColor.a ), 1.0 );\n}",{uSampler:e}))},r}(t.Mesh),_l=function(t,n){if(t.direction!==n.direction)return!1;var i=t.points,r=n.points;if(i.length!==r.length)return!1;for(var e=0,u=i.length;e<u;++e){var s=i[e],h=r[e];if(s.color!==h.color||s.alpha!==h.alpha||s.position!==h.position)return!1}return!0},Fl=function(t){function n(n,i){var r=t.call(this)||this;return r.Fu=n,r.Gr=i,r}return i(n,t),n.prototype.getCapacity=function(){return this.Gr},n.prototype.get=function(t){var n=this.Fu;return 0<=t&&t<n.length?n[n.length-1-t]:null},n.prototype.set=function(t,n){var i=this.Fu;if(0<=t&&t<i.length){var r=i[i.length-1-t];return i[i.length-1-t]=n,this.emit("change",this),r}return null},n.prototype.contains=function(t){for(var n=this.Fu,i=0,r=n.length;i<r;++i)if(_l(n[i],t))return!0;return!1},n.prototype.add=function(t){var n=this.Fu;return n.push(t),this.Gr<n.length&&n.shift(),this.emit("change",this),this},n.prototype.pop=function(){var t=this.Fu.shift();return null!=t?(this.emit("change",this),t):null},n.prototype.size=function(){return this.Fu.length},n}(t.utils.EventEmitter),Pl=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(i){var e=this;n.prototype.init.call(this,i),this.setState(v.UNFOCUSABLE,!0);var u=this.theme,s=this.It,h=s.getTop(),o=s.getRight(),c=s.getBottom(),f=s.getLeft();this.He=new t.Point;var a=u.getGradientPointsWidth(),l=u.getGradientPointsMargin(),b=this.ps=new Ll({x:f+a+l,y:h});b.on("newcolorchange",(function(t){e.onAnchorColorChange(t)})),b.on("newalphachange",(function(t){e.onAnchorAlphaChange(t)})),this.addChild(b);var d=this.ws=Wl.from(17,10);d.setRectangle(0,f,h,a,b.height),this.addChild(d),d.on(Z.down,(function(t){0===d.getLastHitIndex()&&e.onViewDown(t)})),this.Ds=function(t){e.onAnchorDown(t)},this.Ts=function(t){e.onAnchorMove(t)},this.Os=function(t){e.onAnchorUp(t)},this.Ss=[];var g=b.theme.getInputLabelWidth(),m=.5*b.theme.getMainWidth(),p=u.getGradientDirectionMargin(),w=u.getGradientDirectionTexture(),D=b.x+b.width+p,T=new Il({parent:this,x:D+g+5,y:h,width:m-g-5,step:1,image:{source:w,align:{with:Y.BORDER},margin:{horizontal:-w.width-5}},on:{change:function(t){e.Ae.ar=t}}}),O=u.getGradientRecentColumn(),S=u.getGradientRecentWidth(),M=u.getGradientRecentMargin(),E=S+M,k=D,I=T.y+T.height+p;null==r.RECENT_COLOR_GRADIENT&&(r.RECENT_COLOR_GRADIENT=new Fl(u.getGradientRecents(),u.getGradientRecentCount())),this.zu=r.RECENT_COLOR_GRADIENT;for(var N=this.zu,y=0,x=N.getCapacity();y<x;++y){var C=k+y%O*E,j=I+(y/O|0)*E;d.setRectangle(1+y,C,j,S,S)}N.on("change",(function(){e.onRecentUpdate()})),Z.onClick(d,(function(t){var n=d.getLastHitIndex();1<=n&&e.onRecentClick(d.getData(n))}));var A=this.Ae=new Rh;A.on("change",(function(){e.updateAnchors(),d.update()})),A.on("selectionchange",(function(t){e.onAnchorSelect(t)})),A.on("directionchange",(function(t){T.value=t})),d.setData(0,A),d.update(),T.value=A.direction,this.updateAnchors();var B=A.selected;null!=B&&this.onAnchorSelect(B),null!=i&&null!=i.width||(this.width=f+a+l+b.width+p+(O-1)*M+O*S+o),null!=i&&null!=i.height||(this.height=h+b.height+c)},Object.defineProperty(r.prototype,"data",{get:function(){return this.Ae},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recent",{get:function(){return this.zu},enumerable:!0,configurable:!0}),r.prototype.onRecentClick=function(t){var n=this.Ae;null!=t?n.fromObject(t):n.reset()},r.prototype.onRecentUpdate=function(){for(var t=this.zu,n=this.ws,i=0,r=t.size();i<r;++i)n.setData(1+i,t.get(i));n.update(),e.update()},r.prototype.toAnchorPosition=function(t){var n=this.toLocal(t.data.global,void 0,this.He);return Math.max(0,Math.min(1,(n.y-this.padding.getTop())/this.ps.height))},r.prototype.onViewDown=function(t){this.Ae.addAt(this.toAnchorPosition(t)),this.onAnchorDragStart()},r.prototype.onAnchorDown=function(n){var i=n.target;if(i instanceof t.Sprite){var r=this.Ae,e=this.Ss.indexOf(i);0<=e&&e<r.points.length&&(r.points[e].selected=!0,this.onAnchorDragStart())}},r.prototype.onAnchorSelect=function(t){var n=this.ps;n.current.color=t.color,n.current.alpha=t.alpha,n.new.color=t.color,n.new.alpha=t.alpha},r.prototype.onAnchorColorChange=function(t){var n=this.Ae;if(null!=n){var i=n.selected;null!=i&&(i.color=t)}},r.prototype.onAnchorAlphaChange=function(t){var n=this.Ae;if(null!=n){var i=n.selected;null!=i&&(i.alpha=t)}},r.prototype.onAnchorDragStart=function(){var t=e.getInstance().stage;t.on(Z.move,this.Ts),t.on(Z.up,this.Os)},r.prototype.onAnchorMove=function(t){var n=this.Ae;if(null!=n){var i=n.selected;null!=i&&(i.position=this.toAnchorPosition(t))}},r.prototype.onAnchorUp=function(t){var n=e.getInstance().stage;n.off(Z.move,this.Ts),n.off(Z.up,this.Os)},r.prototype.updateAnchors=function(){for(var n=this.theme,i=n.getGradientAnchorTexture(),r=n.getGradientAnchorOutlinedTexture(),u=n.getGradientPointsWidth(),s=this.Ae,h=s.points.length,o=this.Ss,c=o.length,f=c;f<h;++f){var a=new t.Sprite(i);a.anchor.set(.5,.5),a.cursor="pointer",a.interactive=!0,a.on(Z.down,this.Ds),o.push(a),this.addChild(a)}for(f=c-1;h<=f;--f){var l=o[f];l.off(Z.down,this.Ds),l.destroy()}o.length=h;var v=this.padding.getTop(),b=this.padding.getLeft()+u,d=this.ps.height;for(f=0;f<h;++f){var g=s.points[f],m=o[f];m.tint=g.color,m.position.set(b,v+d*g.position),m.texture=g.selected?r:i}e.update()},r.prototype.onKeyDown=function(t){if(R.isDeleteKey(t)){var i=this.Ae;if(null!=i){var r=i.selected;if(null!=r)return i.remove(r),n.prototype.onKeyDown.call(this,t),!0}}return n.prototype.onKeyDown.call(this,t)},r.prototype.getType=function(){return"DPickerColorGradient"},r.RECENT_COLOR_GRADIENT=null,r}($),Ul=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onInit=function(n,i){t.prototype.onInit.call(this,n,i);var r=new Pl(i&&i.picker);this.ps=r,n.addChild(r),this.on("ok",(function(){var t=r.data,n=r.recent;n.contains(t)||n.add(t.toObject())}))},Object.defineProperty(n.prototype,"data",{get:function(){return this.ps.data},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recent",{get:function(){return this.ps.recent},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){return this.ps},enumerable:!0,configurable:!0}),n.prototype.onKeyDown=function(n){return this.ps.onKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DDialogColorGradient"},n}(Ml),zl=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(i){var r=this;n.prototype.init.call(this,i);var e=this.Tn;if(this.Ms=i&&i.dialog,null==i||null==i.image||void 0===i.image.source){var u=this.theme.getViewBaseTexture();if(u instanceof t.Texture){var s=this.ws=Wl.from(1,10,u);s.setRectangle(0,0,0,u.width,u.height),s.setData(0,e),s.update(),this.image=s}}this.on("active",(function(){var t=r.dialog;t.data.fromObject(e),t.open().then((function(){e.fromObject(t.data);var n=r.ws;null!=n&&n.update(),r.onTextChange(),r.createOrUpdateText(),r.emit("change",r)}))}))},Object.defineProperty(r.prototype,"dialog",{get:function(){var t=this.Es;return null==t&&(null!=this.Ms?t=new Ul(this.Ms):(null==r.DIALOG&&(r.DIALOG=new Ul),t=r.DIALOG),this.Es=t),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this.Tn},enumerable:!0,configurable:!0}),r.prototype.getType=function(){return"DButtonColorGradient"},r}(pl),Gl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onInit=function(n,i){t.prototype.onInit.call(this,n,i);var r=new Ll(i&&i.picker);this.ps=r,n.addChild(r),this.on("ok",(function(){var t=r.recent;t.contains(r.new)||t.add(r.new)}))},Object.defineProperty(n.prototype,"current",{get:function(){return this.ps.current},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.ps.new},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recent",{get:function(){return this.ps.recent},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){return this.ps},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDialogColor"},n}(Ml),Hl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n);var r=this.Tn;this.Ms=n&&n.dialog,this.Fn=new Bl(r,(function(t){r.color=t,i.onColorChange()}),(function(t){r.alpha=t,i.updateTextForcibly()})),this.on("active",(function(){var t=i.dialog;t.current.color=r.color,t.current.alpha=r.alpha,t.new.color=r.color,t.new.alpha=r.alpha,t.open().then((function(){var n=t.new,e=t.current;i.emit("select",n,e,i),r.color=n.color,r.alpha=n.alpha,i.onColorChange(),i.emit("change",i)}))}))},n.prototype.getImageTintColor=function(t,n){return this.Tn.color},n.prototype.onColorChange=function(){var t=this.xn;this.isTintAware(t)&&(t.tint=this.Tn.color),this.updateTextForcibly()},n.prototype.updateTextForcibly=function(){this.onTextChange(),this.createOrUpdateText()},Object.defineProperty(n.prototype,"dialog",{get:function(){var t=this.Es;return null==t&&(null!=this.Ms?t=new Gl(this.Ms):(null==n.DIALOG&&(n.DIALOG=new Gl),t=n.DIALOG),this.Es=t),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.Fn},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DButtonColor"},n}(pl),Vl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButtonDanger"},n}(pl),Xl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DPickerDatetimeButtonBack"},n}(wl),Yl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onToggleStart=function(){this.isActive()||this.setActive(!0)},n.prototype.onToggleEnd=function(){this.emit(this.isActive()?"active":"inactive",this)},n.prototype.getType=function(){return"DPickerDatetimeButtonDate"},n}(wl),Kl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DPickerDatetimeButtonNext"},n}(wl),Jl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DPickerDatetimeLabel"},n}(Nl),Zl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DPickerDatetimeLabelDate"},n}(Nl),ql=function(t){function n(n){var i=t.call(this,n)||this;return i.setState(v.UNFOCUSABLE,!0),i.renderable=!1,i}return i(n,t),n.prototype.getType=function(){return"DPickerDatetimeSpace"},n}($),Ql=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DInputInteger"},n}(kl),$l=function(){function t(t,n){this.ks=t&&void 0!==t.date?t.date:null,this.Is=!(!t||void 0===t.inclusive)&&t.inclusive,this.qt=n}return Object.defineProperty(t.prototype,"date",{get:function(){return this.ks},set:function(t){this.ks!==t&&(this.ks=t,this.qt())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inclusive",{get:function(){return this.Is},set:function(t){this.Is!==t&&(this.Is=t,this.qt())},enumerable:!0,configurable:!0}),t}(),tv=function(){function t(t){this.gr=t}return t.prototype.min=function(t){var n=this.gr,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Lh.DATE){if(r.getFullYear()<t.getFullYear())return e.hour.min;if(r.getMonth()<t.getMonth())return e.hour.min;if(r.getDate()<t.getDate())return e.hour.min}var s=r.getHours();return i.inclusive?s:u&Lh.SECONDS&&r.getSeconds()<e.second.max?s:u&Lh.MINUTES&&r.getMinutes()<e.minute.max?s:s+1}return e.hour.min},t.prototype.max=function(t){var n=this.gr,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Lh.DATE){if(t.getFullYear()<r.getFullYear())return e.hour.max;if(t.getMonth()<r.getMonth())return e.hour.max;if(t.getDate()<r.getDate())return e.hour.max}var s=r.getHours();return i.inclusive?s:u&Lh.SECONDS&&e.second.min<r.getSeconds()?s:u&Lh.MINUTES&&e.minute.min<r.getMinutes()?s:s-1}return e.hour.max},t}(),nv=function(){function t(t){this.gr=t}return t.prototype.min=function(t){var n=this.gr,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Lh.DATE){if(r.getFullYear()<t.getFullYear())return e.minute.min;if(r.getMonth()<t.getMonth())return e.minute.min;if(r.getDate()<t.getDate())return e.minute.min}if(u&Lh.HOURS&&r.getHours()<t.getHours())return e.minute.min;var s=r.getMinutes();return i.inclusive?s:u&Lh.SECONDS&&r.getSeconds()<e.second.max?s:s+1}return e.minute.min},t.prototype.max=function(t){var n=this.gr,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Lh.DATE){if(t.getFullYear()<r.getFullYear())return e.minute.max;if(t.getMonth()<r.getMonth())return e.minute.max;if(t.getDate()<r.getDate())return e.minute.max}if(u&Lh.HOURS&&t.getHours()<r.getHours())return e.minute.max;var s=r.getMinutes();return i.inclusive?s:u&Lh.SECONDS&&e.second.min<r.getSeconds()?s:s-1}return e.minute.max},t}(),iv=function(){function t(t){this.gr=t}return t.prototype.min=function(t){var n=this.gr,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Lh.DATE){if(r.getFullYear()<t.getFullYear())return e.second.min;if(r.getMonth()<t.getMonth())return e.second.min;if(r.getDate()<t.getDate())return e.second.min}return u&Lh.HOURS&&r.getHours()<t.getHours()?e.second.min:u&Lh.MINUTES&&r.getMinutes()<t.getMinutes()?e.second.min:r.getSeconds()+(i.inclusive?0:1)}return e.second.min},t.prototype.max=function(t){var n=this.gr,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&Lh.DATE){if(t.getFullYear()<r.getFullYear())return e.second.max;if(t.getMonth()<r.getMonth())return e.second.max;if(t.getDate()<r.getDate())return e.second.max}return u&Lh.HOURS&&t.getHours()<r.getHours()?e.second.max:u&Lh.MINUTES&&t.getMinutes()<r.getMinutes()?e.second.max:r.getSeconds()-(i.inclusive?0:1)}return e.second.max},t}(),rv=function(){function t(t,n){this.constant=this.newConstant(),this.lower=new $l(t&&t.lower,n),this.upper=new $l(t&&t.upper,n),this.mask=Lh.ALL,this.hours=new tv(this),this.minutes=new nv(this),this.seconds=new iv(this)}return t.prototype.newConstant=function(){return{second:{min:0,max:59},minute:{min:0,max:59},hour:{min:0,max:23}}},t.prototype.adjust=function(t){var n=this.test(t);if(n<0){var i=this.lower,r=i.date;if(r)return t.setTime(r.getTime()),i.inclusive||((e=this.mask)&Lh.SECONDS?t.setSeconds(r.getSeconds()+1):e&Lh.MINUTES?t.setMinutes(r.getMinutes()+1):e&Lh.HOURS?t.setHours(r.getHours()+1):e&Lh.DATE&&t.setDate(r.getDate()+1)),!0}else if(0<n){var e,u=this.upper,s=u.date;if(s)return t.setTime(s.getTime()),u.inclusive||((e=this.mask)&Lh.SECONDS?t.setSeconds(s.getSeconds()-1):e&Lh.MINUTES?t.setMinutes(s.getMinutes()-1):e&Lh.HOURS?t.setHours(s.getHours()-1):e&Lh.DATE&&t.setDate(s.getDate()-1)),!0}return!1},t.prototype.compare=function(t,n){var i=this.mask;if(i&Lh.DATE){var r,e,u,s,h=t.getFullYear(),o=n.getFullYear();if(h!==o)return h<o?-1:1;if((r=t.getMonth())!==(e=n.getMonth()))return r<e?-1:1;if((u=t.getDate())!==(s=n.getDate()))return u<s?-1:1}if(i&Lh.HOURS){var c=t.getHours(),f=n.getHours();if(c!==f)return c<f?-1:1}return i&Lh.MINUTES&&(r=t.getMinutes())!==(e=n.getMinutes())?r<e?-1:1:i&Lh.SECONDS&&(u=t.getSeconds())!==(s=n.getSeconds())?u<s?-1:1:0},t.prototype.test=function(t){var n=this.lower,i=n.date;if(null!=i){var r=this.compare(i,t);return n.inclusive?r<=0?0:-1:r<0?0:-1}var e=this.upper,u=e.date;return null!=u?(r=this.compare(t,u),e.inclusive?r<=0?0:1:r<0?0:1):0},t.prototype.contains=function(t){return 0===this.test(t)},t}(),ev=function(t,n,i){return t?{date:void 0!==t.date?t.date:n,inclusive:void 0!==t.inclusive?t.inclusive:i}:{date:n,inclusive:i}},uv=function(t){function n(n){var i=t.call(this,n)||this;return i.onNewChanged(),i}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.setState(v.UNFOCUSABLE,!0);var r=this.theme;this.Ns=new Date;var e=this.Ns.getTime();this.ys=new Date(e),this.xs=new rv(function(t,n){return n?{lower:ev(n.lower,t.getLowerBound(),t.isLowerBoundInclusive()),upper:ev(n.upper,t.getUpperBound(),t.isUpperBoundInclusive())}:{lower:{date:t.getLowerBound(),inclusive:t.isLowerBoundInclusive()},upper:{date:t.getUpperBound(),inclusive:t.isUpperBoundInclusive()}}}(r,n&&n.bounds),(function(){i.onNewChanged()}));var u=n&&null!=n.margin?n.margin:r.getMargin();new gi({parent:this,x:"padding",y:"padding",width:"auto",height:"auto",margin:u,children:this.newChildren(r,n,u)})},Object.defineProperty(n.prototype,"current",{get:function(){return this.Ns},set:function(t){this.Ns.getTime()!==t.getTime()&&(this.Ns=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.ys},set:function(t){this.ys.getTime()!==t.getTime()&&(this.ys=t,this.onNewChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bounds",{get:function(){return this.xs},enumerable:!0,configurable:!0}),n.prototype.hasHours=function(){return null!=this.Cs},n.prototype.hasMinutes=function(){return null!=this.js},n.prototype.hasSeconds=function(){return null!=this.As},n.prototype.reset=function(){var t=this.Ns.getTime();this.ys.setTime(t),this.onReset()},n.prototype.onReset=function(){this.onNewChanged()},n.prototype.onNewChanged=function(){var t=this.ys,n=this.xs;n.adjust(this.ys);var i=this.Cs;if(i){var r=n.hours;i.value=t.getHours(),i.min=r.min(t),i.max=r.max(t)}var e=this.js;if(e){var u=n.minutes;e.value=t.getMinutes(),e.min=u.min(t),e.max=u.max(t)}var s=this.As;if(s){var h=n.seconds;s.value=t.getSeconds(),s.min=h.min(t),s.max=h.max(t)}},n.prototype.newChildren=function(t,n,i){var r=n&&null!=n.mask?n.mask:t.getMask();return this.xs.mask=r,this.Cs=r&Lh.HOURS?this.newInputHours(t,n):null,this.js=r&Lh.MINUTES?this.newInputMinutes(t,n):null,this.As=r&Lh.SECONDS?this.newInputSeconds(t,n):null,[this.newTimeLayout(this.Cs,this.js,this.As,i)]},n.prototype.newTimeLayout=function(t,n,i,r){var e=this.newTimeLayoutChildren(t,n,i);return 0<e.length?new Sl({width:this.getTimeLayoutWidth(),height:this.getTimeLayoutHeight(),margin:r,children:e}):null},n.prototype.getTimeLayoutWidth=function(){return"auto"},n.prototype.getTimeLayoutHeight=function(){return"auto"},n.prototype.newTimeLayoutChildren=function(t,n,i){var r=[];return null!=t&&r.push(t),null!=n&&(0<r.length&&r.push(this.newMinuteSeparator()),r.push(n)),null!=i&&(0<r.length&&r.push(this.newSecondSeparator()),r.push(i)),r},n.prototype.newMinuteSeparator=function(){return new Nl({width:"auto",text:{value:this.getMinuteSeparator()}})},n.prototype.getMinuteSeparator=function(){return":"},n.prototype.newSecondSeparator=function(){return new Nl({width:"auto",text:{value:this.getSecondSeparator()}})},n.prototype.getSecondSeparator=function(){return":"},n.prototype.adjustInputOptions=function(t,n,i){return null==n.step&&(n.step=1),null==n.min&&(n.min=0),null==n.max&&(n.max=i),n},n.prototype.newInputHours=function(t,n){var i=this,r=n&&n.hours||t.getHoursOptions(),e=this.xs.constant.hour.max,u=new Ql(this.adjustInputOptions(t,r,e));return u.on("change",(function(t){i.onHoursChanged(t)})),u},n.prototype.onHoursChanged=function(t){this.ys.setHours(t),this.onNewChanged()},n.prototype.newInputMinutes=function(t,n){var i=this,r=n&&n.minutes||t.getMinutesOptions(),e=this.xs.constant.minute.max,u=new Ql(this.adjustInputOptions(t,r,e));return u.on("change",(function(t){i.onMinutesChanged(t)})),u},n.prototype.onMinutesChanged=function(t){this.ys.setMinutes(t),this.onNewChanged()},n.prototype.newInputSeconds=function(t,n){var i=this,r=n&&n.seconds||t.getSecondsOptions(),e=this.xs.constant.second.max,u=new Ql(this.adjustInputOptions(t,r,e));return u.on("change",(function(t){i.onSecondsChanged(t)})),u},n.prototype.onSecondsChanged=function(t){this.ys.setSeconds(t)},n.prototype.getType=function(){return"DPickerTime"},n}($),sv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.Bs=new Date(this.Ns.getTime())},n.prototype.newChildren=function(n,i,r){this.Rs=this.newDateButtons(n,i),this.Ls=i&&i.date&&i.date.decorator||n.getDateDecorator(),this.Ru=this.newLabel(),this.Ws=i&&i.label&&i.label.formatter||n.getLabelFormatter();var e=t.prototype.newChildren.call(this,n,i,r);return e.unshift(new Sl({width:"100%",height:"auto",children:[this.newBackButton(n,i),this.Ru,this.newNextButton(n,i)]}),new Sl({width:"auto",height:"auto",margin:r,children:this.newDateLabels(n,i)}),new gi({width:"auto",height:"auto",margin:r,column:7,children:this.Rs})),e},Object.defineProperty(n.prototype,"page",{get:function(){return this.Bs},set:function(t){this.Bs.getTime()!==t.getTime()&&(this.Bs=t,this.onPageChanged())},enumerable:!0,configurable:!0}),n.prototype.onReset=function(){this.Bs.setTime(this.Ns.getTime()),t.prototype.onReset.call(this)},n.prototype.next=function(){var t=this.Bs;t.setFullYear(t.getFullYear(),t.getMonth()+1,1),t.setHours(0,0,0,0),this.onPageChanged()},n.prototype.back=function(){var t=this.Bs;t.setFullYear(t.getFullYear(),t.getMonth()-1,1),t.setHours(0,0,0,0),this.onPageChanged()},n.prototype.onNewChanged=function(){this.xs.adjust(this.Bs),t.prototype.onNewChanged.call(this),this.onPageChanged()},n.prototype.onPageChanged=function(){var t=this.Rs,n=this.xs,i=this.Bs,r=this.ys,e=new Date(i.getTime());e.setDate(1),e.setHours(0,0,0,0);for(var u=this.theme,s=(e.getDay()-u.getDayStart()+7)%7,h=0;h<s;++h)t[h].show();for(h=s;h<7;++h)t[h].hide();var o=this.Ls;e.setFullYear(e.getFullYear(),e.getMonth()+1,0);var c=e.getDate(),f=r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth()?r.getDate():0;for(h=0;h<c;++h)e.setDate(h+1),(a=t[h+7]).setActive(f===h+1),a.setDisabled(!n.contains(e)),a.show(),o(e,a);for(h=c;h<31;++h){var a;(a=t[h+7]).setActive(!1),a.hide()}this.Ru.text=this.Ws(i)},n.prototype.adjustInputOptions=function(n,i,r){return null==i.weight&&(i.weight=1),t.prototype.adjustInputOptions.call(this,n,i,r)},n.prototype.getTimeLayoutWidth=function(){return"100%"},n.prototype.newLabel=function(){return new Jl({weight:1,padding:0,text:{align:{horizontal:"CENTER"},value:""}})},n.prototype.newBackButton=function(t,n){var i=this,r=n&&void 0!==n.back?n.back:t.getBackButtonOptions();if(null!=r){var e=new Xl(r);return e.on("active",(function(){i.back()})),e}return null},n.prototype.newNextButton=function(t,n){var i=this,r=n&&void 0!==n.next?n.next:t.getNextButtonOptions();if(null!=r){var e=new Kl(r);return e.on("active",(function(){i.next()})),e}return null},n.prototype.newDateLabels=function(t,n){for(var i=t.getDayLabels(),r=t.getDayStart(),e=[],u=0;u<7;++u){var s=i[(r+u)%7];e.push(this.newDateLabel(t,n,s))}return e},n.prototype.newDateLabel=function(t,n,i){return new Zl({text:{value:i}})},n.prototype.newDateButtons=function(t,n){for(var i=[],r=0;r<7;++r)i.push(this.newSpace(t,n));for(r=1;r<=31;++r)i.push(this.newDateButton(t,n,r));return i},n.prototype.newSpace=function(t,n){return new ql},n.prototype.newDateButton=function(t,n,i){var r=this;return new Yl({text:{value:String(i)},on:{active:function(){r.onDateButtonClicked(i)}}})},n.prototype.onDateButtonClicked=function(t){var n=this.ys;if(n.getDate()!==t){var i=this.Bs;n.setFullYear(i.getFullYear()),n.setMonth(i.getMonth()),n.setDate(t),this.onNewChanged()}},n.prototype.getType=function(){return"DPickerDatetime"},n}(uv),hv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DPickerDate"},n}(sv),ov=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onInit=function(n,i){t.prototype.onInit.call(this,n,i);var r=new hv(i&&i.picker);this.ps=r,n.addChild(r)},Object.defineProperty(n.prototype,"current",{get:function(){return this.ps.current},set:function(t){this.ps.current=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.ps.new},set:function(t){this.ps.new=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"page",{get:function(){return this.ps.new},set:function(t){this.ps.page=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){return this.ps},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDialogDate"},n}(Ml),cv=function(){function t(){}return t.getInstance=function(){return null==t.INSTANCE&&(t.INSTANCE=new ov),t.INSTANCE},t}(),fv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.Ms=n&&n.dialog,this.on("active",(function(){var t=i.Tn.getTime(),n=i.dialog;n.current=new Date(t),n.new=new Date(t),n.page=new Date(t),n.open().then((function(){var t=n.new,r=n.current;i.emit("select",t,r,i),i.text=new Date(t.getTime()),i.emit("change",i)}))}))},Object.defineProperty(n.prototype,"dialog",{get:function(){var t=this.Es;return null==t&&(t=null!=this.Ms?new ov(this.Ms):cv.getInstance(),this.Es=t),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.Tn},set:function(t){this.Tn.getTime()!==t.getTime()&&(this.text=t)},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DButtonDate"},n}(pl),av=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onInit=function(n,i){t.prototype.onInit.call(this,n,i);var r=new sv(i&&i.picker);this.ps=r,n.addChild(r)},Object.defineProperty(n.prototype,"current",{get:function(){return this.ps.current},set:function(t){this.ps.current=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.ps.new},set:function(t){this.ps.new=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"page",{get:function(){return this.ps.new},set:function(t){this.ps.page=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){return this.ps},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDialogDatetime"},n}(Ml),lv=function(){function t(){}return t.getInstance=function(){return null==t.INSTANCE&&(t.INSTANCE=new av),t.INSTANCE},t}(),vv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;this.Ms=n&&n.dialog,this._s=mo.toMask(n&&n.dialog&&n.dialog.picker),t.prototype.init.call(this,n),this.on("active",(function(){var t=i.Tn.getTime(),n=i.dialog;n.current=new Date(t),n.new=new Date(t),n.page=new Date(t),n.open().then((function(){var t=n.new,r=n.current;i.emit("select",t,r,i),i.text=new Date(t.getTime()),i.emit("change",i)}))}))},n.prototype.getDatetimeMask=function(){return this._s},Object.defineProperty(n.prototype,"dialog",{get:function(){var t=this.Es;return null==t&&(t=null!=this.Ms?new av(this.Ms):lv.getInstance(),this.Es=t),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.Tn},set:function(t){this.Tn.getTime()!==t.getTime()&&(this.text=t)},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DButtonDatetime"},n}(pl),bv=xn,dv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this._i=null!=n&&null!=n.checker?n.checker:void 0;var r=null!=n&&null!=n.as?o(n.as)?bv[n.as]:n.as:bv.TEXT,e=new Pn(r,this);this.Fs=e,this.on("active",(function(){var t=i.onOpening();!0===t?e.open():!1===t||t.then((function(){e.open()}))}))},n.prototype.onOpening=function(){var t=this._i;return null==t||t()},n.prototype.open=function(){this.Fs.open()},n.prototype.getType=function(){return"DButtonFile"},n}(pl),gv=function(t){function n(n){var i=t.call(this)||this;if(i.Ps=[],i.Us=null,i.zs=v.NONE,i.Gs=v.NONE,i.Hs=function(t){i.onActive(t)},null!=n){var r=n.on;if(null!=r)for(var e in r)i.on(e,r[e])}return i.emit("init",i),i}return i(n,t),n.prototype.add=function(t){this.Ps.indexOf(t)<0&&(this.Ps.push(t),t.setState(this.zs,!0),t.setState(this.Gs,!1),t.on("active",this.Hs),t.isActive()&&this.onActive(t))},Object.defineProperty(n.prototype,"active",{get:function(){return this.Us},enumerable:!0,configurable:!0}),n.prototype.onActive=function(t){if(t.isToggle()){this.Us=t;for(var n=this.Ps,i=0,r=n.length;i<r;++i){var e=n[i];e!==t&&e.isToggle()&&e.isActive()&&e.onClick()}}},n.prototype.remove=function(t){var n=this.Ps,i=n.indexOf(t);0<=i&&(n.splice(i,1),t.off("active",this.Hs))},n.prototype.contains=function(t){return 0<=this.Ps.indexOf(t)},n.prototype.setHovered=function(t){return this.setState(v.HOVERED,t)},n.prototype.setActive=function(t){return this.setState(v.ACTIVE,t)},n.prototype.setReadOnly=function(t){return this.setState(v.READ_ONLY,t)},n.prototype.setDisabled=function(t){return this.setState(v.DISABLED,t)},n.prototype.setDragging=function(t){return this.setState(v.DRAGGING,t)},n.prototype.isHovered=function(){return this.hasState(v.HOVERED)},n.prototype.isActive=function(){return this.hasState(v.ACTIVE)},n.prototype.isReadOnly=function(){return this.hasState(v.READ_ONLY)},n.prototype.isDisabled=function(){return this.hasState(v.DISABLED)},n.prototype.isDragging=function(){return this.hasState(v.DRAGGING)},n.prototype.isFocused=function(){return this.hasState(v.FOCUSED)},n.prototype.isUnfocusable=function(){return this.hasState(v.UNFOCUSABLE)},n.prototype.setState=function(t,n){n?(this.zs|=t,this.Gs&=~t):(this.Gs|=t,this.zs&=~t);for(var i=this.Ps,r=0,e=i.length;r<e;++r)i[r].setState(t,n);return this},n.prototype.hasState=function(t){for(var n=this.Ps,i=0,r=n.length;i<r;++i)if(n[i].hasState(t))return!0;return!1},n.prototype.clear=function(){this.Ps.length=0},n.prototype.destroy=function(){this.clear()},n}(t.utils.EventEmitter),mv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButtonRadio"},n}(ml),pv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButtonRadioRight"},n}(mv),wv=function(t){function n(n){var i=t.call(this,n)||this,r=W.getCommandController();return i.setState(v.DISABLED,!r.isRedoable()),r.on("change",(function(){i.setState(v.DISABLED,!r.isRedoable())})),i.on("active",(function(){r.redo()})),i}return i(n,t),n}(pl),Dv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DButtonSecondary"},n}(pl),Tv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onInit=function(n,i){t.prototype.onInit.call(this,n,i);var r=new uv(i&&i.picker);this.ps=r,n.addChild(r)},Object.defineProperty(n.prototype,"current",{get:function(){return this.ps.current},set:function(t){this.ps.current=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.ps.new},set:function(t){this.ps.new=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){return this.ps},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDialogTime"},n}(Ml),Ov=function(){function t(){}return t.getInstance=function(){return null==t.INSTANCE&&(t.INSTANCE=new Tv),t.INSTANCE},t}(),Sv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;this.Ms=n&&n.dialog,this._s=go.toMask(n&&n.dialog&&n.dialog.picker),t.prototype.init.call(this,n),this.on("active",(function(){var t=i.Tn.getTime(),n=i.dialog;n.current=new Date(t),n.new=new Date(t),n.open().then((function(){var t=n.new,r=n.current;i.emit("select",t,r,i),i.text=new Date(t.getTime()),i.emit("change",i)}))}))},n.prototype.getDatetimeMask=function(){return this._s},Object.defineProperty(n.prototype,"dialog",{get:function(){var t=this.Es;return null==t&&(t=null!=this.Ms?new Tv(this.Ms):Ov.getInstance(),this.Es=t),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.Tn},set:function(t){this.Tn.getTime()!==t.getTime()&&(this.text=t)},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DButtonTime"},n}(pl),Mv=function(t){function n(n){var i=t.call(this,n)||this,r=W.getCommandController();return i.setState(v.DISABLED,!r.isUndoable()),r.on("change",(function(){i.setState(v.DISABLED,!r.isUndoable())})),i.on("active",(function(){r.undo()})),i}return i(n,t),n}(pl),Ev=function(t){function n(n){var i=t.call(this)||this;return i.parent=n,i}return i(n,t),n.prototype.render=function(n){this.updateTransform(),t.prototype.render.call(this,n)},n.prototype.onReflow=function(t,n,i){var r=t.corner,e=Math.max(0,r.getRadius()-.5),u=r.getMask(),s=u&h.TOP_LEFT?0:e,o=u&h.TOP_RIGHT?0:e,c=u&h.BOTTOM_LEFT?0:e,f=u&h.BOTTOM_RIGHT?0:e;this.clear(),this.beginFill(16777215,1),this.lineStyle(0,0,0,0,!1),s<=0&&o<=0&&c<=0&&f<=0?(this.moveTo(0,0),this.lineTo(0+n,0),this.lineTo(0+n,0+i),this.lineTo(0,0+i),this.lineTo(0,0)):(this.moveTo(0+s,0),0<o?this.arcTo(0+n,0,0+n,0+i,o):this.lineTo(0+n,0),0<f?this.arcTo(0+n,0+i,0,0+i,f):this.lineTo(0+n,0+i),0<c?this.arcTo(0,0+i,0,0,c):this.lineTo(0,0+i),0<s?this.arcTo(0,0,0+n,0,s):this.lineTo(0,0)),this.endFill()},n}(t.Graphics),kv=function(){function t(t,n,i,r){var e=this;this.gr=t,this.Vs=n;var u=r&&r.drag,s=u&&null!=u.mode?o(u.mode)?Io[u.mode]:u.mode:i.getDragMode(),h=u&&null!=u.modifier?o(u.modifier)?Dn[u.modifier]:u.modifier:i.getDragModifier(),c=u&&null!=u.duration?u.duration:{position:i.getDragDurationPosition(),scale:i.getDragDurationScale()};s!==Io.ON&&s!==Io.TOUCH||(this.Xs=new Bn({target:t,touch:s===Io.TOUCH,modifier:h,checker:u&&u.checker,easing:{duration:c},on:{start:function(){e.Vs.stop()},move:function(i,r,e,u,s){var h=t.canvas;if(null!=h){var o=h.scale.y,c=n.toNormalizedScale(o*s),f=c/o,a=e-i,l=u-r,v=h.position,b=(v.x-a)*f+e,d=(v.y-l)*f+u;h.scale.set(c,c),h.position.set(b,d)}}}}))}return t.prototype.stop=function(){var t=this.Xs;null!=t&&t.stop()},t}(),Iv=function(){function t(t,n,i){var r=this;this.gr=t,this.Ys=1,this.Ks=0,this.Js=0,this.Zs=1,this.qs=0,this.Qs=0,this.Ai=new Nn({onTime:function(t){r.onTime(t)},duration:i}),this.Vs=n,this.gi=i}return t.prototype.onTime=function(t){var n=1-t,i=t,r=this.Zs*n+this.Ys*i,e=this.qs*n+this.Ks*i,u=this.Qs*n+this.Js*i,s=this.gr.canvas;null!=s&&(s.scale.set(r,r),s.position.set(e,u))},t.prototype.start=function(t,n,i,r,e,u){if(!1!==u&&this.Vs.stop(),null==e&&(e=this.gi),e<=0)t.scale.set(r,r),t.position.set(n,i);else{var s=t.position,h=t.scale;this.qs=s.x,this.Qs=s.y,this.Zs=h.y,this.Ks=n,this.Js=i,this.Ys=r,this.Ai.duration=e,this.Ai.start()}},t.prototype.stop=function(){this.Ai.stop()},t}(),Nv=function(){function n(n,i,r){this.gr=n;var e=r&&r.zoom;this.$s=new t.Point,this.th=e&&null!=e.min?e.min:i.getZoomMin(),this.nh=e&&null!=e.max?e.max:i.getZoomMax();var u=e&&e.wheel;this.ih=u&&null!=u.enable?u.enable:i.isWheelZoomEnabled(),this.rh=u&&null!=u.speed?u.speed:i.getWheelZoomSpeed(),this.eh=u&&null!=u.modifier?o(u.modifier)?Dn[u.modifier]:u.modifier:i.getWheelZoomModifier(),this.uh=u&&u.checker||Cn.match;var s=e&&e.dblclick;this.sh=s&&null!=s.enable?s.enable:i.isDblClickZoomEnabled(),this.hh=s&&null!=s.amount?s.amount:i.getDblClickZoomSpeed(),this.oh=s&&null!=s.modifier?o(s.modifier)?Dn[s.modifier]:s.modifier:i.getDblClickZoomModifier(),this.fh=s&&s.checker||Cn.match,this.ah=s&&null!=s.duration?s.duration:i.getDblClickZoomDuration();var h=r&&r.translation&&r.translation.wheel;this.lh=h&&null!=h.enable?h.enable:i.isWheelTranslationEnabled(),this.vh=h&&null!=h.speed?h.speed:i.getWheelTranslationSpeed(),this.bh=h&&null!=h.modifier?o(h.modifier)?Dn[h.modifier]:h.modifier:i.getWheelTranslationModifier(),this.dh=h&&h.checker||Cn.match,this.gh=new kv(n,this,i,r),this.lt=new Iv(n,this,this.ah)}return Object.defineProperty(n.prototype,"drag",{get:function(){return this.gh},enumerable:!0,configurable:!0}),n.prototype.stop=function(){this.gh.stop(),this.lt.stop()},n.prototype.reset=function(t,n){var i=this.gr,r=i.canvas;if(null!=r){var e=.5*(i.width-r.width),u=.5*(i.height-r.height);this.lt.start(r,e,u,1,t,n)}},n.prototype.fit=function(t,n){var i=this.gr,r=i.canvas;if(null!=r){var e=i.padding,u=i.width,s=i.height,h=r.width,o=r.height,c=(u-e.getLeft()-e.getRight())/h,f=(s-e.getTop()-e.getBottom())/o,a=this.toNormalizedScale(Math.min(c,f)),l=.5*(u-h*a),v=.5*(s-o*a);this.lt.start(r,l,v,a,t,n)}},n.prototype.zoomIn=function(t,n){this.zoom(this.scale*this.hh,t,n)},n.prototype.zoomOut=function(t,n){this.zoom(this.scale/this.hh,t,n)},n.prototype.zoomAt=function(t,n,i,r,e){var u=this.gr.canvas;if(null!=u){var s=u.scale.y,h=this.toNormalizedScale(i),o=h/s,c=(u.x-t)*o+t,f=(u.y-n)*o+n;this.lt.start(u,c,f,h,r,e)}},n.prototype.zoomAtGlobal=function(t,n,i,r,e){var u=this.$s;u.set(t,n),this.toLocal(u,u),this.zoomAt(u.x,u.y,i,r,e)},n.prototype.zoom=function(t,n,i){var r=this.gr;this.zoomAt(.5*r.width,.5*r.height,t,n,i)},Object.defineProperty(n.prototype,"scale",{get:function(){var t=this.gr.canvas;return null!=t?t.scale.y:1},set:function(t){var n=this.gr.canvas;if(null!=n){var i=this.toNormalizedScale(t);n.scale.set(i,i)}},enumerable:!0,configurable:!0}),n.prototype.moveTo=function(t,n,i,r){var e=this.gr.canvas;null!=e&&this.lt.start(e,t,n,e.scale.y,i,r)},Object.defineProperty(n.prototype,"position",{get:function(){var t=this.gr.canvas;return null!=t?t.position:new PIXI.Point(0,0)},set:function(t){var n=this.gr.canvas;null!=n&&n.position.set(t.x,t.y)},enumerable:!0,configurable:!0}),n.prototype.transform=function(t,n,i,r,e){var u=this.gr.canvas;null!=u&&this.lt.start(u,t,n,i,r,e)},n.prototype.toLocal=function(t,n,i){return this.gr.toLocal(t,void 0,n,i)},n.prototype.toGlobal=function(t,n,i){return this.gr.toGlobal(t,n,i)},n.prototype.toNormalizedScale=function(t){return Math.min(this.nh,Math.max(this.th,t))},n.prototype.onWheel=function(t,n,i){if(this.ih&&this.uh(t,this.eh,this.gr)&&0!==n.deltaY){var r=n.lowest*this.rh,e=this.scale*(1+n.deltaY*r);return this.zoomAtGlobal(i.x,i.y,e,0),!0}if(this.lh&&this.dh(t,this.bh,this.gr)){var u=this.gr.canvas;if(null!=u)return this.stop(),r=n.lowest*this.vh,u.position.set(u.x-n.deltaX*r,u.y+n.deltaY*r),!0}return!1},n.prototype.onDblClick=function(t){if(this.sh&&this.fh(t,this.oh,this.gr)){var n=this.$s;Z.toGlobal(t,n);var i=this.scale*this.hh;return this.zoomAtGlobal(n.x,n.y,i,this.ah),!0}return!1},n}(),yv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.Qt=null;var i=this.theme;this.ws=new Nv(this,i,n),this.canvas=n&&n.canvas?n.canvas:null,function(t,n){return n&&null!=n.mask?n.mask:t.isOverflowMaskEnabled()}(i,n)&&(this.mask=this.getOrCreateOverflowMask())},n.prototype.getType=function(){return"DCanvasContainer"},n.prototype.onResize=function(n,i,r,e){t.prototype.onResize.call(this,n,i,r,e),this.updateContentSize(n,i,r,e)},Object.defineProperty(n.prototype,"canvas",{get:function(){return this.Qt},set:function(t){var n=this.Qt;null!=n&&(this.Qt=null,this.removeChild(n),this.emit("unset",n,this),n.destroy()),this.Qt=t,null!=t?(this.addChild(t),this.emit("set",t,this),this.ws.reset(0)):e.update()},enumerable:!0,configurable:!0}),n.prototype.getOrCreateOverflowMask=function(){return null==this.yn&&(this.yn=new Ev(this),this.addReflowable(this.yn),this.toDirty()),this.yn},n.prototype.updateContentSize=function(t,n,i,r){var e=this.Qt;if(null!=e){var u=e.x+.5*(t-i),s=e.y+.5*(n-r);e.position.set(u,s)}},Object.defineProperty(n.prototype,"view",{get:function(){return this.ws},enumerable:!0,configurable:!0}),n.prototype.onWheel=function(n,i,r){var e=this.ws.onWheel(n,i,r),u=t.prototype.onWheel.call(this,n,i,r);return e||u},n.prototype.onDblClick=function(n){var i=this.ws.onDblClick(n),r=t.prototype.onDblClick.call(this,n);return i||r},n.prototype.destroy=function(){var n=this.yn;null!=n&&(this.yn=null,n.destroy()),this.mask=null,t.prototype.destroy.call(this)},n}($),xv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DCanvas"},n}($),Cv=function(){function t(t,n){this.mh=n&&null!=n.coordinate?n.coordinate:0,this.it=this.toPosition(t,n),this.ph=this.toTickContainer(t,n),this.Ru=this.toLabel(t,n),this.It=n&&null!=n.padding?n.padding:t.getPadding()}return Object.defineProperty(t.prototype,"coordinateIndex",{get:function(){return this.mh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.It},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.it},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tick",{get:function(){return this.ph},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.Ru},enumerable:!0,configurable:!0}),t.prototype.toPosition=function(t,n){var i=n&&n.position;return o(i)?Uo[i]:null!=i?i:t.getPosition()},t.prototype.toTickContainer=function(t,n){var i=n&&n.tick;return{enable:i&&null!=i.enable?i.enable:t.getTickEnable(),major:this.toTickMajor(t,i),minor:this.toMinorTick(t,i)}},t.prototype.toTickMajor=function(t,n){var i=n&&n.major,r=i&&null!=i.position?i.position:n&&null!=n.position?n.position:t.getMajorTickPosition(),e=i&&null!=i.style?i.style:n&&null!=n.style?n.style:t.getMajorTickStyle();return{count:i&&null!=i.count?i.count:t.getMajorTickCount(),size:i&&null!=i.size?i.size:t.getMajorTickSize(),position:this.toTickPosition(r),style:o(e)?Yi[e]:e,stroke:this.toTickStroke(t,i&&i.stroke,n&&n.stroke),text:this.toMajorTickText(t,i&&i.text),formatter:this.toMajorTickFormatter(t,i),shapes:void 0}},t.prototype.toTickPosition=function(t){var n=this.it;if(t===zo.OUTSIDE||"OUTSIDE"===t)switch(n){case Uo.TOP:return Ji.BOTTOM;case Uo.BOTTOM:return Ji.TOP;case Uo.LEFT:return Ji.RIGHT;case Uo.RIGHT:return Ji.LEFT;default:return Ji.TOP}else switch(n){case Uo.TOP:return Ji.TOP;case Uo.BOTTOM:return Ji.BOTTOM;case Uo.LEFT:return Ji.LEFT;case Uo.RIGHT:return Ji.RIGHT;default:return Ji.TOP}},t.prototype.toMinorTick=function(t,n){var i=n&&n.major,r=i&&null!=i.position?i.position:n&&null!=n.position?n.position:t.getMinorTickPosition(),e=i&&null!=i.style?i.style:n&&null!=n.style?n.style:t.getMinorTickStyle();return{count:i&&null!=i.count?i.count:t.getMinorTickCount(),size:i&&null!=i.size?i.size:t.getMinorTickSize(),position:this.toTickPosition(r),style:o(e)?Yi[e]:e,stroke:this.toTickStroke(t,i&&i.stroke,n&&n.stroke),shapes:void 0}},t.prototype.toTickStroke=function(t,n,i){return n?i?{enable:null!=n.enable?n.enable:i.enable,color:null!=n.color?n.color:i.color,alpha:null!=n.alpha?n.alpha:i.alpha,width:null!=n.width?n.width:i.width,align:null!=n.align?n.align:i.align,side:null!=n.side?n.side:i.side}:{enable:n.enable,color:n.color,alpha:n.alpha,width:n.width,align:n.align,side:n.side}:i?{enable:i.enable,color:i.color,alpha:i.alpha,width:i.width,align:i.align,side:i.side}:void 0},t.prototype.toMajorTickFormatter=function(t,n){var i=n&&n.text&&n.text.value;return bn.create(null!=i?i:t.getMajorTickTextFormat())},t.prototype.toMajorTickText=function(t,n){return{value:(n=n||{}).value,color:n.color,alpha:n.alpha,family:n.family,size:n.size,weight:n.weight,align:this.toMajorTickTextAlign(t,n.align),offset:this.toMajorTickTextOffset(t,n.offset),style:n.style,outline:this.toMajorTickTextOutline(t,n.outline),spacing:this.toMajorTickTextSpacing(t,n.spacing),direction:this.toTickMajorTextDirection(t,n.direction),padding:this.toMajorTickTextPadding(t,n.padding),clipping:n.clipping}},t.prototype.toMajorTickTextOutline=function(t,n){if(n)return{enable:n.enable,color:n.color,alpha:n.alpha,width:n.width}},t.prototype.toMajorTickTextAlign=function(t,n){var i=this.it;return n?{horizontal:null!=n.horizontal?n.horizontal:t.getMajorTickTextAlignHorizontal(i),vertical:null!=n.vertical?n.vertical:t.getMajorTickTextAlignVertical(i)}:{horizontal:t.getMajorTickTextAlignHorizontal(i),vertical:t.getMajorTickTextAlignVertical(i)}},t.prototype.toMajorTickTextOffset=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toMajorTickTextSpacing=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toMajorTickTextPadding=function(t,n){return{horizontal:n&&null!=n.horizontal?n.horizontal:t.getMajorTickTextPaddingHorizontal(),vertical:n&&null!=n.vertical?n.vertical:t.getMajorTickTextPaddingVertical()}},t.prototype.toTickMajorTextDirection=function(t,n){return null!=n?n:t.getMajorTickTextDirection()},t.prototype.toLabel=function(t,n){var i=n&&n.label;if(i)return{value:i.value,color:i.color,alpha:i.alpha,family:i.family,size:i.size,weight:i.weight,align:this.toLabelAlign(t,i.align),offset:this.toLabelOffset(t,i.offset),style:i.style,outline:this.toLabelOutline(t,i.outline),spacing:this.toLabelSpacing(t,i.spacing),direction:this.toLabelDirection(t,i.direction),padding:this.toLabelPadding(t,i.padding),clipping:i.clipping}},t.prototype.toLabelOutline=function(t,n){if(n)return{enable:n.enable,color:n.color,alpha:n.alpha,width:n.width}},t.prototype.toLabelAlign=function(t,n){var i=this.it;return n?{horizontal:null!=n.horizontal?n.horizontal:t.getLabelAlignHorizontal(i),vertical:null!=n.vertical?n.vertical:t.getLabelAlignVertical(i)}:{horizontal:t.getLabelAlignHorizontal(i),vertical:t.getLabelAlignVertical(i)}},t.prototype.toLabelOffset=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toLabelSpacing=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toLabelPadding=function(t,n){return{horizontal:n&&null!=n.horizontal?n.horizontal:t.getLabelPaddingHorizontal(),vertical:n&&null!=n.vertical?n.vertical:t.getLabelPaddingVertical()}},t.prototype.toLabelDirection=function(t,n){return null!=n?n:t.getLabelDirection()},t}(),jv=function(){function t(t){var n=t&&t.theme||this.getThemeDefault();this.t=n,this.Ce=0;var i=new Cv(n,t);this.mh=i.coordinateIndex,this.It=i.padding,this.it=i.position;var r=i.tick;this.ph=r,this.Ru=i.label,this.wh=new Float64Array(3*r.major.count),this.Dh=new Float64Array((r.major.count+1)*r.minor.count*3)}return Object.defineProperty(t.prototype,"position",{get:function(){return this.it},enumerable:!0,configurable:!0}),t.prototype.updateBar=function(){var t=this.it,n=this.Th,i=this.Oh;if(n&&i){var r=n.plotArea.size,e=r.x,u=r.y,s=this.It*this.Ce;switch(i.disallowUploadedUpdate(),t){case Uo.TOP:i.transform.position.set(.5*e,0-s),i.size.set(e,0);break;case Uo.BOTTOM:i.transform.position.set(.5*e,u+s),i.size.set(e,0);break;case Uo.LEFT:i.transform.position.set(0-s,.5*u),i.size.set(0,u);break;case Uo.RIGHT:i.transform.position.set(e+s,.5*u),i.size.set(0,u)}i.allowUploadedUpdate()}},t.prototype.updateTicksX=function(t,n,i,r){var e=this.ph,u=e.major.count,s=e.major.formatter,h=e.minor.count,o=(u+1)*h,c=this.wh,f=this.Dh;t.ticks(u,h,o,c,f);for(var a=0;a<u;++a){var l=n[a],v=3*a,b=c[v+0],d=c[v+1],g=c[v+2];Hn(b)?l.visible=!1:(l.disallowUploadedUpdate(),l.visible=!0,l.transform.position.set(d,r),l.text.value=s.format(b,g),l.allowUploadedUpdate())}for(a=0;a<o;++a){var m=i[a],p=3*a,w=f[p+0],D=f[p+1];Hn(w)?m.visible=!1:(m.disallowUploadedUpdate(),m.visible=!0,m.transform.position.set(D,r),m.allowUploadedUpdate())}},t.prototype.updateTicksY=function(t,n,i,r){var e=this.ph,u=e.major.count,s=e.major.formatter,h=e.minor.count,o=(u+1)*h,c=this.wh,f=this.Dh;t.ticks(u,h,o,c,f);for(var a=0;a<u;++a){var l=n[a],v=3*a,b=c[v+0],d=c[v+1],g=c[v+2];Hn(b)?l.visible=!1:(l.disallowUploadedUpdate(),l.visible=!0,l.transform.position.set(r,d),l.text.value=s.format(b,g),l.allowUploadedUpdate())}for(a=0;a<o;++a){var m=i[a],p=3*a,w=f[p+0],D=f[p+1];Hn(w)?m.visible=!1:(m.disallowUploadedUpdate(),m.visible=!0,m.transform.position.set(r,D),m.allowUploadedUpdate())}},t.prototype.updateTicks=function(){var t=this.ph,n=t.major.shapes,i=t.minor.shapes,r=this.Th;if(n&&i&&r){var e=r.plotArea,u=this.mh,s=void 0,h=this.It*this.Ce;switch(this.it){case Uo.TOP:(s=e.coordinate.x.get(u))&&this.updateTicksX(s,n,i,0-h);break;case Uo.BOTTOM:(s=e.coordinate.x.get(u))&&this.updateTicksX(s,n,i,e.size.y+h);break;case Uo.LEFT:(s=e.coordinate.y.get(u))&&this.updateTicksY(s,n,i,0-h);break;case Uo.RIGHT:(s=e.coordinate.y.get(u))&&this.updateTicksY(s,n,i,e.size.x+h)}}},t.prototype.bind=function(t,n){this.Th=t,this.Ce=n;var i=t.container,r=this.Oh;if(!r){var e=this.it,u=e===Uo.LEFT||e===Uo.RIGHT?Ji.TOP:Ji.LEFT;(r=new yr(u,-1,rr.STROKE_WIDTH,Yi.NONE)).text.copy(this.Ru),this.Oh=r}r.attach(t.container);var s=this.ph,h=s.major,o=h.shapes;if(!o&&s.enable){o=[],h.shapes=o;for(var c=h.count,f=h.size,a=h.position,l=h.style,v=0;v<c;++v){var b=new yr(a,f,rr.STROKE_WIDTH,l);b.stroke.copy(h.stroke),b.text.copy(h.text),b.size.set(0,0),o.push(b)}}if(o){v=0;for(var d=o.length;v<d;++v)o[v].attach(i)}var g=s.minor,m=g.shapes;if(!m&&s.enable){m=[],g.shapes=m;var p=g.count,w=g.size,D=g.position,T=g.style;for(v=0,d=(h.count+1)*p;v<d;++v){var O=new yr(D,w,rr.STROKE_WIDTH,T);O.stroke.copy(g.stroke),O.size.set(0,0),m.push(O)}}if(m)for(v=0,d=m.length;v<d;++v)m[v].attach(i)},t.prototype.unbind=function(){var t=this.Oh;t&&t.detach();var n=this.ph,i=n.major.shapes;if(i)for(var r=0,e=i.length;r<e;++r)i[r].detach();var u=n.minor.shapes;if(u)for(r=0,e=u.length;r<e;++r)u[r].detach();this.Th=void 0},t.prototype.update=function(){this.updateBar(),this.updateTicks()},t.prototype.destroy=function(){var t=this.Oh;t&&t.destroy();var n=this.ph,i=n.major.shapes;if(i)for(var r=0,e=i.length;r<e;++r)i[r].destroy();var u=n.minor.shapes;if(u)for(r=0,e=u.length;r<e;++r)u[r].destroy();this.Th=void 0},t.prototype.getThemeDefault=function(){return K.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartAxisBase"},t}(),Av=function(){function t(t,n){this.Sh=t,this.Th=new fc,this.Mh=new Map;var i=n&&n.list;if(i)for(var r=0,e=i.length;r<e;++r)this.add(i[r])}return Object.defineProperty(t.prototype,"container",{get:function(){return this.Th},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Sh},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var n=this.Mh,i=n.get(t.position);null==i&&(i=[],n.set(t.position,i)),i.push(t),t.bind(this,i.length-1)},t.prototype.get=function(t,n){var i=this.Mh.get(t);return i&&0<=n&&n<i.length?i[n]:null},t.prototype.indexOf=function(t){var n=this.Mh.get(t.position);return n?n.indexOf(t):-1},t.prototype.remove=function(t,n){var i=this.Mh;if(a(t)){var r=t,e=n;if((s=i.get(r))&&0<=e&&e<s.length){var u=s.splice(e,1)[0];return u.unbind(),u.destroy(),u}}else{var s,h=t;if(r=h.position,(s=i.get(r))&&0<=(e=s.indexOf(t)))return s.splice(e,1),h.unbind(),h.destroy(),h}return null},t.prototype.clear=function(t){var n=this.Mh.get(t);if(n){for(var i=0,r=n.length;i<r;++i)n[i].destroy();n.length=0}return this},t.prototype.size=function(t){var n=this.Mh.get(t);return n?n.length:0},t.prototype.update=function(){this.Mh.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].update()}))},t.prototype.destroy=function(){this.Mh.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].destroy();t.length=0}))},t}(),Bv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DChartAxisX"},n}(jv),Rv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DChartAxisY"},n}(jv),Lv=[1095651,16667680,15778578,1858929],Wv=[Lv[0],Xn.brighten(Lv[0],.4),Lv[1],Xn.brighten(Lv[1],.4),Lv[2],Xn.brighten(Lv[2],.4),Lv[3],Xn.brighten(Lv[3],.4)],_v=function(t){return Wv[t%Wv.length]};!function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(ll||(ll={}));var Fv,Pv=function(){function t(t,n){this.Th=t,this.ar=n,this.Mh=[]}return Object.defineProperty(t.prototype,"container",{get:function(){return this.Th},enumerable:!0,configurable:!0}),t.prototype.add=function(t,n){var i=this.Mh;return null==n?i.push(t):0<=n&&n<i.length?i.splice(n,0,t):i.push(t),t.bind(this,this.ar),this},t.prototype.get=function(t){var n=this.Mh;return 0<=t&&t<n.length?n[t]:null},t.prototype.indexOf=function(t){return this.Mh.indexOf(t)},t.prototype.remove=function(t){var n=this.Mh;if(a(t)){if(0<=(r=t)&&r<n.length){var i=n.splice(r,1)[0];return i.unbind(),i}}else{var r,e=t;if(0<=(r=n.indexOf(e)))return n.splice(r,1),e.unbind(),e}return null},t.prototype.clear=function(){for(var t=this.Mh,n=0,i=t.length;n<i;++n)t[n].unbind();return t.length=0,this},t.prototype.destroy=function(){return this.clear()},t.prototype.size=function(){return this.Mh.length},t.prototype.fit=function(){for(var t=this.Mh,n=0,i=t.length;n<i;++n)t[n].fit();return this},t}(),Uv=function(){function t(t,n){this.Sh=t;var i=this._x=new Pv(this,ll.X),r=this._y=new Pv(this,ll.Y);if(n){var e=n.x;if(e)if(Gn(e))for(var u=0,s=e.length;u<s;++u)i.add(e[u]);else i.add(e);var h=n.y;if(h)if(Gn(h))for(u=0,s=h.length;u<s;++u)r.add(h[u]);else r.add(h)}}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Sh},enumerable:!0,configurable:!0}),t.prototype.fit=function(){return this._x.fit(),this._y.fit(),this},t}(),zv=function(){function t(t,n,i){this.Pr=t,this.Ur=n,this.qt=i}return Object.defineProperty(t.prototype,"from",{get:function(){return this.Pr},set:function(t){this.set(t,void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.Ur},set:function(t){this.set(void 0,t)},enumerable:!0,configurable:!0}),t.prototype.set=function(t,n){var i=!1;return null!=t&&this.Pr!==t&&(this.Pr=t,i=!0),null!=n&&this.Ur!==n&&(this.Ur=n,i=!0),i&&this.qt(),this},t}(),Gv=function(){function t(t){var n=this,i=t&&t.theme||this.getThemeDefault();this.t=i,this._t=0,this.It=t&&null!=t.padding?t.padding:i.getPadding(),this.ar=ll.X;var r=t&&t.domain&&null!=t.domain.from?t.domain.from:0,e=t&&t.domain&&null!=t.domain.to?t.domain.to:1;this.Eh=new zv(r,e,(function(){n.onRegionChange()}));var u=t&&t.range&&null!=t.range.from?t.range.from:0,s=t&&t.range&&null!=t.range.to?t.range.to:1;this.kh=new zv(u,s,(function(){n.onRegionChange()})),this.onRegionChange()}return t.prototype.getThemeDefault=function(){return K.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinateLinear"},t.prototype.bind=function(t,n){this.Th=t,this.ar=n},t.prototype.unbind=function(){this.Th=void 0},t.prototype.fit=function(){var t=this.Th;if(t){var n=t.container.plotArea,i=this.It;switch(this.ar){case ll.X:var r=n.series.domain,e=r.from,u=r.to;if(!Hn(e)&&!Hn(u)){this.Eh.set(e,u);var s=i;(h=n.size.x-i)<s&&(h=s=.5*n.size.x),this.kh.set(s,h)}break;case ll.Y:var h,o=n.series.range,c=o.from,f=o.to;Hn(c)||Hn(f)||(this.Eh.set(c,f),(s=n.size.y-i)<(h=i)&&(h=s=.5*n.size.y),this.kh.set(s,h))}}},t.prototype.onRegionChange=function(){this._t+=1;var t=this.Eh,n=this.kh,i=t.to-t.from,r=n.to-n.from,e=this.t;this.hi=e.isZero(i)?0:r/i,this.T=n.from-this.hi*t.from,this.Ih=e.isZero(r)?0:i/r,this.Nh=t.from-this.Ih*n.from},Object.defineProperty(t.prototype,"id",{get:function(){return this._t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"domain",{get:function(){return this.Eh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this.kh},enumerable:!0,configurable:!0}),t.prototype.map=function(t){return this.T+this.hi*t},t.prototype.unmap=function(t){return this.Nh+this.Ih*t},t.prototype.calcStepMajor=function(t){if(0<t){var n=this.Eh,i=Math.abs(n.to-n.from)/t,r=Math.floor(Math.log(i)/Math.LN10),e=Math.pow(10,r);return this.t.toStepScale(i/e)*e}return-1},t.prototype.calcStepMinor=function(t,n){return 0<=t?t/(n+1):-1},t.prototype.calcTickMinorPositions=function(t,n,i,r,e,u,s){for(var h=0;h<n;h+=1){var o=i+(h+1)*t;r<=o&&o<=e&&(s[u++]=o)}},t.prototype.getRangeMax=function(){var t=this.Th;if(t){var n=t.container.plotArea.size;switch(this.ar){case ll.X:return n.x;case ll.Y:return n.y}}return 0},t.prototype.ticks=function(t,n,i,r,e){if(!(t<=0)){var u=this.Eh,s=Math.min(u.from,u.to),h=Math.max(u.from,u.to),o=this.calcStepMajor(t);if(o<=0){r[0]=s,r[1]=this.map(s),r[2]=0;for(var c=1;c<t;++c)r[0+(T=3*c)]=NaN,r[T+1]=NaN,r[T+2]=NaN;for(c=0;c<i;++c)e[0+(O=3*c)]=NaN,e[O+1]=NaN,e[O+2]=NaN}else{var f=this.getRangeMax(),a=Math.floor(s/o)-1,l=Math.ceil(h/o)+1,v=this.calcStepMinor(o,n),b=0,d=0;for(c=a;c<=l;++c){var g=c*o;if(b<t){var m=this.map(g);0<=m&&m<=f&&(r[0+(T=3*b)]=g,r[T+1]=m,r[T+2]=o,b+=1)}for(var p=0;p<n;p+=1)if(d<i){var w=g+(p+1)*v,D=this.map(w);0<=D&&D<=f&&(e[0+(O=3*d)]=w,e[O+1]=D,e[O+2]=v,d+=1)}}for(c=b;c<t;++c){var T;r[0+(T=3*c)]=NaN,r[T+1]=NaN,r[T+2]=NaN}for(c=d;c<i;++c){var O;e[0+(O=3*c)]=NaN,e[O+1]=NaN,e[O+2]=NaN}}}},t}(),Hv=function(){function t(t,n){this.from=t,this.to=n}return t.prototype.set=function(t,n){return null!=t&&(this.from=t),null!=n&&(this.to=n),this},t.prototype.clear=function(){return this.from=NaN,this.to=NaN,this},t.prototype.add=function(t,n){return Hn(t)||(this.from=Hn(this.from)?t:Math.min(this.from,t)),Hn(n)||(this.to=Hn(this.to)?n:Math.max(this.to,n)),this},t}(),Vv=function(){function t(t){this.width=this.toScalar(t&&t.width,rr.STROKE_WIDTH),this.color=this.toScalar(t&&t.color,_v),this.alpha=this.toScalar(t&&t.alpha,rr.STROKE_ALPHA),this.style=this.toScalar(t&&t.style,Yi.NONE)}return t.prototype.toScalar=function(t,n){return Gn(t)?function(n){return t[n%t.length]}:u(t)?t:null!=t?function(){return t}:Gn(n)?function(t){return n[t%n.length]}:u(n)?n:function(){return n}},t}(),Xv=function(){function t(t,n){this.Sh=t,this.Eh=new Hv(NaN,NaN),this.kh=new Hv(NaN,NaN),this.yh=new Vv(n&&n.stroke),this.Mh=[];var i=n&&n.list;if(i){var r=i.length;if(0<r){for(var e=0;e<r;++e)this.add(i[e]);this.update()}}}return Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.Sh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.yh},enumerable:!0,configurable:!0}),t.prototype.update=function(){for(var t=this.Mh,n=0,i=t.length;n<i;++n)t[n].update()},t.prototype.add=function(t){var n=this.Mh;t.bind(this,n.length),n.push(t)},t.prototype.get=function(t){var n=this.Mh;return 0<=t&&t<n.length?n[t]:null},t.prototype.indexOf=function(t){return this.Mh.indexOf(t)},t.prototype.remove=function(t){var n=this.Mh;if(a(t)){if(0<=(r=t)&&r<n.length){var i=n.splice(r,1)[0];return i.unbind(),i.destroy(),i}}else{var r,e=t;if(0<=(r=n.indexOf(e)))return n.splice(r,1),e.unbind(),e.destroy(),e}return null},t.prototype.clear=function(){for(var t=this.Mh,n=0,i=t.length;n<i;++n)t[n].destroy();return t.length=0,this},t.prototype.size=function(){return this.Mh.length},t.prototype.destroy=function(){this.clear()},Object.defineProperty(t.prototype,"domain",{get:function(){var t=this.Eh;t.clear();for(var n=this.Mh,i=0,r=n.length;i<r;++i){var e=n[i].domain;t.add(e.from,e.to)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){var t=this.kh;t.clear();for(var n=this.Mh,i=0,r=n.length;i<r;++i){var e=n[i].range;t.add(e.from,e.to)}return t},enumerable:!0,configurable:!0}),t}(),Yv=function(){function n(n){this.wr=new t.Point(n&&null!=n.width?n.width:100,n&&null!=n.height?n.height:100),this.Th=new fc,this.xh=new Uv(this,n&&n.coordinate),this.Ch=new Xv(this,n&&n.series),this.jh=new Av(this,n&&n.axis)}return Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.xh},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"series",{get:function(){return this.Ch},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"container",{get:function(){return this.Th},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.wr},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"axis",{get:function(){return this.jh},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this.Th.destroy(),this.Ch.destroy()},n}();!function(t){t[t.NONE=0]="NONE",t[t.DOMAIN=1]="DOMAIN",t[t.RANGE=2]="RANGE",t[t.BOTH=3]="BOTH"}(Fv||(Fv={}));var Kv,Jv=function(){function t(t){var n=t&&t.coordinate;this.Ah=n&&null!=n.x?n.x:0,this.Bh=n&&null!=n.y?n.y:0,this.se=t&&t.points||[],this.Rh=0,this.Lh=NaN,this.Wh=NaN,this._h=NaN,this.Eh=new Hv(NaN,NaN),this.kh=new Hv(NaN,NaN),this.Fh=NaN,this.gt=t}return t.prototype.toStroke=function(t,n){var i=this.gt,r=i&&i.stroke,e=t.stroke;if(r){var u=null!=r.style?r.style:e.style(n);return{width:null!=r.width?r.width:e.width(n),color:null!=r.color?r.color:e.color(n),alpha:null!=r.alpha?r.alpha:e.alpha(n),style:o(u)?Yi[u]:u}}return u=e.style(n),{width:e.width(n),color:e.color(n),alpha:e.alpha(n),style:o(u)?Yi[u]:u}},t.prototype.bind=function(t,n){var i=this.Ph;if(!i){var r=this.toStroke(t,n);(i=this.Ph=new Es([],[],r.width,r.style)).stroke.color=r.color,i.stroke.alpha=r.alpha}this.Th=t,i.attach(t.plotArea.container,n),this.Lh=NaN,this.Wh=NaN,this._h=NaN},t.prototype.unbind=function(){var t=this.Ph;t&&t.detach(),this.Th=void 0},Object.defineProperty(t.prototype,"points",{get:function(){return this.se},set:function(t){this.se=t,this.Rh+=1},enumerable:!0,configurable:!0}),t.prototype.toDirty=function(){this.Rh+=1},t.prototype.update=function(){var t=this.Ph,n=this.Th;if(t&&n){var i=n.plotArea.coordinate,r=i.x.get(this.Ah),e=i.y.get(this.Bh);if(r&&e){var u=r.id,s=e.id,h=this.Rh,o=h!==this.Lh,c=u!==this.Wh,f=s!==this._h;(o||c||f)&&(this.Lh=h,this.Wh=u,this._h=s,this.updateLine(t,r,e))}}},t.prototype.updateLine=function(t,n,i){for(var r=t.points.values,u=t.points.segments,s=r.length,h=u.length,o=0,c=0,f=this.se,a=0,l=f.length;a<l;a+=2){var v=f[a],b=f[a+1];if(null!=v&&null!=b){var d=n.map(v),g=i.map(b);o<s?(r[o]=d,r[o+1]=g):r.push(d,g),o+=2}else{var m=(a>>1)-c;c<h?u[c]=m:u.push(m),c+=1}}r.length!==o&&(r.length=o),u.length!==c&&(u.length=c),t.points.set(r,u),e.update()},Object.defineProperty(t.prototype,"domain",{get:function(){return this.updateRegion(),this.Eh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this.updateRegion(),this.kh},enumerable:!0,configurable:!0}),t.prototype.updateRegion=function(){var t=this.Rh;if(this.Fh!==t){this.Fh=t;var n=this.se,i=this.Eh,r=this.kh;if(i.clear(),r.clear(),null!=n)for(var e=0,u=n.length;e<u;e+=2){var s=n[e];null!=s&&i.add(s,s);var h=n[e+1];null!=h&&r.add(h,h)}}},t.prototype.destroy=function(){var t=this.Ph;t&&(this.Ph=void 0,t.detach(),t.destroy()),this.Th=void 0,this.se.length=0,this.Rh=0,this.Lh=NaN,this.Wh=NaN,this._h=NaN},t}(),Zv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=new Yv(n&&n.plotArea);this.Sh=i,this.addChild(i.container),this.addChild(i.axis.container)},Object.defineProperty(n.prototype,"plotArea",{get:function(){return this.Sh},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DChart"},n.prototype.destroy=function(){this._destroyed||(this.Sh.destroy(),t.prototype.destroy.call(this))},n}($),qv=function(){function t(){}return t.prototype.redo=function(){throw new Error("Method not implemented.")},t.prototype.undo=function(){throw new Error("Method not implemented.")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return S.UNSTORABLE|S.CLEAR},t}(),Qv=function(){function t(){}return t.prototype.execute=function(){return W.getDocumentController().delete()},t.prototype.redo=function(){throw new Error("Method not implemented.")},t.prototype.undo=function(){throw new Error("Method not implemented.")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return S.UNSTORABLE|S.CLEAR},t}(),$v=function(){function t(t){this.Ot=t}return t.prototype.execute=function(){return W.getDocumentController().saveAs(this.Ot)},t.prototype.redo=function(){return!0},t.prototype.undo=function(){return!0},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return S.UNSTORABLE},t}(),tb=function(){function t(){}return t.prototype.execute=function(){return W.getDocumentController().save()},t.prototype.redo=function(){return!0},t.prototype.undo=function(){return!0},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return S.UNSTORABLE},t}(),nb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.setState(v.UNFOCUSABLE,!0)},n.prototype.initReflowable=function(){},n.prototype.getType=function(){return"DContent"},n}($),ib=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),Object.defineProperty(n.prototype,"lon",{get:function(){return this.x},set:function(t){this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lat",{get:function(){return this.y},set:function(t){this.y=t},enumerable:!0,configurable:!0}),n.prototype.toObject=function(){return{lon:this.x,lat:this.y}},n}(t.ObservablePoint),rb=function(){function t(t,n,i,r,e,u){this.Uh=t,!0===n||!1===n?(this.Wr=n,this.Pr=new ib(t,null,i,r),this.Ur=new ib(t,null,e,u)):null!=n?(this.Wr=n.enable,this.Pr=new ib(t,null,n.from.lon,n.from.lat),this.Ur=new ib(t,null,n.to.lon,n.to.lat)):(this.Wr=!1,this.Pr=new ib(t,null,-180,85.05112877980659),this.Ur=new ib(t,null,180,-85.05112877980659))}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.Wr},set:function(t){this.Wr!==t&&(this.Wr=t,this.Uh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.Pr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.Ur},enumerable:!0,configurable:!0}),t.prototype.serialize=function(){return{enable:this.Wr,from:this.Pr.toObject(),to:this.Ur.toObject()}},t}(),eb=function(){function t(t,n){var i=this;this.Qt=t,this.zh=n&&n.factory,this.at=new rb((function(){i.onMappingChange()}),n&&n.mapping)}return t.prototype.init=function(){this.onMappingChange()},t.prototype.onMappingChange=function(){var t=this.zh;if(t){var n,i=this.at;i.enable?(n=this.Gh)?n.mapping=i:this.Gh=t(this.Qt).fit():(n=this.Gh)&&(this.Gh=void 0,n.destroy())}},Object.defineProperty(t.prototype,"pyramid",{get:function(){return this.Gh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"factory",{get:function(){return this.zh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapping",{get:function(){return this.at},enumerable:!0,configurable:!0}),t.prototype.serialize=function(){return{mapping:this.at.serialize()}},t.prototype.destroy=function(){var t=this.Gh;null!=t&&(this.Gh=void 0,t.destroy())},t}(),ub=function(t){function n(n){var i=t.call(this)||this;return i.name=n,i.interactive=!1,i.reference=0,i}return i(n,t),n.prototype.destroy=function(){if(!this._destroyed){for(var n=this.children,i=n.length-1;0<=i;--i)n[i].destroy();n.length=0,t.prototype.destroy.call(this)}},n.prototype.serialize=function(t,n,i){for(var r=this.children,e=0,u=r.length;e<u;++e){var s=r[e].serialize(n);s[16]=t,i.push(s)}return[this.name||""]},n}(fc),sb=function(t){function n(){var n=t.call(this)||this;return n.Us=null,n.interactive=!1,n.interactiveChildren=!1,n}return i(n,t),Object.defineProperty(n.prototype,"active",{get:function(){return this.Us},set:function(t){this.Us!==t&&(null==t||0<=this.children.indexOf(t))&&(this.Us=t,this.emit("change",this))},enumerable:!0,configurable:!0}),n.prototype.create=function(t,n){var i=new ub(t);return this.attach(i,n),i},n.prototype.attach=function(t,n){this.addChild(t),!0===n&&(this.Us=t),this.emit("change",this),e.update()},n.prototype.attachAt=function(t,n,i){this.addChildAt(t,n),!0===i&&(this.Us=t),this.emit("change",this),e.update()},n.prototype.detach=function(t,n){var i=this.children,r=i.indexOf(t);0<=r&&(this.Us=n,i.splice(r,1),t.parent=void 0,this.emit("change",this),e.update())},n.prototype.delete=function(t,n){var i=this.children,r=i.indexOf(t);return 0<=r&&(i.splice(r,1),t.parent=void 0,this.Us===t&&(!0===n?r<i.length?this.Us=i[r]:0<i.length?this.Us=i[r-1]:this.Us=null:this.Us=null),this.emit("change",this),e.update()),r},n.prototype.get=function(t){var n=this.children[t];return null!=n?n:null},n.prototype.clear=function(){var t=this.children;if(0<t.length){for(var n=t.length-1;0<=n;--n){var i=t[n];i.parent=null,i.destroy()}t.length=0,this.emit("change",this),e.update()}},n.prototype.destroy=function(){this._destroyed||(this.clear(),t.prototype.destroy.call(this))},n.prototype.size=function(){return this.children.length},n.prototype.serialize=function(t,n){for(var i=[],r=this.children,e=0,u=r.length;e<u;++e){var s=r[e];i.push(s.serialize(e,t,n))}return i},n}(t.Container),hb=function(t){function n(n){var i=t.call(this,n)||this,r=new sb;return i.Hh=r,i.addChild(r),(i.Vh=new eb(i,n&&n.tile)).init(),i}return i(n,t),Object.defineProperty(n.prototype,"tile",{get:function(){return this.Vh},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layer",{get:function(){return this.Hh},enumerable:!0,configurable:!0}),n.prototype.initialize=function(t){},n.prototype.destroy=function(){this._destroyed||(this.Vh.destroy(),this.Hh.destroy(),t.prototype.destroy.call(this))},n.prototype.hitTest=function(t,n){for(var i=this.Hh.children,r=i.length-1;0<=r;--r){var e=i[r].hitTest(t,n);if(null!=e)return e}return null},n.prototype.getType=function(){return"DDiagramCanvasBase"},n}(xv),ob=function(n){function r(i){var r=n.call(this,i)||this;r.shadow=r.theme.newShadowWeak();var u=new t.Graphics;u.visible=!1,r.addChildAt(u,r.children.length-1),r.Xh=u;var s=i.snapper;return s.target.on("change",(function(){r.toDirty(),e.update()})),r.Yh=s,r}return i(r,n),r.prototype.serialize=function(t){var n=new vc,i=[],r=this.background;return{version:1,id:t,name:this.name,width:this.width,height:this.height,background:{color:r.getColor(0),alpha:r.getAlpha(0)},tile:this.Vh.serialize(),resources:n.serialize(),layers:this.Hh.serialize(n,i),items:i,snap:this.Yh.serialize()}},r.prototype.onReflow=function(){n.prototype.onReflow.call(this);var t=this.Xh,i=this.Yh.target;if(i.visible){var r=this.width+.5,e=this.height+.5,u=i.values;t.clear(),t.lineStyle(0,0,0,0),t.beginFill(2000880,.5);for(var s=0,h=u.length;s<h;++s){var o=u[s];o.type===yf.VERTICAL?t.drawRect(o.position,0,1,e):t.drawRect(0,o.position,r,1)}t.endFill(),t.visible=!0}else t.visible=!1},r.prototype.getType=function(){return"DDiagramCanvasEditor"},r}(hb),cb=function(n){function r(i){var r=n.call(this,i)||this;return r.tags={},r.interactives=[],r.actionables=[],r.ids={},r.He=new t.Point,r.Kh=null,r}return i(r,n),r.prototype.initialize=function(){for(var t=Date.now(),n=this.tags,i=this.interactives,r=this.actionables,e=this.ids,u=this.Hh.children,s=0,h=u.length;s<h;++s)this.initializeShapes(u[s].children,n,i,r,e);for(s=0,h=u.length;s<h;++s)this.updateShapes(u[s].children,t);this.initializeFocus()},r.prototype.initializeFocus=function(){var t=W.getFocusController(),n=t.findFocusable(this,!1,!0,!0);null!=n&&t.setFocused(n,!0,!0)},r.prototype.initializeShapes=function(t,n,i,r,e){for(var u=function(u,h){for(var o=t[u],c=o.tag,f=0,a=c.size();f<a;++f){var l=c.get(f);if(null!=l){var v=l.id;if(0<v.length){var b=n[v];null==b&&(b=[],n[v]=b),b.push(l)}}}var d=o.id;if(0<d.length){var g=e[d];null==g?e[d]=[o]:g.push(o)}(o.interactive||0<o.cursor.length||null!=o.runtime&&o.runtime.interactive)&&i.push(o);var m=o.runtime;null!=m&&0<m.actions.length&&r.push(o);var p=o.shortcut;null!=p&&R.on(s,p,(function(t){o.onShortcut(t)}));var w=o.children;0<w.length&&s.initializeShapes(w,n,i,r,e)},s=this,h=0,o=t.length;h<o;++h)u(h)},r.prototype.updateShapes=function(t,n){for(var i=0,r=t.length;i<r;++i)t[i].update(n)},r.prototype.onShapeMove=function(t){for(var n=t.data.global,i=this.He,r=this.interactives,u=null,s=r.length-1;0<=s;--s){var h=r[s];if(h.visible){var o=h.toLocal(n,void 0,i);if(null!=h.contains(o)){u=h;break}}}var c=e.getInstance();if(null!=u){if(0<u.cursor.length&&c.view.style.cursor!==u.cursor&&(c.view.style.cursor=u.cursor),u===(b=this.Kh))null!=(v=b.runtime)&&v.onPointerMove(b,t);else{if(this.Kh=u,null!=b){var f=b.runtime;null!=f&&f.onPointerOut(b,t);for(var a=b.parent;a instanceof fr&&a!==u;)null!=(d=b.runtime)&&d.onPointerOut(a,t),a=a.parent}null!=(v=u.runtime)&&v.onPointerOver(u,t),e.getInstance().view.title=u.title||"";for(var l=u.parent;l instanceof fr;)null!=(d=l.runtime)&&d.onPointerOver(l,t),l=l.parent}return!0}"auto"!==c.view.style.cursor&&(c.view.style.cursor="auto");var v,b=this.Kh;if(this.Kh=null,null!=b)for(null!=(v=b.runtime)&&v.onPointerOut(b,t),a=b.parent;a instanceof fr;){var d;null!=(d=a.runtime)&&d.onPointerOut(a,t),a=a.parent}return e.getInstance().view.title="",!1},r.prototype.onShapeDown=function(t){for(var n=this.interactives,i=t.data.global,r=this.He,e=n.length-1;0<=e;--e){var u=n[e];if(u.visible){var s=u.toLocal(i,void 0,r);if(null!=u.contains(s)){var h=u.runtime;return null!=h&&h.onPointerDown(u,t),!0}}}return!1},r.prototype.onShapeUp=function(t){for(var n=this.interactives,i=t.data.global,r=this.He,e=n.length-1;0<=e;--e){var u=n[e];if(u.visible){var s=u.toLocal(i,void 0,r);if(null!=u.contains(s)){var h=u.runtime;return null!=h&&h.onPointerUp(u,t),!0}}}return!1},r.prototype.onShapeClick=function(t){for(var n=this.interactives,i=t.data.global,r=this.He,e=n.length-1;0<=e;--e){var u=n[e];if(u.visible){var s=u.toLocal(i,void 0,r);if(null!=u.contains(s)){for(var h=u;;){var o=h.runtime;null!=o&&o.onPointerClick(h,t);var c=h.parent;if(!(c instanceof fr))break;h=c}return!0}}}return!1},r.prototype.getType=function(){return"DDiagramCanvas"},r}(hb),fb=function(){function t(){}return t.toSerialized=function(t){var n=JSON.parse(t.data);return n.id=t.id,n},t.newLayer=function(t,n){for(var i=t.layers,r=0,e=i.length;r<e;++r)n.create(i[r][0]||"");0<n.size()&&(n.active=n.children[0]);var u=t.resources,s=t.items,h=Bu.deserializeAll(s,u);return null!=h?h.then((function(t){for(var i=n.children,r=0,e=t.length;r<e;++r){var u=s[r],h=t[r],o=i[u[16]];null!=o&&h.attach(o)}return t})):Promise.resolve([])},t.applyBackground=function(t,n,i){var r=t.background,u=e.getInstance().renderer,s=r&&null!=r.color?r.color:16777215,h=r&&null!=r.alpha?r.alpha:1;rr.IS_EDIT_MODE?(n.background.color=s,n.background.alpha=h):(i.background.color=s,u.backgroundColor=s,i.background.alpha=h)},t}(),ab=function(t){function n(n){var i=t.call(this,n)||this;return i.Jh=null,i.Zh=n&&n.tile,i}return i(n,t),n.prototype.set=function(t){var n=this.Jh;n!==t&&(n&&(this.Jh=null,this.onUnset()),this.Jh=t,t&&this.onSet(t))},n.prototype.onSet=function(t){var n=this,i=this.newCanvas(t);fb.newLayer(t,i.layer).then((function(t){n.initialize(t),i.initialize(t),e.update()})),fb.applyBackground(t,i,this),this.canvas=i},n.prototype.initialize=function(t){},n.prototype.onUnset=function(){null!=this.canvas&&(this.canvas=null)},n.prototype.get=function(){return this.Jh},Object.defineProperty(n.prototype,"layer",{get:function(){var t=this.canvas;return null!=t?t.layer.active:null},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDiagramBase"},n}(yv),lb=function(t){function n(n){var i=t.call(this,n)||this;return i.qh=!1,i.Qh=n.controller,i.qh=!1,W.getCommandController().on("dirty",(function(){!0!==i.qh&&(i.qh=!0,i.emit("change",i))})),i.snapper=new ol(i),i}return i(n,t),n.prototype.newCanvas=function(t){return new ob({name:t.name,width:t.width,height:t.height,snapper:this.snapper,tile:{factory:this.Zh,mapping:t.tile&&t.tile.mapping}})},n.prototype.serialize=function(){var t=this.canvas,n=this.Jh;return null!=t&&null!=n?t.serialize(n.id):null},n.prototype.save=function(){var t=this,n=this.serialize();return null==n||this.controller.save({version:n.version,id:n.id,name:n.name,data:JSON.stringify(n)}).then((function(i){t.qh=!1,n.id=i,t.Jh=n,t.emit("change",t),t.emit("success","save",t)}),(function(n){t.emit("fail","save",t)}))},n.prototype.saveAs=function(t){var n=this,i=this.serialize();return null==i||(i.id=void 0,i.name=t,this.controller.save({version:i.version,id:i.id,name:i.name,data:JSON.stringify(i)}).then((function(r){n.qh=!1,i.id=r,n.Jh=i;var e=n.canvas;null!=e&&(e.name=t),n.emit("change",n),n.emit("success","save-as",n)}),(function(t){n.emit("fail","save-as",n)})))},n.prototype.delete=function(){var t=this,n=this.Jh;return null!=n&&(null!=n.id?this.controller.delete(n.id).then((function(){t.set(null),t.emit("success","delete",t)}),(function(n){t.emit("fail","delete",t)})):(this.set(null),this.emit("success","delete",this),!0))},n.prototype.create=function(t,n,i){return this.set({version:1,id:void 0,name:t,width:n,height:i,resources:[],layers:[["Default layer"]],items:[],snap:void 0}),!0},n.prototype.onSet=function(n){t.prototype.onSet.call(this,n);var i=n.snap,r=this.snapper;null!=i?r.deserialize(i):r.reset(),this.qh=!1,this.emit("change",this)},n.prototype.onUnset=function(){t.prototype.onUnset.call(this),this.qh=!1,this.emit("change",this)},n.prototype.open=function(t){var n=this;return this.Qh.get(t).then((function(t){n.set(fb.toSerialized(t)),n.emit("success","open",n)}),(function(t){n.emit("fail","open",n)}))},n.prototype.close=function(){this.set(null)},n.prototype.isChanged=function(){return this.qh||this.isNew()},n.prototype.isNew=function(){var t=this.Jh;return null!=t&&null==t.id},n.prototype.getName=function(){var t=this.Jh;return null!=t?t.name:null},Object.defineProperty(n.prototype,"controller",{get:function(){return this.Qh},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDiagramEditor"},n}(ab),vb=function(t){function n(n){var i=t.call(this,n)||this;return i.on(Z.move,(function(t){if(Z.contains(i,t.target)){var n=i.canvas;null!=n&&n.onShapeMove(t)}})),i.on(Z.up,(function(t){if(Z.contains(i,t.target)){var n=i.canvas;null!=n&&n.onShapeUp(t)}})),i.on("click",(function(t){if(Z.contains(i,t.target)){var n=i.canvas;null!=n&&n.onShapeClick(t)}})),i}return i(n,t),n.prototype.initialize=function(t){for(var n={},i={},r=new Map,e=0,u=t.length;e<u;++e){for(var s=t[e],h=bc[s.type]||hr,o=s.runtime=new h(s),c=s.tag,f=0,a=c.size();f<a;++f)if(null!=(m=c.get(f))){var l=m.format,v=m.initial;if(l in n)m.formatter=n[l];else if(0<l.length)try{var b=Function("value","try {return ("+l+");} catch( e1 ) {try {return ("+(0<v.length?v:0)+");} catch( e2 ) {return 0;}}");n[l]=b,m.formatter=b}catch(t){}if(v in i)m.value=i[v];else if(0<v.length)try{m.value=i[v]=Function("try {return ("+v+");} catch( e ) {return 0;}")()}catch(t){}}var d=s.action.values,g=o.actions;for(f=0,a=d.length;f<a;++f){var m=d[f],p=r.get(m);null==p?null!=(p=m.toRuntime(s))&&(p instanceof Xe&&s.cursor.length<=0&&(s.cursor="pointer"),r.set(m,p),g.push(p),o.reset|=p.reset):(g.push(p),o.reset|=p.reset)}var w=s.children;0<w.length&&this.initialize(w)}},n.prototype.newCanvas=function(t){return new cb({name:t.name,width:t.width,height:t.height,background:{color:null},border:{color:null},tile:{factory:this.Zh,mapping:t.tile&&t.tile.mapping}})},n.prototype.onDown=function(n){var i=this.canvas;null!=i&&i.onShapeDown(n)||t.prototype.onDown.call(this,n)},n.prototype.getType=function(){return"DDiagram"},n}(ab),bb=function(t){function n(n){var i=t.call(this,n)||this;return i.setState(v.UNFOCUSABLE,!0),i}return i(n,t),n.prototype.getType=function(){return"DDialogConfirmMessage"},n}(mt),db=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onInit=function(n,i){t.prototype.onInit.call(this,n,i);var r=this.toMessage(this.theme,i);this.$h=r,n.addChild(r)},n.prototype.toMessage=function(t,n){if(n&&null!=n.message){var i=n.message;return o(i)||u(i)?this.newMessage(this.toMessageOptions(i)):i instanceof $?i:this.newMessage(this.toMessageOptionsMerged(i,t.getMessage()))}return this.newMessage(this.toMessageOptions(t.getMessage()))},n.prototype.toMessageOptionsMerged=function(t,n){return null==t.text&&(t.text={}),void 0===t.text.value&&(t.text.value=n),t},n.prototype.toMessageOptions=function(t){return{text:{value:t}}},n.prototype.newMessage=function(t){return new bb(t)},Object.defineProperty(n.prototype,"message",{get:function(){return this.$h},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDialogConfirm"},n}(Ml),gb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DDialogConfirmDelete"},n}(db),mb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DDialogConfirmDiscard"},n}(db),pb=function(t){function n(n){var i=t.call(this,n)||this,r=i.theme,e=new gi({parent:i,x:"padding",y:"padding",width:"padding",height:"auto"});return i.Zi=new Al({parent:e,width:"padding",height:"auto",input:{weight:1,on:{enter:function(){i.close(),i.onOk()}}},label:{width:r.getLabelWidth(),text:{value:null!=n&&null!=n.label?n.label:r.getLabel()}},space:{width:r.getLabelWidth()}}),new Sl({parent:e,width:"padding",height:"auto",padding:{top:i.padding.getBottom()},children:[new si({weight:1}),new Ol({text:{value:null!=n&&null!=n.ok?n.ok:r.getOk()},on:{active:function(){i.close(),i.onOk()}}}),new pl({text:{value:null!=n&&null!=n.cancel?n.cancel:r.getCancel()},on:{active:function(){i.close(),i.onCancel()}}}),new si({weight:1})]}),i}return i(n,t),Object.defineProperty(n.prototype,"input",{get:function(){return this.Zi.input},enumerable:!0,configurable:!0}),n.prototype.onOk=function(){this.emit("ok",this.Zi.input.value,this)},n.prototype.onCancel=function(){this.emit("cancel",this)},n.prototype.getType=function(){return"DDialogInputText"},n}(Mh),wb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DDialogMessage"},n}(db),Db=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DDialogProcessingMessage"},n}(bb),Tb=function(t){function n(n){var i=t.call(this,n)||this;return i.no=!0,i.di=0,i.io=n&&null!=n.interval?n.interval:i.theme.getInterval(),i}return i(n,t),n.prototype.newMessage=function(t){return new Db(t)},n.prototype.onOpen=function(){this.no=!1,this.di=Date.now();var n=this.ro;null!=n&&clearTimeout(n),this.$h.setStates(v.NONE,v.SUCCEEDED|v.FAILED);var i=this.mu;null!=i&&i.setDisabled(!0),t.prototype.onOpen.call(this)},n.prototype.onDone=function(){var t=this.mu;null!=t?t.setDisabled(!1):this.close()},n.prototype.onResolved=function(t){null!=t&&(this.$h.text=t),this.$h.setStates(v.SUCCEEDED,v.FAILED),this.onDone()},n.prototype.onRejected=function(t){null!=t&&(this.$h.text=t),this.$h.setStates(v.FAILED,v.SUCCEEDED),this.onDone()},n.prototype.resolve=function(t){var n=this;if(!this.no){this.no=!0;var i=Date.now()-this.di,r=this.io-i;0<r?this.ro=window.setTimeout((function(){n.ro=void 0,n.onResolved(t)}),r):this.onResolved(t)}},n.prototype.reject=function(t){var n=this;if(!this.no){this.no=!0;var i=Date.now()-this.di,r=this.io-i;0<r?this.ro=window.setTimeout((function(){n.ro=void 0,n.onRejected(t)}),r):this.onRejected(t)}},n.prototype.onCloseOn=function(){this.no&&t.prototype.onCloseOn.call(this)},n.prototype.getType=function(){return"DDialogProcessing"},n}(db),Ob=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onOpen=function(){var n=W.getDocumentController().getName();null!=n&&(this.Zi.input.value=n),t.prototype.onOpen.call(this)},n.prototype.onOk=function(){t.prototype.onOk.call(this);var n=this.Zi.input.value;W.getCommandController().push(new $v(n))},n.prototype.getType=function(){return"DDialogSaveAs"},n}(pb),Sb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DDialogSelectListItem"},n}(pt);!function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULTIPLE=2]="MULTIPLE"}(Kv||(Kv={}));var Mb=function(t){function n(n,i){var r=t.call(this)||this;r.eo=n,r.R=!1,r.U=[],r.uo=i&&null!=i.mode?i.mode:Kv.SINGLE;var e=i&&i.on;if(e)for(var u in e)r.on(u,e[u]);return r}return i(n,t),n.prototype.toDirty=function(){this.R=!0},n.prototype.update=function(){if(this.R){this.R=!1;var t=this.U;t.length=0;for(var n=this.eo.children,i=0,r=n.length;i<r;++i){var e=n[i];e instanceof $&&e.isActive()&&t.push(i)}}},n.prototype.size=function(){return this.update(),this.U.length},n.prototype.isEmpty=function(){return this.size()<=0},n.prototype.first=function(){return this.get(0)},n.prototype.get=function(t){this.update();var n=this.U;if(0<=t&&t<n.length){var i=this.eo.children[n[t]];if(null!=i)return i}return null},n.prototype.getIndex=function(t){this.update();var n=this.U;return 0<=t&&t<n.length?n[t]:null},n.prototype.clear=function(){this.update();var t=this.U;if(0<t.length){for(var n=this.eo.children,i=0,r=t.length;i<r;++i){var e=n[t[i]];e instanceof $&&e.setActive(!1)}t.length=0,this.emit("change",this)}},n.prototype.add=function(t){var n=this.uo,i=this.eo;if(n===Kv.SINGLE){if(!t.isActive()){this.update();for(var r=this.U,e=i.children,u=0,s=r.length;u<s;++u){var h=e[r[u]];h instanceof $&&h.setActive(!1)}r.length=0,r.push(i.getChildIndex(t)),t.setActive(!0),this.emit("change",this)}}else if(n===Kv.MULTIPLE&&!t.isActive())if(this.R)t.setActive(!0),this.emit("change",this);else{r=this.U;var o=i.getChildIndex(t);for(u=0,s=r.length;u<s;++u){var c=r[u];if(o===c)return void t.setActive(!0);if(o<c)return r.splice(u,0,o),t.setActive(!0),void this.emit("change",this)}r.push(o),t.setActive(!0),this.emit("change",this)}},n.prototype.remove=function(t){if(!t.isActive())if(this.R)t.setActive(!1),this.emit("change",this);else for(var n=this.U,i=this.eo.getChildIndex(t),r=0,e=n.length;r<e;++r)if(i===n[r])return n.splice(r,1),t.setActive(!1),void this.emit("change",this)},n}(t.utils.EventEmitter),Eb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.so=0,this.ho=1;var i=this.oo=this.createThumb(null!=n?n.thumb:void 0);this.addChild(i),this.setState(v.UNFOCUSABLE,!0)},Object.defineProperty(n.prototype,"thumb",{get:function(){return this.oo},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DScrollBar"},n.prototype.setRegion=function(t,n,i){i<1?(t=0,n=1):(t=Math.max(0,Math.min(1,t/i)),n=Math.max(t,Math.min(1,n/i))),this.so===t&&this.ho===n||(this.so=t,this.ho=n,this.onRegionChange())},n.prototype.isRegionVisible=function(){return 0<this.so||this.ho<1},n.prototype.onResize=function(n,i,r,e){t.prototype.onResize.call(this,n,i,r,e),this.onRegionChange()},n.prototype.onRegionChange=function(){},n.prototype.getRegionStart=function(){return this.so},n.prototype.getRegionEnd=function(){return this.ho},n}($),kb=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(i){var r=this;n.prototype.init.call(this,i),this.setState(v.UNFOCUSABLE,!0);var e=new t.Point;this.Xs=new Bn({target:this,easing:!1,on:{start:function(){e.copyFrom(r.position)},move:function(t,n){e.set(e.x+t,e.y+n),r.onDragMove(e.x,e.y)}}})},r.prototype.getMinimumSize=function(){return this.theme.getMinimumSize()},r.prototype.getType=function(){return"DScrollBarThumb"},r}($),Ib=function(t){function n(n){var i=t.call(this)||this;return n.appendRenderable(i,!0),n.addReflowable(i),i}return i(n,t),n.prototype.onReflow=function(t,n,i){var r=t.state;this.clear();var e=t.background,u=e.getColor(r),s=e.getAlpha(r);null!=u?(this.beginFill(u,s),this.lineStyle(0,0,0,0),this.drawRect(0,.5*i-1,n,2),this.endFill(),this.visible=!0):this.visible=!1},n}(t.Graphics),Nb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onDragMove=function(t,n){this.emit("regionmove",t,this)},n.prototype.initReflowable=function(){new Ib(this)},n}(kb),yb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.on(Z.down,(function(t){if(t.target===i){var n=i.width;if(0<n){var r=i.ho-i.so,e=t.data.getLocalPosition(i),u=Math.min(1-r,Math.max(0,e.x/n-.5*r));i.so!==u&&i.emit("regionmove",u,i)}}})),this.oo.on("regionmove",(function(t){var n=i.width;if(0<n){var r=i.ho-i.so,e=Math.min(1-r,Math.max(0,t/n));i.so!==e&&i.emit("regionmove",e,i)}}))},n.prototype.createThumb=function(t){return new Nb(t)},n.prototype.onRegionChange=function(){var n=this.oo,i=this.width,r=this.height,e=Math.min(.5*i,n.getMinimumSize()),u=i-e,s=u*this.so,h=u*this.ho+e-s;n.position.set(s,0),n.resize(h,r),t.prototype.onRegionChange.call(this)},n}(Eb),xb=function(t){function n(n){var i=t.call(this)||this;return n.appendRenderable(i,!0),n.addReflowable(i),i}return i(n,t),n.prototype.onReflow=function(t,n,i){var r=t.state;this.clear();var e=t.background,u=e.getColor(r),s=e.getAlpha(r);null!=u?(this.beginFill(u,s),this.lineStyle(0,0,0,0),this.drawRect(.5*n-1,0,2,i),this.endFill(),this.visible=!0):this.visible=!1},n}(t.Graphics),Cb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.onDragMove=function(t,n){this.emit("regionmove",n,this)},n.prototype.initReflowable=function(){new xb(this)},n}(kb),jb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.on(Z.down,(function(t){if(t.target===i){var n=i.height;if(0<n){var r=i.ho-i.so,e=t.data.getLocalPosition(i),u=Math.min(1-r,Math.max(0,e.y/n-.5*r));i.so!==u&&i.emit("regionmove",u,i)}t.stopPropagation()}})),this.oo.on("regionmove",(function(t){var n=i.height;if(0<n){var r=i.ho-i.so,e=Math.min(1-r,Math.max(0,t/n));i.so!==e&&i.emit("regionmove",e,i)}}))},n.prototype.createThumb=function(t){return new Cb(t)},n.prototype.onRegionChange=function(){var n=this.oo,i=this.width,r=this.height,e=Math.min(.5*r,n.getMinimumSize()),u=r-e,s=u*this.so,h=u*this.ho+e-s;n.position.set(0,s),n.resize(i,h),t.prototype.onRegionChange.call(this)},n}(Eb),Ab=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(t){n.prototype.init.call(this,t),this.yn=null;var i=this.theme,r=this.eo=this.toContent(t);(function(t,n){return n&&null!=n.mask?n.mask:t.isOverflowMaskEnabled()})(i,t)&&(this.mask=this.getOrCreateOverflowMask()),this.addChild(r),this.initScrollBar(r,i,t),this.initDrag(r,i,t)},r.prototype.initDrag=function(n,i,r){var e=this,u=r&&r.drag&&null!=r.drag.mode?o(r.drag.mode)?Io[r.drag.mode]:r.drag.mode:i.getDragMode();if(u===Io.ON||u===Io.TOUCH){var s=new t.Point;this.Xs=new Bn({target:this,touch:u===Io.TOUCH,on:{start:function(){s.copyFrom(n.position)},move:function(t,i){s.set(s.x+t,s.y+i),n.position.set(e.toContentX(n,s.x),e.toContentY(n,s.y))}}})}},r.prototype.onRegionMoveX=function(t,n){var i=this.Xs;null!=i&&i.stop(),t.x=-t.width*n},r.prototype.onRegionMoveY=function(t,n){var i=this.Xs;null!=i&&i.stop(),t.y=-t.height*n},r.prototype.initScrollBar=function(t,n,i){var r=this,e=this.co=new jb(function(t){return t&&t.bar&&t.bar.vertical}(i));e.on("regionmove",(function(n){r.onRegionMoveY(t,n)})),this.addChild(e);var u=this.fo=new yb(function(t){return t&&t.bar&&t.bar.horizontal}(i));u.on("regionmove",(function(n){r.onRegionMoveX(t,n)})),this.addChild(u),t.on("move",(function(){r.onContentChanged()})),t.on("resize",(function(){r.onContentChanged()})),this.updateScrollBar()},r.prototype.getType=function(){return"DPane"},Object.defineProperty(r.prototype,"content",{get:function(){return this.eo},enumerable:!0,configurable:!0}),r.prototype.toContent=function(t){if(t&&t.content){var n=t.content;return n instanceof $?n:this.newContent(n)}return this.newContent()},r.prototype.newContent=function(t){return new nb(t)},r.prototype.getOrCreateOverflowMask=function(){return null==this.yn&&(this.yn=new Ev(this),this.addReflowable(this.yn),this.toDirty()),this.yn},r.prototype.onWheel=function(t,n,i){var r=this.eo,e=this.getWheelContentX(r,n.deltaX*n.lowest),u=this.getWheelContentY(r,n.deltaY*n.lowest);if(r.x!==e||r.y!==u){var s=this.Xs;return null!=s&&s.stop(),r.position.set(e,u),!0}return!1},r.prototype.getWheelContentX=function(t,n){if(0<n||n<0){var i=this.theme.getWheelSpeed();return this.toContentX(t,t.x-n*i)}return t.x},r.prototype.getWheelContentY=function(t,n){if(0<n||n<0){var i=this.theme.getWheelSpeed();return this.toContentY(t,t.y+n*i)}return t.y},r.prototype.toContentX=function(t,n){return Math.min(0,Math.max(this.width-t.width,n))},r.prototype.toContentY=function(t,n){return Math.min(0,Math.max(this.height-t.height,n))},r.prototype.isRefitable=function(t){return n.prototype.isRefitable.call(this,t)&&!(t instanceof Eb)},r.prototype.onResize=function(t,i,r,e){n.prototype.onResize.call(this,t,i,r,e),this.updateScrollBar()},r.prototype.onContentChanged=function(){this.updateScrollBar()},r.prototype.updateScrollBar=function(){var t=this.co,n=this.fo;null!=t&&null!=n&&(this.updateScrollBarRegions(t,n),this.updateScrollBarVisibilities(t,n),this.updateScrollBarPositions(t,n))},r.prototype.updateScrollBarPositions=function(t,n){var i=this.width,r=this.height,e=t.width;t.position.set(i-e,.5*e),t.height=r-e;var u=n.height;n.position.set(.5*u,r-u),n.width=i-u},r.prototype.updateScrollBarRegions=function(t,n){var i=this.eo,r=-i.x,e=-i.y;n.setRegion(r,r+this.width,i.width),t.setRegion(e,e+this.height,i.height)},r.prototype.updateScrollBarVisibilities=function(t,n){var i=this.updateScrollBarVisibility(n),r=this.updateScrollBarVisibility(t);if(i||r){var u,s=this.yn;null!=s&&(n.visible||t.visible?(u=this.eo).mask!==s&&(u.mask=s):(u=this.eo).mask&&(u.mask=null)),e.update()}},r.prototype.updateScrollBarVisibility=function(t){var n=t.isRegionVisible();return t.visible!==n&&(t.visible=n,!0)},r.prototype.onChildFocused=function(t){var i=r.WORK_ON_FOCUSED,e=this.content,u=e.x,s=e.y,h=e.width,o=e.height;i.set(0,0),t.toGlobal(i,i,!1),e.toLocal(i,void 0,i,!1);var c=u+Math.min(h,Math.max(0,i.x)),f=s+Math.min(o,Math.max(0,i.y));i.set(t.width,t.height),t.toGlobal(i,i,!0),e.toLocal(i,void 0,i,!0);var a=u+Math.min(h,Math.max(0,i.x)),l=s+Math.min(o,Math.max(0,i.y)),v=this.width,b=null;c<0?a<=v&&(b=Math.max(v-h,Math.min(0,u+(0-c)))):v<a&&(b=Math.max(v-h,Math.min(0,u-(a-v))));var d=this.height,g=null;f<0?l<=d&&(g=Math.max(d-o,Math.min(0,s+(0-f)))):d<l&&(g=Math.max(d-o,Math.min(0,s-(l-d)))),null!=b?null!=g?e.position.set(b,g):e.position.x=b:null!=g&&(e.position.y=g),n.prototype.onChildFocused.call(this,t)},r.prototype.destroy=function(){var t=this.yn;null!=t&&(this.yn=null,t.destroy()),this.mask=null,n.prototype.destroy.call(this)},r.WORK_ON_FOCUSED=new t.Point,r}($),Bb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n);var r=n&&n.selection;this.ao=r instanceof Mb?r:this.newSelection(r),Z.onClick(this,(function(t){var n=i.findItem(t.target);n instanceof $&&n.isActionable()&&i.selection.add(n)}))},n.prototype.newSelection=function(t){return new Mb(this.eo,t)},n.prototype.onChildrenDirty=function(){var n=this.ao;null!=n&&n.toDirty(),t.prototype.onChildrenDirty.call(this)},Object.defineProperty(n.prototype,"selection",{get:function(){return this.ao},enumerable:!0,configurable:!0}),n.prototype.findItem=function(t){for(var n=this.content,i=t;null!=i;){if(i.parent===n)return i;i=i.parent}return null},n.prototype.onRefit=function(){t.prototype.onRefit.call(this),this.updateChildPosition(),this.updateChildVisibility()},n.prototype.updateChildPosition=function(){for(var t=this.content,n=t.children,i=0,r=0,e=n.length;r<e;++r){var u=n[r];u instanceof $&&(u.y=i,i+=u.height)}var s=Math.min(0,-i+this.height);t.y<s&&(t.y=s),t.height=i},n.prototype.updateChildVisibility=function(){for(var t=this.content,n=t.children,i=-t.y,r=i+this.height,e=0,u=n.length;e<u;++e){var s=n[e];if(s instanceof $){var h=s.y;s.visible=i<=h+s.height&&h<=r}}},n.prototype.onContentChanged=function(){t.prototype.onContentChanged.call(this),this.updateChildVisibility()},n.prototype.getType=function(){return"DList"},n}(Ab),Rb=function(t){function n(n){var i=t.call(this,n)||this;return i.setState(v.UNFOCUSABLE,!0),i}return i(n,t),n.prototype.getType=function(){return"DDialogSelectList"},n}(Bb),Lb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.visible=!1},n.prototype.getType=function(){return"DNote"},n}(Nl),Wb={toLabel:function(t){return o(t)?t:a(t)?String(t):"name"in t?t.name:"label"in t?t.label:"id"in t?t.id:""}},_b=function(t){return(null!=t.converter?t.converter.toLabel:null)||Wb.toLabel},Fb=function(t,n,i){return null!=t?(null==t.parent&&(t.parent=n),null==t.text?t.text={value:i}:null==t.text.value&&(t.text.value=i),t):{parent:n,text:{value:i}}},Pb=function(t,n,i){return Fb(n.note&&n.note.noItems,i,t.getNoteNoItemsText())},Ub=function(t,n,i){return Fb(n.note&&n.note.searching,i,t.getNoteSearchingText())},zb=function(t){function n(n){var i=t.call(this,n)||this;i.Fn=null;var r=i.theme,e=i.Qh=n.controller,u=_b(n),s=new gi({parent:i,x:"padding",y:"padding",width:"padding",height:"auto"});i.Zi=new jl({parent:s,width:"padding"});var h=i.Mh=new Rb({parent:s,width:"padding",selection:{on:{change:function(t){var n=t.first();if(null!=n){var r=i.Fn=n.value;i.emit("select",r,i),i.close()}}}}}),o=new Lb(Pb(r,n,h));i.lo=o;var c=new Lb(Ub(r,n,h));i.vo=c,i.Zi.on("input",(function(t){e.search.create([t])})),e.search.on("success",(function(t,n){for(var r=h.content,e=r.children,s=e.length,o=n.length,c=Math.min(s,o),f=0,a=c;f<a;++f){var l=e[f],v=n[f];if(l instanceof pt)l.text=u(v),l.value=v;else{r.removeChildAt(f),l.destroy();var b=i.newItem(v,u(v));r.addChildAt(b,f)}}for(f=c,a=o;f<a;++f)v=n[f],b=i.newItem(v,u(v)),r.addChild(b);for(f=s-1;c<=f;--f)e[f].destroy()}));var f=new qn;return e.search.on("change",(function(){if(e.search.isDone()){var t=e.search.getResult();null!=t&&0<t.length?f.hide():f.show(o)}else f.show(c)})),i}return i(n,t),n.prototype.newItem=function(t,n){return new Sb({value:t,text:{value:n}})},Object.defineProperty(n.prototype,"value",{get:function(){return this.Fn},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDialogSelect"},n.prototype.onOpen=function(){t.prototype.onOpen.call(this),this.Mh.selection.clear(),this.Qh.search.create([this.Zi.value])},n.prototype.onClose=function(){t.prototype.onClose.call(this)},n.prototype.destroy=function(){this.Zi.destroy(),this.lo.destroy(),this.vo.destroy(),this.Mh.destroy(),t.prototype.destroy.call(this)},n}(Mh),Gb=function(){function t(t){this.bo=t,this.do=[]}return t.prototype.indexOf=function(t){return this.do.indexOf(t)},t.prototype.close=function(t){for(var n=this.do,i=Math.max(0,t),r=n.length-1;i<=r;--r)n[r].close()},t.prototype.add=function(t){this.do.push(t)},t.prototype.trim=function(t){this.close(this.indexOf(t)+1)},t.prototype.remove=function(t){var n=this.indexOf(t);0<=n&&(this.close(n+1),this.do.splice(n,1),0===n&&this.bo.focus())},t}(),Hb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.Se=function(){i.onPrerender()},null!=n?(this.l=null!=n.align?o(n.align)?ni[n.align]:n.align:ni.BOTTOM,this.mo=null!=n.fit&&n.fit,this.po=null!=n.sticky&&n.sticky):(this.l=ni.BOTTOM,this.mo=!1,this.po=!1),this.wo=!1,this.bo=null,this.visible=!1,this.$t=null,this.setState(v.FOCUS_ROOT,!0),On.apply(this,(function(){i.close()})),this.on("select",(function(){i.close()})),null!=n&&null!=n.items&&Ot.newItems(this,n.items,this.po)},n.prototype.findItem=function(t){for(var n=this.children,i=0,r=n.length;i<r;++i){var e=n[i];if(e instanceof wt&&e.value===t)return e}return null},n.prototype.getType=function(){return"DMenu"},n.prototype.getContext=function(){return this.$t},n.prototype.getCloseable=function(){return this},n.prototype.open=function(n,i,r){if(this.isHidden()){this.bo=n;for(var u=this.children,s=0,h=u.length;s<h;++s){var o=u[s];o instanceof $&&o.setState(v.FOCUSED|v.HOVERED,!1)}var c=e.getInstance(),f=c.renderer,a=this.Se;if(this.po?f.on("prerender",a):f.once("prerender",a),this.mo){var l=n.getBounds();null!=l&&(this.width=l.width)}this.wo=null!=r,r=r||new Gb(n),null!=i&&r.trim(i),r.add(this),this.$t=r,c.stage.addChild(this),this.focus(),t.prototype.show.call(this),this.emit("open",this)}return this},n.prototype.onPrerender=function(){var t=this.bo;if(null!=t){var n=t.getBounds();if(null!=n){this.mo&&(this.width=n.width);var i=this.theme,r=e.getInstance();Tn.attach(this,n,i.getOffsetX(),i.getOffsetY(),r.width,r.height,this.l)}}},n.prototype.close=function(){if(this.isShown()){var n=this.$t;null!=n&&n.remove(this);var i=this.parent;null!=i&&i.removeChild(this),e.getInstance().renderer.off("prerender",this.Se),this.bo=null,t.prototype.hide.call(this),this.emit("close",this)}return this},n.prototype.onKeyDown=function(n){if(R.isArrowUpKey(n)||R.isArrowDownKey(n)){var i=W.getFocusController(),r=i.getFocused();if(null!=r){var e=R.isArrowDownKey(n),u=i.findFocusable(r,!1,r.hasState(v.FOCUS_ROOT)||e,e);null!=u&&i.setFocused(u,!0,!0)}}return t.prototype.onKeyDown.call(this,n)},n.prototype.containsGlobalPoint=function(t){return!this.wo},n}(gi);Ot.setMenuCreator((function(t){return new Hb(t)}));var Vb,Xb=function(t){function n(n){var i=t.call(this,n)||this;return i.on("active",(function(){i.start()})),i}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.cr=this.toMenu(this.theme,n)},n.prototype.toMenu=function(t,n){var i=n&&n.menu;return i instanceof Hb?i:new Hb(this.toMenuOptions(t,i))},n.prototype.toMenuOptions=function(t,n){return null==(n=n||{}).fit&&(n.fit=!0),n},Object.defineProperty(n.prototype,"menu",{get:function(){return this.cr},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DDropdown"},n.prototype.start=function(){this.cr.open(this)},n.prototype.close=function(){this.cr.close()},n}(ml),Yb=function(t){function n(n){var i=t.call(this,n)||this;return i.on(Z.down,(function(){i.isActionable()&&i.onSelect()})),i}return i(n,t),n.prototype.onSelect=function(){this.emit("select",this)},n.prototype.onKeyDown=function(n){return this.isActionable()&&this.isFocused()&&R.isActivateKey(n)&&this.onSelect(),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DExpandableHeader"},n}(mt),Kb=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(t){var i=this;n.prototype.init.call(this,t);var r=this.theme,e=this.toHeader(r,t);this.br=e,e.on("select",(function(){i.toggle()})),this.addChild(e);var u=this.toBody(r,t);this.dr=u,this.addChild(u),this.isActive()?this.onActivated():this.onDeactivated()},r.prototype.toHeader=function(n,i){return i&&i.header?i.header instanceof t.DisplayObject?i.header:this.newHeader(n,i.header):this.newHeader(n)},r.prototype.newHeader=function(t,n){return new Yb(n)},r.prototype.toBody=function(t,n){return n.body},r.prototype.open=function(){this.setActive(!0)},r.prototype.close=function(){this.setActive(!1)},r.prototype.toggle=function(){this.setActive(!this.isActive())},r.prototype.onActivated=function(){var t=this.dr;t instanceof $?t.show():t.visible=!0},r.prototype.onDeactivated=function(){var t=this.dr;t instanceof $?t.hide():t.visible=!1},r.prototype.onStateChange=function(t,i){n.prototype.onStateChange.call(this,t,i),M.isActive(t)?M.isActive(i)||this.onActivated():M.isActive(i)&&this.onDeactivated()},r.prototype.getType=function(){return"DExpandable"},r}(gi),Jb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.createInput=function(t){return new Ql(t)},n}(xl),Zb=function(){function t(t){void 0===t&&(t=256),this.Do=t}return t.prototype.getTileSize=function(){return this.Do},t.prototype.lonLatToMeters=function(n,i){var r=t.CIRCUMFERENCE_HALF;return i.x=n.x*r/180,i.y=Math.log(Math.tan((90+n.y)*Math.PI/360))*r/Math.PI,i},t.prototype.metersToLonLat=function(n,i){var r=t.CIRCUMFERENCE_HALF;return i.x=n.x/r*180,i.y=360*Math.atan(Math.exp(n.y*Math.PI/r))/Math.PI-90,i},t.prototype.pixelsToMeters=function(n,i,r,e){var u=this.toResolution(i,r),s=t.CIRCUMFERENCE_HALF;return e.x=n.x*u-s,e.y=s-n.y*u,e},t.prototype.metersToPixels=function(n,i,r,e){var u=this.toResolution(i,r),s=t.CIRCUMFERENCE_HALF;return e.x=(n.x+s)/u,e.y=(s-n.y)/u,e},t.prototype.pixelsToTile=function(t,n,i){return i.x=Math.ceil(t.x/n)-1,i.y=Math.ceil(t.y/n)-1,i},t.prototype.metersToTile=function(n,i,r){var e=t.CIRCUMFERENCE_HALF,u=1<<i;return r.x=Math.ceil(.5*(n.x/e+1)*u)-1,r.y=Math.ceil(.5*(1-n.y/e)*u)-1,r},t.prototype.lonLatToTile=function(t,n,i){return this.metersToTile(this.lonLatToMeters(t,i),n,i)},t.prototype.lonLatToPixels=function(t,n,i,r){return this.metersToPixels(this.lonLatToMeters(t,r),n,i,r)},t.prototype.pixelsToLonLat=function(t,n,i,r){return this.metersToLonLat(this.pixelsToMeters(t,n,i,r),r)},t.prototype.tileToPixels=function(t,n,i){return i.x=t.x*n,i.y=t.y*n,i},t.prototype.tileToMeters=function(n,i,r){var e=this.toResolutionMeter(i),u=t.CIRCUMFERENCE_HALF;return r.x=n.x*e+u,r.y=u-n.y*e,r},t.prototype.toResolutionMeter=function(n){return 2*t.CIRCUMFERENCE_HALF/(1<<n)},t.prototype.toResolution=function(n,i){return 2*t.CIRCUMFERENCE_HALF/(i<<n)},t.prototype.toTileCount=function(t){return 1<<t},t.prototype.toTileCode=function(t,n,i){return(n<<t)+i},t.CIRCUMFERENCE_HALF=6378137*Math.PI,t}(),qb=function(){function t(){}return Object.defineProperty(t,"DEFAULT",{get:function(){return null==this.To&&(this.To=new Zb),this.To},enumerable:!0,configurable:!0}),t}(),Qb=function(){function n(n,i,r,e,u,s){this.tx=i,this.ty=r;var h=new t.Sprite(t.Texture.EMPTY);h.parent=n,h.position.set(e,u),h.scale.set(s,s),this.Oo=h}return n.prototype.load=function(n,i){var r=t.Texture.from(n,{resolution:1});this.Oo.texture=r,r.valid?i():r.on("update",i)},n.prototype.transform=function(t,n,i){var r=this.Oo;r.position.set(t,n),r.scale.set(i,i)},Object.defineProperty(n.prototype,"loaded",{get:function(){return this.Oo.texture.valid},enumerable:!0,configurable:!0}),n.prototype.render=function(t){var n=this.Oo;n.updateTransform(),n.render(t)},n.prototype.destroy=function(){var n=this.Oo,i=n.texture,r=i.baseTexture.resource,e=null;r instanceof t.resources.BaseImageResource&&r.source instanceof HTMLImageElement&&(e=r.source),i.destroy(!0),n.destroy(),e&&(e.src="")},n}(),$b=function(){function n(t,n,i,r,e,u){var s=this;this.gr=t,this.So=n,this.Mo=u,this.Eo=!1,this.ko=!0,this.Io=function(){s.onLoaded()},this.No=i,this._lon0=NaN,this._lat0=NaN,this._lon1=NaN,this._lat1=NaN,this.yo=new Map,this.xo=function(t){s.renderTile(t)},this.Co=NaN,this.jo=NaN,this.Ao=NaN,this.Bo=NaN,this.Ro=function(t,n,i){s.deleteTile(t,n,i)},this.Lo=function(t){s.destroyTile(t)},this.Wo=function(t){t.loaded||(s._o=!1)},this.Fo=e.toTileCount(i),this.Po=1/this.Fo,this.Uo=r.scale*this.Po,this.Do=e.getTileSize()*r.scale,this.at=r,this.xh=e,this._o=!0}return n.prototype.newTile=function(t,n,i,r,e){return new Qb(this.gr,t,n,i,r,e)},n.prototype.renderTile=function(t){t.render(this.zo)},Object.defineProperty(n.prototype,"tz",{get:function(){return this.No},enumerable:!0,configurable:!0}),n.prototype.render=function(t){this.zo=t,this.yo.forEach(this.xo)},n.prototype.move=function(t,i,r,e){var u=this._lon0,s=this._lat0,h=this._lon1,o=this._lat1;if(u!==t||s!==i||h!==r||o!==e){this._lon0=t,this._lat0=i,this._lon1=r,this._lat1=e;var c=this.No,f=this.xh,a=n.WORK;a.set(t,i),f.lonLatToTile(a,c,a);var l=a.x,v=a.y;a.set(r,e),f.lonLatToTile(a,c,a);var b=a.x,d=a.y,g=this.Fo,m=Math.max(0,l),p=Math.min(g-1,b),w=Math.max(0,v),D=Math.min(g-1,d),T=m-this.Co,O=p-this.jo,S=w-this.Ao,M=D-this.Bo,E=T!=T||T<0||1<T,k=O!=O||0<O||O<-1,I=S!=S||S<0||1<S,N=M!=M||0<M||M<-1;if(E||k||I||N){E?this.Co=m:m=this.Co,k?this.jo=p:p=this.jo,I?this.Ao=w:w=this.Ao,N?this.Bo=D:D=this.Bo,this.yo.forEach(this.Ro);var y=m+p>>1,x=w+D>>1,C=Math.max(y-m,p-y),j=Math.max(x-w,D-x),A=Math.max(C,j);this.toOffset(a);var B=a.x,R=a.y;this.Eo=!1,this.ko=!1,this.loadTile(c,y,x,B,R,a);for(var L=1;L<=A;++L){var W=y-L;m<=W&&this.loadTilesY(c,W,x,L,w,D,B,R,a);var _=y+L;_<=p&&this.loadTilesY(c,_,x,L,w,D,B,R,a);var F=x-L;w<=F&&this.loadTilesX(c,y,L-1,m,p,F,B,R,a);var P=x+L;P<=D&&this.loadTilesX(c,y,L-1,m,p,P,B,R,a)}this.ko=!0,this.Eo&&this.onLoaded()}}},n.prototype.loadTilesX=function(t,n,i,r,e,u,s,h,o){this.loadTile(t,n,u,s,h,o);for(var c=1;c<=i;++c){var f=n-c;r<=f&&this.loadTile(t,f,u,s,h,o);var a=n+c;a<=e&&this.loadTile(t,a,u,s,h,o)}},n.prototype.loadTilesY=function(t,n,i,r,e,u,s,h,o){this.loadTile(t,n,i,s,h,o);for(var c=1;c<=r;++c){var f=i-c;e<=f&&this.loadTile(t,n,f,s,h,o);var a=i+c;a<=u&&this.loadTile(t,n,a,s,h,o)}},n.prototype.loadTile=function(t,n,i,r,e,u){var s=this.xh.toTileCode(t,n,i),h=this.yo,o=h.get(s);null==o&&(this.toTilePosition(n,i,r,e,u),o=this.newTile(n,i,u.x,u.y,this.Uo),h.set(s,o),o.load(this.So(t,n,i),this.Io),this._o=!1)},n.prototype.toTilePosition=function(t,n,i,r,e){var u=this.Do,s=this.Po;return e.set(t,n),this.xh.tileToPixels(e,u,e),e.set(e.x*s+i,e.y*s+r),e},n.prototype.toOffset=function(t){var n=this.gr,i=this.at,r=this.Do;return t.set(-i.x*r+.5*n.width,-i.y*r+.5*n.height),t},n.prototype.deleteTile=function(t,n,i){var r=t.tx,e=t.ty;(r<this.Co||this.jo<r||e<this.Ao||this.Bo<e)&&(i.delete(n),t.destroy())},n.prototype.destroy=function(){var t=this.yo;t.forEach(this.Lo),t.clear()},n.prototype.destroyTile=function(t){t.destroy()},n.prototype.updateLoadingState=function(){this._o=!0,this.yo.forEach(this.Wo)},n.prototype.onLoaded=function(){this.ko?this.Mo():this.Eo=!0},Object.defineProperty(n.prototype,"loaded",{get:function(){return this._o||this.updateLoadingState(),this._o},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mapping",{get:function(){return this.at},set:function(t){var i=this,r=this.xh,e=t.scale*this.Po,u=r.getTileSize()*t.scale;this.Uo=e,this.Do=u,this.at=t;var s=n.WORK;this.toOffset(s);var h=s.x,o=s.y;this.yo.forEach((function(t){i.toTilePosition(t.tx,t.ty,h,o,s),t.transform(s.x,s.y,e)}))},enumerable:!0,configurable:!0}),n.WORK=new t.Point,n}(),td=function(n){function r(t){var i=n.call(this)||this,r=i.Qt=t.canvas;i.So=t.builder;var e=i.at=t.mapping,u=i.xh=t.coordinate;i.Go=i.toMapping(r,e,u),i._z=NaN,i.No=NaN,i.Ho=t.plane.min,i.Vo=t.plane.max,i.Xo=[],i.Io=function(){i.onLoaded()},i.Yo=function(){i.Ko=void 0,i.fit()},i.Jo=t.plane.throttle;var s=i.Zo=function(){i.fitThrottled()};return r.on("scale",s),r.on("move",s),r.appendRenderable(i,!0),i}return i(r,n),Object.defineProperty(r.prototype,"coordinate",{get:function(){return this.xh},enumerable:!0,configurable:!0}),r.prototype.fitThrottled=function(){null==this.Ko&&(this.Ko=window.setTimeout(this.Yo,this.Jo))},r.prototype.toMapping=function(t,n,i){var e=r.WORK_LONLAT,u=i.getTileSize();e.set(n.from.lon,n.from.lat),i.lonLatToPixels(e,0,u,e);var s=e.x,h=e.y;e.set(n.to.lon,n.to.lat),i.lonLatToPixels(e,0,u,e);var o=e.x,c=e.y,f=Math.abs(o-s),a=Math.abs(c-h),l=1;return 1e-7<f?l=1e-7<a?Math.max(t.width/f,t.height/a):t.width/f:1e-7<a&&(l=t.height/a),{scale:l,x:.5*(o+s)/u,y:.5*(c+h)/u}},Object.defineProperty(r.prototype,"mapping",{get:function(){return this.at},set:function(t){var n=this.Go,i=this.toMapping(this.Qt,t,this.xh);if(1e-7<Math.abs(n.scale-i.scale)||1e-7<Math.abs(n.x-i.x)||1e-7<Math.abs(n.y-i.y)){this.Go=i;for(var r=this.Xo,u=0,s=r.length;u<s;++u){var h=r[u];h&&(h.mapping=i)}e.update(),this.Zo()}},enumerable:!0,configurable:!0}),r.prototype.newPlane=function(t){return new $b(this.Qt,this.So,t,this.Go,this.xh,this.Io)},r.prototype.render=function(t){for(var n=this.No,i=this.Xo,r=0;r<n;++r)null!=(e=i[r])&&e.render(t);for(r=i.length-1;n<r;--r){var e;null!=(e=i[r])&&e.render(t)}var u=i[n];null!=u&&u.render(t)},r.prototype.toTileZ=function(t){return Math.min(this.Vo,Math.max(this.Ho,Math.floor(t)))},r.prototype.updateTransform=function(){},r.prototype.toZ=function(t){return Math.log(this.Go.scale*t)/Math.log(2)},r.prototype.move=function(t,n,i,r,e){var u=this.Xo,s=this.toZ(t);if(this._z!==s){this._z=s;var h=this.toTileZ(s);if(this.No!==h){this.No=h;var o=u[h];null==o&&(o=this.newPlane(h),u[h]=o)}}var c=u[this.No];return null!=c&&c.move(n,i,r,e),this},r.prototype.fit=function(){var t=this.Qt;if(null!=t){var n=t.parent;if(null!=n){var i=t.scale,e=i.x,u=i.y,s=t.x,h=t.y,o=this.xh,c=this.Go,f=o.getTileSize()*c.scale,a=c.x*f-(s/e+.5*t.width),l=a+n.width/e,v=c.y*f-(h/u+.5*t.height),b=v+n.height/u,d=r.WORK_LONLAT;d.set(a,v),o.pixelsToLonLat(d,0,f,d);var g=d.x,m=d.y;d.set(l,b),o.pixelsToLonLat(d,0,f,d);var p=d.x,w=d.y;this.move(e,g,m,p,w)}}return this},r.prototype.destroyPlanesBefore=function(t,n){for(var i=0;i<t;++i){var r=n[i];r&&(r.destroy(),n[i]=void 0)}},r.prototype.destroyPlanesAfter=function(t,n){for(var i=t+1,r=n.length;i<r;++i){var e=n[i];e&&(e.destroy(),n[i]=void 0)}},r.prototype.cleanup=function(){var t=this.No,n=this.Xo,i=n[t];if(i&&i.loaded)return this.destroyPlanesBefore(t,n),void this.destroyPlanesAfter(t,n);for(var r=t+1,e=n.length;r<e;++r)if((u=n[r])&&u.loaded)return this.destroyPlanesBefore(t,n),void this.destroyPlanesAfter(r,n);for(r=t-1;0<=r;--r){var u;if((u=n[r])&&u.loaded)return void this.destroyPlanesBefore(r,n)}},r.prototype.onLoaded=function(){this.cleanup(),e.update()},r.prototype.destroy=function(){for(var t=this.Xo,n=0,i=t.length;n<i;++n){var r=t[n];r&&(r.destroy(),t[n]=void 0)}var e=this.Qt,u=this.Zo;return e.off("scale",u),e.off("move",u),e.removeRenderable(this,!0),this},r.WORK_LONLAT=new t.Point,r}(t.utils.EventEmitter),nd=function(t,n,i){return"https://j.tile.openstreetmap.jp/"+t+"/"+n+"/"+i+".png"},id=function(){function t(){}return t.toPlaneOptions=function(t){var n=t.plane;return n?{min:null!=n.min?n.min:this.MIN,max:null!=n.max?n.max:this.MAX,throttle:null!=n.throttle?n.throttle:this.THROTTLE}:{min:this.MIN,max:this.MAX,throttle:this.THROTTLE}},t.from=function(t){return new td({canvas:t.canvas,builder:t.builder||nd,mapping:t.canvas.tile.mapping,coordinate:t.coordinate||qb.DEFAULT,plane:this.toPlaneOptions(t)})},t.MIN=0,t.MAX=18,t.THROTTLE=333,t}(),rd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.cr=this.toMenu(this.theme,n),this.cr.on("select",(function(t,n,r){i.onSelect(t,n,r)}))},n.prototype.toMenu=function(t,n){var i=n&&n.menu;return i instanceof Hb?i:new Hb(this.toMenuOptions(t,i))},n.prototype.newMenu=function(t,n){return new Hb(this.toMenuOptions(t,n))},n.prototype.toMenuOptions=function(t,n){return null==(n=n||{}).fit&&(n.fit=!1),n},n.prototype.close=function(){this.cr.close()},Object.defineProperty(n.prototype,"menu",{get:function(){return this.cr},enumerable:!0,configurable:!0}),n.prototype.onSelect=function(t,n,i){var r=this.parent;null!=r&&r.emit("select",t,n,i)},n.prototype.getType=function(){return"DMenuBarItem"},n}(pl),ed=function(t){function n(n){var i=t.call(this)||this;return i.renderable=!1,i.interactive=!0,i.on(Z.down,(function(t){t.target===i&&n.close()})),i.on(Z.move,(function(t){if(t.target===i)for(var r=n.children,e=0,u=r.length;e<u;++e){var s=r[e];s instanceof rd&&s.setHovered(s.containsPoint(t.data.global))}})),i}return i(n,t),n.prototype.containsPoint=function(t){return!0},n}(t.Container),ud=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.init=function(i){var r=this;if(n.prototype.init.call(this,i),this.setState(v.FOCUS_ROOT,!0),null!=i&&null!=i.items){var e=i.items;On.apply(this,(function(){r.close()}));for(var u=function(t,n,i){var e=r.$t;if(null==e)M.isDisabled(t)||M.isPressed(t)&&!M.isPressed(n)&&r.open(i);else if(!M.isDisabled(t)&&M.isHovered(t)&&!M.isHovered(n)){var u=i.menu;u.isHidden()&&u.open(i,r,e)}},s=0,h=e.length;s<h;++s){var o=e[s],c=o instanceof t.DisplayObject?o:new rd(o);c instanceof rd&&c.on("statechange",u),this.addChild(c)}}this.on("select",(function(){r.close()})),this.$t=null,this.qo=new ed(this)},r.prototype.getContext=function(){return this.$t},r.prototype.getCloseable=function(){return this},r.prototype.open=function(t){var n=this.$t;null==n&&(e.getInstance().stage.addChild(this.qo),(n=this.$t=new Gb(this)).trim(t),n.add(this),t.menu.open(t,this,n))},r.prototype.close=function(){var t=this.$t;null!=t&&(this.$t=null,t.remove(this),e.getInstance().stage.removeChild(this.qo))},r.prototype.getType=function(){return"DMenuBar"},r}(Sl),sd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.setState(v.UNFOCUSABLE,!0)},n.prototype.initReflowable=function(){},n.prototype.getType=function(){return"DMenuSidedContent"},n}(Sl);!function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.SINGLE_ONCE=2]="SINGLE_ONCE",t[t.DEFAULT=2]="DEFAULT"}(Vb||(Vb={}));var hd,od=function(){return!0},cd=function(n){function r(t,i){var r=n.call(this)||this;r.eo=t,r.Qo=null,r.R=!0,r.uo=i&&null!=i.mode?o(i.mode)?Vb[i.mode]:i.mode:Vb.DEFAULT,r.$o=i&&i.filter||r.getFilterDefault();var e=i&&i.on;if(e)for(var u in e)r.on(u,e[u]);return r}return i(r,n),r.prototype.toDirty=function(){this.R=!0},r.prototype.update=function(){this.R&&(this.R=!1,this.bn(this.eo))},r.prototype.hasMenu=function(t){return t&&t.menu instanceof Hb},r.prototype.bn=function(n){for(var i=n.children,r=0,e=i.length;r<e;++r){var u=i[r];u instanceof pt&&u.isActive()&&this.tc(u,!1),u instanceof t.Container&&this.bn(u),this.hasMenu(u)&&this.bn(u.menu)}},r.prototype.add=function(t){this.update(),this.tc(t,!0)},r.prototype.set=function(t){this.update(),this.tc(t,!0)},r.prototype.get=function(){return this.update(),this.Qo},r.prototype.size=function(){return this.Qo?1:0},r.prototype.isEmpty=function(){return null==this.Qo},r.prototype.remove=function(t){this.update(),this.Qo===t&&this.tc(null,!0)},r.prototype.clear=function(){this.update(),this.tc(null,!0)},r.prototype.getFilterDefault=function(){return od},r.prototype.tc=function(t,n){var i=this.Qo,r=this.uo;r!==Vb.NONE&&this.$o(t)&&i!==t&&(this.setState(i,r,!1),this.Qo=t,this.setState(t,r,!0),n&&this.emit("change",this))},r.prototype.setState=function(t,n,i){t&&(n===Vb.SINGLE?t.setState(v.ACTIVE,i):t.setState(v.ACTIVE|v.READ_ONLY,i))},r}(t.utils.EventEmitter),fd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=new Gb(this);this.$t=i,i.add(this);var r=n&&n.items;if(null!=r){var e=!(!n||null==n.sticky)&&n.sticky;this.newItems(r,e)}var u=n&&n.selection;this.ao=u instanceof cd?u:this.newSelection(u)},n.prototype.newSelection=function(t){return new cd(this.eo,t)},n.prototype.onChildrenDirty=function(){var n=this.ao;null!=n&&n.toDirty(),t.prototype.onChildrenDirty.call(this)},n.prototype.newItems=function(t,n){Ai.newItems(this.content,t,n)},n.prototype.newContent=function(t){return new sd(t)},Object.defineProperty(n.prototype,"selection",{get:function(){return this.ao},enumerable:!0,configurable:!0}),n.prototype.getContext=function(){return this.$t},n.prototype.getCloseable=function(){return this},n.prototype.open=function(){},n.prototype.close=function(){},n.prototype.getType=function(){return"DMenuSided"},n}(Ab),ad=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}($),ld=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}($),vd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}($),bd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}($),dd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.Fn=null,this.nc=function(t,n){i.onSelected(t,n,!0)},this.ic=function(){i.onClosed()},null!=n&&void 0!==n.value&&(this.value=n.value)},n.prototype.onSelected=function(t,n,i){if(this.Fn!==t){var r=this.Fn;if(this.Fn=t,null!=n)this.text=n.text||"";else{var e=this.gt;this.text=e&&e.text&&e.text.value||this.theme.newTextValue()}i&&this.emit("change",t,r,n,this)}},n.prototype.onClosed=function(){var t=this.cr;t.off("select",this.nc),t.off("close",this.ic)},n.prototype.start=function(){var n=this.cr;n.on("select",this.nc),n.on("close",this.ic),t.prototype.start.call(this)},n.prototype.findMenuItem=function(t,n){for(var i=this.cr.children,r=0,e=i.length;r<e;++r){var u=i[r];if(u instanceof ii){var s=this.findMenuItem(u.menu,n);if(null!=s)return s}else if(u instanceof wt&&u.value===n)return u}return null},Object.defineProperty(n.prototype,"value",{get:function(){return this.Fn},set:function(t){var n=this.findMenuItem(this.cr,t);null!=n?this.onSelected(t,n,!1):this.onSelected(null,null,!1)},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"DSelect"},n}(Xb),gd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}($),md=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}($),pd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.rc=n.column.index,this.ec=n.column.data,this.on("active",(function(){i.emit("cellchange",!0,!1,i.rc,i.ec)})),this.on("inactive",(function(){i.emit("cellchange",!1,!0,i.rc,i.ec)}))},n.prototype.set=function(t){this.setActive(!!t)},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellCheck"},n}(Dl),wd=function(t){return{color:t.color,alpha:t.alpha}},Dd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.rc=n.column.index,this.ec=n.column.data,this.on("select",(function(t,n){i.emit("cellchange",wd(t),wd(n),i.rc,i.ec)}))},n.prototype.set=function(t){var n=this.Fn;if(a(t))n.color=t,n.alpha=1;else if(o(t)){var i=Number(t);n.color=i==i?i:16777215,n.alpha=1}else null!=t?(function(t){return"color"in t}(t)?n.color=Number(t.color):n.color=16777215,function(t){return"alpha"in t}(t)?n.alpha=Number(t.alpha):n.alpha=1):(n.color=16777215,n.alpha=1)},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellColor"},n}(Hl),Td=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.rc=n.column.index,this.ec=n.column.data,this.setState(v.UNFOCUSABLE,!0)},n.prototype.set=function(t,n){this.text=n},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellIndex"},n}(gt),Od=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.rc=n.column.index,this.ec=n.column.data,this.on("change",(function(t,n){i.emit("cellchange",t,n,i.rc,i.ec)}))},n.prototype.set=function(t){this.text=Number(t)},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellInputInteger"},n}(Ql),Sd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.rc=n.column.index,this.ec=n.column.data,this.on("change",(function(t,n){i.emit("cellchange",t,n,i.rc,i.ec)}))},n.prototype.set=function(t){this.text=Number(t)},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellInputReal"},n}(Il),Md=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.rc=n.column.index,this.ec=n.column.data,this.on("change",(function(t,n){i.emit("cellchange",t,n,i.rc,i.ec)}))},n.prototype.set=function(t){this.text=String(t)},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellInputText"},n}(jl),Ed=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n);var r=n.column;this.rc=r.index,this.ec=r.data;var e=r.data.selecting,u=e.dialog;if(null!=u){var s=e.getter,h=function(t){var n=s(t),r=i.text;n!==r&&(i.text=n,i.emit("cellchange",n,r,i.rc,i.ec))},o=function(){u.off("select",h),u.off("close",o)};this.on("active",(function(){u.on("select",h),u.on("close",o),u.open()}))}},Object.defineProperty(n.prototype,"value",{get:function(){return this.text},set:function(t){this.text=t},enumerable:!0,configurable:!0}),n.prototype.set=function(t,n,i,r){r?(this.Dn=t,this.Tn=t,this.onTextChange(),this.createOrUpdateText()):this.text=t},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellSelectDialog"},n}(pl),kd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n);var r=n.column;this.rc=r.index,this.ec=r.data;var e=r.data.selecting,u=e.fetcher;if(null!=u){var s=e.getter,h=function(t){var n=s(t),r=i.text;n!==r&&(i.text=n,i.emit("cellchange",n,r,i.rc,i.ec))};this.on("active",(function(){u().then(h)}))}},Object.defineProperty(n.prototype,"value",{get:function(){return this.Tn},set:function(t){this.text=t},enumerable:!0,configurable:!0}),n.prototype.set=function(t,n,i,r){r?(this.Dn=t,this.Tn=t,this.onTextChange(),this.createOrUpdateText()):this.text=t},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellSelectFetcher"},n}(pl),Id=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n);var r=n.column;this.rc=r.index,this.ec=r.data;var e=r.data.selecting.getter;this.on("change",(function(t,n){var r=e(t),u=e(n);i.emit("cellchange",r,u,i.rc,i.ec)}))},n.prototype.set=function(t){this.value=t},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellSelectMenu"},n}(dd),Nd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.rc=n.column.index,this.ec=n.column.data,this.setState(v.UNFOCUSABLE,!0)},n.prototype.set=function(t){this.text=t},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellText"},n}(gt),yd=function(t,n){return t-n},xd=function(){function t(t,n){this.gr=t,this.qt=n}return t.prototype.apply=function(){var t=this.newFiltered(),n=this.uc;if(null!=t)if(null!=n){if(t.length!==n.length)this.setFiltered(t);else for(var i=0,r=t.length;i<r;++i)if(t[i]!==n[i]){this.setFiltered(t);break}}else this.setFiltered(t);else null!=n&&this.setFiltered()},t.prototype.setFiltered=function(t){this.uc=t,this.qt()},t.prototype.unapply=function(){null!=this.uc&&this.setFiltered()},t.prototype.isApplied=function(){return null!=this.uc},t.prototype.newFiltered=function(){var t=this.$o;if(null!=t){var n=this.gr.rows,i=n.length,r=[];if(u(t))for(var e=0;e<i;++e)t(s=n[e],e,n)&&r.push(e);else for(e=0;e<i;++e){var s=n[e];t.test(s,e,n)&&r.push(e)}return r}},t.prototype.get=function(){return this.$o},t.prototype.set=function(t){this.$o!==t&&(this.$o=t)},t.prototype.add=function(t,n){var i=this.uc;if(null!=i){for(var r=0;r<n;++r)i.push(t+r);i.sort(yd),this.qt()}},t.prototype.shift=function(t,n,i){var r=this.uc;if(null!=r){for(var e=r.length-1;0<=e;--e){var u=r[e];if(!(t<=u))break;r[e]=u+n}i&&this.add(t,n),this.qt()}},t.prototype.clear=function(){var t=this.uc;null!=t&&0<t.length&&(t.length=0,this.qt())},t.prototype.remove=function(t){var n=this.uc;if(null!=n){var i=zn(n,t);if(0<=i)return n.splice(i,1),this.qt(),!0}return!1},Object.defineProperty(t.prototype,"indices",{get:function(){return this.uc},enumerable:!0,configurable:!0}),t}(),Cd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.Ms=n.dialog,this.rc=n.column.index,this.ec=n.column.data,this.on("active",(function(){var t=i.Tn.getTime(),n=i.dialog;n.current=new Date(t),n.new=new Date(t),n.page=new Date(t),n.open().then((function(){var t=n.new,r=n.current;i.text=new Date(t.getTime()),i.emit("cellchange",t,r,i.rc,i.ec)}))}))},Object.defineProperty(n.prototype,"dialog",{get:function(){var t=this.Es;return null==t&&(t=null!=this.Ms?new ov(this.Ms):cv.getInstance(),this.Es=t),t},enumerable:!0,configurable:!0}),n.prototype.set=function(t,n,i,r){if(t instanceof Date)r?(this.Dn=t,this.Tn=t,this.onTextChange(),this.createOrUpdateText()):this.text=t;else if(a(t)){var e=this.Tn;e.getTime()!==t&&(e.setTime(t),this.onTextChange(),this.createOrUpdateText())}},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellDate"},n}(pl),jd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;this.Ms=n.dialog,this._s=mo.toMask(n&&n.dialog&&n.dialog.picker),this.rc=n.column.index,this.ec=n.column.data,t.prototype.init.call(this,n),this.on("active",(function(){var t=i.Tn.getTime(),n=i.dialog;n.current=new Date(t),n.new=new Date(t),n.page=new Date(t),n.open().then((function(){var t=n.new,r=n.current;i.text=new Date(t.getTime()),i.emit("cellchange",t,r,i.rc,i.ec)}))}))},n.prototype.getDatetimeMask=function(){return this._s},Object.defineProperty(n.prototype,"dialog",{get:function(){var t=this.Es;return null==t&&(t=null!=this.Ms?new av(this.Ms):lv.getInstance(),this.Es=t),t},enumerable:!0,configurable:!0}),n.prototype.set=function(t,n,i,r){if(t instanceof Date)r?(this.Dn=t,this.Tn=t,this.onTextChange(),this.createOrUpdateText()):this.text=t;else if(a(t)){var e=this.Tn;e.getTime()!==t&&(e.setTime(t),this.onTextChange(),this.createOrUpdateText())}},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellDatetime"},n}(pl),Ad=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){var i=this;this.Ms=n.dialog,this._s=go.toMask(n.dialog&&n.dialog.picker),this.rc=n.column.index,this.ec=n.column.data,t.prototype.init.call(this,n),this.on("active",(function(){var t=i.Tn.getTime(),n=i.dialog;n.current=new Date(t),n.new=new Date(t),n.open().then((function(){var t=n.new,r=n.current;i.text=new Date(t.getTime()),i.emit("cellchange",t,r,i.rc,i.ec)}))}))},n.prototype.getDatetimeMask=function(){return this._s},Object.defineProperty(n.prototype,"dialog",{get:function(){var t=this.Es;return null==t&&(null!=this.Ms?t=new Tv(this.Ms):(null==n.DIALOG&&(n.DIALOG=new Tv),t=n.DIALOG),this.Es=t),t},enumerable:!0,configurable:!0}),n.prototype.set=function(t,n,i,r){if(t instanceof Date)r?(this.Dn=t,this.Tn=t,this.onTextChange(),this.createOrUpdateText()):this.text=t;else if(a(t)){var e=this.Tn;e.getTime()!==t&&(e.setTime(t),this.onTextChange(),this.createOrUpdateText())}},n.prototype.unset=function(){},n.prototype.getType=function(){return"DTableBodyCellTime"},n}(pl);!function(t){t[t.INDEX=0]="INDEX",t[t.TEXT=1]="TEXT",t[t.INTEGER=2]="INTEGER",t[t.REAL=3]="REAL",t[t.CHECK=4]="CHECK",t[t.COLOR=5]="COLOR",t[t.BUTTON=6]="BUTTON",t[t.SELECT=7]="SELECT",t[t.DATE=8]="DATE",t[t.DATETIME=9]="DATETIME",t[t.TIME=10]="TIME"}(hd||(hd={}));var Bd,Rd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);for(var i=this.sc=n.columns||[],r=0,e=i.length;r<e;++r)this.addChild(this.newCell(i[r],r,i,n))},n.prototype.getType=function(){return"DTableRow"},n}(Sl),Ld=function(t){return null!=t&&"set"in t},Wd=function(t){function n(n){var i=t.call(this,n)||this;return i.hc=void 0,i}return i(n,t),n.prototype.init=function(n){var i=this;this.oc=function(t,n,r,e){var u=i.hc;null!=u&&(e.setter(u,r,t),i.emit("change",t,n,r,i))},t.prototype.init.call(this,n)},n.prototype.newCell=function(t,n,i,r){var e,u=this.toCellOptions(t,n,r);return t.editable?((e=this.newCellEditable(t,n,u)).on("cellchange",this.oc),e):((e=this.newCellUnediable(t,n,u)).setReadOnly(!0),e)},n.prototype.newCellEditable=function(t,n,i){switch(t.type){case hd.INDEX:return new Td(i);case hd.TEXT:return new Md(i);case hd.INTEGER:return new Od(i);case hd.REAL:return new Sd(i);case hd.CHECK:return new pd(i);case hd.COLOR:return new Dd(i);case hd.BUTTON:return new Nd(i);case hd.SELECT:var r=t.selecting;return null!=r.menu?new Id(i):null!=r.dialog?new Ed(i):null!=r.fetcher?new kd(i):new Nd(i);case hd.DATE:return new Cd(i);case hd.DATETIME:return new jd(i);case hd.TIME:return new Ad(i);default:return new Nd(i)}},n.prototype.newCellUnediable=function(t,n,i){switch(t.type){case hd.INDEX:return new Td(i);case hd.TEXT:case hd.INTEGER:case hd.REAL:return new Nd(i);case hd.CHECK:return new pd(i);case hd.COLOR:return new Dd(i);case hd.BUTTON:return new Nd(i);case hd.SELECT:var r=t.selecting;return null!=r.menu?new Id(i):null!=r.dialog?new Ed(i):null!=r.fetcher?new kd(i):new Nd(i);case hd.DATE:return new Cd(i);case hd.DATETIME:return new jd(i);case hd.TIME:return new Ad(i);default:return new Nd(i)}},n.prototype.toCellOptions=function(t,n,i){var r=t.body||i.cell;if(null!=r){r.weight=t.weight,r.width=t.width;var e=r.text=r.text||{};(e.align=e.align||{}).horizontal=t.align,e.formatter=t.formatter,r.column={index:n,data:t},t.selecting.menu&&(r.menu=t.selecting.menu)}else r={weight:t.weight,width:t.width,text:{formatter:t.formatter,align:{horizontal:t.align}},column:{index:n,data:t},menu:t.selecting.menu};if(t.editable){var u=r.editing=r.editing||{};u.formatter=u.formatter||t.editing.formatter,u.unformatter=u.unformatter||t.editing.unformatter,u.validator=u.validator||t.editing.validator}return r},n.prototype.getType=function(){return"DTableBodyRow"},n.prototype.set=function(t,n,i){if(i||this.hc!==t){this.hc=t;for(var r=this.children,e=r.length,u=this.sc,s=u.length,h=0,o=Math.min(s,e);h<o;++h){var c=r[e-h-1],f=s-h-1,a=u[f];Ld(c)&&c.set(a.getter(t,f),n,f,i)}this.emit("set",t,n,this)}},n.prototype.unset=function(){if(void 0!==this.hc){this.hc=void 0;for(var t=this.children,n=0,i=t.length;n<i;++n){var r=t[n];Ld(r)&&r.unset()}this.emit("unset",this)}},n}(Rd),_d=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DTableBodyRowEven"},n}(Wd),Fd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getType=function(){return"DTableBodyRowOdd"},n}(Wd);!function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULTIPLE=2]="MULTIPLE"}(Bd||(Bd={}));var Pd=function(t,n){return t[0]-n[0]},Ud=function(t){function n(n,i,r){var e=t.call(this)||this;return e.Fr=n,e.U=new Set,e.Ae=i,e.qt=r,e}return i(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return this.Fr},enumerable:!0,configurable:!0}),n.prototype.onChange=function(){this.qt(),this.emit("change",this)},n.prototype.toggle=function(t){var n=this.U;n.has(t)?n.delete(t):n.add(t),this.onChange()},n.prototype.add=function(t){var n=this.U,i=n.size;n.add(t),i!==n.size&&this.onChange()},n.prototype.getFirstIndex=function(){var t=this.U;if(0<t.size){var n=NaN;return t.forEach((function(t){n!=n&&(n=t)})),n}return null},n.prototype.getLastIndex=function(){var t=this.U;if(0<t.size){var n=0;return t.forEach((function(t){n=t})),n}return null},n.prototype.addTo=function(t){var n=this.getLastIndex();null!=n&&this.addRange(n,!1,t,!0)},n.prototype.addRange=function(t,n,i,r){var e=this.U,u=e.size;if(t<i)for(var s=t+(n?0:1),h=i+(r?1:0);s<h;++s)e.add(s);else for(s=i+(r?0:1),h=t+(n?1:0);s<h;++s)e.add(s);u!==e.size&&this.onChange()},n.prototype.addAll=function(t){for(var n=this.U,i=n.size,r=0,e=t.length;r<e;++r)n.add(t[r]);i!==n.size&&this.onChange()},n.prototype.contains=function(t){return this.U.has(t)},n.prototype.remove=function(t){this.U.delete(t)&&this.onChange()},n.prototype.clear=function(){var t=this.U;0<t.size&&(t.clear(),this.onChange())},n.prototype.clearAndAdd=function(t){var n=this.U;n.has(t)&&1===n.size||(n.clear(),n.add(t),this.onChange())},n.prototype.clearAndAddAll=function(t){var n=this.U;if(0<n.size||0<t.length){n.clear();for(var i=0,r=t.length;i<r;++i)n.add(t[i]);this.onChange()}},n.prototype.shift=function(t,n){var i=[],r=this.U;if(r.forEach((function(n){t<=n&&i.push(n)})),0<i.length){for(var e=0,u=i.length;e<u;++e)r.delete(i[e]);for(e=0,u=i.length;e<u;++e)r.add(i[e]+n);this.onChange()}},n.prototype.size=function(){return this.U.size},n.prototype.isEmpty=function(){return 0===this.U.size},Object.defineProperty(n.prototype,"indices",{get:function(){var t=[];return this.U.forEach((function(n){t.push(n)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){var t=[],n=this.Ae;return this.U.forEach((function(i){t.push(n[i])})),t},enumerable:!0,configurable:!0}),n.prototype.toArray=function(){var t=[],n=this.Ae;return this.U.forEach((function(i){t.push([i,n[i]])})),t},n.prototype.toSortedArray=function(){return this.toArray().sort(Pd)},n.prototype.toObject=function(){var t={},n=this.Ae;return this.U.forEach((function(i){t[i]=n[i]})),t},n.prototype.toMap=function(){var t=new Map,n=this.Ae;return this.U.forEach((function(i){t.set(i,n[i])})),t},n}(t.utils.EventEmitter),zd=function(n){function r(t){return n.call(this,t)||this}return i(r,n),r.prototype.init=function(t){var i=this;n.prototype.init.call(this,t);var e=this.theme,u=function(t){return t.selection&&null!=t.selection.type?o(t.selection.type)?Bd[t.selection.type]:t.selection.type:Bd.NONE}(t),s=function(t,n,i){var r=n.columns||[],e=n.row;return null!=e?(null==e.height&&(e.height=t.getRowHeight()),void 0===e.columns&&(e.columns=r),i!==Bd.NONE&&null==e.interactive&&(e.interactive="SELF")):e={columns:r,height:t.getRowHeight(),interactive:i!==Bd.NONE?"SELF":void 0},e}(e,t,u);this.cc=s,this.fc=null!=s.height?s.height:e.getRowHeight(),this.sc=s.columns||[],this.ac=0,this.lc=0,this.Ae=function(t){var n=[];if(null!=t)for(var i=0,r=t.length;i<r;++i)n.push(t[i]);return n}(t.data),this.vc=0,this.bc=!1,this.dc=!1,this.gc=[];var h=this.ao=new Ud(u,this.Ae,(function(){i.onSelectionChange()}));this.$o=new xd(this,(function(){i.onFilterChange()})),t&&t.filter&&this.$o.set(t.filter);var c=this.content;c.on("move",(function(){i.update()})),c.on("resize",(function(){i.update()})),this.update(),h.type!==Bd.NONE&&Z.onClick(this,(function(t){if(i.isActionable()){var n=r.WORK_ON_CLICK;n.copyFrom(t.data.global),c.toLocal(n,void 0,n,!1);var e=Math.floor(n.y/i.fc),u=i.$o.indices,s=i.Ae,o=null!=u?u.length:s.length;if(0<=e&&e<o){var f=h.type===Bd.SINGLE,a=!f,l=t.data.originalEvent,v=l.ctrlKey,b=l.shiftKey,d=u?u[e]:e;f||h.isEmpty()||!a||!v&&!b?h.clearAndAdd(d):v?h.toggle(d):b&&h.addTo(d)}}}))},r.prototype.onResize=function(t,i,r,e){n.prototype.onResize.call(this,t,i,r,e),this.update()},Object.defineProperty(r.prototype,"selection",{get:function(){return this.ao},enumerable:!0,configurable:!0}),r.prototype.lock=function(){this.vc+=1,1===this.vc&&(this.bc=!1,this.dc=!1)},r.prototype.unlock=function(t){this.vc-=1,0===this.vc&&(t&&this.bc&&this.update(this.dc),this.bc=!1,this.dc=!1)},r.prototype.onSelectionChange=function(){this.update()},r.prototype.onFilterChange=function(){this.update()},r.prototype.update=function(t){if(0<this.vc)return this.bc=!0,void(t&&(this.dc=!0));var n=this.content,i=n.children,r=this.height,e=this.fc,u=this.$o.indices,s=this.Ae,h=null!=u?u.length:s.length,o=this.ac,c=this.lc,f=c-o,a=Math.max(r,h*e),l=Math.max(r-a,n.position.y);n.position.y=l,n.height=a;var v=Math.floor((0-l)/e),b=Math.floor((r-l)/e),d=v-(v%2==0?2:1),g=b+((b-d+1)%2==0?3:2),m=g-d;if(m<f&&f-2<=m&&(g=d+(m=f)),f<m){for(var p=f;p<m;++p){var w=o+p,D=this.newRow(w%2==0);n.addChild(D)}c=o+(f=m)}else if(m<f){for(p=f-1;m<=p;--p)n.removeChild(i[p]);c=o+(f=m)}this.ac=d,this.lc=g;var T=d-o,O=Math.abs(T),S=i.length;if(0<O&&O<S){var M=this.gc;if(0<T){for(p=0;p<O;++p)M.push(this.resetRow(i[p]));for(p=O;p<S;++p)i[p-O]=i[p];for(p=0;p<O;++p)i[S-O+p]=M[p]}else{for(p=0;p<O;++p)M.push(this.resetRow(i[S-O+p]));for(p=S-O-1;0<=p;--p)i[p+O]=i[p];for(p=0;p<O;++p)i[p]=M[p]}M.length=0}var E=this.ao;if(null!=u)for(p=0;p<S;++p){var k=i[p],I=u[N=d+p];k.position.y=N*e,k.setDisabled(N<0||h<=N),k.setActive(E.contains(I)),0<=N&&N<h?k.set(s[I],I,t):k.unset()}else for(p=0;p<S;++p){var N=d+p;(k=i[p]).position.y=N*e,k.setDisabled(N<0||h<=N),k.setActive(E.contains(N)),0<=N&&N<h?k.set(s[N],N,t):k.unset()}},r.prototype.resetRow=function(t){t.blur(!0);for(var n=t.children,i=0,r=n.length;i<r;++i){var e=n[i];e instanceof $&&e.setPressed(!1)}return t},r.prototype.newRow=function(t){var n=this,i=this.cc,r=t?new _d(i):new Fd(i);return r.on("change",(function(t,i,e){var u=n.content.getChildIndex(r);if(0<=u){var s=n.ac+u;n.emit("change",t,i,s,e,n)}})),r},r.prototype.onDblClick=function(t){var i=!1;if(this.isActionable()&&this.ao.type!==Bd.NONE){var e=Z.toGlobal(t,r.WORK_ON_CLICK),u=this.content;u.toLocal(e,void 0,e,!1);var s=e.x,h=e.y,o=Math.floor(h/this.fc),c=this.$o.indices,f=this.Ae,a=null!=c?c.length:f.length;if(0<=o&&o<a){var l=o-this.ac,v=u.children;if(0<=l&&l<v.length)for(var b=v[l].children,d=b.length,g=this.sc,m=g.length,p=0,w=Math.min(d,m);p<w;++p)if(g[m-p-1].editable){var D=b[d-p-1],T=s-D.position.x;0<=T&&T<=D.width&&(D.focus(),D instanceof ml&&D.onClick(),i=!0)}}}return n.prototype.onDblClick.call(this,t)||i},r.prototype.getType=function(){return"DTableBody"},Object.defineProperty(r.prototype,"rows",{get:function(){return this.Ae},set:function(t){this.Ae!==t&&(this.Ae=t,this.lock(),this.ao.clear(),this.$o.clear(),this.unlock(!1),this.update())},enumerable:!0,configurable:!0}),r.prototype.clear=function(){var t=this.Ae;0<t.length&&(t.length=0,this.lock(),this.ao.clear(),this.$o.clear(),this.unlock(!1),this.update())},r.prototype.clearAndAdd=function(t){var n=this.Ae;n.length=0,n.push(t),this.lock(),this.ao.clear(),this.$o.clear(),this.unlock(!1),this.update()},r.prototype.clearAndAddAll=function(t){var n=this.Ae;n.length=0;for(var i=0,r=t.length;i<r;++i)n.push(t[i]);this.lock(),this.ao.clear(),this.$o.clear(),this.unlock(!1),this.update()},r.prototype.add=function(t,n){var i=this.Ae,r=this.$o,e=this.ao;null==n?(i.push(t),this.lock(),r.add(i.length-1,1),this.unlock(!1),this.update()):0<=n&&n<i.length&&(i.splice(n,0,t),this.lock(),e.shift(n,1),r.shift(n,1,!0),this.unlock(!1),this.update())},r.prototype.addAll=function(t,n){var i=this.Ae,r=i.length,e=this.$o,u=this.ao;if(null==n){for(var s=0,h=o=t.length;s<h;++s)i.push(t[s]);this.lock(),e.add(r-1,o),this.unlock(!1),this.update()}else if(0<=n&&n<r){var o=t.length;for(s=0;s<o;++s)i.splice(n+s,0,t[s]);this.lock(),u.shift(n,o),e.shift(n,o,!0),this.unlock(!1),this.update()}},r.prototype.get=function(t){var n=this.Ae;return 0<=t&&t<n.length?n[t]:null},r.prototype.set=function(t,n){var i=this.Ae;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.update(),r}return null},r.prototype.remove=function(t){var n=this.Ae;if(0<=t&&t<n.length){var i=n.splice(t,1)[0];return this.lock(),this.ao.remove(t),this.$o.remove(t),this.unlock(!1),this.update(),i}return null},r.prototype.size=function(){return this.Ae.length},Object.defineProperty(r.prototype,"filter",{get:function(){return this.$o},enumerable:!0,configurable:!0}),r.WORK_ON_CLICK=new t.Point,r}(Ab),Gd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.setState(v.UNFOCUSABLE,!0)},n.prototype.getType=function(){return"DTableHeaderCell"},n}(dt),Hd=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n)},n.prototype.newCell=function(t,n,i,r){return new Gd(this.toCellOptions(t,r))},n.prototype.toCellOptions=function(t,n){var i=t.header||n.cell;if(null!=i){i.weight=t.weight,i.width=t.width;var r=i.text=i.text||{};return r.value=r.value||t.label,i}return{weight:t.weight,width:t.width,text:{value:t.label}}},n.prototype.getType=function(){return"DTableHeader"},n}(Rd),Vd=function(t,n){return t[n]},Xd=function(t,n,i){t[n]=i},Yd=function(t){return t},Kd=function(t){return t?{formatter:t.formatter||Zn,unformatter:t.unformatter||Yd,validator:t.validator}:{formatter:Zn,unformatter:Yd}},Jd=function(t){return null==t?void 0:t instanceof Hb?t:new Hb(t)},Zd=function(t){return null==t?void 0:t instanceof zb?t:new zb(t)},qd=function(t){return t},Qd=function(t){return t?{getter:t.getter||qd,menu:Jd(t.menu),dialog:Zd(t.dialog),fetcher:t.fetcher}:{getter:qd}},$d=function(t){var n=null!=t.weight?t.weight:null!=t.width?void 0:1,i=null!=n?void 0:null!=t.width?t.width:100,r=null!=t.type?o(t.type)?hd[t.type]:t.type:hd.TEXT,e=function(t,n){if(null!=t.align)return o(t.align)?V[t.align]:t.align;switch(n){case hd.TEXT:return V.LEFT;case hd.REAL:case hd.INTEGER:return V.RIGHT;case hd.INDEX:case hd.SELECT:return V.CENTER;default:return V.LEFT}}(t,r),u=!0===t.editable;return{weight:n,width:i,type:r,label:t.label||"",getter:t.getter||Vd,setter:t.setter||Xd,formatter:t.formatter,align:e,editable:u,editing:Kd(t.editing),header:t.header,body:t.body,selecting:Qd(t.selecting)}},tg=function(t){function n(n){return t.call(this,n)||this}return i(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=function(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push($d(t[i]));return n}(n.columns),r=this.newHeader(n,i);this.br=r,this.addChild(r);var e=this.newBody(n,i);this.dr=e,this.addChild(e)},n.prototype.newHeader=function(t,n){return new Hd(function(t,n){return null!=t?(void 0===t.columns&&(t.columns=n),t):{columns:n}}(t.header,n))},n.prototype.newBody=function(t,n){return new zd(function(t,n,i){return null!=t?(void 0===t.data&&void 0!==i&&(t.data=i),void 0===t.columns&&(t.columns=n),void 0===t.height&&void 0===t.weight&&(t.weight=1),t):{columns:n,data:i,weight:1}}(t.body,n,t.data))},n.prototype.getType=function(){return"DTable"},Object.defineProperty(n.prototype,"header",{get:function(){return this.br},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"body",{get:function(){return this.dr},enumerable:!0,configurable:!0}),n}(gi),ng=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}($),ig=Object.freeze({__proto__:null,DInputReal:Il,loadThemeWhiteDialogColorGradient:zh,loadAll:il,loadMenuItemExpandable:ki,loadMenuItem:oi,loadMenuSidedItemExpandable:Hi,loadMenuSidedItem:Bi,loadShapeAll:qs,loadShapeBar:Lu,loadShapeCircle:Uu,loadShapeGroupShadowed:fs,loadShapeGroup:ss,loadShapeImage:gs,loadShapeLabel:Ts,loadShapeLine:Is,loadShapeNull:js,loadShapeRectangleRounded:Ps,loadShapeRectangle:Rs,loadShapeTriangleRounded:Zs,loadShapeTriangle:Vs,loadThemeWhiteAll:nl,loadThemeWhiteBase:sh,loadThemeWhiteBoard:oh,loadThemeWhiteButtonAll:Fo,loadThemeWhiteButtonAmbient:dh,loadThemeWhiteButtonCheckRight:wh,loadThemeWhiteButtonCheck:mh,loadThemeWhiteButtonColorGradient:Gh,loadThemeWhiteButtonColor:jh,loadThemeWhiteButtonDanger:Vh,loadThemeWhiteButtonDate:bo,loadThemeWhiteButtonDatetime:Oo,loadThemeWhiteButtonFile:Mo,loadThemeWhiteButtonPrimary:ko,loadThemeWhiteButtonRadioRight:Co,loadThemeWhiteButtonRadio:yo,loadThemeWhiteButtonSecondary:Ao,loadThemeWhiteButtonTime:_o,loadThemeWhiteButton:vh,loadThemeWhiteCanvasContainer:Ho,loadThemeWhiteDiagramEditor:Nc,loadThemeWhiteDiagram:Sc,loadThemeWhiteDialogAll:rf,loadMenuItemAll:Vi,loadThemeWhiteDialogColor:Ch,loadThemeWhiteDialogCommand:xc,loadThemeWhiteDialogConfirmDelete:Lc,loadThemeWhiteDialogConfirmDiscard:_c,loadThemeWhiteDialogConfirm:Bc,loadThemeWhiteDialogDate:vo,loadThemeWhiteDialogDatetime:To,loadThemeWhiteDialogInputText:Pc,loadThemeWhiteDialogMessage:zc,loadThemeWhiteDialogProcessing:Xc,loadThemeWhiteDialogSaveAs:Kc,loadThemeWhiteDialogSelect:nf,loadThemeWhiteDialogTime:Wo,loadThemeWhiteDialog:yc,loadThemeWhiteDropdown:If,loadThemeWhiteExpandable:Cf,loadThemeWhiteImage:jf,loadThemeWhiteInputAll:Zf,loadThemeWhiteInputAndLabel:Rf,loadThemeWhiteInputInteger:zf,loadThemeWhiteInputLabel:Hf,loadThemeWhiteInputReal:Yf,loadThemeWhiteInputText:Jf,loadThemeWhiteLayout:qf,loadThemeWhiteList:Qf,loadThemeWhiteMenuBar:na,loadThemeWhiteMenuSided:ma,loadThemeWhiteMenu:kf,loadThemeWhiteNote:wa,loadThemeWhitePane:Ma,loadThemeWhitePickerColorGradient:Uh,loadThemeWhitePickerColor:xh,loadThemeWhitePickerDate:lo,loadThemeWhitePickerDatetime:ao,loadThemeWhitePickerTime:fo,loadThemeWhiteScrollBar:Sa,loadThemeWhiteSelect:ka,loadThemeWhiteShapeActionValue:Ic,loadThemeWhiteTable:$a,loadThemeWhiteText:tl,loadThemeWhite:th,ESnapperGrid:rl,ESnapperResultScale:function(){this.distance=NaN,this.scale=new t.Point},ESnapperResult:el,get ESnapperTargetValueType(){return yf},ESnapperTargetValue:sl,ESnapperTarget:hl,get ESnapperModifierAnchor(){return ul},ESnapper:ol,DThemeWhiteMenuItemExpandableHeader:vf,DThemeWhiteAtlas:Qs,DThemeWhiteBoard:hh,DThemeWhiteButtonAmbient:bh,DThemeWhiteButtonBase:ah,DThemeWhiteButtonCheckRight:ph,DThemeWhiteButtonCheck:gh,DThemeWhiteButtonColorGradient:_h,DThemeWhiteButtonColor:Oh,DThemeWhiteButtonDanger:Hh,DThemeWhiteButtonDate:Kh,DThemeWhiteButtonDatetime:wo,DThemeWhiteButtonFile:So,DThemeWhiteButtonPrimary:Eo,DThemeWhiteButtonRadioRight:xo,DThemeWhiteButtonRadio:No,DThemeWhiteButtonSecondary:jo,DThemeWhiteButtonTime:Ro,DThemeWhiteButton:lh,DThemeWhiteCanvasContainer:Go,DThemeWhiteCanvas:Po,DThemeWhiteChart:Vo,DThemeWhiteContent:Da,DThemeWhiteDiagramBase:wc,DThemeWhiteDiagramCanvasBase:Tc,DThemeWhiteDiagramCanvasEditor:Mc,DThemeWhiteDiagramCanvas:Oc,DThemeWhiteDiagramEditor:Ec,DThemeWhiteDiagram:Dc,DThemeWhiteDialogColorGradient:Fh,DThemeWhiteDialogColor:Ih,DThemeWhiteDialogCommand:kh,DThemeWhiteDialogConfirmDelete:Rc,DThemeWhiteDialogConfirmDiscard:Wc,DThemeWhiteDialogConfirmMessage:Ac,DThemeWhiteDialogConfirm:Cc,DThemeWhiteDialogDate:Jh,DThemeWhiteDialogDatetime:Do,DThemeWhiteDialogInputText:Fc,DThemeWhiteDialogMessage:Uc,DThemeWhiteDialogProcessingMessage:Vc,DThemeWhiteDialogProcessing:Hc,DThemeWhiteDialogSaveAs:Yc,DThemeWhiteDialogSelectListItem:tf,DThemeWhiteDialogSelectList:Qc,DThemeWhiteDialogSelect:Jc,DThemeWhiteDialogTime:Lo,DThemeWhiteDialog:Eh,DThemeWhiteDropdown:ef,DThemeWhiteExpandableHeader:xf,DThemeWhiteExpandable:Nf,DThemeWhiteFont:rh,DThemeWhiteImageBase:fh,DThemeWhiteImage:jc,DThemeWhiteInputAndLabel:Bf,DThemeWhiteInputInteger:Uf,DThemeWhiteInputLabel:Gf,DThemeWhiteInputNumber:Ff,DThemeWhiteInputReal:Xf,DThemeWhiteInputText:Kf,DThemeWhiteInput:_f,DThemeWhiteLayoutHorizontal:Af,DThemeWhiteLayoutSpace:Of,DThemeWhiteLayoutVertical:sf,DThemeWhiteLayout:uf,DThemeWhiteListItemSeparator:wf,DThemeWhiteListItem:$c,DThemeWhiteList:qc,DThemeWhiteMenuBarItem:ta,DThemeWhiteMenuBar:$f,DThemeWhiteMenuItemCheck:ff,DThemeWhiteMenuItemExpandableBody:lf,DThemeWhiteBase:uh,DThemeWhiteMenuItemExpandableItemCheck:bf,DThemeWhiteMenuItemExpandableItemLink:gf,DThemeWhiteMenuItemExpandableItemMenu:pf,DThemeWhiteMenuItemExpandableItemSeparator:Tf,DThemeWhiteMenuItemExpandableItemSpace:Mf,DThemeWhiteMenuItemExpandableItemText:Ef,DThemeWhiteMenuItemExpandable:af,DThemeWhiteMenuItemLink:df,DThemeWhiteMenuItemMenu:mf,DThemeWhiteMenuItemSeparator:Df,DThemeWhiteMenuItemSpace:Sf,DThemeWhiteMenuItemText:cf,DThemeWhiteMenuItem:of,DThemeWhiteMenuSidedContent:ra,DThemeWhiteMenuSidedItemCheck:ea,DThemeWhiteMenuSidedItemExpandableItemCheck:sa,DThemeWhiteMenuSidedItemExpandableItemLink:ha,DThemeWhiteMenuSidedItemExpandableItemMenu:oa,DThemeWhiteMenuSidedItemExpandableItemSeparator:ca,DThemeWhiteMenuSidedItemExpandableItemSpace:fa,DThemeWhiteMenuSidedItemExpandableItemText:aa,DThemeWhiteMenuSidedItemExpandable:ua,DThemeWhiteMenuSidedItemLink:la,DThemeWhiteMenuSidedItemMenu:va,DThemeWhiteMenuSidedItemSeparator:ba,DThemeWhiteMenuSidedItemSpace:da,DThemeWhiteMenuSidedItemText:ga,DThemeWhiteMenuSided:ia,DThemeWhiteMenu:hf,DThemeWhiteNote:pa,DThemeWhitePane:Zc,DThemeWhitePickerColorGradient:Ph,DThemeWhitePickerColor:yh,DThemeWhitePickerDate:io,DThemeWhitePickerDatetimeButtonBack:ro,DThemeWhitePickerDatetimeButtonDate:eo,DThemeWhitePickerDatetimeButtonNext:uo,DThemeWhitePickerDatetimeLabelDate:oo,DThemeWhitePickerDatetimeLabel:ho,DThemeWhitePickerDatetimeSpace:co,DThemeWhitePickerDatetime:no,DThemeWhitePickerTime:Zh,DThemeWhiteScrollBarThumb:Oa,DThemeWhiteScrollBar:Ta,DThemeWhiteSelect:Ea,DThemeWhiteTableBodyCellCheck:xa,DThemeWhiteTableBodyCellColor:Ca,DThemeWhiteTableBodyCellDate:Aa,DThemeWhiteTableBodyCellDatetime:Ra,DThemeWhiteTableBodyCellIndex:Wa,DThemeWhiteTableBodyCellInputInteger:_a,DThemeWhiteTableBodyCellInputReal:Fa,DThemeWhiteTableBodyCellInputText:Pa,DThemeWhiteTableBodyCellSelectDialog:Ua,DThemeWhiteTableBodyCellSelectFetcher:za,DThemeWhiteTableBodyCellSelectMenu:Ga,DThemeWhiteTableBodyCellText:Ha,DThemeWhiteTableBodyCellTime:Xa,DThemeWhiteTableBodyCells:ya,DThemeWhiteTableBodyRowEven:Ja,DThemeWhiteTableBodyRowOdd:Za,DThemeWhiteTableBodyRow:Ka,DThemeWhiteTableBody:Na,DThemeWhiteTableHeaderCell:Qa,DThemeWhiteTableHeader:qa,DThemeWhiteTableRow:Ya,DThemeWhiteTable:Ia,DThemeWhiteTextBase:ch,DThemeWhiteText:so,DThemeWhite:$s,EThemeWhiteShapeActionValue:kc,DThemes:K,UtilDrag:Bn,DynamicAtlasItemEmpty:Mt,DynamicAtlasItemImage:kt,DynamicAtlasItemText:It,DynamicAtlasItemWhite:Nt,DynamicAtlasItem:St,DynamicAtlas:yt,DynamicFontAtlasCharacterOrigin:rt,DynamicFontAtlasCharacter:et,DynamicFontAtlasFont:ut,DynamicFontAtlas:ht,DynamicFontAtlases:lt,DynamicSDFFontAtlas:Ct,DynamicSDFFontAtlases:jt,DynamicSDFFontGenerator:xt,Lazy:At,NumberFormatterImpl:vn,NumberFormatters:bn,UtilAlpha:dn,UtilSvgAtlasBuilder:wn,get UtilAttachAlign(){return pn},UtilAttach:Tn,utilCeilingIndex:function(t,n){for(var i=0,r=t.length-1;i<=r;){var e=i+(r-i>>1),u=t[e];if(n<u)r=e-1;else{if(!(u<n))return e;i=e+1}}return Math.max(i,r)},UtilClickOutside:On,UtilClipboard:En,UtilDragEasingHistory:kn,UtilDragEasing:yn,DynamicAtlasItemFontAtlas:Et,UtilExtract:Wn,UtilExtractor:Rn,UtilFileDownloader:Ln,get UtilFileAs(){return xn},UtilFileOpener:Pn,UtilHsv:Un,utilIndexOf:zn,utilIsArray:Gn,utilIsFunction:u,utilIsNaN:Hn,utilIsNumber:a,utilIsString:o,UtilKeyboardEvent:R,UtilName:J,utilPad:Zt,UtilPointerEvent:Z,UtilPromise:Vn,UtilRgb:Xn,UtilRgba:Yn,UtilTexturePlane:Kn,UtilTexture:Jn,utilToString:Zn,utilToSvgTexture:function(n,i){return t.Texture.from(mn(n),{resolution:i})},utilToSvgUrl:mn,UtilTransition:qn,UtilWheelEvent:Qn,get DAlignHorizontal(){return V},get DAlignVertical(){return X},get DAlignWith(){return Y},DAnimationBase:Nn,DAnimationEmpty:cl,DAnimationFadeIn:Sh,DAnimationTimings:In,DApplicationOptions:al,DApplicationPadding:fl,DApplication:dl,DApplications:e,DBaseBackground:s,DBaseBorder:c,DBaseCorner:l,get DBaseInteractive(){return f},DBaseOutline:b,DBasePadding:d,DBasePoint:g,DBaseReflowable:O,get DBaseState(){return v},DBaseStates:M,DBase:$,DBoard:gl,get DBorderMask(){return r},DButtonAmbient:wl,DButtonBase:ml,DButtonCheckRight:Tl,DButtonCheck:Dl,DButtonColorGradient:zl,DButtonColor:Hl,DButtonDanger:Vl,DButtonDate:fv,DButtonDatetime:vv,DButtonFileAs:bv,DButtonFile:dv,DButtonGroup:gv,DButtonPrimary:Ol,DButtonRadioRight:pv,DButtonRadio:mv,DButtonRedo:wv,DButtonSecondary:Dv,DButtonTime:Sv,DButtonUndo:Mv,DButton:pl,DCanvasContainer:yv,DCanvas:xv,DChartAxisBase:jv,DChartAxisContainerImpl:Av,DChartAxisX:Bv,DChartAxisY:Rv,get DChartAxisPosition(){return Uo},get DChartAxisTickPosition(){return zo},DChartColorSet1:function(t){return Lv[t%Lv.length]},DChartColorSet2:_v,DChartCoordinateContainerImpl:Uv,DChartCoordinateLinear:Gv,get DChartCoordinateDirection(){return ll},DChartPlotAreaImpl:Yv,get DChartPlotAreaFitTarget(){return Fv},DChartRegionImplObservable:zv,DChartRegionImpl:Hv,DChartSeriesContainerImpl:Xv,DChartSeriesLine:Jv,DChartSeriesStrokeImpl:Vv,DChart:Zv,DCommandClear:k,DCommandCreate:qv,DCommandDelete:Qv,get DCommandFlag(){return S},DCommandRedo:I,DCommandSaveAs:$v,DCommandSave:tb,DCommandUndo:N,DContent:nb,DControllerDefaultCommand:x,DControllerDefaultFocus:B,DControllerKeyboard:L,DControllers:W,DCoordinateSet:H,get DCornerMask(){return h},DDiagramCanvasBase:hb,DDiagramCanvasEditor:ob,DDiagramCanvasTileMappingImpl:rb,DDiagramCanvasTileMappingPointImpl:ib,DDiagramCanvas:cb,DDiagramEditor:lb,DDiagramLayerContainer:sb,DDiagramLayer:ub,DDiagramSerializedVersion:1,DDiagram:vb,DDiagrams:fb,DDialogColorGradient:Ul,DDialogColor:Gl,DDialogCommand:Ml,DDialogConfirmDelete:gb,DDialogConfirmDiscard:mb,DDialogConfirmMessage:bb,DDialogConfirm:db,DDialogDate:ov,DDialogDates:cv,DDialogDatetime:av,DDialogDatetimes:lv,DDialogInputText:pb,DDialogMessage:wb,DDialogProcessingMessage:Db,DDialogProcessing:Tb,DDialogSaveAs:Ob,DDialogSelectListItem:Sb,DDialogSelectList:Rb,DDialogSelect:zb,DDialogTime:Tv,DDialogTimes:Ov,get DDialogCloseOn(){return Dh},DDialog:Mh,get DDragMode(){return Io},DDropdown:Xb,DDynamicTextGeometry:tt,DDynamicTextStyle:nt,DDynamicText:vt,DExpandableHeader:Yb,DExpandable:Kb,DImageBase:gt,DImage:mt,DInputAndLabel:xl,DInputIntegerAndLabel:Jb,DInputInteger:Ql,DInputLabel:yl,DInputNumber:kl,DInputRealAndLabel:Cl,EShapeRenderer:cc,EShapeActionRuntimeTransformMoveLeftOrRight:hu,EShapeActionBases:Rr,EShapeActionRuntimeBlinkColorFill:Ur,EShapeActionRuntimeBlinkColorStroke:zr,EShapeActionRuntimeBlinkDarken:Gr,EShapeActionRuntimeBlinkOpacity:Hr,EShapeActionRuntimeBlinkVisibility:Vr,EShapeActionRuntimeBlink:Fr,EShapeActionRuntimeChangeColorAll:ie,EShapeActionRuntimeChangeColorBrightnessAll:ae,EShapeActionRuntimeChangeColorBrightnessFillAndStroke:ve,EShapeActionRuntimeChangeColorBrightnessFill:le,EShapeActionRuntimeChangeColorBrightnessStroke:be,EShapeActionRuntimeChangeColorBrightnessTextOutline:ge,EShapeActionRuntimeChangeColorBrightnessText:de,EShapeActionRuntimeChangeColorBrightness:fe,EShapeActionRuntimeChangeColorCodeAll:Oe,EShapeActionRuntimeChangeColorCodeFillAndStroke:Me,EShapeActionRuntimeChangeColorCodeFill:Se,EShapeActionRuntimeChangeColorCodeStroke:Ee,EShapeActionRuntimeChangeColorCodeTextOutline:Ie,EShapeActionRuntimeChangeColorCodeText:ke,EShapeActionRuntimeChangeColorCode:Te,EShapeActionRuntimeChangeColorFillAndStroke:ee,EShapeActionRuntimeChangeColorFill:re,EShapeActionRuntimeChangeColorStroke:ue,EShapeActionRuntimeChangeColorTextOutline:he,EShapeActionRuntimeChangeColorText:se,EShapeActionRuntimeChangeColor:ne,EShapeActionRuntimeChangeCursor:xe,EShapeActionRuntimeChangeTextNumber:Ae,EShapeActionRuntimeChangeTextText:Re,EShapeActionRuntimeConditional:_r,EShapeActionRuntimeEmitEvent:Fe,EShapeActionRuntimeMiscInputData:Ue,EShapeActionRuntimeMiscInput:ze,EShapeActionRuntimeOpenFlow:Ye,EShapeActionRuntimeOpenPageInplace:Je,EShapeActionRuntimeOpenPage:Ke,EShapeActionRuntimeOpen:Xe,EShapeActionRuntimeShowHide:tu,EShapeActionRuntimeTransformMoveAbsoluteX:eu,EShapeActionRuntimeTransformMoveAbsoluteY:uu,EShapeActionRuntimeTransformMoveForwardOrBackward:su,EShapeActionRuntimeBlinkBrighten:Pr,EShapeActionRuntimeTransformMoveRelativeX:ou,EShapeActionRuntimeTransformMoveRelativeY:cu,EShapeActionRuntimeTransformMove:ru,EShapeActionRuntimeTransformResizeHeightAbsolute:pu,EShapeActionRuntimeTransformResizeHeightRelative:wu,EShapeActionRuntimeTransformResizeSizeAbsolute:Du,EShapeActionRuntimeTransformResizeSizeRelative:Tu,EShapeActionRuntimeTransformResizeWidthAbsolute:Ou,EShapeActionRuntimeTransformResizeWidthRelative:Su,EShapeActionRuntimeTransformResize:mu,EShapeActionRuntimeTransformRotateAbsolute:Iu,EShapeActionRuntimeTransformRotateRelative:Nu,EShapeActionRuntimeTransformRotate:ku,EShapeActionRuntime:Lr,EShapeActionValueBase:Yr,get EShapeActionValueBlinkType(){return Or},EShapeActionValueBlink:Qr,EShapeActionValueChangeColorBrightness:me,EShapeActionValueChangeColorCode:Ne,get EShapeActionValueChangeColorType(){return Jr},get EShapeActionValueChangeColorTarget(){return Zr},EShapeActionValueChangeColor:oe,EShapeActionValueChangeCursor:Ce,get EShapeActionValueChangeTextType(){return $r},EShapeActionValueChangeText:We,EShapeActionValueDeserializer:Cu,EShapeActionValueEmitEvent:Pe,get EShapeActionValueMiscType(){return Le},EShapeActionValueMisc:He,get EShapeActionValueOpenType(){return Ge},EShapeActionValueOpen:qe,EShapeActionValueOpetyped:fu,get EShapeActionValueShowHideType(){return Ze},EShapeActionValueShowHide:nu,EShapeActionValueSubtyped:Kr,get EShapeActionValueTransformMoveType(){return Qe},EShapeActionValueTransformMove:lu,get EShapeActionValueTransformResizeType(){return au},EShapeActionValueTransformResize:Mu,get EShapeActionValueTransformRotateType(){return bu},EShapeActionValueTransformRotate:xu,get EShapeActionValueTransformType(){return $e},get EShapeActionValueType(){return Xr},EShapeActionValues:qr,EShapeAction:er,EShapeBufferCount:tc,EShapeBufferUnitBuilder:ic,EShapeBufferUnit:nc,EShapeBuffer:rc,EShapeCapabilities:As,get EShapeCapability(){return yu},EShapeContainer:fc,get EShapeCorner(){return qi},EShapeDeleter:lc,EShapeDefaults:rr,EShapeDeserializer:Bu,EShapeDeserializers:Xi,EShapeEditor:Xu,EShapeImageElements:ju,EShapePointsStyleUploadeds:Zi,get EShapePointsStyle(){return Yi},EShapeRendererIteratorDatum:uc,EShapeRendererIterator:sc,EShapeImages:vs,EShapeBarPoints:$i,EShapeBarUploaded:Ar,EShapeBarUploadeds:Br,EShapeBar:yr,EShapeBars:Ru,EShapeBase:fr,EShapeCircleUploaded:Wu,EShapeCircleUploadeds:_u,EShapeCircle:Fu,EShapeCircles:Pu,EShapeFillImpl:ar,EShapeGradients:cr,EShapeGroupFillEditor:Hu,EShapeGroupFillViewer:Xo,EShapeGroupPoints:Vu,EShapeGroupShadowed:os,EShapeGroupShadoweds:cs,EShapeGroupSizeEditor:Ju,EShapeGroupSizeLayout:Ku,EShapeGroupSizeShadowed:hs,EShapeGroupSizeViewer:Zu,EShapeGroupStrokeEditor:qu,EShapeGroupStrokeViewer:Yo,EShapeGroupTextAlignEditor:Qu,EShapeGroupTextAlignViewer:Ko,EShapeGroupTextEditor:rs,EShapeGroupTextOffsetEditor:$u,EShapeGroupTextOffsetViewer:Jo,EShapeGroupTextOutlineEditor:ts,EShapeGroupTextOutlineViewer:Zo,EShapeGroupTextPaddingEditor:ns,EShapeGroupTextPaddingViewer:qo,EShapeGroupTextSpacingEditor:is,EShapeGroupTextSpacingViewer:Qo,EShapeGroupTextViewer:$o,EShapeGroupUploaded:zu,EShapeGroupUploadeds:Gu,EShapeGroup:es,EShapeGroups:us,EShapeImage:ls,get EShapeBarPosition(){return Ji},EShapeLabelUploaded:ms,EShapeLabelUploadeds:ps,EShapeLabel:ws,EShapeLabels:Ds,EShapeLineBase:Nr,EShapeLinePoints:Ms,EShapeLineUploaded:Os,EShapeLineUploadeds:Ss,EShapeLine:Es,EShapeLines:ks,EShapeNullUploaded:Ns,EShapeNullUploadeds:ys,EShapeNull:xs,EShapeNulls:Cs,EShapePrimitive:Ir,EShapeRectangleRoundedUploaded:Ls,EShapeRectangleRoundedUploadeds:Ws,EShapeRectangleRounded:_s,EShapeRectangleRoundeds:Fs,EShapeRectangleUploaded:bs,EShapeRectangleUploadeds:ds,EShapeRectangle:as,EShapeRectangles:Bs,EShapeStrokeImpl:lr,EShapeTagImpl:Tr,EShapeTagValueImpl:Dr,EShapeTagValueRangeImpl:pr,EShapeTextAlignImpl:Sr,EShapeTextImpl:kr,EShapeTextOffsetImpl:Mr,EShapeTextOutlineImpl:Er,EShapeTextUploaded:jr,EShapeTextUploadeds:Cr,EShapeTriangleRoundedUploaded:Xs,EShapeTriangleRoundedUploadeds:Ys,EShapeTriangleRounded:Ks,EShapeTriangleRoundeds:Js,EShapeTriangleUploaded:Us,EShapeTriangleUploadeds:zs,EShapeTriangle:Gs,EShapeTriangles:Hs,EShapeResourceManagerDeserialization:Au,EShapeResourceManagerSerialization:vc,get EShapeRuntimeReset(){return nr},get EShapeRuntimeState(){return ir},EShapeRuntime:hr,EShapeRuntimes:bc,EShapeSearch:ac,EShapeSizes:vu,get EShapeStrokeSide(){return Qi},get EShapeTagValueRangeType(){return sr},get EShapeTagValueOrder(){return ur},get EShapeTextAlignHorizontal(){return dr},get EShapeTextAlignVertical(){return gr},get EShapeTextDirection(){return mr},get EShapeTextWeight(){return vr},get EShapeTextStyle(){return br},EShapeTransformImpl:or,EShapeTransforms:Yu,get EShapeType(){return ci},EShapeUploadedBase:xr,EShapeUploadeds:Ki,get EShapeCopyPart(){return tr},DInputTextAndLabel:Al,DInputText:jl,DInput:El,get DLayoutClearType(){return G},DLayoutHorizontal:Sl,DLayoutSpace:si,DLayoutVertical:gi,get DLayoutDirection(){return $n},DLayout:di,DListItemSeparatorReflowable:ri,DListItemSeparator:ei,DListItem:pt,get DListSelectionMode(){return Kv},DListSelection:Mb,DList:Bb,DMapCoordinateEPSG3857:Zb,DMapCoordinates:qb,DMapTilePlane:$b,DMapTilePyramidImpl:td,DMapTile:Qb,DMapTileUrlBuilderKokudo:function(t,n,i){return 5<=t?"https://cyberjapandata.gsi.go.jp/xyz/pale/"+t+"/"+n+"/"+i+".png":2<=t?"https://cyberjapandata.gsi.go.jp/xyz/std/"+t+"/"+n+"/"+i+".png":"https://cyberjapandata.gsi.go.jp/xyz/earthhillshade/"+t+"/"+n+"/"+i+".png"},DMapTileUrlBuilderOsm:function(t,n,i){return"https://"+"abc"[(n+i)%3]+".tile.openstreetmap.org/"+t+"/"+n+"/"+i+".png"},DMapTileUrlBuilderOsmfj:nd,DMapTilePyramids:id,DMenuAlign:ni,DMenuBarBlocker:ed,DMenuBarItem:rd,DMenuBar:ud,DMenuContext:Gb,DMenuItemCheck:Tt,DMenuItemExpandableBody:mi,DMenuItemExpandableHeader:pi,DMenuItemExpandableItemCheck:Ti,DMenuItemExpandableItemLink:Oi,DMenuItemExpandableItemMenu:Fi,DMenuItemExpandableItemSeparator:Si,DMenuItemExpandableItemSpace:Mi,DMenuItemExpandableItemText:Ei,DMenuItemExpandable:Di,DMenuItemExpandables:wi,get DMenuItemLinkMenuItemId(){return _n},get DMenuItemLinkTarget(){return Fn},DMenuItemLink:ti,DMenuItemMenu:ii,DMenuItemSeparator:ui,DMenuItemSpace:hi,DMenuItemText:Dt,DMenuItem:wt,DMenuSidedItemCheck:Ii,DMenuSidedItemExpandableItemCheck:Wi,DMenuSidedItemExpandableItemLink:_i,DMenuSidedItemExpandableItemMenu:Pi,DMenuSidedItemExpandableItemSeparator:Ui,DMenuSidedItemExpandableItemSpace:zi,DMenuSidedItemExpandableItemText:Gi,DMenuSidedItemExpandable:Li,DMenuSidedItemExpandables:Ri,DMenuSidedItemLink:Ni,DMenuSidedItemMenu:yi,DMenuSidedItemSeparator:xi,DMenuSidedItemSpace:Ci,DMenuSidedItemText:ji,DMenuSided:fd,DMenuSideds:Ai,DMenu:Hb,DMenus:Ot,get DMouseModifier(){return Dn},DMouseModifiers:Cn,DNote:Lb,DNotification:ad,DPagination:ld,DPane:Ab,DPickerColorAndAlpha:Bl,DPickerColorGradientDataView:Wl,DPickerColorGradientData:Rh,DPickerColorGradientPoint:Ah,DPickerColorGradientRecent:Fl,DPickerColorGradient:Pl,DPickerColorRecent:Rl,DPickerColor:Ll,DPickerDate:hv,DPickerDates:Xh,DPickerDatetimeButtonBack:Xl,DPickerDatetimeButtonDate:Yl,DPickerDatetimeButtonNext:Kl,DPickerDatetimeLabelDate:Zl,DPickerDatetimeLabel:Jl,get DPickerDatetimeMask(){return Lh},DPickerDatetimeSpace:ql,DPickerDatetime:sv,DPickerDatetimes:mo,DPickerDatetimeRange:vd,DPickerTimeRange:bd,DPickerTimeBoundHours:tv,DPickerTimeBoundMinutes:nv,DPickerTimeBoundSeconds:iv,DPickerTimeBounds:rv,DPickerTime:uv,DPickerTimes:go,DScalarExpression:U,DScalarFunctions:z,DScrollBarHorizontal:yb,DScrollBarThumbHorizontal:Nb,DScrollBarThumbReflowableHorizontal:Ib,DScrollBarThumbReflowableVertical:xb,DScrollBarThumbVertocal:Cb,DScrollBarThumb:kb,DScrollBarVertical:jb,DScrollBar:Eb,DSelect:dd,DShadowImpl:nh,DSliderRange:gd,DSlider:md,DTableBodyCellCheck:pd,DTableBodyCellColor:Dd,DTableBodyCellIndex:Td,DTableBodyCellInputInteger:Od,DTableBodyCellInputReal:Sd,DTableBodyCellInputText:Md,DTableBodyCellSelectDialog:Ed,DTableBodyCellSelectFetcher:kd,DTableBodyCellSelectMenu:Id,DTableBodyCellText:Nd,DTableBodyFilterImpl:xd,DTableBodyRowEven:_d,DTableBodyRowOdd:Fd,DTableBodyRow:Wd,DTableBody:zd,get DTableColumnType(){return hd},DTableHeaderCell:Gd,DTableHeader:Hd,DTableRow:Rd,get DTableSelectionType(){return Bd},DTableSelection:Ud,DTable:tg,DTextBase:dt,DText:Nl,DTree:ng});il();var rg=window;rg.wcardinal=rg.wcardinal||{},rg.wcardinal.ui=ig}(PIXI);
//# sourceMappingURL=wcardinal-ui.min.js.map
