{"version":3,"file":"wcardinal-ui.min.js","sources":["../../../node_modules/tslib/tslib.es6.js","wcardinal/ui/d-applications.ts","wcardinal/ui/d-border.ts","wcardinal/ui/util/util-is-function.ts","wcardinal/ui/d-base-background.ts","wcardinal/ui/util/util-is-string.ts","wcardinal/ui/d-corner.ts","wcardinal/ui/d-base-border.ts","wcardinal/ui/util/util-is-number.ts","wcardinal/ui/d-base-interactive.ts","wcardinal/ui/d-base-corner.ts","wcardinal/ui/d-base-outline.ts","wcardinal/ui/d-base-state.ts","wcardinal/ui/d-base-padding.ts","wcardinal/ui/d-base-point.ts","wcardinal/ui/d-base-background-mesh-geometry.ts","wcardinal/ui/d-base-background-mesh.ts","wcardinal/ui/d-base-border-mesh-geometry.ts","wcardinal/ui/d-base-border-mesh.ts","wcardinal/ui/d-base-outline-mesh.ts","wcardinal/ui/d-base-reflowable.ts","wcardinal/ui/d-base-states.ts","wcardinal/ui/d-scalar-expression.ts","wcardinal/ui/d-coordinates.ts","wcardinal/ui/d-scalar-functions.ts","wcardinal/ui/d-layout-clear-type.ts","wcardinal/ui/theme/d-themes.ts","wcardinal/ui/d-align-horizontal.ts","wcardinal/ui/d-align-vertical.ts","wcardinal/ui/d-align-with.ts","wcardinal/ui/util/util-keyboard-event.ts","wcardinal/ui/util/util-pointer-event.ts","wcardinal/ui/d-base.ts","wcardinal/ui/d-dynamic-text-measure-result-character.ts","wcardinal/ui/d-dynamic-text-measure-result.ts","wcardinal/ui/util/util-character-iterator.ts","wcardinal/ui/d-dynamic-text-measure.ts","wcardinal/ui/d-dynamic-text-geometry.ts","wcardinal/ui/d-dynamic-text-style.ts","wcardinal/ui/d-dynamic-text.ts","wcardinal/ui/d-base-overflow-mask-simple.ts","wcardinal/ui/d-text-base.ts","wcardinal/ui/d-image-base.ts","wcardinal/ui/d-image.ts","wcardinal/ui/d-list-item.ts","wcardinal/ui/d-menu-item.ts","wcardinal/ui/d-menu-item-text.ts","wcardinal/ui/d-menu-item-check.ts","wcardinal/ui/d-menus.ts","wcardinal/ui/util/dynamic-atlas-item.ts","wcardinal/ui/util/dynamic-atlas-item-empty.ts","wcardinal/ui/util/dynamic-atlas-item-font-atlas.ts","wcardinal/ui/util/dynamic-atlas-item-image.ts","wcardinal/ui/util/dynamic-atlas-item-text.ts","wcardinal/ui/util/dynamic-atlas-item-white.ts","wcardinal/ui/util/dynamic-atlas.ts","wcardinal/ui/util/dynamic-font-atlas-chaaracter-origin.ts","wcardinal/ui/util/dynamic-font-atlas-character.ts","wcardinal/ui/util/dynamic-font-atlas-font.ts","wcardinal/ui/util/ascii.ts","wcardinal/ui/util/dynamic-font-atlas.ts","wcardinal/ui/util/dynamic-font-atlases.ts","wcardinal/ui/util/dynamic-sdf-font-generator.ts","wcardinal/ui/util/dynamic-sdf-font-atlas.ts","wcardinal/ui/util/dynamic-sdf-font-atlases.ts","wcardinal/ui/util/lazy.ts","wcardinal/ui/util/format-node/format-node-a-large.ts","wcardinal/ui/util/format-node/format-node-a-small.ts","wcardinal/ui/util/format-node/format-node-d-large.ts","wcardinal/ui/util/format-node/format-node-d-small.ts","wcardinal/ui/util/format-node/format-node-precision.ts","wcardinal/ui/util/format-node/format-node-e.ts","wcardinal/ui/util/format-node/format-node-f.ts","wcardinal/ui/util/format-node/format-node-fsi.ts","wcardinal/ui/util/format-node/format-node-g.ts","wcardinal/ui/util/format-node/format-node-h-large.ts","wcardinal/ui/util/format-node/format-node-h-small.ts","wcardinal/ui/util/format-node/format-node-m-large.ts","wcardinal/ui/util/format-node/format-node-m-small.ts","wcardinal/ui/util/format-node/format-node-mi.ts","wcardinal/ui/util/format-node/format-node-p-large.ts","wcardinal/ui/util/format-node/format-node-p-small.ts","wcardinal/ui/util/util-pad.ts","wcardinal/ui/util/format-node/format-node-padding.ts","wcardinal/ui/util/format-node/format-node-parenthesis.ts","wcardinal/ui/util/format-node/format-node-plus.ts","wcardinal/ui/util/format-node/format-node-rp-large.ts","wcardinal/ui/util/format-node/format-node-rp-small.ts","wcardinal/ui/util/format-node/format-node-sdt.ts","wcardinal/ui/util/format-node/format-node-space.ts","wcardinal/ui/util/format-node/format-node-ssi.ts","wcardinal/ui/util/format-node/format-node-string.ts","wcardinal/ui/util/format-node/format-node-y-large.ts","wcardinal/ui/util/format-node/format-node-y-small.ts","wcardinal/ui/util/format-node/format-node-z.ts","wcardinal/ui/util/format-node/format-noder-d.ts","wcardinal/ui/util/format-node/format-nodes.ts","wcardinal/ui/util/number-formatter-impl.ts","wcardinal/ui/util/number-formatters.ts","wcardinal/ui/util/util-alpha.ts","wcardinal/ui/resource/svg-resource.ts","wcardinal/ui/util/util-to-svg-url.ts","wcardinal/ui/util/util-atlas-builder.ts","wcardinal/ui/util/util-attach.ts","wcardinal/ui/d-mouse-modifier.ts","wcardinal/ui/util/util-click-outside.ts","wcardinal/ui/util/util-clipboard.ts","wcardinal/ui/util/util-drag-easing-history.ts","wcardinal/ui/d-animation-timings.ts","wcardinal/ui/d-animation-base.ts","wcardinal/ui/util/util-drag-easing.ts","wcardinal/ui/d-mouse-modifiers.ts","wcardinal/ui/util/util-file-opener.ts","wcardinal/ui/util/util-drag.ts","wcardinal/ui/util/util-extractor.ts","wcardinal/ui/util/util-file-downloader.ts","wcardinal/ui/util/util-extract.ts","wcardinal/ui/d-menu-item-link.ts","wcardinal/ui/util/util-hsv.ts","wcardinal/ui/util/util-index-of.ts","wcardinal/ui/util/util-is-array.ts","wcardinal/ui/util/util-is-nan.ts","wcardinal/ui/util/util-name.ts","wcardinal/ui/util/util-overlay.ts","wcardinal/ui/util/util-promise.ts","wcardinal/ui/util/util-rgb.ts","wcardinal/ui/util/util-rgba.ts","wcardinal/ui/util/util-texture-plane.ts","wcardinal/ui/util/util-texture.ts","wcardinal/ui/util/util-to-string.ts","wcardinal/ui/util/util-transition.ts","wcardinal/ui/util/util-wheel-event.ts","wcardinal/ui/d-layout.ts","wcardinal/ui/d-menu-align.ts","wcardinal/ui/d-menu-item-menu.ts","wcardinal/ui/d-list-item-separator-reflowable.ts","wcardinal/ui/d-list-item-separator.ts","wcardinal/ui/d-menu-item-separator.ts","wcardinal/ui/d-layout-space.ts","wcardinal/ui/d-menu-item-space.ts","wcardinal/ui/load/load-menu-item.ts","wcardinal/ui/shape/e-shape-type.ts","wcardinal/ui/d-layout-vertical.ts","wcardinal/ui/d-menu-item-expandable-body.ts","wcardinal/ui/d-menu-item-expandable-header.ts","wcardinal/ui/d-menu-item-expandables.ts","wcardinal/ui/d-menu-item-expandable.ts","wcardinal/ui/d-menu-item-expandable-item-check.ts","wcardinal/ui/d-menu-item-expandable-item-link.ts","wcardinal/ui/d-menu-item-expandable-item-separator.ts","wcardinal/ui/d-menu-item-expandable-item-space.ts","wcardinal/ui/d-menu-item-expandable-item-text.ts","wcardinal/ui/load/load-menu-item-expandable.ts","wcardinal/ui/d-menu-sided-item-check.ts","wcardinal/ui/d-menu-sided-item-link.ts","wcardinal/ui/d-menu-sided-item-menu.ts","wcardinal/ui/d-menu-sided-item-separator.ts","wcardinal/ui/d-menu-sided-item-space.ts","wcardinal/ui/d-menu-sided-item-text.ts","wcardinal/ui/d-menu-sideds.ts","wcardinal/ui/load/load-menu-sided-item.ts","wcardinal/ui/d-menu-sided-item-expandables.ts","wcardinal/ui/d-menu-sided-item-expandable.ts","wcardinal/ui/d-menu-sided-item-expandable-item-check.ts","wcardinal/ui/d-menu-sided-item-expandable-item-link.ts","wcardinal/ui/d-menu-item-expandable-item-menu.ts","wcardinal/ui/d-menu-sided-item-expandable-item-menu.ts","wcardinal/ui/d-menu-sided-item-expandable-item-separator.ts","wcardinal/ui/d-menu-sided-item-expandable-item-space.ts","wcardinal/ui/d-menu-sided-item-expandable-item-text.ts","wcardinal/ui/load/load-menu-sided-item-expandable.ts","wcardinal/ui/load/load-menu-item-all.ts","wcardinal/ui/shape/e-shape-deserializers.ts","wcardinal/ui/shape/e-shape-uploadeds.ts","wcardinal/ui/shape/e-shape-points.ts","wcardinal/ui/shape/e-shape-points-style-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-bar-position.ts","wcardinal/ui/shape/variant/e-shape-bar-points.ts","wcardinal/ui/shape/e-shape-corner.ts","wcardinal/ui/shape/e-shape-stroke.ts","wcardinal/ui/shape/e-shape-defaults.ts","wcardinal/ui/shape/e-shape.ts","wcardinal/ui/shape/e-shape-runtime.ts","wcardinal/ui/shape/action/e-shape-action.ts","wcardinal/ui/shape/e-shape-tag-value.ts","wcardinal/ui/shape/e-shape-tag-value-range.ts","wcardinal/ui/shape/e-shape-transform.ts","wcardinal/ui/shape/variant/e-shape-gradients.ts","wcardinal/ui/shape/variant/e-shape-base.ts","wcardinal/ui/shape/variant/e-shape-fill-impl.ts","wcardinal/ui/shape/variant/e-shape-stroke-impl.ts","wcardinal/ui/shape/variant/e-shape-tag-value-range-impl.ts","wcardinal/ui/shape/e-shape-text.ts","wcardinal/ui/shape/e-shape-text-align-horizontal.ts","wcardinal/ui/shape/e-shape-text-align-vertical.ts","wcardinal/ui/shape/e-shape-text-direction.ts","wcardinal/ui/shape/variant/e-shape-tag-value-impl.ts","wcardinal/ui/shape/variant/e-shape-tag-impl.ts","wcardinal/ui/shape/variant/e-shape-text-align-impl.ts","wcardinal/ui/shape/action/e-shape-action-value-blink-type.ts","wcardinal/ui/shape/variant/e-shape-text-offset-impl.ts","wcardinal/ui/shape/variant/e-shape-text-outline-impl.ts","wcardinal/ui/shape/variant/e-shape-text-impl.ts","wcardinal/ui/shape/variant/e-shape-primitive.ts","wcardinal/ui/shape/variant/e-shape-line-base.ts","wcardinal/ui/shape/variant/e-shape-bar.ts","wcardinal/ui/shape/e-shape-uploaded.ts","wcardinal/ui/shape/variant/e-shape-text-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-text-uploaded.ts","wcardinal/ui/shape/variant/e-shape-bar-uploaded.ts","wcardinal/ui/shape/variant/e-shape-bar-uploadeds.ts","wcardinal/ui/shape/action/e-shape-action-bases.ts","wcardinal/ui/shape/action/e-shape-action-runtime.ts","wcardinal/ui/shape/action/e-shape-action-runtime-conditional.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-brighten.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-color-fill.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-color-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-darken.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-opacity.ts","wcardinal/ui/shape/action/e-shape-action-runtime-blink-visibility.ts","wcardinal/ui/shape/action/e-shape-action-value-base.ts","wcardinal/ui/shape/action/e-shape-action-value-type.ts","wcardinal/ui/shape/action/e-shape-action-value-subtyped.ts","wcardinal/ui/shape/action/e-shape-action-values.ts","wcardinal/ui/shape/action/e-shape-action-value-change-color-type.ts","wcardinal/ui/shape/action/e-shape-action-value-blink.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color.ts","wcardinal/ui/shape/action/e-shape-action-value-change-text-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-all.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-fill.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-fill-and-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-text.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-text-outline.ts","wcardinal/ui/shape/action/e-shape-action-value-change-color.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-all.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-fill.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-fill-and-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-text.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-brightness-text-outline.ts","wcardinal/ui/shape/action/e-shape-action-value-change-color-brightness.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-all.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-fill.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-fill-and-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-stroke.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-text.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-color-code-text-outline.ts","wcardinal/ui/shape/action/e-shape-action-value-change-color-code.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-cursor.ts","wcardinal/ui/shape/action/e-shape-action-value-change-cursor.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-text-number.ts","wcardinal/ui/shape/action/e-shape-action-runtime-change-text-text.ts","wcardinal/ui/shape/action/e-shape-action-value-change-text.ts","wcardinal/ui/shape/action/e-shape-action-value-misc-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-emit-event.ts","wcardinal/ui/shape/action/e-shape-action-value-emit-event.ts","wcardinal/ui/shape/action/e-shape-action-runtime-misc-input-data.ts","wcardinal/ui/shape/action/e-shape-action-runtime-misc-input.ts","wcardinal/ui/shape/action/e-shape-action-value-misc.ts","wcardinal/ui/shape/action/e-shape-action-value-open-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-open.ts","wcardinal/ui/shape/action/e-shape-action-runtime-open-flow.ts","wcardinal/ui/shape/action/e-shape-action-runtime-open-page.ts","wcardinal/ui/shape/action/e-shape-action-runtime-open-page-inplace.ts","wcardinal/ui/shape/action/e-shape-action-value-open.ts","wcardinal/ui/shape/action/e-shape-action-value-show-hide-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-show-hide.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-move-type.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-type.ts","wcardinal/ui/shape/action/e-shape-action-value-show-hide.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-absolute-x.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-absolute-y.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-forward-or-backward.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-left-or-right.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-relative-x.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-move-relative-y.ts","wcardinal/ui/shape/action/e-shape-action-value-opetyped.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-move.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-resize-type.ts","wcardinal/ui/shape/e-shape-sizes.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-rotate-type.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-height-absolute.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-height-relative.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-size-absolute.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-size-relative.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-width-absolute.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-resize-width-relative.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-resize.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-rotate.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-rotate-absolute.ts","wcardinal/ui/shape/action/e-shape-action-runtime-transform-rotate-relative.ts","wcardinal/ui/shape/action/e-shape-action-value-transform-rotate.ts","wcardinal/ui/shape/e-shape-capability.ts","wcardinal/ui/shape/action/e-shape-action-value-deserializer.ts","wcardinal/ui/shape/e-shape-image-elements.ts","wcardinal/ui/shape/e-shape-resource-manager-deserialization.ts","wcardinal/ui/shape/e-shape-deserializer.ts","wcardinal/ui/shape/variant/e-shape-bars.ts","wcardinal/ui/load/load-shape-bar.ts","wcardinal/ui/shape/variant/e-shape-circle-uploaded.ts","wcardinal/ui/shape/variant/e-shape-circle-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-circle.ts","wcardinal/ui/shape/variant/e-shape-circles.ts","wcardinal/ui/load/load-shape-circle.ts","wcardinal/ui/shape/variant/e-shape-group-uploaded.ts","wcardinal/ui/shape/variant/e-shape-group-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-group-fill-editor.ts","wcardinal/ui/shape/variant/e-shape-group-points.ts","wcardinal/ui/shape/e-shape-editor.ts","wcardinal/ui/shape/e-shape-transforms.ts","wcardinal/ui/shape/variant/e-shape-group-size-layout.ts","wcardinal/ui/shape/variant/e-shape-group-size-editor.ts","wcardinal/ui/shape/variant/e-shape-group-size-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-stroke-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-align-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-offset-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-outline-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-padding-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-spacing-editor.ts","wcardinal/ui/shape/variant/e-shape-group-text-editor.ts","wcardinal/ui/shape/variant/e-shape-group.ts","wcardinal/ui/shape/variant/e-shape-groups.ts","wcardinal/ui/load/load-shape-group.ts","wcardinal/ui/shape/variant/e-shape-group-size-shadowed.ts","wcardinal/ui/shape/variant/e-shape-group-shadowed.ts","wcardinal/ui/shape/variant/e-shape-group-shadoweds.ts","wcardinal/ui/load/load-shape-group-shadowed.ts","wcardinal/ui/shape/variant/e-shape-rectangle.ts","wcardinal/ui/shape/variant/e-shape-image.ts","wcardinal/ui/shape/variant/e-shape-images.ts","wcardinal/ui/shape/variant/e-shape-rectangle-uploaded.ts","wcardinal/ui/shape/variant/e-shape-rectangle-uploadeds.ts","wcardinal/ui/load/load-shape-image.ts","wcardinal/ui/shape/variant/e-shape-label-uploaded.ts","wcardinal/ui/shape/variant/e-shape-label-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-label.ts","wcardinal/ui/shape/variant/e-shape-labels.ts","wcardinal/ui/load/load-shape-label.ts","wcardinal/ui/shape/variant/e-shape-line-uploaded.ts","wcardinal/ui/shape/variant/e-shape-line-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-line-points.ts","wcardinal/ui/shape/variant/e-shape-line.ts","wcardinal/ui/shape/variant/e-shape-lines.ts","wcardinal/ui/load/load-shape-line.ts","wcardinal/ui/shape/variant/e-shape-null-uploaded.ts","wcardinal/ui/shape/variant/e-shape-null-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-null.ts","wcardinal/ui/shape/variant/e-shape-nulls.ts","wcardinal/ui/load/load-shape-null.ts","wcardinal/ui/shape/e-shape-capabilities.ts","wcardinal/ui/shape/variant/e-shape-rectangles.ts","wcardinal/ui/load/load-shape-rectangle.ts","wcardinal/ui/shape/variant/e-shape-rectangle-rounded-uploaded.ts","wcardinal/ui/shape/variant/e-shape-rectangle-rounded-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-rectangle-rounded.ts","wcardinal/ui/shape/variant/e-shape-rectangle-roundeds.ts","wcardinal/ui/load/load-shape-rectangle-rounded.ts","wcardinal/ui/shape/variant/e-shape-triangle-uploaded.ts","wcardinal/ui/shape/variant/e-shape-triangle-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-triangle.ts","wcardinal/ui/shape/variant/e-shape-triangles.ts","wcardinal/ui/load/load-shape-triangle.ts","wcardinal/ui/shape/variant/e-shape-triangle-rounded-uploaded.ts","wcardinal/ui/shape/variant/e-shape-triangle-rounded-uploadeds.ts","wcardinal/ui/shape/variant/e-shape-triangle-rounded.ts","wcardinal/ui/shape/variant/e-shape-triangle-roundeds.ts","wcardinal/ui/load/load-shape-triangle-rounded.ts","wcardinal/ui/load/load-shape-all.ts","wcardinal/ui/theme/white/d-theme-white-atlas.ts","wcardinal/ui/theme/white/d-theme-white.ts","wcardinal/ui/load/load-theme-white.ts","wcardinal/ui/d-shadow-impl.ts","wcardinal/ui/theme/white/d-theme-white-constants.ts","wcardinal/ui/theme/white/d-theme-white-font.ts","wcardinal/ui/theme/white/d-theme-white-base.ts","wcardinal/ui/load/load-theme-white-base.ts","wcardinal/ui/theme/white/d-theme-white-board.ts","wcardinal/ui/load/load-theme-white-board.ts","wcardinal/ui/theme/white/d-theme-white-text-base.ts","wcardinal/ui/theme/white/d-theme-white-image-base.ts","wcardinal/ui/theme/white/d-theme-white-button-base.ts","wcardinal/ui/theme/white/d-theme-white-button.ts","wcardinal/ui/load/load-theme-white-button.ts","wcardinal/ui/theme/white/d-theme-white-button-ambient.ts","wcardinal/ui/load/load-theme-white-button-ambient.ts","wcardinal/ui/theme/white/d-theme-white-button-check.ts","wcardinal/ui/load/load-theme-white-button-check.ts","wcardinal/ui/theme/white/d-theme-white-button-check-right.ts","wcardinal/ui/load/load-theme-white-button-check-right.ts","wcardinal/ui/theme/white/d-theme-white-button-color.ts","wcardinal/ui/d-dialog.ts","wcardinal/ui/d-animation-fade-in.ts","wcardinal/ui/theme/white/d-theme-white-dialog.ts","wcardinal/ui/theme/white/d-theme-white-dialog-command.ts","wcardinal/ui/theme/white/d-theme-white-dialog-color.ts","wcardinal/ui/theme/white/d-theme-white-picker-color.ts","wcardinal/ui/load/load-theme-white-picker-color.ts","wcardinal/ui/load/load-theme-white-dialog-color.ts","wcardinal/ui/load/load-theme-white-button-color.ts","wcardinal/ui/d-picker-color-gradient-point.ts","wcardinal/ui/d-picker-color-gradient-data.ts","wcardinal/ui/theme/white/d-theme-white-button-color-gradient.ts","wcardinal/ui/d-picker-datetime-mask.ts","wcardinal/ui/theme/white/d-theme-white-dialog-color-gradient.ts","wcardinal/ui/theme/white/d-theme-white-picker-color-gradient.ts","wcardinal/ui/load/load-theme-white-picker-color-gradient.ts","wcardinal/ui/load/load-theme-white-dialog-color-gradient.ts","wcardinal/ui/load/load-theme-white-button-color-gradient.ts","wcardinal/ui/theme/white/d-theme-white-button-danger.ts","wcardinal/ui/load/load-theme-white-button-danger.ts","wcardinal/ui/d-picker-dates.ts","wcardinal/ui/theme/white/d-theme-white-button-date.ts","wcardinal/ui/theme/white/d-theme-white-dialog-date.ts","wcardinal/ui/theme/white/d-theme-white-picker-time.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime.ts","wcardinal/ui/theme/white/d-theme-white-picker-date.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-button-back.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-button-date.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-button-next.ts","wcardinal/ui/theme/white/d-theme-white-text.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-label.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-label-date.ts","wcardinal/ui/theme/white/d-theme-white-picker-datetime-space.ts","wcardinal/ui/load/load-theme-white-picker-time.ts","wcardinal/ui/load/load-theme-white-picker-datetime.ts","wcardinal/ui/load/load-theme-white-picker-date.ts","wcardinal/ui/load/load-theme-white-dialog-date.ts","wcardinal/ui/load/load-theme-white-button-date.ts","wcardinal/ui/d-picker-times.ts","wcardinal/ui/d-picker-datetimes.ts","wcardinal/ui/theme/white/d-theme-white-button-datetime.ts","wcardinal/ui/theme/white/d-theme-white-dialog-datetime.ts","wcardinal/ui/load/load-theme-white-dialog-datetime.ts","wcardinal/ui/load/load-theme-white-button-datetime.ts","wcardinal/ui/theme/white/d-theme-white-button-file.ts","wcardinal/ui/load/load-theme-white-button-file.ts","wcardinal/ui/theme/white/d-theme-white-button-primary.ts","wcardinal/ui/load/load-theme-white-button-primary.ts","wcardinal/ui/theme/white/d-theme-white-button-radio.ts","wcardinal/ui/d-drag-mode.ts","wcardinal/ui/load/load-theme-white-button-radio.ts","wcardinal/ui/theme/white/d-theme-white-button-radio-right.ts","wcardinal/ui/load/load-theme-white-button-radio-right.ts","wcardinal/ui/theme/white/d-theme-white-button-secondary.ts","wcardinal/ui/load/load-theme-white-button-secondary.ts","wcardinal/ui/theme/white/d-theme-white-button-time.ts","wcardinal/ui/theme/white/d-theme-white-dialog-time.ts","wcardinal/ui/load/load-theme-white-dialog-time.ts","wcardinal/ui/load/load-theme-white-button-time.ts","wcardinal/ui/load/load-theme-white-button-all.ts","wcardinal/ui/theme/white/d-theme-white-canvas.ts","wcardinal/ui/theme/white/d-theme-white-canvas-container.ts","wcardinal/ui/d-chart-axis.ts","wcardinal/ui/load/load-theme-white-canvas-container.ts","wcardinal/ui/theme/white/d-theme-white-chart.ts","wcardinal/ui/shape/variant/e-shape-group-fill-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-stroke-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-align-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-offset-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-outline-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-padding-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-spacing-viewer.ts","wcardinal/ui/shape/variant/e-shape-group-text-viewer.ts","wcardinal/ui/shape/e-shape-buffer-count.ts","wcardinal/ui/shape/e-shape-buffer-unit.ts","wcardinal/ui/shape/e-shape-buffer-unit-builder.ts","wcardinal/ui/shape/e-shape-buffer.ts","wcardinal/ui/shape/e-shape-renderer-iterator-datum.ts","wcardinal/ui/shape/e-shape-renderer-iterator.ts","wcardinal/ui/shape/e-shape-renderer.ts","wcardinal/ui/shape/e-shape-container.ts","wcardinal/ui/shape/e-shape-search.ts","wcardinal/ui/shape/e-shape-deleter.ts","wcardinal/ui/shape/e-shape-resource-manager-serialization.ts","wcardinal/ui/shape/e-shape-runtimes.ts","wcardinal/ui/theme/white/d-theme-white-chart-axis-base.ts","wcardinal/ui/theme/white/d-theme-white-chart-axis-x.ts","wcardinal/ui/theme/white/d-theme-white-chart-axis-y.ts","wcardinal/ui/theme/white/d-theme-white-chart-coordinate-linear.ts","wcardinal/ui/theme/white/d-theme-white-diagram-base.ts","wcardinal/ui/theme/white/d-theme-white-diagram.ts","wcardinal/ui/theme/white/d-theme-white-diagram-canvas-base.ts","wcardinal/ui/theme/white/d-theme-white-diagram-canvas.ts","wcardinal/ui/load/load-theme-white-diagram.ts","wcardinal/ui/theme/white/d-theme-white-diagram-canvas-editor.ts","wcardinal/ui/theme/white/d-theme-white-diagram-editor.ts","wcardinal/ui/theme/white/e-theme-white-shape-action-value.ts","wcardinal/ui/load/load-theme-white-shape-action-value.ts","wcardinal/ui/load/load-theme-white-diagram-editor.ts","wcardinal/ui/load/load-theme-white-dialog.ts","wcardinal/ui/load/load-theme-white-dialog-command.ts","wcardinal/ui/theme/white/d-theme-white-dialog-confirm.ts","wcardinal/ui/theme/white/d-theme-white-image.ts","wcardinal/ui/theme/white/d-theme-white-dialog-confirm-message.ts","wcardinal/ui/load/load-theme-white-dialog-confirm.ts","wcardinal/ui/theme/white/d-theme-white-dialog-confirm-delete.ts","wcardinal/ui/load/load-theme-white-dialog-confirm-delete.ts","wcardinal/ui/theme/white/d-theme-white-dialog-confirm-discard.ts","wcardinal/ui/load/load-theme-white-dialog-confirm-discard.ts","wcardinal/ui/theme/white/d-theme-white-dialog-input-text.ts","wcardinal/ui/load/load-theme-white-dialog-input-text.ts","wcardinal/ui/theme/white/d-theme-white-dialog-message.ts","wcardinal/ui/load/load-theme-white-dialog-message.ts","wcardinal/ui/theme/white/d-theme-white-dialog-processing.ts","wcardinal/ui/theme/white/d-theme-white-dialog-processing-message.ts","wcardinal/ui/load/load-theme-white-dialog-processing.ts","wcardinal/ui/theme/white/d-theme-white-dialog-save-as.ts","wcardinal/ui/load/load-theme-white-dialog-save-as.ts","wcardinal/ui/theme/white/d-theme-white-dialog-select.ts","wcardinal/ui/theme/white/d-theme-white-pane.ts","wcardinal/ui/theme/white/d-theme-white-list.ts","wcardinal/ui/theme/white/d-theme-white-dialog-select-list.ts","wcardinal/ui/theme/white/d-theme-white-list-item.ts","wcardinal/ui/theme/white/d-theme-white-dialog-select-list-item.ts","wcardinal/ui/load/load-theme-white-dialog-select.ts","wcardinal/ui/load/load-theme-white-dialog-all.ts","wcardinal/ui/theme/white/d-theme-white-dropdown.ts","wcardinal/ui/theme/white/d-theme-white-layout.ts","wcardinal/ui/theme/white/d-theme-white-layout-vertical.ts","wcardinal/ui/theme/white/d-theme-white-menu.ts","wcardinal/ui/theme/white/d-theme-white-menu-item.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-text.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-check.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-body.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-header.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-check.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-link.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-link.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-menu.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-menu.ts","wcardinal/ui/theme/white/d-theme-white-list-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-layout-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-item-expandable-item-text.ts","wcardinal/ui/load/load-theme-white-menu.ts","wcardinal/ui/load/load-theme-white-dropdown.ts","wcardinal/ui/theme/white/d-theme-white-expandable.ts","wcardinal/ui/theme/white/d-theme-white-expandable-header.ts","wcardinal/ui/d-html-element.ts","wcardinal/ui/load/load-theme-white-expandable.ts","wcardinal/ui/snapper/e-snapper-target-value.ts","wcardinal/ui/theme/white/d-theme-white-html-element.ts","wcardinal/ui/load/load-theme-white-image.ts","wcardinal/ui/theme/white/d-theme-white-layout-horizontal.ts","wcardinal/ui/theme/white/d-theme-white-input-and-label.ts","wcardinal/ui/load/load-theme-white-input-and-label.ts","wcardinal/ui/theme/white/d-theme-white-input.ts","wcardinal/ui/theme/white/d-theme-white-input-number.ts","wcardinal/ui/theme/white/d-theme-white-input-integer.ts","wcardinal/ui/load/load-theme-white-input-integer.ts","wcardinal/ui/theme/white/d-theme-white-input-label.ts","wcardinal/ui/load/load-theme-white-input-label.ts","wcardinal/ui/theme/white/d-theme-white-input-real.ts","wcardinal/ui/load/load-theme-white-input-real.ts","wcardinal/ui/theme/white/d-theme-white-input-text.ts","wcardinal/ui/load/load-theme-white-input-text.ts","wcardinal/ui/load/load-theme-white-input-all.ts","wcardinal/ui/load/load-theme-white-layout.ts","wcardinal/ui/load/load-theme-white-list.ts","wcardinal/ui/theme/white/d-theme-white-menu-bar.ts","wcardinal/ui/theme/white/d-theme-white-menu-bar-item.ts","wcardinal/ui/load/load-theme-white-menu-bar.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-content.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-check.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-check.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-link.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-menu.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-expandable-item-text.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-link.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-menu.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-separator.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-space.ts","wcardinal/ui/theme/white/d-theme-white-menu-sided-item-text.ts","wcardinal/ui/load/load-theme-white-menu-sided.ts","wcardinal/ui/theme/white/d-theme-white-note.ts","wcardinal/ui/load/load-theme-white-note.ts","wcardinal/ui/theme/white/d-theme-white-content.ts","wcardinal/ui/theme/white/d-theme-white-scroll-bar.ts","wcardinal/ui/theme/white/d-theme-white-scroll-bar-thumb.ts","wcardinal/ui/load/load-theme-white-scroll-bar.ts","wcardinal/ui/load/load-theme-white-pane.ts","wcardinal/ui/theme/white/d-theme-white-select.ts","wcardinal/ui/load/load-theme-white-select.ts","wcardinal/ui/theme/white/d-theme-white-table.ts","wcardinal/ui/theme/white/d-theme-white-table-body.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cells.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-check.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-color.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-date.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-datetime.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-index.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-input-integer.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-input-real.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-input-text.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-select-dialog.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-select-fetcher.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-select-menu.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-text.ts","wcardinal/ui/theme/white/d-theme-white-table-body-cell-time.ts","wcardinal/ui/theme/white/d-theme-white-table-row.ts","wcardinal/ui/theme/white/d-theme-white-table-body-row.ts","wcardinal/ui/theme/white/d-theme-white-table-body-row-even.ts","wcardinal/ui/theme/white/d-theme-white-table-body-row-odd.ts","wcardinal/ui/theme/white/d-theme-white-table-header.ts","wcardinal/ui/theme/white/d-theme-white-table-header-cell.ts","wcardinal/ui/load/load-theme-white-table.ts","wcardinal/ui/load/load-theme-white-text.ts","wcardinal/ui/load/load-theme-white-all.ts","wcardinal/ui/load/load-theme-white-chart.ts","wcardinal/ui/load/load-theme-white-html-element.ts","wcardinal/ui/load/load-all.ts","wcardinal/ui/snapper/e-snapper-grid.ts","wcardinal/ui/snapper/e-snapper-result.ts","wcardinal/ui/snapper/e-snapper.ts","wcardinal/ui/snapper/e-snapper-target.ts","wcardinal/ui/d-command-flag.ts","wcardinal/ui/d-animation-empty.ts","wcardinal/ui/d-application-padding.ts","wcardinal/ui/d-application-layer-options.ts","wcardinal/ui/d-controller-default-focus.ts","wcardinal/ui/d-command-clear.ts","wcardinal/ui/d-chart-coordinate.ts","wcardinal/ui/d-command-redo.ts","wcardinal/ui/d-command-undo.ts","wcardinal/ui/d-controller-default-command.ts","wcardinal/ui/d-controller-keyboard.ts","wcardinal/ui/d-controllers.ts","wcardinal/ui/d-application-layer.ts","wcardinal/ui/d-application.ts","wcardinal/ui/d-board.ts","wcardinal/ui/d-button-base.ts","wcardinal/ui/d-button.ts","wcardinal/ui/d-button-ambient.ts","wcardinal/ui/d-button-check.ts","wcardinal/ui/d-button-check-right.ts","wcardinal/ui/d-button-primary.ts","wcardinal/ui/d-layout-horizontal.ts","wcardinal/ui/d-dialog-command.ts","wcardinal/ui/d-input.ts","wcardinal/ui/d-input-number.ts","wcardinal/ui/d-input-real.ts","wcardinal/ui/d-text.ts","wcardinal/ui/d-input-label.ts","wcardinal/ui/d-input-and-label.ts","wcardinal/ui/d-input-real-and-label.ts","wcardinal/ui/d-input-text.ts","wcardinal/ui/d-input-text-and-label.ts","wcardinal/ui/d-picker-color-and-alpha.ts","wcardinal/ui/d-picker-color-recent.ts","wcardinal/ui/d-picker-color.ts","wcardinal/ui/d-picker-color-gradient-data-view.ts","wcardinal/ui/d-picker-color-gradient-recent.ts","wcardinal/ui/d-picker-color-gradient.ts","wcardinal/ui/d-dialog-color-gradient.ts","wcardinal/ui/d-button-color-gradient.ts","wcardinal/ui/d-dialog-color.ts","wcardinal/ui/d-button-color.ts","wcardinal/ui/d-button-danger.ts","wcardinal/ui/d-picker-datetime-button-back.ts","wcardinal/ui/d-picker-datetime-button-date.ts","wcardinal/ui/d-picker-datetime-button-next.ts","wcardinal/ui/d-picker-datetime-label.ts","wcardinal/ui/d-picker-datetime-label-date.ts","wcardinal/ui/d-picker-datetime-space.ts","wcardinal/ui/d-input-integer.ts","wcardinal/ui/d-picker-time-bound.ts","wcardinal/ui/d-picker-time-bound-hours.ts","wcardinal/ui/d-picker-time-bound-minutes.ts","wcardinal/ui/d-picker-time-bound-seconds.ts","wcardinal/ui/d-picker-time-bounds.ts","wcardinal/ui/d-picker-time.ts","wcardinal/ui/d-picker-datetime.ts","wcardinal/ui/d-picker-date.ts","wcardinal/ui/d-dialog-date.ts","wcardinal/ui/d-dialog-dates.ts","wcardinal/ui/d-button-date.ts","wcardinal/ui/d-dialog-datetime.ts","wcardinal/ui/d-dialog-datetimes.ts","wcardinal/ui/d-button-datetime.ts","wcardinal/ui/d-button-file.ts","wcardinal/ui/d-button-group.ts","wcardinal/ui/d-button-radio.ts","wcardinal/ui/d-button-radio-right.ts","wcardinal/ui/d-button-redo.ts","wcardinal/ui/d-button-secondary.ts","wcardinal/ui/d-dialog-time.ts","wcardinal/ui/d-dialog-times.ts","wcardinal/ui/d-button-time.ts","wcardinal/ui/d-button-undo.ts","wcardinal/ui/d-base-overflow-mask.ts","wcardinal/ui/d-canvas-container-view-drag.ts","wcardinal/ui/d-canvas-container-view-transform.ts","wcardinal/ui/d-canvas-container-view.ts","wcardinal/ui/d-canvas-container.ts","wcardinal/ui/d-canvas.ts","wcardinal/ui/d-chart-axis-base-options.ts","wcardinal/ui/d-chart-axis-base.ts","wcardinal/ui/d-chart-axis-container-impl.ts","wcardinal/ui/d-chart-axis-x.ts","wcardinal/ui/d-chart-axis-y.ts","wcardinal/ui/d-chart-color-set.ts","wcardinal/ui/d-chart-coordinate-container-sub-impl.ts","wcardinal/ui/d-chart-plot-area.ts","wcardinal/ui/d-chart-coordinate-container-impl.ts","wcardinal/ui/d-chart-region-impl-observable.ts","wcardinal/ui/d-chart-coordinate-linear.ts","wcardinal/ui/d-chart-region-impl.ts","wcardinal/ui/d-chart-series-stroke-impl.ts","wcardinal/ui/d-chart-series-container-impl.ts","wcardinal/ui/d-chart-plot-area-impl.ts","wcardinal/ui/d-chart-series-line.ts","wcardinal/ui/d-list-selection.ts","wcardinal/ui/d-chart.ts","wcardinal/ui/d-command-create.ts","wcardinal/ui/d-command-delete.ts","wcardinal/ui/d-command-save-as.ts","wcardinal/ui/d-command-save.ts","wcardinal/ui/d-content.ts","wcardinal/ui/d-diagram-canvas-mapping-point-impl.ts","wcardinal/ui/d-diagram-canvas-mapping-impl.ts","wcardinal/ui/d-diagram-canvas-tile.ts","wcardinal/ui/d-diagram-layer.ts","wcardinal/ui/d-diagram-layer-container.ts","wcardinal/ui/d-diagram-canvas-base.ts","wcardinal/ui/d-diagram-canvas-editor.ts","wcardinal/ui/d-diagram-serialized.ts","wcardinal/ui/d-diagram-canvas.ts","wcardinal/ui/d-diagrams.ts","wcardinal/ui/d-diagram-base.ts","wcardinal/ui/d-diagram-editor.ts","wcardinal/ui/d-diagram-shape.ts","wcardinal/ui/d-diagram-tag.ts","wcardinal/ui/d-diagram.ts","wcardinal/ui/d-dialog-confirm-message.ts","wcardinal/ui/d-dialog-confirm.ts","wcardinal/ui/d-dialog-confirm-delete.ts","wcardinal/ui/d-dialog-confirm-discard.ts","wcardinal/ui/d-dialog-input-text.ts","wcardinal/ui/d-dialog-message.ts","wcardinal/ui/d-dialog-processing-message.ts","wcardinal/ui/d-dialog-processing.ts","wcardinal/ui/d-dialog-save-as.ts","wcardinal/ui/d-dialog-select-list-item.ts","wcardinal/ui/d-scroll-bar.ts","wcardinal/ui/d-scroll-bar-thumb.ts","wcardinal/ui/d-scroll-bar-thumb-reflowable-horizontal.ts","wcardinal/ui/d-scroll-bar-thumb-horizontal.ts","wcardinal/ui/d-scroll-bar-horizontal.ts","wcardinal/ui/d-scroll-bar-thumb-reflowable-vertical.ts","wcardinal/ui/d-scroll-bar-thumb-vertical.ts","wcardinal/ui/d-scroll-bar-vertical.ts","wcardinal/ui/d-pane.ts","wcardinal/ui/d-list.ts","wcardinal/ui/d-dialog-select-list.ts","wcardinal/ui/d-note.ts","wcardinal/ui/d-dialog-select.ts","wcardinal/ui/d-menu-context.ts","wcardinal/ui/d-menu.ts","wcardinal/ui/d-dropdown.ts","wcardinal/ui/d-menu-sided-selection.ts","wcardinal/ui/d-expandable-header.ts","wcardinal/ui/d-expandable.ts","wcardinal/ui/d-input-integer-and-label.ts","wcardinal/ui/d-map-coordinate-epsg3857.ts","wcardinal/ui/d-map-coordinates.ts","wcardinal/ui/d-map-tile.ts","wcardinal/ui/d-map-tile-plane.ts","wcardinal/ui/d-map-tile-pyramid-impl.ts","wcardinal/ui/d-map-tiles.ts","wcardinal/ui/d-menu-bar-item.ts","wcardinal/ui/d-menu-bar-blocker.ts","wcardinal/ui/d-menu-bar.ts","wcardinal/ui/d-menu-sided-content.ts","wcardinal/ui/d-table-column.ts","wcardinal/ui/d-menu-sided.ts","wcardinal/ui/d-notification.ts","wcardinal/ui/d-pagination.ts","wcardinal/ui/d-picker-datetime-range.ts","wcardinal/ui/d-picker-time-range.ts","wcardinal/ui/d-select.ts","wcardinal/ui/d-slider-range.ts","wcardinal/ui/d-slider.ts","wcardinal/ui/d-table-body-cell-check.ts","wcardinal/ui/d-table-body-cell-color.ts","wcardinal/ui/d-table-body-cell-index.ts","wcardinal/ui/d-table-body-cell-input-integer.ts","wcardinal/ui/d-table-body-cell-input-real.ts","wcardinal/ui/d-table-body-cell-input-text.ts","wcardinal/ui/d-table-body-cell-select-dialog.ts","wcardinal/ui/d-table-body-cell-select-fetcher.ts","wcardinal/ui/d-table-body-cell-select-menu.ts","wcardinal/ui/d-table-body-cell-text.ts","wcardinal/ui/d-table-body-filter.ts","wcardinal/ui/d-table-body-cell-date.ts","wcardinal/ui/d-table-body-cell-datetime.ts","wcardinal/ui/d-table-body-cell-time.ts","wcardinal/ui/d-table-row.ts","wcardinal/ui/d-table-selection.ts","wcardinal/ui/d-table-body-row.ts","wcardinal/ui/d-table-body-row-even.ts","wcardinal/ui/d-table-body-row-odd.ts","wcardinal/ui/d-table-body.ts","wcardinal/ui/d-table-header-cell.ts","wcardinal/ui/d-table-header.ts","wcardinal/ui/d-table.ts","wcardinal/ui/d-tree.ts","wcardinal/ui/snapper/e-snapper-result-scale.ts","wcardinal/ui/util/util-ceiling-index.ts","wcardinal/ui/util/util-to-svg-texture.ts","wcardinal-ui.browser.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplicationLayerLike } from \"./d-application-layer-like\";\nimport { DApplicationLayerStageLike } from \"./d-application-layer-stage-like\";\nimport { DApplicationLike, DApplicationTarget } from \"./d-application-like\";\n\nexport class DApplications {\n\tprotected static INSTANCES: DApplicationLike[] = [];\n\n\tstatic add( instance: DApplicationLike ): void {\n\t\tconst instances = DApplications.INSTANCES;\n\t\tinstances.push( instance );\n\t}\n\n\tstatic first(): DApplicationLike {\n\t\tconst instances = DApplications.INSTANCES;\n\t\tif( 0 < instances.length ) {\n\t\t\treturn instances[ 0 ];\n\t\t}\n\t\tthrow new Error( \"No application found.\" );\n\t}\n\n\tstatic last(): DApplicationLike {\n\t\tconst instances = DApplications.INSTANCES;\n\t\tif( 0 < instances.length ) {\n\t\t\treturn instances[ instances.length - 1 ];\n\t\t}\n\t\tthrow new Error( \"No application found.\" );\n\t}\n\n\tstatic get( index: number ): DApplicationLike | null {\n\t\tconst instances = DApplications.INSTANCES;\n\t\tif( 0 <= index && index < instances.length ) {\n\t\t\treturn instances[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic indexOf( instance: DApplicationLike ): number {\n\t\treturn DApplications.INSTANCES.indexOf( instance );\n\t}\n\n\tstatic size(): number {\n\t\treturn DApplications.INSTANCES.length;\n\t}\n\n\tprotected static toStage( target: DApplicationTarget ): DApplicationLayerStageLike | null {\n\t\tlet stage: any = target;\n\t\twhile( stage.parent ) {\n\t\t\tstage = stage.parent;\n\t\t}\n\t\tif( (\"application\" in stage) && (\"layer\" in stage) ) {\n\t\t\treturn stage as DApplicationLayerStageLike;\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic find( target: DApplicationTarget ): DApplicationLike | null {\n\t\tconst stage = this.toStage( target );\n\t\tif( stage ) {\n\t\t\treturn stage.layer.application;\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic getLayerBase( target: DApplicationTarget ): DApplicationLayerLike | null {\n\t\tconst stage = this.toStage( target );\n\t\tif( stage ) {\n\t\t\treturn stage.layer.application.getLayerBase();\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic getLayerOverlay( target: DApplicationTarget ): DApplicationLayerLike | null {\n\t\tconst stage = this.toStage( target );\n\t\tif( stage ) {\n\t\t\treturn stage.layer.application.getLayerOverlay();\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic getLayer( target: DApplicationTarget ): DApplicationLayerLike | null {\n\t\tconst stage = this.toStage( target );\n\t\tif( stage ) {\n\t\t\treturn stage.layer;\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic update( target?: DApplicationTarget ): void {\n\t\tif( target ) {\n\t\t\tconst stage = this.toStage( target );\n\t\t\tif( stage ) {\n\t\t\t\tstage.layer.update();\n\t\t\t}\n\t\t} else {\n\t\t\tconst instances = DApplications.INSTANCES;\n\t\t\tfor( let i = 0, imax = instances.length; i < imax; ++i ) {\n\t\t\t\tinstances[ i ].update();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic render( target?: DApplicationTarget ): void {\n\t\tif( target ) {\n\t\t\tconst stage = this.toStage( target );\n\t\t\tif( stage ) {\n\t\t\t\tstage.layer.render();\n\t\t\t}\n\t\t} else {\n\t\t\tconst instances = DApplications.INSTANCES;\n\t\t\tfor( let i = 0, imax = instances.length; i < imax; ++i ) {\n\t\t\t\tinstances[ i ].render();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\n\n/**\n * A border mask.\n * Borders on masked parts are not rendered.\n */\nexport enum DBorderMask {\n\tNONE = 0,\n\n\tTOP = 1,\n\tRIGHT = 2,\n\tBOTTOM = 4,\n\tLEFT = 8,\n\n\tTOP_RIGHT = TOP | RIGHT,\n\tTOP_BOTTOM = TOP | BOTTOM,\n\tTOP_LEFT = TOP | LEFT,\n\n\tRIGHT_BOTTOM = RIGHT | BOTTOM,\n\tRIGHT_LEFT = RIGHT | LEFT,\n\n\tBOTTOM_LEFT = BOTTOM | LEFT,\n\n\tNOT_TOP = RIGHT | BOTTOM | LEFT,\n\tNOT_RIGHT = TOP | BOTTOM | LEFT,\n\tNOT_BOTTOM = TOP | RIGHT | LEFT,\n\tNOT_LEFT = TOP | RIGHT | BOTTOM,\n\n\tALL = TOP | RIGHT | BOTTOM | LEFT\n}\n\nexport interface DBorder {\n\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\talpha?: DStateAwareOrValueMightBe<number>;\n\twidth?: DStateAwareOrValueMightBe<number>;\n\talign?: DStateAwareOrValueMightBe<number>;\n\tmask?: DStateAwareOrValueMightBe<DBorderMask>;\n}\n\nexport interface DBorderStateAware extends DBorder {\n\tgetTheme(): DThemeBase;\n\tsetTheme( theme: DThemeBase ): void;\n\tgetColor( state: DBaseState ): number | null;\n\tgetAlpha( state: DBaseState ): number;\n\tgetWidth( state: DBaseState ): number;\n\tgetAlign( state: DBaseState ): number;\n\tgetMask( state: DBaseState ): DBorderMask;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsFunction = ( target: unknown ): target is Function => {\n\treturn (typeof target) === \"function\";\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBackgroundStateAware } from \"./d-background\";\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\n\ntype Callback = () => void;\n\nexport class DBaseBackground implements DBackgroundStateAware {\n\tprotected _theme: DThemeBase;\n\tprotected _color?: DStateAwareOrValueMightBe<number | null>;\n\tprotected _alpha?: DStateAwareOrValueMightBe<number>;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: Callback ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\t\tif( options != null && options.background != null ) {\n\t\t\tconst background = options.background;\n\t\t\tthis._color = background.color;\n\t\t\tthis._alpha = background.alpha;\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetColor( state: DBaseState ): number | null {\n\t\tconst color = this._color;\n\t\tif( color !== undefined ) {\n\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\tconst result = color( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBackgroundColor( state );\n\t}\n\n\tget color(): DStateAwareOrValueMightBe<number | null> {\n\t\treturn this._color;\n\t}\n\n\tset color( color: DStateAwareOrValueMightBe<number | null> ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\tconst alpha = this._alpha;\n\t\tif( alpha !== undefined ) {\n\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\tconst result = alpha( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn alpha;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBackgroundAlpha( state );\n\t}\n\n\tget alpha(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected onChange(): void {\n\t\tconst callback = this._callback;\n\t\tif( callback != null ) {\n\t\t\tcallback();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsString = ( target: unknown ): target is string => {\n\treturn ( typeof target === \"string\" ) ||\n\t\t( Object.prototype.toString.call( target ) === \"[object String]\" );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeBase } from \"./d-base\";\n\nexport enum DCornerMask {\n\tNONE = 0,\n\tTOP_LEFT = 1,\n\tTOP_RIGHT = 2,\n\tBOTTOM_LEFT = 4,\n\tBOTTOM_RIGHT = 8,\n\tTOP = TOP_LEFT | TOP_RIGHT,\n\tBOTTOM = BOTTOM_LEFT | BOTTOM_RIGHT,\n\tLEFT = TOP_LEFT | BOTTOM_LEFT,\n\tRIGHT = TOP_RIGHT | BOTTOM_RIGHT,\n\tALL = TOP_LEFT | TOP_RIGHT | BOTTOM_LEFT | BOTTOM_RIGHT\n}\n\nexport interface DCornerLike {\n\tradius?: number;\n\tmask?: DCornerMask;\n}\n\nexport interface DCorner extends DCornerLike {\n\tset( radius: number, mask: DCornerMask ): void;\n\tgetTheme(): DThemeBase;\n\tsetTheme( theme: DThemeBase ): void;\n\tgetRadius(): number;\n\tgetMask(): DCornerMask;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBorderMask, DBorderStateAware } from \"./d-border\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\ntype Callback = () => void;\n\nexport class DBaseBorder implements DBorderStateAware {\n\tprotected _theme: DThemeBase;\n\tprotected _color?: DStateAwareOrValueMightBe<number | null>;\n\tprotected _alpha?: DStateAwareOrValueMightBe<number>;\n\tprotected _width?: DStateAwareOrValueMightBe<number>;\n\tprotected _align?: DStateAwareOrValueMightBe<number>;\n\tprotected _mask?: DStateAwareOrValueMightBe<DBorderMask>;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: Callback ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\t\tif( options != null && options.border != null ) {\n\t\t\tconst border = options.border;\n\t\t\tthis._color = border.color;\n\t\t\tthis._alpha = border.alpha;\n\t\t\tthis._width = border.width;\n\t\t\tthis._align = border.align;\n\t\t\tthis._mask = ( utilIsString( border.mask ) ? DBorderMask[ border.mask ] : border.mask );\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetColor( state: DBaseState ): number | null {\n\t\tconst color = this._color;\n\t\tif( color !== undefined ) {\n\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\tconst result = color( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderColor( state );\n\t}\n\n\tget color(): DStateAwareOrValueMightBe<number | null> {\n\t\treturn this._color;\n\t}\n\n\tset color( color: DStateAwareOrValueMightBe<number | null> ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\tconst alpha = this._alpha;\n\t\tif( alpha !== undefined ) {\n\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\tconst result = alpha( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn alpha;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderAlpha( state );\n\t}\n\n\tget alpha(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetWidth( state: DBaseState ): number {\n\t\tconst width = this._width;\n\t\tif( width !== undefined ) {\n\t\t\tif( utilIsFunction( width ) ) {\n\t\t\t\tconst result = width( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn width;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderWidth( state );\n\t}\n\n\tget width(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._width;\n\t}\n\n\tset width( width: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetAlign( state: DBaseState ): number {\n\t\tconst align = this._align;\n\t\tif( align !== undefined ) {\n\t\t\tif( utilIsFunction( align ) ) {\n\t\t\t\tconst result = align( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn align;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderAlign( state );\n\t}\n\n\tget align(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._align;\n\t}\n\n\tset align( align: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._align !== align ) {\n\t\t\tthis._align = align;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tgetMask( state: DBaseState ): number {\n\t\tconst mask = this._mask;\n\t\tif( mask !== undefined ) {\n\t\t\tif( utilIsFunction( mask ) ) {\n\t\t\t\tconst result = mask( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn mask;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getBorderMask( state );\n\t}\n\n\tget mask(): DStateAwareOrValueMightBe<DBorderMask> {\n\t\treturn this._mask;\n\t}\n\n\tset mask( mask: DStateAwareOrValueMightBe<DBorderMask> ) {\n\t\tif( this._mask !== mask ) {\n\t\t\tthis._mask = mask;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected onChange(): void {\n\t\tconst callback = this._callback;\n\t\tif( callback != null ) {\n\t\t\tcallback();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsNumber = ( target: unknown ): target is number => {\n\treturn ( typeof target === \"number\" ) ||\n\t\t( Object.prototype.toString.call( target ) === \"[object Number]\" );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\n /**\n  * DBase interactivity.\n  * Mouse / touch events are triggered only on interactive objects.\n  */\nexport enum DBaseInteractive {\n\t/**\n\t * Not interactive.\n\t */\n\tNONE = 0,\n\n\t/**\n\t * Interactive.\n\t * However children are not interactive.\n\t */\n\tSELF = 1,\n\n\t/**\n\t * Not interactive.\n\t * However children are interactive.\n\t */\n\tCHILDREN = 2,\n\n\t/**\n\t * Interactive.\n\t * Children are also interactive.\n\t */\n\tBOTH = SELF | CHILDREN\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DCorner, DCornerMask } from \"./d-corner\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\n\ntype Callback = () => void;\n\nexport class DBaseCorner implements DCorner {\n\tprotected _theme: DThemeBase;\n\tprotected _radius?: number;\n\tprotected _mask?: DCornerMask;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: () => void ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\t\tif( options != null && options.corner != null ) {\n\t\t\tconst corner = options.corner;\n\t\t\tif( utilIsNumber( corner ) ) {\n\t\t\t\tthis._radius = corner;\n\t\t\t\tthis._mask = undefined;\n\t\t\t} else {\n\t\t\t\tthis._radius = corner.radius;\n\t\t\t\tthis._mask = ( utilIsString( corner.mask ) ? DCornerMask[ corner.mask ] : corner.mask );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetRadius(): number {\n\t\tconst radius = this._radius;\n\t\treturn ( radius !== undefined ? radius : this._theme.getCornerRadius() );\n\t}\n\n\tget radius(): number | undefined {\n\t\treturn this._radius;\n\t}\n\n\tset radius( radius: number | undefined ) {\n\t\tif( this._radius !== radius ) {\n\t\t\tthis._radius = radius;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMask(): DCornerMask {\n\t\tconst mask = this._mask;\n\t\treturn ( mask !== undefined ? mask : this._theme.getCornerMask() );\n\t}\n\n\tget mask(): DCornerMask | undefined {\n\t\treturn this._mask;\n\t}\n\n\tset mask( mask: DCornerMask | undefined ) {\n\t\tif( this._mask !== mask ) {\n\t\t\tthis._mask = mask;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tset( radius?: number, mask?: DCornerMask ): void {\n\t\tlet isChanged = false;\n\n\t\tif( this._radius !== radius ) {\n\t\t\tthis._radius = radius;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( this._mask !== mask ) {\n\t\t\tthis._mask = mask;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tconst callback = this._callback;\n\t\tif( isChanged && callback != null ) {\n\t\t\tcallback();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBorderMask } from \"./d-border\";\nimport { DOutline } from \"./d-outline\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\ntype Callback = () => void;\n\nexport class DBaseOutline implements DOutline {\n\tprotected _theme: DThemeBase;\n\tprotected _color?: DStateAwareOrValueMightBe<number | null>;\n\tprotected _alpha?: DStateAwareOrValueMightBe<number>;\n\tprotected _width?: DStateAwareOrValueMightBe<number>;\n\tprotected _offset?: DStateAwareOrValueMightBe<number>;\n\tprotected _align?: DStateAwareOrValueMightBe<number>;\n\tprotected _mask?: DStateAwareOrValueMightBe<DBorderMask>;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: Callback ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\t\tif( options != null && options.outline != null ) {\n\t\t\tconst outline = options.outline;\n\t\t\tthis._color = outline.color;\n\t\t\tthis._alpha = outline.alpha;\n\t\t\tthis._width = outline.width;\n\t\t\tthis._offset = outline.offset;\n\t\t\tthis._align = outline.align;\n\t\t\tthis._mask = ( utilIsString( outline.mask ) ? DBorderMask[ outline.mask ] : outline.mask );\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetColor( state: DBaseState ): number | null {\n\t\tconst color = this._color;\n\t\tif( color !== undefined ) {\n\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\tconst result = color( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineColor( state );\n\t}\n\n\tget color(): DStateAwareOrValueMightBe<number | null> {\n\t\treturn this._color;\n\t}\n\n\tset color( color: DStateAwareOrValueMightBe<number | null> ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\tconst alpha = this._alpha;\n\t\tif( alpha !== undefined ) {\n\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\tconst result = alpha( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn alpha;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineAlpha( state );\n\t}\n\n\tget alpha(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetWidth( state: DBaseState ): number {\n\t\tconst width = this._width;\n\t\tif( width !== undefined ) {\n\t\t\tif( utilIsFunction( width ) ) {\n\t\t\t\tconst result = width( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn width;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineWidth( state );\n\t}\n\n\tget width(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._width;\n\t}\n\n\tset width( width: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetOffset( state: DBaseState ): number {\n\t\tconst offset = this._offset;\n\t\tif( offset !== undefined ) {\n\t\t\tif( utilIsFunction( offset ) ) {\n\t\t\t\tconst result = offset( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn offset;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineOffset( state );\n\t}\n\n\tget offset(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._offset;\n\t}\n\n\tset offset( offset: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._offset !== offset ) {\n\t\t\tthis._offset = offset;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAlign( state: DBaseState ): number {\n\t\tconst align = this._align;\n\t\tif( align !== undefined ) {\n\t\t\tif( utilIsFunction( align ) ) {\n\t\t\t\tconst result = align( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn align;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineAlign( state );\n\t}\n\n\tget align(): DStateAwareOrValueMightBe<number> {\n\t\treturn this._align;\n\t}\n\n\tset align( align: DStateAwareOrValueMightBe<number> ) {\n\t\tif( this._align !== align ) {\n\t\t\tthis._align = align;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMask( state: DBaseState ): number {\n\t\tconst mask = this._mask;\n\t\tif( mask !== undefined ) {\n\t\t\tif( utilIsFunction( mask ) ) {\n\t\t\t\tconst result = mask( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn mask;\n\t\t\t}\n\t\t}\n\t\treturn this._theme.getOutlineMask( state );\n\t}\n\n\tget mask(): DStateAwareOrValueMightBe<DBorderMask> {\n\t\treturn this._mask;\n\t}\n\n\tset mask( mask: DStateAwareOrValueMightBe<DBorderMask> ) {\n\t\tif( this._mask !== mask ) {\n\t\t\tthis._mask = mask;\n\t\t\tconst callback = this._callback;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DBaseState {\n\tNONE\t\t= 0,\n\tHOVERED\t\t= 1 << 0,\n\tACTIVE\t\t= 1 << 1,\n\tACTIVE_IN\t= 1 << 2,\n\tFOCUSED\t\t= 1 << 3,\n\tFOCUSED_IN\t= 1 << 4,\n\tUNFOCUSABLE\t= 1 << 5,\n\tFOCUS_ROOT\t= 1 << 6,\n\tREAD_ONLY\t= 1 << 7,\n\tDISABLED\t= 1 << 8,\n\tDRAGGING\t= 1 << 9,\n\tPRESSED\t\t= 1 << 10,\n\tINVALID\t\t= 1 << 11,\n\tSUCCEEDED\t= 1 << 12,\n\tFAILED\t\t= 1 << 13,\n\n\tEXTENSION_0\t= 1 << 20,\n\tEXTENSION_1\t= 1 << 21,\n\tEXTENSION_2\t= 1 << 22,\n\tEXTENSION_3\t= 1 << 23,\n\n\tCUSTOM\t\t= 1 << 24\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DPadding } from \"./d-padding\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\ntype Callback = () => void;\n\nexport class DBasePadding implements DPadding {\n\tprotected _theme: DThemeBase;\n\tprotected _left?: number;\n\tprotected _top?: number;\n\tprotected _right?: number;\n\tprotected _bottom?: number;\n\tprotected _callback: Callback | undefined;\n\n\tconstructor( theme: DThemeBase, options?: DBaseOptions<any>, callback?: () => void ) {\n\t\tthis._theme = theme;\n\t\tthis._callback = callback;\n\n\t\tif( options != null && options.padding != null ) {\n\t\t\tconst padding = options.padding;\n\t\t\tif( utilIsNumber( padding ) ) {\n\t\t\t\tthis._left = padding;\n\t\t\t\tthis._top = padding;\n\t\t\t\tthis._right = padding;\n\t\t\t\tthis._bottom = padding;\n\t\t\t} else {\n\t\t\t\tthis._left = padding.left;\n\t\t\t\tthis._top = padding.top;\n\t\t\t\tthis._right = padding.right;\n\t\t\t\tthis._bottom = padding.bottom;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\treturn this._theme;\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthis._theme = theme;\n\t}\n\n\tgetLeft(): number {\n\t\tconst left = this._left;\n\t\treturn left !== undefined ? left : this._theme.getPaddingLeft();\n\t}\n\n\tget left(): number | undefined {\n\t\treturn this._left;\n\t}\n\n\tset left( left: number | undefined ) {\n\t\tif( this._left !== left ) {\n\t\t\tthis._left = left;\n\t\t\tif( this._callback != null ) {\n\t\t\t\tthis._callback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTop(): number {\n\t\tconst top = this._top;\n\t\treturn top !== undefined ? top : this._theme.getPaddingTop();\n\t}\n\n\tget top(): number | undefined {\n\t\treturn this._top;\n\t}\n\n\tset top( top: number | undefined ) {\n\t\tif( this._top !== top ) {\n\t\t\tthis._top = top;\n\t\t\tif( this._callback != null ) {\n\t\t\t\tthis._callback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRight(): number {\n\t\tconst right = this._right;\n\t\treturn right !== undefined ? right : this._theme.getPaddingRight();\n\t}\n\n\tget right(): number | undefined {\n\t\treturn this._right;\n\t}\n\n\tset right( right: number | undefined ) {\n\t\tif( this._right !== right ) {\n\t\t\tthis._right = right;\n\t\t\tif( this._callback != null ) {\n\t\t\t\tthis._callback();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetBottom(): number {\n\t\tconst bottom = this._bottom;\n\t\treturn bottom !== undefined ? bottom : this._theme.getPaddingBottom();\n\t}\n\n\tget bottom(): number | undefined {\n\t\treturn this._bottom;\n\t}\n\n\tset bottom( bottom: number | undefined ) {\n\t\tif( this._bottom !== bottom ) {\n\t\t\tthis._bottom = bottom;\n\t\t\tif( this._callback != null ) {\n\t\t\t\tthis._callback();\n\t\t\t}\n\t\t}\n\t}\n\n\tset( padding: number ): void;\n\tset( topAndBottom: number, leftAndRight: number ): void;\n\tset( top: number, leftAndRight: number, bottom: number ): void;\n\tset( top: number, right?: number, bottom?: number, left?: number ) {\n\t\tif( right == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = top;\n\t\t\tthis.bottom = top;\n\t\t\tthis.left = top;\n\t\t} else if( bottom == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = top;\n\t\t\tthis.left = right;\n\t\t} else if( left == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = bottom;\n\t\t\tthis.left = right;\n\t\t} else {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = bottom;\n\t\t\tthis.left = left;\n\t\t}\n\t\tif( this._callback != null ) {\n\t\t\tthis._callback();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\n\ntype Callback = () => any;\n\nexport class DBasePoint {\n\tprotected _point: IPoint;\n\tcb: Callback;\n\tscope: any;\n\n\tconstructor( point: IPoint, cb: Callback, scope?: any ) {\n\t\tthis._point = point;\n\t\tthis.cb = cb;\n\t}\n\n\tget x() {\n\t\treturn this._point.x;\n\t}\n\n\tset x( x: number ) {\n\t\tconst point = this._point;\n\t\tif( point.x !== x ) {\n\t\t\tpoint.x = x;\n\t\t\tthis.cb.call( this.scope );\n\t\t}\n\t}\n\n\tget y() {\n\t\treturn this._point.y;\n\t}\n\n\tset y( y: number ) {\n\t\tconst point = this._point;\n\t\tif( point.y !== y ) {\n\t\t\tpoint.y = y;\n\t\t\tthis.cb.call( this.scope );\n\t\t}\n\t}\n\n\tset( x: number, y: number ) {\n\t\tconst point = this._point;\n\t\tif( point.x !== x || point.y !== y ) {\n\t\t\tpoint.set( x, y );\n\t\t\tthis.cb.call( this.scope );\n\t\t}\n\t}\n\n\tcopyFrom( target: IPoint ): this {\n\t\tconst point = this._point;\n\t\tif( point.x !== target.x || point.y !== target.y ) {\n\t\t\tpoint.copyFrom( target );\n\t\t\tthis.cb.call( this.scope );\n\t\t}\n\t\treturn this;\n\t}\n\n\tcopyTo( target: IPoint ): IPoint {\n\t\treturn target.copyFrom( this._point );\n\t}\n\n\tcopy(): this {\n\t\treturn this.copyFrom( arguments[ 0 ] );\n\t}\n\n\tclone( cb?: Function, scope?: any ): IPoint {\n\t\tcb = cb || this.cb;\n\t\tscope = scope || this.scope;\n\t\treturn new DBasePoint( this._point, cb as Callback, scope );\n\t}\n\n\tequals( p: IPoint ): boolean {\n\t\treturn this._point.equals( p );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer, MeshGeometry, Texture, TextureUvs } from \"pixi.js\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseBackgroundMeshGeometry extends MeshGeometry {\n\tprotected _texture: Texture;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _borderSize: number;\n\tprotected _cornerMask: DCornerMask;\n\tprotected _isDirty: boolean;\n\tprotected _textureId: number;\n\tprotected _vertices: Float32Array;\n\tprotected _uvs: Float32Array;\n\tprotected _indices: Uint16Array;\n\tprotected _vertexBuffer: Buffer;\n\tprotected _uvBuffer: Buffer;\n\tprotected _indexBuffer: Buffer;\n\n\tconstructor( texture: Texture, width: number, height: number, borderSize: number, cornerMask: DCornerMask ) {\n\t\tsuper( new Float32Array( 56 ), new Float32Array( 56 ), new Uint16Array( 42 ) );\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._texture = texture;\n\t\tthis._borderSize = borderSize;\n\t\tthis._cornerMask = cornerMask;\n\t\tthis._isDirty = true;\n\t\tthis._textureId = NaN;\n\n\t\tthis._vertexBuffer = this.getBuffer( \"aVertexPosition\" );\n\t\tthis._vertices = this._vertexBuffer.data as Float32Array;\n\t\tthis._uvBuffer = this.getBuffer( \"aTextureCoord\" );\n\t\tthis._uvs = this._uvBuffer.data as Float32Array;\n\t\tthis._indexBuffer = this.getIndex();\n\t\tthis._indices = this._indexBuffer.data as Uint16Array;\n\t}\n\n\tget borderSize(): number {\n\t\treturn this._borderSize;\n\t}\n\n\tset borderSize( borderSize: number ) {\n\t\tif( this._borderSize !== borderSize ) {\n\t\t\tthis._borderSize = borderSize;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget cornerMask(): DCornerMask {\n\t\treturn this._cornerMask;\n\t}\n\n\tset cornerMask( cornerMask: DCornerMask ) {\n\t\tif( this._cornerMask !== cornerMask ) {\n\t\t\tthis._cornerMask = cornerMask;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tset height( height: number ) {\n\t\tif( this._height !== height ) {\n\t\t\tthis._height = height;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget texture(): Texture {\n\t\treturn this._texture;\n\t}\n\n\tset texture( texture: Texture ) {\n\t\tif( this._texture !== texture ) {\n\t\t\tthis._texture = texture;\n\t\t\tthis._isDirty = true;\n\t\t\tthis._textureId = NaN;\n\t\t}\n\t}\n\n\tprotected getTextureId(): number {\n\t\treturn (this._texture as any)._updateID;\n\t}\n\n\tprotected fillVertices( iv: number, array: Float32Array, x0: number, x1: number, y0: number, y1: number ): void {\n\t\tarray[ iv + 0 ] = x0;\n\t\tarray[ iv + 1 ] = y0;\n\t\tarray[ iv + 2 ] = x1;\n\t\tarray[ iv + 3 ] = y0;\n\t\tarray[ iv + 4 ] = x0;\n\t\tarray[ iv + 5 ] = y1;\n\t\tarray[ iv + 6 ] = x1;\n\t\tarray[ iv + 7 ] = y1;\n\t}\n\n\tprotected fillIndices( ii: number, indices: Uint16Array, iv: number ): void {\n\t\tindices[ ii + 0 ] = iv + 0;\n\t\tindices[ ii + 1 ] = iv + 1;\n\t\tindices[ ii + 2 ] = iv + 2;\n\t\tindices[ ii + 3 ] = iv + 1;\n\t\tindices[ ii + 4 ] = iv + 3;\n\t\tindices[ ii + 5 ] = iv + 2;\n\t}\n\n\tprotected fillUvsCorner(\n\t\tiv: number, uvs: Float32Array, c: boolean,\n\t\tu0: number, u1: number, u2: number, u3: number,\n\t\tv0: number, v1: number, v2: number, v3: number\n\t): void {\n\t\tif( c ) {\n\t\t\tthis.fillVertices( iv, uvs, u0, u1, v0, v1 );\n\t\t} else {\n\t\t\tthis.fillVertices( iv, uvs, u3, u2, v0, v1 );\n\t\t}\n\t}\n\n\tprotected fillUvs( iv: number, uvs: Float32Array, u0: number, u1: number, v0: number, v1: number ): void {\n\t\tthis.fillVertices( iv, uvs, u0, u1, v0, v1 );\n\t}\n\n\tupdate(): void {\n\t\tconst texture = this.texture as any;\n\t\tif( ! texture.valid ) {\n\t\t\treturn;\n\t\t}\n\t\tconst textureId = this.getTextureId();\n\t\tif( this._isDirty || this._textureId !== textureId ) {\n\t\t\tthis._isDirty = false;\n\t\t\tthis._textureId = textureId;\n\t\t\tconst vertices = this._vertices;\n\t\t\tconst uvs = this._uvs;\n\t\t\tconst indices = this._indices;\n\n\t\t\tconst width = this._width;\n\t\t\tconst height = this._height;\n\t\t\tconst borderSize = this._borderSize;\n\n\t\t\tconst x0 = 0;\n\t\t\tconst x1 = Math.min( width * 0.5, borderSize );\n\t\t\tconst x2 = Math.max( width * 0.5, width - borderSize );\n\t\t\tconst x3 = width;\n\n\t\t\tconst y0 = 0;\n\t\t\tconst y1 = Math.min( height * 0.5, borderSize );\n\t\t\tconst y2 = Math.max( height * 0.5, height - borderSize );\n\t\t\tconst y3 = height;\n\n\t\t\tconst textureUvs: TextureUvs = texture._uvs;\n\n\t\t\tconst l = textureUvs.x0;\n\t\t\tconst r = textureUvs.x1;\n\t\t\tconst t = textureUvs.y0;\n\t\t\tconst b = textureUvs.y3;\n\t\t\tconst w = (r - l) * (borderSize / texture.width);\n\t\t\tconst h = (b - t) * (borderSize / texture.height);\n\n\t\t\tconst u0 = l;\n\t\t\tconst u1 = l + w;\n\t\t\tconst u2 = r - w;\n\t\t\tconst u3 = r;\n\n\t\t\tconst v0 = t;\n\t\t\tconst v1 = t + h;\n\t\t\tconst v2 = b - h;\n\t\t\tconst v3 = b;\n\n\t\t\tconst cornerMask = this._cornerMask;\n\t\t\tconst ctl = ! (cornerMask & DCornerMask.TOP_LEFT);\n\t\t\tconst ctr = ! (cornerMask & DCornerMask.TOP_RIGHT);\n\t\t\tconst cbl = ! (cornerMask & DCornerMask.BOTTOM_LEFT);\n\t\t\tconst cbr = ! (cornerMask & DCornerMask.BOTTOM_RIGHT);\n\n\t\t\t// Vertices & UVs\n\t\t\tlet iv = 0;\n\t\t\tlet ia = 0;\n\t\t\tlet ii = 0;\n\n\t\t\t// Top left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y0, y1 );\n\t\t\tthis.fillUvsCorner( iv, uvs, ctl, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Top middle\n\t\t\tthis.fillVertices( iv, vertices, x1, x2, y0, y1 );\n\t\t\tthis.fillUvs( iv, uvs, u1, u2, v0, v1 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Top right\n\t\t\tthis.fillVertices( iv, vertices, x3, x2, y0, y1 );\n\t\t\tthis.fillUvsCorner( iv, uvs, ctr, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Middle\n\t\t\tthis.fillVertices( iv, vertices, x0, x3, y1, y2 );\n\t\t\tthis.fillUvs( iv, uvs, u0, u3, v1, v2 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y3, y2 );\n\t\t\tthis.fillUvsCorner( iv, uvs, cbl, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom middle\n\t\t\tthis.fillVertices( iv, vertices, x1, x2, y2, y3 );\n\t\t\tthis.fillUvs( iv, uvs, u1, u2, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom right\n\t\t\tthis.fillVertices( iv, vertices, x3, x2, y3, y2 );\n\t\t\tthis.fillUvsCorner( iv, uvs, cbr, u3, u2, u1, u0, v3, v2, v1, v0 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\n\t\t\tthis._vertexBuffer.update();\n\t\t\tthis._uvBuffer.update();\n\t\t\tthis._indexBuffer.update();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Mesh, MeshMaterial, Renderer, Texture } from \"pixi.js\";\nimport { DBaseBackgroundMeshGeometry } from \"./d-base-background-mesh-geometry\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseBackgroundMesh extends Mesh {\n\tgeometry!: DBaseBackgroundMeshGeometry;\n\tshader!: MeshMaterial;\n\n\tconstructor( texture: Texture, borderSize: number, cornerMask: DCornerMask ) {\n\t\tsuper(\n\t\t\tnew DBaseBackgroundMeshGeometry( texture, 100, 100, borderSize, cornerMask ),\n\t\t\tnew MeshMaterial( texture )\n\t\t);\n\t}\n\n\tget texture() {\n\t\treturn this.shader.texture;\n\t}\n\n\tset texture( texture: Texture ) {\n\t\tif( this.shader.texture !== texture ) {\n\t\t\tthis.shader.texture = texture;\n\t\t\tthis.geometry.texture = texture;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this.geometry.width;\n\t}\n\n\tset width( width: number ) {\n\t\tthis.geometry.width = width;\n\t}\n\n\tget height(): number {\n\t\treturn this.geometry.height;\n\t}\n\n\tset height( height: number ) {\n\t\tthis.geometry.height = height;\n\t}\n\n\tget borderSize(): number {\n\t\treturn this.geometry.cornerMask;\n\t}\n\n\tset borderSize( borderSize: number ) {\n\t\tthis.geometry.borderSize = borderSize;\n\t}\n\n\tget cornerMask(): DCornerMask {\n\t\treturn this.geometry.cornerMask;\n\t}\n\n\tset cornerMask( cornerMask: DCornerMask ) {\n\t\tthis.geometry.cornerMask = cornerMask;\n\t}\n\n\tprotected _render( renderer: Renderer ): void {\n\t\tthis.geometry.update();\n\t\tsuper._render( renderer );\n\t}\n\n\tupdate(): void {\n\t\tthis.geometry.update();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer, MeshGeometry, Texture, TextureUvs } from \"pixi.js\";\nimport { DBorderMask } from \"./d-border\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseBorderMeshGeometry extends MeshGeometry {\n\tprotected _texture: Texture;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _borderSize: number;\n\tprotected _borderMask: DBorderMask;\n\tprotected _cornerMask: DCornerMask;\n\tprotected _isDirty: boolean;\n\tprotected _textureId: number;\n\tprotected _vertices: Float32Array;\n\tprotected _uvs: Float32Array;\n\tprotected _indices: Uint16Array;\n\tprotected _vertexBuffer: Buffer;\n\tprotected _uvBuffer: Buffer;\n\tprotected _indexBuffer: Buffer;\n\n\tconstructor(\n\t\ttexture: Texture, width: number, height: number,\n\t\tborderSize: number, borderMask: DBorderMask, cornerMask: DCornerMask\n\t) {\n\t\tsuper( new Float32Array( 64 ), new Float32Array( 64 ), new Uint16Array( 48 ) );\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._texture = texture;\n\t\tthis._borderSize = borderSize;\n\t\tthis._borderMask = borderMask;\n\t\tthis._cornerMask = cornerMask;\n\t\tthis._isDirty = true;\n\t\tthis._textureId = NaN;\n\n\t\tthis._vertexBuffer = this.getBuffer( \"aVertexPosition\" );\n\t\tthis._vertices = this._vertexBuffer.data as Float32Array;\n\t\tthis._uvBuffer = this.getBuffer( \"aTextureCoord\" );\n\t\tthis._uvs = this._uvBuffer.data as Float32Array;\n\t\tthis._indexBuffer = this.getIndex();\n\t\tthis._indices = this._indexBuffer.data as Uint16Array;\n\t}\n\n\tget borderMask(): DBorderMask {\n\t\treturn this._borderMask;\n\t}\n\n\tset borderMask( borderMask: DBorderMask ) {\n\t\tif( this._borderMask !== borderMask ) {\n\t\t\tthis._borderMask = borderMask;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget cornerMask(): DCornerMask {\n\t\treturn this._cornerMask;\n\t}\n\n\tset cornerMask( cornerMask: DCornerMask ) {\n\t\tif( this._cornerMask !== cornerMask ) {\n\t\t\tthis._cornerMask = cornerMask;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget borderSize(): number {\n\t\treturn this._borderSize;\n\t}\n\n\tset borderSize( borderSize: number ) {\n\t\tif( this._borderSize !== borderSize ) {\n\t\t\tthis._borderSize = borderSize;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tset height( height: number ) {\n\t\tif( this._height !== height ) {\n\t\t\tthis._height = height;\n\t\t\tthis._isDirty = true;\n\t\t}\n\t}\n\n\tget texture(): Texture {\n\t\treturn this._texture;\n\t}\n\n\tset texture( texture: Texture ) {\n\t\tif( this._texture !== texture ) {\n\t\t\tthis._texture = texture;\n\t\t\tthis._isDirty = true;\n\t\t\tthis._textureId = NaN;\n\t\t}\n\t}\n\n\tprotected fillVertices( iv: number, array: Float32Array, x0: number, x1: number, y0: number, y1: number ): void {\n\t\tarray[ iv + 0 ] = x0;\n\t\tarray[ iv + 1 ] = y0;\n\t\tarray[ iv + 2 ] = x1;\n\t\tarray[ iv + 3 ] = y0;\n\t\tarray[ iv + 4 ] = x0;\n\t\tarray[ iv + 5 ] = y1;\n\t\tarray[ iv + 6 ] = x1;\n\t\tarray[ iv + 7 ] = y1;\n\t}\n\n\tprotected fillIndices( ii: number, indices: Uint16Array, iv: number ): void {\n\t\tindices[ ii + 0 ] = iv + 0;\n\t\tindices[ ii + 1 ] = iv + 1;\n\t\tindices[ ii + 2 ] = iv + 2;\n\t\tindices[ ii + 3 ] = iv + 1;\n\t\tindices[ ii + 4 ] = iv + 3;\n\t\tindices[ ii + 5 ] = iv + 2;\n\t}\n\n\tprotected fillUvsCorner(\n\t\tiv: number, uvs: Float32Array, b1: boolean, b2: boolean, c: boolean,\n\t\tu0: number, u1: number, u2: number, u3: number,\n\t\tv0: number, v1: number, v2: number, v3: number\n\t): void {\n\t\tif( b1 || b2 ) {\n\t\t\tif( c ) {\n\t\t\t\tthis.fillVertices( iv, uvs, u0, u1, v0, v1 );\n\t\t\t} else if( b1 && b2 ) {\n\t\t\t\tthis.fillVertices( iv, uvs, u3, u2, v0, v1 );\n\t\t\t} else if( b1 ) {\n\t\t\t\tthis.fillVertices( iv, uvs, u1, u2, v0, v1 );\n\t\t\t} else {\n\t\t\t\tthis.fillVertices( iv, uvs, u0, u1, v1, v2 );\n\t\t\t}\n\t\t} else {\n\t\t\tthis.fillVertices( iv, uvs, u1, u1, v1, v1 );\n\t\t}\n\t}\n\n\tprotected fillUvs(\n\t\tiv: number, uvs: Float32Array, b: boolean,\n\t\tu0: number, u1: number, v0: number, v1: number,\n\t\tuz: number, vz: number\n\t): void {\n\t\tif( b ) {\n\t\t\tthis.fillVertices( iv, uvs, u0, u1, v0, v1 );\n\t\t} else {\n\t\t\tthis.fillVertices( iv, uvs, uz, uz, vz, vz );\n\t\t}\n\t}\n\n\tupdate(): void {\n\t\tconst texture = this._texture as any;\n\t\tif( ! texture.valid ) {\n\t\t\treturn;\n\t\t}\n\t\tconst textureId = texture._updateID;\n\t\tif( this._isDirty || this._textureId !== textureId ) {\n\t\t\tthis._isDirty = false;\n\t\t\tthis._textureId = textureId;\n\t\t\tconst vertices = this._vertices;\n\t\t\tconst uvs = this._uvs;\n\t\t\tconst indices = this._indices;\n\n\t\t\tconst width = this._width;\n\t\t\tconst height = this._height;\n\t\t\tconst borderSize = this._borderSize;\n\n\t\t\tconst x0 = 0;\n\t\t\tconst x1 = Math.min( width * 0.5, borderSize );\n\t\t\tconst x2 = Math.max( width * 0.5, width - borderSize );\n\t\t\tconst x3 = width;\n\n\t\t\tconst y0 = 0;\n\t\t\tconst y1 = Math.min( height * 0.5, borderSize );\n\t\t\tconst y2 = Math.max( height * 0.5, height - borderSize );\n\t\t\tconst y3 = height;\n\n\t\t\tconst textureUvs: TextureUvs = texture._uvs;\n\n\t\t\tconst l = textureUvs.x0;\n\t\t\tconst r = textureUvs.x1;\n\t\t\tconst t = textureUvs.y0;\n\t\t\tconst b = textureUvs.y3;\n\t\t\tconst w = (r - l) * (borderSize / texture.width);\n\t\t\tconst h = (b - t) * (borderSize / texture.height);\n\n\t\t\tconst u0 = l;\n\t\t\tconst u1 = l + w;\n\t\t\tconst u2 = r - w;\n\t\t\tconst u3 = r;\n\n\t\t\tconst v0 = t;\n\t\t\tconst v1 = t + h;\n\t\t\tconst v2 = b - h;\n\t\t\tconst v3 = b;\n\n\t\t\tconst borderMask = this._borderMask;\n\t\t\tconst bt = ! (borderMask & DBorderMask.TOP);\n\t\t\tconst bb = ! (borderMask & DBorderMask.BOTTOM);\n\t\t\tconst bl = ! (borderMask & DBorderMask.LEFT);\n\t\t\tconst br = ! (borderMask & DBorderMask.RIGHT);\n\n\t\t\tconst cornerMask = this._cornerMask;\n\t\t\tconst ctl = ! (cornerMask & DCornerMask.TOP_LEFT);\n\t\t\tconst ctr = ! (cornerMask & DCornerMask.TOP_RIGHT);\n\t\t\tconst cbl = ! (cornerMask & DCornerMask.BOTTOM_LEFT);\n\t\t\tconst cbr = ! (cornerMask & DCornerMask.BOTTOM_RIGHT);\n\n\t\t\t// Vertices & UVs\n\t\t\tlet iv = 0;\n\t\t\tlet ia = 0;\n\t\t\tlet ii = 0;\n\n\t\t\t// Top left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y0, y1 );\n\t\t\tthis.fillUvsCorner( iv, uvs, bt, bl, ctl, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Top middle\n\t\t\tthis.fillVertices( iv, vertices, x1, x2, y0, y1 );\n\t\t\tthis.fillUvs( iv, uvs, bt, u1, u2, v0, v1, u1, v1 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Top right\n\t\t\tthis.fillVertices( iv, vertices, x3, x2, y0, y1 );\n\t\t\tthis.fillUvsCorner( iv, uvs, bt, br, ctr, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Middle left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y1, y2 );\n\t\t\tthis.fillUvs( iv, uvs, bl, u0, u1, v1, v2, u1, v1 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Middle right\n\t\t\tthis.fillVertices( iv, vertices, x2, x3, y1, y2 );\n\t\t\tthis.fillUvs( iv, uvs, br, u2, u3, v1, v2, u2, v2 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom left\n\t\t\tthis.fillVertices( iv, vertices, x0, x1, y3, y2 );\n\t\t\tthis.fillUvsCorner( iv, uvs, bb, bl, cbl, u0, u1, u2, u3, v0, v1, v2, v3 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom middle\n\t\t\tthis.fillVertices( iv, vertices, x1, x2, y2, y3 );\n\t\t\tthis.fillUvs( iv, uvs, bb, u1, u2, v2, v3, u2, v2 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\t\t\tiv += 8;\n\t\t\tia += 4;\n\t\t\tii += 6;\n\n\t\t\t// Bottom right\n\t\t\tthis.fillVertices( iv, vertices, x3, x2, y3, y2 );\n\t\t\tthis.fillUvsCorner( iv, uvs, bb, br, cbr, u3, u2, u1, u0, v3, v2, v1, v0 );\n\t\t\tthis.fillIndices( ii, indices, ia );\n\n\t\t\tthis._vertexBuffer.update();\n\t\t\tthis._uvBuffer.update();\n\t\t\tthis._indexBuffer.update();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Mesh, MeshMaterial, Renderer, Texture } from \"pixi.js\";\nimport { DBaseBorderMeshGeometry } from \"./d-base-border-mesh-geometry\";\nimport { DBorderMask } from \"./d-border\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseBorderMesh extends Mesh {\n\tgeometry!: DBaseBorderMeshGeometry;\n\tshader!: MeshMaterial;\n\n\tconstructor( texture: Texture, borderSize: number, borderMask: DBorderMask, cornerMask: DCornerMask ) {\n\t\tsuper(\n\t\t\tnew DBaseBorderMeshGeometry( texture, 100, 100, borderSize, borderMask, cornerMask ),\n\t\t\tnew MeshMaterial( texture )\n\t\t);\n\t}\n\n\tget texture() {\n\t\treturn this.shader.texture;\n\t}\n\n\tset texture( texture: Texture ) {\n\t\tif( this.shader.texture !== texture ) {\n\t\t\tthis.shader.texture = texture;\n\t\t\tthis.geometry.texture = texture;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this.geometry.width;\n\t}\n\n\tset width( width: number ) {\n\t\tthis.geometry.width = width;\n\t}\n\n\tget height(): number {\n\t\treturn this.geometry.height;\n\t}\n\n\tset height( height: number ) {\n\t\tthis.geometry.height = height;\n\t}\n\n\tget borderSize(): number {\n\t\treturn this.geometry.borderSize;\n\t}\n\n\tset borderSize( borderSize: number ) {\n\t\tthis.geometry.borderSize = borderSize;\n\t}\n\n\tget borderMask(): DBorderMask {\n\t\treturn this.geometry.borderMask;\n\t}\n\n\tset borderMask( borderMask: DBorderMask ) {\n\t\tthis.geometry.borderMask = borderMask;\n\t}\n\n\tget cornerMask(): DCornerMask {\n\t\treturn this.geometry.cornerMask;\n\t}\n\n\tset cornerMask( cornerMask: DCornerMask ) {\n\t\tthis.geometry.cornerMask = cornerMask;\n\t}\n\n\tprotected _render( renderer: Renderer ): void {\n\t\tthis.geometry.update();\n\t\tsuper._render( renderer );\n\t}\n\n\tupdate(): void {\n\t\tthis.geometry.update();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseBorderMesh } from \"./d-base-border-mesh\";\n\nexport class DBaseOutlineMesh extends DBaseBorderMesh {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DReflowable } from \"./d-base\";\nimport { DBaseBackgroundMesh } from \"./d-base-background-mesh\";\nimport { DBaseBorderMesh } from \"./d-base-border-mesh\";\nimport { DBaseOutlineMesh } from \"./d-base-outline-mesh\";\n\nexport class DBaseReflowable implements DReflowable {\n\tprotected _lastBackgroundCornerRadius: number;\n\tprotected _lastBorderCornerRadius: number;\n\tprotected _lastBorderWidth: number;\n\tprotected _lastOutlineCornerRadius: number;\n\tprotected _lastOutlineWidth: number;\n\tprotected _backgroundPlane: DBaseBackgroundMesh;\n\tprotected _borderPlane: DBaseBorderMesh;\n\tprotected _outlinePlane: DBaseOutlineMesh;\n\n\tconstructor( base: DBase ) {\n\t\tconst theme = base.theme;\n\t\tconst corner = base.corner;\n\t\tconst cornerRadius = corner.getRadius();\n\t\tconst cornerHeight = cornerRadius + 1;\n\t\tconst cornerMask = corner.getMask();\n\t\tconst backgroundPlane = this._backgroundPlane = new DBaseBackgroundMesh(\n\t\t\ttheme.getBackgroundTexture( cornerRadius ),\n\t\t\tcornerHeight, cornerMask\n\t\t);\n\t\tbase.appendRenderable( backgroundPlane, true );\n\n\t\tconst state = base.state;\n\n\t\tconst border = base.border;\n\t\tconst borderWidth = border.getWidth( state );\n\t\tconst borderMask = border.getMask( state );\n\t\tconst borderPlane = this._borderPlane = new DBaseBorderMesh(\n\t\t\ttheme.getBorderTexture( cornerRadius, borderWidth ),\n\t\t\tcornerHeight,\n\t\t\tborderMask,\n\t\t\tcornerMask\n\t\t);\n\t\tbase.appendRenderable( borderPlane, false );\n\n\t\tconst outline = base.outline;\n\t\tconst outlineWidth = outline.getWidth( state );\n\t\tconst outlineMask = outline.getMask( state );\n\t\tconst outlinePlane = this._outlinePlane = new DBaseOutlineMesh(\n\t\t\ttheme.getBorderTexture( cornerRadius, outlineWidth ),\n\t\t\tcornerHeight,\n\t\t\toutlineMask,\n\t\t\tcornerMask\n\t\t);\n\t\tbase.appendRenderable( outlinePlane, false );\n\n\t\tthis._lastBackgroundCornerRadius = cornerRadius;\n\t\tthis._lastBorderCornerRadius = cornerRadius;\n\t\tthis._lastBorderWidth = borderWidth;\n\t\tthis._lastOutlineCornerRadius = cornerRadius;\n\t\tthis._lastOutlineWidth = outlineWidth;\n\n\t\tbase.addReflowable( this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tconst theme = base.theme;\n\t\tconst state = base.state;\n\t\tconst corner = base.corner;\n\t\tconst cornerRadius = corner.getRadius();\n\t\tconst cornerHeight = cornerRadius + 1;\n\t\tconst cornerMask = corner.getMask();\n\n\t\t// Background\n\t\tconst background = base.background;\n\t\tconst backgroundPlane = this._backgroundPlane;\n\t\tconst backgroundColor = background.getColor( state );\n\t\tif( backgroundColor != null ) {\n\t\t\tconst backgroundAlpha = background.getAlpha( state );\n\t\t\tif( 0 < backgroundAlpha ) {\n\t\t\t\tif( this._lastBackgroundCornerRadius !== cornerRadius ) {\n\t\t\t\t\tthis._lastBackgroundCornerRadius = cornerRadius;\n\t\t\t\t\tbackgroundPlane.texture = theme.getBackgroundTexture( cornerRadius );\n\t\t\t\t\tbackgroundPlane.borderSize = cornerHeight;\n\t\t\t\t}\n\t\t\t\tbackgroundPlane.tint = backgroundColor;\n\t\t\t\tbackgroundPlane.alpha = backgroundAlpha;\n\t\t\t\tbackgroundPlane.width = width;\n\t\t\t\tbackgroundPlane.height = height;\n\t\t\t\tbackgroundPlane.cornerMask = cornerMask;\n\t\t\t\tbackgroundPlane.visible = true;\n\t\t\t} else {\n\t\t\t\tbackgroundPlane.visible = false;\n\t\t\t}\n\t\t} else {\n\t\t\tbackgroundPlane.visible = false;\n\t\t}\n\n\t\t// Border\n\t\tconst border = base.border;\n\t\tconst borderPlane = this._borderPlane;\n\t\tconst borderColor = border.getColor( state );\n\t\tif( borderColor != null ) {\n\t\t\tconst borderAlpha = border.getAlpha( state );\n\t\t\tif( 0 < borderAlpha ) {\n\t\t\t\tconst borderWidth = border.getWidth( state );\n\t\t\t\tif( this._lastBorderCornerRadius !== cornerRadius || this._lastBorderWidth !== borderWidth ) {\n\t\t\t\t\tthis._lastBorderCornerRadius = cornerRadius;\n\t\t\t\t\tthis._lastBorderWidth = borderWidth;\n\t\t\t\t\tborderPlane.texture = theme.getBorderTexture( cornerRadius, borderWidth );\n\t\t\t\t\tborderPlane.borderSize = cornerHeight;\n\t\t\t\t}\n\t\t\t\tconst borderAlign = border.getAlign( state );\n\t\t\t\tconst borderMask = border.getMask( state );\n\t\t\t\tborderPlane.tint = borderColor;\n\t\t\t\tborderPlane.alpha = borderAlpha;\n\t\t\t\tconst borderOffset = borderAlign * borderWidth;\n\t\t\t\tborderPlane.x = -borderOffset;\n\t\t\t\tborderPlane.y = -borderOffset;\n\t\t\t\tborderPlane.width = width + borderOffset * 2;\n\t\t\t\tborderPlane.height = height + borderOffset * 2;\n\t\t\t\tborderPlane.borderMask = borderMask;\n\t\t\t\tborderPlane.cornerMask = cornerMask;\n\t\t\t\tborderPlane.visible = true;\n\t\t\t} else {\n\t\t\t\tborderPlane.visible = false;\n\t\t\t}\n\t\t} else {\n\t\t\tborderPlane.visible = false;\n\t\t}\n\n\t\t// Outline\n\t\tconst outline = base.outline;\n\t\tconst outlinePlane = this._outlinePlane;\n\t\tconst outlineColor = outline.getColor( state );\n\t\tif( outlineColor != null ) {\n\t\t\tconst outlineAlpha = outline.getAlpha( state );\n\t\t\tif( 0 < outlineAlpha ) {\n\t\t\t\tconst outlineWidth = outline.getWidth( state );\n\t\t\t\tif( this._lastOutlineCornerRadius !== cornerRadius || this._lastOutlineWidth !== outlineWidth ) {\n\t\t\t\t\tthis._lastOutlineCornerRadius = cornerRadius;\n\t\t\t\t\tthis._lastOutlineWidth = outlineWidth;\n\t\t\t\t\toutlinePlane.texture = theme.getBorderTexture( cornerRadius, outlineWidth );\n\t\t\t\t\toutlinePlane.borderSize = cornerHeight;\n\t\t\t\t}\n\t\t\t\tconst outlineMask = outline.getMask( state );\n\t\t\t\tconst outlineOffset = outline.getOffset( state );\n\t\t\t\tconst outlineAlign = outline.getAlign( state );\n\t\t\t\toutlinePlane.tint = outlineColor;\n\t\t\t\toutlinePlane.alpha = outlineAlpha;\n\t\t\t\tconst outlineOffsetAccumulative = outlineOffset + outlineAlign * outlineWidth;\n\t\t\t\toutlinePlane.x = -outlineOffsetAccumulative;\n\t\t\t\toutlinePlane.y = -outlineOffsetAccumulative;\n\t\t\t\toutlinePlane.width = width + outlineOffsetAccumulative * 2;\n\t\t\t\toutlinePlane.height = height + outlineOffsetAccumulative * 2;\n\t\t\t\toutlinePlane.borderMask = outlineMask;\n\t\t\t\toutlinePlane.cornerMask = cornerMask;\n\t\t\t\toutlinePlane.visible = true;\n\t\t\t} else {\n\t\t\t\toutlinePlane.visible = false;\n\t\t\t}\n\t\t} else {\n\t\t\toutlinePlane.visible = false;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\n\nexport class DBaseStates {\n\tstatic is( target: DBaseState, state: DBaseState ): boolean {\n\t\treturn ( (target & state) !== 0 );\n\t}\n\n\tstatic isHovered( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.HOVERED );\n\t}\n\n\tstatic isDragging( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.DRAGGING );\n\t}\n\n\tstatic isFocused( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.FOCUSED );\n\t}\n\n\tstatic isFocusedIn( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.FOCUSED | DBaseState.FOCUSED_IN );\n\t}\n\n\tstatic isActive( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.ACTIVE );\n\t}\n\n\tstatic isActiveIn( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.ACTIVE | DBaseState.ACTIVE_IN );\n\t}\n\n\tstatic isNotActive( state: DBaseState ): boolean {\n\t\treturn DBaseStates.is( state, DBaseState.DISABLED ) || ! DBaseStates.is( state, DBaseState.ACTIVE );\n\t}\n\n\tstatic isPressed( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.PRESSED );\n\t}\n\n\tstatic isDisabled( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.DISABLED );\n\t}\n\n\tstatic isReadOnly( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.READ_ONLY );\n\t}\n\n\tstatic isActionable( target: DBaseState ) {\n\t\treturn ! DBaseStates.is( target, DBaseState.DISABLED | DBaseState.READ_ONLY );\n\t}\n\n\tstatic isInvalid( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.INVALID );\n\t}\n\n\tstatic isSucceeded( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.SUCCEEDED );\n\t}\n\n\tstatic isFailed( target: DBaseState ) {\n\t\treturn DBaseStates.is( target, DBaseState.FAILED );\n\t}\n\n\tstatic bind(\n\t\tdestination: DBase<any, any>, destinationState: DBaseState,\n\t\tsource: DBase<any, any>, when: ( sourceState: DBaseState ) => boolean\n\t) {\n\t\tdestination.setState( destinationState, when( source.state ) );\n\t\tsource.on( \"statechange\", ( newSourceState: DBaseState ) => {\n\t\t\tdestination.setState( destinationState, when( newSourceState ) );\n\t\t});\n\t}\n\n\tstatic disable(\n\t\tdestination: DBase<any, any>, source: DBase<any, any>,\n\t\twhen: ( sourceState: DBaseState ) => boolean = DBaseStates.isNotActive\n\t) {\n\t\tDBaseStates.bind( destination, DBaseState.DISABLED, source, when );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DScalar } from \"./d-scalar\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nconst enum NodeType {\n\t// Parensesis\n\tOPEN,\n\tCLOSE,\n\tPARENSESIS,\n\n\t// Operations\n\tADD_OR_PLUS,\n\tSUB_OR_MINUS,\n\n\tPLUS,\n\tMINUS,\n\n\tADD,\n\tSUB,\n\tMUL,\n\tDIV,\n\n\t// Literals\n\tPARENT,\n\tSELF,\n\tPADDING,\n\tCURRENT,\n\tNUMBER\n}\n\ntype NodeTypeOperator = NodeType.SUB_OR_MINUS | NodeType.ADD_OR_PLUS |\n\tNodeType.SUB | NodeType.ADD | NodeType.MUL | NodeType.DIV |\n\tNodeType.OPEN | NodeType.CLOSE;\ntype NodeTypeLiteral = NodeType.NUMBER | NodeType.PARENT | NodeType.SELF | NodeType.PADDING | NodeType.CURRENT;\ntype Token = NodeTypeOperator | [ NodeTypeLiteral, number ];\n\ninterface NodeOrTokenParensesis {\n\t[ 0 ]: NodeType.PARENSESIS;\n\t[ 1 ]: NodeOrToken[];\n}\n\ninterface NodeOrTokenUnary {\n\t[ 0 ]: NodeType.PLUS | NodeType.MINUS;\n\t[ 1 ]: NodeOrToken;\n}\n\ntype NodeArithmeticOperator = NodeType.SUB | NodeType.ADD | NodeType.MUL | NodeType.DIV;\n\ninterface NodeOrTokenArithmetic {\n\t[ 0 ]: NodeArithmeticOperator;\n\t[ 1 ]: NodeOrToken;\n\t[ 2 ]: NodeOrToken;\n}\n\ninterface NodeLiteral {\n\t[ 0 ]: NodeTypeLiteral;\n\t[ 1 ]: number;\n}\n\ntype NodeOrToken = Token | NodeOrTokenParensesis | NodeOrTokenUnary | NodeOrTokenArithmetic;\n\ninterface NodeParensesis {\n\t[ 0 ]: NodeType.PARENSESIS;\n\t[ 1 ]: Node[];\n}\n\ninterface NodeUnary {\n\t[ 0 ]: NodeType.PLUS | NodeType.MINUS;\n\t[ 1 ]: Node;\n}\n\ninterface NodeArithmetic {\n\t[ 0 ]: NodeArithmeticOperator;\n\t[ 1 ]: Node;\n\t[ 2 ]: Node;\n}\n\ntype Node = NodeParensesis | NodeUnary | NodeArithmetic | NodeLiteral;\n\nconst TOKEN_MAPPING_OPERATOR: { [ token: string ]: NodeTypeOperator | undefined } = {\n\t\"+\": NodeType.ADD_OR_PLUS,\n\t\"-\": NodeType.SUB_OR_MINUS,\n\t\"*\": NodeType.MUL,\n\t\"/\": NodeType.DIV,\n\t\"(\": NodeType.OPEN,\n\t\")\": NodeType.CLOSE\n};\n\nconst TOKEN_MAPPING_LITERAL: { [ token: string ]: NodeTypeLiteral | undefined } = {\n\t\"%\": NodeType.PARENT,\n\t\"s\": NodeType.SELF,\n\t\"p\": NodeType.PADDING,\n\t\"c\": NodeType.CURRENT\n};\n\n/**\n * Parser and evaluator of the scalar expressions like `100% - 50s`.\n *\n * Literals\n *\n * * x%: 0.01 * x * parent value\n * * xs: 0.01 * x * self value\n * * xp: 0.01 * x * padding\n * * xc: 0.01 * x * current\n *\n * Operators\n *\n * * `+`\n * * `-`\n * * `*`\n * * `/`\n * * `(` and `)`\n *\n * Examples\n *\n * * `90%`: 0.9 * parent value\n * * `50s`: 0.5 * self value\n * * `90% - 50s`: 0.9 * parent value - 0.5 * self value\n * * `90% - (50s + 100) * 2`: 0.9 * parent value - ( 0.5 * self value + 100 ) * 2\n */\nexport class DScalarExpression implements DScalar {\n\tprotected _node: Node;\n\n\tconstructor( expression: string ) {\n\t\tconst nodes: NodeOrToken[] = this.toToken( expression );\n\t\tthis.toParensesis( nodes, 0 );\n\t\tthis.toUnary( nodes );\n\t\tthis.toArithmetic( nodes, NodeType.MUL, NodeType.DIV );\n\t\tthis.toArithmetic( nodes, NodeType.ADD, NodeType.SUB );\n\t\tif( nodes.length === 1 ) {\n\t\t\tconst node = nodes[ 0 ];\n\t\t\tif( ! utilIsNumber( node ) ) {\n\t\t\t\tthis._node = node as any;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthrow new Error( `Failed to parse '${expression}'` );\n\t}\n\n\ttoParensesis( nodes: NodeOrToken[], from: number ): void {\n\t\tfor( let i = from, imax = nodes.length; i < imax; ++i ) {\n\t\t\tconst inode = nodes[ i ];\n\t\t\tif( inode === NodeType.OPEN ) {\n\t\t\t\tfor( let j = i + 1, jmax = nodes.length; j < jmax; ++j ) {\n\t\t\t\t\tconst jnode = nodes[ j ];\n\t\t\t\t\tswitch( jnode ) {\n\t\t\t\t\tcase NodeType.CLOSE:\n\t\t\t\t\t\tconst operand = nodes.splice( i + 1, j - i );\n\t\t\t\t\t\toperand.length -= 1;\n\t\t\t\t\t\tnodes[ i ] = [ NodeType.PARENSESIS, operand ];\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase NodeType.OPEN:\n\t\t\t\t\t\tthis.toParensesis( nodes, j );\n\t\t\t\t\t\tjmax = nodes.length;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthrow new Error( `Malformed parensesis` );\n\t\t\t}\n\t\t}\n\t}\n\n\ttoUnaryNode( node: NodeOrToken ): void {\n\t\tif( ! utilIsNumber( node ) && node[ 0 ] === NodeType.PARENSESIS ) {\n\t\t\tthis.toUnary( node[ 1 ] );\n\t\t}\n\t}\n\n\ttoUnary( nodes: NodeOrToken[] ): void {\n\t\tfor( let i = 0, imax = nodes.length; i < imax; ++i ) {\n\t\t\tconst node = nodes[ i ];\n\t\t\tif( node === NodeType.ADD_OR_PLUS || node === NodeType.SUB_OR_MINUS ) {\n\t\t\t\tif( i <= 0 || utilIsNumber( nodes[ i - 1 ] ) ) {\n\t\t\t\t\tif( i + 1 < imax && ! utilIsNumber( nodes[ i + 1 ] ) ) {\n\t\t\t\t\t\tconst operand = nodes.splice( i + 1, 1 )[ 0 ];\n\t\t\t\t\t\tconst type = ( node === NodeType.ADD_OR_PLUS ? NodeType.PLUS : NodeType.MINUS );\n\t\t\t\t\t\tnodes[ i ] = [ type, operand ];\n\t\t\t\t\t\timax = nodes.length;\n\t\t\t\t\t\tthis.toUnaryNode( operand );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error( \"Malformed unary operator\" );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst type = ( node === NodeType.ADD_OR_PLUS ? NodeType.ADD : NodeType.SUB );\n\t\t\t\t\tnodes[ i ] = type;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.toUnaryNode( node );\n\t\t\t\timax = nodes.length;\n\t\t\t}\n\t\t}\n\t}\n\n\ttoArithmeticNode( node: NodeOrToken, operatorA: NodeArithmeticOperator, operatorB: NodeArithmeticOperator ): void {\n\t\tif( ! utilIsNumber( node ) ) {\n\t\t\tif( node[ 0 ] === NodeType.PARENSESIS ) {\n\t\t\t\tthis.toArithmetic( node[ 1 ], operatorA, operatorB );\n\t\t\t} else if( node[ 0 ] === NodeType.PLUS || node[ 0 ] === NodeType.MINUS ) {\n\t\t\t\tthis.toArithmeticNode( node[ 1 ], operatorA, operatorB );\n\t\t\t} else if( node[ 0 ] === NodeType.ADD || node[ 0 ] === NodeType.SUB ||\n\t\t\t\tnode[ 0 ] === NodeType.MUL || node[ 0 ] === NodeType.DIV ) {\n\t\t\t\tthis.toArithmeticNode( node[ 1 ], operatorA, operatorB );\n\t\t\t\tthis.toArithmeticNode( node[ 2 ], operatorA, operatorB );\n\t\t\t}\n\t\t}\n\t}\n\n\ttoArithmetic( nodes: NodeOrToken[], operatorA: NodeArithmeticOperator, operatorB: NodeArithmeticOperator ): void {\n\t\tfor( let i = 0, imax = nodes.length; i < imax; ++i ) {\n\t\t\tconst node = nodes[ i ];\n\t\t\tif( node === operatorA || node === operatorB ) {\n\t\t\t\tif( 0 < i && i + 1 < imax ) {\n\t\t\t\t\tconst left = nodes[ i - 1 ];\n\t\t\t\t\tconst right = nodes[ i + 1 ];\n\t\t\t\t\tif( ! utilIsNumber( left ) && ! utilIsNumber( right ) ) {\n\t\t\t\t\t\tnodes.splice( i, 2 );\n\t\t\t\t\t\tnodes[ i - 1 ] = [ node, left, right ];\n\t\t\t\t\t\ti -= 1;\n\t\t\t\t\t\timax = nodes.length;\n\t\t\t\t\t\tthis.toArithmeticNode( left, operatorA, operatorB );\n\t\t\t\t\t\tthis.toArithmeticNode( right, operatorA, operatorB );\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error( `Malformed operands for the operator ${node}` );\n\t\t\t} else {\n\t\t\t\tthis.toArithmeticNode( node, operatorA, operatorB );\n\t\t\t\timax = nodes.length;\n\t\t\t}\n\t\t}\n\t}\n\n\ttoToken( expression: string ): Token[] {\n\t\tconst tokenRegEx = /(?:\\+|-|\\*|\\/|\\(|\\)|(?:\\d+(?:\\.\\d*)?[%psc]?))/g;\n\t\tconst tokens: Token[] = [];\n\t\twhile( true ) {\n\t\t\tconst matched = tokenRegEx.exec( expression );\n\t\t\tif( matched != null ) {\n\t\t\t\tconst token = matched[ 0 ];\n\t\t\t\tconst tokenTypeOperator = TOKEN_MAPPING_OPERATOR[ token ];\n\t\t\t\tif( tokenTypeOperator != null ) {\n\t\t\t\t\ttokens.push( tokenTypeOperator );\n\t\t\t\t} else {\n\t\t\t\t\tconst parsedToken = parseFloat( token );\n\t\t\t\t\tif( parsedToken !== parsedToken ) {\n\t\t\t\t\t\tthrow new Error( `Unexpected token '${token}' at ${matched.index} in '${expression}'` );\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tokenTypeLiteral = TOKEN_MAPPING_LITERAL[ token[ token.length - 1 ] ];\n\t\t\t\t\tif( tokenTypeLiteral != null ) {\n\t\t\t\t\t\ttokens.push([ tokenTypeLiteral, parsedToken * 0.01 ]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttokens.push([ NodeType.NUMBER, parsedToken ]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn tokens;\n\t}\n\n\tprotected evaluate( node: Node, parent: number, self: number, padding: number, current: number ): number {\n\t\tswitch( node[ 0 ] ) {\n\t\tcase NodeType.PARENSESIS:\n\t\t\treturn this.evaluate( node[ 1 ][ 0 ], parent, self, padding, current );\n\n\t\t// Unary operators\n\t\tcase NodeType.PLUS:\n\t\t\treturn + this.evaluate( node[ 1 ], parent, self, padding, current );\n\n\t\tcase NodeType.MINUS:\n\t\t\treturn - this.evaluate( node[ 1 ], parent, self, padding, current );\n\n\t\t// Four arithmetic operators\n\t\tcase NodeType.ADD:\n\t\t\treturn this.evaluate( node[ 1 ], parent, self, padding, current ) +\n\t\t\t\tthis.evaluate( node[ 2 ], parent, self, padding, current );\n\t\tcase NodeType.SUB:\n\t\t\treturn this.evaluate( node[ 1 ], parent, self, padding, current ) -\n\t\t\t\tthis.evaluate( node[ 2 ], parent, self, padding, current );\n\t\tcase NodeType.MUL:\n\t\t\treturn this.evaluate( node[ 1 ], parent, self, padding, current ) *\n\t\t\t\tthis.evaluate( node[ 2 ], parent, self, padding, current );\n\t\tcase NodeType.DIV:\n\t\t\treturn this.evaluate( node[ 1 ], parent, self, padding, current ) /\n\t\t\t\tthis.evaluate( node[ 2 ], parent, self, padding, current );\n\n\t\t// Literals\n\t\tcase NodeType.PARENT:\n\t\t\treturn node[ 1 ] * parent;\n\t\tcase NodeType.SELF:\n\t\t\treturn node[ 1 ] * self;\n\t\tcase NodeType.PADDING:\n\t\t\treturn node[ 1 ] * padding;\n\t\tcase NodeType.CURRENT:\n\t\t\treturn node[ 1 ] * current;\n\t\tcase NodeType.NUMBER:\n\t\t\treturn node[ 1 ];\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tcalculate( parent: number, self: number, padding: number, current: number ): number {\n\t\treturn this.evaluate( this._node, parent, self, padding, current );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DScalarFunctions } from \"./d-scalar-functions\";\nimport { DScalarSet } from \"./d-scalar-set\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nconst enum AutoFlag {\n\tNONE = 0,\n\tWIDTH = 1,\n\tHEIGHT = 2\n}\n\nexport class DCoordinateSet {\n\tprotected _base: DBase<any, any>;\n\tprotected _scalarSet: DScalarSet;\n\tprotected _autoFlags: AutoFlag;\n\n\tconstructor( base: DBase<any, any>, scalarSet: DScalarSet ) {\n\t\tthis._base = base;\n\t\tthis._scalarSet = scalarSet;\n\t\tthis._autoFlags = AutoFlag.NONE;\n\t}\n\n\tget x(): DCoordinate {\n\t\tconst scalarSet = this._scalarSet;\n\t\tif( scalarSet.x != null ) {\n\t\t\treturn scalarSet.x;\n\t\t} else {\n\t\t\treturn this._base.x;\n\t\t}\n\t}\n\n\tset x( x: DCoordinate ) {\n\t\tconst base = this._base;\n\t\tif( utilIsNumber( x ) ) {\n\t\t\tbase.x = x;\n\t\t} else {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tconst scalar = DScalarFunctions.position( x );\n\t\t\tif( scalarSet.x !== scalar ) {\n\t\t\t\tscalarSet.x = scalar;\n\t\t\t\tbase.layout();\n\t\t\t}\n\t\t}\n\t}\n\n\tget y(): DCoordinate {\n\t\tconst scalarSet = this._scalarSet;\n\t\tif( scalarSet.y != null ) {\n\t\t\treturn scalarSet.y;\n\t\t} else {\n\t\t\treturn this._base.y;\n\t\t}\n\t}\n\n\tset y( y: DCoordinate ) {\n\t\tconst base = this._base;\n\t\tif( utilIsNumber( y ) ) {\n\t\t\tbase.y = y;\n\t\t} else {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tconst scalar = DScalarFunctions.position( y );\n\t\t\tif( scalarSet.y !== scalar ) {\n\t\t\t\tscalarSet.y = scalar;\n\t\t\t\tbase.layout();\n\t\t\t}\n\t\t}\n\t}\n\n\ttoAutoWidth() {\n\t\tthis._autoFlags |= AutoFlag.WIDTH;\n\t}\n\n\tisWidthAuto(): boolean {\n\t\treturn ( this._autoFlags & AutoFlag.WIDTH ) !== 0;\n\t}\n\n\tget width(): DCoordinate {\n\t\tconst scalarSet = this._scalarSet;\n\t\tif( this.isWidthAuto() ) {\n\t\t\treturn \"auto\";\n\t\t} else if( scalarSet.width != null ) {\n\t\t\treturn scalarSet.width;\n\t\t} else {\n\t\t\treturn this._base.width;\n\t\t}\n\t}\n\n\tset width( width: DCoordinate ) {\n\t\tif( utilIsNumber( width ) ) {\n\t\t\tthis._base.width = width;\n\t\t} else if( width === \"auto\" ) {\n\t\t\tif( ! this.isWidthAuto() ) {\n\t\t\t\tthis.toAutoWidth();\n\t\t\t\tconst base = this._base;\n\t\t\t\tbase.toChildrenDirty();\n\t\t\t\tDApplications.update( this._base );\n\t\t\t}\n\t\t} else {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tconst scalar = DScalarFunctions.size( width );\n\t\t\tif( scalarSet.width !== scalar ) {\n\t\t\t\tscalarSet.width = scalar;\n\t\t\t\tthis._base.layout();\n\t\t\t}\n\t\t}\n\t}\n\n\ttoAutoHeight() {\n\t\tthis._autoFlags |= AutoFlag.HEIGHT;\n\t}\n\n\tisHeightAuto(): boolean {\n\t\treturn ( this._autoFlags & AutoFlag.HEIGHT ) !== 0;\n\t}\n\n\tget height(): DCoordinate {\n\t\tconst scalarSet = this._scalarSet;\n\t\tif( this.isHeightAuto() ) {\n\t\t\treturn \"auto\";\n\t\t} else if( scalarSet.height != null ) {\n\t\t\treturn scalarSet.height;\n\t\t} else {\n\t\t\treturn this._base.height;\n\t\t}\n\t}\n\n\tset height( height: DCoordinate ) {\n\t\tif( utilIsNumber( height ) ) {\n\t\t\tthis._base.height = height;\n\t\t} else if( height === \"auto\" ) {\n\t\t\tif( ! this.isHeightAuto() ) {\n\t\t\t\tthis.toAutoHeight();\n\t\t\t\tconst base = this._base;\n\t\t\t\tbase.toChildrenDirty();\n\t\t\t\tDApplications.update( this._base );\n\t\t\t}\n\t\t} else {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tconst scalar = DScalarFunctions.size( height );\n\t\t\tif( scalarSet.height !== scalar ) {\n\t\t\t\tscalarSet.height = scalar;\n\t\t\t\tthis._base.layout();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DScalarExpression } from \"./d-scalar-expression\";\nimport { DScalarFunction } from \"./d-scalar-function\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport class DScalarFunctions {\n\tstatic POSITION = {\n\t\tPADDING: ( p: number, s: number, d: number ) => d,\n\t\tCENTER: ( p: number, s: number ) => ( p - s ) * 0.5\n\t};\n\n\tstatic SIZE = {\n\t\tMAXIMIZED: ( p: number ) => p,\n\t\tPADDING: ( p: number, s: number, d: number ) => p - d\n\t};\n\n\tstatic position( coordinate: DCoordinate | undefined ): DScalarFunction | null {\n\t\treturn this.from( coordinate, true );\n\t}\n\n\tstatic size( coordinate: DCoordinate | undefined ): DScalarFunction | null {\n\t\treturn this.from( coordinate, false );\n\t}\n\n\tprotected static from( coordinate: DCoordinate | undefined, isPosition: boolean ): DScalarFunction | null {\n\t\tif( coordinate == null || utilIsNumber( coordinate ) ) {\n\t\t\treturn null;\n\t\t} else if( utilIsString( coordinate ) ) {\n\t\t\tif( isPosition ) {\n\t\t\t\tswitch( coordinate ) {\n\t\t\t\tcase \"center\":\n\t\t\t\t\treturn DScalarFunctions.POSITION.CENTER;\n\t\t\t\tcase \"padding\":\n\t\t\t\t\treturn DScalarFunctions.POSITION.PADDING;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch( coordinate ) {\n\t\t\t\tcase \"100%\":\n\t\t\t\tcase \"maximized\":\n\t\t\t\t\treturn DScalarFunctions.SIZE.MAXIMIZED;\n\t\t\t\tcase \"padding\":\n\t\t\t\t\treturn DScalarFunctions.SIZE.PADDING;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst scalarExpression = new DScalarExpression( coordinate );\n\t\t\treturn ( parent: number, self: number, padding: number, current: number ): number => {\n\t\t\t\treturn scalarExpression.calculate( parent, self, padding, current );\n\t\t\t};\n\t\t} else if( utilIsFunction( coordinate ) ) {\n\t\t\treturn coordinate;\n\t\t} else {\n\t\t\tconst scalar = coordinate;\n\t\t\treturn ( parent: number, self: number, padding: number, current: number ): number => {\n\t\t\t\treturn scalar.calculate( parent, self, padding, current );\n\t\t\t};\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DLayoutClearType {\n\tNONE = 0,\n\tBEFORE = 1,\n\tAFTER = 2,\n\tBOTH = BEFORE | AFTER\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DTheme } from \"./d-theme\";\n\nexport class DThemes {\n\tprivate static DEFAULT_THEME_CLASS: (new () => DTheme) | null = null;\n\tprivate static INSTANCE: DTheme | null = null;\n\n\tpublic static setDefaultThemeClass( theme: new () => DTheme ): void {\n\t\tthis.DEFAULT_THEME_CLASS = theme;\n\t}\n\n\tpublic static getDefaultThemeClass(): (new () => DTheme) | null {\n\t\treturn this.DEFAULT_THEME_CLASS;\n\t}\n\n\tpublic static getInstance(): DTheme {\n\t\tif( this.INSTANCE == null ) {\n\t\t\tconst defaultThemeClass = this.getDefaultThemeClass();\n\t\t\tif( defaultThemeClass == null ) {\n\t\t\t\tthrow new Error( \"No default theme class found\" );\n\t\t\t}\n\t\t\tthis.INSTANCE = new defaultThemeClass();\n\t\t}\n\t\treturn this.INSTANCE;\n\t}\n\n\tpublic static setInstance( instance: DTheme ): DTheme | null {\n\t\tconst result = this.INSTANCE;\n\t\tthis.INSTANCE = instance;\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DAlignHorizontal {\n\tLEFT,\n\tCENTER,\n\tRIGHT\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DAlignVertical {\n\tTOP,\n\tMIDDLE,\n\tBOTTOM\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DAlignWith {\n\tTEXT,\n\tPADDING,\n\tBORDER\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"../d-base\";\nimport { utilIsString } from \"./util-is-string\";\n\nexport interface UtilKeyboardEventShortcut {\n\talt: boolean;\n\tctrl: boolean;\n\tshift: boolean;\n\tkey: string;\n\twhich: number;\n\tevent?: string;\n}\n\nconst setShortcutKeyAndWhich = ( shortcut: UtilKeyboardEventShortcut ): UtilKeyboardEventShortcut => {\n\tconst key = shortcut.key;\n\tif( key.length <= 1 ) {\n\t\tif( shortcut.shift ) {\n\t\t\tshortcut.key = key.toUpperCase();\n\t\t}\n\t\tconst code = key.charCodeAt( 0 );\n\t\tif( 97 <= code && code <= 122 ) {\n\t\t\t// a ... z\n\t\t\tshortcut.which = code - 32;\n\t\t} else {\n\t\t\tshortcut.which = code;\n\t\t}\n\t} else {\n\t\tswitch( key ) {\n\t\tcase \"Enter\":\n\t\t\tshortcut.which = 13;\n\t\t\tbreak;\n\t\tcase \"Space\":\n\t\t\tshortcut.key = \" \";\n\t\t\tshortcut.which = 32;\n\t\t\tbreak;\n\t\tcase \"Escape\":\n\t\t\tshortcut.which = 27;\n\t\t\tbreak;\n\t\tcase \"F1\":\n\t\t\tshortcut.which = 112;\n\t\t\tbreak;\n\t\tcase \"F2\":\n\t\t\tshortcut.which = 113;\n\t\t\tbreak;\n\t\tcase \"F3\":\n\t\t\tshortcut.which = 114;\n\t\t\tbreak;\n\t\tcase \"F4\":\n\t\t\tshortcut.which = 115;\n\t\t\tbreak;\n\t\tcase \"F5\":\n\t\t\tshortcut.which = 116;\n\t\t\tbreak;\n\t\tcase \"F6\":\n\t\t\tshortcut.which = 117;\n\t\t\tbreak;\n\t\tcase \"F7\":\n\t\t\tshortcut.which = 118;\n\t\t\tbreak;\n\t\tcase \"F8\":\n\t\t\tshortcut.which = 119;\n\t\t\tbreak;\n\t\tcase \"F9\":\n\t\t\tshortcut.which = 120;\n\t\t\tbreak;\n\t\tcase \"F10\":\n\t\t\tshortcut.which = 121;\n\t\t\tbreak;\n\t\tcase \"F11\":\n\t\t\tshortcut.which = 122;\n\t\t\tbreak;\n\t\tcase \"F12\":\n\t\t\tshortcut.which = 123;\n\t\t\tbreak;\n\t\tcase \"CapsLock\":\n\t\t\tif( shortcut.shift ) {\n\t\t\t\tshortcut.which = 20;\n\t\t\t} else {\n\t\t\t\tshortcut.which = 240;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"ArrowUp\":\n\t\t\tshortcut.which = 38;\n\t\t\tbreak;\n\t\tcase \"ArrowDown\":\n\t\t\tshortcut.which = 40;\n\t\t\tbreak;\n\t\tcase \"ArrowLeft\":\n\t\t\tshortcut.which = 37;\n\t\t\tbreak;\n\t\tcase \"ArrowRight\":\n\t\t\tshortcut.which = 39;\n\t\t\tbreak;\n\t\tcase \"Insert\":\n\t\t\tshortcut.which = 45;\n\t\t\tbreak;\n\t\tcase \"Delete\":\n\t\t\tshortcut.which = 46;\n\t\t\tbreak;\n\t\tcase \"PageUp\":\n\t\t\tshortcut.which = 33;\n\t\t\tbreak;\n\t\tcase \"PageDown\":\n\t\t\tshortcut.which = 34;\n\t\t\tbreak;\n\t\tcase \"Backspace\":\n\t\t\tshortcut.which = 8;\n\t\t\tbreak;\n\t\tcase \";\":\n\t\t\tshortcut.which = 187;\n\t\t\tbreak;\n\t\tcase \"Pause\":\n\t\t\tshortcut.which = 19;\n\t\t\tbreak;\n\t\tcase \"ScrollLock\":\n\t\t\tshortcut.which = 145;\n\t\t\tbreak;\n\t\tcase \"Tab\":\n\t\t\tshortcut.which = 9;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn shortcut;\n};\n\nexport class UtilKeyboardEvent {\n\tstatic isActivateKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Space\" || e.key === \"Enter\" || e.which === 32 || e.which === 13 );\n\t}\n\n\tstatic isArrowUpKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"ArrowUp\" || e.which === 38 );\n\t}\n\n\tstatic isArrowDownKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"ArrowDown\" || e.which === 40 );\n\t}\n\n\tstatic isArrowLeftKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"ArrowLeft\" || e.which === 37 );\n\t}\n\n\tstatic isArrowRightKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"ArrowRight\" || e.which === 39 );\n\t}\n\n\tstatic isCancelKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Esc\" || e.which === 27 );\n\t}\n\n\tstatic isFocusKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Tab\" || e.which === 9 );\n\t}\n\n\tstatic isUndoKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && ( e.key === \"z\" || e.which === 90 ) );\n\t}\n\n\tstatic isRedoKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && ( e.key === \"y\" || e.which === 89 ) );\n\t}\n\n\tstatic isSaveKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && ! e.shiftKey && ( e.key === \"s\" || e.which === 83 ) );\n\t}\n\n\tstatic isSaveAsKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && e.shiftKey && ( e.key === \"S\" || e.which === 83 ) );\n\t}\n\n\tstatic isDeleteKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Delete\" || e.which === 46 );\n\t}\n\n\tstatic isSelectAllKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.ctrlKey && ! e.shiftKey && ( e.key === \"a\" || e.which === 65 ) );\n\t}\n\n\tstatic isOkKey( e: KeyboardEvent ): boolean {\n\t\treturn ( e.key === \"Enter\" || e.which === 13 );\n\t}\n\n\tstatic getFocusDirection( e: KeyboardEvent ): boolean {\n\t\treturn ( e.shiftKey !== true );\n\t}\n\n\tstatic toShortcut( expressionOrShortcut: string | UtilKeyboardEventShortcut ): UtilKeyboardEventShortcut {\n\t\tif( ! utilIsString( expressionOrShortcut ) ) {\n\t\t\treturn expressionOrShortcut;\n\t\t} else {\n\t\t\tconst expression = expressionOrShortcut;\n\t\t\tconst arrowIndex = expression.indexOf(\"->\");\n\t\t\tlet keyExpression: string;\n\t\t\tlet event: string | undefined;\n\t\t\tif( 0 <= arrowIndex ) {\n\t\t\t\tkeyExpression = expression.substring( 0, arrowIndex ).trim();\n\t\t\t\tevent = expression.substring( arrowIndex + 2 ).trim();\n\t\t\t} else {\n\t\t\t\tkeyExpression = expression.trim();\n\t\t\t}\n\t\t\tconst keys = keyExpression.toLowerCase().split( \"+\" );\n\t\t\tconst alt: boolean = 0 <= keys.indexOf( \"alt\" );\n\t\t\tconst ctrl: boolean = 0 <= keys.indexOf( \"ctrl\" );\n\t\t\tconst shift: boolean = 0 <= keys.indexOf( \"shift\" );\n\t\t\tconst key: string = keys[ keys.length - 1 ];\n\t\t\treturn setShortcutKeyAndWhich({\n\t\t\t\talt,\n\t\t\t\tctrl,\n\t\t\t\tshift,\n\t\t\t\tkey,\n\t\t\t\twhich: 0,\n\t\t\t\tevent\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic toString( shortcut: UtilKeyboardEventShortcut ): string {\n\t\tconst parts = [];\n\t\tif( shortcut.ctrl ) {\n\t\t\tparts.push( \"Ctrl\" );\n\t\t}\n\t\tif( shortcut.shift ) {\n\t\t\tparts.push( \"Shift\" );\n\t\t}\n\t\tif( shortcut.alt ) {\n\t\t\tparts.push( \"Alt\" );\n\t\t}\n\t\tparts.push( shortcut.key.toUpperCase() );\n\t\treturn parts.join( \"+\" );\n\t}\n\n\tstatic on(\n\t\ttarget: DBase<any, any>,\n\t\texpressionOrShortcut: string | UtilKeyboardEventShortcut,\n\t\thandler?: ( e: KeyboardEvent ) => void\n\t): void {\n\t\tconst shortcut = this.toShortcut( expressionOrShortcut );\n\t\tdocument.body.addEventListener( \"keydown\", ( e: KeyboardEvent ): void => {\n\t\t\tif(\n\t\t\t\te.altKey === shortcut.alt && e.ctrlKey === shortcut.ctrl &&\n\t\t\t\te.shiftKey === shortcut.shift &&\n\t\t\t\t( e.key === shortcut.key || e.which === shortcut.which )\n\t\t\t) {\n\t\t\t\tif( target.isActionable() ) {\n\t\t\t\t\tif( shortcut.event != null ) {\n\t\t\t\t\t\ttarget.emit( shortcut.event );\n\t\t\t\t\t} else if( handler != null ) {\n\t\t\t\t\t\thandler( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, interaction, IPoint } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DApplicationTarget } from \"../d-application-like\";\nimport { DApplications } from \"../d-applications\";\n\nexport type UtilPointerEventClickHandler = ( e: InteractionEvent ) => void;\n\nexport interface UtilPointerEventClickTarget extends DApplicationTarget {\n\ton( name: string, handler: UtilPointerEventClickHandler ): void;\n}\n\nexport class UtilPointerEvent {\n\tstatic CLICK_DISTANCE_THRESHOLD: number = 10;\n\tstatic DBLCLICK_INTERVAL_THRESHOLD: number = 333;\n\tstatic LONG_CLICK_THRESHOLD: number = 750;\n\n\tstatic get touchable(): boolean {\n\t\treturn ( \"ontouchstart\" in document );\n\t}\n\n\tstatic get tap(): string {\n\t\treturn \"pointertap\";\n\t}\n\n\tstatic get down(): string {\n\t\treturn \"pointerdown\";\n\t}\n\n\tstatic get enter(): string {\n\t\treturn \"pointerenter\";\n\t}\n\n\tstatic get leave(): string {\n\t\treturn \"pointerleave\";\n\t}\n\n\tstatic get move(): string {\n\t\treturn \"pointermove\";\n\t}\n\n\tstatic get out(): string {\n\t\treturn \"pointerout\";\n\t}\n\n\tstatic get over(): string {\n\t\treturn \"pointerover\";\n\t}\n\n\tstatic get up(): string {\n\t\treturn \"pointerup\";\n\t}\n\n\tstatic get cancel(): string {\n\t\treturn \"pointercancel\";\n\t}\n\n\tstatic toGlobal(\n\t\te: MouseEvent | TouchEvent,\n\t\tinteractionManager: interaction.InteractionManager,\n\t\tresult: IPoint\n\t): IPoint {\n\t\tif( \"touches\" in e ) {\n\t\t\tconst touches = e.changedTouches;\n\t\t\tconst touch = touches[ touches.length - 1 ];\n\t\t\tif( touch != null ) {\n\t\t\t\tinteractionManager.mapPositionToPoint( result, touch.clientX, touch.clientY );\n\t\t\t} else {\n\t\t\t\tinteractionManager.mapPositionToPoint( result, 0, 0 );\n\t\t\t}\n\t\t} else {\n\t\t\tinteractionManager.mapPositionToPoint( result, e.clientX, e.clientY );\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic onClick( target: UtilPointerEventClickTarget, handler: UtilPointerEventClickHandler ): void {\n\t\tif( ! this.touchable ) {\n\t\t\ttarget.on( \"click\", handler );\n\t\t} else {\n\t\t\tlet isDowned = false;\n\t\t\tlet downX = 0;\n\t\t\tlet downY = 0;\n\t\t\tlet interactionManagerBound: interaction.InteractionManager | null = null;\n\t\t\tconst cleanup = (): void => {\n\t\t\t\tisDowned = false;\n\t\t\t\tif( interactionManagerBound ) {\n\t\t\t\t\tinteractionManagerBound.off( up, onUp );\n\t\t\t\t\tinteractionManagerBound = null;\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst isValidDistance = ( e: InteractionEvent ): boolean => {\n\t\t\t\tconst global = e.data.global;\n\t\t\t\tconst dx = Math.abs( downX - global.x );\n\t\t\t\tconst dy = Math.abs( downY - global.y );\n\t\t\t\tconst threshold = this.CLICK_DISTANCE_THRESHOLD;\n\t\t\t\treturn ( dx <= threshold && dy <= threshold );\n\t\t\t};\n\t\t\ttarget.on( \"click\", ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t}\n\t\t\t\thandler( e );\n\t\t\t});\n\t\t\tconst up = this.up;\n\t\t\tconst onUp = ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t\tif( this.contains( target, e.target ) ) {\n\t\t\t\t\t\tif( isValidDistance( e ) ) {\n\t\t\t\t\t\t\thandler( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\ttarget.on( this.down, ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tconst global = e.data.global;\n\t\t\t\t\tdownX = global.x;\n\t\t\t\t\tdownY = global.y;\n\t\t\t\t} else {\n\t\t\t\t\tisDowned = true;\n\t\t\t\t\tconst global = e.data.global;\n\t\t\t\t\tdownX = global.x;\n\t\t\t\t\tdownY = global.y;\n\t\t\t\t\tif( interactionManagerBound ) {\n\t\t\t\t\t\tinteractionManagerBound.off( up, onUp );\n\t\t\t\t\t\tinteractionManagerBound = null;\n\t\t\t\t\t}\n\t\t\t\t\tconst layer = DApplications.getLayer( target );\n\t\t\t\t\tif( layer ) {\n\t\t\t\t\t\tinteractionManagerBound = layer.renderer.plugins.interaction;\n\t\t\t\t\t\tinteractionManagerBound.once( up, onUp );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic onLongClick(\n\t\ttarget: UtilPointerEventClickTarget,\n\t\tonClick: UtilPointerEventClickHandler,\n\t\tonLongClick: UtilPointerEventClickHandler\n\t): void {\n\t\tif( ! this.touchable ) {\n\t\t\ttarget.on( \"click\", onClick );\n\t\t} else {\n\t\t\tlet isDowned = false;\n\t\t\tlet downX = 0;\n\t\t\tlet downY = 0;\n\t\t\tlet timeoutId: number | null = null;\n\t\t\tlet interactionManagerBound: interaction.InteractionManager | null = null;\n\t\t\tconst cleanupTimeout = (): void => {\n\t\t\t\tif( timeoutId != null ) {\n\t\t\t\t\tclearTimeout( timeoutId );\n\t\t\t\t\ttimeoutId = null;\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst cleanup = (): void => {\n\t\t\t\tisDowned = false;\n\t\t\t\tif( interactionManagerBound ) {\n\t\t\t\t\tinteractionManagerBound.off( up, onUp );\n\t\t\t\t\tinteractionManagerBound.off( move, onMove );\n\t\t\t\t\tinteractionManagerBound = null;\n\t\t\t\t}\n\t\t\t\tcleanupTimeout();\n\t\t\t};\n\t\t\tconst isValidDistance = ( e: InteractionEvent ): boolean => {\n\t\t\t\tconst global = e.data.global;\n\t\t\t\tconst dx = Math.abs( downX - global.x );\n\t\t\t\tconst dy = Math.abs( downY - global.y );\n\t\t\t\tconst threshold = this.CLICK_DISTANCE_THRESHOLD;\n\t\t\t\treturn ( dx < threshold && dy < threshold );\n\t\t\t};\n\t\t\ttarget.on( \"click\", ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t}\n\t\t\t\tonClick( e );\n\t\t\t});\n\t\t\tconst up = this.up;\n\t\t\tconst move = this.move;\n\t\t\tconst onUp = ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t\tif( this.contains( target, e.target ) ) {\n\t\t\t\t\t\tif( isValidDistance( e ) ) {\n\t\t\t\t\t\t\tonClick( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onMove = ( e: InteractionEvent ): void => {\n\t\t\t\tif( isDowned ) {\n\t\t\t\t\tif( this.contains( target, e.target ) ) {\n\t\t\t\t\t\tif( ! isValidDistance( e ) ) {\n\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\ttarget.on( this.down, ( e: InteractionEvent ): void => {\n\t\t\t\tif( ! isDowned ) {\n\t\t\t\t\tisDowned = true;\n\t\t\t\t\tconst global = e.data.global;\n\t\t\t\t\tdownX = global.x;\n\t\t\t\t\tdownY = global.y;\n\t\t\t\t\tcleanupTimeout();\n\t\t\t\t\tconst oe = e.data.originalEvent;\n\t\t\t\t\tif( \"touches\" in oe ) {\n\t\t\t\t\t\ttimeoutId = window.setTimeout((): void => {\n\t\t\t\t\t\t\tif( isDowned ) {\n\t\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t\t\tonLongClick( e );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this.LONG_CLICK_THRESHOLD );\n\t\t\t\t\t}\n\t\t\t\t\tif( interactionManagerBound ) {\n\t\t\t\t\t\tinteractionManagerBound.off( up, onUp );\n\t\t\t\t\t\tinteractionManagerBound.off( move, onMove );\n\t\t\t\t\t\tinteractionManagerBound = null;\n\t\t\t\t\t}\n\t\t\t\t\tconst layer = DApplications.getLayer( target );\n\t\t\t\t\tif( layer ) {\n\t\t\t\t\t\tinteractionManagerBound = layer.renderer.plugins.interaction;\n\t\t\t\t\t\tinteractionManagerBound.once( up, onUp );\n\t\t\t\t\t\tinteractionManagerBound.on( move, onMove );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic onDblClick( target: HTMLElement, handler: ( e: MouseEvent | TouchEvent ) => void ): void {\n\t\tif( ! this.touchable ) {\n\t\t\ttarget.addEventListener( \"dblclick\", handler );\n\t\t} else {\n\t\t\tlet isDowned = 0;\n\t\t\tlet downX = 0;\n\t\t\tlet downY = 0;\n\t\t\tlet clickTime = 0;\n\n\t\t\ttarget.addEventListener( \"dblclick\", handler );\n\n\t\t\ttarget.addEventListener( \"touchend\", ( e: TouchEvent ): void => {\n\t\t\t\tif( isDowned === 1 || isDowned === 3 ) {\n\t\t\t\t\tconst touches = e.changedTouches;\n\t\t\t\t\tconst touch: Touch | null = touches[ touches.length - 1 ];\n\t\t\t\t\tif( touch != null ) {\n\t\t\t\t\t\tconst dx = downX - touch.clientX;\n\t\t\t\t\t\tconst dy = downY - touch.clientY;\n\t\t\t\t\t\tif( Math.abs( dx ) + Math.abs( dy ) < this.CLICK_DISTANCE_THRESHOLD ) {\n\t\t\t\t\t\t\tisDowned += 1;\n\t\t\t\t\t\t\tif( isDowned === 4 ) {\n\t\t\t\t\t\t\t\tisDowned = 0;\n\t\t\t\t\t\t\t\tconst elapsedTime = e.timeStamp - clickTime;\n\t\t\t\t\t\t\t\tif( elapsedTime < this.DBLCLICK_INTERVAL_THRESHOLD ) {\n\t\t\t\t\t\t\t\t\thandler( e );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tclickTime = e.timeStamp;\n\t\t\t\t\t\t\t\t\tisDowned = 2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tclickTime = e.timeStamp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tisDowned = 0;\n\t\t\t});\n\n\t\t\ttarget.addEventListener( \"touchstart\", ( e: TouchEvent ): void => {\n\t\t\t\tif( isDowned === 0 ) {\n\t\t\t\t\tconst touch: Touch | null = e.touches.item( e.touches.length - 1 );\n\t\t\t\t\tif( touch != null ) {\n\t\t\t\t\t\tisDowned = 1;\n\t\t\t\t\t\tdownX = touch.clientX;\n\t\t\t\t\t\tdownY = touch.clientY;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if( isDowned === 2 ) {\n\t\t\t\t\tconst touch: Touch | null = e.touches.item( e.touches.length - 1 );\n\t\t\t\t\tif( touch != null ) {\n\t\t\t\t\t\tisDowned = 3;\n\t\t\t\t\t\tdownX = touch.clientX;\n\t\t\t\t\t\tdownY = touch.clientY;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tisDowned = 0;\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic contains( target: unknown, targetOrChild: DisplayObject | null ): boolean {\n\t\tlet current = targetOrChild;\n\t\twhile( current != null && current !== target ) {\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn current === target;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject, interaction, Point, Renderer, Texture, Transform } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DApplications } from \"./d-applications\";\nimport { DBackgroundStateAware } from \"./d-background\";\nimport { DBaseBackground } from \"./d-base-background\";\nimport { DBaseBorder } from \"./d-base-border\";\nimport { DBaseCorner } from \"./d-base-corner\";\nimport { DBaseInteractive } from \"./d-base-interactive\";\nimport { DBaseOutline } from \"./d-base-outline\";\nimport { DBasePadding } from \"./d-base-padding\";\nimport { DBasePoint } from \"./d-base-point\";\nimport { DBaseReflowable } from \"./d-base-reflowable\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DBorderMask, DBorderStateAware } from \"./d-border\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DCoordinateSet } from \"./d-coordinates\";\nimport { DCorner, DCornerMask } from \"./d-corner\";\nimport { DThemeFont } from \"./d-font\";\nimport { DLayoutClearType } from \"./d-layout-clear-type\";\nimport { DOutline } from \"./d-outline\";\nimport { DPadding } from \"./d-padding\";\nimport { DScalarFunctions } from \"./d-scalar-functions\";\nimport { DScalarSet } from \"./d-scalar-set\";\nimport { DShadow } from \"./d-shadow\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { DThemes } from \"./theme/d-themes\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilKeyboardEvent, UtilKeyboardEventShortcut } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\nimport { UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\nexport interface DBaseOptions<THEME extends DThemeBase = DThemeBase> {\n\t/**\n\t * A parent.\n\t *\n\t * In the case of UI classes which pop up (e.g., DDialog and DMenu),\n\t * if multiple application instances are there, better to set\n\t * this to an `application.stage` so that they pick a right application.\n\t * By default, they assume the last created application is\n\t * the one they belong to at the time when they are created.\n\t */\n\tparent?: Container;\n\tchildren?: Array<DisplayObject | null>;\n\tname?: string;\n\tx?: DCoordinate;\n\ty?: DCoordinate;\n\twidth?: DCoordinate;\n\theight?: DCoordinate;\n\tvisible?: boolean;\n\tstate?: (keyof typeof DBaseState) | Array<keyof typeof DBaseState> | DBaseState;\n\tinteractive?: (keyof typeof DBaseInteractive) | DBaseInteractive;\n\tpadding?: number | {\n\t\ttop?: number,\n\t\tright?: number,\n\t\tbottom?: number,\n\t\tleft?: number\n\t};\n\tcorner?: number | {\n\t\tradius?: number,\n\t\tmask?: (keyof typeof DCornerMask) | DCornerMask\n\t};\n\ttheme?: THEME | string;\n\ton?: {\n\t\t[name: string]: Function;\n\t};\n\tweight?: number;\n\ttitle?: string;\n\tshortcut?: string | UtilKeyboardEventShortcut;\n\tshortcuts?: Array<string | UtilKeyboardEventShortcut>;\n\tbackground?: {\n\t\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\t\talpha?: DStateAwareOrValueMightBe<number>;\n\t};\n\tborder?: {\n\t\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\t\talpha?: DStateAwareOrValueMightBe<number>;\n\t\twidth?: DStateAwareOrValueMightBe<number>;\n\t\talign?: DStateAwareOrValueMightBe<number>;\n\t\tmask?: DStateAwareOrValueMightBe<DBorderMask> | (keyof typeof DBorderMask);\n\t};\n\toutline?: {\n\t\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\t\talpha?: DStateAwareOrValueMightBe<number>;\n\t\twidth?: DStateAwareOrValueMightBe<number>;\n\t\toffset?: DStateAwareOrValueMightBe<number>;\n\t\talign?: DStateAwareOrValueMightBe<number>;\n\t\tmask?: DStateAwareOrValueMightBe<DBorderMask> | (keyof typeof DBorderMask);\n\t};\n\tshadow?: DShadow;\n\tclear?: (keyof typeof DLayoutClearType) | DLayoutClearType;\n\tcursor?: string;\n}\n\n/**\n * DBase theme\n */\nexport interface DThemeBase extends DThemeFont {\n\t/**\n\t * Returns a X coordinate.\n\t */\n\tgetX(): DCoordinate;\n\n\t/**\n\t * Returns a Y coordinate.\n\t */\n\tgetY(): DCoordinate;\n\n\t/**\n\t * Returns a height.\n\t */\n\tgetHeight(): DCoordinate;\n\n\t/**\n\t * Returns a width.\n\t */\n\tgetWidth(): DCoordinate;\n\n\t/**\n\t * Returns a background color.\n\t * If the color is null, backgrounds are not be rendered.\n\t *\n\t * @param state a state\n\t */\n\tgetBackgroundColor( state: DBaseState ): number | null;\n\n\t/**\n\t * Returns a background alpha.\n\t *\n\t * @param state a state\n\t */\n\tgetBackgroundAlpha( state: DBaseState ): number;\n\n\t/**\n\t * Returns a background texture of the given radius.\n\t *\n\t * @param radius a corner radius\n\t */\n\tgetBackgroundTexture( radius: number ): Texture;\n\n\t/**\n\t * Returns a border color.\n\t * If the color is null, borders are not be rendered.\n\t *\n\t * @param state a state\n\t */\n\tgetBorderColor( state: DBaseState ): number | null;\n\n\t/**\n\t * Returns a border alpha.\n\t *\n\t * @param state a state\n\t */\n\tgetBorderAlpha( state: DBaseState ): number;\n\n\t/**\n\t * Returns a border width.\n\t *\n\t * @param state a state\n\t */\n\tgetBorderWidth( state: DBaseState ): number;\n\n\t/**\n\t * Returns a border align.\n\t *\n\t * @param state a state\n\t */\n\tgetBorderAlign( state: DBaseState ): number;\n\n\t/**\n\t * Returns a border mask.\n\t *\n\t * @param state a mask\n\t */\n\tgetBorderMask( state: DBaseState ): DBorderMask;\n\n\t/**\n\t * Returns a border texture of the given radius and width.\n\t *\n\t * @param radius a corner radius\n\t * @param width a border width\n\t */\n\tgetBorderTexture( radius: number, width: number ): Texture;\n\n\t/**\n\t * Returns a left padding.\n\t */\n\tgetPaddingLeft(): number;\n\n\t/**\n\t * Returns a right padding.\n\t */\n\tgetPaddingRight(): number;\n\n\t/**\n\t * Returns a top padding.\n\t */\n\tgetPaddingTop(): number;\n\n\t/**\n\t * Returns a bottom padding.\n\t */\n\tgetPaddingBottom(): number;\n\n\t/**\n\t * Returns a corner radius.\n\t */\n\tgetCornerRadius(): number;\n\n\t/**\n\t * Returns a corner mask.\n\t */\n\tgetCornerMask(): DCornerMask;\n\n\t/**\n\t * Returns an outline color.\n\t * If the color is null, outlines are not be rendered.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineColor( state: DBaseState ): number | null;\n\n\t/**\n\t * Returns an outline alpha.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineAlpha( state: DBaseState ): number;\n\n\t/**\n\t * Returns an outline width.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineWidth( state: DBaseState ): number;\n\n\t/**\n\t * Returns an outline offset.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineOffset( state: DBaseState ): number;\n\n\t/**\n\t * Returns an outline align.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineAlign( state: DBaseState ): number;\n\n\t/**\n\t * Returns an outline mask.\n\t *\n\t * @param state a state\n\t */\n\tgetOutlineMask( state: DBaseState ): DBorderMask;\n\n\t/**\n\t * Returns a shadow.\n\t * If a shadow is null, no shadow is rendered.\n\t */\n\tgetShadow(): DShadow | null;\n\n\t/**\n\t * Returns an interactivity.\n\t */\n\tgetInteractive(): DBaseInteractive;\n\n\t/**\n\t * Returns a tooltip text.\n\t */\n\tgetTitle(): string;\n\n\t/**\n\t * Returns a clear type.\n\t * A clear type is for layout classes including {@link ui.DLayoutVertical}.\n\t */\n\tgetClearType(): DLayoutClearType;\n\n\t/**\n\t * Returns a weight.\n\t * Weights are for layout classes including {@link ui.DLayoutVertical}.\n\t * If a weight is less than or equals to zero, layout classes are supposed not to change a width / height.\n\t */\n\tgetWeight(): number;\n\n\t/**\n\t * Creates a new shadow.\n\t */\n\tnewShadow(): DShadow | null;\n\n\t/**\n\t * Creates a new weak shadow.\n\t */\n\tnewShadowWeak(): DShadow | null;\n\n\t/**\n\t * Returns a cursor.\n\t */\n\tgetCursor(): string | null;\n}\n\nconst toTheme = <THEME extends DThemeBase>( options?: DBaseOptions<THEME> ): THEME | null => {\n\tif( options != null && options.theme != null ) {\n\t\tconst theme = options.theme;\n\t\tif( utilIsString( theme ) ) {\n\t\t\treturn DThemes.getInstance().get( theme );\n\t\t} else {\n\t\t\treturn theme;\n\t\t}\n\t}\n\treturn null;\n};\n\nexport interface DRefitable {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nconst toShortcuts = <THEME extends DThemeBase>(\n\toptions?: DBaseOptions<THEME>\n): UtilKeyboardEventShortcut[] | undefined => {\n\tif( options != null && ( options.shortcuts != null || options.shortcut != null ) ) {\n\t\tconst result: UtilKeyboardEventShortcut[] = [];\n\t\tif( options.shortcut != null ) {\n\t\t\tresult.push( UtilKeyboardEvent.toShortcut( options.shortcut ) );\n\t\t}\n\n\t\tif( options.shortcuts != null ) {\n\t\t\tconst shortcuts = options.shortcuts;\n\t\t\tfor( let i = 0, imax = shortcuts.length; i < imax; ++i ) {\n\t\t\t\tUtilKeyboardEvent.toShortcut( shortcuts[ i ] );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\treturn undefined;\n};\n\nexport interface DRenderable {\n\trender( renderer: Renderer ): void;\n\tupdateTransform(): void;\n}\n\nexport interface DReflowable {\n\tonReflow( base: DBase, width: number, height: number ): void;\n}\n\nexport class DBase<\n\tTHEME extends DThemeBase = DThemeBase,\n\tOPTIONS extends DBaseOptions<THEME> = DBaseOptions<THEME>\n> extends Container {\n\tprotected static WORK_CONTAINS_POINT: Point = new Point();\n\n\tprivate _name: string;\n\tprivate _state: DBaseState;\n\tprivate _stateLocal: DBaseState;\n\tprivate _theme: THEME;\n\tprotected _options: OPTIONS | undefined;\n\tprivate _width: number;\n\tprivate _height: number;\n\tprotected _padding: DPadding;\n\tprotected _corner: DCorner;\n\tprivate _scalarSet: DScalarSet;\n\tprotected _coordinateSet: DCoordinateSet;\n\tprivate _isDirty: boolean;\n\tprivate _hasDirty: boolean;\n\tprotected _isChildrenDirty: boolean;\n\tprivate _shadow: DShadow | null;\n\tprivate _onShadowUpdateBound: () => void;\n\tprivate _transform: Transform;\n\tprivate _weight: number;\n\tprivate _position: DBasePoint;\n\tprivate _scale: DBasePoint;\n\tprivate _skew: DBasePoint;\n\tprotected _title: string;\n\tprotected _background: DBackgroundStateAware;\n\tprotected _border: DBorderStateAware;\n\tprotected _outline: DOutline;\n\tprotected _clearType: DLayoutClearType;\n\tprotected _shortcuts?: UtilKeyboardEventShortcut[];\n\tprotected _befores: DRenderable[];\n\tprotected _afters: DRenderable[];\n\tprotected _reflowables: DReflowable[];\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper();\n\n\t\t// Transform\n\t\tconst transform: Transform = this._transform = this.transform;\n\t\tthis._position = new DBasePoint( transform.position, (): void => {\n\t\t\tthis.onMove();\n\t\t});\n\t\tthis._scale = new DBasePoint( transform.scale, (): void => {\n\t\t\tthis.onScale();\n\t\t});\n\t\tthis._skew = new DBasePoint( transform.skew, (): void => {\n\t\t\tthis.onSkew();\n\t\t});\n\n\t\t//\n\t\tthis._options = options;\n\t\tconst scalarSet: DScalarSet = this._scalarSet = {};\n\t\tthis._coordinateSet = new DCoordinateSet( this, scalarSet );\n\t\tthis._isDirty = true;\n\t\tthis._hasDirty = false;\n\t\tthis._isChildrenDirty = false;\n\t\tthis._shadow = null;\n\t\tthis._name = ( options && options.name ) || \"\";\n\t\tconst theme = this._theme = toTheme( options ) || this.getThemeDefault();\n\t\tthis._befores = [];\n\t\tthis._afters = [];\n\t\tthis._reflowables = [];\n\t\tthis._clearType = ( options && options.clear != null ?\n\t\t\t( utilIsString( options.clear ) ? DLayoutClearType[ options.clear ] : options.clear ) :\n\t\t\ttheme.getClearType()\n\t\t);\n\t\tthis._padding = new DBasePadding( theme, options, (): void => {\n\t\t\tthis.layout();\n\t\t\tthis.toChildrenDirty();\n\t\t\tDApplications.update( this );\n\t\t});\n\t\tconst toDirtyAndUpdate = (): void => {\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update( this );\n\t\t};\n\t\tthis._background = new DBaseBackground( theme, options, toDirtyAndUpdate );\n\t\tthis._border = new DBaseBorder( theme, options, toDirtyAndUpdate );\n\t\tthis._outline = new DBaseOutline( theme, options, toDirtyAndUpdate );\n\t\tthis._corner = new DBaseCorner( theme, options, toDirtyAndUpdate );\n\t\tthis.initReflowable();\n\n\t\t// X\n\t\tconst position = transform.position;\n\t\tconst x = ( options && options.x != null ? options.x : theme.getX() );\n\t\tif( utilIsNumber( x ) ) {\n\t\t\tposition.x = x;\n\t\t} else {\n\t\t\tposition.x = 0;\n\t\t\tscalarSet.x = DScalarFunctions.position( x );\n\t\t}\n\n\t\t// Y\n\t\tconst y = ( options && options.y != null ? options.y : theme.getY() );\n\t\tif( utilIsNumber( y ) ) {\n\t\t\tposition.y = y;\n\t\t} else {\n\t\t\tposition.y = 0;\n\t\t\tscalarSet.y = DScalarFunctions.position( y );\n\t\t}\n\n\t\t// Width\n\t\tconst width = ( options && options.width != null ? options.width : theme.getWidth() );\n\t\tif( utilIsNumber( width ) ) {\n\t\t\tthis._width = width;\n\t\t} else if( width === \"auto\" ) {\n\t\t\tthis._width = 100;\n\t\t\tthis._coordinateSet.toAutoWidth();\n\t\t} else {\n\t\t\tthis._width = 100;\n\t\t\tscalarSet.width = DScalarFunctions.size( width );\n\t\t}\n\n\t\t// Height\n\t\tconst height = ( options && options.height != null ? options.height : theme.getHeight() );\n\t\tif( utilIsNumber( height ) ) {\n\t\t\tthis._height = height;\n\t\t} else if( height === \"auto\" ) {\n\t\t\tthis._height = 100;\n\t\t\tthis._coordinateSet.toAutoHeight();\n\t\t} else {\n\t\t\tthis._height = 100;\n\t\t\tscalarSet.height = DScalarFunctions.size( height );\n\t\t}\n\n\t\t// Visibility\n\t\tif( options && options.visible != null ) {\n\t\t\tthis.visible = options.visible;\n\t\t}\n\n\t\t// State\n\t\tthis._state = DBaseState.NONE;\n\t\tthis._stateLocal = DBaseState.NONE;\n\n\t\t// Interactive\n\t\tconst interactive = ( options && options.interactive != null ?\n\t\t\t( utilIsString( options.interactive ) ? DBaseInteractive[ options.interactive ] : options.interactive ) :\n\t\t\ttheme.getInteractive()\n\t\t);\n\t\tthis.interactive = ( ( interactive & DBaseInteractive.SELF ) !== 0 );\n\t\tthis.interactiveChildren = ( ( interactive & DBaseInteractive.CHILDREN ) !== 0 );\n\n\t\t// Events\n\t\tif( options != null ) {\n\t\t\tconst on = options.on;\n\t\t\tif( on != null ) {\n\t\t\t\tfor( const name in on ) {\n\t\t\t\t\tthis.on( name, on[ name ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Title\n\t\tthis._title = ( options && options.title != null ? options.title : theme.getTitle() );\n\n\t\t// Weight\n\t\tthis._weight = ( options && options.weight != null ? options.weight : theme.getWeight() );\n\n\t\t// Shadow\n\t\tthis._onShadowUpdateBound = (): void => {\n\t\t\tDApplications.update( this );\n\t\t};\n\t\tconst shadow = (options && options.shadow) || theme.getShadow();\n\t\tif( shadow ) {\n\t\t\tthis.shadow = shadow;\n\t\t}\n\n\t\t// Event handlers\n\t\tthis.on( UtilPointerEvent.over, ( e: InteractionEvent ): void => {\n\t\t\t// Hover\n\t\t\tthis.setHovered( true );\n\n\t\t\t// Title\n\t\t\tif( e.target === this ) {\n\t\t\t\tthis.applyTitle();\n\t\t\t}\n\t\t});\n\n\t\tthis.on( UtilPointerEvent.out, (): void => {\n\t\t\tthis.setHovered( false );\n\t\t});\n\n\t\tthis.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\n\t\t\tthis.onDown( e );\n\t\t});\n\n\t\t// Children change detection\n\t\tthis.on( \"added\", (): void => {\n\t\t\tthis.layout();\n\t\t\tif( this.isDirty() || this.hasDirty() ) {\n\t\t\t\tthis.toParentHasDirty();\n\t\t\t}\n\t\t\tif( this._isChildrenDirty ) {\n\t\t\t\tthis.toParentChildrenDirty();\n\t\t\t}\n\t\t\tthis.updateState();\n\t\t\tDApplications.update( this );\n\t\t});\n\n\t\tthis.on( \"removed\", (): void => {\n\t\t\tthis.blur( true );\n\t\t\tthis.updateState();\n\t\t\tDApplications.update( this );\n\t\t});\n\n\t\t// Shortcut\n\t\tconst shortcuts = this._shortcuts = toShortcuts( options );\n\t\tif( shortcuts != null ) {\n\t\t\tconst onShortcutBound = ( e: KeyboardEvent ): void => {\n\t\t\t\tthis.onShortcut( e );\n\t\t\t};\n\t\t\tfor( let i = 0, imax = shortcuts.length; i < imax; ++i ) {\n\t\t\t\tUtilKeyboardEvent.on( this, shortcuts[ i ], onShortcutBound );\n\t\t\t}\n\t\t}\n\n\t\t// Cursor\n\t\tlet cursor: string | null | undefined = options && options.cursor;\n\t\tif( cursor == null ) {\n\t\t\tcursor = theme.getCursor();\n\t\t}\n\t\tif( cursor != null ) {\n\t\t\tthis.cursor = cursor;\n\t\t}\n\n\t\t// Other initialization\n\t\tthis.init( options );\n\n\t\t// State Override\n\t\tif( options && options.state != null ) {\n\t\t\tif( utilIsString( options.state ) ) {\n\t\t\t\tthis.setState( DBaseState[ options.state ], true );\n\t\t\t} else if( utilIsNumber( options.state ) ) {\n\t\t\t\tthis.setState( options.state, true );\n\t\t\t} else {\n\t\t\t\tconst states = options.state;\n\t\t\t\tfor( let i = 0, imax = states.length; i < imax; ++i ) {\n\t\t\t\t\tthis.setState( DBaseState[ states[ i ] ], true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Parent\n\t\tif( options && options.parent != null ) {\n\t\t\toptions.parent.addChild( this );\n\t\t}\n\n\t\t// Children\n\t\tif( options && options.children != null ) {\n\t\t\tconst children = options.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child != null ) {\n\t\t\t\t\tthis.addChild( child );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Done\n\t\tthis.emit( \"init\", this );\n\t}\n\n\tprependRenderable( renderable: DRenderable, phase: boolean ): void {\n\t\t(renderable as any).parent = this;\n\t\tconst list = ( phase ? this._befores : this._afters );\n\t\tlist.unshift( renderable );\n\t}\n\n\tappendRenderable( renderable: DRenderable, phase: boolean ): void {\n\t\t(renderable as any).parent = this;\n\t\tconst list = ( phase ? this._befores : this._afters );\n\t\tlist.push( renderable );\n\t}\n\n\tremoveRenderable( renderable: DRenderable, phase: boolean ): void {\n\t\t(renderable as any).parent = null;\n\t\tconst list = ( phase ? this._befores : this._afters );\n\t\tconst index = list.indexOf( renderable );\n\t\tif( 0 <= index ) {\n\t\t\tlist.splice( index, 1 );\n\t\t}\n\t}\n\n\taddReflowable( reflowable: DReflowable ): void {\n\t\tthis._reflowables.push( reflowable );\n\t}\n\n\tremoveReflowable( reflowable: DReflowable ): void {\n\t\tconst reflowables = this._reflowables;\n\t\tconst index = reflowables.indexOf( reflowable );\n\t\tif( 0 <= index ) {\n\t\t\treflowables.splice( index, 1 );\n\t\t}\n\t}\n\n\tprotected initReflowable(): void {\n\t\tnew DBaseReflowable( this );\n\t}\n\n\tprotected onChildrenChange(): void {\n\t\tthis.toChildrenDirty();\n\t\tsuper.onChildrenChange();\n\t}\n\n\tprotected onShortcut( e: KeyboardEvent ): void {\n\t\t// DO NOTHING\n\t}\n\n\tget coordinate(): DCoordinateSet {\n\t\treturn this._coordinateSet;\n\t}\n\n\tprotected init( options?: OPTIONS ): void {\n\t\t// OTHER INITIALIZATIONS BEFORE `parent.addChild( this )`\n\t}\n\n\tget weight(): number {\n\t\treturn this._weight;\n\t}\n\n\tonMove(): void {\n\t\tthis.moveChildren();\n\t\tDApplications.update( this );\n\t\tthis.emit( \"move\", this );\n\t}\n\n\tresize( width: number, height: number ): boolean {\n\t\tconst oldWidth = this._width;\n\t\tconst oldHeight = this._height;\n\t\tconst widthResized = oldWidth !== width;\n\t\tconst heightResized = oldHeight !== height;\n\n\t\tif( widthResized ) {\n\t\t\tthis._width = width;\n\t\t}\n\n\t\tif( heightResized ) {\n\t\t\tthis._height = height;\n\t\t}\n\n\t\tconst resized = widthResized || heightResized;\n\t\tif( resized ) {\n\t\t\tthis.onResize( width, height, oldWidth, oldHeight );\n\t\t}\n\n\t\tif( widthResized ) {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tif( scalarSet.x != null ) {\n\t\t\t\tconst position = this._transform.position;\n\t\t\t\tconst parent = this.getParentOfSize();\n\t\t\t\tif( parent ) {\n\t\t\t\t\tthis.x = scalarSet.x( parent.width, width, parent.padding.getLeft(), position.x );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( heightResized ) {\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tif( scalarSet.y != null ) {\n\t\t\t\tconst position = this._transform.position;\n\t\t\t\tconst parent = this.getParentOfSize();\n\t\t\t\tif( parent ) {\n\t\t\t\t\tthis.y = scalarSet.y( parent.height, height, parent.padding.getTop(), position.y );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn resized;\n\t}\n\n\tgetClearType(): DLayoutClearType {\n\t\treturn this._clearType;\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tthis.toDirty();\n\t\tthis.toChildrenDirty();\n\t\tthis.resizeChildren();\n\t\tDApplications.update( this );\n\t\tthis.emit( \"resize\", newWidth, newHeight, oldWidth, oldHeight, this );\n\t}\n\n\tonScale(): void {\n\t\tDApplications.update( this );\n\t\tthis.emit( \"scale\", this );\n\t}\n\n\tonSkew(): void {\n\t\tDApplications.update( this );\n\t\tthis.emit( \"skew\", this );\n\t}\n\n\tget type(): string {\n\t\treturn this.getType();\n\t}\n\n\tget name(): string {\n\t\treturn this._name;\n\t}\n\n\tset name( name: string ) {\n\t\tthis._name = name;\n\t}\n\n\tget x(): number {\n\t\treturn this._position.x;\n\t}\n\n\tset x( x: number ) {\n\t\tthis._position.x = x;\n\t}\n\n\tget y(): number {\n\t\treturn this._position.y;\n\t}\n\n\tset y( y: number ) {\n\t\tthis._position.y = y;\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tconst oldWidth = this._width;\n\t\tif( oldWidth !== width ) {\n\t\t\tthis._width = width;\n\t\t\tconst height = this._height;\n\t\t\tthis.onResize( width, height, oldWidth, height );\n\n\t\t\t// Layout\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tif( scalarSet.x != null ) {\n\t\t\t\tconst position = this._transform.position;\n\t\t\t\tconst parent = this.getParentOfSize();\n\t\t\t\tif( parent ) {\n\t\t\t\t\tthis.x = scalarSet.x( parent.width, width, parent.padding.getLeft(), position.x );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tset height( height: number ) {\n\t\tconst oldHeight = this._height;\n\t\tif( oldHeight !== height ) {\n\t\t\tthis._height = height;\n\t\t\tconst width = this._width;\n\t\t\tthis.onResize( width, height, width, oldHeight );\n\n\t\t\t// Layout\n\t\t\tconst scalarSet = this._scalarSet;\n\t\t\tif( scalarSet.y != null ) {\n\t\t\t\tconst position = this._transform.position;\n\t\t\t\tconst parent = this.getParentOfSize();\n\t\t\t\tif( parent ) {\n\t\t\t\t\tthis.y = scalarSet.y( parent.height, height, parent.padding.getTop(), position.y );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget position() {\n\t\treturn this._position;\n\t}\n\n\tget scale() {\n\t\treturn this._scale;\n\t}\n\n\tget skew() {\n\t\treturn this._skew;\n\t}\n\n\tget padding(): DPadding {\n\t\treturn this._padding;\n\t}\n\n\tget corner(): DCorner {\n\t\treturn this._corner;\n\t}\n\n\tget background(): DBackgroundStateAware {\n\t\treturn this._background;\n\t}\n\n\tget border(): DBorderStateAware {\n\t\treturn this._border;\n\t}\n\n\tget outline(): DOutline {\n\t\treturn this._outline;\n\t}\n\n\tget unsafe(): Transform {\n\t\treturn this._transform;\n\t}\n\n\tget title(): string {\n\t\treturn this._title;\n\t}\n\n\tset title( title: string ) {\n\t\tif( this._title !== title ) {\n\t\t\tthis._title = title;\n\t\t\tif( this.isHovered() ) {\n\t\t\t\tthis.applyTitle();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected applyTitle(): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tlayer.view.title = this._title;\n\t\t}\n\t}\n\n\tshow(): this {\n\t\tif( ! this.visible ) {\n\t\t\tthis.visible = true;\n\t\t\tthis.toParentChildrenDirty();\n\t\t\tDApplications.update( this );\n\t\t}\n\t\treturn this;\n\t}\n\n\tisShown(): boolean {\n\t\treturn this.visible;\n\t}\n\n\thide(): this {\n\t\tif( this.visible ) {\n\t\t\tthis.visible = false;\n\t\t\tthis.toParentChildrenDirty();\n\t\t\tDApplications.update( this );\n\t\t}\n\t\treturn this;\n\t}\n\n\tisHidden(): boolean {\n\t\treturn ! this.visible;\n\t}\n\n\ttoDirty(): boolean {\n\t\tif( ! this._isDirty ) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis.toParentHasDirty();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\ttoHasDirty(): boolean {\n\t\tif( ! this._hasDirty ) {\n\t\t\tthis._hasDirty = true;\n\t\t\tthis.toParentHasDirty();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\ttoParentHasDirty(): void {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\tparent.toHasDirty();\n\t\t}\n\t}\n\n\ttoChildrenDirty(): boolean {\n\t\tif( ! this._isChildrenDirty ) {\n\t\t\tthis._isChildrenDirty = true;\n\t\t\tthis.onChildrenDirty();\n\t\t\tthis.toParentChildrenDirty();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\ttoParentChildrenDirty(): void {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\tparent.toChildrenDirty();\n\t\t}\n\t}\n\n\tisChildrenDirty(): boolean {\n\t\treturn this._isChildrenDirty;\n\t}\n\n\tprotected onChildrenDirty() {\n\t\t// DO NOTHING\n\t}\n\n\tisDirty() {\n\t\treturn this._isDirty;\n\t}\n\n\thasDirty() {\n\t\treturn this._hasDirty;\n\t}\n\n\tsetHovered( isHovered: boolean ) {\n\t\treturn this.setState( DBaseState.HOVERED, isHovered );\n\t}\n\n\tsetActive( isActive: boolean ) {\n\t\treturn this.setState( DBaseState.ACTIVE, isActive );\n\t}\n\n\tsetPressed( isPressed: boolean ) {\n\t\treturn this.setState( DBaseState.PRESSED, isPressed );\n\t}\n\n\tsetReadOnly( isReadOnly: boolean ) {\n\t\treturn this.setState( DBaseState.READ_ONLY, isReadOnly );\n\t}\n\n\tsetDisabled( isDisabled: boolean ) {\n\t\treturn this.setState( DBaseState.DISABLED, isDisabled );\n\t}\n\n\tsetDragging( isDragging: boolean ) {\n\t\treturn this.setState( DBaseState.DRAGGING, isDragging );\n\t}\n\n\tsetInvalid( isInvalid: boolean ) {\n\t\treturn this.setState( DBaseState.INVALID, isInvalid );\n\t}\n\n\tsetSucceeded( isSucceeded: boolean ) {\n\t\treturn this.setState( DBaseState.SUCCEEDED, isSucceeded );\n\t}\n\n\tsetFailed( isFailed: boolean ) {\n\t\treturn this.setState( DBaseState.FAILED, isFailed );\n\t}\n\n\tsetFocused( isFocused: boolean ) {\n\t\tif( this.isFocused() !== isFocused ) {\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( layer ) {\n\t\t\t\tlayer.getFocusController().setFocused( this, isFocused, false );\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tfocus(): this {\n\t\treturn this.setFocused( true );\n\t}\n\n\tblur( recursively?: boolean ): this {\n\t\tif( recursively ) {\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( layer ) {\n\t\t\t\tconst focusController = layer.getFocusController();\n\t\t\t\tconst focused = focusController.getFocused();\n\t\t\t\tif( focused instanceof DBase ) {\n\t\t\t\t\tlet current: Container = focused;\n\t\t\t\t\twhile( current ) {\n\t\t\t\t\t\tif( current === this ) {\n\t\t\t\t\t\t\tfocused.setFocused( false );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setFocused( false );\n\t\t}\n\t\treturn this;\n\t}\n\n\tisHovered(): boolean {\n\t\treturn this.hasState( DBaseState.HOVERED );\n\t}\n\n\tisActive(): boolean {\n\t\treturn this.hasState( DBaseState.ACTIVE );\n\t}\n\n\tisActiveIn(): boolean {\n\t\treturn this.hasState( DBaseState.ACTIVE | DBaseState.ACTIVE_IN );\n\t}\n\n\tisPressed(): boolean {\n\t\treturn this.hasState( DBaseState.PRESSED );\n\t}\n\n\tisReadOnly(): boolean {\n\t\treturn this.hasState( DBaseState.READ_ONLY );\n\t}\n\n\tisDisabled(): boolean {\n\t\treturn this.hasState( DBaseState.DISABLED );\n\t}\n\n\tisActionable(): boolean {\n\t\treturn ! this.hasState( DBaseState.DISABLED | DBaseState.READ_ONLY );\n\t}\n\n\tisDragging(): boolean {\n\t\treturn this.hasState( DBaseState.DRAGGING );\n\t}\n\n\tisFocused(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED );\n\t}\n\n\tisFocusedIn(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED | DBaseState.FOCUSED_IN );\n\t}\n\n\tisUnfocusable(): boolean {\n\t\treturn this.hasState( DBaseState.UNFOCUSABLE );\n\t}\n\n\tisInvalid(): boolean {\n\t\treturn this.hasState( DBaseState.INVALID );\n\t}\n\n\tisSucceeded(): boolean {\n\t\treturn this.hasState( DBaseState.SUCCEEDED );\n\t}\n\n\tisFailed(): boolean {\n\t\treturn this.hasState( DBaseState.FAILED );\n\t}\n\n\tsetState( state: DBaseState, isOn: boolean ) {\n\t\tconst oldStateLocal = this._stateLocal;\n\t\tconst newStateLocal = ( isOn ? (oldStateLocal | state) : (oldStateLocal & ~state) );\n\t\tif( oldStateLocal !== newStateLocal ) {\n\t\t\tthis._stateLocal = newStateLocal;\n\t\t\tthis.updateState();\n\t\t}\n\t\treturn this;\n\t}\n\n\tsetStates( statesOn: DBaseState, statesOff: DBaseState ) {\n\t\tconst oldStateLocal = this._stateLocal;\n\t\tconst newStateLocal = ( (oldStateLocal | statesOn) & ~statesOff );\n\t\tif( oldStateLocal !== newStateLocal ) {\n\t\t\tthis._stateLocal = newStateLocal;\n\t\t\tthis.updateState();\n\t\t}\n\t\treturn this;\n\t}\n\n\tprotected updateState(): void {\n\t\tconst parent = this.parent;\n\t\tconst stateLocal = this._stateLocal;\n\t\tconst newState = ( parent instanceof DBase ?\n\t\t\tthis.mergeState( stateLocal, parent.state ) :\n\t\t\tstateLocal\n\t\t);\n\t\tconst oldState = this._state;\n\t\tif( oldState !== newState ) {\n\t\t\tthis._state = newState;\n\t\t\tthis.onStateChange( newState, oldState );\n\t\t}\n\t}\n\n\tprotected mergeState( stateLocal: DBaseState, stateParent: DBaseState ): DBaseState {\n\t\treturn stateLocal | ( stateParent & DBaseState.DISABLED ) |\n\t\t\t( stateParent & (DBaseState.FOCUSED | DBaseState.FOCUSED_IN) ? DBaseState.FOCUSED_IN : DBaseState.NONE ) |\n\t\t\t( stateParent & (DBaseState.ACTIVE | DBaseState.ACTIVE_IN) ? DBaseState.ACTIVE_IN : DBaseState.NONE );\n\t}\n\n\tprotected onStateChange( newState: number, oldState: number ) {\n\t\tthis.toDirty();\n\t\tDApplications.update( this );\n\t\tthis.emit( \"statechange\", newState, oldState, this );\n\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DBase ) {\n\t\t\t\tchild.onParentStateChange( newState, oldState );\n\t\t\t}\n\t\t}\n\n\t\tif( DBaseStates.isFocused( newState ) ) {\n\t\t\tif( ! DBaseStates.isFocused( oldState ) ) {\n\t\t\t\tthis.onFocused();\n\t\t\t}\n\t\t} else {\n\t\t\tif( DBaseStates.isFocused( oldState ) ) {\n\t\t\t\tthis.onBlured();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onChildFocused( focused: DBase ): void {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\tparent.onChildFocused( focused );\n\t\t}\n\t}\n\n\tprotected onFocused(): void {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\tparent.onChildFocused( this );\n\t\t}\n\t}\n\n\tprotected onBlured(): void {\n\t\t//\n\t}\n\n\tprotected onParentStateChange( newStateParent: number, oldStateParent: number ) {\n\t\tconst newState = this.mergeState( this._stateLocal, newStateParent );\n\t\tconst oldState = this._state;\n\t\tif( oldState !== newState ) {\n\t\t\tthis._state = newState;\n\t\t\tthis.onStateChange( newState, oldState );\n\t\t}\n\t}\n\n\tget state(): DBaseState {\n\t\treturn this._state;\n\t}\n\n\tgetState(): DBaseState {\n\t\treturn this._state;\n\t}\n\n\thasState( state: DBaseState ): boolean {\n\t\treturn DBaseStates.is( this._state, state );\n\t}\n\n\tget theme(): THEME {\n\t\treturn this._theme;\n\t}\n\n\tset theme( theme: THEME ) {\n\t\tconst result = this._theme;\n\t\tif( result !== theme ) {\n\t\t\tthis._theme = theme;\n\t\t\tthis._padding.setTheme( theme );\n\t\t\tthis._background.setTheme( theme );\n\t\t\tthis._border.setTheme( theme );\n\t\t\tthis._outline.setTheme( theme );\n\t\t\tthis._corner.setTheme( theme );\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\trefit(): void {\n\t\tif( this._isChildrenDirty ) {\n\t\t\tthis._isChildrenDirty = false;\n\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.refit();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.onRefit();\n\t\t}\n\t}\n\n\tprotected onRefit(): void {\n\t\tconst coordinateSet = this._coordinateSet;\n\t\tconst isWidthAuto = coordinateSet.isWidthAuto();\n\t\tconst isHeightAuto = coordinateSet.isHeightAuto();\n\t\tif( isWidthAuto && isHeightAuto ) {\n\t\t\tlet width = 0;\n\t\t\tlet height = 0;\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.visible ) {\n\t\t\t\t\tif( this.hasRefitableWidth( child ) ) {\n\t\t\t\t\t\twidth = Math.max( width, child.x + child.width );\n\t\t\t\t\t}\n\t\t\t\t\tif( this.hasRefitableHeight( child ) ) {\n\t\t\t\t\t\theight = Math.max( height, child.y + child.height );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst padding = this.padding;\n\t\t\tthis.resize( width + padding.getRight(), height + padding.getBottom() );\n\t\t} else if( isWidthAuto ) {\n\t\t\tlet width = 0;\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.visible && this.hasRefitableWidth( child ) ) {\n\t\t\t\t\twidth = Math.max( width, child.x + child.width );\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst padding = this.padding;\n\t\t\tthis.width = width + padding.getRight();\n\t\t} else if( isHeightAuto ) {\n\t\t\tlet height = 0;\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.visible && this.hasRefitableHeight( child ) ) {\n\t\t\t\t\theight = Math.max( height, child.y + child.height );\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst padding = this.padding;\n\t\t\tthis.height = height + padding.getBottom();\n\t\t}\n\t}\n\n\tprotected isRefitable( target: any ): target is DRefitable {\n\t\treturn target instanceof DBase;\n\t}\n\n\tprotected hasRefitableHeight( target: any ): target is DRefitable {\n\t\treturn this.isRefitable( target ) &&\n\t\t\t! ( target instanceof DBase && utilIsFunction( target.coordinate.height ) );\n\t}\n\n\tprotected hasRefitableWidth( target: any ): target is DBase<any, any> {\n\t\treturn this.isRefitable( target ) &&\n\t\t\t! ( target instanceof DBase && utilIsFunction( target.coordinate.width ) );\n\t}\n\n\treflow(): void {\n\t\tif( this._isDirty ) {\n\t\t\tthis.onReflow();\n\t\t\tthis._isDirty = false;\n\t\t}\n\n\t\tif( this._hasDirty ) {\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.reflow();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._hasDirty = false;\n\t\t}\n\t}\n\n\tprotected onReflow(): void {\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\t\tconst reflowables = this._reflowables;\n\t\tfor( let i = 0, imax = reflowables.length; i < imax; ++i ) {\n\t\t\treflowables[ i ].onReflow( this, width, height );\n\t\t}\n\t}\n\n\tget shadow(): DShadow | null {\n\t\treturn this._shadow;\n\t}\n\n\tset shadow( shadow: DShadow | null ) {\n\t\tconst previous = this._shadow;\n\t\tif( previous !== shadow ) {\n\t\t\tif( previous != null ) {\n\t\t\t\tprevious.off( \"update\", this._onShadowUpdateBound );\n\t\t\t\tthis.removeReflowable( previous );\n\t\t\t\tthis.removeRenderable( previous, true );\n\t\t\t}\n\n\t\t\tthis._shadow = shadow;\n\t\t\tif( shadow != null ) {\n\t\t\t\tshadow.on( \"update\", this._onShadowUpdateBound );\n\t\t\t\tthis.addReflowable( shadow );\n\t\t\t\tthis.prependRenderable( shadow, true );\n\t\t\t}\n\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\tlayout(): void {\n\t\tconst parent = this.getParentOfSize();\n\t\tif( parent ) {\n\t\t\tthis.onParentResize( parent.width, parent.height, parent.padding );\n\t\t}\n\t}\n\n\tprotected getParentOfSize(): { width: number, height: number, padding: DPadding } | null {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof DBase ) {\n\t\t\treturn parent;\n\t\t} else {\n\t\t\treturn DApplications.getLayer( this );\n\t\t}\n\t}\n\n\t/**\n\t * Called when a parent resized.\n\t *\n\t * @param parentWidth a parent's local width\n\t * @param parentHeight a parent's local height\n\t */\n\tonParentResize( parentWidth: number, parentHeight: number, parentPadding: DPadding ): void {\n\t\tconst scalarSet = this._scalarSet;\n\t\tconst position = this._transform.position;\n\t\tconst x = position.x;\n\t\tconst y = position.y;\n\t\tconst width = this._width;\n\t\tconst height = this._height;\n\n\t\t// Width & height\n\t\tconst paddingWidth = parentPadding.getLeft() + parentPadding.getRight();\n\t\tconst paddingHeight = parentPadding.getTop() + parentPadding.getBottom();\n\t\tconst newWidth = ( scalarSet.width != null ?\n\t\t\tscalarSet.width( parentWidth, width, paddingWidth, width ) : width );\n\t\tconst newHeight = ( scalarSet.height != null ?\n\t\t\tscalarSet.height( parentHeight, height, paddingHeight, height ) : height );\n\t\tthis.resize( newWidth, newHeight );\n\n\t\t// X & Y\n\t\tconst newX = ( scalarSet.x != null ? scalarSet.x( parentWidth, this.width, parentPadding.getLeft(), x ) : x );\n\t\tconst newY = ( scalarSet.y != null ? scalarSet.y( parentHeight, this.height, parentPadding.getTop(), y ) : y );\n\t\tthis.position.set( newX, newY );\n\t}\n\n\tresizeChildren(): void {\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\t\tconst padding = this._padding;\n\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DBase ) {\n\t\t\t\tchild.onParentResize( width, height, padding );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Called when a parent moved.\n\t *\n\t * @param x a parent's local x position\n\t * @param y a parent's local y position\n\t */\n\tonParentMove( x: number, y: number ): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected moveChildren() {\n\t\tconst x = this.x;\n\t\tconst y = this.y;\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DBase ) {\n\t\t\t\tchild.onParentMove( x, y );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Wheel\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean {\n\t\tthis.emit( \"wheel\", e, deltas, global, this );\n\t\treturn false;\n\t}\n\n\t// Keydown\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tthis.emit( \"keydown\", e, this );\n\t\treturn false;\n\t}\n\n\tonKeyUp( e: KeyboardEvent ): boolean {\n\t\tthis.emit( \"keyup\", e, this );\n\t\treturn false;\n\t}\n\n\t// Down\n\tprotected onDown( e: InteractionEvent ): void {\n\t\tconst target = e.target;\n\t\tif( target === this ) {\n\t\t\tthis.onDownThis( e );\n\t\t} else if( !( target instanceof DBase ) ) {\n\t\t\tlet parent = target.parent;\n\t\t\twhile( parent != null && ! ( parent instanceof DBase ) ) {\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t\tif( parent === this ) {\n\t\t\t\tthis.onDownThis( e );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onDownThis( e: InteractionEvent ): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst focusController = layer.getFocusController();\n\t\t\tfocusController.setFocused( focusController.findFocusableParent( this ), true, true );\n\t\t}\n\t}\n\n\t// Double click\n\tonDblClick( e: MouseEvent | TouchEvent, interactionManager: interaction.InteractionManager ): boolean {\n\t\tthis.emit( \"dblclick\", e, interactionManager, this );\n\t\treturn false;\n\t}\n\n\t//\n\trender( renderer: Renderer ): void {\n\t\tif( this.visible && 0 < this.worldAlpha && this.renderable ) {\n\t\t\tthis.renderBefore( renderer );\n\t\t\tsuper.render( renderer );\n\t\t\tthis.renderAfter( renderer );\n\t\t}\n\t}\n\n\tprotected renderBefore( renderer: Renderer ): void {\n\t\tconst befores = this._befores;\n\t\tfor( let i = 0, imax = befores.length; i < imax; ++i ) {\n\t\t\tconst before = befores[ i ];\n\t\t\tbefore.updateTransform();\n\t\t\tbefore.render( renderer );\n\t\t}\n\t}\n\n\tprotected renderAfter( renderer: Renderer ): void {\n\t\tconst afters = this._afters;\n\t\tfor( let i = 0, imax = afters.length; i < imax; ++i ) {\n\t\t\tconst after = afters[ i ];\n\t\t\tafter.updateTransform();\n\t\t\tafter.render( renderer );\n\t\t}\n\t}\n\n\t//\n\tprotected getThemeDefault(): THEME {\n\t\treturn DThemes.getInstance().get( this.getType() );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DBase\";\n\t}\n\n\t//\n\tprotected _calculateBounds(): void {\n\t\tconst worldTransform = this._transform.worldTransform;\n\t\tconst bounds = this._bounds;\n\n\t\tconst work = DBase.WORK_CONTAINS_POINT;\n\t\twork.set( 0, 0 );\n\t\tworldTransform.apply( work, work );\n\t\tbounds.addPoint( work );\n\n\t\twork.set( this._width, this._height );\n\t\tworldTransform.apply( work, work );\n\t\tbounds.addPoint( work );\n\n\t\tsuper._calculateBounds();\n\t}\n\n\tcontainsPoint( point: Point ): boolean {\n\t\treturn this.containsGlobalPoint( point ) || this.containsLocalPoint(\n\t\t\tthis.worldTransform.applyInverse( point, DBase.WORK_CONTAINS_POINT )\n\t\t);\n\t}\n\n\tprotected containsGlobalPoint( point: Point ): boolean {\n\t\treturn false;\n\t}\n\n\tprotected containsLocalPoint( point: Point ): boolean {\n\t\treturn (\n\t\t\t0 <= point.x && point.x <= this.width &&\n\t\t\t0 <= point.y && point.y <= this.height\n\t\t);\n\t}\n\n\tdestroy(): void {\n\t\t// Layout\n\t\tconst scalarSet = this._scalarSet;\n\t\tscalarSet.x = null;\n\t\tscalarSet.y = null;\n\t\tscalarSet.width = null;\n\t\tscalarSet.height = null;\n\n\t\t// Shadow\n\t\tconst shadow = this._shadow;\n\t\tif( shadow ) {\n\t\t\tthis._shadow = null;\n\t\t\tshadow.destroy();\n\t\t}\n\n\t\t// Children\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tchildren[ i ].destroy();\n\t\t}\n\t\tchildren.length = 0;\n\n\t\t//\n\t\tsuper.destroy();\n\t}\n}\n","import { DynamicFontAtlasCharacter } from \"./util/dynamic-font-atlas-character\";\n\nexport class DDynamicTextMeasureResultCharacter {\n\tx: number;\n\ty: number;\n\tcharacter: DynamicFontAtlasCharacter;\n\n\tconstructor( x: number, y: number, character: DynamicFontAtlasCharacter ) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.character = character;\n\t}\n\n\tset( x: number, y: number, character: DynamicFontAtlasCharacter ): void {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.character = character;\n\t}\n}\n","import { DDynamicTextMeasureResultCharacter } from \"./d-dynamic-text-measure-result-character\";\nimport { DynamicFontAtlasCharacter } from \"./util/dynamic-font-atlas-character\";\n\nexport class DDynamicTextMeasureResult {\n\tcount: number;\n\twidth: number;\n\theight: number;\n\tcharacters: DDynamicTextMeasureResultCharacter[];\n\n\tx: number;\n\ty: number;\n\n\tconstructor() {\n\t\tthis.count = 0;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.characters = [];\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\tstart(): void {\n\t\tthis.count = 0;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\tpush( character: DynamicFontAtlasCharacter ): void {\n\t\tconst x = this.x;\n\t\tthis.x += character.advance;\n\t\tconst y = this.y;\n\t\tconst count = this.count;\n\t\tconst characters = this.characters;\n\t\tif( count < characters.length ) {\n\t\t\tcharacters[ count ].set( x, y, character );\n\t\t} else {\n\t\t\tcharacters.push( new DDynamicTextMeasureResultCharacter( x, y, character ) );\n\t\t}\n\t\tthis.count += 1;\n\t}\n\n\tnewLine( lineHeight: number ): void {\n\t\tthis.width = Math.max( this.width, this.x );\n\t\tthis.x = 0;\n\t\tthis.y += lineHeight;\n\t}\n\n\tpop(): boolean {\n\t\tif( 0 < this.x ) {\n\t\t\tconst count = this.count;\n\t\t\tconst characters = this.characters;\n\t\t\tif( 0 < count ) {\n\t\t\t\tconst character = characters[ count - 1 ];\n\t\t\t\tthis.x -= character.character.advance;\n\t\t\t\tthis.count -= 1;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tend( lineHeight: number ): void {\n\t\tthis.newLine( lineHeight );\n\t\tthis.height = this.y;\n\t}\n}\n","\nexport class UtilCharacterIterator {\n\tprotected static _instance: UtilCharacterIterator | null = null;\n\tprotected _target: string;\n\tprotected _position: number;\n\n\tconstructor() {\n\t\tthis._target = \"\";\n\t\tthis._position = 0;\n\t}\n\n\tinit( target: string ): void {\n\t\tthis._target = target;\n\t\tthis._position = 0;\n\t}\n\n\thasNext(): boolean {\n\t\treturn this._position < this._target.length;\n\t}\n\n\tprotected findNextBreak( target: string, istart: number ): number {\n\t\tconst iend = target.length;\n\t\tfor( let i = istart; i < iend; ++i ) {\n\t\t\tconst code = target.charCodeAt( i );\n\t\t\tif( ! this.isLowSurrogate( code ) && ! this.isVariationSelector( code ) ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn iend;\n\t}\n\n\tprotected isHighSurrogate( code: number ): boolean {\n\t\treturn ( 0xd800 <= code && code <= 0xdbff );\n\t}\n\n\tprotected isLowSurrogate( code: number ): boolean {\n\t\treturn ( 0xdc00 <= code && code <= 0xdfff );\n\t}\n\n\tprotected isVariationSelector( code: number ): boolean {\n\t\treturn ( 0xfe00 <= code && code <= 0xfe0f );\n\t}\n\n\tnext(): string {\n\t\tconst target = this._target;\n\t\tconst position = this._position;\n\t\tconst nextBreak = this.findNextBreak( target, position + 1 );\n\t\tconst result = target.substring( position, nextBreak );\n\t\tthis._position = nextBreak;\n\t\treturn result;\n\t}\n\n\tstatic from( target: string ): UtilCharacterIterator {\n\t\tif( UtilCharacterIterator._instance == null ) {\n\t\t\tUtilCharacterIterator._instance = new UtilCharacterIterator();\n\t\t}\n\t\tconst instance = UtilCharacterIterator._instance;\n\t\tinstance.init( target );\n\t\treturn instance;\n\t}\n}\n","import { DDynamicTextMeasureResult } from \"./d-dynamic-text-measure-result\";\nimport { DynamicFontAtlas } from \"./util/dynamic-font-atlas\";\nimport { UtilCharacterIterator } from \"./util/util-character-iterator\";\n\nexport class DDynamicTextMeasure {\n\tprotected static RESULT: DDynamicTextMeasureResult | null = null;\n\n\tstatic measure(\n\t\ttext: string, atlas: DynamicFontAtlas | null, clippingWidth: number | undefined\n\t): DDynamicTextMeasureResult {\n\t\tconst result = DDynamicTextMeasure.RESULT = DDynamicTextMeasure.RESULT || new DDynamicTextMeasureResult();\n\t\tresult.start();\n\t\tif( atlas != null ) {\n\t\t\tconst iterator = UtilCharacterIterator.from( text );\n\t\t\tconst lineHeight = atlas.font.height;\n\t\t\tconst newLine = \"\\n\";\n\t\t\twhile( iterator.hasNext() ) {\n\t\t\t\tconst character = iterator.next();\n\t\t\t\tif( character === newLine ) {\n\t\t\t\t\tresult.newLine( lineHeight );\n\t\t\t\t} else {\n\t\t\t\t\tconst a = atlas.get( character );\n\t\t\t\t\tif( a != null ) {\n\t\t\t\t\t\tconst x = result.x;\n\t\t\t\t\t\tif( clippingWidth != null && clippingWidth < x + a.advance ) {\n\t\t\t\t\t\t\tconst dots = atlas.get( \"...\" );\n\t\t\t\t\t\t\tif( dots != null ) {\n\t\t\t\t\t\t\t\tif( clippingWidth < x + dots.advance ) {\n\t\t\t\t\t\t\t\t\tif( result.pop() ) {\n\t\t\t\t\t\t\t\t\t\tresult.push( dots );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tresult.push( dots );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twhile( iterator.hasNext() ) {\n\t\t\t\t\t\t\t\tif( iterator.next() === newLine ) {\n\t\t\t\t\t\t\t\t\tresult.newLine( lineHeight );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.push( a );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.end( lineHeight );\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { MeshGeometry } from \"pixi.js\";\nimport { DDynamicTextMeasure } from \"./d-dynamic-text-measure\";\nimport { DynamicFontAtlas } from \"./util/dynamic-font-atlas\";\nimport { DynamicFontAtlasCharacter } from \"./util/dynamic-font-atlas-character\";\n\nexport class DDynamicTextGeometry extends MeshGeometry {\n\twidth: number;\n\theight: number;\n\n\tconstructor() {\n\t\tsuper( new Float32Array( 64 ), new Float32Array( 64 ), new Uint16Array( 48 ) );\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t}\n\n\tupdate( text: string, atlas: DynamicFontAtlas | null, clippingWidth: number | undefined ): void {\n\t\tconst vertexBuffer = this.getBuffer( \"aVertexPosition\" );\n\t\tconst uvBuffer = this.getBuffer( \"aTextureCoord\" );\n\t\tconst indexBuffer = this.getIndex();\n\n\t\tconst result = DDynamicTextMeasure.measure( text, atlas, clippingWidth );\n\t\tconst requiredTextSize = Math.ceil( result.count / 8 ) << 3;\n\t\tconst requiredVertexSize = requiredTextSize << 3;\n\t\tif( (vertexBuffer.data as Float32Array).length < requiredVertexSize ) {\n\t\t\tvertexBuffer.data = new Float32Array( requiredVertexSize );\n\t\t\tuvBuffer.data = new Float32Array( requiredVertexSize );\n\t\t}\n\t\tconst requiredIndexSize = requiredTextSize * 6;\n\t\tif( (indexBuffer.data as Uint16Array).length < requiredIndexSize ) {\n\t\t\tindexBuffer.data = new Uint16Array( requiredIndexSize );\n\t\t}\n\n\t\tconst vertices = vertexBuffer.data as Float32Array;\n\t\tconst uvs = uvBuffer.data as Float32Array;\n\t\tconst indices = indexBuffer.data as Uint16Array;\n\n\t\tif( atlas != null ) {\n\t\t\tconst count = result.count;\n\t\t\tconst characters = result.characters;\n\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\tconst character = characters[ i ];\n\t\t\t\tthis.writeCharacter(\n\t\t\t\t\tvertices, uvs, indices,\n\t\t\t\t\ti, character.x, character.y,\n\t\t\t\t\tcharacter.character, atlas.width, atlas.height\n\t\t\t\t);\n\t\t\t}\n\t\t\tfor( let i = count, imax = vertices.length >> 3; i < imax; ++i ) {\n\t\t\t\tthis.writeCharacterEmpty( vertices, uvs, indices, i );\n\t\t\t}\n\t\t\tthis.width = result.width;\n\t\t\tthis.height = result.height;\n\t\t} else {\n\t\t\tfor( let i = 0, imax = vertices.length >> 3; i < imax; ++i ) {\n\t\t\t\tthis.writeCharacterEmpty( vertices, uvs, indices, i );\n\t\t\t}\n\t\t\tthis.width = 0;\n\t\t\tthis.height = 0;\n\t\t}\n\n\t\tvertexBuffer.update();\n\t\tuvBuffer.update();\n\t\tindexBuffer.update();\n\t}\n\n\tprotected writeCharacter(\n\t\tvertices: Float32Array, uvs: Float32Array, indices: Uint16Array,\n\t\tindex: number, x: number, y: number,\n\t\tcharacter: DynamicFontAtlasCharacter,\n\t\twidth: number, height: number\n\t): void {\n\t\tconst offsetX = character.x - character.origin.x;\n\t\tconst offsetY = 0;\n\n\t\tconst iv = index << 3;\n\t\tvertices[ iv + 0 ] = x + offsetX;\n\t\tvertices[ iv + 1 ] = y + offsetY;\n\t\tvertices[ iv + 2 ] = x + offsetX + character.width;\n\t\tvertices[ iv + 3 ] = y + offsetY;\n\t\tvertices[ iv + 4 ] = x + offsetX + character.width;\n\t\tvertices[ iv + 5 ] = y + offsetY + character.height;\n\t\tvertices[ iv + 6 ] = x + offsetX;\n\t\tvertices[ iv + 7 ] = y + offsetY + character.height;\n\n\t\tconst x0 = character.x / width;\n\t\tconst y0 = character.y / height;\n\t\tconst x1 = ( character.x + character.width ) / width;\n\t\tconst y1 = ( character.y + character.height ) / height;\n\t\tuvs[ iv + 0 ] = x0;\n\t\tuvs[ iv + 1 ] = y0;\n\t\tuvs[ iv + 2 ] = x1;\n\t\tuvs[ iv + 3 ] = y0;\n\t\tuvs[ iv + 4 ] = x1;\n\t\tuvs[ iv + 5 ] = y1;\n\t\tuvs[ iv + 6 ] = x0;\n\t\tuvs[ iv + 7 ] = y1;\n\n\t\tconst ii = index * 6;\n\t\tconst vo = index << 2;\n\t\tindices[ ii + 0 ] = vo + 0;\n\t\tindices[ ii + 1 ] = vo + 1;\n\t\tindices[ ii + 2 ] = vo + 3;\n\t\tindices[ ii + 3 ] = vo + 1;\n\t\tindices[ ii + 4 ] = vo + 2;\n\t\tindices[ ii + 5 ] = vo + 3;\n\t}\n\n\tprotected writeCharacterEmpty(\n\t\tvertices: Float32Array, uvs: Float32Array, indices: Uint16Array,\n\t\tindex: number\n\t): void {\n\t\tconst iv = index << 3;\n\t\tvertices[ iv + 0 ] = 0;\n\t\tvertices[ iv + 1 ] = 0;\n\t\tvertices[ iv + 2 ] = 0;\n\t\tvertices[ iv + 3 ] = 0;\n\t\tvertices[ iv + 4 ] = 0;\n\t\tvertices[ iv + 5 ] = 0;\n\t\tvertices[ iv + 6 ] = 0;\n\t\tvertices[ iv + 7 ] = 0;\n\n\t\tuvs[ iv + 0 ] = 0;\n\t\tuvs[ iv + 1 ] = 0;\n\t\tuvs[ iv + 2 ] = 0;\n\t\tuvs[ iv + 3 ] = 0;\n\t\tuvs[ iv + 4 ] = 0;\n\t\tuvs[ iv + 5 ] = 0;\n\t\tuvs[ iv + 6 ] = 0;\n\t\tuvs[ iv + 7 ] = 0;\n\n\t\tconst ii = index * 6;\n\t\tconst vo = index << 2;\n\t\tindices[ ii + 0 ] = vo + 0;\n\t\tindices[ ii + 1 ] = vo + 1;\n\t\tindices[ ii + 2 ] = vo + 3;\n\t\tindices[ ii + 3 ] = vo + 1;\n\t\tindices[ ii + 4 ] = vo + 2;\n\t\tindices[ ii + 5 ] = vo + 3;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DFontStyle, DFontVariant, DFontWeight, DThemeFont } from \"./d-font\";\nimport { DThemes } from \"./theme/d-themes\";\n\nexport type DDynamicTextAlign = \"left\" | \"center\" | \"right\";\n\nexport interface DDynamicTextStyleOptions {\n\talign?: DDynamicTextAlign;\n\tfontFamily?: string;\n\tfontSize?: number;\n\tfontStyle?: DFontStyle;\n\tfontVariant?: DFontVariant;\n\tfontWeight?: DFontWeight;\n\tfill?: number;\n\tclipping?: boolean;\n}\n\nexport class DDynamicTextStyle {\n\tprotected static FONT: DThemeFont | null = null;\n\n\tprotected _id: number;\n\tprotected _idApproved: number;\n\tprotected _fontIdId: number;\n\tprotected _fontId: string;\n\tprotected _fontIdApproved: string;\n\tprotected _align: DDynamicTextAlign;\n\tprotected _fontFamily: string;\n\tprotected _fontSize: number;\n\tprotected _fontStyle: DFontStyle;\n\tprotected _fontVariant: DFontVariant;\n\tprotected _fontWeight: DFontWeight;\n\tprotected _fill: number;\n\tprotected _fillApproved: number;\n\tprotected _clipping: boolean;\n\tprotected _onChange: () => void;\n\n\tconstructor( options: DDynamicTextStyleOptions | undefined, onChange: () => void ) {\n\t\tthis._id = 0;\n\t\tthis._idApproved = -1;\n\n\t\tconst font = DDynamicTextStyle.FONT = (\n\t\t\tDDynamicTextStyle.FONT || DThemes.getInstance().get( \"DBase\" ) as DThemeFont\n\t\t);\n\t\tthis._align = (options && options.align) || \"left\";\n\t\tthis._fontFamily = (options && options.fontFamily) || font.getFontFamilly();\n\t\tthis._fontSize = (options && options.fontSize) || font.getFontSize();\n\t\tthis._fontStyle = (options && options.fontStyle) || \"normal\";\n\t\tthis._fontVariant = (options && options.fontVariant) || \"normal\";\n\t\tthis._fontWeight = (options && options.fontWeight) || \"normal\";\n\n\t\tthis._fontIdId = -1;\n\t\tthis._fontId = \"\";\n\t\tthis._fontIdApproved = \"\";\n\n\t\tthis._fill = (options && options.fill) || font.getColor( 0 );\n\t\tthis._fillApproved = 0x000000;\n\n\t\tthis._clipping = ((options && options.clipping != null) ? options.clipping : true);\n\n\t\tthis._onChange = onChange;\n\t}\n\n\tget id(): number {\n\t\treturn this._id;\n\t}\n\n\tget idApproved(): number {\n\t\treturn this._idApproved;\n\t}\n\n\tget fontId(): string {\n\t\tthis.update();\n\t\treturn this._fontId;\n\t}\n\n\tget fontIdApproved(): string {\n\t\treturn this._fontIdApproved;\n\t}\n\n\tget fill(): number {\n\t\treturn this._fill;\n\t}\n\n\tset fill( fill: number ) {\n\t\tif( this._fill !== fill ) {\n\t\t\tthis._fill = fill;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected onChange(): void {\n\t\tthis._id += 1;\n\t\tthis._onChange();\n\t}\n\n\tget fillApproved(): number {\n\t\treturn this._fillApproved;\n\t}\n\n\tapprove(): void {\n\t\tthis.update();\n\t\tthis._idApproved = this._id;\n\t\tthis._fontIdApproved = this._fontId;\n\t\tthis._fillApproved = this._fill;\n\t}\n\n\tget fontFamily(): string {\n\t\treturn this._fontFamily;\n\t}\n\n\tset fontFamily( fontFamily: string ) {\n\t\tif( this._fontFamily !== fontFamily ) {\n\t\t\tthis._fontFamily = fontFamily;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tget fontSize(): number {\n\t\treturn this._fontSize;\n\t}\n\n\tset fontSize( fontSize: number ) {\n\t\tif( this._fontSize !== fontSize ) {\n\t\t\tthis._fontSize = fontSize;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tget fontStyle(): DFontStyle {\n\t\treturn this._fontStyle;\n\t}\n\n\tset fontStyle( fontStyle: DFontStyle ) {\n\t\tif( this._fontStyle !== fontStyle ) {\n\t\t\tthis._fontStyle = fontStyle;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tget fontVariant(): DFontVariant {\n\t\treturn this._fontVariant;\n\t}\n\n\tset fontVariant( fontVariant: DFontVariant ) {\n\t\tif( this._fontVariant !== fontVariant ) {\n\t\t\tthis._fontVariant = fontVariant;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tget fontWeight(): DFontWeight {\n\t\treturn this._fontWeight;\n\t}\n\n\tset fontWeight( fontWeight: DFontWeight ) {\n\t\tif( this._fontWeight !== fontWeight ) {\n\t\t\tthis._fontWeight = fontWeight;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected update(): void {\n\t\tif( this._fontIdId !== this._id ) {\n\t\t\tthis._fontIdId = this._id;\n\t\t\tthis._fontId = this.newFontId();\n\t\t}\n\t}\n\n\tprotected newFontId(): string {\n\t\treturn `${this._fontStyle} ${this._fontVariant} ${this._fontWeight} ${this._fontSize}px ${this._fontFamily}`;\n\t}\n\n\tget clipping(): boolean {\n\t\treturn this._clipping;\n\t}\n\n\tset clipping( clipping: boolean ) {\n\t\tif( this._clipping !== clipping ) {\n\t\t\tthis._clipping = clipping;\n\t\t\tthis.onChange();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Mesh, MeshMaterial, Renderer, Texture } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DDynamicTextGeometry } from \"./d-dynamic-text-geometry\";\nimport { DDynamicTextStyle, DDynamicTextStyleOptions } from \"./d-dynamic-text-style\";\nimport { DynamicFontAtlas } from \"./util/dynamic-font-atlas\";\n\nexport class DDynamicText extends Mesh {\n\tprotected _style: DDynamicTextStyle;\n\tprotected _text: string;\n\tprotected _textApproved: string;\n\tprotected _isDirty: boolean;\n\tprotected _isGeometryDirty: boolean;\n\tprotected _atlas: DynamicFontAtlas | null;\n\tprotected _atlasRevisionUpdated: number;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _clippingWidth: number | undefined;\n\tprotected _clippingWidthDelta: number;\n\n\treadonly geometry!: DDynamicTextGeometry;\n\n\tconstructor( text: string, options?: DDynamicTextStyleOptions ) {\n\t\tsuper( new DDynamicTextGeometry(), new MeshMaterial( Texture.EMPTY ) );\n\n\t\tthis._style = new DDynamicTextStyle( options, (): void => {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._isGeometryDirty = true;\n\t\t\tthis._atlas = null;\n\t\t\tthis.update_();\n\t\t});\n\t\tthis._text = text;\n\t\tthis._textApproved = \"\";\n\t\tthis._isDirty = true;\n\t\tthis._isGeometryDirty = true;\n\t\tthis._atlas = null;\n\t\tthis._atlasRevisionUpdated = 0;\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\t\tthis._clippingWidthDelta = 0;\n\t\tthis.update_();\n\t}\n\n\tprotected update_(): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst style = this._style;\n\t\t\tif( this._isDirty ) {\n\t\t\t\tthis._isDirty = false;\n\n\t\t\t\tconst text = this._text;\n\t\t\t\tconst textApproved = this._textApproved;\n\t\t\t\tthis._textApproved = text;\n\t\t\t\tconst fontId = style.fontId;\n\t\t\t\tconst fontIdApproved = style.fontIdApproved;\n\t\t\t\tconst fontSize = style.fontSize;\n\t\t\t\tconst fill = style.fill;\n\t\t\t\tconst fillApproved = style.fillApproved;\n\t\t\t\tstyle.approve();\n\n\t\t\t\tconst atlases = layer.getDynamicFontAtlases();\n\t\t\t\tif( text !== textApproved || fontId !== fontIdApproved || fill !== fillApproved ) {\n\t\t\t\t\tatlases.add( fontId, fontSize, fill, text );\n\t\t\t\t\tatlases.remove( fontIdApproved, fillApproved, textApproved );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget text(): string {\n\t\treturn this._text;\n\t}\n\n\tset text( text: string ) {\n\t\tif( this._text !== text ) {\n\t\t\tthis._text = text;\n\t\t\tthis._isDirty = true;\n\t\t\tthis._isGeometryDirty = true;\n\t\t\tthis.update_();\n\t\t}\n\t}\n\n\tget width(): number {\n\t\tthis.update();\n\t\treturn Math.abs( this.scale.x ) * this.geometry.width;\n\t}\n\n\tset width( width: number ) {\n\t\tthis.update();\n\t\tconst geometryWidth = this.geometry.width;\n\t\tif( +1e-4 < geometryWidth ) {\n\t\t\tconst newScale = width / geometryWidth;\n\t\t\tthis.scale.x = ( 0 <= this.scale.x ? +newScale : -newScale );\n\t\t}\n\t}\n\n\tget height(): number {\n\t\tthis.update();\n\t\treturn Math.abs( this.scale.y ) * this.geometry.height;\n\t}\n\n\tset height( height: number ) {\n\t\tthis.update();\n\t\tconst geometryHeight = this.geometry.height;\n\t\tif( +1e-4 < geometryHeight ) {\n\t\t\tconst newScale = height / geometryHeight;\n\t\t\tthis.scale.y = ( 0 <= this.scale.y ? +newScale : -newScale );\n\t\t}\n\t}\n\n\tget style(): DDynamicTextStyle {\n\t\treturn this._style;\n\t}\n\n\tupdate(): void {\n\t\tthis.update_();\n\n\t\tlet atlas = this._atlas;\n\t\tif( atlas == null ) {\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( layer ) {\n\t\t\t\tconst style = this._style;\n\t\t\t\tatlas = layer.getDynamicFontAtlases().get( style.fontId, style.fill );\n\t\t\t\tif( atlas != null ) {\n\t\t\t\t\tthis._atlasRevisionUpdated = atlas.getRevisionUpdate();\n\t\t\t\t\tthis._atlas = atlas;\n\t\t\t\t\tthis.texture = atlas.texture;\n\t\t\t\t\tthis._isGeometryDirty = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst revisionUpdate = atlas.getRevisionUpdate();\n\t\t\tif( revisionUpdate !== this._atlasRevisionUpdated ) {\n\t\t\t\tthis._atlasRevisionUpdated = revisionUpdate;\n\t\t\t\tthis._isGeometryDirty = true;\n\t\t\t}\n\t\t}\n\n\t\tconst clippingWidth = this._clippingWidth;\n\t\tconst newClippingWidth = this.getClippingWidth();\n\t\tif( clippingWidth !== newClippingWidth ) {\n\t\t\tthis._clippingWidth = newClippingWidth;\n\t\t\tthis._isGeometryDirty = true;\n\t\t}\n\n\t\tif( this._isGeometryDirty ) {\n\t\t\tthis._isGeometryDirty = false;\n\t\t\tthis.geometry.update( this._text, atlas, newClippingWidth );\n\t\t}\n\t}\n\n\tprotected getClippingWidth(): number | undefined {\n\t\tif( this._style.clipping ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent instanceof DBase ) {\n\t\t\t\treturn parent.width - parent.padding.getLeft() - parent.padding.getRight() - this._clippingWidthDelta;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tsetClippingWidthDelta( width: number ): void {\n\t\tthis._clippingWidthDelta = width;\n\t}\n\n\t_calculateBounds(): void {\n\t\tthis.update();\n\t\tsuper._calculateBounds();\n\t}\n\n\t_render( renderer?: Renderer ): void {\n\t\tthis.update();\n\t\t(super._render as any)( renderer );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics, Renderer } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\n\nexport class DBaseOverflowMaskSimple extends Graphics implements DReflowable {\n\tconstructor( parent: DBase ) {\n\t\tsuper();\n\t\t(this as any).parent = parent;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tthis.updateTransform();\n\t\tsuper.render( renderer );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number): void {\n\t\tthis.clear();\n\t\tthis.beginFill( 0xFFFFFF, 1 );\n\t\tthis.drawRect( 0, 0, width, height );\n\t\tthis.endFill();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics, Text } from \"pixi.js\";\nimport { DAlignHorizontal } from \"./d-align-horizontal\";\nimport { DAlignVertical } from \"./d-align-vertical\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DRefitable, DThemeBase } from \"./d-base\";\nimport { DBaseOverflowMaskSimple } from \"./d-base-overflow-mask-simple\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DDynamicText } from \"./d-dynamic-text\";\nimport { DDynamicTextStyleOptions } from \"./d-dynamic-text-style\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DTextBaseOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeTextBase = DThemeTextBase\n> extends DBaseOptions<THEME> {\n\ttext?: {\n\t\tvalue?: DStateAwareOrValueMightBe<VALUE>,\n\t\tcolor?: DStateAwareOrValueMightBe<number>,\n\t\talpha?: DStateAwareOrValueMightBe<number>,\n\t\tstyle?: DDynamicTextStyleOptions,\n\t\talign?: {\n\t\t\tvertical?: (keyof typeof DAlignVertical) | DAlignVertical,\n\t\t\thorizontal?: (keyof typeof DAlignHorizontal) | DAlignHorizontal\n\t\t},\n\t\tformatter?: ( value: VALUE, caller: any ) => string;\n\t\tdynamic?: boolean;\n\t};\n\tmask?: boolean;\n}\n\nexport interface DThemeTextBase extends DThemeBase {\n\tgetTextFormatter(): ( value: any, caller: any ) => string;\n\tnewTextValue(): any;\n\tgetTextValue( state: DBaseState ): any;\n\tgetTextAlignVertical(): DAlignVertical;\n\tgetTextAlignHorizontal(): DAlignHorizontal;\n\tgetTextStyleClipping(): boolean;\n\tisOverflowMaskEnabled(): boolean;\n\tisTextDynamic(): boolean;\n}\n\n// Option parser\nconst isOverflowMaskEnabled = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase, options?: DTextBaseOptions<VALUE, THEME>\n) => {\n\tif( options && options.mask != null ) {\n\t\treturn options.mask;\n\t}\n\treturn theme.isOverflowMaskEnabled();\n};\n\nconst toTextValue = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase,\n\toptions: DTextBaseOptions<VALUE, THEME> | undefined\n): DStateAwareOrValueMightBe<VALUE> => {\n\tif( options && options.text && options.text.value !== undefined ) {\n\t\treturn options.text.value;\n\t}\n\treturn theme.newTextValue();\n};\n\nconst toTextStyle = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase, options: DTextBaseOptions<VALUE, THEME> | undefined, state: DBaseState\n): DDynamicTextStyleOptions => {\n\tif( options && options.text && options.text.style != null ) {\n\t\tconst style = options.text.style;\n\t\tconst fill = style.fill != null ? style.fill : theme.getColor( state );\n\t\tconst fontSize = style.fontSize != null ? style.fontSize : theme.getFontSize();\n\t\tconst fontFamily = style.fontFamily != null ? style.fontFamily : theme.getFontFamilly();\n\t\tconst fontWeight = style.fontWeight != null ? style.fontWeight : theme.getFontWeight();\n\t\tconst fontStyle = style.fontStyle != null ? style.fontStyle : theme.getFontStyle();\n\t\tconst fontVariant = style.fontVariant != null ? style.fontVariant : theme.getFontVariant();\n\t\tconst clipping = style.clipping != null ? style.clipping : theme.getTextStyleClipping();\n\t\treturn {\n\t\t\tfill,\n\t\t\tfontSize,\n\t\t\tfontFamily,\n\t\t\tfontWeight,\n\t\t\tfontStyle,\n\t\t\tfontVariant,\n\t\t\tclipping\n\t\t};\n\t}\n\n\treturn {\n\t\tfill: theme.getColor( state ),\n\t\tfontSize: theme.getFontSize(),\n\t\tfontFamily: theme.getFontFamilly(),\n\t\tfontWeight: theme.getFontWeight(),\n\t\tfontStyle: theme.getFontStyle(),\n\t\tfontVariant: theme.getFontVariant(),\n\t\tclipping: theme.getTextStyleClipping()\n\t};\n};\n\nconst toTextAlign = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase, options?: DTextBaseOptions<VALUE, THEME>\n): { vertical: DAlignVertical, horizontal: DAlignHorizontal } => {\n\tif( options && options.text && options.text.align ) {\n\t\tconst align = options.text.align;\n\t\tconst vertical = ( align.vertical != null ?\n\t\t\t( utilIsString( align.vertical ) ? DAlignVertical[ align.vertical ] : align.vertical ) :\n\t\t\ttheme.getTextAlignVertical()\n\t\t);\n\t\tconst horizontal = ( align.horizontal != null ?\n\t\t\t( utilIsString( align.horizontal ) ? DAlignHorizontal[ align.horizontal ] : align.horizontal ) :\n\t\t\ttheme.getTextAlignHorizontal()\n\t\t);\n\t\treturn {\n\t\t\tvertical,\n\t\t\thorizontal\n\t\t};\n\t}\n\treturn {\n\t\tvertical: theme.getTextAlignVertical(),\n\t\thorizontal: theme.getTextAlignHorizontal()\n\t};\n};\n\nconst toTextFormatter = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase,\n\toptions: DTextBaseOptions<VALUE, THEME> | undefined\n): ( value: VALUE, caller: any ) => string => {\n\tif( options && options.text && options.text.formatter ) {\n\t\treturn options.text.formatter;\n\t}\n\treturn theme.getTextFormatter();\n};\n\nconst toTextDynamic = <VALUE, THEME extends DThemeTextBase>(\n\ttheme: DThemeTextBase, options?: DTextBaseOptions<VALUE, THEME>\n): boolean => {\n\tif( options && options.text && options.text.dynamic != null ) {\n\t\treturn options.text.dynamic;\n\t}\n\treturn theme.isTextDynamic();\n};\n\nexport class DTextBase<\n\tVALUE = unknown,\n\tTHEME extends DThemeTextBase = DThemeTextBase,\n\tOPTIONS extends DTextBaseOptions<VALUE, THEME> = DTextBaseOptions<VALUE, THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _text!: DDynamicText | Text | null;\n\tprotected _textValue!: DStateAwareOrValueMightBe<VALUE>;\n\tprotected _textValueComputed!: VALUE;\n\tprotected _textColor!: DStateAwareOrValueMightBe<number>;\n\tprotected _textAlpha!: DStateAwareOrValueMightBe<number>;\n\tprotected _textStyle!: DDynamicTextStyleOptions;\n\tprotected _textAlign!: {\n\t\tvertical: DAlignVertical,\n\t\thorizontal: DAlignHorizontal\n\t};\n\tprotected _textFormatter!: ( value: VALUE, caller: any ) => string;\n\tprotected _isOverflowMaskEnabled!: boolean;\n\tprotected _overflowMask!: DBaseOverflowMaskSimple | null;\n\tprotected _textDynamic!: boolean;\n\n\tprotected init( options?: OPTIONS ): void {\n\t\tsuper.init( options );\n\n\t\tthis._text = null;\n\t\tconst theme = this.theme;\n\t\tthis._textValue = toTextValue( theme, options );\n\t\tthis._textValueComputed = this.computeTextValue();\n\t\tthis._textColor = ( options && options.text && options.text.color );\n\t\tthis._textAlpha = ( options && options.text && options.text.alpha );\n\t\tthis._textStyle = toTextStyle( theme, options, this.state );\n\t\tthis._textAlign = toTextAlign( theme, options );\n\t\tthis._textFormatter = toTextFormatter( theme, options );\n\t\tthis._textDynamic = toTextDynamic( theme, options );\n\t\tthis._isOverflowMaskEnabled = isOverflowMaskEnabled( theme, options );\n\t\tthis._overflowMask = null;\n\t\tthis.onTextChange();\n\t\tthis.createOrUpdateText();\n\t}\n\n\tset text( text: DStateAwareOrValueMightBe<VALUE> ) {\n\t\tif( this._textValue !== text ) {\n\t\t\tthis._textValue = text;\n\t\t\tthis.updateTextValue();\n\t\t}\n\t}\n\n\tget text(): DStateAwareOrValueMightBe<VALUE> {\n\t\treturn this._textValue;\n\t}\n\n\tprotected onTextChange() {\n\t\t// DO NOTHING\n\t}\n\n\tprotected computeTextValue(): VALUE {\n\t\tconst textValue = this._textValue;\n\t\tif( textValue !== undefined ) {\n\t\t\tif( utilIsFunction( textValue ) ) {\n\t\t\t\tconst result = textValue( this.state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn textValue;\n\t\t\t}\n\t\t}\n\t\treturn this.theme.getTextValue( this.state ) as VALUE;\n\t}\n\n\tprotected createOrUpdateText(): void {\n\t\tconst formatted = this._textFormatter( this._textValueComputed, this );\n\t\tif( this._text == null ) {\n\t\t\tif( 0 < formatted.length ) {\n\t\t\t\tconst text = this.createText( formatted );\n\t\t\t\tthis._text = text;\n\t\t\t\tthis.addChild( text );\n\t\t\t\tthis.updateTextPosition( text );\n\t\t\t\tif( this._isOverflowMaskEnabled ) {\n\t\t\t\t\ttext.mask = this.getOrCreateOverflowMask();\n\t\t\t\t}\n\t\t\t\tthis.toDirty();\n\t\t\t\tDApplications.update( this );\n\t\t\t}\n\t\t} else {\n\t\t\tthis._text.text = formatted;\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\tprotected createText( formatted: string ): Text | DDynamicText {\n\t\treturn ( this._textDynamic ?\n\t\t\tnew DDynamicText( formatted, this._textStyle ) :\n\t\t\tnew Text( formatted, this._textStyle )\n\t\t);\n\t}\n\n\tprotected getOrCreateOverflowMask(): Graphics {\n\t\tif( this._overflowMask == null ) {\n\t\t\tthis._overflowMask = new DBaseOverflowMaskSimple( this );\n\t\t\tthis.addReflowable( this._overflowMask );\n\t\t\tthis.toDirty();\n\t\t}\n\t\treturn this._overflowMask;\n\t}\n\n\tprotected updateTextPosition( text: DDynamicText | Text ): void {\n\t\tconst align = this._textAlign;\n\t\tconst padding = this._padding;\n\n\t\tswitch( align.horizontal ) {\n\t\tcase DAlignHorizontal.LEFT:\n\t\t\ttext.x = this.toRounded( padding.getLeft() );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.CENTER:\n\t\t\ttext.x = this.toRounded( ( this.width - text.width ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.RIGHT:\n\t\t\ttext.x = this.toRounded( this.width - text.width - padding.getRight() );\n\t\t\tbreak;\n\t\t}\n\n\t\tswitch( align.vertical ) {\n\t\tcase DAlignVertical.TOP:\n\t\t\ttext.y = this.toRounded( padding.getTop() );\n\t\t\tbreak;\n\t\tcase DAlignVertical.MIDDLE:\n\t\t\ttext.y = this.toRounded( ( this.height - text.height ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignVertical.BOTTOM:\n\t\t\ttext.y = this.toRounded( this.height - text.height - padding.getBottom() );\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected toRounded( value: number ): number {\n\t\treturn Math.round( value );\n\t}\n\n\tprotected getTextColor( theme: THEME, state: DBaseState ): number {\n\t\tconst color = this._textColor;\n\t\tif( color !== undefined ) {\n\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\tconst result = color( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn theme.getColor( state );\n\t}\n\n\tprotected getTextAlpha( theme: THEME, state: DBaseState ): number {\n\t\tconst alpha = this._textAlpha;\n\t\tif( alpha !== undefined ) {\n\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\tconst result = alpha( state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn alpha;\n\t\t\t}\n\t\t}\n\t\treturn theme.getAlpha( state );\n\t}\n\n\tprotected updateTextColor( text: DDynamicText | Text ): void {\n\t\tconst theme = this.theme;\n\t\tconst state = this.state;\n\t\ttext.style.fill = this.getTextColor( theme, state );\n\t\ttext.alpha = this.getTextAlpha( theme, state );\n\t}\n\n\tprotected updateTextValue(): void {\n\t\tconst newTextValueComputed = this.computeTextValue();\n\t\tif( this._textValueComputed !== newTextValueComputed ) {\n\t\t\tthis._textValueComputed = newTextValueComputed;\n\t\t\tthis.onTextChange();\n\t\t\tthis.createOrUpdateText();\n\t\t}\n\t}\n\n\tprotected updateText(): void {\n\t\tconst text = this._text;\n\t\tif( text != null ) {\n\t\t\tthis.updateTextValue();\n\t\t\tthis.updateTextPosition( text );\n\t\t\tthis.updateTextColor( text );\n\t\t}\n\t}\n\n\tprotected onReflow(): void {\n\t\tsuper.onReflow();\n\t\tthis.updateText();\n\t}\n\n\tprotected isRefitable( target: any ): target is DRefitable {\n\t\treturn super.isRefitable( target ) ||\n\t\t\t(target != null && target === this._text);\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTextBase\";\n\t}\n\n\tdestroy(): void {\n\t\t// Text\n\t\tconst text = this._text;\n\t\tif( text != null ) {\n\t\t\tthis._text = null;\n\t\t\ttext.destroy();\n\t\t}\n\n\t\t// Overflow mask\n\t\tconst overflowMask = this._overflowMask;\n\t\tif( overflowMask != null ) {\n\t\t\tthis._overflowMask = null;\n\t\t\toverflowMask.destroy();\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Point, Rectangle, Sprite, Text, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"./d-align-horizontal\";\nimport { DAlignVertical } from \"./d-align-vertical\";\nimport { DAlignWith } from \"./d-align-with\";\nimport { DApplications } from \"./d-applications\";\nimport { DRefitable } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DDynamicText } from \"./d-dynamic-text\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { DTextBase, DTextBaseOptions, DThemeTextBase } from \"./d-text-base\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\ninterface DImageBaseTintOptions {\n\tcolor?: DStateAwareOrValueMightBe<number | null>;\n\talpha?: DStateAwareOrValueMightBe<number>;\n}\n\nexport interface DImageBaseOptions<\n\tVALUE,\n\tTHEME extends DThemeImageBase = DThemeImageBase\n> extends DTextBaseOptions<VALUE, THEME> {\n\timage?: {\n\t\tsource?: DStateAwareOrValueMightBe<Texture | DisplayObject | null>;\n\t\ttint?: DImageBaseTintOptions,\n\t\talign?: {\n\t\t\twith?: (keyof typeof DAlignWith) | DAlignWith,\n\t\t\tvertical?: (keyof typeof DAlignVertical) | DAlignVertical,\n\t\t\thorizontal?: (keyof typeof DAlignHorizontal) | DAlignHorizontal\n\t\t};\n\t\tmargin?: {\n\t\t\tvertical?: number,\n\t\t\thorizontal?: number\n\t\t};\n\t};\n}\n\nexport interface DThemeImageBase extends DThemeTextBase {\n\tgetImageAlignHorizontal(): DAlignHorizontal;\n\tgetImageAlignVertical(): DAlignVertical;\n\tgetImageAlignWith(): DAlignWith;\n\tgetImageMarginHorizontal(): number;\n\tgetImageMarginVertial(): number;\n\tgetImageTintColor( state: DBaseState ): number | null;\n\tgetImageTintAlpha( state: DBaseState ): number;\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null;\n}\n\n// Option parser\nconst toImageAlign = <VALUE, THEME extends DThemeImageBase>(\n\ttheme: DThemeImageBase, options?: DImageBaseOptions<VALUE, THEME>\n) => {\n\tif( options != null && options.image != null && options.image.align != null ) {\n\t\tconst align = options.image.align;\n\t\tconst alignWith: DAlignWith = ( align.with != null ?\n\t\t\t( utilIsString( align.with ) ? DAlignWith[ align.with ] : align.with ) :\n\t\t\ttheme.getImageAlignWith()\n\t\t);\n\t\tconst alignVertical: DAlignVertical = ( align.vertical != null ?\n\t\t\t( utilIsString( align.vertical ) ? DAlignVertical[ align.vertical ] : align.vertical ) :\n\t\t\ttheme.getImageAlignVertical()\n\t\t);\n\t\tconst alignHorizontal: DAlignHorizontal = ( align.horizontal != null ?\n\t\t\t( utilIsString( align.horizontal ) ? DAlignHorizontal[ align.horizontal ] : align.horizontal ) :\n\t\t\ttheme.getImageAlignHorizontal()\n\t\t);\n\t\treturn {\n\t\t\twith: alignWith,\n\t\t\tvertical: alignVertical,\n\t\t\thorizontal: alignHorizontal\n\t\t};\n\t}\n\treturn {\n\t\twith: theme.getImageAlignWith(),\n\t\tvertical: theme.getImageAlignVertical(),\n\t\thorizontal: theme.getImageAlignHorizontal()\n\t};\n};\n\nconst toImageMargin = <VALUE, THEME extends DThemeImageBase>(\n\ttheme: DThemeImageBase, options?: DImageBaseOptions<VALUE, THEME>\n) => {\n\tif( options != null && options.image != null && options.image.margin != null ) {\n\t\tconst margin = options.image.margin;\n\t\tconst vertical = ( margin.vertical != null ? margin.vertical : theme.getImageMarginVertial() );\n\t\tconst horizontal = ( margin.horizontal != null ? margin.horizontal : theme.getImageMarginHorizontal() );\n\t\treturn {\n\t\t\tvertical,\n\t\t\thorizontal\n\t\t};\n\t}\n\treturn {\n\t\tvertical: theme.getImageMarginVertial(),\n\t\thorizontal: theme.getImageMarginHorizontal()\n\t};\n};\n\nconst toImageTint = <VALUE, THEME extends DThemeImageBase>(\n\ttheme: DThemeImageBase, options?: DImageBaseOptions<VALUE, THEME>\n): DImageBaseTintOptions | undefined => {\n\tif( options != null && options.image != null && options.image.tint != null ) {\n\t\treturn options.image.tint;\n\t}\n\treturn undefined;\n};\n\nexport class DImageBase<\n\tVALUE = unknown,\n\tTHEME extends DThemeImageBase = DThemeImageBase,\n\tOPTIONS extends DImageBaseOptions<VALUE, THEME> = DImageBaseOptions<VALUE, THEME>\n> extends DTextBase<VALUE, THEME, OPTIONS> {\n\tprotected _image!: DisplayObject | null;\n\tprotected _imageSourceComputed!: Texture | DisplayObject | null;\n\tprotected _imageSource!: DStateAwareOrValueMightBe<Texture | DisplayObject | null>;\n\tprotected _imageAlign!: {\n\t\twith: DAlignWith,\n\t\tvertical: DAlignVertical,\n\t\thorizontal: DAlignHorizontal\n\t};\n\tprotected _imageMargin!: {\n\t\tvertical: number,\n\t\thorizontal: number\n\t};\n\tprotected _imageTint!: DImageBaseTintOptions | undefined;\n\tprotected _imageBound!: Rectangle;\n\tprotected _imageBoundPoint!: Point;\n\tprotected _onImageChangeBound!: () => void;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._image = null;\n\t\tconst theme = this.theme;\n\t\tthis._imageAlign = toImageAlign( theme, options );\n\t\tthis._imageMargin = toImageMargin( theme, options );\n\t\tthis._imageTint = toImageTint( theme, options );\n\t\tthis._imageBound = new Rectangle();\n\t\tthis._imageBoundPoint = new Point();\n\t\tthis._imageSource = ( options && options.image && options.image.source );\n\t\tthis._imageSourceComputed = null;\n\t\tthis._onImageChangeBound = () => {\n\t\t\tthis.onImageChange();\n\t\t};\n\t}\n\n\tget image(): DStateAwareOrValueMightBe<Texture | DisplayObject | null> {\n\t\treturn this._imageSource;\n\t}\n\n\tset image( imageSource: DStateAwareOrValueMightBe<Texture | DisplayObject | null> ) {\n\t\tif( this._imageSource !== imageSource ) {\n\t\t\tthis._imageSource = imageSource;\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\tprotected computeImageSource(): Texture | DisplayObject | null {\n\t\tconst imageSource = this._imageSource;\n\t\tif( imageSource !== undefined ) {\n\t\t\tif( utilIsFunction( imageSource ) ) {\n\t\t\t\tconst result = imageSource( this.state );\n\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn imageSource;\n\t\t\t}\n\t\t}\n\t\treturn this.theme.getImageSource( this.state );\n\t}\n\n\tprotected onImageChange(): void {\n\t\tthis.toDirty();\n\t\tDApplications.update( this );\n\t}\n\n\tprotected onStateChange( newState: DBaseState, oldState: DBaseState ): void {\n\t\tsuper.onStateChange( newState, oldState );\n\n\t\tconst image = this._image;\n\t\tif( image != null ) {\n\t\t\tthis.updateImageTint( image );\n\t\t}\n\t}\n\n\tprotected getImageRect( image: DisplayObject ): Rectangle {\n\t\timage.updateTransform();\n\t\tconst bounds = image.getLocalBounds( this._imageBound );\n\t\tconst point = this._imageBoundPoint;\n\t\tpoint.set( bounds.left, bounds.top );\n\t\timage.localTransform.apply( point, point );\n\t\tconst x0 = point.x;\n\t\tconst y0 = point.y;\n\t\tpoint.set( bounds.right, bounds.top );\n\t\timage.localTransform.apply( point, point );\n\t\tconst x1 = point.x;\n\t\tconst y1 = point.y;\n\t\tpoint.set( bounds.right, bounds.bottom );\n\t\timage.localTransform.apply( point, point );\n\t\tconst x2 = point.x;\n\t\tconst y2 = point.y;\n\t\tpoint.set( bounds.left, bounds.bottom );\n\t\timage.localTransform.apply( point, point );\n\t\tconst x3 = point.x;\n\t\tconst y3 = point.y;\n\t\tbounds.x = Math.min( x0, x1, x2, x3 );\n\t\tbounds.y = Math.min( y0, y1, y2, y3 );\n\t\tbounds.width = Math.max( x0, x1, x2, x3 ) - bounds.x;\n\t\tbounds.height = Math.max( y0, y1, y2, y3 ) - bounds.y;\n\t\treturn bounds;\n\t}\n\n\tprotected updateTextAndImagePosition( text: DDynamicText | Text, image: DisplayObject ): void {\n\t\tconst bounds = this.getImageRect( image );\n\t\tconst imageWidth = bounds.width;\n\t\tconst imageHeight = bounds.height;\n\n\t\tconst textAlign = this._textAlign;\n\t\tconst imageAlign = this._imageAlign;\n\t\tconst margin = this._imageMargin;\n\t\tconst padding = this._padding;\n\n\t\tconst marginHorizontal = margin.horizontal;\n\t\tconst imageWaMH = imageWidth + marginHorizontal;\n\t\tswitch( imageAlign.horizontal ) {\n\t\tcase DAlignHorizontal.LEFT:\n\t\t\tswitch( textAlign.horizontal ) {\n\t\t\tcase DAlignHorizontal.LEFT:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( imageWaMH );\n\t\t\t\t}\n\t\t\t\timage.x = this.toRounded( padding.getLeft() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.CENTER:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( imageWaMH );\n\t\t\t\t}\n\t\t\t\timage.x = this.toRounded( ( this.width - text.width - imageWaMH ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.RIGHT:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t}\n\t\t\t\timage.x = this.toRounded( this.width - text.width - padding.getRight() - imageWaMH );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ttext.x = this.toRounded( image.x + imageWaMH );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.CENTER:\n\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t}\n\t\t\tswitch( textAlign.horizontal ) {\n\t\t\tcase DAlignHorizontal.LEFT:\n\t\t\t\ttext.x = this.toRounded( padding.getLeft() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.CENTER:\n\t\t\t\ttext.x = this.toRounded( ( this.width - text.width ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.RIGHT:\n\t\t\t\ttext.x = this.toRounded( this.width - text.width - padding.getRight() );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\timage.x = this.toRounded( text.x + ( text.width - imageWidth ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.RIGHT:\n\t\t\tswitch( textAlign.horizontal ) {\n\t\t\tcase DAlignHorizontal.LEFT:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t}\n\t\t\t\ttext.x = this.toRounded( padding.getLeft() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.CENTER:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( imageWaMH );\n\t\t\t\t}\n\t\t\t\ttext.x = this.toRounded( ( this.width - text.width - imageWaMH ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignHorizontal.RIGHT:\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( imageWaMH );\n\t\t\t\t}\n\t\t\t\ttext.x = this.toRounded( this.width - text.width - padding.getRight() - imageWaMH );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\timage.x = this.toRounded( text.x + text.width + marginHorizontal );\n\t\t\tbreak;\n\t\t}\n\n\t\tconst marginVertical = margin.vertical;\n\t\tconst imageHaMV = imageWidth + marginHorizontal;\n\t\tswitch( imageAlign.vertical ) {\n\t\tcase DAlignVertical.TOP:\n\t\t\tswitch( textAlign.vertical ) {\n\t\t\tcase DAlignVertical.TOP:\n\t\t\t\timage.y = this.toRounded( padding.getTop() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.MIDDLE:\n\t\t\t\timage.y = this.toRounded( ( this.height - text.height - imageHaMV ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.BOTTOM:\n\t\t\t\timage.y = this.toRounded( this.height - text.height - padding.getBottom() - imageHaMV );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ttext.y = this.toRounded( image.y + imageHaMV );\n\t\t\tbreak;\n\t\tcase DAlignVertical.MIDDLE:\n\t\t\tswitch( textAlign.vertical ) {\n\t\t\tcase DAlignVertical.TOP:\n\t\t\t\ttext.y = this.toRounded( padding.getTop() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.MIDDLE:\n\t\t\t\ttext.y = this.toRounded( ( this.height - text.height ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.BOTTOM:\n\t\t\t\ttext.y = this.toRounded( this.height - text.height - padding.getBottom() );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\timage.y = this.toRounded( text.y + ( text.height - imageHeight ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignVertical.BOTTOM:\n\t\t\tswitch( textAlign.vertical ) {\n\t\t\tcase DAlignVertical.TOP:\n\t\t\t\ttext.y = this.toRounded( padding.getTop() );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.MIDDLE:\n\t\t\t\ttext.y = this.toRounded( ( this.height - text.height - imageHaMV ) * 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase DAlignVertical.BOTTOM:\n\t\t\t\ttext.y = this.toRounded( this.height - text.height - padding.getBottom() - imageHaMV );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\timage.y = this.toRounded( text.y + text.height + marginVertical );\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected updateImagePositionText( image: DisplayObject ): void {\n\t\tconst bounds = this.getImageRect( image );\n\t\timage.x = this.toRounded( ( this.width - bounds.width ) * 0.5 );\n\t\timage.y = this.toRounded( ( this.height - bounds.height ) * 0.5 );\n\t}\n\n\tprotected updateImagePositionPadding( image: DisplayObject ): void {\n\t\tconst margin = this._imageMargin;\n\t\tconst align = this._imageAlign;\n\t\tconst padding = this._padding;\n\t\tconst bounds = this.getImageRect( image );\n\t\tconst imageWidth = bounds.width;\n\t\tconst imageHeight = bounds.height;\n\n\t\tconst marginHorizontal = margin.horizontal;\n\t\tswitch( align.horizontal ) {\n\t\tcase DAlignHorizontal.LEFT:\n\t\t\timage.x = this.toRounded( padding.getLeft() + marginHorizontal );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.CENTER:\n\t\t\timage.x = this.toRounded( ( this.width - imageWidth ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.RIGHT:\n\t\t\timage.x = this.toRounded( this.width - padding.getRight() - marginHorizontal - imageWidth );\n\t\t\tbreak;\n\t\t}\n\n\t\tconst marginVertical = margin.vertical;\n\t\tswitch( align.vertical ) {\n\t\tcase DAlignVertical.TOP:\n\t\t\timage.y = this.toRounded( padding.getTop() + marginVertical );\n\t\t\tbreak;\n\t\tcase DAlignVertical.MIDDLE:\n\t\t\timage.y = this.toRounded( ( this.height - imageHeight ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignVertical.BOTTOM:\n\t\t\timage.y = this.toRounded( this.height - padding.getBottom() - marginVertical );\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected updateImagePositionBorder( image: DisplayObject ): void {\n\t\tconst margin = this._imageMargin;\n\t\tconst align = this._imageAlign;\n\t\tconst bounds = this.getImageRect( image );\n\t\tconst imageWidth = bounds.width;\n\t\tconst imageHeight = bounds.height;\n\n\t\tconst marginHorizontal = margin.horizontal;\n\t\tswitch( align.horizontal ) {\n\t\tcase DAlignHorizontal.LEFT:\n\t\t\timage.x = this.toRounded( marginHorizontal );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.CENTER:\n\t\t\timage.x = this.toRounded( ( this.width - imageWidth ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignHorizontal.RIGHT:\n\t\t\timage.x = this.toRounded( this.width - marginHorizontal - imageWidth );\n\t\t\tbreak;\n\t\t}\n\n\t\tconst marginVertical = margin.vertical;\n\t\tswitch( align.vertical ) {\n\t\tcase DAlignVertical.TOP:\n\t\t\timage.y = this.toRounded( marginVertical );\n\t\t\tbreak;\n\t\tcase DAlignVertical.MIDDLE:\n\t\t\timage.y = this.toRounded( ( this.height - imageHeight ) * 0.5 );\n\t\t\tbreak;\n\t\tcase DAlignVertical.BOTTOM:\n\t\t\timage.y = this.toRounded( this.height - marginVertical );\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected getImageTintColor( theme: THEME, state: DBaseState ): number | null {\n\t\tconst imageTint = this._imageTint;\n\t\tif( imageTint != null ) {\n\t\t\tconst color = imageTint.color;\n\t\t\tif( color !== undefined ) {\n\t\t\t\tif( utilIsFunction( color ) ) {\n\t\t\t\t\tconst result = color( state );\n\t\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theme.getImageTintColor( state );\n\t}\n\n\tprotected getImageTintAlpha( theme: THEME, state: DBaseState ): number {\n\t\tconst imageTint = this._imageTint;\n\t\tif( imageTint != null ) {\n\t\t\tconst alpha = imageTint.alpha;\n\t\t\tif( alpha !== undefined ) {\n\t\t\t\tif( utilIsFunction( alpha ) ) {\n\t\t\t\t\tconst result = alpha( state );\n\t\t\t\t\tif( result !== undefined ) {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn alpha;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theme.getImageTintAlpha( state );\n\t}\n\n\tprotected updateImageTint( image: DisplayObject ): void {\n\t\tif( this.isTintAware( image ) ) {\n\t\t\tconst theme = this.theme;\n\t\t\tconst state = this.state;\n\t\t\tconst color = this.getImageTintColor( theme, state );\n\t\t\tif( color != null ) {\n\t\t\t\tif( image.tint !== color ) {\n\t\t\t\t\timage.tint = color;\n\t\t\t\t}\n\t\t\t\tconst alpha = this.getImageTintAlpha( theme, state );\n\t\t\t\tif( image.alpha !== alpha ) {\n\t\t\t\t\timage.alpha = alpha;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected isTintAware( target: DisplayObject | null ): target is DisplayObject & { tint: number } {\n\t\treturn ( target != null && \"tint\" in target );\n\t}\n\n\tprotected updateImageSource(): void {\n\t\tconst newImageSourceComputed = this.computeImageSource();\n\t\tconst oldImageSourceComputed = this._imageSourceComputed;\n\t\tif( newImageSourceComputed !== oldImageSourceComputed ) {\n\t\t\tthis._imageSourceComputed = newImageSourceComputed;\n\n\t\t\tconst oldImage = this._image;\n\t\t\tif( newImageSourceComputed instanceof Texture ) {\n\t\t\t\tif( oldImageSourceComputed instanceof Texture ) {\n\t\t\t\t\toldImageSourceComputed.off( \"update\", this._onImageChangeBound );\n\t\t\t\t\tif( oldImage instanceof Sprite ) {\n\t\t\t\t\t\toldImage.texture = newImageSourceComputed;\n\t\t\t\t\t\tnewImageSourceComputed.on( \"update\", this._onImageChangeBound );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif( oldImage != null ) {\n\t\t\t\t\t\tthis.removeChild( oldImage );\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newImage = new Sprite( newImageSourceComputed );\n\t\t\t\t\tif( this._isOverflowMaskEnabled ) {\n\t\t\t\t\t\tnewImage.mask = this.getOrCreateOverflowMask();\n\t\t\t\t\t}\n\t\t\t\t\tnewImageSourceComputed.on( \"update\", this._onImageChangeBound );\n\t\t\t\t\tthis.addChild( newImage );\n\t\t\t\t\tthis._image = newImage;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( oldImageSourceComputed instanceof Texture ) {\n\t\t\t\t\toldImageSourceComputed.off( \"update\", this._onImageChangeBound );\n\t\t\t\t\tif( oldImage != null ) {\n\t\t\t\t\t\tthis.removeChild( oldImage );\n\t\t\t\t\t\toldImage.destroy();\n\t\t\t\t\t}\n\t\t\t\t} else if( oldImage != null ) {\n\t\t\t\t\tthis.removeChild( oldImage );\n\t\t\t\t}\n\n\t\t\t\tif( newImageSourceComputed != null ) {\n\t\t\t\t\tif( this._isOverflowMaskEnabled ) {\n\t\t\t\t\t\tnewImageSourceComputed.mask = this.getOrCreateOverflowMask();\n\t\t\t\t\t}\n\t\t\t\t\tthis.addChild( newImageSourceComputed );\n\t\t\t\t}\n\t\t\t\tthis._image = newImageSourceComputed;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateText(): void {\n\t\tthis.updateTextValue();\n\t\tthis.updateImageSource();\n\n\t\tconst text = this._text;\n\t\tconst image = this._image;\n\t\tif( text != null ) {\n\t\t\tif( image != null ) {\n\t\t\t\tconst align = this._imageAlign;\n\t\t\t\tswitch( align.with ) {\n\t\t\t\tcase DAlignWith.TEXT:\n\t\t\t\t\tthis.updateTextAndImagePosition( text, image );\n\t\t\t\t\tbreak;\n\t\t\t\tcase DAlignWith.PADDING:\n\t\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateTextPosition( text );\n\t\t\t\t\tthis.updateImagePositionPadding( image );\n\t\t\t\t\tbreak;\n\t\t\t\tcase DAlignWith.BORDER:\n\t\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateTextPosition( text );\n\t\t\t\t\tthis.updateImagePositionBorder( image );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.updateTextColor( text );\n\t\t\t\tthis.updateImageTint( image );\n\t\t\t} else {\n\t\t\t\tif( text instanceof DDynamicText ) {\n\t\t\t\t\ttext.setClippingWidthDelta( 0 );\n\t\t\t\t}\n\t\t\t\tthis.updateTextPosition( text );\n\t\t\t\tthis.updateTextColor( text );\n\t\t\t}\n\t\t} else if( image != null ) {\n\t\t\tconst align = this._imageAlign;\n\t\t\tswitch( align.with ) {\n\t\t\tcase DAlignWith.TEXT:\n\t\t\t\tthis.updateImagePositionText( image );\n\t\t\t\tbreak;\n\t\t\tcase DAlignWith.PADDING:\n\t\t\t\tthis.updateImagePositionPadding( image );\n\t\t\t\tbreak;\n\t\t\tcase DAlignWith.BORDER:\n\t\t\t\tthis.updateImagePositionBorder( image );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.updateImageTint( image );\n\t\t}\n\t}\n\n\tprotected isRefitable( target: any ): target is DRefitable {\n\t\treturn super.isRefitable( target ) ||\n\t\t\t(target != null && target === this._image);\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DImageBase\";\n\t}\n\n\tdestroy(): void {\n\t\t// Image\n\t\tconst image = this._image;\n\t\tif( image != null ) {\n\t\t\tthis._image = null;\n\t\t\tconst imageSourceComputed = this._imageSourceComputed;\n\t\t\tif( imageSourceComputed instanceof Texture ) {\n\t\t\t\timageSourceComputed.off( \"update\", this._onImageChangeBound, this );\n\t\t\t\timage.destroy();\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\n\nexport interface DImageOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeImage = DThemeImage\n> extends DImageBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeImage extends DThemeImageBase {\n\n}\n\nexport class DImage<\n\tVALUE = unknown,\n\tTHEME extends DThemeImage = DThemeImage,\n\tOPTIONS extends DImageOptions<VALUE, THEME> = DImageOptions<VALUE, THEME>\n> extends DImageBase<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DImage\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DImage, DImageOptions, DThemeImage } from \"./d-image\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport interface DListItemOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeListItem = DThemeListItem\n> extends DImageOptions<string, THEME> {\n\tvalue?: VALUE;\n}\n\nexport interface DThemeListItem extends DThemeImage {\n\tgetTextValue( state: DBaseState ): string;\n\tnewTextValue(): DStateAwareOrValueMightBe<string>;\n}\n\n// Option parser\nconst toValue = <VALUE, THEME extends DThemeListItem>( options?: DListItemOptions<VALUE, THEME> ): VALUE | null => {\n\treturn ( options != null && options.value != null ?\n\t\toptions.value : null );\n};\n\nexport interface DListItemSelection {\n\tadd( item: DBase ): void;\n}\n\nexport class DListItem<\n\tVALUE = unknown,\n\tTHEME extends DThemeListItem = DThemeListItem,\n\tOPTIONS extends DListItemOptions<VALUE, THEME> = DListItemOptions<VALUE, THEME>\n> extends DImage<string, THEME, OPTIONS> {\n\tprotected _value!: VALUE | null;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.buttonMode = true;\n\t\tthis._value = toValue( options );\n\t}\n\n\tget value(): VALUE | null {\n\t\treturn this._value;\n\t}\n\n\tset value( value: VALUE | null ) {\n\t\tthis._value = value;\n\t}\n\n\tprotected hasSelection( target: any ): target is { selection: DListItemSelection } {\n\t\treturn ( target && target.selection && target.selection.add );\n\t}\n\n\tprotected getSelection(): DListItemSelection | null {\n\t\tlet parent = this.parent as any;\n\t\twhile( parent ) {\n\t\t\tif( this.hasSelection( parent ) ) {\n\t\t\t\treturn parent.selection;\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tconst selection = this.getSelection();\n\t\tif( selection ) {\n\t\t\tselection.add( this );\n\t\t}\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( this.isActionable() && this.isFocused() && UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onSelect( e );\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected onStateChange( newState: number, oldState: number ) {\n\t\tsuper.onStateChange( newState, oldState );\n\t\tthis.buttonMode = DBaseStates.isActionable( newState );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DListItem\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DListItem, DListItemOptions, DThemeListItem } from \"./d-list-item\";\nimport { Closeable, DMenuContext } from \"./d-menu-context\";\n\nexport interface DMenuItemOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItem = DThemeMenuItem\n> extends DListItemOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeMenuItem extends DThemeListItem {\n\n}\n\nexport class DMenuItem<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItem = DThemeMenuItem,\n\tOPTIONS extends DMenuItemOptions<VALUE, THEME> = DMenuItemOptions<VALUE, THEME>\n> extends DListItem<VALUE, THEME, OPTIONS> {\n\tgetContext(): DMenuContext | null {\n\t\tlet parent = this.parent as any;\n\t\twhile( parent ) {\n\t\t\tif( parent.getContext ) {\n\t\t\t\treturn parent.getContext();\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetCloseable(): Closeable | null {\n\t\tlet parent = this.parent as any;\n\t\twhile( parent ) {\n\t\t\tif( parent.getCloseable ) {\n\t\t\t\treturn parent.getCloseable();\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItem\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Text } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DDynamicText } from \"./d-dynamic-text\";\nimport { DMenuItem, DMenuItemOptions, DThemeMenuItem } from \"./d-menu-item\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DMenuItemTextOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText\n> extends DMenuItemOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeMenuItemText extends DThemeMenuItem {\n\tgetShortcutTextMargin(): number;\n}\n\nexport class DMenuItemText<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText,\n\tOPTIONS extends DMenuItemTextOptions<VALUE, THEME> = DMenuItemTextOptions<VALUE, THEME>\n> extends DMenuItem<VALUE, THEME, OPTIONS> {\n\tprotected _shortcutText!: Text | DDynamicText | null;\n\tprotected _shortcutMargin!: number;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.initOnClick( options );\n\t\tthis.initOnOver( options );\n\t\tthis.initShortcuts( options );\n\t}\n\n\tprotected initOnClick( options?: OPTIONS ): void {\n\t\tUtilPointerEvent.onClick( this, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.onSelect( e );\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected initOnOver( options?: OPTIONS ): void {\n\t\tthis.on( UtilPointerEvent.over, (): void => {\n\t\t\tconst context = this.getContext();\n\t\t\tif( context != null ) {\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent instanceof DBase ) {\n\t\t\t\t\tcontext.trim( this.getCloseable() );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected initShortcuts( options?: OPTIONS ): void {\n\t\tconst shortcuts = this._shortcuts;\n\t\tthis._shortcutMargin = this.theme.getShortcutTextMargin();\n\t\tif( shortcuts != null && 0 < shortcuts.length ) {\n\t\t\tconst shortcut = shortcuts[ 0 ];\n\t\t\tconst shortcutTextValue = UtilKeyboardEvent.toString( shortcut );\n\t\t\tthis._shortcutText = ( this._textDynamic ?\n\t\t\t\tnew DDynamicText( shortcutTextValue, this._textStyle ) :\n\t\t\t\tnew Text( shortcutTextValue, this._textStyle )\n\t\t\t);\n\t\t\tthis.appendRenderable( this._shortcutText, true );\n\t\t} else {\n\t\t\tthis._shortcutText = null;\n\t\t}\n\t}\n\n\tprotected updateShortcutText(): void {\n\t\tconst text = this._shortcutText;\n\t\tif( text != null ) {\n\t\t\ttext.position.set(\n\t\t\t\tthis.toRounded( this.width - this._shortcutMargin - text.width ),\n\t\t\t\tthis.toRounded( ( this.height - text.height ) * 0.5 )\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateTextColor( text: DDynamicText | Text ): void {\n\t\tsuper.updateTextColor( text );\n\n\t\tconst shortcutText = this._shortcutText;\n\t\tif( shortcutText != null ) {\n\t\t\tconst theme = this.theme;\n\t\t\tconst state = this.state;\n\t\t\tshortcutText.style.fill = theme.getColor( state );\n\t\t\tshortcutText.alpha = theme.getAlpha( state );\n\t\t}\n\t}\n\n\tprotected updateText(): void {\n\t\tsuper.updateText();\n\t\tthis.updateShortcutText();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemText\";\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tconst closeable = this.getCloseable();\n\t\tif( closeable != null ) {\n\t\t\tcloseable.emit( \"select\", this.value, this, closeable );\n\t\t}\n\n\t\tsuper.onSelect( e );\n\t}\n\n\tprotected onShortcut( e: KeyboardEvent ) {\n\t\tsuper.onShortcut( e );\n\t\tthis.onSelect( e );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\n\nexport interface DMenuItemCheckOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck\n> extends DMenuItemTextOptions<VALUE, THEME> {\n\tcheck: boolean;\n}\n\nexport interface DThemeMenuItemCheck extends DThemeMenuItemText {\n\n}\n\nexport class DMenuItemCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck,\n\tOPTIONS extends DMenuItemCheckOptions<VALUE, THEME> = DMenuItemCheckOptions<VALUE, THEME>\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tif( options && options.check ) {\n\t\t\tthis.setActive( true );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemCheck\";\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tthis.setActive( ! this.isActive() );\n\t\tsuper.onSelect( e );\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemCheckOptions<VALUE> {\n\t\treturn \"check\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\n\nexport type DMenuItemCreator = ( options: DMenuItemOptionsUnion<any>, sticky: boolean ) => DisplayObject | null;\n\nexport type DMenuMenuCreator = ( options?: DMenuOptions ) => DMenu<any>;\n\nexport class DMenus {\n\tprotected static CREATORS: DMenuItemCreator[] = [];\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\n\tprotected static MENU_CREATOR?: DMenuMenuCreator;\n\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\n\t\tthis.CREATORS.push( creator );\n\t}\n\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\n\t\tthis.CREATOR_DEFAULT = creator;\n\t}\n\n\tstatic setMenuCreator( creator: DMenuMenuCreator ): void {\n\t\tthis.MENU_CREATOR = creator;\n\t}\n\n\tstatic newItemOf<VALUE>(\n\t\tcreators: DMenuItemCreator[],\n\t\tcreatorDefault: DMenuItemCreator | null,\n\t\toptions: DMenuItemOptionsUnion<VALUE>,\n\t\tsticky: boolean\n\t): DisplayObject | null {\n\t\tfor( let i = 0, imax = creators.length; i < imax; ++i ) {\n\t\t\tconst created = creators[ i ]( options, sticky );\n\t\t\tif( created != null ) {\n\t\t\t\treturn created;\n\t\t\t}\n\t\t}\n\t\tif( creatorDefault ) {\n\t\t\treturn creatorDefault( options, sticky );\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\n\t\treturn this.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky );\n\t}\n\n\tstatic newItemsOf<VALUE>(\n\t\tcreator: { newItem( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null },\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\n\t\t\tconst item = items[ i ];\n\t\t\tif( item instanceof DisplayObject ) {\n\t\t\t\tparent.addChild( item );\n\t\t\t} else {\n\t\t\t\tconst created = creator.newItem( item, sticky );\n\t\t\t\tif( created != null ) {\n\t\t\t\t\tparent.addChild( created );\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error( `No matching menu item creator found: ${JSON.stringify( item )}` );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic newItems<VALUE>(\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tthis.newItemsOf( this, parent, items, sticky );\n\t}\n\n\tstatic newMenu<VALUE>( options?: DMenuOptions<VALUE> ): DMenu<VALUE> {\n\t\tif( this.MENU_CREATOR != null ) {\n\t\t\treturn this.MENU_CREATOR( options );\n\t\t} else {\n\t\t\tthrow new Error( \"Missing DMenu creator.\" );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, Rectangle, Texture } from \"pixi.js\";\n\nexport abstract class DynamicAtlasItem {\n\tid: string;\n\tref: number;\n\tframe: Rectangle;\n\ttexture: Texture;\n\n\twidth: number;\n\theight: number;\n\tstrokeWidth: number;\n\n\tconstructor(\n\t\tid: string,\n\t\twidth: number, height: number, strokeWidth: number,\n\t\tbaseTexture: BaseTexture\n\t) {\n\t\tthis.id = id;\n\t\tthis.ref = 0;\n\t\tconst resolution = baseTexture.resolution;\n\t\tthis.frame = new Rectangle( 0, 0, width * resolution, height * resolution );\n\t\tthis.texture = new Texture( baseTexture, new Rectangle( 0, 0, 1, 1 ) );\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.strokeWidth = strokeWidth;\n\t}\n\n\tabstract render( context: CanvasRenderingContext2D ): void;\n\n\tapplyFrame(): void {\n\t\tconst resolutionInverse = 1 / this.texture.baseTexture.resolution;\n\t\tthis.texture.frame.x = this.frame.x * resolutionInverse;\n\t\tthis.texture.frame.y = this.frame.y * resolutionInverse;\n\t\tthis.texture.frame.width = this.width;\n\t\tthis.texture.frame.height = this.height;\n\t\tthis.texture.updateUvs();\n\t\tthis.texture.emit( \"update\", this );\n\t}\n\n\tdestroy(): void {\n\t\tthis.texture.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\n\nexport class DynamicAtlasItemEmpty extends DynamicAtlasItem {\n\trender( context: CanvasRenderingContext2D ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture } from \"pixi.js\";\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\nimport { DynamicSDFFontAtlas } from \"./dynamic-sdf-font-atlas\";\n\nexport class DynamicAtlasItemFontAtlas extends DynamicAtlasItem {\n\tcanvas: HTMLCanvasElement | null;\n\n\tconstructor( atlas: DynamicSDFFontAtlas, baseTexture: BaseTexture ) {\n\t\tsuper( atlas.id, atlas.width / baseTexture.resolution, atlas.height / baseTexture.resolution, 0, baseTexture );\n\t\tthis.canvas = atlas.canvas;\n\t}\n\n\trender( context: CanvasRenderingContext2D ): void {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst frame = this.frame;\n\t\t\tcontext.drawImage( canvas, frame.x, frame.y, frame.width, frame.height );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture } from \"pixi.js\";\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\n\nexport class DynamicAtlasItemImage extends DynamicAtlasItem {\n\timage: HTMLImageElement;\n\n\tconstructor( image: HTMLImageElement, baseTexture: BaseTexture ) {\n\t\tsuper( image.src, image.width / baseTexture.resolution, image.height / baseTexture.resolution, 0, baseTexture );\n\t\tthis.image = image;\n\t}\n\n\trender( context: CanvasRenderingContext2D ): void {\n\t\tconst frame = this.frame;\n\t\tconst x = frame.x;\n\t\tconst y = frame.y;\n\t\tconst w = frame.width;\n\t\tconst h = frame.height;\n\t\tconst image = this.image;\n\n\t\tcontext.drawImage( image, x, y, w, h );\n\n\t\tcontext.drawImage( image, 0, 0, 1, h, x - 1, y - 1, 1, h + 2 );\n\t\tcontext.drawImage( image, 0, 0, w, 1, x, y - 1, w, 1 );\n\t\tcontext.drawImage( image, w - 1, 0, 1, h, x + w, y - 1, 1, h + 2 );\n\t\tcontext.drawImage( image, 0, h - 1, w, 1, x, y + h, w, 1 );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, Text } from \"pixi.js\";\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\n\nexport class DynamicAtlasItemText extends DynamicAtlasItem {\n\tprotected _text: Text;\n\n\tconstructor( id: string, text: Text, baseTexture: BaseTexture ) {\n\t\tsuper( id, text.width, text.height, 0, baseTexture );\n\t\tthis._text = text;\n\t}\n\n\trender( context: CanvasRenderingContext2D ): void {\n\t\tconst frame = this.frame;\n\t\tcontext.drawImage( this._text.canvas, frame.x, frame.y, frame.width, frame.height );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\n\nexport class DynamicAtlasItemWhite extends DynamicAtlasItem {\n\trender( context: CanvasRenderingContext2D ): void {\n\t\tconst frame = this.frame;\n\n\t\tcontext.save();\n\t\tcontext.fillStyle = \"#ffffff\";\n\t\tcontext.fillRect( frame.x - 1, frame.y - 1, frame.width + 2, frame.height + 2 );\n\t\tcontext.restore();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, MIPMAP_MODES, Texture } from \"pixi.js\";\nimport { DynamicAtlasItem } from \"./dynamic-atlas-item\";\nimport { DynamicAtlasItemEmpty } from \"./dynamic-atlas-item-empty\";\nimport { DynamicAtlasItemWhite } from \"./dynamic-atlas-item-white\";\n\nconst MAXIMUM_TEXTURE_SIZE = 4096;\n\nexport class DynamicAtlas {\n\tprotected static INSTANCE: DynamicAtlas | null;\n\n\tprotected _canvas: HTMLCanvasElement;\n\tprotected _sortedData: DynamicAtlasItem[];\n\tprotected _idToDatum: { [ id: string ]: DynamicAtlasItem };\n\tprotected _baseTexture: BaseTexture;\n\tprotected _isDirty: boolean;\n\tprotected _predefined: { [ id: string ]: DynamicAtlasItem };\n\n\tconstructor( resolution: number ) {\n\t\tconst canvas = this._canvas = document.createElement( \"canvas\" );\n\t\tcanvas.width = canvas.height = 256;\n\n\t\tconst baseTexture = this._baseTexture = BaseTexture.from( canvas, {\n\t\t\tmipmap: MIPMAP_MODES.OFF,\n\t\t\tresolution\n\t\t});\n\n\t\tthis._idToDatum = {};\n\t\tthis._sortedData = [];\n\t\tthis._predefined = {\n\t\t\tempty: new DynamicAtlasItemEmpty(\n\t\t\t\t\"empty\", 10, 10, 0, baseTexture\n\t\t\t),\n\t\t\twhite: new DynamicAtlasItemWhite(\n\t\t\t\t\"white\", 10, 10, 0, baseTexture\n\t\t\t)\n\t\t};\n\n\t\tthis._isDirty = true;\n\t}\n\n\tupdateFrames( width: number, data: DynamicAtlasItem[] ): number {\n\t\tconst padding = 4;\n\t\tlet x = padding;\n\t\tlet y = padding;\n\t\tlet maxRowHeight = 0;\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tif( width < x + datum.frame.width + padding ) {\n\t\t\t\tx = padding;\n\t\t\t\ty += maxRowHeight + padding;\n\t\t\t\tmaxRowHeight = 0;\n\t\t\t}\n\t\t\tdatum.frame.x = x | 0;\n\t\t\tdatum.frame.y = y | 0;\n\t\t\tx += datum.frame.width + padding;\n\t\t\tmaxRowHeight = Math.max( maxRowHeight, datum.frame.height );\n\t\t}\n\n\t\tconst minHeight = y + maxRowHeight + padding;\n\t\tlet result = 256;\n\t\twhile( result < minHeight ) {\n\t\t\tresult <<= 1;\n\t\t}\n\t\treturn Math.min( MAXIMUM_TEXTURE_SIZE, result );\n\t}\n\n\trenderFrames( width: number, height: number, data: DynamicAtlasItem[] ): void {\n\t\tconst canvas = this._canvas;\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\t\tconst context = canvas.getContext( \"2d\" );\n\t\tif( context != null ) {\n\t\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\t\tconst datum = data[ i ];\n\t\t\t\tdatum.render( context );\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyFrames( data: DynamicAtlasItem[] ): void {\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tdatum.applyFrame();\n\t\t}\n\t}\n\n\tcalcCanvasWidth( data: DynamicAtlasItem[] ): number {\n\t\tlet result = 128;\n\t\tfor( let i = data.length - 1; 0 <= i; --i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tconst size = Math.max( datum.frame.width, datum.frame.height );\n\t\t\twhile( result < size ) {\n\t\t\t\tresult <<= 1;\n\t\t\t}\n\t\t}\n\t\treturn Math.min( MAXIMUM_TEXTURE_SIZE, result << 1 );\n\t}\n\n\tcleanup( data: DynamicAtlasItem[] ): void {\n\t\tdata.sort( DynamicAtlas.ITEM_COMPARATOR );\n\t\tfor( let i = data.length - 1; 0 <= i; --i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tif( 0 < datum.ref ) {\n\t\t\t\tdata.length = i + 1;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdata.length = 0;\n\t}\n\n\tbegin(): void {\n\t\tconst data = this._sortedData;\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tdatum.ref = 0;\n\t\t}\n\n\t\tthis._isDirty = false;\n\t}\n\n\tend(): void {\n\t\tconst idToDatum = this._idToDatum;\n\t\tconst data = this._sortedData;\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tconst datum = data[ i ];\n\t\t\tif( datum.ref <= 0 ) {\n\t\t\t\tif( !( datum.id in this._predefined ) ) {\n\t\t\t\t\tdatum.destroy();\n\t\t\t\t}\n\t\t\t\tdelete idToDatum[ datum.id ];\n\t\t\t\tthis._isDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\trepack( forcibly?: boolean ): void {\n\t\tif( forcibly === true || this._isDirty ) {\n\t\t\tthis._isDirty = false;\n\t\t\tconst data = this._sortedData;\n\t\t\tthis.cleanup( data );\n\t\t\tconst canvasWidth = this.calcCanvasWidth( data );\n\t\t\tconst canvasHeight = this.updateFrames( canvasWidth, data );\n\t\t\tthis.renderFrames( canvasWidth, canvasHeight, data );\n\t\t\tthis._baseTexture.setRealSize( canvasWidth, canvasHeight );\n\t\t\tthis.applyFrames( data );\n\t\t}\n\t}\n\n\tget( id: string ): DynamicAtlasItem | null {\n\t\tconst idToDatum = this._idToDatum;\n\t\tconst datum =  idToDatum[ id ];\n\t\tif( datum != null ) {\n\t\t\tdatum.ref += 1;\n\t\t\treturn datum;\n\t\t} else {\n\t\t\tconst predefined = this._predefined[ id ];\n\t\t\tif( predefined != null ) {\n\t\t\t\tthis.set( id, predefined );\n\t\t\t\treturn predefined;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( id: string, item: DynamicAtlasItem ): DynamicAtlasItem | undefined {\n\t\tconst result = this._idToDatum[ id ];\n\t\titem.ref += 1;\n\t\tthis._idToDatum[ id ] = item;\n\t\tthis._sortedData.push( item );\n\t\tthis._isDirty = true;\n\t\treturn result;\n\t}\n\n\ttoDirty(): void {\n\t\tthis._isDirty = true;\n\t}\n\n\tgetDefaultTexture(): Texture {\n\t\treturn this.get( \"white\" )!.texture;\n\t}\n\n\tgetBaseTexture(): BaseTexture {\n\t\treturn this._baseTexture;\n\t}\n\n\trelease( id: string ): void {\n\t\tconst idToDatum = this._idToDatum;\n\t\tconst datum = idToDatum[ id ];\n\t\tif( datum != null ) {\n\t\t\tdatum.ref -= 1;\n\t\t\tif( datum.ref <= 0 ) {\n\t\t\t\tif( !( datum.id in this._predefined ) ) {\n\t\t\t\t\tdatum.destroy();\n\t\t\t\t}\n\t\t\t\tdelete idToDatum[ id ];\n\t\t\t\tthis._isDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic ITEM_COMPARATOR = ( a: DynamicAtlasItem, b: DynamicAtlasItem ): number => {\n\t\tif( a.ref <= 0 ) {\n\t\t\tif( b.ref <= 0 ) {\n\t\t\t\treturn 0;\n\t\t\t} else {\n\t\t\t\treturn +1;\n\t\t\t}\n\t\t} else {\n\t\t\tif( b.ref <= 0 ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\n\t\tif( a.frame.height < b.frame.height ) {\n\t\t\treturn -1;\n\t\t} else if( b.frame.height < a.frame.height ) {\n\t\t\treturn +1;\n\t\t} else {\n\t\t\treturn a.frame.width - b.frame.width;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class DynamicFontAtlasCharacterOrigin {\n\tx: number;\n\ty: number;\n\n\tconstructor( x: number, y: number ) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DynamicFontAtlasCharacterOrigin } from \"./dynamic-font-atlas-chaaracter-origin\";\n\nexport class DynamicFontAtlasCharacter {\n\tref: number;\n\tlife: number;\n\tx: number;\n\ty: number;\n\twidth: number;\n\theight: number;\n\tadvance: number;\n\torigin: DynamicFontAtlasCharacterOrigin;\n\treserved: boolean;\n\n\tconstructor( advance: number, width: number, height: number, reserved: boolean ) {\n\t\tthis.ref = 1;\n\t\tthis.life = 10;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.advance = advance;\n\t\tthis.origin = new DynamicFontAtlasCharacterOrigin( 0, 0 );\n\t\tthis.reserved = reserved;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { TextMetrics, utils } from \"pixi.js\";\n\nexport class DynamicFontAtlasFont {\n\tid: string;\n\tsize: number;\n\tcolor: string;\n\theight: number;\n\n\tascent: number;\n\tdescent: number;\n\n\tconstructor( fontId: string, size: number, color: number, padding: number ) {\n\t\tthis.id = fontId;\n\t\tthis.size = size;\n\t\tthis.color = utils.hex2string( color );\n\t\tthis.height = size + padding * 2;\n\t\tconst metrics = TextMetrics.measureFont( fontId );\n\t\tthis.ascent = metrics.ascent;\n\t\tthis.descent = metrics.descent;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const ASCII_CHARACTERS =\n\t\" !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\";\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { MIPMAP_MODES, SCALE_MODES, Texture } from \"pixi.js\";\nimport { ASCII_CHARACTERS } from \"./ascii\";\nimport { DynamicFontAtlasCharacter } from \"./dynamic-font-atlas-character\";\nimport { DynamicFontAtlasCharacters } from \"./dynamic-font-atlas-characters\";\nimport { DynamicFontAtlasFont } from \"./dynamic-font-atlas-font\";\nimport { UtilCharacterIterator } from \"./util-character-iterator\";\n\nconst PADDING = 3;\n\nexport class DynamicFontAtlas {\n\tprotected _id: string;\n\tprotected _canvas: HTMLCanvasElement | null;\n\tprotected _context: CanvasRenderingContext2D | null;\n\tprotected _font: DynamicFontAtlasFont;\n\tprotected _characters: DynamicFontAtlasCharacters;\n\tprotected _length: number;\n\tprotected _unrefCount: number;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _revision: number;\n\tprotected _revisionUpdated: number;\n\tprotected _texture: Texture;\n\n\tconstructor( fontId: string, fontSize: number, fontColor: number, resolution: number ) {\n\t\tthis._id = fontId;\n\t\tthis._canvas = document.createElement( \"canvas\" );\n\t\tthis._context = null;\n\t\tthis._font = new DynamicFontAtlasFont( fontId, fontSize, fontColor, PADDING );\n\t\tthis._characters = {};\n\t\tthis._length = 0;\n\t\tthis._unrefCount = 0;\n\t\tthis._width = 1;\n\t\tthis._height = 1;\n\t\tthis._revision = 0;\n\t\tthis._revisionUpdated = 0;\n\t\tthis._texture = Texture.from( this._canvas, {\n\t\t\tmipmap: MIPMAP_MODES.OFF,\n\t\t\tresolution,\n\t\t\tscaleMode: SCALE_MODES.NEAREST\n\t\t});\n\n\t\tthis.add( ASCII_CHARACTERS, true );\n\t\tthis.add_( \"...\", this._characters, true );\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tget font(): DynamicFontAtlasFont {\n\t\treturn this._font;\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tget canvas(): HTMLCanvasElement | null {\n\t\treturn this._canvas;\n\t}\n\n\tget characters(): DynamicFontAtlasCharacters {\n\t\treturn this._characters;\n\t}\n\n\tget texture(): Texture {\n\t\treturn this._texture;\n\t}\n\n\tprotected add_( character: string, characters: DynamicFontAtlasCharacters, reserved?: boolean ): void {\n\t\tif( character !== \"\\n\" ) {\n\t\t\tconst data = characters[ character ];\n\t\t\tif( data != null ) {\n\t\t\t\tif( ! data.reserved ) {\n\t\t\t\t\tif( data.ref === 0 ) {\n\t\t\t\t\t\tthis._unrefCount -= 1;\n\t\t\t\t\t}\n\t\t\t\t\tdata.ref += 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst advance = this.getAdvance( character );\n\t\t\t\tconst width = Math.ceil( PADDING + advance + PADDING );\n\t\t\t\tconst height = this.font.height;\n\t\t\t\tcharacters[ character ] = new DynamicFontAtlasCharacter( advance, width, height, !! reserved );\n\t\t\t\tthis._length += 1;\n\t\t\t\tthis._revision += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected remove_( character: string, characters: DynamicFontAtlasCharacters ): void {\n\t\tif( character !== \"\\n\" ) {\n\t\t\tconst data = characters[ character ];\n\t\t\tif( data != null ) {\n\t\t\t\tif( ! data.reserved && 0 < data.ref ) {\n\t\t\t\t\tdata.ref -= 1;\n\t\t\t\t\tif( data.ref === 0 ) {\n\t\t\t\t\t\tthis._unrefCount += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected cleanup_(): void {\n\t\tif( (this._length >> 1) <= this._unrefCount ) {\n\t\t\tconst characters = this._characters;\n\t\t\tfor( const character in characters ) {\n\t\t\t\tif( characters[ character ].ref <= 0 ) {\n\t\t\t\t\tdelete characters[ character ];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._length -= this._unrefCount;\n\t\t\tthis._revision += 1;\n\t\t\tthis._unrefCount = 0;\n\t\t}\n\t}\n\n\tadd( targets: string, reserved?: boolean ): void {\n\t\tconst characters = this._characters;\n\t\tconst iterator = UtilCharacterIterator.from( targets );\n\t\twhile( iterator.hasNext() ) {\n\t\t\tthis.add_( iterator.next(), characters, reserved );\n\t\t}\n\t}\n\n\tremove( targets: string ): void {\n\t\tconst characters = this._characters;\n\t\tconst iterator = UtilCharacterIterator.from( targets );\n\t\twhile( iterator.hasNext() ) {\n\t\t\tthis.remove_( iterator.next(), characters );\n\t\t}\n\t}\n\n\tget( character: string ): DynamicFontAtlasCharacter | undefined {\n\t\treturn this._characters[ character ];\n\t}\n\n\tgetAdvance( target: string ): number {\n\t\tconst context = this.getContext();\n\t\tif( context != null ) {\n\t\t\treturn context.measureText( target ).width;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetContext(): CanvasRenderingContext2D | null {\n\t\tlet context = this._context;\n\t\tif( context == null ) {\n\t\t\tconst canvas = this._canvas;\n\t\t\tif( canvas != null ) {\n\t\t\t\tcontext = this._context = canvas.getContext( \"2d\", { alpha: true } );\n\t\t\t\tif( context == null ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tconst font = this._font;\n\t\tif( context.font !== font.id ) {\n\t\t\tcontext.font = font.id;\n\t\t\tfont.id = context.font;\n\t\t\tcontext.textAlign = \"left\";\n\t\t\tcontext.textBaseline = \"alphabetic\";\n\t\t\tcontext.lineWidth = 0;\n\t\t\tcontext.lineCap = \"round\";\n\t\t\tcontext.lineJoin = \"miter\";\n\t\t\tcontext.miterLimit = 0;\n\t\t\tcontext.fillStyle = font.color;\n\t\t\tcontext.strokeStyle = \"#0000ff\";\n\t\t}\n\t\treturn context;\n\t}\n\n\tupdate(): boolean {\n\t\tthis.cleanup_();\n\n\t\tif( this._revisionUpdated < this._revision ) {\n\t\t\tthis._revisionUpdated = this._revision;\n\n\t\t\tconst canvas = this._canvas;\n\t\t\tif( canvas != null ) {\n\t\t\t\tconst font = this._font;\n\t\t\t\tconst fontHeight = font.height;\n\t\t\t\tconst characters = this._characters;\n\t\t\t\tconst width = this._width = this.toPowerOf2( Math.ceil( Math.sqrt( this._length ) ) * fontHeight );\n\n\t\t\t\tconst offsetX = PADDING;\n\t\t\t\tconst offsetY = Math.round( (fontHeight - (font.ascent + font.descent)) * 0.5 + font.ascent );\n\t\t\t\tlet x = 0;\n\t\t\t\tlet y = 0;\n\t\t\t\tfor( const key in characters ) {\n\t\t\t\t\tconst character = characters[ key ];\n\t\t\t\t\tif( width <= x + character.width ) {\n\t\t\t\t\t\tx = 0;\n\t\t\t\t\t\ty += fontHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tcharacter.x = x;\n\t\t\t\t\tcharacter.y = y;\n\t\t\t\t\tcharacter.origin.x = x + offsetX;\n\t\t\t\t\tcharacter.origin.y = y + offsetY;\n\n\t\t\t\t\tx += character.width;\n\t\t\t\t}\n\t\t\t\tconst height = this._height = y + fontHeight;\n\n\t\t\t\t// Make a input canvas\n\t\t\t\t// Here, we need to reset the context because\n\t\t\t\t// context settings will be lost when we set the width/height.\n\t\t\t\tconst baseTexture = this._texture.baseTexture;\n\t\t\t\tconst resolution = baseTexture.resolution;\n\t\t\t\tconst realWidth = Math.ceil( width * resolution );\n\t\t\t\tconst realHeight = Math.ceil( height * resolution );\n\t\t\t\tcanvas.width = realWidth;\n\t\t\t\tcanvas.height = realHeight;\n\t\t\t\tconst context = this.getContext();\n\t\t\t\tif( context != null ) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.scale( resolution, resolution );\n\t\t\t\t\tcontext.clearRect( 0, 0, width, height );\n\t\t\t\t\tfor( const key in characters ) {\n\t\t\t\t\t\tconst character = characters[ key ];\n\t\t\t\t\t\tcontext.fillText( key, character.origin.x, character.origin.y );\n\t\t\t\t\t}\n\t\t\t\t\tcontext.restore();\n\t\t\t\t}\n\t\t\t\tbaseTexture.setRealSize( realWidth, realHeight );\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetRevision(): number {\n\t\treturn this._revision;\n\t}\n\n\tgetRevisionUpdate(): number {\n\t\treturn this._revisionUpdated;\n\t}\n\n\tget length(): number {\n\t\treturn this._length;\n\t}\n\n\tdestroy() {\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._canvas = null;\n\t\t}\n\n\t\tconst characters = this._characters;\n\t\tfor( const character in characters ) {\n\t\t\tdelete characters[ character ];\n\t\t}\n\t}\n\n\ttoPowerOf2( size: number ): number {\n\t\tlet result = 32;\n\t\twhile( result < size ) {\n\t\t\tresult <<= 1;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplicationLayerLike } from \"../d-application-layer-like\";\nimport { DynamicFontAtlas } from \"./dynamic-font-atlas\";\n\nconst update = ( atlas: DynamicFontAtlas ): void => {\n\tatlas.update();\n};\n\nconst updateAll = ( colorToAltas: Map<number, DynamicFontAtlas> ): void => {\n\tcolorToAltas.forEach( update );\n};\n\nconst destroy = ( atlas: DynamicFontAtlas ): void => {\n\tatlas.update();\n};\n\nconst destroyAll = ( colorToAltas: Map<number, DynamicFontAtlas> ): void => {\n\tcolorToAltas.forEach( destroy );\n};\n\nexport class DynamicFontAtlases {\n\tprotected _atlases: Map<string, Map<number, DynamicFontAtlas>>;\n\tprotected _resolution: number;\n\n\tconstructor( layer: DApplicationLayerLike ) {\n\t\tthis._atlases = new Map<string, Map<number, DynamicFontAtlas>>();\n\t\tthis._resolution = layer.renderer.resolution;\n\n\t\tlayer.renderer.on( \"prerender\", (): void => {\n\t\t\tthis.update();\n\t\t});\n\t}\n\n\tadd( fontId: string, fontSize: number, fontColor: number, targets: string ): void {\n\t\tconst atlases = this._atlases;\n\t\tlet colorToAtlas = atlases.get( fontId );\n\t\tif( colorToAtlas == null ) {\n\t\t\tcolorToAtlas = new Map<number, DynamicFontAtlas>();\n\t\t\tatlases.set( fontId, colorToAtlas );\n\t\t}\n\t\tlet atlas = colorToAtlas.get( fontColor );\n\t\tif( atlas == null ) {\n\t\t\tatlas = new DynamicFontAtlas( fontId, fontSize, fontColor, this._resolution );\n\t\t\tcolorToAtlas.set( fontColor, atlas );\n\t\t}\n\t\tatlas.add( targets );\n\t}\n\n\tremove( fontId: string, fontColor: number, targets: string ): void {\n\t\tconst colorToAtlas = this._atlases.get( fontId );\n\t\tif( colorToAtlas != null ) {\n\t\t\tconst atlas = colorToAtlas.get( fontColor );\n\t\t\tif( atlas != null ) {\n\t\t\t\tatlas.remove( targets );\n\t\t\t}\n\t\t}\n\t}\n\n\tget( fontId: string, fontColor: number ): DynamicFontAtlas | null {\n\t\tconst atlases = this._atlases;\n\t\tconst colorToAtlas = atlases.get( fontId );\n\t\tif( colorToAtlas == null ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst atlas = colorToAtlas.get( fontColor );\n\t\tif( atlas == null ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn atlas;\n\t}\n\n\tupdate(): void {\n\t\tthis._atlases.forEach( updateAll );\n\t}\n\n\tdestroy() {\n\t\tconst atlases = this._atlases;\n\t\tatlases.forEach( destroyAll );\n\t\tatlases.clear();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nconst VERTEX_SHADER = `\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying mediump vec2 vTextureCoord;\nvoid main(void) {\n\tgl_Position = vec4(aVertexPosition, 0.0, 1.0);\n\tvTextureCoord = aTextureCoord;\n}\n`;\n\nconst FRAGMENT_SHADER = `\nprecision mediump float;\n\nvarying mediump vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uSize;\n\nfloat calcDistance( float x, float y, float dx, float dy ) {\n\tfloat xd = x + dx;\n\tfloat yd = y + dy;\n\tfloat u = xd / uSize.x;\n\tfloat v = yd / uSize.y;\n\tfloat ul = (xd - 1.0) / uSize.x;\n\tfloat vt = (yd - 1.0) / uSize.y;\n\n\tfloat m = texture2D(uSampler, vec2(u , v )).a;\n\tfloat l = texture2D(uSampler, vec2(ul, v )).a;\n\tfloat t = texture2D(uSampler, vec2(u , vt)).a;\n\n\tfloat xl = mix( xd - 1.0, xd, (0.5 - l) / (m - l) );\n\tfloat yt = mix( yd - 1.0, yd, (0.5 - t) / (m - t) );\n\n\tbool bl = ( min(l, m) < 0.5 && 0.5 <= max(l, m) );\n\tbool bt = ( min(t, m) < 0.5 && 0.5 <= max(t, m) );\n\n\tfloat ll = (bl ? length( vec2( xl - x, yd - y ) ) : 100.0);\n\tfloat lt = (bt ? length( vec2( xd - x, yt - y ) ) : 100.0);\n\n\treturn min( ll, lt );\n}\n\nfloat calcDistancesY( float x, float y, float dx ) {\n\tfloat d = 100.0;\n\tfor( float dy=-6.0; dy<6.5; dy++ ) {\n\t\td = min( d, calcDistance( x, y, dx, dy ) );\n\t}\n\treturn d;\n}\n\nfloat calcDistances( float x, float y ) {\n\tfloat d = 100.0;\n\tfor( float dx=-6.0; dx<6.5; dx++ ) {\n\t\td = min( d, calcDistancesY( x, y, dx ) );\n\t}\n\treturn d;\n}\n\nvoid main(void) {\n\tfloat t = texture2D(uSampler, vTextureCoord).a;\n\tfloat x = vTextureCoord.x * uSize.x;\n\tfloat y = vTextureCoord.y * uSize.y;\n\tfloat d = min( 6.0, calcDistances( x, y ) ) / 12.0;\n\td = clamp( mix( 0.5 - d, 0.5 + d, step( 0.5, t ) ), 0.0, 1.0 );\n\tgl_FragColor = vec4(1.0, 1.0, 1.0, d);\n}\n`;\n\nexport class DynamicSDFFontGenerator {\n\tprotected _canvas: HTMLCanvasElement | null;\n\tprotected _onLostBound: EventListener;\n\tprotected _onRestoreBound: EventListener;\n\tprotected _onUnloadBound: EventListener;\n\tprotected _gl: WebGLRenderingContext | null;\n\tprotected _texture: WebGLTexture | null;\n\tprotected _shaderProgram: WebGLProgram | null;\n\tprotected _vertexPositionAttribute: number;\n\tprotected _textureCoordAttribute: number;\n\tprotected _samplerUniform: WebGLUniformLocation | null;\n\tprotected _sizeUniform: WebGLUniformLocation | null;\n\tprotected _vb: WebGLBuffer | null;\n\tprotected _uvb: WebGLBuffer | null;\n\n\tconstructor() {\n\t\tthis._gl = null;\n\t\tthis._texture = null;\n\t\tthis._shaderProgram = null;\n\t\tthis._vertexPositionAttribute = NaN;\n\t\tthis._textureCoordAttribute = NaN;\n\t\tthis._samplerUniform = NaN;\n\t\tthis._sizeUniform = NaN;\n\t\tthis._vb = null;\n\t\tthis._uvb = null;\n\n\t\tconst canvas = this._canvas = document.createElement( \"canvas\" );\n\t\tcanvas.width = 64;\n\t\tcanvas.height = 64;\n\t\tthis._onLostBound = ( e: Event ): void => {\n\t\t\te.preventDefault();\n\t\t};\n\t\tthis._onRestoreBound = (): void => {\n\t\t\tthis.restore();\n\t\t};\n\t\tthis._onUnloadBound = (): void => {\n\t\t\tthis.destroy();\n\t\t};\n\t\tcanvas.addEventListener( \"webglcontextlost\", this._onLostBound, false);\n\t\tcanvas.addEventListener( \"webglcontextrestored\", this._onRestoreBound, false);\n\t\twindow.addEventListener( \"unload\", this._onUnloadBound, false );\n\t}\n\n\tinit(): this {\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null && (this._gl == null || this._gl.isContextLost()) ) {\n\t\t\tconst config: WebGLContextAttributes = {\n\t\t\t\talpha: true,\n\t\t\t\tantialias: false,\n\t\t\t\tdepth: false,\n\t\t\t\tstencil: false,\n\t\t\t\tpremultipliedAlpha: false\n\t\t\t};\n\t\t\tconst gl = this._gl = (\n\t\t\t\tcanvas.getContext( \"webgl\", config ) ||\n\t\t\t\tcanvas.getContext( \"experimental-webgl\", config ) as WebGLRenderingContext | null\n\t\t\t);\n\t\t\tif( gl != null ) {\n\t\t\t\tgl.clearColor(1.0, 1.0, 1.0, 0.0);\n\t\t\t\tthis.makeVertexBuffer();\n\t\t\t\tthis.makeUvBuffer();\n\t\t\t\tthis.makeShaders();\n\t\t\t\tthis._texture = null;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\trestore(): void {\n\t\tthis.init();\n\t}\n\n\tgetCanvas(): HTMLCanvasElement | null {\n\t\treturn this._canvas;\n\t}\n\n\tgetShader( gl: WebGLRenderingContext, code: string, type: boolean ): WebGLShader | null {\n\t\tconst shader = ( type ?\n\t\t\tgl.createShader( gl.FRAGMENT_SHADER ) :\n\t\t\tgl.createShader( gl.VERTEX_SHADER )\n\t\t);\n\t\tif( shader != null ) {\n\t\t\tgl.shaderSource( shader, code );\n\t\t\tgl.compileShader( shader );\n\t\t\tif( ! gl.getShaderParameter( shader, gl.COMPILE_STATUS ) ) {\n\t\t\t\t// tslint:disable-next-line: no-console no-unused-expression\n\t\t\t\tconsole && console.error( `Failed to compile the shader: ${gl.getShaderInfoLog(shader)}` );\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\treturn shader;\n\t}\n\n\tmakeShaders(): WebGLShader | null {\n\t\tconst gl = this._gl;\n\t\tif( gl != null && gl.isContextLost() !== true ) {\n\t\t\tconst vertexShader = this.getShader( gl, VERTEX_SHADER, false );\n\t\t\tif( vertexShader != null ) {\n\t\t\t\tconst fragmentShader = this.getShader( gl, FRAGMENT_SHADER, true );\n\t\t\t\tif( fragmentShader != null ) {\n\t\t\t\t\tconst shaderProgram = this._shaderProgram = gl.createProgram();\n\t\t\t\t\tif( shaderProgram != null ) {\n\t\t\t\t\t\tgl.attachShader( shaderProgram, vertexShader );\n\t\t\t\t\t\tgl.attachShader( shaderProgram, fragmentShader );\n\t\t\t\t\t\tgl.linkProgram( shaderProgram );\n\t\t\t\t\t\tif( ! gl.getProgramParameter(shaderProgram, gl.LINK_STATUS) ) {\n\t\t\t\t\t\t\t// tslint:disable-next-line: no-console no-unused-expression\n\t\t\t\t\t\t\tconsole && console.error( `Failed to link the program: ${gl.getError()}` );\n\t\t\t\t\t\t\tgl.deleteShader( vertexShader );\n\t\t\t\t\t\t\tgl.deleteShader( fragmentShader );\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgl.deleteShader( vertexShader );\n\t\t\t\t\t\t\tgl.deleteShader( fragmentShader );\n\n\t\t\t\t\t\t\tgl.useProgram( shaderProgram );\n\t\t\t\t\t\t\tthis._vertexPositionAttribute = gl.getAttribLocation( shaderProgram, \"aVertexPosition\" );\n\t\t\t\t\t\t\tthis._textureCoordAttribute = gl.getAttribLocation( shaderProgram, \"aTextureCoord\" );\n\t\t\t\t\t\t\tthis._samplerUniform = gl.getUniformLocation( shaderProgram, \"uSampler\" );\n\t\t\t\t\t\t\tthis._sizeUniform = gl.getUniformLocation( shaderProgram, \"uSize\" );\n\t\t\t\t\t\t\tgl.useProgram( null );\n\t\t\t\t\t\t\treturn shaderProgram;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgl.deleteShader( vertexShader );\n\t\t\t\t\t\tgl.deleteShader( fragmentShader );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tgl.deleteShader( vertexShader );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tdestroyShaders(): void {\n\t\tconst gl = this._gl;\n\t\tif( gl != null && gl.isContextLost() !== true ) {\n\t\t\tconst shaderProgram = this._shaderProgram;\n\t\t\tif( shaderProgram != null ) {\n\t\t\t\tthis._shaderProgram = null;\n\t\t\t\tgl.useProgram( null );\n\t\t\t\tgl.deleteProgram( shaderProgram );\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateTexture( textureCanvas: HTMLCanvasElement ): WebGLTexture | null {\n\t\tconst gl = this._gl;\n\t\tconst canvas = this._canvas;\n\t\tif( gl != null && gl.isContextLost() !== true && canvas != null ) {\n\t\t\tconst width = textureCanvas.width;\n\t\t\tconst height = textureCanvas.height;\n\t\t\tif( canvas.width !== width || canvas.height !== height ) {\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\t\t\t\tgl.viewport( 0, 0, width, height );\n\t\t\t}\n\n\t\t\tlet texture = this._texture;\n\t\t\tif( texture == null ) {\n\t\t\t\ttexture = this._texture = gl.createTexture();\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, texture );\n\t\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas );\n\t\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t} else {\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, texture );\n\t\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t}\n\t\t\treturn texture;\n\t\t}\n\t\treturn null;\n\t}\n\n\tdestroyTexture(): void {\n\t\tconst gl = this._gl;\n\t\tconst texture = this._texture;\n\t\tif( gl != null && gl.isContextLost() !== true && texture != null ) {\n\t\t\tthis._texture = null;\n\t\t\tgl.bindTexture( gl.TEXTURE_2D, null );\n\t\t\tgl.deleteTexture( texture );\n\t\t}\n\t}\n\n\tmakeVertexBuffer(): WebGLBuffer | null {\n\t\tconst gl = this._gl;\n\t\tif( gl != null && gl.isContextLost() !== true ) {\n\t\t\tconst vb = this._vb = gl.createBuffer();\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vb );\n\n\t\t\tconst vertices = [\n\t\t\t\t-1.0, +1.0,\n\t\t\t\t+1.0, +1.0,\n\t\t\t\t-1.0, -1.0,\n\t\t\t\t+1.0, -1.0\n\t\t\t];\n\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW );\n\t\t\treturn vb;\n\t\t}\n\t\treturn null;\n\t}\n\n\tdestroyVertexBuffer(): void {\n\t\tconst gl = this._gl;\n\t\tconst vb = this._vb;\n\t\tif( gl != null && gl.isContextLost() !== true && vb != null ) {\n\t\t\tthis._vb = null;\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, null );\n\t\t\tgl.deleteBuffer( vb );\n\t\t}\n\t}\n\n\tmakeUvBuffer(): WebGLBuffer | null {\n\t\tconst gl = this._gl;\n\t\tif( gl != null && gl.isContextLost() !== true ) {\n\t\t\tconst uvb = this._uvb = gl.createBuffer();\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, uvb );\n\n\t\t\tconst uvs = [\n\t\t\t\t0.0,  0.0,\n\t\t\t\t1.0,  0.0,\n\t\t\t\t0.0,  1.0,\n\t\t\t\t1.0,  1.0\n\t\t\t];\n\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, new Float32Array(uvs), gl.STATIC_DRAW );\n\t\t\treturn uvb;\n\t\t}\n\t\treturn null;\n\t}\n\n\tdestroyUvBuffer(): void {\n\t\tconst gl = this._gl;\n\t\tconst uvb = this._uvb;\n\t\tif( gl != null && gl.isContextLost() !== true && uvb != null ) {\n\t\t\tthis._uvb = null;\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, null );\n\t\t\tgl.deleteBuffer( uvb );\n\t\t}\n\t}\n\n\trender(): void {\n\t\tconst gl = this._gl;\n\t\tconst canvas = this._canvas;\n\t\tconst shaderProgram = this._shaderProgram;\n\t\tconst vb = this._vb;\n\t\tconst uvb = this._uvb;\n\t\tconst texture = this._texture;\n\t\tif( gl != null && gl.isContextLost() !== true && canvas != null &&\n\t\t\tshaderProgram != null && vb != null && uvb != null && texture != null ) {\n\t\t\tgl.clear( gl.COLOR_BUFFER_BIT );\n\n\t\t\tgl.useProgram( shaderProgram );\n\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vb );\n\t\t\tconst vertexPositionAttribute = this._vertexPositionAttribute;\n\t\t\tgl.enableVertexAttribArray( vertexPositionAttribute );\n\t\t\tgl.vertexAttribPointer( vertexPositionAttribute, 2, gl.FLOAT, false, 0, 0 );\n\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, uvb );\n\t\t\tconst textureCoordAttribute = this._textureCoordAttribute;\n\t\t\tgl.enableVertexAttribArray( textureCoordAttribute );\n\t\t\tgl.vertexAttribPointer( textureCoordAttribute, 2, gl.FLOAT, false, 0, 0 );\n\n\t\t\tgl.activeTexture( gl.TEXTURE0 );\n\t\t\tgl.bindTexture( gl.TEXTURE_2D, texture );\n\t\t\tgl.uniform1i( this._samplerUniform, 0 );\n\t\t\tgl.uniform2f( this._sizeUniform, canvas.width, canvas.height );\n\n\t\t\tgl.drawArrays( gl.TRIANGLE_STRIP, 0, 4 );\n\n\t\t\tgl.bindTexture( gl.TEXTURE_2D, null );\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, null );\n\t\t\tgl.useProgram( null );\n\t\t}\n\t}\n\n\tread( copyCanvas: HTMLCanvasElement ): void {\n\t\tconst gl = this._gl;\n\t\tconst canvas = this._canvas;\n\t\tif( gl != null && gl.isContextLost() !== true && canvas != null ) {\n\t\t\tconst width = canvas.width;\n\t\t\tconst height = canvas.height;\n\t\t\tcopyCanvas.width = width;\n\t\t\tcopyCanvas.height = height;\n\t\t\tconst copyContext = copyCanvas.getContext( \"2d\" );\n\t\t\tif( copyContext != null ) {\n\t\t\t\tcopyContext.drawImage( canvas, 0, 0 );\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tthis.destroyVertexBuffer();\n\t\tthis.destroyUvBuffer();\n\t\tthis.destroyShaders();\n\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._canvas = null;\n\t\t\tcanvas.removeEventListener( \"webglcontextlost\", this._onLostBound, false);\n\t\t\tcanvas.removeEventListener( \"webglcontextrestored\", this._onRestoreBound, false);\n\t\t\twindow.removeEventListener( \"unload\", this._onUnloadBound, false );\n\t\t}\n\n\t\tconst gl = this._gl;\n\t\tif( gl != null ) {\n\t\t\tthis._gl = null;\n\t\t\tconst WebGLLoseContext = gl.getExtension( \"WEBGL_lose_context\" );\n\t\t\tif( WebGLLoseContext != null ) {\n\t\t\t\tWebGLLoseContext.loseContext();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemes } from \"../theme/d-themes\";\nimport { ASCII_CHARACTERS } from \"./ascii\";\nimport { DynamicFontAtlasCharacter } from \"./dynamic-font-atlas-character\";\nimport { DynamicFontAtlasCharacters } from \"./dynamic-font-atlas-characters\";\nimport { DynamicSDFFontGenerator } from \"./dynamic-sdf-font-generator\";\n\nexport interface DynamicSDFFontAtlasFont {\n\tfamily: string;\n\tsize: number;\n\titalic: boolean;\n}\n\nexport interface DynamicSDFFontAtlasJson {\n\twidth: number;\n\theight: number;\n\tfont: DynamicSDFFontAtlasFont;\n\tcharacters: DynamicFontAtlasCharacters;\n}\n\nexport class DynamicSDFFontAtlas {\n\tprotected static GENERATOR: DynamicSDFFontGenerator | null = null;\n\tprotected static FONT_FAMILY_AUTO: string | null = null;\n\n\tprotected _id: string;\n\tprotected _generator: DynamicSDFFontGenerator | null;\n\tprotected _canvas: HTMLCanvasElement | null;\n\tprotected _font: DynamicSDFFontAtlasFont;\n\tprotected _characters: DynamicFontAtlasCharacters;\n\tprotected _length: number;\n\tprotected _width: number;\n\tprotected _height: number;\n\tprotected _isDirty: boolean;\n\n\tconstructor( fontFamily: string ) {\n\t\tthis._id = `font-atlas:${fontFamily}`;\n\t\tthis._generator = DynamicSDFFontAtlas.getGenerator().init();\n\t\tthis._canvas = document.createElement( \"canvas\" );\n\t\tthis._font = {\n\t\t\tfamily: DynamicSDFFontAtlas.toFontFamily( fontFamily ),\n\t\t\tsize: 32,\n\t\t\titalic: false\n\t\t};\n\t\tthis._characters = {};\n\t\tthis._length = 0;\n\t\tthis._width = 1;\n\t\tthis._height = 1;\n\t\tthis._isDirty = true;\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tget font(): DynamicSDFFontAtlasFont {\n\t\treturn this._font;\n\t}\n\n\tset font( font: DynamicSDFFontAtlasFont ) {\n\t\tthis._font.family = font.family;\n\t\tthis._font.size = font.size;\n\t\tthis._font.italic = font.italic;\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tget height(): number {\n\t\treturn this._height;\n\t}\n\n\tget canvas(): HTMLCanvasElement | null {\n\t\treturn this._canvas;\n\t}\n\n\tget generator(): DynamicSDFFontGenerator | null {\n\t\treturn this._generator;\n\t}\n\n\tget characters(): DynamicFontAtlasCharacters {\n\t\treturn this._characters;\n\t}\n\n\tbegin(): void {\n\t\tthis._length = 0;\n\t\tconst characters = this._characters;\n\t\tfor( const character in characters ) {\n\t\t\tcharacters[ character ].ref = 0;\n\t\t}\n\t}\n\n\tend(): void {\n\t\tconst characters = this._characters;\n\t\tfor( const character in characters ) {\n\t\t\tconst data = characters[ character ];\n\t\t\tif( data.ref <= 0 ) {\n\t\t\t\tdata.life -= 1;\n\t\t\t\tif( data.life <= 0 ) {\n\t\t\t\t\tdelete characters[ character ];\n\t\t\t\t\tthis._isDirty =  true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\taddAscii(): void {\n\t\tthis.add( ASCII_CHARACTERS );\n\t\tthis.addChar( \"...\" );\n\t}\n\n\taddChar( character: string ): void {\n\t\tconst characters = this._characters;\n\t\tif( character !== \"\\n\" ) {\n\t\t\tconst data = characters[ character ];\n\t\t\tif( data != null ) {\n\t\t\t\tif( data.ref <= 0 ) {\n\t\t\t\t\tthis._length += 1;\n\t\t\t\t}\n\t\t\t\tdata.ref += 1;\n\t\t\t} else {\n\t\t\t\tcharacters[ character ] = new DynamicFontAtlasCharacter( 0, 1, 1, false );\n\t\t\t\tthis._length += 1;\n\t\t\t\tthis._isDirty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tadd( characters: string ): void {\n\t\tfor( let i = 0, imax = characters.length; i < imax; ++i ) {\n\t\t\tthis.addChar( characters[ i ] );\n\t\t}\n\t}\n\n\tget( character: string ): DynamicFontAtlasCharacter | undefined {\n\t\treturn this._characters[ character ];\n\t}\n\n\tupdate(): boolean {\n\t\tif( this._isDirty ) {\n\t\t\tconst canvas = this._canvas;\n\t\t\tconst generator = this._generator;\n\t\t\tif( canvas != null && generator != null ) {\n\t\t\t\tconst context = canvas.getContext( \"2d\" );\n\t\t\t\tif( context != null ) {\n\t\t\t\t\tthis._isDirty = false;\n\n\t\t\t\t\tconst font = this._font;\n\t\t\t\t\tconst characters = this._characters;\n\t\t\t\t\tconst characterSize = font.size + 14;\n\t\t\t\t\tconst width = DynamicSDFFontAtlas.toPowerOf2( Math.ceil( Math.sqrt( this._length ) ) * characterSize );\n\t\t\t\t\tthis._width = width;\n\t\t\t\t\tconst fontStyle = (font.italic ? \"italic \" : \"\") + (font.size + \"px \") + font.family;\n\n\t\t\t\t\tcontext.font = fontStyle;\n\t\t\t\t\tcontext.textAlign = \"left\";\n\t\t\t\t\tcontext.textBaseline = \"middle\";\n\t\t\t\t\tcontext.lineWidth = 0;\n\t\t\t\t\tcontext.lineCap = \"round\";\n\t\t\t\t\tcontext.lineJoin = \"miter\";\n\t\t\t\t\tcontext.miterLimit = 0;\n\t\t\t\t\tcontext.fillStyle = \"#FFFFFF\";\n\n\t\t\t\t\tconst offsetX = 7;\n\t\t\t\t\tconst offsetY = ( characterSize >> 1 );\n\t\t\t\t\tlet x = 0;\n\t\t\t\t\tlet y = 0;\n\t\t\t\t\tfor( const character in characters ) {\n\t\t\t\t\t\tconst data = characters[ character ];\n\t\t\t\t\t\tconst advance = context.measureText( character ).width;\n\t\t\t\t\t\tconst characterWidth = Math.ceil( offsetX + advance + offsetX );\n\t\t\t\t\t\tconst characterHeight = characterSize;\n\t\t\t\t\t\tif( width <= x + characterWidth ) {\n\t\t\t\t\t\t\tx = 0;\n\t\t\t\t\t\t\ty += characterSize;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata.x = x;\n\t\t\t\t\t\tdata.y = y;\n\t\t\t\t\t\tdata.width = characterWidth;\n\t\t\t\t\t\tdata.height = characterHeight;\n\t\t\t\t\t\tdata.advance = advance;\n\t\t\t\t\t\tdata.origin.x = x + offsetX;\n\t\t\t\t\t\tdata.origin.y = y + offsetY;\n\n\t\t\t\t\t\tx += characterWidth;\n\t\t\t\t\t}\n\t\t\t\t\tconst height = this._height = y + characterSize;\n\n\t\t\t\t\t// Make a input canvas\n\t\t\t\t\t// Here, we need to reset the context because\n\t\t\t\t\t// context settings will be lost when we set the width/height.\n\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\tcanvas.height = height;\n\t\t\t\t\tcontext.font = fontStyle;\n\t\t\t\t\tcontext.textAlign = \"left\";\n\t\t\t\t\tcontext.textBaseline = \"middle\";\n\t\t\t\t\tcontext.lineWidth = 0;\n\t\t\t\t\tcontext.lineCap = \"round\";\n\t\t\t\t\tcontext.lineJoin = \"miter\";\n\t\t\t\t\tcontext.miterLimit = 4;\n\t\t\t\t\tcontext.fillStyle = \"#FFFFFF\";\n\t\t\t\t\tcontext.clearRect( 0, 0, width, height );\n\t\t\t\t\tfor( const character in characters ) {\n\t\t\t\t\t\tconst data = characters[ character ];\n\t\t\t\t\t\tcontext.fillText( character, data.origin.x, data.origin.y );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Convert to SDF font texture\n\t\t\t\t\tgenerator.updateTexture( canvas );\n\t\t\t\t\tgenerator.render();\n\t\t\t\t\tgenerator.read( canvas );\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tget length(): number {\n\t\treturn this._length;\n\t}\n\n\ttoJson(): DynamicSDFFontAtlasJson {\n\t\treturn {\n\t\t\twidth: this._width,\n\t\t\theight: this._height,\n\t\t\tfont: this._font,\n\t\t\tcharacters: this._characters\n\t\t};\n\t}\n\n\ttoString(): string {\n\t\treturn JSON.stringify( this.toJson() );\n\t}\n\n\tdestroy() {\n\t\tconst generator = this._generator;\n\t\tif( generator != null ) {\n\t\t\tthis._generator = null;\n\t\t}\n\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._canvas = null;\n\t\t}\n\n\t\tconst characters = this._characters;\n\t\tfor( const character in characters ) {\n\t\t\tdelete characters[ character ];\n\t\t}\n\t}\n\n\tstatic toFontFamily( fontFamily: string ) {\n\t\treturn ( fontFamily === \"auto\" ?\n\t\t\tDynamicSDFFontAtlas.getAutoFontFamily() :\n\t\t\tfontFamily\n\t\t);\n\t}\n\n\tstatic toPowerOf2( size: number ): number {\n\t\tlet result = 32;\n\t\twhile( result < size ) {\n\t\t\tresult <<= 1;\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic getGenerator(): DynamicSDFFontGenerator {\n\t\tif( DynamicSDFFontAtlas.GENERATOR == null ) {\n\t\t\tDynamicSDFFontAtlas.GENERATOR = new DynamicSDFFontGenerator();\n\t\t}\n\t\treturn DynamicSDFFontAtlas.GENERATOR;\n\t}\n\n\tstatic getAutoFontFamily(): string {\n\t\tif( DynamicSDFFontAtlas.FONT_FAMILY_AUTO == null ) {\n\t\t\tDynamicSDFFontAtlas.FONT_FAMILY_AUTO = (DThemes.getInstance().get( \"DBase\" ) as any).getFontFamilly() as string;\n\t\t}\n\t\treturn DynamicSDFFontAtlas.FONT_FAMILY_AUTO;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DynamicAtlas } from \"./dynamic-atlas\";\nimport { DynamicAtlasItemFontAtlas } from \"./dynamic-atlas-item-font-atlas\";\nimport { DynamicSDFFontAtlas } from \"./dynamic-sdf-font-atlas\";\n\nexport class DynamicSDFFontAtlases {\n\tprotected _atlases: { [ family: string ]: DynamicSDFFontAtlas };\n\n\tconstructor() {\n\t\tthis._atlases = {};\n\t}\n\n\tbegin(): void {\n\t\tconst atlases = this._atlases;\n\t\tfor( const family in atlases ) {\n\t\t\tconst atlas = atlases[ family ];\n\t\t\tatlas.begin();\n\t\t}\n\t}\n\n\tend(): void {\n\t\tconst atlases = this._atlases;\n\t\tfor( const family in atlases ) {\n\t\t\tconst atlas = atlases[ family ];\n\t\t\tif( 0 < atlas.length ) {\n\t\t\t\tatlas.addAscii();\n\t\t\t}\n\t\t\tatlas.end();\n\t\t\tif( atlas.length <= 0 ) {\n\t\t\t\tatlas.destroy();\n\t\t\t\tdelete atlases[ family ];\n\t\t\t}\n\t\t}\n\t}\n\n\tadd( family: string, targets: string ) {\n\t\tconst atlas = this._atlases[ family ];\n\t\tif( atlas != null ) {\n\t\t\tatlas.add( targets );\n\t\t} else {\n\t\t\tconst newAtlas = new DynamicSDFFontAtlas( family );\n\t\t\tnewAtlas.add( targets );\n\t\t\tthis._atlases[ family ] = newAtlas;\n\t\t}\n\t}\n\n\tget( family: string ): DynamicSDFFontAtlas | null {\n\t\tconst atlas = this._atlases[ family ];\n\t\tif( atlas != null ) {\n\t\t\treturn atlas;\n\t\t}\n\t\treturn null;\n\t}\n\n\tupdate( baseAtlas: DynamicAtlas ): void {\n\t\tconst atlases = this._atlases;\n\t\tconst baseTexture = baseAtlas.getBaseTexture();\n\t\tfor( const family in atlases ) {\n\t\t\tconst atlas = atlases[ family ];\n\t\t\tif( atlas.update() ) {\n\t\t\t\tconst atlasId = atlas.id;\n\t\t\t\tconst item = baseAtlas.get( atlasId );\n\t\t\t\tif( item != null ) {\n\t\t\t\t\tconst width = atlas.width;\n\t\t\t\t\tconst height = atlas.height;\n\t\t\t\t\tconst resolution = baseTexture.resolution;\n\t\t\t\t\titem.frame.width = width;\n\t\t\t\t\titem.frame.height = height;\n\t\t\t\t\titem.width = width / resolution;\n\t\t\t\t\titem.height = height / resolution;\n\t\t\t\t\tbaseAtlas.toDirty();\n\t\t\t\t} else {\n\t\t\t\t\tbaseAtlas.set(\n\t\t\t\t\t\tatlasId,\n\t\t\t\t\t\tnew DynamicAtlasItemFontAtlas( atlas, baseTexture )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tconst atlases = this._atlases;\n\t\tfor( const family in atlases ) {\n\t\t\tconst atlas = atlases[ family ];\n\t\t\tatlas.destroy();\n\t\t}\n\t\tthis._atlases = {};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"../d-base\";\n\nexport class Lazy<INSTANCE, OPTIONS> {\n\tinstance: INSTANCE | null;\n\tnewInstance: new ( options: OPTIONS ) => INSTANCE;\n\toptions: OPTIONS;\n\n\tconstructor( newInstance: new ( options: OPTIONS ) => INSTANCE, options: OPTIONS, base?: DBase ) {\n\t\tthis.instance = null;\n\t\tthis.newInstance = newInstance;\n\t\tthis.options = options;\n\n\t\tif( base != null ) {\n\t\t\tif( base.isActive() ) {\n\t\t\t\tsetTimeout((): void => {\n\t\t\t\t\tthis.get();\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t\tbase.on( \"active\", (): void => {\n\t\t\t\tthis.get();\n\t\t\t});\n\t\t}\n\t}\n\n\tget(): INSTANCE {\n\t\tlet instance = this.instance;\n\t\tif( instance == null ) {\n\t\t\tinstance = this.instance = new (this.newInstance)( this.options );\n\t\t}\n\t\treturn instance;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeA implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn (date.getHours() < 12 ? \"AM\" : \"PM\");\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodea implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn (date.getHours() < 12 ? \"am\" : \"pm\");\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeD implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getDate());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNoded implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${target | 0}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport abstract class FormatNodePrecision implements FormatNode {\n\tprotected precision: number;\n\n\tconstructor( precision?: string ) {\n\t\tif (precision != null) {\n\t\t\tthis.precision = +precision.substring(1, precision.length);\n\t\t} else {\n\t\t\tthis.precision = 0;\n\t\t}\n\t}\n\n\tabstract format( target: number, step: number, date: Date ): string;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodePrecision } from \"./format-node-precision\";\n\nexport class FormatNodee extends FormatNodePrecision {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn target.toExponential(this.precision);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodePrecision } from \"./format-node-precision\";\n\nexport class FormatNodef extends FormatNodePrecision {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn target.toFixed(this.precision);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodePrecision } from \"./format-node-precision\";\n\nexport class FormatNodefsi extends FormatNodePrecision {\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst abs = this.toAbs( target, step, date );\n\t\tif( abs < 1e-24 ) {\n\t\t\treturn this.format_( target, 1e+00, \"\"  );\n\t\t} else if( abs < 1e-21 ) {\n\t\t\treturn this.format_( target, 1e+24, \"y\" );\n\t\t} else if( abs < 1e-18 ) {\n\t\t\treturn this.format_( target, 1e+21, \"z\" );\n\t\t} else if( abs < 1e-15 ) {\n\t\t\treturn this.format_( target, 1e+18, \"a\" );\n\t\t} else if( abs < 1e-12 ) {\n\t\t\treturn this.format_( target, 1e+15, \"f\" );\n\t\t} else if( abs < 1e-09 ) {\n\t\t\treturn this.format_( target, 1e+12, \"p\" );\n\t\t} else if( abs < 1e-06 ) {\n\t\t\treturn this.format_( target, 1e+09, \"n\" );\n\t\t} else if( abs < 1e-03 ) {\n\t\t\treturn this.format_( target, 1e+06, \"μ\" );\n\t\t} else if( abs < 1e+00 ) {\n\t\t\treturn this.format_( target, 1e+03, \"m\" );\n\t\t} else if( abs < 1e+03 ) {\n\t\t\treturn this.format_( target, 1e+00, \"\"  );\n\t\t} else if( abs < 1e+06 ) {\n\t\t\treturn this.format_( target, 1e-03, \"k\" );\n\t\t} else if( abs < 1e+09 ) {\n\t\t\treturn this.format_( target, 1e-06, \"M\" );\n\t\t} else if( abs < 1e+12 ) {\n\t\t\treturn this.format_( target, 1e-09, \"G\" );\n\t\t} else if( abs < 1e+15 ) {\n\t\t\treturn this.format_( target, 1e-12, \"T\" );\n\t\t} else if( abs < 1e+18 ) {\n\t\t\treturn this.format_( target, 1e-15, \"P\" );\n\t\t} else if( abs < 1e+21 ) {\n\t\t\treturn this.format_( target, 1e-18, \"E\" );\n\t\t} else if( abs < 1e+24 ) {\n\t\t\treturn this.format_( target, 1e-21, \"Z\" );\n\t\t} else {\n\t\t\treturn this.format_( target, 1e-24, \"Y\" );\n\t\t}\n\t}\n\n\tprotected toAbs(target: number, step: number, date: Date): number {\n\t\treturn Math.abs(target);\n\t}\n\n\tprotected format_(target: number, unitInverse: number, postfix: string): string {\n\t\tconst value = target * unitInverse;\n\t\treturn `${value.toFixed(this.precision)}${postfix}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodePrecision } from \"./format-node-precision\";\n\nexport class FormatNodeg extends FormatNodePrecision {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn target.toPrecision(this.precision);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeH implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getHours());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeh implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getHours() % 12);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeM implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getMonth() + 1);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodem implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getMinutes());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodemi implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getMilliseconds());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeP implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${(target * 100) | 0}%`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodep implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${target | 0}%`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilPad = ( str: string, length: number, c: string ): string => {\n\tconst strLength = str.length;\n\tif( length < strLength ) {\n\t\treturn str;\n\t}\n\tlet padding = \"\";\n\tfor( let i = 0, imax = length - strLength; i < imax; ++i ) {\n\t\tpadding += c;\n\t}\n\treturn padding + str;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilPad } from \"../util-pad\";\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodePadding implements FormatNode {\n\tprotected length: number;\n\tprotected character: string;\n\tprotected node: FormatNode;\n\n\tconstructor( length: number, character: string, node: FormatNode ) {\n\t\tthis.length = length;\n\t\tthis.character = character;\n\t\tthis.node = node;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn utilPad(this.node.format(target, step, date), this.length, this.character);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeParenthesis {\n\tprotected node: FormatNode;\n\n\tconstructor( node: FormatNode ) {\n\t\tthis.node = node;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst result = this.node.format(target, step, date);\n\t\tif (0 < result.length && result[0] === \"-\") {\n\t\t\treturn `(${result.substring(1, result.length)})`;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodePlus implements FormatNode {\n\tprotected node: FormatNode;\n\n\tconstructor(node: FormatNode) {\n\t\tthis.node = node;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst result = this.node.format(target, step, date);\n\t\tif (0 < result.length && result[0] !== \"-\") {\n\t\t\treturn `+${result}`;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeRP implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${Math.round(target * 100)}%`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNoderp implements FormatNode {\n\tformat(target: number, step: number, date: Date): string {\n\t\treturn `${Math.round(target)}%`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodesdt implements FormatNode {\n\tprotected Y: FormatNode;\n\tprotected M: FormatNode;\n\tprotected D: FormatNode;\n\tprotected H: FormatNode;\n\tprotected m: FormatNode;\n\tprotected s: FormatNode;\n\tprotected mi: FormatNode;\n\n\tconstructor(\n\t\tY: FormatNode, M: FormatNode, D: FormatNode,\n\t\tH: FormatNode, m: FormatNode, s: FormatNode, mi: FormatNode\n\t) {\n\t\tthis.Y = Y;\n\t\tthis.M = M;\n\t\tthis.D = D;\n\t\tthis.H = H;\n\t\tthis.m = m;\n\t\tthis.s = s;\n\t\tthis.mi = mi;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\tif (step < 1000) {\n\t\t\treturn `${this.s.format(target, step, date)}.${this.mi.format(target, step, date)}`;\n\t\t} else if (step < 60000) {\n\t\t\treturn `${this.m.format(target, step, date)}:${this.s.format(target, step, date)}`;\n\t\t} else if (step < 3600000) {\n\t\t\treturn `${this.H.format(target, step, date)}:${this.m.format(target, step, date)}`;\n\t\t} else if (step < 86400000) {\n\t\t\tconst M = this.M.format(target, step, date);\n\t\t\tconst D = this.D.format(target, step, date);\n\t\t\treturn `${M}/${D} ${this.H.format(target, step, date)}`;\n\t\t} else if (step < 2592000000) {\n\t\t\treturn `${this.M.format(target, step, date)}/${this.D.format(target, step, date)}`;\n\t\t} else {\n\t\t\treturn `${this.Y.format(target, step, date)}/${this.M.format(target, step, date)}`;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeSpace {\n\tprotected node: FormatNode;\n\tconstructor(node: FormatNode) {\n\t\tthis.node = node;\n\t}\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst result = this.node.format(target, step, date);\n\t\tif( 0 < result.length && result[0] !== \"-\" ) {\n\t\t\treturn ` ${result}`;\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNodefsi } from \"./format-node-fsi\";\n\nexport class FormatNodessi extends FormatNodefsi {\n\tprotected toAbs( target: number, step: number, date: Date ): number {\n\t\treturn Math.abs(step);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeString implements FormatNode {\n\tprotected str: string;\n\n\tconstructor(str: string) {\n\t\tthis.str = str;\n\t}\n\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn this.str;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodeY implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getFullYear());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodey implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getFullYear() % 100);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilPad } from \"../util-pad\";\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodez implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\tconst z = date.getTimezoneOffset();\n\t\tconst tzs = (z <= 0 ? \"+\" : \"-\");\n\t\tconst tzh = utilPad(String(Math.floor(Math.abs(z) / 60)), 2, \"0\");\n\t\tconst tzm = utilPad(String(Math.floor(Math.abs(z) % 60)), 2, \"0\");\n\t\treturn `${tzs}${tzh}:${tzm}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNoderd implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn `${Math.round(target)}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node\";\n\nexport class FormatNodes implements FormatNode {\n\tformat( target: number, step: number, date: Date ): string {\n\t\treturn String(date.getSeconds());\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { FormatNode } from \"./format-node/format-node\";\nimport { FormatNodeA } from \"./format-node/format-node-a-large\";\nimport { FormatNodea } from \"./format-node/format-node-a-small\";\nimport { FormatNodeD } from \"./format-node/format-node-d-large\";\nimport { FormatNoded } from \"./format-node/format-node-d-small\";\nimport { FormatNodee } from \"./format-node/format-node-e\";\nimport { FormatNodef } from \"./format-node/format-node-f\";\nimport { FormatNodefsi } from \"./format-node/format-node-fsi\";\nimport { FormatNodeg } from \"./format-node/format-node-g\";\nimport { FormatNodeH } from \"./format-node/format-node-h-large\";\nimport { FormatNodeh } from \"./format-node/format-node-h-small\";\nimport { FormatNodeM } from \"./format-node/format-node-m-large\";\nimport { FormatNodem } from \"./format-node/format-node-m-small\";\nimport { FormatNodemi } from \"./format-node/format-node-mi\";\nimport { FormatNodeP } from \"./format-node/format-node-p-large\";\nimport { FormatNodep } from \"./format-node/format-node-p-small\";\nimport { FormatNodePadding } from \"./format-node/format-node-padding\";\nimport { FormatNodeParenthesis } from \"./format-node/format-node-parenthesis\";\nimport { FormatNodePlus } from \"./format-node/format-node-plus\";\nimport { FormatNodeRP } from \"./format-node/format-node-rp-large\";\nimport { FormatNoderp } from \"./format-node/format-node-rp-small\";\nimport { FormatNodesdt } from \"./format-node/format-node-sdt\";\nimport { FormatNodeSpace } from \"./format-node/format-node-space\";\nimport { FormatNodessi } from \"./format-node/format-node-ssi\";\nimport { FormatNodeString } from \"./format-node/format-node-string\";\nimport { FormatNodeY } from \"./format-node/format-node-y-large\";\nimport { FormatNodey } from \"./format-node/format-node-y-small\";\nimport { FormatNodez } from \"./format-node/format-node-z\";\nimport { FormatNoderd } from \"./format-node/format-noder-d\";\nimport { FormatNodes } from \"./format-node/format-nodes\";\nimport { NumberFormatter, NumberFormatterFunction } from \"./number-formatter\";\n\n// tslint:disable-next-line: max-line-length\nconst REGEXP = /%(0|_|-|\\+|\\()?(\\.\\d+)?(Y(?:MD?)?|y(?:MD?)?|MD?|D|H(?:ms?)?|h(?:ms?)?|m(?:i|s)?|a|A|s(?:s?i|dt)?|z|%|f(?:si)?|e|g|d|r(?:d|p)|p|P|RP)/g;\n\nexport class NumberFormatterImpl implements NumberFormatter {\n\tprotected isDateRequired: boolean;\n\tprotected nodes: FormatNode[];\n\tprotected date: Date;\n\n\tconstructor( format: string ) {\n\t\tlet previousIndex = 0;\n\t\tlet isDateRequired = false;\n\t\tconst nodes: FormatNode[] = [];\n\t\tREGEXP.lastIndex = 0;\n\t\twhile( true ) {\n\t\t\tconst matched = REGEXP.exec( format );\n\t\t\tif( matched != null ) {\n\t\t\t\tconst index = matched.index;\n\t\t\t\tif( previousIndex < index ) {\n\t\t\t\t\tnodes.push( new FormatNodeString( format.substring( previousIndex, index ) ) );\n\t\t\t\t}\n\t\t\t\tpreviousIndex = index + matched[ 0 ].length;\n\n\t\t\t\tconst all = matched[ 0 ];\n\t\t\t\tconst modifier = matched[ 1 ];\n\t\t\t\tconst precision = matched[ 2 ];\n\t\t\t\tconst specifier = matched[ 3 ];\n\n\t\t\t\tswitch( specifier ) {\n\t\t\t\tcase \"Y\": // full year\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( new FormatNodeY() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"YM\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tnew FormatNodeY(),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"YMD\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tnew FormatNodeY(),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeD() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"y\": // short year: [0, 99]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodey() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"yM\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodey() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"yMD\":\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodey() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeD() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\": // month: [1, 12]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodeM() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"MD\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() ),\n\t\t\t\t\t\tnew FormatNodeString( \"/\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeD() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"D\": // day of the month: [1, 31]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodeD() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"H\": // 24-hour clock: [0, 23]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodeH() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Hm\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeH() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Hms\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeH() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodes() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"h\": // 12-hour clock: [1, 12]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodeh() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"hm\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeh() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"hms\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeh() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodes() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\": // minute [0, 59]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodem() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ms\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() ),\n\t\t\t\t\t\tnew FormatNodeString( \":\" ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodes() )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"mi\": // milliseconds [0, 999]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime3( modifier, new FormatNodemi() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"a\": // am or pm\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( new FormatNodea() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"A\": // AM or PM\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( new FormatNodeA() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"s\": // seconds: [0, 61]\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( this.toModifiedNodeDatetime2( modifier, new FormatNodes() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"sdt\":\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push(new FormatNodesdt(\n\t\t\t\t\t\tnew FormatNodeY(),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeM() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeD() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodeH() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodem() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime2( modifier, new FormatNodes() ),\n\t\t\t\t\t\tthis.toModifiedNodeDatetime3( modifier, new FormatNodemi() )\n\t\t\t\t\t));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"z\": // time zone\n\t\t\t\t\tisDateRequired = true;\n\t\t\t\t\tnodes.push( new FormatNodez() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%\": // a % literal\n\t\t\t\t\tnodes.push( new FormatNodeString( \"%\" ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\": // fixed point notation\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodef( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"e\": // exponent notation\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodee( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"g\": // %f or %e\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodeg( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"rd\": // rounded decimal notation\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNoderd() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d\": // decimal notation\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNoded() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"P\": // percent notation (Multiplied by 100)\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodeP() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"p\": // percent notation (Not multiplied by 100)\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodep() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"RP\": // percent notation (Multiplied by 100)\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodeRP() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"rp\": // percent notation (Not multiplied by 100)\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNoderp() ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fsi\": // fixed point notation with a SI prefix\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodefsi( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ssi\": // Step-based fixed point notation with a SI prefix\n\t\t\t\t\tnodes.push( this.toModifiedNodeNumber( modifier, new FormatNodessi( precision ) ) );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tnodes.push( new FormatNodeString( all ) );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( previousIndex < format.length ) {\n\t\t\t\t\tnodes.push( new FormatNodeString( format.substring( previousIndex, format.length ) ) );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.isDateRequired = isDateRequired;\n\t\tthis.nodes = nodes;\n\t\tthis.date = new Date();\n\t}\n\n\tprotected toModifiedNodeDatetime2( modifier: string, node: FormatNode ): FormatNode {\n\t\tswitch( modifier ) {\n\t\tcase \"_\":\n\t\t\treturn new FormatNodePadding( 2, \" \", node );\n\t\tcase \"-\":\n\t\t\treturn node;\n\t\tdefault:\n\t\t\treturn new FormatNodePadding( 2, \"0\", node );\n\t\t}\n\t}\n\n\tprotected toModifiedNodeDatetime3( modifier: string, node: FormatNode ): FormatNode {\n\t\tswitch( modifier ) {\n\t\tcase \"_\":\n\t\t\treturn new FormatNodePadding( 3, \" \", node );\n\t\tcase \"-\":\n\t\t\treturn node;\n\t\tdefault:\n\t\t\treturn new FormatNodePadding( 3, \"0\", node );\n\t\t}\n\t}\n\n\tprotected toModifiedNodeNumber( modifier: string, node: FormatNode ): FormatNode {\n\t\tswitch( modifier ) {\n\t\tcase \"_\": // space for non-negative numbers\n\t\t\treturn new FormatNodeSpace( node );\n\t\tcase \"+\": // plus sign for non-negative numbers\n\t\t\treturn new FormatNodePlus( node );\n\t\tcase \"(\": // parenthesis for the negative numbers\n\t\t\treturn new FormatNodeParenthesis( node );\n\t\tdefault:\n\t\t\treturn node;\n\t\t}\n\t}\n\n\tformat( target: number, step: number ): string {\n\t\tconst nodes = this.nodes;\n\t\tconst date = this.date;\n\t\tif( this.isDateRequired ) {\n\t\t\tdate.setTime( target );\n\t\t}\n\t\tlet result = \"\";\n\t\tfor( let i = 0, imax = nodes.length; i < imax; ++i ) {\n\t\t\tresult += nodes[ i ].format( target, step, date );\n\t\t}\n\t\treturn result;\n\t}\n\n\ttoFunction(): NumberFormatterFunction {\n\t\treturn ( target: number, step: number ): string => {\n\t\t\treturn this.format( target, step );\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NumberFormatter } from \"./number-formatter\";\nimport { NumberFormatterImpl } from \"./number-formatter-impl\";\n\nexport class NumberFormatters {\n\tstatic create( format: string ): NumberFormatter {\n\t\treturn new NumberFormatterImpl( format );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilAlpha {\n\tstatic blend( alphaA: number, alphaB: number, t: number ): number {\n\t\tconst w = Math.max( 0, Math.min( 1, t ) );\n\t\treturn Math.max( 0, Math.min( 1, alphaA * (1 - w) + alphaB * w ) );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { resources } from \"pixi.js\";\n\nexport class SVGResource extends resources.BaseImageResource {\n\treadonly source!: HTMLImageElement;\n\treadonly svg: string;\n\n\tprotected _load: Promise<void> | null = null;\n\n\tconstructor( source: string, options: any ) {\n\t\tsuper( new Image() );\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\t\tthis.svg = source;\n\n\t\tresources.BaseImageResource.crossOrigin( this.source, this.svg, options && options.crossorigin );\n\n\t\tif( ! options || options.autoLoad !== false ) {\n\t\t\tthis.load();\n\t\t}\n\t}\n\n\tload(): Promise<void> {\n\t\tif( this._load ) {\n\t\t\treturn this._load;\n\t\t}\n\n\t\tthis._load = new Promise(( resolve ): void => {\n\t\t\tconst image: HTMLImageElement = this.source;\n\n\t\t\timage.onerror = ( event ): void => {\n\t\t\t\timage.onerror = null;\n\t\t\t\t(this as any).onError.run( event ); // TODO: Fix PixiJS\n\t\t\t};\n\n\t\t\timage.onload = (): void => {\n\t\t\t\t(this.resize as any)( image.width, image.height ); // TODO: Fix PixiJS\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\timage.src = this.svg;\n\t\t});\n\n\t\treturn this._load;\n\t}\n\n\tstatic test( source: unknown, extension: string ) {\n\t\t// url file extension is SVG\n\t\treturn extension === \"svg\"\n\t\t\t// source is SVG data-uri\n\t\t\t|| (typeof source === \"string\" && source.indexOf(\"data:image/svg+xml;base64\") === 0)\n\t\t\t// source is SVG inline\n\t\t\t|| (typeof source === \"string\" && source.indexOf(\"<svg\") === 0);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilToSvgUrl = ( svg: string ): string => {\n\treturn `data:image/svg+xml;base64,${btoa(svg)}`;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, Rectangle, resources, SCALE_MODES, Texture } from \"pixi.js\";\nimport { SVGResource } from \"../resource/svg-resource\";\nimport { utilToSvgUrl } from \"./util-to-svg-url\";\n\n// PixiJS's SVGResource has a issue on Microsoft Edge.\n// Edge may invoke the HTMLImageElement#onload on an unexpected timing.\n// Thus, PixiJS may lost the `load` event in some situations.\nresources.INSTALLED.push( SVGResource );\n\nexport interface UtilSvgAtlasBuilderBuildOptions {\n\tforce?: boolean;\n\tscaling?: SCALE_MODES;\n\tresolution?: number;\n}\n\nexport class UtilSvgAtlasBuilder {\n\tprotected _width: number;\n\tprotected _ratio: number;\n\tprotected _margin: number;\n\n\tprotected _frames: { [ name: string ]: Rectangle };\n\tprotected _svg: string;\n\tprotected _nextX: number;\n\tprotected _nextY: number;\n\tprotected _height: number;\n\n\tprotected _built?: { [ name: string ]: Texture };\n\n\tconstructor( width: number, ratio: number, margin: number ) {\n\t\tthis._width = width;\n\t\tthis._ratio = ratio;\n\t\tthis._margin = margin;\n\n\t\tthis._frames = {};\n\t\tthis._svg = \"\";\n\t\tthis._nextX = 0;\n\t\tthis._nextY = 0;\n\t\tthis._height = 0;\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tget ratio(): number {\n\t\treturn this._ratio;\n\t}\n\n\tget margin(): number {\n\t\treturn this._margin;\n\t}\n\n\tadd( name: string, width: number, height: number, path: string ): boolean {\n\t\tconst frames = this._frames;\n\t\tif( ! ( name in frames ) ) {\n\t\t\t// Position\n\t\t\tconst margin = this._margin;\n\t\t\tlet x = this._nextX;\n\t\t\tlet y = this._nextY;\n\t\t\tif( this._width <= x + width ) {\n\t\t\t\tx = 0;\n\t\t\t\ty = this._nextY + this._height + margin;\n\t\t\t\tthis._height = height;\n\t\t\t\tthis._nextY = y;\n\t\t\t} else {\n\t\t\t\tthis._height = Math.max( this._height, height );\n\t\t\t}\n\t\t\tthis._nextX = x + width + margin;\n\n\t\t\t// Frame\n\t\t\tframes[ name ] = new Rectangle( x, y, width, height );\n\n\t\t\t// Svg\n\t\t\tconst ratio = this._ratio;\n\t\t\tthis._svg += `<g transform=\"translate(${x * ratio},${y * ratio})\">${path}</g>`;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tget mappings(): { [ name: string ]: Texture } {\n\t\treturn this.build();\n\t}\n\n\tbuild( options?: UtilSvgAtlasBuilderBuildOptions ): { [ name: string ]: Texture } {\n\t\tlet built = this._built;\n\t\tif( built == null || (options && options.force) ) {\n\t\t\tconst resolution = ( options && options.resolution != null ?\n\t\t\t\toptions.resolution : (window.devicePixelRatio || 1)\n\t\t\t);\n\t\t\tconst width = this._width;\n\t\t\tconst height = Math.pow( 2, Math.ceil( Math.log( this._nextY + this._height ) / Math.LN2 ) );\n\t\t\tconst realWidth = width * resolution;\n\t\t\tconst realHeight = height * resolution;\n\t\t\tconst ratio = this._ratio;\n\t\t\tconst attrWidth = `width=\"${realWidth}\"`;\n\t\t\tconst attrHeight = `height=\"${realHeight}\"`;\n\t\t\tconst attrViewBox = `viewBox=\"0 0 ${width * ratio} ${height * ratio}\"`;\n\t\t\tconst attrXmlns = `xmlns=\"http://www.w3.org/2000/svg\"`;\n\t\t\tconst url = utilToSvgUrl( `<svg ${attrWidth} ${attrHeight} ${attrViewBox} ${attrXmlns}>${this._svg}</svg>` );\n\t\t\tconst scaleMode = (options && options.scaling != null ? options.scaling : SCALE_MODES.NEAREST);\n\t\t\tconst baseTexture = BaseTexture.from( url, {\n\t\t\t\tresolution,\n\t\t\t\tscaleMode\n\t\t\t});\n\t\t\tconst frames = this._frames;\n\t\t\tbuilt = this._built = {};\n\t\t\tfor( const name in frames ) {\n\t\t\t\tbuilt[ name ] = new Texture( baseTexture, frames[ name ] );\n\t\t\t}\n\t\t}\n\t\treturn built;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Rectangle } from \"pixi.js\";\n\nexport interface UtilAttachTarget {\n\treadonly width: number;\n\treadonly height: number;\n\treadonly position: IPoint;\n}\n\nexport enum UtilAttachAlign {\n\tTOP,\n\tLEFT,\n\tRIGHT,\n\tBOTTOM\n}\n\nexport class UtilAttach {\n\tstatic attach(\n\t\ttarget: UtilAttachTarget,\n\t\tbounds: Rectangle,\n\t\toffsetX: number, offsetY: number,\n\t\tclippingWidth: number, clippingHeight: number,\n\t\talign: UtilAttachAlign\n\t): void {\n\t\tconst width = target.width;\n\t\tconst height = target.height;\n\t\tlet x = 0;\n\t\tlet y = 0;\n\t\tswitch( align ) {\n\t\tcase UtilAttachAlign.LEFT:\n\t\t\tx = bounds.left - width - offsetX;\n\t\t\tif( x < 0 ) {\n\t\t\t\tx = bounds.right + offsetX;\n\t\t\t\tif( clippingWidth < x + width ) {\n\t\t\t\t\tx = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\ty = this.adjust( bounds.top, height, clippingHeight );\n\t\t\tbreak;\n\t\tcase UtilAttachAlign.TOP:\n\t\t\tx = this.adjust( bounds.left, width, clippingWidth );\n\t\t\ty = bounds.top - height - offsetY;\n\t\t\tif( y < 0 ) {\n\t\t\t\ty = bounds.bottom + offsetY;\n\t\t\t\tif( clippingHeight < y + height ) {\n\t\t\t\t\ty = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase UtilAttachAlign.RIGHT:\n\t\t\tx = bounds.right + offsetX;\n\t\t\tif( clippingWidth < x + width ) {\n\t\t\t\tx = bounds.left - width - offsetX;\n\t\t\t\tif( x < 0 ) {\n\t\t\t\t\tx = clippingWidth - width;\n\t\t\t\t}\n\t\t\t}\n\t\t\ty = this.adjust( bounds.top, height, clippingHeight );\n\t\t\tbreak;\n\t\tcase UtilAttachAlign.BOTTOM:\n\t\t\tx = this.adjust( bounds.left, width, clippingWidth );\n\t\t\ty = bounds.bottom + offsetY;\n\t\t\tif( clippingHeight < y + height ) {\n\t\t\t\ty = bounds.top - height - offsetY;\n\t\t\t\tif( y < 0 ) {\n\t\t\t\t\ty = clippingHeight - height;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\ttarget.position.set( x, y );\n\t}\n\n\tstatic adjust( position: number, size: number, clippingSize: number ): number {\n\t\tif( position < 0 ) {\n\t\t\tif( clippingSize < position + size ) {\n\t\t\t\treturn (clippingSize - size) * 0.5;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t} else if( clippingSize < position + size ) {\n\t\t\tif( clippingSize < size ) {\n\t\t\t\treturn (clippingSize - size) * 0.5;\n\t\t\t} else {\n\t\t\t\treturn clippingSize - size;\n\t\t\t}\n\t\t}\n\t\treturn position;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DMouseModifier {\n\tNONE\t\t= 0,\n\tCTRL\t\t= 1,\n\tSHIFT\t\t= 2,\n\tALT\t\t\t= 4,\n\n\tAND\t\t\t= 8,\n\tOR\t\t\t= 16,\n\n\tNOT_NONE\t= CTRL | SHIFT | ALT | OR\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DBase } from \"../d-base\";\nimport { UtilPointerEvent } from \"./util-pointer-event\";\n\nexport type UtilClickOutsideOnClick = ( e: InteractionEvent ) => void;\n\nexport class UtilClickOutside {\n\tprotected static point = new Point();\n\n\tstatic apply( target: DBase<any, any>, onClick: UtilClickOutsideOnClick ) {\n\t\ttarget.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\n\t\t\tif( e.target === target ) {\n\t\t\t\tconst point = this.point;\n\t\t\t\tpoint.copyFrom( e.data.global );\n\t\t\t\ttarget.toLocal( point, undefined, point, true );\n\t\t\t\tconst x = point.x;\n\t\t\t\tconst y = point.y;\n\t\t\t\tif( x < 0 || y < 0 || target.width < x || target.height < y ) {\n\t\t\t\t\tonClick( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\n\nconst getSelection = ( element: Element ): Selection | null => {\n\tconst selection = document.getSelection();\n\tif( selection ) {\n\t\tconst range = document.createRange();\n\t\trange.selectNodeContents( element );\n\t\tselection.removeAllRanges();\n\t\tselection.addRange( range );\n\t}\n\treturn selection;\n};\n\nconst toClipboardData = ( e: ClipboardEvent ): DataTransfer => {\n\treturn e.clipboardData || (window as any).clipboardData;\n};\n\nconst copyUsingDiv = ( text: string ): boolean => {\n\tconst div = document.createElement( \"div\" );\n\tdiv.setAttribute( \"style\", \"-webkit-user-select: text !important\" );\n\tdiv.textContent = \"Dummy\";\n\tdocument.body.appendChild( div );\n\tconst selection = getSelection( div );\n\tlet result = false;\n\tif( selection ) {\n\t\tconst handler = ( e: ClipboardEvent ): void => {\n\t\t\tif( e.target === div ) {\n\t\t\t\tconst clipboardData = toClipboardData( e );\n\t\t\t\tclipboardData.setData( \"text/plain\", text );\n\t\t\t\tresult = ( clipboardData.getData( \"text/plain\" ) === text );\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener( \"copy\", handler );\n\t\ttry {\n\t\t\tdocument.execCommand( \"copy\" );\n\t\t} finally {\n\t\t\tdocument.removeEventListener( \"copy\", handler );\n\t\t}\n\t\tselection.removeAllRanges();\n\t}\n\tdocument.body.removeChild( div );\n\treturn result;\n};\n\nconst copyUsingSpan = ( text: string ): boolean => {\n\tconst div = document.createElement( \"div\" );\n\tdiv.setAttribute( \"style\", \"-webkit-user-select: text !important\" );\n\tconst span = document.createElement( \"span\" );\n\tspan.innerText = text;\n\tconst root: Node = ( div.attachShadow ? div.attachShadow({ mode: \"open\" }) : div );\n\troot.appendChild( span );\n\tdocument.body.appendChild( div );\n\tlet result = false;\n\tconst selection = getSelection( div );\n\tif( selection ) {\n\t\tresult = document.execCommand( \"copy\" );\n\t\tselection.removeAllRanges();\n\t}\n\tdocument.body.removeChild( div );\n\treturn result;\n};\n\nconst copyUsingWindow = ( window: Window, text: string ): boolean => {\n\tif( typeof ClipboardEvent === \"undefined\" ) {\n\t\tconst clipboardData = (window as any).clipboardData;\n\t\tif( typeof clipboardData !== \"undefined\" && typeof clipboardData.setData !== \"undefined\" ) {\n\t\t\tclipboardData.setData( \"Text\", text );\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nexport class UtilClipboard extends utils.EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\n\t\tconst element = document.body;\n\t\telement.addEventListener( \"copy\", ( e: ClipboardEvent ): void => {\n\t\t\tif( e.target === element ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.emit( \"copy\", toClipboardData( e ) );\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener( \"cut\", ( e: ClipboardEvent ): void => {\n\t\t\tif( e.target === element ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.emit( \"cut\", toClipboardData( e ) );\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener( \"paste\", ( e: ClipboardEvent ): void => {\n\t\t\tif( e.target === element ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.emit( \"paste\", toClipboardData( e ) );\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic copy( text: string ): void {\n\t\tconst clipboard = navigator.clipboard;\n\t\tif( clipboard && clipboard.writeText ) {\n\t\t\tclipboard.writeText( text );\n\t\t} else {\n\t\t\tif( ! copyUsingWindow( window, text ) ) {\n\t\t\t\tif( ! copyUsingDiv( text ) ) {\n\t\t\t\t\tif( navigator.userAgent.indexOf( \"Edge\" ) < 0 ) {\n\t\t\t\t\t\tcopyUsingSpan( text );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilDragEasingHistory {\n\tdx: number;\n\tdy: number;\n\tds: number;\n\tdt: number;\n\n\tconstructor( dx: number, dy: number, ds: number, dt: number ) {\n\t\tthis.dx = dx;\n\t\tthis.dy = dy;\n\t\tthis.ds = ds;\n\t\tthis.dt = dt;\n\t}\n\n\tset( dx: number, dy: number, ds: number, dt: number ) {\n\t\tthis.dx = dx;\n\t\tthis.dy = dy;\n\t\tthis.ds = ds;\n\t\tthis.dt = dt;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class DAnimationTimings {\n\tstatic LINEAR( t: number ): number {\n\t\treturn t;\n\t}\n\n\tstatic ELASTIC( t: number ): number {\n\t\treturn t * ( 3 * (1 - t) * (1 - t) + t * ( 3 * (1 - t) + t ) );\n\t}\n\n\tstatic QUAD_IN_OUT( t: number ): number {\n\t\treturn t < 0.5 ? 2 * t * t : -1 + ( 4 - 2 * t ) * t;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DAnimation, DAnimationOnEnd, DAnimationOnTime, DAnimationOptions, DAnimationTiming } from \"./d-animation\";\nimport { DAnimationTimings } from \"./d-animation-timings\";\nimport { DBase } from \"./d-base\";\n\nexport class DAnimationBase extends utils.EventEmitter implements DAnimation {\n\tprotected _id: number | null;\n\tprotected _startTime: number;\n\tprotected _duration: number;\n\tprotected _durationInverse: number;\n\tprotected _reverse: boolean;\n\tprotected _onTime: DAnimationOnTime | undefined;\n\tprotected _onTimeBaseBound: () => void;\n\tprotected _onStart: DAnimationOnEnd | undefined;\n\tprotected _onEnd: DAnimationOnEnd | undefined;\n\tprotected _timing: DAnimationTiming;\n\tprotected _target: DBase<any, any> | null;\n\n\tconstructor( options?: DAnimationOptions ) {\n\t\tsuper();\n\n\t\tthis._id = null;\n\t\tthis._target = null;\n\t\tthis._startTime = 0;\n\t\tthis._duration = ( options != null && options.duration != null ? options.duration : 200 );\n\t\tthis._durationInverse = 1 / Math.max( 1, this._duration );\n\t\tthis._reverse = false;\n\t\tthis._onTime = ( options != null ? options.onTime : undefined );\n\t\tthis._onTimeBaseBound = () => {\n\t\t\tthis.onTimeBase();\n\t\t};\n\t\tthis._onStart = ( options != null ? options.onStart : undefined );\n\t\tthis._onEnd = ( options != null ? options.onEnd : undefined );\n\t\tthis._timing = ( options != null && options.timing != null ? options.timing : DAnimationTimings.ELASTIC );\n\t}\n\n\tget target(): DBase<any, any> | null {\n\t\treturn this._target;\n\t}\n\n\tset target( target: DBase<any, any> | null ) {\n\t\tthis._target = target;\n\t}\n\n\tget duration(): number {\n\t\treturn this._duration;\n\t}\n\n\tset duration( duration: number ) {\n\t\tthis._duration = duration;\n\t\tthis._durationInverse = 1 / Math.max( 1, duration );\n\t}\n\n\tstart( reverse: boolean = false ): void {\n\t\tthis.stop();\n\t\tthis._startTime = Date.now();\n\t\tthis._reverse = reverse;\n\t\tthis._id = window.setTimeout( this._onTimeBaseBound, 0 );\n\n\t\t// onStart\n\t\tthis.onStart( reverse );\n\n\t\t// onTime\n\t\tconst duration = this._duration;\n\t\tconst time = this.toTime( reverse ? duration : 0 );\n\t\tthis.onTime( time, reverse, 0 );\n\t}\n\n\tprotected onStart( isReverse: boolean ): void {\n\t\tconst onStart = this._onStart;\n\t\tif( onStart != null ) {\n\t\t\tonStart( isReverse, this );\n\t\t}\n\t\tthis.emit( \"start\", isReverse, this );\n\t}\n\n\tprotected onTime( time: number, isReverse: boolean, elapsedTime: number ): void {\n\t\tconst onTime = this._onTime;\n\t\tif( onTime != null ) {\n\t\t\tonTime( time, isReverse, elapsedTime, this );\n\t\t}\n\t\tthis.emit( \"time\", time, isReverse, elapsedTime, this );\n\t}\n\n\tprotected onEnd( isReverse: boolean ): void {\n\t\tconst onEnd = this._onEnd;\n\t\tif( onEnd != null ) {\n\t\t\tonEnd( isReverse, this );\n\t\t}\n\t\tthis.emit( \"end\", isReverse, this );\n\t}\n\n\tisStarted(): boolean {\n\t\treturn (this._id != null);\n\t}\n\n\tisReverse(): boolean {\n\t\treturn this._reverse;\n\t}\n\n\tprotected onTimeBase(): void {\n\t\tconst id = this._id;\n\t\tif( id != null ) {\n\t\t\tthis._id = null;\n\t\t\tconst elapsedTime = Date.now() - this._startTime;\n\t\t\tconst duration = this._duration;\n\t\t\tconst reverse = this._reverse;\n\t\t\tif( elapsedTime < duration ) {\n\t\t\t\tthis._id = window.setTimeout( this._onTimeBaseBound, 0 );\n\n\t\t\t\t// OnTime\n\t\t\t\tconst time = this.toTime( reverse ? duration - elapsedTime : elapsedTime );\n\t\t\t\tthis.onTime( time, reverse, elapsedTime );\n\t\t\t} else {\n\t\t\t\t// OnTime\n\t\t\t\tconst time = this.toTime( reverse ? 0 : duration );\n\t\t\t\tthis.onTime( time, reverse, elapsedTime );\n\n\t\t\t\t// OnEnd\n\t\t\t\tthis.onEnd( reverse );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected toTime( elapsedTime: number ): number {\n\t\treturn this._timing( elapsedTime * this._durationInverse, this );\n\t}\n\n\tstop(): void {\n\t\tconst id = this._id;\n\t\tif( id != null ) {\n\t\t\tthis._id = null;\n\t\t\twindow.clearTimeout( id );\n\t\t}\n\t}\n\n\tend(): void {\n\t\tconst id = this._id;\n\t\tif( id != null ) {\n\t\t\tthis._id = null;\n\t\t\twindow.clearTimeout( id );\n\n\t\t\t// OnTime\n\t\t\tconst reverse = this._reverse;\n\t\t\tconst elapsedTime = Date.now() - this._startTime;\n\t\t\tconst duration = this._duration;\n\t\t\tconst time = this.toTime( reverse ? 0 : duration );\n\t\t\tthis.onTime( time, reverse, elapsedTime );\n\n\t\t\t// OnEnd\n\t\t\tthis.onEnd( reverse );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAnimation } from \"../d-animation\";\nimport { DAnimationBase } from \"../d-animation-base\";\nimport { DAnimationTimings } from \"../d-animation-timings\";\nimport { UtilDragEasingHistory } from \"./util-drag-easing-history\";\n\nexport interface UtilDragEasingOptions {\n\tduration?: {\n\t\tposition?: number;\n\t\tscale?: number;\n\t};\n\ton: {\n\t\tmove: ( dx: number, dy: number, ds: number, time: number ) => void;\n\t};\n}\n\nexport class UtilDragEasing {\n\tprotected static HISTORY_CAPACITY = 5;\n\tprotected _histories: UtilDragEasingHistory[];\n\tprotected _historiesSorted: UtilDragEasingHistory[];\n\tprotected _historyBegin: number;\n\tprotected _historyEnd: number;\n\tprotected _animation: DAnimation;\n\tprotected _dx: number;\n\tprotected _dy: number;\n\tprotected _dt: number;\n\tprotected _ds: number;\n\tprotected _durationPosition: number;\n\tprotected _durationScale: number;\n\tprotected _onMove: ( dx: number, dy: number, ds: number, time: number ) => void;\n\n\tconstructor( options: UtilDragEasingOptions ) {\n\t\tthis._histories = [];\n\t\tthis._historiesSorted = [];\n\t\tthis._historyBegin = 0;\n\t\tthis._historyEnd = -1;\n\t\tthis._dx = 0;\n\t\tthis._dy = 0;\n\t\tthis._ds = 0;\n\t\tthis._dt = 0;\n\t\tthis._animation = new DAnimationBase({\n\t\t\tonTime: ( t: number ): void => {\n\t\t\t\tthis.onEase( t );\n\t\t\t},\n\t\t\ttiming: DAnimationTimings.LINEAR,\n\t\t\tduration: 1000\n\t\t});\n\t\tconst duration = options && options.duration;\n\t\tif( duration ) {\n\t\t\tthis._durationPosition = ( duration.position != null ? duration.position : 1 );\n\t\t\tthis._durationScale = ( duration.scale != null ? duration.scale : 1 );\n\t\t} else {\n\t\t\tthis._durationPosition = 1;\n\t\t\tthis._durationScale = 1;\n\t\t}\n\t\tthis._onMove = options.on.move;\n\t}\n\n\tonStart(): void {\n\t\t// History\n\t\tconst histories = this._histories;\n\t\tfor( let i = histories.length, imax = UtilDragEasing.HISTORY_CAPACITY; i < imax; ++i ) {\n\t\t\thistories.push( new UtilDragEasingHistory( 0, 0, 1, 0 ) );\n\t\t}\n\t\tthis._historyBegin = 0;\n\t\tthis._historyEnd = -1;\n\n\t\t// Stop animation\n\t\tthis._animation.stop();\n\t}\n\n\tonMove( dx: number, dy: number, ds: number, dt: number ): void {\n\t\tconst capacity = UtilDragEasing.HISTORY_CAPACITY;\n\n\t\tconst oldHistoryEnd = this._historyEnd;\n\t\tconst newHistoryEnd = (oldHistoryEnd + 1) % capacity;\n\t\tthis._historyEnd = newHistoryEnd;\n\n\t\tconst oldHistoryBegin = this._historyBegin;\n\t\tif( newHistoryEnd < oldHistoryEnd || (0 <= oldHistoryEnd && oldHistoryEnd < oldHistoryBegin) ) {\n\t\t\tthis._historyBegin = (oldHistoryBegin + 1) % capacity;\n\t\t}\n\n\t\tthis._histories[ newHistoryEnd ].set( dx, dy, ds, dt );\n\t}\n\n\tprotected updateHistoriesSorted( dt: number ): number {\n\t\tconst unsorted = this._histories;\n\t\tconst sorted = this._historiesSorted;\n\t\tconst begin = this._historyBegin;\n\t\tconst end = this._historyEnd;\n\t\tconst length = unsorted.length;\n\t\tconst threshold = 160;\n\t\tif( end < 0 ) {\n\t\t\tsorted.length = 0;\n\t\t\treturn dt;\n\t\t} else if( end < begin ) {\n\t\t\tlet total = dt;\n\t\t\tsorted.length = 0;\n\t\t\tfor( let i = end; 0 <= i; --i ) {\n\t\t\t\tconst history = unsorted[ i ];\n\t\t\t\tif( total + history.dt < threshold ) {\n\t\t\t\t\ttotal += history.dt;\n\t\t\t\t\tsorted.push( history );\n\t\t\t\t} else {\n\t\t\t\t\treturn total;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor( let i = length - 1; begin <= i; --i ) {\n\t\t\t\tconst history = unsorted[ i ];\n\t\t\t\tif( total + history.dt < threshold ) {\n\t\t\t\t\ttotal += history.dt;\n\t\t\t\t\tsorted.push( history );\n\t\t\t\t} else {\n\t\t\t\t\treturn total;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn total;\n\t\t} else {\n\t\t\tlet total = dt;\n\t\t\tsorted.length = 0;\n\t\t\tfor( let i = end; begin <= i; --i ) {\n\t\t\t\tconst history = unsorted[ i ];\n\t\t\t\tif( total + history.dt < threshold ) {\n\t\t\t\t\ttotal += history.dt;\n\t\t\t\t\tsorted.push( history );\n\t\t\t\t} else {\n\t\t\t\t\treturn total;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn total;\n\t\t}\n\t}\n\n\tonEnd( ldt: number ): void {\n\t\tconst adt = this.updateHistoriesSorted( ldt );\n\t\tconst sorted = this._historiesSorted;\n\t\tconst sortedLength = sorted.length;\n\t\tif( 0 < sortedLength ) {\n\t\t\tlet dx = 0;\n\t\t\tlet dy = 0;\n\t\t\tlet ds = 0;\n\t\t\tlet dt = 0;\n\t\t\tfor( let i = 0; i < sortedLength; ++i ) {\n\t\t\t\tconst history = sorted[ i ];\n\t\t\t\tdx += history.dx;\n\t\t\t\tdy += history.dy;\n\t\t\t\tds += history.ds;\n\t\t\t\tdt += history.dt;\n\t\t\t}\n\t\t\tconst w = (1 - ldt / adt) / sortedLength;\n\t\t\tdx *= w;\n\t\t\tdy *= w;\n\t\t\tds = 1 + (ds - sortedLength) * w;\n\t\t\tdt *= w;\n\t\t\tthis._dx = dx;\n\t\t\tthis._dy = dy;\n\t\t\tthis._ds = ds;\n\t\t\tthis._dt = dt;\n\n\t\t\t// Start animation\n\t\t\tconst d0 = this._durationPosition * 40 * Math.sqrt( dx * dx + dy * dy );\n\t\t\tconst d1 = this._durationScale * 10000 * Math.abs( ds - 1 );\n\t\t\tconst animation = this._animation;\n\t\t\tanimation.duration = Math.max( d0, d1 );\n\t\t\tanimation.start();\n\t\t}\n\t}\n\n\tprotected onEase( time: number ): void {\n\t\tconst w = 1 - time;\n\t\tthis._onMove(\n\t\t\tthis._dx * w,\n\t\t\tthis._dy * w,\n\t\t\t1 + ( this._ds - 1 ) * w,\n\t\t\ttime\n\t\t);\n\t}\n\n\tstop(): void {\n\t\tthis._animation.stop();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DMouseModifier } from \"./d-mouse-modifier\";\n\nexport type DMouseModifierEvent = WheelEvent | MouseEvent | TouchEvent | interaction.InteractionEvent;\n\nexport class DMouseModifiers {\n\tstatic from( e: DMouseModifierEvent ): DMouseModifier {\n\t\tconst oe = ( \"data\" in e ? e.data.originalEvent : e );\n\t\treturn ( oe.ctrlKey ? DMouseModifier.CTRL : DMouseModifier.NONE ) |\n\t\t\t( oe.altKey ? DMouseModifier.ALT : DMouseModifier.NONE ) |\n\t\t\t( oe.shiftKey ? DMouseModifier.SHIFT : DMouseModifier.NONE );\n\t}\n\n\tstatic match( e: DMouseModifierEvent, modifier: DMouseModifier ): boolean {\n\t\tif( modifier & DMouseModifier.OR ) {\n\t\t\treturn !! (DMouseModifiers.from( e ) & modifier);\n\t\t} else {\n\t\t\treturn DMouseModifiers.from( e ) === modifier;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum UtilFileAs {\n\tTEXT,\n\tDATA_URL,\n\tBINARY_STRING,\n\tARRAY_BUTTER\n}\n\nexport interface UtilFileFacade {\n\temit( name: string, ...args: any[] ): void;\n}\n\nexport class UtilFileOpener {\n\tprotected _input: HTMLInputElement | null;\n\tprotected _as: UtilFileAs;\n\tprotected _facade: UtilFileFacade;\n\n\tconstructor( as: UtilFileAs, facade: UtilFileFacade ) {\n\t\tthis._input = null;\n\t\tthis._as = as;\n\t\tthis._facade = facade;\n\t}\n\n\topen() {\n\t\tconst input = this.getOrCreateInput();\n\t\tif( input != null ) {\n\t\t\tinput.click();\n\t\t} else {\n\t\t\tthis.onCancel();\n\t\t}\n\t}\n\n\tprotected getOrCreateInput(): HTMLInputElement | null {\n\t\tif( \"FileReader\" in window && this._input == null ) {\n\t\t\tconst input = this._input = document.createElement( \"input\" );\n\t\t\tinput.setAttribute( \"type\", \"file\" );\n\t\t\tinput.setAttribute( \"style\", \"display:none\" );\n\t\t\tinput.addEventListener( \"change\", ( e: Event ): void => {\n\t\t\t\tthis.onInputChange( input );\n\t\t\t\tinput.value = \"\";\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\tdocument.body.appendChild( input );\n\t\t}\n\t\treturn this._input;\n\t}\n\n\tprotected onInputChange( input: HTMLInputElement ) {\n\t\tconst files = input.files;\n\t\tif( files != null && 0 < files.length ) {\n\t\t\tconst file = files[ 0 ];\n\t\t\tconst fileReader = new FileReader();\n\t\t\tfileReader.onload = ( e: ProgressEvent ) => {\n\t\t\t\tif( e.target != null ) {\n\t\t\t\t\tconst target = e.target as any;\n\t\t\t\t\tthis.onOpen( target.result );\n\t\t\t\t}\n\t\t\t};\n\t\t\tfileReader.onabort = ( e: ProgressEvent ) => {\n\t\t\t\tthis.onAboart( e );\n\t\t\t};\n\t\t\tswitch( this._as ) {\n\t\t\tcase UtilFileAs.TEXT:\n\t\t\t\tfileReader.readAsText( file );\n\t\t\t\tbreak;\n\t\t\tcase UtilFileAs.DATA_URL:\n\t\t\t\tfileReader.readAsDataURL( file );\n\t\t\t\tbreak;\n\t\t\tcase UtilFileAs.BINARY_STRING:\n\t\t\t\tfileReader.readAsBinaryString( file );\n\t\t\t\tbreak;\n\t\t\tcase UtilFileAs.ARRAY_BUTTER:\n\t\t\t\tfileReader.readAsArrayBuffer( file );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfileReader.readAsText( file );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.onCancel();\n\t\t}\n\t}\n\n\tprotected onOpen( result: unknown ): void {\n\t\tconst facade = this._facade;\n\t\tfacade.emit( \"open\", result, facade );\n\t}\n\n\tprotected onAboart( e: ProgressEvent ): void {\n\t\tconst facade = this._facade;\n\t\tfacade.emit( \"abort\", e, facade );\n\t}\n\n\tprotected onCancel(): void {\n\t\tconst facade = this._facade;\n\t\tfacade.emit( \"cancel\", facade );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport { DApplications } from \"../d-applications\";\nimport { DBase } from \"../d-base\";\nimport { DMouseModifier } from \"../d-mouse-modifier\";\nimport { DMouseModifiers } from \"../d-mouse-modifiers\";\nimport { UtilDragEasing, UtilDragEasingOptions } from \"./util-drag-easing\";\nimport { utilIsNumber } from \"./util-is-number\";\nimport { UtilPointerEvent } from \"./util-pointer-event\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport InteractionManager = interaction.InteractionManager;\n\nexport type UtilDragOnMove = ( dx: number, dy: number, x: number, y: number, ds: number ) => void;\nexport type UtilDragOnStart = () => void;\nexport type UtilDragOnEnd = () => void;\nexport type UtilDragChecker = ( e: InteractionEvent, modifier: DMouseModifier, target: DBase ) => boolean;\n\ninterface UtilDragOptionsEasingDuration {\n\tduration?: number | {\n\t\tposition?: number,\n\t\tscale?: number\n\t};\n}\n\nexport interface UtilDragOptions {\n\ttarget: DBase;\n\ttouch?: boolean;\n\tmodifier?: DMouseModifier;\n\tchecker?: {\n\t\tstart?: UtilDragChecker;\n\t\tmove?: UtilDragChecker;\n\t};\n\teasing?: boolean | UtilDragOptionsEasingDuration;\n\tbind?: boolean;\n\ton?: {\n\t\tstart?: UtilDragOnStart;\n\t\tmove?: UtilDragOnMove;\n\t\tend?: UtilDragOnEnd;\n\t};\n}\n\nconst toEasingOptions = (\n\toptions: true | UtilDragOptionsEasingDuration | undefined,\n\tonMove: ( dx: number, dy: number, ds: number, time: number ) => void\n): UtilDragEasingOptions => {\n\tif( options == null || options === true ) {\n\t\treturn {\n\t\t\ton: {\n\t\t\t\tmove: onMove\n\t\t\t}\n\t\t};\n\t} else {\n\t\tconst duration = options.duration;\n\t\tif( utilIsNumber( duration ) ) {\n\t\t\treturn {\n\t\t\t\tduration: {\n\t\t\t\t\tposition: duration,\n\t\t\t\t\tscale: duration\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tmove: onMove\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tduration,\n\t\t\t\ton: {\n\t\t\t\t\tmove: onMove\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n};\n\nconst toChecker = ( options?: UtilDragOptions ): { start: UtilDragChecker, move: UtilDragChecker } => {\n\tconst checker = options && options.checker;\n\tconst defaultChecker = DMouseModifiers.match;\n\tif( checker ) {\n\t\treturn {\n\t\t\tstart: checker.start || defaultChecker,\n\t\t\tmove: checker.move || defaultChecker\n\t\t};\n\t}\n\treturn {\n\t\tstart: defaultChecker,\n\t\tmove: defaultChecker\n\t};\n};\n\nexport class UtilDrag {\n\tprotected static EPSILON = 0.00001;\n\tprotected _target: DBase<any, any>;\n\tprotected _onDownBound: ( e: InteractionEvent ) => void;\n\tprotected _onMoveBound: ( e: InteractionEvent ) => void;\n\tprotected _onEndBound: ( e: InteractionEvent ) => void;\n\tprotected _onStart?: UtilDragOnStart;\n\tprotected _onMove?: UtilDragOnMove;\n\tprotected _onEnd?: UtilDragOnEnd;\n\tprotected _down: string;\n\tprotected _move: string;\n\tprotected _up: string;\n\tprotected _easing?: UtilDragEasing;\n\tprotected _modifier: DMouseModifier;\n\tprotected _checker: { start: UtilDragChecker, move: UtilDragChecker };\n\tprotected _interactionManager: InteractionManager | null;\n\tprotected _center: Point;\n\tprotected _scale: number;\n\tprotected _scalingCenter: Point;\n\tprotected _time: number;\n\n\tconstructor( options: UtilDragOptions ) {\n\t\tconst target = this._target = options.target;\n\t\tconst on = options.on;\n\t\tif( on ) {\n\t\t\tthis._onStart = on.start;\n\t\t\tthis._onMove = on.move;\n\t\t\tthis._onEnd = on.end;\n\t\t}\n\t\tthis._modifier = (options && options.modifier) || DMouseModifier.NONE;\n\t\tthis._checker = toChecker( options );\n\t\tthis._interactionManager = null;\n\t\tthis._center = new Point();\n\t\tthis._scale = 1;\n\t\tthis._scalingCenter = new Point();\n\t\tthis._time = 0;\n\n\t\tconst easing = options.easing;\n\t\tif( easing == null || easing !== false ) {\n\t\t\tconst onEasingMoveBound = ( dx: number, dy: number, ds: number, time: number ): void => {\n\t\t\t\tthis.onEasingMove( dx, dy, ds, time );\n\t\t\t};\n\t\t\tthis._easing = new UtilDragEasing( toEasingOptions( easing, onEasingMoveBound ) );\n\t\t}\n\n\t\tthis._onDownBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onDown( e );\n\t\t};\n\n\t\tthis._onMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onMove( e );\n\t\t};\n\n\t\tthis._onEndBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onEnd( e );\n\t\t};\n\n\t\tif( options.touch ) {\n\t\t\tthis._down = \"touchstart\";\n\t\t\tthis._move = \"touchmove\";\n\t\t\tthis._up = \"touchend\";\n\t\t} else {\n\t\t\tthis._down = UtilPointerEvent.down;\n\t\t\tthis._move = UtilPointerEvent.move;\n\t\t\tthis._up = UtilPointerEvent.up;\n\t\t}\n\n\t\tif( options.bind !== false ) {\n\t\t\ttarget.on( this._down, this._onDownBound );\n\t\t}\n\t}\n\n\tprotected calcCenterAndScale(\n\t\te: InteractionEvent, center: Point,\n\t\tinteractionManager: InteractionManager\n\t): number {\n\t\tconst oe = e.data.originalEvent;\n\t\tconst global = e.data.global;\n\t\tif( \"touches\" in oe ) {\n\t\t\tconst touches = oe.touches;\n\t\t\tconst touchesLength = touches.length;\n\t\t\tif( 0 < touchesLength ) {\n\t\t\t\t// Update the center\n\t\t\t\tconst first = touches[ 0 ];\n\t\t\t\tlet centerX = first.clientX;\n\t\t\t\tlet centerY = first.clientY;\n\t\t\t\tfor( let i = 1, imax = touches.length; i < imax; ++i ) {\n\t\t\t\t\tconst touch = touches[ i ];\n\t\t\t\t\tcenterX += touch.clientX;\n\t\t\t\t\tcenterY += touch.clientY;\n\t\t\t\t}\n\t\t\t\tcenterX /= touchesLength;\n\t\t\t\tcenterY /= touchesLength;\n\t\t\t\tinteractionManager.mapPositionToPoint( center, centerX, centerY );\n\n\t\t\t\tif( 1 < touchesLength ) {\n\t\t\t\t\t// Calculate the maximum distance from the center\n\t\t\t\t\tlet squareDistance = 0;\n\t\t\t\t\tfor( let i = 1, imax = touches.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst touch = touches[ i ];\n\t\t\t\t\t\tconst dx = touch.clientX - centerX;\n\t\t\t\t\t\tconst dy = touch.clientY - centerY;\n\t\t\t\t\t\tsquareDistance = Math.max( squareDistance, dx * dx + dy * dy );\n\t\t\t\t\t}\n\t\t\t\t\treturn Math.sqrt( squareDistance );\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcenter.copyFrom( global );\n\t\treturn 0;\n\t}\n\n\tonDown( e: InteractionEvent ): void {\n\t\tconst target = this._target;\n\t\tif( this._checker.start( e, this._modifier, target ) ) {\n\t\t\tconst layer = DApplications.getLayer( target );\n\t\t\tif( layer ) {\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tif( target.isDragging() ) {\n\t\t\t\t\tconst interactionManager = this._interactionManager;\n\t\t\t\t\tif( interactionManager ) {\n\t\t\t\t\t\tconst center = this._center;\n\t\t\t\t\t\tthis._scale = this.calcCenterAndScale( e, center, interactionManager );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttarget.setDragging( true );\n\n\t\t\t\t\t// Interaction manager\n\t\t\t\t\tconst interactionManager = layer.renderer.plugins.interaction;\n\t\t\t\t\tthis._interactionManager = interactionManager;\n\n\t\t\t\t\t// Update the center\n\t\t\t\t\tconst center = this._center;\n\t\t\t\t\tthis._scale = this.calcCenterAndScale( e, center, interactionManager );\n\n\t\t\t\t\t//\n\t\t\t\t\tthis._time = e.data.originalEvent.timeStamp;\n\n\t\t\t\t\t// Easing util\n\t\t\t\t\tconst easing = this._easing;\n\t\t\t\t\tif( easing ) {\n\t\t\t\t\t\teasing.onStart();\n\t\t\t\t\t}\n\n\t\t\t\t\t// User-defined handler\n\t\t\t\t\tconst onStart = this._onStart;\n\t\t\t\t\tif( onStart != null ) {\n\t\t\t\t\t\tonStart();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Event handler\n\t\t\t\t\tinteractionManager.on( this._move, this._onMoveBound );\n\t\t\t\t\tinteractionManager.on( this._up, this._onEndBound );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onMove( e: InteractionEvent ): void {\n\t\tconst target = this._target;\n\t\tif( target.isDragging() && this._checker.move( e, this._modifier, target ) ) {\n\t\t\tconst interactionManager = this._interactionManager;\n\t\t\tif( interactionManager ) {\n\t\t\t\t// Update the center\n\t\t\t\tconst center = this._center;\n\t\t\t\tconst centerX = center.x;\n\t\t\t\tconst centerY = center.y;\n\t\t\t\tconst newScale = this.calcCenterAndScale( e, center, interactionManager );\n\t\t\t\tconst oldScale = this._scale;\n\t\t\t\tthis._scale = newScale;\n\t\t\t\tconst oldTime = this._time;\n\t\t\t\tconst newTime = e.data.originalEvent.timeStamp;\n\t\t\t\tthis._time = newTime;\n\n\t\t\t\t// Calculate the position\n\t\t\t\tconst dx = center.x - centerX;\n\t\t\t\tconst dy = center.y - centerY;\n\t\t\t\tconst dt = newTime - oldTime;\n\t\t\t\tconst ds = ( UtilDrag.EPSILON < oldScale ? newScale / oldScale : 1 );\n\n\t\t\t\t// Easing util\n\t\t\t\tconst easing = this._easing;\n\t\t\t\tif( easing ) {\n\t\t\t\t\teasing.onMove( dx, dy, ds, dt );\n\t\t\t\t}\n\n\t\t\t\t// User-defined handler\n\t\t\t\tconst onMove = this._onMove;\n\t\t\t\tif( onMove != null ) {\n\t\t\t\t\tif( dx !== 0 || dy !== 0 || ds !== 1 ) {\n\t\t\t\t\t\tonMove( dx, dy, center.x, center.y, ds );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onEnd( e: InteractionEvent ): void {\n\t\tconst target = this._target;\n\t\tif( target.isDragging() ) {\n\t\t\tconst interactionManager = this._interactionManager;\n\t\t\tif( interactionManager ) {\n\t\t\t\t// Update the center\n\t\t\t\tconst center = this._center;\n\t\t\t\tthis._scalingCenter.copyFrom( center );\n\t\t\t\tthis._scale = this.calcCenterAndScale( e, center, interactionManager );\n\n\t\t\t\t// Finalize\n\t\t\t\tconst oe = e.data.originalEvent;\n\t\t\t\tif( \"touches\" in oe ? oe.touches.length <= 0 : true ) {\n\t\t\t\t\ttarget.setDragging( false );\n\n\t\t\t\t\t// Event handler\n\t\t\t\t\tthis._interactionManager = null;\n\t\t\t\t\tinteractionManager.off( this._move, this._onMoveBound );\n\t\t\t\t\tinteractionManager.off( this._up, this._onEndBound );\n\n\t\t\t\t\t// User-defined handler\n\t\t\t\t\tconst onEnd = this._onEnd;\n\t\t\t\t\tif( onEnd != null ) {\n\t\t\t\t\t\tonEnd();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Easing util\n\t\t\t\t\tconst easing = this._easing;\n\t\t\t\t\tif( easing ) {\n\t\t\t\t\t\teasing.onEnd( e.data.originalEvent.timeStamp - this._time );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onEasingMove( dx: number, dy: number, ds: number, time: number ): void {\n\t\tconst onMove = this._onMove;\n\t\tif( onMove != null ) {\n\t\t\tif( dx !== 0 || dy !== 0 || ds !== 1 ) {\n\t\t\t\tconst scalingCenter = this._scalingCenter;\n\t\t\t\tscalingCenter.set(\n\t\t\t\t\tscalingCenter.x + dx,\n\t\t\t\t\tscalingCenter.y + dy\n\t\t\t\t);\n\t\t\t\tonMove( dx, dy, scalingCenter.x, scalingCenter.y, ds );\n\t\t\t}\n\t\t}\n\t}\n\n\tstop(): void {\n\t\tconst easing = this._easing;\n\t\tif( easing ) {\n\t\t\teasing.stop();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { extract, Matrix, Renderer, RenderTexture, SCALE_MODES, utils } from \"pixi.js\";\nimport { DApplications } from \"../d-applications\";\nimport { DBase } from \"../d-base\";\nimport { UtilExtractorPixels } from \"./util-extractor-pixels\";\n\nexport class UtilExtractor {\n\tstatic toTexture(\n\t\ttarget: DBase, resolution?: number,\n\t\tclear?: boolean, skipUpdateTransform?: boolean\n\t): RenderTexture {\n\t\tconst result = RenderTexture.create({\n\t\t\twidth: target.width,\n\t\t\theight: target.height,\n\t\t\tscaleMode: SCALE_MODES.LINEAR,\n\t\t\tresolution\n\t\t});\n\t\tconst matrix = new Matrix(\n\t\t\tundefined, undefined, undefined, undefined,\n\t\t\t-target.position.x, -target.position.y\n\t\t);\n\t\tconst layer = DApplications.getLayer( target );\n\t\tif( layer ) {\n\t\t\tlayer.renderer.render( target, result, clear, matrix, skipUpdateTransform );\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic toPixels( renderTexture: RenderTexture, renderer: Renderer ): UtilExtractorPixels {\n\t\tconst resolution = renderTexture.resolution;\n\t\tconst frame = renderTexture.frame;\n\t\tconst width = Math.floor( frame.width * resolution );\n\t\tconst height = Math.floor( frame.height * resolution );\n\t\tconst pixels = new Uint8Array( 4 * width * height );\n\n\t\trenderer.renderTexture.bind( renderTexture );\n\t\tconst gl = (renderer as any).gl;\n\t\tgl.readPixels(\n\t\t\tframe.x * resolution,\n\t\t\tframe.y * resolution,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tgl.RGBA,\n\t\t\tgl.UNSIGNED_BYTE,\n\t\t\tpixels\n\t\t);\n\n\t\treturn {\n\t\t\twidth,\n\t\t\theight,\n\t\t\tarray: pixels\n\t\t};\n\t}\n\n\tstatic toCanvas( pixels: UtilExtractorPixels, scale?: number, ignorePremutipliedAlpha?: boolean ): HTMLCanvasElement {\n\t\tconst width = pixels.width;\n\t\tconst height = pixels.height;\n\t\tconst array = pixels.array;\n\t\tconst canvasRenderTarget = new utils.CanvasRenderTarget( width, height, 1 );\n\n\t\tconst imageData = canvasRenderTarget.context.getImageData( 0, 0, width, height );\n\t\tif( ignorePremutipliedAlpha ) {\n\t\t\timageData.data.set( array );\n\t\t} else {\n\t\t\t(extract.Extract as any).arrayPostDivide( array, imageData.data );\n\t\t}\n\t\tcanvasRenderTarget.context.putImageData( imageData, 0, 0 );\n\n\t\t// Scale down\n\t\tif( scale != null && scale !== 1 ) {\n\t\t\tcanvasRenderTarget.context.scale( scale, scale );\n\t\t\tcanvasRenderTarget.context.drawImage( canvasRenderTarget.canvas, 0, 0 );\n\t\t\tconst scaledWidth = Math.floor( width * scale );\n\t\t\tconst scaledHeight = Math.floor( height * scale );\n\t\t\tconst scaledImageData = canvasRenderTarget.context.getImageData( 0, 0, scaledWidth, scaledHeight );\n\t\t\tcanvasRenderTarget.resize( scaledWidth, scaledHeight );\n\t\t\tcanvasRenderTarget.context.putImageData( scaledImageData, 0, 0 );\n\t\t}\n\n\t\treturn canvasRenderTarget.canvas;\n\t}\n\n\tstatic toBase64( canvas: HTMLCanvasElement, format?: string, quality?: number ): string {\n\t\treturn canvas.toDataURL( format, quality );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilFileDownloader {\n\tstatic downloadUrl( filename: string, url: string ): void {\n\t\tconst a = document.createElement( \"a\" );\n\t\tif( \"download\" in a ) {\n\t\t\ta.href = url;\n\t\t\ta.setAttribute( \"download\", filename );\n\t\t\ta.style.display = \"none\";\n\t\t\tdocument.body.appendChild( a );\n\t\t\ta.click();\n\t\t\tsetTimeout((): void => {\n\t\t\t\tdocument.body.removeChild( a );\n\t\t\t}, 66);\n\t\t} else {\n\t\t\tif( ! window.open( url ) ) {\n\t\t\t\tlocation.href = url;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic download( filename: string, contents: string ): void {\n\t\tconst blob = new Blob(\n\t\t\t[ contents ],\n\t\t\t{ type: \"text/plain\" }\n\t\t);\n\t\tif( window.navigator.msSaveBlob ) {\n\t\t\twindow.navigator.msSaveBlob( blob, filename );\n\t\t} else {\n\t\t\tthis.downloadUrl( filename, URL.createObjectURL( blob ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Renderer, RenderTexture } from \"pixi.js\";\nimport { DApplicationLayerLike } from \"../d-application-layer-like\";\nimport { DApplicationLike } from \"../d-application-like\";\nimport { DApplications } from \"../d-applications\";\nimport { DBase } from \"../d-base\";\nimport { UtilExtractor } from \"./util-extractor\";\nimport { UtilExtractorPixels } from \"./util-extractor-pixels\";\nimport { UtilFileDownloader } from \"./util-file-downloader\";\nimport { utilIsNumber } from \"./util-is-number\";\n\nexport interface UtilExtractTextureOptions {\n\ttarget: DBase;\n\tresolution?: number | {\n\t\tsize: number;\n\t};\n\ttransform?: {\n\t\tupdate?: boolean;\n\t};\n\tclear?: boolean;\n}\n\nexport interface UtilExtractPixelsOptions extends UtilExtractTextureOptions {\n\trenderer?: Renderer;\n\tapplication?: DApplicationLike;\n\tlayer?: DApplicationLayerLike;\n}\n\nexport interface UtilExtractCanvasOptions extends UtilExtractPixelsOptions {\n\tscale?: number | {\n\t\tsize: number;\n\t};\n\talpha?: {\n\t\tpremultiplied?: {\n\t\t\tignore?: boolean;\n\t\t}\n\t};\n}\n\nexport interface UtilExtractBase64Options extends UtilExtractCanvasOptions {\n\tformat?: string;\n\tquality?: number;\n}\n\nexport interface UtilExtractFileOptions extends UtilExtractBase64Options {\n\tfilename: string;\n}\n\nconst toSkipUpdateTransform = ( options: UtilExtractTextureOptions ): boolean | undefined => {\n\treturn options.transform && options.transform.update;\n};\n\nconst toResolution = ( options: UtilExtractTextureOptions ): number => {\n\tconst target = options.target;\n\tif( options.resolution != null ) {\n\t\tif( utilIsNumber( options.resolution ) ) {\n\t\t\treturn options.resolution;\n\t\t} else {\n\t\t\treturn Math.min( 1, options.resolution.size / Math.max( target.width, target.height ) );\n\t\t}\n\t} else {\n\t\treturn window.devicePixelRatio || 1;\n\t}\n};\n\nconst toIgnorePremultipliedAlpha = ( options: UtilExtractCanvasOptions ): boolean | undefined => {\n\treturn ( options.alpha && options.alpha.premultiplied && options.alpha.premultiplied.ignore );\n};\n\nconst toScale = ( pixels: UtilExtractorPixels, options: UtilExtractCanvasOptions ): number | undefined => {\n\tif( options.scale != null ) {\n\t\tif( utilIsNumber( options.scale ) ) {\n\t\t\treturn options.scale;\n\t\t} else {\n\t\t\tconst size = options.scale.size;\n\t\t\treturn Math.min( 1, size / pixels.width, size / pixels.height );\n\t\t}\n\t}\n};\n\nconst toRenderer = ( options: UtilExtractPixelsOptions ): Renderer => {\n\tif( options.renderer ) {\n\t\treturn options.renderer;\n\t} else if( options.application ) {\n\t\treturn options.application.getLayerBase().renderer;\n\t} else if( options.layer ) {\n\t\treturn options.layer.renderer;\n\t} else {\n\t\tconst layer = DApplications.getLayer( options.target );\n\t\tif( layer ) {\n\t\t\treturn layer.renderer;\n\t\t} else {\n\t\t\tthrow new Error( \"No renderer / application / layer found.\" );\n\t\t}\n\t}\n};\n\nexport class UtilExtract {\n\tstatic texture( options: UtilExtractTextureOptions ): RenderTexture {\n\t\tconst target = options.target;\n\t\tconst resolution = toResolution( options );\n\t\tconst skipUpdateTransform = toSkipUpdateTransform( options );\n\t\treturn UtilExtractor.toTexture( target, resolution, options.clear, skipUpdateTransform );\n\t}\n\n\tstatic pixels( options: UtilExtractPixelsOptions ): UtilExtractorPixels {\n\t\tconst renderer = toRenderer( options );\n\t\treturn UtilExtractor.toPixels( this.texture( options ), renderer );\n\t}\n\n\tstatic canvas( options: UtilExtractCanvasOptions ): HTMLCanvasElement {\n\t\tconst pixels = this.pixels( options );\n\t\tconst ignorePremutipliedAlpha = toIgnorePremultipliedAlpha( options );\n\t\tconst scale = toScale( pixels, options );\n\t\treturn UtilExtractor.toCanvas( pixels, scale, ignorePremutipliedAlpha );\n\t}\n\n\tstatic base64( options: UtilExtractBase64Options ): string {\n\t\treturn UtilExtractor.toBase64( this.canvas( options ), options.format, options.quality );\n\t}\n\n\tstatic file( options: UtilExtractFileOptions ): void {\n\t\tUtilFileDownloader.downloadUrl( options.filename, this.base64( options ) );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, interaction } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { Closeable } from \"./d-menu-context\";\nimport { DMenuItem } from \"./d-menu-item\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\nimport { DMenus } from \"./d-menus\";\nimport { UtilClipboard } from \"./util\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport type DMenuItemLinkLinkMaker = ( item: DMenuItemLink ) => string | null | Promise<string | null>;\nexport type DMenuItemLinkChecker = ( item: DMenuItemLink ) => boolean | Promise<boolean>;\n\nexport enum DMenuItemLinkMenuItemId {\n\tOPEN_LINK_IN_NEW_WINDOW,\n\tCOPY_LINK_ADDRESS\n}\n\nexport enum DMenuItemLinkTarget {\n\tAUTO,\n\tTHIS_WINDOW,\n\tNEW_WINDOW\n}\n\nexport interface DMenuItemLinkOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink\n> extends DMenuItemTextOptions<VALUE, THEME> {\n\tlink: string | DMenuItemLinkLinkMaker;\n\ttarget?: DMenuItemLinkTarget;\n\tchecker?: DMenuItemLinkChecker;\n\tmenu?: DMenuOptions<DMenuItemLinkMenuItemId> | DMenu<DMenuItemLinkMenuItemId>;\n}\n\nexport interface DThemeMenuItemLink extends DThemeMenuItemText {\n\tgetMenuOptions(): DMenuOptions<DMenuItemLinkMenuItemId>;\n}\n\nexport class DMenuItemLink<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\n\tprotected _link: string | DMenuItemLinkLinkMaker;\n\tprotected _target?: DMenuItemLinkTarget;\n\tprotected _checker?: DMenuItemLinkChecker;\n\tprotected _menu?: DMenu<DMenuItemLinkMenuItemId>;\n\tprotected _menuOptions?: DMenuOptions<DMenuItemLinkMenuItemId> | DMenu<DMenuItemLinkMenuItemId>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis._link = options.link;\n\t\tthis._target = options.target;\n\t\tthis._checker = options.checker;\n\t\tthis._menuOptions = options.menu;\n\t}\n\n\tprotected init( options: OPTIONS ): void {\n\t\tif( options.target === DMenuItemLinkTarget.NEW_WINDOW ) {\n\t\t\toptions.state = ( options.state || DBaseState.NONE ) || DBaseState.EXTENSION_0;\n\t\t}\n\t\tsuper.init( options );\n\t}\n\n\tget link(): string | null | Promise<string | null> {\n\t\tconst link = this._link;\n\t\tif( utilIsString( link ) || link == null ) {\n\t\t\treturn link;\n\t\t} else {\n\t\t\treturn link( this );\n\t\t}\n\t}\n\n\tget menu(): DMenu<DMenuItemLinkMenuItemId> {\n\t\tlet menu = this._menu;\n\t\tif( menu == null ) {\n\t\t\tconst theme = this.theme;\n\t\t\tconst options = this._menuOptions || theme.getMenuOptions();\n\t\t\tmenu = this.toMenu( options );\n\t\t\tthis._menu = menu;\n\t\t\tmenu.on( \"select\", (\n\t\t\t\tvalue: DMenuItemLinkMenuItemId,\n\t\t\t\titem: DMenuItem<DMenuItemLinkMenuItemId>,\n\t\t\t\tcloseable: Closeable\n\t\t\t): void => {\n\t\t\t\tthis.onMenuSelect( value, item, closeable );\n\t\t\t});\n\t\t}\n\t\treturn menu;\n\t}\n\n\tprotected toMenu(\n\t\toptions: DMenuOptions<DMenuItemLinkMenuItemId> | DMenu<DMenuItemLinkMenuItemId>\n\t): DMenu<DMenuItemLinkMenuItemId> {\n\t\tif( options instanceof DisplayObject ) {\n\t\t\treturn options;\n\t\t}\n\t\treturn this.newMenu( options );\n\t}\n\n\tprotected newMenu( options: DMenuOptions<DMenuItemLinkMenuItemId> ): DMenu<DMenuItemLinkMenuItemId> {\n\t\treturn DMenus.newMenu( options );\n\t}\n\n\tprotected onMenuSelect(\n\t\tvalue: DMenuItemLinkMenuItemId,\n\t\titem: DMenuItem<DMenuItemLinkMenuItemId>,\n\t\tcloseable: Closeable\n\t): void {\n\t\tswitch( value ) {\n\t\tcase DMenuItemLinkMenuItemId.OPEN_LINK_IN_NEW_WINDOW:\n\t\t\tthis.open( true );\n\t\t\tbreak;\n\t\tcase DMenuItemLinkMenuItemId.COPY_LINK_ADDRESS:\n\t\t\tconst link = this.link;\n\t\t\tif( link != null ) {\n\t\t\t\tif( utilIsString( link ) ) {\n\t\t\t\t\tthis.copy( link );\n\t\t\t\t} else {\n\t\t\t\t\tlink.then(( resolved: string | null ): void => {\n\t\t\t\t\t\tif( resolved != null ) {\n\t\t\t\t\t\t\tthis.copy( resolved );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected copy( link: string ): void {\n\t\tconst a = document.createElement( \"a\" );\n\t\ta.href = link;\n\t\tUtilClipboard.copy( a.href );\n\t}\n\n\tprotected initOnClick( options?: OPTIONS ): void {\n\t\tconst onClick = ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.onSelect( e );\n\t\t\t}\n\t\t};\n\t\tconst onLongClick = ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tconst menu = this.menu;\n\t\t\t\tif( menu.isHidden() ) {\n\t\t\t\t\tmenu.open( this );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconst target = options && options.target;\n\t\tif( target === DMenuItemLinkTarget.NEW_WINDOW ) {\n\t\t\tUtilPointerEvent.onClick( this, onClick );\n\t\t} else {\n\t\t\tUtilPointerEvent.onLongClick( this, onClick, onLongClick );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemLink\";\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tsuper.onSelect( e );\n\t\tthis.open( this.inNewWindow( e ) );\n\t}\n\n\topen( inNewWindow: boolean ): void {\n\t\tconst link = this.link;\n\t\tif( link != null ) {\n\t\t\tif( utilIsString( link )  ) {\n\t\t\t\tthis.check( link, inNewWindow );\n\t\t\t} else {\n\t\t\t\tlink.then(( resolved: string | null ): void => {\n\t\t\t\t\tif( resolved ) {\n\t\t\t\t\t\tthis.check( resolved, inNewWindow );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected check( link: string, inNewWindow: boolean ): void {\n\t\tconst checker = this._checker;\n\t\tif( checker ) {\n\t\t\tconst checked = checker( this );\n\t\t\tif( checked === true ) {\n\t\t\t\tthis.exec( link, inNewWindow );\n\t\t\t} else if( checked === false ) {\n\t\t\t\t// DO NOTHING\n\t\t\t} else {\n\t\t\t\tchecked.then(( resolved: boolean ): void => {\n\t\t\t\t\tif( resolved ) {\n\t\t\t\t\t\tthis.exec( link, inNewWindow );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.exec( link, inNewWindow );\n\t\t}\n\t}\n\n\tprotected exec( link: string, inNewWindow: boolean ): void {\n\t\tif( inNewWindow ) {\n\t\t\tconst a = document.createElement( \"a\" );\n\t\t\ta.href = link;\n\t\t\ta.target = \"_blank\";\n\t\t\ta.style.display = \"none\";\n\t\t\ta.rel = \"noopener noreferrer\";\n\t\t\tdocument.body.appendChild( a );\n\t\t\ta.click();\n\t\t\tsetTimeout((): void => {\n\t\t\t\tdocument.body.removeChild( a );\n\t\t\t}, 100);\n\t\t} else {\n\t\t\twindow.location.href = link;\n\t\t}\n\t}\n\n\tprotected inNewWindow( e: KeyboardEvent | interaction.InteractionEvent ): boolean {\n\t\tif( this._target === DMenuItemLinkTarget.NEW_WINDOW ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconst oe = ( e instanceof interaction.InteractionEvent ? e.data.originalEvent : e );\n\t\t\treturn (\n\t\t\t\t( oe.ctrlKey || oe.shiftKey || oe.altKey || oe.metaKey ) ||\n\t\t\t\t( \"button\" in oe && oe.button !== 0 )\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected onShortcut( e: KeyboardEvent ) {\n\t\tsuper.onShortcut( e );\n\t\tthis.onSelect( e );\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemLinkOptions<VALUE> {\n\t\treturn \"link\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilHsv {\n\tstatic fromRgb( color: number ): [ number, number, number ] {\n\t\tconst r = (color & 0xff0000) >> 16;\n\t\tconst g = (color & 0x00ff00) >> 8;\n\t\tconst b = (color & 0x0000ff) | 0;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\t\tconst length = max - min;\n\t\tlet h = 0;\n\t\tif( 0 < length ) {\n\t\t\tif( r === max ) {\n\t\t\t\th = 60 * ( g - b ) / length;\n\t\t\t} else if( g === max ) {\n\t\t\t\th = 60 * ( b - r ) / length + 120;\n\t\t\t} else if( b === max ) {\n\t\t\t\th = 60 * ( r - g ) / length + 240;\n\t\t\t}\n\t\t\tif( h < 0 ) {\n\t\t\t\th += 360;\n\t\t\t}\n\t\t}\n\n\t\tconst s = ( length / max ) * 255;\n\t\tconst v = max;\n\t\treturn [ h, s, v ];\n\t}\n\n\tstatic toRgb( h: number, s: number, v: number ): number {\n\t\tconst max = v;\n\t\tconst min = v - (s / 255) * v;\n\t\tconst length = max - min;\n\n\t\tlet r = 0;\n\t\tlet g = 0;\n\t\tlet b = 0;\n\t\tif( h <= 60 ) {\n\t\t\tr = max;\n\t\t\tg = (h / 60) * length + min;\n\t\t\tb = min;\n\t\t} else if( h <= 120 ) {\n\t\t\tr = ((120 - h) / 60) * length + min;\n\t\t\tg = max;\n\t\t\tb = min;\n\t\t} else if( h <= 180 ) {\n\t\t\tr = min;\n\t\t\tg = max;\n\t\t\tb = ((h - 120) / 60) * length + min;\n\t\t} else if( h <= 240 ) {\n\t\t\tr = min;\n\t\t\tg = ((240 - h) / 60) * length + min;\n\t\t\tb = max;\n\t\t} else if( h <= 300 ) {\n\t\t\tr = ((h - 240) / 60) * length + min;\n\t\t\tg = min;\n\t\t\tb = max;\n\t\t} else {\n\t\t\tr = max;\n\t\t\tg = min;\n\t\t\tb = ((360 - h) / 60) * length + min;\n\t\t}\n\n\t\tr = Math.max( 0, Math.min( 255, r ) );\n\t\tg = Math.max( 0, Math.min( 255, g ) );\n\t\tb = Math.max( 0, Math.min( 255, b ) );\n\n\t\treturn (r << 16) | (g << 8) | b;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIndexOf = <V>( array: V[], value: V ): number => {\n\tlet i0 = 0;\n\tlet i1 = array.length - 1;\n\n\twhile( i0 <= i1 ) {\n\t\tconst i2 = i0 + ((i1 - i0) >> 1);\n\t\tconst v2 = array[ i2 ];\n\t\tif( value < v2 ) {\n\t\t\ti1 = i2 - 1;\n\t\t} else if( v2 < value ) {\n\t\t\ti0 = i2 + 1;\n\t\t} else {\n\t\t\treturn i2;\n\t\t}\n\t}\n\n\treturn -1;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsArray = Array.isArray || (( target: any ): target is unknown[] => {\n\treturn Object.prototype.toString.call( target ) === \"[object Array]\";\n});\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilIsNaN = ( target: number ): boolean => {\n\treturn target !== target;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilName {\n\tprotected static _mapping: { [ key: string]: number } = {};\n\n\tstatic create( type: string ) {\n\t\tconst mapping = this._mapping;\n\t\tif( type in mapping ) {\n\t\t\treturn `${type} ${++mapping[ type ]}`;\n\t\t} else {\n\t\t\tmapping[ type ] = 1;\n\t\t\treturn `${type} 1`;\n\t\t}\n\t}\n}\n","import { DApplicationLayerLike } from \"../d-application-layer-like\";\nimport { DApplicationLike, DApplicationTarget } from \"../d-application-like\";\nimport { DApplications } from \"../d-applications\";\n\nexport class UtilOverlay {\n\tprotected _layer: DApplicationLayerLike | null;\n\tprotected _application: DApplicationLike | null;\n\n\tconstructor( options?: { parent?: unknown; } ) {\n\t\tthis._layer = null;\n\t\tthis._application = ( options == null || options.parent == null ?\n\t\t\tDApplications.last() : null\n\t\t);\n\t}\n\n\tget picked(): DApplicationLayerLike | null {\n\t\treturn this._layer;\n\t}\n\n\tpick( target: DApplicationTarget ): DApplicationLayerLike {\n\t\tlet layer = this._layer;\n\t\tif( layer == null ) {\n\t\t\tlayer = DApplications.getLayerOverlay( target );\n\t\t\tif( ! layer ) {\n\t\t\t\tconst application = this._application;\n\t\t\t\tif( application ) {\n\t\t\t\t\tlayer = application.getLayerOverlay();\n\t\t\t\t} else {\n\t\t\t\t\tlayer = DApplications.last().getLayerOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._layer = layer;\n\t\t}\n\t\treturn layer;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilPromise {\n\tstatic IDENTITY = () => { /* DO NOTHING*/ };\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilPad } from \"./util-pad\";\n\nexport class UtilRgb {\n\tstatic toCode( color: number ): string {\n\t\treturn utilPad( color.toString( 16 ).toUpperCase(), 6, \"0\" );\n\t}\n\n\tstatic fromCode( code: string ): number | null {\n\t\tconst trimmed = code.trim().toLowerCase();\n\t\tif( trimmed.length === 6 ) {\n\t\t\tconst color = Number( `0x${trimmed}` );\n\t\t\tif( color === color ) {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic fromRgb( r: number, g: number, b: number ): number {\n\t\treturn ((r * 0xff) << 16) + ((g * 0xff) << 8) + ((b * 0xff) | 0);\n\t}\n\n\tstatic blend( colorA: number, colorB: number, t: number ): number {\n\t\tconst ar = ((colorA >> 16) & 0xff);\n\t\tconst ag = ((colorA >> 8) & 0xff);\n\t\tconst ab = ((colorA | 0) & 0xff);\n\n\t\tconst br = ((colorB >> 16) & 0xff);\n\t\tconst bg = ((colorB >> 8) & 0xff);\n\t\tconst bb = ((colorB | 0) & 0xff);\n\n\t\tconst w1 = Math.max( 0, Math.min( 1, t ) );\n\t\tconst w0 = 1 - w1;\n\t\tconst cr = Math.max( 0, Math.min( 0xff, ar * w0 + br * w1 ) );\n\t\tconst cg = Math.max( 0, Math.min( 0xff, ag * w0 + bg * w1 ) );\n\t\tconst cb = Math.max( 0, Math.min( 0xff, ab * w0 + bb * w1 ) );\n\n\t\treturn (cr << 16) + (cg << 8) + (cb | 0);\n\t}\n\n\tstatic brighten( color: number, amount: number ): number {\n\t\treturn this.blend( color, 0xffffff, amount );\n\t}\n\n\tstatic darken( color: number, amount: number ): number {\n\t\treturn this.blend( color, 0x000000, amount );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class UtilRgba {\n\tstatic toCode( color: number, alpha: number ): string {\n\t\tconst r = ( color >> 16 ) & 0xff;\n\t\tconst g = ( color >> 8 ) & 0xff;\n\t\tconst b = ( color & 0xff );\n\t\treturn `rgba(${r},${g},${b},${alpha})`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DApplications } from \"../d-applications\";\nimport { DCornerMask } from \"../d-corner\";\nimport { utilToSvgUrl } from \"./util-to-svg-url\";\n\nexport class UtilTexturePlane {\n\tprotected static INSTANCE: UtilTexturePlane | null = null;\n\n\tprotected _backgroundCache: Map<number, Texture>;\n\tprotected _backgroundAttribute: string;\n\tprotected _borderCache: Map<number, Map<number, Texture>>;\n\tprotected _borderAttribute: ( width: number ) => string;\n\tprotected _onUpdate: () => void;\n\n\tconstructor() {\n\t\tthis._backgroundCache = new Map<number, Texture>();\n\t\tthis._backgroundAttribute = `fill=\"#fff\" stroke=\"none\"`;\n\t\tthis._borderCache = new Map<number, Map<number, Texture>>();\n\t\tthis._borderAttribute = ( width: number ): string => {\n\t\t\treturn `fill=\"none\" stroke=\"#fff\" stroke-width=\"${width}\"`;\n\t\t};\n\t\tthis._onUpdate = (): void => {\n\t\t\tDApplications.update();\n\t\t};\n\t}\n\n\tprotected toCornerTl( offset: number, size: number, tl: number ): string {\n\t\treturn ( 0 < tl ? `A${tl} ${tl} 0 0 1 ${offset + tl} ${offset}` : \"\" );\n\t}\n\n\tprotected toCornerBr( offset: number, size: number, br: number ): string {\n\t\treturn ( 0 < br ? `A${br} ${br} 0 0 1 ${offset + size - br} ${offset + size}` : \"\" );\n\t}\n\n\tprotected make( radius: number, offset: number, attr: string ): Texture {\n\t\tconst realRadius = Math.max( 0, radius - offset );\n\t\tconst size: number = realRadius * 2 + 4;\n\t\tconst realSize: number = size + offset * 2;\n\t\tconst d =\n\t\t\t`M${offset + realRadius} ${offset}` +\n\t\t\t`L${offset + size} ${offset}` +\n\t\t\t`L${offset + size} ${offset + size - realRadius}` +\n\t\t\tthis.toCornerBr( offset, size, realRadius ) +\n\t\t\t`L${offset} ${offset + size}` +\n\t\t\t`L${offset} ${offset + realRadius}` +\n\t\t\tthis.toCornerTl( offset, size, realRadius ) +\n\t\t\t`Z`;\n\t\treturn this.toSvg( realSize, attr, d );\n\t}\n\n\tprotected toSvg( realSize: number, attr: string, d: string ): Texture {\n\t\tconst resolution = (window.devicePixelRatio || 1);\n\t\tconst widthAttr = `width=\"${realSize * resolution}\"`;\n\t\tconst heightAttr = `height=\"${realSize * resolution}\"`;\n\t\tconst viewBoxAttr = `viewBox=\"0 0 ${realSize} ${realSize}\"`;\n\t\tconst svg = `<svg ${widthAttr} ${heightAttr} ${viewBoxAttr} xmlns=\"http://www.w3.org/2000/svg\">` +\n\t\t\t`<path ${attr} d=\"${d}\"></path>` +\n\t\t`</svg>`;\n\t\treturn Texture.from( utilToSvgUrl( svg ), {\n\t\t\tresolution\n\t\t});\n\t}\n\n\tnewBackground( radius: number ): Texture {\n\t\tconst result = this.make( radius, 0, this._backgroundAttribute );\n\t\tresult.on( \"update\", this._onUpdate );\n\t\treturn result;\n\t}\n\n\tnewBorder( radius: number, width: number ): Texture {\n\t\tconst result = this.make( radius, 0.5 * width, this._borderAttribute( width ) );\n\t\tresult.on( \"update\", this._onUpdate );\n\t\treturn result;\n\t}\n\n\tgetBackground( radius: number ): Texture {\n\t\tconst cache = this._backgroundCache;\n\n\t\tlet texture = cache.get( radius );\n\t\tif( texture == null ) {\n\t\t\ttexture = this.newBackground( radius );\n\t\t\tcache.set( radius, texture );\n\t\t}\n\n\t\treturn texture;\n\t}\n\n\tgetBorder( radius: number, width: number ): Texture {\n\t\tconst cache = this._borderCache;\n\n\t\tlet maskToTexture = cache.get( radius );\n\t\tif( maskToTexture == null ) {\n\t\t\tmaskToTexture = new Map<DCornerMask, Texture>();\n\t\t\tcache.set( radius, maskToTexture );\n\t\t}\n\n\t\tlet texture = maskToTexture.get( width );\n\t\tif( texture == null ) {\n\t\t\ttexture = this.newBorder( radius, width );\n\t\t\tmaskToTexture.set( width, texture );\n\t\t}\n\n\t\treturn texture;\n\t}\n\n\tstatic getInstance(): UtilTexturePlane {\n\t\tif( UtilTexturePlane.INSTANCE == null ) {\n\t\t\tUtilTexturePlane.INSTANCE = new UtilTexturePlane();\n\t\t}\n\t\treturn UtilTexturePlane.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\n\nexport class UtilTexture {\n\tstatic fromImage( url: string, resolution: number, onLoad: ( texture: Texture ) => void ) {\n\t\tconst texture = Texture.from( url, {\n\t\t\tresolution\n\t\t});\n\t\tif( ! texture.baseTexture.valid ) {\n\t\t\ttexture.once( \"update\", onLoad );\n\t\t} else {\n\t\t\tonLoad( texture );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilToString = ( value: unknown ): string => {\n\treturn ( value != null ? String( value ) : \"\" );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"../d-base\";\n\nexport interface UtilTransitionOptions {\n\tduration?: number;\n}\n\nexport class UtilTransition {\n\tprotected _duration: number;\n\tprotected _current: DBase<any, any> | null;\n\tprotected _lastUpdate: number;\n\tprotected _updateId: number | null;\n\n\tconstructor( options?: UtilTransitionOptions ) {\n\t\tthis._duration = ( options != null && options.duration != null ? options.duration : 300 );\n\t\tthis._current = null;\n\t\tthis._lastUpdate = 0;\n\t\tthis._updateId = null;\n\t}\n\n\tshow( next: DBase<any, any> | null, forcibly?: boolean ): void {\n\t\tconst updateId = this._updateId;\n\t\tif( updateId != null ) {\n\t\t\tclearTimeout( updateId );\n\t\t}\n\n\t\tconst current = this._current;\n\t\tif( next !== current ) {\n\t\t\tconst duration = this._duration;\n\t\t\tconst lastUpdate = this._lastUpdate;\n\t\t\tconst now = Date.now();\n\t\t\tconst remaining = (lastUpdate + duration) - now;\n\t\t\tif( forcibly === true || remaining <= 0 ) {\n\t\t\t\tthis.update( now, next );\n\t\t\t} else {\n\t\t\t\tthis._updateId = window.setTimeout(() => {\n\t\t\t\t\tthis.update( Date.now(), next );\n\t\t\t\t}, remaining );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected update( now: number, next: DBase<any, any> | null ) {\n\t\tconst current = this._current;\n\t\tif( current !== next ) {\n\t\t\tthis._lastUpdate = now;\n\n\t\t\tif( current !== null ) {\n\t\t\t\tcurrent.hide();\n\t\t\t}\n\n\t\t\tthis._current = next;\n\t\t\tif( next != null ) {\n\t\t\t\tnext.show();\n\t\t\t}\n\t\t}\n\t}\n\n\thide(): void {\n\t\tthis.show( null );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeFont } from \"../d-font\";\nimport { DThemes } from \"../theme/d-themes\";\n\nexport interface UtilWheelEventDeltas {\n\tmode: number;\n\tdelta: number;\n\tdeltaX: number;\n\tdeltaY: number;\n\tlowest: number;\n}\n\n/*!\n* jQuery Mousewheel 3.1.13\n*\n* Copyright jQuery Foundation and other contributors\n* Released under the MIT license\n* http://jquery.org/license\n*\n* See also https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n* and https://github.com/openlayers/openlayers/blob/v5.2.0/src/ol/interaction/MouseWheelZoom.js#L51\n*/\nexport class UtilWheelEvent {\n\tprivate static INSTANCE: UtilWheelEvent | null;\n\tprivate _names: Array<\"wheel\" | \"mousewheel\" | \"DOMMouseScroll\" | \"MozMousePixelScroll\">;\n\tprivate _lowest: number | null = null;\n\tprivate _timestamp: number = 0;\n\tprivate _lineHeight: number | null = null;\n\tprivate _pageHeight: number | null = null;\n\n\tconstructor() {\n\t\tthis._names = ( \"onwheel\" in document || 9 <= (document as any).documentMode ?\n\t\t\t[ \"wheel\" ] : [ \"mousewheel\", \"DOMMouseScroll\", \"MozMousePixelScroll\" ]\n\t\t);\n\t}\n\n\ton( target: HTMLElement, handler: ( e: WheelEvent | Event ) => void, useCapture: boolean = false ) {\n\t\tconst names = this._names;\n\t\tfor( let i = names.length - 1; 0 <= i; --i ) {\n\t\t\tconst name = names[ i ];\n\t\t\ttarget.addEventListener( name, handler, useCapture );\n\t\t}\n\t}\n\n\toff( target: HTMLElement, handler: ( e: WheelEvent | Event ) => void, useCapture: boolean = false ) {\n\t\tconst names = this._names;\n\t\tfor( let i = names.length - 1; 0 <= i; --i ) {\n\t\t\tconst name = names[ i ];\n\t\t\ttarget.removeEventListener( name, handler, useCapture );\n\t\t}\n\t}\n\n\tgetLineHeight(): number {\n\t\tif( this._lineHeight == null ) {\n\t\t\tconst theme = DThemes.getInstance().get( \"DBase\" ) as DThemeFont;\n\t\t\tthis._lineHeight = theme.getLineHeight();\n\t\t}\n\t\treturn this._lineHeight;\n\t}\n\n\tgetPageHeight(): number {\n\t\tif( this._pageHeight == null ) {\n\t\t\tthis._pageHeight = this.getLineHeight() * 12;\n\t\t}\n\t\treturn this._pageHeight;\n\t}\n\n\tnormalize( e: any ): UtilWheelEventDeltas | null {\n\t\tlet deltaX = 0;\n\t\tlet deltaY = 0;\n\n\t\t// Old school scrollwheel delta\n\t\tif ( \"detail\" in e ) {\n\t\t\tdeltaY = e.detail * -1;\n\t\t}\n\t\tif ( \"wheelDelta\" in e ) {\n\t\t\tdeltaY = e.wheelDelta;\n\t\t}\n\t\tif ( \"wheelDeltaY\" in e ) {\n\t\t\tdeltaY = e.wheelDeltaY;\n\t\t}\n\t\tif ( \"wheelDeltaX\" in e ) {\n\t\t\tdeltaX = e.wheelDeltaX * -1;\n\t\t}\n\n\t\t// Firefox < 17 horizontal scrolling related to DOMMouseScroll event\n\t\tif ( \"axis\" in e && e.axis === e.HORIZONTAL_AXIS ) {\n\t\t\tdeltaX = deltaY * -1;\n\t\t\tdeltaY = 0;\n\t\t}\n\n\t\t// New school wheel delta (wheel event)\n\t\tif ( \"deltaY\" in e ) {\n\t\t\tdeltaY = e.deltaY * -1;\n\t\t}\n\t\tif ( \"deltaX\" in e ) {\n\t\t\tdeltaX = e.deltaX;\n\t\t}\n\n\t\t// No change actually happened, no reason to go any further\n\t\tif ( deltaY === 0 && deltaX === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Store lowest absolute delta to normalize the delta values\n\t\tlet delta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );\n\n\t\t// Reset the this._lowest to better handle multiple device types\n\t\t// that give different a different lowestDelta\n\t\t// Ex: trackpad = 3 and mouse wheel = 120\n\t\tconst now = Date.now();\n\t\tif( this._timestamp + 200 <= now ) {\n\t\t\tthis._lowest = null;\n\t\t}\n\t\tthis._timestamp = now;\n\n\t\t//\n\t\tconst shouldAdjust = (e.type === \"mousewheel\" && delta % 120 === 0);\n\t\tif ( ! this._lowest || delta < this._lowest ) {\n\t\t\tthis._lowest = delta;\n\n\t\t\t// Adjust older deltas if necessary\n\t\t\tif ( shouldAdjust ) {\n\t\t\t\tthis._lowest /= 40;\n\t\t\t}\n\t\t}\n\n\t\t// Adjust older deltas if necessary\n\t\tif ( shouldAdjust ) {\n\t\t\t// Divide all the things by 40!\n\t\t\tdelta  /= 40;\n\t\t\tdeltaX /= 40;\n\t\t\tdeltaY /= 40;\n\t\t}\n\n\t\t// Get a whole, normalized value for the deltas\n\t\tconst lowest = this._lowest;\n\t\tdelta  = Math.floor( delta  / lowest );\n\t\tdeltaX = Math[ 1 <= deltaX ? \"floor\" : \"ceil\" ](deltaX / lowest);\n\t\tdeltaY = Math[ 1 <= deltaY ? \"floor\" : \"ceil\" ](deltaY / lowest);\n\n\t\t// Mode\n\t\tconst mode = e.deltaMode || 0;\n\t\tif( mode !== 0 ) {\n\t\t\tconst scale = ( mode === 1 ? this.getLineHeight() : this.getPageHeight() );\n\t\t\tdelta *= scale;\n\t\t\tdeltaX *= scale;\n\t\t\tdeltaY *= scale;\n\t\t}\n\n\t\treturn {\n\t\t\tmode,\n\t\t\tdelta,\n\t\t\tdeltaX,\n\t\t\tdeltaY,\n\t\t\tlowest\n\t\t};\n\t}\n\n\tstatic getInstance(): UtilWheelEvent {\n\t\tif( this.INSTANCE == null ) {\n\t\t\tthis.INSTANCE = new UtilWheelEvent();\n\t\t}\n\t\treturn this.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DCornerMask } from \"./d-corner\";\nimport { DLayoutClearType } from \"./d-layout-clear-type\";\nimport { DLayoutSpace, DLayoutSpaceOptions } from \"./d-layout-space\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport enum DLayoutDirection {\n\tVERTICAL,\n\tHORIZONTAL\n}\n\nexport interface DLayoutMargin {\n\thorizontal: number;\n\tvertical: number;\n}\n\nexport interface DLayoutOptions<THEME extends DThemeLayout> extends DBaseOptions<THEME> {\n\tmargin?: number | { horizontal?: number, vertical?: number };\n\tcorner?: number | {\n\t\tradius?: number;\n\t\tmask?: DCornerMask;\n\t\tadjust?: boolean\n\t};\n\trow?: number;\n\tcolumn?: number;\n\tdirection?: (keyof typeof DLayoutDirection) | DLayoutDirection;\n}\n\nexport interface DThemeLayout extends DThemeBase {\n\tgetMargin(): number;\n\tgetDirection(): DLayoutDirection;\n\tgetCornerAdjust(): boolean;\n\tgetMultiplicity(): number;\n}\n\nconst isDBaseVisible = ( child: DisplayObject ): child is DBase => {\n\treturn child instanceof DBase && (child.visible || child instanceof DLayoutSpace);\n};\n\nconst toMultiplicity = <THEME extends DThemeLayout>( theme: THEME, options?: DLayoutOptions<THEME> ): number => {\n\tif( options ) {\n\t\tif( options.row != null ) {\n\t\t\treturn options.row;\n\t\t}\n\t\tif( options.column != null ) {\n\t\t\treturn options.column;\n\t\t}\n\t}\n\treturn theme.getMultiplicity();\n};\n\nconst toMargin = <THEME extends DThemeLayout>( theme: THEME, options?: DLayoutOptions<THEME> ): DLayoutMargin => {\n\tif( options && options.margin != null ) {\n\t\tconst margin = options.margin;\n\t\tif( utilIsNumber( margin ) ) {\n\t\t\treturn {\n\t\t\t\thorizontal: margin,\n\t\t\t\tvertical: margin\n\t\t\t};\n\t\t} else {\n\t\t\tconst themeMargin = theme.getMargin();\n\t\t\treturn {\n\t\t\t\thorizontal: ( margin.horizontal != null ? margin.horizontal : themeMargin ),\n\t\t\t\tvertical: ( margin.vertical != null ? margin.vertical : themeMargin )\n\t\t\t};\n\t\t}\n\t} else {\n\t\tconst themeMargin = theme.getMargin();\n\t\treturn {\n\t\t\thorizontal: themeMargin,\n\t\t\tvertical: themeMargin\n\t\t};\n\t}\n};\n\nconst toDirection = <THEME extends DThemeLayout>( theme: THEME, options?: DLayoutOptions<THEME> ): DLayoutDirection => {\n\tif( options && options.direction != null ) {\n\t\tconst direction = options.direction;\n\t\tif( utilIsString( direction ) ) {\n\t\t\treturn DLayoutDirection[ direction ];\n\t\t} else {\n\t\t\treturn direction;\n\t\t}\n\t}\n\treturn theme.getDirection();\n};\n\nconst toCornerAdjust = <THEME extends DThemeLayout>( theme: THEME, options?: DLayoutOptions<THEME> ): boolean => {\n\tif( options && options.corner != null && ! utilIsNumber( options.corner ) && options.corner.adjust != null ) {\n\t\treturn options.corner.adjust;\n\t}\n\treturn theme.getCornerAdjust();\n};\n\nexport abstract class DLayout<\n\tTHEME extends DThemeLayout,\n\tOPTIONS extends DLayoutOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tstatic CORNER_ADJUST_WORK: Float32Array | null = null;\n\n\tprotected _margin: DLayoutMargin;\n\tprotected _cornerAdjust: boolean;\n\tprotected _multiplicity: number;\n\tprotected _direction: DLayoutDirection;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tconst theme = this.theme;\n\t\tthis._margin = toMargin( theme, options );\n\t\tthis._direction = toDirection( theme, options );\n\t\tthis._cornerAdjust = toCornerAdjust( theme, options );\n\t\tthis._multiplicity = toMultiplicity( theme, options );\n\t}\n\n\tprotected getWeightTotal() {\n\t\tconst children = this.children;\n\t\tlet result = 0;\n\t\tconst multiplicity = this._multiplicity;\n\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\tlet weight = -1;\n\t\t\tlet j = 0;\n\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\tconst child = children[ i + j ];\n\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tweight = Math.max( weight, child.weight );\n\t\t\t\t\t\tif( clearType && DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ti += 1;\n\t\t\t\t\tj -= 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\ti += j;\n\t\t\tif( 0 <= weight ) {\n\t\t\t\tresult += weight;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getSpaceLeft( baseSize: number, margin: number ) {\n\t\tconst children = this.children;\n\t\tconst multiplicity = this._multiplicity;\n\t\tif( this._direction === DLayoutDirection.VERTICAL ) {\n\t\t\tlet result = baseSize;\n\t\t\tlet marginNext = 0;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\tlet height = 0;\n\t\t\t\tlet weight = -1;\n\t\t\t\tlet j = 0;\n\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tweight = Math.max( weight, child.weight );\n\t\t\t\t\t\t\tif( weight < 0 ) {\n\t\t\t\t\t\t\t\theight = Math.max( height, child.height + marginNext );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\theight = marginNext;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti += j;\n\t\t\t\tresult -= height;\n\t\t\t\tmarginNext = margin;\n\t\t\t}\n\t\t\treturn Math.max( 0, result );\n\t\t} else {\n\t\t\tlet result = baseSize;\n\t\t\tlet marginNext = 0;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\tlet width = 0;\n\t\t\t\tlet weight = -1;\n\t\t\t\tlet j = 0;\n\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tweight = Math.max( weight, child.weight );\n\t\t\t\t\t\t\tif( weight < 0 ) {\n\t\t\t\t\t\t\t\twidth = Math.max( width, child.width + marginNext );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twidth = marginNext;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti += j;\n\t\t\t\tresult -= width;\n\t\t\t\tmarginNext = margin;\n\t\t\t}\n\t\t\treturn Math.max( 0, result );\n\t\t}\n\t}\n\n\tprotected onRefit(): void {\n\t\tconst children = this.children;\n\t\tconst padding = this._padding;\n\t\tconst paddingTop = padding.getTop();\n\t\tconst paddingBottom = padding.getBottom();\n\t\tconst paddingLeft = padding.getLeft();\n\t\tconst paddingRight = padding.getRight();\n\t\tconst margin = this._margin;\n\t\tconst marginVertical = margin.vertical;\n\t\tconst marginHorizontal = margin.horizontal;\n\t\tconst weightTotal = this.getWeightTotal();\n\t\tconst multiplicity = this._multiplicity;\n\n\t\tlet cornerAdjustWork = null;\n\t\tif( this._cornerAdjust ) {\n\t\t\tconst requiredSize = 4 + ( children.length << 1 );\n\t\t\tif( DLayout.CORNER_ADJUST_WORK == null || DLayout.CORNER_ADJUST_WORK.length < requiredSize ) {\n\t\t\t\tDLayout.CORNER_ADJUST_WORK = new Float32Array( requiredSize );\n\t\t\t}\n\t\t\tcornerAdjustWork = DLayout.CORNER_ADJUST_WORK;\n\t\t\tcornerAdjustWork[ 0 ] = -2;\n\t\t\tcornerAdjustWork[ 1 ] = -2;\n\t\t\tcornerAdjustWork[ requiredSize - 2 ] = -3;\n\t\t\tcornerAdjustWork[ requiredSize - 1 ] = -3;\n\t\t}\n\n\t\tif( this._direction === DLayoutDirection.VERTICAL ) {\n\t\t\tlet irow = 0;\n\t\t\tlet y = paddingTop - marginVertical;\n\t\t\tif( 0 < weightTotal ) {\n\t\t\t\tconst weightTotalInverse = 1 / weightTotal;\n\t\t\t\tconst baseSize = this.height - paddingTop - paddingBottom;\n\t\t\t\tconst spaceLeft = this.getSpaceLeft( baseSize, marginVertical );\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\t\tlet x = paddingLeft - marginHorizontal;\n\t\t\t\t\tlet height = 0;\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchild.position.set( marginHorizontal + x, marginVertical + y );\n\t\t\t\t\t\t\t\tconst weight = child.weight;\n\t\t\t\t\t\t\t\tif( 0 <= weight ) {\n\t\t\t\t\t\t\t\t\tchild.height = spaceLeft * ( weight * weightTotalInverse );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tx += marginHorizontal + child.width;\n\t\t\t\t\t\t\t\theight = Math.max( height, child.height );\n\t\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j - 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ty += marginVertical + height;\n\t\t\t\t\ti += j;\n\t\t\t\t\tirow += 1;\n\t\t\t\t}\n\n\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst i1 = 2 + ( i << 1 );\n\t\t\t\t\t\t\tconst icolumn1 = cornerAdjustWork[ i1 + 0 ];\n\t\t\t\t\t\t\tconst irow1 = cornerAdjustWork[ i1 + 1 ];\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\n\t\t\t\t\t\t\tlet icolumn0 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tconst i0 = this.findRowIndexPrevious( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeAfter( children, i0 ) ) {\n\t\t\t\t\t\t\t\t\ticolumn0 = cornerAdjustWork[ i0 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet icolumn2 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.AFTER) ) {\n\t\t\t\t\t\t\t\tconst i2 = this.findRowIndexNext( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeBefore( children, i2 ) ) {\n\t\t\t\t\t\t\t\t\ticolumn2 = cornerAdjustWork[ i2 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst ncolumn = this.countColumn( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\tchild.corner.mask = this.toCornerMaskColumn( icolumn0, icolumn1, icolumn2, ncolumn );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\t\tlet x = paddingLeft - marginHorizontal;\n\t\t\t\t\tlet height = 0;\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchild.position.set( marginHorizontal + x, marginVertical + y );\n\t\t\t\t\t\t\t\tconst weight = child.weight;\n\t\t\t\t\t\t\t\tif( 0 <= weight ) {\n\t\t\t\t\t\t\t\t\tchild.height = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tx += marginHorizontal + child.width;\n\t\t\t\t\t\t\t\theight = Math.max( height, child.height );\n\t\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = j - 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = irow;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ty += marginVertical + height;\n\t\t\t\t\ti += j;\n\t\t\t\t\tirow += 1;\n\t\t\t\t}\n\n\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst i1 = 2 + ( i << 1 );\n\t\t\t\t\t\t\tconst icolumn1 = cornerAdjustWork[ i1 + 0 ];\n\t\t\t\t\t\t\tconst irow1 = cornerAdjustWork[ i1 + 1 ];\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\n\t\t\t\t\t\t\tlet icolumn0 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tconst i0 = this.findRowIndexPrevious( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeAfter( children, i0 ) ) {\n\t\t\t\t\t\t\t\t\ticolumn0 = cornerAdjustWork[ i0 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet icolumn2 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.AFTER) ) {\n\t\t\t\t\t\t\t\tconst i2 = this.findRowIndexNext( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeBefore( children, i2 ) ) {\n\t\t\t\t\t\t\t\t\ticolumn2 = cornerAdjustWork[ i2 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst ncolumn = this.countColumn( i1, irow1, cornerAdjustWork );\n\t\t\t\t\t\t\tchild.corner.mask = this.toCornerMaskColumn( icolumn0, icolumn1, icolumn2, ncolumn );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlet icolumn = 0;\n\t\t\tlet x = paddingLeft - marginHorizontal;\n\t\t\tif( 0 < weightTotal ) {\n\t\t\t\tconst weightTotalInverse = 1 / weightTotal;\n\t\t\t\tconst baseSize = this.width - paddingLeft - paddingRight;\n\t\t\t\tconst spaceLeft = this.getSpaceLeft( baseSize, marginHorizontal );\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\t\tlet y = paddingTop - marginVertical;\n\t\t\t\t\tlet width = 0;\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchild.position.set( marginHorizontal + x, marginVertical + y );\n\t\t\t\t\t\t\t\tconst weight = child.weight;\n\t\t\t\t\t\t\t\tif( 0 <= weight ) {\n\t\t\t\t\t\t\t\t\tchild.width = spaceLeft * ( weight * weightTotalInverse );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twidth = Math.max( width, child.width );\n\t\t\t\t\t\t\t\ty += marginVertical + child.height;\n\t\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tx += marginHorizontal + width;\n\t\t\t\t\ti += j;\n\t\t\t\t\ticolumn += 1;\n\t\t\t\t}\n\n\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst i1 = 2 + ( i << 1 );\n\t\t\t\t\t\t\tconst icolumn1 = cornerAdjustWork[ i1 + 0 ];\n\t\t\t\t\t\t\tconst irow1 = cornerAdjustWork[ i1 + 1 ];\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\n\t\t\t\t\t\t\tlet irow0 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tconst i0 = this.findColumnIndexPrevious( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeAfter( children, i0 ) ) {\n\t\t\t\t\t\t\t\t\tirow0 = cornerAdjustWork[ i0 + 1 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet irow2 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.AFTER) ) {\n\t\t\t\t\t\t\t\tconst i2 = this.findColumnIndexNext( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeBefore( children, i2 ) ) {\n\t\t\t\t\t\t\t\t\tirow2 = cornerAdjustWork[ i2 + 1 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst nrow = this.countRow( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\tchild.corner.mask = this.toCornerMaskRow( irow0, irow1, irow2, nrow );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ) {\n\t\t\t\t\tlet y = paddingTop - marginVertical;\n\t\t\t\t\tlet width = 0;\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor( ; j < multiplicity && i + j < imax; ++j ) {\n\t\t\t\t\t\tconst child = children[ i + j ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\t\t\t\t\t\t\tif( j !== 0 && (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchild.position.set( marginHorizontal + x, marginVertical + y );\n\t\t\t\t\t\t\t\tconst weight = child.weight;\n\t\t\t\t\t\t\t\tif( 0 <= weight ) {\n\t\t\t\t\t\t\t\t\tchild.width = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twidth = Math.max( width, child.width );\n\t\t\t\t\t\t\t\ty += marginVertical + child.height;\n\t\t\t\t\t\t\t\tif( clearType & DLayoutClearType.AFTER ) {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tj += 1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\t\t\t\tconst k = (i + j + 1) << 1;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 0 ] = icolumn;\n\t\t\t\t\t\t\t\tcornerAdjustWork[ k + 1 ] = j - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\t\tj -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tx += marginHorizontal + width;\n\t\t\t\t\ti += j;\n\t\t\t\t\ticolumn += 1;\n\t\t\t\t}\n\n\t\t\t\tif( cornerAdjustWork != null ) {\n\t\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\t\tif( isDBaseVisible( child ) ) {\n\t\t\t\t\t\t\tconst i1 = 2 + ( i << 1 );\n\t\t\t\t\t\t\tconst icolumn1 = cornerAdjustWork[ i1 + 0 ];\n\t\t\t\t\t\t\tconst irow1 = cornerAdjustWork[ i1 + 1 ];\n\t\t\t\t\t\t\tconst clearType = child.getClearType();\n\n\t\t\t\t\t\t\tlet irow0 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.BEFORE) ) {\n\t\t\t\t\t\t\t\tconst i0 = this.findColumnIndexPrevious( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeAfter( children, i0 ) ) {\n\t\t\t\t\t\t\t\t\tirow0 = cornerAdjustWork[ i0 + 1 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet irow2 = -2;\n\t\t\t\t\t\t\tif( ! (clearType & DLayoutClearType.AFTER) ) {\n\t\t\t\t\t\t\t\tconst i2 = this.findColumnIndexNext( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\t\tif( ! this.hasClearTypeBefore( children, i2 ) ) {\n\t\t\t\t\t\t\t\t\tirow2 = cornerAdjustWork[ i2 + 1 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst nrow = this.countRow( i1, icolumn1, cornerAdjustWork );\n\t\t\t\t\t\t\tchild.corner.mask = this.toCornerMaskRow( irow0, irow1, irow2, nrow );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.onRefit();\n\t}\n\n\tprotected hasClearTypeBefore( children: DisplayObject[], index: number ): boolean {\n\t\treturn this.hasClearType( children, index, DLayoutClearType.BEFORE );\n\t}\n\n\tprotected hasClearTypeAfter( children: DisplayObject[], index: number ): boolean {\n\t\treturn this.hasClearType( children, index, DLayoutClearType.AFTER );\n\t}\n\n\tprotected hasClearType( children: DisplayObject[], index: number, clearType: DLayoutClearType ): boolean {\n\t\tif( 2 <= index ) {\n\t\t\tconst i = (index - 2) >> 1;\n\t\t\tif( 0 <= i && i < children.length ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\treturn !!( child.getClearType() & clearType );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected findColumnIndexPrevious( istart: number, icolumn: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart - 2; 0 <= i; i -= 2 ) {\n\t\t\tif( cornerAdjustWork[ i ] !== icolumn ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprotected findColumnIndexNext( istart: number, icolumn: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart + 2, imax = cornerAdjustWork.length; i < imax; i += 2 ) {\n\t\t\tconst icolumn2 = cornerAdjustWork[ i ];\n\t\t\tif( icolumn2 !== icolumn ) {\n\t\t\t\tfor( let j = i + 2; j < imax; j += 2 ) {\n\t\t\t\t\tif( cornerAdjustWork[ j ] !== icolumn2 ) {\n\t\t\t\t\t\treturn j - 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn cornerAdjustWork.length - 2;\n\t}\n\n\tprotected countRow( istart: number, icolumn: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart + 2, imax = cornerAdjustWork.length; i < imax; i += 2 ) {\n\t\t\tconst icolumn2 = cornerAdjustWork[ i ];\n\t\t\tif( icolumn2 !== icolumn ) {\n\t\t\t\treturn cornerAdjustWork[ i - 2 + 1 ] + 1;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprotected findRowIndexPrevious( istart: number, irow: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart - 2; 0 <= i; i -= 2 ) {\n\t\t\tif( cornerAdjustWork[ i + 1 ] !== irow ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprotected findRowIndexNext( istart: number, irow: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart + 2, imax = cornerAdjustWork.length; i < imax; i += 2 ) {\n\t\t\tconst irow2 = cornerAdjustWork[ i + 1 ];\n\t\t\tif( irow2 !== irow ) {\n\t\t\t\tfor( let j = i + 2; j < imax; j += 2 ) {\n\t\t\t\t\tif( cornerAdjustWork[ j + 1 ] !== irow2 ) {\n\t\t\t\t\t\treturn j - 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn cornerAdjustWork.length - 2;\n\t}\n\n\tprotected countColumn( istart: number, irow: number, cornerAdjustWork: Float32Array ): number {\n\t\tfor( let i = istart + 2, imax = cornerAdjustWork.length; i < imax; i += 2 ) {\n\t\t\tconst irow2 = cornerAdjustWork[ i + 1 ];\n\t\t\tif( irow2 !== irow ) {\n\t\t\t\treturn cornerAdjustWork[ i - 2 + 0 ] + 1;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprotected toCornerMaskColumn( i0: number, i1: number, i2: number, n: number ): DCornerMask {\n\t\tlet result = DCornerMask.NONE;\n\t\tif( i0 + 1 < i1 && i1 === 0 ) {\n\t\t\tresult |= DCornerMask.TOP_LEFT;\n\t\t}\n\t\tif( i2 + 1 < i1 && i1 === 0 ) {\n\t\t\tresult |= DCornerMask.BOTTOM_LEFT;\n\t\t}\n\t\tif( i0 < i1 && i1 + 1 === n ) {\n\t\t\tresult |= DCornerMask.TOP_RIGHT;\n\t\t}\n\t\tif( i2 < i1 && i1 + 1 === n ) {\n\t\t\tresult |= DCornerMask.BOTTOM_RIGHT;\n\t\t}\n\t\treturn DCornerMask.ALL & (~result);\n\t}\n\n\tprotected toCornerMaskRow( i0: number, i1: number, i2: number, n: number ): DCornerMask {\n\t\tlet result = DCornerMask.NONE;\n\t\tif( i0 + 1 < i1 && i1 === 0 ) {\n\t\t\tresult |= DCornerMask.TOP_LEFT;\n\t\t}\n\t\tif( i2 + 1 < i1 && i1 === 0 ) {\n\t\t\tresult |= DCornerMask.TOP_RIGHT;\n\t\t}\n\t\tif( i0 < i1 && i1 + 1 === n ) {\n\t\t\tresult |= DCornerMask.BOTTOM_LEFT;\n\t\t}\n\t\tif( i2 < i1 && i1 + 1 === n ) {\n\t\t\tresult |= DCornerMask.BOTTOM_RIGHT;\n\t\t}\n\t\treturn DCornerMask.ALL & (~result);\n\t}\n\n\taddSpace( options?: DLayoutSpaceOptions ) {\n\t\treturn this.addChild( new DLayoutSpace( options ) );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DLayout\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilAttachAlign } from \"./util/util-attach\";\n\nexport import DMenuAlign = UtilAttachAlign;\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, interaction } from \"pixi.js\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DMenuAlign } from \"./d-menu-align\";\nimport { Closeable } from \"./d-menu-context\";\nimport { DMenuItem, DMenuItemOptions, DThemeMenuItem } from \"./d-menu-item\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenus } from \"./d-menus\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DMenuItemMenuOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu\n> extends DMenuItemOptions<VALUE, THEME> {\n\tmenu: DMenuOptions<VALUE> | DMenu<VALUE>;\n}\n\nexport interface DThemeMenuItemMenu extends DThemeMenuItem {\n\n}\n\nexport class DMenuItemMenu<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu,\n\tOPTIONS extends DMenuItemMenuOptions<VALUE, THEME> = DMenuItemMenuOptions<VALUE, THEME>\n> extends DMenuItem<VALUE, THEME, OPTIONS> {\n\tprotected _menu!: DMenu<VALUE>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tUtilPointerEvent.onClick( this, (): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.toggle();\n\t\t\t}\n\t\t});\n\n\t\tthis.initHover( options );\n\n\t\tconst menu = this.toMenu( options );\n\t\tthis._menu = menu;\n\t\tmenu.on( \"select\", ( value: VALUE, item: DMenuItem<VALUE>, closeable: Closeable ): void => {\n\t\t\tthis.onMenuSelect( value, item, closeable );\n\t\t});\n\t}\n\n\tprotected initHover( options: OPTIONS ): void {\n\t\tthis.on( UtilPointerEvent.over, (): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected toMenu( options: OPTIONS ): DMenu<VALUE> {\n\t\tconst menu = options.menu;\n\t\tif( menu instanceof DisplayObject ) {\n\t\t\treturn menu;\n\t\t}\n\t\treturn this.newMenu( menu );\n\t}\n\n\tprotected newMenu( options: DMenuOptions<VALUE> ): DMenu<VALUE> {\n\t\treturn DMenus.newMenu( options );\n\t}\n\n\tget menu(): DMenu<VALUE> {\n\t\treturn this._menu;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemMenu\";\n\t}\n\n\topen(): void {\n\t\tconst menu = this._menu;\n\t\tif( menu.isHidden() ) {\n\t\t\tthis.onOpen( menu );\n\t\t}\n\t}\n\n\tprotected onOpen( menu: DMenu<VALUE> ): void {\n\t\tconst context = this.getContext();\n\t\tif( context != null ) {\n\t\t\tmenu.open( this, this.getCloseable(), context );\n\t\t}\n\t}\n\n\tclose(): void {\n\t\tthis._menu.close();\n\t}\n\n\ttoggle(): void {\n\t\tconst menu = this._menu;\n\t\tif( menu.isHidden() ) {\n\t\t\tthis.onOpen( menu );\n\t\t} else {\n\t\t\tmenu.close();\n\t\t}\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ): void {\n\t\tthis.open();\n\t\tsuper.onSelect( e );\n\t}\n\n\tprotected onMenuSelect( value: VALUE, item: DMenuItem<VALUE>, closeable: Closeable ): void {\n\t\tconst next = this.getCloseable();\n\t\tif( next != null ) {\n\t\t\tnext.emit( \"select\", value, item, closeable );\n\t\t}\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemMenuOptions<VALUE> {\n\t\treturn \"menu\" in options;\n\t}\n\n\tstatic toSubMenuOptions<VALUE>( options: DMenuItemMenuOptions<VALUE>, sticky: boolean ): DMenuItemMenuOptions<VALUE> {\n\t\tconst menu = options.menu;\n\t\tif( ! (menu instanceof DisplayObject) ) {\n\t\t\tif( menu.sticky == null ) {\n\t\t\t\tmenu.sticky = sticky;\n\t\t\t}\n\t\t\tif( menu.align == null ) {\n\t\t\t\tmenu.align = DMenuAlign.RIGHT;\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\n\nexport class DListItemSeparatorReflowable extends Graphics implements DReflowable {\n\tconstructor( base: DBase ) {\n\t\tsuper();\n\t\tbase.appendRenderable( this, true );\n\t\tbase.addReflowable( this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tconst state = base.state;\n\t\tconst border = base.border;\n\t\tconst borderWidth = border.getWidth( state );\n\t\tconst borderColor = border.getColor( state );\n\t\tif( borderColor != null ) {\n\t\t\tconst borderAlpha = border.getAlpha( state );\n\t\t\tconst borderAlign = border.getAlign( state );\n\t\t\tconst padding = base.padding;\n\t\t\tconst middle = height * 0.5;\n\t\t\tthis.clear();\n\t\t\tthis.lineStyle( borderWidth, borderColor, borderAlpha, borderAlign );\n\t\t\tthis.moveTo( padding.getLeft(), middle );\n\t\t\tthis.lineTo( width - padding.getRight(), middle );\n\t\t\tthis.visible = true;\n\t\t} else {\n\t\t\tthis.clear();\n\t\t\tthis.visible = false;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DListItem, DListItemOptions, DThemeListItem } from \"./d-list-item\";\nimport { DListItemSeparatorReflowable } from \"./d-list-item-separator-reflowable\";\n\nexport interface DListItemSeparatorOptions<VALUE, THEME extends DThemeListItemSeparator>\n\textends DListItemOptions<VALUE, THEME> {\n\tseparator?: true;\n}\n\nexport interface DThemeListItemSeparator extends DThemeListItem {\n\n}\n\nexport class DListItemSeparator<\n\tVALUE,\n\tTHEME extends DThemeListItemSeparator = DThemeListItemSeparator,\n\tOPTIONS extends DListItemSeparatorOptions<VALUE, THEME> = DListItemSeparatorOptions<VALUE, THEME>\n> extends DListItem<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.interactive = false;\n\t\tthis.buttonMode = false;\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected initReflowable(): void {\n\t\tnew DListItemSeparatorReflowable( this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DListItemSeparator\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DListItemSeparator, DListItemSeparatorOptions, DThemeListItemSeparator } from \"./d-list-item-separator\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\n\nexport interface DMenuItemSeparatorOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator\n> extends DListItemSeparatorOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeMenuItemSeparator extends DThemeListItemSeparator {\n\n}\n\nexport class DMenuItemSeparator<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator,\n\tOPTIONS extends DMenuItemSeparatorOptions<VALUE, THEME> = DMenuItemSeparatorOptions<VALUE, THEME>\n> extends DListItemSeparator<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemSeparator\";\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemSeparatorOptions<VALUE> {\n\t\treturn \"separator\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\n\nexport interface DLayoutSpaceOptions<THEME extends DThemeLayoutSpace = DThemeLayoutSpace> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeLayoutSpace extends DThemeBase {\n\n}\n\nexport class DLayoutSpace<\n\tTHEME extends DThemeLayoutSpace = DThemeLayoutSpace,\n\tOPTIONS extends DLayoutSpaceOptions<THEME> = DLayoutSpaceOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.visible = false;\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DLayoutSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DLayoutSpace, DLayoutSpaceOptions, DThemeLayoutSpace } from \"./d-layout-space\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\n\nexport interface DMenuItemSpaceOptions<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace\n> extends DLayoutSpaceOptions<THEME> {\n\tspace: true;\n}\n\nexport interface DThemeMenuItemSpace extends DThemeLayoutSpace {\n\n}\n\nexport class DMenuItemSpace<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace,\n\tOPTIONS extends DMenuItemSpaceOptions<THEME> = DMenuItemSpaceOptions<THEME>\n> extends DLayoutSpace<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemSpace\";\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemSpaceOptions {\n\t\treturn \"space\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DMenuItemCheck } from \"../d-menu-item-check\";\nimport { DMenuItemLink } from \"../d-menu-item-link\";\nimport { DMenuItemMenu } from \"../d-menu-item-menu\";\nimport { DMenuItemOptionsUnion } from \"../d-menu-item-options-union\";\nimport { DMenuItemSeparator } from \"../d-menu-item-separator\";\nimport { DMenuItemSpace } from \"../d-menu-item-space\";\nimport { DMenuItemText } from \"../d-menu-item-text\";\nimport { DMenus } from \"../d-menus\";\n\nexport const loadMenuItem = () => {\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemCheck.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemCheck( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemLink.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemLink( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any>, sticky: boolean ): DisplayObject | null => {\n\t\tif( DMenuItemMenu.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemMenu( DMenuItemMenu.toSubMenuOptions( options, sticky ) );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSeparator.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemSeparator( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSpace.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemSpace( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenus.setItemCreatorDefault(( options: any ): DisplayObject | null => {\n\t\treturn new DMenuItemText( options );\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeType {\n\tCIRCLE,\n\tRECTANGLE,\n\tRECTANGLE_ROUNDED,\n\tTRIANGLE,\n\tTRIANGLE_ROUNDED,\n\tLINE,\n\tIMAGE,\n\tGROUP,\n\tBAR,\n\tLABEL,\n\tNULL,\n\tGROUP_SHADOWED,\n\tEXTENSION = 1000\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DLayout, DLayoutOptions, DThemeLayout } from \"./d-layout\";\n\nexport interface DLayoutVerticalOptions<THEME extends DThemeLayout> extends DLayoutOptions<THEME> {\n\n}\n\nexport interface DThemeLayoutVertical extends DThemeLayout {\n\n}\n\nexport class DLayoutVertical<\n\tTHEME extends DThemeLayoutVertical = DThemeLayoutVertical,\n\tOPTIONS extends DLayoutVerticalOptions<THEME> = DLayoutVerticalOptions<THEME>\n> extends DLayout<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DLayoutVertical\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DMenuItemExpandableBodyOptions<\n\tTHEME extends DThemeMenuItemExpandableBody = DThemeMenuItemExpandableBody\n> extends DLayoutVerticalOptions<THEME> {\n\n}\n\nexport interface DThemeMenuItemExpandableBody extends DThemeLayoutVertical {\n\n}\n\nexport class DMenuItemExpandableBody<\n\tTHEME extends DThemeMenuItemExpandableBody = DThemeMenuItemExpandableBody,\n\tOPTIONS extends DMenuItemExpandableBodyOptions<THEME> = DMenuItemExpandableBodyOptions<THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableBody\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DListItem, DListItemOptions, DListItemSelection, DThemeListItem } from \"./d-list-item\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DMenuItemExpandableHeaderOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandableHeader = DThemeMenuItemExpandableHeader\n> extends DListItemOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeMenuItemExpandableHeader extends DThemeListItem {\n\n}\n\nexport class DMenuItemExpandableHeader<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandableHeader = DThemeMenuItemExpandableHeader,\n\tOPTIONS extends DMenuItemExpandableHeaderOptions<VALUE, THEME> = DMenuItemExpandableHeaderOptions<VALUE, THEME>\n> extends DListItem<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.on( UtilPointerEvent.down, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.onSelect( e );\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected getSelection(): DListItemSelection | null {\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableHeader\";\n\t}\n\n\tprotected onSelect( e: KeyboardEvent | interaction.InteractionEvent ) {\n\t\tthis.emit( \"select\", this );\n\t\tsuper.onSelect( e );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuItemCreator, DMenus } from \"./d-menus\";\n\nexport class DMenuItemExpandables {\n\tprotected static CREATORS: DMenuItemCreator[] = [];\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\n\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\n\t\tthis.CREATORS.push( creator );\n\t}\n\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\n\t\tthis.CREATOR_DEFAULT = creator;\n\t}\n\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\n\t\treturn DMenus.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky ) ||\n\t\t\tDMenus.newItem( options, sticky );\n\t}\n\n\tstatic newItems<VALUE>(\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tDMenus.newItemsOf( this, parent, items, sticky );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\nimport { DMenuItemExpandableBody, DMenuItemExpandableBodyOptions } from \"./d-menu-item-expandable-body\";\nimport { DMenuItemExpandableHeader, DMenuItemExpandableHeaderOptions } from \"./d-menu-item-expandable-header\";\nimport { DMenuItemExpandables } from \"./d-menu-item-expandables\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\n\nexport interface DMenuItemExpandableOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandable = DThemeMenuItemExpandable,\n> extends DLayoutVerticalOptions<THEME> {\n\theader: DisplayObject | DMenuItemExpandableHeaderOptions<VALUE>;\n\tbody?: Container | DMenuItemExpandableBodyOptions;\n\titems?: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>;\n\tsticky?: boolean;\n}\n\nexport interface DThemeMenuItemExpandable extends DThemeLayoutVertical {\n\n}\n\nexport class DMenuItemExpandable<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandable = DThemeMenuItemExpandable,\n\tOPTIONS extends DMenuItemExpandableOptions<VALUE, THEME> = DMenuItemExpandableOptions<VALUE, THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\tprotected _header!: DisplayObject;\n\tprotected _body!: DisplayObject;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\t// Header\n\t\tconst theme = this.theme;\n\t\tconst header = this.toHeader( theme, options );\n\t\tthis._header = header;\n\t\theader.on( \"select\", (): void => {\n\t\t\tthis.toggle();\n\t\t});\n\t\tthis.addChild( header );\n\n\t\t// Body\n\t\tconst body = this.toBody( theme, options );\n\t\tthis._body = body;\n\t\tconst sticky = ( options && options.sticky != null ? options.sticky : false );\n\t\tthis.newItems( body, sticky, theme, options );\n\t\tthis.addChild( body );\n\n\t\t//\n\t\tif( this.isActive() ) {\n\t\t\tthis.onActivated();\n\t\t} else {\n\t\t\tthis.onDeactivated();\n\t\t}\n\t}\n\n\tprotected newItems( body: Container, sticky: boolean, theme: THEME, options: OPTIONS | undefined ): void {\n\t\tif( options != null && options.items != null ) {\n\t\t\tDMenuItemExpandables.newItems( body, options.items, sticky );\n\t\t}\n\t}\n\n\tprotected toHeader( theme: THEME, options?: OPTIONS ): DisplayObject {\n\t\tif( options ) {\n\t\t\tif( options.header instanceof DisplayObject ) {\n\t\t\t\treturn options.header;\n\t\t\t} else {\n\t\t\t\treturn this.newHeader( theme, options.header );\n\t\t\t}\n\t\t}\n\t\treturn this.newHeader( theme );\n\t}\n\n\tprotected newHeader( theme: THEME, options?: DMenuItemExpandableHeaderOptions<VALUE> ): DisplayObject {\n\t\treturn new DMenuItemExpandableHeader<VALUE>( options );\n\t}\n\n\tprotected toBody( theme: THEME,  options?: OPTIONS ): Container {\n\t\tif( options && options.body ) {\n\t\t\tif( options.body instanceof DisplayObject ) {\n\t\t\t\treturn options.body;\n\t\t\t} else {\n\t\t\t\treturn this.newBody( theme, options.body );\n\t\t\t}\n\t\t}\n\t\treturn this.newBody( theme );\n\t}\n\n\tprotected newBody( theme: THEME, options?: DMenuItemExpandableBodyOptions ): Container {\n\t\treturn new DMenuItemExpandableBody( options );\n\t}\n\n\topen(): void {\n\t\tthis.setActive( true );\n\t}\n\n\tclose(): void {\n\t\tthis.setActive( false );\n\t}\n\n\ttoggle(): void {\n\t\tthis.setActive( ! this.isActive() );\n\t}\n\n\tprotected onActivated(): void {\n\t\tconst body = this._body;\n\t\tif( body instanceof DBase ) {\n\t\t\tbody.show();\n\t\t} else {\n\t\t\tbody.visible = true;\n\t\t}\n\t}\n\n\tprotected onDeactivated(): void {\n\t\tconst body = this._body;\n\t\tif( body instanceof DBase ) {\n\t\t\tbody.hide();\n\t\t} else {\n\t\t\tbody.visible = false;\n\t\t}\n\t}\n\n\tprotected onStateChange( newState: DBaseState, oldState: DBaseState ): void {\n\t\tsuper.onStateChange( newState, oldState );\n\n\t\tif( DBaseStates.isActive( newState ) ) {\n\t\t\tif( ! DBaseStates.isActive( oldState ) ) {\n\t\t\t\tthis.onActivated();\n\t\t\t}\n\t\t} else {\n\t\t\tif( DBaseStates.isActive( oldState ) ) {\n\t\t\t\tthis.onDeactivated();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandable\";\n\t}\n\n\tstatic isCompatible<VALUE>( options: DMenuItemOptionsUnion<VALUE> ): options is DMenuItemExpandableOptions<VALUE> {\n\t\treturn \"header\" in options;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemCheck, DMenuItemCheckOptions, DThemeMenuItemCheck } from \"./d-menu-item-check\";\n\nexport class DMenuItemExpandableItemCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck,\n\tOPTIONS extends DMenuItemCheckOptions<VALUE, THEME> = DMenuItemCheckOptions<VALUE, THEME>\n> extends DMenuItemCheck<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemLink, DMenuItemLinkOptions, DThemeMenuItemLink } from \"./d-menu-item-link\";\n\nexport class DMenuItemExpandableItemLink<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\n> extends DMenuItemLink<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemLink\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemSeparator, DMenuItemSeparatorOptions, DThemeMenuItemSeparator } from \"./d-menu-item-separator\";\n\nexport class DMenuItemExpandableItemSeparator<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator,\n\tOPTIONS extends DMenuItemSeparatorOptions<VALUE, THEME> = DMenuItemSeparatorOptions<VALUE, THEME>\n> extends DMenuItemSeparator<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemSeparator\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemSpace, DMenuItemSpaceOptions, DThemeMenuItemSpace } from \"./d-menu-item-space\";\n\nexport class DMenuItemExpandableItemSpace<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace,\n\tOPTIONS extends DMenuItemSpaceOptions<THEME> = DMenuItemSpaceOptions<THEME>\n> extends DMenuItemSpace<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\n\nexport class DMenuItemExpandableItemText<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText,\n\tOPTIONS extends DMenuItemTextOptions<VALUE, THEME> = DMenuItemTextOptions<VALUE, THEME>\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DMenuItemCheck } from \"../d-menu-item-check\";\nimport { DMenuItemExpandable } from \"../d-menu-item-expandable\";\nimport { DMenuItemExpandableItemCheck } from \"../d-menu-item-expandable-item-check\";\nimport { DMenuItemExpandableItemLink } from \"../d-menu-item-expandable-item-link\";\nimport { DMenuItemExpandableItemSeparator } from \"../d-menu-item-expandable-item-separator\";\nimport { DMenuItemExpandableItemSpace } from \"../d-menu-item-expandable-item-space\";\nimport { DMenuItemExpandableItemText } from \"../d-menu-item-expandable-item-text\";\nimport { DMenuItemExpandables } from \"../d-menu-item-expandables\";\nimport { DMenuItemLink } from \"../d-menu-item-link\";\nimport { DMenuItemOptionsUnion } from \"../d-menu-item-options-union\";\nimport { DMenuItemSeparator } from \"../d-menu-item-separator\";\nimport { DMenuItemSpace } from \"../d-menu-item-space\";\nimport { DMenus } from \"../d-menus\";\n\nexport const loadMenuItemExpandable = () => {\n\tDMenus.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemExpandable.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandable( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemCheck.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandableItemCheck( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemLink.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandableItemLink( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSeparator.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandableItemSeparator( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSpace.isCompatible( options ) ) {\n\t\t\treturn new DMenuItemExpandableItemSpace( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuItemExpandables.setItemCreatorDefault(( options: any ): DisplayObject | null => {\n\t\treturn new DMenuItemExpandableItemText( options );\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemCheck, DMenuItemCheckOptions, DThemeMenuItemCheck } from \"./d-menu-item-check\";\n\nexport class DMenuSidedItemCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck,\n\tOPTIONS extends DMenuItemCheckOptions<VALUE, THEME> = DMenuItemCheckOptions<VALUE, THEME>\n> extends DMenuItemCheck<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DListItemSelection } from \"./d-list-item\";\nimport { DMenuItemLink, DMenuItemLinkOptions, DThemeMenuItemLink } from \"./d-menu-item-link\";\n\nexport class DMenuSidedItemLink<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\n> extends DMenuItemLink<VALUE, THEME, OPTIONS> {\n\tprotected getSelection(): DListItemSelection | null {\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemLink\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenu } from \"./d-menu\";\nimport { Closeable } from \"./d-menu-context\";\nimport { DMenuItem } from \"./d-menu-item\";\nimport { DMenuItemMenu, DMenuItemMenuOptions, DThemeMenuItemMenu } from \"./d-menu-item-menu\";\n\nexport class DMenuSidedItemMenu<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu,\n\tOPTIONS extends DMenuItemMenuOptions<VALUE, THEME> = DMenuItemMenuOptions<VALUE, THEME>\n> extends DMenuItemMenu<VALUE, THEME, OPTIONS> {\n\tprotected initHover( options: OPTIONS ): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected onMenuSelect( value: VALUE, item: DMenuItem<VALUE>, closeable: Closeable ): void {\n\t\tsuper.onMenuSelect( value, item, closeable );\n\t\tconst selection = this.getSelection();\n\t\tif( selection ) {\n\t\t\tselection.add( item );\n\t\t}\n\t}\n\n\tprotected onOpen( menu: DMenu<VALUE> ): void {\n\t\tmenu.open( this, this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemMenu\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemSeparator, DMenuItemSeparatorOptions, DThemeMenuItemSeparator } from \"./d-menu-item-separator\";\n\nexport class DMenuSidedItemSeparator<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator,\n\tOPTIONS extends DMenuItemSeparatorOptions<VALUE, THEME> = DMenuItemSeparatorOptions<VALUE, THEME>\n> extends DMenuItemSeparator<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemSeparator\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemSpace, DMenuItemSpaceOptions, DThemeMenuItemSpace } from \"./d-menu-item-space\";\n\nexport class DMenuSidedItemSpace<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace,\n\tOPTIONS extends DMenuItemSpaceOptions<THEME> = DMenuItemSpaceOptions<THEME>\n> extends DMenuItemSpace<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemText, DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\n\nexport class DMenuSidedItemText<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText,\n\tOPTIONS extends DMenuItemTextOptions<VALUE, THEME> = DMenuItemTextOptions<VALUE, THEME>\n> extends DMenuItemText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuItemCreator, DMenus } from \"./d-menus\";\n\nexport class DMenuSideds {\n\tprotected static CREATORS: DMenuItemCreator[] = [];\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\n\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\n\t\tthis.CREATORS.push( creator );\n\t}\n\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\n\t\tthis.CREATOR_DEFAULT = creator;\n\t}\n\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\n\t\treturn DMenus.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky ) ||\n\t\t\tDMenus.newItem( options, sticky );\n\t}\n\n\tstatic newItems<VALUE>(\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tDMenus.newItemsOf( this, parent, items, sticky );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DMenuItemCheck } from \"../d-menu-item-check\";\nimport { DMenuItemLink } from \"../d-menu-item-link\";\nimport { DMenuItemMenu } from \"../d-menu-item-menu\";\nimport { DMenuItemOptionsUnion } from \"../d-menu-item-options-union\";\nimport { DMenuItemSeparator } from \"../d-menu-item-separator\";\nimport { DMenuItemSpace } from \"../d-menu-item-space\";\nimport { DMenuSidedItemCheck } from \"../d-menu-sided-item-check\";\nimport { DMenuSidedItemLink } from \"../d-menu-sided-item-link\";\nimport { DMenuSidedItemMenu } from \"../d-menu-sided-item-menu\";\nimport { DMenuSidedItemSeparator } from \"../d-menu-sided-item-separator\";\nimport { DMenuSidedItemSpace } from \"../d-menu-sided-item-space\";\nimport { DMenuSidedItemText } from \"../d-menu-sided-item-text\";\nimport { DMenuSideds } from \"../d-menu-sideds\";\n\nexport const loadMenuSidedItem = () => {\n\tDMenuSideds.setItemCreatorDefault(( options: any ): DisplayObject | null => {\n\t\treturn new DMenuSidedItemText( options );\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSpace.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemSpace( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSeparator.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemSeparator( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any>, sticky: boolean ): DisplayObject | null => {\n\t\tif( DMenuItemMenu.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemMenu( DMenuItemMenu.toSubMenuOptions( options, sticky ) );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemLink.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemLink( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemCheck.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemCheck( options );\n\t\t}\n\t\treturn null;\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuSideds } from \"./d-menu-sideds\";\nimport { DMenuItemCreator, DMenus } from \"./d-menus\";\n\nexport class DMenuSidedItemExpandables {\n\tprotected static CREATORS: DMenuItemCreator[] = [];\n\tprotected static CREATOR_DEFAULT: DMenuItemCreator | null = null;\n\n\tstatic addItemCreator( creator: DMenuItemCreator ): void {\n\t\tthis.CREATORS.push( creator );\n\t}\n\n\tstatic setItemCreatorDefault( creator: DMenuItemCreator ): void {\n\t\tthis.CREATOR_DEFAULT = creator;\n\t}\n\n\tstatic newItem<VALUE>( options: DMenuItemOptionsUnion<VALUE>, sticky: boolean ): DisplayObject | null {\n\t\treturn DMenus.newItemOf( this.CREATORS, this.CREATOR_DEFAULT, options, sticky ) ||\n\t\t\tDMenuSideds.newItem( options, sticky );\n\t}\n\n\tstatic newItems<VALUE>(\n\t\tparent: Container,\n\t\titems: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>,\n\t\tsticky: boolean\n\t): void {\n\t\tDMenus.newItemsOf( this, parent, items, sticky );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container } from \"pixi.js\";\nimport { DMenuItemExpandable, DMenuItemExpandableOptions, DThemeMenuItemExpandable } from \"./d-menu-item-expandable\";\nimport { DMenuSidedItemExpandables } from \"./d-menu-sided-item-expandables\";\n\nexport class DMenuSidedItemExpandable<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemExpandable = DThemeMenuItemExpandable,\n\tOPTIONS extends DMenuItemExpandableOptions<VALUE, THEME> = DMenuItemExpandableOptions<VALUE, THEME>\n> extends DMenuItemExpandable<VALUE, THEME, OPTIONS> {\n\tprotected newItems( body: Container, sticky: boolean, theme: THEME, options: OPTIONS | undefined ): void {\n\t\tif( options != null && options.items != null ) {\n\t\t\tDMenuSidedItemExpandables.newItems( body, options.items, sticky );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandable\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemCheckOptions, DThemeMenuItemCheck } from \"./d-menu-item-check\";\nimport { DMenuItemExpandableItemCheck } from \"./d-menu-item-expandable-item-check\";\n\nexport class DMenuSidedItemExpandableItemCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemCheck = DThemeMenuItemCheck,\n\tOPTIONS extends DMenuItemCheckOptions<VALUE, THEME> = DMenuItemCheckOptions<VALUE, THEME>\n> extends DMenuItemExpandableItemCheck<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemLink, DMenuItemLinkOptions, DThemeMenuItemLink } from \"./d-menu-item-link\";\n\nexport class DMenuSidedItemExpandableItemLink<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemLink = DThemeMenuItemLink,\n\tOPTIONS extends DMenuItemLinkOptions<VALUE, THEME> = DMenuItemLinkOptions<VALUE, THEME>\n> extends DMenuItemLink<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemLink\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemMenu, DMenuItemMenuOptions, DThemeMenuItemMenu } from \"./d-menu-item-menu\";\n\nexport class DMenuItemExpandableItemMenu<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu,\n\tOPTIONS extends DMenuItemMenuOptions<VALUE, THEME> = DMenuItemMenuOptions<VALUE, THEME>\n> extends DMenuItemMenu<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuItemExpandableItemMenu\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenu } from \"./d-menu\";\nimport { DMenuItemExpandableItemMenu } from \"./d-menu-item-expandable-item-menu\";\nimport { DMenuItemMenuOptions, DThemeMenuItemMenu } from \"./d-menu-item-menu\";\n\nexport class DMenuSidedItemExpandableItemMenu<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemMenu = DThemeMenuItemMenu,\n\tOPTIONS extends DMenuItemMenuOptions<VALUE, THEME> = DMenuItemMenuOptions<VALUE, THEME>\n> extends DMenuItemExpandableItemMenu<VALUE, THEME, OPTIONS> {\n\tprotected onOpen( menu: DMenu<VALUE> ): void {\n\t\tmenu.open( this, this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemMenu\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemExpandableItemSeparator } from \"./d-menu-item-expandable-item-separator\";\nimport { DMenuItemSeparatorOptions, DThemeMenuItemSeparator } from \"./d-menu-item-separator\";\n\nexport class DMenuSidedItemExpandableItemSeparator<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemSeparator = DThemeMenuItemSeparator,\n\tOPTIONS extends DMenuItemSeparatorOptions<VALUE, THEME> = DMenuItemSeparatorOptions<VALUE, THEME>\n> extends DMenuItemExpandableItemSeparator<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemSeparator\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemExpandableItemSpace } from \"./d-menu-item-expandable-item-space\";\nimport { DMenuItemSpaceOptions, DThemeMenuItemSpace } from \"./d-menu-item-space\";\n\nexport class DMenuSidedItemExpandableItemSpace<\n\tTHEME extends DThemeMenuItemSpace = DThemeMenuItemSpace,\n\tOPTIONS extends DMenuItemSpaceOptions<THEME> = DMenuItemSpaceOptions<THEME>\n> extends DMenuItemExpandableItemSpace<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMenuItemExpandableItemText } from \"./d-menu-item-expandable-item-text\";\nimport { DMenuItemTextOptions, DThemeMenuItemText } from \"./d-menu-item-text\";\n\nexport class DMenuSidedItemExpandableItemText<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuItemText = DThemeMenuItemText,\n\tOPTIONS extends DMenuItemTextOptions<VALUE, THEME> = DMenuItemTextOptions<VALUE, THEME>\n> extends DMenuItemExpandableItemText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedItemExpandableItemText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DMenuItemCheck } from \"../d-menu-item-check\";\nimport { DMenuItemExpandable } from \"../d-menu-item-expandable\";\nimport { DMenuItemLink } from \"../d-menu-item-link\";\nimport { DMenuItemMenu } from \"../d-menu-item-menu\";\nimport { DMenuItemOptionsUnion } from \"../d-menu-item-options-union\";\nimport { DMenuItemSeparator } from \"../d-menu-item-separator\";\nimport { DMenuItemSpace } from \"../d-menu-item-space\";\nimport { DMenuSidedItemExpandable } from \"../d-menu-sided-item-expandable\";\nimport { DMenuSidedItemExpandableItemCheck } from \"../d-menu-sided-item-expandable-item-check\";\nimport { DMenuSidedItemExpandableItemLink } from \"../d-menu-sided-item-expandable-item-link\";\nimport { DMenuSidedItemExpandableItemMenu } from \"../d-menu-sided-item-expandable-item-menu\";\nimport { DMenuSidedItemExpandableItemSeparator } from \"../d-menu-sided-item-expandable-item-separator\";\nimport { DMenuSidedItemExpandableItemSpace } from \"../d-menu-sided-item-expandable-item-space\";\nimport { DMenuSidedItemExpandableItemText } from \"../d-menu-sided-item-expandable-item-text\";\nimport { DMenuSidedItemExpandables } from \"../d-menu-sided-item-expandables\";\nimport { DMenuSideds } from \"../d-menu-sideds\";\n\nexport const loadMenuSidedItemExpandable = () => {\n\tDMenuSideds.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemExpandable.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandable( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemCheck.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemCheck( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemLink.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemLink( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator((\n\t\toptions: DMenuItemOptionsUnion<any>, sticky: boolean\n\t): DisplayObject | null => {\n\t\tif( DMenuItemMenu.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemMenu( DMenuItemMenu.toSubMenuOptions( options, sticky ) );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSeparator.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemSeparator( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.addItemCreator(( options: DMenuItemOptionsUnion<any> ): DisplayObject | null => {\n\t\tif( DMenuItemSpace.isCompatible( options ) ) {\n\t\t\treturn new DMenuSidedItemExpandableItemSpace( options );\n\t\t}\n\t\treturn null;\n\t});\n\n\tDMenuSidedItemExpandables.setItemCreatorDefault(( options: any ): DisplayObject | null => {\n\t\treturn new DMenuSidedItemExpandableItemText( options );\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadMenuItem } from \"./load-menu-item\";\nimport { loadMenuItemExpandable } from \"./load-menu-item-expandable\";\nimport { loadMenuSidedItem } from \"./load-menu-sided-item\";\nimport { loadMenuSidedItemExpandable } from \"./load-menu-sided-item-expandable\";\n\nexport const loadMenuItemAll = () => {\n\tloadMenuItem();\n\tloadMenuItemExpandable();\n\tloadMenuSidedItem();\n\tloadMenuSidedItemExpandable();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../d-diagram-serialized\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\n\ntype Deserializer = (\n\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n) => Promise<EShape> | EShape | null;\n\nexport const EShapeDeserializers: { [ type: number ]: Deserializer | undefined } = {};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeBuffer } from \"./e-shape-buffer\";\nimport { EShapeUploaded } from \"./e-shape-uploaded\";\n\nexport type EShapeUploadedCreator = (\n\tbuffer: EShapeBuffer, shape: EShape,\n\tvoffset: number, ioffset: number,\n\tantialiasWeight: number\n) => EShapeUploaded | null;\n\nexport const EShapeUploadeds: {\n\t[ type: number ]: EShapeUploadedCreator | undefined\n} = {};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShapePointsParent } from \"./e-shape-points-parent\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\n\nexport enum EShapePointsStyle {\n\tNONE = 0,\n\tCLOSED = 1,\n\tNON_EXPANDING_WIDTH = 2,\n\tNON_SHRINKING_WIDTH = 4,\n\tNON_SCALING_DOT_AND_DASH = 8,\n\tDOTTED = 16,\n\tDOTTED_DENSELY = 32,\n\tDOTTED_LOOSELY = 64,\n\tDASHED = 128,\n\tDASHED_DENSELY = 256,\n\tDASHED_LOOSELY = 512,\n\tDOTTED_MASK = DOTTED | DOTTED_DENSELY | DOTTED_LOOSELY,\n\tDASHED_MASK = DASHED | DASHED_DENSELY | DASHED_LOOSELY,\n\tNON_SOLID_MASK = DOTTED_MASK | DASHED_MASK\n}\n\nexport interface EShapePoints {\n\treadonly length: number;\n\treadonly id: number;\n\tvalues: number[];\n\tsegments: number[];\n\tstyle: EShapePointsStyle;\n\n\tset( values?: number[], segments?: number[], style?: EShapePointsStyle ): this;\n\tcopy( source: EShapePoints ): this;\n\tclone( parent: EShapePointsParent ): EShapePoints;\n\ttoPoints( transform: Matrix ): Point[];\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\nimport { EShapePointsStyle } from \"./e-shape-points\";\n\nexport class EShapePointsStyleUploadeds {\n\tstatic toScaleInvariant( style: EShapePointsStyle ): number {\n\t\tconst nonExpandingWidth = ( style & EShapePointsStyle.NON_EXPANDING_WIDTH ? 1 : 0 );\n\t\tconst nonShrinkingWidth = ( style & EShapePointsStyle.NON_SHRINKING_WIDTH ? 2 : 0 );\n\t\tconst nonScalingDotAndDash = ( style & EShapePointsStyle.NON_SCALING_DOT_AND_DASH ? 4 : 0 );\n\t\tif( style & EShapePointsStyle.NON_SOLID_MASK ) {\n\t\t\treturn nonExpandingWidth | nonShrinkingWidth | nonScalingDotAndDash;\n\t\t} else {\n\t\t\treturn nonExpandingWidth | nonShrinkingWidth;\n\t\t}\n\t}\n\n\tstatic toDash(\n\t\tlength: number, strokeWidth: number, style: EShapePointsStyle, result: IPoint\n\t): IPoint {\n\t\tresult.set( 2 * length, 0 );\n\t\tif( style & EShapePointsStyle.NON_SOLID_MASK ) {\n\t\t\tif( style & EShapePointsStyle.DOTTED ) {\n\t\t\t\tresult.set( strokeWidth, strokeWidth );\n\t\t\t} else if( style & EShapePointsStyle.DOTTED_DENSELY ) {\n\t\t\t\tresult.set( strokeWidth, strokeWidth * 0.5 );\n\t\t\t} else if( style & EShapePointsStyle.DOTTED_LOOSELY ) {\n\t\t\t\tresult.set( strokeWidth, strokeWidth * 2 );\n\t\t\t} else if( style & EShapePointsStyle.DASHED ) {\n\t\t\t\tresult.set( strokeWidth * 2, strokeWidth );\n\t\t\t} else if( style & EShapePointsStyle.DASHED_DENSELY ) {\n\t\t\t\tresult.set( strokeWidth * 2, strokeWidth * 0.5 );\n\t\t\t} else if( style & EShapePointsStyle.DASHED_LOOSELY ) {\n\t\t\t\tresult.set( strokeWidth * 2, strokeWidth * 2 );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeBarPosition {\n\tTOP,\n\tLEFT,\n\tRIGHT,\n\tBOTTOM\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsParent } from \"../e-shape-points-parent\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeBarPosition } from \"./e-shape-bar-position\";\n\nexport class EShapeBarPoints implements EShapePoints {\n\tprotected _parent: EShapePointsParent;\n\tprotected _id: number;\n\tprotected _style: EShapePointsStyle;\n\tprotected _values: [ number, number, number, number ];\n\tprotected _segments: number[];\n\tprotected _size: number;\n\tprotected _position: EShapeBarPosition;\n\n\tprotected _updatedSize: number;\n\tprotected _updatedParentSizeX: number;\n\tprotected _updatedParentSizeY: number;\n\tprotected _updatedPosition: EShapeBarPosition;\n\n\tconstructor( parent: EShapePointsParent, position: EShapeBarPosition, size: number, style: EShapePointsStyle ) {\n\t\tthis._parent = parent;\n\t\tthis._id = 0;\n\t\tthis._values = [ 0, 0, 0, 0 ];\n\t\tthis._segments = [];\n\t\tthis._style = style;\n\t\tthis._size = size;\n\t\tthis._position = position;\n\n\t\tthis._updatedSize = NaN;\n\t\tthis._updatedParentSizeX = NaN;\n\t\tthis._updatedParentSizeY = NaN;\n\t\tthis._updatedPosition = NaN;\n\t}\n\n\tprotected getComputedSize( size: number, position: EShapeBarPosition, sizeX: number, sizeY: number ): number {\n\t\tif( 0 <= size ) {\n\t\t\treturn size;\n\t\t} else {\n\t\t\tswitch( position ) {\n\t\t\tcase EShapeBarPosition.TOP:\n\t\t\tcase EShapeBarPosition.BOTTOM:\n\t\t\t\treturn Math.abs( sizeY );\n\t\t\tcase EShapeBarPosition.RIGHT:\n\t\t\tcase EShapeBarPosition.LEFT:\n\t\t\t\treturn Math.abs( sizeX );\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tprotected update(): void {\n\t\tconst parentSize = this._parent.size;\n\t\tconst parentSizeX = parentSize.x;\n\t\tconst parentSizeY = parentSize.y;\n\t\tconst position = this._position;\n\t\tconst size = this._size;\n\t\tif( this._updatedSize !== size || this._updatedParentSizeX !== parentSizeX ||\n\t\t\tthis._updatedParentSizeY !== parentSizeY || this._updatedPosition !== position ) {\n\t\t\tthis._id += 1;\n\t\t\tthis._updatedSize = size;\n\t\t\tthis._updatedParentSizeX = parentSizeX;\n\t\t\tthis._updatedParentSizeY = parentSizeY;\n\t\t\tthis._updatedPosition = position;\n\t\t\tconst psxh = parentSizeX * 0.5;\n\t\t\tconst psyh = parentSizeY * 0.5;\n\t\t\tconst computedSize = this.getComputedSize( size, position, parentSizeX, parentSizeY );\n\t\t\tconst values = this._values;\n\t\t\tswitch( position ) {\n\t\t\tcase EShapeBarPosition.TOP:\n\t\t\t\tvalues[ 0 ] = 0;\n\t\t\t\tvalues[ 1 ] = -psyh;\n\t\t\t\tvalues[ 2 ] = 0;\n\t\t\t\tvalues[ 3 ] = -psyh + computedSize;\n\t\t\t\tbreak;\n\t\t\tcase EShapeBarPosition.RIGHT:\n\t\t\t\tvalues[ 0 ] = psxh;\n\t\t\t\tvalues[ 1 ] = 0;\n\t\t\t\tvalues[ 2 ] = psxh - computedSize;\n\t\t\t\tvalues[ 3 ] = 0;\n\t\t\t\tbreak;\n\t\t\tcase EShapeBarPosition.BOTTOM:\n\t\t\t\tvalues[ 0 ] = 0;\n\t\t\t\tvalues[ 1 ] = psyh;\n\t\t\t\tvalues[ 2 ] = 0;\n\t\t\t\tvalues[ 3 ] = psyh - computedSize;\n\t\t\t\tbreak;\n\t\t\tcase EShapeBarPosition.LEFT:\n\t\t\t\tvalues[ 0 ] = -psxh;\n\t\t\t\tvalues[ 1 ] = 0;\n\t\t\t\tvalues[ 2 ] = -psxh + computedSize;\n\t\t\t\tvalues[ 3 ] = 0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tget length(): number {\n\t\treturn 2;\n\t}\n\n\tget id(): number {\n\t\tthis.update();\n\t\treturn this._id;\n\t}\n\n\tget values(): number[] {\n\t\tthis.update();\n\t\treturn this._values;\n\t}\n\n\tset values( values: number[] ) {\n\t\t// SUPPOSED NOT TO BE CALLED\n\t}\n\n\tget segments(): number[] {\n\t\treturn this._segments;\n\t}\n\n\tset segments( segments: number[] ) {\n\t\t// SUPPOSED NOT TO BE CALLED\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tset size( size: number ) {\n\t\tthis.moveTo( undefined, size, undefined );\n\t}\n\n\tget position(): EShapeBarPosition {\n\t\treturn this._position;\n\t}\n\n\tset position( position: EShapeBarPosition ) {\n\t\tthis.moveTo( position, undefined, undefined );\n\t}\n\n\tget style(): EShapePointsStyle {\n\t\treturn this._style;\n\t}\n\n\tset style( style: EShapePointsStyle ) {\n\t\tthis.moveTo( undefined, undefined, style );\n\t}\n\n\tcopy( source: EShapePoints ): this {\n\t\tif( source instanceof EShapeBarPoints ) {\n\t\t\treturn this.moveTo( source.position, source.size, source.style );\n\t\t} else {\n\t\t\treturn this.moveTo( undefined, undefined, source.style );\n\t\t}\n\t}\n\n\tset( newValues?: number[], newSegments?: number[], newStyle?: EShapePointsStyle ): this {\n\t\tlet newPosition: EShapeBarPosition | undefined;\n\t\tlet newSize: number | undefined;\n\t\tif( newValues != null ) {\n\t\t\tconst x0 = newValues[ 0 ];\n\t\t\tif( x0 === 0 ) {\n\t\t\t\tconst y0 = newValues[ 1 ];\n\t\t\t\tnewPosition = ( y0 <= 0 ? EShapeBarPosition.TOP : EShapeBarPosition.BOTTOM );\n\t\t\t\tnewSize = Math.abs( newValues[ 3 ] - y0 );\n\t\t\t} else {\n\t\t\t\tnewPosition = ( x0 <= 0 ? EShapeBarPosition.LEFT : EShapeBarPosition.RIGHT );\n\t\t\t\tnewSize = Math.abs( newValues[ 2 ] - x0 );\n\t\t\t}\n\t\t}\n\t\treturn this.moveTo( newPosition, newSize, newStyle );\n\t}\n\n\tprotected moveTo( position?: EShapeBarPosition, size?: number, style?: EShapePointsStyle ): this {\n\t\tlet isChanged = false;\n\n\t\tif( style != null && this._style !== style ) {\n\t\t\tthis._style = style;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( position != null && this._position !== position ) {\n\t\t\tthis._position = position;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( size != null && this._size !== size ) {\n\t\t\tthis._size = size;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tclone( parent: EShapePointsParent ): EShapeBarPoints {\n\t\treturn new EShapeBarPoints( parent, this._position, this._size, this._style );\n\t}\n\n\ttoPoints( transform: Matrix ): Point[] {\n\t\tconst result: Point[] = [];\n\t\tconst values = this.values;\n\t\tfor( let i = 0, imax = values.length; i < imax; i += 2 ) {\n\t\t\tconst point = new Point( values[ i + 0 ], values[ i + 1 ] );\n\t\t\tresult.push( transform.apply( point, point ) );\n\t\t}\n\t\treturn result;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn manager.add( `[${this._position},${this._size},${this._style}]` );\n\t}\n\n\tdeserialize( resourceId: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tif( 0 <= resourceId && resourceId < manager.resources.length ) {\n\t\t\tconst resource = manager.resources[ resourceId ];\n\t\t\tconst parsed = JSON.parse( resource ) as [ number, number, number ];\n\t\t\tthis.moveTo( parsed[ 0 ], parsed[ 1 ], parsed[ 2 ] );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeCorner {\n\tNONE = 0,\n\tTOP_LEFT = 1,\n\tTOP_RIGHT = 2,\n\tBOTTOM_LEFT = 4,\n\tBOTTOM_RIGHT = 8,\n\tTOP = TOP_LEFT | TOP_RIGHT,\n\tBOTTOM = BOTTOM_LEFT | BOTTOM_RIGHT,\n\tLEFT = TOP_LEFT | BOTTOM_LEFT,\n\tRIGHT = TOP_RIGHT | BOTTOM_RIGHT,\n\tALL = TOP | BOTTOM\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\n\nexport enum EShapeStrokeSide {\n\tNONE = 0,\n\tTOP = 1,\n\tRIGHT = 2,\n\tBOTTOM = 4,\n\tLEFT = 8,\n\tTOP_OR_LEFT = TOP | LEFT,\n\tTOP_OR_RIGHT = TOP | RIGHT,\n\tBOTTOM_OR_LEFT = BOTTOM | LEFT,\n\tBOTTOM_OR_RIGHT = BOTTOM | RIGHT,\n\tALL = TOP | RIGHT | BOTTOM | LEFT\n}\n\nexport interface EShapeStrokeLike {\n\tenable: boolean;\n\tcolor: number;\n\talpha: number;\n\twidth: number;\n\talign: number;\n\tside: EShapeStrokeSide;\n}\n\nexport interface EShapeStroke extends EShapeStrokeLike {\n\tcopy( target?: Partial<EShapeStrokeLike> ): void;\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number, align?: number, side?: EShapeStrokeSide ): void;\n\tclone(): EShapeStroke;\n\ttoObject(): EShapeStrokeLike;\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeStrokeSide } from \"./e-shape-stroke\";\n\nexport class EShapeDefaults {\n\tstatic IS_EDIT_MODE: boolean = false;\n\n\tstatic FILL_COLOR: number = 0xffffff;\n\tstatic FILL_ALPHA: number = 0.5;\n\tstatic STROKE_COLOR: number = 0x4f4f4f;\n\tstatic STROKE_COLOR_DARK: number = 0x4f4f4f;\n\tstatic STROKE_COLOR_LIGHT: number = 0xd0d0d0;\n\tstatic STROKE_ALPHA: number = 1;\n\tstatic STROKE_WIDTH: number = 2;\n\tstatic STROKE_ALIGN: number = 0;\n\tstatic STROKE_SIDE: number = EShapeStrokeSide.ALL;\n\tstatic TEXT_VALUE: string = \"\";\n\tstatic TEXT_FAMILY: string = \"auto\";\n\tstatic TEXT_SIZE: number = 14;\n\tstatic CURSOR: string = \"\";\n\tstatic RADIUS: number = 0.25;\n\tstatic SIZE_X: number = 100;\n\tstatic SIZE_Y: number = 100;\n\tstatic HIGHLIGHT_COLOR: number = 0x1e87f0;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, IPoint, Point, Rectangle, Texture, utils } from \"pixi.js\";\nimport { DBaseState } from \"../d-base-state\";\nimport { DDiagramSerializedItem } from \"../d-diagram-serialized\";\nimport { EShapeAction } from \"./action/e-shape-action\";\nimport { EShapeContainer } from \"./e-shape-container\";\nimport { EShapeCorner } from \"./e-shape-corner\";\nimport { EShapeEditor } from \"./e-shape-editor\";\nimport { EShapeFill } from \"./e-shape-fill\";\nimport { EShapeGradientLike } from \"./e-shape-gradient\";\nimport { EShapeLayout } from \"./e-shape-layout\";\nimport { EShapePoints } from \"./e-shape-points\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\nimport { EShapeRuntime } from \"./e-shape-runtime\";\nimport { EShapeStroke } from \"./e-shape-stroke\";\nimport { EShapeTag } from \"./e-shape-tag\";\nimport { EShapeText } from \"./e-shape-text\";\nimport { EShapeTransform } from \"./e-shape-transform\";\nimport { EShapeType } from \"./e-shape-type\";\nimport { EShapeUploaded } from \"./e-shape-uploaded\";\n\nexport enum EShapeCopyPart {\n\tNONE = 0,\n\tTRANSFORM = 1,\n\tSIZE = 2,\n\tSTYLE = 4,\n\tACTION = 8,\n\tPOINTS = 16,\n\tSTATE = 32,\n\tALL = TRANSFORM | SIZE | STYLE | ACTION | POINTS | STATE\n}\n\nexport interface EShape extends utils.EventEmitter {\n\tid: string;\n\treadonly type: EShapeType;\n\treadonly size: IPoint;\n\treadonly fill: EShapeFill;\n\treadonly stroke: EShapeStroke;\n\treadonly transform: EShapeTransform;\n\tradius: number;\n\tcorner: EShapeCorner;\n\treadonly points?: EShapePoints;\n\timage?: HTMLImageElement;\n\timageSrc?: string;\n\ttexture?: Texture;\n\tgradient?: EShapeGradientLike;\n\treadonly text: EShapeText;\n\treadonly tag: EShapeTag;\n\treadonly action: EShapeAction;\n\tcursor: string;\n\tvisible: boolean;\n\tinteractive: boolean;\n\tshortcut?: string;\n\ttitle?: string;\n\n\t// Hierarchy\n\tparent: EShapeContainer | EShape | null;\n\troot: EShape;\n\tchildren: EShape[];\n\tlayout?: EShapeLayout;\n\n\t// Working space\n\tindex: number;\t\t// A work space for sorting.\n\tselected: boolean;\n\treference: number;\t// Count of references from commands\n\n\t// Working space for the viewer\n\truntime?: EShapeRuntime;\n\n\t// Working space for the editor\n\teditor?: EShapeEditor;\n\n\t// Working space for the renderer\n\tuploaded?: EShapeUploaded;\n\n\t//\n\thovered: boolean;\n\tactive: boolean;\n\treadonly: boolean;\n\treadonly enabled: boolean;\n\tdisabled: boolean;\n\tdragging: boolean;\n\tfocused: boolean;\n\treadonly focusedin: boolean;\n\tunfocusable: boolean;\n\treadonly clicked: boolean;\n\treadonly pressed: boolean;\n\treadonly down: boolean;\n\treadonly up: boolean;\n\treadonly shadowed: boolean;\n\n\t//\n\ttoDirty(): void;\n\tattach( parent: EShapeContainer | EShape, at?: number ): this;\n\tdetach(): this;\n\tcopy( source: EShape ): this;\n\tcopy( source: EShape, part: EShapeCopyPart ): this;\n\tclone(): EShape;\n\tdestroy(): void;\n\n\t//\n\tgetState(): DBaseState;\n\tsetState( state: DBaseState, isOn: boolean ): this;\n\thasState( state: DBaseState ): boolean;\n\tfocus(): this;\n\tblur(): this;\n\n\t//\n\tonDblClick( e: MouseEvent ): void;\n\tonShortcut( e: KeyboardEvent ): void;\n\tonSizeChange(): void;\n\n\t// Action\n\tupdate( time: number ): void;\n\n\t// Transform\n\tupdateTransform(): void;\n\tdisallowOnTransformChange(): void;\n\tallowOnTransformChange( invokeOnTransformChange: boolean ): void;\n\tonTransformChange(): void;\n\tonChildTransformChange(): void;\n\n\t// Uploaded\n\tdisallowUploadedUpdate(): void;\n\tallowUploadedUpdate(): void;\n\tupdateUploaded(): void;\n\tupdateUploadedRecursively(): void;\n\n\t// Serialization\n\tserialize( manager: EShapeResourceManagerSerialization ): DDiagramSerializedItem;\n\n\t// Hit test\n\tcontains( point: Point ): EShape | null;\n\tcontainsBBox( point: Point ): boolean;\n\n\t// Coordinate\n\ttoGlobal( position: IPoint, point: Point, skipUpdate?: boolean ): Point;\n\ttoLocal<T extends IPoint>(\n\t\tposition: IPoint,\n\t\tfrom?: DisplayObject,\n\t\tpoint?: T,\n\t\tskipUpdate?: boolean\n\t): T;\n\tgetBounds( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle;\n\tgetBoundsInternal( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle;\n\tgetBoundsLocal( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport { DApplications } from \"../d-applications\";\nimport { DBaseState } from \"../d-base-state\";\nimport { DControllers } from \"../d-controllers\";\nimport { UtilKeyboardEvent } from \"../util/util-keyboard-event\";\nimport { EShapeActionRuntime } from \"./action/e-shape-action-runtime\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeFillLike } from \"./e-shape-fill\";\nimport { EShapeStrokeLike } from \"./e-shape-stroke\";\nimport { EShapeTextLike } from \"./e-shape-text\";\n\nexport enum EShapeRuntimeReset {\n\tNONE = 0,\n\tPOSITION_X = 1,\n\tPOSITION_Y = 2,\n\tPOSITION = POSITION_X | POSITION_Y,\n\tROTATION = 4,\n\tCOLOR_FILL = 8,\n\tCOLOR_STROKE = 16,\n\tCOLOR_FILL_AND_STROKE = COLOR_FILL | COLOR_STROKE,\n\tCOLOR_TEXT = 32,\n\tCOLOR_TEXT_OUTLINE = 64,\n\tCOLOR = COLOR_FILL | COLOR_STROKE | COLOR_TEXT | COLOR_TEXT_OUTLINE,\n\tVISIBILITY = 128,\n\tHEIGHT = 256,\n\tWIDTH = 512,\n\tSIZE = HEIGHT | WIDTH,\n\tTEXT = 1024,\n\tCURSOR = 2048\n}\n\nexport enum EShapeRuntimeState {\n\tNONE = 0,\n\tCHANGED = 1,\n\tCLICKED = 2,\n\tDOWN = 4,\n\tUP = 8,\n\tPRESSED = 16,\n\tPERSISTENT = PRESSED\n}\n\nexport class EShapeRuntime {\n\tx: number;\n\ty: number;\n\tsize: Point;\n\trotation: number;\n\tactions: EShapeActionRuntime[];\n\tfill: EShapeFillLike;\n\tstroke: EShapeStrokeLike;\n\ttext: EShapeTextLike;\n\tcursor: string;\n\n\treset: EShapeRuntimeReset;\n\twritten: EShapeRuntimeReset;\n\n\teffect: number;\n\n\tstate: EShapeRuntimeState;\n\n\tinteractive: boolean;\n\n\tconstructor( shape: EShape ) {\n\t\tconst transform = shape.transform;\n\t\tconst position = transform.position;\n\t\tthis.x = position.x;\n\t\tthis.y = position.y;\n\t\tthis.size = new Point( shape.size.x, shape.size.y );\n\t\tthis.rotation = transform.rotation;\n\t\tthis.actions = [];\n\t\tthis.fill = shape.fill.toObject();\n\t\tthis.stroke = shape.stroke.toObject();\n\t\tthis.text = shape.text.toObject();\n\t\tthis.cursor = shape.cursor;\n\t\tthis.reset = EShapeRuntimeReset.NONE;\n\t\tthis.written = EShapeRuntimeReset.NONE;\n\t\tthis.effect = NaN;\n\t\tthis.state = EShapeRuntimeState.NONE;\n\t\tthis.interactive = false;\n\t}\n\n\tonPointerClick( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tif( ! shape.disabled ) {\n\t\t\tif( ! (this.state & EShapeRuntimeState.CLICKED) ) {\n\t\t\t\tthis.state |= EShapeRuntimeState.CHANGED | EShapeRuntimeState.CLICKED;\n\t\t\t\tDApplications.update( shape );\n\t\t\t}\n\t\t}\n\t}\n\n\tonPointerDblClick( shape: EShape, e?: MouseEvent | TouchEvent ): boolean {\n\t\treturn false;\n\t}\n\n\tonPointerOver( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tshape.hovered = true;\n\t}\n\n\tonPointerOut( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tshape.hovered = false;\n\t}\n\n\tonPointerDown( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tconst layer = DApplications.getLayer( shape );\n\t\tif( ! (this.state & EShapeRuntimeState.DOWN) ) {\n\t\t\tthis.state |= EShapeRuntimeState.CHANGED | EShapeRuntimeState.DOWN | EShapeRuntimeState.PRESSED;\n\t\t\tif( layer ) {\n\t\t\t\tlayer.update();\n\t\t\t}\n\t\t}\n\t\tif( layer ) {\n\t\t\tconst focusController = layer.getFocusController();\n\t\t\tfocusController.setFocused( focusController.findFocusableParent( shape ), true, true );\n\t\t}\n\t}\n\n\tonPointerUp( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\tif( ! (this.state & EShapeRuntimeState.UP) ) {\n\t\t\tthis.state |= EShapeRuntimeState.CHANGED | EShapeRuntimeState.UP;\n\t\t\tthis.state &= ~EShapeRuntimeState.PRESSED;\n\t\t\tDApplications.update( shape );\n\t\t}\n\t}\n\n\tonPointerMove( shape: EShape, e?: interaction.InteractionEvent ): void {\n\t\t//\n\t}\n\n\tonKeyDown( shape: EShape, e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onPointerDown( shape );\n\t\t}\n\t\treturn false;\n\t}\n\n\tonKeyUp( shape: EShape, e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onPointerUp( shape );\n\t\t\tthis.onPointerClick( shape );\n\t\t}\n\t\treturn false;\n\t}\n\n\tonStateChange( shape: EShape, newState: DBaseState, oldState: DBaseState ): void {\n\t\tthis.state |= EShapeRuntimeState.CHANGED;\n\t\tDApplications.update( shape );\n\t}\n\n\tupdate( shape: EShape, time: number ): void {\n\t\tconst tag = shape.tag;\n\t\tconst isEffectTimeUp = ( this.effect <= time );\n\t\tif( tag.isChanged || (this.state & EShapeRuntimeState.CHANGED) || isEffectTimeUp ) {\n\t\t\tif( isEffectTimeUp ) {\n\t\t\t\tthis.effect = NaN;\n\t\t\t}\n\t\t\tshape.disallowUploadedUpdate();\n\t\t\tthis.onUpdate( shape, time );\n\t\t\tshape.allowUploadedUpdate();\n\t\t\tthis.state &= EShapeRuntimeState.PERSISTENT;\n\t\t\ttag.isChanged = false;\n\t\t}\n\t}\n\n\tprotected onUpdate( shape: EShape, time: number ): void {\n\t\tif( 0 < this.actions.length ) {\n\t\t\tthis.executeActions( shape, time );\n\t\t\tthis.resetUnwrittenProperties( shape );\n\t\t}\n\t}\n\n\tprotected executeActions( shape: EShape, time: number ): void {\n\t\tthis.written = EShapeRuntimeReset.NONE;\n\t\tconst actions = this.actions;\n\t\tfor( let i = 0, imax = actions.length; i < imax; ++i ) {\n\t\t\tactions[ i ].execute( shape, this, time );\n\t\t}\n\t}\n\n\tprotected resetUnwrittenProperties( shape: EShape ): void {\n\t\tconst target = (~this.written) & this.reset;\n\t\tif( target !== EShapeRuntimeReset.NONE ) {\n\t\t\tif( target & EShapeRuntimeReset.POSITION_X ) {\n\t\t\t\tshape.transform.position.x = this.x;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.POSITION_Y ) {\n\t\t\t\tshape.transform.position.y = this.y;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.VISIBILITY ) {\n\t\t\t\tshape.visible = true;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.COLOR_FILL ) {\n\t\t\t\tconst fill = this.fill;\n\t\t\t\tshape.fill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tfill.color,\n\t\t\t\t\tfill.alpha\n\t\t\t\t);\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.COLOR_STROKE ) {\n\t\t\t\tconst stroke = this.stroke;\n\t\t\t\tshape.stroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tstroke.color,\n\t\t\t\t\tstroke.alpha\n\t\t\t\t);\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.COLOR_TEXT ) {\n\t\t\t\tconst text = this.text;\n\t\t\t\tshape.text.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\ttext.color,\n\t\t\t\t\ttext.alpha\n\t\t\t\t);\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.COLOR_TEXT_OUTLINE ) {\n\t\t\t\tconst outline = this.text.outline;\n\t\t\t\tshape.text.outline.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\toutline.color,\n\t\t\t\t\toutline.alpha\n\t\t\t\t);\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.HEIGHT ) {\n\t\t\t\tshape.size.y = this.size.y;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.WIDTH ) {\n\t\t\t\tshape.size.x = this.size.x;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.ROTATION ) {\n\t\t\t\tshape.transform.rotation = this.rotation;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.TEXT ) {\n\t\t\t\tshape.text.value = this.text.value;\n\t\t\t}\n\t\t\tif( target & EShapeRuntimeReset.CURSOR ) {\n\t\t\t\tshape.cursor = this.cursor;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\n\nexport class EShapeAction {\n\tvalues: EShapeActionValue[];\n\n\tconstructor() {\n\t\tthis.values = [];\n\t}\n\n\tadd( value: EShapeActionValue, index?: number ): void {\n\t\tconst values = this.values;\n\t\tif( index != null ) {\n\t\t\tvalues.splice( index, 0, value );\n\t\t} else {\n\t\t\tvalues.push( value );\n\t\t}\n\t}\n\n\taddAll( values: EShapeActionValue[] ): void {\n\t\tconst sources = values;\n\t\tconst destinations = this.values;\n\t\tfor( let i = 0, imax = sources.length; i < imax; ++i) {\n\t\t\tdestinations.push( sources[i] );\n\t\t}\n\t}\n\n\tindexOf( target: EShapeActionValue ): number {\n\t\tconst values = this.values;\n\n\t\t// Instance-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif( value === target ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\t// Data-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif( value.isEquals( target ) ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tget( index: number ): EShapeActionValue | null {\n\t\tconst result = this.values[ index ];\n\t\tif( result != null ) {\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( index: number, value: EShapeActionValue ): void {\n\t\tthis.values[ index ] = value;\n\t}\n\n\tremove( index: number ): void {\n\t\tthis.values.splice( index, 1 );\n\t}\n\n\tclear(): void {\n\t\tthis.values.length = 0;\n\t}\n\n\tsize(): number {\n\t\treturn this.values.length;\n\t}\n\n\tswap( indexA: number, indexB: number ): void {\n\t\tconst values = this.values;\n\t\tconst tmp = values[ indexB ];\n\t\tvalues[ indexB ] = values[ indexA ];\n\t\tvalues[ indexA ] = tmp;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number[] {\n\t\tconst result: number[] = [];\n\t\tconst values = this.values;\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tresult.push( values[ i ].serialize( manager ) );\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\nimport { EShapeTagValueRange, EShapeTagValueRangeLike } from \"./e-shape-tag-value-range\";\n\nexport enum EShapeTagValueOrder {\n\tASCENDING,\n\tDESCENDING\n}\n\nexport interface EShapeTagValueLike {\n\tid: string;\n\tinitial: string;\n\tformat: string;\n\trange: EShapeTagValueRangeLike;\n\tcapacity: number;\n\torder: EShapeTagValueOrder;\n}\n\nexport interface EShapeTagValueParent {\n\tisChanged: boolean;\n}\n\nexport interface EShapeTagValue extends EShapeTagValueLike {\n\tvalue: unknown;\n\treadonly nvalue: number;\n\ttime: number;\n\n\tvalues: unknown[];\n\ttimes: number[];\n\n\trange: EShapeTagValueRange;\n\tparent?: EShapeTagValueParent;\n\n\tformatter?: ( value: unknown ) => unknown;\n\n\tclear(): void;\n\tremove( index: number ): void;\n\tremoveAll( indices: number[] ): void;\n\tcopy( target: EShapeTagValue ): void;\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\n\nexport enum EShapeTagValueRangeType {\n\tNONE = 0,\n\tFROM = 1,\n\tTO = 2,\n\tFROM_TO = 3\n}\n\nexport interface EShapeTagValueRangeLike {\n\ttype: EShapeTagValueRangeType;\n\tfrom: number;\n\tto: number;\n}\n\nexport interface EShapeTagValueRangeParent {\n\tisChanged: boolean;\n}\n\nexport interface EShapeTagValueRange extends EShapeTagValueRangeLike {\n\tparent?: EShapeTagValueRangeParent;\n\n\tset( from?: number | null, to?: number | null ): boolean;\n\tnormalize( value: number ): number;\n\tisEquals( target: EShapeTagValueRangeLike ): boolean;\n\tcopy( target: EShapeTagValueRangeLike ): void;\n\ttoObject(): EShapeTagValueRangeLike;\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Matrix, Transform } from \"pixi.js\";\nimport { EShapeTransformParent } from \"./e-shape-transform-parent\";\n\nexport interface EShapeTransform extends Transform {\n\tinternalTransform: Matrix;\n\n\tposition: IPoint;\n\tpivot: IPoint;\n\trotation: number;\n\tskew: IPoint;\n\tscale: IPoint;\n\n\tgetLocalIdCurrent(): number;\n\tgetLocalId(): number;\n\tgetParentId(): number;\n\tgetWorldId(): number;\n}\n\nexport class EShapeTransformImpl extends Transform implements EShapeTransform {\n\tprotected _parent: EShapeTransformParent;\n\tinternalTransform: Matrix;\n\n\tconstructor( parent: EShapeTransformParent ) {\n\t\tsuper();\n\t\tthis.internalTransform = new Matrix();\n\t\tthis._parent = parent;\n\t}\n\n\tprotected onChange(): void {\n\t\t(Transform.prototype as any).onChange.call( this );\n\t\tthis._parent.onTransformChange();\n\t}\n\n\tprotected updateSkew(): void {\n\t\t(Transform.prototype as any).updateSkew.call( this );\n\t\tthis._parent.onTransformChange();\n\t}\n\n\tgetLocalIdCurrent(): number {\n\t\treturn (this as any)._currentLocalID;\n\t}\n\n\tgetLocalId(): number {\n\t\treturn (this as any)._localID;\n\t}\n\n\tgetParentId(): number {\n\t\treturn (this as any)._parentID;\n\t}\n\n\tgetWorldId(): number {\n\t\treturn (this as any)._worldID;\n\t}\n\n\tupdateTransform( parentTransform: Transform ): void {\n\t\tconst oldLocalId = (this as any)._currentLocalID;\n\t\tconst oldWorldId = (this as any)._worldID;\n\t\tsuper.updateTransform( parentTransform );\n\t\tconst newLocalId = (this as any)._currentLocalID;\n\t\tconst newWorldId = (this as any)._worldID;\n\t\tif( oldLocalId !== newLocalId ) {\n\t\t\tconst localTransform = this.localTransform;\n\t\t\tconst internalTransform = this.internalTransform;\n\t\t\tlocalTransform.copyTo( internalTransform );\n\t\t\tif( parentTransform instanceof EShapeTransformImpl ) {\n\t\t\t\tinternalTransform.prepend( parentTransform.internalTransform );\n\t\t\t}\n\t\t} else if( oldWorldId !== newWorldId ) {\n\t\t\tconst localTransform = this.localTransform;\n\t\t\tconst internalTransform = this.internalTransform;\n\t\t\tif( parentTransform instanceof EShapeTransformImpl ) {\n\t\t\t\tlocalTransform.copyTo( internalTransform ).prepend( parentTransform.internalTransform );\n\t\t\t\t(this as any)._currentLocalID += 1;\n\t\t\t\t(this as any)._localID = (this as any)._currentLocalID;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShapeGradientLike, EShapeGradientPointLike } from \"../e-shape-gradient\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\n\nexport class EShapeGradients {\n\tstatic serializeGradient( gradient: EShapeGradientLike ): string {\n\t\tconst points = gradient.points;\n\t\tlet result = `[${gradient.direction}`;\n\t\tfor( let i = 0, imax = points.length, j = 1; i < imax; i += 1, j += 3 ) {\n\t\t\tconst point = points[ i ];\n\t\t\tresult += `,${point.color},${point.alpha},${point.position}`;\n\t\t}\n\t\tresult += \"]\";\n\t\treturn result;\n\t}\n\n\tstatic parseGradient( target: string ): number[] | null {\n\t\ttry {\n\t\t\treturn JSON.parse( target ) as number[];\n\t\t} catch( e ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tstatic deserializeGradient( target: string ): EShapeGradientLike | undefined {\n\t\tconst parsed = this.parseGradient( target );\n\t\tif( parsed == null || parsed.length < 7 ) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst direction = parsed[ 0 ];\n\t\t\tconst points: EShapeGradientPointLike[] = [];\n\t\t\tfor( let i = 1, imax = parsed.length; i < imax; i += 3 ) {\n\t\t\t\tpoints.push({\n\t\t\t\t\tcolor: parsed[ i + 0 ],\n\t\t\t\t\talpha: parsed[ i + 1 ],\n\t\t\t\t\tposition: parsed[ i + 2 ]\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tpoints,\n\t\t\t\tdirection\n\t\t\t};\n\t\t}\n\t}\n\n\tstatic toGradientId( gradient: EShapeGradientLike | undefined, manager: EShapeResourceManagerSerialization ): number {\n\t\tif( gradient != null ) {\n\t\t\tif( gradient.serialized == null ) {\n\t\t\t\tgradient.serialized = this.serializeGradient( gradient );\n\t\t\t}\n\t\t\treturn manager.add( gradient.serialized );\n\t\t}\n\t\treturn -1;\n\t}\n\n\tstatic toGradientImageUrl( gradient: EShapeGradientLike ): string {\n\t\tconst direction = gradient.direction;\n\t\tconst points = gradient.points;\n\n\t\tlet stops = \"\";\n\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\tconst point = points[ i ];\n\t\t\tconst color = UtilRgb.toCode( point.color );\n\t\t\tconst alpha = point.alpha;\n\t\t\tconst offset = point.position * 100;\n\t\t\tstops += `<stop offset=\"${offset}%\" stop-color=\"#${color}\" stop-opacity=\"${alpha}\" />`;\n\t\t}\n\n\t\tconst radian = direction * Math.PI / 180;\n\t\tconst dx = 0.5 * Math.cos( radian );\n\t\tconst dy = -0.5 * Math.sin( radian );\n\n\t\tconst url = \"data:image/svg+xml;base64,\" + btoa(\n\t\t\t`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">` +\n\t\t\t\t`<defs>` +\n\t\t\t\t\t`<linearGradient id=\"o2glkm3aeu2oio\" x1=\"${0.5 - dx}\" x2=\"${0.5 + dx}\" y1=\"${0.5 - dy}\" y2=\"${0.5 + dy}\">` +\n\t\t\t\t\t\tstops +\n\t\t\t\t\t`</linearGradient>` +\n\t\t\t\t`</defs>` +\n\t\t\t\t`<rect x=\"0\" y=\"0\" width=\"32\" height=\"32\" stroke=\"none\" fill=\"url(#o2glkm3aeu2oio)\" />` +\n\t\t\t`</svg>`\n\t\t);\n\n\t\treturn url;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, IPoint, Matrix, Point, Rectangle, Texture, Transform, utils } from \"pixi.js\";\nimport { DApplications } from \"../../d-applications\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeAction } from \"../action/e-shape-action\";\nimport { EShape, EShapeCopyPart } from \"../e-shape\";\nimport { EShapeContainer } from \"../e-shape-container\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeEditor } from \"../e-shape-editor\";\nimport { EShapeFill } from \"../e-shape-fill\";\nimport { EShapeGradientLike } from \"../e-shape-gradient\";\nimport { EShapeLayout } from \"../e-shape-layout\";\nimport { EShapePoints } from \"../e-shape-points\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeRuntime, EShapeRuntimeState } from \"../e-shape-runtime\";\nimport { EShapeStroke } from \"../e-shape-stroke\";\nimport { EShapeTag } from \"../e-shape-tag\";\nimport { EShapeText } from \"../e-shape-text\";\nimport { EShapeTransform, EShapeTransformImpl } from \"../e-shape-transform\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeUploaded } from \"../e-shape-uploaded\";\nimport { EShapeGradients } from \"./e-shape-gradients\";\n\nexport abstract class EShapeBase extends utils.EventEmitter implements EShape {\n\tid: string;\n\treadonly type: EShapeType;\n\tabstract readonly size: IPoint;\n\tabstract readonly fill: EShapeFill;\n\tabstract readonly stroke: EShapeStroke;\n\treadonly transform: EShapeTransform;\n\tabstract radius: number;\n\tabstract corner: EShapeCorner;\n\tpoints?: EShapePoints;\n\timage?: HTMLImageElement;\n\timageSrc?: string;\n\ttexture?: Texture;\n\tabstract gradient?: EShapeGradientLike;\n\tabstract readonly text: EShapeText;\n\tabstract readonly tag: EShapeTag;\n\treadonly action: EShapeAction;\n\tabstract cursor: string;\n\tinteractive: boolean;\n\tshortcut?: string;\n\ttitle?: string;\n\tprotected _visible: boolean;\n\tprotected _onTransformChangeLock: number;\n\tprotected _isOnTransformChanged: boolean;\n\tprotected _uploadedUpdateLock: number;\n\tprotected _isUploadedUpdated: boolean;\n\tprotected _isUploadedUpdatedRecursively: boolean;\n\n\tprotected _bounds?: Rectangle;\n\tprotected _boundsTransformId: number;\n\tprotected _boundsInternal?: Rectangle;\n\tprotected _boundsInternalTransformId: number;\n\tprotected _boundsLocal?: Rectangle;\n\tprotected _boundsLocalTransformId: number;\n\n\tprotected _state: DBaseState;\n\tprotected _stateLocal: DBaseState;\n\n\t// Hierarchy\n\tparent: EShapeContainer | EShape | null;\n\tchildren: EShape[];\n\tlayout?: EShapeLayout;\n\n\t// Working space\n\tindex: number; // A work space for sorting.\n\tselected: boolean;\n\treference: number; // Count of references from commands\n\n\t// Working space for the viewer\n\truntime?: EShapeRuntime;\n\n\t// Working space for the editor\n\teditor?: EShapeEditor;\n\n\t// Working space for the renderer\n\tuploaded?: EShapeUploaded;\n\n\tconstructor( type: EShapeType ) {\n\t\tsuper();\n\t\tthis.id = \"\";\n\t\tthis.type = type;\n\t\tthis.transform = this.newTransform();\n\t\tthis._onTransformChangeLock = 0;\n\t\tthis._isOnTransformChanged = false;\n\t\tthis.action = new EShapeAction();\n\t\tthis._visible = true;\n\t\tthis._uploadedUpdateLock = 0;\n\t\tthis._isUploadedUpdated = false;\n\t\tthis._isUploadedUpdatedRecursively = false;\n\n\t\tthis._boundsTransformId = NaN;\n\t\tthis._boundsInternalTransformId = NaN;\n\t\tthis._boundsLocalTransformId = NaN;\n\n\t\tthis._state = this._stateLocal = DBaseState.UNFOCUSABLE;\n\t\tthis.interactive = false;\n\n\t\t//\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\n\t\t//\n\t\tthis.selected = false;\n\t\tthis.index = 0;\n\t\tthis.reference = 0;\n\t}\n\n\tprotected newTransform(): EShapeTransform {\n\t\treturn new EShapeTransformImpl( this );\n\t}\n\n\tonSizeChange(): void {\n\t\tthis._boundsTransformId = NaN;\n\t\tthis._boundsInternalTransformId = NaN;\n\t\tthis._boundsLocalTransformId = NaN;\n\n\t\tthis.onTransformChange_();\n\t\tthis.updateUploaded();\n\t}\n\n\tonTransformChange(): void {\n\t\tthis.onTransformChange_();\n\t\tthis.updateUploadedRecursively();\n\t}\n\n\tprotected onTransformChange_(): void {\n\t\tif( this._onTransformChangeLock === 0 ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.onChildTransformChange();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._isOnTransformChanged = true;\n\t\t}\n\t}\n\n\tdisallowOnTransformChange(): void {\n\t\tthis._onTransformChangeLock += 1;\n\t\tif( this._onTransformChangeLock === 1 ) {\n\t\t\tthis._isOnTransformChanged = false;\n\t\t}\n\t}\n\n\tallowOnTransformChange( invokeOnTransformChange: boolean ): void {\n\t\tthis._onTransformChangeLock -= 1;\n\t\tif( this._onTransformChangeLock === 0 ) {\n\t\t\tif( this._isOnTransformChanged ) {\n\t\t\t\tthis._isOnTransformChanged = false;\n\t\t\t\tif( invokeOnTransformChange ) {\n\t\t\t\t\tthis.onTransformChange();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonChildTransformChange(): void {\n\t\t//\n\t}\n\n\tdisallowUploadedUpdate(): void {\n\t\tthis._uploadedUpdateLock += 1;\n\t\tif( this._uploadedUpdateLock === 1 ) {\n\t\t\tthis._isUploadedUpdated = false;\n\t\t\tthis._isUploadedUpdatedRecursively = false;\n\t\t}\n\t}\n\n\tallowUploadedUpdate(): void {\n\t\tthis._uploadedUpdateLock -= 1;\n\t\tif( this._uploadedUpdateLock === 0 ) {\n\t\t\tif( this._isUploadedUpdatedRecursively ) {\n\t\t\t\tthis._isUploadedUpdatedRecursively = false;\n\t\t\t\tthis._isUploadedUpdated = false;\n\t\t\t\tthis.updateUploadedRecursively();\n\t\t\t} else if( this._isUploadedUpdated ) {\n\t\t\t\tthis._isUploadedUpdated = false;\n\t\t\t\tthis.updateUploaded();\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateUploadedRecursively(): void {\n\t\tif( this._uploadedUpdateLock === 0 ) {\n\t\t\tthis.updateUploaded();\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tchildren[ i ].updateUploadedRecursively();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._isUploadedUpdatedRecursively = true;\n\t\t}\n\t}\n\n\tupdateUploaded(): void {\n\t\tif( this._uploadedUpdateLock === 0 ) {\n\t\t\tconst uploaded = this.uploaded;\n\t\t\tif( uploaded != null ) {\n\t\t\t\tuploaded.update( this );\n\t\t\t}\n\t\t} else {\n\t\t\tthis._isUploadedUpdated = true;\n\t\t}\n\t}\n\n\t//\n\tget root(): EShape {\n\t\tlet root: EShape = this;\n\t\twhile( root.parent instanceof EShapeBase ) {\n\t\t\troot = root.parent;\n\t\t}\n\t\treturn root;\n\t}\n\n\t//\n\tget visible(): boolean {\n\t\tconst parent = this.parent;\n\t\tif( parent instanceof EShapeBase ) {\n\t\t\treturn parent.visible && this._visible;\n\t\t} else {\n\t\t\treturn this._visible;\n\t\t}\n\t}\n\n\tset visible( visible: boolean ) {\n\t\tif( this._visible !== visible ) {\n\t\t\tthis._visible = visible;\n\t\t\tthis.updateUploadedRecursively();\n\t\t}\n\t}\n\n\t//\n\tabstract clone(): EShape;\n\n\t//\n\ttoDirty() {\n\t\tconst parent = this.parent;\n\t\tif( parent != null ) {\n\t\t\tparent.toDirty();\n\t\t}\n\t}\n\n\t// Hierarchy\n\tattach( parent: EShapeContainer | EShape, at?: number ): this {\n\t\tthis.detach();\n\t\tthis.parent = parent;\n\t\tconst children = parent.children;\n\t\tif( at != null && 0 <= at && at < children.length ) {\n\t\t\tchildren.splice( at, 0, this );\n\t\t} else {\n\t\t\tchildren.push( this );\n\t\t}\n\t\tthis.uploaded = undefined;\n\t\tparent.onChildTransformChange();\n\t\tparent.toDirty();\n\t\treturn this;\n\t}\n\n\tdetach(): this {\n\t\tconst parent = this.parent;\n\t\tif( parent != null ) {\n\t\t\tthis.parent = null;\n\t\t\tthis.uploaded = undefined;\n\t\t\tconst children = parent.children;\n\t\t\tconst index = children.indexOf( this );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tchildren.splice( index, 1 );\n\t\t\t\tparent.onChildTransformChange();\n\t\t\t\tparent.toDirty();\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t// Transform\n\tupdateTransform() {\n\t\tconst parent = this.parent;\n\t\tif (parent != null) {\n\t\t\tparent.updateTransform();\n\t\t\tthis.transform.updateTransform(parent.transform);\n\t\t} else {\n\t\t\tthis.transform.updateTransform((Transform as any).IDENTITY);\n\t\t}\n\t}\n\n\t// Serialization\n\tserializeChildren( manager: EShapeResourceManagerSerialization ): DDiagramSerializedItem[] {\n\t\tconst children = this.children;\n\t\tconst childrenSerialized = [];\n\t\tfor (let i = 0, imax = children.length; i < imax; ++i) {\n\t\t\tconst child = children[i];\n\t\t\tchildrenSerialized.push(child.serialize(manager));\n\t\t}\n\t\treturn childrenSerialized;\n\t}\n\n\tserializeImage( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst image = this.image;\n\t\treturn (image != null ? manager.add( image.src ) : -1);\n\t}\n\n\tserializeGradient( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn EShapeGradients.toGradientId( this.gradient, manager );\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): DDiagramSerializedItem {\n\t\tconst transform = this.transform;\n\t\tconst position = transform.position;\n\t\tconst pivot = transform.pivot;\n\t\tconst size = this.size;\n\t\tconst shortcut = this.shortcut;\n\t\tconst shortcutId = ( shortcut != null ? manager.add( shortcut ) : -1 );\n\t\tconst title = this.title;\n\t\tconst titleId = ( title != null ? manager.add( title ) : -1 );\n\t\treturn [\n\t\t\tthis.type,\n\t\t\tmanager.add(this.id),\n\t\t\tposition.x,\n\t\t\tposition.y,\n\t\t\tsize.x,\n\t\t\tsize.y,\n\t\t\ttransform.rotation,\n\t\t\ttransform.skew.x,\n\t\t\tthis.fill.serialize( manager ),\n\t\t\tthis.stroke.serialize( manager ),\n\t\t\tmanager.add( this.cursor.trim() ),\n\t\t\tthis.text.serialize( manager ),\n\t\t\tthis.tag.serialize( manager ),\n\t\t\tthis.radius,\n\t\t\tthis.corner,\n\t\t\t-1,\n\t\t\t-1,\n\t\t\tthis.action.serialize( manager ),\n\t\t\tthis.serializeImage( manager ),\n\t\t\tthis.serializeGradient( manager ),\n\t\t\tthis.serializeChildren( manager ),\n\t\t\tpivot.x,\n\t\t\tpivot.y,\n\t\t\t( this.interactive ? 1 : 0 ) | ( this.unfocusable ? 2 : 0 ),\n\t\t\tshortcutId,\n\t\t\ttitleId\n\t\t];\n\t}\n\n\t// Hit test\n\tcontains( point: Point ): EShape | null {\n\t\tconst x = point.x;\n\t\tconst y = point.y;\n\t\tconst size = this.size;\n\t\tconst sx = 0.5 * size.x;\n\t\tconst sy = 0.5 * size.y;\n\t\tconst pivot = this.transform.pivot;\n\t\tconst dx = x - pivot.x;\n\t\tconst dy = y - pivot.y;\n\t\tconst stroke = this.stroke;\n\t\tconst s = stroke.width * stroke.align;\n\t\tif( 0 <= sx ) {\n\t\t\tif( 0 <= sy ) {\n\t\t\t\tif( this.containsAbs(+dx, +dy, +sx + s, +sy + s) ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( this.containsAbs(+dx, -dy, +sx + s, -sy + s) ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif( 0 <= sy ) {\n\t\t\t\tif( this.containsAbs(-dx, +dy, -sx + s, +sy + s) ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( this.containsAbs(-dx, -dy, -sx + s, -sy + s) ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.containsText( x, y, point ) ||\n\t\t\tthis.containsChildren( x, y, point );\n\t}\n\n\tprotected containsText( x: number, y: number, work: Point ): EShape | null {\n\t\tconst text = this.text;\n\t\tconst textAtlas = text.atlas;\n\t\tif( textAtlas != null ) {\n\t\t\tconst textWorld = text.world;\n\t\t\tif( textWorld != null ) {\n\t\t\t\twork.set( x, y );\n\t\t\t\tthis.transform.internalTransform.apply( work, work );\n\t\t\t\tconst tx = work.x - textWorld[ 0 ];\n\t\t\t\tconst ty = work.y - textWorld[ 1 ];\n\t\t\t\tconst th = textWorld[ 2 ] * tx + textWorld[ 3 ] * ty;\n\t\t\t\tconst tv = textWorld[ 4 ] * tx + textWorld[ 5 ] * ty;\n\t\t\t\tif( 0 <= th && th <= textWorld[ 6 ] && 0 <= tv && tv <= textWorld[ 7 ] ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected containsChildren( x: number, y: number, work: Point ): EShape | null {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst child = children[ i ];\n\t\t\twork.set( x, y );\n\t\t\tchild.updateTransform();\n\t\t\tchild.transform.localTransform.applyInverse( work, work );\n\t\t\tconst childResult = child.contains( work );\n\t\t\tif( childResult != null ) {\n\t\t\t\tif( this.shadowed ) {\n\t\t\t\t\treturn this;\n\t\t\t\t} else {\n\t\t\t\t\treturn childResult;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tcontainsBBox( point: Point ): boolean {\n\t\tconst x = point.x;\n\t\tconst y = point.y;\n\t\tconst size = this.size;\n\t\tconst sx = 0.5 * size.x;\n\t\tconst sy = 0.5 * size.y;\n\t\tconst pivot = this.transform.pivot;\n\t\tconst dx = x - pivot.x;\n\t\tconst dy = y - pivot.y;\n\t\tconst stroke = this.stroke;\n\t\tconst s = stroke.width * stroke.align;\n\t\tif( 0 <= sx ) {\n\t\t\tif( 0 <= sy ) {\n\t\t\t\treturn this.containsAbsBBox(+dx, +dy, +sx + s, +sy + s);\n\t\t\t} else {\n\t\t\t\treturn this.containsAbsBBox(+dx, -dy, +sx + s, -sy + s);\n\t\t\t}\n\t\t} else {\n\t\t\tif( 0 <= sy ) {\n\t\t\t\treturn this.containsAbsBBox(-dx, +dy, -sx + s, +sy + s);\n\t\t\t} else {\n\t\t\t\treturn this.containsAbsBBox(-dx, -dy, -sx + s, -sy + s);\n\t\t\t}\n\t\t}\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\treturn this.containsAbsBBox( x, y, ax, ay );\n\t}\n\n\tcontainsAbsBBox( x: number, y: number, ax: number, ay: number ): boolean {\n\t\treturn (-ax <= x && x <= +ax && -ay <= y && y <= +ay);\n\t}\n\n\tselect( point: Point ): boolean {\n\t\treturn false;\n\t}\n\n\t//\n\ttoGlobal( position: IPoint, point: Point, skipUpdate?: boolean ): Point {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tpoint.copyFrom( position );\n\t\tthis.transform.worldTransform.apply( point, point );\n\t\treturn point;\n\t}\n\n\ttoLocal<T extends IPoint>(\n\t\tposition: IPoint,\n\t\tfrom?: DisplayObject,\n\t\tpoint?: T,\n\t\tskipUpdate?: boolean\n\t): T {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tif( point === undefined ) {\n\t\t\tpoint = new Point() as any as T;\n\t\t}\n\t\tpoint.copyFrom( position );\n\t\tthis.transform.worldTransform.applyInverse( point as any, point as any );\n\t\treturn point;\n\t}\n\n\tgetBounds( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tconst bounds = this._bounds = ( this._bounds || new Rectangle() );\n\t\tconst worldId = this.transform.getWorldId();\n\t\tif( worldId !== this._boundsTransformId ) {\n\t\t\tthis._boundsTransformId = worldId;\n\t\t\tthis.getBounds_( this.transform.worldTransform, work, bounds );\n\t\t}\n\t\tresult.copyFrom( bounds );\n\t\treturn result;\n\t}\n\n\tgetBoundsInternal( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tconst boundsInternal = this._boundsInternal = ( this._boundsInternal || new Rectangle() );\n\t\tconst currentLocalId = this.transform.getLocalIdCurrent();\n\t\tif( currentLocalId !== this._boundsInternalTransformId ) {\n\t\t\tthis._boundsInternalTransformId = currentLocalId;\n\t\t\tthis.getBounds_( this.transform.internalTransform, work, boundsInternal );\n\t\t}\n\t\tresult.copyFrom( boundsInternal );\n\t\treturn result;\n\t}\n\n\tgetBoundsLocal( work: Point, skipUpdate: boolean, result: Rectangle ): Rectangle {\n\t\tif( skipUpdate !== true ) {\n\t\t\tthis.updateTransform();\n\t\t}\n\t\tconst boundsLocal = this._boundsLocal = ( this._boundsLocal || new Rectangle() );\n\t\tconst currentLocalId = this.transform.getLocalIdCurrent();\n\t\tif( currentLocalId !== this._boundsLocalTransformId ) {\n\t\t\tthis._boundsLocalTransformId = currentLocalId;\n\t\t\tthis.getBounds_( this.transform.localTransform, work, boundsLocal );\n\t\t}\n\t\tresult.copyFrom( boundsLocal );\n\t\treturn result;\n\t}\n\n\tprotected getBoundsSize(): IPoint {\n\t\treturn this.size;\n\t}\n\n\tprotected getBounds_( transform: Matrix, work: Point, result: Rectangle ): Rectangle {\n\t\tconst pivot = this.transform.pivot;\n\t\tconst px = pivot.x;\n\t\tconst py = pivot.y;\n\t\tconst size = this.getBoundsSize();\n\t\tconst sx = 0.5 * size.x;\n\t\tconst sy = 0.5 * size.y;\n\n\t\tconst a = transform.a;\n\t\tconst b = transform.b;\n\t\tconst c = transform.c;\n\t\tconst d = transform.d;\n\n\t\tlet x = -sx + px;\n\t\tlet y = -sy + py;\n\t\tconst x0 = a * x + c * y;\n\t\tconst y0 = b * x + d * y;\n\n\t\tx = +sx + px;\n\t\ty = -sy + py;\n\t\tconst x1 = a * x + c * y;\n\t\tconst y1 = b * x + d * y;\n\n\t\tx = -sx + px;\n\t\ty = +sy + py;\n\t\tconst x2 = a * x + c * y;\n\t\tconst y2 = b * x + d * y;\n\n\t\tx = +sx + px;\n\t\ty = +sy + py;\n\t\tconst x3 = a * x + c * y;\n\t\tconst y3 = b * x + d * y;\n\n\t\tconst xmin = Math.min( x0, x1, x2, x3 );\n\t\tconst ymin = Math.min( y0, y1, y2, y3 );\n\t\tconst xmax = Math.max( x0, x1, x2, x3 );\n\t\tconst ymax = Math.max( y0, y1, y2, y3 );\n\t\tresult.x = xmin + transform.tx;\n\t\tresult.y = ymin + transform.ty;\n\t\tresult.width = xmax - xmin;\n\t\tresult.height = ymax - ymin;\n\t\treturn result;\n\t}\n\n\t//\n\tdestroy(): void {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tchildren[ i ].destroy();\n\t\t}\n\t\tchildren.length = 0;\n\t}\n\n\t//\n\tprotected updateState(): void {\n\t\tconst parent = this.parent;\n\t\tconst stateLocal = this._stateLocal;\n\t\tconst newState = ( parent instanceof EShapeBase ?\n\t\t\tthis.mergeState( stateLocal, parent.getState() ) :\n\t\t\tstateLocal\n\t\t);\n\t\tconst oldState = this._state;\n\t\tif( oldState !== newState ) {\n\t\t\tthis._state = newState;\n\t\t\tthis.onStateChange( newState, oldState );\n\t\t}\n\t}\n\n\tprotected mergeState( stateLocal: DBaseState, stateParent: DBaseState ): DBaseState {\n\t\treturn stateLocal | (stateParent & DBaseState.DISABLED) |\n\t\t\t(stateParent & (DBaseState.FOCUSED | DBaseState.FOCUSED_IN) ? DBaseState.FOCUSED_IN : DBaseState.NONE);\n\t}\n\n\tprotected onStateChange( newState: number, oldState: number ) {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\truntime.onStateChange( this, newState, oldState );\n\t\t}\n\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof EShapeBase ) {\n\t\t\t\tchild.onParentStateChange( newState, oldState );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onParentStateChange( newStateParent: number, oldStateParent: number ) {\n\t\tconst newState = this.mergeState( this._stateLocal, newStateParent );\n\t\tconst oldState = this._state;\n\t\tif( oldState !== newState ) {\n\t\t\tthis._state = newState;\n\t\t\tthis.onStateChange( newState, oldState );\n\t\t}\n\t}\n\n\tgetState(): DBaseState {\n\t\treturn this._state;\n\t}\n\n\tsetState( state: DBaseState, isOn: boolean ): this {\n\t\tif( DBaseStates.is( this._stateLocal, state ) !== isOn ) {\n\t\t\tif( isOn ) {\n\t\t\t\tthis._stateLocal |= state;\n\t\t\t} else {\n\t\t\t\tthis._stateLocal &= ~state;\n\t\t\t}\n\t\t\tthis.updateState();\n\t\t}\n\t\treturn this;\n\t}\n\n\thasState( state: DBaseState ): boolean {\n\t\treturn DBaseStates.is( this._state, state );\n\t}\n\n\tfocus(): this {\n\t\tthis.focused = true;\n\t\treturn this;\n\t}\n\n\tblur(): this {\n\t\tthis.focused = false;\n\t\treturn this;\n\t}\n\n\tget hovered(): boolean {\n\t\treturn this.hasState( DBaseState.HOVERED );\n\t}\n\n\tset hovered( isHovered: boolean ) {\n\t\tthis.setState( DBaseState.HOVERED, isHovered );\n\t}\n\n\tget active(): boolean {\n\t\treturn this.hasState( DBaseState.ACTIVE );\n\t}\n\n\tset active( isActive: boolean ) {\n\t\tthis.setState( DBaseState.ACTIVE, isActive );\n\t}\n\n\tget readonly(): boolean {\n\t\treturn this.hasState( DBaseState.READ_ONLY );\n\t}\n\n\tset readonly( isReadOnly: boolean ) {\n\t\tthis.setState( DBaseState.READ_ONLY, isReadOnly );\n\t}\n\n\tget enabled(): boolean {\n\t\treturn ! this.hasState( DBaseState.DISABLED );\n\t}\n\n\tget disabled(): boolean {\n\t\treturn this.hasState( DBaseState.DISABLED );\n\t}\n\n\tset disabled( isDisabled: boolean ) {\n\t\tthis.setState( DBaseState.DISABLED, isDisabled );\n\t}\n\n\tget dragging(): boolean {\n\t\treturn this.hasState( DBaseState.DRAGGING );\n\t}\n\n\tset dragging( isDragging: boolean ) {\n\t\tthis.setState( DBaseState.DRAGGING, isDragging );\n\t}\n\n\tget focused(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED );\n\t}\n\n\tset focused( focused: boolean ) {\n\t\tif( this.focused !== focused ) {\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( layer ) {\n\t\t\t\tlayer.getFocusController().setFocused( this, focused, false );\n\t\t\t}\n\t\t}\n\t}\n\n\tget focusedin(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED | DBaseState.FOCUSED_IN );\n\t}\n\n\tget unfocusable(): boolean {\n\t\treturn this.hasState( DBaseState.UNFOCUSABLE );\n\t}\n\n\tset unfocusable( unforcusable: boolean ) {\n\t\tthis.setState( DBaseState.UNFOCUSABLE, unforcusable );\n\t}\n\n\tget clicked(): boolean {\n\t\tconst runtime = this.runtime;\n\t\treturn !! ( runtime && (runtime.state & EShapeRuntimeState.CLICKED) );\n\t}\n\n\tget pressed(): boolean {\n\t\tconst runtime = this.runtime;\n\t\treturn !! ( runtime && (runtime.state & EShapeRuntimeState.PRESSED) );\n\t}\n\n\tget down(): boolean {\n\t\tconst runtime = this.runtime;\n\t\treturn !! ( runtime && (runtime.state & EShapeRuntimeState.DOWN) );\n\t}\n\n\tget up(): boolean {\n\t\tconst runtime = this.runtime;\n\t\treturn !! ( runtime && (runtime.state & EShapeRuntimeState.UP) );\n\t}\n\n\tget shadowed(): boolean {\n\t\treturn false;\n\t}\n\n\tonDblClick( e: MouseEvent ): boolean {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\treturn runtime.onPointerDblClick( this );\n\t\t}\n\t\treturn false;\n\t}\n\n\tonShortcut( e: KeyboardEvent ): void {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\treturn runtime.onPointerClick( this );\n\t\t}\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\treturn runtime.onKeyDown( this, e );\n\t\t}\n\t\treturn false;\n\t}\n\n\tonKeyUp( e: KeyboardEvent ): boolean {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\treturn runtime.onKeyUp( this, e );\n\t\t}\n\t\treturn false;\n\t}\n\n\t//\n\tupdate( time: number ): void {\n\t\tconst runtime = this.runtime;\n\t\tif( runtime != null ) {\n\t\t\truntime.update( this, time );\n\t\t}\n\t}\n\n\tupdateRecursively( time: number ): void {\n\t\tthis.update( time );\n\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].update( time );\n\t\t}\n\t}\n\n\tcopy( source: EShape, part: EShapeCopyPart = EShapeCopyPart.ALL ): this {\n\t\tthis.id = source.id;\n\t\tif( (part & EShapeCopyPart.TRANSFORM) !== 0 ) {\n\t\t\tconst transform = this.transform;\n\t\t\tconst sourceTransform = source.transform;\n\t\t\ttransform.position.copyFrom( sourceTransform.position );\n\t\t\ttransform.rotation = sourceTransform.rotation;\n\t\t\ttransform.skew.copyFrom( sourceTransform.skew );\n\t\t\ttransform.pivot.copyFrom( sourceTransform.pivot );\n\t\t\ttransform.scale.copyFrom( sourceTransform.scale );\n\t\t}\n\t\tif( (part & EShapeCopyPart.SIZE) !== 0 ) {\n\t\t\tthis.size.copyFrom( source.size );\n\t\t}\n\t\tif( (part & EShapeCopyPart.STYLE) !== 0 ) {\n\t\t\tthis.fill.copy( source.fill );\n\t\t\tthis.stroke.copy( source.stroke );\n\t\t\tthis.tag.copy( source.tag );\n\t\t\tthis.text.copy( source.text );\n\t\t\tthis.radius = source.radius;\n\t\t\tthis.corner = source.corner;\n\t\t\tif (this.image == null) {\n\t\t\t\tthis.image = source.image;\n\t\t\t}\n\t\t}\n\t\tif( (part & EShapeCopyPart.ACTION) !== 0 ) {\n\t\t\tthis.action.addAll( source.action.values );\n\t\t\tthis.interactive = source.interactive;\n\t\t\tthis.cursor = source.cursor;\n\t\t\tthis.shortcut = source.shortcut;\n\t\t}\n\t\tif( (part & EShapeCopyPart.POINTS) !== 0 ) {\n\t\t\tconst sourcePoints = source.points;\n\t\t\tif( sourcePoints != null ) {\n\t\t\t\tconst points = this.points;\n\t\t\t\tif( points != null ) {\n\t\t\t\t\tpoints.copy( sourcePoints );\n\t\t\t\t} else {\n\t\t\t\t\tthis.points = sourcePoints.clone( this );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif( (part & EShapeCopyPart.STATE) !== 0 ) {\n\t\t\tthis.setState( source.getState(), true );\n\t\t}\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeFillImplParent } from \"./e-shape-fill-impl-parent\";\n\nexport class EShapeFillImpl implements EShapeFill {\n\tprotected _parent: EShapeFillImplParent;\n\tprotected _enable: boolean;\n\tprotected _color: number;\n\tprotected _alpha: number;\n\n\tconstructor( parent: EShapeFillImplParent, enable: boolean, color: number, alpha: number ) {\n\t\tthis._parent = parent;\n\t\tthis._enable = enable;\n\t\tthis._color = color;\n\t\tthis._alpha = alpha;\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget color(): number {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target: EShapeFillLike ): void {\n\t\tthis.set( target.enable, target.color, target.alpha );\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number ): void {\n\t\tlet isChanged = false;\n\n\t\tif( enable !== undefined && this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( color !== undefined && this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( alpha !== undefined && this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tclone(): EShapeFill {\n\t\treturn new EShapeFillImpl( this._parent, this._enable, this._color, this._alpha );\n\t}\n\n\ttoObject(): EShapeFillLike {\n\t\treturn {\n\t\t\tenable: this._enable,\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst stringified = `[${this._enable ? 1 : 0},${this._color},${this._alpha}]`;\n\t\treturn manager.add( stringified );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.fills.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ] !== 0,\n\t\t\t\t\tparsed[ 1 ],\n\t\t\t\t\tparsed[ 2 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.fills.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ] !== 0,\n\t\t\t\t\tdeserialized[ 1 ],\n\t\t\t\t\tdeserialized[ 2 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeStroke, EShapeStrokeLike, EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeStrokeImplParent } from \"./e-shape-stroke-impl-parent\";\n\nexport class EShapeStrokeImpl implements EShapeStroke {\n\tprotected _parent: EShapeStrokeImplParent;\n\tprotected _enable: boolean;\n\tprotected _color: number;\n\tprotected _alpha: number;\n\tprotected _width: number;\n\tprotected _align: number;\n\tprotected _side: EShapeStrokeSide;\n\n\tconstructor(\n\t\tparent: EShapeStrokeImplParent,\n\t\tenable: boolean, color: number, alpha: number,\n\t\twidth: number, align: number, side: EShapeStrokeSide\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._enable = enable;\n\t\tthis._color = color;\n\t\tthis._alpha = alpha;\n\t\tthis._width = width;\n\t\tthis._align = align;\n\t\tthis._side = side;\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget color(): number {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget align(): number {\n\t\treturn this._align;\n\t}\n\n\tset align( align: number ) {\n\t\tif( this._align !== align ) {\n\t\t\tthis._align = align;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget side(): EShapeStrokeSide {\n\t\treturn this._side;\n\t}\n\n\tset side( side: EShapeStrokeSide ) {\n\t\tif( this._side !== side ) {\n\t\t\tthis._side = side;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeStrokeLike> ): void {\n\t\tif( target ) {\n\t\t\tthis.set( target.enable, target.color, target.alpha, target.width, target.align, target.side );\n\t\t}\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number, align?: number, side?: EShapeStrokeSide ) {\n\t\tlet isChanged = false;\n\n\t\tif( enable !== undefined && this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( color !== undefined && this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( alpha !== undefined && this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( width !== undefined && this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( align !== undefined && this._align !== align ) {\n\t\t\tthis._align = align;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( side !== undefined && this._side !== side ) {\n\t\t\tthis._side = side;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tclone(): EShapeStroke {\n\t\treturn new EShapeStrokeImpl(\n\t\t\tthis._parent,\n\t\t\tthis._enable, this._color, this._alpha,\n\t\t\tthis._width, this._align, this._side\n\t\t);\n\t}\n\n\ttoObject(): EShapeStrokeLike {\n\t\treturn {\n\t\t\tenable: this._enable,\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha,\n\t\t\twidth: this._width,\n\t\t\talign: this._align,\n\t\t\tside: this._side\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst enable = this._enable ? 1 : 0;\n\t\tconst serialized = `[${enable},${this._color},${this._alpha},${this._width},${this._align},${this._side}]`;\n\t\treturn manager.add( serialized );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.strokes.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ] !== 0,\n\t\t\t\t\tparsed[ 1 ],\n\t\t\t\t\tparsed[ 2 ],\n\t\t\t\t\tparsed[ 3 ],\n\t\t\t\t\tparsed[ 4 ],\n\t\t\t\t\tparsed[ 5 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.strokes.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ] !== 0,\n\t\t\t\t\tdeserialized[ 1 ],\n\t\t\t\t\tdeserialized[ 2 ],\n\t\t\t\t\tdeserialized[ 3 ],\n\t\t\t\t\tdeserialized[ 4 ],\n\t\t\t\t\tdeserialized[ 5 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport {\n\tEShapeTagValueRange, EShapeTagValueRangeLike, EShapeTagValueRangeParent, EShapeTagValueRangeType\n} from \"../e-shape-tag-value-range\";\n\nexport class EShapeTagValueRangeImpl implements EShapeTagValueRange {\n\tprotected _type: EShapeTagValueRangeType;\n\tprotected _from: number;\n\tprotected _to: number;\n\tparent?: EShapeTagValueRangeParent;\n\n\tconstructor() {\n\t\tthis._type = EShapeTagValueRangeType.NONE;\n\t\tthis._from = 0;\n\t\tthis._to = 1;\n\t}\n\n\tget type(): EShapeTagValueRangeType {\n\t\treturn this._type;\n\t}\n\n\tset type( type: EShapeTagValueRangeType ) {\n\t\tif( this._type !== type ) {\n\t\t\tthis._type = type;\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget from(): number {\n\t\treturn this._from;\n\t}\n\n\tset from( from: number ) {\n\t\tif( this._from !== from ) {\n\t\t\tthis._from = from;\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget to(): number {\n\t\treturn this._to;\n\t}\n\n\tset to( to: number ) {\n\t\tif( this._to !== to ) {\n\t\t\tthis._to = to;\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tset( from?: number | null, to?: number | null ): boolean {\n\t\tlet result = false;\n\t\tif( from !== undefined && to !== undefined ) {\n\t\t\tif( from !== null && to !== null ) {\n\t\t\t\tconst type = (this._type | EShapeTagValueRangeType.FROM) | EShapeTagValueRangeType.TO;\n\t\t\t\tif( this._type !== type || this._from !== from || this._to !== to ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._from = from;\n\t\t\t\t\tthis._to = to;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else if( from !== null ) {\n\t\t\t\tconst type = (this._type | EShapeTagValueRangeType.FROM) & (~EShapeTagValueRangeType.TO);\n\t\t\t\tif( this._type !== type || this._from !== from ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._from = from;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else if( to !== null ) {\n\t\t\t\tconst type = (this._type | EShapeTagValueRangeType.TO) & (~EShapeTagValueRangeType.FROM);\n\t\t\t\tif( this._type !== type || this._from !== from ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._to = to;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst type = this._type & (~(EShapeTagValueRangeType.TO | EShapeTagValueRangeType.FROM));\n\t\t\t\tif( this._type !== type ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if( from !== undefined ) {\n\t\t\tif( from !== null ) {\n\t\t\t\tconst type = this._type | EShapeTagValueRangeType.FROM;\n\t\t\t\tif( this._type !== type || this._from !== from ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._from = from;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst type = this._type & (~EShapeTagValueRangeType.FROM);\n\t\t\t\tif( this._type !== type ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if( to !== undefined ) {\n\t\t\tif( to !== null ) {\n\t\t\t\tconst type = this._type | EShapeTagValueRangeType.TO;\n\t\t\t\tif( this._type !== type || this._to !== to ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tthis._to = to;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst type = this._type & (~EShapeTagValueRangeType.TO);\n\t\t\t\tif( this._type !== type ) {\n\t\t\t\t\tthis._type = type;\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( result ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tnormalize( value: number ): number {\n\t\tconst type = this._type;\n\t\tconst from = this._from;\n\t\tconst to = this._to;\n\t\tswitch( type ) {\n\t\tcase EShapeTagValueRangeType.FROM_TO:\n\t\t\treturn (value - from) / (to - from);\n\t\tcase EShapeTagValueRangeType.FROM:\n\t\t\treturn value - from;\n\t\tcase EShapeTagValueRangeType.TO:\n\t\t\treturn to - value;\n\t\tcase EShapeTagValueRangeType.NONE:\n\t\tdefault:\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tisEquals( target: EShapeTagValueRangeLike ): boolean {\n\t\treturn (\n\t\t\tthis._type === target.type &&\n\t\t\tthis._from === target.from &&\n\t\t\tthis._to === target.to\n\t\t);\n\t}\n\n\tcopy( target: EShapeTagValueRangeLike ): this {\n\t\treturn this.copy_( target.type, target.from, target.to );\n\t}\n\n\tprotected copy_( type: EShapeTagValueRangeType, from: number, to: number ): this {\n\t\tlet isChanged = false;\n\n\t\tif( this._type !== type ) {\n\t\t\tthis._type = type;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( this._from !== from ) {\n\t\t\tthis._from = from;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( this._to !== to ) {\n\t\t\tthis._to = to;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\ttoObject(): EShapeTagValueRangeLike {\n\t\treturn {\n\t\t\ttype: this.type,\n\t\t\tfrom: this.from,\n\t\t\tto: this.to\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst serialized = `[${this._type},${this._from},${this._to}]`;\n\t\treturn manager.add( serialized );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.ranges.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.copy_(\n\t\t\t\t\tparsed[ 0 ],\n\t\t\t\t\tparsed[ 1 ],\n\t\t\t\t\tparsed[ 2 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.ranges.set( target, deserialized );\n\t\t\t\tthis.copy_(\n\t\t\t\t\tdeserialized[ 0 ],\n\t\t\t\t\tdeserialized[ 1 ],\n\t\t\t\t\tdeserialized[ 2 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DeepPartial } from \"../util/deep-partial\";\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"./e-shape-resource-manager-serialization\";\nimport { EShapeTextAlign, EShapeTextAlignLike } from \"./e-shape-text-align\";\nimport { EShapeTextDirection } from \"./e-shape-text-direction\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"./e-shape-text-offset\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"./e-shape-text-outline\";\n\nexport enum EShapeTextWeight {\n\tNORMAL,\n\tBOLD\n}\n\nexport enum EShapeTextStyle {\n\tNORMAL,\n\tITALIC\n}\n\nexport interface EShapeTextLike {\n\tvalue: string;\n\tcolor: number;\n\talpha: number;\n\tfamily: string;\n\tsize: number;\n\tweight: EShapeTextWeight;\n\talign: EShapeTextAlignLike;\n\toffset: EShapeTextOffsetLike;\n\tstyle: EShapeTextStyle;\n\toutline: EShapeTextOutlineLike;\n\tspacing: EShapeTextOffsetLike;\n\tdirection: EShapeTextDirection;\n\tpadding: EShapeTextOffsetLike;\n\tclipping: boolean;\n}\n\nexport interface EShapeTextAtlasCharacter {\n\tx: number;\n\ty: number;\n\twidth: number;\n\theight: number;\n\tadvance: number;\n\torigin: {\n\t\tx: number,\n\t\ty: number\n\t};\n}\n\nexport interface EShapeTextAtlasCharacters {\n\t[ character: string ]: EShapeTextAtlasCharacter;\n}\n\nexport interface EShapeTextAtlas {\n\twidth: number;\n\theight: number;\n\tfont: {\n\t\tsize: number;\n\t};\n\tcharacters: EShapeTextAtlasCharacters;\n}\n\nexport interface EShapeText extends EShapeTextLike {\n\tenable: boolean;\n\n\talign: EShapeTextAlign;\n\toffset: EShapeTextOffset;\n\toutline: EShapeTextOutline;\n\tspacing: EShapeTextOffset;\n\tpadding: EShapeTextOffset;\n\n\ttexture?: Texture;\t\t// Used for rendering and updated when rendered\n\tatlas?: EShapeTextAtlas;\t// Used for rendering and updated when rendered\n\tworld?: Float32Array;\t\t// Updated when rendered\n\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this;\n\tset(\n\t\tvalue?: string, color?: number, alpha?: number,\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection,\n\t\tclipping?: boolean\n\t): this;\n\ttoObject(): EShapeTextLike;\n\tserialize( manager: EShapeResourceManagerSerialization ): number;\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeTextAlignHorizontal {\n\tLEFT,\n\tCENTER,\n\tRIGHT,\n\tOUTSIDE_LEFT,\n\tOUTSIDE_RIGHT\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeTextAlignVertical {\n\tTOP,\n\tMIDDLE,\n\tBOTTOM,\n\tOUTSIDE_TOP,\n\tOUTSIDE_BOTTOM\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeTextDirection {\n\tLEFT_TO_RIGHT,\n\tTOP_TO_BOTTOM,\n\tBOTTOM_TO_TOP\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedTagValue } from \"../../d-diagram-serialized\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTagValue, EShapeTagValueOrder, EShapeTagValueParent } from \"../e-shape-tag-value\";\nimport { EShapeTagValueRange } from \"../e-shape-tag-value-range\";\nimport { EShapeTagValueRangeImpl } from \"./e-shape-tag-value-range-impl\";\n\nconst INDEX_COMPARATOR = ( a: number, b: number ): number => {\n\treturn a - b;\n};\n\nexport class EShapeTagValueImpl implements EShapeTagValue {\n\tid: string;\n\tinitial: string;\n\tformat: string;\n\trange: EShapeTagValueRange;\n\tprotected _value: unknown;\n\tprotected _time: number;\n\n\tprotected _values: unknown[] | undefined;\n\tprotected _times: number[] | undefined;\n\tprotected _capacity: number;\n\tprotected _order: EShapeTagValueOrder;\n\n\tprotected _parent?: EShapeTagValueParent;\n\n\tformatter?: ( value: unknown ) => unknown;\n\n\tconstructor() {\n\t\tthis.id = \"\";\n\t\tthis.initial = \"\";\n\t\tthis.format = \"\";\n\t\tthis.range = new EShapeTagValueRangeImpl();\n\t\tthis._value = 0;\n\t\tthis._time = 0;\n\t\tthis._capacity = 0;\n\t\tthis._order = EShapeTagValueOrder.ASCENDING;\n\t}\n\n\tget parent(): EShapeTagValueParent | undefined {\n\t\treturn this._parent;\n\t}\n\n\tset parent( parent: EShapeTagValueParent | undefined ) {\n\t\tif( this._parent !== parent ) {\n\t\t\tthis._parent = parent;\n\t\t\tthis.range.parent = parent;\n\t\t}\n\t}\n\n\tget value(): unknown {\n\t\treturn this._value;\n\t}\n\n\tset value( newValue: unknown ) {\n\t\tconst formatter = this.formatter;\n\t\tif( formatter != null ) {\n\t\t\tnewValue = formatter( newValue );\n\t\t}\n\n\t\tconst capacity = this._capacity;\n\t\tif( capacity <= 0 ) {\n\t\t\tif( this._value !== newValue ) {\n\t\t\t\tthis._value = newValue;\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlet values = this._values;\n\t\t\tif( values == null ) {\n\t\t\t\tvalues = [];\n\t\t\t\tthis._values = values;\n\t\t\t}\n\n\t\t\t// Update the value\n\t\t\tthis._value = newValue;\n\n\t\t\t// Update the values\n\t\t\tconst order = this._order;\n\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\tvalues.push( newValue );\n\t\t\t} else {\n\t\t\t\tvalues.unshift( newValue );\n\t\t\t}\n\n\t\t\t// Remove the unnecessary values\n\t\t\tconst count = values.length - capacity;\n\t\t\tif( 0 < count ) {\n\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\tvalues.shift();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvalues.length = capacity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Tell the parent it's changed\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget nvalue(): number {\n\t\treturn this.range.normalize( this._value as number );\n\t}\n\n\tget values(): unknown[] {\n\t\tlet result = this._values;\n\t\tif( result == null ) {\n\t\t\tresult = [];\n\t\t\tthis._values = result;\n\t\t}\n\t\treturn result;\n\t}\n\n\tset values( newValues: unknown[] ) {\n\t\tif( 0 < newValues.length ) {\n\t\t\tconst capacity = this._capacity;\n\t\t\tif( capacity <= 0 ) {\n\t\t\t\tlet newValue = newValues[ newValues.length - 1 ];\n\t\t\t\tconst formatter = this.formatter;\n\t\t\t\tif( formatter != null ) {\n\t\t\t\t\tnewValue = formatter( newValue );\n\t\t\t\t}\n\t\t\t\tif( this._value !== newValue ) {\n\t\t\t\t\tthis._value = newValue;\n\t\t\t\t\tconst parent = this.parent;\n\t\t\t\t\tif( parent != null ) {\n\t\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet values = this._values;\n\t\t\t\tif( values == null ) {\n\t\t\t\t\tvalues = [];\n\t\t\t\t\tthis._values = values;\n\t\t\t\t}\n\n\t\t\t\tconst order = this._order;\n\t\t\t\tconst formatter = this.formatter;\n\t\t\t\tif( formatter != null ) {\n\t\t\t\t\t// Update the value\n\t\t\t\t\tthis._value = formatter( newValues[ newValues.length - 1 ] );\n\n\t\t\t\t\t// Update the values\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0, imax = newValues.length; i < imax; ++i ) {\n\t\t\t\t\t\t\tvalues.push( formatter( newValues[ i ] ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor( let i = 0, imax = newValues.length; i < imax; ++i ) {\n\t\t\t\t\t\t\tvalues.unshift( formatter( newValues[ i ] ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Update the value\n\t\t\t\t\tthis._value = newValues[ newValues.length - 1 ];\n\n\t\t\t\t\t// Update the values\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0, imax = newValues.length; i < imax; ++i ) {\n\t\t\t\t\t\t\tvalues.push( newValues[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor( let i = 0, imax = newValues.length; i < imax; ++i ) {\n\t\t\t\t\t\t\tvalues.unshift( newValues[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Remove the unnecessary values\n\t\t\t\tconst count = values.length - capacity;\n\t\t\t\tif( 0 < count ) {\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\t\tvalues.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalues.length = capacity;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Tell the parent it's changed\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget time(): number {\n\t\treturn this._time;\n\t}\n\n\tset time( newTime: number ) {\n\t\tconst capacity = this._capacity;\n\t\tif( capacity <= 0 ) {\n\t\t\tif( this._time !== newTime ) {\n\t\t\t\tthis._time = newTime;\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Update the times\n\t\t\tlet times = this._times;\n\t\t\tif( times == null ) {\n\t\t\t\ttimes = [];\n\t\t\t\tthis._times = times;\n\t\t\t}\n\n\t\t\t// Update the time\n\t\t\tthis._time = newTime;\n\n\t\t\t// Update the times\n\t\t\tconst order = this._order;\n\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\ttimes.push( newTime );\n\t\t\t} else {\n\t\t\t\ttimes.unshift( newTime );\n\t\t\t}\n\n\t\t\t// Remove the unnecessary times\n\t\t\tconst count = times.length - capacity;\n\t\t\tif( 0 < count ) {\n\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\ttimes.shift();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttimes.length = capacity;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Tell the parent it's changed\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tget times(): number[] {\n\t\tlet result = this._times;\n\t\tif( result == null ) {\n\t\t\tresult = [];\n\t\t\tthis._times = result;\n\t\t}\n\t\treturn result;\n\t}\n\n\tset times( newTimes: number[] ) {\n\t\tif( 0 < newTimes.length ) {\n\t\t\tconst capacity = this._capacity;\n\t\t\tif( capacity <= 0 ) {\n\t\t\t\tconst newTime = newTimes[ newTimes.length - 1 ];\n\t\t\t\tif( this._time !== newTime ) {\n\t\t\t\t\tthis._time = newTime;\n\t\t\t\t\tconst parent = this.parent;\n\t\t\t\t\tif( parent != null ) {\n\t\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Update the times\n\t\t\t\tlet times = this._times;\n\t\t\t\tif( times == null ) {\n\t\t\t\t\ttimes = [];\n\t\t\t\t\tthis._times = times;\n\t\t\t\t}\n\n\t\t\t\t// Update the value\n\t\t\t\tthis._time = newTimes[ newTimes.length - 1 ];\n\n\t\t\t\t//\n\t\t\t\tconst order = this._order;\n\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\tfor( let i = 0, imax = newTimes.length; i < imax; ++i ) {\n\t\t\t\t\t\ttimes.push( newTimes[ i ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor( let i = 0, imax = newTimes.length; i < imax; ++i ) {\n\t\t\t\t\t\ttimes.unshift( newTimes[ i ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\tconst count = times.length - capacity;\n\t\t\t\tif( 0 < count ) {\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\t\ttimes.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimes.length = capacity;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Tell the parent it's changed\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget capacity(): number {\n\t\treturn this._capacity;\n\t}\n\n\tset capacity( capacity: number ) {\n\t\tif( this._capacity < capacity ) {\n\t\t\tthis._capacity = capacity;\n\t\t} else if( capacity < this._capacity ) {\n\t\t\tthis._capacity = capacity;\n\n\t\t\tlet isChanged = false;\n\n\t\t\t// Values\n\t\t\tconst order = this._order;\n\t\t\tconst values = this._values;\n\t\t\tif( values != null ) {\n\t\t\t\tconst count = values.length - capacity;\n\t\t\t\tif( 0 < count ) {\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\t\tvalues.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalues.length = capacity;\n\t\t\t\t\t}\n\t\t\t\t\tisChanged = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Times\n\t\t\tconst times = this._times;\n\t\t\tif( times != null ) {\n\t\t\t\tconst count = times.length - capacity;\n\t\t\t\tif( 0 < count ) {\n\t\t\t\t\tif( order === EShapeTagValueOrder.ASCENDING ) {\n\t\t\t\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\t\t\t\ttimes.shift();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimes.length = capacity;\n\t\t\t\t\t}\n\t\t\t\t\tisChanged = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( isChanged ) {\n\t\t\t\tconst parent = this.parent;\n\t\t\t\tif( parent != null ) {\n\t\t\t\t\tparent.isChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget order(): EShapeTagValueOrder {\n\t\treturn this._order;\n\t}\n\n\tset order( order: EShapeTagValueOrder ) {\n\t\tthis._order = order;\n\t}\n\n\tremove( index: number ): void {\n\t\tlet isChanged = false;\n\n\t\t// Values\n\t\tconst values = this._values;\n\t\tif( values != null ) {\n\t\t\tif( 0 <= index && index < values.length ) {\n\t\t\t\tvalues.splice( index, 1 );\n\t\t\t\tisChanged = true;\n\t\t\t}\n\t\t}\n\n\t\t// Times\n\t\tconst times = this._times;\n\t\tif( times != null ) {\n\t\t\tif( 0 <= index && index < times.length ) {\n\t\t\t\ttimes.splice( index, 1 );\n\t\t\t\tisChanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAll( indices: number[] ): void {\n\t\tlet isChanged = false;\n\n\t\tconst values = this._values;\n\t\tconst times = this._times;\n\t\tconst sorted = indices.slice(0).sort( INDEX_COMPARATOR );\n\t\tif( values != null ) {\n\t\t\tif( times != null ) {\n\t\t\t\tfor( let i = sorted.length - 1; 0 <= i; --i ) {\n\t\t\t\t\tconst index = sorted[ i ];\n\t\t\t\t\tif( 0 <= index ) {\n\t\t\t\t\t\tif( index < values.length ) {\n\t\t\t\t\t\t\tvalues.splice( index, 1 );\n\t\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( index < times.length ) {\n\t\t\t\t\t\t\ttimes.splice( index, 1 );\n\t\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = sorted.length - 1; 0 <= i; --i ) {\n\t\t\t\t\tconst index = sorted[ i ];\n\t\t\t\t\tif( 0 <= index && index < values.length ) {\n\t\t\t\t\t\tvalues.splice( index, 1 );\n\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif( times != null ) {\n\t\t\t\tfor( let i = sorted.length - 1; 0 <= i; --i ) {\n\t\t\t\t\tconst index = sorted[ i ];\n\t\t\t\t\tif( 0 <= index && index < times.length ) {\n\t\t\t\t\t\ttimes.splice( index, 1 );\n\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tlet isChanged = false;\n\n\t\t// Values\n\t\tconst values = this._values;\n\t\tif( values != null ) {\n\t\t\tvalues.length = 0;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\t// Times\n\t\tconst times = this._times;\n\t\tif( times != null ) {\n\t\t\ttimes.length = 0;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\t// Change flag\n\t\tif( isChanged ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.isChanged = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * This method does not copy the `#values` and `#times` for the performance.\n\t *\n\t * @param target a copy target\n\t */\n\tcopy( target: EShapeTagValue ): this {\n\t\tthis.id = target.id;\n\t\tthis.initial = target.initial;\n\t\tthis.format = target.format;\n\t\tthis.formatter = target.formatter;\n\t\tthis.range.copy( target.range );\n\t\tthis._value = target.value;\n\t\tthis._time = target.time;\n\t\tthis._capacity = target.capacity;\n\t\treturn this;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst idSerialized = manager.add( this.id );\n\t\tconst initialSerialized = manager.add( this.initial );\n\t\tconst formatSerialized = manager.add( this.format.trim() );\n\t\tconst rangeSerialized = this.range.serialize( manager );\n\t\treturn manager.add(\n\t\t\t`[${idSerialized},${initialSerialized},${formatSerialized},${rangeSerialized},${this._capacity},${this._order}]`\n\t\t);\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): this {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tlet parsed = manager.tagValues.get( target );\n\t\t\tif( parsed == null ) {\n\t\t\t\tparsed = JSON.parse( resources[ target ] ) as DDiagramSerializedTagValue;\n\t\t\t\tmanager.tagValues.set( target, parsed );\n\t\t\t}\n\t\t\tthis.id = resources[ parsed[ 0 ] ] || \"\";\n\t\t\tthis.initial = resources[ parsed[ 1 ] ] || \"\";\n\t\t\tthis.format = resources[ parsed[ 2 ] ] || \"\";\n\t\t\tthis.range.deserialize( parsed[ 3 ], manager );\n\t\t\tthis._capacity = parsed[ 4 ];\n\t\t\tthis._order = parsed[ 5 ];\n\t\t}\n\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTag } from \"../e-shape-tag\";\nimport { EShapeTagValue } from \"../e-shape-tag-value\";\nimport { EShapeTagValueRange } from \"../e-shape-tag-value-range\";\nimport { EShapeTagValueImpl } from \"./e-shape-tag-value-impl\";\nimport { EShapeTagValueRangeImpl } from \"./e-shape-tag-value-range-impl\";\n\nexport class EShapeTagImpl implements EShapeTag {\n\tstatic RANGE_DUMMY = new EShapeTagValueRangeImpl();\n\tstatic EMPTY_ARRAY = [];\n\n\tprotected _values: EShapeTagValue[];\n\tisChanged: boolean;\n\tinherited?: EShapeTagValue;\n\n\tconstructor() {\n\t\tthis._values = [];\n\t\tthis.isChanged = true;\n\t}\n\n\tget id(): string {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].id;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.id;\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tget initial(): string {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].initial;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.initial;\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tget format(): string {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].format;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.format;\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tget range(): EShapeTagValueRange {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].range;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.range;\n\t\t\t}\n\t\t}\n\t\treturn EShapeTagImpl.RANGE_DUMMY;\n\t}\n\n\tget value(): unknown {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].value;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.value;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset value( value: unknown ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].value = value;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.value = value;\n\t\t\t}\n\t\t}\n\t}\n\n\tget nvalue(): number {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].nvalue;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.nvalue;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tget time(): number {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].time;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.time;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset time( time: number ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].time = time;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.time = time;\n\t\t\t}\n\t\t}\n\t}\n\n\tget values(): unknown[] {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].values;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.values;\n\t\t\t}\n\t\t}\n\t\treturn EShapeTagImpl.EMPTY_ARRAY;\n\t}\n\n\tset values( newValues: unknown[] ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].values = newValues;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.values = newValues;\n\t\t\t}\n\t\t}\n\t}\n\n\tget times(): number[] {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].times;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.times;\n\t\t\t}\n\t\t}\n\t\treturn EShapeTagImpl.EMPTY_ARRAY;\n\t}\n\n\tset times( newTimes: number[] ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].times = newTimes;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.times = newTimes;\n\t\t\t}\n\t\t}\n\t}\n\n\tget capacity(): number {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\treturn values[ 0 ].capacity;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\treturn inherited.capacity;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset capacity( capacity: number ) {\n\t\tconst values = this._values;\n\t\tif( 0 < values.length ) {\n\t\t\tvalues[ 0 ].capacity = capacity;\n\t\t} else {\n\t\t\tconst inherited = this.inherited;\n\t\t\tif( inherited != null ) {\n\t\t\t\tinherited.capacity = capacity;\n\t\t\t}\n\t\t}\n\t}\n\n\tadd( value: EShapeTagValue, index?: number ): void {\n\t\tconst values = this._values;\n\t\tvalue.parent = this;\n\t\tif( index === undefined ) {\n\t\t\tvalues.push( value );\n\t\t} else {\n\t\t\tvalues.splice( index, 0, value );\n\t\t}\n\t}\n\n\tset( index: number, value: EShapeTagValue ): EShapeTagValue | null {\n\t\tconst values = this._values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\tconst result = values[ index ];\n\t\t\tvalue.parent = this;\n\t\t\tvalues[ index ] = value;\n\t\t\tresult.parent = undefined;\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tremove( index: number ): void {\n\t\tconst values = this._values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\tvalues.splice( index, 1 )[ 0 ].parent = undefined;\n\t\t}\n\t}\n\n\tindexOf( target: EShapeTagValue ): number {\n\t\tconst values = this._values;\n\n\t\t// Instance-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif( value === target ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\t// Data-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif(\n\t\t\t\tvalue.id === target.id &&\n\t\t\t\tvalue.initial === target.initial &&\n\t\t\t\tvalue.formatter === target.formatter &&\n\t\t\t\tvalue.range.isEquals( target.range )\n\t\t\t) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\t// ID-based matching\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\tconst value = values[ i ];\n\t\t\tif( value.id === target.id ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tget( index: number ): EShapeTagValue | null {\n\t\tconst values = this._values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\treturn values[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\treturn this._values.length;\n\t}\n\n\tswap( indexA: number, indexB: number ): void {\n\t\tconst values = this._values;\n\t\tconst tmp = values[ indexB ];\n\t\tvalues[ indexB ] = values[ indexA ];\n\t\tvalues[ indexA ] = tmp;\n\t}\n\n\tcopy( target: EShapeTag ): this {\n\t\tconst values = this._values;\n\t\tvalues.length = 0;\n\n\t\tfor( let i = 0, imax = target.size(); i < imax; ++i ) {\n\t\t\tconst value = target.get( i );\n\t\t\tif( value != null ) {\n\t\t\t\tconst newValue = new EShapeTagValueImpl().copy( value );\n\t\t\t\tnewValue.parent = this;\n\t\t\t\tvalues.push( newValue );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst values = this._values;\n\t\tif( values.length <= 0 ) {\n\t\t\treturn manager.add( \"[]\" );\n\t\t} else {\n\t\t\tlet serialized = `[${values[ 0 ].serialize( manager )}`;\n\t\t\tfor( let i = 1, imax = values.length; i < imax; ++i ) {\n\t\t\t\tserialized += `,${values[ i ].serialize( manager )}`;\n\t\t\t}\n\t\t\tserialized += \"]\";\n\t\t\treturn manager.add( serialized );\n\t\t}\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tif( 0 <= target && target < manager.resources.length ) {\n\t\t\tlet deserialized: number[] | undefined = manager.tags.get( target );\n\t\t\tif( deserialized == null ) {\n\t\t\t\tdeserialized = JSON.parse( manager.resources[ target ] ) as number[];\n\t\t\t\tmanager.tags.set( target, deserialized );\n\t\t\t}\n\n\t\t\tconst values = this._values;\n\t\t\tvalues.length = 0;\n\t\t\tfor( let i = 0, imax = deserialized.length; i < imax; ++i ) {\n\t\t\t\tconst index = deserialized[ i ];\n\t\t\t\tconst value = new EShapeTagValueImpl();\n\t\t\t\tvalue.parent = this;\n\t\t\t\tvalue.deserialize( index, manager );\n\t\t\t\tvalues.push( value );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextAlign, EShapeTextAlignLike } from \"../e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\nimport { EShapeTextAlignImplParent } from \"./e-shape-text-align-impl-parent\";\n\nexport class EShapeTextAlignImpl implements EShapeTextAlign {\n\tprotected _parent: EShapeTextAlignImplParent;\n\tprotected _horizontal: EShapeTextAlignHorizontal;\n\tprotected _vertical: EShapeTextAlignVertical;\n\n\tconstructor(\n\t\tparent: EShapeTextAlignImplParent,\n\t\thorizontal: EShapeTextAlignHorizontal, vertical: EShapeTextAlignVertical\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._horizontal = horizontal;\n\t\tthis._vertical = vertical;\n\t}\n\n\tget horizontal(): EShapeTextAlignHorizontal {\n\t\treturn this._horizontal;\n\t}\n\n\tset horizontal( horizontal: EShapeTextAlignHorizontal ) {\n\t\tif( this._horizontal !== horizontal ) {\n\t\t\tthis._horizontal = horizontal;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget vertical(): EShapeTextAlignVertical {\n\t\treturn this._vertical;\n\t}\n\n\tset vertical( vertical: EShapeTextAlignVertical ) {\n\t\tif( this._vertical !== vertical ) {\n\t\t\tthis._vertical = vertical;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextAlignLike> ): void {\n\t\tif( target ) {\n\t\t\tthis.set( target.horizontal, target.vertical );\n\t\t}\n\t}\n\n\tset( horizontal?: EShapeTextAlignHorizontal, vertical?: EShapeTextAlignVertical ): void {\n\t\tlet isChanged = false;\n\n\t\tif( horizontal != null && this._horizontal !== horizontal ) {\n\t\t\tthis._horizontal = horizontal;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( vertical != null && this._vertical !== vertical ) {\n\t\t\tthis._vertical = vertical;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextAlignLike {\n\t\treturn {\n\t\t\thorizontal: this._horizontal,\n\t\t\tvertical: this._vertical\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn manager.add( `[${this._horizontal},${this._vertical}]` );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.aligns.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ],\n\t\t\t\t\tparsed[ 1 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.aligns.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ],\n\t\t\t\t\tdeserialized[ 1 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueBlinkType {\n\tVISIBILITY,\n\tBRIGHTEN,\n\tDARKEN,\n\tOPACITY,\n\tCOLOR_FILL,\n\tCOLOR_STROKE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"../e-shape-text-offset\";\nimport { EShapeTextOffsetImplParent } from \"./e-shape-text-offset-impl-parent\";\n\nexport class EShapeTextOffsetImpl implements EShapeTextOffset {\n\tprotected _parent: EShapeTextOffsetImplParent;\n\tprotected _horizontal: number;\n\tprotected _vertical: number;\n\n\tconstructor( parent: EShapeTextOffsetImplParent, horizontal: number, vertical: number ) {\n\t\tthis._parent = parent;\n\t\tthis._horizontal = horizontal;\n\t\tthis._vertical = vertical;\n\t}\n\n\tget horizontal(): number {\n\t\treturn this._horizontal;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\tif( this._horizontal !== horizontal ) {\n\t\t\tthis._horizontal = horizontal;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget vertical(): number {\n\t\treturn this._vertical;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\tif( this._vertical !== vertical ) {\n\t\t\tthis._vertical = vertical;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextOffsetLike> ): void {\n\t\tif( target ) {\n\t\t\tthis.set( target.horizontal, target.vertical );\n\t\t}\n\t}\n\n\tset( horizontal?: number, vertical?: number ): void {\n\t\tlet isChanged = false;\n\n\t\tif( horizontal != null && this._horizontal !== horizontal ) {\n\t\t\tthis._horizontal = horizontal;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( vertical != null && this._vertical !== vertical ) {\n\t\t\tthis._vertical = vertical;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\treturn {\n\t\t\thorizontal: this._horizontal,\n\t\t\tvertical: this._vertical\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn manager.add( `[${this._horizontal},${this._vertical}]` );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.margins.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ],\n\t\t\t\t\tparsed[ 1 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.margins.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ],\n\t\t\t\t\tdeserialized[ 1 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeTextOutlineImplParent } from \"./e-shape-text-outline-impl-parent\";\n\nexport class EShapeTextOutlineImpl implements EShapeTextOutline {\n\tprotected _parent: EShapeTextOutlineImplParent;\n\tprotected _enable: boolean;\n\tprotected _color: number;\n\tprotected _alpha: number;\n\tprotected _width: number;\n\n\tconstructor( parent: EShapeTextOutlineImplParent, enable: boolean, color: number, alpha: number, width: number ) {\n\t\tthis._parent = parent;\n\t\tthis._enable = enable;\n\t\tthis._color = color;\n\t\tthis._alpha = alpha;\n\t\tthis._width = width;\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget color(): number {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget width(): number {\n\t\treturn this._width;\n\t}\n\n\tset width( width: number ) {\n\t\tif( this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextOutlineLike> ): void {\n\t\tif( target ) {\n\t\t\tthis.set( target.enable, target.color, target.alpha, target.width );\n\t\t}\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number ) {\n\t\tlet isChanged = false;\n\n\t\tif( enable !== undefined && this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( color !== undefined && this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( alpha !== undefined && this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( width !== undefined && this._width !== width ) {\n\t\t\tthis._width = width;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tclone(): EShapeTextOutline {\n\t\treturn new EShapeTextOutlineImpl( this._parent, this._enable, this._color, this._alpha, this._width );\n\t}\n\n\ttoObject(): EShapeTextOutlineLike {\n\t\treturn {\n\t\t\tenable: this._enable,\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha,\n\t\t\twidth: this._width\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst serialized = `[${this._enable ? 1 : 0},${this._color},${this._alpha},${this._width}]`;\n\t\treturn manager.add( serialized );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tconst parsed = manager.textOutlines.get( target );\n\t\t\tif( parsed != null ) {\n\t\t\t\tthis.set(\n\t\t\t\t\tparsed[ 0 ] !== 0,\n\t\t\t\t\tparsed[ 1 ],\n\t\t\t\t\tparsed[ 2 ],\n\t\t\t\t\tparsed[ 3 ]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst deserialized = JSON.parse( resources[ target ] );\n\t\t\t\tmanager.textOutlines.set( target, deserialized );\n\t\t\t\tthis.set(\n\t\t\t\t\tdeserialized[ 0 ] !== 0,\n\t\t\t\t\tdeserialized[ 1 ],\n\t\t\t\t\tdeserialized[ 2 ],\n\t\t\t\t\tdeserialized[ 3 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DDiagramSerializedText } from \"../../d-diagram-serialized\";\nimport { DeepPartial } from \"../../util/deep-partial\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeText, EShapeTextAtlas, EShapeTextLike, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\nimport { EShapeTextAlign } from \"../e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\nimport { EShapeTextOffset } from \"../e-shape-text-offset\";\nimport { EShapeTextOutline } from \"../e-shape-text-outline\";\nimport { EShapeTextAlignImpl } from \"./e-shape-text-align-impl\";\nimport { EShapeTextImplParent } from \"./e-shape-text-impl-parent\";\nimport { EShapeTextOffsetImpl } from \"./e-shape-text-offset-impl\";\nimport { EShapeTextOutlineImpl } from \"./e-shape-text-outline-impl\";\n\nexport class EShapeTextImpl implements EShapeText {\n\tprotected _parent: EShapeTextImplParent;\n\tprotected _enable: boolean;\n\tprotected _value: string;\n\tprotected _family: string;\n\tprotected _color: number;\n\tprotected _alpha: number;\n\tprotected _size: number;\n\tprotected _weight: EShapeTextWeight;\n\treadonly align: EShapeTextAlign;\n\treadonly offset: EShapeTextOffset;\n\tprotected _style: EShapeTextStyle;\n\treadonly outline: EShapeTextOutline;\n\treadonly spacing: EShapeTextOffset;\n\tprotected _direction: EShapeTextDirection;\n\treadonly padding: EShapeTextOffset;\n\tprotected _clipping: boolean;\n\n\ttexture?: Texture;\t\t// Used for rendering and updated when rendered\n\tatlas?: EShapeTextAtlas;\t// Used for rendering and updated when rendered\n\tworld?: Float32Array;\t\t// Updated when rendered\n\n\tconstructor(\n\t\tparent: EShapeTextImplParent,\n\t\tvalue: string, color: number, alpha: number, family: string, size: number\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._enable = true;\n\t\tthis._value = value;\n\t\tthis._color = color!;\n\t\tthis._alpha = alpha!;\n\t\tthis._family = family!;\n\t\tthis._size = size!;\n\t\tthis._weight = EShapeTextWeight.NORMAL;\n\t\tthis.align = new EShapeTextAlignImpl( parent, EShapeTextAlignHorizontal.CENTER, EShapeTextAlignVertical.MIDDLE );\n\t\tthis.offset = new EShapeTextOffsetImpl( parent, 0, 0 );\n\t\tthis._style = EShapeTextStyle.NORMAL;\n\t\tthis.spacing = new EShapeTextOffsetImpl( parent, 0, 0 );\n\t\tthis.outline = new EShapeTextOutlineImpl( parent, false, 0xffffff, 1.0, 0.5 );\n\t\tthis._direction = EShapeTextDirection.LEFT_TO_RIGHT;\n\t\tthis.padding = new EShapeTextOffsetImpl( parent, 10, 10 );\n\t\tthis._clipping = false;\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget value(): string {\n\t\treturn this._value;\n\t}\n\n\tset value( value: string ) {\n\t\tif( this._value !== value ) {\n\t\t\tthis._value = value;\n\n\t\t\t// Compatibility check\n\t\t\tconst parent = this._parent;\n\t\t\tconst uploaded = parent.uploaded;\n\t\t\tif( uploaded == null || ! uploaded.isCompatible( parent ) ) {\n\t\t\t\tthis.atlas = undefined;\n\t\t\t\tparent.toDirty();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Character code check\n\t\t\tconst atlas = this.atlas;\n\t\t\tconst characters = atlas && atlas.characters;\n\t\t\tif( characters != null ) {\n\t\t\t\tfor( let i = 0, imax = value.length; i < imax; ++i ) {\n\t\t\t\t\tconst char = value[ i ];\n\t\t\t\t\tif( ! (char in characters) ) {\n\t\t\t\t\t\tthis.atlas = undefined;\n\t\t\t\t\t\tparent.toDirty();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.atlas = undefined;\n\t\t\t\tparent.toDirty();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Update uploaded\n\t\t\tparent.updateUploaded();\n\t\t}\n\t}\n\n\tget family(): string {\n\t\treturn this._family;\n\t}\n\n\tset family( family: string ) {\n\t\tif( this._family !== family ) {\n\t\t\tthis._family = family;\n\t\t\tthis._parent.toDirty();\n\t\t}\n\t}\n\n\tget color(): number {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tset size( size: number ) {\n\t\tif( this._size !== size ) {\n\t\t\tthis._size = size;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget weight(): EShapeTextWeight {\n\t\treturn this._weight;\n\t}\n\n\tset weight( weight: EShapeTextWeight ) {\n\t\tif( this._weight !== weight ) {\n\t\t\tthis._weight = weight;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget style(): EShapeTextStyle {\n\t\treturn this._style;\n\t}\n\n\tset style( style: EShapeTextStyle ) {\n\t\tif( this._style !== style ) {\n\t\t\tthis._style = style;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget direction(): EShapeTextDirection {\n\t\treturn this._direction;\n\t}\n\n\tset direction( direction: EShapeTextDirection ) {\n\t\tif( this._direction !== direction ) {\n\t\t\tthis._direction = direction;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tget clipping(): boolean {\n\t\treturn this._clipping;\n\t}\n\n\tset clipping( clipping: boolean ) {\n\t\tif( this._clipping !== clipping ) {\n\t\t\tthis._clipping = clipping;\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\t}\n\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this {\n\t\tif( target ) {\n\t\t\tthis.set(\n\t\t\t\ttarget.value,\n\t\t\t\ttarget.color,\n\t\t\t\ttarget.alpha,\n\t\t\t\ttarget.family,\n\t\t\t\ttarget.size,\n\t\t\t\ttarget.weight,\n\t\t\t\ttarget.style,\n\t\t\t\ttarget.direction,\n\t\t\t\ttarget.clipping\n\t\t\t);\n\t\t\tthis.align.copy( target.align );\n\t\t\tthis.offset.copy( target.offset );\n\t\t\tthis.outline.copy( target.outline );\n\t\t\tthis.spacing.copy( target.spacing );\n\t\t\tthis.padding.copy( target.padding );\n\t\t}\n\t\treturn this;\n\t}\n\n\tset(\n\t\tvalue?: string, color?: number, alpha?: number,\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection,\n\t\tclipping?: boolean\n\t): this {\n\t\tlet isChangedDirty = false;\n\t\tlet isChangedUploaded = false;\n\n\t\tif( value != null && this._value !== value ) {\n\t\t\tthis._value = value;\n\t\t\tisChangedDirty = true;\n\t\t}\n\n\t\tif( color != null && this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( alpha != null && this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( family != null && this._family !== family ) {\n\t\t\tthis._family = family;\n\t\t\tisChangedDirty = true;\n\t\t}\n\n\t\tif( size != null && this._size !== size ) {\n\t\t\tthis._size = size;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( weight != null && this._weight !== weight ) {\n\t\t\tthis._weight = weight;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( style != null && this._style !== style ) {\n\t\t\tthis._style = style;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( direction != null && this._direction !== direction ) {\n\t\t\tthis._direction = direction;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( clipping != null && this._clipping !== clipping ) {\n\t\t\tthis._clipping = clipping;\n\t\t\tisChangedUploaded = true;\n\t\t}\n\n\t\tif( isChangedDirty ) {\n\t\t\tthis._parent.toDirty();\n\t\t} else if( isChangedUploaded ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\ttoObject(): EShapeTextLike {\n\t\treturn {\n\t\t\tvalue: this._value,\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha,\n\t\t\tfamily: this._family,\n\t\t\tsize: this._size,\n\t\t\tweight: this._weight,\n\t\t\talign: this.align.toObject(),\n\t\t\toffset: this.offset.toObject(),\n\t\t\tstyle: this._style,\n\t\t\toutline: this.outline.toObject(),\n\t\t\tdirection: this._direction,\n\t\t\tspacing: this.spacing.toObject(),\n\t\t\tpadding: this.padding.toObject(),\n\t\t\tclipping: this._clipping\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst alignSerialized = this.align.serialize( manager );\n\t\tconst offsetSerialized = this.offset.serialize( manager );\n\t\tconst outlineSerialized = this.outline.serialize( manager );\n\t\tconst spacingSerialized = this.spacing.serialize( manager );\n\t\tconst paddingSerialized = this.padding.serialize( manager );\n\t\tconst serialized = `[${manager.add( this._value )},${this._color},${this._alpha},` +\n\t\t\t`${manager.add( this._family )},${this._size},${this._weight},${alignSerialized},` +\n\t\t\t`${offsetSerialized},${this._style},${outlineSerialized},${spacingSerialized},` +\n\t\t\t`${this._direction},${paddingSerialized},${this._clipping ? 1 : 0 }]`;\n\t\treturn manager.add( serialized );\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\tconst resources = manager.resources;\n\t\tif( 0 <= target && target < resources.length ) {\n\t\t\tlet parsed = manager.texts.get( target );\n\t\t\tif( parsed == null ) {\n\t\t\t\tparsed = JSON.parse( resources[ target ] ) as DDiagramSerializedText;\n\t\t\t\tmanager.texts.set( target, parsed );\n\t\t\t}\n\t\t\tthis.set(\n\t\t\t\tresources[ parsed[ 0 ] ] || \"\",\n\t\t\t\tparsed[ 1 ],\n\t\t\t\tparsed[ 2 ],\n\t\t\t\tresources[ parsed[ 3 ] ] || \"auto\",\n\t\t\t\tparsed[ 4 ],\n\t\t\t\tparsed[ 5 ],\n\t\t\t\tparsed[ 8 ],\n\t\t\t\tparsed[ 11 ],\n\t\t\t\t( parsed[ 13 ] !== 0 )\n\t\t\t);\n\t\t\tthis.align.deserialize( parsed[ 6 ], manager );\n\t\t\tthis.offset.deserialize( parsed[ 7 ], manager );\n\t\t\tthis.outline.deserialize( parsed[ 9 ], manager );\n\t\t\tthis.spacing.deserialize( parsed[ 10 ], manager );\n\t\t\tthis.padding.deserialize( parsed[ 12 ], manager );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, ObservablePoint } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeDefaults } from \"../e-shape-defaults\";\nimport { EShapeFill } from \"../e-shape-fill\";\nimport { EShapeGradientLike } from \"../e-shape-gradient\";\nimport { EShapePoints } from \"../e-shape-points\";\nimport { EShapeStroke } from \"../e-shape-stroke\";\nimport { EShapeTag } from \"../e-shape-tag\";\nimport { EShapeText } from \"../e-shape-text\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeBase } from \"./e-shape-base\";\nimport { EShapeFillImpl } from \"./e-shape-fill-impl\";\nimport { EShapeStrokeImpl } from \"./e-shape-stroke-impl\";\nimport { EShapeTagImpl } from \"./e-shape-tag-impl\";\nimport { EShapeTextImpl } from \"./e-shape-text-impl\";\n\nexport abstract class EShapePrimitive extends EShapeBase {\n\treadonly size: IPoint;\n\treadonly fill: EShapeFill;\n\treadonly stroke: EShapeStroke;\n\tprotected _radius: number;\n\tprotected _corner: EShapeCorner;\n\tpoints?: EShapePoints;\n\tprotected _image?: HTMLImageElement;\n\tgradient?: EShapeGradientLike;\n\treadonly text: EShapeText;\n\treadonly tag: EShapeTag;\n\tcursor: string;\n\n\tconstructor( type: EShapeType ) {\n\t\tsuper( type );\n\t\tthis.size = this.newSize();\n\t\tthis.fill = this.newFill();\n\t\tthis.stroke = this.newStroke();\n\t\tthis._radius = EShapeDefaults.RADIUS;\n\t\tthis._corner = EShapeCorner.ALL;\n\t\tthis.tag = new EShapeTagImpl();\n\t\tthis.text = this.newText();\n\t\tthis.cursor = EShapeDefaults.CURSOR;\n\t}\n\n\tprotected newSize(): IPoint {\n\t\treturn new ObservablePoint(\n\t\t\t() => { this.onSizeChange(); },\n\t\t\tundefined,\n\t\t\tEShapeDefaults.SIZE_X,\n\t\t\tEShapeDefaults.SIZE_Y\n\t\t);\n\t}\n\n\tprotected newFill(): EShapeFill {\n\t\treturn new EShapeFillImpl(\n\t\t\tthis, true,\n\t\t\tEShapeDefaults.FILL_COLOR,\n\t\t\tEShapeDefaults.FILL_ALPHA\n\t\t);\n\t}\n\n\tprotected newStroke(): EShapeStroke {\n\t\treturn new EShapeStrokeImpl(\n\t\t\tthis, true,\n\t\t\tEShapeDefaults.STROKE_COLOR,\n\t\t\tEShapeDefaults.STROKE_ALPHA,\n\t\t\tEShapeDefaults.STROKE_WIDTH,\n\t\t\tEShapeDefaults.STROKE_ALIGN,\n\t\t\tEShapeDefaults.STROKE_SIDE\n\t\t);\n\t}\n\n\tprotected newText(): EShapeText {\n\t\treturn new EShapeTextImpl(\n\t\t\tthis,\n\t\t\tEShapeDefaults.TEXT_VALUE,\n\t\t\tEShapeDefaults.STROKE_COLOR,\n\t\t\tEShapeDefaults.STROKE_ALPHA,\n\t\t\tEShapeDefaults.TEXT_FAMILY,\n\t\t\tEShapeDefaults.TEXT_SIZE\n\t\t);\n\t}\n\n\tabstract clone(): EShape;\n\n\tget corner(): number {\n\t\treturn this._corner;\n\t}\n\n\tset corner( corner: number ) {\n\t\tif( this._corner !== corner ) {\n\t\t\tthis._corner = corner;\n\t\t\tthis.updateUploaded();\n\t\t}\n\t}\n\n\tget radius(): number {\n\t\treturn this._radius;\n\t}\n\n\tset radius( radius: number ) {\n\t\tif( this._radius !== radius ) {\n\t\t\tthis._radius = radius;\n\t\t\tthis.updateUploaded();\n\t\t}\n\t}\n\n\tget image(): HTMLImageElement | undefined {\n\t\treturn this._image;\n\t}\n\n\tset image( image: HTMLImageElement | undefined ) {\n\t\tif( this._image !== image ) {\n\t\t\tif( image != null ) {\n\t\t\t\tthis._image = image;\n\t\t\t\tthis.imageSrc = image.src;\n\t\t\t} else {\n\t\t\t\tthis._image = undefined;\n\t\t\t\tthis.imageSrc = undefined;\n\t\t\t}\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tparent.toDirty();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { utilIndexOf } from \"../../util/util-index-of\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport abstract class EShapeLineBase extends EShapePrimitive {\n\tabstract points: EShapePoints;\n\tabstract clone(): EShapeLineBase;\n\n\tserialize( manager: EShapeResourceManagerSerialization ): DDiagramSerializedItem {\n\t\tconst result = super.serialize( manager );\n\t\tresult[ 15 ] = this.points.serialize( manager );\n\t\treturn result;\n\t}\n\n\tprotected getPixelScale(): number {\n\t\tconst container = this.root.parent as any;\n\t\tif( container != null && container.getPixelScale != null ) {\n\t\t\treturn container.getPixelScale();\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tprotected getStrokeWidthScale( points: EShapePoints ): number {\n\t\tconst style = points.style;\n\t\tif( style & EShapePointsStyle.NON_EXPANDING_WIDTH ) {\n\t\t\tif( style & EShapePointsStyle.NON_SHRINKING_WIDTH ) {\n\t\t\t\treturn this.getPixelScale();\n\t\t\t} else {\n\t\t\t\treturn Math.min( 1.0, this.getPixelScale() );\n\t\t\t}\n\t\t} else {\n\t\t\tif( style & EShapePointsStyle.NON_SHRINKING_WIDTH ) {\n\t\t\t\treturn Math.max( 1.0, this.getPixelScale() );\n\t\t\t} else {\n\t\t\t\treturn 1.0;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getStrokeWidthScaled( points: EShapePoints ): number {\n\t\tconst stroke = this.stroke;\n\t\treturn ( stroke.enable ? stroke.width * this.getStrokeWidthScale( points ) : 0 );\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tconst points = this.points;\n\t\tconst swh = this.getStrokeWidthScaled( points ) * 0.5;\n\t\tif( this.containsAbsBBox( x, y, ax + swh, ay + swh ) ) {\n\t\t\tconst threshold = swh * swh;\n\t\t\tconst pointCount = points.length;\n\t\t\tif( 2 <= pointCount ) {\n\t\t\t\tconst pointValues = points.values;\n\t\t\t\tconst pointSegments = points.segments;\n\t\t\t\tfor( let i = 0, imax = pointCount - 1, iv = 0; i < imax; i += 1, iv += 2 ) {\n\t\t\t\t\tif( utilIndexOf( pointSegments, i + 1 ) < 0 ) {\n\t\t\t\t\t\tconst p0x = pointValues[ iv + 0 ];\n\t\t\t\t\t\tconst p0y = pointValues[ iv + 1 ];\n\t\t\t\t\t\tconst p1x = pointValues[ iv + 2 ];\n\t\t\t\t\t\tconst p1y = pointValues[ iv + 3 ];\n\t\t\t\t\t\tif( 0 <= EShapeLineBase.calcHitPosition( x, y, p0x, p0y, p1x, p1y, threshold ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( 2 < pointCount && (points.style & EShapePointsStyle.CLOSED) ) {\n\t\t\t\t\tif( utilIndexOf( pointSegments, 0 ) < 0 ) {\n\t\t\t\t\t\tconst iv = (pointCount - 1) << 1;\n\t\t\t\t\t\tconst p0x = pointValues[ iv + 0 ];\n\t\t\t\t\t\tconst p0y = pointValues[ iv + 1 ];\n\t\t\t\t\t\tconst p1x = pointValues[ 0 ];\n\t\t\t\t\t\tconst p1y = pointValues[ 1 ];\n\t\t\t\t\t\tif( 0 <= EShapeLineBase.calcHitPosition( x, y, p0x, p0y, p1x, p1y, threshold ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic calcHitPosition(\n\t\tx: number, y: number,\n\t\tp0x: number, p0y: number,\n\t\tp1x: number, p1y: number,\n\t\tsquaredDistance: number\n\t): number {\n\t\t// (x, y) = p0 + (p1 - p0) * t where 0 <= t <= 1\n\t\t// d0 := p1 - p0\n\t\t// d1 := v - p0\n\t\t// (p0.x + d0.x * t - x)^2 + (p0.y + d0.y * t - y)^2\n\t\t// (d0.x t - d1.x)^2 + (d0.y t - d1.y)^2\n\t\t// (d0.x^2 + d0.y^2) t^2 - 2 (d0.x * d1.x + d0.y * d1.y) t + (d1.x^2 + d1.y^2)\n\t\t// a := dot( d0, d0 )\n\t\t// b := dot( d0, d1 )\n\t\t// c := dot( d1, d1 )\n\t\t// a t^2 - 2 b t + c = a (t - b / a)^2 + c - b * b / a\n\t\t// t0 = b / a  min = c - b * b / a\n\t\tconst d0x = p1x - p0x;\n\t\tconst d0y = p1y - p0y;\n\t\tconst d1x = x - p0x;\n\t\tconst d1y = y - p0y;\n\t\tconst a = d0x * d0x + d0y * d0y;\n\t\tconst b = d0x * d1x + d0y * d1y;\n\t\tconst c = d1x * d1x + d1y * d1y;\n\t\tif( 0.0001 < a ) {\n\t\t\tconst t0 = Math.max( 0, Math.min( 1, b / a ) );\n\t\t\tconst d = a * t0 * t0 - 2 * b * t0 + c;\n\t\t\tif( d < squaredDistance ) {\n\t\t\t\treturn t0;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeBarPoints } from \"./e-shape-bar-points\";\nimport { EShapeBarPosition } from \"./e-shape-bar-position\";\nimport { EShapeLineBase } from \"./e-shape-line-base\";\n\nexport class EShapeBar extends EShapeLineBase {\n\tpoints: EShapeBarPoints;\n\n\tconstructor( position: EShapeBarPosition, size: number, width: number, style: EShapePointsStyle ) {\n\t\tsuper( EShapeType.BAR );\n\t\tthis.fill.enable = false;\n\t\tthis.stroke.set( true, undefined, undefined, width );\n\t\tthis.points = new EShapeBarPoints( this, position, size, style );\n\t}\n\n\tclone(): EShapeBar {\n\t\tconst points = this.points;\n\t\treturn new EShapeBar( points.position, points.size, this.stroke.width, points.style ).copy( this );\n\t}\n\n\tcontainsAbsBBox( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tconst size = Math.max( 0, this.points.size );\n\t\treturn super.containsAbsBBox( x, y, ax + size, ay + size );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture, TextureUvs, utils } from \"pixi.js\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeBuffer } from \"./e-shape-buffer\";\nimport { EShapeBufferUnitBuilder } from \"./e-shape-buffer-unit-builder\";\nimport { EShapeCorner } from \"./e-shape-corner\";\n\nconst FMIN: number = 0.00001;\n\nexport interface EShapeUploaded {\n\tupdate( shape: EShape ): void;\n\tisCompatible( shape: EShape ): boolean;\n\tgetBuffer(): EShapeBuffer;\n\tgetVertexOffset(): number;\n\tgetVertexCount(): number;\n\tgetIndexOffset(): number;\n\tgetIndexCount(): number;\n\tbuildUnit( builder: EShapeBufferUnitBuilder ): void;\n}\n\nexport abstract class EShapeUploadedBase implements EShapeUploaded {\n\tprotected buffer: EShapeBuffer;\n\n\tprotected transformLocalId: number;\n\n\tprotected vertexOffset: number;\n\tprotected vertexCount: number;\n\tprotected indexOffset: number;\n\tprotected indexCount: number;\n\n\tprotected colorFill: number;\n\tprotected alphaFill: number;\n\tprotected colorStroke: number;\n\tprotected alphaStroke: number;\n\n\tprotected sizeX: number;\n\tprotected sizeY: number;\n\tprotected worldSizeXHalf: number;\n\tprotected worldSizeYHalf: number;\n\tprotected worldSizeZHalf: number;\n\tprotected worldSizeWHalf: number;\n\tprotected worldSizeR: number;\n\tprotected strokeWidth: number;\n\tprotected strokeAlign: number;\n\tprotected strokeSide: number;\n\tprotected radius: number;\n\tprotected corner: EShapeCorner;\n\n\tprotected texture: Texture | null;\n\tprotected textureTransformId: number;\n\n\tprotected antialiasWeight: number;\n\n\tconstructor(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, ioffset: number,\n\t\tvcount: number, icount: number,\n\t\tantialiasWeight: number\n\t) {\n\t\tthis.buffer = buffer;\n\n\t\tthis.transformLocalId = -1;\n\n\t\tthis.vertexOffset = voffset;\n\t\tthis.vertexCount = vcount;\n\t\tthis.indexOffset = ioffset;\n\t\tthis.indexCount = icount;\n\n\t\tthis.colorFill = NaN;\n\t\tthis.alphaFill = -1;\n\t\tthis.colorStroke = NaN;\n\t\tthis.alphaStroke = -1;\n\n\t\tthis.sizeX = NaN;\n\t\tthis.sizeY = NaN;\n\t\tthis.worldSizeXHalf = NaN;\n\t\tthis.worldSizeYHalf = NaN;\n\t\tthis.worldSizeZHalf = NaN;\n\t\tthis.worldSizeWHalf = NaN;\n\t\tthis.worldSizeR = NaN;\n\t\tthis.strokeWidth = NaN;\n\t\tthis.strokeAlign = NaN;\n\t\tthis.strokeSide = NaN;\n\t\tthis.radius = NaN;\n\t\tthis.corner = NaN;\n\n\t\tthis.texture = null;\n\t\tthis.textureTransformId = NaN;\n\n\t\tthis.antialiasWeight = antialiasWeight;\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tshape.uploaded = this;\n\t\treturn this;\n\t}\n\n\tabstract update( shape: EShape ): void;\n\n\tisCompatible( shape: EShape ): boolean {\n\t\treturn true;\n\t}\n\n\tgetBuffer(): EShapeBuffer {\n\t\treturn this.buffer;\n\t}\n\n\tgetVertexOffset(): number {\n\t\treturn this.vertexOffset;\n\t}\n\n\tgetVertexCount(): number {\n\t\treturn this.vertexCount;\n\t}\n\n\tgetIndexOffset(): number {\n\t\treturn this.indexOffset;\n\t}\n\n\tgetIndexCount(): number {\n\t\treturn this.indexCount;\n\t}\n\n\tprotected toTransformLocalId( shape: EShape ) {\n\t\tshape.updateTransform();\n\t\treturn shape.transform.getLocalId();\n\t}\n\n\tprotected toTexture( shape: EShape ) {\n\t\treturn shape.texture || Texture.WHITE;\n\t}\n\n\tprotected toTextureTransformId( texture: Texture ): number {\n\t\tconst textureAny = texture as any;\n\t\tif( textureAny._uvs == null ) {\n\t\t\ttexture.updateUvs();\n\t\t}\n\t\treturn textureAny._updateID;\n\t}\n\n\tprotected toTextureUvs( texture: Texture ): TextureUvs {\n\t\treturn (texture as any)._uvs;\n\t}\n\n\tprotected fillColor( color: number, alpha: number, voffset: number, count: number, colors: Float32Array ) {\n\t\tconst rgba = utils.premultiplyTintToRgba( color, alpha, this.buffer.workColor );\n\t\tconst r = rgba[ 0 ];\n\t\tconst g = rgba[ 1 ];\n\t\tconst b = rgba[ 2 ];\n\t\tconst a = rgba[ 3 ];\n\n\t\tfor( let i = voffset * 4, imax = i + count * 4; i < imax; i += 4 ) {\n\t\t\tcolors[ i + 0 ] = r;\n\t\t\tcolors[ i + 1 ] = g;\n\t\t\tcolors[ i + 2 ] = b;\n\t\t\tcolors[ i + 3 ] = a;\n\t\t}\n\t}\n\n\tprotected updateColorFill( buffer: EShapeBuffer, shape: EShape, vertexCount: number ) {\n\t\tconst fill = shape.fill;\n\t\tconst isEnabled = shape.visible && fill.enable;\n\t\tconst color = fill.color;\n\t\tconst alpha = (isEnabled ? fill.alpha : 0);\n\t\tif( color !== this.colorFill || alpha !== this.alphaFill ) {\n\t\t\tthis.colorFill = color;\n\t\t\tthis.alphaFill = alpha;\n\t\t\tbuffer.colorFillBuffer.update();\n\n\t\t\tthis.fillColor(\n\t\t\t\tcolor, alpha,\n\t\t\t\tthis.vertexOffset,\n\t\t\t\tvertexCount,\n\t\t\t\tbuffer.colorFills\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateColorStroke( buffer: EShapeBuffer, shape: EShape, vertexCount: number ) {\n\t\tconst stroke = shape.stroke;\n\t\tconst isEnabled = shape.visible && stroke.enable && 0 < stroke.width;\n\t\tconst color = stroke.color;\n\t\tconst alpha = (isEnabled ? stroke.alpha : 0);\n\t\tif( color !== this.colorStroke || alpha !== this.alphaStroke ) {\n\t\t\tthis.colorStroke = color;\n\t\t\tthis.alphaStroke = alpha;\n\t\t\tbuffer.colorStrokeBuffer.update();\n\n\t\t\tthis.fillColor(\n\t\t\t\tcolor, alpha,\n\t\t\t\tthis.vertexOffset,\n\t\t\t\tvertexCount,\n\t\t\t\tbuffer.colorStrokes\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateColorFillAndStroke( buffer: EShapeBuffer, shape: EShape, vertexCount: number ) {\n\t\tthis.updateColorFill( buffer, shape, vertexCount );\n\t\tthis.updateColorStroke( buffer, shape, vertexCount );\n\t}\n\n\tprotected calcStep( size: number, strokeWidth: number, result: Float32Array ): Float32Array {\n\t\tconst antialiasWeight = this.antialiasWeight;\n\t\tif( FMIN < strokeWidth ) {\n\t\t\tconst dpc0 = size - strokeWidth;\n\t\t\tif( FMIN < dpc0 ) {\n\t\t\t\tconst pc0 = antialiasWeight / dpc0;\n\t\t\t\tconst pc1 = antialiasWeight / Math.max( FMIN, size );\n\t\t\t\tconst swc = 1 / Math.max( FMIN, 1 - strokeWidth / size );\n\t\t\t\tresult[ 0 ] = swc;\n\t\t\t\tresult[ 1 ] = pc0;\n\t\t\t\tresult[ 2 ] = pc1;\n\t\t\t} else {\n\t\t\t\tconst pc0 = antialiasWeight / FMIN;\n\t\t\t\tconst pc1 = antialiasWeight / Math.max( FMIN, size );\n\t\t\t\tconst swc = 1 / FMIN;\n\t\t\t\tresult[ 0 ] = swc;\n\t\t\t\tresult[ 1 ] = pc0;\n\t\t\t\tresult[ 2 ] = pc1;\n\t\t\t}\n\t\t} else {\n\t\t\t// Assumes strokeWidth === 0\n\t\t\tconst pc = antialiasWeight / Math.max( FMIN, size );\n\t\t\tresult[ 0 ] = 1;\n\t\t\tresult[ 1 ] = pc;\n\t\t\tresult[ 2 ] = pc;\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected updateStep(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, vcount: number,\n\t\tswx: number, swy: number, px0: number, py0: number, px1: number, py1: number\n\t) {\n\t\tconst steps = buffer.steps;\n\t\tconst antialiases = buffer.antialiases;\n\t\tconst clippings = buffer.clippings;\n\t\tconst istart = voffset * 2;\n\t\tconst imax = istart + vcount * 2;\n\t\tconst jstart = voffset * 3;\n\t\tconst kstart = voffset * 4;\n\t\tfor( let i = istart, j = jstart, k = kstart; i < imax; i += 2, j += 3, k += 4 ) {\n\t\t\tconst cx = clippings[ j + 0 ];\n\t\t\tconst cy = clippings[ j + 1 ];\n\t\t\tsteps[ i + 0 ] = swx * cx;\n\t\t\tsteps[ i + 1 ] = swy * cy;\n\t\t\tantialiases[ k + 0 ] = px0;\n\t\t\tantialiases[ k + 1 ] = py0;\n\t\t\tantialiases[ k + 2 ] = px1;\n\t\t\tantialiases[ k + 3 ] = py1;\n\t\t}\n\t}\n\n\tprotected updateStepIf(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, vcount: number,\n\t\tswc: number, pc0: number, pc1: number,\n\t\tswx: number, swy: number, px0: number, py0: number, px1: number, py1: number\n\t) {\n\t\tconst steps = buffer.steps;\n\t\tconst antialiases = buffer.antialiases;\n\t\tconst clippings = buffer.clippings;\n\t\tconst istart = voffset * 2;\n\t\tconst imax = istart + vcount * 2;\n\t\tconst jstart = voffset * 3;\n\t\tconst kstart = voffset * 4;\n\t\tfor( let i = istart, j = jstart, k = kstart; i < imax; i += 2, j += 3, k += 4 ) {\n\t\t\tconst cx = clippings[ j + 0 ];\n\t\t\tconst cy = clippings[ j + 1 ];\n\t\t\tconst cz = clippings[ j + 2 ];\n\t\t\tif( 0.5 < cz ) {\n\t\t\t\tsteps[ i + 0 ] = swc * cx;\n\t\t\t\tsteps[ i + 1 ] = swc * cy;\n\t\t\t\tantialiases[ k + 0 ] = pc0;\n\t\t\t\tantialiases[ k + 1 ] = pc0;\n\t\t\t\tantialiases[ k + 2 ] = pc1;\n\t\t\t\tantialiases[ k + 3 ] = pc1;\n\t\t\t} else {\n\t\t\t\tsteps[ i + 0 ] = swx * cx;\n\t\t\t\tsteps[ i + 1 ] = swy * cy;\n\t\t\t\tantialiases[ k + 0 ] = px0;\n\t\t\t\tantialiases[ k + 1 ] = py0;\n\t\t\t\tantialiases[ k + 2 ] = px1;\n\t\t\t\tantialiases[ k + 3 ] = py1;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected calcLength( p0x: number, p0y: number, p1x: number, p1y: number ) {\n\t\tconst dx01 = p1x - p0x;\n\t\tconst dy01 = p1y - p0y;\n\t\treturn Math.sqrt( dx01 * dx01 + dy01 * dy01 );\n\t}\n\n\tbuildUnit( builder: EShapeBufferUnitBuilder ) {\n\t\tconst texture = this.texture || Texture.WHITE;\n\t\tconst baseTexture = texture.baseTexture;\n\t\tif( baseTexture !== builder.baseTexture ) {\n\t\t\tbuilder.baseTexture = baseTexture;\n\t\t\tconst indexOffset = this.indexOffset;\n\t\t\tbuilder.push( texture, indexOffset );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBufferCount } from \"../e-shape-buffer-count\";\n\nexport class EShapeTextUploadeds {\n\tstatic getTextCount( shape: EShape, result: EShapeBufferCount ): EShapeBufferCount {\n\t\tconst length = shape.text.value.length;\n\t\tconst count = Math.ceil( length / 12 ) * 12;\n\t\tresult.vertexCount = count << 2;\n\t\tresult.indexCount = count << 1;\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point, Texture } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeBufferUnitBuilder } from \"../e-shape-buffer-unit-builder\";\nimport { EShapeTextAtlas, EShapeTextAtlasCharacter, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\nimport { EShapeUploadedBase } from \"../e-shape-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nconst FMIN: number = 0.00001;\n\nexport abstract class EShapeTextUploaded extends EShapeUploadedBase {\n\tprotected textTexture: Texture | null;\n\tprotected textTextureTransformId: number;\n\tprotected textValue: string;\n\tprotected textFamily: string;\n\tprotected textSize: number;\n\tprotected textColor: number;\n\tprotected textAlpha: number;\n\tprotected textWeight: number;\n\tprotected textStyle: number;\n\tprotected textAlignHorizontal: number;\n\tprotected textAlignVertical: number;\n\tprotected textOffsetHorizontal: number;\n\tprotected textOffsetVertical: number;\n\tprotected textOutlineWidth: number;\n\tprotected textOutlineColor: number;\n\tprotected textOutlineAlpha: number;\n\tprotected textSpacingHorizontal: number;\n\tprotected textSpacingVertical: number;\n\tprotected textDirection: number;\n\tprotected textPaddingHorizontal: number;\n\tprotected textPaddingVertical: number;\n\tprotected textClipping: boolean;\n\tprotected textVertexCount: number;\n\tprotected textIndexCount: number;\n\n\tconstructor(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, ioffset: number,\n\t\ttvcount: number, ticount: number,\n\t\tvcount: number, icount: number,\n\t\tantialiasWeight: number\n\t) {\n\t\tsuper( buffer, voffset, ioffset, vcount, icount, antialiasWeight );\n\n\t\tthis.textSize = NaN;\n\t\tthis.textFamily = \"auto\";\n\t\tthis.textValue = \"\";\n\t\tthis.textTexture = null;\n\t\tthis.textTextureTransformId = NaN;\n\t\tthis.textColor = NaN;\n\t\tthis.textAlpha = NaN;\n\t\tthis.textWeight = NaN;\n\t\tthis.textStyle = NaN;\n\t\tthis.textAlignHorizontal = NaN;\n\t\tthis.textAlignVertical = NaN;\n\t\tthis.textOffsetHorizontal = NaN;\n\t\tthis.textOffsetVertical = NaN;\n\t\tthis.textOutlineWidth = NaN;\n\t\tthis.textOutlineColor = NaN;\n\t\tthis.textOutlineAlpha = NaN;\n\t\tthis.textSpacingHorizontal = NaN;\n\t\tthis.textSpacingVertical = NaN;\n\t\tthis.textDirection = NaN;\n\t\tthis.textPaddingHorizontal = NaN;\n\t\tthis.textPaddingVertical = NaN;\n\t\tthis.textClipping = false;\n\t\tthis.textVertexCount = tvcount;\n\t\tthis.textIndexCount = ticount;\n\t}\n\n\tisCompatible( shape: EShape ): boolean {\n\t\tif( super.isCompatible( shape ) ) {\n\t\t\tconst textCount = EShapeTextUploadeds.getTextCount( shape, this.buffer.workCount );\n\t\t\treturn ( textCount.vertexCount === this.textVertexCount );\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected updateColor( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst vertexCount = this.vertexCount - this.textVertexCount;\n\t\tthis.updateColorFillAndStroke( buffer, shape, vertexCount );\n\t}\n\n\tprotected getTextBBox(\n\t\thalign: EShapeTextAlignHorizontal,\n\t\tvalign: EShapeTextAlignVertical,\n\t\thoffset: number,\n\t\tvoffset: number,\n\t\thpadding: number,\n\t\tvpadding: number,\n\t\twidth: number, height: number,\n\t\tx0: number, y0: number,\n\t\tx1: number, y1: number,\n\t\tx2: number, y2: number,\n\t\tx3: number, y3: number,\n\t\thnx: number, hny: number,\n\t\tvnx: number, vny: number,\n\t\tresult: Point\n\t): void {\n\t\tswitch( halign ) {\n\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = x0\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y0\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x0 + x3 )\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y0 + y3 )\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = x3\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y3\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = x0\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y0\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = x3\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y3\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = 0.5 * ( x0 + x1 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = 0.5 * ( y0 + y1 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x0 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y0 + y2 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = 0.5 * ( x3 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = 0.5 * ( y3 + y2 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = 0.5 * ( x0 + x1 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = 0.5 * ( y0 + y1 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = 0.5 * ( x3 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = 0.5 * ( y3 + y2 )\n\t\t\t\t\t+ hny * ( hoffset - 0.5 * width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = x1\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y1\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x1 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y1 + y2 )\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = x2\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y2\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = x1\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y1\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = x2\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y2\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_LEFT:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = x0\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y0\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x0 + x3 )\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y0 + y3 )\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = x3\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y3\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = x0\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y0\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = x3\n\t\t\t\t\t+ hnx * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y3\n\t\t\t\t\t+ hny * ( hoffset - hpadding - width )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_RIGHT:\n\t\t\tswitch( valign ) {\n\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\tresult.x = x1\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y1\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\tresult.x = 0.5 * ( x1 + x2 )\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - 0.5 * height );\n\t\t\t\tresult.y = 0.5 * ( y1 + y2 )\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - 0.5 * height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\tresult.x = x2\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y2\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tresult.x = x1\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset - vpadding - height );\n\t\t\t\tresult.y = y1\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset - vpadding - height );\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tresult.x = x2\n\t\t\t\t\t+ hnx * ( hoffset + hpadding )\n\t\t\t\t\t+ vnx * ( voffset + vpadding );\n\t\t\t\tresult.y = y2\n\t\t\t\t\t+ hny * ( hoffset + hpadding )\n\t\t\t\t\t+ vny * ( voffset + vpadding );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected normalize( dx: number, dy: number, defx: number, defy: number, result: Point ): number {\n\t\tconst d = dx * dx + dy * dy;\n\t\tif( FMIN < d ) {\n\t\t\tconst l = Math.sqrt( d );\n\t\t\tconst li = 1 / l;\n\t\t\tresult.set( dx * li, dy * li );\n\t\t\treturn l;\n\t\t} else {\n\t\t\tresult.set( defx, defy );\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tprotected rotateAlignHorizontalRight( align: EShapeTextAlignHorizontal ): EShapeTextAlignVertical {\n\t\tswitch( align ) {\n\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\treturn EShapeTextAlignVertical.BOTTOM;\n\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\treturn EShapeTextAlignVertical.TOP;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_LEFT:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_RIGHT:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_TOP;\n\t\t}\n\t}\n\n\tprotected rotateAlignVerticalRight( align: EShapeTextAlignVertical ): EShapeTextAlignHorizontal {\n\t\tswitch( align ) {\n\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\treturn EShapeTextAlignHorizontal.LEFT;\n\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.RIGHT;\n\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_RIGHT;\n\t\t}\n\t}\n\n\tprotected rotateAlignHorizontalLeft( align: EShapeTextAlignHorizontal ): EShapeTextAlignVertical {\n\t\tswitch( align ) {\n\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\treturn EShapeTextAlignVertical.TOP;\n\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\treturn EShapeTextAlignVertical.BOTTOM;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_LEFT:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_TOP;\n\t\tcase EShapeTextAlignHorizontal.OUTSIDE_RIGHT:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n\t\t}\n\t}\n\n\tprotected rotateAlignVerticalLeft( align: EShapeTextAlignVertical ): EShapeTextAlignHorizontal {\n\t\tswitch( align ) {\n\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\treturn EShapeTextAlignHorizontal.RIGHT;\n\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.LEFT;\n\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_RIGHT;\n\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n\t\t}\n\t}\n\n\tprotected updateTextVertex( buffer: EShapeBuffer, shape: EShape, textAtlas: EShapeTextAtlas ) {\n\t\tconst text = shape.text;\n\t\tconst textSize = text.size;\n\t\tconst textFamily = text.family;\n\t\tconst textValue = text.value;\n\t\tconst textStyle = text.style;\n\t\tconst textAlignHorizontal = text.align.horizontal;\n\t\tconst textAlignVertical = text.align.vertical;\n\t\tconst textOffsetHorizontal = text.offset.horizontal;\n\t\tconst textOffsetVertical = text.offset.vertical;\n\t\tconst textSpacingHorizontal = text.spacing.horizontal;\n\t\tconst textSpacingVertical = text.spacing.vertical;\n\t\tconst textDirection = text.direction;\n\t\tconst textPaddingHorizontal = text.padding.horizontal;\n\t\tconst textPaddingVertical = text.padding.vertical;\n\t\tconst textClipping = text.clipping;\n\t\tconst textTexture = text.texture || Texture.WHITE;\n\t\tconst textTextureTransformId = this.toTextureTransformId( textTexture );\n\n\t\tconst isCharChanged = (textValue !== this.textValue || textFamily !== this.textFamily);\n\t\tconst isCharSizeChanged = (textSize !== this.textSize);\n\t\tconst isCharStyleChanged = (textStyle !== this.textStyle);\n\t\tconst isCharAlignChanged = (textAlignHorizontal !== this.textAlignHorizontal ||\n\t\t\ttextAlignVertical !== this.textAlignVertical);\n\t\tconst isCharOffsetChanged = (textOffsetHorizontal !== this.textOffsetHorizontal ||\n\t\t\ttextOffsetVertical !== this.textOffsetVertical);\n\t\tconst isCharSpacingChanged = (textSpacingHorizontal !== this.textSpacingHorizontal ||\n\t\t\ttextSpacingVertical !== this.textSpacingVertical ||\n\t\t\ttextPaddingHorizontal !== this.textPaddingHorizontal ||\n\t\t\ttextPaddingVertical !== this.textPaddingVertical);\n\t\tconst isCharDirectionChanged = (textDirection !== this.textDirection);\n\t\tconst isClippingChanged = ( this.textClipping !== textClipping );\n\t\tconst isTextureChanged = ( textTexture !== this.textTexture ||\n\t\t\ttextTextureTransformId !== this.textTextureTransformId );\n\n\t\tif( isCharChanged || isCharSizeChanged || isCharStyleChanged ||\n\t\t\tisCharAlignChanged || isCharOffsetChanged || isCharSpacingChanged ||\n\t\t\tisCharDirectionChanged || isClippingChanged || isTextureChanged ) {\n\t\t\tthis.textSize = textSize;\n\t\t\tthis.textFamily = textFamily;\n\t\t\tthis.textValue = textValue;\n\t\t\tthis.textStyle = textStyle;\n\t\t\tthis.textAlignHorizontal = textAlignHorizontal;\n\t\t\tthis.textAlignVertical = textAlignVertical;\n\t\t\tthis.textOffsetHorizontal = textOffsetHorizontal;\n\t\t\tthis.textOffsetVertical = textOffsetVertical;\n\t\t\tthis.textSpacingHorizontal = textSpacingHorizontal;\n\t\t\tthis.textSpacingVertical = textSpacingVertical;\n\t\t\tthis.textDirection = textDirection;\n\t\t\tthis.textPaddingHorizontal = textPaddingHorizontal;\n\t\t\tthis.textPaddingVertical = textPaddingVertical;\n\t\t\tthis.textClipping = textClipping;\n\t\t\tthis.textTexture = textTexture;\n\t\t\tthis.textTextureTransformId = textTextureTransformId;\n\n\t\t\tif( isCharSizeChanged ) {\n\t\t\t\t// Invalidate the text weight to update the text steps.\n\t\t\t\tthis.textWeight = NaN;\n\t\t\t}\n\n\t\t\t// Calculate the transformed positions\n\t\t\t//\n\t\t\t//  0               1\n\t\t\t// |---------------|\n\t\t\t// |               |\n\t\t\t// |3              |2\n\t\t\t// |---------------|\n\t\t\t//\n\t\t\tconst size = shape.size;\n\t\t\tconst sx = size.x * 0.5;\n\t\t\tconst sy = size.y * 0.5;\n\t\t\tshape.updateTransform();\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = buffer.work;\n\t\t\twork.set( -sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( +sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x1 = work.x;\n\t\t\tconst y1 = work.y;\n\t\t\twork.set( +sx, +sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x2 = work.x;\n\t\t\tconst y2 = work.y;\n\t\t\tconst x3 = x0 + (x2 - x1);\n\t\t\tconst y3 = y0 + (y2 - y1);\n\n\t\t\t// Horizontal normal\n\t\t\tconst hl = this.calcLength( x0, y0, x1, y1 );\n\t\t\tthis.normalize( internalTransform.a, internalTransform.b, 1, 0, work );\n\t\t\tlet hnx = work.x;\n\t\t\tlet hny = work.y;\n\n\t\t\t// Vertical normal\n\t\t\tconst vl = this.calcLength( x0, y0, x3, y3 );\n\t\t\tthis.normalize( internalTransform.c, internalTransform.d, 0, 1, work );\n\t\t\tlet vnx = work.x;\n\t\t\tlet vny = work.y;\n\n\t\t\t// Calculate the width / height\n\t\t\tlet width = 0;\n\t\t\tlet height = 0;\n\t\t\tlet heightChar = 0;\n\t\t\tconst lineHeight = Math.max( 0, textSize + textSpacingVertical );\n\t\t\tlet lineWidth = 0;\n\t\t\tconst textAtlasCharacters = textAtlas.characters;\n\t\t\tfor( let i = 0, imax = textValue.length; i < imax; ++i ) {\n\t\t\t\tconst character = textValue[ i ];\n\t\t\t\tif( character !== \"\\n\" ) {\n\t\t\t\t\tconst data = textAtlasCharacters[ character ];\n\t\t\t\t\tif( data != null ) {\n\t\t\t\t\t\tlineWidth += this.toAdvance( i, imax, textValue, data.advance, textSpacingHorizontal );\n\t\t\t\t\t\theightChar = data.height;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twidth = Math.max( width, lineWidth );\n\t\t\t\t\tlineWidth = 0;\n\t\t\t\t\theight += lineHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst scale = textSize / textAtlas.font.size;\n\t\t\twidth = Math.max( width, lineWidth ) * scale;\n\t\t\theightChar *= scale;\n\t\t\theight += textSize;\n\n\t\t\t//\n\t\t\tlet tx0 = 0;\n\t\t\tlet ty0 = 0;\n\t\t\tlet lineWidthMaximum = NaN;\n\t\t\tswitch( textDirection ) {\n\t\t\tcase EShapeTextDirection.LEFT_TO_RIGHT:\n\t\t\t\tthis.getTextBBox(\n\t\t\t\t\ttextAlignHorizontal,\n\t\t\t\t\ttextAlignVertical,\n\t\t\t\t\ttextOffsetHorizontal,\n\t\t\t\t\ttextOffsetVertical,\n\t\t\t\t\ttextPaddingHorizontal,\n\t\t\t\t\ttextPaddingVertical,\n\t\t\t\t\twidth, height,\n\t\t\t\t\tx0, y0,\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx2, y2,\n\t\t\t\t\tx3, y3,\n\t\t\t\t\thnx, hny,\n\t\t\t\t\tvnx, vny,\n\t\t\t\t\twork\n\t\t\t\t);\n\t\t\t\ttx0 = work.x;\n\t\t\t\tty0 = work.y;\n\t\t\t\tif( textClipping ) {\n\t\t\t\t\tswitch( textAlignHorizontal ) {\n\t\t\t\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\t\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\t\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\t\t\tlineWidthMaximum = hl - textPaddingHorizontal * 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextDirection.TOP_TO_BOTTOM:\n\t\t\t\t// Swap normals\n\t\t\t\twork.set( vnx, vny );\n\t\t\t\tvnx = -hnx;\n\t\t\t\tvny = -hny;\n\t\t\t\thnx = work.x;\n\t\t\t\thny = work.y;\n\n\t\t\t\t// Get text bbox\n\t\t\t\tthis.getTextBBox(\n\t\t\t\t\tthis.rotateAlignVerticalRight( textAlignVertical ),\n\t\t\t\t\tthis.rotateAlignHorizontalRight( textAlignHorizontal ),\n\t\t\t\t\ttextOffsetVertical,\n\t\t\t\t\ttextOffsetHorizontal,\n\t\t\t\t\ttextPaddingVertical,\n\t\t\t\t\ttextPaddingHorizontal,\n\t\t\t\t\twidth, height,\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx2, y2,\n\t\t\t\t\tx3, y3,\n\t\t\t\t\tx0, y0,\n\t\t\t\t\thnx, hny,\n\t\t\t\t\tvnx, vny,\n\t\t\t\t\twork\n\t\t\t\t);\n\t\t\t\ttx0 = work.x;\n\t\t\t\tty0 = work.y;\n\t\t\t\tif( textClipping ) {\n\t\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\t\tswitch( textAlignHorizontal ) {\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\t\t\t\t\tlineWidthMaximum = vl - textPaddingVertical * 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextDirection.BOTTOM_TO_TOP:\n\t\t\t\t// Swap normals\n\t\t\t\twork.set( vnx, vny );\n\t\t\t\tvnx = hnx;\n\t\t\t\tvny = hny;\n\t\t\t\thnx = -work.x;\n\t\t\t\thny = -work.y;\n\n\t\t\t\t// Get text bbox\n\t\t\t\tthis.getTextBBox(\n\t\t\t\t\tthis.rotateAlignVerticalLeft( textAlignVertical ),\n\t\t\t\t\tthis.rotateAlignHorizontalLeft( textAlignHorizontal ),\n\t\t\t\t\ttextOffsetVertical,\n\t\t\t\t\ttextOffsetHorizontal,\n\t\t\t\t\ttextPaddingVertical,\n\t\t\t\t\ttextPaddingHorizontal,\n\t\t\t\t\twidth, height,\n\t\t\t\t\tx3, y3,\n\t\t\t\t\tx0, y0,\n\t\t\t\t\tx1, y1,\n\t\t\t\t\tx2, y2,\n\t\t\t\t\thnx, hny,\n\t\t\t\t\tvnx, vny,\n\t\t\t\t\twork\n\t\t\t\t);\n\t\t\t\ttx0 = work.x;\n\t\t\t\tty0 = work.y;\n\t\t\t\tif( textClipping ) {\n\t\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\t\tswitch( textAlignHorizontal ) {\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\t\t\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\t\t\t\t\tlineWidthMaximum = vl - textPaddingVertical * 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t//\n\t\t\tconst textWorld = text.world = text.world || new Float32Array( 8 );\n\t\t\tif( lineWidthMaximum < width ) {\n\t\t\t\tconst dwidth = ( width - lineWidthMaximum ) * 0.5;\n\t\t\t\ttextWorld[ 0 ] = tx0 + hnx * dwidth;\n\t\t\t\ttextWorld[ 1 ] = ty0 + hny * dwidth;\n\t\t\t\ttextWorld[ 2 ] = hnx;\n\t\t\t\ttextWorld[ 3 ] = hny;\n\t\t\t\ttextWorld[ 4 ] = vnx;\n\t\t\t\ttextWorld[ 5 ] = vny;\n\t\t\t\ttextWorld[ 6 ] = lineWidthMaximum;\n\t\t\t\ttextWorld[ 7 ] = height;\n\t\t\t} else {\n\t\t\t\ttextWorld[ 0 ] = tx0;\n\t\t\t\ttextWorld[ 1 ] = ty0;\n\t\t\t\ttextWorld[ 2 ] = hnx;\n\t\t\t\ttextWorld[ 3 ] = hny;\n\t\t\t\ttextWorld[ 4 ] = vnx;\n\t\t\t\ttextWorld[ 5 ] = vny;\n\t\t\t\ttextWorld[ 6 ] = width;\n\t\t\t\ttextWorld[ 7 ] = height;\n\t\t\t}\n\n\t\t\t// Texture\n\t\t\tconst textureUvs = this.toTextureUvs( textTexture ) as any;\n\t\t\tconst uvx0 = textureUvs.x0;\n\t\t\tconst uvx1 = textureUvs.x1;\n\t\t\tconst uvx3 = textureUvs.x3;\n\t\t\tconst uvy0 = textureUvs.y0;\n\t\t\tconst uvy1 = textureUvs.y1;\n\t\t\tconst uvy3 = textureUvs.y3;\n\n\t\t\tconst duvx01 = ( uvx1 - uvx0 );\n\t\t\tconst duvy01 = ( uvy1 - uvy0 );\n\t\t\tconst duvx03 = ( uvx3 - uvx0 );\n\t\t\tconst duvy03 = ( uvy3 - uvy0 );\n\n\t\t\t// Vertices & UVs\n\t\t\tconst vcount = this.textVertexCount;\n\t\t\tconst voffset = this.vertexOffset + this.vertexCount - vcount;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tbuffer.vertexBuffer.update();\n\t\t\tbuffer.uvBuffer.update();\n\n\t\t\tconst lhx = lineHeight * vnx;\n\t\t\tconst lhy = lineHeight * vny;\n\n\t\t\tconst snx = scale * hnx;\n\t\t\tconst sny = scale * hny;\n\n\t\t\tconst offsetY = (heightChar - textSize) * 0.5;\n\t\t\tconst oyx = offsetY * vnx;\n\t\t\tconst oyy = offsetY * vny;\n\n\t\t\tconst offsetItalic = ( textStyle === EShapeTextStyle.NORMAL ? 0 : text.size * 0.25 );\n\t\t\tlet bx0 = tx0 - oyx + offsetItalic * snx;\n\t\t\tlet by0 = ty0 - oyy + offsetItalic * sny;\n\t\t\tlet bx3 = tx0 + oyx + textSize * vnx;\n\t\t\tlet by3 = ty0 + oyy + textSize * vny;\n\t\t\tlet cx0 = bx0;\n\t\t\tlet cy0 = by0;\n\t\t\tlet cx3 = bx3;\n\t\t\tlet cy3 = by3;\n\n\t\t\tlineWidth = 0;\n\t\t\tlet lineCount = 0;\n\t\t\tconst textValueLength = textValue.length;\n\t\t\tfor( let i = 0, iv = voffset * 2; i < textValueLength; i += 1, iv += 8 ) {\n\t\t\t\tconst character = textValue[ i ];\n\t\t\t\tif( character !== \"\\n\" ) {\n\t\t\t\t\tconst data = textAtlasCharacters[ character ];\n\t\t\t\t\tlineCount += 1;\n\t\t\t\t\tif( data != null ) {\n\t\t\t\t\t\tconst advance = this.toAdvance( i, textValueLength, textValue, data.advance, textSpacingHorizontal );\n\t\t\t\t\t\tlineWidth += advance * scale;\n\t\t\t\t\t\tif( lineWidthMaximum < lineWidth ) {\n\t\t\t\t\t\t\tconst dots = textAtlasCharacters[ \"...\" ];\n\t\t\t\t\t\t\tif( dots != null ) {\n\t\t\t\t\t\t\t\tthis.writeCharacter(\n\t\t\t\t\t\t\t\t\tvertices, uvs, iv, dots, textAtlas,\n\t\t\t\t\t\t\t\t\tsnx, sny,\n\t\t\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\t\t\tduvx01, duvy01, duvx03, duvy03,\n\t\t\t\t\t\t\t\t\tuvx0, uvy0\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tconst dotsAdvance = this.toAdvance( i, textValueLength, textValue, dots.advance, textSpacingHorizontal );\n\t\t\t\t\t\t\t\tconst ax = dotsAdvance * snx;\n\t\t\t\t\t\t\t\tconst ay = dotsAdvance * sny;\n\t\t\t\t\t\t\t\tlineWidth += (dotsAdvance - advance) * scale;\n\t\t\t\t\t\t\t\tcx0 = cx0 + ax;\n\t\t\t\t\t\t\t\tcy0 = cy0 + ay;\n\t\t\t\t\t\t\t\tcx3 = cx3 + ax;\n\t\t\t\t\t\t\t\tcy3 = cy3 + ay;\n\n\t\t\t\t\t\t\t\tfor( i += 1, iv += 8; i < textValueLength; i += 1, iv += 8 ) {\n\t\t\t\t\t\t\t\t\tif( textValue[ i ] !== \"\\n\" ) {\n\t\t\t\t\t\t\t\t\t\tthis.writeCharacterEmpty(\n\t\t\t\t\t\t\t\t\t\t\tvertices, uvs, iv,\n\t\t\t\t\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\t\t\t\t\tuvx0, uvy0, uvx3, uvy3\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tlineCount += 1;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ti -= 1;\n\t\t\t\t\t\t\t\t\t\tiv -= 8;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.writeCharacterEmpty(\n\t\t\t\t\t\t\t\t\tvertices, uvs, iv,\n\t\t\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\t\t\tuvx0, uvy0, uvx3, uvy3\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.writeCharacter(\n\t\t\t\t\t\t\t\tvertices, uvs, iv, data, textAtlas,\n\t\t\t\t\t\t\t\tsnx, sny,\n\t\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\t\tduvx01, duvy01, duvx03, duvy03,\n\t\t\t\t\t\t\t\tuvx0, uvy0\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst ax = advance * snx;\n\t\t\t\t\t\t\tconst ay = advance * sny;\n\t\t\t\t\t\t\tcx0 = cx0 + ax;\n\t\t\t\t\t\t\tcy0 = cy0 + ay;\n\t\t\t\t\t\t\tcx3 = cx3 + ax;\n\t\t\t\t\t\t\tcy3 = cy3 + ay;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.writeCharacterEmpty(\n\t\t\t\t\t\t\tvertices, uvs, iv,\n\t\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\t\tuvx0, uvy0, uvx3, uvy3\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.writeCharacterEmpty(\n\t\t\t\t\t\tvertices, uvs, iv,\n\t\t\t\t\t\tcx0, cy0, cx3, cy3,\n\t\t\t\t\t\tuvx0, uvy0, uvx3, uvy3\n\t\t\t\t\t);\n\n\t\t\t\t\tbx0 += lhx;\n\t\t\t\t\tby0 += lhy;\n\t\t\t\t\tbx3 += lhx;\n\t\t\t\t\tby3 += lhy;\n\t\t\t\t\tcx0 = bx0;\n\t\t\t\t\tcy0 = by0;\n\t\t\t\t\tcx3 = bx3;\n\t\t\t\t\tcy3 = by3;\n\n\t\t\t\t\tthis.adjustTextAlignment(\n\t\t\t\t\t\tvertices,\n\t\t\t\t\t\thnx, hny,\n\t\t\t\t\t\tlineCount,\n\t\t\t\t\t\tiv,\n\t\t\t\t\t\twidth - lineWidth,\n\t\t\t\t\t\ttextDirection,\n\t\t\t\t\t\ttextAlignHorizontal,\n\t\t\t\t\t\ttextAlignVertical\n\t\t\t\t\t);\n\t\t\t\t\tlineWidth = 0;\n\t\t\t\t\tlineCount = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.adjustTextAlignment(\n\t\t\t\tvertices,\n\t\t\t\thnx, hny,\n\t\t\t\tlineCount,\n\t\t\t\tvoffset * 2 + textValueLength * 8,\n\t\t\t\twidth - lineWidth,\n\t\t\t\ttextDirection,\n\t\t\t\ttextAlignHorizontal,\n\t\t\t\ttextAlignVertical\n\t\t\t);\n\n\t\t\tfor( let i = voffset * 2 + textValue.length * 8, imax = (voffset + vcount) * 2; i < imax; i += 2 ) {\n\t\t\t\tvertices[ i + 0 ] = tx0;\n\t\t\t\tvertices[ i + 1 ] = ty0;\n\t\t\t\tuvs[ i + 0 ] = uvx0;\n\t\t\t\tuvs[ i + 1 ] = uvy0;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected toAdvance( index: number, size: number, text: string, advance: number, spacing: number ): number {\n\t\treturn (\n\t\t\tindex + 1 < size && text[ index + 1 ] !== \"\\n\" ?\n\t\t\tMath.max( 0, advance + spacing ) : advance\n\t\t);\n\t}\n\n\tprotected writeCharacterEmpty(\n\t\tvertices: Float32Array, uvs: Float32Array, iv: number,\n\t\tcx0: number, cy0: number,\n\t\tcx3: number, cy3: number,\n\t\tuvx0: number, uvy0: number,\n\t\tuvx3: number, uvy3: number\n\t): void {\n\t\tvertices[ iv + 0 ] = cx0;\n\t\tvertices[ iv + 1 ] = cy0;\n\t\tvertices[ iv + 2 ] = cx0;\n\t\tvertices[ iv + 3 ] = cy0;\n\t\tvertices[ iv + 4 ] = cx3;\n\t\tvertices[ iv + 5 ] = cy3;\n\t\tvertices[ iv + 6 ] = cx3;\n\t\tvertices[ iv + 7 ] = cy3;\n\n\t\tuvs[ iv + 0 ] = uvx0;\n\t\tuvs[ iv + 1 ] = uvy0;\n\t\tuvs[ iv + 2 ] = uvx0;\n\t\tuvs[ iv + 3 ] = uvy0;\n\t\tuvs[ iv + 4 ] = uvx3;\n\t\tuvs[ iv + 5 ] = uvy3;\n\t\tuvs[ iv + 6 ] = uvx3;\n\t\tuvs[ iv + 7 ] = uvy3;\n\t}\n\n\tprotected writeCharacter(\n\t\tvertices: Float32Array, uvs: Float32Array, iv: number,\n\t\tdata: EShapeTextAtlasCharacter, atlas: EShapeTextAtlas,\n\t\tsnx: number, sny: number,\n\t\tcx0: number, cy0: number,\n\t\tcx3: number, cy3: number,\n\t\tduvx01: number, duvy01: number,\n\t\tduvx03: number, duvy03: number,\n\t\tuvx0: number, uvy0: number\n\t): void {\n\t\t// Vertices\n\t\tconst dataOffsetX = data.x - data.origin.x;\n\t\tconst dataWidth = data.width;\n\t\tconst dx0 = dataOffsetX * snx;\n\t\tconst dy0 = dataOffsetX * sny;\n\t\tconst dx1 = (dataOffsetX + dataWidth) * snx;\n\t\tconst dy1 = (dataOffsetX + dataWidth) * sny;\n\t\tvertices[ iv + 0 ] = cx0 + dx0;\n\t\tvertices[ iv + 1 ] = cy0 + dy0;\n\t\tvertices[ iv + 2 ] = cx0 + dx1;\n\t\tvertices[ iv + 3 ] = cy0 + dy1;\n\t\tvertices[ iv + 4 ] = cx3 + dx1;\n\t\tvertices[ iv + 5 ] = cy3 + dy1;\n\t\tvertices[ iv + 6 ] = cx3 + dx0;\n\t\tvertices[ iv + 7 ] = cy3 + dy0;\n\n\t\t// UVs\n\t\tconst px0 = data.x / atlas.width;\n\t\tconst py0 = data.y / atlas.height;\n\t\tconst px1 = (data.x + data.width) / atlas.width;\n\t\tconst py1 = (data.y + data.height) / atlas.height;\n\n\t\tconst dux0 = duvx01 * px0;\n\t\tconst duy0 = duvy01 * px0;\n\t\tconst dux1 = duvx01 * px1;\n\t\tconst duy1 = duvy01 * px1;\n\n\t\tconst dvx0 = duvx03 * py0;\n\t\tconst dvy0 = duvy03 * py0;\n\t\tconst dvx1 = duvx03 * py1;\n\t\tconst dvy1 = duvy03 * py1;\n\t\tuvs[ iv + 0 ] = uvx0 + dux0 + dvx0;\n\t\tuvs[ iv + 1 ] = uvy0 + duy0 + dvy0;\n\t\tuvs[ iv + 2 ] = uvx0 + dux1 + dvx0;\n\t\tuvs[ iv + 3 ] = uvy0 + duy1 + dvy0;\n\t\tuvs[ iv + 4 ] = uvx0 + dux1 + dvx1;\n\t\tuvs[ iv + 5 ] = uvy0 + duy1 + dvy1;\n\t\tuvs[ iv + 6 ] = uvx0 + dux0 + dvx1;\n\t\tuvs[ iv + 7 ] = uvy0 + duy0 + dvy1;\n\t}\n\n\tprotected moveText( vertices: Float32Array, vertexIndex: number, textCount: number, dx: number, dy: number ): void {\n\t\tfor( let i = 0, iv = vertexIndex - 8 * textCount; i < textCount; i += 1, iv += 8 ) {\n\t\t\tvertices[ iv + 0 ] += dx;\n\t\t\tvertices[ iv + 1 ] += dy;\n\t\t\tvertices[ iv + 2 ] += dx;\n\t\t\tvertices[ iv + 3 ] += dy;\n\t\t\tvertices[ iv + 4 ] += dx;\n\t\t\tvertices[ iv + 5 ] += dy;\n\t\t\tvertices[ iv + 6 ] += dx;\n\t\t\tvertices[ iv + 7 ] += dy;\n\t\t}\n\t}\n\n\tprotected moveTextHalf(\n\t\tvertices: Float32Array, vertexIndex: number, textCount: number,\n\t\toffset: number, nx: number, ny: number\n\t): void {\n\t\toffset *= 0.5;\n\t\tthis.moveText( vertices, vertexIndex, textCount, offset * nx, offset * ny );\n\t}\n\n\tprotected moveTextFull(\n\t\tvertices: Float32Array, vertexIndex: number, textCount: number,\n\t\toffset: number, nx: number, ny: number\n\t): void {\n\t\tthis.moveText( vertices, vertexIndex, textCount, offset * nx, offset * ny );\n\t}\n\n\tprotected adjustTextAlignment(\n\t\tvertices: Float32Array,\n\t\tnx: number, ny: number,\n\t\tlineCount: number, vertexIndex: number,\n\t\toffset: number,\n\t\ttextDirection: EShapeTextDirection,\n\t\ttextAlignHorizontal: EShapeTextAlignHorizontal,\n\t\ttextAlignVertical: EShapeTextAlignVertical\n\t): void {\n\t\tif( FMIN < offset ) {\n\t\t\tswitch( textDirection ) {\n\t\t\tcase EShapeTextDirection.LEFT_TO_RIGHT:\n\t\t\t\tswitch( textAlignHorizontal ) {\n\t\t\t\tcase EShapeTextAlignHorizontal.OUTSIDE_RIGHT:\n\t\t\t\tcase EShapeTextAlignHorizontal.LEFT:\n\t\t\t\t\t// DO NOTHING\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignHorizontal.CENTER:\n\t\t\t\t\tthis.moveTextHalf( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignHorizontal.OUTSIDE_LEFT:\n\t\t\t\tcase EShapeTextAlignHorizontal.RIGHT:\n\t\t\t\t\tthis.moveTextFull( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextDirection.TOP_TO_BOTTOM:\n\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\t// DO NOTHING\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\tthis.moveTextHalf( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\tthis.moveTextFull( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EShapeTextDirection.BOTTOM_TO_TOP:\n\t\t\t\tswitch( textAlignVertical ) {\n\t\t\t\tcase EShapeTextAlignVertical.OUTSIDE_BOTTOM:\n\t\t\t\tcase EShapeTextAlignVertical.TOP:\n\t\t\t\t\tthis.moveTextFull( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignVertical.MIDDLE:\n\t\t\t\t\tthis.moveTextHalf( vertices, vertexIndex, lineCount, offset, nx, ny );\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeTextAlignVertical.OUTSIDE_TOP:\n\t\t\t\tcase EShapeTextAlignVertical.BOTTOM:\n\t\t\t\t\t// DO NOTHING\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateTextColorFill( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst text = shape.text;\n\t\tconst color = text.color;\n\t\tconst alpha = ( shape.visible && text.enable ? text.alpha : 0 );\n\t\tif( color !== this.textColor || alpha !== this.textAlpha ) {\n\t\t\tthis.textColor = color;\n\t\t\tthis.textAlpha = alpha;\n\t\t\tbuffer.colorFillBuffer.update();\n\n\t\t\tthis.fillColor(\n\t\t\t\tcolor, alpha,\n\t\t\t\tthis.vertexOffset + this.vertexCount - this.textVertexCount,\n\t\t\t\tthis.textVertexCount,\n\t\t\t\tbuffer.colorFills\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateTextColorStroke( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst text = shape.text;\n\t\tconst outline = text.outline;\n\t\tconst color = outline.color;\n\t\tconst alpha = ( shape.visible && text.enable ? outline.alpha : 0 );\n\t\tif( color !== this.textOutlineColor || alpha !== this.textOutlineAlpha ) {\n\t\t\tthis.textOutlineColor = color;\n\t\t\tthis.textOutlineAlpha = alpha;\n\t\t\tbuffer.colorStrokeBuffer.update();\n\n\t\t\tthis.fillColor(\n\t\t\t\tcolor, alpha,\n\t\t\t\tthis.vertexOffset + this.vertexCount - this.textVertexCount,\n\t\t\t\tthis.textVertexCount,\n\t\t\t\tbuffer.colorStrokes\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateTextStep( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst text = shape.text;\n\t\tconst textOutline = text.outline;\n\t\tconst textOutlineWidth = (textOutline.enable ? textOutline.width : 0);\n\t\tconst textWeight = text.weight;\n\t\tif( textWeight !== this.textWeight || textOutlineWidth !== this.textOutlineWidth ) {\n\t\t\tthis.textWeight = textWeight;\n\t\t\tthis.textOutlineWidth = textOutlineWidth;\n\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\t\t\tconst steps = buffer.steps;\n\t\t\tconst antialiases = buffer.antialiases;\n\t\t\tconst vcount = this.textVertexCount;\n\t\t\tconst voffset = this.vertexOffset + this.vertexCount - vcount;\n\n\t\t\tconst textAtlas = text.atlas;\n\t\t\tif( textAtlas != null ) {\n\t\t\t\tconst scale = 0.05 / (text.size / textAtlas.font.size);\n\t\t\t\tconst outlineWidth = textOutlineWidth * 0.4;\n\t\t\t\tconst weight =  -0.025 + ( textWeight === EShapeTextWeight.NORMAL ? 0.0 : 0.05 );\n\t\t\t\tfor( let i = voffset * 2, imax = i + vcount * 2; i < imax; i += 2 ) {\n\t\t\t\t\tsteps[ i + 0 ] = scale;\n\t\t\t\t\tsteps[ i + 1 ] = outlineWidth;\n\t\t\t\t}\n\t\t\t\tfor( let i = voffset * 4, imax = i + vcount * 4; i < imax; i += 4 ) {\n\t\t\t\t\tantialiases[ i +  0 ] = weight;\n\t\t\t\t\tantialiases[ i +  1 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  2 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  3 ] = FMIN;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = voffset * 2, imax = i + vcount * 2; i < imax; i += 2 ) {\n\t\t\t\t\tsteps[ i + 0 ] = 0;\n\t\t\t\t\tsteps[ i + 1 ] = 0;\n\t\t\t\t}\n\t\t\t\tfor( let i = voffset * 4, imax = i + vcount * 4; i < imax; i += 4 ) {\n\t\t\t\t\tantialiases[ i +  0 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  1 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  2 ] = FMIN;\n\t\t\t\t\tantialiases[ i +  3 ] = FMIN;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateText( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst vcount = this.textVertexCount;\n\t\tif( 0 < vcount ) {\n\t\t\tconst textAtlas = shape.text.atlas;\n\t\t\tif( textAtlas != null ) {\n\t\t\t\tthis.updateTextVertex( buffer, shape, textAtlas );\n\t\t\t\tthis.updateTextColorFill( buffer, shape );\n\t\t\t\tthis.updateTextColorStroke( buffer, shape );\n\t\t\t\tthis.updateTextStep( buffer, shape );\n\t\t\t}\n\t\t}\n\t}\n\n\tinitText() {\n\t\tconst vcount = this.textVertexCount;\n\t\tif( 0 < vcount ) {\n\t\t\tconst icount = this.textIndexCount;\n\t\t\tconst voffset = this.vertexOffset + this.vertexCount - vcount;\n\t\t\tconst ioffset = this.indexOffset + this.indexCount - icount;\n\t\t\tconst buffer = this.buffer;\n\n\t\t\t// Clippings\n\t\t\tbuffer.clippingBuffer.update();\n\t\t\tconst clippings = buffer.clippings;\n\t\t\tfor( let i = voffset * 3, imax = i + vcount * 3; i < imax; i += 3 ) {\n\t\t\t\tclippings[ i + 0 ] = 0;\n\t\t\t\tclippings[ i + 1 ] = 0;\n\t\t\t\tclippings[ i + 2 ] = 2;\n\t\t\t}\n\n\t\t\t// Indices\n\t\t\tbuffer.indexBuffer.update();\n\t\t\tconst indices = buffer.indices;\n\t\t\tfor( let i = 0, ii = ioffset * 3, imax = (icount >> 1); i < imax; i += 1, ii += 6 ) {\n\t\t\t\tconst j = voffset + ( i << 2 );\n\t\t\t\tindices[ ii + 0 ] = j + 0;\n\t\t\t\tindices[ ii + 1 ] = j + 1;\n\t\t\t\tindices[ ii + 2 ] = j + 3;\n\n\t\t\t\tindices[ ii + 3 ] = j + 1;\n\t\t\t\tindices[ ii + 4 ] = j + 2;\n\t\t\t\tindices[ ii + 5 ] = j + 3;\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildUnit( builder: EShapeBufferUnitBuilder ) {\n\t\tsuper.buildUnit( builder );\n\n\t\tif( 0 < this.textVertexCount ) {\n\t\t\tconst textTexture = this.textTexture || Texture.WHITE;\n\t\t\tconst textBaseTexture = textTexture.baseTexture;\n\t\t\tif( textBaseTexture !== builder.baseTexture ) {\n\t\t\t\tbuilder.baseTexture = textBaseTexture;\n\t\t\t\tconst indexOffset = this.indexOffset + this.indexCount - this.textIndexCount;\n\t\t\t\tbuilder.push( textTexture, indexOffset );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsStyleUploadeds } from \"../e-shape-points-style-uploadeds\";\nimport { EShapeBar } from \"./e-shape-bar\";\nimport { EShapeBarPoints } from \"./e-shape-bar-points\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nconst FMIN: number = 0.00001;\n\nexport class EShapeBarUploaded extends EShapeTextUploaded {\n\tprotected pointsId: number;\n\tprotected pointsStyle: EShapePointsStyle;\n\n\tconstructor(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, ioffset: number,\n\t\ttvcount: number, ticount: number,\n\t\tvcount: number, icount: number,\n\t\tantialiasWeight: number\n\t) {\n\t\tsuper( buffer, voffset, ioffset, tvcount, ticount, vcount, icount, antialiasWeight );\n\t\tthis.pointsId = NaN;\n\t\tthis.pointsStyle = EShapePointsStyle.NONE;\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Clipping & indices\n\t\tbuffer.clippingBuffer.update();\n\t\tconst clippings = buffer.clippings;\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\n\t\t// Clippings\n\t\tconst ic = voffset * 3;\n\t\tclippings[ ic +  0 ] = 1;\n\t\tclippings[ ic +  1 ] = 0;\n\t\tclippings[ ic +  2 ] = 3;\n\n\t\tclippings[ ic +  3 ] = 0;\n\t\tclippings[ ic +  4 ] = 1;\n\t\tclippings[ ic +  5 ] = 5;\n\n\t\tclippings[ ic +  6 ] = 1;\n\t\tclippings[ ic +  7 ] = 0;\n\t\tclippings[ ic +  8 ] = 3;\n\n\t\tclippings[ ic +  9 ] = 0;\n\t\tclippings[ ic + 10 ] = 1;\n\t\tclippings[ ic + 11 ] = 5;\n\n\t\t// Indices\n\t\tconst ii = ioffset * 3;\n\t\tindices[ ii + 0 ] = voffset + 0;\n\t\tindices[ ii + 1 ] = voffset + 2;\n\t\tindices[ ii + 2 ] = voffset + 1;\n\n\t\tindices[ ii + 3 ] = voffset + 1;\n\t\tindices[ ii + 4 ] = voffset + 2;\n\t\tindices[ ii + 5 ] = voffset + 3;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\t//\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tif( shape instanceof EShapeBar ) {\n\t\t\tconst size = shape.size;\n\t\t\tconst sizeX = size.x;\n\t\t\tconst sizeY = size.y;\n\t\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\t\tconst stroke = shape.stroke;\n\t\t\tconst strokeWidth = ( stroke.enable ? stroke.width : 0 );\n\t\t\tconst isStrokeWidthChanged = ( strokeWidth !== this.strokeWidth );\n\t\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\t\tconst pointsId = shape.points.id;\n\t\t\tconst isPointsIdChanged = ( pointsId !== this.pointsId );\n\t\t\tconst pointsStyle = shape.points.style;\n\t\t\tconst isPointsStyleChanged = ( pointsStyle !== this.pointsStyle );\n\t\t\tif( isSizeChanged || isTransformChanged || isStrokeWidthChanged || isPointsIdChanged || isPointsStyleChanged ) {\n\t\t\t\tthis.sizeX = sizeX;\n\t\t\t\tthis.sizeY = sizeY;\n\t\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\t\tthis.pointsId = pointsId;\n\t\t\t\tthis.pointsStyle = pointsStyle;\n\t\t\t\tbuffer.vertexBuffer.update();\n\t\t\t\tbuffer.stepBuffer.update();\n\t\t\t\tbuffer.antialiasBuffer.update();\n\t\t\t\tbuffer.colorFillBuffer.update();\n\n\t\t\t\tif( isSizeChanged || isTransformChanged ) {\n\t\t\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\t\t}\n\t\t\t\tif( isPointsIdChanged ) {\n\t\t\t\t\t// Invalidate the texture transform ID to update the UVs\n\t\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t\t}\n\n\t\t\t\tconst voffset = this.vertexOffset;\n\t\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\t\tthis.updateLineVertexStepAndColorFill(\n\t\t\t\t\tbuffer,\n\t\t\t\t\tshape.points,\n\t\t\t\t\tstrokeWidth,\n\t\t\t\t\tshape.transform.internalTransform,\n\t\t\t\t\tvoffset, vcount\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateBarUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateColorFillAndStroke( buffer: EShapeBuffer, shape: EShape, vertexCount: number ): void {\n\t\tthis.updateColorStroke( buffer, shape, vertexCount );\n\t}\n\n\tprotected updateLineVertexStepAndColorFill(\n\t\tbuffer: EShapeBuffer,\n\t\tpoints: EShapeBarPoints,\n\t\tstrokeWidth: number,\n\t\tinternalTransform: Matrix,\n\t\tvoffset: number,\n\t\tvcount: number\n\t): void {\n\t\tconst iv = voffset * 2;\n\t\tconst ia = voffset * 4;\n\t\tconst vertices = buffer.vertices;\n\t\tconst steps = buffer.steps;\n\t\tconst antialiases = buffer.antialiases;\n\t\tconst colorFills = buffer.colorFills;\n\t\tconst pointCount = points.length;\n\t\tconst pointValues = points.values;\n\t\tconst pointsStyle = points.style;\n\t\tconst pointsSize = points.size;\n\t\tconst scaleInvariant = EShapePointsStyleUploadeds.toScaleInvariant( pointsStyle );\n\n\t\t// First point\n\t\tconst work = buffer.work;\n\t\twork.set( pointValues[ 0 ], pointValues[ 1 ] );\n\t\tinternalTransform.apply( work, work );\n\t\tconst p1x = work.x;\n\t\tconst p1y = work.y;\n\n\t\t// Last point\n\t\tconst lastIndex = (pointCount - 1) << 1;\n\t\twork.set( pointValues[ lastIndex + 0 ], pointValues[ lastIndex + 1 ] );\n\t\tinternalTransform.apply( work, work );\n\t\tlet p2x = work.x;\n\t\tlet p2y = work.y;\n\n\t\t// Normal\n\t\tlet dx = p2x - p1x;\n\t\tlet dy = p2y - p1y;\n\t\tconst d = Math.sqrt( dx * dx + dy * dy );\n\t\tlet l = d;\n\t\tif( 0 <= pointsSize && FMIN < d ) {\n\t\t\tconst ratio = pointsSize / d;\n\t\t\tdx *= ratio;\n\t\t\tdy *= ratio;\n\t\t\tp2x = p1x + dx;\n\t\t\tp2y = p1y + dy;\n\t\t\tl = pointsSize;\n\t\t}\n\n\t\t// Other points\n\t\tconst p0x = p1x - dx;\n\t\tconst p0y = p1y - dy;\n\t\tconst p3x = p2x + dx;\n\t\tconst p3y = p2y + dy;\n\n\t\t//\n\t\tvertices[ iv + 0 ] = p1x;\n\t\tvertices[ iv + 1 ] = p1y;\n\t\tvertices[ iv + 2 ] = p1x;\n\t\tvertices[ iv + 3 ] = p1y;\n\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\tantialiases[ ia + 0 ] = p0x;\n\t\tantialiases[ ia + 1 ] = p0y;\n\t\tantialiases[ ia + 2 ] = p2x;\n\t\tantialiases[ ia + 3 ] = p2y;\n\t\tantialiases[ ia + 4 ] = p0x;\n\t\tantialiases[ ia + 5 ] = p0y;\n\t\tantialiases[ ia + 6 ] = p2x;\n\t\tantialiases[ ia + 7 ] = p2y;\n\t\tcolorFills[ ia + 0 ] = 0.0;\n\t\tcolorFills[ ia + 4 ] = 0.0;\n\n\t\tvertices[ iv + 4 ] = p2x;\n\t\tvertices[ iv + 5 ] = p2y;\n\t\tvertices[ iv + 6 ] = p2x;\n\t\tvertices[ iv + 7 ] = p2y;\n\t\tsteps[ iv + 4 ] = strokeWidth;\n\t\tsteps[ iv + 5 ] = scaleInvariant;\n\t\tsteps[ iv + 6 ] = strokeWidth;\n\t\tsteps[ iv + 7 ] = scaleInvariant;\n\t\tantialiases[ ia +  8 ] = p1x;\n\t\tantialiases[ ia +  9 ] = p1y;\n\t\tantialiases[ ia + 10 ] = p3x;\n\t\tantialiases[ ia + 11 ] = p3y;\n\t\tantialiases[ ia + 12 ] = p1x;\n\t\tantialiases[ ia + 13 ] = p1y;\n\t\tantialiases[ ia + 14 ] = p3x;\n\t\tantialiases[ ia + 15 ] = p3y;\n\t\tcolorFills[ ia +  8 ] = l;\n\t\tcolorFills[ ia + 12 ] = l;\n\n\t\t// Total length\n\t\tEShapePointsStyleUploadeds.toDash( l, strokeWidth, pointsStyle, work );\n\t\tconst dash0 = work.x;\n\t\tconst dash1 = work.y;\n\t\tfor( let i = voffset * 4, imax = i + vcount * 4; i < imax; i += 4 ) {\n\t\t\tcolorFills[ i + 1 ] = dash0;\n\t\t\tcolorFills[ i + 2 ] = dash1;\n\t\t\tcolorFills[ i + 3 ] = l;\n\t\t}\n\t}\n\n\tupdateBarUv( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture );\n\n\t\t\t// Uvs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst iuv = voffset * 2;\n\n\t\t\tuvs[ iuv + 0 ] = textureUvs.x0;\n\t\t\tuvs[ iuv + 1 ] = textureUvs.y0;\n\t\t\tuvs[ iuv + 2 ] = textureUvs.x3;\n\t\t\tuvs[ iuv + 3 ] = textureUvs.y3;\n\n\t\t\tuvs[ iuv + 4 ] = textureUvs.x1;\n\t\t\tuvs[ iuv + 5 ] = textureUvs.y1;\n\t\t\tuvs[ iuv + 6 ] = textureUvs.x2;\n\t\t\tuvs[ iuv + 7 ] = textureUvs.y2;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeBarUploaded } from \"./e-shape-bar-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeBarUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number,\n\t\tantialiasWeight: number\n\t): EShapeBarUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 4 + tvcount;\n\t\tconst icount = 2 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeBarUploaded(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, ioffset,\n\t\t\t\ttvcount, ticount,\n\t\t\t\tvcount, icount,\n\t\t\t\tantialiasWeight\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeStrokeLike } from \"../e-shape-stroke\";\nimport { EShapeTextLike } from \"../e-shape-text\";\nimport { EShapeTextOutlineLike } from \"../e-shape-text-outline\";\n\nexport class EShapeActionBases {\n\tstatic toBaseFill( shape: EShape, runtime: EShapeRuntime ): EShapeFillLike {\n\t\treturn ( runtime.written & EShapeRuntimeReset.COLOR_FILL ? shape : runtime ).fill;\n\t}\n\n\tstatic toBaseStroke( shape: EShape, runtime: EShapeRuntime ): EShapeStrokeLike {\n\t\treturn ( runtime.written & EShapeRuntimeReset.COLOR_STROKE ? shape : runtime ).stroke;\n\t}\n\n\tstatic toBaseText( shape: EShape, runtime: EShapeRuntime ): EShapeTextLike {\n\t\treturn ( runtime.written & EShapeRuntimeReset.COLOR_TEXT ? shape : runtime ).text;\n\t}\n\n\tstatic toBaseTextOutline( shape: EShape, runtime: EShapeRuntime ): EShapeTextOutlineLike {\n\t\treturn ( runtime.written & EShapeRuntimeReset.COLOR_TEXT_OUTLINE ? shape : runtime ).text.outline;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"../../d-applications\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\n\nexport type EShapeActionExpression<T> = ( shape: EShape, time: number ) => T;\n\nexport class EShapeActionRuntime {\n\treset: EShapeRuntimeReset;\n\n\tconstructor( reset?: EShapeRuntimeReset ) {\n\t\tthis.reset = reset || EShapeRuntimeReset.NONE;\n\t}\n\n\ttoExpression<T>(\n\t\texpression: string, def: EShapeActionExpression<T>, defLiteral: string\n\t): EShapeActionExpression<T> {\n\t\tif( expression.trim().length <= 0 ) {\n\t\t\treturn def;\n\t\t}\n\n\t\ttry {\n\t\t\treturn Function(\n\t\t\t\t\"shape\", \"time\",\n\t\t\t\t`try{ with( shape ) { return (${expression}); } } catch( e ) { return ${defLiteral}; }`\n\t\t\t) as EShapeActionExpression<T>;\n\t\t} catch( e ) {\n\t\t\treturn def;\n\t\t}\n\t}\n\n\temit( name: string, shape: EShape, parameter1?: unknown, parameter2?: unknown ): void {\n\t\tif( parameter1 === undefined ) {\n\t\t\tshape.emit( name, shape );\n\t\t} else if( parameter2 === undefined ) {\n\t\t\tshape.emit( name, shape, parameter1 );\n\t\t} else {\n\t\t\tshape.emit( name, shape, parameter1, parameter2 );\n\t\t}\n\n\t\tconst layer = DApplications.getLayer( shape );\n\t\tif( layer ) {\n\t\t\tconst application = layer.application as any;\n\t\t\tif( \"shape\" in application ) {\n\t\t\t\tif( parameter1 === undefined ) {\n\t\t\t\t\tapplication.shape.emit( name, shape );\n\t\t\t\t} else if( parameter2 === undefined ) {\n\t\t\t\t\tapplication.shape.emit( name, shape, parameter1 );\n\t\t\t\t} else {\n\t\t\t\t\tapplication.shape.emit( name, shape, parameter1, parameter2 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\t// OVERRIDE THIS\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression, EShapeActionRuntime } from \"./e-shape-action-runtime\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\n\nconst conditionDefault = (): boolean => true;\n\nexport class EShapeActionRuntimeConditional extends EShapeActionRuntime {\n\tprotected readonly condition: EShapeActionExpression<boolean>;\n\n\tconstructor( value: EShapeActionValue, reset: EShapeRuntimeReset ) {\n\t\tsuper( reset );\n\t\tthis.condition = this.toExpression( value.condition, conditionDefault, \"true\" );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlink extends EShapeActionRuntimeConditional {\n\tprotected interval: number;\n\n\tconstructor( value: EShapeActionValueBlink, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.interval = value.interval;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst interval = this.interval;\n\t\t\tconst dinterval = ( interval << 1 );\n\t\t\tconst elapsed = ( time % dinterval );\n\t\t\tif( elapsed < interval ) {\n\t\t\t\tthis.toOff( shape, runtime );\n\t\t\t\truntime.effect = time + ( interval - elapsed );\n\t\t\t} else {\n\t\t\t\tthis.toOn( shape, runtime );\n\t\t\t\truntime.effect = time + ( dinterval - elapsed );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\t//\n\t}\n\n\tprotected toOff( shape: EShape, runtime: EShapeRuntime ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkBrighten extends EShapeActionRuntimeBlink {\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tconst fill = EShapeActionBases.toBaseFill( shape, runtime );\n\t\tshape.fill.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.brighten( fill.color, 0.5 ),\n\t\t\tfill.alpha\n\t\t);\n\n\t\tconst stroke = EShapeActionBases.toBaseStroke( shape, runtime );\n\t\tshape.stroke.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.brighten( stroke.color, 0.5 ),\n\t\t\tstroke.alpha\n\t\t);\n\n\t\tconst text = EShapeActionBases.toBaseText( shape, runtime );\n\t\tshape.text.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.brighten( text.color, 0.5 ),\n\t\t\ttext.alpha\n\t\t);\n\n\t\tconst outline = EShapeActionBases.toBaseTextOutline( shape, runtime );\n\t\tshape.text.outline.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.brighten( outline.color, 0.5 ),\n\t\t\toutline.alpha\n\t\t);\n\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkColorFill extends EShapeActionRuntimeBlink {\n\tprotected color: number;\n\tprotected alpha: number;\n\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL );\n\t\tthis.color = value.color;\n\t\tthis.alpha = value.alpha;\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tshape.fill.set( undefined, this.color, this.alpha );\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkColorStroke extends EShapeActionRuntimeBlink {\n\tprotected color: number;\n\tprotected alpha: number;\n\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_STROKE );\n\t\tthis.color = value.color;\n\t\tthis.alpha = value.alpha;\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tshape.stroke.set( undefined, this.color, this.alpha );\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkDarken extends EShapeActionRuntimeBlink {\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tconst fill = EShapeActionBases.toBaseFill( shape, runtime );\n\t\tshape.fill.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.darken( fill.color, 0.5 ),\n\t\t\tfill.alpha\n\t\t);\n\n\t\tconst stroke = EShapeActionBases.toBaseStroke( shape, runtime );\n\t\tshape.stroke.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.darken( stroke.color, 0.5 ),\n\t\t\tstroke.alpha\n\t\t);\n\n\t\tconst text = EShapeActionBases.toBaseText( shape, runtime );\n\t\tshape.text.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.darken( text.color, 0.5 ),\n\t\t\ttext.alpha\n\t\t);\n\n\t\tconst outline = EShapeActionBases.toBaseTextOutline( shape, runtime );\n\t\tshape.text.outline.set(\n\t\t\tundefined,\n\t\t\tUtilRgb.darken( outline.color, 0.5 ),\n\t\t\toutline.alpha\n\t\t);\n\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkOpacity extends EShapeActionRuntimeBlink {\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL_AND_STROKE );\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tconst fill = EShapeActionBases.toBaseFill( shape, runtime );\n\t\tshape.fill.set(\n\t\t\tundefined,\n\t\t\tfill.color,\n\t\t\tfill.alpha * 0.5\n\t\t);\n\n\t\tconst stroke = EShapeActionBases.toBaseStroke( shape, runtime );\n\t\tshape.stroke.set(\n\t\t\tundefined,\n\t\t\tstroke.color,\n\t\t\tstroke.alpha * 0.5\n\t\t);\n\n\t\truntime.written |= this.reset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionValueBlink } from \"./e-shape-action-value-blink\";\n\nexport class EShapeActionRuntimeBlinkVisibility extends EShapeActionRuntimeBlink {\n\tconstructor( value: EShapeActionValueBlink ) {\n\t\tsuper( value, EShapeRuntimeReset.VISIBILITY );\n\t}\n\n\tprotected toOn( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tshape.visible = true;\n\t\truntime.written |= this.reset;\n\t}\n\n\tprotected toOff( shape: EShape, runtime: EShapeRuntime ): void {\n\t\tshape.visible = false;\n\t\truntime.written |= this.reset;\n\t}\n}\n","import { DThemes } from \"../../theme/d-themes\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntime } from \"./e-shape-action-runtime\";\nimport { EShapeActionValue, EThemeShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\n\nexport abstract class EShapeActionValueBase implements EShapeActionValue {\n\treadonly type: EShapeActionValueType;\n\treadonly condition: string;\n\n\tconstructor( type: EShapeActionValueType, condition: string ) {\n\t\tthis.type = type;\n\t\tthis.condition = condition;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tthis.type === value.type &&\n\t\t\tthis.condition === value.condition\n\t\t);\n\t}\n\n\ttoLabel(): string {\n\t\treturn DThemes.getInstance().get<EThemeShapeActionValue>( \"EShapeActionValue\" ).toLabel( this );\n\t}\n\n\tabstract toRuntime( shape: EShape ): EShapeActionRuntime;\n\tabstract serialize( manager: EShapeResourceManagerSerialization ): number;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueType {\n\tSHOW_HIDE,\n\tBLINK,\n\tTRANSFORM,\n\tOPEN,\n\tEMIT_EVENT,\n\tCHANGE_COLOR,\n\tCHANGE_TEXT,\n\tCHANGE_CURSOR,\n\tMISC\n}\n","import { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBase } from \"./e-shape-action-value-base\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\n\nexport abstract class EShapeActionValueSubtyped<SUBTYPE extends number> extends EShapeActionValueBase {\n\treadonly subtype: SUBTYPE;\n\n\tconstructor( type: EShapeActionValueType, condition: string, subtype: SUBTYPE ) {\n\t\tsuper( type, condition );\n\t\tthis.subtype = subtype;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueSubtyped) &&\n\t\t\tthis.subtype === value.subtype\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilIsNumber } from \"../../util/util-is-number\";\n\nexport class EShapeActionValues {\n\tstatic toResource( index: number, parsed: number[], resources: string[] ): string {\n\t\tif( 0 <= index && index < parsed.length ) {\n\t\t\tconst id = parsed[ index ];\n\t\t\tif( utilIsNumber( id ) && 0 <= id && id < resources.length ) {\n\t\t\t\treturn resources[ id ];\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueChangeColorType {\n\tFILL,\n\tSTROKE,\n\tFILL_AND_STROKE,\n\tTEXT,\n\tTEXT_OUTLINE,\n\tALL\n}\n\nexport enum EShapeActionValueChangeColorTarget {\n\tCOLOR_AND_ALPHA,\n\tCOLOR,\n\tALPHA,\n\tCODE,\n\tBRIGHTNESS\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeBlink } from \"./e-shape-action-runtime-blink\";\nimport { EShapeActionRuntimeBlinkBrighten } from \"./e-shape-action-runtime-blink-brighten\";\nimport { EShapeActionRuntimeBlinkColorFill } from \"./e-shape-action-runtime-blink-color-fill\";\nimport { EShapeActionRuntimeBlinkColorStroke } from \"./e-shape-action-runtime-blink-color-stroke\";\nimport { EShapeActionRuntimeBlinkDarken } from \"./e-shape-action-runtime-blink-darken\";\nimport { EShapeActionRuntimeBlinkOpacity } from \"./e-shape-action-runtime-blink-opacity\";\nimport { EShapeActionRuntimeBlinkVisibility } from \"./e-shape-action-runtime-blink-visibility\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBlinkType } from \"./e-shape-action-value-blink-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueBlinkSerialized = [\n\tEShapeActionValueType.BLINK, number,\n\tEShapeActionValueBlinkType.COLOR_FILL | EShapeActionValueBlinkType.COLOR_STROKE,\n\tnumber, number, number\n];\n\nexport class EShapeActionValueBlink extends EShapeActionValueSubtyped<EShapeActionValueBlinkType> {\n\treadonly interval: number;\n\treadonly color: number;\n\treadonly alpha: number;\n\n\tconstructor( subtype: EShapeActionValueBlinkType, condition: string, interval: number, color: number, alpha: number ) {\n\t\tsuper( EShapeActionValueType.BLINK, condition, subtype );\n\t\tthis.interval = interval;\n\t\tthis.color = color;\n\t\tthis.alpha = alpha;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueBlink) &&\n\t\t\tthis.interval === value.interval &&\n\t\t\tthis.color === value.color &&\n\t\t\tthis.alpha === value.alpha\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeBlink {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueBlinkType.BRIGHTEN:\n\t\t\treturn new EShapeActionRuntimeBlinkBrighten( this );\n\t\tcase EShapeActionValueBlinkType.COLOR_FILL:\n\t\t\treturn new EShapeActionRuntimeBlinkColorFill( this );\n\t\tcase EShapeActionValueBlinkType.COLOR_STROKE:\n\t\t\treturn new EShapeActionRuntimeBlinkColorStroke( this );\n\t\tcase EShapeActionValueBlinkType.DARKEN:\n\t\t\treturn new EShapeActionRuntimeBlinkDarken( this );\n\t\tcase EShapeActionValueBlinkType.OPACITY:\n\t\t\treturn new EShapeActionRuntimeBlinkOpacity( this );\n\t\tcase EShapeActionValueBlinkType.VISIBILITY:\n\t\t\treturn new EShapeActionRuntimeBlinkVisibility( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.interval},${this.color},${this.alpha}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueBlinkSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueBlink {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\treturn new EShapeActionValueBlink(\n\t\t\tserialized[ 2 ], condition, serialized[ 3 ],\n\t\t\tserialized[ 4 ], serialized[ 5 ]\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilAlpha } from \"../../util/util-alpha\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeStroke, EShapeStrokeLike } from \"../e-shape-stroke\";\nimport { EShapeText, EShapeTextLike } from \"../e-shape-text\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\nimport { EShapeActionValueChangeColorTarget } from \"./e-shape-action-value-change-color-type\";\n\nconst blendDefault = (): number | null => null;\n\nexport class EShapeActionRuntimeChangeColor extends EShapeActionRuntimeConditional {\n\tprotected readonly color: number | undefined;\n\tprotected readonly alpha: number | undefined;\n\tprotected readonly blend: EShapeActionExpression<number | null>;\n\n\tconstructor( value: EShapeActionValueChangeColor, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\n\t\tswitch( value.target ) {\n\t\tcase EShapeActionValueChangeColorTarget.COLOR:\n\t\t\tthis.color = value.color;\n\t\t\tthis.alpha = undefined;\n\t\t\tbreak;\n\t\tcase EShapeActionValueChangeColorTarget.ALPHA:\n\t\t\tthis.color = undefined;\n\t\t\tthis.alpha = value.alpha;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.color = value.color;\n\t\t\tthis.alpha = value.alpha;\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.blend = this.toExpression( value.blend, blendDefault, \"null\" );\n\t}\n\n\tprotected set(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\ttarget: EShapeStroke | EShapeFill | EShapeText | EShapeTextOutline,\n\t\tbase: EShapeStrokeLike | EShapeFillLike | EShapeTextLike | EShapeTextOutlineLike\n\t): void {\n\t\tconst color = this.color;\n\t\tconst alpha = this.alpha;\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\ttarget.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( base.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( base.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\ttarget.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( base.color, color, blend ),\n\t\t\t\t\t\tbase.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.set( undefined, color, base.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\ttarget.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbase.color,\n\t\t\t\t\tUtilAlpha.blend( base.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\ttarget.set( undefined, base.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected sets(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike\n\t): void {\n\t\tconst color = this.color;\n\t\tconst alpha = this.alpha;\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, alpha );\n\t\t\t\t\tstroke.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tbaseFill.alpha\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tbaseStroke.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, baseFill.alpha );\n\t\t\t\t\tstroke.set( undefined, color, baseStroke.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\tfill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\tstroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfill.set( undefined, baseFill.color, alpha );\n\t\t\t\tstroke.set( undefined, baseStroke.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected setAll(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke, text: EShapeText, outline: EShapeTextOutline,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike, baseText: EShapeTextLike, baseOutline: EShapeTextOutlineLike\n\t): void {\n\t\tconst color = this.color;\n\t\tconst alpha = this.alpha;\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\ttext.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseText.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseText.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\toutline.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseOutline.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseOutline.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, alpha );\n\t\t\t\t\tstroke.set( undefined, color, alpha );\n\t\t\t\t\ttext.set( undefined, color, alpha );\n\t\t\t\t\toutline.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tbaseFill.alpha\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tbaseStroke.alpha\n\t\t\t\t\t);\n\t\t\t\t\ttext.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseText.color, color, blend ),\n\t\t\t\t\t\tbaseText.alpha\n\t\t\t\t\t);\n\t\t\t\t\toutline.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseOutline.color, color, blend ),\n\t\t\t\t\t\tbaseOutline.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, baseFill.alpha );\n\t\t\t\t\tstroke.set( undefined, color, baseStroke.alpha );\n\t\t\t\t\ttext.set( undefined, color, baseText.alpha );\n\t\t\t\t\toutline.set( undefined, color, baseOutline.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\tfill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\tstroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\ttext.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseText.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\toutline.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseOutline.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfill.set( undefined, baseFill.color, alpha );\n\t\t\t\tstroke.set( undefined, baseStroke.color, alpha );\n\t\t\t\ttext.set( undefined, baseText.color, alpha );\n\t\t\t\toutline.set( undefined, baseOutline.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueChangeTextType {\n\tTEXT,\n\tNUMBER\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorAll extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.setAll(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tshape.text,\n\t\t\t\tshape.text.outline,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseText( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseTextOutline( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorFill extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.fill, EShapeActionBases.toBaseFill( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorFillAndStroke extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL_AND_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.sets(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorStroke extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.stroke, EShapeActionBases.toBaseStroke( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorText extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text, EShapeActionBases.toBaseText( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionValueChangeColor } from \"./e-shape-action-value-change-color\";\n\nexport class EShapeActionRuntimeChangeColorTextOutline extends EShapeActionRuntimeChangeColor {\n\tconstructor( value: EShapeActionValueChangeColor ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT_OUTLINE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text.outline, EShapeActionBases.toBaseTextOutline( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeColor } from \"./e-shape-action-runtime-change-color\";\nimport { EShapeActionRuntimeChangeColorAll } from \"./e-shape-action-runtime-change-color-all\";\nimport { EShapeActionRuntimeChangeColorFill } from \"./e-shape-action-runtime-change-color-fill\";\nimport { EShapeActionRuntimeChangeColorFillAndStroke } from \"./e-shape-action-runtime-change-color-fill-and-stroke\";\nimport { EShapeActionRuntimeChangeColorStroke } from \"./e-shape-action-runtime-change-color-stroke\";\nimport { EShapeActionRuntimeChangeColorText } from \"./e-shape-action-runtime-change-color-text\";\nimport { EShapeActionRuntimeChangeColorTextOutline } from \"./e-shape-action-runtime-change-color-text-outline\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport {\n\tEShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType\n} from \"./e-shape-action-value-change-color-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\ntype Target = EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA | EShapeActionValueChangeColorTarget.COLOR |\n\tEShapeActionValueChangeColorTarget.ALPHA;\nexport type EShapeActionValueChangeColorSerialized = [\n\tEShapeActionValueType.CHANGE_COLOR, number, EShapeActionValueChangeColorType,\n\tTarget, number, number, number\n];\n\nexport class EShapeActionValueChangeColor extends EShapeActionValueSubtyped<EShapeActionValueChangeColorType> {\n\treadonly target: Target;\n\treadonly color: number;\n\treadonly alpha: number;\n\treadonly blend: string;\n\n\tconstructor(\n\t\tsubtype: EShapeActionValueChangeColorType, condition: string,\n\t\ttarget: Target, color: number, alpha: number, blend: string\n\t) {\n\t\tsuper( EShapeActionValueType.CHANGE_COLOR, condition, subtype );\n\t\tthis.target = target;\n\t\tthis.color = color;\n\t\tthis.alpha = alpha;\n\t\tthis.blend = blend;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeColor) &&\n\t\t\tthis.target === value.target &&\n\t\t\tthis.color === value.color &&\n\t\t\tthis.alpha === value.alpha &&\n\t\t\tthis.blend === value.blend\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeChangeColor {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueChangeColorType.FILL:\n\t\t\treturn new EShapeActionRuntimeChangeColorFill( this );\n\t\tcase EShapeActionValueChangeColorType.STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorStroke( this );\n\t\tcase EShapeActionValueChangeColorType.FILL_AND_STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorFillAndStroke( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT:\n\t\t\treturn new EShapeActionRuntimeChangeColorText( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT_OUTLINE:\n\t\t\treturn new EShapeActionRuntimeChangeColorTextOutline( this );\n\t\tcase EShapeActionValueChangeColorType.ALL:\n\t\t\treturn new EShapeActionRuntimeChangeColorAll( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst blendId = manager.add(this.blend);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.target},${this.color},${this.alpha},${blendId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeColorSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeColor {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst blend = EShapeActionValues.toResource( 6, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeColor(\n\t\t\tserialized[ 2 ], condition, serialized[ 3 ], serialized[ 4 ], serialized[ 5 ], blend\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeStroke, EShapeStrokeLike } from \"../e-shape-stroke\";\nimport { EShapeText, EShapeTextLike } from \"../e-shape-text\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nconst brightnessDefault = (): number | null => null;\n\nexport class EShapeActionRuntimeChangeColorBrightness extends EShapeActionRuntimeConditional {\n\tprotected readonly brightness: EShapeActionExpression<number | null>;\n\n\tconstructor( value: EShapeActionValueChangeColorBrightness, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.brightness = this.toExpression( value.brightness, brightnessDefault, \"null\" );\n\t}\n\n\tprotected set(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\ttarget: EShapeStroke | EShapeFill | EShapeText | EShapeTextOutline,\n\t\tbase: EShapeStrokeLike | EShapeFillLike | EShapeTextLike | EShapeTextOutlineLike\n\t): void {\n\t\tconst brightness = this.brightness( shape, time );\n\t\tif( brightness != null ) {\n\t\t\ttarget.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( base.color, brightness ),\n\t\t\t\tbase.alpha\n\t\t\t);\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected sets(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike\n\t): void {\n\t\tconst brightness = this.brightness( shape, time );\n\t\tif( brightness != null ) {\n\t\t\tfill.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseFill.color, brightness ),\n\t\t\t\tbaseFill.alpha\n\t\t\t);\n\n\t\t\tstroke.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseStroke.color, brightness ),\n\t\t\t\tbaseStroke.alpha\n\t\t\t);\n\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected setAll(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke, text: EShapeText, outline: EShapeTextOutline,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike, baseText: EShapeTextLike, baseOutline: EShapeTextOutlineLike\n\t): void {\n\t\tconst brightness = this.brightness( shape, time );\n\t\tif( brightness != null ) {\n\t\t\tfill.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseFill.color, brightness ),\n\t\t\t\tbaseFill.alpha\n\t\t\t);\n\n\t\t\tstroke.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseStroke.color, brightness ),\n\t\t\t\tbaseStroke.alpha\n\t\t\t);\n\n\t\t\ttext.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseText.color, brightness ),\n\t\t\t\tbaseText.alpha\n\t\t\t);\n\n\t\t\toutline.set(\n\t\t\t\tundefined,\n\t\t\t\tthis.toColorAdjusted( baseOutline.color, brightness ),\n\t\t\t\tbaseOutline.alpha\n\t\t\t);\n\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected toColorAdjusted( color: number, brightness: number ): number {\n\t\tif( 0 <= brightness ) {\n\t\t\treturn UtilRgb.brighten( color, +brightness );\n\t\t} else {\n\t\t\treturn UtilRgb.darken( color, -brightness );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessAll extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.setAll(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tshape.text,\n\t\t\t\tshape.text.outline,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseText( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseTextOutline( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessFill extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.fill, EShapeActionBases.toBaseFill( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessFillAndStroke extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL_AND_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.sets(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessStroke extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.stroke, EShapeActionBases.toBaseStroke( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessText extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text, EShapeActionBases.toBaseText( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases} from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionValueChangeColorBrightness } from \"./e-shape-action-value-change-color-brightness\";\n\nexport class EShapeActionRuntimeChangeColorBrightnessTextOutline extends EShapeActionRuntimeChangeColorBrightness {\n\tconstructor( value: EShapeActionValueChangeColorBrightness ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT_OUTLINE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text.outline, EShapeActionBases.toBaseTextOutline( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeColorBrightness } from \"./e-shape-action-runtime-change-color-brightness\";\nimport { EShapeActionRuntimeChangeColorBrightnessAll } from \"./e-shape-action-runtime-change-color-brightness-all\";\nimport { EShapeActionRuntimeChangeColorBrightnessFill } from \"./e-shape-action-runtime-change-color-brightness-fill\";\nimport {\n\tEShapeActionRuntimeChangeColorBrightnessFillAndStroke\n} from \"./e-shape-action-runtime-change-color-brightness-fill-and-stroke\";\nimport {\n\tEShapeActionRuntimeChangeColorBrightnessStroke\n} from \"./e-shape-action-runtime-change-color-brightness-stroke\";\nimport { EShapeActionRuntimeChangeColorBrightnessText } from \"./e-shape-action-runtime-change-color-brightness-text\";\nimport {\n\tEShapeActionRuntimeChangeColorBrightnessTextOutline\n} from \"./e-shape-action-runtime-change-color-brightness-text-outline\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport {\n\tEShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType\n} from \"./e-shape-action-value-change-color-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueChangeColorBrightnessSerialized = [\n\tEShapeActionValueType.CHANGE_COLOR, number, EShapeActionValueChangeColorType,\n\tEShapeActionValueChangeColorTarget.BRIGHTNESS, number\n];\n\nexport class EShapeActionValueChangeColorBrightness\n\textends EShapeActionValueSubtyped<EShapeActionValueChangeColorType> {\n\treadonly brightness: string;\n\n\tconstructor(\n\t\tsubtype: EShapeActionValueChangeColorType, condition: string, brightness: string\n\t) {\n\t\tsuper( EShapeActionValueType.CHANGE_COLOR, condition, subtype );\n\t\tthis.brightness = brightness;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeColorBrightness) &&\n\t\t\tthis.brightness === value.brightness\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeChangeColorBrightness {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueChangeColorType.FILL:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessFill( this );\n\t\tcase EShapeActionValueChangeColorType.STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessStroke( this );\n\t\tcase EShapeActionValueChangeColorType.FILL_AND_STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessFillAndStroke( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessText( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT_OUTLINE:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessTextOutline( this );\n\t\tcase EShapeActionValueChangeColorType.ALL:\n\t\t\treturn new EShapeActionRuntimeChangeColorBrightnessAll( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst target = EShapeActionValueChangeColorTarget.BRIGHTNESS;\n\t\tconst brightnessId = manager.add(this.brightness);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${target},${brightnessId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeColorBrightnessSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeColorBrightness {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst brightness = EShapeActionValues.toResource( 4, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeColorBrightness(\n\t\t\tserialized[ 2 ], condition, brightness\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilAlpha } from \"../../util/util-alpha\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeStroke, EShapeStrokeLike } from \"../e-shape-stroke\";\nimport { EShapeText, EShapeTextLike } from \"../e-shape-text\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nconst colorDefault = (): number | null => null;\nconst alphaDefault = (): number | null => null;\nconst blendDefault = (): number | null => null;\n\nexport class EShapeActionRuntimeChangeColorCode extends EShapeActionRuntimeConditional {\n\tprotected readonly color: EShapeActionExpression<number | null>;\n\tprotected readonly alpha: EShapeActionExpression<number | null>;\n\tprotected readonly blend: EShapeActionExpression<number | null>;\n\n\tconstructor( value: EShapeActionValueChangeColorCode, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.color = this.toExpression( value.color, colorDefault, \"null\" );\n\t\tthis.alpha = this.toExpression( value.alpha, alphaDefault, \"null\" );\n\t\tthis.blend = this.toExpression( value.blend, blendDefault, \"null\" );\n\t}\n\n\tprotected set(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\ttarget: EShapeStroke | EShapeFill | EShapeText | EShapeTextOutline,\n\t\tbase: EShapeStrokeLike | EShapeFillLike | EShapeTextLike | EShapeTextOutlineLike\n\t): void {\n\t\tconst color = this.color( shape, time );\n\t\tconst alpha = this.alpha( shape, time );\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\ttarget.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( base.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( base.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\ttarget.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( base.color, color, blend ),\n\t\t\t\t\t\tbase.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.set( undefined, color, base.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\ttarget.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbase.color,\n\t\t\t\t\tUtilAlpha.blend( base.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\ttarget.set( undefined, base.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected sets(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike\n\t): void {\n\t\tconst color = this.color( shape, time );\n\t\tconst alpha = this.alpha( shape, time );\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, alpha );\n\t\t\t\t\tstroke.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tbaseFill.alpha\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tbaseStroke.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, baseFill.alpha );\n\t\t\t\t\tstroke.set( undefined, color, baseStroke.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\tfill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\tstroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfill.set( undefined, baseFill.color, alpha );\n\t\t\t\tstroke.set( undefined, baseStroke.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n\n\tprotected setAll(\n\t\tshape: EShape, runtime: EShapeRuntime, time: number,\n\t\tfill: EShapeFill, stroke: EShapeStroke, text: EShapeText, outline: EShapeTextOutline,\n\t\tbaseFill: EShapeFillLike, baseStroke: EShapeStrokeLike, baseText: EShapeTextLike, baseOutline: EShapeTextOutlineLike\n\t): void {\n\t\tconst color = this.color( shape, time );\n\t\tconst alpha = this.alpha( shape, time );\n\t\tif( color != null ) {\n\t\t\tif( alpha != null ) {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\ttext.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseText.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseText.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t\toutline.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseOutline.color, color, blend ),\n\t\t\t\t\t\tUtilAlpha.blend( baseOutline.alpha, alpha, blend )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, alpha );\n\t\t\t\t\tstroke.set( undefined, color, alpha );\n\t\t\t\t\ttext.set( undefined, color, alpha );\n\t\t\t\t\toutline.set( undefined, color, alpha );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst blend = this.blend( shape, time );\n\t\t\t\tif( blend != null ) {\n\t\t\t\t\tfill.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseFill.color, color, blend ),\n\t\t\t\t\t\tbaseFill.alpha\n\t\t\t\t\t);\n\t\t\t\t\tstroke.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseStroke.color, color, blend ),\n\t\t\t\t\t\tbaseStroke.alpha\n\t\t\t\t\t);\n\t\t\t\t\ttext.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseText.color, color, blend ),\n\t\t\t\t\t\tbaseText.alpha\n\t\t\t\t\t);\n\t\t\t\t\toutline.set(\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\tUtilRgb.blend( baseOutline.color, color, blend ),\n\t\t\t\t\t\tbaseOutline.alpha\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tfill.set( undefined, color, baseFill.alpha );\n\t\t\t\t\tstroke.set( undefined, color, baseStroke.alpha );\n\t\t\t\t\ttext.set( undefined, color, baseText.alpha );\n\t\t\t\t\toutline.set( undefined, color, baseOutline.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t} else if( alpha != null ) {\n\t\t\tconst blend = this.blend( shape, time );\n\t\t\tif( blend != null ) {\n\t\t\t\tfill.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseFill.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\tstroke.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseStroke.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\ttext.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseFill.color,\n\t\t\t\t\tUtilAlpha.blend( baseText.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t\toutline.set(\n\t\t\t\t\tundefined,\n\t\t\t\t\tbaseStroke.color,\n\t\t\t\t\tUtilAlpha.blend( baseOutline.alpha, alpha, blend )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tfill.set( undefined, baseFill.color, alpha );\n\t\t\t\tstroke.set( undefined, baseStroke.color, alpha );\n\t\t\t\ttext.set( undefined, baseText.color, alpha );\n\t\t\t\toutline.set( undefined, baseOutline.color, alpha );\n\t\t\t}\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeAll extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.setAll(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tshape.text,\n\t\t\t\tshape.text.outline,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseText( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseTextOutline( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeFill extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.fill, EShapeActionBases.toBaseFill( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeFillAndStroke extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_FILL_AND_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.sets(\n\t\t\t\tshape, runtime, time,\n\t\t\t\tshape.fill,\n\t\t\t\tshape.stroke,\n\t\t\t\tEShapeActionBases.toBaseFill( shape, runtime ),\n\t\t\t\tEShapeActionBases.toBaseStroke( shape, runtime )\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeStroke extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_STROKE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.stroke, EShapeActionBases.toBaseStroke( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeText extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text, EShapeActionBases.toBaseText( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionBases } from \"./e-shape-action-bases\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionValueChangeColorCode } from \"./e-shape-action-value-change-color-code\";\n\nexport class EShapeActionRuntimeChangeColorCodeTextOutline extends EShapeActionRuntimeChangeColorCode {\n\tconstructor( value: EShapeActionValueChangeColorCode ) {\n\t\tsuper( value, EShapeRuntimeReset.COLOR_TEXT_OUTLINE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tthis.set( shape, runtime, time, shape.text.outline, EShapeActionBases.toBaseTextOutline( shape, runtime ) );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeColorCode } from \"./e-shape-action-runtime-change-color-code\";\nimport { EShapeActionRuntimeChangeColorCodeAll } from \"./e-shape-action-runtime-change-color-code-all\";\nimport { EShapeActionRuntimeChangeColorCodeFill } from \"./e-shape-action-runtime-change-color-code-fill\";\nimport {\n\tEShapeActionRuntimeChangeColorCodeFillAndStroke\n} from \"./e-shape-action-runtime-change-color-code-fill-and-stroke\";\nimport { EShapeActionRuntimeChangeColorCodeStroke } from \"./e-shape-action-runtime-change-color-code-stroke\";\nimport { EShapeActionRuntimeChangeColorCodeText } from \"./e-shape-action-runtime-change-color-code-text\";\nimport { EShapeActionRuntimeChangeColorCodeTextOutline } from \"./e-shape-action-runtime-change-color-code-text-outline\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport {\n\tEShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType\n} from \"./e-shape-action-value-change-color-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueChangeColorCodeSerialized = [\n\tEShapeActionValueType.CHANGE_COLOR, number, EShapeActionValueChangeColorType,\n\tEShapeActionValueChangeColorTarget.CODE, number, number, number\n];\n\nexport class EShapeActionValueChangeColorCode extends EShapeActionValueSubtyped<EShapeActionValueChangeColorType> {\n\treadonly color: string;\n\treadonly alpha: string;\n\treadonly blend: string;\n\n\tconstructor(\n\t\tsubtype: EShapeActionValueChangeColorType, condition: string,\n\t\tcolor: string, alpha: string, blend: string\n\t) {\n\t\tsuper( EShapeActionValueType.CHANGE_COLOR, condition, subtype );\n\t\tthis.color = color;\n\t\tthis.alpha = alpha;\n\t\tthis.blend = blend;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeColorCode) &&\n\t\t\tthis.color === value.color &&\n\t\t\tthis.alpha === value.alpha &&\n\t\t\tthis.blend === value.blend\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeChangeColorCode {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueChangeColorType.FILL:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeFill( this );\n\t\tcase EShapeActionValueChangeColorType.STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeStroke( this );\n\t\tcase EShapeActionValueChangeColorType.FILL_AND_STROKE:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeFillAndStroke( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeText( this );\n\t\tcase EShapeActionValueChangeColorType.TEXT_OUTLINE:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeTextOutline( this );\n\t\tcase EShapeActionValueChangeColorType.ALL:\n\t\t\treturn new EShapeActionRuntimeChangeColorCodeAll( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst target = EShapeActionValueChangeColorTarget.CODE;\n\t\tconst colorId = manager.add(this.color);\n\t\tconst alphaId = manager.add(this.alpha);\n\t\tconst blendId = manager.add(this.blend);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${target},${colorId},${alphaId},${blendId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeColorCodeSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeColorCode {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst color = EShapeActionValues.toResource( 4, serialized, manager.resources );\n\t\tconst alpha = EShapeActionValues.toResource( 5, serialized, manager.resources );\n\t\tconst blend = EShapeActionValues.toResource( 6, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeColorCode(\n\t\t\tserialized[ 2 ], condition, color, alpha, blend\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeCursor } from \"./e-shape-action-value-change-cursor\";\n\nconst nameDefault = (): string | null => null;\n\nexport class EShapeActionRuntimeChangeCursor extends EShapeActionRuntimeConditional {\n\tprotected name: EShapeActionExpression<string | null>;\n\n\tconstructor( value: EShapeActionValueChangeCursor ) {\n\t\tsuper( value, EShapeRuntimeReset.CURSOR );\n\t\tthis.name = this.toExpression( value.name, nameDefault, \"null\" );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst name = this.name( shape, time );\n\t\t\tif( name != null ) {\n\t\t\t\tshape.cursor = name;\n\t\t\t\truntime.written |= this.reset;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeCursor } from \"./e-shape-action-runtime-change-cursor\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBase } from \"./e-shape-action-value-base\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueChangeCursorSerialized = [\n\tEShapeActionValueType.CHANGE_CURSOR, number, number\n];\n\nexport class EShapeActionValueChangeCursor extends EShapeActionValueBase {\n\treadonly name: string;\n\n\tconstructor( condition: string, name: string ) {\n\t\tsuper( EShapeActionValueType.CHANGE_CURSOR, condition );\n\t\tthis.name = name;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeCursor) &&\n\t\t\tthis.name === value.name\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeChangeCursor {\n\t\treturn new EShapeActionRuntimeChangeCursor( this );\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst nameId = manager.add(this.name);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${nameId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeCursorSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeCursor {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst name = EShapeActionValues.toResource( 2, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeCursor( condition, name );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NumberFormatter } from \"../../util/number-formatter\";\nimport { NumberFormatters } from \"../../util/number-formatters\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeText } from \"./e-shape-action-value-change-text\";\n\nconst numberDefault = (): number => 0;\n\nexport class EShapeActionRuntimeChangeTextNumber extends EShapeActionRuntimeConditional {\n\tprotected number: EShapeActionExpression<number>;\n\tprotected formatter: NumberFormatter | null;\n\n\tconstructor( value: EShapeActionValueChangeText, format: string ) {\n\t\tsuper( value, EShapeRuntimeReset.TEXT );\n\n\t\tthis.number = this.toExpression( value.value, numberDefault, `0` );\n\n\t\tformat = format.trim();\n\t\tthis.formatter = ( 0 < format.length ? NumberFormatters.create( format ) : null );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst value = this.number( shape, time );\n\t\t\tshape.text.value = ( this.formatter != null ? this.formatter.format( value, 0 ) : String(value) );\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueChangeText } from \"./e-shape-action-value-change-text\";\n\nconst textDefault = () => \"\";\n\nexport class EShapeActionRuntimeChangeTextText extends EShapeActionRuntimeConditional {\n\tprotected text: EShapeActionExpression<string>;\n\n\tconstructor( value: EShapeActionValueChangeText ) {\n\t\tsuper( value, EShapeRuntimeReset.TEXT );\n\t\tthis.text = this.toExpression( value.value, textDefault, `\"\"` );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tshape.text.value = String(this.text( shape, time ));\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeChangeTextNumber } from \"./e-shape-action-runtime-change-text-number\";\nimport { EShapeActionRuntimeChangeTextText } from \"./e-shape-action-runtime-change-text-text\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueChangeTextType } from \"./e-shape-action-value-change-text-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueChangeTextSerialized = [\n\tEShapeActionValueType.CHANGE_TEXT, number, EShapeActionValueChangeTextType, number\n];\n\nexport class EShapeActionValueChangeText extends EShapeActionValueSubtyped<EShapeActionValueChangeTextType> {\n\treadonly value: string;\n\n\tconstructor( subtype: EShapeActionValueChangeTextType, condition: string, value: string ) {\n\t\tsuper( EShapeActionValueType.CHANGE_TEXT, condition, subtype );\n\t\tthis.value = value;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueChangeText) &&\n\t\t\tthis.value === value.value\n\t\t);\n\t}\n\n\ttoRuntime( shape: EShape ): EShapeActionRuntimeChangeTextText | EShapeActionRuntimeChangeTextNumber {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueChangeTextType.TEXT:\n\t\t\treturn new EShapeActionRuntimeChangeTextText( this );\n\t\tcase EShapeActionValueChangeTextType.NUMBER:\n\t\t\treturn new EShapeActionRuntimeChangeTextNumber( this, shape.text.value );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst valueId = manager.add(this.value);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${valueId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueChangeTextSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueChangeText {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst value = EShapeActionValues.toResource( 3, serialized, manager.resources );\n\t\treturn new EShapeActionValueChangeText( serialized[ 2 ], condition, value );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueMiscType {\n\tINPUT\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueEmitEvent } from \"./e-shape-action-value-emit-event\";\n\nconst nameDefault = (): string | null => null;\n\nexport class EShapeActionRuntimeEmitEvent extends EShapeActionRuntimeConditional {\n\tprotected name: EShapeActionExpression<string | null>;\n\n\tconstructor( value: EShapeActionValueEmitEvent ) {\n\t\tsuper( value, EShapeRuntimeReset.NONE );\n\t\tthis.name = this.toExpression( value.name, nameDefault, \"null\" );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst name = this.name( shape, time );\n\t\t\tif( name != null ) {\n\t\t\t\tthis.emit( name, shape );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeEmitEvent } from \"./e-shape-action-runtime-emit-event\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBase } from \"./e-shape-action-value-base\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueEmitEventSerialized = [\n\tEShapeActionValueType.EMIT_EVENT, number, number\n];\n\nexport class EShapeActionValueEmitEvent extends EShapeActionValueBase {\n\treadonly name: string;\n\n\tconstructor( condition: string, name: string ) {\n\t\tsuper( EShapeActionValueType.EMIT_EVENT, condition );\n\t\tthis.name = name;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueEmitEvent) &&\n\t\t\tthis.name === value.name\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeEmitEvent {\n\t\treturn new EShapeActionRuntimeEmitEvent( this );\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst nameId = manager.add(this.name);\n\t\treturn manager.add( `[${this.type},${conditionId},${nameId}]` );\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueEmitEventSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueEmitEvent {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst name = EShapeActionValues.toResource( 2, serialized, manager.resources );\n\t\treturn new EShapeActionValueEmitEvent( condition, name );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point, Rectangle, Renderer } from \"pixi.js\";\nimport { DApplicationLayerLike } from \"../../d-application-layer-like\";\nimport { DApplications } from \"../../d-applications\";\nimport { DynamicSDFFontAtlas } from \"../../util/dynamic-sdf-font-atlas\";\nimport { UtilKeyboardEvent } from \"../../util/util-keyboard-event\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeTextWeight } from \"../e-shape-text\";\n\ntype OnChange = ( shape: EShape, value: string ) => void;\ntype OnInput = ( shape: EShape, value: string ) => void;\n\nexport class EShapeActionRuntimeMiscInputData {\n\tprotected input: HTMLInputElement | null;\n\tprotected shape: EShape | null;\n\tprotected value: string;\n\tprotected onChange?: OnChange;\n\tprotected onInput?: OnInput;\n\n\tprotected point: Point;\n\tprotected rect: Rectangle;\n\n\tprotected _onInputKeyDownBound!: ( e: KeyboardEvent ) => void;\n\tprotected _onInputBlurBound!: ( e: FocusEvent ) => void;\n\tprotected _updateInputBound!: () => void;\n\tprotected _onInputChangeBound!: ( e: Event ) => void;\n\tprotected _onInputInputBound!: ( e: Event ) => void;\n\tprotected _updateInputBoundRenderer!: Renderer | null;\n\n\tconstructor() {\n\t\tthis.input = null;\n\t\tthis.shape = null;\n\t\tthis.value = \"\";\n\n\t\tthis.point = new Point();\n\t\tthis.rect = new Rectangle();\n\n\t\tthis._onInputKeyDownBound = ( e: KeyboardEvent ) => {\n\t\t\tthis.onInputKeyDown( e );\n\t\t};\n\n\t\tthis._onInputBlurBound = ( e: FocusEvent ) => {\n\t\t\tthis.onInputBlur( e );\n\t\t};\n\n\t\tthis._updateInputBound = () => {\n\t\t\tthis.updateInput();\n\t\t};\n\n\t\tthis._onInputChangeBound = () => {\n\t\t\tthis.onInputChange();\n\t\t};\n\n\t\tthis._onInputInputBound = ( e ) => {\n\t\t\tthis.onInputInput( e );\n\t\t};\n\n\t\tthis._updateInputBoundRenderer = null;\n\t}\n\n\tprotected getInput( layer: DApplicationLayerLike ): HTMLInputElement | null {\n\t\tif( this.input == null ) {\n\t\t\tlayer.application.getRootElement().appendChild(\n\t\t\t\tthis.input = this.createInput()\n\t\t\t);\n\t\t}\n\t\treturn this.input;\n\t}\n\n\tprotected createInput(): HTMLInputElement {\n\t\tconst result = document.createElement( \"input\" );\n\t\tresult.setAttribute( \"spellcheck\", \"false\" );\n\t\treturn result;\n\t}\n\n\tprotected getInputType(): string {\n\t\treturn \"text\";\n\t}\n\n\tprotected initInput( shape: EShape, input: HTMLInputElement, value: string ): void {\n\t\tinput.type = this.getInputType();\n\t\tinput.value = value;\n\t\tinput.addEventListener( \"keydown\", this._onInputKeyDownBound );\n\t\tinput.addEventListener( \"blur\", this._onInputBlurBound );\n\t\tinput.addEventListener( \"change\", this._onInputChangeBound );\n\t\tinput.addEventListener( \"input\", this._onInputInputBound );\n\n\t\t// Style\n\t\tinput.setAttribute( \"style\", this.getInputStyle( shape ) );\n\n\t\t// ReadOnly\n\t\tif( shape.readonly ) {\n\t\t\tinput.setAttribute( \"readonly\", \"readonly\" );\n\t\t} else {\n\t\t\tinput.removeAttribute( \"readonly\" );\n\t\t}\n\n\t\t// Disabled\n\t\tif( shape.disabled ) {\n\t\t\tinput.setAttribute( \"disabled\", \"disabled\" );\n\t\t} else {\n\t\t\tinput.removeAttribute( \"disabled\" );\n\t\t}\n\t}\n\n\tprotected getInputStyleBackground(): string {\n\t\treturn `background-color: transparent;`;\n\t}\n\n\tprotected getInputStyleBorder(): string {\n\t\treturn `border: none; box-sizing: border-box;`;\n\t}\n\n\tprotected getInputStylePadding( shape: EShape, scale: number ): string {\n\t\tconst padding = shape.text.padding;\n\t\tconst paddingVertical = 0;\n\t\tconst paddingHorizontal = padding.horizontal * scale;\n\t\treturn `padding: ${paddingVertical}px ${paddingHorizontal}px ${paddingVertical}px ${paddingHorizontal}px;`;\n\t}\n\n\tprotected getInputStyleOutline(): string {\n\t\treturn `outline: none;`;\n\t}\n\n\tprotected getInputStylePosition( rect: Rectangle, matrix: Matrix ): string {\n\t\treturn `position: absolute;` +\n\t\t\t`left: ${rect.x}px;` +\n\t\t\t`top: ${rect.y}px;` +\n\t\t\t`width: ${rect.width}px;` +\n\t\t\t`height: ${rect.height}px;` +\n\t\t\t`line-height: ${rect.height}px;` +\n\t\t\t`transform: matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.tx},${matrix.ty});`;\n\t}\n\n\tprotected getInputStyleText( shape: EShape, rect: Rectangle, scale: number ): string {\n\t\tconst text = shape.text;\n\t\treturn `font-family: ${DynamicSDFFontAtlas.toFontFamily( text.family )};` +\n\t\t\t`font-size: ${text.size * scale}px;` +\n\t\t\t`font-weight: ${text.weight === EShapeTextWeight.NORMAL ? \"normal\" : \"bold\" };` +\n\t\t\t`color: #${text.color.toString( 16 )};`;\n\t}\n\n\tprotected getInputStyleMargin( shape: EShape, rect: Rectangle, scale: number ): string {\n\t\treturn `margin: 0;`;\n\t}\n\n\tprotected getInputStyle( shape: EShape ): string {\n\t\tconst pivot = shape.transform.pivot;\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst rect = this.rect;\n\t\trect.x = -0.5 * sizeX + pivot.x;\n\t\trect.y = -0.5 * sizeY + pivot.y;\n\t\trect.width = sizeX;\n\t\trect.height = sizeY;\n\n\t\tshape.updateTransform();\n\t\tconst scale = 1.0;\n\t\tconst worldTransform = shape.transform.worldTransform;\n\n\t\treturn this.getInputStylePosition( rect, worldTransform ) +\n\t\t\tthis.getInputStyleMargin( shape, rect, scale ) +\n\t\t\tthis.getInputStyleText( shape, rect, scale ) +\n\t\t\tthis.getInputStyleBackground() +\n\t\t\tthis.getInputStyleBorder() +\n\t\t\tthis.getInputStylePadding( shape, scale ) +\n\t\t\tthis.getInputStyleOutline();\n\t}\n\n\tprotected onInputKeyDown( e: KeyboardEvent ): void {\n\t\tif( UtilKeyboardEvent.isFocusKey( e ) ) {\n\t\t\tconst shape = this.shape;\n\t\t\tif( shape != null ) {\n\t\t\t\tthis.onInputChange();\n\t\t\t\tthis.hide();\n\n\t\t\t\tconst layer = DApplications.getLayer( shape );\n\t\t\t\tif( layer ) {\n\t\t\t\t\tconst focusController = layer.getFocusController();\n\t\t\t\t\tconst direction = UtilKeyboardEvent.getFocusDirection( e );\n\t\t\t\t\tconst focusable = focusController.findFocusable( shape, false, false, direction );\n\t\t\t\t\tif( focusable != null ) {\n\t\t\t\t\t\tlayer.view.focus();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tfocusController.setFocused( focusable, true, true );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if( UtilKeyboardEvent.isOkKey( e ) ) {\n\t\t\tthis.onInputChange();\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\tprotected onInputBlur( e: FocusEvent ): void {\n\t\tthis.onInputChange();\n\t\tthis.hide();\n\t}\n\n\tprotected onInputInput( e: Event ): void {\n\t\tif( e.target instanceof HTMLInputElement ) {\n\t\t\tconst shape = this.shape;\n\t\t\tconst onInput = this.onInput;\n\t\t\tif( shape != null && onInput != null ) {\n\t\t\t\tonInput( shape, e.target.value );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateInput(): void {\n\t\tconst shape = this.shape;\n\t\tif( shape != null ) {\n\t\t\tif( shape.visible ) {\n\t\t\t\tconst input = this.input;\n\t\t\t\tif( input != null ) {\n\t\t\t\t\tinput.setAttribute( \"style\", this.getInputStyle( shape ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tisShown( shape: EShape ): boolean {\n\t\treturn ( this.shape === shape );\n\t}\n\n\tshow(\n\t\tnewShape: EShape, value: string,\n\t\tonChange?: OnChange, onInput?: OnInput\n\t): void {\n\t\tconst oldShape = this.shape;\n\t\tif( oldShape != null && oldShape !== newShape ) {\n\t\t\tthis.hide();\n\t\t}\n\t\tif( this.shape == null ) {\n\t\t\tthis.shape = newShape;\n\t\t\tthis.value = value;\n\t\t\tthis.onChange = onChange;\n\t\t\tthis.onInput = onInput;\n\n\t\t\tconst text = newShape.text;\n\t\t\tif( text != null ) {\n\t\t\t\ttext.enable = false;\n\t\t\t}\n\n\t\t\tconst layer = DApplications.getLayer( newShape );\n\t\t\tif( layer ) {\n\t\t\t\tconst input = this.getInput( layer );\n\t\t\t\tif( input ) {\n\t\t\t\t\tthis.initInput( newShape, input, value );\n\n\t\t\t\t\tconst updateInputBound = this._updateInputBound;\n\t\t\t\t\tconst renderer = this._updateInputBoundRenderer;\n\t\t\t\t\tif( renderer != null ) {\n\t\t\t\t\t\trenderer.off( \"postrender\", updateInputBound );\n\t\t\t\t\t}\n\t\t\t\t\tthis._updateInputBoundRenderer = layer.renderer;\n\t\t\t\t\tlayer.renderer.on( \"postrender\", updateInputBound );\n\n\t\t\t\t\tinput.style.display = \"\";\n\t\t\t\t\tinput.focus();\n\t\t\t\t\tinput.select();\n\t\t\t\t}\n\n\t\t\t\tlayer.update();\n\t\t\t}\n\t\t}\n\t}\n\n\thide(): void {\n\t\tconst shape = this.shape;\n\t\tif( shape != null ) {\n\t\t\tthis.shape = null;\n\t\t\tthis.value = \"\";\n\n\t\t\tconst text = shape.text;\n\t\t\tif( text != null ) {\n\t\t\t\ttext.enable = true;\n\t\t\t}\n\n\t\t\tconst input = this.input;\n\t\t\tif( input != null ) {\n\t\t\t\tinput.removeEventListener( \"keydown\", this._onInputKeyDownBound );\n\t\t\t\tinput.removeEventListener( \"blur\", this._onInputBlurBound );\n\t\t\t\tinput.removeEventListener( \"change\", this._onInputChangeBound );\n\t\t\t\tinput.removeEventListener( \"input\", this._onInputInputBound );\n\t\t\t\tinput.style.display = \"none\";\n\t\t\t}\n\n\t\t\tconst renderer = this._updateInputBoundRenderer;\n\t\t\tif( renderer != null ) {\n\t\t\t\tthis._updateInputBoundRenderer = null;\n\t\t\t\trenderer.off( \"postrender\", this._updateInputBound );\n\t\t\t}\n\n\t\t\tDApplications.update( shape );\n\t\t}\n\t}\n\n\tonInputChange(): void {\n\t\tconst shape = this.shape;\n\t\tconst input = this.input;\n\t\tconst onChange = this.onChange;\n\t\tif( shape != null && input != null && onChange != null ) {\n\t\t\tconst newValue = input.value;\n\t\t\tif( this.value !== newValue ) {\n\t\t\t\tonChange( shape, newValue );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime } from \"../e-shape-runtime\";\nimport { EShapeActionRuntime } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeMiscInputData } from \"./e-shape-action-runtime-misc-input-data\";\n\nexport class EShapeActionRuntimeMiscInput extends EShapeActionRuntime {\n\tstatic data: EShapeActionRuntimeMiscInputData | null = null;\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( ! shape.disabled ) {\n\t\t\tconst data = EShapeActionRuntimeMiscInput.getData();\n\t\t\tif( shape.focused ) {\n\t\t\t\tif( ! data.isShown( shape ) ) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tdata.show( shape, shape.text.value, ( _: EShape, value: string ): void => {\n\t\t\t\t\t\t\tshape.text.value = value;\n\t\t\t\t\t\t\tthis.emit( \"change\", shape, value );\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( data.isShown( shape ) ) {\n\t\t\t\t\tdata.onInputChange();\n\t\t\t\t\tdata.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getData(): EShapeActionRuntimeMiscInputData {\n\t\tif( EShapeActionRuntimeMiscInput.data == null ) {\n\t\t\tEShapeActionRuntimeMiscInput.data = new EShapeActionRuntimeMiscInputData();\n\t\t}\n\t\treturn EShapeActionRuntimeMiscInput.data;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntime } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeMiscInput } from \"./e-shape-action-runtime-misc-input\";\nimport { EShapeActionValueMiscType } from \"./e-shape-action-value-misc-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueMiscSerialized = [\n\tEShapeActionValueType.MISC, number, EShapeActionValueMiscType\n];\n\nexport class EShapeActionValueMisc extends EShapeActionValueSubtyped<EShapeActionValueMiscType> {\n\tconstructor( subtype: EShapeActionValueMiscType, condition: string ) {\n\t\tsuper( EShapeActionValueType.MISC, condition, subtype );\n\t}\n\n\ttoRuntime( shape: EShape ): EShapeActionRuntime {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueMiscType.INPUT:\n\t\t\treturn new EShapeActionRuntimeMiscInput();\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\treturn manager.add( `[${this.type},${conditionId},${this.subtype}]` );\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueMiscSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueMisc {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\treturn new EShapeActionValueMisc( serialized[ 2 ], condition );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueOpenType {\n\tFLOW,\n\tPAGE,\n\tPAGE_INPLACE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueOpen } from \"./e-shape-action-value-open\";\n\nconst targetDefault = (): string | null => null;\n\nexport class EShapeActionRuntimeOpen extends EShapeActionRuntimeConditional {\n\tprotected readonly target: EShapeActionExpression<string | null>;\n\n\tconstructor( value: EShapeActionValueOpen, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.target = this.toExpression( value.target, targetDefault, \"null\" );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"../../d-applications\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeOpen } from \"./e-shape-action-runtime-open\";\nimport { EShapeActionValueOpen } from \"./e-shape-action-value-open\";\n\nexport class EShapeActionRuntimeOpenFlow extends EShapeActionRuntimeOpen {\n\tconstructor( value: EShapeActionValueOpen ) {\n\t\tsuper( value, EShapeRuntimeReset.NONE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst target = this.target( shape, time );\n\t\t\tif( target != null ) {\n\t\t\t\tconst layer = DApplications.getLayer( shape );\n\t\t\t\tif( layer ) {\n\t\t\t\t\tconst application = layer.application as any;\n\t\t\t\t\tif( \"opener\" in application ) {\n\t\t\t\t\t\tapplication.opener( target );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeOpen } from \"./e-shape-action-runtime-open\";\nimport { EShapeActionValueOpen } from \"./e-shape-action-value-open\";\n\nexport class EShapeActionRuntimeOpenPage extends EShapeActionRuntimeOpen {\n\tconstructor( value: EShapeActionValueOpen ) {\n\t\tsuper( value, EShapeRuntimeReset.NONE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst target = this.target( shape, time );\n\t\t\tif( target != null ) {\n\t\t\t\twindow.open( target );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeOpen } from \"./e-shape-action-runtime-open\";\nimport { EShapeActionValueOpen } from \"./e-shape-action-value-open\";\n\nexport class EShapeActionRuntimeOpenPageInplace extends EShapeActionRuntimeOpen {\n\tconstructor( value: EShapeActionValueOpen ) {\n\t\tsuper( value, EShapeRuntimeReset.NONE );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst target = this.target( shape, time );\n\t\t\tif( target != null ) {\n\t\t\t\twindow.location.href = target;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeOpen } from \"./e-shape-action-runtime-open\";\nimport { EShapeActionRuntimeOpenFlow } from \"./e-shape-action-runtime-open-flow\";\nimport { EShapeActionRuntimeOpenPage } from \"./e-shape-action-runtime-open-page\";\nimport { EShapeActionRuntimeOpenPageInplace } from \"./e-shape-action-runtime-open-page-inplace\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueOpenType } from \"./e-shape-action-value-open-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueOpenSerialized = [\n\tEShapeActionValueType.OPEN, number, EShapeActionValueOpenType, number\n];\n\nexport class EShapeActionValueOpen extends EShapeActionValueSubtyped<EShapeActionValueOpenType> {\n\treadonly target: string;\n\n\tconstructor( subtype: EShapeActionValueOpenType, condition: string, target: string ) {\n\t\tsuper( EShapeActionValueType.OPEN, condition, subtype );\n\t\tthis.target = target;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueOpen) &&\n\t\t\tthis.target === value.target\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeOpen {\n\t\tswitch( this.subtype ) {\n\t\tcase EShapeActionValueOpenType.FLOW:\n\t\t\treturn new EShapeActionRuntimeOpenFlow( this );\n\t\tcase EShapeActionValueOpenType.PAGE:\n\t\t\treturn new EShapeActionRuntimeOpenPage( this );\n\t\tcase EShapeActionValueOpenType.PAGE_INPLACE:\n\t\t\treturn new EShapeActionRuntimeOpenPageInplace( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst targetId = manager.add(this.target);\n\t\treturn manager.add( `[${this.type},${conditionId},${this.subtype},${targetId}]` );\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueOpenSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueOpen {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst target = EShapeActionValues.toResource( 3, serialized, manager.resources );\n\t\treturn new EShapeActionValueOpen( serialized[ 2 ], condition, target );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueShowHideType {\n\tSHOW,\n\tHIDE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueShowHide } from \"./e-shape-action-value-show-hide\";\nimport { EShapeActionValueShowHideType } from \"./e-shape-action-value-show-hide-type\";\n\nexport class EShapeActionRuntimeShowHide extends EShapeActionRuntimeConditional {\n\tvisibility: boolean;\n\n\tconstructor( value: EShapeActionValueShowHide ) {\n\t\tsuper( value, EShapeRuntimeReset.VISIBILITY );\n\t\tthis.visibility = ( value.subtype === EShapeActionValueShowHideType.SHOW );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tshape.visible = this.visibility;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueTransformMoveType {\n\tRELATIVE_X,\n\tRELATIVE_Y,\n\tABSOLUTE_X,\n\tABSOLUTE_Y,\n\tFORWARD_OR_BACKWARD,\n\tLEFT_OR_RIGHT\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueTransformType {\n\tRESIZE,\n\tMOVE,\n\tROTATE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeShowHide } from \"./e-shape-action-runtime-show-hide\";\nimport { EShapeActionValueShowHideType } from \"./e-shape-action-value-show-hide-type\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueShowHideSerialized = [\n\tEShapeActionValueType.SHOW_HIDE, number, EShapeActionValueShowHideType\n];\n\nexport class EShapeActionValueShowHide extends EShapeActionValueSubtyped<EShapeActionValueShowHideType> {\n\tconstructor( subtype: EShapeActionValueShowHideType, condition: string ) {\n\t\tsuper( EShapeActionValueType.SHOW_HIDE, condition, subtype );\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeShowHide {\n\t\treturn new EShapeActionRuntimeShowHide( this );\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\treturn manager.add( `[${this.type},${conditionId},${this.subtype}]` );\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueShowHideSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueShowHide {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\treturn new EShapeActionValueShowHide( serialized[ 2 ], condition );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nconst amountDefault = (): number => 0;\n\nexport class EShapeActionRuntimeTransformMove extends EShapeActionRuntimeConditional {\n\tprotected readonly amount: EShapeActionExpression<number>;\n\n\tconstructor( value: EShapeActionValueTransformMove, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.amount = this.toExpression( value.amount, amountDefault, \"0\" );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveAbsoluteX extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION_X );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tshape.transform.position.x = amount;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveAbsoluteY extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION_Y );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tshape.transform.position.y = amount;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveForwardOrBackward extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst transform = shape.transform;\n\t\t\tconst position = transform.position;\n\t\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\t\tshape.updateTransform();\n\t\t\tconst localTransform = shape.transform.localTransform;\n\t\t\tposition.set( oldPositionX - localTransform.c * amount, oldPositionY - localTransform.d * amount );\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveLeftOrRight extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst transform = shape.transform;\n\t\t\tconst position = transform.position;\n\t\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\t\tshape.updateTransform();\n\t\t\tconst localTransform = shape.transform.localTransform;\n\t\t\tposition.set( oldPositionX + localTransform.a * amount, oldPositionY + localTransform.b * amount );\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveRelativeX extends EShapeActionRuntimeTransformMove {\n\tconstructor( value: EShapeActionValueTransformMove ) {\n\t\tsuper( value, EShapeRuntimeReset.POSITION_X );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\t\tconst position = shape.transform.position;\n\t\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\t\tposition.x = oldPositionX + amount;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionValueTransformMove } from \"./e-shape-action-value-transform-move\";\n\nexport class EShapeActionRuntimeTransformMoveRelativeY extends EShapeActionRuntimeTransformMove {\n\tconstructor( action: EShapeActionValueTransformMove ) {\n\t\tsuper( action, EShapeRuntimeReset.POSITION_Y );\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\t\tconst position = shape.transform.position;\n\t\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\t\tposition.y = oldPositionY + amount;\n\t\t\truntime.written |= this.reset;\n\t\t}\n\t}\n}\n","import { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueSubtyped } from \"./e-shape-action-value-subtyped\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\n\nexport abstract class EShapeActionValueOpetyped<\n\tSUBTYPE extends number,\n\tOPETYPE extends number\n> extends EShapeActionValueSubtyped<SUBTYPE> {\n\treadonly opetype: OPETYPE;\n\n\tconstructor( type: EShapeActionValueType, condition: string, subtype: SUBTYPE, opetype: OPETYPE ) {\n\t\tsuper( type, condition, subtype );\n\t\tthis.opetype = opetype;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueOpetyped) &&\n\t\t\tthis.opetype === value.opetype\n\t\t);\n\t}\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeTransformMove } from \"./e-shape-action-runtime-transform-move\";\nimport { EShapeActionRuntimeTransformMoveAbsoluteX } from \"./e-shape-action-runtime-transform-move-absolute-x\";\nimport { EShapeActionRuntimeTransformMoveAbsoluteY } from \"./e-shape-action-runtime-transform-move-absolute-y\";\nimport {\n\tEShapeActionRuntimeTransformMoveForwardOrBackward\n} from \"./e-shape-action-runtime-transform-move-forward-or-backward\";\nimport { EShapeActionRuntimeTransformMoveLeftOrRight } from \"./e-shape-action-runtime-transform-move-left-or-right\";\nimport { EShapeActionRuntimeTransformMoveRelativeX } from \"./e-shape-action-runtime-transform-move-relative-x\";\nimport { EShapeActionRuntimeTransformMoveRelativeY } from \"./e-shape-action-runtime-transform-move-relative-y\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueOpetyped } from \"./e-shape-action-value-opetyped\";\nimport { EShapeActionValueTransformMoveType } from \"./e-shape-action-value-transform-move-type\";\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueTransformMoveSerialized = [\n\tEShapeActionValueType.TRANSFORM, number, EShapeActionValueTransformType.MOVE,\n\tEShapeActionValueTransformMoveType, number\n];\n\nexport class EShapeActionValueTransformMove\n\textends EShapeActionValueOpetyped<EShapeActionValueTransformType, EShapeActionValueTransformMoveType> {\n\treadonly amount: string;\n\n\tconstructor( opetype: EShapeActionValueTransformMoveType, condition: string, amount: string ) {\n\t\tsuper( EShapeActionValueType.TRANSFORM, condition, EShapeActionValueTransformType.MOVE, opetype );\n\t\tthis.amount = amount;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueTransformMove) &&\n\t\t\tthis.amount === value.amount\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeTransformMove {\n\t\tswitch( this.opetype ) {\n\t\tcase EShapeActionValueTransformMoveType.ABSOLUTE_X:\n\t\t\treturn new EShapeActionRuntimeTransformMoveAbsoluteX( this );\n\t\tcase EShapeActionValueTransformMoveType.ABSOLUTE_Y:\n\t\t\treturn new EShapeActionRuntimeTransformMoveAbsoluteY( this );\n\t\tcase EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD:\n\t\t\treturn new EShapeActionRuntimeTransformMoveForwardOrBackward( this );\n\t\tcase EShapeActionValueTransformMoveType.LEFT_OR_RIGHT:\n\t\t\treturn new EShapeActionRuntimeTransformMoveLeftOrRight( this );\n\t\tcase EShapeActionValueTransformMoveType.RELATIVE_X:\n\t\t\treturn new EShapeActionRuntimeTransformMoveRelativeX( this );\n\t\tcase EShapeActionValueTransformMoveType.RELATIVE_Y:\n\t\t\treturn new EShapeActionRuntimeTransformMoveRelativeY( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add(this.condition);\n\t\tconst amountId = manager.add(this.amount);\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.opetype},${amountId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueTransformMoveSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueTransformMove {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst amount = EShapeActionValues.toResource( 4, serialized, manager.resources );\n\t\treturn new EShapeActionValueTransformMove( serialized[ 3 ], condition, amount );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueTransformResizeType {\n\tRELATIVE_SIZE,\n\tRELATIVE_HEIGHT,\n\tRELATIVE_WIDTH,\n\tABSOLUTE_SIZE,\n\tABSOLUTE_HEIGHT,\n\tABSOLUTE_WIDTH\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { EShape } from \"./e-shape\";\n\nexport class EShapeSizes {\n\tstatic toRounded( value: number ): number {\n\t\treturn Math.round( value * 100 ) / 100;\n\t}\n\n\tstatic toNormalized( size: number ): number {\n\t\tconst THRESHOLD = 0.001;\n\t\tif( Math.abs( size ) < THRESHOLD ) {\n\t\t\treturn ( size < 0 ? -THRESHOLD : +THRESHOLD );\n\t\t}\n\t\treturn EShapeSizes.toRounded( size );\n\t}\n\n\tstatic resize( shape: EShape, from: Point, to: Point, centerMode: boolean, isPerfect: boolean ): void {\n\t\tshape.disallowUploadedUpdate();\n\t\tconst position = shape.transform.position;\n\t\tif( centerMode ) {\n\t\t\tconst dx = Math.abs(to.x - from.x);\n\t\t\tconst dy = Math.abs(to.y - from.y);\n\t\t\tif (isPerfect) {\n\t\t\t\tconst hsize = Math.max(dx, dy);\n\t\t\t\tconst size = hsize + hsize;\n\t\t\t\tshape.size.set(\n\t\t\t\t\tEShapeSizes.toNormalized( size ),\n\t\t\t\t\tEShapeSizes.toNormalized( size )\n\t\t\t\t);\n\t\t\t\tposition.set(\n\t\t\t\t\tEShapeSizes.toRounded( from.x ),\n\t\t\t\t\tEShapeSizes.toRounded( from.y )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tshape.size.set(\n\t\t\t\t\tEShapeSizes.toNormalized( dx + dx ),\n\t\t\t\t\tEShapeSizes.toNormalized( dy + dy )\n\t\t\t\t);\n\t\t\t\tposition.set(\n\t\t\t\t\tEShapeSizes.toRounded( from.x ),\n\t\t\t\t\tEShapeSizes.toRounded( from.y )\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tif( isPerfect ) {\n\t\t\t\tconst dx = to.x - from.x;\n\t\t\t\tconst dy = to.y - from.y;\n\t\t\t\tconst size = Math.max(Math.abs(dx), Math.abs(dy));\n\t\t\t\tconst x2 = from.x + (dx < 0 ? -size : +size);\n\t\t\t\tconst y2 = from.y + (dy < 0 ? -size : +size);\n\t\t\t\tconst hsize = size * 0.5;\n\t\t\t\tconst x = Math.min(from.x, x2) + hsize;\n\t\t\t\tconst y = Math.min(from.y, y2) + hsize;\n\t\t\t\tshape.size.set(\n\t\t\t\t\tEShapeSizes.toNormalized( size ),\n\t\t\t\t\tEShapeSizes.toNormalized( size )\n\t\t\t\t);\n\t\t\t\tposition.set(\n\t\t\t\t\tEShapeSizes.toRounded( x ),\n\t\t\t\t\tEShapeSizes.toRounded( y )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst x0 = Math.min(from.x, to.x);\n\t\t\t\tconst y0 = Math.min(from.y, to.y);\n\t\t\t\tconst x1 = Math.max(from.x, to.x);\n\t\t\t\tconst y1 = Math.max(from.y, to.y);\n\t\t\t\tconst width = x1 - x0;\n\t\t\t\tconst height = y1 - y0;\n\t\t\t\tconst px = width * 0.5;\n\t\t\t\tconst py = height * 0.5;\n\t\t\t\tshape.size.set(\n\t\t\t\t\tEShapeSizes.toNormalized( width ),\n\t\t\t\t\tEShapeSizes.toNormalized( height )\n\t\t\t\t);\n\t\t\t\tposition.set(\n\t\t\t\t\tEShapeSizes.toRounded( x0 + px ),\n\t\t\t\t\tEShapeSizes.toRounded( y0 + py )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tshape.allowUploadedUpdate();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\nimport { EShapeActionValueTransformResizeType } from \"./e-shape-action-value-transform-resize-type\";\n\nconst sizeRelativeDefault = (): number => 1;\nconst sizeAbsoluteDefault = (): number => 100;\n\nexport class EShapeActionRuntimeTransformResize extends EShapeActionRuntimeConditional {\n\tprotected readonly size: EShapeActionExpression<number>;\n\n\tconstructor( value: EShapeActionValueTransformResize, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tswitch( value.opetype ) {\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_SIZE:\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_SIZE:\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_HEIGHT:\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT:\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_WIDTH:\n\t\t\tthis.size = this.toExpression( value.amount, sizeRelativeDefault, \"1\" );\n\t\t\tbreak;\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH:\n\t\t\tthis.size = this.toExpression( value.amount, sizeAbsoluteDefault, \"100\" );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.size = sizeRelativeDefault;\n\t\t}\n\t}\n\n\tprotected adjustPosition(\n\t\tshape: EShape, runtime: EShapeRuntime,\n\t\tdsx: number, dsy: number,\n\t\toriginX: number, originY: number\n\t): void {\n\t\tconst dx = ( -0.5 + originX ) * dsx;\n\t\tconst dy = ( -0.5 + originY ) * dsy;\n\t\tshape.updateTransform();\n\t\tconst transform = shape.transform;\n\t\tconst position = transform.position;\n\t\tconst localTransform = transform.localTransform;\n\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\truntime.written |= EShapeRuntimeReset.POSITION;\n\t\tposition.set(\n\t\t\toldPositionX + dx * localTransform.a + dy * localTransform.c,\n\t\t\toldPositionY + dx * localTransform.b + dy * localTransform.d\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeActionValueTransformRotateType {\n\tRELATIVE,\n\tABSOLUTE\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeHeightAbsolute extends EShapeActionRuntimeTransformResize {\n\tprotected origin: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.HEIGHT );\n\t\tthis.origin = value.originY;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeAbsolute = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\t\tconst oldSizeY = (writtenHeight ? size.y : runtime.size.y);\n\t\t\tsize.y = EShapeSizes.toNormalized( sizeAbsolute );\n\t\t\truntime.written |= EShapeRuntimeReset.HEIGHT;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\t0, oldSizeY - size.y,\n\t\t\t\t0.5, this.origin\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeHeightRelative extends EShapeActionRuntimeTransformResize {\n\tprotected origin: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.HEIGHT );\n\t\tthis.origin = value.originY;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeRelative = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\t\tconst oldSizeY = (writtenHeight ? size.y : runtime.size.y);\n\t\t\tsize.y = EShapeSizes.toNormalized( oldSizeY * sizeRelative );\n\t\t\truntime.written |= EShapeRuntimeReset.HEIGHT;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\t0, oldSizeY - size.y,\n\t\t\t\t0.5, this.origin\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeSizeAbsolute extends EShapeActionRuntimeTransformResize {\n\tprotected originX: number;\n\tprotected originY: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.SIZE );\n\t\tthis.originX = value.originX;\n\t\tthis.originY = value.originY;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeAbsolute = EShapeSizes.toNormalized( this.size( shape, time ) );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\t\tconst oldSizeX = (writtenWidth ? size.x : runtime.size.x);\n\t\t\tconst oldSizeY = (writtenHeight ? size.y : runtime.size.y);\n\t\t\tsize.set( sizeAbsolute, sizeAbsolute );\n\t\t\truntime.written |= EShapeRuntimeReset.SIZE;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldSizeX - size.x, oldSizeY - size.y,\n\t\t\t\tthis.originX, this.originY\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeSizeRelative extends EShapeActionRuntimeTransformResize {\n\tprotected originX: number;\n\tprotected originY: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.SIZE );\n\t\tthis.originX = value.originX;\n\t\tthis.originY = value.originY;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeRelative = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\t\tconst oldSizeX = (writtenWidth ? size.x : runtime.size.x);\n\t\t\tconst oldSizeY = (writtenHeight ? size.y : runtime.size.y);\n\t\t\tsize.set(\n\t\t\t\tEShapeSizes.toNormalized( oldSizeX * sizeRelative ),\n\t\t\t\tEShapeSizes.toNormalized( oldSizeY * sizeRelative )\n\t\t\t);\n\t\t\truntime.written |= EShapeRuntimeReset.SIZE;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldSizeX - size.x, oldSizeY - size.y,\n\t\t\t\tthis.originX, this.originY\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeWidthAbsolute extends EShapeActionRuntimeTransformResize {\n\tprotected origin: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.WIDTH );\n\t\tthis.origin = value.originX;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeAbsolute = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\t\tconst oldSizeX = (writtenWidth ? size.x : runtime.size.x);\n\t\t\tsize.x = EShapeSizes.toNormalized( sizeAbsolute );\n\t\t\truntime.written |= EShapeRuntimeReset.WIDTH;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldSizeX - size.x, 0,\n\t\t\t\tthis.origin, 0.5\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeSizes } from \"../e-shape-sizes\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport { EShapeActionValueTransformResize } from \"./e-shape-action-value-transform-resize\";\n\nexport class EShapeActionRuntimeTransformResizeWidthRelative extends EShapeActionRuntimeTransformResize {\n\tprotected origin: number;\n\n\tconstructor( value: EShapeActionValueTransformResize ) {\n\t\tsuper( value, EShapeRuntimeReset.WIDTH );\n\t\tthis.origin = value.originX;\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst sizeRelative = this.size( shape, time );\n\t\t\tconst size = shape.size;\n\t\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\t\tconst oldSizeX = ( writtenWidth ? size.x : runtime.size.x );\n\t\t\tsize.x = EShapeSizes.toNormalized( oldSizeX * sizeRelative );\n\t\t\truntime.written |= EShapeRuntimeReset.WIDTH;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldSizeX - size.x, 0,\n\t\t\t\tthis.origin, 0.5\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeTransformResize } from \"./e-shape-action-runtime-transform-resize\";\nimport {\n\tEShapeActionRuntimeTransformResizeHeightAbsolute\n} from \"./e-shape-action-runtime-transform-resize-height-absolute\";\nimport {\n\tEShapeActionRuntimeTransformResizeHeightRelative\n} from \"./e-shape-action-runtime-transform-resize-height-relative\";\nimport {\n\tEShapeActionRuntimeTransformResizeSizeAbsolute\n} from \"./e-shape-action-runtime-transform-resize-size-absolute\";\nimport {\n\tEShapeActionRuntimeTransformResizeSizeRelative\n} from \"./e-shape-action-runtime-transform-resize-size-relative\";\nimport {\n\tEShapeActionRuntimeTransformResizeWidthAbsolute\n} from \"./e-shape-action-runtime-transform-resize-width-absolute\";\nimport {\n\tEShapeActionRuntimeTransformResizeWidthRelative\n} from \"./e-shape-action-runtime-transform-resize-width-relative\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueOpetyped } from \"./e-shape-action-value-opetyped\";\nimport { EShapeActionValueTransformResizeType } from \"./e-shape-action-value-transform-resize-type\";\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueTransformResizeSerialized = [\n\tEShapeActionValueType.TRANSFORM, number, EShapeActionValueTransformType.RESIZE,\n\tEShapeActionValueTransformResizeType,\n\tnumber, number, number\n];\n\nexport class EShapeActionValueTransformResize\n\textends EShapeActionValueOpetyped<EShapeActionValueTransformType, EShapeActionValueTransformResizeType> {\n\treadonly originX: number;\n\treadonly originY: number;\n\treadonly amount: string;\n\n\tconstructor(\n\t\topetype: EShapeActionValueTransformResizeType,\n\t\tcondition: string,\n\t\toriginX: number, originY: number,\n\t\tamount: string\n\t) {\n\t\tsuper( EShapeActionValueType.TRANSFORM, condition, EShapeActionValueTransformType.RESIZE, opetype );\n\t\tthis.originX = originX;\n\t\tthis.originY = originY;\n\t\tthis.amount = amount;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueTransformResize) &&\n\t\t\tthis.originX === value.originX &&\n\t\t\tthis.originY === value.originY &&\n\t\t\tthis.amount === value.amount\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeTransformResize {\n\t\tswitch( this.opetype ) {\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT:\n\t\t\treturn new EShapeActionRuntimeTransformResizeHeightAbsolute( this );\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH:\n\t\t\treturn new EShapeActionRuntimeTransformResizeWidthAbsolute( this );\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_SIZE:\n\t\t\treturn new EShapeActionRuntimeTransformResizeSizeAbsolute( this );\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_HEIGHT:\n\t\t\treturn new EShapeActionRuntimeTransformResizeHeightRelative( this );\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_WIDTH:\n\t\t\treturn new EShapeActionRuntimeTransformResizeWidthRelative( this );\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_SIZE:\n\t\t\treturn new EShapeActionRuntimeTransformResizeSizeRelative( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add( this.condition );\n\t\tconst amountId = manager.add( this.amount );\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.opetype},${this.originX},${this.originY},${amountId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueTransformResizeSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueTransformResize {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst amount = EShapeActionValues.toResource( 6, serialized, manager.resources );\n\t\treturn new EShapeActionValueTransformResize(\n\t\t\tserialized[ 3 ], condition,\n\t\t\tserialized[ 4 ], serialized[ 5 ], amount\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionExpression } from \"./e-shape-action-runtime\";\nimport { EShapeActionRuntimeConditional } from \"./e-shape-action-runtime-conditional\";\nimport { EShapeActionValueTransformRotate } from \"./e-shape-action-value-transform-rotate\";\n\nconst amountDefault = (): number => 0;\n\nexport class EShapeActionRuntimeTransformRotate extends EShapeActionRuntimeConditional {\n\tprotected originY: number;\n\tprotected originX: number;\n\tprotected readonly amount: EShapeActionExpression<number>;\n\n\tconstructor( value: EShapeActionValueTransformRotate, reset: EShapeRuntimeReset ) {\n\t\tsuper( value, reset );\n\t\tthis.originX = value.originX;\n\t\tthis.originY = value.originY;\n\t\tthis.amount = this.toExpression( `(${value.amount}) * (Math.PI / 180)`, amountDefault, \"0\" );\n\t}\n\n\tprotected adjustPosition(\n\t\tshape: EShape, runtime: EShapeRuntime,\n\t\toldRotation: number, newRotation: number,\n\t\toriginX: number, originY: number\n\t): void {\n\t\tconst writtenWidth = ( (runtime.written & EShapeRuntimeReset.WIDTH) !== 0 );\n\t\tconst writtenHeight = ( (runtime.written & EShapeRuntimeReset.HEIGHT) !== 0 );\n\t\tconst dx = (-0.5 + originX) * (writtenWidth ? shape.size.x : runtime.size.x);\n\t\tconst dy = (-0.5 + originY) * (writtenHeight ? shape.size.y : runtime.size.y);\n\t\tconst s = Math.sin( oldRotation ) - Math.sin( newRotation );\n\t\tconst c = Math.cos( oldRotation ) - Math.cos( newRotation );\n\t\tconst position = shape.transform.position;\n\t\tconst writtenPositionX = ( (runtime.written & EShapeRuntimeReset.POSITION_X) !== 0 );\n\t\tconst writtenPositionY = ( (runtime.written & EShapeRuntimeReset.POSITION_Y) !== 0 );\n\t\tconst oldPositionX = ( writtenPositionX ? position.x : runtime.x );\n\t\tconst oldPositionY = ( writtenPositionY ? position.y : runtime.y );\n\t\truntime.written |= EShapeRuntimeReset.POSITION;\n\t\tposition.set(\n\t\t\toldPositionX + dx * c - dy * s,\n\t\t\toldPositionY + dx * s + dy * c\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformRotate } from \"./e-shape-action-runtime-transform-rotate\";\nimport { EShapeActionValueTransformRotate } from \"./e-shape-action-value-transform-rotate\";\n\nexport class EShapeActionRuntimeTransformRotateAbsolute extends EShapeActionRuntimeTransformRotate {\n\tconstructor( value: EShapeActionValueTransformRotate ) {\n\t\tsuper( value, EShapeRuntimeReset.ROTATION );\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst transform = shape.transform;\n\t\t\tconst writtenRotation = ( (runtime.written & EShapeRuntimeReset.ROTATION) !== 0 );\n\t\t\tconst oldRotation = (writtenRotation ? transform.rotation : runtime.rotation);\n\t\t\ttransform.rotation = amount;\n\t\t\truntime.written |= EShapeRuntimeReset.ROTATION;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldRotation, amount,\n\t\t\t\tthis.originX, this.originY\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeRuntime, EShapeRuntimeReset } from \"../e-shape-runtime\";\nimport { EShapeActionRuntimeTransformRotate } from \"./e-shape-action-runtime-transform-rotate\";\nimport { EShapeActionValueTransformRotate } from \"./e-shape-action-value-transform-rotate\";\n\nexport class EShapeActionRuntimeTransformRotateRelative extends EShapeActionRuntimeTransformRotate {\n\tconstructor( value: EShapeActionValueTransformRotate ) {\n\t\tsuper( value, EShapeRuntimeReset.ROTATION );\n\t\tthis.reset |= EShapeRuntimeReset.POSITION;\n\t}\n\n\texecute( shape: EShape, runtime: EShapeRuntime, time: number ): void {\n\t\tif( !! this.condition( shape, time ) ) {\n\t\t\tconst amount = this.amount( shape, time );\n\t\t\tconst transform = shape.transform;\n\t\t\tconst writtenRotation = ( (runtime.written & EShapeRuntimeReset.ROTATION) !== 0 );\n\t\t\tconst oldRotation = (writtenRotation ? transform.rotation : runtime.rotation);\n\t\t\ttransform.rotation = oldRotation + amount;\n\t\t\truntime.written |= EShapeRuntimeReset.ROTATION;\n\t\t\tthis.adjustPosition(\n\t\t\t\tshape, runtime,\n\t\t\t\toldRotation, transform.rotation,\n\t\t\t\tthis.originX, this.originY\n\t\t\t);\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeActionRuntimeTransformRotate } from \"./e-shape-action-runtime-transform-rotate\";\nimport { EShapeActionRuntimeTransformRotateAbsolute } from \"./e-shape-action-runtime-transform-rotate-absolute\";\nimport { EShapeActionRuntimeTransformRotateRelative } from \"./e-shape-action-runtime-transform-rotate-relative\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueOpetyped } from \"./e-shape-action-value-opetyped\";\nimport { EShapeActionValueTransformRotateType } from \"./e-shape-action-value-transform-rotate-type\";\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\nimport { EShapeActionValues } from \"./e-shape-action-values\";\n\nexport type EShapeActionValueTransformRotateSerialized = [\n\tEShapeActionValueType.TRANSFORM, number, EShapeActionValueTransformType.ROTATE,\n\tEShapeActionValueTransformRotateType,\n\tnumber, number, number\n];\n\nexport class EShapeActionValueTransformRotate\n\textends EShapeActionValueOpetyped<EShapeActionValueTransformType, EShapeActionValueTransformRotateType> {\n\treadonly originX: number;\n\treadonly originY: number;\n\treadonly amount: string;\n\n\tconstructor(\n\t\topetype: EShapeActionValueTransformRotateType, condition: string,\n\t\toriginX: number, originY: number, amount: string\n\t) {\n\t\tsuper( EShapeActionValueType.TRANSFORM, condition, EShapeActionValueTransformType.ROTATE, opetype );\n\t\tthis.originX = originX;\n\t\tthis.originY = originY;\n\t\tthis.amount = amount;\n\t}\n\n\tisEquals( value: EShapeActionValue ): boolean {\n\t\treturn (\n\t\t\tsuper.isEquals( value ) &&\n\t\t\t(value instanceof EShapeActionValueTransformRotate) &&\n\t\t\tthis.originX === value.originX &&\n\t\t\tthis.originY === value.originY &&\n\t\t\tthis.amount === value.amount\n\t\t);\n\t}\n\n\ttoRuntime(): EShapeActionRuntimeTransformRotate {\n\t\tswitch( this.opetype ) {\n\t\tcase EShapeActionValueTransformRotateType.ABSOLUTE:\n\t\t\treturn new EShapeActionRuntimeTransformRotateAbsolute( this );\n\t\tcase EShapeActionValueTransformRotateType.RELATIVE:\n\t\t\treturn new EShapeActionRuntimeTransformRotateRelative( this );\n\t\t}\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst conditionId = manager.add( this.condition );\n\t\tconst amountId = manager.add( this.amount );\n\t\treturn manager.add(\n\t\t\t`[${this.type},${conditionId},${this.subtype},${this.opetype},${this.originX},${this.originY},${amountId}]`\n\t\t);\n\t}\n\n\tstatic deserialize(\n\t\tserialized: EShapeActionValueTransformRotateSerialized,\n\t\tmanager: EShapeResourceManagerDeserialization\n\t): EShapeActionValueTransformRotate {\n\t\tconst condition = EShapeActionValues.toResource( 1, serialized, manager.resources );\n\t\tconst amount = EShapeActionValues.toResource( 6, serialized, manager.resources );\n\t\treturn new EShapeActionValueTransformRotate(\n\t\t\tserialized[ 3 ], condition,\n\t\t\tserialized[ 4 ], serialized[ 5 ], amount\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum EShapeCapability {\n\tNONE\t\t\t= 0,\n\n\tID\t\t\t\t= 1 << 0,\n\tPOSITION\t\t= 1 << 1,\n\tWIDTH\t\t\t= 1 << 2,\n\tHEIGHT\t\t\t= 1 << 3,\n\tROTATION\t\t= 1 << 4,\n\tSKEW\t\t\t= 1 << 5,\n\tALIGN\t\t\t= 1 << 6,\n\n\tREPLACING\t\t= 1 << 7,\n\tGROUPING\t\t= 1 << 8,\n\tFILL\t\t\t= 1 << 9,\n\tSTROKE\t\t\t= 1 << 10,\n\tSTROKE_SIDE\t\t= 1 << 11,\n\tBORDER_RADIUS\t= 1 << 12,\n\n\tTEXT\t\t\t= 1 << 13,\n\tTEXTURE\t\t\t= 1 << 14,\n\tTAG\t\t\t\t= 1 << 15,\n\tACTION\t\t\t= 1 << 16,\n\tCURSOR\t\t\t= 1 << 17,\n\tORDER_IN_LAYER\t= 1 << 18,\n\n\tCOORDINATE\t\t= ID | POSITION | WIDTH | HEIGHT | ROTATION | SKEW | ALIGN,\n\tSHAPE\t\t\t= REPLACING | GROUPING | FILL | STROKE,\n\tSHAPE_ROUNDED\t= SHAPE | BORDER_RADIUS,\n\tSHAPE_SIDED\t\t= SHAPE | STROKE_SIDE,\n\tSHAPE_SIDED_AND_ROUNDED = SHAPE | STROKE_SIDE | BORDER_RADIUS,\n\tLAYER\t\t\t= ORDER_IN_LAYER,\n\tPRIMITIVE\t\t= COORDINATE | SHAPE | TEXT | TEXTURE | TAG | ACTION | CURSOR | LAYER,\n\tSHADOW\t\t\t= NONE,\n\tALL\t\t\t\t= PRIMITIVE | STROKE_SIDE | BORDER_RADIUS\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilIsArray } from \"../../util/util-is-array\";\nimport { utilIsNumber } from \"../../util/util-is-number\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeActionValue } from \"./e-shape-action-value\";\nimport { EShapeActionValueBlink, EShapeActionValueBlinkSerialized } from \"./e-shape-action-value-blink\";\nimport {\n\tEShapeActionValueChangeColor, EShapeActionValueChangeColorSerialized } from \"./e-shape-action-value-change-color\";\nimport {\n\tEShapeActionValueChangeColorBrightness, EShapeActionValueChangeColorBrightnessSerialized\n} from \"./e-shape-action-value-change-color-brightness\";\nimport {\n\tEShapeActionValueChangeColorCode, EShapeActionValueChangeColorCodeSerialized\n} from \"./e-shape-action-value-change-color-code\";\nimport { EShapeActionValueChangeColorTarget } from \"./e-shape-action-value-change-color-type\";\nimport {\n\tEShapeActionValueChangeCursor, EShapeActionValueChangeCursorSerialized } from \"./e-shape-action-value-change-cursor\";\nimport { EShapeActionValueChangeText, EShapeActionValueChangeTextSerialized } from \"./e-shape-action-value-change-text\";\nimport { EShapeActionValueEmitEvent, EShapeActionValueEmitEventSerialized } from \"./e-shape-action-value-emit-event\";\nimport { EShapeActionValueMisc, EShapeActionValueMiscSerialized } from \"./e-shape-action-value-misc\";\nimport { EShapeActionValueOpen, EShapeActionValueOpenSerialized } from \"./e-shape-action-value-open\";\nimport { EShapeActionValueShowHide, EShapeActionValueShowHideSerialized } from \"./e-shape-action-value-show-hide\";\nimport {\n\tEShapeActionValueShowHideType\n} from \"./e-shape-action-value-show-hide-type\";\nimport {\n\tEShapeActionValueTransformMove, EShapeActionValueTransformMoveSerialized\n} from \"./e-shape-action-value-transform-move\";\nimport {\n\tEShapeActionValueTransformResize, EShapeActionValueTransformResizeSerialized\n} from \"./e-shape-action-value-transform-resize\";\nimport {\n\tEShapeActionValueTransformRotate, EShapeActionValueTransformRotateSerialized\n} from \"./e-shape-action-value-transform-rotate\";\nimport { EShapeActionValueTransformType } from \"./e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"./e-shape-action-value-type\";\n\nexport type EShapeActionValueSerialized = EShapeActionValueShowHideSerialized |\n\tEShapeActionValueBlinkSerialized | EShapeActionValueBlinkSerialized |\n\tEShapeActionValueChangeColorSerialized | EShapeActionValueChangeColorCodeSerialized |\n\tEShapeActionValueChangeColorBrightnessSerialized | EShapeActionValueChangeTextSerialized |\n\tEShapeActionValueChangeCursorSerialized | EShapeActionValueEmitEventSerialized |\n\tEShapeActionValueOpenSerialized | EShapeActionValueTransformMoveSerialized |\n\tEShapeActionValueTransformResizeSerialized | EShapeActionValueTransformRotateSerialized |\n\tEShapeActionValueMiscSerialized;\n\nexport class EShapeActionValueDeserializer {\n\tstatic toSerialized( resource: string ): EShapeActionValueSerialized | null {\n\t\ttry {\n\t\t\tconst parsed = JSON.parse( resource );\n\t\t\tif( utilIsArray( parsed ) ) {\n\t\t\t\tfor( let i = 0, imax = parsed.length; i < imax; ++i ) {\n\t\t\t\t\tif( ! utilIsNumber( parsed[ i ] ) ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( 2 <= parsed.length ) {\n\t\t\t\t\treturn parsed as EShapeActionValueSerialized;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t} catch( e ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tstatic deserialize( id: number, manager: EShapeResourceManagerDeserialization ): EShapeActionValue {\n\t\tconst actions = manager.actions;\n\t\tconst action = actions.get( id );\n\t\tif( action != null ) {\n\t\t\treturn action;\n\t\t}\n\n\t\tconst resources = manager.resources;\n\t\tconst resource = resources[ id ];\n\t\tif( resource != null ) {\n\t\t\tconst serialized = this.toSerialized( resource );\n\t\t\tif( serialized != null ) {\n\t\t\t\tswitch( serialized[ 0 ] ) {\n\t\t\t\tcase EShapeActionValueType.SHOW_HIDE:\n\t\t\t\t\treturn EShapeActionValueShowHide.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.BLINK:\n\t\t\t\t\treturn EShapeActionValueBlink.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.CHANGE_COLOR:\n\t\t\t\t\tswitch( serialized[ 3 ] ) {\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA:\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.COLOR:\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.ALPHA:\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColor.deserialize( serialized, manager );\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.CODE:\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColorCode.deserialize( serialized, manager );\n\t\t\t\t\t\tcase EShapeActionValueChangeColorTarget.BRIGHTNESS:\n\t\t\t\t\t\t\treturn EShapeActionValueChangeColorBrightness.deserialize( serialized, manager );\n\t\t\t\t\t}\n\t\t\t\tcase EShapeActionValueType.CHANGE_TEXT:\n\t\t\t\t\treturn EShapeActionValueChangeText.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.CHANGE_CURSOR:\n\t\t\t\t\treturn EShapeActionValueChangeCursor.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.EMIT_EVENT:\n\t\t\t\t\treturn EShapeActionValueEmitEvent.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.OPEN:\n\t\t\t\t\treturn EShapeActionValueOpen.deserialize( serialized, manager );\n\t\t\t\tcase EShapeActionValueType.TRANSFORM:\n\t\t\t\t\tswitch( serialized[ 2 ] ) {\n\t\t\t\t\tcase EShapeActionValueTransformType.MOVE:\n\t\t\t\t\t\treturn EShapeActionValueTransformMove.deserialize( serialized, manager );\n\t\t\t\t\tcase EShapeActionValueTransformType.RESIZE:\n\t\t\t\t\t\treturn EShapeActionValueTransformResize.deserialize( serialized, manager );\n\t\t\t\t\tcase EShapeActionValueTransformType.ROTATE:\n\t\t\t\t\t\treturn EShapeActionValueTransformRotate.deserialize( serialized, manager );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase EShapeActionValueType.MISC:\n\t\t\t\t\treturn EShapeActionValueMisc.deserialize( serialized, manager );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn new EShapeActionValueShowHide( EShapeActionValueShowHideType.SHOW, \"\" );\n\t}\n}\n","\nexport class EShapeImageElements {\n\tstatic imageElements: { [ src: string ]: Promise<HTMLImageElement> | HTMLImageElement | undefined } = {};\n\n\tstatic toImageElement( dataUrl: string ): Promise<HTMLImageElement> {\n\t\tconst imageElements = EShapeImageElements.imageElements;\n\t\tconst cachedImageElement = imageElements[ dataUrl ];\n\t\tif( cachedImageElement != null ) {\n\t\t\tif( cachedImageElement instanceof HTMLImageElement ) {\n\t\t\t\treturn Promise.resolve( cachedImageElement );\n\t\t\t} else {\n\t\t\t\treturn cachedImageElement;\n\t\t\t}\n\t\t} else {\n\t\t\tconst result = new Promise<HTMLImageElement>(( resolve, reject ): void => {\n\t\t\t\tconst imageElement = document.createElement( \"img\" );\n\t\t\t\timageElement.onload = () => {\n\t\t\t\t\timageElements[ dataUrl ] = imageElement;\n\t\t\t\t\tresolve( imageElement );\n\t\t\t\t};\n\t\t\t\timageElement.onabort = imageElement.onerror = () => {\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t\timageElement.src = dataUrl;\n\t\t\t});\n\t\t\timageElements[ dataUrl ] = result;\n\t\t\treturn result;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n\tDDiagramSerializedFill, DDiagramSerializedStroke, DDiagramSerializedTagRange, DDiagramSerializedTagValue,\n\tDDiagramSerializedText, DDiagramSerializedTextOutline\n} from \"../d-diagram-serialized\";\nimport { EShapeActionValue } from \"./action/e-shape-action-value\";\n\nexport class EShapeResourceManagerDeserialization {\n\tresources: string[];\n\tactions: Map<number, EShapeActionValue>;\n\tfills: Map<number, DDiagramSerializedFill>;\n\tstrokes: Map<number, DDiagramSerializedStroke>;\n\ttagValues: Map<number, DDiagramSerializedTagValue>;\n\ttags: Map<number, number[]>;\n\tranges: Map<number, DDiagramSerializedTagRange>;\n\taligns: Map<number, [ number, number ]>;\n\tmargins: Map<number, [ number, number ]>;\n\ttexts: Map<number, DDiagramSerializedText>;\n\ttextOutlines: Map<number, DDiagramSerializedTextOutline>;\n\textensions: Map<number, unknown>;\n\n\tconstructor( resources: string[] ) {\n\t\tthis.resources = resources;\n\t\tthis.actions = new Map<number, EShapeActionValue>();\n\t\tthis.fills = new Map<number, DDiagramSerializedFill>();\n\t\tthis.strokes = new Map<number, DDiagramSerializedStroke>();\n\t\tthis.tags = new Map<number, number[]>();\n\t\tthis.tagValues = new Map<number, DDiagramSerializedTagValue>();\n\t\tthis.ranges = new Map<number, DDiagramSerializedTagRange>();\n\t\tthis.aligns = new Map<number, [ number, number ]>();\n\t\tthis.margins = new Map<number, [ number, number ]>();\n\t\tthis.texts = new Map<number, DDiagramSerializedText>();\n\t\tthis.textOutlines = new Map<number, DDiagramSerializedTextOutline>();\n\t\tthis.extensions = new Map<number, unknown>();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../d-diagram-serialized\";\nimport { utilIsString } from \"../util/util-is-string\";\nimport { EShapeActionValueDeserializer } from \"./action/e-shape-action-value-deserializer\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeDeserializers } from \"./e-shape-deserializers\";\nimport { EShapeImageElements } from \"./e-shape-image-elements\";\nimport { EShapeResourceManagerDeserialization } from \"./e-shape-resource-manager-deserialization\";\nimport { EShapeSizes } from \"./e-shape-sizes\";\nimport { EShapeGradients } from \"./variant/e-shape-gradients\";\n\nexport class EShapeDeserializer {\n\tstatic toShape(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShape> | EShape | null {\n\t\tconst shapeDeserializer = EShapeDeserializers[ item[ 0 ] ];\n\t\tif( shapeDeserializer != null ) {\n\t\t\treturn shapeDeserializer( item, manager );\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic deserialize<SHAPE extends EShape>(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization, result: SHAPE\n\t): Promise<SHAPE> | SHAPE {\n\t\tresult.id = manager.resources[ item[ 1 ] ] || \"\";\n\t\tresult.transform.position.set( item[ 2 ], item[ 3 ] );\n\t\tresult.transform.rotation = item[ 6 ];\n\t\tresult.transform.skew.set( item[ 7 ], item[ 7 ] );\n\t\tresult.transform.pivot.set( item[ 21 ], item[ 22 ] );\n\t\tresult.size.set( EShapeSizes.toNormalized( item[ 4 ] ), EShapeSizes.toNormalized( item[ 5 ] ) );\n\t\tresult.fill.deserialize( item[ 8 ], manager );\n\t\tresult.stroke.deserialize( item[ 9 ], manager );\n\t\tresult.cursor = manager.resources[ item[ 10 ] ] || \"\";\n\t\tresult.text.deserialize( item[ 11 ], manager );\n\t\tresult.tag.deserialize( item[ 12 ], manager );\n\t\tresult.radius = item[ 13 ];\n\t\tresult.corner = item[ 14 ];\n\t\tresult.interactive = !! ( item[ 23 ] & 1 );\n\t\tresult.unfocusable = !! ( item[ 23 ] & 2 );\n\t\tresult.shortcut = ( 0 <= item[ 24 ] ? manager.resources[ item[ 24 ] ] : undefined );\n\t\tresult.title = ( 0 <= item[ 25 ] ? manager.resources[ item[ 25 ] ] : undefined );\n\n\t\t// Children\n\t\tlet childrenPromise: Promise<SHAPE> | null = null;\n\t\tconst childrenSerialized = item[ 20 ];\n\t\tif( 0 < childrenSerialized.length ) {\n\t\t\tconst childrenOrPromises = [];\n\t\t\tfor( let i = 0, imax = childrenSerialized.length; i < imax; ++i ) {\n\t\t\t\tconst childSerialized = childrenSerialized[ i ];\n\t\t\t\tconst childOrPromise = EShapeDeserializer.toShape( childSerialized, manager );\n\t\t\t\tif( childOrPromise != null ) {\n\t\t\t\t\tchildrenOrPromises.push( childOrPromise );\n\t\t\t\t}\n\t\t\t}\n\t\t\tchildrenPromise = Promise.all( childrenOrPromises ).then(( children: EShape[] ) => {\n\t\t\t\tresult.children = children;\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\tchildren[ i ].parent = result;\n\t\t\t\t}\n\t\t\t\tresult.onChildTransformChange();\n\t\t\t\tresult.toDirty();\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\n\t\t// Action\n\t\tconst serializedActions = item[ 17 ];\n\t\tfor( let i = 0, imax = serializedActions.length; i < imax; ++i ) {\n\t\t\tresult.action.add( EShapeActionValueDeserializer.deserialize( serializedActions[ i ], manager ) );\n\t\t}\n\n\t\t// Gradient\n\t\tconst gradientId = item[ 19 ];\n\t\tif( 0 <= gradientId && gradientId < manager.resources.length ) {\n\t\t\tconst gradient = manager.resources[ gradientId ];\n\t\t\tif( utilIsString( gradient ) ) {\n\t\t\t\tresult.gradient = EShapeGradients.deserializeGradient( gradient );\n\t\t\t}\n\t\t}\n\n\t\t// Image\n\t\tlet imagePromise: Promise<SHAPE> | null = null;\n\t\tconst imageId = item[ 18 ];\n\t\tif( 0 <= imageId && imageId < manager.resources.length ) {\n\t\t\tconst imageSrc = manager.resources[ imageId ];\n\t\t\tif( utilIsString( imageSrc ) ) {\n\t\t\t\timagePromise = EShapeImageElements.toImageElement( imageSrc ).then(( imageElement ) => {\n\t\t\t\t\tresult.image = imageElement;\n\t\t\t\t\treturn result;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tif( childrenPromise != null ) {\n\t\t\tif( imagePromise != null ) {\n\t\t\t\treturn Promise.all([ childrenPromise, imagePromise ]).then(() => {\n\t\t\t\t\treturn result;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn childrenPromise;\n\t\t\t}\n\t\t} else {\n\t\t\tif( imagePromise != null ) {\n\t\t\t\treturn imagePromise;\n\t\t\t} else {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deserializeAll( serializeds: DDiagramSerializedItem[], resources: string[] ): Promise<EShape[]> | null {\n\t\tconst manager = new EShapeResourceManagerDeserialization( resources );\n\t\tconst shapes: Array<Promise<EShape> | EShape> = [];\n\t\tfor( let i = 0, imax = serializeds.length; i < imax; ++i ) {\n\t\t\tconst serialized = serializeds[ i ];\n\t\t\tconst shape = EShapeDeserializer.toShape( serialized, manager );\n\t\t\tif( shape == null ) {\n\t\t\t\tif( 0 < shapes.length ) {\n\t\t\t\t\tPromise.all( shapes ).then( ( resolved: EShape[] ): void => {\n\t\t\t\t\t\tfor( let j = 0, jmax = resolved.length; j < jmax; ++j ) {\n\t\t\t\t\t\t\tresolved[ j ].destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tshapes.push( shape );\n\t\t}\n\t\tif( 0 < shapes.length ) {\n\t\t\treturn Promise.all( shapes );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeBar } from \"./e-shape-bar\";\nimport { EShapeBarPosition } from \"./e-shape-bar-position\";\n\nexport class EShapeBars {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeBar> | EShapeBar {\n\t\tconst shape = new EShapeBar( EShapeBarPosition.RIGHT, 10, 3, EShapePointsStyle.NONE );\n\t\tconst result = EShapeDeserializer.deserialize( item, manager, shape );\n\t\tshape.points.deserialize( item[ 15 ], manager );\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeBarUploadeds } from \"../shape/variant/e-shape-bar-uploadeds\";\nimport { EShapeBars } from \"../shape/variant/e-shape-bars\";\n\nexport const loadShapeBar = () => {\n\tEShapeUploadeds[ EShapeType.BAR ] = EShapeBarUploadeds.create;\n\tEShapeDeserializers[ EShapeType.BAR ] = EShapeBars.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeCircleUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Clippings\n\t\tbuffer.clippingBuffer.update();\n\t\tconst clippings = buffer.clippings;\n\t\tconst ic = voffset * 3;\n\t\tclippings[ ic +  0 ] = 1;\n\t\tclippings[ ic +  1 ] = 1;\n\t\tclippings[ ic +  2 ] = 1;\n\n\t\tclippings[ ic +  3 ] = 0;\n\t\tclippings[ ic +  4 ] = 1;\n\t\tclippings[ ic +  5 ] = 1;\n\n\t\tclippings[ ic +  6 ] = 1;\n\t\tclippings[ ic +  7 ] = 1;\n\t\tclippings[ ic +  8 ] = 1;\n\n\t\tclippings[ ic +  9 ] = 1;\n\t\tclippings[ ic + 10 ] = 0;\n\t\tclippings[ ic + 11 ] = 1;\n\n\t\tclippings[ ic + 12 ] = 0;\n\t\tclippings[ ic + 13 ] = 0;\n\t\tclippings[ ic + 14 ] = 1;\n\n\t\tclippings[ ic + 15 ] = 1;\n\t\tclippings[ ic + 16 ] = 0;\n\t\tclippings[ ic + 17 ] = 1;\n\n\t\tclippings[ ic + 18 ] = 1;\n\t\tclippings[ ic + 19 ] = 1;\n\t\tclippings[ ic + 20 ] = 1;\n\n\t\tclippings[ ic + 21 ] = 0;\n\t\tclippings[ ic + 22 ] = 1;\n\t\tclippings[ ic + 23 ] = 1;\n\n\t\tclippings[ ic + 24 ] = 1;\n\t\tclippings[ ic + 25 ] = 1;\n\t\tclippings[ ic + 26 ] = 1;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tconst ii = ioffset * 3;\n\t\tindices[ ii +  0 ] = voffset + 0;\n\t\tindices[ ii +  1 ] = voffset + 1;\n\t\tindices[ ii +  2 ] = voffset + 3;\n\n\t\tindices[ ii +  3 ] = voffset + 1;\n\t\tindices[ ii +  4 ] = voffset + 4;\n\t\tindices[ ii +  5 ] = voffset + 3;\n\n\t\tindices[ ii +  6 ] = voffset + 1;\n\t\tindices[ ii +  7 ] = voffset + 2;\n\t\tindices[ ii +  8 ] = voffset + 4;\n\n\t\tindices[ ii +  9 ] = voffset + 2;\n\t\tindices[ ii + 10 ] = voffset + 5;\n\t\tindices[ ii + 11 ] = voffset + 4;\n\n\t\tindices[ ii + 12 ] = voffset + 3;\n\t\tindices[ ii + 13 ] = voffset + 4;\n\t\tindices[ ii + 14 ] = voffset + 6;\n\n\t\tindices[ ii + 15 ] = voffset + 4;\n\t\tindices[ ii + 16 ] = voffset + 7;\n\t\tindices[ ii + 17 ] = voffset + 6;\n\n\t\tindices[ ii + 18 ] = voffset + 4;\n\t\tindices[ ii + 19 ] = voffset + 5;\n\t\tindices[ ii + 20 ] = voffset + 7;\n\n\t\tindices[ ii + 21 ] = voffset + 5;\n\t\tindices[ ii + 22 ] = voffset + 8;\n\t\tindices[ ii + 23 ] = voffset + 7;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateType0Vertex( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateType0Step( buffer, shape );\n\t\tthis.updateType0Uv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateType0Vertex( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\n\t\t\t// Invalidate the stroke width to update the steps / antialiases.\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\t//\n\t\t\t//  0       1       2\n\t\t\t// |-------|-------|\n\t\t\t// |3      |4      |5\n\t\t\t// |-------|-------|\n\t\t\t// |6      |7      |8\n\t\t\t// |-------|-------|\n\t\t\t//\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = this.buffer.work;\n\t\t\twork.set( -sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x1 = work.x;\n\t\t\tconst y1 = work.y;\n\t\t\tconst dx = x1 - x0;\n\t\t\tconst dy = y1 - y0;\n\t\t\tconst x4 = internalTransform.tx;\n\t\t\tconst y4 = internalTransform.ty;\n\t\t\tconst x7 = x4 + (x4 - x1);\n\t\t\tconst y7 = y4 + (y4 - y1);\n\t\t\tconst x3 = x4 - dx;\n\t\t\tconst y3 = y4 - dy;\n\n\t\t\t// World size\n\t\t\tthis.worldSizeXHalf = this.calcLength( x0, y0, x1, y1 );\n\t\t\tthis.worldSizeYHalf = this.calcLength( x0, y0, x3, y3 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tconst iv = voffset * 2;\n\t\t\tvertices[ iv +  0 ] = x0;\n\t\t\tvertices[ iv +  1 ] = y0;\n\t\t\tvertices[ iv +  2 ] = x1;\n\t\t\tvertices[ iv +  3 ] = y1;\n\t\t\tvertices[ iv +  4 ] = x1 + dx;\n\t\t\tvertices[ iv +  5 ] = y1 + dy;\n\n\t\t\tvertices[ iv +  6 ] = x3;\n\t\t\tvertices[ iv +  7 ] = y3;\n\t\t\tvertices[ iv +  8 ] = x4;\n\t\t\tvertices[ iv +  9 ] = y4;\n\t\t\tvertices[ iv + 10 ] = x4 + dx;\n\t\t\tvertices[ iv + 11 ] = y4 + dy;\n\n\t\t\tvertices[ iv + 12 ] = x7 - dx;\n\t\t\tvertices[ iv + 13 ] = y7 - dy;\n\t\t\tvertices[ iv + 14 ] = x7;\n\t\t\tvertices[ iv + 15 ] = y7;\n\t\t\tvertices[ iv + 16 ] = x7 + dx;\n\t\t\tvertices[ iv + 17 ] = y7 + dy;\n\t\t}\n\t}\n\n\tprotected updateType0Step( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tthis.calcStep( this.worldSizeXHalf, strokeWidth, work );\n\t\t\tconst swx = work[ 0 ];\n\t\t\tconst px0 = work[ 1 ];\n\t\t\tconst px1 = work[ 2 ];\n\n\t\t\tthis.calcStep( this.worldSizeYHalf, strokeWidth, work );\n\t\t\tconst swy = work[ 0 ];\n\t\t\tconst py0 = work[ 1 ];\n\t\t\tconst py1 = work[ 2 ];\n\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\tthis.updateStep( buffer, voffset, vcount, swx, swy, px0, py0, px1, py1 );\n\t\t}\n\t}\n\n\tprotected updateType0Uv( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\t// UVs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst iuv = voffset * 2;\n\t\t\tuvs[ iuv +  0 ] = x0;\n\t\t\tuvs[ iuv +  1 ] = y0;\n\t\t\tuvs[ iuv +  2 ] = 0.5 * ( x0 + x1 );\n\t\t\tuvs[ iuv +  3 ] = 0.5 * ( y0 + y1 );\n\t\t\tuvs[ iuv +  4 ] = x1;\n\t\t\tuvs[ iuv +  5 ] = y1;\n\n\t\t\tuvs[ iuv +  6 ] = 0.5 * ( x0 + x3 );\n\t\t\tuvs[ iuv +  7 ] = 0.5 * ( y0 + y3 );\n\t\t\tuvs[ iuv +  8 ] = 0.5 * ( x0 + x2 );\n\t\t\tuvs[ iuv +  9 ] = 0.5 * ( y0 + y2 );\n\t\t\tuvs[ iuv + 10 ] = 0.5 * ( x1 + x2 );\n\t\t\tuvs[ iuv + 11 ] = 0.5 * ( y1 + y2 );\n\n\t\t\tuvs[ iuv + 12 ] = x3;\n\t\t\tuvs[ iuv + 13 ] = y3;\n\t\t\tuvs[ iuv + 14 ] = 0.5 * ( x3 + x2 );\n\t\t\tuvs[ iuv + 15 ] = 0.5 * ( y3 + y2 );\n\t\t\tuvs[ iuv + 16 ] = x2;\n\t\t\tuvs[ iuv + 17 ] = y2;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeCircleUploaded } from \"./e-shape-circle-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeCircleUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number,\n\t\tantialiasWeight: number\n\t): EShapeCircleUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 9 + tvcount;\n\t\tconst icount = 8 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeCircleUploaded(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, ioffset,\n\t\t\t\ttvcount, ticount,\n\t\t\t\tvcount, icount,\n\t\t\t\tantialiasWeight\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeCircle extends EShapePrimitive {\n\tconstructor( type = EShapeType.CIRCLE ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeCircle {\n\t\treturn new EShapeCircle().copy( this );\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst fill = this.fill;\n\t\t\tconst stroke = this.stroke;\n\t\t\tif( fill.enable ) {\n\t\t\t\tconst x2 = x * x;\n\t\t\t\tconst y2 = y * y;\n\t\t\t\tconst ax2 = ax * ax;\n\t\t\t\tconst ay2 = ay * ay;\n\t\t\t\tif( x2 * ay2 + y2 * ax2 <= ax2 * ay2 ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst strokeWidth = stroke.width;\n\t\t\t\tif( stroke.enable && 0 < strokeWidth ) {\n\t\t\t\t\tconst x2 = x * x;\n\t\t\t\t\tconst y2 = y * y;\n\t\t\t\t\tconst wx = Math.max( 0.0, ax - strokeWidth );\n\t\t\t\t\tconst wy = Math.max( 0.0, ay - strokeWidth );\n\t\t\t\t\tconst wx2 = wx * wx;\n\t\t\t\t\tconst wy2 = wy * wy;\n\t\t\t\t\tif( wx2 * wy2 <= x2 * wy2 + y2 * wx2 ) {\n\t\t\t\t\t\tconst ax2 = ax * ax;\n\t\t\t\t\t\tconst ay2 = ay * ay;\n\t\t\t\t\t\tif( x2 * ay2 + y2 * ax2 <= ax2 * ay2 ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeCircle } from \"./e-shape-circle\";\n\nexport class EShapeCircles {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeCircle> | EShapeCircle {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeCircles.create() );\n\t}\n\n\tstatic create(): EShapeCircle {\n\t\treturn new EShapeCircle();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeCircleUploadeds } from \"../shape/variant/e-shape-circle-uploadeds\";\nimport { EShapeCircles } from \"../shape/variant/e-shape-circles\";\n\nexport const loadShapeCircle = () => {\n\tEShapeUploadeds[ EShapeType.CIRCLE ] = EShapeCircleUploadeds.create;\n\tEShapeDeserializers[ EShapeType.CIRCLE ] = EShapeCircles.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeUploadedBase } from \"../e-shape-uploaded\";\n\nexport class EShapeGroupUploaded extends EShapeUploadedBase {\n\tconstructor( buffer: EShapeBuffer, voffset: number, ioffset: number ) {\n\t\tsuper( buffer, voffset, ioffset, 0, 0, 1 );\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tthis.texture = shape.texture || Texture.WHITE;\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeGroupUploaded } from \"./e-shape-group-uploaded\";\n\nexport class EShapeGroupUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number\n\t): EShapeGroupUploaded | null {\n\t\treturn new EShapeGroupUploaded(\n\t\t\tbuffer,\n\t\t\tvoffset, ioffset\n\t\t).init( shape );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupFillEditor implements EShapeFill {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget enable(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].fill.enable;\n\t\t}\n\t\treturn true;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.enable = enable;\n\t\t}\n\t}\n\n\tget color(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].fill.color;\n\t\t}\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.color = color;\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].fill.alpha;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.alpha = alpha;\n\t\t}\n\t}\n\n\tcopy( target: EShapeFillLike ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.copy( target );\n\t\t}\n\t}\n\n\tset( enable: boolean, color: number, alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].fill.set( enable, color, alpha );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupFillEditor {\n\t\treturn new EShapeGroupFillEditor( this._parent );\n\t}\n\n\ttoObject(): EShapeFillLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].fill.toObject();\n\t\t}\n\t\treturn {\n\t\t\tenable: true,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsParent } from \"../e-shape-points-parent\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupPoints implements EShapePoints {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget length(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.length;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tget id(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.id;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tget values(): number[] {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.values;\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tset values( values: number[] ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.values = values;\n\t\t\t}\n\t\t}\n\t}\n\n\tget segments(): number[] {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.segments;\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tset segments( segments: number[] ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.segments = segments;\n\t\t\t}\n\t\t}\n\t}\n\n\tget style(): EShapePointsStyle {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\tconst points = children[ children.length - 1 ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.style;\n\t\t\t}\n\t\t}\n\t\treturn EShapePointsStyle.NONE;\n\t}\n\n\tset style( style: EShapePointsStyle ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.style = style;\n\t\t\t}\n\t\t}\n\t}\n\n\tcopy( source: EShapePoints ): this {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.copy( source );\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tset( values?: number[], segments?: number[], style?: EShapePointsStyle ): this {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\tpoints.set( values, segments, style );\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tclone( parent: EShapePointsParent ): EShapeGroupPoints {\n\t\treturn new EShapeGroupPoints( parent );\n\t}\n\n\ttoPoints( transform: Matrix ): Point[] {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.toPoints( transform );\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn points.serialize( manager );\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\n\nexport class EShapeEditor {\n\tlocalTransform: Matrix;\n\tinternalTransform: Matrix;\n\tinternalTransformParentInverse: Matrix;\n\trotation: number;\n\tsize: Point;\n\n\tconstructor() {\n\t\tthis.localTransform = new Matrix();\n\t\tthis.internalTransform = new Matrix();\n\t\tthis.internalTransformParentInverse = new Matrix();\n\t\tthis.rotation = 0;\n\t\tthis.size = new Point();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix } from \"pixi.js\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeEditor } from \"./e-shape-editor\";\nimport { EShapeSizes } from \"./e-shape-sizes\";\nimport { EShapeBase } from \"./variant/e-shape-base\";\n\nexport class EShapeTransforms {\n\tstatic prepare( shape: EShape ): void {\n\t\tconst editor = shape.editor = (shape.editor || new EShapeEditor());\n\n\t\t// Ttransform\n\t\tshape.updateTransform();\n\t\tconst parent = shape.parent;\n\t\tif( parent instanceof EShapeBase ) {\n\t\t\tparent.transform.internalTransform.copyTo(editor.internalTransformParentInverse).invert();\n\t\t} else {\n\t\t\teditor.internalTransformParentInverse.identity();\n\t\t}\n\t\tshape.transform.internalTransform.copyTo(editor.internalTransform);\n\n\t\t// Rotation\n\t\teditor.rotation = shape.transform.rotation;\n\n\t\t// Size\n\t\teditor.size.copyFrom( shape.size );\n\n\t\t//\n\t\tshape.disallowOnTransformChange();\n\t}\n\n\tstatic finalize( shape: EShape ): void {\n\t\tshape.allowOnTransformChange( true );\n\t}\n\n\tstatic apply( shape: EShape, transform: Matrix, keepSize: boolean ): void {\n\t\tconst editor = shape.editor;\n\t\tif( editor != null ) {\n\t\t\tconst newLocalTransform = editor.localTransform;\n\t\t\teditor.internalTransformParentInverse.copyTo(newLocalTransform)\n\t\t\t\t.append(transform).append(editor.internalTransform);\n\t\t\tif( keepSize ) {\n\t\t\t\tthis.applyLocal( shape, newLocalTransform );\n\t\t\t} else {\n\t\t\t\tconst size = editor.size;\n\t\t\t\tthis.applyLocal( shape, newLocalTransform, size.x, size.y );\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic applyLocal( shape: EShape, localTransform: Matrix, bx?: number, by?: number ): void {\n\t\tshape.disallowUploadedUpdate();\n\n\t\t// Reconstruct the position, the rotation and the size\n\t\tconst a = localTransform.a;\n\t\tconst b = localTransform.b;\n\t\tconst c = localTransform.c;\n\t\tconst d = localTransform.d;\n\t\tconst tx = localTransform.tx;\n\t\tconst ty = localTransform.ty;\n\n\t\t// Rotation\n\t\tconst transform = shape.transform;\n\t\tconst rx = Math.atan2(-c, d); // rotation - skewX\n\t\tconst ry = Math.atan2(+b, a); // rotation + skewY\n\t\ttransform.rotation = (rx + ry) * 0.5; // Here, assumes `skewX` === `skewY`\n\n\t\t// Skew\n\t\tconst skew = (ry - rx) * 0.5;\n\t\ttransform.skew.set(skew, skew);\n\n\t\t// Position: Assumes the pivot is invariant.\n\t\t// tx = position.x - (a * px + c * py)\n\t\t// ty = position.y - (b * px + d * py)\n\t\t//\n\t\t// Thus,\n\t\t// position.x = tx + (a * px + c * py)\n\t\t// position.y = ty + (b * px + d * py)\n\t\tconst pivot = transform.pivot;\n\t\tconst px = pivot.x;\n\t\tconst py = pivot.y;\n\t\ttransform.position.set(\n\t\t\ttx + (a * px + c * py),\n\t\t\tty + (b * px + d * py)\n\t\t);\n\n\t\t// Scale\n\t\tif( bx != null && by != null ) {\n\t\t\tconst sx = Math.sqrt( a * a + b * b );\n\t\t\tconst sy = Math.sqrt( c * c + d * d );\n\t\t\tshape.size.set(\n\t\t\t\tEShapeSizes.toNormalized( bx * sx ),\n\t\t\t\tEShapeSizes.toNormalized( by * sy )\n\t\t\t);\n\t\t}\n\n\t\t//\n\t\tshape.allowUploadedUpdate();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeLayout } from \"../e-shape-layout\";\nimport { EShapeTransforms } from \"../e-shape-transforms\";\n\nexport class EShapeGroupSizeLayout implements EShapeLayout {\n\tprotected static WORK_TRANSFORM: Matrix = new Matrix();\n\n\tprotected shape: EShape;\n\tprotected base: Point;\n\tprotected shapeBase: Point;\n\tprotected transform: Matrix;\n\n\tconstructor( shape: EShape, bx: number, by: number ) {\n\t\tthis.shape = shape;\n\n\t\t// Base group size\n\t\tthis.base = new Point( bx, by );\n\n\t\t// Base shape size\n\t\tconst size = shape.size;\n\t\tthis.shapeBase = new Point( size.x, size.y );\n\n\t\t// Transform\n\t\tthis.transform = new Matrix();\n\t\tshape.updateTransform();\n\t\tshape.transform.localTransform.copyTo( this.transform );\n\t}\n\n\tisCompatible( shape: EShape ): boolean {\n\t\treturn this.shape === shape;\n\t}\n\n\treset( shape: EShape, baseX: number, baseY: number ): void {\n\t\tthis.base.set( baseX, baseY );\n\n\t\t// Base shape size\n\t\tconst size = shape.size;\n\t\tthis.shapeBase.copyFrom( size );\n\n\t\t// Transform\n\t\tshape.updateTransform();\n\t\tshape.transform.localTransform.copyTo( this.transform );\n\t}\n\n\tupdate(\n\t\tshape: EShape, baseX: number, baseY: number,\n\t\tpivotX: number, pivotY: number\n\t) {\n\t\tconst sx = baseX / this.base.x;\n\t\tconst sy = baseY / this.base.y;\n\t\tconst childBase = this.shapeBase;\n\t\tconst transform = EShapeGroupSizeLayout.WORK_TRANSFORM;\n\t\ttransform.identity()\n\t\t\t.append( this.transform )\n\t\t\t.translate( -pivotX, -pivotY )\n\t\t\t.scale( sx, sy )\n\t\t\t.translate( +pivotX, +pivotY );\n\t\tshape.disallowOnTransformChange();\n\t\tEShapeTransforms.applyLocal( shape, transform, childBase.x, childBase.y );\n\t\tshape.allowOnTransformChange( false );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Point, Rectangle } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeLayout } from \"../e-shape-layout\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\nimport { EShapeGroupSizeLayout } from \"./e-shape-group-size-layout\";\nimport { EShapeGroupSizeParent } from \"./e-shape-group-size-parent\";\n\nexport class EShapeGroupSizeEditor implements EShapeGroupSize {\n\tprotected _parent: EShapeGroupSizeParent;\n\tprotected _size: Point;\n\tprotected _layouts: EShapeLayout[];\n\tprotected _workPoint: Point = new Point();\n\tprotected _workRectForCalcRect: Rectangle = new Rectangle();\n\tprotected _workRectForFit: Rectangle = new Rectangle();\n\n\tconstructor( parent: EShapeGroupSizeParent, x: number, y: number ) {\n\t\tthis._parent = parent;\n\t\tthis._layouts = [];\n\t\tthis._size = new Point( x, y );\n\t}\n\n\tinit(): void {\n\t\t// DO NOTHING\n\t}\n\n\tget x(): number {\n\t\treturn this._size.x;\n\t}\n\n\tset x( x: number ) {\n\t\tconst size = this._size;\n\t\tif( size.x !== x ) {\n\t\t\tconst ox = size.x;\n\t\t\tsize.x = x;\n\t\t\tthis.onChange( ox, size.y );\n\t\t}\n\t}\n\n\tget y(): number {\n\t\treturn this._size.y;\n\t}\n\n\tset y( y: number ) {\n\t\tconst size = this._size;\n\t\tif( size.y !== y ) {\n\t\t\tconst oy = size.y;\n\t\t\tsize.y = y;\n\t\t\tthis.onChange( size.x, oy );\n\t\t}\n\t}\n\n\tset( x?: number | undefined, y?: number | undefined ): void {\n\t\tlet isChanged = false;\n\t\tconst size = this._size;\n\t\tconst ox = size.x;\n\t\tconst oy = size.y;\n\t\tif( x != null && ox !== x ) {\n\t\t\tisChanged = true;\n\t\t\tsize.x = x;\n\t\t}\n\t\tif( y != null && oy !== y ) {\n\t\t\tisChanged = true;\n\t\t\tsize.y = y;\n\t\t}\n\t\tif( isChanged ) {\n\t\t\tthis.onChange( ox, oy );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupSizeEditor {\n\t\tconst size = this._size;\n\t\treturn new EShapeGroupSizeEditor( this._parent, size.x, size.y );\n\t}\n\n\tcopy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tcopyFrom( point: IPoint ): this {\n\t\tconst x = point.x;\n\t\tconst y = point.y;\n\t\tconst size = this._size;\n\t\tconst ox = size.x;\n\t\tconst oy = size.y;\n\t\tif( ox !== x || oy !== y ) {\n\t\t\tsize.x = x;\n\t\t\tsize.y = y;\n\t\t\tthis.onChange( ox, oy );\n\t\t}\n\t\treturn this;\n\t}\n\n\tcopyTo( point: IPoint ): IPoint {\n\t\treturn this._size.copyTo( point );\n\t}\n\n\tequals( point: IPoint ): boolean {\n\t\treturn this._size.equals( point );\n\t}\n\n\tfit(): void {\n\t\tconst parent = this._parent;\n\t\tparent.disallowOnTransformChange();\n\n\t\t// Calculate the rect\n\t\tconst rect = this.calcRect( this._workRectForFit );\n\n\t\t// Set size\n\t\tconst size = this._size;\n\t\tsize.set( rect.width, rect.height );\n\n\t\t// Position & Pivot\n\t\t// rx := rect.x\n\t\t// ry := rect.y\n\t\t//\n\t\t// | a c tx | | 1 0 +rx | | 1 0 -rx |   | a c tx + (a * rx + c * ry) | | 1 0 -rx |\n\t\t// | b d ty | | 0 1 +ry | | 0 1 -ry | = | b d ty + (b * rx + d * ry) | | 0 1 -ry |\n\t\t// | 0 0 1  | | 0 0  1  | | 0 0  1  |   | 0 0 1                      | | 0 0  1  |\n\t\t//\n\t\t// tx -> tx + (a * rx + c * ry) = poxition.x - (a * pivot.x + c * pivot.y)\n\t\t// ty -> ty + (b * rx + d * ry) = poxition.y - (b * pivot.x + d * pivot.y)\n\t\t// position.x -> position.x + (a * rx + c * ry) - (a * pivot.x + c * pivot.y)\n\t\t// position.y -> position.y + (b * rx + d * ry) - (b * pivot.x + d * pivot.y)\n\t\t// pivot.x -> 0\n\t\t// pivot.y -> 0\n\t\t//\n\t\t// a -> a', b -> b', c -> c', tx -> tx', ty -> ty'\n\t\t//\n\t\t// | a' c' tx' | | 1 0 -rx |   | a' c' tx' - (a' * rx + c' * ry) |\n\t\t// | b' d' ty' | | 0 1 -ry | = | b' d' ty' - (b' * rx + d' * ry) |\n\t\t// | 0  0  1   | | 0 0  1  |   | 0  0  1                         |\n\t\t//\n\t\t// tx' -> tx' - (a' * rx + c' * ry) = poxition.x - (a' * pivot.x + c' * pivot.y)\n\t\t// ty' -> ty' - (b' * rx + d' * ry) = poxition.y - (b' * pivot.x + d' * pivot.y)\n\t\t// pivot.x -> pivot.x + rx\n\t\t// pivot.y -> pivot.y + ry\n\t\tparent.updateTransform();\n\t\tconst transform = parent.transform;\n\t\tconst x = rect.x + rect.width * 0.5;\n\t\tconst y = rect.y + rect.height * 0.5;\n\t\tconst position = transform.position;\n\t\tconst localTransform = transform.localTransform;\n\t\tconst a = localTransform.a;\n\t\tconst b = localTransform.b;\n\t\tconst c = localTransform.c;\n\t\tconst d = localTransform.d;\n\t\tconst pivot = transform.pivot;\n\t\tposition.set(\n\t\t\tposition.x + (a * x + c * y) - (a * pivot.x + c * pivot.y),\n\t\t\tposition.y + (b * x + d * y) - (b * pivot.x + d * pivot.y)\n\t\t);\n\t\tpivot.set( x, y );\n\n\t\t// Reset the data\n\t\tthis.reset( parent.children, this._layouts, size );\n\n\t\t//\n\t\tparent.allowOnTransformChange( true );\n\t}\n\n\tprotected reset( children: EShape[], layouts: EShapeLayout[], size: IPoint ): void {\n\t\tfor( let i = 0, imax = Math.min( layouts.length, children.length ); i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tconst layout = layouts[ i ];\n\t\t\tif( layout.isCompatible( child ) ) {\n\t\t\t\tlayout.reset( child, size.x, size.y );\n\t\t\t} else {\n\t\t\t\tlayouts.length = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif( children.length < layouts.length ) {\n\t\t\tlayouts.length = children.length;\n\t\t}\n\t}\n\n\tcalcRect( result: Rectangle ): Rectangle {\n\t\tconst parent = this._parent;\n\t\tconst children = parent.children;\n\t\tif( children.length <= 0 ) {\n\t\t\tresult.x = 0;\n\t\t\tresult.y = 0;\n\t\t\tresult.width = 0;\n\t\t\tresult.height = 0;\n\t\t} else {\n\t\t\tconst workPoint = this._workPoint;\n\t\t\tconst workRect = this._workRectForCalcRect;\n\t\t\tchildren[ 0 ].getBoundsLocal( workPoint, false, result );\n\t\t\tfor( let i = 1, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tchild.getBoundsLocal( workPoint, false, workRect );\n\t\t\t\tresult.enlarge( workRect );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected onChange( ox: number, oy: number ): void {\n\t\tconst parent = this._parent;\n\t\tconst size = this._size;\n\t\tconst pivot = parent.transform.pivot;\n\t\tthis.onChange_( parent.children, this._layouts, size.x, size.y, pivot.x, pivot.y, ox, oy );\n\t\tparent.onSizeChange();\n\t}\n\n\tprotected onChange_(\n\t\tchildren: EShape[],\n\t\tlayouts: EShapeLayout[],\n\t\tsx: number, sy: number,\n\t\tpx: number, py: number,\n\t\tox: number, oy: number\n\t): void {\n\t\tfor( let i = 0, imax = Math.min( layouts.length, children.length ); i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tconst layout = layouts[ i ];\n\t\t\tif( layout.isCompatible( child ) ) {\n\t\t\t\tlayout.update( child, sx, sy, px, py );\n\t\t\t} else {\n\t\t\t\tlayouts.length = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor( let i = layouts.length, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tconst layout = this.newLayout( child, ox, oy );\n\t\t\tlayout.update( child, sx, sy, px, py );\n\t\t\tlayouts.push( layout );\n\t\t}\n\t\tif( layouts.length !== children.length ) {\n\t\t\tlayouts.length = children.length;\n\t\t}\n\t}\n\n\tprotected newLayout( shape: EShape, ox: number, oy: number ): EShapeLayout {\n\t\treturn shape.layout || new EShapeGroupSizeLayout( shape, ox, oy );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ObservablePoint, Point } from \"pixi.js\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\n\nexport class EShapeGroupSizeViewer extends ObservablePoint implements EShapeGroupSize {\n\tbase: Point;\n\n\tconstructor( cb: () => void, x: number, y: number ) {\n\t\tsuper( cb, undefined, x, y );\n\t\tthis.base = new Point( x, y );\n\t}\n\n\tinit(): void {\n\t\tthis.base.copyFrom( this );\n\t\t(this as any).cb();\n\t}\n\n\tfit(): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeStroke, EShapeStrokeLike, EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupStrokeEditor implements EShapeStroke {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget enable(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.enable;\n\t\t}\n\t\treturn false;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.enable = enable;\n\t\t}\n\t}\n\n\tget color(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.color;\n\t\t}\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.color = color;\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.alpha;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.alpha = alpha;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.width;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset width( width: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.width = width;\n\t\t}\n\t}\n\n\tget align(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.align;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset align( align: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.align = align;\n\t\t}\n\t}\n\n\tget side(): EShapeStrokeSide {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.side;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset side( side: EShapeStrokeSide ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.side = side;\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeStrokeLike> ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.copy( target );\n\t\t}\n\t}\n\n\tset( enable: boolean, color: number, alpha: number, width: number, side: EShapeStrokeSide ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].stroke.set( enable, color, alpha, width, side );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupStrokeEditor {\n\t\treturn new EShapeGroupStrokeEditor( this._parent );\n\t}\n\n\ttoObject(): EShapeStrokeLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].stroke.toObject();\n\t\t}\n\t\treturn {\n\t\t\tenable: false,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0,\n\t\t\twidth: 1.0,\n\t\t\talign: 0.0,\n\t\t\tside: EShapeStrokeSide.NONE\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextAlign, EShapeTextAlignLike } from \"../e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextAlignEditor implements EShapeTextAlign {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget horizontal(): EShapeTextAlignHorizontal {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.align.horizontal;\n\t\t}\n\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t}\n\n\tset horizontal( horizontal: EShapeTextAlignHorizontal ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.align.horizontal = horizontal;\n\t\t}\n\t}\n\n\tget vertical(): EShapeTextAlignVertical {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.align.vertical;\n\t\t}\n\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t}\n\n\tset vertical( vertical: EShapeTextAlignVertical ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.align.vertical = vertical;\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextAlignLike> ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.align.copy( target );\n\t\t}\n\t}\n\n\tset( horizontal?: EShapeTextAlignHorizontal, vertical?: EShapeTextAlignVertical ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.align.set( horizontal, vertical );\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextAlignLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.align.toObject();\n\t\t}\n\t\treturn {\n\t\t\thorizontal: EShapeTextAlignHorizontal.CENTER,\n\t\t\tvertical: EShapeTextAlignVertical.MIDDLE\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffsetLike } from \"../e-shape-text-offset\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextOffsetEditor {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget horizontal(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.offset.horizontal;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.offset.horizontal = horizontal;\n\t\t}\n\t}\n\n\tget vertical(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.offset.vertical;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.offset.vertical = vertical;\n\t\t}\n\t}\n\n\tcopy( target: EShapeTextOffsetLike ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.offset.copy( target );\n\t\t}\n\t}\n\n\tset( horizontal: number, vertical: number ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.offset.set( horizontal, vertical );\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.offset.toObject();\n\t\t}\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextOutlineEditor implements EShapeTextOutline {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget enable(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.enable;\n\t\t}\n\t\treturn false;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.enable = enable;\n\t\t}\n\t}\n\n\tget color(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.color;\n\t\t}\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.color = color;\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.alpha;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.alpha = alpha;\n\t\t}\n\t}\n\n\tget width(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.width;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset width( width: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.width = width;\n\t\t}\n\t}\n\n\tcopy( target?: Partial<EShapeTextOutlineLike> ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.copy( target );\n\t\t}\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.outline.set( enable, color, alpha, width );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupTextOutlineEditor {\n\t\treturn new EShapeGroupTextOutlineEditor( this._parent );\n\t}\n\n\ttoObject(): EShapeTextOutlineLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.outline.toObject();\n\t\t}\n\t\treturn {\n\t\t\tenable: false,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0,\n\t\t\twidth: 1.0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffsetLike } from \"../e-shape-text-offset\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextPaddingEditor {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget horizontal(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.padding.horizontal;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.padding.horizontal = horizontal;\n\t\t}\n\t}\n\n\tget vertical(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.padding.vertical;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.padding.vertical = vertical;\n\t\t}\n\t}\n\n\tcopy( target: EShapeTextOffsetLike ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.padding.copy( target );\n\t\t}\n\t}\n\n\tset( horizontal: number, vertical: number ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.padding.set( horizontal, vertical );\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.padding.toObject();\n\t\t}\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffsetLike } from \"../e-shape-text-offset\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\n\nexport class EShapeGroupTextSpacingEditor {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tget horizontal(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.spacing.horizontal;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.spacing.horizontal = horizontal;\n\t\t}\n\t}\n\n\tget vertical(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.spacing.vertical;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.spacing.vertical = vertical;\n\t\t}\n\t}\n\n\tcopy( target: EShapeTextOffsetLike ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.spacing.copy( target );\n\t\t}\n\t}\n\n\tset( horizontal: number, vertical: number ): void {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.spacing.set( horizontal, vertical );\n\t\t}\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.spacing.toObject();\n\t\t}\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DeepPartial } from \"../../util/deep-partial\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeText, EShapeTextLike, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\nimport { EShapeTextOutline } from \"../e-shape-text-outline\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\nimport { EShapeGroupTextAlignEditor } from \"./e-shape-group-text-align-editor\";\nimport { EShapeGroupTextOffsetEditor } from \"./e-shape-group-text-offset-editor\";\nimport { EShapeGroupTextOutlineEditor } from \"./e-shape-group-text-outline-editor\";\nimport { EShapeGroupTextPaddingEditor } from \"./e-shape-group-text-padding-editor\";\nimport { EShapeGroupTextSpacingEditor } from \"./e-shape-group-text-spacing-editor\";\n\nexport class EShapeGroupTextEditor implements EShapeText {\n\tprotected _parent: EShapeGroupPropertyParent;\n\n\talign: EShapeGroupTextAlignEditor;\n\toffset: EShapeGroupTextOffsetEditor;\n\toutline: EShapeTextOutline;\n\tspacing: EShapeGroupTextSpacingEditor;\n\tpadding: EShapeGroupTextPaddingEditor;\n\n\tconstructor( parent: EShapeGroupPropertyParent ) {\n\t\tthis._parent = parent;\n\n\t\tthis.align = new EShapeGroupTextAlignEditor( parent );\n\t\tthis.offset = new EShapeGroupTextOffsetEditor( parent );\n\t\tthis.outline = new EShapeGroupTextOutlineEditor( parent );\n\t\tthis.spacing = new EShapeGroupTextSpacingEditor( parent );\n\t\tthis.padding = new EShapeGroupTextPaddingEditor( parent );\n\t}\n\n\tget enable(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.enable;\n\t\t}\n\t\treturn true;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.enable = enable;\n\t\t}\n\t}\n\n\tget value(): string {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.value;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tset value( value: string ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.value = value;\n\t\t}\n\t}\n\n\tget color(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.color;\n\t\t}\n\t\treturn 0x000000;\n\t}\n\n\tset color( color: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.color = color;\n\t\t}\n\t}\n\n\tget alpha(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.alpha;\n\t\t}\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.alpha = alpha;\n\t\t}\n\t}\n\n\tget family(): string {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.family;\n\t\t}\n\t\treturn \"auto\";\n\t}\n\n\tset family( family: string ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.family = family;\n\t\t}\n\t}\n\n\tget size(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.size;\n\t\t}\n\t\treturn 24;\n\t}\n\n\tset size( size: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.size = size;\n\t\t}\n\t}\n\n\tget weight(): EShapeTextWeight {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.weight;\n\t\t}\n\t\treturn EShapeTextWeight.NORMAL;\n\t}\n\n\tset weight( weight: EShapeTextWeight ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.weight = weight;\n\t\t}\n\t}\n\n\tget style(): EShapeTextStyle {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.style;\n\t\t}\n\t\treturn EShapeTextStyle.NORMAL;\n\t}\n\n\tset style( style: EShapeTextStyle ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.style = style;\n\t\t}\n\t}\n\n\tget direction(): number {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.direction;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tset direction( direction: number ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.direction = direction;\n\t\t}\n\t}\n\n\tget clipping(): boolean {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.clipping;\n\t\t}\n\t\treturn false;\n\t}\n\n\tset clipping( clipping: boolean ) {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.clipping = clipping;\n\t\t}\n\t}\n\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.copy( target );\n\t\t}\n\t\treturn this;\n\t}\n\n\tset(\n\t\tvalue?: string, color?: number, alpha?: number,\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection\n\t): this {\n\t\tconst children = this._parent.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].text.set( value, color, alpha, family, size, weight, style, direction );\n\t\t}\n\t\treturn this;\n\t}\n\n\ttoObject(): EShapeTextLike {\n\t\tconst children = this._parent.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].text.toObject();\n\t\t}\n\t\treturn {\n\t\t\tvalue: \"\",\n\t\t\tcolor: 0x000000,\n\t\t\talpha: 1.0,\n\t\t\tfamily: \"auto\",\n\t\t\tsize: 24,\n\t\t\tweight: EShapeTextWeight.NORMAL,\n\t\t\talign: this.align.toObject(),\n\t\t\toffset: this.offset.toObject(),\n\t\t\tstyle: EShapeTextStyle.NORMAL,\n\t\t\toutline: this.outline.toObject(),\n\t\t\tspacing: this.spacing.toObject(),\n\t\t\tdirection: EShapeTextDirection.LEFT_TO_RIGHT,\n\t\t\tpadding: this.padding.toObject(),\n\t\t\tclipping: false\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeDefaults } from \"../e-shape-defaults\";\nimport { EShapeFill } from \"../e-shape-fill\";\nimport { EShapeGradientLike } from \"../e-shape-gradient\";\nimport { EShapePoints } from \"../e-shape-points\";\nimport { EShapeStroke } from \"../e-shape-stroke\";\nimport { EShapeTag } from \"../e-shape-tag\";\nimport { EShapeText } from \"../e-shape-text\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeBase } from \"./e-shape-base\";\nimport { EShapeGroupFillEditor } from \"./e-shape-group-fill-editor\";\nimport { EShapeGroupPoints } from \"./e-shape-group-points\";\nimport { EShapeGroupPropertyParent } from \"./e-shape-group-property-parent\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\nimport { EShapeGroupSizeEditor } from \"./e-shape-group-size-editor\";\nimport { EShapeGroupSizeViewer } from \"./e-shape-group-size-viewer\";\nimport { EShapeGroupStrokeEditor } from \"./e-shape-group-stroke-editor\";\nimport { EShapeGroupTextEditor } from \"./e-shape-group-text-editor\";\nimport { EShapeTagImpl } from \"./e-shape-tag-impl\";\n\nexport class EShapeGroup extends EShapeBase implements EShapeGroupPropertyParent {\n\tsize: EShapeGroupSize;\n\tfill: EShapeFill;\n\tstroke: EShapeStroke;\n\ttag: EShapeTag;\n\ttext: EShapeText;\n\n\tprotected _points?: EShapeGroupPoints;\n\n\tconstructor( type = EShapeType.GROUP ) {\n\t\tsuper( type );\n\t\tthis.tag = new EShapeTagImpl();\n\t\tthis.size = this.newGroupSize();\n\t\tthis.fill = this.newGroupFill();\n\t\tthis.stroke = this.newGroupStroke();\n\t\tthis.text = this.newGroupText();\n\t\tthis.points = this.newGroupPoints();\n\t}\n\n\tprotected newGroupSize(): EShapeGroupSize {\n\t\tif( EShapeDefaults.IS_EDIT_MODE ) {\n\t\t\treturn new EShapeGroupSizeEditor(\n\t\t\t\tthis,\n\t\t\t\tEShapeDefaults.SIZE_X,\n\t\t\t\tEShapeDefaults.SIZE_Y\n\t\t\t);\n\t\t} else {\n\t\t\tconst result = new EShapeGroupSizeViewer(\n\t\t\t\t() => {\n\t\t\t\t\tconst base = result.base;\n\t\t\t\t\tthis.transform.scale.set(\n\t\t\t\t\t\tresult.x / base.x,\n\t\t\t\t\t\tresult.y / base.y\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tEShapeDefaults.SIZE_X,\n\t\t\t\tEShapeDefaults.SIZE_Y\n\t\t\t);\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tprotected newGroupFill(): EShapeFill {\n\t\treturn new EShapeGroupFillEditor( this );\n\t}\n\n\tprotected newGroupStroke(): EShapeStroke {\n\t\treturn new EShapeGroupStrokeEditor( this );\n\t}\n\n\tprotected newGroupText(): EShapeText {\n\t\treturn new EShapeGroupTextEditor( this );\n\t}\n\n\tprotected newGroupPoints(): EShapePoints | undefined {\n\t\treturn new EShapeGroupPoints( this );\n\t}\n\n\tprotected getBoundsSize(): IPoint {\n\t\tconst size = this.size;\n\t\tif( size instanceof EShapeGroupSizeViewer ) {\n\t\t\treturn size.base;\n\t\t} else {\n\t\t\treturn size;\n\t\t}\n\t}\n\n\tonChildTransformChange(): void {\n\t\tsuper.onChildTransformChange();\n\t\tthis.size.fit();\n\t}\n\n\tget corner(): EShapeCorner {\n\t\tconst children = this.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].corner;\n\t\t}\n\t\treturn EShapeCorner.ALL;\n\t}\n\n\tset corner( corner: EShapeCorner ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].corner = corner;\n\t\t}\n\t}\n\n\tget cursor(): string {\n\t\tconst children = this.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].cursor;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tset cursor( cursor: string ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].cursor = cursor;\n\t\t}\n\t}\n\n\tget gradient(): EShapeGradientLike | undefined {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst gradient = children[ i ].gradient;\n\t\t\tif( gradient != null ) {\n\t\t\t\treturn gradient;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tset gradient( gradient: EShapeGradientLike | undefined ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].gradient = gradient;\n\t\t}\n\t}\n\n\tget radius(): number {\n\t\tconst children = this.children;\n\t\tif( 0 < children.length ) {\n\t\t\treturn children[ children.length - 1 ].radius;\n\t\t}\n\t\treturn 0.5;\n\t}\n\n\tset radius( radius: number ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].radius = radius;\n\t\t}\n\t}\n\n\tget image(): HTMLImageElement | undefined {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst image = children[ i ].image;\n\t\t\tif( image != null ) {\n\t\t\t\treturn image;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tset image( image: HTMLImageElement | undefined ) {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tchildren[ i ].image = image;\n\t\t}\n\t}\n\n\tget points(): EShapePoints | undefined {\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst points = children[ i ].points;\n\t\t\tif( points != null ) {\n\t\t\t\treturn this._points;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tset points( points: EShapePoints | undefined ) {\n\t\t// DO NOTHING\n\t}\n\n\tclone(): EShapeGroup {\n\t\tconst constructor = this.constructor as new () => EShapeGroup;\n\t\tconst result = new constructor().copy( this );\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst clone = children[ i ].clone();\n\t\t\tclone.parent = result;\n\t\t\tresult.children.push( clone );\n\t\t}\n\t\tresult.onChildTransformChange();\n\t\tresult.toDirty();\n\t\treturn result;\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeGroup } from \"./e-shape-group\";\n\nexport class EShapeGroups {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeGroup> | EShapeGroup {\n\t\tconst shape = EShapeGroups.create();\n\t\tconst result = EShapeDeserializer.deserialize( item, manager, shape );\n\t\tshape.size.init();\n\t\treturn result;\n\t}\n\n\tstatic create(): EShapeGroup {\n\t\treturn new EShapeGroup();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeGroupUploadeds } from \"../shape/variant/e-shape-group-uploadeds\";\nimport { EShapeGroups } from \"../shape/variant/e-shape-groups\";\n\nexport const loadShapeGroup = () => {\n\tEShapeUploadeds[ EShapeType.GROUP ] = EShapeGroupUploadeds.create;\n\tEShapeDeserializers[ EShapeType.GROUP ] = EShapeGroups.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Point } from \"pixi.js\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\nimport { EShapeGroupSizeParent } from \"./e-shape-group-size-parent\";\n\nexport class EShapeGroupSizeShadowed implements EShapeGroupSize {\n\tprotected _parent: EShapeGroupSizeParent;\n\tprotected _size: Point;\n\n\tconstructor( parent: EShapeGroupSizeParent, x: number, y: number ) {\n\t\tthis._parent = parent;\n\t\tthis._size = new Point( x, y );\n\t}\n\n\tinit(): void {\n\t\t// DO NOTHING\n\t}\n\n\tget x(): number {\n\t\treturn this._size.x;\n\t}\n\n\tset x( x: number ) {\n\t\tconst size = this._size;\n\t\tif( size.x !== x ) {\n\t\t\tconst ox = size.x;\n\t\t\tsize.x = x;\n\t\t\tthis.onChange( ox, size.y );\n\t\t}\n\t}\n\n\tget y(): number {\n\t\treturn this._size.y;\n\t}\n\n\tset y( y: number ) {\n\t\tconst size = this._size;\n\t\tif( size.y !== y ) {\n\t\t\tconst oy = size.y;\n\t\t\tsize.y = y;\n\t\t\tthis.onChange( size.x, oy );\n\t\t}\n\t}\n\n\tset( x?: number | undefined, y?: number | undefined ): void {\n\t\tlet isChanged = false;\n\t\tconst size = this._size;\n\t\tconst ox = size.x;\n\t\tconst oy = size.y;\n\t\tif( x != null && ox !== x ) {\n\t\t\tisChanged = true;\n\t\t\tsize.x = x;\n\t\t}\n\t\tif( y != null && oy !== y ) {\n\t\t\tisChanged = true;\n\t\t\tsize.y = y;\n\t\t}\n\t\tif( isChanged ) {\n\t\t\tthis.onChange( ox, oy );\n\t\t}\n\t}\n\n\tclone(): EShapeGroupSizeShadowed {\n\t\tconst size = this._size;\n\t\treturn new EShapeGroupSizeShadowed( this._parent, size.x, size.y );\n\t}\n\n\tcopy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tcopyFrom( point: IPoint ): this {\n\t\tconst x = point.x;\n\t\tconst y = point.y;\n\t\tconst size = this._size;\n\t\tconst ox = size.x;\n\t\tconst oy = size.y;\n\t\tif( ox !== x || oy !== y ) {\n\t\t\tsize.x = x;\n\t\t\tsize.y = y;\n\t\t\tthis.onChange( ox, oy );\n\t\t}\n\t\treturn this;\n\t}\n\n\tcopyTo( point: IPoint ): IPoint {\n\t\treturn this._size.copyTo( point );\n\t}\n\n\tequals( point: IPoint ): boolean {\n\t\treturn this._size.equals( point );\n\t}\n\n\tfit(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected onChange( ox: number, oy: number ): void {\n\t\tthis._parent.onSizeChange();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDefaults } from \"../e-shape-defaults\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeGroup } from \"./e-shape-group\";\nimport { EShapeGroupSize } from \"./e-shape-group-size\";\nimport { EShapeGroupSizeShadowed } from \"./e-shape-group-size-shadowed\";\n\nexport class EShapeGroupShadowed extends EShapeGroup {\n\tconstructor( type: EShapeType = EShapeType.GROUP_SHADOWED ) {\n\t\tsuper( type );\n\t}\n\n\tprotected newGroupSize(): EShapeGroupSize {\n\t\tif( EShapeDefaults.IS_EDIT_MODE ) {\n\t\t\treturn new EShapeGroupSizeShadowed(\n\t\t\t\tthis,\n\t\t\t\tEShapeDefaults.SIZE_X,\n\t\t\t\tEShapeDefaults.SIZE_Y\n\t\t\t);\n\t\t} else {\n\t\t\treturn super.newGroupSize();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeGroupShadowed } from \"./e-shape-group-shadowed\";\n\nexport class EShapeGroupShadoweds {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeGroupShadowed> | EShapeGroupShadowed {\n\t\tconst shape = EShapeGroupShadoweds.create();\n\t\tconst result = EShapeDeserializer.deserialize( item, manager, shape );\n\t\tshape.size.init();\n\t\treturn result;\n\t}\n\n\tstatic create(): EShapeGroupShadowed {\n\t\treturn new EShapeGroupShadowed();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeGroupShadoweds } from \"../shape/variant/e-shape-group-shadoweds\";\nimport { EShapeGroupUploadeds } from \"../shape/variant/e-shape-group-uploadeds\";\n\nexport const loadShapeGroupShadowed = () => {\n\tEShapeUploadeds[ EShapeType.GROUP_SHADOWED ] = EShapeGroupUploadeds.create;\n\tEShapeDeserializers[ EShapeType.GROUP_SHADOWED ] = EShapeGroupShadoweds.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeRectangle extends EShapePrimitive {\n\tconstructor( type = EShapeType.RECTANGLE ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeRectangle {\n\t\treturn new EShapeRectangle().copy( this );\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst fill = this.fill;\n\t\t\tconst stroke = this.stroke;\n\t\t\tif( fill.enable ) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconst strokeWidth = stroke.width;\n\t\t\t\tconst strokeSide = stroke.side;\n\t\t\t\tif( stroke.enable && 0 < strokeWidth && strokeSide !== EShapeStrokeSide.NONE ) {\n\t\t\t\t\tconst wx = Math.max( 0.0, ax - strokeWidth );\n\t\t\t\t\tconst wy = Math.max( 0.0, ay - strokeWidth );\n\t\t\t\t\tif( ! this.containsAbsBBox( x, y, wx, wy ) ) {\n\t\t\t\t\t\tif( strokeSide === EShapeStrokeSide.ALL ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( x <= -wx ) {\n\t\t\t\t\t\t\t\tif( y <= -wy ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.TOP_OR_LEFT ) !== 0;\n\t\t\t\t\t\t\t\t} else if( +wy <= y ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.BOTTOM_OR_LEFT ) !== 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.LEFT ) !== 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if( +wx <= x ) {\n\t\t\t\t\t\t\t\tif( y <= -wy ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.TOP_OR_RIGHT ) !== 0;\n\t\t\t\t\t\t\t\t} else if( +wy <= y ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.BOTTOM_OR_RIGHT ) !== 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.RIGHT ) !== 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( y <= -wy ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.TOP ) !== 0;\n\t\t\t\t\t\t\t\t} else if( +wy <= y ) {\n\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.BOTTOM ) !== 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeRectangle } from \"./e-shape-rectangle\";\n\nexport class EShapeImage extends EShapeRectangle {\n\tconstructor( image?: HTMLImageElement, type = EShapeType.IMAGE ) {\n\t\tsuper( type );\n\t\tif( image != null ) {\n\t\t\tthis.image = image;\n\t\t\tthis.size.set( image.width, image.height );\n\t\t}\n\t\tthis.fill.alpha = 1.0;\n\t}\n\n\tclone(): EShapeImage {\n\t\treturn new EShapeImage( this.image ).copy( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeImageElements } from \"../e-shape-image-elements\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeImage } from \"./e-shape-image\";\n\nexport class EShapeImages {\n\tstatic from( dataUrl: string ): Promise<EShapeImage> {\n\t\treturn EShapeImageElements.toImageElement( dataUrl ).then(( imageElement: HTMLImageElement ) => {\n\t\t\treturn new EShapeImage( imageElement );\n\t\t});\n\t}\n\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeImage> | EShapeImage {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeImages.create() );\n\t}\n\n\tstatic create(): EShapeImage {\n\t\treturn new EShapeImage();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeRectangleUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Clippings\n\t\tbuffer.clippingBuffer.update();\n\t\tconst clippings = buffer.clippings;\n\t\tlet ic = voffset * 3;\n\t\tclippings[ ic + 0 ] = 1;\n\t\tclippings[ ic + 1 ] = 1;\n\t\tclippings[ ic + 2 ] = 0;\n\n\t\tclippings[ ic + 3 ] = 0;\n\t\tclippings[ ic + 4 ] = 1;\n\t\tclippings[ ic + 5 ] = 0;\n\n\t\tclippings[ ic + 6 ] = 1;\n\t\tclippings[ ic + 7 ] = 1;\n\t\tclippings[ ic + 8 ] = 0;\n\t\tic += 9;\n\n\t\tclippings[ ic + 0 ] = 0;\n\t\tclippings[ ic + 1 ] = 0;\n\t\tclippings[ ic + 2 ] = 0;\n\t\tic += 3;\n\n\t\tclippings[ ic +  0 ] = 1;\n\t\tclippings[ ic +  1 ] = 0;\n\t\tclippings[ ic +  2 ] = 0;\n\n\t\tclippings[ ic +  3 ] = 0;\n\t\tclippings[ ic +  4 ] = 0;\n\t\tclippings[ ic +  5 ] = 0;\n\n\t\tclippings[ ic +  6 ] = 0;\n\t\tclippings[ ic +  7 ] = 0;\n\t\tclippings[ ic +  8 ] = 0;\n\n\t\tclippings[ ic +  9 ] = 1;\n\t\tclippings[ ic + 10 ] = 0;\n\t\tclippings[ ic + 11 ] = 0;\n\t\tic += 12;\n\n\t\tclippings[ ic + 0 ] = 0;\n\t\tclippings[ ic + 1 ] = 0;\n\t\tclippings[ ic + 2 ] = 0;\n\t\tic += 3;\n\n\t\tclippings[ ic + 0 ] = 1;\n\t\tclippings[ ic + 1 ] = 1;\n\t\tclippings[ ic + 2 ] = 0;\n\n\t\tclippings[ ic + 3 ] = 0;\n\t\tclippings[ ic + 4 ] = 1;\n\t\tclippings[ ic + 5 ] = 0;\n\n\t\tclippings[ ic + 6 ] = 1;\n\t\tclippings[ ic + 7 ] = 1;\n\t\tclippings[ ic + 8 ] = 0;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tconst ii = ioffset * 3;\n\t\tindices[ ii +  0 ] = voffset + 0;\n\t\tindices[ ii +  1 ] = voffset + 1;\n\t\tindices[ ii +  2 ] = voffset + 3;\n\n\t\tindices[ ii +  3 ] = voffset + 1;\n\t\tindices[ ii +  4 ] = voffset + 2;\n\t\tindices[ ii +  5 ] = voffset + 3;\n\n\t\tindices[ ii +  6 ] = voffset + 0;\n\t\tindices[ ii +  7 ] = voffset + 5;\n\t\tindices[ ii +  8 ] = voffset + 4;\n\n\t\tindices[ ii +  9 ] = voffset + 6;\n\t\tindices[ ii + 10 ] = voffset + 2;\n\t\tindices[ ii + 11 ] = voffset + 7;\n\n\t\tindices[ ii + 12 ] = voffset + 4;\n\t\tindices[ ii + 13 ] = voffset + 5;\n\t\tindices[ ii + 14 ] = voffset + 9;\n\n\t\tindices[ ii + 15 ] = voffset + 9;\n\t\tindices[ ii + 16 ] = voffset + 8;\n\t\tindices[ ii + 17 ] = voffset + 10;\n\n\t\tindices[ ii + 18 ] = voffset + 8;\n\t\tindices[ ii + 19 ] = voffset + 11;\n\t\tindices[ ii + 20 ] = voffset + 10;\n\n\t\tindices[ ii + 21 ] = voffset + 6;\n\t\tindices[ ii + 22 ] = voffset + 7;\n\t\tindices[ ii + 23 ] = voffset + 11;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateType0Vertex( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateType0Step( buffer, shape );\n\t\tthis.updateType0Uv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateType0Vertex( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\n\t\t\t// Invalidate the stroke width to update the steps / antialiases.\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\t//\n\t\t\t//  0       1       2\n\t\t\t// |-------|-------|\n\t\t\t// |4      |3,5,6  |7\n\t\t\t// |-------|-------|\n\t\t\t// |       |8      |\n\t\t\t// |-------|-------|\n\t\t\t//  9       10      11\n\t\t\t//\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = this.buffer.work;\n\t\t\twork.set( -sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x1 = work.x;\n\t\t\tconst y1 = work.y;\n\t\t\tconst dx = x1 - x0;\n\t\t\tconst dy = y1 - y0;\n\t\t\tconst x3 = internalTransform.tx;\n\t\t\tconst y3 = internalTransform.ty;\n\t\t\tconst x10 = x3 + (x3 - x1);\n\t\t\tconst y10 = y3 + (y3 - y1);\n\t\t\tconst x4 = x3 - dx;\n\t\t\tconst y4 = y3 - dy;\n\n\t\t\t// World size\n\t\t\tthis.worldSizeXHalf = this.calcLength( x0, y0, x1, y1 );\n\t\t\tthis.worldSizeYHalf = this.calcLength( x0, y0, x4, y4 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tlet iv = voffset * 2;\n\t\t\tvertices[ iv + 0 ] = x0;\n\t\t\tvertices[ iv + 1 ] = y0;\n\t\t\tvertices[ iv + 2 ] = x1;\n\t\t\tvertices[ iv + 3 ] = y1;\n\t\t\tvertices[ iv + 4 ] = x1 + dx;\n\t\t\tvertices[ iv + 5 ] = y1 + dy;\n\t\t\tiv += 6;\n\n\t\t\tvertices[ iv + 0 ] = x3;\n\t\t\tvertices[ iv + 1 ] = y3;\n\t\t\tiv += 2;\n\n\t\t\tvertices[ iv + 0 ] = x4;\n\t\t\tvertices[ iv + 1 ] = y4;\n\t\t\tvertices[ iv + 2 ] = x3;\n\t\t\tvertices[ iv + 3 ] = y3;\n\t\t\tvertices[ iv + 4 ] = x3;\n\t\t\tvertices[ iv + 5 ] = y3;\n\t\t\tvertices[ iv + 6 ] = x3 + dx;\n\t\t\tvertices[ iv + 7 ] = y3 + dy;\n\t\t\tiv += 8;\n\n\t\t\tvertices[ iv + 0 ] = x3;\n\t\t\tvertices[ iv + 1 ] = y3;\n\t\t\tiv += 2;\n\n\t\t\tvertices[ iv + 0 ] = x10 - dx;\n\t\t\tvertices[ iv + 1 ] = y10 - dy;\n\t\t\tvertices[ iv + 2 ] = x10;\n\t\t\tvertices[ iv + 3 ] = y10;\n\t\t\tvertices[ iv + 4 ] = x10 + dx;\n\t\t\tvertices[ iv + 5 ] = y10 + dy;\n\t\t}\n\t}\n\n\tprotected updateType0Step( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst strokeSide = stroke.side;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth || this.strokeSide !== strokeSide ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tthis.strokeSide = strokeSide;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tthis.calcStep( this.worldSizeXHalf, strokeWidth, work );\n\t\t\tconst swx = work[ 0 ];\n\t\t\tconst px0 = work[ 1 ];\n\t\t\tconst px1 = work[ 2 ];\n\n\t\t\tthis.calcStep( this.worldSizeYHalf, strokeWidth, work );\n\t\t\tconst swy = work[ 0 ];\n\t\t\tconst py0 = work[ 1 ];\n\t\t\tconst py1 = work[ 2 ];\n\n\t\t\tlet swt = swy;\n\t\t\tlet pt0 = py0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.TOP) ) {\n\t\t\t\tswt = 1;\n\t\t\t\tpt0 = py1;\n\t\t\t}\n\t\t\tlet swr = swx;\n\t\t\tlet pr0 = px0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.RIGHT) ) {\n\t\t\t\tswr = 1;\n\t\t\t\tpr0 = px1;\n\t\t\t}\n\t\t\tlet swb = swy;\n\t\t\tlet pb0 = py0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.BOTTOM) ) {\n\t\t\t\tswb = 1;\n\t\t\t\tpb0 = py1;\n\t\t\t}\n\t\t\tlet swl = swx;\n\t\t\tlet pl0 = px0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.LEFT) ) {\n\t\t\t\tswl = 1;\n\t\t\t\tpl0 = px1;\n\t\t\t}\n\t\t\tconst pc0 = 0.5 * (pl0 + pr0);\n\t\t\tconst pm0 = 0.5 * (pt0 + pb0);\n\n\t\t\tconst steps = buffer.steps;\n\t\t\tconst antialiases = buffer.antialiases;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet is = voffset * 2;\n\t\t\tlet ia = voffset * 4;\n\n\t\t\t// 0\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 1\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = pc0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 2\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 3\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pc0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 4\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pm0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 5\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pm0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 6\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pm0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 7\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pm0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 8\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pc0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 9\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 10\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pc0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// 11\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\t\t}\n\t}\n\n\tprotected updateType0Uv( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\tconst x02 = 0.5 * ( x0 + x2 );\n\t\t\tconst y02 = 0.5 * ( y0 + y2 );\n\n\t\t\t// UVs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet iuv = voffset * 2;\n\t\t\tuvs[ iuv + 0 ] = x0;\n\t\t\tuvs[ iuv + 1 ] = y0;\n\t\t\tuvs[ iuv + 2 ] = 0.5 * ( x0 + x1 );\n\t\t\tuvs[ iuv + 3 ] = 0.5 * ( y0 + y1 );\n\t\t\tuvs[ iuv + 4 ] = x1;\n\t\t\tuvs[ iuv + 5 ] = y1;\n\t\t\tiuv += 6;\n\n\t\t\tuvs[ iuv + 0 ] = x02;\n\t\t\tuvs[ iuv + 1 ] = y02;\n\t\t\tiuv += 2;\n\n\t\t\tuvs[ iuv + 0 ] = 0.5 * ( x0 + x3 );\n\t\t\tuvs[ iuv + 1 ] = 0.5 * ( y0 + y3 );\n\t\t\tuvs[ iuv + 2 ] = x02;\n\t\t\tuvs[ iuv + 3 ] = y02;\n\t\t\tuvs[ iuv + 4 ] = x02;\n\t\t\tuvs[ iuv + 5 ] = y02;\n\t\t\tuvs[ iuv + 6 ] = 0.5 * ( x1 + x2 );\n\t\t\tuvs[ iuv + 7 ] = 0.5 * ( y1 + y2 );\n\t\t\tiuv += 8;\n\n\t\t\tuvs[ iuv + 0 ] = x02;\n\t\t\tuvs[ iuv + 1 ] = y02;\n\t\t\tiuv += 2;\n\n\t\t\tuvs[ iuv + 0 ] = x3;\n\t\t\tuvs[ iuv + 1 ] = y3;\n\t\t\tuvs[ iuv + 2 ] = 0.5 * ( x3 + x2 );\n\t\t\tuvs[ iuv + 3 ] = 0.5 * ( y3 + y2 );\n\t\t\tuvs[ iuv + 4 ] = x2;\n\t\t\tuvs[ iuv + 5 ] = y2;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeRectangleUploaded } from \"./e-shape-rectangle-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeRectangleUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number,\n\t\tantialiasWeight: number\n\t): EShapeRectangleUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 12 + tvcount;\n\t\tconst icount = 8 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeRectangleUploaded(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, ioffset,\n\t\t\t\ttvcount, ticount,\n\t\t\t\tvcount, icount,\n\t\t\t\tantialiasWeight\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeImages } from \"../shape/variant/e-shape-images\";\nimport { EShapeRectangleUploadeds } from \"../shape/variant/e-shape-rectangle-uploadeds\";\n\nexport const loadShapeImage = () => {\n\tEShapeUploadeds[ EShapeType.IMAGE ] = EShapeRectangleUploadeds.create;\n\tEShapeDeserializers[ EShapeType.IMAGE ] = EShapeImages.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeLabelUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tthis.initText();\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateLabelVertex( buffer, shape );\n\t\tthis.updateLabelUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tupdateLabelVertex( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tif( isSizeChanged || isTransformChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t}\n\t}\n\n\tupdateLabelUv( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tthis.texture = this.toTexture( shape );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeLabelUploaded } from \"./e-shape-label-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeLabelUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number,\n\t\tantialiasWeight: number\n\t): EShapeLabelUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = tvcount;\n\t\tconst icount = ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeLabelUploaded(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, ioffset,\n\t\t\t\ttvcount, ticount,\n\t\t\t\tvcount, icount,\n\t\t\t\tantialiasWeight\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeLabel extends EShapePrimitive {\n\tconstructor( type: EShapeType = EShapeType.LABEL ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeLabel {\n\t\treturn new EShapeLabel().copy( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeLabel } from \"./e-shape-label\";\n\nexport class EShapeLabels {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeLabel> | EShapeLabel {\n\t\treturn EShapeDeserializer.deserialize( item, manager, new EShapeLabel() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeLabelUploadeds } from \"../shape/variant/e-shape-label-uploadeds\";\nimport { EShapeLabels } from \"../shape/variant/e-shape-labels\";\n\nexport const loadShapeLabel = () => {\n\tEShapeUploadeds[ EShapeType.LABEL ] = EShapeLabelUploadeds.create;\n\tEShapeDeserializers[ EShapeType.LABEL ] = EShapeLabels.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix } from \"pixi.js\";\nimport { utilIndexOf } from \"../../util/util-index-of\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsStyleUploadeds } from \"../e-shape-points-style-uploadeds\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nconst FMIN: number = 0.00001;\n\nexport class EShapeLineUploaded extends EShapeTextUploaded {\n\tprotected pointCount: number;\n\tprotected pointId: number;\n\tprotected pointsClosed: boolean;\n\tprotected pointsStyle: EShapePointsStyle;\n\tprotected length: number;\n\n\tconstructor(\n\t\tbuffer: EShapeBuffer,\n\t\tvoffset: number, ioffset: number,\n\t\ttvcount: number, ticount: number,\n\t\tvcount: number, icount: number,\n\t\tantialiasWeight: number,\n\t\tpointCount: number, pointsClosed: boolean\n\t) {\n\t\tsuper( buffer, voffset, ioffset, tvcount, ticount, vcount, icount, antialiasWeight );\n\t\tthis.pointId = NaN;\n\t\tthis.pointCount = pointCount;\n\t\tthis.pointsClosed = pointsClosed;\n\t\tthis.pointsStyle = EShapePointsStyle.NONE;\n\t\tthis.length = 1;\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\t\tconst pointCount = this.pointCount;\n\t\tconst pointsClosed = this.pointsClosed;\n\n\t\t// Clipping & indices\n\t\tif( 2 <= pointCount ) {\n\t\t\tbuffer.clippingBuffer.update();\n\t\t\tconst clippings = buffer.clippings;\n\t\t\tbuffer.indexBuffer.update();\n\t\t\tconst indices = buffer.indices;\n\n\t\t\tlet ic = voffset * 3;\n\t\t\tlet ii = ioffset * 3;\n\t\t\tlet io = voffset;\n\n\t\t\t// First\n\t\t\tif( ! pointsClosed ) {\n\t\t\t\tclippings[ ic +  0 ] = 1;\n\t\t\t\tclippings[ ic +  1 ] = 0;\n\t\t\t\tclippings[ ic +  2 ] = 3;\n\n\t\t\t\tclippings[ ic +  3 ] = 0;\n\t\t\t\tclippings[ ic +  4 ] = 1;\n\t\t\t\tclippings[ ic +  5 ] = 5;\n\t\t\t\tic += 6;\n\n\t\t\t\tindices[ ii + 0 ] = io + 0;\n\t\t\t\tindices[ ii + 1 ] = io + 2;\n\t\t\t\tindices[ ii + 2 ] = io + 1;\n\n\t\t\t\tindices[ ii + 3 ] = io + 1;\n\t\t\t\tindices[ ii + 4 ] = io + 2;\n\t\t\t\tindices[ ii + 5 ] = io + 3;\n\t\t\t\tio += 2;\n\t\t\t\tii += 6;\n\t\t\t}\n\n\t\t\t// Middle\n\t\t\tfor( let i = (pointsClosed ? 0 : 1), imax = pointCount - i; i < imax; ++i ) {\n\t\t\t\tclippings[ ic +  0 ] = 1;\n\t\t\t\tclippings[ ic +  1 ] = 0;\n\t\t\t\tclippings[ ic +  2 ] = 3;\n\n\t\t\t\tclippings[ ic +  3 ] = 0;\n\t\t\t\tclippings[ ic +  4 ] = 1;\n\t\t\t\tclippings[ ic +  5 ] = 5;\n\n\t\t\t\tclippings[ ic +  6 ] = 1;\n\t\t\t\tclippings[ ic +  7 ] = 0;\n\t\t\t\tclippings[ ic +  8 ] = 4;\n\n\t\t\t\tclippings[ ic +  9 ] = 0;\n\t\t\t\tclippings[ ic + 10 ] = 1;\n\t\t\t\tclippings[ ic + 11 ] = 6;\n\t\t\t\tic += 12;\n\n\t\t\t\tindices[ ii +  0 ] = io + 0;\n\t\t\t\tindices[ ii +  1 ] = io + 2;\n\t\t\t\tindices[ ii +  2 ] = io + 1;\n\n\t\t\t\tindices[ ii +  3 ] = io + 1;\n\t\t\t\tindices[ ii +  4 ] = io + 2;\n\t\t\t\tindices[ ii +  5 ] = io + 3;\n\n\t\t\t\tindices[ ii +  6 ] = io + 2;\n\t\t\t\tindices[ ii +  7 ] = io + 4;\n\t\t\t\tindices[ ii +  8 ] = io + 3;\n\n\t\t\t\tindices[ ii +  9 ] = io + 3;\n\t\t\t\tindices[ ii + 10 ] = io + 4;\n\t\t\t\tindices[ ii + 11 ] = io + 5;\n\t\t\t\tio += 4;\n\t\t\t\tii += 12;\n\t\t\t}\n\n\t\t\t// Last\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 3;\n\n\t\t\tclippings[ ic + 3 ] = 0;\n\t\t\tclippings[ ic + 4 ] = 1;\n\t\t\tclippings[ ic + 5 ] = 5;\n\t\t}\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\t//\n\t\tthis.update( shape );\n\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tconst points = shape.points;\n\t\tif( points != null && 2 <= points.length ) {\n\t\t\tconst pointId = points.id;\n\t\t\tconst isPointChanged = ( pointId !== this.pointId );\n\t\t\tconst stroke = shape.stroke;\n\t\t\tconst strokeWidth = ( stroke.enable ? stroke.width : 0 );\n\t\t\tconst isStrokeWidthChanged = ( strokeWidth !== this.strokeWidth );\n\t\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\t\tconst pointsStyle = points.style;\n\t\t\tconst isPointsStyleChanged = ( pointsStyle !== this.pointsStyle );\n\t\t\tif( isPointChanged || isTransformChanged || isStrokeWidthChanged || isPointsStyleChanged ) {\n\t\t\t\tthis.pointId = pointId;\n\t\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\t\tthis.pointsStyle = pointsStyle;\n\t\t\t\tbuffer.vertexBuffer.update();\n\t\t\t\tbuffer.stepBuffer.update();\n\t\t\t\tbuffer.antialiasBuffer.update();\n\t\t\t\tbuffer.colorFillBuffer.update();\n\n\t\t\t\tif( isPointChanged || isTransformChanged ) {\n\t\t\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\t\t}\n\t\t\t\tif( isPointChanged ) {\n\t\t\t\t\t// Invalidate the texture transform ID to update the UVs\n\t\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t\t}\n\n\t\t\t\tconst voffset = this.vertexOffset;\n\t\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\t\tthis.updateLineVertexStepAndColorFill(\n\t\t\t\t\tbuffer,\n\t\t\t\t\tpoints, strokeWidth, shape.transform.internalTransform,\n\t\t\t\t\tvoffset, vcount\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateLineUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateColorFillAndStroke( buffer: EShapeBuffer, shape: EShape, vertexCount: number ) {\n\t\tthis.updateColorStroke( buffer, shape, vertexCount );\n\t}\n\n\tisCompatible( shape: EShape ): boolean {\n\t\tif( super.isCompatible( shape ) ) {\n\t\t\tconst points = shape.points;\n\t\t\tif( points ) {\n\t\t\t\treturn (\n\t\t\t\t\tthis.pointCount === points.length &&\n\t\t\t\t\tthis.pointsClosed === (!!( points.style & EShapePointsStyle.CLOSED ))\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\tthis.pointCount === 0 &&\n\t\t\t\t\tthis.pointsClosed === false\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected updateLineVertexStepAndColorFill(\n\t\tbuffer: EShapeBuffer,\n\t\tpoints: EShapePoints,\n\t\tstrokeWidth: number,\n\t\tinternalTransform: Matrix,\n\t\tvoffset: number,\n\t\tvcount: number\n\t): void {\n\t\tlet iv = voffset * 2;\n\t\tlet ia = voffset * 4;\n\t\tconst vertices = buffer.vertices;\n\t\tconst steps = buffer.steps;\n\t\tconst antialiases = buffer.antialiases;\n\t\tconst colorFills = buffer.colorFills;\n\t\tconst pointCount = points.length;\n\t\tconst pointValues = points.values;\n\t\tconst pointSegments = points.segments;\n\t\tconst pointsStyle = points.style;\n\t\tconst closed = ( (pointsStyle & EShapePointsStyle.CLOSED) !== 0 );\n\t\tconst scaleInvariant = EShapePointsStyleUploadeds.toScaleInvariant( pointsStyle );\n\n\t\t//\n\t\tlet l = 0;\n\t\tlet lprev = 0;\n\t\tlet lnext = 0;\n\t\tlet llop = 0;\n\t\tlet llo = 0;\n\t\tlet lmax = 0;\n\t\tlet pprevx = 0;\n\t\tlet pprevy = 0;\n\t\tlet px = 0;\n\t\tlet py = 0;\n\t\tlet pnextx = 0;\n\t\tlet pnexty = 0;\n\t\tlet pseg = false;\n\t\tlet psegnext = false;\n\t\tlet icfprev = voffset * 4;\n\t\tlet loffset = 0;\n\n\t\t// First point\n\t\tconst work = buffer.work;\n\t\twork.set( pointValues[ 0 ], pointValues[ 1 ] );\n\t\tinternalTransform.apply( work, work );\n\t\tconst pfirstx = work.x;\n\t\tconst pfirsty = work.y;\n\t\tconst psegfirst = ( 0 <= utilIndexOf( pointSegments, 0 ) );\n\n\t\t// Last point\n\t\tconst lastIndex = (pointCount - 1) << 1;\n\t\twork.set( pointValues[ lastIndex + 0 ], pointValues[ lastIndex + 1 ] );\n\t\tinternalTransform.apply( work, work );\n\t\tconst plastx = work.x;\n\t\tconst plasty = work.y;\n\t\tconst pseglast = ( 0 <= utilIndexOf( pointSegments, pointCount - 1 ) );\n\n\t\t// Second point\n\t\tlet psecondx = plastx;\n\t\tlet psecondy = plasty;\n\t\tlet psegsecond = pseglast;\n\t\tif( 2 < pointCount ) {\n\t\t\twork.set( pointValues[ 2 ], pointValues[ 3 ] );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tpsecondx = work.x;\n\t\t\tpsecondy = work.y;\n\t\t\tpsegsecond = ( 0 <= utilIndexOf( pointSegments, 1 ) );\n\t\t}\n\n\t\t// First segment\n\t\tif( closed ) {\n\t\t\tpx = plastx;\n\t\t\tpy = plasty;\n\t\t\tpnextx = pfirstx;\n\t\t\tpnexty = pfirsty;\n\t\t\tpseg = pseglast;\n\t\t\tpsegnext = psegfirst;\n\t\t} else {\n\t\t\tpprevx = pfirstx - (psecondx - pfirstx);\n\t\t\tpprevy = pfirsty - (psecondy - pfirsty);\n\t\t\tpx = pfirstx;\n\t\t\tpy = pfirsty;\n\t\t\tpnextx = psecondx;\n\t\t\tpnexty = psecondy;\n\t\t\tpseg = psegfirst;\n\t\t\tpsegnext = psegsecond;\n\t\t\tlnext += this.calcLength( px, py, pnextx, pnexty );\n\n\t\t\t//\n\t\t\tvertices[ iv + 0 ] = px;\n\t\t\tvertices[ iv + 1 ] = py;\n\t\t\tvertices[ iv + 2 ] = px;\n\t\t\tvertices[ iv + 3 ] = py;\n\t\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\t\tantialiases[ ia + 0 ] = pprevx;\n\t\t\tantialiases[ ia + 1 ] = pprevy;\n\t\t\tantialiases[ ia + 2 ] = pnextx;\n\t\t\tantialiases[ ia + 3 ] = pnexty;\n\t\t\tantialiases[ ia + 4 ] = pprevx;\n\t\t\tantialiases[ ia + 5 ] = pprevy;\n\t\t\tantialiases[ ia + 6 ] = pnextx;\n\t\t\tantialiases[ ia + 7 ] = pnexty;\n\t\t\tcolorFills[ ia + 0 ] = llo;\n\t\t\tcolorFills[ ia + 4 ] = llo;\n\t\t\tiv += 4;\n\t\t\tia += 8;\n\t\t}\n\n\t\t// Middle segments\n\t\tfor( let i = ( closed ? 0 : 1 ), imax = pointCount - i; i < imax; ++i ) {\n\t\t\tpprevx = px;\n\t\t\tpprevy = py;\n\t\t\tpx = pnextx;\n\t\t\tpy = pnexty;\n\t\t\tpseg = psegnext;\n\t\t\tif( i === pointCount - 2 ) {\n\t\t\t\tpnextx = plastx;\n\t\t\t\tpnexty = plasty;\n\t\t\t\tpsegnext = pseglast;\n\t\t\t} else if( i === 0 ) {\n\t\t\t\tpnextx = psecondx;\n\t\t\t\tpnexty = psecondy;\n\t\t\t\tpsegnext = psegsecond;\n\t\t\t} else if( i < pointCount - 1 ) {\n\t\t\t\tconst nextIndex = (i + 1) << 1;\n\t\t\t\twork.set( pointValues[ nextIndex + 0 ], pointValues[ nextIndex + 1 ] );\n\t\t\t\tinternalTransform.apply( work, work );\n\t\t\t\tpnextx = work.x;\n\t\t\t\tpnexty = work.y;\n\t\t\t\tpsegnext = ( 0 <= utilIndexOf( pointSegments, i + 1 ) );\n\t\t\t} else {\n\t\t\t\tpnextx = pfirstx;\n\t\t\t\tpnexty = pfirsty;\n\t\t\t\tpsegnext = psegfirst;\n\t\t\t}\n\t\t\tlprev = l;\n\t\t\tl = lnext;\n\t\t\tlnext += this.calcLength( px, py, pnextx, pnexty );\n\n\t\t\tlet pnextxn = pnextx;\n\t\t\tlet pnextyn = pnexty;\n\t\t\tlet loffsetprev = loffset;\n\t\t\tif( pseg ) {\n\t\t\t\tpprevx = px - (pnextx - px);\n\t\t\t\tpprevy = py - (pnexty - py);\n\n\t\t\t\tlmax = Math.max( lmax, llo );\n\n\t\t\t\tllop = lprev - loffset;\n\t\t\t\tEShapePointsStyleUploadeds.toDash( llop, strokeWidth, pointsStyle, work );\n\t\t\t\tconst dash0 = work.x;\n\t\t\t\tconst dash1 = work.y;\n\t\t\t\tfor( let j = icfprev; j < ia + 8; j += 4 ) {\n\t\t\t\t\tcolorFills[ j + 1 ] = dash0;\n\t\t\t\t\tcolorFills[ j + 2 ] = dash1;\n\t\t\t\t\tcolorFills[ j + 3 ] = llop;\n\t\t\t\t}\n\t\t\t\ticfprev = ia + 8;\n\t\t\t\tloffsetprev = loffset;\n\t\t\t\tloffset = l;\n\t\t\t} else if( psegnext ) {\n\t\t\t\tpnextxn = px + (px - pprevx);\n\t\t\t\tpnextyn = py + (py - pprevy);\n\t\t\t}\n\n\t\t\t// Vertices\n\t\t\tvertices[ iv + 0 ] = px;\n\t\t\tvertices[ iv + 1 ] = py;\n\t\t\tvertices[ iv + 2 ] = px;\n\t\t\tvertices[ iv + 3 ] = py;\n\t\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\t\tantialiases[ ia + 0 ] = pprevx;\n\t\t\tantialiases[ ia + 1 ] = pprevy;\n\t\t\tantialiases[ ia + 2 ] = pnextxn;\n\t\t\tantialiases[ ia + 3 ] = pnextyn;\n\t\t\tantialiases[ ia + 4 ] = pprevx;\n\t\t\tantialiases[ ia + 5 ] = pprevy;\n\t\t\tantialiases[ ia + 6 ] = pnextxn;\n\t\t\tantialiases[ ia + 7 ] = pnextyn;\n\t\t\tllop = l - loffsetprev;\n\t\t\tcolorFills[ ia + 0 ] = llop;\n\t\t\tcolorFills[ ia + 4 ] = llop;\n\t\t\tiv += 4;\n\t\t\tia += 8;\n\n\t\t\tvertices[ iv + 0 ] = px;\n\t\t\tvertices[ iv + 1 ] = py;\n\t\t\tvertices[ iv + 2 ] = px;\n\t\t\tvertices[ iv + 3 ] = py;\n\t\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\t\tantialiases[ ia + 0 ] = pprevx;\n\t\t\tantialiases[ ia + 1 ] = pprevy;\n\t\t\tantialiases[ ia + 2 ] = pnextxn;\n\t\t\tantialiases[ ia + 3 ] = pnextyn;\n\t\t\tantialiases[ ia + 4 ] = pprevx;\n\t\t\tantialiases[ ia + 5 ] = pprevy;\n\t\t\tantialiases[ ia + 6 ] = pnextxn;\n\t\t\tantialiases[ ia + 7 ] = pnextyn;\n\t\t\tllo = l - loffset;\n\t\t\tcolorFills[ ia + 0 ] = llo;\n\t\t\tcolorFills[ ia + 4 ] = llo;\n\t\t\tiv += 4;\n\t\t\tia += 8;\n\t\t}\n\n\t\t// Last segment\n\t\t{\n\t\t\tpprevx = px;\n\t\t\tpprevy = py;\n\t\t\tpx = pnextx;\n\t\t\tpy = pnexty;\n\t\t\tpseg = psegnext;\n\t\t\tif( closed ) {\n\t\t\t\tpnextx = psecondx;\n\t\t\t\tpnexty = psecondy;\n\t\t\t\tpsegnext = psegsecond;\n\t\t\t} else {\n\t\t\t\tpnextx = px + (px - pprevx);\n\t\t\t\tpnexty = py + (py - pprevy);\n\t\t\t\tpsegnext = false;\n\t\t\t}\n\t\t\tlprev = l;\n\t\t\tl = lnext;\n\n\t\t\tlet pnextxn = pnextx;\n\t\t\tlet pnextyn = pnexty;\n\t\t\tlet loffsetprev = loffset;\n\t\t\tif( pseg ) {\n\t\t\t\tpprevx = px - (pnextx - px);\n\t\t\t\tpprevy = py - (pnexty - py);\n\n\t\t\t\tlmax = Math.max( lmax, llo );\n\n\t\t\t\tllop = lprev - loffset;\n\t\t\t\tEShapePointsStyleUploadeds.toDash( llop, strokeWidth, pointsStyle, work );\n\t\t\t\tconst dash0 = work.x;\n\t\t\t\tconst dash1 = work.y;\n\t\t\t\tfor( let j = icfprev; j < ia + 8; j += 4 ) {\n\t\t\t\t\tcolorFills[ j + 1 ] = dash0;\n\t\t\t\t\tcolorFills[ j + 2 ] = dash1;\n\t\t\t\t\tcolorFills[ j + 3 ] = llop;\n\t\t\t\t}\n\t\t\t\ticfprev = ia + 8;\n\t\t\t\tloffsetprev = loffset;\n\t\t\t\tloffset = l;\n\t\t\t} else if( psegnext ) {\n\t\t\t\tpnextxn = px + (px - pprevx);\n\t\t\t\tpnextyn = py + (py - pprevy);\n\t\t\t}\n\n\t\t\t// Vertices\n\t\t\tvertices[ iv + 0 ] = px;\n\t\t\tvertices[ iv + 1 ] = py;\n\t\t\tvertices[ iv + 2 ] = px;\n\t\t\tvertices[ iv + 3 ] = py;\n\t\t\tsteps[ iv + 0 ] = strokeWidth;\n\t\t\tsteps[ iv + 1 ] = scaleInvariant;\n\t\t\tsteps[ iv + 2 ] = strokeWidth;\n\t\t\tsteps[ iv + 3 ] = scaleInvariant;\n\t\t\tantialiases[ ia + 0 ] = pprevx;\n\t\t\tantialiases[ ia + 1 ] = pprevy;\n\t\t\tantialiases[ ia + 2 ] = pnextxn;\n\t\t\tantialiases[ ia + 3 ] = pnextyn;\n\t\t\tantialiases[ ia + 4 ] = pprevx;\n\t\t\tantialiases[ ia + 5 ] = pprevy;\n\t\t\tantialiases[ ia + 6 ] = pnextxn;\n\t\t\tantialiases[ ia + 7 ] = pnextyn;\n\t\t\tllop = l - loffsetprev;\n\t\t\tlmax = Math.max( lmax, llop );\n\t\t\tcolorFills[ ia + 0 ] = llop;\n\t\t\tcolorFills[ ia + 4 ] = llop;\n\t\t\tiv += 4;\n\t\t\tia += 8;\n\n\t\t\t// Total length\n\t\t\tthis.length = lmax;\n\t\t\tif( icfprev < ia ) {\n\t\t\t\tEShapePointsStyleUploadeds.toDash( llop, strokeWidth, pointsStyle, work );\n\t\t\t\tconst dash0 = work.x;\n\t\t\t\tconst dash1 = work.y;\n\t\t\t\tif( closed ) {\n\t\t\t\t\tfor( let i = icfprev; i < ia; i += 4 ) {\n\t\t\t\t\t\tcolorFills[ i + 1 ] = dash0;\n\t\t\t\t\t\tcolorFills[ i + 2 ] = dash1;\n\t\t\t\t\t\tcolorFills[ i + 3 ] = -1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor( let i = icfprev; i < ia; i += 4 ) {\n\t\t\t\t\t\tcolorFills[ i + 1 ] = dash0;\n\t\t\t\t\t\tcolorFills[ i + 2 ] = dash1;\n\t\t\t\t\t\tcolorFills[ i + 3 ] = llop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateLineUv( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst pointCount = this.pointCount;\n\t\t\tif( 2 <= pointCount ) {\n\t\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\t\tconst x0 = textureUvs.x0;\n\t\t\t\tconst x1 = textureUvs.x1;\n\t\t\t\tconst x2 = textureUvs.x2;\n\t\t\t\tconst x3 = textureUvs.x3;\n\t\t\t\tconst y0 = textureUvs.y0;\n\t\t\t\tconst y1 = textureUvs.y1;\n\t\t\t\tconst y2 = textureUvs.y2;\n\t\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\t\tconst dx01 = x1 - x0;\n\t\t\t\tconst dy01 = y1 - y0;\n\t\t\t\tconst dx32 = x2 - x3;\n\t\t\t\tconst dy32 = y2 - y3;\n\n\t\t\t\t// Uvs\n\t\t\t\tbuffer.uvBuffer.update();\n\t\t\t\tconst uvs = buffer.uvs;\n\t\t\t\tconst colorFills = buffer.colorFills;\n\t\t\t\tconst closed = this.pointsClosed;\n\t\t\t\tconst voffset = this.vertexOffset;\n\n\t\t\t\tlet iuv = voffset * 2;\n\t\t\t\tlet icf = voffset * 4;\n\t\t\t\tconst lengthInverse = 1 / Math.max( FMIN, this.length );\n\t\t\t\tlet r = 0;\n\n\t\t\t\t// UV: First\n\t\t\t\tif( ! closed ) {\n\t\t\t\t\tr = colorFills[ icf ] * lengthInverse;\n\t\t\t\t\tuvs[ iuv + 0 ] = x0 + r * dx01;\n\t\t\t\t\tuvs[ iuv + 1 ] = y0 + r * dy01;\n\t\t\t\t\tuvs[ iuv + 2 ] = x3 + r * dx32;\n\t\t\t\t\tuvs[ iuv + 3 ] = y3 + r * dy32;\n\t\t\t\t\tiuv += 4;\n\t\t\t\t\ticf += 8;\n\t\t\t\t}\n\n\t\t\t\t// UV: Middle\n\t\t\t\tfor( let i = (closed ? 0 : 1), imax = pointCount - i; i < imax; ++i ) {\n\t\t\t\t\tr = colorFills[ icf ] * lengthInverse;\n\t\t\t\t\tuvs[ iuv + 0 ] = x0 + r * dx01;\n\t\t\t\t\tuvs[ iuv + 1 ] = y0 + r * dy01;\n\t\t\t\t\tuvs[ iuv + 2 ] = x3 + r * dx32;\n\t\t\t\t\tuvs[ iuv + 3 ] = y3 + r * dy32;\n\t\t\t\t\tiuv += 4;\n\t\t\t\t\ticf += 8;\n\n\t\t\t\t\tr = colorFills[ icf ] * lengthInverse;\n\t\t\t\t\tuvs[ iuv + 0 ] = x0 + r * dx01;\n\t\t\t\t\tuvs[ iuv + 1 ] = y0 + r * dy01;\n\t\t\t\t\tuvs[ iuv + 2 ] = x3 + r * dx32;\n\t\t\t\t\tuvs[ iuv + 3 ] = y3 + r * dy32;\n\t\t\t\t\tiuv += 4;\n\t\t\t\t\ticf += 8;\n\t\t\t\t}\n\n\t\t\t\t// UV: Last\n\t\t\t\tr = colorFills[ icf ] * lengthInverse;\n\t\t\t\tuvs[ iuv + 0 ] = x0 + r * dx01;\n\t\t\t\tuvs[ iuv + 1 ] = y0 + r * dy01;\n\t\t\t\tuvs[ iuv + 2 ] = x3 + r * dx32;\n\t\t\t\tuvs[ iuv + 3 ] = y3 + r * dy32;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeLineUploaded } from \"./e-shape-line-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeLineUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number,\n\t\tantialiasWeight: number\n\t): EShapeLineUploaded | null {\n\t\tconst points = shape.points;\n\t\tconst pointsClosed = ( points ? (points.style & EShapePointsStyle.CLOSED) !== 0 : false );\n\t\tconst pointCount = ( points ? points.length : 0 );\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tlet vcount = tvcount;\n\t\tlet icount = ticount;\n\t\tif( 2 <= pointCount ) {\n\t\t\tif( pointsClosed ) {\n\t\t\t\tvcount += pointCount * 4 + 2;\n\t\t\t\ticount += pointCount * 4;\n\t\t\t} else {\n\t\t\t\tvcount += (pointCount - 2) * 4 + 2 + 2;\n\t\t\t\ticount += (pointCount - 2) * 4 + 2;\n\t\t\t}\n\t\t}\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeLineUploaded(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, ioffset,\n\t\t\t\ttvcount, ticount,\n\t\t\t\tvcount, icount,\n\t\t\t\tantialiasWeight,\n\t\t\t\tpointCount, pointsClosed\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Matrix, Point } from \"pixi.js\";\nimport { EShapePoints, EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapePointsParent } from \"../e-shape-points-parent\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\n\nexport class EShapeLinePoints implements EShapePoints {\n\tprotected _parent: EShapePointsParent;\n\tprotected _valuesBase?: number[];\n\tprotected _valuesBaseLength: number;\n\tprotected _values: number[];\n\tprotected _segments: number[];\n\treadonly position: Point;\n\tprotected _sizeBase: Point;\n\treadonly size: Point;\n\tprotected _id: number;\n\tprotected _style: EShapePointsStyle;\n\n\tconstructor(\n\t\tparent: EShapePointsParent,\n\t\tpoints: number[],\n\t\tsegments: number[],\n\t\tstyle: EShapePointsStyle\n\t) {\n\t\t// Calculate the center\n\t\tconst values: number[] = [];\n\t\tlet minX = 0;\n\t\tlet maxX = 0;\n\t\tlet minY = 0;\n\t\tlet maxY = 0;\n\t\tconst pointsLength = points.length;\n\t\tif( 2 <= pointsLength ) {\n\t\t\tminX = maxX = points[ 0 ];\n\t\t\tminY = maxY = points[ 1 ];\n\t\t\tfor( let i = 2; i < pointsLength; i += 2 ) {\n\t\t\t\tconst x = points[ i ];\n\t\t\t\tconst y = points[ i + 1 ];\n\t\t\t\tminX = Math.min( minX, x );\n\t\t\t\tmaxX = Math.max( maxX, x );\n\t\t\t\tminY = Math.min( minY, y );\n\t\t\t\tmaxY = Math.max( maxY, y );\n\t\t\t}\n\t\t}\n\t\tconst cx = (maxX + minX) * 0.5;\n\t\tconst cy = (maxY + minY) * 0.5;\n\t\tfor( let i = 0; i < pointsLength; i += 2 ) {\n\t\t\tconst x = points[ i + 0 ] - cx;\n\t\t\tconst y = points[ i + 1 ] - cy;\n\t\t\tvalues.push( x, y );\n\t\t}\n\t\tconst sx = maxX - minX;\n\t\tconst sy = maxY - minY;\n\n\t\t//\n\t\tthis._parent = parent;\n\t\tthis._valuesBase = undefined;\n\t\tthis._valuesBaseLength = values.length;\n\t\tthis._values = values;\n\t\tthis._segments = segments.slice( 0 );\n\t\tthis._sizeBase = new Point( sx, sy );\n\t\tthis.size = new Point( sx, sy );\n\t\tthis.position = new Point( cx, cy );\n\t\tthis._id = 0;\n\t\tthis._style = style!;\n\t}\n\n\tget length(): number {\n\t\treturn this._values.length >> 1;\n\t}\n\n\tprivate fitToParentSize() {\n\t\tconst size = this.size;\n\t\tconst parentSize = this._parent.size;\n\t\tconst ssx = parentSize.x;\n\t\tconst ssy = parentSize.y;\n\t\tconst threshold = 0.00001;\n\t\tif( threshold < Math.abs( ssx - size.x ) || threshold < Math.abs( ssy - size.y ) ) {\n\t\t\tsize.set( ssx, ssy );\n\n\t\t\tconst sizeBase = this._sizeBase;\n\t\t\tconst hasSizeBaseX = threshold < Math.abs( sizeBase.x );\n\t\t\tconst hasSizeBaseY = threshold < Math.abs( sizeBase.y );\n\t\t\tif( hasSizeBaseX || hasSizeBaseY ) {\n\t\t\t\tconst scaleX = ( hasSizeBaseX ? ssx / sizeBase.x : 1 );\n\t\t\t\tconst scaleY = ( hasSizeBaseY ? ssy / sizeBase.y : 1 );\n\n\t\t\t\tconst values = this._values;\n\t\t\t\tlet valuesBase = this._valuesBase;\n\t\t\t\tif( valuesBase == null ) {\n\t\t\t\t\tvaluesBase = [];\n\t\t\t\t\tthis._valuesBase = valuesBase;\n\n\t\t\t\t\tfor( let i = 0, imax = this.length << 1; i < imax; i += 2 ) {\n\t\t\t\t\t\tconst x = values[ i ];\n\t\t\t\t\t\tconst y = values[ i + 1 ];\n\t\t\t\t\t\tvalues[ i ] = x * scaleX;\n\t\t\t\t\t\tvalues[ i + 1 ] = y * scaleY;\n\t\t\t\t\t\tvaluesBase.push( x, y );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor( let i = 0, imax = this.length << 1; i < imax; i += 2 ) {\n\t\t\t\t\t\tvalues[ i ] = valuesBase[ i ] * scaleX;\n\t\t\t\t\t\tvalues[ i + 1 ] = valuesBase[ i + 1 ] * scaleY;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._id += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tget id(): number {\n\t\tthis.fitToParentSize();\n\t\treturn this._id;\n\t}\n\n\tget values(): number[] {\n\t\tthis.fitToParentSize();\n\t\treturn this._values;\n\t}\n\n\tset values( values: number[] ) {\n\t\tthis.set( values, undefined, undefined );\n\t}\n\n\tget segments(): number[] {\n\t\treturn this._segments;\n\t}\n\n\t/**\n\t * Must be sorted in ascending order.\n\t */\n\tset segments( segments: number[] ) {\n\t\tthis.set( undefined, segments, undefined );\n\t}\n\n\tget style(): EShapePointsStyle {\n\t\treturn this._style;\n\t}\n\n\tset style( style: EShapePointsStyle ) {\n\t\tthis.set( undefined, undefined, style );\n\t}\n\n\tcopy( source: EShapePoints ): this {\n\t\treturn this.set( source.values, source.segments, source.style );\n\t}\n\n\tset( newValues?: number[], newSegments?: number[], newStyle?: EShapePointsStyle ): this {\n\t\tlet isDirty = false;\n\t\tlet isUpdated = false;\n\n\t\t// Values\n\t\tif( newValues != null ) {\n\t\t\tconst values = this._values;\n\t\t\tconst valuesBaseLength = this._valuesBaseLength;\n\t\t\tconst newValuesLength = newValues.length;\n\t\t\tconst iupdate = Math.min( newValuesLength, valuesBaseLength );\n\t\t\tthis._valuesBase = undefined;\n\t\t\tthis._id += 1;\n\t\t\tif( values !== newValues ) {\n\t\t\t\tfor( let i = 0; i < iupdate; ++i ) {\n\t\t\t\t\tvalues[ i ] = newValues[ i ];\n\t\t\t\t}\n\n\t\t\t\tfor( let i = iupdate; i < newValuesLength; ++i ) {\n\t\t\t\t\tvalues.push( newValues[ i ] );\n\t\t\t\t}\n\n\t\t\t\tif( valuesBaseLength !== newValuesLength ) {\n\t\t\t\t\tvalues.length = newValuesLength;\n\t\t\t\t\tthis._valuesBaseLength = newValuesLength;\n\t\t\t\t\tisDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tisUpdated = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( valuesBaseLength !== newValuesLength ) {\n\t\t\t\t\tthis._valuesBaseLength = newValuesLength;\n\t\t\t\t\tisDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tisUpdated = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Segments\n\t\tif( newSegments != null ) {\n\t\t\tconst segments = this._segments;\n\t\t\tthis._id += 1;\n\t\t\tif( segments !== newSegments ) {\n\t\t\t\tconst newSegmentsLength = newSegments.length;\n\t\t\t\tconst iupdate = Math.min( segments.length, newSegmentsLength );\n\t\t\t\tfor( let i = 0; i < iupdate; ++i ) {\n\t\t\t\t\tsegments[ i ] = newSegments[ i ];\n\t\t\t\t}\n\n\t\t\t\tfor( let i = iupdate; i < newSegmentsLength; ++i ) {\n\t\t\t\t\tsegments.push( newSegments[ i ] );\n\t\t\t\t}\n\n\t\t\t\tif( segments.length !== newSegmentsLength ) {\n\t\t\t\t\tsegments.length = newSegmentsLength;\n\t\t\t\t}\n\t\t\t}\n\t\t\tisUpdated = true;\n\t\t}\n\n\t\t// Style\n\t\tif( newStyle != null ) {\n\t\t\tconst oldStyle = this._style;\n\t\t\tif( oldStyle !== newStyle ) {\n\t\t\t\tthis._style = newStyle;\n\t\t\t\tif( (oldStyle & EShapePointsStyle.CLOSED) !== (newStyle & EShapePointsStyle.CLOSED) ) {\n\t\t\t\t\tisDirty = true;\n\t\t\t\t} else {\n\t\t\t\t\tisUpdated = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tif( isDirty ) {\n\t\t\tconst parent = this._parent;\n\t\t\tparent.uploaded = undefined;\n\t\t\tparent.toDirty();\n\t\t} else if( isUpdated ) {\n\t\t\tthis._parent.updateUploaded();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tclone( parent: EShapePointsParent ): EShapeLinePoints {\n\t\treturn new EShapeLinePoints( parent, this._values, this._segments, this._style );\n\t}\n\n\ttoPoints( transform: Matrix ): Point[] {\n\t\tconst result: Point[] = [];\n\t\tconst values = this.values;\n\t\tfor( let i = 0, imax = values.length; i < imax; i += 2 ) {\n\t\t\tconst point = new Point( values[ i + 0 ], values[ i + 1 ] );\n\t\t\tresult.push( transform.apply( point, point ) );\n\t\t}\n\t\treturn result;\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn manager.add( `[${JSON.stringify(this._values)},${JSON.stringify(this._segments)},${this._style}]` );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeLineBase } from \"./e-shape-line-base\";\nimport { EShapeLinePoints } from \"./e-shape-line-points\";\n\nexport class EShapeLine extends EShapeLineBase {\n\tpoints!: EShapeLinePoints;\n\n\tconstructor( line: EShapeLine );\n\tconstructor( points: number[], segments: number[], width: number, style: EShapePointsStyle );\n\tconstructor(\n\t\tlineOrPoints: EShapeLine | number[],\n\t\tsegments?: number[],\n\t\twidth?: number,\n\t\tstyle?: EShapePointsStyle\n\t) {\n\t\tsuper( EShapeType.LINE );\n\t\tif( lineOrPoints instanceof EShapeLine ) {\n\t\t\tthis.copy( lineOrPoints );\n\t\t} else {\n\t\t\tthis.fill.enable = false;\n\t\t\tthis.stroke.set( true, undefined, undefined, width! );\n\t\t\tthis.points = new EShapeLinePoints( this, lineOrPoints, segments!, style! );\n\t\t\tthis.transform.position.copyFrom( this.points.position );\n\t\t\tthis.size.copyFrom( this.points.size );\n\t\t}\n\t}\n\n\tclone(): EShapeLine {\n\t\treturn new EShapeLine( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDefaults } from \"../e-shape-defaults\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapePointsStyle } from \"../e-shape-points\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeLine } from \"./e-shape-line\";\n\nexport class EShapeLines {\n\tstatic toStrokeWidth( index: number, resources: string[] ): number {\n\t\tif( 0 <= index && index < resources.length  ) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse( resources[ index ] )[ 3 ];\n\t\t\t} catch( e ) {\n\t\t\t\t//\n\t\t\t}\n\t\t}\n\t\treturn 8;\n\t}\n\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeLine> | EShapeLine | null {\n\t\tconst resources = manager.resources;\n\t\tconst resourceId = item[ 15 ];\n\t\tif( 0 <= resourceId && resourceId < resources.length ) {\n\t\t\tlet parsed = manager.extensions.get( resourceId ) as [ number[], number[], number ] | undefined;\n\t\t\tif( parsed == null ) {\n\t\t\t\tparsed = JSON.parse( resources[ resourceId ] ) as [ number[], number[], number ];\n\t\t\t\tmanager.extensions.set( resourceId, parsed );\n\t\t\t}\n\t\t\tconst shape = EShapeLines.create(\n\t\t\t\tparsed[ 0 ],\n\t\t\t\tparsed[ 1 ],\n\t\t\t\tEShapeDefaults.STROKE_WIDTH,\n\t\t\t\tparsed[ 2 ]\n\t\t\t);\n\t\t\treturn EShapeDeserializer.deserialize( item, manager, shape );\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic create(\n\t\tpoints: number[],\n\t\tsegments: number[],\n\t\tstrokeWidth: number,\n\t\tstyle: EShapePointsStyle\n\t): EShapeLine {\n\t\treturn new EShapeLine( points, segments, strokeWidth, style );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeLineUploadeds } from \"../shape/variant/e-shape-line-uploadeds\";\nimport { EShapeLines } from \"../shape/variant/e-shape-lines\";\n\nexport const loadShapeLine = () => {\n\tEShapeUploadeds[ EShapeType.LINE ] = EShapeLineUploadeds.create;\n\tEShapeDeserializers[ EShapeType.LINE ] = EShapeLines.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeUploadedBase } from \"../e-shape-uploaded\";\n\nexport class EShapeNullUploaded extends EShapeUploadedBase {\n\tconstructor( buffer: EShapeBuffer, voffset: number, ioffset: number ) {\n\t\tsuper( buffer, voffset, ioffset, 0, 0, 1 );\n\t}\n\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tthis.texture = shape.texture || Texture.WHITE;\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeNullUploaded } from \"./e-shape-null-uploaded\";\n\nexport class EShapeNullUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number\n\t): EShapeNullUploaded | null {\n\t\treturn new EShapeNullUploaded(\n\t\t\tbuffer,\n\t\t\tvoffset, ioffset\n\t\t).init( shape );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeNull extends EShapePrimitive {\n\tconstructor( type: EShapeType = EShapeType.NULL ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeNull {\n\t\treturn new EShapeNull().copy( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeNull } from \"./e-shape-null\";\n\nexport class EShapeNulls {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeNull> | EShapeNull {\n\t\treturn EShapeDeserializer.deserialize( item, manager, new EShapeNull() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeNullUploadeds } from \"../shape/variant/e-shape-null-uploadeds\";\nimport { EShapeNulls } from \"../shape/variant/e-shape-nulls\";\n\nexport const loadShapeNull = () => {\n\tEShapeUploadeds[ EShapeType.NULL ] = EShapeNullUploadeds.create;\n\tEShapeDeserializers[ EShapeType.NULL ] = EShapeNulls.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeCapability } from \"./e-shape-capability\";\nimport { EShapeType } from \"./e-shape-type\";\n\nexport class EShapeCapabilities {\n\tstatic mappings: { [ type: number ]: EShapeCapability } = {};\n\n\tstatic get( type: EShapeType ): EShapeCapability {\n\t\treturn this.mappings[ type ] || EShapeCapability.PRIMITIVE;\n\t}\n\n\tstatic contains( shape: EShape | null | undefined, capability: EShapeCapability ): shape is EShape {\n\t\tif( shape != null ) {\n\t\t\tif( this.get( shape.type ) & capability ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst children = shape.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tif( this.contains( children[ i ], capability ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic set( type: EShapeType, capability: EShapeCapability ): void {\n\t\tthis.mappings[ type ] = capability;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeRectangle } from \"./e-shape-rectangle\";\n\nexport class EShapeRectangles {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeRectangle> | EShapeRectangle {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeRectangles.create() );\n\t}\n\n\tstatic create() {\n\t\treturn new EShapeRectangle();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCapabilities } from \"../shape/e-shape-capabilities\";\nimport { EShapeCapability } from \"../shape/e-shape-capability\";\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeRectangleUploadeds } from \"../shape/variant/e-shape-rectangle-uploadeds\";\nimport { EShapeRectangles } from \"../shape/variant/e-shape-rectangles\";\n\nexport const loadShapeRectangle = () => {\n\tEShapeUploadeds[ EShapeType.RECTANGLE ] = EShapeRectangleUploadeds.create;\n\tEShapeDeserializers[ EShapeType.RECTANGLE ] = EShapeRectangles.deserialize;\n\tEShapeCapabilities.set(\n\t\tEShapeType.RECTANGLE,\n\t\tEShapeCapability.PRIMITIVE | EShapeCapability.STROKE_SIDE\n\t);\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeRectangleRoundedUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tlet ii = ioffset * 3;\n\n\t\t// Top-left corner\n\t\tindices[ ii + 0 ] = voffset + 0;\n\t\tindices[ ii + 1 ] = voffset + 1;\n\t\tindices[ ii + 2 ] = voffset + 2;\n\t\tindices[ ii + 3 ] = voffset + 1;\n\t\tindices[ ii + 4 ] = voffset + 3;\n\t\tindices[ ii + 5 ] = voffset + 2;\n\t\tii += 6;\n\n\t\t// Top-right corner\n\t\tindices[ ii + 0 ] = voffset + 4;\n\t\tindices[ ii + 1 ] = voffset + 5;\n\t\tindices[ ii + 2 ] = voffset + 6;\n\t\tindices[ ii + 3 ] = voffset + 5;\n\t\tindices[ ii + 4 ] = voffset + 7;\n\t\tindices[ ii + 5 ] = voffset + 6;\n\t\tii += 6;\n\n\t\t// Bottom-left corner\n\t\tindices[ ii + 0 ] = voffset + 8;\n\t\tindices[ ii + 1 ] = voffset + 9;\n\t\tindices[ ii + 2 ] = voffset + 10;\n\t\tindices[ ii + 3 ] = voffset + 9;\n\t\tindices[ ii + 4 ] = voffset + 11;\n\t\tindices[ ii + 5 ] = voffset + 10;\n\t\tii += 6;\n\n\t\t// Bottom-right corner\n\t\tindices[ ii + 0 ] = voffset + 12;\n\t\tindices[ ii + 1 ] = voffset + 13;\n\t\tindices[ ii + 2 ] = voffset + 14;\n\t\tindices[ ii + 3 ] = voffset + 13;\n\t\tindices[ ii + 4 ] = voffset + 15;\n\t\tindices[ ii + 5 ] = voffset + 14;\n\t\tii += 6;\n\n\t\t// Top edge\n\t\tindices[ ii + 0 ] = voffset + 16;\n\t\tindices[ ii + 1 ] = voffset + 17;\n\t\tindices[ ii + 2 ] = voffset + 20;\n\t\tindices[ ii + 3 ] = voffset + 17;\n\t\tindices[ ii + 4 ] = voffset + 21;\n\t\tindices[ ii + 5 ] = voffset + 20;\n\t\tii += 6;\n\n\t\tindices[ ii + 0 ] = voffset + 17;\n\t\tindices[ ii + 1 ] = voffset + 18;\n\t\tindices[ ii + 2 ] = voffset + 21;\n\t\tindices[ ii + 3 ] = voffset + 18;\n\t\tindices[ ii + 4 ] = voffset + 22;\n\t\tindices[ ii + 5 ] = voffset + 21;\n\t\tii += 6;\n\n\t\t// Upper middle\n\t\tindices[ ii + 0 ] = voffset + 19;\n\t\tindices[ ii + 1 ] = voffset + 21;\n\t\tindices[ ii + 2 ] = voffset + 24;\n\t\tindices[ ii + 3 ] = voffset + 21;\n\t\tindices[ ii + 4 ] = voffset + 25;\n\t\tindices[ ii + 5 ] = voffset + 24;\n\t\tii += 6;\n\n\t\tindices[ ii + 0 ] = voffset + 21;\n\t\tindices[ ii + 1 ] = voffset + 23;\n\t\tindices[ ii + 2 ] = voffset + 26;\n\t\tindices[ ii + 3 ] = voffset + 23;\n\t\tindices[ ii + 4 ] = voffset + 27;\n\t\tindices[ ii + 5 ] = voffset + 26;\n\t\tii += 6;\n\n\t\t// Lower middle\n\t\tindices[ ii + 0 ] = voffset + 24;\n\t\tindices[ ii + 1 ] = voffset + 25;\n\t\tindices[ ii + 2 ] = voffset + 28;\n\t\tindices[ ii + 3 ] = voffset + 25;\n\t\tindices[ ii + 4 ] = voffset + 30;\n\t\tindices[ ii + 5 ] = voffset + 28;\n\t\tii += 6;\n\n\t\tindices[ ii + 0 ] = voffset + 26;\n\t\tindices[ ii + 1 ] = voffset + 27;\n\t\tindices[ ii + 2 ] = voffset + 30;\n\t\tindices[ ii + 3 ] = voffset + 27;\n\t\tindices[ ii + 4 ] = voffset + 32;\n\t\tindices[ ii + 5 ] = voffset + 30;\n\t\tii += 6;\n\n\t\t// Bottom edge\n\t\tindices[ ii + 0 ] = voffset + 29;\n\t\tindices[ ii + 1 ] = voffset + 30;\n\t\tindices[ ii + 2 ] = voffset + 33;\n\t\tindices[ ii + 3 ] = voffset + 30;\n\t\tindices[ ii + 4 ] = voffset + 34;\n\t\tindices[ ii + 5 ] = voffset + 33;\n\t\tii += 6;\n\n\t\tindices[ ii + 0 ] = voffset + 30;\n\t\tindices[ ii + 1 ] = voffset + 31;\n\t\tindices[ ii + 2 ] = voffset + 34;\n\t\tindices[ ii + 3 ] = voffset + 31;\n\t\tindices[ ii + 4 ] = voffset + 35;\n\t\tindices[ ii + 5 ] = voffset + 34;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateType1Vertex( buffer, shape );\n\t\tthis.updateType1Clipping( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateType1Step( buffer, shape );\n\t\tthis.updateType1Uv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\t/**\n\t * Please note that this method must be executed before updateClippingType1(...).\n\t */\n\tprotected updateType1Vertex( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst radius = shape.radius;\n\t\tconst isSizeChanged = (\n\t\t\tsizeX !== this.sizeX ||\n\t\t\tsizeY !== this.sizeY ||\n\t\t\tradius !== this.radius\n\t\t);\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\tthis.radius = radius;\n\t\t\tif( isSizeChanged ) {\n\t\t\t\t// Invalidate the corner to update the clippings\n\t\t\t\tthis.corner = NaN;\n\n\t\t\t\t// Invalidate the textureTransformId to updateh UVs.\n\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t}\n\t\t\t// Invalidate the stroke width to update the steps / antialiases\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\t//\n\t\t\t//  0   1       4   5\n\t\t\t// |---|       |---|\n\t\t\t// |2  |3      |6  |7\n\t\t\t// |---|       |---|\n\t\t\t//\n\t\t\t//\n\t\t\t//\n\t\t\t//\n\t\t\t//\n\t\t\t// |---|       |---|\n\t\t\t// |8  |9      |12 |13\n\t\t\t// |---|       |---|\n\t\t\t//  10  11      14  15\n\t\t\t//\n\t\t\t//\n\t\t\t//      16  17  18       <-- Top edge\n\t\t\t//     |---|---|\n\t\t\t//  19 |20 |21 |22  23   <-- Top\n\t\t\t// |---|---|---|---|\n\t\t\t// |       |       |\n\t\t\t// |24   25|26     |27   <-- Middle\n\t\t\t// |-------|-------|\n\t\t\t// |       |       |\n\t\t\t// |       |       |\n\t\t\t// |---|---|---|---|\n\t\t\t//  28 |29 |30 |31  32   <-- Bottom\n\t\t\t//     |---|---|\n\t\t\t//      33  34  35       <-- Bottom edge\n\t\t\t//\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst ax = Math.abs( sx );\n\t\t\tconst ay = Math.abs( sy );\n\t\t\tconst a = radius * Math.min( ax, ay );\n\t\t\tconst rx = a / ax;\n\t\t\tconst ry = a / ay;\n\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = buffer.work;\n\t\t\twork.set( -sx, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x2 = work.x;\n\t\t\tconst y2 = work.y;\n\t\t\tconst dxh = x2 - x0;\n\t\t\tconst dyh = y2 - y0;\n\t\t\tconst dxhr = rx * dxh;\n\t\t\tconst dyhr = rx * dyh;\n\t\t\tconst x1 = x0 + dxhr;\n\t\t\tconst y1 = y0 + dyhr;\n\t\t\tconst x4 = x2 + dxh;\n\t\t\tconst y4 = y2 + dyh;\n\t\t\tconst x3 = x4 - dxhr;\n\t\t\tconst y3 = y4 - dyhr;\n\t\t\tconst x11 = internalTransform.tx;\n\t\t\tconst y11 = internalTransform.ty;\n\t\t\tconst dxv = x11 - x2;\n\t\t\tconst dyv = y11 - y2;\n\t\t\tconst dxvr = ry * dxv;\n\t\t\tconst dyvr = ry * dyv;\n\t\t\tconst x7 = x2 + dxvr;\n\t\t\tconst y7 = y2 + dyvr;\n\t\t\tconst x5 = x7 - dxh;\n\t\t\tconst y5 = y7 - dyh;\n\t\t\tconst x6 = x5 + dxhr;\n\t\t\tconst y6 = y5 + dyhr;\n\t\t\tconst x9 = x7 + dxh;\n\t\t\tconst y9 = y7 + dyh;\n\t\t\tconst x8 = x9 - dxhr;\n\t\t\tconst y8 = y9 - dyhr;\n\t\t\tconst x10 = x11 - dxh;\n\t\t\tconst y10 = y11 - dyh;\n\t\t\tconst x12 = x11 + dxh;\n\t\t\tconst y12 = y11 + dyh;\n\t\t\tconst x20 = x11 + dxv;\n\t\t\tconst y20 = y11 + dyv;\n\t\t\tconst x15 = x20 - dxvr;\n\t\t\tconst y15 = y20 - dyvr;\n\t\t\tconst x13 = x15 - dxh;\n\t\t\tconst y13 = y15 - dyh;\n\t\t\tconst x14 = x13 + dxhr;\n\t\t\tconst y14 = y13 + dyhr;\n\t\t\tconst x17 = x15 + dxh;\n\t\t\tconst y17 = y15 + dyh;\n\t\t\tconst x16 = x17 - dxhr;\n\t\t\tconst y16 = y17 - dyhr;\n\t\t\tconst x18 = x20 - dxh;\n\t\t\tconst y18 = y20 - dyh;\n\t\t\tconst x19 = x18 + dxhr;\n\t\t\tconst y19 = y18 + dyhr;\n\t\t\tconst x22 = x20 + dxh;\n\t\t\tconst y22 = y20 + dyh;\n\t\t\tconst x21 = x22 - dxhr;\n\t\t\tconst y21 = y22 - dyhr;\n\n\t\t\t// World size\n\t\t\tthis.worldSizeXHalf = this.calcLength( x0, y0, x2, y2 );\n\t\t\tthis.worldSizeYHalf = this.calcLength( x0, y0, x10, y10 );\n\t\t\tthis.worldSizeR = this.calcLength( x0, y0, x1, y1 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tlet iv = voffset * 2;\n\n\t\t\t// Top-left corner\n\t\t\tvertices[ iv + 0 ] = x0;\n\t\t\tvertices[ iv + 1 ] = y0;\n\t\t\tvertices[ iv + 2 ] = x1;\n\t\t\tvertices[ iv + 3 ] = y1;\n\t\t\tvertices[ iv + 4 ] = x5;\n\t\t\tvertices[ iv + 5 ] = y5;\n\t\t\tvertices[ iv + 6 ] = x6;\n\t\t\tvertices[ iv + 7 ] = y6;\n\t\t\tiv += 8;\n\n\t\t\t// Top-right corner\n\t\t\tvertices[ iv + 0 ] = x3;\n\t\t\tvertices[ iv + 1 ] = y3;\n\t\t\tvertices[ iv + 2 ] = x4;\n\t\t\tvertices[ iv + 3 ] = y4;\n\t\t\tvertices[ iv + 4 ] = x8;\n\t\t\tvertices[ iv + 5 ] = y8;\n\t\t\tvertices[ iv + 6 ] = x9;\n\t\t\tvertices[ iv + 7 ] = y9;\n\t\t\tiv += 8;\n\n\t\t\t// Bottom-left corner\n\t\t\tvertices[ iv + 0 ] = x13;\n\t\t\tvertices[ iv + 1 ] = y13;\n\t\t\tvertices[ iv + 2 ] = x14;\n\t\t\tvertices[ iv + 3 ] = y14;\n\t\t\tvertices[ iv + 4 ] = x18;\n\t\t\tvertices[ iv + 5 ] = y18;\n\t\t\tvertices[ iv + 6 ] = x19;\n\t\t\tvertices[ iv + 7 ] = y19;\n\t\t\tiv += 8;\n\n\t\t\t// Bottom-right corner\n\t\t\tvertices[ iv + 0 ] = x16;\n\t\t\tvertices[ iv + 1 ] = y16;\n\t\t\tvertices[ iv + 2 ] = x17;\n\t\t\tvertices[ iv + 3 ] = y17;\n\t\t\tvertices[ iv + 4 ] = x21;\n\t\t\tvertices[ iv + 5 ] = y21;\n\t\t\tvertices[ iv + 6 ] = x22;\n\t\t\tvertices[ iv + 7 ] = y22;\n\t\t\tiv += 8;\n\n\t\t\t// Top edge\n\t\t\tvertices[ iv + 0 ] = x1;\n\t\t\tvertices[ iv + 1 ] = y1;\n\t\t\tvertices[ iv + 2 ] = x2;\n\t\t\tvertices[ iv + 3 ] = y2;\n\t\t\tvertices[ iv + 4 ] = x3;\n\t\t\tvertices[ iv + 5 ] = y3;\n\t\t\tiv += 6;\n\n\t\t\t// Top\n\t\t\tvertices[ iv + 0 ] = x5;\n\t\t\tvertices[ iv + 1 ] = y5;\n\t\t\tvertices[ iv + 2 ] = x6;\n\t\t\tvertices[ iv + 3 ] = y6;\n\t\t\tvertices[ iv + 4 ] = x7;\n\t\t\tvertices[ iv + 5 ] = y7;\n\t\t\tvertices[ iv + 6 ] = x8;\n\t\t\tvertices[ iv + 7 ] = y8;\n\t\t\tvertices[ iv + 8 ] = x9;\n\t\t\tvertices[ iv + 9 ] = y9;\n\t\t\tiv += 10;\n\n\t\t\t// Middle\n\t\t\tvertices[ iv + 0 ] = x10;\n\t\t\tvertices[ iv + 1 ] = y10;\n\t\t\tvertices[ iv + 2 ] = x11;\n\t\t\tvertices[ iv + 3 ] = y11;\n\t\t\tvertices[ iv + 4 ] = x11;\n\t\t\tvertices[ iv + 5 ] = y11;\n\t\t\tvertices[ iv + 6 ] = x12;\n\t\t\tvertices[ iv + 7 ] = y12;\n\t\t\tiv += 8;\n\n\t\t\t// Bottom\n\t\t\tvertices[ iv + 0 ] = x13;\n\t\t\tvertices[ iv + 1 ] = y13;\n\t\t\tvertices[ iv + 2 ] = x14;\n\t\t\tvertices[ iv + 3 ] = y14;\n\t\t\tvertices[ iv + 4 ] = x15;\n\t\t\tvertices[ iv + 5 ] = y15;\n\t\t\tvertices[ iv + 6 ] = x16;\n\t\t\tvertices[ iv + 7 ] = y16;\n\t\t\tvertices[ iv + 8 ] = x17;\n\t\t\tvertices[ iv + 9 ] = y17;\n\t\t\tiv += 10;\n\n\t\t\t// Bottom edge\n\t\t\tvertices[ iv + 0 ] = x19;\n\t\t\tvertices[ iv + 1 ] = y19;\n\t\t\tvertices[ iv + 2 ] = x20;\n\t\t\tvertices[ iv + 3 ] = y20;\n\t\t\tvertices[ iv + 4 ] = x21;\n\t\t\tvertices[ iv + 5 ] = y21;\n\t\t}\n\t}\n\n\t/**\n\t * Please note that this method must be executed after the updateVertexType1(...).\n\t */\n\tprotected updateType1Clipping( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst corner = shape.corner;\n\t\tif( corner !== this.corner ) {\n\t\t\tthis.corner = corner;\n\n\t\t\t// Invalidate the strokeWidth to update steps / antialiases.\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Clippings\n\t\t\tbuffer.clippingBuffer.update();\n\t\t\tconst clippings = buffer.clippings;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet ic = voffset * 3;\n\t\t\tconst rxc = 1 - this.worldSizeR / this.worldSizeXHalf;\n\t\t\tconst ryc = 1 - this.worldSizeR / this.worldSizeYHalf;\n\n\t\t\t// Top-left corner\n\t\t\tif( corner & EShapeCorner.TOP_LEFT ) {\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\t\t\t} else {\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\t\t\t}\n\n\t\t\t// Top-right corner\n\t\t\tif( corner & EShapeCorner.TOP_RIGHT ) {\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\t\t\t} else {\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\t\t\t}\n\n\t\t\t// Bottom-left corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_LEFT ) {\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\t\t\t} else {\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\t\t\t}\n\n\t\t\t// Bottom-right corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_RIGHT ) {\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 1;\n\t\t\t\tic += 3;\n\t\t\t} else {\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\n\t\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\t\tic += 3;\n\t\t\t}\n\n\t\t\t// Top edge\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\t// Top\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\t// Middle\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = 0;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\t// Bottom\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 1;\n\t\t\tclippings[ ic + 1 ] = ryc;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\t// Bottom edge\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = 0;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\n\t\t\tclippings[ ic + 0 ] = rxc;\n\t\t\tclippings[ ic + 1 ] = 1;\n\t\t\tclippings[ ic + 2 ] = 0;\n\t\t\tic += 3;\n\t\t}\n\t}\n\n\tprotected updateType1Step( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst strokeSide = shape.stroke.side;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth || strokeSide !== this.strokeSide ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tthis.strokeSide = strokeSide;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tthis.calcStep( this.worldSizeR, strokeWidth, work );\n\t\t\tconst swc = work[ 0 ];\n\t\t\tconst pc0 = work[ 1 ];\n\t\t\tconst pc1 = work[ 2 ];\n\n\t\t\tthis.calcStep( this.worldSizeXHalf, strokeWidth, work );\n\t\t\tconst swx = work[ 0 ];\n\t\t\tconst px0 = work[ 1 ];\n\t\t\tconst px1 = work[ 2 ];\n\n\t\t\tthis.calcStep( this.worldSizeYHalf, strokeWidth, work );\n\t\t\tconst swy = work[ 0 ];\n\t\t\tconst py0 = work[ 1 ];\n\t\t\tconst py1 = work[ 2 ];\n\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst steps = buffer.steps;\n\t\t\tconst antialiases = buffer.antialiases;\n\t\t\tlet is = voffset * 2;\n\t\t\tlet ia = voffset * 4;\n\t\t\tconst rxc = 1 - this.worldSizeR / this.worldSizeXHalf;\n\t\t\tconst ryc = 1 - this.worldSizeR / this.worldSizeYHalf;\n\n\t\t\tlet swt = swy;\n\t\t\tlet pt0 = py0;\n\t\t\tlet swtc = swc;\n\t\t\tlet ptc0 = pc0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.TOP) ) {\n\t\t\t\tswt = 1;\n\t\t\t\tpt0 = py1;\n\t\t\t\tswtc = 1;\n\t\t\t\tptc0 = pc1;\n\t\t\t}\n\t\t\tlet swr = swx;\n\t\t\tlet pr0 = px0;\n\t\t\tlet swrc = swc;\n\t\t\tlet prc0 = pc0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.RIGHT) ) {\n\t\t\t\tswr = 1;\n\t\t\t\tpr0 = px1;\n\t\t\t\tswrc = 1;\n\t\t\t\tprc0 = pc1;\n\t\t\t}\n\t\t\tlet swb = swy;\n\t\t\tlet pb0 = py0;\n\t\t\tlet swbc = swc;\n\t\t\tlet pbc0 = pc0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.BOTTOM) ) {\n\t\t\t\tswb = 1;\n\t\t\t\tpb0 = py1;\n\t\t\t\tswbc = 1;\n\t\t\t\tpbc0 = pc1;\n\t\t\t}\n\t\t\tlet swl = swx;\n\t\t\tlet pl0 = px0;\n\t\t\tlet swlc = swc;\n\t\t\tlet plc0 = pc0;\n\t\t\tif( ! (strokeSide & EShapeStrokeSide.LEFT) ) {\n\t\t\t\tswl = 1;\n\t\t\t\tpl0 = px1;\n\t\t\t\tswlc = 1;\n\t\t\t\tplc0 = pc1;\n\t\t\t}\n\t\t\tconst plr0 = 0.5 * (pl0 + pr0);\n\t\t\tconst ptb0 = 0.5 * (pt0 + pb0);\n\n\t\t\t// Top-left corner\n\t\t\tconst corner = this.corner;\n\t\t\tif( corner & EShapeCorner.TOP_LEFT ) {\n\t\t\t\tsteps[ is + 0 ] = swlc;\n\t\t\t\tsteps[ is + 1 ] = swtc;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = swtc;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swlc;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t} else {\n\t\t\t\tsteps[ is + 0 ] = swl;\n\t\t\t\tsteps[ is + 1 ] = swt;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\t\tsteps[ is + 1 ] = swt;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl;\n\t\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t}\n\n\t\t\t// Top-right corner\n\t\t\tif( corner & EShapeCorner.TOP_RIGHT ) {\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = swtc;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swrc;\n\t\t\t\tsteps[ is + 1 ] = swtc;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swrc;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = ptc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t} else {\n\t\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\t\tsteps[ is + 1 ] = swt;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr;\n\t\t\t\tsteps[ is + 1 ] = swt;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr;\n\t\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t}\n\n\t\t\t// Bottom-left corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_LEFT ) {\n\t\t\t\tsteps[ is + 0 ] = swlc;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swlc;\n\t\t\t\tsteps[ is + 1 ] = swbc;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = swbc;\n\t\t\t\tantialiases[ ia + 0 ] = plc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t} else {\n\t\t\t\tsteps[ is + 0 ] = swl;\n\t\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl;\n\t\t\t\tsteps[ is + 1 ] = swb;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\t\tsteps[ is + 1 ] = swb;\n\t\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t}\n\n\t\t\t// Bottom-right corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_RIGHT ) {\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swrc;\n\t\t\t\tsteps[ is + 1 ] = 0;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = 0;\n\t\t\t\tsteps[ is + 1 ] = swbc;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swrc;\n\t\t\t\tsteps[ is + 1 ] = swbc;\n\t\t\t\tantialiases[ ia + 0 ] = prc0;\n\t\t\t\tantialiases[ ia + 1 ] = pbc0;\n\t\t\t\tantialiases[ ia + 2 ] = pc1;\n\t\t\t\tantialiases[ ia + 3 ] = pc1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t} else {\n\t\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr;\n\t\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\t\tsteps[ is + 1 ] = swb;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\n\t\t\t\tsteps[ is + 0 ] = swr;\n\t\t\t\tsteps[ is + 1 ] = swb;\n\t\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\t\tis += 2;\n\t\t\t\tia += 4;\n\t\t\t}\n\n\t\t\t// Top edge\n\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\tsteps[ is + 1 ] = swt;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// Top\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = swt * ryc;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pt0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// Middle\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = ptb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = ptb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = ptb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = 0;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = ptb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// Bottom\n\t\t\tsteps[ is + 0 ] = swl;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr;\n\t\t\tsteps[ is + 1 ] = swb * ryc;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\t// Bottom edge\n\t\t\tsteps[ is + 0 ] = swl * rxc;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pl0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = 0;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = plr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\n\t\t\tsteps[ is + 0 ] = swr * rxc;\n\t\t\tsteps[ is + 1 ] = swb;\n\t\t\tantialiases[ ia + 0 ] = pr0;\n\t\t\tantialiases[ ia + 1 ] = pb0;\n\t\t\tantialiases[ ia + 2 ] = px1;\n\t\t\tantialiases[ ia + 3 ] = py1;\n\t\t\tis += 2;\n\t\t\tia += 4;\n\t\t}\n\t}\n\n\tprotected updateType1Uv( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\tconst x4 = 0.5 * (x0 + x1);\n\t\t\tconst y4 = 0.5 * (y0 + y1);\n\t\t\tconst x5 = 0.5 * (x3 + x2);\n\t\t\tconst y5 = 0.5 * (y3 + y2);\n\n\t\t\tconst ruvx = 0.5 * this.worldSizeR / this.worldSizeXHalf;\n\t\t\tconst ruvy = 0.5 * this.worldSizeR / this.worldSizeYHalf;\n\t\t\tconst d0x = ruvx * (x1 - x0);\n\t\t\tconst d0y = ruvx * (y1 - y0);\n\t\t\tconst d1x = ruvy * (x3 - x0);\n\t\t\tconst d1y = ruvy * (y3 - y0);\n\n\t\t\t// UVs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet iuv = voffset * 2;\n\n\t\t\t// Top-left corner\n\t\t\tuvs[ iuv + 0 ] = x0;\n\t\t\tuvs[ iuv + 1 ] = y0;\n\t\t\tuvs[ iuv + 2 ] = x0 + d0x;\n\t\t\tuvs[ iuv + 3 ] = y0 + d0y;\n\t\t\tuvs[ iuv + 4 ] = x0 + d1x;\n\t\t\tuvs[ iuv + 5 ] = y0 + d1y;\n\t\t\tuvs[ iuv + 6 ] = x0 + d0x + d1x;\n\t\t\tuvs[ iuv + 7 ] = y0 + d0y + d1y;\n\t\t\tiuv += 8;\n\n\t\t\t// Top-right corner\n\t\t\tuvs[ iuv + 0 ] = x1 - d0x;\n\t\t\tuvs[ iuv + 1 ] = y1 - d0y;\n\t\t\tuvs[ iuv + 2 ] = x1;\n\t\t\tuvs[ iuv + 3 ] = y1;\n\t\t\tuvs[ iuv + 4 ] = x1 - d0x + d1x;\n\t\t\tuvs[ iuv + 5 ] = y1 - d0y + d1y;\n\t\t\tuvs[ iuv + 6 ] = x1 + d1x;\n\t\t\tuvs[ iuv + 7 ] = y1 + d1y;\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom-left corner\n\t\t\tuvs[ iuv + 0 ] = x3 - d1x;\n\t\t\tuvs[ iuv + 1 ] = y3 - d1y;\n\t\t\tuvs[ iuv + 2 ] = x3 + d0x - d1x;\n\t\t\tuvs[ iuv + 3 ] = y3 + d0y - d1y;\n\t\t\tuvs[ iuv + 4 ] = x3;\n\t\t\tuvs[ iuv + 5 ] = y3;\n\t\t\tuvs[ iuv + 6 ] = x3 + d0x;\n\t\t\tuvs[ iuv + 7 ] = y3 + d0y;\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom-right corner\n\t\t\tuvs[ iuv + 0 ] = x2 - d0x - d1x;\n\t\t\tuvs[ iuv + 1 ] = y2 - d0y - d1y;\n\t\t\tuvs[ iuv + 2 ] = x2 - d1x;\n\t\t\tuvs[ iuv + 3 ] = y2 - d1y;\n\t\t\tuvs[ iuv + 4 ] = x2 - d0x;\n\t\t\tuvs[ iuv + 5 ] = y2 - d0y;\n\t\t\tuvs[ iuv + 6 ] = x2;\n\t\t\tuvs[ iuv + 7 ] = y2;\n\t\t\tiuv += 8;\n\n\t\t\t// Top edge\n\t\t\tuvs[ iuv + 0 ] = x0 + d0x;\n\t\t\tuvs[ iuv + 1 ] = y0 + d0y;\n\t\t\tuvs[ iuv + 2 ] = x4;\n\t\t\tuvs[ iuv + 3 ] = y4;\n\t\t\tuvs[ iuv + 4 ] = x1 - d0x;\n\t\t\tuvs[ iuv + 5 ] = y1 - d0y;\n\t\t\tiuv += 6;\n\n\t\t\t// Top\n\t\t\tuvs[ iuv + 0 ] = x0 + d1x;\n\t\t\tuvs[ iuv + 1 ] = y0 + d1y;\n\t\t\tuvs[ iuv + 2 ] = x0 + d1x + d0x;\n\t\t\tuvs[ iuv + 3 ] = y0 + d1y + d0y;\n\t\t\tuvs[ iuv + 4 ] = x4 + d1x;\n\t\t\tuvs[ iuv + 5 ] = y4 + d1y;\n\t\t\tuvs[ iuv + 6 ] = x1 + d1x - d0x;\n\t\t\tuvs[ iuv + 7 ] = y1 + d1y - d0y;\n\t\t\tuvs[ iuv + 8 ] = x1 + d1x;\n\t\t\tuvs[ iuv + 9 ] = y1 + d1y;\n\t\t\tiuv += 10;\n\n\t\t\t// Middle\n\t\t\tconst x02 = 0.5 * (x0 + x2);\n\t\t\tconst y02 = 0.5 * (y0 + y2);\n\t\t\tuvs[ iuv + 0 ] = 0.5 * (x0 + x3);\n\t\t\tuvs[ iuv + 1 ] = 0.5 * (y0 + y3);\n\t\t\tuvs[ iuv + 2 ] = x02;\n\t\t\tuvs[ iuv + 3 ] = y02;\n\t\t\tuvs[ iuv + 4 ] = x02;\n\t\t\tuvs[ iuv + 5 ] = y02;\n\t\t\tuvs[ iuv + 6 ] = 0.5 * (x1 + x2);\n\t\t\tuvs[ iuv + 7 ] = 0.5 * (y1 + y2);\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom\n\t\t\tuvs[ iuv + 0 ] = x3 - d1x;\n\t\t\tuvs[ iuv + 1 ] = y3 - d1y;\n\t\t\tuvs[ iuv + 2 ] = x3 - d1x + d0x;\n\t\t\tuvs[ iuv + 3 ] = y3 - d1y + d0y;\n\t\t\tuvs[ iuv + 4 ] = x5 - d1x;\n\t\t\tuvs[ iuv + 5 ] = y5 - d1y;\n\t\t\tuvs[ iuv + 6 ] = x2 - d1x - d0x;\n\t\t\tuvs[ iuv + 7 ] = y2 - d1y - d0y;\n\t\t\tuvs[ iuv + 8 ] = x2 - d1x;\n\t\t\tuvs[ iuv + 9 ] = y2 - d1y;\n\t\t\tiuv += 10;\n\n\t\t\t// Bottom edge\n\t\t\tuvs[ iuv + 0 ] = x3 + d0x;\n\t\t\tuvs[ iuv + 1 ] = y3 + d0y;\n\t\t\tuvs[ iuv + 2 ] = x5;\n\t\t\tuvs[ iuv + 3 ] = y5;\n\t\t\tuvs[ iuv + 4 ] = x2 - d0x;\n\t\t\tuvs[ iuv + 5 ] = y2 - d0y;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeRectangleRoundedUploaded } from \"./e-shape-rectangle-rounded-uploaded\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\n\nexport class EShapeRectangleRoundedUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number,\n\t\tantialiasWeight: number\n\t): EShapeRectangleRoundedUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 36 + tvcount;\n\t\tconst icount = 24 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeRectangleRoundedUploaded(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, ioffset,\n\t\t\t\ttvcount, ticount,\n\t\t\t\tvcount, icount,\n\t\t\t\tantialiasWeight\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeStrokeSide } from \"../e-shape-stroke\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeRectangleRounded extends EShapePrimitive {\n\tconstructor( type = EShapeType.RECTANGLE_ROUNDED ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeRectangleRounded {\n\t\treturn new EShapeRectangleRounded().copy( this );\n\t}\n\n\tprivate containsAbs_( x: number, y: number, ax: number, ay: number, r: number, corner: EShapeCorner ): boolean {\n\t\tconst bx0 = -ax + r;\n\t\tif( x <= bx0 ) {\n\t\t\tconst by0 = -ay + r;\n\t\t\tif( y <= by0 && (corner & EShapeCorner.TOP_LEFT) ) {\n\t\t\t\t// Top-left corner\n\t\t\t\tconst dx = x - bx0;\n\t\t\t\tconst dy = y - by0;\n\t\t\t\treturn dx * dx + dy * dy <= r * r;\n\t\t\t} else {\n\t\t\t\tconst by1 = +ay - r;\n\t\t\t\tif( by1 <= y && (corner & EShapeCorner.BOTTOM_LEFT) ) {\n\t\t\t\t\t// Bottom-left corner\n\t\t\t\t\tconst dx = x - bx0;\n\t\t\t\t\tconst dy = y - by1;\n\t\t\t\t\treturn dx * dx + dy * dy <= r * r;\n\t\t\t\t} else {\n\t\t\t\t\t// Middle-left box\n\t\t\t\t\treturn -ax <= x;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst bx1 = +ax - r;\n\t\t\tif( bx1 <= x ) {\n\t\t\t\tconst by0 = -ay + r;\n\t\t\t\tif( y <= by0 && (corner & EShapeCorner.TOP_RIGHT) ) {\n\t\t\t\t\t// Top-right corner\n\t\t\t\t\tconst dx = x - bx1;\n\t\t\t\t\tconst dy = y - by0;\n\t\t\t\t\treturn dx * dx + dy * dy <= r * r;\n\t\t\t\t} else {\n\t\t\t\t\tconst by1 = +ay - r;\n\t\t\t\t\tif( by1 <= y && (corner & EShapeCorner.BOTTOM_RIGHT) ) {\n\t\t\t\t\t\t// Bottom-right corner\n\t\t\t\t\t\tconst dx = x - bx1;\n\t\t\t\t\t\tconst dy = y - by1;\n\t\t\t\t\t\treturn dx * dx + dy * dy <= r * r;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Middle-right box\n\t\t\t\t\t\treturn x <= +ax;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn -ay <= y && y <= +ay;\n\t\t\t}\n\t\t}\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst fill = this.fill;\n\t\t\tconst stroke = this.stroke;\n\t\t\tconst strokeWidth = ( stroke.enable ? stroke.width : 0 );\n\t\t\tif( fill.enable || 0 < strokeWidth ) {\n\t\t\t\tconst r = this.radius * Math.min( ax, ay );\n\t\t\t\tconst corner = this.corner;\n\t\t\t\tconst strokeSide = stroke.side;\n\t\t\t\tif( this.containsAbs_( x, y, ax, ay, r, corner ) ) {\n\t\t\t\t\tif( fill.enable ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst wx = Math.max( 0.0, ax - strokeWidth );\n\t\t\t\t\t\tconst wy = Math.max( 0.0, ay - strokeWidth );\n\t\t\t\t\t\tconst wr = Math.max( 0.0, r - strokeWidth );\n\t\t\t\t\t\tif( ! this.containsAbs_( x, y, wx, wy, wr, corner ) ) {\n\t\t\t\t\t\t\tif( strokeSide === EShapeStrokeSide.ALL ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( x <= -wx + wr ) {\n\t\t\t\t\t\t\t\t\tconst hasLeftSide = ( strokeSide & EShapeStrokeSide.LEFT ) !== 0;\n\t\t\t\t\t\t\t\t\tif( y <= -wy + wr ) {\n\t\t\t\t\t\t\t\t\t\tconst hasTopSide = ( strokeSide & EShapeStrokeSide.TOP );\n\t\t\t\t\t\t\t\t\t\tif( hasTopSide && hasLeftSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t} else if( hasTopSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn -wx <= y;\n\t\t\t\t\t\t\t\t\t\t} else if( hasLeftSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn x <= -wx;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if( +wy - wr <= y ) {\n\t\t\t\t\t\t\t\t\t\tconst hasBottomSide = ( strokeSide & EShapeStrokeSide.BOTTOM );\n\t\t\t\t\t\t\t\t\t\tif( hasBottomSide && hasLeftSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t} else if( hasBottomSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn +wx <= y;\n\t\t\t\t\t\t\t\t\t\t} else if( hasLeftSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn x <= -wx;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn hasLeftSide;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if( +wx - wr <= x ) {\n\t\t\t\t\t\t\t\t\tconst hasRightSide = ( strokeSide & EShapeStrokeSide.RIGHT ) !== 0;\n\t\t\t\t\t\t\t\t\tif( y <= -wy + wr ) {\n\t\t\t\t\t\t\t\t\t\tconst hasTopSide = ( strokeSide & EShapeStrokeSide.TOP );\n\t\t\t\t\t\t\t\t\t\tif( hasTopSide && hasRightSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t} else if( hasTopSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn -wx <= y;\n\t\t\t\t\t\t\t\t\t\t} else if( hasRightSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn +wx <= x;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if( +wy - wr <= y ) {\n\t\t\t\t\t\t\t\t\t\tconst hasBottomSide = ( strokeSide & EShapeStrokeSide.BOTTOM );\n\t\t\t\t\t\t\t\t\t\tif( hasBottomSide && hasRightSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t} else if( hasBottomSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn +wx <= y;\n\t\t\t\t\t\t\t\t\t\t} else if( hasRightSide ) {\n\t\t\t\t\t\t\t\t\t\t\treturn +wx <= x;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn hasRightSide;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( y <= -wy + wr ) {\n\t\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.TOP ) !== 0;\n\t\t\t\t\t\t\t\t\t} else if( +wy - wr <= y ) {\n\t\t\t\t\t\t\t\t\t\treturn ( strokeSide & EShapeStrokeSide.BOTTOM ) !== 0;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeRectangleRounded } from \"./e-shape-rectangle-rounded\";\n\nexport class EShapeRectangleRoundeds {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeRectangleRounded> | EShapeRectangleRounded {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeRectangleRoundeds.create() );\n\t}\n\n\tstatic create(): EShapeRectangleRounded {\n\t\treturn new EShapeRectangleRounded();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCapabilities } from \"../shape/e-shape-capabilities\";\nimport { EShapeCapability } from \"../shape/e-shape-capability\";\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeRectangleRoundedUploadeds } from \"../shape/variant/e-shape-rectangle-rounded-uploadeds\";\nimport { EShapeRectangleRoundeds } from \"../shape/variant/e-shape-rectangle-roundeds\";\n\nexport const loadShapeRectangleRounded = () => {\n\tEShapeUploadeds[ EShapeType.RECTANGLE_ROUNDED ] = EShapeRectangleRoundedUploadeds.create;\n\tEShapeDeserializers[ EShapeType.RECTANGLE_ROUNDED ] = EShapeRectangleRoundeds.deserialize;\n\tEShapeCapabilities.set(\n\t\tEShapeType.RECTANGLE_ROUNDED,\n\t\tEShapeCapability.PRIMITIVE | EShapeCapability.STROKE_SIDE | EShapeCapability.BORDER_RADIUS\n\t);\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeTriangleUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Clippings\n\t\tbuffer.clippingBuffer.update();\n\t\tconst clippings = buffer.clippings;\n\t\tconst iv = voffset * 3;\n\t\tclippings[ iv +  0 ] = 0;\n\t\tclippings[ iv +  1 ] = 0;\n\t\tclippings[ iv +  2 ] = 0;\n\n\t\tclippings[ iv +  3 ] = 1;\n\t\tclippings[ iv +  4 ] = 0;\n\t\tclippings[ iv +  5 ] = 0;\n\n\t\tclippings[ iv +  6 ] = 1;\n\t\tclippings[ iv +  7 ] = 0;\n\t\tclippings[ iv +  8 ] = 0;\n\n\t\tclippings[ iv +  9 ] = 0;\n\t\tclippings[ iv + 10 ] = 1;\n\t\tclippings[ iv + 11 ] = 0;\n\n\t\tclippings[ iv + 12 ] = 0;\n\t\tclippings[ iv + 13 ] = 1;\n\t\tclippings[ iv + 14 ] = 0;\n\n\t\tclippings[ iv + 15 ] = 1;\n\t\tclippings[ iv + 16 ] = 0;\n\t\tclippings[ iv + 17 ] = 0;\n\n\t\tclippings[ iv + 18 ] = 1;\n\t\tclippings[ iv + 19 ] = 0;\n\t\tclippings[ iv + 20 ] = 0;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tconst ii = ioffset * 3;\n\t\tindices[ ii + 0 ] = voffset + 0;\n\t\tindices[ ii + 1 ] = voffset + 1;\n\t\tindices[ ii + 2 ] = voffset + 2;\n\n\t\tindices[ ii + 3 ] = voffset + 0;\n\t\tindices[ ii + 4 ] = voffset + 3;\n\t\tindices[ ii + 5 ] = voffset + 4;\n\n\t\tindices[ ii + 6 ] = voffset + 0;\n\t\tindices[ ii + 7 ] = voffset + 5;\n\t\tindices[ ii + 8 ] = voffset + 6;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateTriangleVertex( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateTriangleStep( buffer, shape );\n\t\tthis.updateTriangleUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateTriangleVertex( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst isSizeChanged = ( sizeX !== this.sizeX || sizeY !== this.sizeY );\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\tif( isSizeChanged ) {\n\t\t\t\t// Invalidate the texture transform ID to update the UVs.\n\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t}\n\t\t\t// Invalidate the stroke width to update the steps / antialiases.\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst sz = Math.sqrt( sx * sx + 4 * sy * sy );\n\t\t\tconst sw = 2 * sx * sy / (sx + sz);\n\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = buffer.work;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\t\t\twork.set( +sx, 0 );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst tx = internalTransform.tx;\n\t\t\tconst ty = internalTransform.ty;\n\t\t\tconst dx = tx - x0;\n\t\t\tconst dy = ty - y0;\n\t\t\tconst x1 = work.x + dx;\n\t\t\tconst y1 = work.y + dy;\n\t\t\tconst x2 = tx + (tx - work.x) + dx;\n\t\t\tconst y2 = ty + (ty - work.y) + dy;\n\t\t\twork.set( 0, sy - sw ); // Incenter of a triangle\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x3 = work.x;\n\t\t\tconst y3 = work.y;\n\n\t\t\t// World size\n\t\t\tconst xb = tx + dx;\n\t\t\tconst yb = ty + dy;\n\t\t\tthis.worldSizeXHalf = this.calcLength( x1, y1, xb, yb );\n\t\t\tthis.worldSizeYHalf = this.calcLength( x0, y0, tx, ty );\n\t\t\tthis.worldSizeR = this.calcLength( xb, yb, x3, y3 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tconst iv = voffset * 2;\n\t\t\tvertices[ iv +  0 ] = x3;\n\t\t\tvertices[ iv +  1 ] = y3;\n\n\t\t\tvertices[ iv +  2 ] = x0;\n\t\t\tvertices[ iv +  3 ] = y0;\n\t\t\tvertices[ iv +  4 ] = x1;\n\t\t\tvertices[ iv +  5 ] = y1;\n\n\t\t\tvertices[ iv +  6 ] = x1;\n\t\t\tvertices[ iv +  7 ] = y1;\n\t\t\tvertices[ iv +  8 ] = x2;\n\t\t\tvertices[ iv +  9 ] = y2;\n\n\t\t\tvertices[ iv + 10 ] = x2;\n\t\t\tvertices[ iv + 11 ] = y2;\n\t\t\tvertices[ iv + 12 ] = x0;\n\t\t\tvertices[ iv + 13 ] = y0;\n\t\t}\n\t}\n\n\tprotected updateTriangleStep( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tthis.calcStep( this.worldSizeR, strokeWidth, work );\n\t\t\tconst swc = work[ 0 ];\n\t\t\tconst pc0 = work[ 1 ];\n\t\t\tconst pc1 = work[ 2 ];\n\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\tthis.updateStep( buffer, voffset, vcount, swc, swc, pc0, pc0, pc1, pc1 );\n\t\t}\n\t}\n\n\tprotected updateTriangleUv( buffer: EShapeBuffer, shape: EShape ) {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\tconst x4 = 0.5 * ( x0 + x1 );\n\t\t\tconst y4 = 0.5 * ( y0 + y1 );\n\n\t\t\tconst c = 1 - 0.5 * this.worldSizeR / this.worldSizeYHalf;\n\t\t\tconst x5 = x4 + c * ( x3 - x0 );\n\t\t\tconst y5 = y4 + c * ( y3 - y0 );\n\n\t\t\t// UVs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst iuv = voffset * 2;\n\t\t\tuvs[ iuv +  0 ] = x5;\n\t\t\tuvs[ iuv +  1 ] = y5;\n\n\t\t\tuvs[ iuv +  2 ] = x4;\n\t\t\tuvs[ iuv +  3 ] = y4;\n\t\t\tuvs[ iuv +  4 ] = x2;\n\t\t\tuvs[ iuv +  5 ] = y2;\n\n\t\t\tuvs[ iuv +  6 ] = x2;\n\t\t\tuvs[ iuv +  7 ] = y2;\n\t\t\tuvs[ iuv +  8 ] = x3;\n\t\t\tuvs[ iuv +  9 ] = y3;\n\n\t\t\tuvs[ iuv + 10 ] = x3;\n\t\t\tuvs[ iuv + 11 ] = y3;\n\t\t\tuvs[ iuv + 12 ] = x4;\n\t\t\tuvs[ iuv + 13 ] = y4;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\nimport { EShapeTriangleUploaded } from \"./e-shape-triangle-uploaded\";\n\nexport class EShapeTriangleUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number,\n\t\tantialiasWeight: number\n\t): EShapeTriangleUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 7 + tvcount;\n\t\tconst icount = 3 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeTriangleUploaded(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, ioffset,\n\t\t\t\ttvcount, ticount,\n\t\t\t\tvcount, icount,\n\t\t\t\tantialiasWeight\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapePrimitive } from \"./e-shape-primitive\";\n\nexport class EShapeTriangle extends EShapePrimitive {\n\tconstructor( type = EShapeType.TRIANGLE ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeTriangle {\n\t\treturn new EShapeTriangle().copy( this );\n\t}\n\n\tprotected containsAbs_( x: number, y: number, a: number, ay1: number, ay2: number ): boolean {\n\t\t// a = 2 * ay / ax\n\t\t// y = + a * x + ay1\n\t\t// y = - a * x + ay1\n\t\t// y = ay2;\n\t\treturn ( +a * x + ay1 - y <= 0 && -a * x + ay1 - y <= 0 && y <= ay2 );\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ): boolean {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst a = 2 * ay / ax;\n\t\t\tconst fill = this.fill;\n\t\t\tif( fill.enable ) {\n\t\t\t\tif( this.containsAbs_( x, y, a, -ay, +ay ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst stroke = this.stroke;\n\t\t\t\tconst strokeWidth = stroke.width;\n\t\t\t\tif( stroke.enable && 0 < strokeWidth ) {\n\t\t\t\t\tif( this.containsAbs_( x, y, a, -ay, +ay ) ) {\n\t\t\t\t\t\tconst az = Math.sqrt( ax * ax + 4 * ay * ay );\n\t\t\t\t\t\tconst aw = 2 * ax * ay / (ax + az);\n\n\t\t\t\t\t\tconst cy = ay - aw;\n\t\t\t\t\t\tconst ay1 = cy + (-ay - cy) * Math.max( 0.0, aw - strokeWidth ) / aw;\n\t\t\t\t\t\tconst ay2 = ay - strokeWidth;\n\t\t\t\t\t\tif( ! this.containsAbs_( x, y, a, ay1, ay2 ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeTriangle } from \"./e-shape-triangle\";\n\nexport class EShapeTriangles {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeTriangle> | EShapeTriangle {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeTriangles.create() );\n\t}\n\n\tstatic create(): EShapeTriangle {\n\t\treturn new EShapeTriangle();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeTriangleUploadeds } from \"../shape/variant/e-shape-triangle-uploadeds\";\nimport { EShapeTriangles } from \"../shape/variant/e-shape-triangles\";\n\nexport const loadShapeTriangle = () => {\n\tEShapeUploadeds[ EShapeType.TRIANGLE ] = EShapeTriangleUploadeds.create;\n\tEShapeDeserializers[ EShapeType.TRIANGLE ] = EShapeTriangles.deserialize;\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeTextUploaded } from \"./e-shape-text-uploaded\";\n\nexport class EShapeTriangleRoundedUploaded extends EShapeTextUploaded {\n\tinit( shape: EShape ): this {\n\t\tsuper.init( shape );\n\t\tconst buffer = this.buffer;\n\t\tconst voffset = this.vertexOffset;\n\t\tconst ioffset = this.indexOffset;\n\n\t\t// Indices\n\t\tbuffer.indexBuffer.update();\n\t\tconst indices = buffer.indices;\n\t\tconst ii = ioffset * 3;\n\n\t\t// Top corner\n\t\tindices[ ii +  0 ] = voffset + 0;\n\t\tindices[ ii +  1 ] = voffset + 1;\n\t\tindices[ ii +  2 ] = voffset + 3;\n\n\t\tindices[ ii +  3 ] = voffset + 1;\n\t\tindices[ ii +  4 ] = voffset + 2;\n\t\tindices[ ii +  5 ] = voffset + 3;\n\n\t\t// Bottom-right corner\n\t\tindices[ ii +  6 ] = voffset + 4;\n\t\tindices[ ii +  7 ] = voffset + 5;\n\t\tindices[ ii +  8 ] = voffset + 7;\n\n\t\tindices[ ii +  9 ] = voffset + 5;\n\t\tindices[ ii + 10 ] = voffset + 6;\n\t\tindices[ ii + 11 ] = voffset + 7;\n\n\t\t// Bottom-left corner\n\t\tindices[ ii + 12 ] = voffset + 8;\n\t\tindices[ ii + 13 ] = voffset + 9;\n\t\tindices[ ii + 14 ] = voffset + 11;\n\n\t\tindices[ ii + 15 ] = voffset + 9;\n\t\tindices[ ii + 16 ] = voffset + 10;\n\t\tindices[ ii + 17 ] = voffset + 11;\n\n\t\t// Others\n\t\tindices[ ii + 18 ] = voffset + 12;\n\t\tindices[ ii + 19 ] = voffset + 13;\n\t\tindices[ ii + 20 ] = voffset + 16;\n\n\t\tindices[ ii + 21 ] = voffset + 13;\n\t\tindices[ ii + 22 ] = voffset + 14;\n\t\tindices[ ii + 23 ] = voffset + 16;\n\n\t\tindices[ ii + 24 ] = voffset + 14;\n\t\tindices[ ii + 25 ] = voffset + 15;\n\t\tindices[ ii + 26 ] = voffset + 16;\n\n\t\t//\n\t\tindices[ ii + 27 ] = voffset + 12;\n\t\tindices[ ii + 28 ] = voffset + 16;\n\t\tindices[ ii + 29 ] = voffset + 19;\n\n\t\tindices[ ii + 30 ] = voffset + 16;\n\t\tindices[ ii + 31 ] = voffset + 17;\n\t\tindices[ ii + 32 ] = voffset + 19;\n\n\t\tindices[ ii + 33 ] = voffset + 17;\n\t\tindices[ ii + 34 ] = voffset + 18;\n\t\tindices[ ii + 35 ] = voffset + 19;\n\n\t\t//\n\t\tindices[ ii + 36 ] = voffset + 12;\n\t\tindices[ ii + 37 ] = voffset + 19;\n\t\tindices[ ii + 38 ] = voffset + 13;\n\n\t\tindices[ ii + 39 ] = voffset + 19;\n\t\tindices[ ii + 40 ] = voffset + 20;\n\t\tindices[ ii + 41 ] = voffset + 13;\n\n\t\tindices[ ii + 42 ] = voffset + 20;\n\t\tindices[ ii + 43 ] = voffset + 21;\n\t\tindices[ ii + 44 ] = voffset + 13;\n\n\t\t// Text\n\t\tthis.initText();\n\n\t\tthis.update( shape );\n\t\treturn this;\n\t}\n\n\tupdate( shape: EShape ): void {\n\t\tconst buffer = this.buffer;\n\t\tthis.updateTriangleRoundedVertex( buffer, shape );\n\t\tthis.updateTriangleRoundedClipping( buffer, shape );\n\t\tthis.updateColor( buffer, shape );\n\t\tthis.updateTriangleRoundedStep( buffer, shape );\n\t\tthis.updateTriangleRoundedUv( buffer, shape );\n\t\tthis.updateText( buffer, shape );\n\t}\n\n\tprotected updateTriangleRoundedVertex( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst size = shape.size;\n\t\tconst sizeX = size.x;\n\t\tconst sizeY = size.y;\n\t\tconst transformLocalId = this.toTransformLocalId( shape );\n\t\tconst radius = shape.radius;\n\t\tconst isRadiusChanged = ( radius !== this.radius );\n\t\tconst isSizeChanged = (\n\t\t\tsizeX !== this.sizeX ||\n\t\t\tsizeY !== this.sizeY\n\t\t);\n\t\tconst isTransformChanged = ( this.transformLocalId !== transformLocalId );\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tconst isStrokeChanged = ( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth );\n\t\tif( isSizeChanged || isTransformChanged || isRadiusChanged || isStrokeChanged ) {\n\t\t\tthis.sizeX = sizeX;\n\t\t\tthis.sizeY = sizeY;\n\t\t\tthis.transformLocalId = transformLocalId;\n\t\t\tthis.radius = radius;\n\t\t\tif( isRadiusChanged ) {\n\t\t\t\t// Invalidate the corner to update the clippings\n\t\t\t\tthis.corner = NaN;\n\t\t\t}\n\t\t\tif( isSizeChanged || isRadiusChanged ) {\n\t\t\t\t// Invalidate the texture transform ID to update the UVs.\n\t\t\t\tthis.textureTransformId = NaN;\n\t\t\t}\n\t\t\t// Invalidate the stroke width to update the steps / antialiases\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\t// Invalidate the text layout to update the text layout.\n\t\t\tthis.textSpacingHorizontal = NaN;\n\t\t\tbuffer.vertexBuffer.update();\n\n\t\t\t// Calculate the transformed positions\n\t\t\tconst s = strokeAlign * strokeWidth;\n\t\t\tconst sx = sizeX * 0.5 + (0 <= sizeX ? +s : -s);\n\t\t\tconst sy = sizeY * 0.5 + (0 <= sizeY ? +s : -s);\n\t\t\tconst sz = Math.sqrt( sx * sx + 4 * sy * sy );\n\t\t\tconst sw = 2 * sx * sy / (sx + sz);\n\t\t\tconst ry = ( sw * radius ) / ( 2 * sy );\n\t\t\tconst rz = ( 0.5 * ( sz - sw ) * radius ) / ( sz );\n\t\t\tconst rx = ( ry * sz ) / ( 2 * sx );\n\n\t\t\tconst internalTransform = shape.transform.internalTransform;\n\t\t\tconst work = buffer.work;\n\t\t\twork.set( 0, -sy );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x1 = work.x;\n\t\t\tconst y1 = work.y;\n\t\t\twork.set( +sx, 0 );\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst tx = internalTransform.tx;\n\t\t\tconst ty = internalTransform.ty;\n\t\t\tconst dx = tx - x1;\n\t\t\tconst dy = ty - y1;\n\t\t\tconst x4 = work.x + dx;\n\t\t\tconst y4 = work.y + dy;\n\t\t\tconst x7 = tx + (tx - work.x) + dx;\n\t\t\tconst y7 = ty + (ty - work.y) + dy;\n\t\t\tconst dx14 = x4 - x1;\n\t\t\tconst dy14 = y4 - y1;\n\t\t\tconst x2 = x1 + rz * dx14;\n\t\t\tconst y2 = y1 + rz * dy14;\n\t\t\tconst x3 = x4 - ry * dx14;\n\t\t\tconst y3 = y4 - ry * dy14;\n\t\t\tconst dx47r = rx * (x7 - x4);\n\t\t\tconst dy47r = rx * (y7 - y4);\n\t\t\tconst x5 = x4 + dx47r;\n\t\t\tconst y5 = y4 + dy47r;\n\t\t\tconst x6 = x7 - dx47r;\n\t\t\tconst y6 = y7 - dy47r;\n\t\t\tconst dx71 = x1 - x7;\n\t\t\tconst dy71 = y1 - y7;\n\t\t\tconst x8 = x7 + ry * dx71;\n\t\t\tconst y8 = y7 + ry * dy71;\n\t\t\tconst x9 = x1 - rz * dx71;\n\t\t\tconst y9 = y1 - rz * dy71;\n\t\t\twork.set( 0, sy - sw ); // Incenter of a triangle\n\t\t\tinternalTransform.apply( work, work );\n\t\t\tconst x0 = work.x;\n\t\t\tconst y0 = work.y;\n\n\t\t\tconst x10 = x1 + radius * ( x0 - x1 );\n\t\t\tconst y10 = y1 + radius * ( y0 - y1 );\n\t\t\tconst x11 = x4 + radius * ( x0 - x4 );\n\t\t\tconst y11 = y4 + radius * ( y0 - y4 );\n\t\t\tconst x12 = x7 + radius * ( x0 - x7 );\n\t\t\tconst y12 = y7 + radius * ( y0 - y7 );\n\n\t\t\t// World size\n\t\t\tconst xb = tx + dx;\n\t\t\tconst yb = ty + dy;\n\t\t\tthis.worldSizeXHalf = rx;\n\t\t\tthis.worldSizeYHalf = ry;\n\t\t\tthis.worldSizeZHalf = rz;\n\t\t\tthis.worldSizeWHalf = 1 - 0.5 * sw / sy;\n\t\t\tthis.worldSizeR = this.calcLength( xb, yb, x0, y0 );\n\n\t\t\t// Vertices\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vertices = buffer.vertices;\n\t\t\tconst iv = voffset * 2;\n\n\t\t\t// Top corner\n\t\t\tvertices[ iv +  0 ] = x10;\n\t\t\tvertices[ iv +  1 ] = y10;\n\t\t\tvertices[ iv +  2 ] = x9;\n\t\t\tvertices[ iv +  3 ] = y9;\n\t\t\tvertices[ iv +  4 ] = x1;\n\t\t\tvertices[ iv +  5 ] = y1;\n\t\t\tvertices[ iv +  6 ] = x2;\n\t\t\tvertices[ iv +  7 ] = y2;\n\n\t\t\t// Bottom-right corner\n\t\t\tvertices[ iv +  8 ] = x11;\n\t\t\tvertices[ iv +  9 ] = y11;\n\t\t\tvertices[ iv + 10 ] = x3;\n\t\t\tvertices[ iv + 11 ] = y3;\n\t\t\tvertices[ iv + 12 ] = x4;\n\t\t\tvertices[ iv + 13 ] = y4;\n\t\t\tvertices[ iv + 14 ] = x5;\n\t\t\tvertices[ iv + 15 ] = y5;\n\n\t\t\t// Bottom-left corner\n\t\t\tvertices[ iv + 16 ] = x12;\n\t\t\tvertices[ iv + 17 ] = y12;\n\t\t\tvertices[ iv + 18 ] = x6;\n\t\t\tvertices[ iv + 19 ] = y6;\n\t\t\tvertices[ iv + 20 ] = x7;\n\t\t\tvertices[ iv + 21 ] = y7;\n\t\t\tvertices[ iv + 22 ] = x8;\n\t\t\tvertices[ iv + 23 ] = y8;\n\n\t\t\t// Others\n\t\t\tvertices[ iv + 24 ] = x0;\n\t\t\tvertices[ iv + 25 ] = y0;\n\n\t\t\tvertices[ iv + 26 ] = x10;\n\t\t\tvertices[ iv + 27 ] = y10;\n\n\t\t\tvertices[ iv + 28 ] = x2;\n\t\t\tvertices[ iv + 29 ] = y2;\n\t\t\tvertices[ iv + 30 ] = x3;\n\t\t\tvertices[ iv + 31 ] = y3;\n\n\t\t\tvertices[ iv + 32 ] = x11;\n\t\t\tvertices[ iv + 33 ] = y11;\n\n\t\t\tvertices[ iv + 34 ] = x5;\n\t\t\tvertices[ iv + 35 ] = y5;\n\t\t\tvertices[ iv + 36 ] = x6;\n\t\t\tvertices[ iv + 37 ] = y6;\n\n\t\t\tvertices[ iv + 38 ] = x12;\n\t\t\tvertices[ iv + 39 ] = y12;\n\n\t\t\tvertices[ iv + 40 ] = x8;\n\t\t\tvertices[ iv + 41 ] = y8;\n\t\t\tvertices[ iv + 42 ] = x9;\n\t\t\tvertices[ iv + 43 ] = y9;\n\t\t}\n\t}\n\n\tprotected updateTriangleRoundedClipping( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst corner = shape.corner;\n\t\tif( corner !== this.corner ) {\n\t\t\tthis.corner = corner;\n\n\t\t\t// Invalidate the strokeWidth to update steps / antialiases\n\t\t\tthis.strokeWidth = NaN;\n\n\t\t\tbuffer.clippingBuffer.update();\n\t\t\tconst clippings = buffer.clippings;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst iv = voffset * 3;\n\t\t\tconst w = 1 - shape.radius;\n\n\t\t\t// Top corner\n\t\t\tif( corner & EShapeCorner.TOP ) {\n\t\t\t\tclippings[ iv +  0 ] = 0;\n\t\t\t\tclippings[ iv +  1 ] = 0;\n\t\t\t\tclippings[ iv +  2 ] = 1;\n\t\t\t\tclippings[ iv +  3 ] = 1;\n\t\t\t\tclippings[ iv +  4 ] = 0;\n\t\t\t\tclippings[ iv +  5 ] = 1;\n\t\t\t\tclippings[ iv +  6 ] = 1;\n\t\t\t\tclippings[ iv +  7 ] = 1;\n\t\t\t\tclippings[ iv +  8 ] = 1;\n\t\t\t\tclippings[ iv +  9 ] = 0;\n\t\t\t\tclippings[ iv + 10 ] = 1;\n\t\t\t\tclippings[ iv + 11 ] = 1;\n\t\t\t} else {\n\t\t\t\tclippings[ iv +  0 ] = w;\n\t\t\t\tclippings[ iv +  1 ] = w;\n\t\t\t\tclippings[ iv +  2 ] = 0;\n\t\t\t\tclippings[ iv +  3 ] = 1;\n\t\t\t\tclippings[ iv +  4 ] = w;\n\t\t\t\tclippings[ iv +  5 ] = 0;\n\t\t\t\tclippings[ iv +  6 ] = 1;\n\t\t\t\tclippings[ iv +  7 ] = 1;\n\t\t\t\tclippings[ iv +  8 ] = 0;\n\t\t\t\tclippings[ iv +  9 ] = w;\n\t\t\t\tclippings[ iv + 10 ] = 1;\n\t\t\t\tclippings[ iv + 11 ] = 0;\n\t\t\t}\n\n\t\t\t// Bottom-right corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_RIGHT ) {\n\t\t\t\tclippings[ iv + 12 ] = 0;\n\t\t\t\tclippings[ iv + 13 ] = 0;\n\t\t\t\tclippings[ iv + 14 ] = 1;\n\t\t\t\tclippings[ iv + 15 ] = 1;\n\t\t\t\tclippings[ iv + 16 ] = 0;\n\t\t\t\tclippings[ iv + 17 ] = 1;\n\t\t\t\tclippings[ iv + 18 ] = 1;\n\t\t\t\tclippings[ iv + 19 ] = 1;\n\t\t\t\tclippings[ iv + 20 ] = 1;\n\t\t\t\tclippings[ iv + 21 ] = 0;\n\t\t\t\tclippings[ iv + 22 ] = 1;\n\t\t\t\tclippings[ iv + 23 ] = 1;\n\t\t\t} else {\n\t\t\t\tclippings[ iv + 12 ] = w;\n\t\t\t\tclippings[ iv + 13 ] = w;\n\t\t\t\tclippings[ iv + 14 ] = 0;\n\t\t\t\tclippings[ iv + 15 ] = 1;\n\t\t\t\tclippings[ iv + 16 ] = w;\n\t\t\t\tclippings[ iv + 17 ] = 0;\n\t\t\t\tclippings[ iv + 18 ] = 1;\n\t\t\t\tclippings[ iv + 19 ] = 1;\n\t\t\t\tclippings[ iv + 20 ] = 0;\n\t\t\t\tclippings[ iv + 21 ] = w;\n\t\t\t\tclippings[ iv + 22 ] = 1;\n\t\t\t\tclippings[ iv + 23 ] = 0;\n\t\t\t}\n\n\t\t\t// Bottom-left corner\n\t\t\tif( corner & EShapeCorner.BOTTOM_LEFT ) {\n\t\t\t\tclippings[ iv + 24 ] = 0;\n\t\t\t\tclippings[ iv + 25 ] = 0;\n\t\t\t\tclippings[ iv + 26 ] = 1;\n\t\t\t\tclippings[ iv + 27 ] = 1;\n\t\t\t\tclippings[ iv + 28 ] = 0;\n\t\t\t\tclippings[ iv + 29 ] = 1;\n\t\t\t\tclippings[ iv + 30 ] = 1;\n\t\t\t\tclippings[ iv + 31 ] = 1;\n\t\t\t\tclippings[ iv + 32 ] = 1;\n\t\t\t\tclippings[ iv + 33 ] = 0;\n\t\t\t\tclippings[ iv + 34 ] = 1;\n\t\t\t\tclippings[ iv + 35 ] = 1;\n\t\t\t} else {\n\t\t\t\tclippings[ iv + 24 ] = w;\n\t\t\t\tclippings[ iv + 25 ] = w;\n\t\t\t\tclippings[ iv + 26 ] = 0;\n\t\t\t\tclippings[ iv + 27 ] = 1;\n\t\t\t\tclippings[ iv + 28 ] = w;\n\t\t\t\tclippings[ iv + 29 ] = 0;\n\t\t\t\tclippings[ iv + 30 ] = 1;\n\t\t\t\tclippings[ iv + 31 ] = 1;\n\t\t\t\tclippings[ iv + 32 ] = 0;\n\t\t\t\tclippings[ iv + 33 ] = w;\n\t\t\t\tclippings[ iv + 34 ] = 1;\n\t\t\t\tclippings[ iv + 35 ] = 0;\n\t\t\t}\n\n\t\t\t// Others\n\t\t\tclippings[ iv + 36 ] = 0;\n\t\t\tclippings[ iv + 37 ] = 0;\n\t\t\tclippings[ iv + 38 ] = 0;\n\n\t\t\tclippings[ iv + 39 ] = w;\n\t\t\tclippings[ iv + 40 ] = 0;\n\t\t\tclippings[ iv + 41 ] = 0;\n\n\t\t\tclippings[ iv + 42 ] = 1;\n\t\t\tclippings[ iv + 43 ] = 0;\n\t\t\tclippings[ iv + 44 ] = 0;\n\t\t\tclippings[ iv + 45 ] = 1;\n\t\t\tclippings[ iv + 46 ] = 0;\n\t\t\tclippings[ iv + 47 ] = 0;\n\n\t\t\tclippings[ iv + 48 ] = w;\n\t\t\tclippings[ iv + 49 ] = 0;\n\t\t\tclippings[ iv + 50 ] = 0;\n\n\t\t\tclippings[ iv + 51 ] = 1;\n\t\t\tclippings[ iv + 52 ] = 0;\n\t\t\tclippings[ iv + 53 ] = 0;\n\t\t\tclippings[ iv + 54 ] = 1;\n\t\t\tclippings[ iv + 55 ] = 0;\n\t\t\tclippings[ iv + 56 ] = 0;\n\n\t\t\tclippings[ iv + 57 ] = w;\n\t\t\tclippings[ iv + 58 ] = 0;\n\t\t\tclippings[ iv + 59 ] = 0;\n\n\t\t\tclippings[ iv + 60 ] = 1;\n\t\t\tclippings[ iv + 61 ] = 0;\n\t\t\tclippings[ iv + 62 ] = 0;\n\t\t\tclippings[ iv + 63 ] = 1;\n\t\t\tclippings[ iv + 64 ] = 0;\n\t\t\tclippings[ iv + 65 ] = 0;\n\t\t}\n\t}\n\n\tprotected updateTriangleRoundedStep( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst stroke = shape.stroke;\n\t\tconst strokeWidth = (stroke.enable ? stroke.width : 0);\n\t\tconst strokeAlign = stroke.align;\n\t\tif( this.strokeAlign !== strokeAlign || this.strokeWidth !== strokeWidth ) {\n\t\t\tthis.strokeWidth = strokeWidth;\n\t\t\tthis.strokeAlign = strokeAlign;\n\t\t\tbuffer.stepBuffer.update();\n\t\t\tbuffer.antialiasBuffer.update();\n\n\t\t\tconst work = buffer.workStep;\n\t\t\tconst wsr = this.worldSizeR;\n\t\t\tthis.calcStep( wsr, strokeWidth, work );\n\t\t\tconst swc = work[ 0 ];\n\t\t\tconst pc0 = work[ 1 ];\n\t\t\tconst pc1 = work[ 2 ];\n\n\t\t\tthis.calcStep( shape.radius * wsr, strokeWidth, work );\n\t\t\tconst swr = work[ 0 ];\n\t\t\tconst pr0 = work[ 1 ];\n\t\t\tconst pr1 = work[ 2 ];\n\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tconst vcount = this.vertexCount - this.textVertexCount;\n\t\t\tthis.updateStepIf(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, vcount,\n\t\t\t\tswr, pr0, pr1,\n\t\t\t\tswc, swc, pc0, pc0, pc1, pc1\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected updateTriangleRoundedUv( buffer: EShapeBuffer, shape: EShape ): void {\n\t\tconst texture = this.toTexture( shape );\n\t\tconst textureTransformId = this.toTextureTransformId( texture );\n\t\tif( texture !== this.texture || textureTransformId !== this.textureTransformId ) {\n\t\t\tthis.texture = texture;\n\t\t\tthis.textureTransformId = textureTransformId;\n\n\t\t\tconst textureUvs = this.toTextureUvs( texture ) as any;\n\t\t\tconst x0 = textureUvs.x0;\n\t\t\tconst x1 = textureUvs.x1;\n\t\t\tconst x2 = textureUvs.x2;\n\t\t\tconst x3 = textureUvs.x3;\n\t\t\tconst y0 = textureUvs.y0;\n\t\t\tconst y1 = textureUvs.y1;\n\t\t\tconst y2 = textureUvs.y2;\n\t\t\tconst y3 = textureUvs.y3;\n\n\t\t\tconst x4 = 0.5 * ( x0 + x1 );\n\t\t\tconst y4 = 0.5 * ( y0 + y1 );\n\n\t\t\tconst c = this.worldSizeWHalf;\n\t\t\tconst x5 = x4 + c * ( x3 - x0 );\n\t\t\tconst y5 = y4 + c * ( y3 - y0 );\n\n\t\t\tconst radius = shape.radius;\n\t\t\tconst rx = this.worldSizeXHalf;\n\t\t\tconst ry = this.worldSizeYHalf;\n\t\t\tconst rz = this.worldSizeZHalf;\n\t\t\tconst x6 = x4 + rz * (x3 - x4);\n\t\t\tconst y6 = y4 + rz * (y3 - y4);\n\t\t\tconst x7 = x4 + radius * (x5 - x4);\n\t\t\tconst y7 = y4 + radius * (y5 - y4);\n\t\t\tconst x8 = x4 + rz * (x2 - x4);\n\t\t\tconst y8 = y4 + rz * (y2 - y4);\n\n\t\t\tconst x9 = x2 + ry * (x4 - x2);\n\t\t\tconst y9 = y2 + ry * (y4 - y2);\n\t\t\tconst x10 = x2 + radius * (x5 - x2);\n\t\t\tconst y10 = y2 + radius * (y5 - y2);\n\t\t\tconst x11 = x2 + rx * (x3 - x2);\n\t\t\tconst y11 = y2 + rx * (y3 - y2);\n\n\t\t\tconst x12 = x3 + rx * (x2 - x3);\n\t\t\tconst y12 = y3 + rx * (y2 - y3);\n\t\t\tconst x13 = x3 + radius * (x5 - x3);\n\t\t\tconst y13 = y3 + radius * (y5 - y3);\n\t\t\tconst x14 = x3 + ry * (x4 - x3);\n\t\t\tconst y14 = y3 + ry * (y4 - y3);\n\n\t\t\t// Uvs\n\t\t\tbuffer.uvBuffer.update();\n\t\t\tconst uvs = buffer.uvs;\n\t\t\tconst voffset = this.vertexOffset;\n\t\t\tlet iuv = voffset * 2;\n\n\t\t\t// Top corner\n\t\t\tuvs[ iuv + 0 ] = x7;\n\t\t\tuvs[ iuv + 1 ] = y7;\n\t\t\tuvs[ iuv + 2 ] = x6;\n\t\t\tuvs[ iuv + 3 ] = y6;\n\t\t\tuvs[ iuv + 4 ] = x4;\n\t\t\tuvs[ iuv + 5 ] = y4;\n\t\t\tuvs[ iuv + 6 ] = x8;\n\t\t\tuvs[ iuv + 7 ] = y8;\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom-right corner\n\t\t\tuvs[ iuv + 0 ] = x10;\n\t\t\tuvs[ iuv + 1 ] = y10;\n\t\t\tuvs[ iuv + 2 ] = x9;\n\t\t\tuvs[ iuv + 3 ] = y9;\n\t\t\tuvs[ iuv + 4 ] = x2;\n\t\t\tuvs[ iuv + 5 ] = y2;\n\t\t\tuvs[ iuv + 6 ] = x11;\n\t\t\tuvs[ iuv + 7 ] = y11;\n\t\t\tiuv += 8;\n\n\t\t\t// Bottom-left corner\n\t\t\tuvs[ iuv + 0 ] = x13;\n\t\t\tuvs[ iuv + 1 ] = y13;\n\t\t\tuvs[ iuv + 2 ] = x12;\n\t\t\tuvs[ iuv + 3 ] = y12;\n\t\t\tuvs[ iuv + 4 ] = x3;\n\t\t\tuvs[ iuv + 5 ] = y3;\n\t\t\tuvs[ iuv + 6 ] = x14;\n\t\t\tuvs[ iuv + 7 ] = y14;\n\t\t\tiuv += 8;\n\n\t\t\t// Others\n\t\t\tuvs[ iuv +  0 ] = x5;\n\t\t\tuvs[ iuv +  1 ] = y5;\n\n\t\t\tuvs[ iuv +  2 ] = x7;\n\t\t\tuvs[ iuv +  3 ] = y7;\n\n\t\t\tuvs[ iuv +  4 ] = x8;\n\t\t\tuvs[ iuv +  5 ] = y8;\n\t\t\tuvs[ iuv +  6 ] = x9;\n\t\t\tuvs[ iuv +  7 ] = y9;\n\n\t\t\tuvs[ iuv +  8 ] = x10;\n\t\t\tuvs[ iuv +  9 ] = y10;\n\n\t\t\tuvs[ iuv + 10 ] = x11;\n\t\t\tuvs[ iuv + 11 ] = y11;\n\t\t\tuvs[ iuv + 12 ] = x12;\n\t\t\tuvs[ iuv + 13 ] = y12;\n\n\t\t\tuvs[ iuv + 14 ] = x13;\n\t\t\tuvs[ iuv + 15 ] = y13;\n\n\t\t\tuvs[ iuv + 16 ] = x14;\n\t\t\tuvs[ iuv + 17 ] = y14;\n\t\t\tuvs[ iuv + 18 ] = x6;\n\t\t\tuvs[ iuv + 19 ] = y6;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"../e-shape\";\nimport { EShapeBuffer } from \"../e-shape-buffer\";\nimport { EShapeTextUploadeds } from \"./e-shape-text-uploadeds\";\nimport { EShapeTriangleRoundedUploaded } from \"./e-shape-triangle-rounded-uploaded\";\n\nexport class EShapeTriangleRoundedUploadeds {\n\tstatic create(\n\t\tbuffer: EShapeBuffer, shape: EShape,\n\t\tvoffset: number, ioffset: number,\n\t\tantialiasWeight: number\n\t): EShapeTriangleRoundedUploaded | null {\n\t\tconst tcount = EShapeTextUploadeds.getTextCount( shape, buffer.workCount );\n\t\tconst tvcount = tcount.vertexCount;\n\t\tconst ticount = tcount.indexCount;\n\t\tconst vcount = 22 + tvcount;\n\t\tconst icount = 15 + ticount;\n\t\tif( voffset + vcount < buffer.vertexCapacity && ioffset + icount < buffer.indexCapacity ) {\n\t\t\treturn new EShapeTriangleRoundedUploaded(\n\t\t\t\tbuffer,\n\t\t\t\tvoffset, ioffset,\n\t\t\t\ttvcount, ticount,\n\t\t\t\tvcount, icount,\n\t\t\t\tantialiasWeight\n\t\t\t).init( shape );\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCorner } from \"../e-shape-corner\";\nimport { EShapeType } from \"../e-shape-type\";\nimport { EShapeTriangle } from \"./e-shape-triangle\";\n\nconst FMIN = 0.00001;\n\nexport class EShapeTriangleRounded extends EShapeTriangle {\n\tconstructor( type = EShapeType.TRIANGLE_ROUNDED ) {\n\t\tsuper( type );\n\t}\n\n\tclone(): EShapeTriangleRounded {\n\t\treturn new EShapeTriangleRounded().copy( this );\n\t}\n\n\tprotected containsCorner_( x: number, y: number, r: number, aw: number ) {\n\t\tconst fill = this.fill;\n\t\tif( fill.enable ) {\n\t\t\tif( x * x + y * y <= r * r ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tconst stroke = this.stroke;\n\t\t\tconst strokeWidth = stroke.width;\n\t\t\tif( stroke.enable && 0 < strokeWidth ) {\n\t\t\t\tconst d = x * x + y * y;\n\t\t\t\tif( d <= r * r ) {\n\t\t\t\t\tconst w = Math.max( 0.0, r * ( 1 - strokeWidth / aw ) );\n\t\t\t\t\tif( w * w <= d ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected containsCorner(\n\t\tx: number, y: number,\n\t\tx0: number, y0: number,\n\t\tx1: number, y1: number,\n\t\tx2: number, y2: number,\n\t\tx3: number, y3: number,\n\t\tr12: number, r13: number,\n\t\taw: number,\n\t\tradius: number\n\t) {\n\t\tconst xl = x1 + r12 * ( x2 - x1 ) - x0;\n\t\tconst yl = y1 + r12 * ( y2 - y1 ) - y0;\n\t\tconst n = Math.sqrt( xl * xl + yl * yl );\n\t\tif( FMIN < n ) {\n\t\t\tconst ni = 1 / n;\n\t\t\tconst nlx = xl * ni;\n\t\t\tconst nly = yl * ni;\n\n\t\t\tconst xr = x1 + r13 * ( x3 - x1 ) - x0;\n\t\t\tconst yr = y1 + r13 * ( y3 - y1 ) - y0;\n\t\t\tconst nrx = xr * ni;\n\t\t\tconst nry = yr * ni;\n\n\t\t\tconst det = nlx * nry - nrx * nly;\n\t\t\tif( FMIN < Math.abs( det ) ) {\n\t\t\t\tconst deti = 1 / det;\n\t\t\t\tconst xc = x - x0;\n\t\t\t\tconst yc = y - y0;\n\t\t\t\tconst dx = ( +nry * xc - nrx * yc ) * deti;\n\t\t\t\tconst dy = ( -nly * xc + nlx * yc ) * deti;\n\t\t\t\tif( this.containsCorner_( dx, dy, n, aw * radius ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcontainsAbs( x: number, y: number, ax: number, ay: number ) {\n\t\tif( super.containsAbsBBox( x, y, ax, ay ) ) {\n\t\t\tconst a = 2 * ay / ax;\n\t\t\tif( this.containsAbs_( x, y, a, -ay, +ay ) ) {\n\t\t\t\tconst az = Math.sqrt( ax * ax + 4 * ay * ay );\n\t\t\t\tconst aw = 2 * ax * ay / (ax + az);\n\t\t\t\tconst radius = this.radius;\n\n\t\t\t\tconst x0 = 0;\n\t\t\t\tconst y0 = ay - aw;\n\t\t\t\tconst x1 = 0;\n\t\t\t\tconst y1 = -ay;\n\t\t\t\tconst x4 = +ax;\n\t\t\t\tconst y4 = +ay;\n\t\t\t\tconst x7 = -x4;\n\t\t\t\tconst y7 = +y4;\n\t\t\t\tconst x10 = x1 + radius * ( x0 - x1 );\n\t\t\t\tconst y10 = y1 + radius * ( y0 - y1 );\n\t\t\t\tconst x11 = x4 + radius * ( x0 - x4 );\n\t\t\t\tconst y11 = y4 + radius * ( y0 - y4 );\n\t\t\t\tconst y12 = +y11;\n\t\t\t\tconst x12 = -x11;\n\n\t\t\t\tconst c0 = -a * x + y10 - y <= 0;\n\t\t\t\tconst c1 = +a * x + y10 - y <= 0;\n\t\t\t\tconst c2 = y <= y11;\n\t\t\t\tconst corner = this.corner;\n\t\t\t\tif( ! c0 && ! c1 && (corner & EShapeCorner.TOP) ) {\n\t\t\t\t\t// Top corner\n\t\t\t\t\tconst rz = ( 0.5 * ( az - aw ) * radius ) / ( az );\n\t\t\t\t\tif( this.containsCorner( x, y, x10, y10, x1, y1, x7, y7, x4, y4, rz, rz, aw, radius ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else if( ! c0 && ! c2 && (corner & EShapeCorner.BOTTOM_LEFT) ) {\n\t\t\t\t\t// Bottom-left corner\n\t\t\t\t\tconst ry = ( aw * radius ) / ( 2 * ay );\n\t\t\t\t\tconst rx = ( ry * az ) / ( 2 * ax );\n\t\t\t\t\tif( this.containsCorner( x, y, x12, y12, x7, y7, x4, y4, x1, y1, rx, ry, aw, radius ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else if( ! c1 && ! c2 && (corner & EShapeCorner.BOTTOM_RIGHT) ) {\n\t\t\t\t\t// Bottom-right corner\n\t\t\t\t\tconst ry = ( aw * radius ) / ( 2 * ay );\n\t\t\t\t\tconst rx = ( ry * az ) / ( 2 * ax );\n\t\t\t\t\tif( this.containsCorner( x, y, x11, y11, x4, y4, x1, y1, x7, y7, ry, rx, aw, radius ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Others\n\t\t\t\t\tconst fill = this.fill;\n\t\t\t\t\tif( fill.enable ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst stroke = this.stroke;\n\t\t\t\t\t\tconst strokeWidth = stroke.width;\n\t\t\t\t\t\tif( stroke.enable && 0 < strokeWidth ) {\n\t\t\t\t\t\t\tconst cy = ay - aw;\n\t\t\t\t\t\t\tconst ay1 = cy + (-ay - cy) * Math.max( 0.0, aw - strokeWidth ) / aw;\n\t\t\t\t\t\t\tconst ay2 = ay - strokeWidth;\n\t\t\t\t\t\t\tif( ! this.containsAbs_( x, y, a, ay1, ay2 ) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem } from \"../../d-diagram-serialized\";\nimport { EShapeDeserializer } from \"../e-shape-deserializer\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeTriangleRounded } from \"./e-shape-triangle-rounded\";\n\nexport class EShapeTriangleRoundeds {\n\tstatic deserialize(\n\t\titem: DDiagramSerializedItem, manager: EShapeResourceManagerDeserialization\n\t): Promise<EShapeTriangleRounded> | EShapeTriangleRounded {\n\t\treturn EShapeDeserializer.deserialize( item, manager, EShapeTriangleRoundeds.create() );\n\t}\n\n\tstatic create(): EShapeTriangleRounded {\n\t\treturn new EShapeTriangleRounded();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeCapabilities } from \"../shape/e-shape-capabilities\";\nimport { EShapeCapability } from \"../shape/e-shape-capability\";\nimport { EShapeDeserializers } from \"../shape/e-shape-deserializers\";\nimport { EShapeType } from \"../shape/e-shape-type\";\nimport { EShapeUploadeds } from \"../shape/e-shape-uploadeds\";\nimport { EShapeTriangleRoundedUploadeds } from \"../shape/variant/e-shape-triangle-rounded-uploadeds\";\nimport { EShapeTriangleRoundeds } from \"../shape/variant/e-shape-triangle-roundeds\";\n\nexport const loadShapeTriangleRounded = () => {\n\tEShapeUploadeds[ EShapeType.TRIANGLE_ROUNDED ] = EShapeTriangleRoundedUploadeds.create;\n\tEShapeDeserializers[ EShapeType.TRIANGLE_ROUNDED ] = EShapeTriangleRoundeds.deserialize;\n\tEShapeCapabilities.set(\n\t\tEShapeType.TRIANGLE_ROUNDED,\n\t\tEShapeCapability.PRIMITIVE | EShapeCapability.BORDER_RADIUS\n\t);\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadShapeBar } from \"./load-shape-bar\";\nimport { loadShapeCircle } from \"./load-shape-circle\";\nimport { loadShapeGroup } from \"./load-shape-group\";\nimport { loadShapeGroupShadowed } from \"./load-shape-group-shadowed\";\nimport { loadShapeImage } from \"./load-shape-image\";\nimport { loadShapeLabel } from \"./load-shape-label\";\nimport { loadShapeLine } from \"./load-shape-line\";\nimport { loadShapeNull } from \"./load-shape-null\";\nimport { loadShapeRectangle } from \"./load-shape-rectangle\";\nimport { loadShapeRectangleRounded } from \"./load-shape-rectangle-rounded\";\nimport { loadShapeTriangle } from \"./load-shape-triangle\";\nimport { loadShapeTriangleRounded } from \"./load-shape-triangle-rounded\";\n\nexport const loadShapeAll = () => {\n\tloadShapeBar();\n\tloadShapeCircle();\n\tloadShapeGroupShadowed();\n\tloadShapeGroup();\n\tloadShapeImage();\n\tloadShapeLabel();\n\tloadShapeLine();\n\tloadShapeNull();\n\tloadShapeRectangleRounded();\n\tloadShapeRectangle();\n\tloadShapeTriangleRounded();\n\tloadShapeTriangle();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilSvgAtlasBuilder } from \"../../util/util-atlas-builder\";\n\nexport const DThemeWhiteAtlas = new UtilSvgAtlasBuilder( 256, 1, 3 );\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilSvgAtlasBuilder } from \"../../util/util-atlas-builder\";\nimport { DTheme } from \"../d-theme\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\n\ninterface CLASSES {\n\t[ type: string ]: new () => any;\n}\n\ninterface INSTANCES {\n\t[ type: string ]: DTheme;\n}\n\nexport class DThemeWhite implements DTheme {\n\tprotected static _classes: CLASSES = {};\n\tprotected _instances: INSTANCES;\n\n\tconstructor() {\n\t\tthis._instances = {};\n\t}\n\n\tget<THEME>( type: string ): THEME {\n\t\tlet instance = this._instances[ type ] as any;\n\t\tif( instance != null ) {\n\t\t\treturn instance;\n\t\t} else {\n\t\t\tconst klass = DThemeWhite._classes[ type ];\n\t\t\tif( klass != null ) {\n\t\t\t\tinstance = this._instances[ type ] = new klass();\n\t\t\t\treturn instance;\n\t\t\t} else {\n\t\t\t\tthrow new Error( `No theme for the type '${type}'` );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAtlas(): UtilSvgAtlasBuilder {\n\t\treturn DThemeWhiteAtlas;\n\t}\n\n\tstatic set<THEME>( type: string, themeClass: new () => THEME ): void {\n\t\tthis._classes[ type ] = themeClass;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemes } from \"../theme/d-themes\";\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\n\nexport const loadThemeWhite = () => {\n\tDThemes.setDefaultThemeClass( DThemeWhite );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NineSlicePlane, Texture } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DShadow } from \"./d-shadow\";\n\nexport class DShadowImpl extends NineSlicePlane implements DShadow {\n\tprotected _offsetX: number;\n\tprotected _offsetY: number;\n\n\tconstructor( texture: Texture, width: number, height: number, offsetX: number, offsetY: number ) {\n\t\tsuper( texture, width, height, width, height );\n\n\t\tthis._offsetX = offsetX;\n\t\tthis._offsetY = offsetY;\n\n\t\tthis.interactive = false;\n\t\tthis.interactiveChildren = false;\n\n\t\ttexture.on( \"update\", (): void => {\n\t\t\tthis.onTextureUpdate();\n\t\t});\n\t}\n\n\tprotected onTextureUpdate(): void {\n\t\tthis.emit( \"update\", this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tthis.x = -this.leftWidth + this._offsetX;\n\t\tthis.y = -this.topHeight + this._offsetY;\n\t\tthis.width = this.leftWidth + width + this.rightWidth;\n\t\tthis.height = this.topHeight + height + this.bottomHeight;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class DThemeWhiteConstants {\n\tstatic HIGHLIGHT_COLOR = 0x3399ff;\n\tstatic HIGHLIGHT_ALPHA = 0.2;\n\tstatic HIGHLIGHT_BLENDED = 0xddeeff; // UtilRgb.brighten( HIGHLIGHT_COLOR, 1 / (1 + HIGHLIGHT_ALPHA) )\n\n\tstatic WEAK_HIGHLIGHT_COLOR = 0xcccccc;\n\tstatic WEAK_HIGHLIGHT_ALPHA = 0.2;\n\tstatic WEAK_HIGHLIGHT_BLENDED = 0xf6f6f6; // UtilRgb.brighten( WEAK_HIGHLIGHT_COLOR, 1 / (1 + WEAK_HIGHLIGHT_ALPHA) );\n\n\tstatic INVALID_COLOR = 0xffaaaa;\n\tstatic INVALID_ALPHA = 0.2;\n\tstatic INVALID_BLENDED = 0xfff0f0;\n\n\tstatic BACKGROUND_COLOR = 0xf2f2f2;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DFontStyle, DFontVariant, DFontWeight, DThemeFont } from \"../../d-font\";\n\nexport class DThemeWhiteFont implements DThemeFont {\n\tgetFontFamilly() {\n\t\treturn `ProximaNova,-apple-system,Meiryo,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif`;\n\t}\n\n\tgetFontSize(): number {\n\t\treturn 14;\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tgetFontWeight(): DFontWeight {\n\t\treturn \"normal\";\n\t}\n\n\tgetFontStyle(): DFontStyle {\n\t\treturn \"normal\";\n\t}\n\n\tgetFontVariant(): DFontVariant {\n\t\treturn \"normal\";\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getAlpha( state );\n\t}\n\n\tgetLineHeight(): number {\n\t\treturn 30;\n\t}\n\n\tstatic getColor( state: DBaseState ): number {\n\t\treturn 0x5f5f5f;\n\t}\n\n\tstatic getAlpha( state: DBaseState ): number {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn 0.5;\n\t\t} else {\n\t\t\treturn 1.0;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DThemeBase } from \"../../d-base\";\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DLayoutClearType } from \"../../d-layout-clear-type\";\nimport { DShadow } from \"../../d-shadow\";\nimport { DShadowImpl } from \"../../d-shadow-impl\";\nimport { UtilTexturePlane } from \"../../util/util-texture-plane\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\n\nconst newShadow = (\n\tid: string,\n\tradius: number = 8, opacity: number = 0.1,\n\tsize: number = radius * 0.125, stdDeviation: number = radius * 0.375\n): void => {\n\tconst d = radius * 2;\n\tDThemeWhiteAtlas.add( id, d, d,\n\t\t`<g>` +\n\t\t\t`<defs>` +\n\t\t\t\t`<filter id=\"${id}_filter\" x=\"0\" y=\"0\" width=\"${d}\" height=\"${d}\" filterUnits=\"userSpaceOnUse\">` +\n\t\t\t\t\t`<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${stdDeviation}\"></feGaussianBlur>` +\n\t\t\t\t`</filter>` +\n\t\t\t`</defs>` +\n\t\t\t`<circle cx=\"${radius}\" cy=\"${radius}\" r=\"${size}\" stroke=\"none\" ` +\n\t\t\t\t`fill=\"rgba(0,0,0,${opacity})\" filter=\"url(#${id}_filter)\" />` +\n\t\t`</g>`\n\t);\n};\nnewShadow( \"shadow_weak\", 8, 1 );\nnewShadow( \"shadow\", 12, 1 );\n\nexport class DThemeWhiteBase extends DThemeWhiteFont implements DThemeBase {\n\tgetX(): DCoordinate {\n\t\treturn 0;\n\t}\n\n\tgetY(): DCoordinate {\n\t\treturn 0;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 100;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 100;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetBackgroundTexture( radius: number ): Texture {\n\t\treturn UtilTexturePlane.getInstance().getBackground( radius );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isFocused( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetBorderAlpha( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetBorderWidth( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn 0.5;\n\t}\n\n\tgetBorderMask( state: DBaseState ): number {\n\t\treturn DBorderMask.NONE;\n\t}\n\n\tgetBorderTexture( radius: number, width: number ): Texture {\n\t\treturn UtilTexturePlane.getInstance().getBorder( radius, width );\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 0;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 0;\n\t}\n\n\tgetPaddingTop(): number {\n\t\treturn 0;\n\t}\n\n\tgetPaddingBottom(): number {\n\t\treturn 0;\n\t}\n\n\tgetCornerRadius(): number {\n\t\treturn 4;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.NONE;\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetOutlineAlpha( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetOutlineWidth( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetOutlineOffset( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetOutlineAlign( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetOutlineMask( state: DBaseState ): DBorderMask {\n\t\treturn DBorderMask.NONE;\n\t}\n\n\tgetClearType(): DLayoutClearType {\n\t\treturn DLayoutClearType.NONE;\n\t}\n\n\tgetShadow(): DShadow | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.SELF;\n\t}\n\n\tgetTitle(): string {\n\t\treturn \"\";\n\t}\n\n\tgetWeight(): number {\n\t\treturn -1;\n\t}\n\n\tnewShadow(): DShadow | null {\n\t\treturn new DShadowImpl( DThemeWhiteAtlas.mappings.shadow, 12, 12, 0, 6 );\n\t}\n\n\tnewShadowWeak(): DShadow | null {\n\t\treturn new DShadowImpl( DThemeWhiteAtlas.mappings.shadow_weak, 8, 8, 0, 4 );\n\t}\n\n\tgetCursor(): string | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteBase } from \"../theme/white/d-theme-white-base\";\n\nexport const loadThemeWhiteBase = () => {\n\tDThemeWhite.set( \"DBase\", DThemeWhiteBase );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeBoard } from \"../../d-board\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteBoard extends DThemeWhiteBase implements DThemeBoard {\n\tgetBackgroundColor() {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetPaddingLeft() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingTop() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingRight() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingBottom() {\n\t\treturn 16;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteBoard } from \"../theme/white/d-theme-white-board\";\n\nexport const loadThemeWhiteBoard = () => {\n\tDThemeWhite.set( \"DBoard\", DThemeWhiteBoard );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignVertical } from \"../../d-align-vertical\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeTextBase } from \"../../d-text-base\";\nimport { utilToString } from \"../../util/util-to-string\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteTextBase extends DThemeWhiteBase implements DThemeTextBase {\n\tgetTextAlignVertical(): DAlignVertical {\n\t\treturn DAlignVertical.MIDDLE;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tisOverflowMaskEnabled(): boolean {\n\t\treturn false;\n\t}\n\n\tisTextDynamic(): boolean {\n\t\treturn true;\n\t}\n\n\tgetTextStyleClipping(): boolean {\n\t\treturn true;\n\t}\n\n\tnewTextValue(): any {\n\t\treturn \"\";\n\t}\n\n\tgetTextValue( state: DBaseState ): any {\n\t\treturn \"\";\n\t}\n\n\tgetTextFormatter(): ( value: any, caller: any ) => string {\n\t\treturn utilToString;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignVertical } from \"../../d-align-vertical\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeImageBase } from \"../../d-image-base\";\nimport { DThemeWhiteTextBase } from \"./d-theme-white-text-base\";\n\nexport class DThemeWhiteImageBase extends DThemeWhiteTextBase implements DThemeImageBase {\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tgetImageAlignVertical(): DAlignVertical {\n\t\treturn DAlignVertical.MIDDLE;\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.TEXT;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 5;\n\t}\n\n\tgetImageMarginVertial(): number {\n\t\treturn 5;\n\t}\n\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\treturn this.getColor( state );\n\t}\n\n\tgetImageTintAlpha( state: DBaseState ): number {\n\t\treturn this.getAlpha( state );\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeButtonBase } from \"../../d-button-base\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\n\nexport class DThemeWhiteButtonBase extends DThemeWhiteImageBase implements DThemeButtonBase {\n\tCOLOR = 0xffffff;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.017 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.034 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else if( DBaseStates.isPressed( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\tif( DBaseStates.isDisabled( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\treturn super.getColor( state );\n\t\t} else {\n\t\t\treturn 0xffffff;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\treturn 0xe5e5e5;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 100;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tisToggle(): boolean {\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\n\nexport class DThemeWhiteButton extends DThemeWhiteButtonBase implements DThemeWhiteButton {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButton } from \"../theme/white/d-theme-white-button\";\n\nexport const loadThemeWhiteButton = () => {\n\tDThemeWhite.set( \"DButton\", DThemeWhiteButton );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeButtonAmbient } from \"../../d-button-ambient\";\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteButtonAmbient extends DThemeWhiteButtonBase implements DThemeButtonAmbient {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\t\treturn 1.0;\n\t\t\t} else if( DBaseStates.isPressed( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA * 2;\n\t\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonAmbient } from \"../theme/white/d-theme-white-button-ambient\";\n\nexport const loadThemeWhiteButtonAmbient = () => {\n\tDThemeWhite.set( \"DButtonAmbient\", DThemeWhiteButtonAmbient );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeButtonCheck } from \"../../d-button-check\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\n\n// Material Design icons by Google.\n// Apache license version 2.0.\nDThemeWhiteAtlas.add( \"button_check_mark_on\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89` +\n\t\t\t`-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"button_check_mark_off\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" ` +\n\t\t\t`fill=\"#fff\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhiteButtonCheck extends DThemeWhiteButtonAmbient implements DThemeButtonCheck {\n\treadonly IMAGE_TINT_COLOR_FOCUSED = UtilRgb.darken( DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR, 0.1 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || DBaseStates.isReadOnly( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) ) {\n\t\t\t\treturn this.IMAGE_TINT_COLOR_FOCUSED;\n\t\t\t} else {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t\t}\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tisToggle(): boolean {\n\t\treturn true;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.button_check_mark_on;\n\t\t} else {\n\t\t\treturn DThemeWhiteAtlas.mappings.button_check_mark_off;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonCheck } from \"../theme/white/d-theme-white-button-check\";\n\nexport const loadThemeWhiteButtonCheck = () => {\n\tDThemeWhite.set( \"DButtonCheck\", DThemeWhiteButtonCheck );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DThemeButtonCheckRight } from \"../../d-button-check-right\";\nimport { DThemeWhiteButtonCheck } from \"./d-theme-white-button-check\";\n\nexport class DThemeWhiteButtonCheckRight extends DThemeWhiteButtonCheck implements DThemeButtonCheckRight {\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 0;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonCheckRight } from \"../theme/white/d-theme-white-button-check-right\";\n\nexport const loadThemeWhiteButtonCheckRight = () => {\n\tDThemeWhite.set( \"DButtonCheckRight\", DThemeWhiteButtonCheckRight );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DButtonColor, DThemeButtonColor } from \"../../d-button-color\";\nimport { DColorAndAlpha } from \"../../d-color\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\n// Material Design icons by Google.\n// Apache license version 2.0.\nDThemeWhiteAtlas.add( \"button_color_sample\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" fill=\"#fff\"/>` +\n\t\t`<path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" ` +\n\t\t\t`fill=\"#eee\" />` +\n\t`</g>`\n);\n\nconst formatter = ( colorAndAlpha: DColorAndAlpha ): string => {\n\treturn `#${UtilRgb.toCode( colorAndAlpha.color )} A${ colorAndAlpha.alpha.toFixed(2) }`;\n};\n\nexport class DThemeWhiteButtonColor extends DThemeWhiteButton implements DThemeButtonColor {\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.button_color_sample;\n\t}\n\n\tgetTextFormatter(): ( value: DColorAndAlpha, caller: DButtonColor ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): DColorAndAlpha {\n\t\treturn {\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { DAnimation } from \"./d-animation\";\nimport { DAnimationFadeIn } from \"./d-animation-fade-in\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DFocusable } from \"./d-controller-focus\";\nimport { UtilClickOutside } from \"./util/util-click-outside\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilOverlay } from \"./util/util-overlay\";\n\nexport enum DDialogCloseOn {\n\tNONE = 0,\n\tESC = 1,\n\tCLICK_OUTSIDE = 2\n}\n\nexport interface DDialogOptions<THEME extends DThemeDialog = DThemeDialog> extends DBaseOptions<THEME> {\n\tcloseOn?: DDialogCloseOn;\n\tanimation?: DAnimation;\n}\n\nexport interface DThemeDialog extends DThemeBase {\n\tcloseOn(): DDialogCloseOn;\n}\n\n/**\n * A base class for dialogs.\n *\n * If multiple application instances are there, better to set\n * the constructor option `parent` to an `application.stage`\n * so that the dialog picks a right application.\n *\n * By default, the dialog assumes the last created application is\n * the one it belongs to at the time when it is created.\n */\nexport class DDialog<\n\tTHEME extends DThemeDialog = DThemeDialog,\n\tOPTIONS extends DDialogOptions<THEME> = DDialogOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _animation!: DAnimation;\n\tprotected _closeOn!: DDialogCloseOn;\n\tprotected _focusable!: DFocusable | null;\n\tprotected _isOpened!: boolean;\n\tprotected _overlay!: UtilOverlay;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.visible = false;\n\t\tthis.setState( DBaseState.FOCUS_ROOT, true );\n\t\tthis._focusable = null;\n\t\tthis._isOpened = false;\n\n\t\t// Animation\n\t\tconst animation = this._animation = ( options && options.animation ?\n\t\t\toptions.animation : new DAnimationFadeIn() );\n\t\tanimation.target = this;\n\t\tanimation.on( \"end\", ( isReverse: boolean ): void => {\n\t\t\tthis.onAnimationEnd( isReverse );\n\t\t});\n\n\t\t// Close-on\n\t\tconst closeOn = this._closeOn = ( options && options.closeOn != null ?\n\t\t\toptions.closeOn : this.theme.closeOn()\n\t\t);\n\t\tif( closeOn & DDialogCloseOn.CLICK_OUTSIDE ) {\n\t\t\tUtilClickOutside.apply( this, (): void => {\n\t\t\t\tthis.onCloseOn();\n\t\t\t});\n\t\t}\n\n\t\tthis._overlay = new UtilOverlay();\n\t}\n\n\tprotected onAnimationEnd( isReverse: boolean ) {\n\t\tif( isReverse ) {\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent ) {\n\t\t\t\tparent.removeChild( this );\n\t\t\t}\n\t\t} else {\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( layer ) {\n\t\t\t\tconst focusController = layer.getFocusController();\n\t\t\t\tthis._focusable = focusController.getFocused();\n\t\t\t\tconst firstFocusable = focusController.findFocusable( this, false, true, true );\n\t\t\t\tfocusController.setFocused( firstFocusable || this, true, true );\n\t\t\t}\n\t\t}\n\t}\n\n\topen(): void {\n\t\tif( ! this._isOpened ) {\n\t\t\tconst layer = this._overlay.pick( this );\n\t\t\tthis._isOpened = true;\n\t\t\tlayer.stage.addChild( this );\n\t\t\tthis.onOpen();\n\t\t}\n\t}\n\n\tprotected onOpen(): void {\n\t\tthis.emit( \"open\", this );\n\n\t\t// Animation\n\t\tthis._animation.start();\n\t}\n\n\tisOpened(): boolean {\n\t\treturn this._isOpened;\n\t}\n\n\tclose() {\n\t\tif( this._isOpened ) {\n\t\t\tthis._isOpened = false;\n\t\t\tthis.onClose();\n\t\t}\n\t}\n\n\tprotected onClose(): void {\n\t\t// Focus\n\t\tconst focusable = this._focusable;\n\t\tif( focusable != null ) {\n\t\t\tthis._focusable = null;\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( layer ) {\n\t\t\t\tlayer.getFocusController().setFocused( focusable, true, false );\n\t\t\t}\n\t\t}\n\n\t\t// Animation\n\t\tthis._animation.start( true );\n\n\t\tthis.emit( \"close\", this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialog\";\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tconst closeOn = this._closeOn;\n\t\tif( closeOn & DDialogCloseOn.ESC ) {\n\t\t\tif( UtilKeyboardEvent.isCancelKey( e ) ) {\n\t\t\t\tthis.onCloseOn();\n\t\t\t}\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected onCloseOn(): void {\n\t\tthis.close();\n\t}\n\n\tprotected containsGlobalPoint( point: Point ): boolean {\n\t\treturn true;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAnimationOptions } from \"./d-animation\";\nimport { DAnimationBase } from \"./d-animation-base\";\nimport { DApplicationLayerLike } from \"./d-application-layer-like\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\n\nexport interface DAnimationFadeInOptions extends DAnimationOptions {\n\tshift?: {\n\t\tx?: number | null,\n\t\ty?: number | null\n\t};\n}\n\nexport class DAnimationFadeIn extends DAnimationBase {\n\tprotected _shiftX: number;\n\tprotected _shiftY: number;\n\n\tprotected _storedX: number = 0;\n\tprotected _storedY: number = 0;\n\tprotected _storedAlpha: number = 0;\n\tprotected _storedTime: number = 0;\n\tprotected _storedTarget: DBase<any, any> | null = null;\n\n\tprotected _layer: DApplicationLayerLike | null = null;\n\n\tprotected _onPrerenderBound: () => void;\n\tprotected _onPostrenderBound: () => void;\n\n\tconstructor( options?: DAnimationFadeInOptions ) {\n\t\tsuper( options );\n\n\t\t// Shifts\n\t\tif( options != null && options.shift != null ) {\n\t\t\tconst shift = options.shift;\n\t\t\tthis._shiftX = (shift.x != null ? shift.x : 0);\n\t\t\tthis._shiftY = (shift.y != null ? shift.y : 15);\n\t\t} else {\n\t\t\tthis._shiftX = 0;\n\t\t\tthis._shiftY = 15;\n\t\t}\n\n\t\tthis._onPrerenderBound = () => {\n\t\t\tthis.onPrerender();\n\t\t};\n\n\t\tthis._onPostrenderBound = () => {\n\t\t\tthis.onPostrender();\n\t\t};\n\t}\n\n\tstop(): void {\n\t\tthis._storedTime = 0;\n\t\tthis.removeEventListeners();\n\t\tsuper.stop();\n\t}\n\n\tprotected addEventListeners( target: DBase<any, any> ): void {\n\t\tconst layer = DApplications.getLayer( target );\n\t\tif( layer ) {\n\t\t\tthis._layer = layer;\n\t\t\tconst renderer = layer.renderer;\n\t\t\trenderer.on( \"prerender\", this._onPrerenderBound );\n\t\t\trenderer.on( \"postrender\", this._onPostrenderBound );\n\t\t}\n\t}\n\n\tprotected removeEventListeners(): void {\n\t\tconst layer = this._layer;\n\t\tif( layer ) {\n\t\t\tthis._layer = null;\n\t\t\tconst renderer = layer.renderer;\n\t\t\trenderer.off( \"prerender\", this._onPrerenderBound );\n\t\t\trenderer.off( \"postrender\", this._onPostrenderBound );\n\t\t}\n\t}\n\n\tprotected onStart( isReverse: boolean ): void {\n\t\tconst target = this._storedTarget = this._target;\n\t\tif( target != null ) {\n\t\t\tthis._storedTime = 0;\n\t\t\tthis.removeEventListeners();\n\t\t\tthis.addEventListeners( target );\n\t\t\tif( ! isReverse ) {\n\t\t\t\ttarget.visible = true;\n\t\t\t}\n\t\t\tsuper.onStart( isReverse );\n\t\t}\n\t}\n\n\tprotected onTime( time: number, isReverse: boolean, elapsedTime: number ): void {\n\t\tconst target = this._storedTarget;\n\t\tif( target != null ) {\n\t\t\tconst layer = this._layer;\n\t\t\tif( layer ) {\n\t\t\t\tlayer.disallowUpdate();\n\t\t\t\tthis._storedTime = time;\n\t\t\t\tsuper.onTime( time, isReverse, elapsedTime );\n\t\t\t\tlayer.allowUpdate();\n\t\t\t\tlayer.render();\n\t\t\t} else {\n\t\t\t\tthis._storedTime = time;\n\t\t\t\tsuper.onTime( time, isReverse, elapsedTime );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onEnd( isReverse: boolean ): void {\n\t\tconst target = this._storedTarget;\n\t\tif( target != null ) {\n\t\t\tthis.removeEventListeners();\n\t\t\tif( isReverse ) {\n\t\t\t\ttarget.visible = false;\n\t\t\t}\n\t\t\tsuper.onEnd( isReverse );\n\t\t}\n\t}\n\n\tprotected onPrerender(): void {\n\t\tconst target = this._storedTarget;\n\t\tif( target != null ) {\n\t\t\tconst storedTime = this._storedTime;\n\n\t\t\t// Position\n\t\t\tconst position = target.unsafe.position;\n\t\t\tthis._storedX = position.x;\n\t\t\tthis._storedY = position.y;\n\t\t\tposition.set(\n\t\t\t\tposition.x - this._shiftX * ( 1 - storedTime ),\n\t\t\t\tposition.y - this._shiftY * ( 1 - storedTime )\n\t\t\t);\n\n\t\t\t// Alpha\n\t\t\tthis._storedAlpha = target.alpha;\n\t\t\ttarget.alpha = storedTime;\n\t\t}\n\t}\n\n\tprotected onPostrender(): void {\n\t\tconst target = this._storedTarget;\n\t\tif( target != null ) {\n\t\t\t// Position\n\t\t\tconst position = target.unsafe.position;\n\t\t\tposition.set(\n\t\t\t\tthis._storedX,\n\t\t\t\tthis._storedY\n\t\t\t);\n\n\t\t\t// Alpha\n\t\t\ttarget.alpha = this._storedAlpha;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DDialogCloseOn, DThemeDialog } from \"../../d-dialog\";\nimport { DShadow } from \"../../d-shadow\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteDialog extends DThemeWhiteBase implements DThemeDialog {\n\tcloseOn(): DDialogCloseOn {\n\t\treturn DDialogCloseOn.ESC | DDialogCloseOn.CLICK_OUTSIDE;\n\t}\n\n\tgetBackgroundColor() {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t}\n\n\tgetPaddingLeft() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingTop() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingRight() {\n\t\treturn 16;\n\t}\n\n\tgetPaddingBottom() {\n\t\treturn 16;\n\t}\n\n\tgetX(): DCoordinate {\n\t\treturn \"center\";\n\t}\n\n\tgetY(): DCoordinate {\n\t\treturn \"center\";\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 400;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetShadow(): DShadow | null {\n\t\treturn this.newShadow();\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogCommand } from \"../../d-dialog-command\";\nimport { DThemeWhiteDialog } from \"./d-theme-white-dialog\";\n\nexport class DThemeWhiteDialogCommand extends DThemeWhiteDialog implements DThemeDialogCommand {\n\tgetOk(): string | null {\n\t\treturn \"OK\";\n\t}\n\n\tgetCancel(): string | null {\n\t\treturn \"Cacnel\";\n\t}\n\n\tgetLayoutX(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetLayoutY(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogColor } from \"../../d-dialog-color\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogColor extends DThemeWhiteDialogCommand implements DThemeDialogColor {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DColorAndAlpha } from \"../../d-color\";\nimport { DThemePickerColor } from \"../../d-picker-color\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nDThemeWhiteAtlas.add( \"picker_color_main\", 234, 156,\n\t`<g>` +\n\t\t`<linearGradient id=\"fs7w3iusfdnb\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">` +\n\t\t\t`<stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"0\"/>` +\n\t\t\t`<stop stop-color=\"#FFFFFF\" stop-opacity=\"1\" offset=\"1\"/>` +\n\t\t`</linearGradient>` +\n\t\t`<linearGradient id=\"2rfcfe9874bw\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">` +\n\t\t\t`<stop stop-color=\"#000000\" stop-opacity=\"0\" offset=\"0\"/>` +\n\t\t\t`<stop stop-color=\"#000000\" stop-opacity=\"1\" offset=\"1\"/>` +\n\t\t`</linearGradient>` +\n\t\t`<rect x=\"0\" y=\"0\" width=\"234\" height=\"156\" fill=\"url(#fs7w3iusfdnb)\" />` +\n\t\t`<rect x=\"0\" y=\"0\" width=\"234\" height=\"156\" fill=\"url(#2rfcfe9874bw)\" />` +\n\t`</g>`\n);\n\nconst makeCheckerboard = ( width: number, height: number ): string => {\n\twidth = width + width;\n\n\tconst LIGHT = \"#bfbfbf\";\n\tconst DARK = \"#a5a5a5\";\n\tlet result = \"<g>\";\n\tfor( let iheight = 0; iheight < height; ++iheight ) {\n\t\tfor( let i = 0; i < width; ++i ) {\n\t\t\tconst color = (i % 2 === 0 ? LIGHT : DARK);\n\t\t\tresult += `<rect x=\"${9 * i}\" y=\"${18 * iheight + 0}\" width=\"9\" height=\"9\" fill=\"${color}\" />`;\n\t\t}\n\t\tfor( let i = 0; i < width; ++i ) {\n\t\t\tconst color = (i % 2 === 1 ? LIGHT : DARK);\n\t\t\tresult += `<rect x=\"${9 * i}\" y=\"${18 * iheight + 9}\" width=\"9\" height=\"9\" fill=\"${color}\" />`;\n\t\t}\n\t}\n\tresult += \"</g>\";\n\treturn result;\n};\n\nDThemeWhiteAtlas.add( \"picker_color_alpha_checkerboard\", 234, 18, makeCheckerboard( 13, 1 ) );\n\nDThemeWhiteAtlas.add( \"picker_color_alpha\", 234, 18,\n\t`<g>` +\n\t\t`<linearGradient id=\"s48afbuh44\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">` +\n\t\t\t`<stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"0\"/>` +\n\t\t\t`<stop stop-color=\"#FFFFFF\" stop-opacity=\"1\" offset=\"1\"/>` +\n\t\t`</linearGradient>` +\n\t\t`<rect x=\"0\" y=\"0\" width=\"234\" height=\"18\" fill=\"url(#s48afbuh44)\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_base\", 234, 18,\n\t`<g>` +\n\t\t`<linearGradient id=\"ni2rbisdf3\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">` +\n\t\t\t`<stop stop-color=\"#FF0000\" offset=\"0\"/>` +\n\t\t\t`<stop stop-color=\"#FFFF00\" offset=\"0.167\"/>` +\n\t\t\t`<stop stop-color=\"#00FF00\" offset=\"0.333\"/>` +\n\t\t\t`<stop stop-color=\"#00FFFF\" offset=\"0.5\"/>` +\n\t\t\t`<stop stop-color=\"#0000FF\" offset=\"0.667\"/>` +\n\t\t\t`<stop stop-color=\"#FF00FF\" offset=\"0.833\"/>` +\n\t\t\t`<stop stop-color=\"#FF0000\" offset=\"1\"/>` +\n\t\t`</linearGradient>` +\n\t\t`<rect x=\"0\" y=\"0\" width=\"234\" height=\"18\" fill=\"url(#ni2rbisdf3)\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_base_pointer\", 16.2, 31.8,\n\t`<rect x=\"4.5\" y=\"4.5\" width=\"7.2\" height=\"22.8\" stroke=\"#5f5f5f\" stroke-width=\"2.4\" fill=\"none\" />`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_pointer\", 25.8, 25.8,\n\t`<circle cx=\"12.9\" cy=\"12.9\" r=\"4.8\" stroke=\"#5f5f5f\" stroke-width=\"2.4\" fill=\"none\" />` +\n\t`<circle cx=\"12.9\" cy=\"12.9\" r=\"7.2\" stroke=\"#ffffff\" stroke-width=\"2.4\" fill=\"none\" />`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_recent_checkerboard\", 18, 18, makeCheckerboard( 1, 1 ) );\n\nDThemeWhiteAtlas.add( \"picker_color_recent_null\", 18, 18,\n\t`<g>` +\n\t\t`<rect x=\"1.2\" y=\"1.2\" width=\"15.6\" height=\"15.6\" stroke=\"#fff\" stroke-width=\"0.8\" fill=\"none\" />` +\n\t\t`<line x1=\"16.8\" y1=\"1.2\" x2=\"1.2\" y2=\"16.8\" stroke=\"#fff\" stroke-width=\"0.8\" stroke-linecap=\"round\" />` +\n\t\t`<line x1=\"1.2\" y1=\"1.2\" x2=\"16.8\" y2=\"16.8\" stroke=\"#fff\" stroke-width=\"0.8\" stroke-linecap=\"round\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_sample_checkerboard\", 54, 54, makeCheckerboard( 3, 3 ) );\n\nDThemeWhiteAtlas.add( \"picker_color_sample_null\", 54, 54,\n\t`<g>` +\n\t\t`<rect x=\"3.6\" y=\"3.6\" width=\"46.8\" height=\"46.8\" stroke=\"#fff\" stroke-width=\"2.4\" fill=\"none\" />` +\n\t\t`<line x1=\"50.4\" y1=\"3.6\" x2=\"3.6\" y2=\"50.4\" stroke=\"#fff\" stroke-width=\"2.4\" stroke-linecap=\"round\" />` +\n\t\t`<line x1=\"3.6\" y1=\"3.6\" x2=\"50.4\" y2=\"50.4\" stroke=\"#fff\" stroke-width=\"2.4\" stroke-linecap=\"round\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_anchor_outlined\", 25.8, 25.8,\n\t`<circle cx=\"12.9\" cy=\"12.9\" r=\"8.4\" stroke=\"none\" fill=\"#ffffff\" />` +\n\t`<circle cx=\"12.9\" cy=\"12.9\" r=\"9.6\" stroke=\"#5f5f5f\" stroke-width=\"2.4\" fill=\"none\" />`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_anchor\", 28.2, 28.2,\n\t`<circle cx=\"14.1\" cy=\"14.1\" r=\"6\" stroke=\"none\" fill=\"#ffffff\" />` +\n\t`<circle cx=\"14.1\" cy=\"14.1\" r=\"7.2\" stroke=\"#5f5f5f\" stroke-width=\"2.4\" fill=\"none\" />`\n);\n\nDThemeWhiteAtlas.add( \"picker_color_direction\", 12, 30,\n\t`<path d=\"M0.6 25.8 L 12.0375 5.9895\" stroke=\"#5f5f5f\" stroke-width=\"1.2\" fill=\"none\" />` +\n\t`<path d=\"M8.5125 25.8 A 8.475 8.475 0 0 0 4.275 18.4605\" stroke=\"#5f5f5f\" stroke-width=\"1.2\" fill=\"none\" />` +\n\t`<rect x=\"0.6\" y=\"24.6\" width=\"11.4375\" height=\"1.2\" rx=\"0.6\" ry=\"0.6\" stroke=\"none\" fill=\"#5f5f5f\" />`\n);\n\nexport class DThemeWhitePickerColor extends DThemeWhiteBase implements DThemePickerColor {\n\tgetMainWidth(): number {\n\t\treturn 234;\n\t}\n\n\tgetMainHeight(): number {\n\t\treturn 156;\n\t}\n\n\tgetMainTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_main;\n\t}\n\n\tgetMainPointerTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_pointer;\n\t}\n\n\tgetMainPointerColor(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tgetMainPointerAlpha(): number {\n\t\treturn 1;\n\t}\n\n\tgetBaseHeight(): number {\n\t\treturn 18;\n\t}\n\n\tgetBaseMargin(): number {\n\t\treturn 6;\n\t}\n\n\tgetBaseTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_base;\n\t}\n\n\tgetBasePointerTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_base_pointer;\n\t}\n\n\tgetBasePointerColor(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tgetBasePointerAlpha(): number {\n\t\treturn this.getMainPointerAlpha();\n\t}\n\n\tgetAlphaHeight(): number {\n\t\treturn this.getBaseHeight();\n\t}\n\n\tgetAlphaMargin(): number {\n\t\treturn this.getBaseMargin();\n\t}\n\n\tgetAlphaTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_alpha;\n\t}\n\n\tgetAlphaCheckerboardTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_alpha_checkerboard;\n\t}\n\n\tgetAlphaPointerTexture(): Texture {\n\t\treturn this.getBasePointerTexture();\n\t}\n\n\tgetAlphaPointerColor(): number {\n\t\treturn this.getBasePointerColor();\n\t}\n\n\tgetAlphaPointerAlpha(): number {\n\t\treturn this.getMainPointerAlpha();\n\t}\n\n\tgetRecentMargin(): number {\n\t\treturn this.getBaseMargin();\n\t}\n\n\tgetRecentColorWidth(): number {\n\t\treturn this.getBaseHeight();\n\t}\n\n\tgetRecentColorHeight(): number {\n\t\treturn this.getRecentColorWidth();\n\t}\n\n\tgetRecentColorMargin(): number {\n\t\treturn this.getRecentMargin();\n\t}\n\n\tgetRecentColorCount(): number {\n\t\treturn 10;\n\t}\n\n\tgetRecentCheckerboardTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_recent_checkerboard;\n\t}\n\n\tgetRecentNullTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_recent_null;\n\t}\n\n\tgetRecents(): DColorAndAlpha[] {\n\t\treturn [];\n\t}\n\n\tgetInputMargin(): number {\n\t\treturn this.getBaseMargin();\n\t}\n\n\tgetInputLabelWidth(): number {\n\t\treturn 20;\n\t}\n\n\tgetSampleWidth(): number {\n\t\treturn 54;\n\t}\n\n\tgetSampleHeight(): number {\n\t\treturn this.getSampleWidth();\n\t}\n\n\tgetSampleCheckerboardTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_sample_checkerboard;\n\t}\n\n\tgetSampleNullTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_sample_null;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerColor } from \"../theme/white/d-theme-white-picker-color\";\n\nexport const loadThemeWhitePickerColor = () => {\n\tDThemeWhite.set( \"DPickerColor\", DThemeWhitePickerColor );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogColor } from \"../theme/white/d-theme-white-dialog-color\";\nimport { loadThemeWhitePickerColor } from \"./load-theme-white-picker-color\";\n\nexport const loadThemeWhiteDialogColor = () => {\n\tDThemeWhite.set( \"DDialogColor\", DThemeWhiteDialogColor );\n\tloadThemeWhitePickerColor();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonColor } from \"../theme/white/d-theme-white-button-color\";\nimport { loadThemeWhiteDialogColor } from \"./load-theme-white-dialog-color\";\n\nexport const loadThemeWhiteButtonColor = () => {\n\tDThemeWhite.set( \"DButtonColor\", DThemeWhiteButtonColor );\n\tloadThemeWhiteDialogColor();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\ntype Callback = ( target: DPickerColorGradientPoint ) => void;\n\nexport interface DPickerColorGradientPointLike {\n\tcolor: number;\n\talpha: number;\n\tposition: number;\n}\n\nexport class DPickerColorGradientPoint implements DPickerColorGradientPointLike {\n\tprotected _color: number;\n\tprotected _alpha: number;\n\tprotected _position: number;\n\tprotected _callback: Callback;\n\tprotected _selected: boolean;\n\n\tconstructor( color: number, alpha: number, position: number, selected: boolean, callback: Callback ) {\n\t\tthis._color = color;\n\t\tthis._alpha = alpha;\n\t\tthis._position = position;\n\t\tthis._callback = callback;\n\t\tthis._selected = selected;\n\t}\n\n\tset( color: number, alpha: number, position: number, selected: boolean ) {\n\t\tif( this._color !== color || this._alpha !== alpha || this._position !== position || this._selected !== selected ) {\n\t\t\tthis._color = color;\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._position = position;\n\t\t\tthis._selected = selected;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._color !== color ) {\n\t\t\tthis._color = color;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\tget alpha() {\n\t\treturn this._alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._alpha !== alpha ) {\n\t\t\tthis._alpha = alpha;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\tget position() {\n\t\treturn this._position;\n\t}\n\n\tset position( position: number ) {\n\t\tif( this._position !== position ) {\n\t\t\tthis._position = position;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\tget selected() {\n\t\treturn this._selected;\n\t}\n\n\tset selected( selected: boolean ) {\n\t\tif( this._selected !== selected ) {\n\t\t\tthis._selected = selected;\n\t\t\tthis._callback( this );\n\t\t}\n\t}\n\n\ttoObject(): DPickerColorGradientPointLike {\n\t\treturn {\n\t\t\tcolor: this._color,\n\t\t\talpha: this._alpha,\n\t\t\tposition: this._position\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DPickerColorGradientPoint, DPickerColorGradientPointLike } from \"./d-picker-color-gradient-point\";\n\nconst POINT_SORTER = ( a: DPickerColorGradientPoint, b: DPickerColorGradientPoint ): number => {\n\treturn a.position - b.position;\n};\n\nexport interface DPickerColorGradientDataLike {\n\tpoints: DPickerColorGradientPointLike[];\n\tdirection: number;\n}\n\nexport class DPickerColorGradientData extends utils.EventEmitter {\n\tprotected _points: DPickerColorGradientPoint[];\n\tprotected _direction: number;\n\tprotected _selected: DPickerColorGradientPoint | null;\n\n\tprotected _onChangeBound: ( target: DPickerColorGradientPoint ) => void;\n\tprotected _workColor: number[];\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._onChangeBound = ( target: DPickerColorGradientPoint ): void => {\n\t\t\tthis.onChange( target );\n\t\t};\n\n\t\tconst first = new DPickerColorGradientPoint( 0xffffff, 1, 0, false, this._onChangeBound );\n\t\tconst second = new DPickerColorGradientPoint( 0x808080, 1, 1, true, this._onChangeBound );\n\t\tthis._points = [ first, second ];\n\t\tthis._direction = -90;\n\t\tthis._selected = second;\n\t\tthis._workColor = [ 0, 0, 0 ];\n\t}\n\n\tprotected onChange( target: DPickerColorGradientPoint ): void {\n\t\tconst isSelectionChanged = ( target.selected && this._selected !== target );\n\t\tif( isSelectionChanged ) {\n\t\t\tconst selected = this._selected;\n\t\t\tif( selected != null ) {\n\t\t\t\t(selected as any)._selected = false;\n\t\t\t}\n\t\t\tthis._selected = target;\n\t\t}\n\t\tthis._points.sort( POINT_SORTER );\n\t\tif( isSelectionChanged ) {\n\t\t\tthis.emit( \"selectionchange\", this._selected, this );\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tget points(): DPickerColorGradientPoint[] {\n\t\treturn this._points;\n\t}\n\n\tget direction(): number {\n\t\treturn this._direction;\n\t}\n\n\tset direction( direction: number ) {\n\t\tif( this._direction !== direction ) {\n\t\t\tthis._direction = direction;\n\t\t\tthis.emit( \"directionchange\", direction, this );\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tget selected(): DPickerColorGradientPoint | null {\n\t\treturn this._selected;\n\t}\n\n\tsize(): number {\n\t\treturn this._points.length;\n\t}\n\n\tget( index: number ): DPickerColorGradientPoint | null {\n\t\tconst points = this._points;\n\t\tif( 0 <= index && index < points.length ) {\n\t\t\treturn points[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\taddAt( position: number ): DPickerColorGradientPoint {\n\t\tconst points = this._points;\n\t\tlet previous: DPickerColorGradientPoint | null = null;\n\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\tconst point = points[ i ];\n\t\t\tif( position <= point.position ) {\n\t\t\t\tif( previous != null ) {\n\t\t\t\t\tconst span = point.position - previous.position;\n\t\t\t\t\tif( 0.001 < span ) {\n\t\t\t\t\t\tconst rgb0 = utils.hex2rgb( point.color, this._workColor );\n\t\t\t\t\t\tconst r0 = rgb0[ 0 ];\n\t\t\t\t\t\tconst g0 = rgb0[ 1 ];\n\t\t\t\t\t\tconst b0 = rgb0[ 2 ];\n\n\t\t\t\t\t\tconst rgb1 = utils.hex2rgb( previous.color, this._workColor );\n\t\t\t\t\t\tconst r1 = rgb1[ 0 ];\n\t\t\t\t\t\tconst g1 = rgb1[ 1 ];\n\t\t\t\t\t\tconst b1 = rgb1[ 2 ];\n\n\t\t\t\t\t\tconst ratio = (position - previous.position) / span;\n\t\t\t\t\t\tconst r = r0 * ratio + r1 * (1 - ratio);\n\t\t\t\t\t\tconst g = g0 * ratio + g1 * (1 - ratio);\n\t\t\t\t\t\tconst b = b0 * ratio + b1 * (1 - ratio);\n\n\t\t\t\t\t\tconst rgb = this._workColor;\n\t\t\t\t\t\trgb[ 0 ] = r;\n\t\t\t\t\t\trgb[ 1 ] = g;\n\t\t\t\t\t\trgb[ 2 ] = b;\n\n\t\t\t\t\t\tconst color = utils.rgb2hex( rgb );\n\t\t\t\t\t\tconst alpha = point.alpha * ratio + previous.alpha * (1 - ratio);\n\t\t\t\t\t\treturn this.add( color, alpha, position, true );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn this.add( point.color, point.alpha, position, true );\n\t\t\t\t}\n\t\t\t}\n\t\t\tprevious = point;\n\t\t}\n\t\tif( previous != null ) {\n\t\t\treturn this.add( previous.color, previous.alpha, position, true );\n\t\t} else {\n\t\t\treturn this.add( 0xffffff, 1.0, position, true );\n\t\t}\n\t}\n\n\tadd( color: number, alpha: number, position: number, selected: boolean ): DPickerColorGradientPoint {\n\t\tconst result = new DPickerColorGradientPoint( color, alpha, position, selected, this._onChangeBound );\n\t\tthis._points.push( result );\n\t\tthis._onChangeBound( result );\n\t\treturn result;\n\t}\n\n\tremove( point: DPickerColorGradientPoint ): boolean {\n\t\tconst points = this._points;\n\t\tif( 2 < points.length ) {\n\t\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\t\tif( points[ i ] === point ) {\n\t\t\t\t\tpoints.splice( i, 1 );\n\t\t\t\t\tconst isSelectionChanged = ( this._selected === point );\n\t\t\t\t\tif( isSelectionChanged ) {\n\t\t\t\t\t\tif( i + 1 < imax ) {\n\t\t\t\t\t\t\tthis._selected = points[ i ];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._selected = points[ i - 1 ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif( isSelectionChanged ) {\n\t\t\t\t\t\tthis.emit( \"selectionchange\", this._selected, this );\n\t\t\t\t\t}\n\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\treset(): void {\n\t\tconst oldDirection = this._direction;\n\t\tthis._direction = -90;\n\n\t\tconst points = this._points;\n\t\tconst oldSelected = this._selected;\n\t\tconst index = ( oldSelected ? points.indexOf( oldSelected ) : -1 );\n\t\tpoints.length = 0;\n\t\tpoints.push( new DPickerColorGradientPoint( 0xffffff, 0, 0, false, this._onChangeBound ) );\n\t\tpoints.push( new DPickerColorGradientPoint( 0xffffff, 0, 1, false, this._onChangeBound ) );\n\n\t\tif( 0 <= index && index < points.length ) {\n\t\t\tconst point = points[ index ];\n\t\t\t(point as any)._selected = true;\n\t\t\tthis._selected = point;\n\t\t} else if( 0 < points.length ) {\n\t\t\tconst point = points[ points.length - 1 ];\n\t\t\t(point as any)._selected = true;\n\t\t\tthis._selected = point;\n\t\t} else {\n\t\t\tthis._selected = null;\n\t\t}\n\t\tif( oldSelected !== this._selected ) {\n\t\t\tthis.emit( \"selectionchange\", this._selected, this );\n\t\t}\n\n\t\tif( oldDirection !== this._direction ) {\n\t\t\tthis.emit( \"directionchange\", this._direction, this );\n\t\t}\n\n\t\tthis.emit( \"change\", this );\n\t}\n\n\ttoObject(): DPickerColorGradientDataLike {\n\t\tconst pointsCopy = [];\n\t\tconst points = this._points;\n\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\tpointsCopy.push( points[ i ].toObject() );\n\t\t}\n\t\treturn {\n\t\t\tpoints: pointsCopy,\n\t\t\tdirection: this._direction\n\t\t};\n\t}\n\n\tfromObject( data: DPickerColorGradientDataLike ): void {\n\t\tconst oldDirection = this._direction;\n\t\tthis._direction = data.direction;\n\n\t\tconst points = this._points;\n\t\tconst oldSelected = this._selected;\n\t\tconst index = ( oldSelected ? points.indexOf( oldSelected ) : -1 );\n\t\tpoints.length = 0;\n\t\tfor( let i = 0, imax = data.points.length; i < imax; ++i ) {\n\t\t\tconst pointLike = data.points[ i ];\n\t\t\tconst point = new DPickerColorGradientPoint(\n\t\t\t\tpointLike.color, pointLike.alpha, pointLike.position,\n\t\t\t\tfalse, this._onChangeBound\n\t\t\t);\n\t\t\tpoints.push( point );\n\t\t}\n\t\tpoints.sort( POINT_SORTER );\n\n\t\tif( 0 <= index && index < points.length ) {\n\t\t\tconst point = points[ index ];\n\t\t\t(point as any)._selected = true;\n\t\t\tthis._selected = point;\n\t\t} else if( 0 < points.length ) {\n\t\t\tconst point = points[ points.length - 1 ];\n\t\t\t(point as any)._selected = true;\n\t\t\tthis._selected = point;\n\t\t} else {\n\t\t\tthis._selected = null;\n\t\t}\n\t\tif( oldSelected !== this._selected ) {\n\t\t\tthis.emit( \"selectionchange\", this._selected, this );\n\t\t}\n\n\t\tif( oldDirection !== this._direction ) {\n\t\t\tthis.emit( \"directionchange\", this._direction, this );\n\t\t}\n\n\t\tthis.emit( \"change\", this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DButtonColorGradient, DThemeButtonColorGradient } from \"../../d-button-color-gradient\";\nimport { DPickerColorGradientData } from \"../../d-picker-color-gradient-data\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\n// Material Design icons by Google.\n// Apache license version 2.0.\nDThemeWhiteAtlas.add( \"button_color_gradient_sample\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" fill=\"#fff\"/>` +\n\t\t`<path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" ` +\n\t\t\t`fill=\"#eee\" />` +\n\t`</g>`\n);\n\nconst formatter = (): string => {\n\treturn \"\";\n};\n\nexport class DThemeWhiteButtonColorGradient extends DThemeWhiteButton implements DThemeButtonColorGradient {\n\tgetViewBaseTexture(): Texture | null {\n\t\treturn DThemeWhiteAtlas.mappings.button_color_gradient_sample;\n\t}\n\n\tgetTextFormatter(): ( value: DPickerColorGradientData, caller: DButtonColorGradient ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): DPickerColorGradientData {\n\t\treturn new DPickerColorGradientData();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DPickerDatetimeMask {\n\tNONE = 0,\n\tDATE = 1,\n\tHOURS = 2,\n\tMINUTES = 4,\n\tSECONDS = 8,\n\tALL = DATE | HOURS | MINUTES | SECONDS\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogColorGradient } from \"../../d-dialog-color-gradient\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogColorGradient extends DThemeWhiteDialogCommand implements DThemeDialogColorGradient {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemePickerColorGradient } from \"../../d-picker-color-gradient\";\nimport { DPickerColorGradientDataLike } from \"../../d-picker-color-gradient-data\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhitePickerColorGradient extends DThemeWhiteBase implements DThemePickerColorGradient {\n\tgetGradientPointsWidth(): number {\n\t\treturn 30;\n\t}\n\n\tgetGradientPointsMargin(): number {\n\t\treturn 24;\n\t}\n\n\tgetGradientAnchorTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_anchor;\n\t}\n\n\tgetGradientAnchorOutlinedTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_anchor_outlined;\n\t}\n\n\tgetGradientAnchorOutlineTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_anchor_outline;\n\t}\n\n\tgetGradientDirectionMargin(): number {\n\t\treturn 5;\n\t}\n\n\tgetGradientDirectionTexture(): Texture {\n\t\treturn DThemeWhiteAtlas.mappings.picker_color_direction;\n\t}\n\n\tgetGradientRecentColumn(): number {\n\t\treturn 4;\n\t}\n\n\tgetGradientRecentWidth(): number {\n\t\treturn 30;\n\t}\n\n\tgetGradientRecentMargin(): number {\n\t\treturn 5;\n\t}\n\n\tgetGradientRecentCount(): number {\n\t\treturn 16;\n\t}\n\n\tgetGradientRecents(): DPickerColorGradientDataLike[] {\n\t\treturn [];\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerColorGradient } from \"../theme/white/d-theme-white-picker-color-gradient\";\nimport { loadThemeWhitePickerColor } from \"./load-theme-white-picker-color\";\n\nexport const loadThemeWhitePickerColorGradient = () => {\n\tDThemeWhite.set( \"DPickerColorGradient\", DThemeWhitePickerColorGradient );\n\tloadThemeWhitePickerColor();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogColorGradient } from \"../theme/white/d-theme-white-dialog-color-gradient\";\nimport { loadThemeWhitePickerColorGradient } from \"./load-theme-white-picker-color-gradient\";\n\nexport const loadThemeWhiteDialogColorGradient = () => {\n\tDThemeWhite.set( \"DDialogColorGradient\", DThemeWhiteDialogColorGradient );\n\tloadThemeWhitePickerColorGradient();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonColorGradient } from \"../theme/white/d-theme-white-button-color-gradient\";\nimport { loadThemeWhiteDialogColorGradient } from \"./load-theme-white-dialog-color-gradient\";\n\nexport const loadThemeWhiteButtonColorGradient = () => {\n\tDThemeWhite.set( \"DButtonColorGradient\", DThemeWhiteButtonColorGradient );\n\tloadThemeWhiteDialogColorGradient();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\n\nexport class DThemeWhiteButtonDanger extends DThemeWhiteButtonBase {\n\tCOLOR = 0xff5566;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.1 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.2 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isPressed( state ) || DBaseStates.isActive( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn 0xe5e5e5;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn super.getColor( state );\n\t\t} else {\n\t\t\treturn 0xffffff;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonDanger } from \"../theme/white/d-theme-white-button-danger\";\n\nexport const loadThemeWhiteButtonDanger = () => {\n\tDThemeWhite.set( \"DButtonDanger\", DThemeWhiteButtonDanger );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilPad } from \"./util/util-pad\";\n\nexport class DPickerDates {\n\tstatic format( date: Date ): string {\n\t\tconst y = utilPad( String( date.getFullYear() ), 4, \"0\" );\n\t\tconst M = utilPad( String( date.getMonth() + 1 ), 2, \"0\");\n\t\tconst S = utilPad( String( date.getDate() ), 2, \"0\" );\n\t\treturn `${y}/${M}/${S}`;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonDate, DThemeButtonDate } from \"../../d-button-date\";\nimport { DPickerDates } from \"../../d-picker-dates\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\nconst formatter = ( value: Date ): string => {\n\treturn DPickerDates.format( value );\n};\n\nexport class DThemeWhiteButtonDate extends DThemeWhiteButton implements DThemeButtonDate {\n\tgetTextFormatter(): ( value: Date, caller: DButtonDate ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogDate } from \"../../d-dialog-date\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogDate extends DThemeWhiteDialogCommand implements DThemeDialogDate {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DInputIntegerOptions } from \"../../d-input-integer\";\nimport { DPickerDatetimeMask } from \"../../d-picker-datetime-mask\";\nimport { DThemePickerTime } from \"../../d-picker-time\";\nimport { DPickerTimeBoundDate } from \"../../d-picker-time-bound\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhitePickerTime extends DThemeWhiteBase implements DThemePickerTime {\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 8;\n\t}\n\n\tgetHoursOptions(): DInputIntegerOptions {\n\t\treturn {\n\t\t\twidth: 100,\n\t\t\ttitle: \"Hours\"\n\t\t};\n\t}\n\n\tgetMinutesOptions(): DInputIntegerOptions {\n\t\treturn {\n\t\t\twidth: 100,\n\t\t\ttitle: \"Minutes\"\n\t\t};\n\t}\n\n\tgetSecondsOptions(): DInputIntegerOptions {\n\t\treturn {\n\t\t\twidth: 100,\n\t\t\ttitle: \"Seconds\"\n\t\t};\n\t}\n\n\tgetMask(): DPickerDatetimeMask {\n\t\treturn DPickerDatetimeMask.HOURS | DPickerDatetimeMask.MINUTES;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLowerBound(): DPickerTimeBoundDate {\n\t\treturn null;\n\t}\n\n\tisLowerBoundInclusive(): boolean {\n\t\treturn false;\n\t}\n\n\tgetUpperBound(): DPickerTimeBoundDate {\n\t\treturn null;\n\t}\n\n\tisUpperBoundInclusive(): boolean {\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n\tDPickerDatetimeDateDecorator, DPickerDatetimeDayLabels,\n\tDPickerDatetimeLabelFormatter, DThemePickerDatetime\n} from \"../../d-picker-datetime\";\nimport { DPickerDatetimeButtonBackOptions } from \"../../d-picker-datetime-button-back\";\nimport { DPickerDatetimeButtonNextOptions } from \"../../d-picker-datetime-button-next\";\nimport { DPickerDatetimeMask } from \"../../d-picker-datetime-mask\";\nimport { DThemeWhitePickerTime } from \"./d-theme-white-picker-time\";\n\nconst MONTH_LABELS = [\n\t\"January\",\n\t\"February\",\n\t\"March\",\n\t\"April\",\n\t\"May\",\n\t\"June\",\n\t\"July\",\n\t\"August\",\n\t\"September\",\n\t\"October\",\n\t\"November\",\n\t\"December\"\n];\n\nconst DAY_LABELS: DPickerDatetimeDayLabels = [\n\t\"Su\",\n\t\"Mo\",\n\t\"Tu\",\n\t\"We\",\n\t\"Th\",\n\t\"Fr\",\n\t\"Sa\"\n];\n\nconst defaultLabelFormatter = ( date: Date ): string => {\n\treturn `${MONTH_LABELS[ date.getMonth() ]} ${date.getFullYear()}`;\n};\n\nconst defaultDateDecorator = (): void => { /* DO NOTHING*/ };\n\nexport class DThemeWhitePickerDatetime extends DThemeWhitePickerTime implements DThemePickerDatetime {\n\tgetDayLabels(): DPickerDatetimeDayLabels {\n\t\treturn DAY_LABELS;\n\t}\n\n\tgetDayStart(): number {\n\t\treturn 0;\n\t}\n\n\tgetLabelFormatter(): DPickerDatetimeLabelFormatter {\n\t\treturn defaultLabelFormatter;\n\t}\n\n\tgetDateDecorator(): DPickerDatetimeDateDecorator {\n\t\treturn defaultDateDecorator;\n\t}\n\n\tgetBackButtonOptions(): DPickerDatetimeButtonBackOptions | null {\n\t\treturn {\n\t\t\ttitle: \"Previous\"\n\t\t};\n\t}\n\n\tgetNextButtonOptions(): DPickerDatetimeButtonNextOptions | null {\n\t\treturn {\n\t\t\ttitle: \"Next\"\n\t\t};\n\t}\n\n\tgetMask(): DPickerDatetimeMask {\n\t\treturn DPickerDatetimeMask.DATE | super.getMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemePickerDate } from \"../../d-picker-date\";\nimport { DPickerDatetimeMask } from \"../../d-picker-datetime-mask\";\nimport { DThemeWhitePickerDatetime } from \"./d-theme-white-picker-datetime\";\n\nexport class DThemeWhitePickerDate extends DThemeWhitePickerDatetime implements DThemePickerDate {\n\tgetMask(): DPickerDatetimeMask {\n\t\treturn DPickerDatetimeMask.DATE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemePickerDatetimeButtonBack } from \"../../d-picker-datetime-button-back\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\n\nDThemeWhiteAtlas.add( \"picker_date_back\", 24, 24,\n\t`<g>` +\n\t\t`<path d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhitePickerDatetimeButtonBack\n\textends DThemeWhiteButtonAmbient implements DThemePickerDatetimeButtonBack {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 0;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn DThemeWhiteAtlas.mappings.picker_date_back;\n\t}\n\n\tgetColor(): number {\n\t\treturn 0x6f6f6f;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemePickerDatetimeButtonDate } from \"../../d-picker-datetime-button-date\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\n\nexport class DThemeWhitePickerDatetimeButtonDate extends DThemeWhiteButtonAmbient\n\timplements DThemePickerDatetimeButtonDate {\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetTextStyleClipping(): boolean {\n\t\treturn false;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tisToggle(): boolean {\n\t\treturn true;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemePickerDatetimeButtonNext } from \"../../d-picker-datetime-button-next\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\n\nDThemeWhiteAtlas.add( \"picker_date_next\", 24, 24,\n\t`<g>` +\n\t\t`<path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhitePickerDatetimeButtonNext\n\textends DThemeWhiteButtonAmbient implements DThemePickerDatetimeButtonNext {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 0;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn DThemeWhiteAtlas.mappings.picker_date_next;\n\t}\n\n\tgetColor(): number {\n\t\treturn 0x6f6f6f;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeWhiteTextBase } from \"./d-theme-white-text-base\";\n\nexport class DThemeWhiteText extends DThemeWhiteTextBase {\n\tgetHeight(): DCoordinate {\n\t\treturn this.getLineHeight();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DFontWeight } from \"../../d-font\";\nimport { DThemePickerDatetimeLabel } from \"../../d-picker-datetime-label\";\nimport { DThemeWhiteText } from \"./d-theme-white-text\";\n\nexport class DThemeWhitePickerDatetimeLabel extends DThemeWhiteText implements DThemePickerDatetimeLabel {\n\tgetWidth(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetTextStyleClipping(): boolean {\n\t\treturn false;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetColor(): number {\n\t\treturn 0x6f6f6f;\n\t}\n\n\tgetFontWeight(): DFontWeight {\n\t\treturn \"bold\";\n\t}\n\n\tgetFontSize(): number {\n\t\treturn Math.round( super.getFontSize() * 1.25 );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DFontWeight } from \"../../d-font\";\nimport { DThemePickerDatetimeLabelDate } from \"../../d-picker-datetime-label-date\";\nimport { DThemeWhiteText } from \"./d-theme-white-text\";\n\nexport class DThemeWhitePickerDatetimeLabelDate extends DThemeWhiteText implements DThemePickerDatetimeLabelDate {\n\tgetWidth(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetTextStyleClipping(): boolean {\n\t\treturn false;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetColor(): number {\n\t\treturn 0x6f6f6f;\n\t}\n\n\tgetFontWeight(): DFontWeight {\n\t\treturn \"bold\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemePickerDatetimeSpace } from \"../../d-picker-datetime-space\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhitePickerDatetimeSpace extends DThemeWhiteBase implements DThemePickerDatetimeSpace {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerTime } from \"../theme/white/d-theme-white-picker-time\";\n\nexport const loadThemeWhitePickerTime = () => {\n\tDThemeWhite.set( \"DPickerTime\", DThemeWhitePickerTime );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerDatetime } from \"../theme/white/d-theme-white-picker-datetime\";\nimport { DThemeWhitePickerDatetimeButtonBack } from \"../theme/white/d-theme-white-picker-datetime-button-back\";\nimport { DThemeWhitePickerDatetimeButtonDate } from \"../theme/white/d-theme-white-picker-datetime-button-date\";\nimport { DThemeWhitePickerDatetimeButtonNext } from \"../theme/white/d-theme-white-picker-datetime-button-next\";\nimport { DThemeWhitePickerDatetimeLabel } from \"../theme/white/d-theme-white-picker-datetime-label\";\nimport { DThemeWhitePickerDatetimeLabelDate } from \"../theme/white/d-theme-white-picker-datetime-label-date\";\nimport { DThemeWhitePickerDatetimeSpace } from \"../theme/white/d-theme-white-picker-datetime-space\";\nimport { loadThemeWhitePickerTime } from \"./load-theme-white-picker-time\";\n\nexport const loadThemeWhitePickerDatetime = () => {\n\tDThemeWhite.set( \"DPickerDatetimeButtonBack\", DThemeWhitePickerDatetimeButtonBack );\n\tDThemeWhite.set( \"DPickerDatetimeButtonDate\", DThemeWhitePickerDatetimeButtonDate );\n\tDThemeWhite.set( \"DPickerDatetimeButtonNext\", DThemeWhitePickerDatetimeButtonNext );\n\tDThemeWhite.set( \"DPickerDatetimeLabelDate\", DThemeWhitePickerDatetimeLabelDate );\n\tDThemeWhite.set( \"DPickerDatetimeLabel\", DThemeWhitePickerDatetimeLabel );\n\tDThemeWhite.set( \"DPickerDatetimeSpace\", DThemeWhitePickerDatetimeSpace );\n\tDThemeWhite.set( \"DPickerDatetime\", DThemeWhitePickerDatetime );\n\tloadThemeWhitePickerTime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhitePickerDate } from \"../theme/white/d-theme-white-picker-date\";\nimport { loadThemeWhitePickerDatetime } from \"./load-theme-white-picker-datetime\";\n\nexport const loadThemeWhitePickerDate = () => {\n\tDThemeWhite.set( \"DPickerDate\", DThemeWhitePickerDate );\n\tloadThemeWhitePickerDatetime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogDate } from \"../theme/white/d-theme-white-dialog-date\";\nimport { loadThemeWhitePickerDate } from \"./load-theme-white-picker-date\";\n\nexport const loadThemeWhiteDialogDate = () => {\n\tDThemeWhite.set( \"DDialogDate\", DThemeWhiteDialogDate );\n\tloadThemeWhitePickerDate();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonDate } from \"../theme/white/d-theme-white-button-date\";\nimport { loadThemeWhiteDialogDate } from \"./load-theme-white-dialog-date\";\n\nexport const loadThemeWhiteButtonDate = () => {\n\tDThemeWhite.set( \"DButtonDate\", DThemeWhiteButtonDate );\n\tloadThemeWhiteDialogDate();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DThemePickerTime } from \"./d-picker-time\";\nimport { DThemes } from \"./theme/d-themes\";\nimport { utilPad } from \"./util/util-pad\";\n\nexport class DPickerTimes {\n\tstatic format( date: Date, mask: DPickerDatetimeMask ): string {\n\t\tlet result = \"\";\n\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\tresult += utilPad( String( date.getHours() ), 2, \"0\" );\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\tif( 0 < result.length ) {\n\t\t\t\tresult += \":\";\n\t\t\t}\n\t\t\tresult += utilPad( String( date.getMinutes() ), 2, \"0\" );\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\tif( 0 < result.length ) {\n\t\t\t\tresult += \":\";\n\t\t\t}\n\t\t\tresult += utilPad( String( date.getSeconds() ), 2, \"0\" );\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic toMask( options?: { mask?: DPickerDatetimeMask } ): DPickerDatetimeMask {\n\t\treturn ( options && options.mask != null ? options.mask :\n\t\t\t(DThemes.getInstance().get( \"DPickerTime\" ) as DThemePickerTime).getMask() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDates } from \"./d-picker-dates\";\nimport { DThemePickerDatetime } from \"./d-picker-datetime\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimes } from \"./d-picker-times\";\nimport { DThemes } from \"./theme/d-themes\";\n\nexport class DPickerDatetimes {\n\tstatic format( date: Date, mask: DPickerDatetimeMask ): string {\n\t\tconst hms = DPickerTimes.format( date, mask );\n\t\tif( 0 < hms.length ) {\n\t\t\treturn `${DPickerDates.format( date )} ${hms}`;\n\t\t} else {\n\t\t\treturn `${DPickerDates.format( date )}`;\n\t\t}\n\t}\n\n\tstatic toMask( options?: { mask?: DPickerDatetimeMask } ): DPickerDatetimeMask {\n\t\treturn ( options && options.mask != null ? options.mask :\n\t\t\t(DThemes.getInstance().get( \"DPickerDatetime\" ) as DThemePickerDatetime).getMask() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonDatetime, DThemeButtonDatetime } from \"../../d-button-datetime\";\nimport { DPickerDatetimes } from \"../../d-picker-datetimes\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\nconst formatter = ( value: Date, caller: DButtonDatetime ): string => {\n\treturn DPickerDatetimes.format( value, caller.getDatetimeMask() );\n};\n\nexport class DThemeWhiteButtonDatetime extends DThemeWhiteButton implements DThemeButtonDatetime {\n\tgetTextFormatter(): ( value: Date, caller: DButtonDatetime ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogDatetime } from \"../../d-dialog-datetime\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogDatetime extends DThemeWhiteDialogCommand implements DThemeDialogDatetime {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogDatetime } from \"../theme/white/d-theme-white-dialog-datetime\";\nimport { loadThemeWhitePickerDatetime } from \"./load-theme-white-picker-datetime\";\n\nexport const loadThemeWhiteDialogDatetime = () => {\n\tDThemeWhite.set( \"DDialogDatetime\", DThemeWhiteDialogDatetime );\n\tloadThemeWhitePickerDatetime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonDatetime } from \"../theme/white/d-theme-white-button-datetime\";\nimport { loadThemeWhiteDialogDatetime } from \"./load-theme-white-dialog-datetime\";\n\nexport const loadThemeWhiteButtonDatetime = () => {\n\tDThemeWhite.set( \"DButtonDatetime\", DThemeWhiteButtonDatetime );\n\tloadThemeWhiteDialogDatetime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeButtonFile } from \"../../d-button-file\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\nexport class DThemeWhiteButtonFile extends DThemeWhiteButton implements DThemeButtonFile {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonFile } from \"../theme/white/d-theme-white-button-file\";\n\nexport const loadThemeWhiteButtonFile = () => {\n\tDThemeWhite.set( \"DButtonFile\", DThemeWhiteButtonFile );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteButtonPrimary extends DThemeWhiteButtonBase {\n\tCOLOR = DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.1 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.2 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isPressed( state ) || DBaseStates.isActive( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn 0xe5e5e5;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn super.getColor( state );\n\t\t} else {\n\t\t\treturn 0xffffff;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonPrimary } from \"../theme/white/d-theme-white-button-primary\";\n\nexport const loadThemeWhiteButtonPrimary = () => {\n\tDThemeWhite.set( \"DButtonPrimary\", DThemeWhiteButtonPrimary );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeButtonRadio } from \"../../d-button-radio\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonAmbient } from \"./d-theme-white-button-ambient\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\n\n// Material Design icons by Google.\n// Apache license version 2.0.\nDThemeWhiteAtlas.add( \"button_radio_mark_on\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48` +\n\t\t\t` 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8` +\n\t\t\t` 8 3.58 8 8-3.58 8-8 8z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"button_radio_mark_off\", 21, 21,\n\t`<g transform=\"scale(0.875,0.875)\">` +\n\t\t`<path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42` +\n\t\t\t` 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\" fill=\"#fff\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhiteButtonRadio extends DThemeWhiteButtonAmbient implements DThemeButtonRadio {\n\treadonly IMAGE_TINT_COLOR_FOCUSED = UtilRgb.darken( DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR, 0.1 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) ) {\n\t\t\t\treturn this.IMAGE_TINT_COLOR_FOCUSED;\n\t\t\t} else {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t\t}\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tisToggle(): boolean {\n\t\treturn true;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.button_radio_mark_on;\n\t\t} else {\n\t\t\treturn DThemeWhiteAtlas.mappings.button_radio_mark_off;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DDragMode {\n\tOFF,\n\tON,\n\tTOUCH\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonRadio } from \"../theme/white/d-theme-white-button-radio\";\n\nexport const loadThemeWhiteButtonRadio = () => {\n\tDThemeWhite.set( \"DButtonRadio\", DThemeWhiteButtonRadio );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DThemeButtonRadioRight } from \"../../d-button-radio-right\";\nimport { DThemeWhiteButtonRadio } from \"./d-theme-white-button-radio\";\n\nexport class DThemeWhiteButtonRadioRight extends DThemeWhiteButtonRadio implements DThemeButtonRadioRight {\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 0;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonRadioRight } from \"../theme/white/d-theme-white-button-radio-right\";\n\nexport const loadThemeWhiteButtonRadioRight = () => {\n\tDThemeWhite.set( \"DButtonRadioRight\", DThemeWhiteButtonRadioRight );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\n\nexport class DThemeWhiteButtonSecondary extends DThemeWhiteButtonBase {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonSecondary } from \"../theme/white/d-theme-white-button-secondary\";\n\nexport const loadThemeWhiteButtonSecondary = () => {\n\tDThemeWhite.set( \"DButtonSecondary\", DThemeWhiteButtonSecondary );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonTime, DThemeButtonTime } from \"../../d-button-time\";\nimport { DPickerTimes } from \"../../d-picker-times\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\n\nconst formatter = ( value: Date, caller: DButtonTime ): string => {\n\treturn DPickerTimes.format( value, caller.getDatetimeMask() );\n};\n\nexport class DThemeWhiteButtonTime extends DThemeWhiteButton implements DThemeButtonTime {\n\tgetTextFormatter(): ( value: Date, caller: DButtonTime ) => string {\n\t\treturn formatter;\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogTime } from \"../../d-dialog-time\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogTime extends DThemeWhiteDialogCommand implements DThemeDialogTime {\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogTime } from \"../theme/white/d-theme-white-dialog-time\";\nimport { loadThemeWhitePickerTime } from \"./load-theme-white-picker-time\";\n\nexport const loadThemeWhiteDialogTime = () => {\n\tDThemeWhite.set( \"DDialogTime\", DThemeWhiteDialogTime );\n\tloadThemeWhitePickerTime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteButtonTime } from \"../theme/white/d-theme-white-button-time\";\nimport { loadThemeWhiteDialogTime } from \"./load-theme-white-dialog-time\";\n\nexport const loadThemeWhiteButtonTime = () => {\n\tDThemeWhite.set( \"DButtonTime\", DThemeWhiteButtonTime );\n\tloadThemeWhiteDialogTime();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadThemeWhiteButton } from \"./load-theme-white-button\";\nimport { loadThemeWhiteButtonAmbient } from \"./load-theme-white-button-ambient\";\nimport { loadThemeWhiteButtonCheck } from \"./load-theme-white-button-check\";\nimport { loadThemeWhiteButtonCheckRight } from \"./load-theme-white-button-check-right\";\nimport { loadThemeWhiteButtonColor } from \"./load-theme-white-button-color\";\nimport { loadThemeWhiteButtonColorGradient } from \"./load-theme-white-button-color-gradient\";\nimport { loadThemeWhiteButtonDanger } from \"./load-theme-white-button-danger\";\nimport { loadThemeWhiteButtonDate } from \"./load-theme-white-button-date\";\nimport { loadThemeWhiteButtonDatetime } from \"./load-theme-white-button-datetime\";\nimport { loadThemeWhiteButtonFile } from \"./load-theme-white-button-file\";\nimport { loadThemeWhiteButtonPrimary } from \"./load-theme-white-button-primary\";\nimport { loadThemeWhiteButtonRadio } from \"./load-theme-white-button-radio\";\nimport { loadThemeWhiteButtonRadioRight } from \"./load-theme-white-button-radio-right\";\nimport { loadThemeWhiteButtonSecondary } from \"./load-theme-white-button-secondary\";\nimport { loadThemeWhiteButtonTime } from \"./load-theme-white-button-time\";\n\nexport const loadThemeWhiteButtonAll = () => {\n\tloadThemeWhiteButtonAmbient();\n\tloadThemeWhiteButtonCheckRight();\n\tloadThemeWhiteButtonCheck();\n\tloadThemeWhiteButtonColorGradient();\n\tloadThemeWhiteButtonColor();\n\tloadThemeWhiteButtonDanger();\n\tloadThemeWhiteButtonDate();\n\tloadThemeWhiteButtonDatetime();\n\tloadThemeWhiteButtonFile();\n\tloadThemeWhiteButtonPrimary();\n\tloadThemeWhiteButtonRadioRight();\n\tloadThemeWhiteButtonRadio();\n\tloadThemeWhiteButtonSecondary();\n\tloadThemeWhiteButtonTime();\n\tloadThemeWhiteButton();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeCanvas } from \"../../d-canvas\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteCanvas extends DThemeWhiteBase implements DThemeCanvas {\n\tgetBackgroundColor() {\n\t\treturn 0xffffff;\n\t}\n\n\tgetBorderColor( state: DBaseState ) {\n\t\treturn null;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeCanvasContainer } from \"../../d-canvas-container\";\nimport { DDragMode } from \"../../d-drag-mode\";\nimport { DMouseModifier } from \"../../d-mouse-modifier\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteCanvasContainer extends DThemeWhiteBase implements DThemeCanvasContainer {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetPaddingLeft() {\n\t\treturn 50;\n\t}\n\n\tgetPaddingTop() {\n\t\treturn 50;\n\t}\n\n\tgetPaddingRight() {\n\t\treturn 50;\n\t}\n\n\tgetPaddingBottom() {\n\t\treturn 50;\n\t}\n\n\tisWheelZoomEnabled(): boolean {\n\t\treturn true;\n\t}\n\n\tgetWheelZoomSpeed(): number {\n\t\treturn 0.004;\n\t}\n\n\tgetWheelZoomModifier(): DMouseModifier {\n\t\treturn DMouseModifier.NOT_NONE;\n\t}\n\n\tisWheelTranslationEnabled(): boolean {\n\t\treturn true;\n\t}\n\n\tgetWheelTranslationSpeed(): number {\n\t\treturn this.getFontSize() * 0.16;\n\t}\n\n\tgetWheelTranslationModifier(): DMouseModifier {\n\t\treturn DMouseModifier.NONE;\n\t}\n\n\tisDblClickZoomEnabled(): boolean {\n\t\treturn true;\n\t}\n\n\tgetDblClickZoomSpeed(): number {\n\t\treturn 2;\n\t}\n\n\tgetDblClickZoomModifier(): DMouseModifier {\n\t\treturn DMouseModifier.NONE;\n\t}\n\n\tgetDblClickZoomDuration(): number {\n\t\treturn 333;\n\t}\n\n\tgetZoomMin(): number {\n\t\treturn 0.1;\n\t}\n\n\tgetZoomMax(): number {\n\t\treturn 20;\n\t}\n\n\tgetDragMode(): DDragMode {\n\t\treturn DDragMode.ON;\n\t}\n\n\tgetDragModifier(): DMouseModifier {\n\t\treturn DMouseModifier.NONE;\n\t}\n\n\tgetDragDurationPosition(): number {\n\t\treturn 1;\n\t}\n\n\tgetDragDurationScale(): number {\n\t\treturn 1;\n\t}\n\n\tisOverflowMaskEnabled(): boolean {\n\t\treturn false;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisContainer } from \"./d-chart-axis-container\";\n\nexport enum DChartAxisPosition {\n\tTOP,\n\tBOTTOM,\n\tLEFT,\n\tRIGHT\n}\n\nexport enum DChartAxisTickPosition {\n\tINSIDE,\n\tOUTSIDE\n}\n\nexport interface DChartAxisOptions {\n\tposition?: DChartAxisPosition | keyof typeof DChartAxisPosition;\n}\n\nexport interface DChartAxis {\n\treadonly position: DChartAxisPosition;\n\tbind( container: DChartAxisContainer, index: number ): void;\n\tunbind(): void;\n\tupdate(): void;\n\tdestroy(): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteCanvas } from \"../theme/white/d-theme-white-canvas\";\nimport { DThemeWhiteCanvasContainer } from \"../theme/white/d-theme-white-canvas-container\";\n\nexport const loadThemeWhiteCanvasContainer = () => {\n\tDThemeWhite.set( \"DCanvasContainer\", DThemeWhiteCanvasContainer );\n\tDThemeWhite.set( \"DCanvas\", DThemeWhiteCanvas );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeChart } from \"../../d-chart\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteChart extends DThemeWhiteBase implements DThemeChart {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeFill, EShapeFillLike } from \"../e-shape-fill\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\n\nexport class EShapeGroupFillViewer implements EShapeFill {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget enable(): boolean {\n\t\treturn true;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tget color(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget alpha(): number {\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target: EShapeFillLike ) {\n\t\t// DO NOTHING\n\t}\n\n\tset( enable: boolean, color: number, alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tclone(): EShapeGroupFillViewer {\n\t\treturn new EShapeGroupFillViewer();\n\t}\n\n\ttoObject(): EShapeFillLike {\n\t\treturn {\n\t\t\tenable: true,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ) {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeStroke, EShapeStrokeLike, EShapeStrokeSide } from \"../e-shape-stroke\";\n\nexport class EShapeGroupStrokeViewer implements EShapeStroke {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget enable(): boolean {\n\t\treturn false;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tget color(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget alpha(): number {\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget width(): number {\n\t\treturn 1.0;\n\t}\n\n\tset width( width: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget align(): number {\n\t\treturn 0.0;\n\t}\n\n\tset align( width: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget side(): EShapeStrokeSide {\n\t\treturn EShapeStrokeSide.NONE;\n\t}\n\n\tset side( side: EShapeStrokeSide ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeStrokeLike> ) {\n\t\t// DO NOTHING\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number, side?: EShapeStrokeSide ) {\n\t\t// DO NOTHING\n\t}\n\n\tclone(): EShapeGroupStrokeViewer {\n\t\treturn new EShapeGroupStrokeViewer();\n\t}\n\n\ttoObject(): EShapeStrokeLike {\n\t\treturn {\n\t\t\tenable: false,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0,\n\t\t\twidth: 1.0,\n\t\t\talign: 0.0,\n\t\t\tside: EShapeStrokeSide.NONE\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextAlign, EShapeTextAlignLike } from \"../e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"../e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../e-shape-text-align-vertical\";\n\nexport class EShapeGroupTextAlignViewer implements EShapeTextAlign {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget horizontal(): EShapeTextAlignHorizontal {\n\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t}\n\n\tset horizontal( horizontal: EShapeTextAlignHorizontal ) {\n\t\t// DO NOTHING\n\t}\n\n\tget vertical(): EShapeTextAlignVertical {\n\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t}\n\n\tset vertical( vertical: EShapeTextAlignVertical ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextAlignLike> ): void {\n\t\t// DO NOTHING\n\t}\n\n\tset( horizontal?: EShapeTextAlignHorizontal, vertical?: EShapeTextAlignVertical ): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoObject(): EShapeTextAlignLike {\n\t\treturn {\n\t\t\thorizontal: EShapeTextAlignHorizontal.CENTER,\n\t\t\tvertical: EShapeTextAlignVertical.MIDDLE\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"../e-shape-text-offset\";\n\nexport class EShapeGroupTextOffsetViewer implements EShapeTextOffset {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget horizontal(): number {\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget vertical(): number {\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextOffsetLike> ): void {\n\t\t// DO NOTHING\n\t}\n\n\tset( horizontal?: number, vertical?: number ): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOutline, EShapeTextOutlineLike } from \"../e-shape-text-outline\";\n\nexport class EShapeGroupTextOutlineViewer implements EShapeTextOutline {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget enable(): boolean {\n\t\treturn false;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tget color(): number {\n\t\treturn 0xffffff;\n\t}\n\n\tset color( color: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget alpha(): number {\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget width(): number {\n\t\treturn 1.0;\n\t}\n\n\tset width( width: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextOutlineLike> ) {\n\t\t// DO NOTHING\n\t}\n\n\tset( enable?: boolean, color?: number, alpha?: number, width?: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tclone(): EShapeGroupTextOutlineViewer {\n\t\treturn new EShapeGroupTextOutlineViewer();\n\t}\n\n\ttoObject(): EShapeTextOutlineLike {\n\t\treturn {\n\t\t\tenable: false,\n\t\t\tcolor: 0xffffff,\n\t\t\talpha: 1.0,\n\t\t\twidth: 1.0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"../e-shape-text-offset\";\n\nexport class EShapeGroupTextPaddingViewer implements EShapeTextOffset {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget horizontal(): number {\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget vertical(): number {\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextOffsetLike> ): void {\n\t\t// DO NOTHING\n\t}\n\n\tset( horizontal?: number, vertical?: number ): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeTextOffset, EShapeTextOffsetLike } from \"../e-shape-text-offset\";\n\nexport class EShapeGroupTextSpacingViewer implements EShapeTextOffset {\n\tconstructor() {\n\t\t// DO NOTHING\n\t}\n\n\tget horizontal(): number {\n\t\treturn 0;\n\t}\n\n\tset horizontal( horizontal: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget vertical(): number {\n\t\treturn 0;\n\t}\n\n\tset vertical( vertical: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: Partial<EShapeTextOffsetLike> ): void {\n\t\t// DO NOTHING\n\t}\n\n\tset( horizontal?: number, vertical?: number ): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoObject(): EShapeTextOffsetLike {\n\t\treturn {\n\t\t\thorizontal: 0,\n\t\t\tvertical: 0\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t// DO NOTHING\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DeepPartial } from \"../../util/deep-partial\";\nimport { EShapeResourceManagerDeserialization } from \"../e-shape-resource-manager-deserialization\";\nimport { EShapeResourceManagerSerialization } from \"../e-shape-resource-manager-serialization\";\nimport { EShapeText, EShapeTextLike, EShapeTextStyle, EShapeTextWeight } from \"../e-shape-text\";\nimport { EShapeTextDirection } from \"../e-shape-text-direction\";\nimport { EShapeGroupTextAlignViewer } from \"./e-shape-group-text-align-viewer\";\nimport { EShapeGroupTextOffsetViewer } from \"./e-shape-group-text-offset-viewer\";\nimport { EShapeGroupTextOutlineViewer } from \"./e-shape-group-text-outline-viewer\";\nimport { EShapeGroupTextPaddingViewer } from \"./e-shape-group-text-padding-viewer\";\nimport { EShapeGroupTextSpacingViewer } from \"./e-shape-group-text-spacing-viewer\";\n\nexport class EShapeGroupTextViewer implements EShapeText {\n\talign: EShapeGroupTextAlignViewer;\n\toffset: EShapeGroupTextOffsetViewer;\n\toutline: EShapeGroupTextOutlineViewer;\n\tspacing: EShapeGroupTextSpacingViewer;\n\tpadding: EShapeGroupTextPaddingViewer;\n\n\tconstructor() {\n\t\tthis.align = new EShapeGroupTextAlignViewer();\n\t\tthis.offset = new EShapeGroupTextOffsetViewer();\n\t\tthis.outline = new EShapeGroupTextOutlineViewer();\n\t\tthis.spacing = new EShapeGroupTextSpacingViewer();\n\t\tthis.padding = new EShapeGroupTextPaddingViewer();\n\t}\n\n\tget enable(): boolean {\n\t\treturn true;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tget value(): string {\n\t\treturn \"\";\n\t}\n\n\tset value( value: string ) {\n\t\t// DO NOTHING\n\t}\n\n\tget color(): number {\n\t\treturn 0x000000;\n\t}\n\n\tset color( color: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget alpha(): number {\n\t\treturn 1.0;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget family(): string {\n\t\treturn \"auto\";\n\t}\n\n\tset family( family: string ) {\n\t\t// DO NOTHING\n\t}\n\n\tget size(): number {\n\t\treturn 24;\n\t}\n\n\tset size( size: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget weight(): EShapeTextWeight {\n\t\treturn EShapeTextWeight.NORMAL;\n\t}\n\n\tset weight( weight: EShapeTextWeight ) {\n\t\t// DO NOTHING\n\t}\n\n\tget style(): EShapeTextStyle {\n\t\treturn EShapeTextStyle.NORMAL;\n\t}\n\n\tset style( style: EShapeTextStyle ) {\n\t\t// DO NOTHING\n\t}\n\n\tget direction(): number {\n\t\treturn EShapeTextDirection.LEFT_TO_RIGHT;\n\t}\n\n\tset direction( direction: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tget clipping(): boolean {\n\t\treturn false;\n\t}\n\n\tset clipping( clipping: boolean ) {\n\t\t// DO NOTHING\n\t}\n\n\tcopy( target?: DeepPartial<EShapeTextLike> ): this {\n\t\treturn this;\n\t}\n\n\tset(\n\t\tvalue?: string, color?: number, alpha?: number,\n\t\tfamily?: string, size?: number, weight?: EShapeTextWeight,\n\t\tstyle?: EShapeTextStyle, direction?: EShapeTextDirection,\n\t\tclipping?: boolean\n\t): this {\n\t\treturn this;\n\t}\n\n\ttoObject(): EShapeTextLike {\n\t\treturn {\n\t\t\tvalue: \"\",\n\t\t\tcolor: 0x000000,\n\t\t\talpha: 1.0,\n\t\t\tfamily: \"auto\",\n\t\t\tsize: 24,\n\t\t\tweight: EShapeTextWeight.NORMAL,\n\t\t\talign: this.align.toObject(),\n\t\t\toffset: this.offset.toObject(),\n\t\t\tstyle: EShapeTextStyle.NORMAL,\n\t\t\toutline: this.outline.toObject(),\n\t\t\tspacing: this.spacing.toObject(),\n\t\t\tdirection: EShapeTextDirection.LEFT_TO_RIGHT,\n\t\t\tpadding: this.padding.toObject(),\n\t\t\tclipping: false\n\t\t};\n\t}\n\n\tserialize( manager: EShapeResourceManagerSerialization ): number {\n\t\treturn -1;\n\t}\n\n\tdeserialize( target: number, manager: EShapeResourceManagerDeserialization ): void {\n\t\t//\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class EShapeBufferCount {\n\tvertexCount: number;\n\tindexCount: number;\n\n\tconstructor() {\n\t\tthis.vertexCount = 0;\n\t\tthis.indexCount = 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\n\nexport class EShapeBufferUnit {\n\ttexture: Texture;\n\tindexOffset: number;\n\n\tconstructor( texture: Texture, indexOffset: number ) {\n\t\tthis.texture = texture;\n\t\tthis.indexOffset = indexOffset;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, Texture } from \"pixi.js\";\nimport { EShapeBufferUnit } from \"./e-shape-buffer-unit\";\n\nexport class EShapeBufferUnitBuilder {\n\tindex: number;\n\tbaseTexture: BaseTexture | null;\n\tunits: EShapeBufferUnit[];\n\n\tconstructor() {\n\t\tthis.index = 0;\n\t\tthis.baseTexture = null;\n\t\tthis.units = [];\n\t}\n\n\tbegin(): void {\n\t\tthis.index = 0;\n\t\tthis.baseTexture = null;\n\t}\n\n\tpush( texture: Texture, indexOffset: number ): void {\n\t\tif( this.index < this.units.length ) {\n\t\t\tconst unit = this.units[ this.index ];\n\t\t\tunit.texture = texture;\n\t\t\tunit.indexOffset = indexOffset;\n\t\t} else {\n\t\t\tthis.units.push( new EShapeBufferUnit( texture, indexOffset ) );\n\t\t}\n\t\tthis.index += 1;\n\t}\n\n\tend(): void {\n\t\tif( this.units.length !== this.index ) {\n\t\t\tthis.units.length = this.index;\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tthis.units.length = 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer, DRAW_MODES, Geometry, Point, Renderer, Shader, Texture } from \"pixi.js\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeBufferCount } from \"./e-shape-buffer-count\";\nimport { EShapeBufferUnitBuilder } from \"./e-shape-buffer-unit-builder\";\nimport { EShapeRendererIterator } from \"./e-shape-renderer-iterator\";\nimport { EShapeType } from \"./e-shape-type\";\nimport { EShapeUploaded } from \"./e-shape-uploaded\";\nimport { EShapeUploadeds } from \"./e-shape-uploadeds\";\n\nexport class EShapeBuffer {\n\tvertices: Float32Array;\n\tvertexCapacity: number;\n\tprotected vertexCount: number;\n\tvertexBuffer: Buffer;\n\n\tclippings: Float32Array;\n\tclippingBuffer: Buffer;\n\n\tsteps: Float32Array;\n\tstepBuffer: Buffer;\n\n\tantialiases: Float32Array;\n\tantialiasBuffer: Buffer;\n\n\tcolorFills: Float32Array;\n\tcolorFillBuffer: Buffer;\n\n\tcolorStrokes: Float32Array;\n\tcolorStrokeBuffer: Buffer;\n\n\tuvs: Float32Array;\n\tuvBuffer: Buffer;\n\n\tindices: Uint16Array | Uint32Array;\n\tindexCapacity: number;\n\tprotected indexCount: number;\n\tindexBuffer: Buffer;\n\n\tprotected renderer: Renderer;\n\tprotected geometry: Geometry;\n\n\tprotected builder: EShapeBufferUnitBuilder;\n\n\twork: Point;\n\tworkColor: Float32Array;\n\tworkStep: Float32Array;\n\tworkCount: EShapeBufferCount;\n\n\tconstructor( ntriangles: number, renderer: Renderer, shader: Shader ) {\n\t\tconst nindices = ntriangles * 3;\n\t\tconst nvertices = nindices;\n\n\t\tthis.vertices = new Float32Array( nvertices * 2 );\n\t\tthis.vertexCapacity = nvertices;\n\t\tthis.vertexCount = 0;\n\t\tthis.vertexBuffer = new Buffer( this.vertices, false, false );\n\n\t\tthis.clippings = new Float32Array( nvertices * 3 );\n\t\tthis.clippingBuffer = new Buffer( this.clippings, false, false );\n\n\t\tthis.steps = new Float32Array( nvertices * 2 );\n\t\tthis.stepBuffer = new Buffer( this.steps, false, false );\n\n\t\tthis.antialiases = new Float32Array( nvertices * 4 );\n\t\tthis.antialiasBuffer = new Buffer( this.antialiases, false, false );\n\n\t\tthis.colorFills = new Float32Array( nvertices * 4 );\n\t\tthis.colorFillBuffer = new Buffer( this.colorFills, false, false );\n\n\t\tthis.colorStrokes = new Float32Array( nvertices * 4 );\n\t\tthis.colorStrokeBuffer = new Buffer( this.colorStrokes, false, false );\n\n\t\tthis.uvs = new Float32Array( nvertices * 2 );\n\t\tthis.uvBuffer = new Buffer( this.uvs, false, false );\n\n\t\tconst isIndicesShort = ( nvertices <= 65535 );\n\t\tthis.indices = ( isIndicesShort ? new Uint16Array( nindices ) : new Uint32Array( nindices ) );\n\t\tthis.indexCapacity = ntriangles;\n\t\tthis.indexCount = 0;\n\t\tthis.indexBuffer = new Buffer( this.indices, false, true );\n\n\t\tthis.renderer = renderer;\n\n\t\tthis.builder = new EShapeBufferUnitBuilder();\n\n\t\tthis.work = new Point();\n\t\tthis.workColor = new Float32Array( 4 );\n\t\tthis.workStep = new Float32Array( 3 );\n\t\tthis.workCount = new EShapeBufferCount();\n\n\t\tthis.geometry = new Geometry()\n\t\t\t.addIndex( this.indexBuffer )\n\t\t\t.addAttribute( \"aPosition\", this.vertexBuffer, 2 )\n\t\t\t.addAttribute( \"aClipping\", this.clippingBuffer, 3 )\n\t\t\t.addAttribute( \"aStep\", this.stepBuffer, 2 )\n\t\t\t.addAttribute( \"aAntialias\", this.antialiasBuffer, 4 )\n\t\t\t.addAttribute( \"aColorFill\", this.colorFillBuffer, 4 )\n\t\t\t.addAttribute( \"aColorStroke\", this.colorStrokeBuffer, 4 )\n\t\t\t.addAttribute( \"aUv\", this.uvBuffer, 2 );\n\t}\n\n\trender( shader: Shader ): void {\n\t\tconst renderer = this.renderer;\n\t\t(renderer.geometry as any).bind( this.geometry );\n\n\t\tconst units = this.builder.units;\n\t\tconst unitCount = units.length;\n\t\tif( 0 < unitCount ) {\n\t\t\tconst type = DRAW_MODES.TRIANGLES;\n\n\t\t\tlet unit0 = null;\n\t\t\tlet unit1 = units[ 0 ];\n\t\t\tlet ioffset0 = 0;\n\t\t\tlet ioffset1 = unit1.indexOffset * 3;\n\t\t\tlet vcount = 0;\n\t\t\tlet texture = Texture.WHITE;\n\t\t\tfor( let i = 0, imax = unitCount - 1; i < imax; ++i ) {\n\t\t\t\tunit0 = unit1;\n\t\t\t\tunit1 = units[ i + 1 ];\n\t\t\t\tioffset0 = ioffset1;\n\t\t\t\tioffset1 = unit1.indexOffset * 3;\n\t\t\t\tvcount = ioffset1 - ioffset0;\n\t\t\t\ttexture = unit0.texture || Texture.WHITE;\n\t\t\t\tif( 0 < vcount && texture.valid ) {\n\t\t\t\t\tshader.uniforms.sampler = renderer.texture.bind( texture );\n\t\t\t\t\trenderer.geometry.draw( type, vcount, ioffset0 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvcount = this.indexCount * 3 - ioffset1;\n\t\t\ttexture = unit1.texture || Texture.WHITE;\n\t\t\tif( 0 < vcount && texture.valid ) {\n\t\t\t\tshader.uniforms.sampler = renderer.texture.bind( texture );\n\t\t\t\trenderer.geometry.draw( type, vcount, ioffset1 );\n\t\t\t}\n\t\t}\n\t}\n\n\tisCompatible( shape: EShape, uploaded: EShapeUploaded, vindex: number, iindex: number ): boolean {\n\t\treturn (\n\t\t\tuploaded.getBuffer() === this &&\n\t\t\tuploaded.getVertexOffset() === vindex &&\n\t\t\tuploaded.getIndexOffset() === iindex &&\n\t\t\tuploaded.isCompatible( shape )\n\t\t);\n\t}\n\n\tupdate( iterator: EShapeRendererIterator, antialiasWeight: number ): boolean {\n\t\tconst builder = this.builder;\n\t\tbuilder.begin();\n\n\t\tlet vindex = 0;\n\t\tlet iindex = 0;\n\t\tlet shape = iterator.get();\n\t\tfor( ; shape != null; shape = iterator.next() ) {\n\t\t\tconst uploaded = shape.uploaded;\n\t\t\tif( uploaded == null || ! this.isCompatible( shape, uploaded, vindex, iindex ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tuploaded.update( shape );\n\t\t\tuploaded.buildUnit( builder );\n\n\t\t\tvindex += uploaded.getVertexCount();\n\t\t\tiindex += uploaded.getIndexCount();\n\t\t}\n\n\t\tfor( ; shape != null; shape = iterator.next() ) {\n\t\t\tconst creater = EShapeUploadeds[ shape.type ] || EShapeUploadeds[ EShapeType.GROUP ];\n\t\t\tif( creater == null ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst uploaded = creater( this, shape, vindex, iindex, antialiasWeight );\n\t\t\tif( uploaded == null ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tuploaded.buildUnit( builder );\n\t\t\tvindex += uploaded.getVertexCount();\n\t\t\tiindex += uploaded.getIndexCount();\n\t\t}\n\n\t\tbuilder.end();\n\t\tthis.vertexCount = vindex;\n\t\tthis.indexCount = iindex;\n\n\t\treturn 0 < builder.units.length;\n\t}\n\n\tdestroy(): void {\n\t\tthis.geometry.destroy();\n\t\tthis.builder.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\n\nconst DUMMY_SHAPES: EShape[] = [];\n\nexport class EShapeRendererIteratorDatum {\n\tprotected index: number;\n\tprotected shapes: EShape[];\n\n\tconstructor() {\n\t\tthis.index = 0;\n\t\tthis.shapes = DUMMY_SHAPES;\n\t}\n\n\treset( shapes: EShape[] ) {\n\t\tthis.index = -1;\n\t\tthis.shapes = shapes;\n\t}\n\n\tnext(): EShape | null {\n\t\tconst index = this.index = this.index + 1;\n\t\tconst shapes = this.shapes;\n\t\tif( index < shapes.length ) {\n\t\t\treturn shapes[ index ];\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeRendererIteratorDatum } from \"./e-shape-renderer-iterator-datum\";\n\nexport class EShapeRendererIterator {\n\tprotected _index: number;\n\tprotected _data: EShapeRendererIteratorDatum[];\n\tprotected _datum: EShapeRendererIteratorDatum;\n\tprotected _current: EShape | null;\n\n\tconstructor() {\n\t\tthis._index = -1;\n\t\tthis._datum = new EShapeRendererIteratorDatum();\n\t\tthis._data = [ this._datum ];\n\t\tthis._current = null;\n\t}\n\n\treset( shapes: EShape[] ): EShape | null {\n\t\tthis._index = 0;\n\t\tconst current = this._datum = this._data[ 0 ];\n\t\tcurrent.reset( shapes );\n\t\tthis._current = null;\n\t\treturn this.next();\n\t}\n\n\tget(): EShape | null {\n\t\treturn this._current;\n\t}\n\n\tnext(): EShape | null {\n\t\tconst datum = this._datum;\n\t\tconst shape = datum.next();\n\t\tif( shape != null ) {\n\t\t\tthis._current = shape;\n\t\t\tconst children = shape.children;\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tconst datumIndex = this._index = this._index + 1;\n\t\t\t\tconst data = this._data;\n\t\t\t\tif( datumIndex < data.length ) {\n\t\t\t\t\tconst newDatum = data[ datumIndex ];\n\t\t\t\t\tnewDatum.reset( children );\n\t\t\t\t\tthis._datum = newDatum;\n\t\t\t\t} else {\n\t\t\t\t\tconst newDatum = new EShapeRendererIteratorDatum();\n\t\t\t\t\tdata.push( newDatum );\n\t\t\t\t\tnewDatum.reset( children );\n\t\t\t\t\tthis._datum = newDatum;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn shape;\n\t\t} else {\n\t\t\tconst datumIndex = this._index = this._index - 1;\n\t\t\tconst data = this._data;\n\t\t\tif( 0 <= datumIndex ) {\n\t\t\t\tthis._datum = data[ datumIndex ];\n\t\t\t\tthis._current = null;\n\t\t\t\treturn this.next();\n\t\t\t} else {\n\t\t\t\tthis._current = null;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { BaseTexture, BLEND_MODES, ObjectRenderer, Renderer, Shader, Texture, utils } from \"pixi.js\";\nimport { DApplications } from \"../d-applications\";\nimport { DynamicAtlas } from \"../util/dynamic-atlas\";\nimport { DynamicAtlasItemImage } from \"../util/dynamic-atlas-item-image\";\nimport { DynamicSDFFontAtlases } from \"../util/dynamic-sdf-font-atlases\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeBuffer } from \"./e-shape-buffer\";\nimport { EShapeContainer } from \"./e-shape-container\";\nimport { EShapeRendererIterator } from \"./e-shape-renderer-iterator\";\n\nconst VERTEX_SHADER = `\nattribute vec2 aPosition;\nattribute vec3 aClipping;\nattribute vec2 aStep;\nattribute vec4 aAntialias;\nattribute vec4 aColorFill;\nattribute vec4 aColorStroke;\nattribute vec2 aUv;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mediump float pixelScale;\nuniform mediump float antialiasWeight;\n\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nvec2 toInverse( in vec2 v ) {\n\treturn vec2( -v.y, v.x );\n}\n\nvec2 toTransformedPosition( in vec2 v ) {\n\treturn (projectionMatrix * translationMatrix * vec3(v, 1.0)).xy;\n}\n\nvec4 toAntialias01( in vec4 antialias, in float scale ) {\n\t// Taylor series of 1 / ( 1 - a ) = 1 + a + a^2 + ....\n\treturn 1.0 + min( vec4( 1.0 ), antialias * scale );\n}\n\nvec4 toAntialias2( in vec2 step, in vec4 antialias, in float scale ) {\n\tfloat x = min( 0.4, step.x * scale );\n\tfloat y = 0.5 - antialias.x;\n\tfloat z = 0.5 - antialias.x - step.y;\n\treturn vec4( y, z, y - max( 0.01, y - x ), z - max( 0.01, z - x ) );\n}\n\nvec2 toPosition3456( in float type, in vec2 p, in vec2 pprev, in vec2 pnext, in float strokeWidth, out float shift ) {\n\tvec2 d0 = p - pprev;\n\tvec2 d1 = pnext - p;\n\tfloat l0 = dot( d0, d0 );\n\tfloat l1 = dot( d1, d1 );\n\tvec2 nd0 = normalize( toInverse( d0 ) );\n\tvec2 nd1 = normalize( toInverse( d1 ) );\n\tvec2 n0 = 0.00001 < l0 ? nd0 : nd1;\n\tvec2 n1 = 0.00001 < l1 ? nd1 : nd0;\n\tvec2 n0i = toInverse( n0 );\n\tvec2 n1i = toInverse( n1 );\n\tfloat direction = sign( 4.5 - type );\n\n\t// Offset\n\tfloat cross = dot( n0i, n1 );\n\tfloat crossInverse = ( 0.00001 < abs( cross ) ? 1.0 / cross : 0.0 );\n\tfloat b = dot(n1 - n0, n0) * crossInverse;\n\tfloat offsetSize = direction * strokeWidth * 0.5;\n\tvec2 offset = n1 + n1i * b;\n\n\t// Miter\n\tvec2 pmiter = p + offsetSize * offset;\n\tfloat miterAngle0 = dot( n0i, pmiter - pprev );\n\tfloat miterAngle1 = dot( n1i, pmiter - pnext );\n\tfloat miterLength = dot( offset, offset );\n\tfloat miterSide = direction * cross;\n\n\t// Bevel\n\tvec2 n = ( type == 4.0 || type == 6.0 ? n1 : n0 );\n\tvec2 pbevel = p + offsetSize * n;\n\n\t//\n\tvec2 presult = (\n\t\t0.0 <= miterAngle0 || miterAngle1 < 0.0 || miterSide < 0.0 ?\n\t\tpbevel : pmiter\n\t);\n\t/*\n\tvec2 presult = (\n\t\tmiterAngle0 < 0.0 && 0.0 <= miterAngle1 && miterLength < 50.0 ?\n\t\tpmiter : pbevel\n\t);\n\t*/\n\tvec2 ni = ( type == 4.0 || type == 6.0 ? n1i : n0i );\n\tshift = dot( ni, p - presult );\n\treturn toTransformedPosition( presult );\n}\n\nvec2 toStep3456( in float type ) {\n\treturn ( type < 4.5 ? vec2( 1.0, 0.0 ) : vec2( 0.0, 1.0 ) );\n}\n\nvec4 toAntialias3456( in float strokeWidth, in float scale ) {\n\tfloat a = antialiasWeight / max( 0.0001, strokeWidth );\n\treturn toAntialias01( vec4( a, a, a, a ), scale );\n}\n\nfloat toDotAndDashScale( in float scale, in float strokeWidthScale ) {\n\treturn (\n\t\tscale == 4.0 || scale == 5.0 || scale == 6.0 || scale == 7.0 ?\n\t\tstrokeWidthScale : 1.0\n\t);\n}\n\nvec4 toColorStroke3456( in float shift, in float scale ) {\n\tfloat x = aColorFill.x + shift;\n\tfloat y = scale * aColorFill.y;\n\tfloat z = scale * aColorFill.z;\n\tfloat w = aColorFill.w;\n\treturn vec4( x, y, z, w );\n}\n\nfloat toStrokeWidthScale( in float scale ) {\n\treturn (\n\t\tscale == 3.0 || scale == 7.0 ?\n\t\tpixelScale : (\n\t\t\tscale == 1.0 || scale == 5.0 ?\n\t\t\tmin( 1.0, pixelScale ) : (\n\t\t\t\tscale == 2.0 || scale == 6.0 ?\n\t\t\t\tmax( 1.0, pixelScale ) : 1.0\n\t\t\t)\n\t\t)\n\t);\n}\n\nvoid main(void) {\n\tvec2 p012 = toTransformedPosition( aPosition );\n\n\tfloat type = aClipping.z;\n\n\t// type === 0 or 1\n\tvec4 a01 = toAntialias01( aAntialias, pixelScale );\n\n\t// type === 2\n\tvec4 a2 = toAntialias2( aStep, aAntialias, pixelScale );\n\n\t// type === 3, 4, 5 or 6\n\tfloat shift3456 = 0.0;\n\tfloat strokeWidthScale = toStrokeWidthScale( aStep.y );\n\tfloat strokeWidth = strokeWidthScale * aStep.x;\n\tvec2 p3456 = toPosition3456( type, aPosition, aAntialias.xy, aAntialias.zw, strokeWidth, shift3456 );\n\tvec2 step3456 = toStep3456( type );\n\tvec4 a3456 = toAntialias3456( strokeWidth, pixelScale );\n\tvec4 colorStroke3456 = toColorStroke3456( shift3456, toDotAndDashScale( aStep.y, strokeWidthScale ) );\n\n\t//\n\tgl_Position = vec4( ( 2.5 < type ? p3456 : p012 ), 0.0, 1.0 );\n\tvAntialias = ( 1.5 < type ? ( 2.5 < type ? a3456 : a2 ) : a01 );\n\tvClipping = aClipping;\n\tvStep = ( 2.5 < type ? step3456 : aStep );\n\tvColorFill = ( 2.5 < type ? aColorStroke : aColorFill );\n\tvColorStroke = ( 2.5 < type ? colorStroke3456 : aColorStroke );\n\tvUv = aUv;\n}`;\n\nconst FRAGMENT_SHADER_NO_AA = `\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nuniform sampler2D sampler;\nuniform mediump float pixelScale;\n\nvoid main(void) {\n\tvec4 texture = texture2D(sampler, vUv);\n\tfloat type = vClipping.z;\n\tvec2 v0 = vStep;\n\tvec2 v1 = vClipping.xy;\n\tvec2 v2 = v0 * vAntialias.xy;\n\tvec2 v3 = v1 * vAntialias.zw;\n\tvec4 d0 = vec4( max( v0.x, v0.y ), max( v1.x, v1.y ), max( v2.x, v2.y ), max( v3.x, v3.y ) );\n\tvec4 d1 = vec4( dot( v0, v0 ), dot( v1, v1 ), dot( v2, v2 ), dot( v3, v3 ) );\n\tvec4 d = ( type == 1.0 ? d1 : d0 );\n\tvec2 s = step( vec2( 1.0 ), d.xy );\n\tvec4 color01 = texture * (vColorStroke * (s.x - s.y) + vColorFill * (1.0 - s.x));\n\n\tfloat l = vColorStroke.x;\n\tfloat lp0 = vColorStroke.y;\n\tfloat lp1 = vColorStroke.z;\n\tfloat lt = vColorStroke.w;\n\tfloat lm = mod( l, lp0 + lp1 );\n\tfloat ls0 = step( 0.0, lm );\n\tfloat ls1 = step( lp0, lm );\n\tfloat ls2 = ( 0.0 <= lt ? 1.0 - step( lt, l ) : 1.0 );\n\tvec4 color3456 = color01 * ( ls0 - ls1 ) * ls2;\n\n\tvec2 a0 = vAntialias.xy;\n\tvec2 a1 = vAntialias.zw;\n\tvec2 a2 = vec2( texture.a );\n\tvec2 a = smoothstep( a0 - a1, a0 + a1, a2 );\n\tvec4 color2 = a.x * vColorFill + ( a.y - a.x ) * vColorStroke;\n\tgl_FragColor = ( type == 2.0 ? color2 : (2.5 < type ? color3456 : color01) );\n}`;\n\nconst FRAGMENT_SHADER = `\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nuniform sampler2D sampler;\nuniform mediump float pixelScale;\n\nvoid main(void) {\n\tvec4 texture = texture2D(sampler, vUv);\n\tfloat type = vClipping.z;\n\tvec2 v0 = vStep;\n\tvec2 v1 = vClipping.xy;\n\tvec2 v2 = v0 * vAntialias.xy;\n\tvec2 v3 = v1 * vAntialias.zw;\n\tvec4 d0 = vec4( max( v0.x, v0.y ), max( v1.x, v1.y ), max( v2.x, v2.y ), max( v3.x, v3.y ) );\n\tvec4 d1 = vec4( dot( v0, v0 ), dot( v1, v1 ), dot( v2, v2 ), dot( v3, v3 ) );\n\tvec4 d = ( type == 1.0 ? d1 : d0 );\n\tvec2 s = smoothstep( 1.0 - (d.zw - d.xy), vec2( 1.0 ), d.xy );\n\tvec4 color01 = texture * (vColorStroke * (s.x - s.y) + vColorFill * (1.0 - s.x));\n\n\tfloat l = vColorStroke.x;\n\tfloat lp0 = vColorStroke.y;\n\tfloat lp1 = vColorStroke.z;\n\tfloat lt = vColorStroke.w;\n\tfloat ld = 0.5 * pixelScale;\n\tfloat lm = mod( l, lp0 + lp1 );\n\tfloat ls0 = smoothstep( 0.0, 0.0 + ld, lm );\n\tfloat ls1 = smoothstep( lp0, lp0 + ld, lm );\n\tfloat ls2 = ( 0.0 <= lt ? 1.0 - smoothstep( lt - ld, lt, l ) : 1.0 );\n\tvec4 color3456 = color01 * ( ls0 - ls1 ) * ls2;\n\n\tvec2 a0 = vAntialias.xy;\n\tvec2 a1 = vAntialias.zw;\n\tvec2 a2 = vec2( texture.a );\n\tvec2 a = smoothstep( a0 - a1, a0 + a1, a2 );\n\tvec4 color2 = a.x * vColorFill + ( a.y - a.x ) * vColorStroke;\n\tgl_FragColor = ( type == 2.0 ? color2 : (2.5 < type ? color3456 : color01) );\n}`;\n\nexport class EShapeRenderer extends ObjectRenderer {\n\tprotected _shader: Shader | null;\n\tprotected _iterator: EShapeRendererIterator;\n\tprotected _bufferSize: number;\n\tprotected _bufferSizeMax: number;\n\n\tconstructor( renderer: Renderer ) {\n\t\tsuper( renderer );\n\t\tthis._shader = Shader.from( VERTEX_SHADER, FRAGMENT_SHADER );\n\t\tthis._iterator = new EShapeRendererIterator();\n\t\tthis._bufferSize = 5000;\n\t\tthis._bufferSizeMax = this.getBufferSizeMax( renderer );\n\t}\n\n\tprotected getBufferSizeMax( renderer: Renderer ): number {\n\t\tconst context = renderer.context;\n\t\tconst extensions = context.extensions as any;\n\t\tif( 1 < context.webGLVersion || !! extensions.uint32ElementIndex ) {\n\t\t\treturn 1431655765; // 2^32 / 3\n\t\t}\n\t\treturn 21845; // 2^16 / 3\n\t}\n\n\tupdateAtlas(\n\t\tshape: EShape,\n\t\tatlas: DynamicAtlas, fontAtlases: DynamicSDFFontAtlases,\n\t\tdefaultTexture: Texture, baseTexture: BaseTexture\n\t): void {\n\t\t// Texture\n\t\t// Do not access the shape.image.src here.\n\t\t// It slows down the rendering speed significantly.\n\t\tconst imageSrc = shape.imageSrc;\n\t\tif( imageSrc != null ) {\n\t\t\tconst textureItem = atlas.get( imageSrc );\n\t\t\tif( textureItem != null ) {\n\t\t\t\tshape.texture = textureItem.texture;\n\t\t\t} else {\n\t\t\t\tconst newTextureItem = new DynamicAtlasItemImage( shape.image!, baseTexture );\n\t\t\t\tshape.texture = newTextureItem.texture;\n\t\t\t\tatlas.set( newTextureItem.id, newTextureItem );\n\t\t\t}\n\t\t} else {\n\t\t\tshape.texture = defaultTexture;\n\t\t}\n\n\t\t// Font texture atlas\n\t\tconst text = shape.text;\n\t\tconst textValue = text.value;\n\t\tif( 0 < textValue.length ) {\n\t\t\tfontAtlases.add( text.family, textValue );\n\t\t}\n\t}\n\n\tupdateAtlases(\n\t\tshapes: EShape[],\n\t\tatlas: DynamicAtlas, fontAtlases: DynamicSDFFontAtlases,\n\t\tdefaultTexture: Texture, baseTexture: BaseTexture\n\t): void {\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tconst shape = shapes[ i ];\n\t\t\tthis.updateAtlas( shape, atlas, fontAtlases, defaultTexture, baseTexture );\n\t\t\tconst children = shape.children;\n\t\t\tfor( let j = 0, jmax = children.length; j < jmax; ++j ) {\n\t\t\t\tconst child = children[ j ];\n\t\t\t\tthis.updateAtlas( child, atlas, fontAtlases, defaultTexture, baseTexture );\n\t\t\t\tthis.updateAtlases( child.children, atlas, fontAtlases, defaultTexture, baseTexture );\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateFontAtlas(\n\t\tshape: EShape,\n\t\tatlas: DynamicAtlas, fontAtlases: DynamicSDFFontAtlases,\n\t\tdefaultTexture: Texture\n\t): void {\n\t\tconst text = shape.text;\n\t\tconst fontAtlas = fontAtlases.get( text.family );\n\t\tif( fontAtlas != null ) {\n\t\t\tconst textureItem = atlas.get( fontAtlas.id );\n\t\t\tif( textureItem != null ) {\n\t\t\t\ttext.atlas = fontAtlas;\n\t\t\t\ttext.texture = textureItem.texture;\n\t\t\t} else {\n\t\t\t\ttext.atlas = undefined;\n\t\t\t\ttext.texture = defaultTexture;\n\t\t\t}\n\t\t} else {\n\t\t\ttext.atlas = undefined;\n\t\t\ttext.texture = defaultTexture;\n\t\t}\n\t}\n\n\tupdateFontAtlases(\n\t\tshapes: EShape[],\n\t\tatlas: DynamicAtlas, fontAtlases: DynamicSDFFontAtlases,\n\t\tdefaultTexture: Texture\n\t): void {\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tconst shape = shapes[ i ];\n\t\t\tthis.updateFontAtlas( shape, atlas, fontAtlases, defaultTexture );\n\t\t\tconst children = shape.children;\n\t\t\tfor( let j = 0, jmax = children.length; j < jmax; ++j ) {\n\t\t\t\tconst child = children[ j ];\n\t\t\t\tthis.updateFontAtlas( child, atlas, fontAtlases, defaultTexture );\n\t\t\t\tthis.updateFontAtlases( child.children, atlas, fontAtlases, defaultTexture );\n\t\t\t}\n\t\t}\n\t}\n\n\trender_( container: EShapeContainer, shapes: EShape[], isDirty: boolean ): void {\n\t\tconst renderer = this.renderer;\n\t\tconst shader = this._shader;\n\n\t\tif( shader != null && 0 < shapes.length ) {\n\t\t\tconst resolution = renderer.resolution;\n\t\t\tconst buffers = container.getBuffers();\n\t\t\tconst antialiasWeight = container.getAntialiasWeight( resolution );\n\n\t\t\t// Update textures\n\t\t\tif( isDirty ) {\n\t\t\t\t// Atlases\n\t\t\t\tconst atlas = container.getAtlas( resolution );\n\t\t\t\tconst fontAtlases = container.getFontAtlases();\n\t\t\t\tatlas.begin();\n\t\t\t\tfontAtlases.begin();\n\t\t\t\tconst defaultTexture = atlas.getDefaultTexture();\n\t\t\t\tconst baseTexture: BaseTexture = atlas.getBaseTexture();\n\t\t\t\tthis.updateAtlases( shapes, atlas, fontAtlases, defaultTexture, baseTexture );\n\t\t\t\tfontAtlases.end();\n\t\t\t\tfontAtlases.update( atlas );\n\t\t\t\tthis.updateFontAtlases( shapes, atlas, fontAtlases, defaultTexture );\n\t\t\t\tatlas.end();\n\t\t\t\tatlas.repack();\n\n\t\t\t\t// Update buffers\n\t\t\t\tthis.updateBuffers( shapes, buffers, renderer, shader, antialiasWeight );\n\t\t\t}\n\n\t\t\t// Render buffers\n\t\t\tshader.uniforms.pixelScale = container.getPixelScale( resolution );\n\t\t\tshader.uniforms.antialiasWeight = antialiasWeight;\n\t\t\tshader.uniforms.translationMatrix = container.worldTransform.toArray( true );\n\t\t\trenderer.shader.bind( shader, false );\n\t\t\trenderer.state!.setBlendMode(utils.correctBlendMode(BLEND_MODES.NORMAL, true));\n\t\t\tfor( let i = 0, imax = buffers.length; i < imax; ++i ) {\n\t\t\t\tbuffers[ i ].render( shader );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected increaseBufferSize(): boolean {\n\t\tconst bufferSize = this._bufferSize;\n\t\tconst bufferSizeMax = this._bufferSizeMax;\n\t\tif( bufferSize < bufferSizeMax ) {\n\t\t\tthis._bufferSize = Math.min( bufferSizeMax, bufferSize << 1 );\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected getBufferSize(): number {\n\t\treturn this._bufferSize;\n\t}\n\n\tupdateBuffers(\n\t\tshapes: EShape[], buffers: EShapeBuffer[],\n\t\trenderer: Renderer, shader: Shader,\n\t\tantialiasWeight: number\n\t): void {\n\t\tconst iterator = this._iterator;\n\t\titerator.reset( shapes );\n\t\tlet ib = 0;\n\t\tconst ibmax = buffers.length;\n\t\tfor( ; iterator.get() != null && ib < ibmax; ++ib ) {\n\t\t\tif( ! buffers[ ib ].update( iterator, antialiasWeight ) ) {\n\t\t\t\t// Failed to update the shapes.\n\t\t\t\t// This is most likely caused by small buffers.\n\t\t\t\t// So increase the buffer size.\n\t\t\t\tthis.increaseBufferSize();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif( ib < ibmax ) {\n\t\t\tfor( let jb = ib; jb < ibmax; ++jb ) {\n\t\t\t\tbuffers[ jb ].destroy();\n\t\t\t}\n\t\t\tbuffers.length = ib;\n\t\t}\n\n\t\twhile( iterator.get() != null ) {\n\t\t\tconst buffer = new EShapeBuffer( this.getBufferSize(), renderer, shader );\n\t\t\tif( buffer.update( iterator, antialiasWeight ) ) {\n\t\t\t\tbuffers.push( buffer );\n\t\t\t} else {\n\t\t\t\tbuffer.destroy();\n\n\t\t\t\t// Again, increase the buffer size;\n\t\t\t\tif( ! this.increaseBufferSize() ) {\n\t\t\t\t\t// No way to render\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, IPoint, Point, Renderer } from \"pixi.js\";\nimport { DApplications } from \"../d-applications\";\nimport { DynamicAtlas } from \"../util/dynamic-atlas\";\nimport { DynamicSDFFontAtlases } from \"../util/dynamic-sdf-font-atlases\";\nimport { EShape } from \"./e-shape\";\nimport { EShapeBuffer } from \"./e-shape-buffer\";\nimport \"./e-shape-renderer\";\nimport { EShapeRenderer } from \"./e-shape-renderer\";\n\nexport class EShapeContainer extends DisplayObject {\n\tstatic SHAPE_RENDERER: EShapeRenderer | null = null;\n\n\treadonly children: EShape[];\n\tprotected _childrenId: number;\n\tprotected _childrenIdRendered: number;\n\n\tprotected _atlas: DynamicAtlas | null;\n\tprotected _fontAtlases: DynamicSDFFontAtlases;\n\n\tprotected _pixelScale: number;\n\tprotected _pixelScaleId: number;\n\n\tprotected _work: Point;\n\n\tprotected _buffers: EShapeBuffer[];\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.children = [];\n\n\t\tthis._childrenId = 0;\n\t\tthis._childrenIdRendered = -1;\n\n\t\tthis._atlas = null;\n\t\tthis._fontAtlases = new DynamicSDFFontAtlases();\n\n\t\tthis._pixelScale = 1;\n\t\tthis._pixelScaleId = NaN;\n\n\t\tthis._work = new Point();\n\n\t\tthis._buffers = [];\n\t}\n\n\tcalculateBounds(): void {\n\t\tthis._bounds.clear();\n\t}\n\n\tonChildTransformChange(): void {\n\t\t// DO NOTHING\n\t}\n\n\ttoDirty(): number {\n\t\treturn this._childrenId += 1;\n\t}\n\n\tisDirty(): boolean {\n\t\treturn this._childrenIdRendered < this._childrenId;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tif( !this.visible || this.worldAlpha <= 0 || !this.renderable ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst childrenId = this._childrenId;\n\t\tconst childrenIdRendered = this._childrenIdRendered;\n\t\tthis._childrenIdRendered = childrenId;\n\n\t\tlet shapeRenderer: EShapeRenderer | null = EShapeContainer.SHAPE_RENDERER;\n\t\tif( shapeRenderer == null ) {\n\t\t\tshapeRenderer = EShapeContainer.SHAPE_RENDERER = new EShapeRenderer( renderer );\n\t\t}\n\t\trenderer.batch.setObjectRenderer( shapeRenderer );\n\t\tshapeRenderer.render_( this, this.children, childrenIdRendered < childrenId );\n\t}\n\n\tcontainsPoint( point: Point ): boolean {\n\t\treturn false;\n\t}\n\n\tgetFontAtlases(): DynamicSDFFontAtlases {\n\t\treturn this._fontAtlases;\n\t}\n\n\tgetAtlas( resolution: number ): DynamicAtlas {\n\t\tlet atlas = this._atlas;\n\t\tif( atlas == null ) {\n\t\t\tatlas = new DynamicAtlas( resolution );\n\t\t\tthis._atlas = atlas;\n\t\t}\n\t\treturn atlas;\n\t}\n\n\tgetBuffers(): EShapeBuffer[] {\n\t\treturn this._buffers;\n\t}\n\n\tgetPixelScale( resolution: number ): number {\n\t\tthis.updateTransform();\n\t\tconst transform = this.transform;\n\t\tconst worldID = (transform as any)._worldID;\n\t\tif( worldID !== this._pixelScaleId ) {\n\t\t\tthis._pixelScaleId = worldID;\n\t\t\tconst worldTransform = transform.worldTransform;\n\t\t\tconst a = worldTransform.a;\n\t\t\tconst b = worldTransform.b;\n\t\t\tconst scale = Math.sqrt( a * a + b * b );\n\t\t\tthis._pixelScale = 1 / ( resolution * scale );\n\t\t}\n\t\treturn this._pixelScale;\n\t}\n\n\tgetAntialiasWeight( resolution: number ): number {\n\t\treturn 1.25 / resolution;\n\t}\n\n\thitTest( global: IPoint, handler?: ( shape: EShape ) => boolean ): EShape | null {\n\t\tconst work = this._work;\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.visible ) {\n\t\t\t\tconst childLocal = child.toLocal( global, undefined, work );\n\t\t\t\tconst childResult = child.contains( childLocal );\n\t\t\t\tif( childResult != null ) {\n\t\t\t\t\tif( handler == null || handler( childResult ) ) {\n\t\t\t\t\t\treturn childResult;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\thitTestBBox( global: IPoint, handler?: ( shape: EShape ) => boolean ): EShape | null {\n\t\tconst work = this._work;\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.visible ) {\n\t\t\t\tconst childLocal = child.toLocal( global, undefined, work );\n\t\t\t\tif( child.containsBBox( childLocal ) ) {\n\t\t\t\t\tif( handler == null || handler( child ) ) {\n\t\t\t\t\t\treturn child;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tdestroy(): void {\n\t\t// Buffer\n\t\tconst buffers = this._buffers;\n\t\tif( buffers != null ) {\n\t\t\tfor( let i = 0, imax = buffers.length; i < imax; ++i ) {\n\t\t\t\tbuffers[ i ].destroy();\n\t\t\t}\n\t\t}\n\t\tthis._buffers.length = 0;\n\n\t\t// Shapes\n\t\tconst children = this.children;\n\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\tchildren[ i ].destroy();\n\t\t}\n\t\tchildren.length = 0;\n\n\t\t//\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeContainer } from \"./e-shape-container\";\nimport { EShapeType } from \"./e-shape-type\";\nimport { EShapeBase } from \"./variant/e-shape-base\";\n\nexport class EShapeSearch {\n\tstatic COMPARATOR_INDEX = ( a: EShape, b: EShape ): number => {\n\t\treturn a.index - b.index;\n\t}\n\n\tstatic toIndices( shapes: EShape[] ): number[] {\n\t\tconst result = [];\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tresult.push( shapes[ i ].index );\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic toDepth( shape: EShape ): number {\n\t\tlet result = 0;\n\t\tlet parent = shape.parent;\n\t\twhile( parent instanceof EShapeBase ) {\n\t\t\tresult += 1;\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic toSharedParent( first: EShape, shape: EShape ): EShape | EShapeContainer {\n\t\tconst depthA = this.toDepth( first );\n\t\tconst depthB = this.toDepth( shape );\n\t\tif( depthA < depthB ) {\n\t\t\tlet parent = first.parent;\n\t\t\twhile( parent instanceof EShapeBase ) {\n\t\t\t\tif( this.isParent( shape, parent ) ) {\n\t\t\t\t\treturn parent;\n\t\t\t\t}\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t\treturn parent!;\n\t\t} else {\n\t\t\tlet parent = shape.parent;\n\t\t\twhile( parent instanceof EShapeBase ) {\n\t\t\t\tif( this.isParent( first, parent ) ) {\n\t\t\t\t\treturn parent;\n\t\t\t\t}\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t\treturn parent!;\n\t\t}\n\t}\n\n\tstatic toOfParent( shape: EShape, parent: EShape | EShapeContainer ) {\n\t\tlet shapeParent = shape.parent;\n\t\twhile( shapeParent !== parent && shapeParent instanceof EShapeBase ) {\n\t\t\tshape = shapeParent;\n\t\t\tshapeParent = shapeParent.parent;\n\t\t}\n\t\treturn shape;\n\t}\n\n\tstatic isParent( shape: EShape, target: EShape | null ): boolean {\n\t\tlet parent = shape.parent;\n\t\twhile( parent instanceof EShapeBase ) {\n\t\t\tif( parent === target ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic toSelected( shape: EShape ): EShape | null {\n\t\tlet target: EShape | EShapeContainer | null = shape;\n\t\twhile( target instanceof EShapeBase ) {\n\t\t\tif( target.selected ) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t\ttarget = target.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic findChildById( shape: { children: EShape[] }, id: string, recursively?: boolean ): EShape | null {\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.id === id ) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tconst result = EShapeSearch.findChildById( child, id, recursively );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic findChildByType( shape: { children: EShape[] }, type: EShapeType, recursively?: boolean ): EShape | null {\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.type === type ) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tconst result = EShapeSearch.findChildByType( child, type, recursively );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic findChild(\n\t\tshape: { children: EShape[] }, matcher: ( shape: EShape ) => boolean, recursively?: boolean\n\t): EShape | null {\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( matcher( child ) ) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tconst result = EShapeSearch.findChild( child, matcher, recursively );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic findChildrenByType(\n\t\tshape: { children: EShape[] }, type: EShapeType, recursively?: boolean, result?: EShape[]\n\t): EShape[] {\n\t\tresult = result || [];\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.type === type ) {\n\t\t\t\tresult.push( child );\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tEShapeSearch.findChildrenByType( child, type, recursively, result );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic findChildren(\n\t\tshape: { children: EShape[] }, matcher: ( shape: EShape ) => boolean, recursively?: boolean, result?: EShape[]\n\t): EShape[] {\n\t\tresult = result || [];\n\t\tconst children = shape.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( matcher( child ) ) {\n\t\t\t\tresult.push( child );\n\t\t\t}\n\t\t\tif( recursively === true ) {\n\t\t\t\tEShapeSearch.findChildren( child, matcher, recursively, result );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeContainer } from \"./e-shape-container\";\nimport { EShapeSearch } from \"./e-shape-search\";\n\nexport class EShapeDeleter {\n\tstatic delete(\n\t\tparent: EShape | EShapeContainer, shapes?: EShape[], generateListOfDetachedShapes?: boolean\n\t): EShape[] | null {\n\t\tconst children = parent.children;\n\t\tconst length = children.length;\n\n\t\t// Update indices\n\t\tfor( let i = 0; i < length; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child.selected ) {\n\t\t\t\tchild.index = length + i;\n\t\t\t} else {\n\t\t\t\tchild.index = i;\n\t\t\t}\n\t\t}\n\n\t\t// Sort\n\t\tchildren.sort( EShapeSearch.COMPARATOR_INDEX );\n\n\t\t// Detach\n\t\tif( generateListOfDetachedShapes === true ) {\n\t\t\tfor( let i = length - 1; 0 <= i; --i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.selected ) {\n\t\t\t\t\tchild.index -= length;\n\t\t\t\t\tchild.parent = null;\n\t\t\t\t\tchild.selected = false;\n\t\t\t\t\tchild.uploaded = undefined;\n\t\t\t\t} else {\n\t\t\t\t\tconst size = children.length - (i + 1);\n\t\t\t\t\tif( 0 < size ) {\n\t\t\t\t\t\tconst result = children.splice( i + 1, size );\n\t\t\t\t\t\tif( shapes != null ) {\n\t\t\t\t\t\t\tshapes.length = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparent.onChildTransformChange();\n\t\t\t\t\t\tparent.toDirty();\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif( shapes != null ) {\n\t\t\t\t\t\t\tshapes.length = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tconst result = children.splice( 0, children.length );\n\t\t\t\tif( shapes != null ) {\n\t\t\t\t\tshapes.length = 0;\n\t\t\t\t}\n\t\t\t\tparent.onChildTransformChange();\n\t\t\t\tparent.toDirty();\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\tif( shapes != null ) {\n\t\t\t\t\tshapes.length = 0;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\tfor( let i = length - 1; 0 <= i; --i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child.selected ) {\n\t\t\t\t\tchild.parent = null;\n\t\t\t\t\tchild.selected = false;\n\t\t\t\t\tchild.uploaded = undefined;\n\t\t\t\t} else {\n\t\t\t\t\tchildren.length = i + 1;\n\t\t\t\t\tif( shapes != null ) {\n\t\t\t\t\t\tshapes.length = 0;\n\t\t\t\t\t}\n\t\t\t\t\tparent.onChildTransformChange();\n\t\t\t\t\tparent.toDirty();\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tchildren.length = 0;\n\t\t\t\tif( shapes != null ) {\n\t\t\t\t\tshapes.length = 0;\n\t\t\t\t}\n\t\t\t\tparent.onChildTransformChange();\n\t\t\t\tparent.toDirty();\n\t\t\t} else {\n\t\t\t\tif( shapes != null ) {\n\t\t\t\t\tshapes.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class EShapeResourceManagerSerialization {\n\tprotected resources: string[];\n\tprotected resourceToIndex: Map<string, number>;\n\n\tconstructor() {\n\t\tthis.resources = [];\n\t\tthis.resourceToIndex = new Map<string, number>();\n\t}\n\n\tadd( resource: string ): number {\n\t\tconst resources = this.resources;\n\t\tconst resourceToIndex = this.resourceToIndex;\n\t\tconst result = resourceToIndex.get( resource );\n\t\tif( result != null ) {\n\t\t\treturn result;\n\t\t}\n\t\tconst index = resources.length;\n\t\tresources.push( resource );\n\t\tresourceToIndex.set( resource, index );\n\t\treturn index;\n\t}\n\n\tserialize(): string[] {\n\t\treturn this.resources;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { EShape } from \"./e-shape\";\nimport { EShapeRuntime } from \"./e-shape-runtime\";\n\nexport const EShapeRuntimes: {\n\t[ type: number ]: (new ( shape: EShape ) => EShapeRuntime) | undefined\n} = {};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisPosition, DChartAxisTickPosition } from \"../../d-chart-axis\";\nimport { DThemeChartAxisBase } from \"../../d-chart-axis-base-options\";\nimport { EShapePointsStyle } from \"../../shape\";\nimport { EShapeTextAlignHorizontal } from \"../../shape/e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"../../shape/e-shape-text-align-vertical\";\nimport { EShapeTextDirection } from \"../../shape/e-shape-text-direction\";\n\nexport class DThemeWhiteChartAxisBase implements DThemeChartAxisBase {\n\tgetPosition(): DChartAxisPosition {\n\t\treturn DChartAxisPosition.BOTTOM;\n\t}\n\n\tgetPadding(): number {\n\t\treturn 75;\n\t}\n\n\tgetLabelAlignHorizontal( position: DChartAxisPosition ): EShapeTextAlignHorizontal {\n\t\tswitch( position ) {\n\t\tcase DChartAxisPosition.TOP:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase DChartAxisPosition.LEFT:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n\t\tcase DChartAxisPosition.RIGHT:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_RIGHT;\n\t\t}\n\t}\n\n\tgetLabelAlignVertical( position: DChartAxisPosition ): EShapeTextAlignVertical {\n\t\tswitch( position ) {\n\t\tcase DChartAxisPosition.TOP:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_TOP;\n\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n\t\tcase DChartAxisPosition.LEFT:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\tcase DChartAxisPosition.RIGHT:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\t}\n\t}\n\n\tgetLabelPaddingHorizontal(): number {\n\t\treturn 50;\n\t}\n\n\tgetLabelPaddingVertical(): number {\n\t\treturn 50;\n\t}\n\n\tgetLabelDirection(): EShapeTextDirection {\n\t\treturn EShapeTextDirection.LEFT_TO_RIGHT;\n\t}\n\n\tgetTickEnable(): boolean {\n\t\treturn true;\n\t}\n\n\tgetMajorTickCount(): number {\n\t\treturn 3;\n\t}\n\n\tgetMajorTickSize(): number {\n\t\treturn 10;\n\t}\n\n\tgetMajorTickPosition(): DChartAxisTickPosition {\n\t\treturn DChartAxisTickPosition.OUTSIDE;\n\t}\n\n\tgetMajorTickStyle(): EShapePointsStyle {\n\t\treturn EShapePointsStyle.NONE;\n\t}\n\n\tgetMajorTickTextAlignHorizontal( position: DChartAxisPosition ): EShapeTextAlignHorizontal {\n\t\tswitch( position ) {\n\t\tcase DChartAxisPosition.TOP:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\treturn EShapeTextAlignHorizontal.CENTER;\n\t\tcase DChartAxisPosition.LEFT:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n\t\tcase DChartAxisPosition.RIGHT:\n\t\t\treturn EShapeTextAlignHorizontal.OUTSIDE_RIGHT;\n\t\t}\n\t}\n\n\tgetMajorTickTextAlignVertical( position: DChartAxisPosition ): EShapeTextAlignVertical {\n\t\tswitch( position ) {\n\t\tcase DChartAxisPosition.TOP:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_TOP;\n\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\treturn EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n\t\tcase DChartAxisPosition.LEFT:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\tcase DChartAxisPosition.RIGHT:\n\t\t\treturn EShapeTextAlignVertical.MIDDLE;\n\t\t}\n\t}\n\n\tgetMajorTickTextDirection(): EShapeTextDirection {\n\t\treturn EShapeTextDirection.LEFT_TO_RIGHT;\n\t}\n\n\tgetMajorTickTextFormat(): string {\n\t\treturn \"%YMD\\n%Hms.%mi\";\n\t}\n\n\tgetMajorTickTextPaddingHorizontal(): number {\n\t\treturn 15;\n\t}\n\n\tgetMajorTickTextPaddingVertical(): number {\n\t\treturn 15;\n\t}\n\n\tgetMinorTickCount(): number {\n\t\treturn 3;\n\t}\n\n\tgetMinorTickSize(): number {\n\t\treturn 5;\n\t}\n\n\tgetMinorTickPosition(): DChartAxisTickPosition {\n\t\treturn DChartAxisTickPosition.OUTSIDE;\n\t}\n\n\tgetMinorTickStyle(): EShapePointsStyle {\n\t\treturn EShapePointsStyle.NONE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteChartAxisBase } from \"./d-theme-white-chart-axis-base\";\n\nexport class DThemeWhiteChartAxisX extends DThemeWhiteChartAxisBase {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisPosition } from \"../../d-chart-axis\";\nimport { EShapeTextDirection } from \"../../shape/e-shape-text-direction\";\nimport { DThemeWhiteChartAxisBase } from \"./d-theme-white-chart-axis-base\";\n\nexport class DThemeWhiteChartAxisY extends DThemeWhiteChartAxisBase {\n\tgetPosition(): DChartAxisPosition {\n\t\treturn DChartAxisPosition.LEFT;\n\t}\n\n\tgetMajorTickTextFormat(): string {\n\t\treturn \"%ssi\";\n\t}\n\n\tgetLabelDirection(): EShapeTextDirection {\n\t\treturn EShapeTextDirection.BOTTOM_TO_TOP;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeChartCoordinateLinear } from \"../../d-chart-coordinate-linear\";\n\nexport class DThemeWhiteChartCoordinateLinear implements DThemeChartCoordinateLinear {\n\tgetPadding(): number {\n\t\treturn 10;\n\t}\n\n\tisZero( value: number ): boolean {\n\t\treturn Math.abs( value ) < 0.00001;\n\t}\n\n\ttoStepScale( scale: number ): number {\n\t\tif( 5.5 <= scale ) {\n\t\t\treturn 10;\n\t\t} else if( 2.2 <= scale ) {\n\t\t\treturn 5;\n\t\t} else if( 1.1 <= scale ) {\n\t\t\treturn 2;\n\t\t}\n\t\treturn 1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramBase } from \"../../d-diagram-base\";\nimport { DThemeWhiteCanvasContainer } from \"./d-theme-white-canvas-container\";\n\nexport class DThemeWhiteDiagramBase extends DThemeWhiteCanvasContainer implements DThemeDiagramBase {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagram } from \"../../d-diagram\";\nimport { DThemeWhiteDiagramBase } from \"./d-theme-white-diagram-base\";\n\nexport class DThemeWhiteDiagram extends DThemeWhiteDiagramBase implements DThemeDiagram {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramCanvasBase } from \"../../d-diagram-canvas-base\";\nimport { DThemeWhiteCanvas } from \"./d-theme-white-canvas\";\n\nexport class DThemeWhiteDiagramCanvasBase extends DThemeWhiteCanvas implements DThemeDiagramCanvasBase {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramCanvas } from \"../../d-diagram-canvas\";\nimport { DThemeWhiteDiagramCanvasBase } from \"./d-theme-white-diagram-canvas-base\";\n\nexport class DThemeWhiteDiagramCanvas extends DThemeWhiteDiagramCanvasBase implements DThemeDiagramCanvas {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDiagram } from \"../theme/white/d-theme-white-diagram\";\nimport { DThemeWhiteDiagramCanvas } from \"../theme/white/d-theme-white-diagram-canvas\";\n\nexport const loadThemeWhiteDiagram = () => {\n\tDThemeWhite.set( \"DDiagram\", DThemeWhiteDiagram );\n\tDThemeWhite.set( \"DDiagramCanvas\", DThemeWhiteDiagramCanvas );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramCanvasEditor } from \"../../d-diagram-canvas-editor\";\nimport { DThemeWhiteDiagramCanvasBase } from \"./d-theme-white-diagram-canvas-base\";\n\nexport class DThemeWhiteDiagramCanvasEditor extends DThemeWhiteDiagramCanvasBase implements DThemeDiagramCanvasEditor {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDiagramEditor } from \"../../d-diagram-editor\";\nimport { DMouseModifier } from \"../../d-mouse-modifier\";\nimport { DThemeWhiteDiagramBase } from \"./d-theme-white-diagram-base\";\n\nexport class DThemeWhiteDiagramEditor extends DThemeWhiteDiagramBase implements DThemeDiagramEditor {\n\tgetDragModifier(): DMouseModifier {\n\t\treturn DMouseModifier.ALT;\n\t}\n}\n","import { EShapeActionValue, EThemeShapeActionValue } from \"../../shape/action/e-shape-action-value\";\nimport { EShapeActionValueBase } from \"../../shape/action/e-shape-action-value-base\";\nimport { EShapeActionValueBlinkType } from \"../../shape/action/e-shape-action-value-blink-type\";\nimport {\n\tEShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType\n} from \"../../shape/action/e-shape-action-value-change-color-type\";\nimport { EShapeActionValueChangeTextType } from \"../../shape/action/e-shape-action-value-change-text-type\";\nimport { EShapeActionValueMiscType } from \"../../shape/action/e-shape-action-value-misc-type\";\nimport { EShapeActionValueOpenType } from \"../../shape/action/e-shape-action-value-open-type\";\nimport { EShapeActionValueOpetyped } from \"../../shape/action/e-shape-action-value-opetyped\";\nimport { EShapeActionValueShowHideType } from \"../../shape/action/e-shape-action-value-show-hide-type\";\nimport { EShapeActionValueSubtyped } from \"../../shape/action/e-shape-action-value-subtyped\";\nimport { EShapeActionValueTransformMoveType } from \"../../shape/action/e-shape-action-value-transform-move-type\";\nimport { EShapeActionValueTransformResizeType } from \"../../shape/action/e-shape-action-value-transform-resize-type\";\nimport { EShapeActionValueTransformRotateType } from \"../../shape/action/e-shape-action-value-transform-rotate-type\";\nimport { EShapeActionValueTransformType } from \"../../shape/action/e-shape-action-value-transform-type\";\nimport { EShapeActionValueType } from \"../../shape/action/e-shape-action-value-type\";\n\nexport class EThemeWhiteShapeActionValue implements EThemeShapeActionValue {\n\ttoLabel( value: EShapeActionValue ): string {\n\t\tconst type = value.type;\n\t\tif( value instanceof EShapeActionValueSubtyped ) {\n\t\t\tconst subtype = value.subtype;\n\t\t\tif( value instanceof EShapeActionValueOpetyped ) {\n\t\t\t\tconst result = this.toOpetypedLabel( type, subtype, value.opetype, value );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst result = this.toSubtypedLabel( type, subtype, value );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.toTypedLabel( type, value );\n\t}\n\n\tprotected toTypedLabel( type: EShapeActionValueType, value: EShapeActionValueBase ): string {\n\t\treturn `${this.toTypeLabel( type )}: ${this.toConditionLabel( value.condition )}`;\n\t}\n\n\tprotected toSubtypedLabel(\n\t\ttype: EShapeActionValueType, subtype: number, value: EShapeActionValueSubtyped<any>\n\t): string | null {\n\t\tconst typeLabel = this.toTypeLabel( type );\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueType.SHOW_HIDE:\n\t\t\treturn `${this.toShowHideTypeLabel( subtype )}`;\n\t\tcase EShapeActionValueType.BLINK:\n\t\t\treturn `${typeLabel}: ${this.toBlinkTypeLabel( subtype )}`;\n\t\tcase EShapeActionValueType.CHANGE_COLOR:\n\t\t\treturn `${typeLabel}: ${this.toChangeColorTypeLabel( subtype )}`;\n\t\tcase EShapeActionValueType.MISC:\n\t\t\treturn `${typeLabel}: ${this.toMiscTypeLabel( subtype )}`;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected toOpetypedLabel(\n\t\ttype: EShapeActionValueType, subtype: number, opetype: number, value: EShapeActionValueOpetyped<any, any>\n\t): string | null {\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueType.TRANSFORM:\n\t\t\tconst subtypeLabel = this.toTransformTypeLabel( subtype );\n\t\t\tswitch( subtype ) {\n\t\t\tcase EShapeActionValueTransformType.ROTATE:\n\t\t\t\treturn `${subtypeLabel}: ${this.toTransformRotateTypeLabel( opetype )}`;\n\t\t\tcase EShapeActionValueTransformType.MOVE:\n\t\t\t\treturn `${subtypeLabel}: ${this.toTransformMoveTypeLabel( opetype )}`;\n\t\t\tcase EShapeActionValueTransformType.RESIZE:\n\t\t\t\treturn `${subtypeLabel}: ${this.toTransformResizeTypeLabel( opetype )}`;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\ttoTypeLabel( type: EShapeActionValueType ): string {\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueType.SHOW_HIDE:\n\t\t\treturn \"Show / hide\";\n\t\tcase EShapeActionValueType.BLINK:\n\t\t\treturn \"Blink\";\n\t\tcase EShapeActionValueType.TRANSFORM:\n\t\t\treturn \"Transform\";\n\t\tcase EShapeActionValueType.OPEN:\n\t\t\treturn \"Open\";\n\t\tcase EShapeActionValueType.CHANGE_COLOR:\n\t\t\treturn \"Change color\";\n\t\tcase EShapeActionValueType.CHANGE_TEXT:\n\t\t\treturn \"Change text\";\n\t\tcase EShapeActionValueType.CHANGE_CURSOR:\n\t\t\treturn \"Change cursor\";\n\t\tcase EShapeActionValueType.EMIT_EVENT:\n\t\t\treturn \"Emit an event\";\n\t\tcase EShapeActionValueType.MISC:\n\t\t\treturn \"Misc.\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoConditionLabel( condition: string ): string {\n\t\tconst l = 20;\n\t\tif( l < condition.length ) {\n\t\t\treturn condition.substring( 0, l ) + \"...\";\n\t\t} else {\n\t\t\treturn condition;\n\t\t}\n\t}\n\n\ttoBlinkTypeLabel( type: EShapeActionValueBlinkType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueBlinkType.VISIBILITY:\n\t\t\treturn \"Visibility\";\n\t\tcase EShapeActionValueBlinkType.BRIGHTEN:\n\t\t\treturn \"Brighten\";\n\t\tcase EShapeActionValueBlinkType.DARKEN:\n\t\t\treturn \"Darken\";\n\t\tcase EShapeActionValueBlinkType.OPACITY:\n\t\t\treturn \"Opacity\";\n\t\tcase EShapeActionValueBlinkType.COLOR_FILL:\n\t\t\treturn \"Fill\";\n\t\tcase EShapeActionValueBlinkType.COLOR_STROKE:\n\t\t\treturn \"Stroke\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoShowHideTypeLabel( type: EShapeActionValueShowHideType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueShowHideType.SHOW:\n\t\t\treturn \"Show\";\n\t\tcase EShapeActionValueShowHideType.HIDE:\n\t\t\treturn \"Hide\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoTransformTypeLabel( type: EShapeActionValueTransformType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueTransformType.RESIZE:\n\t\t\treturn \"Resize\";\n\t\tcase EShapeActionValueTransformType.MOVE:\n\t\t\treturn \"Move\";\n\t\tcase EShapeActionValueTransformType.ROTATE:\n\t\t\treturn \"Rotate\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoTransformRotateTypeLabel( type: EShapeActionValueTransformRotateType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueTransformRotateType.RELATIVE:\n\t\t\treturn \"Relative\";\n\t\tcase EShapeActionValueTransformRotateType.ABSOLUTE:\n\t\t\treturn \"Absolute\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoTransformMoveTypeLabel( type: EShapeActionValueTransformMoveType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueTransformMoveType.RELATIVE_X:\n\t\t\treturn \"Relative X\";\n\t\tcase EShapeActionValueTransformMoveType.RELATIVE_Y:\n\t\t\treturn \"Relative Y\";\n\t\tcase EShapeActionValueTransformMoveType.ABSOLUTE_X:\n\t\t\treturn \"Absolute X\";\n\t\tcase EShapeActionValueTransformMoveType.ABSOLUTE_Y:\n\t\t\treturn \"Absolute Y\";\n\t\tcase EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD:\n\t\t\treturn \"Forward / backward\";\n\t\tcase EShapeActionValueTransformMoveType.LEFT_OR_RIGHT:\n\t\t\treturn \"Left / right\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoTransformResizeTypeLabel( type: EShapeActionValueTransformResizeType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_SIZE:\n\t\t\treturn \"Height & width\";\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_SIZE:\n\t\t\treturn \"Height & width (%)\";\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT:\n\t\t\treturn \"Height\";\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_HEIGHT:\n\t\t\treturn \"Height (%)\";\n\t\tcase EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH:\n\t\t\treturn \"Width\";\n\t\tcase EShapeActionValueTransformResizeType.RELATIVE_WIDTH:\n\t\t\treturn \"Width (%)\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoChangeColorTypeLabel( type: EShapeActionValueChangeColorType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueChangeColorType.FILL:\n\t\t\treturn \"Fill\";\n\t\tcase EShapeActionValueChangeColorType.STROKE:\n\t\t\treturn \"Stroke\";\n\t\tcase EShapeActionValueChangeColorType.FILL_AND_STROKE:\n\t\t\treturn \"Fill and stroke\";\n\t\tcase EShapeActionValueChangeColorType.TEXT:\n\t\t\treturn \"Text\";\n\t\tcase EShapeActionValueChangeColorType.TEXT_OUTLINE:\n\t\t\treturn \"Text outline\";\n\t\tcase EShapeActionValueChangeColorType.ALL:\n\t\t\treturn \"ALL\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoChangeColorTargetLabel( type: EShapeActionValueChangeColorTarget ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA:\n\t\t\treturn \"Color\";\n\t\tcase EShapeActionValueChangeColorTarget.COLOR:\n\t\t\treturn \"RGB\";\n\t\tcase EShapeActionValueChangeColorTarget.ALPHA:\n\t\t\treturn \"Alpha\";\n\t\tcase EShapeActionValueChangeColorTarget.CODE:\n\t\t\treturn \"Dynamic color\";\n\t\tcase EShapeActionValueChangeColorTarget.BRIGHTNESS:\n\t\t\treturn \"Brightness\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoChangeTextTypeLabel( type: EShapeActionValueChangeTextType ): string {\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueChangeTextType.TEXT:\n\t\t\treturn \"Text\";\n\t\tcase EShapeActionValueChangeTextType.NUMBER:\n\t\t\treturn \"Number\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoOpenTypeLabel( type: EShapeActionValueOpenType ): string {\n\t\tswitch (type) {\n\t\tcase EShapeActionValueOpenType.FLOW:\n\t\t\treturn \"Flow\";\n\t\tcase EShapeActionValueOpenType.PAGE:\n\t\t\treturn \"Page (New window)\";\n\t\tcase EShapeActionValueOpenType.PAGE_INPLACE:\n\t\t\treturn \"Page (In-place)\";\n\t\t}\n\t\treturn \"Unknown\";\n\t}\n\n\ttoMiscTypeLabel( type: EShapeActionValueMiscType ): string {\n\t\tswitch( type ) {\n\t\tcase EShapeActionValueMiscType.INPUT:\n\t\t\treturn \"Input\";\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { EThemeWhiteShapeActionValue } from \"../theme/white/e-theme-white-shape-action-value\";\n\nexport const loadThemeWhiteShapeActionValue = () => {\n\tDThemeWhite.set( \"EShapeActionValue\", EThemeWhiteShapeActionValue );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDiagramCanvasEditor } from \"../theme/white/d-theme-white-diagram-canvas-editor\";\nimport { DThemeWhiteDiagramEditor } from \"../theme/white/d-theme-white-diagram-editor\";\nimport { loadThemeWhiteShapeActionValue } from \"./load-theme-white-shape-action-value\";\n\nexport const loadThemeWhiteDiagramEditor = () => {\n\tDThemeWhite.set( \"DDiagramEditor\", DThemeWhiteDiagramEditor );\n\tDThemeWhite.set( \"DDiagramCanvasEditor\", DThemeWhiteDiagramCanvasEditor );\n\tloadThemeWhiteShapeActionValue();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialog } from \"../theme/white/d-theme-white-dialog\";\n\nexport const loadThemeWhiteDialog = () => {\n\tDThemeWhite.set( \"DDialog\", DThemeWhiteDialog );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogCommand } from \"../theme/white/d-theme-white-dialog-command\";\n\nexport const loadThemeWhiteDialogCommand = () => {\n\tDThemeWhite.set( \"DDialogCommand\", DThemeWhiteDialogCommand );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDialogConfirm } from \"../../d-dialog-confirm\";\nimport { DStateAwareOrValue } from \"../../d-state-aware\";\nimport { DThemeWhiteDialogCommand } from \"./d-theme-white-dialog-command\";\n\nexport class DThemeWhiteDialogConfirm extends DThemeWhiteDialogCommand implements DThemeDialogConfirm {\n\tgetOk(): string | null {\n\t\treturn \"Yes\";\n\t}\n\n\tgetCancel(): string | null {\n\t\treturn \"No\";\n\t}\n\n\tgetMessage(): DStateAwareOrValue<string> {\n\t\treturn \"\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeImage } from \"../../d-image\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\n\nexport class DThemeWhiteImage extends DThemeWhiteImageBase implements DThemeImage {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogConfirmMessage } from \"../../d-dialog-confirm-message\";\nimport { DThemeWhiteImage } from \"./d-theme-white-image\";\n\nexport class DThemeWhiteDialogConfirmMessage extends DThemeWhiteImage implements DThemeDialogConfirmMessage {\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetHeight(): number {\n\t\treturn 200;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogConfirm } from \"../theme/white/d-theme-white-dialog-confirm\";\nimport { DThemeWhiteDialogConfirmMessage } from \"../theme/white/d-theme-white-dialog-confirm-message\";\n\nexport const loadThemeWhiteDialogConfirm = () => {\n\tDThemeWhite.set( \"DDialogConfirm\", DThemeWhiteDialogConfirm );\n\tDThemeWhite.set( \"DDialogConfirmMessage\", DThemeWhiteDialogConfirmMessage );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DStateAwareOrValue } from \"../../d-state-aware\";\nimport { DThemeWhiteDialogConfirm } from \"./d-theme-white-dialog-confirm\";\n\nexport class DThemeWhiteDialogConfirmDelete extends DThemeWhiteDialogConfirm {\n\tgetMessage(): DStateAwareOrValue<string> {\n\t\treturn \"Are you sure you want to delete this data?\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogConfirmDelete } from \"../theme/white/d-theme-white-dialog-confirm-delete\";\n\nexport const loadThemeWhiteDialogConfirmDelete = () => {\n\tDThemeWhite.set( \"DDialogConfirmDelete\", DThemeWhiteDialogConfirmDelete );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DStateAwareOrValue } from \"../../d-state-aware\";\nimport { DThemeWhiteDialogConfirm } from \"./d-theme-white-dialog-confirm\";\n\nexport class DThemeWhiteDialogConfirmDiscard extends DThemeWhiteDialogConfirm {\n\tgetMessage(): DStateAwareOrValue<string> {\n\t\treturn \"Your changes have not been saved.\\n\" +\n\t\t\t\"Do you want to discard the changes and continue?\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogConfirmDiscard } from \"../theme/white/d-theme-white-dialog-confirm-discard\";\n\nexport const loadThemeWhiteDialogConfirmDiscard = () => {\n\tDThemeWhite.set( \"DDialogConfirmDiscard\", DThemeWhiteDialogConfirmDiscard );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeDialogInputText } from \"../../d-dialog-input-text\";\nimport { DThemeWhiteDialog } from \"./d-theme-white-dialog\";\n\nexport class DThemeWhiteDialogInputText extends DThemeWhiteDialog implements DThemeDialogInputText {\n\tgetOk(): string {\n\t\treturn \"OK\";\n\t}\n\n\tgetCancel(): string {\n\t\treturn \"Cancel\";\n\t}\n\n\tgetLabel(): string {\n\t\treturn \"\";\n\t}\n\n\tgetLabelWidth(): number {\n\t\treturn 60;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogInputText } from \"../theme/white/d-theme-white-dialog-input-text\";\n\nexport const loadThemeWhiteDialogInputText = () => {\n\tDThemeWhite.set( \"DDialogInputText\", DThemeWhiteDialogInputText );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDialogMessage } from \"../../d-dialog-message\";\nimport { DThemeWhiteDialogConfirm } from \"./d-theme-white-dialog-confirm\";\n\nexport class DThemeWhiteDialogMessage extends DThemeWhiteDialogConfirm implements DThemeDialogMessage {\n\tgetOk(): string | null {\n\t\treturn \"OK\";\n\t}\n\n\tgetCancel(): string | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogMessage } from \"../theme/white/d-theme-white-dialog-message\";\n\nexport const loadThemeWhiteDialogMessage = () => {\n\tDThemeWhite.set( \"DDialogMessage\", DThemeWhiteDialogMessage );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeDialogProcessing } from \"../../d-dialog-processing\";\nimport { DStateAwareOrValue } from \"../../d-state-aware\";\nimport { DThemeWhiteDialogConfirm } from \"./d-theme-white-dialog-confirm\";\n\nconst message = ( state: DBaseState ): string => {\n\tif( DBaseStates.isSucceeded( state ) ) {\n\t\treturn \"Processed successfully\";\n\t} else if( DBaseStates.isFailed( state ) ) {\n\t\treturn \"Failed to process the request\";\n\t} else {\n\t\treturn \"Processing...\";\n\t}\n};\n\nexport class DThemeWhiteDialogProcessing extends DThemeWhiteDialogConfirm implements DThemeDialogProcessing {\n\tgetOk(): string | null {\n\t\treturn \"OK\";\n\t}\n\n\tgetCancel(): string | null {\n\t\treturn null;\n\t}\n\n\tgetMessage(): DStateAwareOrValue<string> {\n\t\treturn message;\n\t}\n\n\tgetInterval(): number {\n\t\treturn 400;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteDialogConfirmMessage } from \"./d-theme-white-dialog-confirm-message\";\n\nexport class DThemeWhiteDialogProcessingMessage extends DThemeWhiteDialogConfirmMessage {\n\tgetHeight(): number {\n\t\treturn 90;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogProcessing } from \"../theme/white/d-theme-white-dialog-processing\";\nimport { DThemeWhiteDialogProcessingMessage } from \"../theme/white/d-theme-white-dialog-processing-message\";\n\nexport const loadThemeWhiteDialogProcessing = () => {\n\tDThemeWhite.set( \"DDialogProcessing\", DThemeWhiteDialogProcessing );\n\tDThemeWhite.set( \"DDialogProcessingMessage\", DThemeWhiteDialogProcessingMessage );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDialogSaveAs } from \"../../d-dialog-save-as\";\nimport { DThemeWhiteDialogInputText } from \"./d-theme-white-dialog-input-text\";\n\nexport class DThemeWhiteDialogSaveAs extends DThemeWhiteDialogInputText implements DThemeDialogSaveAs {\n\tgetOk(): string {\n\t\treturn \"Save\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogSaveAs } from \"../theme/white/d-theme-white-dialog-save-as\";\n\nexport const loadThemeWhiteDialogSaveAs = () => {\n\tDThemeWhite.set( \"DDialogSaveAs\", DThemeWhiteDialogSaveAs );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeDialogSelect } from \"../../d-dialog-select\";\nimport { DThemeWhiteDialog } from \"./d-theme-white-dialog\";\n\nexport class DThemeWhiteDialogSelect extends DThemeWhiteDialog implements DThemeDialogSelect {\n\tgetNoteNoItemsText(): string {\n\t\treturn \"No Items\";\n\t}\n\n\tgetNoteSearchingText(): string {\n\t\treturn \"Searching...\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DDragMode } from \"../../d-drag-mode\";\nimport { DThemePane } from \"../../d-pane\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhitePane extends DThemeWhiteBase implements DThemePane {\n\tisOverflowMaskEnabled() {\n\t\treturn true;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n\n\tgetWheelSpeed(): number {\n\t\treturn 2.24;\n\t}\n\n\tgetDragMode(): DDragMode {\n\t\treturn DDragMode.TOUCH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeWhitePane } from \"./d-theme-white-pane\";\n\nexport class DThemeWhiteList extends DThemeWhitePane {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn 0xffffff;\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeDialogSelecList } from \"../../d-dialog-select-list\";\nimport { DThemeWhiteList } from \"./d-theme-white-list\";\n\nexport class DThemeWhiteDialogSelectList extends DThemeWhiteList implements DThemeDialogSelecList {\n\tgetBackgroundColor(): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor(): number | null {\n\t\treturn null;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 250;\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeListItem } from \"../../d-list-item\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteImage } from \"./d-theme-white-image\";\n\nexport class DThemeWhiteListItem extends DThemeWhiteImage implements DThemeListItem {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteConstants.HIGHLIGHT_ALPHA;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeDialogSelecListItem } from \"../../d-dialog-select-list-item\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\nimport { DThemeWhiteListItem } from \"./d-theme-white-list-item\";\n\nexport class DThemeWhiteDialogSelectListItem extends DThemeWhiteListItem implements DThemeDialogSelecListItem {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn super.getBackgroundColor( state & ~DBaseState.ACTIVE );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn super.getBackgroundAlpha( state & ~DBaseState.ACTIVE );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.NONE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDialogSelect } from \"../theme/white/d-theme-white-dialog-select\";\nimport { DThemeWhiteDialogSelectList } from \"../theme/white/d-theme-white-dialog-select-list\";\nimport { DThemeWhiteDialogSelectListItem } from \"../theme/white/d-theme-white-dialog-select-list-item\";\n\nexport const loadThemeWhiteDialogSelect = () => {\n\tDThemeWhite.set( \"DDialogSelect\", DThemeWhiteDialogSelect );\n\tDThemeWhite.set( \"DDialogSelectList\", DThemeWhiteDialogSelectList );\n\tDThemeWhite.set( \"DDialogSelectListItem\", DThemeWhiteDialogSelectListItem );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadThemeWhiteDialog } from \"./load-theme-white-dialog\";\nimport { loadThemeWhiteDialogColor } from \"./load-theme-white-dialog-color\";\nimport { loadThemeWhiteDialogColorGradient } from \"./load-theme-white-dialog-color-gradient\";\nimport { loadThemeWhiteDialogCommand } from \"./load-theme-white-dialog-command\";\nimport { loadThemeWhiteDialogConfirm } from \"./load-theme-white-dialog-confirm\";\nimport { loadThemeWhiteDialogConfirmDelete } from \"./load-theme-white-dialog-confirm-delete\";\nimport { loadThemeWhiteDialogConfirmDiscard } from \"./load-theme-white-dialog-confirm-discard\";\nimport { loadThemeWhiteDialogDate } from \"./load-theme-white-dialog-date\";\nimport { loadThemeWhiteDialogDatetime } from \"./load-theme-white-dialog-datetime\";\nimport { loadThemeWhiteDialogInputText } from \"./load-theme-white-dialog-input-text\";\nimport { loadThemeWhiteDialogMessage } from \"./load-theme-white-dialog-message\";\nimport { loadThemeWhiteDialogProcessing } from \"./load-theme-white-dialog-processing\";\nimport { loadThemeWhiteDialogSaveAs } from \"./load-theme-white-dialog-save-as\";\nimport { loadThemeWhiteDialogSelect } from \"./load-theme-white-dialog-select\";\nimport { loadThemeWhiteDialogTime } from \"./load-theme-white-dialog-time\";\n\nexport const loadThemeWhiteDialogAll = () => {\n\tloadThemeWhiteDialogColorGradient();\n\tloadThemeWhiteDialogColor();\n\tloadThemeWhiteDialogCommand();\n\tloadThemeWhiteDialogConfirmDelete();\n\tloadThemeWhiteDialogConfirmDiscard();\n\tloadThemeWhiteDialogConfirm();\n\tloadThemeWhiteDialogDate();\n\tloadThemeWhiteDialogDatetime();\n\tloadThemeWhiteDialogInputText();\n\tloadThemeWhiteDialogMessage();\n\tloadThemeWhiteDialogProcessing();\n\tloadThemeWhiteDialogSaveAs();\n\tloadThemeWhiteDialogSelect();\n\tloadThemeWhiteDialogTime();\n\tloadThemeWhiteDialog();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeDropdown } from \"../../d-dropdown\";\nimport { DStateAwareOrValueMightBe } from \"../../d-state-aware\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteButtonBase } from \"./d-theme-white-button-base\";\n\nDThemeWhiteAtlas.add( \"dropdown_mark\", 20, 14,\n\t`<g>` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"16 5 10 11 4 5\"></polyline>` +\n\t`</g>`\n);\n\nexport class DThemeWhiteDropdown extends DThemeWhiteButtonBase implements DThemeDropdown {\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.PADDING;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn - this.getPaddingRight() * 0.5;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn DThemeWhiteAtlas.mappings.dropdown_mark;\n\t}\n\n\tnewTextValue(): DStateAwareOrValueMightBe<string> {\n\t\treturn \"\";\n\t}\n\n\tgetTextValue( state: DBaseState ): string {\n\t\treturn \"\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DLayoutDirection, DThemeLayout } from \"../../d-layout\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteLayout extends DThemeWhiteBase implements DThemeLayout {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 5;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.CHILDREN;\n\t}\n\n\tgetDirection(): DLayoutDirection {\n\t\treturn DLayoutDirection.VERTICAL;\n\t}\n\n\tgetCornerAdjust(): boolean {\n\t\treturn false;\n\t}\n\n\tgetMultiplicity(): number {\n\t\treturn 1;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DLayoutDirection } from \"../../d-layout\";\nimport { DThemeLayoutVertical } from \"../../d-layout-vertical\";\nimport { DThemeWhiteLayout } from \"./d-theme-white-layout\";\n\nexport class DThemeWhiteLayoutVertical extends DThemeWhiteLayout implements DThemeLayoutVertical {\n\tgetDirection(): DLayoutDirection {\n\t\treturn DLayoutDirection.VERTICAL;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeMenu } from \"../../d-menu\";\nimport { DShadow } from \"../../d-shadow\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteMenu extends DThemeWhiteLayoutVertical implements DThemeMenu {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn 0xffffff;\n\t}\n\n\tgetOffsetX(): number {\n\t\treturn 5;\n\t}\n\n\tgetOffsetY(): number {\n\t\treturn 5;\n\t}\n\n\tgetPaddingTop(): number {\n\t\treturn 5;\n\t}\n\n\tgetPaddingBottom(): number {\n\t\treturn 5;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 200;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetShadow(): DShadow | null {\n\t\treturn this.newShadowWeak();\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeMenuItem } from \"../../d-menu-item\";\nimport { DThemeWhiteListItem } from \"./d-theme-white-list-item\";\n\nexport class DThemeWhiteMenuItem extends DThemeWhiteListItem implements DThemeMenuItem {\n\tgetPaddingLeft(): number {\n\t\treturn this.getPaddingRight();\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 26;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeMenuItemText } from \"../../d-menu-item-text\";\nimport { DThemeWhiteMenuItem } from \"./d-theme-white-menu-item\";\n\nexport class DThemeWhiteMenuItemText extends DThemeWhiteMenuItem implements DThemeMenuItemText {\n\tgetShortcutTextMargin(): number {\n\t\treturn this.getPaddingRight();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeMenuItemCheck } from \"../../d-menu-item-check\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteMenuItemText } from \"./d-theme-white-menu-item-text\";\n\nDThemeWhiteAtlas.add( \"menu_item_mark_check_active\", 14, 14,\n\t`<g>` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"1 6.5 5 11 13 2.5\"></polyline>` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"menu_item_mark_check_inactive\", 14, 14,\n\t`<g></g>`\n);\n\nexport class DThemeWhiteMenuItemCheck extends DThemeWhiteMenuItemText implements DThemeMenuItemCheck {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn super.getBackgroundColor( state & ~DBaseState.ACTIVE );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn super.getColor( state & ~DBaseState.ACTIVE );\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_mark_check_active;\n\t\t} else {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_mark_check_inactive;\n\t\t}\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.BORDER;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 7;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeMenuItemExpandable } from \"../../d-menu-item-expandable\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteMenuItemExpandable extends DThemeWhiteLayoutVertical implements DThemeMenuItemExpandable {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn 0xf0f8ff;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn 0.1;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeMenuItemExpandableBody } from \"../../d-menu-item-expandable-body\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteMenuItemExpandableBody extends DThemeWhiteLayoutVertical\n\timplements DThemeMenuItemExpandableBody {\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeMenuItemExpandableHeader } from \"../../d-menu-item-expandable-header\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteListItem } from \"./d-theme-white-list-item\";\n\nDThemeWhiteAtlas.add( \"menu_item_expandable_header_closed\", 14, 14,\n\t`<g transform=\"scale(1, 0.7)\">` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"6 16 10 10 6 4\"></polyline>` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"menu_item_expandable_header_opened\", 14, 14,\n\t`<g transform=\"scale(0.7, 1)\">` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"16 6 10 10 4 6\"></polyline>` +\n\t`</g>`\n);\n\nexport class DThemeWhiteMenuItemExpandableHeader extends DThemeWhiteListItem implements DThemeMenuItemExpandableHeader {\n\tgetPaddingLeft(): number {\n\t\treturn this.getPaddingRight();\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 26;\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( DBaseStates.isActiveIn( state ) ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_expandable_header_opened;\n\t\t} else {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_expandable_header_closed;\n\t\t}\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.BORDER;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 7;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemCheck } from \"./d-theme-white-menu-item-check\";\n\nexport class DThemeWhiteMenuItemExpandableItemCheck extends DThemeWhiteMenuItemCheck {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn super.getImageMarginHorizontal() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DMenuOptions } from \"../../d-menu\";\nimport { DMenuItemLinkMenuItemId, DThemeMenuItemLink } from \"../../d-menu-item-link\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteMenuItemText } from \"./d-theme-white-menu-item-text\";\n\nDThemeWhiteAtlas.add( \"menu_item_mark_link\", 24, 24,\n\t`<g>` +\n\t\t`<path fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" ` +\n\t\t\t`d=\"M10 6H7c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2v-3 M19 11V4h-7 M18.75 4.5l-8 8\" />` +\n\t`</g>`\n);\n\nexport class DThemeWhiteMenuItemLink extends DThemeWhiteMenuItemText implements DThemeMenuItemLink {\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\tif( state & DBaseState.EXTENSION_0 ) {\n\t\t\treturn DThemeWhiteAtlas.mappings.menu_item_mark_link;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetImageTintAlpha( state: DBaseState ): number {\n\t\tif( state & DBaseState.HOVERED ) {\n\t\t\treturn super.getImageTintAlpha( state );\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.BORDER;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetMenuOptions(): DMenuOptions<DMenuItemLinkMenuItemId> {\n\t\treturn {\n\t\t\tsticky: true,\n\t\t\tfit: true,\n\t\t\titems: [{\n\t\t\t\tvalue: DMenuItemLinkMenuItemId.OPEN_LINK_IN_NEW_WINDOW,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: this.getOpenLinkInNewWindow()\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tvalue: DMenuItemLinkMenuItemId.COPY_LINK_ADDRESS,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: this.getCopyLinkAddress()\n\t\t\t\t}\n\t\t\t}]\n\t\t};\n\t}\n\n\tgetOpenLinkInNewWindow(): string {\n\t\treturn \"Open link in new window\";\n\t}\n\n\tgetCopyLinkAddress(): string {\n\t\treturn \"Copy link address\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemLink } from \"./d-theme-white-menu-item-link\";\n\nexport class DThemeWhiteMenuItemExpandableItemLink extends DThemeWhiteMenuItemLink {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DAlignWith } from \"../../d-align-with\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeMenuItemMenu } from \"../../d-menu-item-menu\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteMenuItem } from \"./d-theme-white-menu-item\";\n\nDThemeWhiteAtlas.add( \"menu_item_mark_next\", 14, 20,\n\t`<g>` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"5 16 11 10 5 4\"></polyline>` +\n\t`</g>`\n);\n\nexport class DThemeWhiteMenuItemMenu extends DThemeWhiteMenuItem implements DThemeMenuItemMenu {\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn DThemeWhiteAtlas.mappings.menu_item_mark_next;\n\t}\n\n\tgetImageAlignWith(): DAlignWith {\n\t\treturn DAlignWith.BORDER;\n\t}\n\n\tgetImageAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetImageMarginHorizontal(): number {\n\t\treturn 12;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemMenu } from \"./d-theme-white-menu-item-menu\";\n\nexport class DThemeWhiteMenuItemExpandableItemMenu extends DThemeWhiteMenuItemMenu {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeListItemSeparator } from \"../../d-list-item-separator\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteImage } from \"./d-theme-white-image\";\n\nexport class DThemeWhiteListItemSeparator extends DThemeWhiteImage implements DThemeListItemSeparator {\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t}\n\n\tgetBorderAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 15;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeMenuItemSeparator } from \"../../d-menu-item-separator\";\nimport { DThemeWhiteListItemSeparator } from \"./d-theme-white-list-item-separator\";\n\nexport class DThemeWhiteMenuItemSeparator extends DThemeWhiteListItemSeparator implements DThemeMenuItemSeparator {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemSeparator } from \"./d-theme-white-menu-item-separator\";\n\nexport class DThemeWhiteMenuItemExpandableItemSeparator extends DThemeWhiteMenuItemSeparator {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DLayoutClearType } from \"../../d-layout-clear-type\";\nimport { DThemeLayoutSpace } from \"../../d-layout-space\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteLayoutSpace extends DThemeWhiteBase implements DThemeLayoutSpace {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 0;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 0;\n\t}\n\n\tgetClearType(): DLayoutClearType {\n\t\treturn DLayoutClearType.BOTH;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.CHILDREN;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeMenuItemSpace } from \"../../d-menu-item-space\";\nimport { DThemeWhiteLayoutSpace } from \"./d-theme-white-layout-space\";\n\nexport class DThemeWhiteMenuItemSpace extends DThemeWhiteLayoutSpace implements DThemeMenuItemSpace {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemSpace } from \"./d-theme-white-menu-item-space\";\n\nexport class DThemeWhiteMenuItemExpandableItemSpace extends DThemeWhiteMenuItemSpace {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemText } from \"./d-theme-white-menu-item-text\";\n\nexport class DThemeWhiteMenuItemExpandableItemText extends DThemeWhiteMenuItemText {\n\tgetPaddingLeft(): number {\n\t\treturn super.getPaddingLeft() + 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteMenu } from \"../theme/white/d-theme-white-menu\";\nimport { DThemeWhiteMenuItem } from \"../theme/white/d-theme-white-menu-item\";\nimport { DThemeWhiteMenuItemCheck } from \"../theme/white/d-theme-white-menu-item-check\";\nimport { DThemeWhiteMenuItemExpandable } from \"../theme/white/d-theme-white-menu-item-expandable\";\nimport { DThemeWhiteMenuItemExpandableBody } from \"../theme/white/d-theme-white-menu-item-expandable-body\";\nimport { DThemeWhiteMenuItemExpandableHeader } from \"../theme/white/d-theme-white-menu-item-expandable-header\";\nimport { DThemeWhiteMenuItemExpandableItemCheck } from \"../theme/white/d-theme-white-menu-item-expandable-item-check\";\nimport { DThemeWhiteMenuItemExpandableItemLink } from \"../theme/white/d-theme-white-menu-item-expandable-item-link\";\nimport { DThemeWhiteMenuItemExpandableItemMenu } from \"../theme/white/d-theme-white-menu-item-expandable-item-menu\";\nimport {\n\tDThemeWhiteMenuItemExpandableItemSeparator\n} from \"../theme/white/d-theme-white-menu-item-expandable-item-separator\";\nimport { DThemeWhiteMenuItemExpandableItemSpace } from \"../theme/white/d-theme-white-menu-item-expandable-item-space\";\nimport { DThemeWhiteMenuItemExpandableItemText } from \"../theme/white/d-theme-white-menu-item-expandable-item-text\";\nimport { DThemeWhiteMenuItemLink } from \"../theme/white/d-theme-white-menu-item-link\";\nimport { DThemeWhiteMenuItemMenu } from \"../theme/white/d-theme-white-menu-item-menu\";\nimport { DThemeWhiteMenuItemSeparator } from \"../theme/white/d-theme-white-menu-item-separator\";\nimport { DThemeWhiteMenuItemSpace } from \"../theme/white/d-theme-white-menu-item-space\";\nimport { DThemeWhiteMenuItemText } from \"../theme/white/d-theme-white-menu-item-text\";\n\nexport const loadThemeWhiteMenu = () => {\n\tDThemeWhite.set( \"DMenu\", DThemeWhiteMenu );\n\n\tDThemeWhite.set( \"DMenuItem\", DThemeWhiteMenuItem );\n\tDThemeWhite.set( \"DMenuItemCheck\", DThemeWhiteMenuItemCheck );\n\tDThemeWhite.set( \"DMenuItemLink\", DThemeWhiteMenuItemLink );\n\tDThemeWhite.set( \"DMenuItemMenu\", DThemeWhiteMenuItemMenu );\n\tDThemeWhite.set( \"DMenuItemSeparator\", DThemeWhiteMenuItemSeparator );\n\tDThemeWhite.set( \"DMenuItemSpace\", DThemeWhiteMenuItemSpace );\n\tDThemeWhite.set( \"DMenuItemText\", DThemeWhiteMenuItemText );\n\n\tDThemeWhite.set( \"DMenuItemExpandableBody\", DThemeWhiteMenuItemExpandableBody );\n\tDThemeWhite.set( \"DMenuItemExpandableHeader\", DThemeWhiteMenuItemExpandableHeader );\n\tDThemeWhite.set( \"DMenuItemExpandableItemCheck\", DThemeWhiteMenuItemExpandableItemCheck );\n\tDThemeWhite.set( \"DMenuItemExpandableItemLink\", DThemeWhiteMenuItemExpandableItemLink );\n\tDThemeWhite.set( \"DMenuItemExpandableItemMenu\", DThemeWhiteMenuItemExpandableItemMenu );\n\tDThemeWhite.set( \"DMenuItemExpandableItemSeparator\", DThemeWhiteMenuItemExpandableItemSeparator );\n\tDThemeWhite.set( \"DMenuItemExpandableItemSpace\", DThemeWhiteMenuItemExpandableItemSpace );\n\tDThemeWhite.set( \"DMenuItemExpandableItemText\", DThemeWhiteMenuItemExpandableItemText );\n\tDThemeWhite.set( \"DMenuItemExpandable\", DThemeWhiteMenuItemExpandable );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteDropdown } from \"../theme/white/d-theme-white-dropdown\";\nimport { loadThemeWhiteMenu } from \"./load-theme-white-menu\";\n\nexport const loadThemeWhiteDropdown = () => {\n\tDThemeWhite.set( \"DDropdown\", DThemeWhiteDropdown );\n\tloadThemeWhiteMenu();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeExpandable } from \"../../d-expandable\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteExpandable extends DThemeWhiteLayoutVertical implements DThemeExpandable {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn 0xf0f8ff;\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( DBaseStates.isActive( state ) ) {\n\t\t\treturn 0.1;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeExpandableHeader } from \"../../d-expandable-header\";\nimport { DThemeWhiteAtlas } from \"./d-theme-white-atlas\";\nimport { DThemeWhiteImage } from \"./d-theme-white-image\";\n\nDThemeWhiteAtlas.add( \"menu_item_expandable_header_closed\", 14, 14,\n\t`<g transform=\"scale(1, 0.7)\">` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"6 16 10 10 6 4\"></polyline>` +\n\t`</g>`\n);\n\nDThemeWhiteAtlas.add( \"menu_item_expandable_header_opened\", 14, 14,\n\t`<g transform=\"scale(0.7, 1)\">` +\n\t\t`<polyline fill=\"none\" stroke=\"#fff\" stroke-width=\"1\" points=\"16 6 10 10 4 6\"></polyline>` +\n\t`</g>`\n);\n\nexport class DThemeWhiteExpandableHeader extends DThemeWhiteImage implements DThemeExpandableHeader {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn 0xf8f8f8;\n\t\t} else if( DBaseStates.isActiveIn( state ) ) {\n\t\t\treturn 0xf8f8f8;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 16;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 16;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point, Rectangle, Renderer, Text } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DDynamicText } from \"./d-dynamic-text\";\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport type DHTMLElementElementCreator<T> = ( parent: HTMLElement ) => T;\n\nexport type DHTMLElementStyle<THEME extends DThemeHTMLElement> = (\n\ttarget: HTMLElement,\n\tstate: DBaseState, theme: THEME,\n\telementRect: Rectangle, clipperRect: Rectangle\n) => void;\n\nexport type DHTMLElementStyleBefore<THEME extends DThemeHTMLElement> =\n\t( target: HTMLElement, theme: THEME ) => void;\n\nexport type DHTMLElementStyleAfter<THEME extends DThemeHTMLElement> =\n\t( target: HTMLElement, theme: THEME ) => void;\n\nexport enum DHTMLElementWhen {\n\tFOCUSED,\n\tALWAYS\n}\n\nexport interface DHTMLElementOptions<\n\tVALUE = unknown,\n\tELEMENT extends HTMLElement = HTMLElement,\n\tTHEME extends DThemeHTMLElement<ELEMENT> = DThemeHTMLElement<ELEMENT>\n> extends DImageBaseOptions<VALUE, THEME> {\n\telement?: {\n\t\tcreator?: DHTMLElementElementCreator<ELEMENT>;\n\t\tstyle?: DHTMLElementStyle<THEME>;\n\t};\n\tclipper?: {\n\t\tcreator?: DHTMLElementElementCreator<HTMLDivElement>;\n\t\tstyle?: DHTMLElementStyle<THEME>;\n\t};\n\tbefore?: {\n\t\tcreator?: DHTMLElementElementCreator<HTMLDivElement>;\n\t\tstyle?: DHTMLElementStyleBefore<THEME>;\n\t};\n\tafter?: {\n\t\tcreator?: DHTMLElementElementCreator<HTMLDivElement>;\n\t\tstyle?: DHTMLElementStyleAfter<THEME>;\n\t};\n\twhen?: DHTMLElementWhen | (keyof typeof DHTMLElementWhen);\n\tselect?: boolean;\n}\n\nexport interface DThemeHTMLElement<\n\tELEMENT extends HTMLElement = HTMLElement\n> extends DThemeImageBase {\n\tgetElementCreator(): DHTMLElementElementCreator<ELEMENT> | null;\n\tsetElementStyle(\n\t\ttarget: ELEMENT, state: DBaseState,\n\t\telementRect: Rectangle, clipperRect: Rectangle\n\t): void;\n\tgetClipperCreator(): DHTMLElementElementCreator<HTMLDivElement> | null;\n\tsetClipperStyle(\n\t\ttarget: HTMLDivElement, state: DBaseState,\n\t\telementRect: Rectangle, clipperRect: Rectangle\n\t): void;\n\tgetBeforeCreator(): DHTMLElementElementCreator<HTMLDivElement> | null;\n\tsetBeforeStyle( target: HTMLDivElement ): void;\n\tgetAfterCreator(): DHTMLElementElementCreator<HTMLDivElement> | null;\n\tsetAfterStyle( target: HTMLDivElement ): void;\n\tgetWhen(): DHTMLElementWhen;\n\tgetSelect(): boolean;\n}\n\nexport class DHTMLElement<\n\tVALUE = unknown,\n\tELEMENT extends HTMLElement = HTMLElement,\n\tTHEME extends DThemeHTMLElement<ELEMENT> = DThemeHTMLElement<ELEMENT>,\n\tOPTIONS extends DHTMLElementOptions<VALUE, ELEMENT, THEME> = DHTMLElementOptions<VALUE, ELEMENT, THEME>\n> extends DImageBase<VALUE, THEME, OPTIONS> {\n\tprotected _clipper!: HTMLDivElement | null;\n\tprotected _clipperCreator!: DHTMLElementElementCreator<HTMLDivElement> | null;\n\tprotected _clipperStyle!: DHTMLElementStyle<THEME> | undefined;\n\tprotected _clipperRect!: Rectangle | null;\n\n\tprotected _element!: ELEMENT | null;\n\tprotected _elementCreator!: DHTMLElementElementCreator<ELEMENT> | null;\n\tprotected _elementStyle!: DHTMLElementStyle<THEME> | undefined;\n\tprotected _elementRect!: Rectangle | null;\n\tprotected _isElementShown!: boolean;\n\tprotected _isElementSelected!: boolean;\n\tprotected _onElementFocusedBound!: ( e: FocusEvent ) => void;\n\n\tprotected _before!: HTMLDivElement | null;\n\tprotected _beforeCreator!: DHTMLElementElementCreator<HTMLDivElement> | null;\n\tprotected _beforeStyle!: DHTMLElementStyleBefore<THEME> | undefined;\n\tprotected _onBeforeFocusedBound!: ( e: FocusEvent ) => void;\n\n\tprotected _after!: HTMLDivElement | null;\n\tprotected _afterCreator!: DHTMLElementElementCreator<HTMLDivElement> | null;\n\tprotected _afterStyle!: DHTMLElementStyleAfter<THEME> | undefined;\n\tprotected _onAfterFocusedBound!: ( e: FocusEvent ) => void;\n\n\tprotected _isStarted!: boolean;\n\tprotected _select!: boolean;\n\tprotected _doSelectBound!: () => void;\n\tprotected _when!: DHTMLElementWhen;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst theme = this.theme;\n\t\tconst clipper = options && options.clipper;\n\t\tconst clipperCreator = (clipper && clipper.creator) || theme.getClipperCreator();\n\t\tthis._clipper = null;\n\t\tthis._clipperCreator = clipperCreator;\n\t\tthis._clipperRect = null;\n\n\t\tconst element = options && options.element;\n\t\tconst elementCreator = (element && element.creator) || theme.getElementCreator();\n\t\tthis._element = null;\n\t\tthis._elementCreator = elementCreator;\n\t\tthis._elementStyle = element && element.style;\n\t\tthis._elementRect = null;\n\t\tthis._isElementShown = false;\n\t\tthis._isElementSelected = false;\n\t\tthis._onElementFocusedBound = ( e: FocusEvent ): void => {\n\t\t\tthis.onElementFocused( e );\n\t\t};\n\n\t\tconst before = options && options.before;\n\t\tthis._before = null;\n\t\tthis._beforeCreator = (before && before.creator) || theme.getBeforeCreator();\n\t\tthis._beforeStyle = before && before.style;\n\t\tthis._onBeforeFocusedBound = ( e: FocusEvent ): void => {\n\t\t\tthis.onBeforeFocused( e );\n\t\t};\n\n\t\tconst after = options && options.after;\n\t\tthis._after = null;\n\t\tthis._afterCreator = (after && after.creator) || theme.getAfterCreator();\n\t\tthis._afterStyle = after && after.style;\n\t\tthis._onAfterFocusedBound = ( e: FocusEvent ): void => {\n\t\t\tthis.onAfterFocused( e );\n\t\t};\n\n\t\tthis._isStarted = false;\n\t\tthis._select = ( options && options.select != null ?\n\t\t\toptions.select : theme.getSelect()\n\t\t);\n\t\tthis._doSelectBound = () => {\n\t\t\tthis.doSelect();\n\t\t};\n\t\tconst when = ( options && options.when != null ?\n\t\t\t( utilIsString( options.when ) ? DHTMLElementWhen[ options.when ] : options.when ) :\n\t\t\ttheme.getWhen()\n\t\t);\n\t\tthis._when = when;\n\t\tif( when === DHTMLElementWhen.ALWAYS ) {\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\tget element(): ELEMENT | null {\n\t\treturn this._element;\n\t}\n\n\tprotected onFocused(): void {\n\t\tsuper.onFocused();\n\t\tif( this._when === DHTMLElementWhen.FOCUSED ) {\n\t\t\tthis.start();\n\t\t} else {\n\t\t\tconst element = this._element;\n\t\t\tif( element ) {\n\t\t\t\telement.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onBlured(): void {\n\t\tsuper.onBlured();\n\t\tif( this._when === DHTMLElementWhen.FOCUSED ) {\n\t\t\tthis.onEndByBlured();\n\t\t\tthis.cancel();\n\t\t}\n\t}\n\n\tprotected isStartable(): boolean {\n\t\tif( this._when === DHTMLElementWhen.FOCUSED ) {\n\t\t\treturn ! this.isDisabled();\n\t\t}\n\t\treturn true;\n\t}\n\n\tstart(): void {\n\t\tif( ! this._isStarted && this.isStartable() ) {\n\t\t\tthis._isStarted = true;\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tif( this._isStarted ) {\n\t\t\tthis._isStarted = false;\n\t\t\tthis.doStart( renderer );\n\t\t}\n\t\tsuper.render( renderer );\n\t\tif( this._isElementShown ) {\n\t\t\tthis.updateElement( renderer );\n\t\t}\n\t}\n\n\tprotected doStart( renderer: Renderer ): void {\n\t\tif( ! this._isElementShown ) {\n\t\t\tthis._isElementShown = true;\n\n\t\t\tthis.onStart();\n\n\t\t\tconst clipper = this.getClipper();\n\t\t\tif( clipper ) {\n\t\t\t\tconst before = this.getBefore( clipper );\n\t\t\t\tconst element = this.getElement( clipper );\n\t\t\t\tconst after = this.getAfter( clipper );\n\t\t\t\tif( element ) {\n\t\t\t\t\tconst resolution = renderer.resolution;\n\t\t\t\t\tconst elementRect = this.getElementRect( resolution );\n\t\t\t\t\tconst clipperRect = this.getClipperRect( elementRect, resolution );\n\t\t\t\t\tconst theme = this.theme;\n\t\t\t\t\tconst state = this.state;\n\t\t\t\t\tthis.setClipperStyle( clipper, state, theme, elementRect, clipperRect );\n\t\t\t\t\tthis.setElementStyle( element, state, theme, elementRect, clipperRect );\n\t\t\t\t\tif( before ) {\n\t\t\t\t\t\tthis.setBeforeStyle( before, theme );\n\t\t\t\t\t}\n\t\t\t\t\tif( after ) {\n\t\t\t\t\t\tthis.setAfterStyle( after, theme );\n\t\t\t\t\t}\n\t\t\t\t\tthis.onElementAttached( element, before, after );\n\n\t\t\t\t\t// Show HTML elements\n\t\t\t\t\tclipper.style.display = \"\";\n\t\t\t\t\tif( this.isFocused() ) {\n\t\t\t\t\t\telement.focus();\n\t\t\t\t\t}\n\t\t\t\t\tclipper.scrollTop = 0;\n\t\t\t\t\tclipper.scrollLeft = 0;\n\n\t\t\t\t\t// Select the element if required.\n\t\t\t\t\t// Note that a selecting without the setTimeout causes a keystroke drop on Microsoft Edge.\n\t\t\t\t\tif( this._isElementSelected && this._select && (\"select\" in element) ) {\n\t\t\t\t\t\tsetTimeout( this._doSelectBound, 0 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected doSelect(): void {\n\t\tif( this._isElementShown ) {\n\t\t\tconst element = this._element;\n\t\t\tif( element && this._isElementSelected && this._select && (\"select\" in element) ) {\n\t\t\t\tthis._isElementSelected = false;\n\t\t\t\t(element as any).select();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected createText( formatted: string ): Text | DDynamicText {\n\t\tconst result = super.createText( formatted );\n\t\tif( this._isElementShown ) {\n\t\t\tthis.onStart();\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Please note that this method does not update transforms.\n\t *\n\t * @param elementRect\n\t * @param resolution\n\t */\n\tprotected getClipperRect( elementRect: Rectangle, resolution: number ) {\n\t\tconst rect = this._clipperRect = ( this._clipperRect != null ? this._clipperRect : new Rectangle() );\n\t\trect.copyFrom( elementRect );\n\n\t\tconst p = new Point( 0, 0 );\n\t\tlet current = this.parent;\n\t\twhile( current instanceof DBase ) {\n\t\t\tp.set( 0, 0 );\n\t\t\tcurrent.toGlobal( p, p, false );\n\t\t\tlet x = p.x;\n\t\t\tlet y = p.y;\n\n\t\t\tp.set( current.width, current.height );\n\t\t\tcurrent.toGlobal( p, p, true );\n\t\t\tconst w = p.x - x;\n\t\t\tconst h = p.y - y;\n\n\t\t\tx = ( (x * resolution) | 0 ) / resolution;\n\t\t\ty = ( (y * resolution) | 0 ) / resolution;\n\n\t\t\tconst x0 = rect.x;\n\t\t\tconst y0 = rect.y;\n\t\t\tconst x1 = rect.x + rect.width;\n\t\t\tconst y1 = rect.y + rect.height;\n\n\t\t\trect.x = Math.min( Math.max( x0, x ), x + w );\n\t\t\trect.y = Math.min( Math.max( y0, y ), y + h );\n\n\t\t\trect.width = Math.min( Math.max( x1, x ), x + w ) - rect.x;\n\t\t\trect.height = Math.min( Math.max( y1, y ), y + h ) - rect.y;\n\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn rect;\n\t}\n\n\t/**\n\t * Please note that this method does not update transforms.\n\t *\n\t * @param resolution\n\t */\n\tprotected getElementRect( resolution: number ) {\n\t\tconst rect = this._elementRect = ( this._elementRect != null ? this._elementRect : new Rectangle() );\n\n\t\tconst p = new Point( 0, 0 );\n\t\tthis.toGlobal( p, p, false );\n\t\trect.x = p.x;\n\t\trect.y = p.y;\n\n\t\tp.set( this.width, this.height );\n\t\tthis.toGlobal( p, p, true );\n\t\trect.width = p.x - rect.x;\n\t\trect.height = p.y - rect.y;\n\n\t\t// Rounds pixels as Pixi.js does\n\t\trect.x = ( (rect.x * resolution) | 0 ) / resolution;\n\t\trect.y = ( (rect.y * resolution) | 0 ) / resolution;\n\n\t\treturn rect;\n\t}\n\n\tcancel(): void {\n\t\tif( this._isElementShown ) {\n\t\t\tthis._isElementShown = false;\n\n\t\t\tthis.onCancel();\n\n\t\t\tconst clipper = this._clipper;\n\t\t\tif( clipper != null ) {\n\t\t\t\tclipper.style.display = \"none\";\n\t\t\t}\n\n\t\t\tconst element = this._element;\n\t\t\tif( element != null ) {\n\t\t\t\tthis.onElementDetached( element, this._before, this._after );\n\t\t\t}\n\t\t\tthis._isElementSelected = false;\n\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( layer ) {\n\t\t\t\tconst view = layer.view;\n\t\t\t\tif( this._when === DHTMLElementWhen.FOCUSED ) {\n\t\t\t\t\tview.focus();\n\t\t\t\t}\n\n\t\t\t\tconst interactionManager = layer.renderer.plugins.interaction;\n\t\t\t\tif( this.containsPoint( interactionManager.mouse.global ) && ! this.isHovered() ) {\n\t\t\t\t\tthis.setHovered( true );\n\t\t\t\t\tview.style.cursor = this.cursor;\n\t\t\t\t}\n\n\t\t\t\tlayer.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onStart(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected onCancel(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected onElementAttached(\n\t\telement: ELEMENT, before: HTMLDivElement | null, after: HTMLDivElement | null\n\t): void {\n\t\tif( before ) {\n\t\t\tbefore.addEventListener( \"focus\", this._onBeforeFocusedBound );\n\t\t}\n\t\tif( after ) {\n\t\t\tafter.addEventListener( \"focus\", this._onAfterFocusedBound );\n\t\t}\n\t\telement.addEventListener( \"focus\", this._onElementFocusedBound, true );\n\t}\n\n\tprotected onElementDetached(\n\t\telement: ELEMENT, before: HTMLDivElement | null, after: HTMLDivElement | null\n\t): void {\n\t\tif( before ) {\n\t\t\tbefore.removeEventListener( \"focus\", this._onBeforeFocusedBound );\n\t\t}\n\t\tif( after ) {\n\t\t\tafter.removeEventListener( \"focus\", this._onAfterFocusedBound );\n\t\t}\n\t\telement.removeEventListener( \"focus\", this._onElementFocusedBound, true );\n\t}\n\n\tprotected getElement( clipper: HTMLDivElement ): ELEMENT | null {\n\t\tlet result = this._element;\n\t\tif( result == null ) {\n\t\t\tconst creator = this._elementCreator;\n\t\t\tif( creator ) {\n\t\t\t\tresult = creator( clipper );\n\t\t\t\tthis._element = result;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getClipper(): HTMLDivElement | null {\n\t\tlet result = this._clipper;\n\t\tif( result == null ) {\n\t\t\tconst creator = this._clipperCreator;\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( creator && layer ) {\n\t\t\t\tresult = creator( layer.getElementContainer() );\n\t\t\t\tthis._clipper = result;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getBefore( clipper: HTMLDivElement ): HTMLDivElement | null {\n\t\tlet result = this._before;\n\t\tif( result == null ) {\n\t\t\tconst creator = this._beforeCreator;\n\t\t\tif( creator ) {\n\t\t\t\tresult = creator( clipper );\n\t\t\t\tthis._before = result;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getAfter( clipper: HTMLDivElement ): HTMLDivElement | null {\n\t\tlet result = this._after;\n\t\tif( result == null ) {\n\t\t\tconst creator = this._afterCreator;\n\t\t\tif( creator ) {\n\t\t\t\tresult = creator( clipper );\n\t\t\t\tthis._after = result;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected setElementStyle(\n\t\ttarget: ELEMENT,\n\t\tstate: DBaseState, theme: THEME,\n\t\telementRect: Rectangle, clipperRect: Rectangle\n\t): void {\n\t\tconst style = this._elementStyle;\n\t\tif( style ) {\n\t\t\treturn style( target, state, theme, elementRect, clipperRect );\n\t\t} else {\n\t\t\treturn this.theme.setElementStyle( target, state, elementRect, clipperRect );\n\t\t}\n\t}\n\n\tprotected setClipperStyle(\n\t\ttarget: HTMLDivElement,\n\t\tstate: DBaseState, theme: THEME,\n\t\telementRect: Rectangle, clipperRect: Rectangle\n\t): void {\n\t\tconst style = this._clipperStyle;\n\t\tif( style ) {\n\t\t\treturn style( target, state, theme, elementRect, clipperRect );\n\t\t} else {\n\t\t\treturn this.theme.setClipperStyle( target, state, elementRect, clipperRect );\n\t\t}\n\t}\n\n\tprotected setBeforeStyle( target: HTMLDivElement, theme: THEME ): void {\n\t\tconst style = this._beforeStyle;\n\t\tif( style ) {\n\t\t\treturn style( target, theme );\n\t\t} else {\n\t\t\treturn this.theme.setBeforeStyle( target );\n\t\t}\n\t}\n\n\tprotected setAfterStyle( target: HTMLDivElement, theme: THEME ): void {\n\t\tconst style = this._afterStyle;\n\t\tif( style ) {\n\t\t\treturn style( target, theme );\n\t\t} else {\n\t\t\treturn this.theme.setAfterStyle( target );\n\t\t}\n\t}\n\n\tprotected onBeforeFocused( e: FocusEvent ): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst focusController = layer.getFocusController();\n\t\t\tconst focusable = focusController.findFocusable( this, false, false, false );\n\t\t\tlayer.view.focus();\n\t\t\tfocusController.setFocused( focusable, true, true );\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\n\tprotected onAfterFocused( e: FocusEvent ): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst focusController = layer.getFocusController();\n\t\t\tconst focusable = focusController.findFocusable( this, false, false, true );\n\t\t\tlayer.view.focus();\n\t\t\tfocusController.setFocused( focusable, true, true );\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\n\tprotected onElementFocused( e: FocusEvent ): void {\n\t\tif( this._when === DHTMLElementWhen.ALWAYS ) {\n\t\t\tif( ! this.isFocused() ) {\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onEndByBlured(): void {\n\t\tthis.onEnd();\n\t}\n\n\tprotected onEnd(): void {\n\t\t// DO NOTHING\n\t}\n\n\tend(): void {\n\t\tthis.onEnd();\n\t\tthis.cancel();\n\t}\n\n\tselect(): this {\n\t\tconst element = this._element;\n\t\tif( element != null && this._isElementShown && this._select && \"select\" in element ) {\n\t\t\t(element as any).select();\n\t\t} else {\n\t\t\tthis._isElementSelected = true;\n\t\t}\n\t\treturn this;\n\t}\n\n\tprotected updateElement( renderer: Renderer ) {\n\t\tif( this._isElementShown ) {\n\t\t\tif( this.worldVisible ) {\n\t\t\t\tconst element = this._element;\n\t\t\t\tconst clipper = this._clipper;\n\t\t\t\tif( element && clipper ) {\n\t\t\t\t\tconst resolution = renderer.resolution;\n\t\t\t\t\tconst elementRect = this.getElementRect( resolution );\n\t\t\t\t\tconst clipperRect = this.getClipperRect( elementRect, resolution );\n\t\t\t\t\tconst theme = this.theme;\n\t\t\t\t\tconst state = this.state;\n\t\t\t\t\tthis.setClipperStyle( clipper, state, theme, elementRect, clipperRect );\n\t\t\t\t\tthis.setElementStyle( element, state, theme, elementRect, clipperRect );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.cancel();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DHTMLElement\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteExpandable } from \"../theme/white/d-theme-white-expandable\";\nimport { DThemeWhiteExpandableHeader } from \"../theme/white/d-theme-white-expandable-header\";\n\nexport const loadThemeWhiteExpandable = () => {\n\tDThemeWhite.set( \"DExpandableHeader\", DThemeWhiteExpandableHeader );\n\tDThemeWhite.set( \"DExpandable\", DThemeWhiteExpandable );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedSnapTargetValue } from \"../d-diagram-serialized\";\n\nexport enum ESnapperTargetValueType {\n\tHORIZONTAL = 0,\n\tVERTICAL = 1\n}\n\nexport class ESnapperTargetValue {\n\ttype: ESnapperTargetValueType;\n\tposition: number;\n\n\tconstructor( type: ESnapperTargetValueType, position: number ) {\n\t\tthis.type = type;\n\t\tthis.position = position;\n\t}\n\n\tserialize(): DDiagramSerializedSnapTargetValue {\n\t\treturn [ this.type, this.position ];\n\t}\n}\n","import { Rectangle } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DHTMLElementElementCreator, DHTMLElementWhen, DThemeHTMLElement } from \"../../d-html-element\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\n\nconst divCreator = ( parent: HTMLElement ): HTMLDivElement => {\n\tconst result = document.createElement( \"div\" );\n\tparent.appendChild( result );\n\treturn result;\n};\n\nexport class DThemeWhiteHTMLElement<\n\tELEMENT extends HTMLElement = HTMLElement\n> extends DThemeWhiteImageBase implements DThemeHTMLElement<ELEMENT> {\n\tgetElementCreator(): DHTMLElementElementCreator<ELEMENT> | null {\n\t\treturn null;\n\t}\n\n\tsetElementStyle(\n\t\ttarget: ELEMENT, state: DBaseState,\n\t\telementRect: Rectangle, clipperRect: Rectangle\n\t): void {\n\t\t// Style\n\t\tconst style = this.getElementStylePosition( state, elementRect, clipperRect ) +\n\t\t\tthis.getElementStyleMargin( state ) +\n\t\t\tthis.getElementStyleText( state ) +\n\t\t\tthis.getElementStyleBackground( state ) +\n\t\t\tthis.getElementStyleBorder( state ) +\n\t\t\tthis.getElementStylePadding( state, elementRect ) +\n\t\t\tthis.getElementStyleOutline( state );\n\t\ttarget.setAttribute( \"style\", style );\n\n\t\t// ReadOnly\n\t\tif( DBaseStates.isReadOnly( state ) ) {\n\t\t\ttarget.setAttribute( \"readonly\", \"readonly\" );\n\t\t} else {\n\t\t\ttarget.removeAttribute( \"readonly\" );\n\t\t}\n\n\t\t// Disabled\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\ttarget.setAttribute( \"disabled\", \"disabled\" );\n\t\t} else {\n\t\t\ttarget.removeAttribute( \"disabled\" );\n\t\t}\n\t}\n\n\tprotected getElementStyleBackground( state: DBaseState ): string {\n\t\treturn `background-color: transparent;`;\n\t}\n\n\tprotected getElementStyleBorder( state: DBaseState ): string {\n\t\treturn `border: none; box-sizing: border-box;`;\n\t}\n\n\tprotected getElementStylePadding( state: DBaseState, elementRect: Rectangle ): string {\n\t\tconst paddingTop = this.getPaddingTop();\n\t\tconst paddingRight = this.getPaddingRight();\n\t\tconst paddingBottom = this.getPaddingBottom();\n\t\tconst paddingLeft = this.getPaddingLeft();\n\t\treturn `padding: ${paddingTop}px ${paddingRight}px ${paddingBottom}px ${paddingLeft}px;`;\n\t}\n\n\tprotected getElementStyleOutline( state: DBaseState ): string {\n\t\treturn `outline: none;`;\n\t}\n\n\tprotected getElementStylePosition(\n\t\tstate: DBaseState, elementRect: Rectangle, clipperRect: Rectangle\n\t): string {\n\t\treturn `position: absolute;` +\n\t\t\t`left: ${elementRect.x - clipperRect.x}px;` +\n\t\t\t`top: ${elementRect.y - clipperRect.y}px;` +\n\t\t\t`width: ${elementRect.width}px;` +\n\t\t\t`height: ${elementRect.height}px;` +\n\t\t\t`line-height: ${elementRect.height}px;`;\n\t}\n\n\tprotected getElementStyleText( state: DBaseState ): string {\n\t\treturn `font-family: ${this.getFontFamilly()};` +\n\t\t\t`font-size: ${this.getFontSize()}px;` +\n\t\t\t`color: #${this.getColor( state ).toString( 16 )};`;\n\t}\n\n\tprotected getElementStyleMargin( state: DBaseState ): string {\n\t\treturn \"margin: 0;\";\n\t}\n\n\tgetClipperCreator(): DHTMLElementElementCreator<HTMLDivElement> | null {\n\t\treturn divCreator;\n\t}\n\n\tsetClipperStyle(\n\t\ttarget: HTMLDivElement,  state: DBaseState,\n\t\telementRect: Rectangle, clipperRect: Rectangle\n\t): void {\n\t\tconst style = `overflow: hidden; outline: none;` +\n\t\t\t`padding: 0; margin: 0; border: none; background-color: transparent;` +\n\t\t\tthis.getClipperStylePosition( state, elementRect, clipperRect );\n\t\ttarget.setAttribute( \"style\", style );\n\t}\n\n\tprotected getClipperStylePosition( state: DBaseState, elementRect: Rectangle, clipperRect: Rectangle ): string {\n\t\treturn `position: absolute;` +\n\t\t\t`left: ${clipperRect.x}px;` +\n\t\t\t`top: ${clipperRect.y}px;` +\n\t\t\t`width: ${clipperRect.width}px;` +\n\t\t\t`height: ${clipperRect.height}px;` +\n\t\t\t`line-height: ${elementRect.height}px;`;\n\t}\n\n\tgetBeforeCreator(): DHTMLElementElementCreator<HTMLDivElement> | null {\n\t\treturn divCreator;\n\t}\n\n\tsetBeforeStyle( target: HTMLDivElement ): void {\n\t\tconst style = \"overflow: hidden; outline: none;\" +\n\t\t\t\"padding: 0; margin: 0; border: none; background-color: transparent;\" +\n\t\t\t\"position: absolute; left: 0; top: 0; width: 0; height: 0; line-height: 0;\";\n\t\ttarget.setAttribute( \"style\", style );\n\t\ttarget.setAttribute( \"tabindex\", \"0\" );\n\t}\n\n\tgetAfterCreator(): DHTMLElementElementCreator<HTMLDivElement> | null {\n\t\treturn divCreator;\n\t}\n\n\tsetAfterStyle( target: HTMLDivElement ): void {\n\t\tthis.setBeforeStyle( target );\n\t}\n\n\tgetWhen(): DHTMLElementWhen {\n\t\treturn DHTMLElementWhen.FOCUSED;\n\t}\n\n\tgetSelect(): boolean {\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteImage } from \"../theme/white/d-theme-white-image\";\n\nexport const loadThemeWhiteImage = () => {\n\tDThemeWhite.set( \"DImage\", DThemeWhiteImage );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DLayoutDirection } from \"../../d-layout\";\nimport { DThemeLayoutHorizontal } from \"../../d-layout-horizontal\";\nimport { DThemeWhiteLayout } from \"./d-theme-white-layout\";\n\nexport class DThemeWhiteLayoutHorizontal extends DThemeWhiteLayout implements DThemeLayoutHorizontal {\n\tgetDirection(): DLayoutDirection {\n\t\treturn DLayoutDirection.HORIZONTAL;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeInputAndLabel } from \"../../d-input-and-label\";\nimport { DThemeWhiteLayoutHorizontal } from \"./d-theme-white-layout-horizontal\";\n\nexport class DThemeWhiteInputAndLabel extends DThemeWhiteLayoutHorizontal implements DThemeInputAndLabel {\n\tgetHeight(): DCoordinate {\n\t\treturn this.getLineHeight();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputAndLabel } from \"../theme/white/d-theme-white-input-and-label\";\n\nexport const loadThemeWhiteInputAndLabel = () => {\n\tDThemeWhite.set( \"DInputAndLabel\", DThemeWhiteInputAndLabel );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DHTMLElementElementCreator } from \"../../d-html-element\";\nimport { DThemeInput } from \"../../d-input\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteHTMLElement } from \"./d-theme-white-html-element\";\n\nconst editingValidator = (): unknown => {\n\treturn null;\n};\n\nconst editingUnformatter = ( text: string ): string => {\n\treturn text;\n};\n\nconst CREATOR_CLASSNAME = \"d-theme-white-input\";\nconst CREATOR_CLASSNAME_ELEMENT = `${CREATOR_CLASSNAME}-element`;\nconst elementCreator = ( parent: HTMLElement ): HTMLInputElement => {\n\tconst found = parent.getElementsByClassName( CREATOR_CLASSNAME_ELEMENT );\n\tif( 0 < found.length ) {\n\t\treturn found[ 0 ] as HTMLInputElement;\n\t}\n\tconst element = document.createElement( \"input\" );\n\telement.setAttribute( \"spellcheck\", \"false\" );\n\telement.setAttribute( \"class\", CREATOR_CLASSNAME_ELEMENT );\n\tparent.appendChild( element );\n\treturn element;\n};\n\nconst divCreator = ( parent: HTMLElement, classname: string ): HTMLDivElement => {\n\tconst found = parent.getElementsByClassName( classname );\n\tif( 0 < found.length ) {\n\t\treturn found[ 0 ] as HTMLDivElement;\n\t}\n\tconst result = document.createElement( \"div\" );\n\tresult.setAttribute( \"class\", classname );\n\tparent.appendChild( result );\n\treturn result;\n};\n\nconst CREATOR_CLASSNAME_CLIPPER = `${CREATOR_CLASSNAME}-clipper`;\nconst clipperCreator = ( parent: HTMLElement ): HTMLDivElement => {\n\treturn divCreator( parent, CREATOR_CLASSNAME_CLIPPER );\n};\n\nconst CREATOR_CLASSNAME_BEFORE = `${CREATOR_CLASSNAME}-before`;\nconst beforeCreator = ( parent: HTMLElement ): HTMLDivElement => {\n\treturn divCreator( parent, CREATOR_CLASSNAME_BEFORE );\n};\n\nconst CREATOR_CLASSNAME_AFTER = `${CREATOR_CLASSNAME}-after`;\nconst afterCreator = ( parent: HTMLElement ): HTMLDivElement => {\n\treturn divCreator( parent, CREATOR_CLASSNAME_AFTER );\n};\n\nexport class DThemeWhiteInput extends DThemeWhiteHTMLElement<HTMLInputElement> implements DThemeInput {\n\tCOLOR = 0xffffff;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.017 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || DBaseStates.isReadOnly( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn 0xe5e5e5;\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isInvalid( state ) ) {\n\t\t\treturn DThemeWhiteConstants.INVALID_COLOR;\n\t\t}\n\t\treturn super.getOutlineColor( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn this.getLineHeight();\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 100;\n\t}\n\n\tgetPlaceholder(): string {\n\t\treturn \"\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetCursor(): string {\n\t\treturn \"text\";\n\t}\n\n\tgetEditingFormatter(): ( value: any, caller: any ) => string {\n\t\treturn this.getTextFormatter();\n\t}\n\n\tgetEditingUnformatter(): ( text: string, caller: any ) => any {\n\t\treturn editingUnformatter;\n\t}\n\n\tgetEditingValidator(): ( value: any, caller: any ) => unknown {\n\t\treturn editingValidator;\n\t}\n\n\tgetElementCreator(): DHTMLElementElementCreator<HTMLInputElement> {\n\t\treturn elementCreator;\n\t}\n\n\tgetClipperCreator(): DHTMLElementElementCreator<HTMLDivElement> {\n\t\treturn clipperCreator;\n\t}\n\n\tgetBeforeCreator(): DHTMLElementElementCreator<HTMLDivElement> {\n\t\treturn beforeCreator;\n\t}\n\n\tgetAfterCreator(): DHTMLElementElementCreator<HTMLDivElement> {\n\t\treturn afterCreator;\n\t}\n\n\tgetSelect(): boolean {\n\t\treturn true;\n\t}\n\n\tprotected getElementStyleMargin( state: DBaseState ): string {\n\t\treturn \"margin: 0.1em 0 0 0;\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeInputNumber } from \"../../d-input-number\";\nimport { DStateAwareOrValueMightBe } from \"../../d-state-aware\";\nimport { DThemeWhiteInput } from \"./d-theme-white-input\";\n\nexport class DThemeWhiteInputNumber extends DThemeWhiteInput implements DThemeInputNumber {\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetStep(): number | null {\n\t\treturn 1;\n\t}\n\n\tgetMin(): number | null {\n\t\treturn null;\n\t}\n\n\tgetMax(): number | null {\n\t\treturn null;\n\t}\n\n\tnewTextValue(): DStateAwareOrValueMightBe<number> {\n\t\treturn 0;\n\t}\n\n\tgetTextValue( state: DBaseState ): number {\n\t\treturn 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeInputInteger } from \"../../d-input-integer\";\nimport { DInputNumber } from \"../../d-input-number\";\nimport { DThemeWhiteInputNumber } from \"./d-theme-white-input-number\";\n\nconst editingUnformatter = ( text: string ): number => {\n\treturn parseInt( text, 10 );\n};\n\nexport class DThemeWhiteInputInteger extends DThemeWhiteInputNumber implements DThemeInputInteger {\n\tgetEditingUnformatter(): ( text: string, caller: DInputNumber ) => number {\n\t\treturn editingUnformatter;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputInteger } from \"../theme/white/d-theme-white-input-integer\";\n\nexport const loadThemeWhiteInputInteger = () => {\n\tDThemeWhite.set( \"DInputInteger\", DThemeWhiteInputInteger );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeInputLabel } from \"../../d-input-label\";\nimport { DThemeWhiteText } from \"./d-theme-white-text\";\n\nexport class DThemeWhiteInputLabel extends DThemeWhiteText implements DThemeInputLabel {\n\tgetTextAlignHorizontal() {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 60;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn this.getLineHeight();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputLabel } from \"../theme/white/d-theme-white-input-label\";\n\nexport const loadThemeWhiteInputLabel = () => {\n\tDThemeWhite.set( \"DInputLabel\", DThemeWhiteInputLabel );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputNumber } from \"../../d-input-number\";\nimport { DThemeInputReal } from \"../../d-input-real\";\nimport { DThemeWhiteInputNumber } from \"./d-theme-white-input-number\";\n\nconst editingUnformatter = ( text: string ): number => {\n\treturn parseFloat( text );\n};\n\nexport class DThemeWhiteInputReal extends DThemeWhiteInputNumber implements DThemeInputReal {\n\tgetStep(): number | null {\n\t\treturn 0.1;\n\t}\n\n\tgetEditingUnformatter(): ( text: string, caller: DInputNumber ) => number {\n\t\treturn editingUnformatter;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputReal } from \"../theme/white/d-theme-white-input-real\";\n\nexport const loadThemeWhiteInputReal = () => {\n\tDThemeWhite.set( \"DInputReal\", DThemeWhiteInputReal );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeInputText } from \"../../d-input-text\";\nimport { DStateAwareOrValueMightBe } from \"../../d-state-aware\";\nimport { DThemeWhiteInput } from \"./d-theme-white-input\";\n\nexport class DThemeWhiteInputText extends DThemeWhiteInput implements DThemeInputText {\n\tnewTextValue(): DStateAwareOrValueMightBe<string> {\n\t\treturn \"\";\n\t}\n\n\tgetTextValue( state: DBaseState ): string {\n\t\treturn \"\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteInputText } from \"../theme/white/d-theme-white-input-text\";\n\nexport const loadThemeWhiteInputText = () => {\n\tDThemeWhite.set( \"DInputText\", DThemeWhiteInputText );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadThemeWhiteInputAndLabel } from \"./load-theme-white-input-and-label\";\nimport { loadThemeWhiteInputInteger } from \"./load-theme-white-input-integer\";\nimport { loadThemeWhiteInputLabel } from \"./load-theme-white-input-label\";\nimport { loadThemeWhiteInputReal } from \"./load-theme-white-input-real\";\nimport { loadThemeWhiteInputText } from \"./load-theme-white-input-text\";\n\nexport const loadThemeWhiteInputAll = () => {\n\tloadThemeWhiteInputAndLabel();\n\tloadThemeWhiteInputInteger();\n\tloadThemeWhiteInputLabel();\n\tloadThemeWhiteInputReal();\n\tloadThemeWhiteInputText();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteLayout } from \"../theme/white/d-theme-white-layout\";\nimport { DThemeWhiteLayoutHorizontal } from \"../theme/white/d-theme-white-layout-horizontal\";\nimport { DThemeWhiteLayoutSpace } from \"../theme/white/d-theme-white-layout-space\";\nimport { DThemeWhiteLayoutVertical } from \"../theme/white/d-theme-white-layout-vertical\";\n\nexport const loadThemeWhiteLayout = () => {\n\tDThemeWhite.set( \"DLayout\", DThemeWhiteLayout );\n\tDThemeWhite.set( \"DLayoutHorizontal\", DThemeWhiteLayoutHorizontal );\n\tDThemeWhite.set( \"DLayoutSpace\", DThemeWhiteLayoutSpace );\n\tDThemeWhite.set( \"DLayoutVertical\", DThemeWhiteLayoutVertical );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteList } from \"../theme/white/d-theme-white-list\";\nimport { DThemeWhiteListItem } from \"../theme/white/d-theme-white-list-item\";\nimport { DThemeWhiteListItemSeparator } from \"../theme/white/d-theme-white-list-item-separator\";\n\nexport const loadThemeWhiteList = () => {\n\tDThemeWhite.set( \"DListItemSeparator\", DThemeWhiteListItemSeparator );\n\tDThemeWhite.set( \"DListItem\", DThemeWhiteListItem );\n\tDThemeWhite.set( \"DList\", DThemeWhiteList );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeMenuBar } from \"../../d-menu-bar\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteLayoutHorizontal } from \"./d-theme-white-layout-horizontal\";\n\nexport class DThemeWhiteMenuBar extends DThemeWhiteLayoutHorizontal implements DThemeMenuBar {\n\tgetBackgroundColor() {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeMenuBarItem } from \"../../d-menu-bar-item\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteMenuBarItem extends DThemeWhiteButton implements DThemeMenuBarItem {\n\tCOLOR = 0xffffff;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.017 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.034 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else if( DBaseStates.isPressed( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetBorderColor(): number | null {\n\t\treturn null;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteMenuBar } from \"../theme/white/d-theme-white-menu-bar\";\nimport { DThemeWhiteMenuBarItem } from \"../theme/white/d-theme-white-menu-bar-item\";\nimport { loadThemeWhiteMenu } from \"./load-theme-white-menu\";\n\nexport const loadThemeWhiteMenuBar = () => {\n\tDThemeWhite.set( \"DMenuBarItem\", DThemeWhiteMenuBarItem );\n\tDThemeWhite.set( \"DMenuBar\", DThemeWhiteMenuBar );\n\tloadThemeWhiteMenu();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeMenuSided } from \"../../d-menu-sided\";\nimport { DThemeWhitePane } from \"./d-theme-white-pane\";\n\nexport class DThemeWhiteMenuSided extends DThemeWhitePane implements DThemeMenuSided {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn 0xffffff;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeMenuSidedContent } from \"../../d-menu-sided-content\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteMenuSidedContent extends DThemeWhiteLayoutVertical implements DThemeMenuSidedContent {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tgetPaddingTop(): number {\n\t\treturn 16;\n\t}\n\n\tgetPaddingBottom(): number {\n\t\treturn 16;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemCheck } from \"./d-theme-white-menu-item-check\";\n\nexport class DThemeWhiteMenuSidedItemCheck extends DThemeWhiteMenuItemCheck {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandable } from \"./d-theme-white-menu-item-expandable\";\n\nexport class DThemeWhiteMenuSidedItemExpandable extends DThemeWhiteMenuItemExpandable {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemCheck } from \"./d-theme-white-menu-item-expandable-item-check\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemCheck extends DThemeWhiteMenuItemExpandableItemCheck {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemLink } from \"./d-theme-white-menu-item-expandable-item-link\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemLink extends DThemeWhiteMenuItemExpandableItemLink {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemMenu } from \"./d-theme-white-menu-item-expandable-item-menu\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemMenu extends DThemeWhiteMenuItemExpandableItemMenu {\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemSeparator } from \"./d-theme-white-menu-item-expandable-item-separator\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemSeparator extends DThemeWhiteMenuItemExpandableItemSeparator {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemSpace } from \"./d-theme-white-menu-item-expandable-item-space\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemSpace extends DThemeWhiteMenuItemExpandableItemSpace {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemExpandableItemText } from \"./d-theme-white-menu-item-expandable-item-text\";\n\nexport class DThemeWhiteMenuSidedItemExpandableItemText extends DThemeWhiteMenuItemExpandableItemText {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemLink } from \"./d-theme-white-menu-item-link\";\n\nexport class DThemeWhiteMenuSidedItemLink extends DThemeWhiteMenuItemLink {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemMenu } from \"./d-theme-white-menu-item-menu\";\n\nexport class DThemeWhiteMenuSidedItemMenu extends DThemeWhiteMenuItemMenu {\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemSeparator } from \"./d-theme-white-menu-item-separator\";\n\nexport class DThemeWhiteMenuSidedItemSeparator extends DThemeWhiteMenuItemSeparator {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemSpace } from \"./d-theme-white-menu-item-space\";\n\nexport class DThemeWhiteMenuSidedItemSpace extends DThemeWhiteMenuItemSpace {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhiteMenuItemText } from \"./d-theme-white-menu-item-text\";\n\nexport class DThemeWhiteMenuSidedItemText extends DThemeWhiteMenuItemText {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteMenuSided } from \"../theme/white/d-theme-white-menu-sided\";\nimport { DThemeWhiteMenuSidedContent } from \"../theme/white/d-theme-white-menu-sided-content\";\nimport { DThemeWhiteMenuSidedItemCheck } from \"../theme/white/d-theme-white-menu-sided-item-check\";\nimport { DThemeWhiteMenuSidedItemExpandable } from \"../theme/white/d-theme-white-menu-sided-item-expandable\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemCheck\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-check\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemLink\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-link\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemMenu\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-menu\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemSeparator\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-separator\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemSpace\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-space\";\nimport {\n\tDThemeWhiteMenuSidedItemExpandableItemText\n} from \"../theme/white/d-theme-white-menu-sided-item-expandable-item-text\";\nimport { DThemeWhiteMenuSidedItemLink } from \"../theme/white/d-theme-white-menu-sided-item-link\";\nimport { DThemeWhiteMenuSidedItemMenu } from \"../theme/white/d-theme-white-menu-sided-item-menu\";\nimport { DThemeWhiteMenuSidedItemSeparator } from \"../theme/white/d-theme-white-menu-sided-item-separator\";\nimport { DThemeWhiteMenuSidedItemSpace } from \"../theme/white/d-theme-white-menu-sided-item-space\";\nimport { DThemeWhiteMenuSidedItemText } from \"../theme/white/d-theme-white-menu-sided-item-text\";\n\nexport const loadThemeWhiteMenuSided = () => {\n\tDThemeWhite.set( \"DMenuSided\", DThemeWhiteMenuSided );\n\tDThemeWhite.set( \"DMenuSidedContent\", DThemeWhiteMenuSidedContent );\n\n\tDThemeWhite.set( \"DMenuSidedItemCheck\", DThemeWhiteMenuSidedItemCheck );\n\tDThemeWhite.set( \"DMenuSidedItemLink\", DThemeWhiteMenuSidedItemLink );\n\tDThemeWhite.set( \"DMenuSidedItemMenu\", DThemeWhiteMenuSidedItemMenu );\n\tDThemeWhite.set( \"DMenuSidedItemSeparator\", DThemeWhiteMenuSidedItemSeparator );\n\tDThemeWhite.set( \"DMenuSidedItemSpace\", DThemeWhiteMenuSidedItemSpace );\n\tDThemeWhite.set( \"DMenuSidedItemText\", DThemeWhiteMenuSidedItemText );\n\n\tDThemeWhite.set( \"DMenuSidedItemExpandable\", DThemeWhiteMenuSidedItemExpandable );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemCheck\", DThemeWhiteMenuSidedItemExpandableItemCheck );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemLink\", DThemeWhiteMenuSidedItemExpandableItemLink );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemMenu\", DThemeWhiteMenuSidedItemExpandableItemMenu );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemSeparator\", DThemeWhiteMenuSidedItemExpandableItemSeparator );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemSpace\", DThemeWhiteMenuSidedItemExpandableItemSpace );\n\tDThemeWhite.set( \"DMenuSidedItemExpandableItemText\", DThemeWhiteMenuSidedItemExpandableItemText );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeNote } from \"../../d-note\";\nimport { DThemeWhiteText } from \"./d-theme-white-text\";\n\nexport class DThemeWhiteNote extends DThemeWhiteText implements DThemeNote {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.NONE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteNote } from \"../theme/white/d-theme-white-note\";\n\nexport const loadThemeWhiteNote = () => {\n\tDThemeWhite.set( \"DNote\", DThemeWhiteNote );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteContent extends DThemeWhiteBase {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeScrollBar } from \"../../d-scroll-bar\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\n\nexport class DThemeWhiteScrollBar extends DThemeWhiteBase implements DThemeScrollBar {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn 0x000000;\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn 0;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 13;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 13;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeScrollBarThumb } from \"../../d-scroll-bar-thumb\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteBase } from \"./d-theme-white-base\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\n\nexport class DThemeWhiteScrollBarThumb extends DThemeWhiteBase implements DThemeScrollBarThumb {\n\tCOLOR = UtilRgb.darken( DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR, 0.25 );\n\n\tgetBackgroundColor( state: DBaseState ): number {\n\t\tif( DBaseStates.isHovered( state ) || DBaseStates.isDragging( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\tif( DBaseStates.isHovered( state ) || DBaseStates.isDragging( state ) ) {\n\t\t\treturn 1.0;\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_ALPHA;\n\t\t}\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetBorderAlpha( state: DBaseState ): number {\n\t\treturn 0;\n\t}\n\n\tgetBorderWidth( state: DBaseState ): number {\n\t\treturn 1;\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn 13;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 13;\n\t}\n\n\tgetMinimumSize(): number {\n\t\treturn 16;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteScrollBar } from \"../theme/white/d-theme-white-scroll-bar\";\nimport { DThemeWhiteScrollBarThumb } from \"../theme/white/d-theme-white-scroll-bar-thumb\";\n\nexport const loadThemeWhiteScrollBar = () => {\n\tDThemeWhite.set( \"DScrollBar\", DThemeWhiteScrollBar );\n\tDThemeWhite.set( \"DScrollBarThumb\", DThemeWhiteScrollBarThumb );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteContent } from \"../theme/white/d-theme-white-content\";\nimport { DThemeWhitePane } from \"../theme/white/d-theme-white-pane\";\nimport { loadThemeWhiteScrollBar } from \"./load-theme-white-scroll-bar\";\n\nexport const loadThemeWhitePane = () => {\n\tDThemeWhite.set( \"DPane\", DThemeWhitePane );\n\tDThemeWhite.set( \"DContent\", DThemeWhiteContent );\n\tloadThemeWhiteScrollBar();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeSelect } from \"../../d-select\";\nimport { DThemeWhiteDropdown } from \"./d-theme-white-dropdown\";\n\nexport class DThemeWhiteSelect extends DThemeWhiteDropdown implements DThemeSelect {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteSelect } from \"../theme/white/d-theme-white-select\";\nimport { loadThemeWhiteDropdown } from \"./load-theme-white-dropdown\";\n\nexport const loadThemeWhiteSelect = () => {\n\tDThemeWhite.set( \"DSelect\", DThemeWhiteSelect );\n\tloadThemeWhiteDropdown();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DThemeTable } from \"../../d-table\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteLayoutVertical } from \"./d-theme-white-layout-vertical\";\n\nexport class DThemeWhiteTable extends DThemeWhiteLayoutVertical implements DThemeTable {\n\tgetBackgroundColor() {\n\t\treturn DThemeWhiteConstants.BACKGROUND_COLOR;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn 0xdddddd;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBody } from \"../../d-table-body\";\nimport { DThemeWhitePane } from \"./d-theme-white-pane\";\n\nexport class DThemeWhiteTableBody extends DThemeWhitePane implements DThemeTableBody {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.TOP;\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetRowHeight(): number {\n\t\treturn 30;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteFont } from \"./d-theme-white-font\";\n\nexport class DThemeWhiteTableBodyCells {\n\tstatic readonly IMAGE_TINT_COLOR_FOCUSED = UtilRgb.darken( DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR, 0.1 );\n\n\tstatic getBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isInvalid( state ) ) {\n\t\t\treturn DThemeWhiteConstants.INVALID_COLOR;\n\t\t} else if( state & DBaseState.ACTIVE_IN ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tstatic getBackgroundAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\tif( DBaseStates.isPressed( state ) || DBaseStates.isFocused( state ) ) {\n\t\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_ALPHA;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tstatic getBorderColor( state: DBaseState ): number | null {\n\t\treturn 0xf6f6f6;\n\t}\n\n\tstatic getBorderAlign( state: DBaseState ): number {\n\t\treturn 0.5;\n\t}\n\n\tstatic getBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DBorderMask.TOP_BOTTOM;\n\t}\n\n\tstatic getColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteFont.getColor( state );\n\t}\n\n\tstatic getAlpha( state: DBaseState ): number {\n\t\tif( ! DBaseStates.isDisabled( state ) ) {\n\t\t\treturn DThemeWhiteFont.getAlpha( state );\n\t\t}\n\t\treturn 0;\n\t}\n\n\tstatic getImageTintColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) || DBaseStates.isReadOnly( state ) || ! DBaseStates.isActive( state ) ) {\n\t\t\tif( DBaseStates.isFocused( state ) ) {\n\t\t\t\treturn this.IMAGE_TINT_COLOR_FOCUSED;\n\t\t\t} else {\n\t\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_COLOR;\n\t\t\t}\n\t\t} else {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t}\n\t}\n\n\tstatic getOutlineAlign( state: DBaseState ): number {\n\t\treturn -2;\n\t}\n\n\tstatic getHeight(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tstatic getCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellCheck } from \"../../d-table-body-cell-check\";\nimport { DThemeWhiteButtonCheck } from \"./d-theme-white-button-check\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellCheck extends DThemeWhiteButtonCheck implements DThemeTableBodyCellCheck {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetImageTintColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getImageTintColor( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellColor } from \"../../d-table-body-cell-color\";\nimport { DThemeWhiteButtonColor } from \"./d-theme-white-button-color\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellColor extends DThemeWhiteButtonColor implements DThemeTableBodyCellColor {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DPickerDates } from \"../../d-picker-dates\";\nimport { DTableBodyCellDate, DThemeTableBodyCellDate } from \"../../d-table-body-cell-date\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nconst formatter = ( value: Date ): string => {\n\treturn DPickerDates.format( value );\n};\n\nexport class DThemeWhiteTableBodyCellDate extends DThemeWhiteButton implements DThemeTableBodyCellDate {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state);\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellDate ) => string {\n\t\treturn formatter;\n\t}\n\n\tgetTextValue( state: DBaseState ): Date {\n\t\treturn new Date();\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DPickerDatetimes } from \"../../d-picker-datetimes\";\nimport { DTableBodyCellDatetime, DThemeTableBodyCellDatetime } from \"../../d-table-body-cell-datetime\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nconst formatter = ( value: Date, caller: DTableBodyCellDatetime ): string => {\n\treturn DPickerDatetimes.format( value, caller.getDatetimeMask() );\n};\n\nexport class DThemeWhiteTableBodyCellDatetime extends DThemeWhiteButton implements DThemeTableBodyCellDatetime {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellDatetime ) => string {\n\t\treturn formatter;\n\t}\n\n\tgetTextValue( state: DBaseState ): Date {\n\t\treturn new Date();\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DTableBodyCellIndex, DThemeTableBodyCellIndex } from \"../../d-table-body-cell-index\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nconst formatter = ( index: unknown ): string => {\n\treturn String( Number( index ) + 1 );\n};\n\nexport class DThemeWhiteTableBodyCellIndex extends DThemeWhiteImageBase implements DThemeTableBodyCellIndex {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetTextFormatter(): ( value: number, caller: DTableBodyCellIndex ) => string {\n\t\treturn formatter;\n\t}\n\n\tgetTextValue( state: DBaseState ): number {\n\t\treturn 0;\n\t}\n\n\tnewTextValue(): number {\n\t\treturn 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellInputInteger } from \"../../d-table-body-cell-input-integer\";\nimport { DThemeWhiteInputInteger } from \"./d-theme-white-input-integer\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellInputInteger extends DThemeWhiteInputInteger\n\timplements DThemeTableBodyCellInputInteger {\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn super.getOutlineColor( state );\n\t}\n\n\tgetOutlineAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getOutlineAlign( state );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellInputReal } from \"../../d-table-body-cell-input-real\";\nimport { DThemeWhiteInputReal } from \"./d-theme-white-input-real\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellInputReal extends DThemeWhiteInputReal\n\timplements DThemeTableBodyCellInputReal {\n\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.RIGHT;\n\t}\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn super.getOutlineColor( state );\n\t}\n\n\tgetOutlineAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getOutlineAlign( state );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellInputText } from \"../../d-table-body-cell-input-text\";\nimport { DThemeWhiteInputText } from \"./d-theme-white-input-text\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellInputText extends DThemeWhiteInputText\n\timplements DThemeTableBodyCellInputText {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetOutlineColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn super.getOutlineColor( state );\n\t}\n\n\tgetOutlineAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getOutlineAlign( state );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellSelectDialog } from \"../../d-table-body-cell-select-dialog\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellSelectDialog extends DThemeWhiteButton\n\timplements DThemeTableBodyCellSelectDialog {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellSelectFetcher } from \"../../d-table-body-cell-select-fetcher\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellSelectFetcher extends DThemeWhiteButton\n\timplements DThemeTableBodyCellSelectFetcher {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Texture } from \"pixi.js\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellSelectMenu } from \"../../d-table-body-cell-select-menu\";\nimport { DThemeWhiteSelect } from \"./d-theme-white-select\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellSelectMenu extends DThemeWhiteSelect\n\timplements DThemeTableBodyCellSelectMenu {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetImageSource( state: DBaseState ): Texture | DisplayObject | null {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableBodyCellText } from \"../../d-table-body-cell-text\";\nimport { DThemeWhiteImageBase } from \"./d-theme-white-image-base\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nexport class DThemeWhiteTableBodyCellText extends DThemeWhiteImageBase implements DThemeTableBodyCellText {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBorderMask } from \"../../d-border\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DPickerTimes } from \"../../d-picker-times\";\nimport { DTableBodyCellTime, DThemeTableBodyCellTime } from \"../../d-table-body-cell-time\";\nimport { DThemeWhiteButton } from \"./d-theme-white-button\";\nimport { DThemeWhiteTableBodyCells } from \"./d-theme-white-table-body-cells\";\n\nconst formatter = ( value: Date, caller: DTableBodyCellTime ): string => {\n\treturn DPickerTimes.format( value, caller.getDatetimeMask() );\n};\n\nexport class DThemeWhiteTableBodyCellTime extends DThemeWhiteButton\n\timplements DThemeTableBodyCellTime {\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundColor( state );\n\t}\n\n\tgetBackgroundAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBackgroundAlpha( state );\n\t}\n\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn DThemeWhiteTableBodyCells.getBorderColor( state );\n\t}\n\n\tgetBorderAlign( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getBorderAlign( state );\n\t}\n\n\tgetBorderMask( state: DBaseState ): DBorderMask {\n\t\treturn DThemeWhiteTableBodyCells.getBorderMask( state );\n\t}\n\n\tgetColor( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getColor( state );\n\t}\n\n\tgetAlpha( state: DBaseState ): number {\n\t\treturn DThemeWhiteTableBodyCells.getAlpha( state );\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn DThemeWhiteTableBodyCells.getHeight();\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DThemeWhiteTableBodyCells.getCornerMask();\n\t}\n\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellTime ) => string {\n\t\treturn formatter;\n\t}\n\n\tgetTextValue( state: DBaseState ): Date {\n\t\treturn new Date();\n\t}\n\n\tnewTextValue(): Date {\n\t\treturn new Date();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseInteractive } from \"../../d-base-interactive\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DThemeTableRow } from \"../../d-table-row\";\nimport { DThemeWhiteLayoutHorizontal } from \"./d-theme-white-layout-horizontal\";\n\nexport class DThemeWhiteTableRow extends DThemeWhiteLayoutHorizontal implements DThemeTableRow {\n\tgetBorderColor( state: DBaseState ): number | null {\n\t\treturn null;\n\t}\n\n\tgetCornerMask(): number {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetMargin(): number {\n\t\treturn 0;\n\t}\n\n\tgetInteractive(): DBaseInteractive {\n\t\treturn DBaseInteractive.BOTH;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeTableBodyRow } from \"../../d-table-body-row\";\nimport { DThemeWhiteTableRow } from \"./d-theme-white-table-row\";\n\nexport class DThemeWhiteTableBodyRow extends DThemeWhiteTableRow implements DThemeTableBodyRow {\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeTableBodyRow } from \"../../d-table-body-row\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteTableBodyRow } from \"./d-theme-white-table-body-row\";\n\nexport class DThemeWhiteTableBodyRowEven extends DThemeWhiteTableBodyRow implements DThemeTableBodyRow {\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn 0xffffff;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_BLENDED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_BLENDED;\n\t\t} else {\n\t\t\treturn 0xffffff;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DThemeTableBodyRow } from \"../../d-table-body-row\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteTableBodyRow } from \"./d-theme-white-table-body-row\";\n\nexport class DThemeWhiteTableBodyRowOdd extends DThemeWhiteTableBodyRow implements DThemeTableBodyRow {\n\tCOLOR = UtilRgb.darken( 0xffffff, 0.017 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn this.COLOR;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_BLENDED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn DThemeWhiteConstants.WEAK_HIGHLIGHT_BLENDED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"../../d-base-state\";\nimport { DBaseStates } from \"../../d-base-states\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DThemeTableHeader } from \"../../d-table-header\";\nimport { UtilRgb } from \"../../util/util-rgb\";\nimport { DThemeWhiteConstants } from \"./d-theme-white-constants\";\nimport { DThemeWhiteTableRow } from \"./d-theme-white-table-row\";\n\nexport class DThemeWhiteTableHeader extends DThemeWhiteTableRow implements DThemeTableHeader {\n\tCOLOR = 0xf9f9f9;\n\tCOLOR_HOVERED = UtilRgb.darken( this.COLOR, 0.017 );\n\tCOLOR_PRESSED = UtilRgb.darken( this.COLOR, 0.034 );\n\n\tgetBackgroundColor( state: DBaseState ): number | null {\n\t\tif( DBaseStates.isDisabled( state ) ) {\n\t\t\treturn null;\n\t\t} else if( DBaseStates.isActive( state ) ) {\n\t\t\treturn DThemeWhiteConstants.HIGHLIGHT_COLOR;\n\t\t} else if( DBaseStates.isPressed( state ) ) {\n\t\t\treturn this.COLOR_PRESSED;\n\t\t} else if( DBaseStates.isFocused( state ) || DBaseStates.isHovered( state ) ) {\n\t\t\treturn this.COLOR_HOVERED;\n\t\t} else {\n\t\t\treturn this.COLOR;\n\t\t}\n\t}\n\n\tgetWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn 30;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"../../d-align-horizontal\";\nimport { DBaseState } from \"../../d-base-state\";\nimport { DCoordinate } from \"../../d-coordinate\";\nimport { DCornerMask } from \"../../d-corner\";\nimport { DStateAwareOrValueMightBe } from \"../../d-state-aware\";\nimport { DThemeTableHeaderCell } from \"../../d-table-header-cell\";\nimport { DThemeWhiteTextBase } from \"./d-theme-white-text-base\";\n\nexport class DThemeWhiteTableHeaderCell extends DThemeWhiteTextBase implements DThemeTableHeaderCell {\n\tgetTextAlignHorizontal(): DAlignHorizontal {\n\t\treturn DAlignHorizontal.CENTER;\n\t}\n\n\tgetCornerMask(): DCornerMask {\n\t\treturn DCornerMask.ALL;\n\t}\n\n\tgetHeight(): DCoordinate {\n\t\treturn \"padding\";\n\t}\n\n\tgetPaddingLeft(): number {\n\t\treturn 10;\n\t}\n\n\tgetPaddingRight(): number {\n\t\treturn 10;\n\t}\n\n\tgetTextValue( state: DBaseState ): string | null {\n\t\treturn null;\n\t}\n\n\tnewTextValue(): DStateAwareOrValueMightBe<string | null> {\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteTable } from \"../theme/white/d-theme-white-table\";\nimport { DThemeWhiteTableBody } from \"../theme/white/d-theme-white-table-body\";\nimport { DThemeWhiteTableBodyCellCheck } from \"../theme/white/d-theme-white-table-body-cell-check\";\nimport { DThemeWhiteTableBodyCellColor } from \"../theme/white/d-theme-white-table-body-cell-color\";\nimport { DThemeWhiteTableBodyCellDate } from \"../theme/white/d-theme-white-table-body-cell-date\";\nimport { DThemeWhiteTableBodyCellDatetime } from \"../theme/white/d-theme-white-table-body-cell-datetime\";\nimport { DThemeWhiteTableBodyCellIndex } from \"../theme/white/d-theme-white-table-body-cell-index\";\nimport { DThemeWhiteTableBodyCellInputInteger } from \"../theme/white/d-theme-white-table-body-cell-input-integer\";\nimport { DThemeWhiteTableBodyCellInputReal } from \"../theme/white/d-theme-white-table-body-cell-input-real\";\nimport { DThemeWhiteTableBodyCellInputText } from \"../theme/white/d-theme-white-table-body-cell-input-text\";\nimport { DThemeWhiteTableBodyCellSelectDialog } from \"../theme/white/d-theme-white-table-body-cell-select-dialog\";\nimport { DThemeWhiteTableBodyCellSelectFetcher } from \"../theme/white/d-theme-white-table-body-cell-select-fetcher\";\nimport { DThemeWhiteTableBodyCellSelectMenu } from \"../theme/white/d-theme-white-table-body-cell-select-menu\";\nimport { DThemeWhiteTableBodyCellText } from \"../theme/white/d-theme-white-table-body-cell-text\";\nimport { DThemeWhiteTableBodyCellTime } from \"../theme/white/d-theme-white-table-body-cell-time\";\nimport { DThemeWhiteTableBodyRow } from \"../theme/white/d-theme-white-table-body-row\";\nimport { DThemeWhiteTableBodyRowEven } from \"../theme/white/d-theme-white-table-body-row-even\";\nimport { DThemeWhiteTableBodyRowOdd } from \"../theme/white/d-theme-white-table-body-row-odd\";\nimport { DThemeWhiteTableHeader } from \"../theme/white/d-theme-white-table-header\";\nimport { DThemeWhiteTableHeaderCell } from \"../theme/white/d-theme-white-table-header-cell\";\nimport { DThemeWhiteTableRow } from \"../theme/white/d-theme-white-table-row\";\nimport { loadThemeWhiteButtonCheck } from \"./load-theme-white-button-check\";\nimport { loadThemeWhiteButtonColor } from \"./load-theme-white-button-color\";\nimport { loadThemeWhiteButtonDate } from \"./load-theme-white-button-date\";\nimport { loadThemeWhiteButtonDatetime } from \"./load-theme-white-button-datetime\";\nimport { loadThemeWhiteDialogSelect } from \"./load-theme-white-dialog-select\";\nimport { loadThemeWhiteInputInteger } from \"./load-theme-white-input-integer\";\nimport { loadThemeWhiteInputReal } from \"./load-theme-white-input-real\";\nimport { loadThemeWhiteInputText } from \"./load-theme-white-input-text\";\nimport { loadThemeWhiteMenu } from \"./load-theme-white-menu\";\n\nexport const loadThemeWhiteTable = () => {\n\tDThemeWhite.set( \"DTableBodyCellCheck\", DThemeWhiteTableBodyCellCheck );\n\tDThemeWhite.set( \"DTableBodyCellColor\", DThemeWhiteTableBodyCellColor );\n\tDThemeWhite.set( \"DTableBodyCellDate\", DThemeWhiteTableBodyCellDate );\n\tDThemeWhite.set( \"DTableBodyCellDatetime\", DThemeWhiteTableBodyCellDatetime );\n\tDThemeWhite.set( \"DTableBodyCellIndex\", DThemeWhiteTableBodyCellIndex );\n\tDThemeWhite.set( \"DTableBodyCellInputInteger\", DThemeWhiteTableBodyCellInputInteger );\n\tDThemeWhite.set( \"DTableBodyCellInputReal\", DThemeWhiteTableBodyCellInputReal );\n\tDThemeWhite.set( \"DTableBodyCellInputText\", DThemeWhiteTableBodyCellInputText );\n\tDThemeWhite.set( \"DTableBodyCellSelectDialog\", DThemeWhiteTableBodyCellSelectDialog );\n\tDThemeWhite.set( \"DTableBodyCellSelectFetcher\", DThemeWhiteTableBodyCellSelectFetcher );\n\tDThemeWhite.set( \"DTableBodyCellSelectMenu\", DThemeWhiteTableBodyCellSelectMenu );\n\tDThemeWhite.set( \"DTableBodyCellText\", DThemeWhiteTableBodyCellText );\n\tDThemeWhite.set( \"DTableBodyCellTime\", DThemeWhiteTableBodyCellTime );\n\tDThemeWhite.set( \"DTableBodyRowEven\", DThemeWhiteTableBodyRowEven );\n\tDThemeWhite.set( \"DTableBodyRowOdd\", DThemeWhiteTableBodyRowOdd );\n\tDThemeWhite.set( \"DTableBodyRow\", DThemeWhiteTableBodyRow );\n\tDThemeWhite.set( \"DTableBody\", DThemeWhiteTableBody );\n\tDThemeWhite.set( \"DTableHeaderCell\", DThemeWhiteTableHeaderCell );\n\tDThemeWhite.set( \"DTableHeader\", DThemeWhiteTableHeader );\n\tDThemeWhite.set( \"DTableRow\", DThemeWhiteTableRow );\n\tDThemeWhite.set( \"DTable\", DThemeWhiteTable );\n\tloadThemeWhiteButtonCheck();\n\tloadThemeWhiteButtonColor();\n\tloadThemeWhiteButtonDate();\n\tloadThemeWhiteButtonDatetime();\n\tloadThemeWhiteInputInteger();\n\tloadThemeWhiteInputReal();\n\tloadThemeWhiteInputText();\n\tloadThemeWhiteDialogSelect();\n\tloadThemeWhiteMenu();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteText } from \"../theme/white/d-theme-white-text\";\n\nexport const loadThemeWhiteText = () => {\n\tDThemeWhite.set( \"DText\", DThemeWhiteText );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadThemeWhite } from \"./load-theme-white\";\nimport { loadThemeWhiteBase } from \"./load-theme-white-base\";\nimport { loadThemeWhiteBoard } from \"./load-theme-white-board\";\nimport { loadThemeWhiteButtonAll } from \"./load-theme-white-button-all\";\nimport { loadThemeWhiteCanvasContainer } from \"./load-theme-white-canvas-container\";\nimport { loadThemeWhiteChart } from \"./load-theme-white-chart\";\nimport { loadThemeWhiteDiagram } from \"./load-theme-white-diagram\";\nimport { loadThemeWhiteDiagramEditor } from \"./load-theme-white-diagram-editor\";\nimport { loadThemeWhiteDialogAll } from \"./load-theme-white-dialog-all\";\nimport { loadThemeWhiteDropdown } from \"./load-theme-white-dropdown\";\nimport { loadThemeWhiteExpandable } from \"./load-theme-white-expandable\";\nimport { loadThemeWhiteHTMLElement } from \"./load-theme-white-html-element\";\nimport { loadThemeWhiteImage } from \"./load-theme-white-image\";\nimport { loadThemeWhiteInputAll } from \"./load-theme-white-input-all\";\nimport { loadThemeWhiteLayout } from \"./load-theme-white-layout\";\nimport { loadThemeWhiteList } from \"./load-theme-white-list\";\nimport { loadThemeWhiteMenu } from \"./load-theme-white-menu\";\nimport { loadThemeWhiteMenuBar } from \"./load-theme-white-menu-bar\";\nimport { loadThemeWhiteMenuSided } from \"./load-theme-white-menu-sided\";\nimport { loadThemeWhiteNote } from \"./load-theme-white-note\";\nimport { loadThemeWhitePane } from \"./load-theme-white-pane\";\nimport { loadThemeWhitePickerColor } from \"./load-theme-white-picker-color\";\nimport { loadThemeWhitePickerColorGradient } from \"./load-theme-white-picker-color-gradient\";\nimport { loadThemeWhitePickerDate } from \"./load-theme-white-picker-date\";\nimport { loadThemeWhitePickerDatetime } from \"./load-theme-white-picker-datetime\";\nimport { loadThemeWhitePickerTime } from \"./load-theme-white-picker-time\";\nimport { loadThemeWhiteSelect } from \"./load-theme-white-select\";\nimport { loadThemeWhiteTable } from \"./load-theme-white-table\";\nimport { loadThemeWhiteText } from \"./load-theme-white-text\";\n\nexport const loadThemeWhiteAll = () => {\n\tloadThemeWhite();\n\tloadThemeWhiteBase();\n\tloadThemeWhiteBoard();\n\tloadThemeWhiteButtonAll();\n\tloadThemeWhiteCanvasContainer();\n\tloadThemeWhiteChart();\n\tloadThemeWhiteDiagramEditor();\n\tloadThemeWhiteDiagram();\n\tloadThemeWhiteDialogAll();\n\tloadThemeWhiteDropdown();\n\tloadThemeWhiteExpandable();\n\tloadThemeWhiteHTMLElement();\n\tloadThemeWhiteImage();\n\tloadThemeWhiteInputAll();\n\tloadThemeWhiteLayout();\n\tloadThemeWhiteList();\n\tloadThemeWhiteMenuBar();\n\tloadThemeWhiteMenuSided();\n\tloadThemeWhiteMenu();\n\tloadThemeWhiteNote();\n\tloadThemeWhitePane();\n\tloadThemeWhitePickerColorGradient();\n\tloadThemeWhitePickerColor();\n\tloadThemeWhitePickerDate();\n\tloadThemeWhitePickerDatetime();\n\tloadThemeWhitePickerTime();\n\tloadThemeWhiteSelect();\n\tloadThemeWhiteTable();\n\tloadThemeWhiteText();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteChart } from \"../theme/white/d-theme-white-chart\";\nimport { DThemeWhiteChartAxisX } from \"../theme/white/d-theme-white-chart-axis-x\";\nimport { DThemeWhiteChartAxisY } from \"../theme/white/d-theme-white-chart-axis-y\";\nimport { DThemeWhiteChartCoordinateLinear } from \"../theme/white/d-theme-white-chart-coordinate-linear\";\n\nexport const loadThemeWhiteChart = () => {\n\tDThemeWhite.set( \"DChart\", DThemeWhiteChart );\n\tDThemeWhite.set( \"DChartAxisX\", DThemeWhiteChartAxisX );\n\tDThemeWhite.set( \"DChartAxisY\", DThemeWhiteChartAxisY );\n\tDThemeWhite.set( \"DChartCoordinateLinear\", DThemeWhiteChartCoordinateLinear );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeWhite } from \"../theme/white/d-theme-white\";\nimport { DThemeWhiteHTMLElement } from \"../theme/white/d-theme-white-html-element\";\n\nexport const loadThemeWhiteHTMLElement = () => {\n\tDThemeWhite.set( \"DHTMLElement\", DThemeWhiteHTMLElement );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { loadMenuItemAll } from \"./load-menu-item-all\";\nimport { loadShapeAll } from \"./load-shape-all\";\nimport { loadThemeWhiteAll } from \"./load-theme-white-all\";\n\nexport const loadAll = () => {\n\tloadMenuItemAll();\n\tloadThemeWhiteAll();\n\tloadShapeAll();\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DDiagramSerializedSnapGrid } from \"../d-diagram-serialized\";\nimport { ESnapperResult } from \"./e-snapper-result\";\n\nexport class ESnapperGrid extends utils.EventEmitter {\n\tprotected _isEnabled: boolean;\n\tprotected _size: number;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._isEnabled = true;\n\t\tthis._size = 10;\n\t}\n\n\ttoggle(): boolean {\n\t\tthis._isEnabled = ! this._isEnabled;\n\t\tthis.emit( \"change\", this );\n\t\treturn this._isEnabled;\n\t}\n\n\tenable(): void {\n\t\tif( this._isEnabled !== true ) {\n\t\t\tthis._isEnabled = true;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tdisable(): void {\n\t\tif( this._isEnabled !== false ) {\n\t\t\tthis._isEnabled = false;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this._isEnabled;\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tset size( size: number ) {\n\t\tif( this._size !== size ) {\n\t\t\tthis._size = size;\n\t\t\tthis.emit( \"change\", size, this );\n\t\t}\n\t}\n\n\tsnap( value: number, result: ESnapperResult ): void {\n\t\tif( this._isEnabled ) {\n\t\t\tconst size = this._size;\n\t\t\tresult.set( value, Math.round( value / size ) * size );\n\t\t}\n\t}\n\n\treset(): void {\n\t\tthis._isEnabled = true;\n\t\tthis._size = 10;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tserialize(): DDiagramSerializedSnapGrid {\n\t\treturn [\n\t\t\t(this._isEnabled ? 1 : 0),\n\t\t\tthis._size\n\t\t];\n\t}\n\n\tdeserialize( serialized: DDiagramSerializedSnapGrid ): void {\n\t\tif( serialized[ 0 ] !== 0 ) {\n\t\t\tthis.enable();\n\t\t} else {\n\t\t\tthis.disable();\n\t\t}\n\n\t\tthis.size = serialized[ 1 ];\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport class ESnapperResult {\n\tdistance: number;\n\tresult: number;\n\tthreshold: number;\n\n\tconstructor() {\n\t\tthis.distance = NaN;\n\t\tthis.result = 0;\n\t\tthis.threshold = 10;\n\t}\n\n\treset( value: number, scale: number ): void {\n\t\tthis.distance = NaN;\n\t\tthis.result = value;\n\t\tthis.threshold = ( 0.0001 < scale ? 10 / scale : 10 );\n\t}\n\n\tset( value: number, snapped: number ): void {\n\t\tconst newDistance = Math.abs( snapped - value );\n\t\tif( newDistance <= this.threshold ) {\n\t\t\tconst oldDistance = this.distance;\n\t\t\tif( oldDistance !== oldDistance || newDistance < oldDistance ) {\n\t\t\t\tthis.distance = newDistance;\n\t\t\t\tthis.result = snapped;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, IPoint, Matrix, Point, Rectangle, utils } from \"pixi.js\";\nimport { DDiagramSerializedSnap } from \"../d-diagram-serialized\";\nimport { utilIsNaN } from \"../util/util-is-nan\";\nimport { ESnapperGrid } from \"./e-snapper-grid\";\nimport { ESnapperResult } from \"./e-snapper-result\";\nimport { ESnapperResultScale } from \"./e-snapper-result-scale\";\nimport { ESnapperTarget } from \"./e-snapper-target\";\n\nconst EPSILON = 0.00001;\n\nexport interface ESnapperModifier extends DisplayObject {\n\twidth: number;\n\theight: number;\n}\n\nexport enum ESnapperModifierAnchor {\n\tNONE,\n\tTOP_LEFT,\n\tTOP_CENTER,\n\tTOP_RIGHT,\n\tMIDDLE_LEFT,\n\tMIDDLE_RIGHT,\n\tBOTTOM_LEFT,\n\tBOTTOM_CENTER,\n\tBOTTOM_RIGHT,\n\tROTATION\n}\n\nexport interface ESnapperParentCanvas {\n\tscale: {\n\t\tx: number,\n\t\ty: number\n\t};\n\twidth: number;\n\theight: number;\n}\n\nexport interface ESnapperParent {\n\tcanvas: ESnapperParentCanvas | null;\n}\n\nexport class ESnapper extends utils.EventEmitter {\n\tprotected _points: Point[];\n\tprotected _normals: Point[];\n\tprotected _lengths: number[];\n\n\tprotected _workScale: Point;\n\tprotected _workScaleResult: ESnapperResultScale;\n\n\tprotected _workTranslate: Point;\n\n\tprotected _workSnap: Point;\n\tprotected _workSnapRectangle: Rectangle;\n\tprotected _workSnapResultX: ESnapperResult;\n\tprotected _workSnapResultY: ESnapperResult;\n\n\tprotected _parent: ESnapperParent;\n\n\tprotected _isEnabled: boolean;\n\n\tgrid: ESnapperGrid;\n\n\ttarget: ESnapperTarget;\n\n\tconstructor( parent: ESnapperParent ) {\n\t\tsuper();\n\n\t\tthis._points = [\n\t\t\tnew Point(), // Top left\n\t\t\tnew Point(), // Top right\n\t\t\tnew Point(), // Bottom left\n\t\t\tnew Point(), // Bottom right\n\t\t\tnew Point()  // Center\n\t\t];\n\n\t\tthis._normals = [\n\t\t\tnew Point(),\n\t\t\tnew Point()\n\t\t];\n\n\t\tthis._lengths = [\n\t\t\t1,\n\t\t\t1\n\t\t];\n\n\t\tthis._workScale = new Point();\n\t\tthis._workSnapResultX = new ESnapperResult();\n\t\tthis._workSnapResultY = new ESnapperResult();\n\t\tthis._workScaleResult = {\n\t\t\tdistance: 0,\n\t\t\tscale: new Point()\n\t\t};\n\n\t\tthis._workTranslate = new Point();\n\n\t\tthis._workSnapRectangle = new Rectangle();\n\t\tthis._workSnap = new Point();\n\n\t\t// Grid\n\t\tthis.grid = new ESnapperGrid();\n\n\t\t// Target\n\t\tthis.target = new ESnapperTarget();\n\n\t\t//\n\t\tthis._parent = parent;\n\t\tthis._isEnabled = true;\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this._isEnabled;\n\t}\n\n\ttoggle(): boolean {\n\t\tthis._isEnabled = ! this._isEnabled;\n\t\tthis.emit( \"change\", this );\n\t\treturn this._isEnabled;\n\t}\n\n\tenable(): void {\n\t\tif( this._isEnabled !== true ) {\n\t\t\tthis._isEnabled = true;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tdisable(): void {\n\t\tif( this._isEnabled !== false ) {\n\t\t\tthis._isEnabled = false;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tprotected prepare( modifier: ESnapperModifier ): void {\n\t\tmodifier.updateTransform();\n\t\tconst localTransform = modifier.transform.localTransform;\n\t\tconst sx = modifier.width;\n\t\tconst sy = modifier.height;\n\n\t\tconst points = this._points;\n\t\tpoints[ 0 ].set( 0, 0 );\n\t\tpoints[ 1 ].set( sx, 0 );\n\t\tpoints[ 2 ].set( sx, sy );\n\t\tpoints[ 3 ].set( 0, sy );\n\t\tpoints[ 4 ].set( sx * 0.5, sy * 0.5 );\n\n\t\tlocalTransform.apply( points[ 0 ], points[ 0 ] );\n\t\tlocalTransform.apply( points[ 1 ], points[ 1 ] );\n\t\tlocalTransform.apply( points[ 2 ], points[ 2 ] );\n\t\tlocalTransform.apply( points[ 3 ], points[ 3 ] );\n\t\tlocalTransform.apply( points[ 4 ], points[ 4 ] );\n\t}\n\n\tprepareForTranslate( modifier: ESnapperModifier ): void {\n\t\tif( this._isEnabled ) {\n\t\t\tthis.prepare( modifier );\n\t\t}\n\t}\n\n\tprotected snap( point: IPoint, result: IPoint ): IPoint {\n\t\tconst px = point.x;\n\t\tconst py = point.y;\n\t\tconst canvas = this._parent.canvas;\n\t\tconst x = this._workSnapResultX;\n\t\tconst y = this._workSnapResultY;\n\n\t\t// Canvas\n\t\tif( canvas != null ) {\n\t\t\tconst scale = Math.max( canvas.scale.x, canvas.scale.y );\n\t\t\tx.reset( px, scale );\n\t\t\ty.reset( py, scale );\n\t\t\tx.set( px, 0 );\n\t\t\tx.set( px, canvas.width );\n\t\t\ty.set( py, 0 );\n\t\t\ty.set( py, canvas.height );\n\t\t} else {\n\t\t\tx.reset( px, 1 );\n\t\t\ty.reset( py, 1 );\n\t\t}\n\n\t\t// Target\n\t\tthis.target.snap( px, py, x, y );\n\n\t\t// Grid\n\t\tthis.grid.snap( px, x );\n\t\tthis.grid.snap( py, y );\n\n\t\t//\n\t\tresult.x = ( utilIsNaN( x.distance ) ? NaN : x.result );\n\t\tresult.y = ( utilIsNaN( y.distance ) ? NaN : y.result );\n\t\treturn result;\n\t}\n\n\ttoSnapped( point: IPoint, result: IPoint ): IPoint {\n\t\tconst px = point.x;\n\t\tconst py = point.y;\n\t\tif( this._isEnabled ) {\n\t\t\tthis.snap( point, result );\n\t\t\tconst x = result.x;\n\t\t\tconst y = result.y;\n\t\t\tresult.set(\n\t\t\t\tutilIsNaN( x ) ? px : x,\n\t\t\t\tutilIsNaN( y ) ? py : y\n\t\t\t);\n\t\t} else {\n\t\t\tresult.set( px, py );\n\t\t}\n\t\treturn result;\n\t}\n\n\ttoTranslationSnapped( delta: IPoint, result: IPoint ): IPoint {\n\t\tconst dx = delta.x;\n\t\tconst dy = delta.y;\n\t\tlet x = NaN;\n\t\tlet y = NaN;\n\t\tif( this._isEnabled ) {\n\t\t\tconst workTranslate = this._workTranslate;\n\t\t\tconst points = this._points;\n\t\t\tfor( let i = 0, imax = points.length; i < imax; ++i ) {\n\t\t\t\tconst point = points[ i ];\n\t\t\t\tworkTranslate.set( point.x + dx, point.y + dy );\n\t\t\t\tthis.snap( workTranslate, workTranslate );\n\n\t\t\t\t// X\n\t\t\t\tif( ! utilIsNaN( workTranslate.x ) ) {\n\t\t\t\t\tconst newDx = workTranslate.x - point.x;\n\t\t\t\t\tif( utilIsNaN( x ) || Math.abs( newDx - dx ) < Math.abs( x - dx ) ) {\n\t\t\t\t\t\tx = newDx;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Y\n\t\t\t\tif( ! utilIsNaN( workTranslate.y ) ) {\n\t\t\t\t\tconst newDy = workTranslate.y - point.y;\n\t\t\t\t\tif( utilIsNaN( y ) || Math.abs( newDy - dy ) < Math.abs( y - dy ) ) {\n\t\t\t\t\t\ty = newDy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresult.x = ( utilIsNaN( x ) ? dx : x );\n\t\tresult.y = ( utilIsNaN( y ) ? dy : y );\n\t\treturn result;\n\t}\n\n\tprepareForRotate( modifier: ESnapperModifier ): void {\n\t\t//\n\t}\n\n\tprotected getGridSizeRotation(): number {\n\t\treturn 5;\n\t}\n\n\tprotected toRadian( value: number ): number {\n\t\treturn value / 180 * Math.PI;\n\t}\n\n\tprotected toDegree( value: number ): number {\n\t\treturn value / Math.PI * 180;\n\t}\n\n\ttoRotationSnapped( baseRotation: number, deltaRotation: number ): number {\n\t\tif( this._isEnabled ) {\n\t\t\tconst gridSize = this.getGridSizeRotation();\n\t\t\tconst newRotation = baseRotation + deltaRotation;\n\t\t\tconst newRotationDegree = Math.round( this.toDegree( newRotation ) );\n\t\t\tconst newRotationDegreeResidual = newRotationDegree % 90;\n\t\t\tif( Math.abs( newRotationDegreeResidual ) <= gridSize ) {\n\t\t\t\treturn this.toRadian( newRotationDegree - newRotationDegreeResidual ) - baseRotation;\n\t\t\t} else {\n\t\t\t\tif( 90 - gridSize <= newRotationDegreeResidual ) {\n\t\t\t\t\treturn this.toRadian( newRotationDegree + (90 - newRotationDegreeResidual) ) - baseRotation;\n\t\t\t\t} else if( newRotationDegreeResidual <= -90 + gridSize ) {\n\t\t\t\t\treturn this.toRadian( newRotationDegree - (90 + newRotationDegreeResidual) ) - baseRotation;\n\t\t\t\t} else {\n\t\t\t\t\treturn deltaRotation;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn deltaRotation;\n\t}\n\n\tprotected calcNormalizedVector( p0: IPoint, p1: IPoint, result: Point ): number {\n\t\tconst dx = p1.x - p0.x;\n\t\tconst dy = p1.y - p0.y;\n\t\tconst l = Math.sqrt( dx * dx + dy * dy );\n\t\tif( EPSILON < l ) {\n\t\t\tconst d = 1 / l;\n\t\t\tresult.x = dx * d;\n\t\t\tresult.y = dy * d;\n\t\t} else {\n\t\t\tresult.x = 1;\n\t\t\tresult.y = 0;\n\t\t}\n\t\treturn l;\n\t}\n\n\tprepareForScale( modifier: ESnapperModifier, anchor: ESnapperModifierAnchor ): void {\n\t\tif( this._isEnabled ) {\n\t\t\tthis.prepare( modifier );\n\n\t\t\tconst points = this._points;\n\t\t\tconst normals = this._normals;\n\t\t\tconst lengths = this._lengths;\n\t\t\tswitch( anchor ) {\n\t\t\tcase ESnapperModifierAnchor.TOP_LEFT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 1 ], points[ 0 ], normals[ 0 ] );\n\t\t\t\tlengths[ 1 ] = this.calcNormalizedVector( points[ 3 ], points[ 0 ], normals[ 1 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.TOP_CENTER:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 3 ], points[ 0 ], normals[ 0 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.TOP_RIGHT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 0 ], points[ 1 ], normals[ 0 ] );\n\t\t\t\tlengths[ 1 ] = this.calcNormalizedVector( points[ 2 ], points[ 1 ], normals[ 1 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.MIDDLE_LEFT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 1 ], points[ 0 ], normals[ 0 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.NONE:\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.MIDDLE_RIGHT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 0 ], points[ 1 ], normals[ 0 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_LEFT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 2 ], points[ 3 ], normals[ 0 ] );\n\t\t\t\tlengths[ 1 ] = this.calcNormalizedVector( points[ 0 ], points[ 3 ], normals[ 1 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_CENTER:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 0 ], points[ 3 ], normals[ 0 ] );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_RIGHT:\n\t\t\t\tlengths[ 0 ] = this.calcNormalizedVector( points[ 3 ], points[ 2 ], normals[ 0 ] );\n\t\t\t\tlengths[ 1 ] = this.calcNormalizedVector( points[ 1 ], points[ 2 ], normals[ 1 ] );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected setScaleSnappedResult(\n\t\tdistance: number,\n\t\tlength: number,\n\t\tmove: number,\n\t\taxis: boolean, // true => x axis, false y axis\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tif( EPSILON < length ) {\n\t\t\tif( utilIsNaN( result.distance ) || distance < result.distance ) {\n\t\t\t\tresult.distance = distance;\n\t\t\t\tconst newScale = 1 + move / length;\n\t\t\t\tif( axis ) {\n\t\t\t\t\tresult.scale.x = newScale;\n\t\t\t\t} else {\n\t\t\t\t\tresult.scale.y = newScale;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected calcScaleSnapped1D(\n\t\ttransform: Matrix,\n\t\tpoint: Point,\n\t\tnormal: IPoint,\n\t\tlength: number,\n\t\taxis: boolean,\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tconst work = this._workScale;\n\t\ttransform.apply( point, work );\n\t\tconst tx = work.x;\n\t\tconst ty = work.y;\n\t\tthis.snap( work, work );\n\t\tconst x = work.x;\n\t\tconst y = work.y;\n\n\t\t// X coordinate\n\t\tif( ! utilIsNaN( x ) ) {\n\t\t\tconst nx = Math.abs( normal.x );\n\t\t\tif( EPSILON < nx ) {\n\t\t\t\tconst dx = (x - tx) / normal.x;\n\t\t\t\tconst distance = Math.abs( dx );\n\t\t\t\tconst mx = (x - point.x) / normal.x;\n\t\t\t\tthis.setScaleSnappedResult( distance, length, mx, axis, result );\n\t\t\t}\n\t\t}\n\n\t\t// Y coordinate\n\t\tif( ! utilIsNaN( y ) ) {\n\t\t\tconst ny = Math.abs( normal.y );\n\t\t\tif( EPSILON < ny ) {\n\t\t\t\tconst dy = (y - ty) / normal.y;\n\t\t\t\tconst distance = Math.abs( dy );\n\t\t\t\tconst my = (y - point.y) / normal.y;\n\t\t\t\tthis.setScaleSnappedResult( distance, length, my, axis, result );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected calcScaleSnappedX(\n\t\ttransform: Matrix,\n\t\tpoint: Point,\n\t\tnormal: IPoint,\n\t\tlength: number,\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tthis.calcScaleSnapped1D( transform, point, normal, length, true, result );\n\t}\n\n\tprotected calcScaleSnappedY(\n\t\ttransform: Matrix,\n\t\tpoint: Point,\n\t\tnormal: IPoint,\n\t\tlength: number,\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tthis.calcScaleSnapped1D( transform, point, normal, length, false, result );\n\t}\n\n\tcalcScaleSnapped2D(\n\t\ttransform: Matrix, point: Point, normals: IPoint[],\n\t\tlengths: number[], result: ESnapperResultScale\n\t): void {\n\t\tconst work = this._workScale;\n\t\ttransform.apply( point, work );\n\t\tconst tx = work.x;\n\t\tconst ty = work.y;\n\n\t\tthis.snap( work, work );\n\t\tlet x = work.x;\n\t\tlet y = work.y;\n\t\tif( utilIsNaN( x ) ) {\n\t\t\tif( utilIsNaN( y ) ) {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tx = tx;\n\t\t\t}\n\t\t} else {\n\t\t\tif( utilIsNaN( y ) ) {\n\t\t\t\ty = ty;\n\t\t\t}\n\t\t}\n\n\t\t// (x, y) = (tx, ty) + normalA * a + normalB * b\n\t\t// dx = x - tx\n\t\t// dy = y - ty\n\t\t// V = ( a, b )^T\n\t\t// D = ( dx, dy )^T\n\t\t// A = | normalA.x normalB.x |\n\t\t//     | normalA.y normalB.y |\n\t\t// A V = D\n\t\t// det A = normalA.x * normalB.y - normalB.x * normalA.y\n\t\t// A^-1 = |  normalB.y -normalB.x | / det A\n\t\t//        | -normalA.y  normalA.x |\n\t\tconst detA = normals[ 0 ].x * normals[ 1 ].y - normals[ 1 ].x * normals[ 0 ].y;\n\t\tif( EPSILON < Math.abs( detA ) ) {\n\t\t\tconst dx = x - tx;\n\t\t\tconst dy = y - ty;\n\t\t\tconst distance = Math.abs( dx * dx + dy * dy );\n\t\t\tif( utilIsNaN( result.distance ) || distance < result.distance ) {\n\t\t\t\tresult.distance = distance;\n\t\t\t\tconst mdx = x - point.x;\n\t\t\t\tconst mdy = y - point.y;\n\t\t\t\tconst mx = ( +normals[ 1 ].y * mdx - normals[ 1 ].x * mdy ) / detA;\n\t\t\t\tconst my = ( -normals[ 0 ].y * mdx + normals[ 0 ].x * mdy ) / detA;\n\t\t\t\tresult.scale.set(\n\t\t\t\t\t1 + mx / lengths[ 0 ],\n\t\t\t\t\t1 + my / lengths[ 1 ]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected calcScaleSnappedXY(\n\t\ttransform: Matrix,\n\t\tpointO: Point,\n\t\tpointX: Point,\n\t\tpointY: Point,\n\t\tnormals: IPoint[],\n\t\tlengths: number[],\n\t\tresult: ESnapperResultScale\n\t): void {\n\t\tthis.calcScaleSnapped2D( transform, pointO, normals, lengths, result );\n\t\tthis.calcScaleSnappedX( transform, pointY, normals[ 0 ], lengths[ 0 ], result );\n\t\tthis.calcScaleSnappedY( transform, pointX, normals[ 1 ], lengths[ 1 ], result );\n\t}\n\n\ttoScaleSnapped(\n\t\ttransform: Matrix, anchor: ESnapperModifierAnchor, keepRatio: boolean, scale: IPoint\n\t): boolean {\n\t\tif( this._isEnabled ) {\n\t\t\tconst points = this._points;\n\t\t\tconst normals = this._normals;\n\t\t\tconst lengths = this._lengths;\n\t\t\tconst work = this._workScaleResult;\n\t\t\twork.distance = NaN;\n\t\t\twork.scale.set( scale.x, scale.y );\n\n\t\t\tswitch( anchor ) {\n\t\t\tcase ESnapperModifierAnchor.TOP_LEFT:\n\t\t\t\tthis.calcScaleSnappedXY( transform, points[ 0 ], points[ 1 ], points[ 3 ], normals, lengths, work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.TOP_CENTER:\n\t\t\t\tthis.calcScaleSnappedY( transform, points[ 0 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tthis.calcScaleSnappedY( transform, points[ 1 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.TOP_RIGHT:\n\t\t\t\tthis.calcScaleSnappedXY( transform, points[ 1 ], points[ 0 ], points[ 2 ], normals, lengths, work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.MIDDLE_LEFT:\n\t\t\t\tthis.calcScaleSnappedX( transform, points[ 0 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tthis.calcScaleSnappedX( transform, points[ 3 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.NONE:\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.MIDDLE_RIGHT:\n\t\t\t\tthis.calcScaleSnappedX( transform, points[ 1 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tthis.calcScaleSnappedX( transform, points[ 2 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_LEFT:\n\t\t\t\tthis.calcScaleSnappedXY( transform, points[ 3 ], points[ 2 ], points[ 0 ], normals, lengths, work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_CENTER:\n\t\t\t\tthis.calcScaleSnappedY( transform, points[ 2 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tthis.calcScaleSnappedY( transform, points[ 3 ], normals[ 0 ], lengths[ 0 ], work );\n\t\t\t\tbreak;\n\t\t\tcase ESnapperModifierAnchor.BOTTOM_RIGHT:\n\t\t\t\tthis.calcScaleSnappedXY( transform, points[ 2 ], points[ 3 ], points[ 1 ], normals, lengths, work );\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif( ! utilIsNaN( work.distance ) ) {\n\t\t\t\tscale.copyFrom( work.scale );\n\t\t\t\tif( keepRatio ) {\n\t\t\t\t\tswitch( anchor ) {\n\t\t\t\t\tcase ESnapperModifierAnchor.TOP_LEFT:\n\t\t\t\t\tcase ESnapperModifierAnchor.TOP_RIGHT:\n\t\t\t\t\tcase ESnapperModifierAnchor.BOTTOM_LEFT:\n\t\t\t\t\tcase ESnapperModifierAnchor.BOTTOM_RIGHT:\n\t\t\t\t\t\tscale.x = scale.y = Math.max( scale.x, scale.y );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ESnapperModifierAnchor.TOP_CENTER:\n\t\t\t\t\tcase ESnapperModifierAnchor.BOTTOM_CENTER:\n\t\t\t\t\t\tscale.x = scale.y;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ESnapperModifierAnchor.MIDDLE_LEFT:\n\t\t\t\t\tcase ESnapperModifierAnchor.MIDDLE_RIGHT:\n\t\t\t\t\t\tscale.y = scale.x;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ESnapperModifierAnchor.NONE:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\treset(): void {\n\t\tthis.enable();\n\t\tthis.target.reset();\n\t\tthis.grid.reset();\n\t}\n\n\tserialize(): DDiagramSerializedSnap {\n\t\treturn [\n\t\t\t(this._isEnabled ? 1 : 0),\n\t\t\tthis.target.serialize(),\n\t\t\tthis.grid.serialize()\n\t\t];\n\t}\n\n\tdeserialize( serialized: DDiagramSerializedSnap ): void {\n\t\tif( serialized[ 0 ] !== 0 ) {\n\t\t\tthis.enable();\n\t\t} else {\n\t\t\tthis.disable();\n\t\t}\n\t\tthis.target.deserialize( serialized[ 1 ] );\n\t\tthis.grid.deserialize( serialized[ 2 ] );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DDiagramSerializedSnapTarget, DDiagramSerializedSnapTargetValue } from \"../d-diagram-serialized\";\nimport { ESnapperResult } from \"./e-snapper-result\";\nimport { ESnapperTargetValue, ESnapperTargetValueType } from \"./e-snapper-target-value\";\n\nexport class ESnapperTarget extends utils.EventEmitter {\n\tvalues: ESnapperTargetValue[];\n\tprotected _isVisible: boolean;\n\tprotected _isEnabled: boolean;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.values = [];\n\t\tthis._isVisible = true;\n\t\tthis._isEnabled = true;\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this._isEnabled;\n\t}\n\n\ttoggle(): boolean {\n\t\tthis._isEnabled = ! this._isEnabled;\n\t\tthis.emit( \"change\", this );\n\t\treturn this._isEnabled;\n\t}\n\n\tenable(): void {\n\t\tif( this._isEnabled !== true ) {\n\t\t\tthis._isEnabled = true;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tdisable(): void {\n\t\tif( this._isEnabled !== false ) {\n\t\t\tthis._isEnabled = false;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tadd( target: ESnapperTargetValue, index?: number ): void {\n\t\tif( index != null ) {\n\t\t\tthis.values.splice( index, 0, target );\n\t\t} else {\n\t\t\tthis.values.push( target );\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tremove( index: number ): void {\n\t\tconst values = this.values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\tvalues.splice( index, 1 );\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tsize(): number {\n\t\treturn this.values.length;\n\t}\n\n\treplace( index: number, value: ESnapperTargetValue ): ESnapperTargetValue | null {\n\t\tconst values = this.values;\n\t\tif( 0 <= index && index < values.length ) {\n\t\t\tconst result = values[ index ];\n\t\t\tvalues[ index ] = value;\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tswap( indexA: number, indexB: number ): void {\n\t\tif( indexA !== indexB ) {\n\t\t\tconst values = this.values;\n\t\t\tconst valueA = values[ indexA ];\n\t\t\tvalues[ indexA ] = values[ indexB ];\n\t\t\tvalues[ indexB ] = valueA;\n\t\t}\n\t}\n\n\tget visible(): boolean {\n\t\treturn this._isVisible;\n\t}\n\n\tset visible( visible: boolean ) {\n\t\tif( this._isVisible !== visible ) {\n\t\t\tthis._isVisible = visible;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tsnap( px: number, py: number, x: ESnapperResult, y: ESnapperResult ): void {\n\t\tif( this._isEnabled ) {\n\t\t\tconst values = this.values;\n\t\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\t\tconst value = values[ i ];\n\t\t\t\tif( value.type === ESnapperTargetValueType.VERTICAL ) {\n\t\t\t\t\tx.set( px, value.position );\n\t\t\t\t} else {\n\t\t\t\t\ty.set( py, value.position );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treset(): void {\n\t\tthis._isEnabled = true;\n\t\tthis._isVisible = true;\n\t\tthis.values.length = 0;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tserialize(): DDiagramSerializedSnapTarget {\n\t\tconst targets: DDiagramSerializedSnapTargetValue[] = [];\n\t\tconst values = this.values;\n\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\ttargets.push( values[ i ].serialize() );\n\t\t}\n\t\treturn [\n\t\t\t(this._isEnabled ? 1 : 0),\n\t\t\t(this._isVisible ? 1 : 0),\n\t\t\ttargets\n\t\t];\n\t}\n\n\tdeserialize( serialized: DDiagramSerializedSnapTarget ): void {\n\t\t// Availability\n\t\tthis._isEnabled = ( serialized[ 0 ] !== 0 );\n\n\t\t// Visibility\n\t\tthis._isVisible = ( serialized[ 1 ] !== 0 );\n\n\t\t// Values\n\t\tconst sources = serialized[ 2 ];\n\t\tconst values = this.values;\n\t\tvalues.length = 0;\n\t\tfor( let i = 0, imax = sources.length; i < imax; ++i ) {\n\t\t\tconst source = sources[ i ];\n\t\t\tvalues.push( new ESnapperTargetValue( source[ 0 ], source[ 1 ] ) );\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport enum DCommandFlag {\n\tNONE = 0,\n\n\t/**\n\t * Commands with a `UNSTORABLE` flag will not be queued to the `done` queue.\n\t */\n\tUNSTORABLE = 1,\n\n\t/**\n\t * Commands with a `CLEAR` flag clears the command queue.\n\t */\n\tCLEAR = 2\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DAnimation, DAnimationOnEnd, DAnimationOnTime, DAnimationOptions } from \"./d-animation\";\nimport { DBase } from \"./d-base\";\n\nexport class DAnimationEmpty extends utils.EventEmitter implements DAnimation {\n\tprotected _reverse: boolean;\n\tprotected _onTime: DAnimationOnTime | undefined;\n\tprotected _onStart: DAnimationOnEnd | undefined;\n\tprotected _onEnd: DAnimationOnEnd | undefined;\n\tprotected _target: DBase<any, any> | null;\n\tprotected _isStarted: boolean;\n\n\tconstructor( options?: DAnimationOptions ) {\n\t\tsuper();\n\n\t\tthis._target = null;\n\t\tthis._reverse = false;\n\t\tthis._isStarted = false;\n\t\tthis._onTime = ( options != null ? options.onTime : undefined );\n\t\tthis._onStart = ( options != null ? options.onStart : undefined );\n\t\tthis._onEnd = ( options != null ? options.onEnd : undefined );\n\t}\n\n\tget target(): DBase<any, any> | null {\n\t\treturn this._target;\n\t}\n\n\tset target( target: DBase<any, any> | null ) {\n\t\tthis._target = target;\n\t}\n\n\tget duration(): number {\n\t\treturn 0;\n\t}\n\n\tset duration( duration: number ) {\n\t\t// DO NOTHING\n\t}\n\n\tstart( reverse: boolean = false ): void {\n\t\tthis.stop();\n\t\tthis._isStarted = true;\n\t\tthis._reverse = reverse;\n\n\t\t// onStart\n\t\tthis.onStart( reverse );\n\t\tif( ! this._isStarted ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// onTime\n\t\tthis.onTime( reverse ? 1 : 0, reverse, 0 );\n\t\tif( ! this._isStarted ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.onTime( reverse ? 0 : 1, reverse, 0 );\n\t\tif( this._isStarted ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// OnEnd\n\t\tthis.onEnd( reverse );\n\t}\n\n\tprotected onStart( isReverse: boolean ): void {\n\t\tconst onStart = this._onStart;\n\t\tif( onStart != null ) {\n\t\t\tonStart( isReverse, this );\n\t\t}\n\t\tthis.emit( \"start\", isReverse, this );\n\t}\n\n\tprotected onTime( time: number, isReverse: boolean, elapsedTime: number ): void {\n\t\tconst onTime = this._onTime;\n\t\tif( onTime != null ) {\n\t\t\tonTime( time, isReverse, elapsedTime, this );\n\t\t}\n\t\tthis.emit( \"time\", time, isReverse, elapsedTime, this );\n\t}\n\n\tprotected onEnd( isReverse: boolean ): void {\n\t\tconst onEnd = this._onEnd;\n\t\tif( onEnd != null ) {\n\t\t\tonEnd( isReverse, this );\n\t\t}\n\t\tthis.emit( \"end\", isReverse, this );\n\t}\n\n\tisStarted(): boolean {\n\t\treturn this._isStarted;\n\t}\n\n\tisReverse(): boolean {\n\t\treturn this._reverse;\n\t}\n\n\tstop(): void {\n\t\tthis._isStarted = false;\n\t}\n\n\tend(): void {\n\t\tconst isStarted = this._isStarted;\n\t\tif( isStarted ) {\n\t\t\tthis._isStarted = false;\n\n\t\t\t// OnTime\n\t\t\tconst reverse = this._reverse;\n\t\t\tconst time = ( reverse ? 0 : 1 );\n\t\t\tthis.onTime( time, reverse, 0 );\n\n\t\t\t// OnEnd\n\t\t\tthis.onEnd( reverse );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DThemeBase } from \"./d-base\";\nimport { DPadding } from \"./d-padding\";\n\nexport class DApplicationPadding implements DPadding {\n\tleft: number;\n\ttop: number;\n\tright: number;\n\tbottom: number;\n\n\tconstructor( top: number, right: number, bottom: number, left: number ) {\n\t\tthis.left = left;\n\t\tthis.top = top;\n\t\tthis.right = right;\n\t\tthis.bottom = bottom;\n\t}\n\n\tgetTheme(): DThemeBase {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tsetTheme( theme: DThemeBase ): void {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tgetTop(): number {\n\t\treturn this.left;\n\t}\n\n\tgetRight(): number {\n\t\treturn this.right;\n\t}\n\n\tgetBottom(): number {\n\t\treturn this.bottom;\n\t}\n\n\tgetLeft(): number {\n\t\treturn this.left;\n\t}\n\n\tset( padding: number ): void;\n\tset( topAndBottom: number, leftAndRight: number ): void;\n\tset( top: number, leftAndRight: number, bottom: number ): void;\n\tset( top: number, right?: number, bottom?: number, left?: number ): void {\n\t\tif( right == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = top;\n\t\t\tthis.bottom = top;\n\t\t\tthis.left = top;\n\t\t} else if( bottom == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = top;\n\t\t\tthis.left = right;\n\t\t} else if( left == null ) {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = bottom;\n\t\t\tthis.left = right;\n\t\t} else {\n\t\t\tthis.top = top;\n\t\t\tthis.right = right;\n\t\t\tthis.bottom = bottom;\n\t\t\tthis.left = left;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplicationPadding } from \"./d-application-padding\";\nimport { DPadding } from \"./d-padding\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\n/**\n * PixiJS options\n */\ninterface PixiApplicationOptions {\n\twidth: number;\n\theight: number;\n\tautoStart: boolean;\n\tbackgroundColor: number;\n\ttransparent: boolean;\n\tresolution: number;\n\tantialias: boolean;\n}\n\ninterface DApplicationLayerOptionsOptions {\n\troot: HTMLElement;\n\tpadding?: number | {\n\t\ttop?: number;\n\t\tright?: number;\n\t\tbottom?: number;\n\t\tleft?: number;\n\t};\n\twidth?: number;\n\theight?: number;\n\tbackground?: {\n\t\tcolor?: number | null;\n\t};\n\tresolution: number;\n\tantialias?: boolean;\n\n\t/**\n\t * Sets to true if a layer is a overlay layer.\n\t */\n\toverlay: boolean;\n}\n\n/**\n * DApplicationLayer options\n */\nexport class DApplicationLayerOptions {\n\tprivate _root: HTMLElement;\n\tprivate _pixi: PixiApplicationOptions;\n\tprivate _padding: DPadding;\n\tprivate _overlay: boolean;\n\n\tconstructor( options: DApplicationLayerOptionsOptions ) {\n\t\t// Root\n\t\tconst root = this._root = options.root;\n\n\t\t// Overlay mode or not\n\t\tthis._overlay = options.overlay;\n\n\t\t// Padding\n\t\tconst padding = options && options.padding;\n\t\tif( utilIsNumber( padding ) ) {\n\t\t\tthis._padding = new DApplicationPadding( padding, padding, padding, padding );\n\t\t} else if( padding != null ) {\n\t\t\tthis._padding = new DApplicationPadding(\n\t\t\t\tpadding.top || 0,\n\t\t\t\tpadding.right || 0,\n\t\t\t\tpadding.bottom || 0,\n\t\t\t\tpadding.left || 0\n\t\t\t);\n\t\t} else {\n\t\t\tthis._padding = new DApplicationPadding( 6, 6, 6, 6 );\n\t\t}\n\n\t\t// Width & height\n\t\tlet width = 100;\n\t\tlet height = 100;\n\t\tif( options ) {\n\t\t\tif( options.width != null ) {\n\t\t\t\twidth = options.width;\n\t\t\t\tif( options.height != null ) {\n\t\t\t\t\theight = options.height;\n\t\t\t\t} else {\n\t\t\t\t\theight = root.getBoundingClientRect().height;\n\t\t\t\t}\n\t\t\t} else if( options.height != null ) {\n\t\t\t\twidth = root.getBoundingClientRect().width;\n\t\t\t\theight = options.height;\n\t\t\t} else {\n\t\t\t\tconst bbox = root.getBoundingClientRect();\n\t\t\t\twidth = bbox.width;\n\t\t\t\theight = bbox.height;\n\t\t\t}\n\t\t} else {\n\t\t\tconst bbox = root.getBoundingClientRect();\n\t\t\twidth = bbox.width;\n\t\t\theight = bbox.height;\n\t\t}\n\n\t\t// Background color\n\t\tconst background = options && options.background;\n\t\tlet backgroundColor = 0;\n\t\tlet transparent = true;\n\t\tif( background != null ) {\n\t\t\tconst color = background.color;\n\t\t\tif( color != null ) {\n\t\t\t\tbackgroundColor = color;\n\t\t\t\ttransparent = false;\n\t\t\t}\n\t\t}\n\n\t\t// Resolution\n\t\tconst resolution = options.resolution;\n\n\t\t// Antialias\n\t\tconst antialias = ( options && options.antialias != null ? options.antialias : false );\n\n\t\t// Pixi\n\t\tthis._pixi = {\n\t\t\twidth,\n\t\t\theight,\n\t\t\tautoStart: false,\n\t\t\tbackgroundColor,\n\t\t\ttransparent,\n\t\t\tresolution,\n\t\t\tantialias\n\t\t};\n\t}\n\n\t/**\n\t * Returns a root element.\n\t * `HTMLCanvasElement` and other DOM elements are created in this element.\n\t * The default root element is `document.body`.\n\t */\n\tgetRootElement(): HTMLElement {\n\t\treturn this._root;\n\t}\n\n\t/**\n\t * Sets a root element and updates the canvas width and height\n\t * if `updateWidthAndHeight` is not false.\n\t *\n\t * @param root new root element\n\t * @param updateWidthAndHeight false to preserve the canvas width / height\n\t */\n\tsetRootElement( root: HTMLElement, updateWidthAndHeight?: boolean ): this {\n\t\tif( this._root !== root ) {\n\t\t\tthis._root = root;\n\t\t\tif( updateWidthAndHeight !== false ) {\n\t\t\t\tconst bbox = root.getBoundingClientRect();\n\t\t\t\tconst pixi = this._pixi;\n\t\t\t\tpixi.width = bbox.width;\n\t\t\t\tpixi.height = bbox.height;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a canvas width.\n\t */\n\tgetWidth(): number {\n\t\treturn this._pixi.width;\n\t}\n\n\t/**\n\t * Sets a canvas width.\n\t *\n\t * @param width new canvas width\n\t */\n\tsetWidth( width: number ): this {\n\t\tthis._pixi.width = width;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a canvas height.\n\t */\n\tgetHeight(): number {\n\t\treturn this._pixi.height;\n\t}\n\n\t/**\n\t * Sets a canvas height.\n\t *\n\t * @param height new canvas height\n\t */\n\tsetHeight( height: number ): this {\n\t\tthis._pixi.height = height;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns padding sizes.\n\t * The default padding size is 6.\n\t */\n\tgetPadding(): DPadding {\n\t\treturn this._padding;\n\t}\n\n\t/**\n\t * Sets padding sizes.\n\t *\n\t * @param left new left padding\n\t * @param top new top padding\n\t * @param right new right padding\n\t * @param bottom new bottom padding\n\t * @asse getPadding\n\t */\n\tsetPadding( left: number, top: number, right: number, bottom: number ): this {\n\t\tconst padding = this._padding;\n\t\tpadding.left = left;\n\t\tpadding.top = top;\n\t\tpadding.right = right;\n\t\tpadding.bottom = bottom;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a background color.\n\t */\n\tgetBackgroundColor(): number {\n\t\treturn this._pixi.backgroundColor;\n\t}\n\n\t/**\n\t * Sets a background color.\n\t *\n\t * @param color new background color\n\t */\n\tsetBackgroundColor( color: number ): this {\n\t\tthis._pixi.backgroundColor = color;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an antialias setting.\n\t * The default antialias setting is false.\n\t */\n\tgetAntialias(): boolean {\n\t\treturn this._pixi.antialias;\n\t}\n\n\t/**\n\t * Sets an antialias setting.\n\t *\n\t * @param antialias new antialias setting\n\t */\n\tsetAntialias( antialias: boolean ): this {\n\t\tthis._pixi.antialias = antialias;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns true if a layer is supposed to be an overlay layer.\n\t */\n\tisOverlay(): boolean {\n\t\treturn this._overlay;\n\t}\n\n\tgetPixiApplicationOptions(): PixiApplicationOptions {\n\t\treturn this._pixi;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport {\n\tDControllerFocus, DFocusable, DFocusableContainer, DFocusableMightBe\n} from \"./d-controller-focus\";\n\nconst isFocusable = ( target: any ): target is DFocusable => {\n\treturn ( target != null && (\"setState\" in target) );\n};\n\nconst isFocusableContainer = ( target: any ): target is DFocusableContainer => {\n\treturn ( target != null && \"children\" in target );\n};\n\ninterface Selectable {\n\tselect(): void;\n}\n\nconst isSelectable = ( target: any ): target is Selectable => {\n\treturn ( target != null && \"select\" in target );\n};\n\nexport class DControllerDefaultFocus implements DControllerFocus {\n\tprivate _focused: DFocusable | null = null;\n\n\tsetFocused( focusable: DFocusable | null, isFocused: boolean, select: boolean ): DFocusable | null {\n\t\tif( isFocused ) {\n\t\t\tconst previous = this._focused;\n\t\t\tif( previous !== focusable ) {\n\t\t\t\tif( previous != null ) {\n\t\t\t\t\tprevious.setState( DBaseState.FOCUSED, false );\n\t\t\t\t}\n\n\t\t\t\tthis._focused = focusable;\n\t\t\t\tif( focusable != null && this.isFocusable( focusable ) ) {\n\t\t\t\t\tfocusable.setState( DBaseState.FOCUSED, true );\n\t\t\t\t\tif( select && isSelectable( focusable ) ) {\n\t\t\t\t\t\tfocusable.select();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn previous;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\tif( focusable != null && this._focused === focusable ) {\n\t\t\t\tfocusable.setState( DBaseState.FOCUSED, false );\n\t\t\t\tif( select && isSelectable( focusable ) ) {\n\t\t\t\t\tfocusable.select();\n\t\t\t\t}\n\t\t\t\treturn focusable;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFocused(): DFocusable | null {\n\t\treturn this._focused;\n\t}\n\n\tfindFocusableParent( mightBeFocusable: DFocusableMightBe | null ): DFocusable | null {\n\t\tlet current: DFocusableMightBe | DFocusableContainer | null = mightBeFocusable;\n\t\twhile( current != null ) {\n\t\t\tif( this.isFocusable( current ) ) {\n\t\t\t\treturn current;\n\t\t\t} else {\n\t\t\t\tcurrent = current.parent;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected isFocusable( target: unknown ): target is DFocusable {\n\t\treturn (\n\t\t\tisFocusable( target ) &&\n\t\t\t! target.hasState( DBaseState.DISABLED | DBaseState.UNFOCUSABLE ) &&\n\t\t\ttarget.visible\n\t\t);\n\t}\n\n\tprotected isFocusRoot( target: unknown ): target is DFocusable {\n\t\treturn (\n\t\t\tisFocusable( target ) &&\n\t\t\ttarget.hasState( DBaseState.FOCUS_ROOT ) &&\n\t\t\ttarget.visible\n\t\t);\n\t}\n\n\tfindFocusable(\n\t\ttarget: DFocusableMightBe, includesTarget: boolean, includesTargetChildren: boolean, direction: boolean\n\t): DFocusable | null {\n\t\tif( direction ) {\n\t\t\tconst result = this.findFocusableNext( target, includesTarget, includesTargetChildren );\n\t\t\tif( result != null ) {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tconst parent = target.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tconst children = parent.children;\n\t\t\t\tconst index = children.indexOf( target );\n\t\t\t\tif( 0 <= index ) {\n\t\t\t\t\t// Siblings\n\t\t\t\t\tfor( let i = index + 1, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst found = this.findFocusableNext( children[ i ], true, true );\n\t\t\t\t\t\tif( found != null ) {\n\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif( this.isFocusRoot( parent ) ) {\n\t\t\t\t\t\tfor( let i = 0, imax = index + 1; i < imax; ++i ) {\n\t\t\t\t\t\t\tconst found = this.findFocusableNext( children[ i ], true, true );\n\t\t\t\t\t\t\tif( found != null ) {\n\t\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Parent\n\t\t\t\t\treturn this.findFocusable( parent, false, false, true );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst result = this.findFocusablePrevious( target, includesTarget, includesTargetChildren );\n\t\t\tif( result != null ) {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tconst parent = target.parent;\n\t\t\tif( parent != null ) {\n\t\t\t\tconst children = parent.children;\n\t\t\t\tconst index = children.indexOf( target );\n\t\t\t\tif( 0 <= index ) {\n\t\t\t\t\t// Siblings\n\t\t\t\t\tfor( let i = index - 1; 0 <= i; --i ) {\n\t\t\t\t\t\tconst found = this.findFocusablePrevious( children[ i ], true, true );\n\t\t\t\t\t\tif( found != null ) {\n\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif( this.isFocusRoot( parent ) ) {\n\t\t\t\t\t\tfor( let i = children.length - 1; index <= i; --i ) {\n\t\t\t\t\t\t\tconst found = this.findFocusablePrevious( children[ i ], true, true );\n\t\t\t\t\t\t\tif( found != null ) {\n\t\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parent;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Parent\n\t\t\t\t\treturn this.findFocusable( parent, true, false, false );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected findFocusableNext(\n\t\ttarget: DFocusableMightBe, includesTarget: boolean, includesTargetChildren: boolean\n\t): DFocusable | null {\n\t\t// Target itself\n\t\tif( includesTarget ) {\n\t\t\tif( this.isFocusable( target ) ) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\n\t\t// Target children\n\t\tif( includesTargetChildren && isFocusableContainer( target ) && target.visible ) {\n\t\t\tconst children = target.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst found = this.findFocusableNext( children[ i ], true, true );\n\t\t\t\tif( found != null ) {\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Siblings\n\t\tif( this.isFocusRoot( target ) ) {\n\t\t\treturn target;\n\t\t}\n\n\t\t// Found nothing\n\t\treturn null;\n\t}\n\n\tprotected findFocusablePrevious(\n\t\ttarget: DFocusableMightBe, includesTarget: boolean, includesTargetChildren: boolean\n\t): DFocusable | null {\n\t\t// Target children\n\t\tif( includesTargetChildren && isFocusableContainer( target ) && target.visible ) {\n\t\t\tconst children = target.children;\n\t\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\t\tconst found = this.findFocusablePrevious( children[ i ], true, true );\n\t\t\t\tif( found != null ) {\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Target itself\n\t\tif( includesTarget ) {\n\t\t\tif( this.isFocusable( target ) ) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\n\t\t// Siblings\n\t\tif( this.isFocusRoot( target ) ) {\n\t\t\treturn target;\n\t\t}\n\n\t\t// Found nothing\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\n\nexport class DCommandClear implements DCommand {\n\texecute(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tredo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE | DCommandFlag.CLEAR;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartCoordinateContainerSub } from \"./d-chart-coordinate-container-sub\";\n\nexport enum DChartCoordinateDirection {\n\tX,\n\tY\n}\n\nexport interface DChartCoordinate {\n\treadonly id: number;\n\n\tbind( container: DChartCoordinateContainerSub, direction: DChartCoordinateDirection ): void;\n\tunbind(): void;\n\n\tfit(): void;\n\n\tmap( value: number ): number;\n\tunmap( value: number ): number;\n\n\t/**\n\t *\n\t * @param majorCount Expected major tick count\n\t * @param minorCountPerMajor Expected minor tick count per major ticks\n\t * @param minorCount Expected total minor tick count\n\t * @param majorResult `majorResult.length` must be larger than `majorCount * 3`.\n\t * @param minorResult `minorResult.length` must be larger than `minorCount * 3`.\n\t */\n\tticks(\n\t\tmajorCount: number,\n\t\tminorCountPerMajor: number,\n\t\tminorCount: number,\n\t\tmajorResult: Float64Array,\n\t\tminorResult: Float64Array\n\t): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\n\nexport class DCommandRedo implements DCommand {\n\texecute(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tredo(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tundo(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\n\nexport class DCommandUndo implements DCommand {\n\texecute(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tredo(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tundo(): Promise<void> | boolean {\n\t\tthrow new Error( \"Not supported\" );\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DCommand } from \"./d-command\";\nimport { DCommandClear } from \"./d-command-clear\";\nimport { DCommandFlag } from \"./d-command-flag\";\nimport { DCommandRedo } from \"./d-command-redo\";\nimport { DCommandUndo } from \"./d-command-undo\";\nimport { DControllerCommand } from \"./d-controller-command\";\n\nconst isCommandStorable = ( command: DCommand ): boolean => {\n\treturn ( command.getFlag() & DCommandFlag.UNSTORABLE ) === 0;\n};\n\nconst isCommandClear = ( command: DCommand ): boolean => {\n\treturn ( command.getFlag() & DCommandFlag.CLEAR ) !== 0;\n};\n\nexport class DControllerDefaultCommand extends utils.EventEmitter implements DControllerCommand {\n\tprotected _position: number;\n\tprotected _done: DCommand[];\n\tprotected _waiting: DCommand[];\n\tprotected _executing: Promise<void> | null;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._position = 0;\n\t\tthis._done = [];\n\t\tthis._waiting = [];\n\t\tthis._executing = null;\n\t}\n\n\tlast(): DCommand | null {\n\t\tconst done = this._done;\n\t\tconst waiting = this._waiting;\n\n\t\tif( waiting.length <= 0 ) {\n\t\t\tif( 0 < done.length ) {\n\t\t\t\treturn done[ done.length - 1 ];\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn waiting[ waiting.length - 1 ];\n\t\t}\n\t}\n\n\tpush( command: DCommand ): void {\n\t\tconst waiting = this._waiting;\n\t\twaiting.push( command );\n\t\tthis.next();\n\t}\n\n\tnext() {\n\t\tif( this._executing == null ) {\n\t\t\tconst waiting = this._waiting;\n\t\t\tif( 0 < waiting.length ) {\n\t\t\t\tconst command = waiting.shift();\n\t\t\t\tif( command != null ) {\n\t\t\t\t\tif( command instanceof DCommandUndo ) {\n\t\t\t\t\t\tconst done = this._done;\n\t\t\t\t\t\tif( this._position < done.length ) {\n\t\t\t\t\t\t\tconst current = done[ done.length - 1 - this._position ];\n\t\t\t\t\t\t\tthis._position += 1;\n\t\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\t\tconst result = current.undo();\n\t\t\t\t\t\t\tif( result === true ) {\n\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t} else if( result === false ) {\n\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._executing = result.then(() => {\n\t\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if( command instanceof DCommandRedo ) {\n\t\t\t\t\t\tconst done = this._done;\n\t\t\t\t\t\tif( 0 < this._position ) {\n\t\t\t\t\t\t\tconst current = done[ done.length - this._position ];\n\t\t\t\t\t\t\tthis._position -= 1;\n\t\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\t\tconst result = current.redo();\n\t\t\t\t\t\t\tif( result === true ) {\n\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t} else if( result === false ) {\n\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._executing = result.then(() => {\n\t\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst isClear = isCommandClear( command );\n\t\t\t\t\t\tconst isStorable = isCommandStorable( command );\n\t\t\t\t\t\tif( isClear || isStorable ) {\n\t\t\t\t\t\t\tconst size = ( isClear ? this._done.length : this._position );\n\t\t\t\t\t\t\tif( 0 < size ) {\n\t\t\t\t\t\t\t\tthis.remove( size );\n\t\t\t\t\t\t\t\tthis._position = 0;\n\t\t\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.cleanup();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst result = command.execute();\n\t\t\t\t\t\tif( result === true ) {\n\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t} else if( result === false ) {\n\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._executing = result.then(() => {\n\t\t\t\t\t\t\t\tthis.onSuccess( command );\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\tthis.onFail( command );\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected cleanup(): void {\n\t\tconst done = this._done;\n\t\tconst size = done.length - 100;\n\t\tif( 0 < size ) {\n\t\t\tfor( let i = 0; i < size; ++i ) {\n\t\t\t\tdone[ i ].destroy();\n\t\t\t\tdone.shift();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected remove( size: number ): boolean {\n\t\tconst done = this._done;\n\t\tif( 0 < size ) {\n\t\t\tconst ifrom = Math.max( 0, done.length - size );\n\t\t\tsize = done.length - ifrom;\n\t\t\tif( 0 < size ) {\n\t\t\t\tfor( let i = ifrom, imax = done.length; i < imax; ++i ) {\n\t\t\t\t\tdone[ i ].destroy();\n\t\t\t\t}\n\n\t\t\t\tdone.splice( ifrom, done.length - ifrom );\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected onSuccess( command: DCommand ) {\n\t\tthis._executing = null;\n\t\tif( isCommandStorable( command ) ) {\n\t\t\tthis._done.push( command );\n\t\t\tthis.emit( \"dirty\", this );\n\t\t} else if( command instanceof DCommandUndo || command instanceof DCommandRedo ) {\n\t\t\tthis.emit( \"dirty\", this );\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\tthis.next();\n\t}\n\n\tprotected onFail( command: DCommand ) {\n\t\tthis._executing = null;\n\t\tconst waiting = this._waiting;\n\t\tcommand.destroy();\n\t\tfor( let i = 0, imax = waiting.length; i < imax; ++i ) {\n\t\t\twaiting[ i ].destroy();\n\t\t}\n\t\twaiting.length = 0;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tsize(): number {\n\t\treturn this._done.length;\n\t}\n\n\tclear(): void {\n\t\tthis.push( new DCommandClear() );\n\t}\n\n\tredo(): void {\n\t\tif( this.isRedoable() ) {\n\t\t\tthis._waiting.push( new DCommandRedo() );\n\t\t\tthis.next();\n\t\t}\n\t}\n\n\tundo(): void {\n\t\tif( this.isUndoable() ) {\n\t\t\tthis._waiting.push( new DCommandUndo() );\n\t\t\tthis.next();\n\t\t}\n\t}\n\n\tisRedoable(): boolean {\n\t\treturn ( 0 < this._position && this._executing == null );\n\t}\n\n\tisUndoable(): boolean {\n\t\treturn ( this._position < this._done.length && this._executing == null );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, utils } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DControllerFocus, DFocusable, DFocusableContainer } from \"./d-controller-focus\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport class DControllerKeyboard extends utils.EventEmitter {\n\tinit( element: HTMLElement, stage: Container, focusController: DControllerFocus ) {\n\t\telement.addEventListener( \"keydown\", ( e: KeyboardEvent ): void => {\n\t\t\tthis.emit( \"keydown\", e );\n\n\t\t\tconst focused = focusController.getFocused();\n\t\t\tif( focused != null ) {\n\t\t\t\tlet current: DFocusable | DFocusableContainer | null = focused;\n\t\t\t\twhile( current != null ) {\n\t\t\t\t\tif( this.hasOnKeyDown( current ) ) {\n\t\t\t\t\t\tif( current.onKeyDown( e ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( UtilKeyboardEvent.isFocusKey( e ) ) {\n\t\t\t\tconst direction = UtilKeyboardEvent.getFocusDirection( e );\n\t\t\t\tconst next = ( focused != null ?\n\t\t\t\t\tfocusController.findFocusable(\n\t\t\t\t\t\tfocused, false, focused.hasState( DBaseState.FOCUS_ROOT ) || direction, direction\n\t\t\t\t\t) :\n\t\t\t\t\tfocusController.findFocusable( stage, false, true, direction )\n\t\t\t\t);\n\t\t\t\tif( next != null ) {\n\t\t\t\t\tfocusController.setFocused( next, true, true );\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener( \"keyup\", ( e: KeyboardEvent ): void => {\n\t\t\tthis.emit( \"keyup\", e );\n\n\t\t\tconst focused = focusController.getFocused();\n\t\t\tif( focused != null ) {\n\t\t\t\tlet current: DFocusable | DFocusableContainer | null = focused;\n\t\t\t\twhile( current != null ) {\n\t\t\t\t\tif( this.hasOnKeyUp( current ) ) {\n\t\t\t\t\t\tif( current.onKeyUp( e ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected hasOnKeyDown( target: any ): target is { onKeyDown( e: KeyboardEvent ): boolean; } {\n\t\treturn \"onKeyDown\" in target;\n\t}\n\n\tprotected hasOnKeyUp( target: any ): target is { onKeyUp( e: KeyboardEvent ): boolean; } {\n\t\treturn \"onKeyUp\" in target;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DControllerCommand } from \"./d-controller-command\";\nimport { DControllerDefaultCommand } from \"./d-controller-default-command\";\nimport { DControllerDocument } from \"./d-controller-document\";\nimport { DControllerKeyboard } from \"./d-controller-keyboard\";\nimport { DDocument } from \"./d-document\";\n\nexport class DControllers {\n\tprotected static KEYBOARD: DControllerKeyboard | null;\n\tprotected static COMMAND: DControllerCommand | null;\n\tprotected static DOCUMENT: DControllerDocument<any> | null;\n\n\t// Keyboard\n\tstatic getKeyboardController(): DControllerKeyboard {\n\t\tif( this.KEYBOARD == null ) {\n\t\t\tthis.KEYBOARD = new DControllerKeyboard();\n\t\t}\n\t\treturn this.KEYBOARD;\n\t}\n\n\tstatic setKeyboardController( instance: DControllerKeyboard ): DControllerKeyboard | null {\n\t\tconst result = this.KEYBOARD;\n\t\tthis.KEYBOARD = instance;\n\t\treturn result;\n\t}\n\n\t// Command\n\tstatic getCommandController(): DControllerCommand {\n\t\tif( this.COMMAND == null ) {\n\t\t\tthis.COMMAND = new DControllerDefaultCommand();\n\t\t}\n\t\treturn this.COMMAND;\n\t}\n\n\tstatic setCommandController( instance: DControllerCommand ): DControllerCommand | null {\n\t\tconst result = this.COMMAND;\n\t\tthis.COMMAND = instance;\n\t\treturn result;\n\t}\n\n\t// Document\n\tstatic getDocumentController<DOCUMENT extends DDocument>(): DControllerDocument<DOCUMENT> {\n\t\tif( this.DOCUMENT == null ) {\n\t\t\tthrow new Error( \"Not supported\" );\n\t\t}\n\t\treturn this.DOCUMENT;\n\t}\n\n\tstatic setDocumentController<DOCUMENT extends DDocument>(\n\t\tinstance: DControllerDocument<DOCUMENT>\n\t): DControllerDocument<DOCUMENT> | null {\n\t\tconst result = this.DOCUMENT;\n\t\tthis.DOCUMENT = instance;\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Application, interaction, Point } from \"pixi.js\";\nimport { DApplicationLayerLike } from \"./d-application-layer-like\";\nimport { DApplicationLayerOptions } from \"./d-application-layer-options\";\nimport { DApplicationLike } from \"./d-application-like\";\nimport { DBase } from \"./d-base\";\nimport { DControllerDefaultFocus } from \"./d-controller-default-focus\";\nimport { DControllerFocus, DFocusable, DFocusableContainer } from \"./d-controller-focus\";\nimport { DControllers } from \"./d-controllers\";\nimport { DPadding } from \"./d-padding\";\nimport { DynamicFontAtlases } from \"./util/dynamic-font-atlases\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\nimport { UtilWheelEvent, UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\ninterface DblClickable {\n\tonDblClick( e: MouseEvent | TouchEvent, interactionManager: interaction.InteractionManager ): boolean;\n}\n\nconst isDblClickable = ( target: any ): target is DblClickable => {\n\treturn target != null && target.onDblClick != null;\n};\n\ninterface Wheelable {\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean;\n}\n\nconst isWheelable = ( target: any ): target is Wheelable => {\n\treturn target != null && target.onWheel != null;\n};\n\nexport class DApplicationLayer extends Application implements DApplicationLayerLike {\n\tprotected _options: DApplicationLayerOptions;\n\tprotected _renderId: number | null = null;\n\tprotected _renderBound: () => void;\n\tprotected _isUpdateAllowed: boolean;\n\tprotected _refitLimit: number;\n\tprotected _reflowLimit: number;\n\tprotected _focus?: DControllerFocus;\n\tprotected _elementContainer: HTMLDivElement;\n\tprotected _dynamicFontAtlases: DynamicFontAtlases | null = null;\n\tprotected _isVisible: boolean;\n\n\treadonly application: DApplicationLike;\n\n\tconstructor( application: DApplicationLike, options: DApplicationLayerOptions ) {\n\t\tsuper( options.getPixiApplicationOptions() );\n\n\t\tthis.application = application;\n\t\tconst stageAny = this.stage as any;\n\t\tstageAny.layer = this;\n\t\tstageAny.application = application;\n\n\t\tthis._options = options;\n\t\tthis._isUpdateAllowed = true;\n\t\tthis._refitLimit = 5;\n\t\tthis._reflowLimit = 5;\n\t\tthis._isVisible = true;\n\n\t\tthis._renderBound = (): void => {\n\t\t\tif( this._renderId != null ) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t};\n\n\t\t// Canvas initialization\n\t\tconst rootElement = options.getRootElement();\n\t\tconst elementContainer = document.createElement( \"div\" );\n\t\telementContainer.setAttribute( \"style\",\n\t\t\t\"position: absolute; top: 0; left: 0; width: 0; height: 0;\" +\n\t\t\t\"margin: 0; padding: 0; outline: none;\"\n\t\t);\n\t\tthis._elementContainer = elementContainer;\n\t\tconst children = rootElement.children;\n\t\tif( options.isOverlay() ) {\n\t\t\tif( 3 <= children.length ) {\n\t\t\t\tconst thirdChild = children[ 2 ];\n\t\t\t\trootElement.insertBefore( this.view, thirdChild );\n\t\t\t\trootElement.insertBefore( elementContainer, thirdChild );\n\t\t\t} else {\n\t\t\t\trootElement.appendChild( this.view );\n\t\t\t\trootElement.appendChild( elementContainer );\n\t\t\t}\n\n\t\t\tconst oldOnChildrenChange = stageAny.onChildrenChange;\n\t\t\tstageAny.onChildrenChange = () => {\n\t\t\t\tthis.updateVisibility();\n\t\t\t\toldOnChildrenChange.call( stageAny );\n\t\t\t};\n\t\t} else {\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tconst firstChild = children[ 0 ];\n\t\t\t\trootElement.insertBefore( this.view, firstChild );\n\t\t\t\trootElement.insertBefore( elementContainer, firstChild );\n\t\t\t} else {\n\t\t\t\trootElement.appendChild( this.view );\n\t\t\t\trootElement.appendChild( elementContainer );\n\t\t\t}\n\t\t}\n\t\tconst rootElementStyle = rootElement.style;\n\t\tif( rootElement !== document.body ) {\n\t\t\tconst rootElementStylePosition = window.getComputedStyle( rootElement ).position;\n\t\t\tif( rootElementStylePosition === \"static\" ) {\n\t\t\t\trootElementStyle.position = \"relative\";\n\t\t\t}\n\t\t}\n\t\trootElementStyle.margin = \"0\";\n\t\trootElementStyle.padding = \"0\";\n\t\trootElementStyle.overflow = \"hidden\";\n\t\tconst viewStyle = this.view.style;\n\t\tviewStyle.position = \"absolute\";\n\t\tviewStyle.top = \"0\";\n\t\tviewStyle.left = \"0\";\n\t\tviewStyle.width = \"100%\";\n\t\tviewStyle.height = \"100%\";\n\t\tviewStyle.display = \"block\";\n\t\tviewStyle.outline = \"none\";\n\n\t\t// Focus handling\n\t\tlet hasFocus = false;\n\t\tconst focusController = this.getFocusController();\n\t\tconst onBlurBound = (): void => {\n\t\t\tif( ! hasFocus ) {\n\t\t\t\tfocusController.setFocused( null, true, false );\n\t\t\t}\n\t\t};\n\t\trootElement.addEventListener( \"focus\", ( e ): void => {\n\t\t\thasFocus = true;\n\t\t}, true );\n\t\trootElement.addEventListener( \"blur\", ( e ): void => {\n\t\t\thasFocus = false;\n\t\t\tsetTimeout( onBlurBound, 0 );\n\t\t}, true );\n\t\tthis.view.setAttribute( \"tabindex\", \"0\" );\n\n\t\tDControllers.getKeyboardController().init( this.view, this.stage, focusController );\n\n\t\tconst interactionManager: interaction.InteractionManager = this.renderer.plugins.interaction;\n\t\tinteractionManager.on( UtilPointerEvent.down, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( e.target == null ) {\n\t\t\t\tfocusController.setFocused( null, true, false );\n\t\t\t}\n\t\t});\n\n\t\t// Resize handling\n\t\tconst onResize = (): void => {\n\t\t\tconst bbox = options.getRootElement().getBoundingClientRect();\n\t\t\tthis.renderer.resize( bbox.width, bbox.height );\n\t\t\tthis.resizeChildren( bbox.width, bbox.height, options.getPadding() );\n\t\t\tthis.update();\n\t\t};\n\t\twindow.addEventListener( \"resize\", onResize );\n\t\twindow.addEventListener( \"orientationchange\", onResize );\n\n\t\t// Mouse wheel handling\n\t\tconst wheelGlobal = new Point();\n\t\tconst wheelEventUtil = UtilWheelEvent.getInstance();\n\t\twheelEventUtil.on( this.view, ( e: WheelEvent | Event ): void => {\n\t\t\tconst wheelEvent = e as WheelEvent;\n\t\t\tUtilPointerEvent.toGlobal( wheelEvent, interactionManager, wheelGlobal );\n\t\t\tlet current = interactionManager.hitTest( wheelGlobal );\n\t\t\tconst deltas = wheelEventUtil.normalize( e );\n\t\t\tif( deltas != null ) {\n\t\t\t\twhile( current != null ) {\n\t\t\t\t\tif( isWheelable( current ) ) {\n\t\t\t\t\t\tif( current.onWheel( wheelEvent, deltas, wheelGlobal ) ) {\n\t\t\t\t\t\t\twheelEvent.preventDefault();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Double click handling\n\t\tUtilPointerEvent.onDblClick( this.view, ( e: MouseEvent | TouchEvent ) => {\n\t\t\tconst focused = focusController.getFocused();\n\t\t\tif( focused != null ) {\n\t\t\t\tlet current: DFocusable | DFocusableContainer | null = focused;\n\t\t\t\twhile( current != null ) {\n\t\t\t\t\tif( isDblClickable( current ) ) {\n\t\t\t\t\t\tif( current.onDblClick( e, interactionManager ) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//\n\t\tthis.stage.interactive = true;\n\t}\n\n\tdisallowUpdate(): void {\n\t\tthis._isUpdateAllowed = false;\n\t}\n\n\tallowUpdate(): void {\n\t\tthis._isUpdateAllowed = true;\n\t}\n\n\tupdate(): void {\n\t\tif( this._isUpdateAllowed && this._renderId == null ) {\n\t\t\tthis._renderId = requestAnimationFrame( this._renderBound );\n\t\t}\n\t}\n\n\tprotected updateVisibility(): void {\n\t\tif( this._options.isOverlay() ) {\n\t\t\tif( 0 < this.stage.children.length ) {\n\t\t\t\tif( ! this._isVisible ) {\n\t\t\t\t\tthis._isVisible = true;\n\t\t\t\t\tthis.view.style.display = \"block\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( this._isVisible ) {\n\t\t\t\t\tthis._isVisible = false;\n\t\t\t\t\tthis.view.style.display = \"none\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trender(): void {\n\t\tthis.refit();\n\t\tthis.reflow();\n\n\t\t// Please note why the following line is here.\n\t\t//\n\t\t// Before this line, the update method does not enque a rendering task\n\t\t// because `this._renderId` is not null. As a result, this prevents\n\t\t// an unintentional rendering loop caused by the refit or the reflow.\n\t\t//\n\t\t// After this line, the update method enques a rendering task.\n\t\t// Namely, in the DisplayObject#render(Renderer) method, allowed to enque\n\t\t// a rendering task. For instance, please refer to the DDiagramShape#update().\n\t\tthis._renderId = null;\n\n\t\t// Render\n\t\tsuper.render();\n\t}\n\n\tget width(): number {\n\t\treturn this.screen.width;\n\t}\n\n\tget height(): number {\n\t\treturn this.screen.height;\n\t}\n\n\tget padding(): DPadding {\n\t\treturn this._options.getPadding();\n\t}\n\n\tprotected resizeChildren( width: number, height: number, padding: DPadding ): void {\n\t\tconst children = this.stage.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DBase ) {\n\t\t\t\tchild.onParentResize( width, height, padding );\n\t\t\t}\n\t\t}\n\t}\n\n\trefit(): void {\n\t\tconst children = this.stage.children;\n\t\tfor( let ilimit = 0, limit = this._refitLimit; ilimit < limit; ++ilimit ) {\n\t\t\tlet isChildrenDirty = false;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.refit();\n\t\t\t\t\tisChildrenDirty = isChildrenDirty || child.isChildrenDirty();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If DBases are changed during the `refit` process, need to refit again.\n\t\t\tif( ! isChildrenDirty ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treflow(): void {\n\t\tconst children = this.stage.children;\n\t\tfor( let ilimit = 0, limit = this._refitLimit; ilimit < limit; ++ilimit ) {\n\t\t\tlet isDirty = false;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.reflow();\n\t\t\t\t\tisDirty = isDirty || child.isDirty() || child.hasDirty();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If DBases are changed during the `reflow` process, need to reflow again.\n\t\t\tif( ! isDirty ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFocusController(): DControllerFocus {\n\t\tif( this._focus == null ) {\n\t\t\tthis._focus = new DControllerDefaultFocus();\n\t\t}\n\t\treturn this._focus;\n\t}\n\n\tgetElementContainer(): HTMLElement {\n\t\treturn this._elementContainer;\n\t}\n\n\tgetDynamicFontAtlases(): DynamicFontAtlases {\n\t\tif( this._dynamicFontAtlases == null ) {\n\t\t\tthis._dynamicFontAtlases = new DynamicFontAtlases( this );\n\t\t}\n\t\treturn this._dynamicFontAtlases;\n\t}\n}\n","import { Container, Renderer } from \"pixi.js\";\nimport { DApplicationLayer } from \"./d-application-layer\";\nimport { DApplicationLayerOptions } from \"./d-application-layer-options\";\nimport { DApplicationLike } from \"./d-application-like\";\nimport { DApplications } from \"./d-applications\";\nimport { utilIsString } from \"./util\";\n\nexport interface DApplicationOptions {\n\t/**\n\t * A root element selector or a root element.\n\t * `HTMLCanvasElement` and other DOM elements are created in this element.\n\t * The default root element is `document.body`.\n\t */\n\troot?: string | HTMLElement;\n\n\t/**\n\t * Padding settings.\n\t */\n\tpadding?: number | {\n\t\ttop?: number;\n\t\tright?: number;\n\t\tbottom?: number;\n\t\tleft?: number;\n\t};\n\n\t/**\n\t * A canvas width.\n\t */\n\twidth?: number;\n\n\t/**\n\t * A canvas height.\n\t */\n\theight?: number;\n\n\t/**\n\t * A background setting.\n\t */\n\tbackground?: {\n\t\tcolor?: number;\n\t};\n\n\t/**\n\t * An antialias setting.\n\t */\n\tantialias?: boolean;\n\n\t/**\n\t * A resolution.\n\t * The default value is `devicePixelRatio`.\n\t */\n\tresolution?: number;\n\n\t/**\n\t * An overlay layer setting.\n\t * The overlay layer is used by modal UI elements including DDialog\n\t * to provide the better interoperability with DOM-based UI elements\n\t * and WebGL-based UI elements.\n\t * However, an extra layer requires extra memory.\n\t * Set to true to enable the overlay layer.\n\t * The default value is false.\n\t */\n\toverlay?: boolean;\n}\n\nexport class DApplication implements DApplicationLike {\n\tprotected _options?: DApplicationOptions;\n\tprotected _root: HTMLElement;\n\tprotected _base: DApplicationLayer;\n\tprotected _overlay?: DApplicationLayer;\n\tprotected _resolution: number;\n\tprotected _isOverlayEnabled: boolean;\n\n\tconstructor( options?: DApplicationOptions ) {\n\t\tDApplications.add( this );\n\n\t\t// Root\n\t\tthis._root = this.toRootElement( options );\n\n\t\t// Resolution\n\t\tconst resolution = ( options && options.resolution != null ?\n\t\t\toptions.resolution : (window.devicePixelRatio || 1)\n\t\t);\n\t\tthis._resolution = resolution;\n\n\t\t// Remove the accessibility plugin\n\t\tdelete (Renderer as any).__plugins.accessibility;\n\n\t\t// Options\n\t\tthis._options = options;\n\n\t\t// Base layer\n\t\tconst base = this._base = this.newLayerBase( options );\n\n\t\t// Overlay layer\n\t\tthis._isOverlayEnabled = !! ( options && options.overlay );\n\t\tif( ! this._isOverlayEnabled ) {\n\t\t\tthis._overlay = base;\n\t\t}\n\t}\n\n\tget stage(): Container {\n\t\treturn this._base.stage;\n\t}\n\n\tgetRootElement(): HTMLElement {\n\t\treturn this._root;\n\t}\n\n\tgetResolution(): number {\n\t\treturn this._resolution;\n\t}\n\n\tprotected toRootElement( options?: DApplicationOptions ): HTMLElement {\n\t\tconst root = options && options.root;\n\t\tif( root != null ) {\n\t\t\tif( utilIsString( root ) ) {\n\t\t\t\tconst found = document.querySelector<HTMLElement>( root );\n\t\t\t\tif( found ) {\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn root;\n\t\t\t}\n\t\t}\n\t\treturn document.body;\n\t}\n\n\tprotected toLayerBaseOptions( options?: DApplicationOptions ): DApplicationLayerOptions {\n\t\tconst root = this._root;\n\t\tconst resolution = this._resolution;\n\t\tif( options ) {\n\t\t\treturn new DApplicationLayerOptions({\n\t\t\t\troot,\n\t\t\t\tpadding: options.padding,\n\t\t\t\twidth: options.width,\n\t\t\t\theight: options.height,\n\t\t\t\tbackground: options.background,\n\t\t\t\tresolution,\n\t\t\t\tantialias: options.antialias,\n\t\t\t\toverlay: false\n\t\t\t});\n\t\t}\n\t\treturn new DApplicationLayerOptions({\n\t\t\troot,\n\t\t\tresolution,\n\t\t\toverlay: false\n\t\t});\n\t}\n\n\tprotected newLayerBase( options?: DApplicationOptions ): DApplicationLayer {\n\t\treturn new DApplicationLayer( this, this.toLayerBaseOptions( options ) );\n\t}\n\n\tgetLayerBase(): DApplicationLayer {\n\t\treturn  this._base;\n\t}\n\n\tprotected toLayerOverlayOptions( options?: DApplicationOptions ): DApplicationLayerOptions {\n\t\tconst root = this._root;\n\t\tconst resolution = this._resolution;\n\t\tif( options ) {\n\t\t\treturn new DApplicationLayerOptions({\n\t\t\t\troot,\n\t\t\t\tpadding: options.padding,\n\t\t\t\twidth: options.width,\n\t\t\t\theight: options.height,\n\t\t\t\tbackground: {\n\t\t\t\t\tcolor: null\n\t\t\t\t},\n\t\t\t\tresolution,\n\t\t\t\tantialias: options.antialias,\n\t\t\t\toverlay: true\n\t\t\t});\n\t\t}\n\t\treturn new DApplicationLayerOptions({\n\t\t\troot,\n\t\t\tresolution,\n\t\t\toverlay: true\n\t\t});\n\t}\n\n\tprotected newLayerOverlay( options?: DApplicationOptions ): DApplicationLayer {\n\t\treturn new DApplicationLayer( this, this.toLayerOverlayOptions( options ) );\n\t}\n\n\tgetLayerOverlay(): DApplicationLayer {\n\t\tif( this._isOverlayEnabled ) {\n\t\t\tif( this._overlay == null ) {\n\t\t\t\tthis._overlay = this.newLayerOverlay( this._options );\n\t\t\t}\n\t\t\treturn this._overlay;\n\t\t} else {\n\t\t\treturn this._base;\n\t\t}\n\t}\n\n\tupdate(): void {\n\t\tif( this._isOverlayEnabled ) {\n\t\t\tconst base = this._base;\n\t\t\tbase.update();\n\n\t\t\tconst overlay = this._overlay;\n\t\t\tif( overlay ) {\n\t\t\t\toverlay.update();\n\t\t\t}\n\t\t} else {\n\t\t\treturn this._base.update();\n\t\t}\n\t}\n\n\trender(): void {\n\t\tif( this._isOverlayEnabled ) {\n\t\t\tconst base = this._base;\n\t\t\tbase.render();\n\n\t\t\tconst overlay = this._overlay;\n\t\t\tif( overlay ) {\n\t\t\t\toverlay.render();\n\t\t\t}\n\t\t} else {\n\t\t\treturn this._base.render();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DBoardOptions<THEME extends DThemeBoard = DThemeBoard> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeBoard extends DThemeBase {\n\n}\n\nexport class DBoard<\n\tTHEME extends DThemeBoard = DThemeBoard,\n\tOPTIONS extends DBoardOptions<THEME> = DBoardOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DBoard\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DButtonGroup } from \"./d-button-group\";\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DButtonBaseOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonBase = DThemeButtonBase\n> extends DImageBaseOptions<VALUE, THEME> {\n\ttoggle?: boolean;\n\tgroup?: DButtonGroup;\n}\n\nexport interface DThemeButtonBase extends DThemeImageBase {\n\tisToggle(): boolean;\n}\n\n// Option parser\nconst isToggle = <VALUE, THEME extends DThemeButtonBase>(\n\ttheme: DThemeButtonBase, options: DButtonBaseOptions<VALUE, THEME> | undefined\n): boolean => {\n\tif( options != null && options.toggle != null ) {\n\t\treturn options.toggle;\n\t}\n\treturn theme.isToggle();\n};\n\nexport class DButtonBase<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonBase = DThemeButtonBase,\n\tOPTIONS extends DButtonBaseOptions<VALUE, THEME> = DButtonBaseOptions<VALUE, THEME>\n> extends DImageBase<VALUE, THEME, OPTIONS> {\n\tprotected _isToggle!: boolean;\n\tprotected _onActiveUpBound!: () => void;\n\tprotected _onActiveUpBoundTarget!: Container | null;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.buttonMode = true;\n\t\tthis._isToggle = isToggle( this.theme, options );\n\t\tthis._onActiveUpBound = (): void => {\n\t\t\tthis.setPressed( false );\n\t\t\tconst target = this._onActiveUpBoundTarget;\n\t\t\tif( target != null ) {\n\t\t\t\ttarget.off( UtilPointerEvent.up, this._onActiveUpBound );\n\t\t\t}\n\t\t};\n\t\tthis._onActiveUpBoundTarget = null;\n\t\tthis.setActiveHandlers();\n\n\t\t// Group\n\t\tif( options != null && options.group != null ) {\n\t\t\toptions.group.add( this );\n\t\t}\n\t}\n\n\tprotected onShortcut( e: KeyboardEvent ): void {\n\t\tsuper.onShortcut( e );\n\t\tthis.onClick();\n\t}\n\n\tisToggle(): boolean {\n\t\treturn this._isToggle;\n\t}\n\n\tprotected setActiveHandlers(): void {\n\t\tUtilPointerEvent.onClick( this, (): void => {\n\t\t\tthis.onClick();\n\t\t});\n\n\t\tif( ! this.isToggle() ) {\n\t\t\tthis.on( UtilPointerEvent.down, (): void => {\n\t\t\t\tthis.setPressed( true );\n\t\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\t\tif( layer ) {\n\t\t\t\t\tconst target = this._onActiveUpBoundTarget = layer.stage;\n\t\t\t\t\ttarget.on( UtilPointerEvent.up, this._onActiveUpBound );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected onStateChange( newState: number, oldState: number ): void {\n\t\tsuper.onStateChange( newState, oldState );\n\t\tthis.buttonMode = DBaseStates.isActionable( newState );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButton\";\n\t}\n\n\tonClick(): void {\n\t\tif( this.isActionable() ) {\n\t\t\tif( this.isToggle() ) {\n\t\t\t\tthis.onToggleStart();\n\t\t\t\tthis.onToggleEnd();\n\t\t\t} else {\n\t\t\t\tthis.emit( \"active\", this );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onToggleStart(): void {\n\t\tthis.setActive( ! this.isActive() );\n\t}\n\n\tprotected onToggleEnd(): void {\n\t\tthis.emit( this.isActive() ? \"active\" : \"inactive\", this );\n\t}\n\n\tprotected onActivateKeyDown(): void {\n\t\tif( this.isActionable() ) {\n\t\t\tif( this.isToggle() ) {\n\t\t\t\tthis.onToggleStart();\n\t\t\t} else {\n\t\t\t\tthis.setPressed( true );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onActivateKeyUp(): void {\n\t\tif( this.isActionable() ) {\n\t\t\tif( this.isToggle() ) {\n\t\t\t\tthis.onToggleEnd();\n\t\t\t} else {\n\t\t\t\tif( this.isPressed() ) {\n\t\t\t\t\tthis.emit( \"active\", this );\n\t\t\t\t}\n\t\t\t\tthis.setPressed( false );\n\t\t\t}\n\t\t}\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onActivateKeyDown();\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tonKeyUp( e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onActivateKeyUp();\n\t\t}\n\n\t\treturn super.onKeyUp( e );\n\t}\n\n\tdestroy(): void {\n\t\t// Group\n\t\tconst options = this._options;\n\t\tif( options != null && options.group != null ) {\n\t\t\toptions.group.remove( this );\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonBase, DButtonBaseOptions, DThemeButtonBase } from \"./d-button-base\";\n\nexport interface DButtonOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButton = DThemeButton\n> extends DButtonBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButton extends DThemeButtonBase {\n\n}\n\nexport class DButton<\n\tVALUE = unknown,\n\tTHEME extends DThemeButton = DThemeButton,\n\tOPTIONS extends DButtonOptions<VALUE, THEME> = DButtonOptions<VALUE, THEME>\n> extends DButtonBase<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButton\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\n\nexport interface DButtonAmbientOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonAmbient = DThemeButtonAmbient\n> extends DButtonOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonAmbient extends DThemeButton {\n\n}\n\nexport class DButtonAmbient<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonAmbient = DThemeButtonAmbient,\n\tOPTIONS extends DButtonAmbientOptions<VALUE, THEME> = DButtonAmbientOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonAmbient\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonBase, DButtonBaseOptions, DThemeButtonBase } from \"./d-button-base\";\n\nexport interface DButtonCheckOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonCheck = DThemeButtonCheck\n> extends DButtonBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonCheck extends DThemeButtonBase {\n\n}\n\nexport class DButtonCheck<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonCheck = DThemeButtonCheck,\n\tOPTIONS extends DButtonCheckOptions<VALUE, THEME> = DButtonCheckOptions<VALUE, THEME>\n> extends DButtonBase<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonCheck, DButtonCheckOptions, DThemeButtonCheck } from \"./d-button-check\";\n\nexport interface DButtonCheckRightOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonCheckRight = DThemeButtonCheckRight\n> extends DButtonCheckOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonCheckRight extends DThemeButtonCheck {\n\n}\n\nexport class DButtonCheckRight<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonCheck = DThemeButtonCheck,\n\tOPTIONS extends DButtonCheckOptions<VALUE, THEME> = DButtonCheckOptions<VALUE, THEME>\n> extends DButtonCheck<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonCheckRight\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\n\nexport class DButtonPrimary extends DButton {\n\tprotected getType(): string {\n\t\treturn \"DButtonPrimary\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DLayout, DLayoutOptions, DThemeLayout } from \"./d-layout\";\n\nexport interface DLayoutHorizontalOptions<THEME extends DThemeLayout> extends DLayoutOptions<THEME> {\n\n}\n\nexport interface DThemeLayoutHorizontal extends DThemeLayout {\n\n}\n\nexport class DLayoutHorizontal<\n\tTHEME extends DThemeLayoutHorizontal = DThemeLayoutHorizontal,\n\tOPTIONS extends DLayoutHorizontalOptions<THEME> = DLayoutHorizontalOptions<THEME>\n> extends DLayout<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DLayoutHorizontal\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\nimport { DButtonPrimary } from \"./d-button-primary\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DDialog, DDialogOptions, DThemeDialog } from \"./d-dialog\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutSpace } from \"./d-layout-space\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DDialogCommandOptions<\n\tTHEME extends DThemeDialogCommand = DThemeDialogCommand\n> extends DDialogOptions<THEME> {\n\tok?: string;\n\tcancel?: string;\n}\n\nexport interface DThemeDialogCommand extends DThemeDialog {\n\tgetOk(): string | null;\n\tgetCancel(): string | null;\n\tgetLayoutX(): DCoordinate;\n\tgetLayoutY(): DCoordinate;\n\tgetLayoutWidth(): DCoordinate;\n\tgetLayoutHeight(): DCoordinate;\n}\n\nexport class DDialogCommand<\n\tTHEME extends DThemeDialogCommand = DThemeDialogCommand,\n\tOPTIONS extends DDialogCommandOptions<THEME> = DDialogCommandOptions<THEME>\n> extends DDialog<THEME, OPTIONS> {\n\tprotected _promise: Promise<void> | null = null;\n\tprotected _resolve: (() => void) | null = null;\n\tprotected _reject: (() => void) | null = null;\n\tprotected _buttonLayout?: DLayoutHorizontal;\n\tprotected _buttonOk?: DButton;\n\tprotected _buttonCancel?: DButton;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst theme = this.theme;\n\t\tconst layout = new DLayoutVertical({\n\t\t\tparent: this,\n\t\t\tx: theme.getLayoutX(),\n\t\t\ty: theme.getLayoutY(),\n\t\t\twidth: theme.getLayoutWidth(),\n\t\t\theight: theme.getLayoutHeight()\n\t\t});\n\n\t\tthis.onInit( layout, options );\n\n\t\t// Buttons\n\t\tconst ok = ( options && options.ok || theme.getOk() );\n\t\tconst cancel = ( options && options.cancel || theme.getCancel() );\n\t\tif( ok != null || cancel != null ) {\n\t\t\tconst buttonLayout = new DLayoutHorizontal({\n\t\t\t\tparent: layout,\n\t\t\t\twidth: \"padding\", height: \"auto\",\n\t\t\t\tpadding: {\n\t\t\t\t\ttop: this.padding.getTop()\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._buttonLayout = buttonLayout;\n\t\t\tnew DLayoutSpace({\n\t\t\t\tparent: buttonLayout,\n\t\t\t\tweight: 1\n\t\t\t});\n\t\t\tif( ok != null && cancel != null ) {\n\t\t\t\tthis._buttonCancel = new DButtonPrimary({\n\t\t\t\t\tparent: buttonLayout,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: cancel\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: (): void => {\n\t\t\t\t\t\t\tthis.onCancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._buttonOk = new DButton({\n\t\t\t\t\tparent: buttonLayout,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: ok\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: (): void => {\n\t\t\t\t\t\t\tthis.onOk();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if( ok != null ) {\n\t\t\t\tthis._buttonOk = new DButtonPrimary({\n\t\t\t\t\tparent: buttonLayout,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: ok\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: (): void => {\n\t\t\t\t\t\t\tthis.onOk();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if( cancel != null ) {\n\t\t\t\tthis._buttonCancel = new DButtonPrimary({\n\t\t\t\t\tparent: buttonLayout,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: cancel\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: (): void => {\n\t\t\t\t\t\t\tthis.onCancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tnew DLayoutSpace({\n\t\t\t\tparent: buttonLayout,\n\t\t\t\tweight: 1\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\t// OVERRIDE THIS\n\t}\n\n\topen(): Promise<void> {\n\t\tsuper.open();\n\t\treturn this._promise!;\n\t}\n\n\tprotected onOpen() {\n\t\tsuper.onOpen();\n\n\t\tif( this._promise == null ) {\n\t\t\tthis._promise = new Promise(( resolve, reject ): void => {\n\t\t\t\tthis._resolve = resolve;\n\t\t\t\tthis._reject = reject;\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected onClose() {\n\t\tsuper.onClose();\n\n\t\tconst reject = this._reject;\n\t\tthis._promise = null;\n\t\tthis._resolve = null;\n\t\tthis._reject = null;\n\n\t\tif( reject != null ) {\n\t\t\treject();\n\t\t}\n\t}\n\n\tprotected onOk() {\n\t\tconst resolve = this._resolve;\n\t\tthis._promise = null;\n\t\tthis._resolve = null;\n\t\tthis._reject = null;\n\n\t\tthis.close();\n\n\t\tif( resolve != null ) {\n\t\t\tresolve();\n\t\t}\n\n\t\tthis.emit( \"ok\", this );\n\t}\n\n\tprotected onCancel() {\n\t\tconst reject = this._reject;\n\t\tthis._promise = null;\n\t\tthis._resolve = null;\n\t\tthis._reject = null;\n\n\t\tthis.close();\n\n\t\tif( reject != null ) {\n\t\t\treject();\n\t\t}\n\n\t\tthis.emit( \"cancel\", this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogCommand\";\n\t}\n}\n","import { DApplications } from \"./d-applications\";\nimport { DHTMLElement, DHTMLElementOptions, DThemeHTMLElement } from \"./d-html-element\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport interface DInputOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeInput = DThemeInput\n> extends DHTMLElementOptions<VALUE, HTMLInputElement, THEME> {\n\tdescription?: string;\n\tediting?: {\n\t\tformatter?: ( value: VALUE ) => string;\n\t\tunformatter?: ( text: string ) => VALUE;\n\t\tvalidator?: ( value: VALUE ) => string | null;\n\t};\n}\n\nexport interface DThemeInput extends DThemeHTMLElement<HTMLInputElement> {\n\tgetEditingFormatter(): ( value: any, caller: any ) => string;\n\tgetEditingUnformatter(): ( text: string, caller: any ) => any;\n\tgetEditingValidator(): ( value: any, caller: any ) => unknown;\n}\n\nexport abstract class DInput<\n\tVALUE = unknown,\n\tTHEME extends DThemeInput = DThemeInput,\n\tOPTIONS extends DInputOptions<VALUE, THEME> = DInputOptions<VALUE, THEME>\n> extends DHTMLElement<VALUE, HTMLInputElement, THEME, OPTIONS> {\n\tprotected _description!: string;\n\n\tprotected _onInputKeyDownBound!: ( e: KeyboardEvent ) => void;\n\tprotected _onInputChangeBound!: ( e: Event ) => void;\n\tprotected _onInputInputBound!: ( e: Event ) => void;\n\n\tprotected _editingFormatter!: ( value: VALUE, caller: any ) => string;\n\tprotected _editingUnformatter!: ( text: string, caller: any ) => VALUE;\n\tprotected _editingValidator!: ( value: VALUE, caller: any ) => unknown;\n\tprotected _editingValidationResult!: unknown;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tthis._editingValidationResult = null;\n\t\tthis._editingValidator = ( options && options.editing && options.editing.validator ) ||\n\t\t\tthis.theme.getEditingValidator();\n\n\t\tsuper.init( options );\n\n\t\tthis._description = ( options && options.description ) || \"\";\n\n\t\tthis._editingFormatter = ( options && options.editing && options.editing.formatter ) ||\n\t\t\tthis.theme.getEditingFormatter();\n\t\tthis._editingUnformatter = ( options && options.editing && options.editing.unformatter ) ||\n\t\t\tthis.theme.getEditingUnformatter();\n\n\t\tthis._onInputKeyDownBound = ( e: KeyboardEvent ): void => {\n\t\t\tthis.onInputKeyDown( e );\n\t\t};\n\t\tthis._onInputChangeBound = (): void => {\n\t\t\tthis.onInputChange();\n\t\t};\n\t\tthis._onInputInputBound = ( e: Event ): void => {\n\t\t\tthis.onInputInput( e );\n\t\t};\n\t}\n\n\tget value(): VALUE {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: VALUE ) {\n\t\tthis.text = value;\n\t}\n\n\tprotected onTextChange(): void {\n\t\tsuper.onTextChange();\n\t\tthis.validate();\n\t}\n\n\tvalidate(): unknown {\n\t\tconst result = this._editingValidator( this._textValueComputed, this );\n\t\tif( this._editingValidationResult !== result ) {\n\t\t\tthis._editingValidationResult = result;\n\t\t\tthis.setInvalid( result != null );\n\t\t\tif( this.isHovered() ) {\n\t\t\t\tthis.applyTitle();\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected applyTitle(): void {\n\t\tconst editingValidationResult = this._editingValidationResult;\n\t\tif( utilIsString( editingValidationResult ) ) {\n\t\t\tconst layer = DApplications.getLayer( this );\n\t\t\tif( layer ) {\n\t\t\t\tlayer.view.title = editingValidationResult;\n\t\t\t}\n\t\t} else {\n\t\t\tsuper.applyTitle();\n\t\t}\n\t}\n\n\tprotected onStart(): void {\n\t\tsuper.onStart();\n\n\t\tconst text = this._text;\n\t\tif( text != null ) {\n\t\t\ttext.visible = false;\n\t\t}\n\t}\n\n\tprotected onCancel(): void {\n\t\tsuper.onCancel();\n\n\t\tconst text = this._text;\n\t\tif( text != null ) {\n\t\t\ttext.visible = true;\n\t\t}\n\t}\n\n\tprotected onEnd(): void {\n\t\tsuper.onEnd();\n\t\tthis.onInputChange();\n\t}\n\n\tprotected onElementAttached(\n\t\telement: HTMLInputElement, before: HTMLDivElement | null, after: HTMLDivElement | null\n\t): void {\n\t\tsuper.onElementAttached( element, before, after );\n\t\telement.type = this.getInputType();\n\t\telement.value = this._editingFormatter( this._textValueComputed, this );\n\t\telement.addEventListener( \"keydown\", this._onInputKeyDownBound );\n\t\telement.addEventListener( \"change\", this._onInputChangeBound );\n\t\telement.addEventListener( \"input\", this._onInputInputBound );\n\t}\n\n\tprotected onElementDetached(\n\t\telement: HTMLInputElement, before: HTMLDivElement | null, after: HTMLDivElement | null\n\t): void {\n\t\tsuper.onElementDetached( element, before, after );\n\t\telement.removeEventListener( \"keydown\", this._onInputKeyDownBound );\n\t\telement.removeEventListener( \"change\", this._onInputChangeBound );\n\t\telement.removeEventListener( \"input\", this._onInputInputBound );\n\t}\n\n\tprotected onInputKeyDown( e: KeyboardEvent ) {\n\t\tif( UtilKeyboardEvent.isOkKey( e ) ) {\n\t\t\tthis.end();\n\t\t\tthis.emit( \"enter\", this );\n\t\t} else if( UtilKeyboardEvent.isCancelKey( e ) ) {\n\t\t\tthis.cancel();\n\t\t}\n\t}\n\n\tprotected onInputChange() {\n\t\tif( this._isElementShown ) {\n\t\t\tconst element = this._element;\n\t\t\tif( element != null ) {\n\t\t\t\tconst newValue = this.toValue( element.value );\n\t\t\t\tconst oldValue = this._textValueComputed;\n\t\t\t\tif( oldValue !== newValue ) {\n\t\t\t\t\tthis.text = newValue;\n\t\t\t\t\tthis.emit( \"change\", newValue, oldValue, this );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onInputInput( e: Event ) {\n\t\tif( e.target instanceof HTMLInputElement ) {\n\t\t\tthis.emit( \"input\", this.toValue( e.target.value ), this );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DInput\";\n\t}\n\n\tprotected abstract toValue( valueAsString: string ): VALUE;\n\tprotected abstract getInputType(): string;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DInput, DInputOptions, DThemeInput } from \"./d-input\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\n\nexport interface DInputNumberOptions<\n\tTHEME extends DThemeInputNumber = DThemeInputNumber\n> extends DInputOptions<number, THEME> {\n\tstep?: number | null;\n\tmin?: number | null;\n\tmax?: number | null;\n}\n\nexport interface DThemeInputNumber extends DThemeInput {\n\tgetEditingFormatter(): ( value: number, caller: any ) => string;\n\tgetEditingUnformatter(): ( text: string, caller: any ) => number;\n\tgetEditingValidator(): ( value: number, caller: any ) => unknown;\n\tgetTextValue( state: DBaseState ): number;\n\tnewTextValue(): DStateAwareOrValueMightBe<number>;\n\tgetStep(): number | null;\n\tgetMin(): number | null;\n\tgetMax(): number | null;\n}\n\n// Option parser\nconst toStep = <THEME extends DThemeInputNumber>(\n\ttheme: THEME, options?: DInputNumberOptions<THEME>\n): number | null => {\n\tif( options != null ) {\n\t\treturn ( options.step != null ? options.step : theme.getStep() );\n\t}\n\treturn null;\n};\n\nconst toMin = <THEME extends DThemeInputNumber>(\n\ttheme: THEME, options?: DInputNumberOptions<THEME>\n): number | null => {\n\tif( options != null ) {\n\t\treturn ( options.min != null ? options.min : theme.getMin() );\n\t}\n\treturn null;\n};\n\nconst toMax = <THEME extends DThemeInputNumber>(\n\ttheme: THEME, options?: DInputNumberOptions<THEME>\n): number | null => {\n\tif( options != null ) {\n\t\treturn ( options.max != null ? options.max : theme.getMax() );\n\t}\n\treturn null;\n};\n\nexport abstract class DInputNumber<\n\tTHEME extends DThemeInputNumber = DThemeInputNumber,\n\tOPTIONS extends DInputNumberOptions<THEME> = DInputNumberOptions<THEME>\n> extends DInput<number, THEME, OPTIONS> {\n\tprotected _step!: number | null;\n\tprotected _min!: number | null;\n\tprotected _max!: number | null;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tconst theme = this.theme;\n\t\tthis._step = toStep( theme, options );\n\t\tthis._min = toMin( theme, options );\n\t\tthis._max = toMax( theme, options );\n\t}\n\n\tget step(): number | null {\n\t\treturn this._step;\n\t}\n\n\tset step( step: number | null ) {\n\t\tif( this._step !== step ) {\n\t\t\tthis._step = step;\n\t\t\tthis.updateInputStep();\n\t\t}\n\t}\n\n\tget min(): number | null {\n\t\treturn this._min;\n\t}\n\n\tset min( min: number | null ) {\n\t\tif( this._min !== min ) {\n\t\t\tthis._min = min;\n\t\t\tthis.updateInputMin();\n\t\t}\n\t}\n\n\tget max(): number | null {\n\t\treturn this._max;\n\t}\n\n\tset max( max: number | null ) {\n\t\tif( this._max !== max ) {\n\t\t\tthis._max = max;\n\t\t\tthis.updateInputMax();\n\t\t}\n\t}\n\n\tprotected toValue( valueAsString: string ): number {\n\t\tconst result = this._editingUnformatter( valueAsString, this );\n\t\tif( result === result /* NaN Check */ ) {\n\t\t\tif( this._min != null && result < this._min ) {\n\t\t\t\treturn this._min;\n\t\t\t}\n\t\t\tif( this._max != null && this._max < result ) {\n\t\t\t\treturn this._max;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\treturn this.value;\n\t}\n\n\tprotected updateInputStep(): void {\n\t\tif( this._isElementShown ) {\n\t\t\tconst element = this._element;\n\t\t\tif( element ) {\n\t\t\t\tthis.initInputStep( element );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateInputMin(): void {\n\t\tif( this._isElementShown ) {\n\t\t\tconst element = this._element;\n\t\t\tif( element ) {\n\t\t\t\tthis.initInputMin( element );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateInputMax(): void {\n\t\tif( this._isElementShown ) {\n\t\t\tconst element = this._element;\n\t\t\tif( element ) {\n\t\t\t\tthis.initInputMax( element );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected initInputStep( input: HTMLInputElement ): void {\n\t\tif( this._step != null ) {\n\t\t\tinput.step = String( this._step );\n\t\t} else {\n\t\t\tinput.removeAttribute( \"step\" );\n\t\t}\n\t}\n\n\tprotected initInputMin( input: HTMLInputElement ): void {\n\t\tif( this._min != null ) {\n\t\t\tinput.min = `${this._min}`;\n\t\t} else {\n\t\t\tinput.removeAttribute( \"min\" );\n\t\t}\n\t}\n\n\tprotected initInputMax( input: HTMLInputElement ): void {\n\t\tif( this._max != null ) {\n\t\t\tinput.max = `${this._max}`;\n\t\t} else {\n\t\t\tinput.removeAttribute( \"max\" );\n\t\t}\n\t}\n\n\tprotected onElementAttached(\n\t\telement: HTMLInputElement, before: HTMLDivElement | null, after: HTMLDivElement | null\n\t): void {\n\t\tsuper.onElementAttached( element, before, after );\n\t\tthis.initInputStep( element );\n\t\tthis.initInputMin( element );\n\t\tthis.initInputMax( element );\n\t}\n\n\tprotected getInputType(): string {\n\t\treturn \"number\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputNumber, DInputNumberOptions, DThemeInputNumber } from \"./d-input-number\";\n\nexport interface DInputRealOptions<\n\tTHEME extends DThemeInputReal = DThemeInputReal\n> extends DInputNumberOptions<THEME> {\n\n}\n\nexport interface DThemeInputReal extends DThemeInputNumber {\n\n}\n\nexport class DInputReal<\n\tTHEME extends DThemeInputReal = DThemeInputReal,\n\tOPTIONS extends DInputRealOptions<THEME> = DInputRealOptions<THEME>\n> extends DInputNumber<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DInputReal\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DTextBase, DTextBaseOptions, DThemeTextBase } from \"./d-text-base\";\n\nexport interface DTextOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeText = DThemeText\n> extends DTextBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeText extends DThemeTextBase {\n\n}\n\nexport class DText<\n\tVALUE = unknown,\n\tTHEME extends DThemeText = DThemeText,\n\tOPTIONS extends DTextOptions<VALUE, THEME> = DTextOptions<VALUE, THEME>\n> extends DTextBase<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DText, DTextOptions, DThemeText } from \"./d-text\";\n\nexport interface DInputLabelOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeText = DThemeText\n> extends DTextOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeInputLabel extends DThemeText {\n\n}\n\nexport class DInputLabel<\n\tVALUE = unknown,\n\tTHEME extends DThemeInputLabel = DThemeInputLabel,\n\tOPTIONS extends DInputLabelOptions<VALUE, THEME> = DInputLabelOptions<VALUE, THEME>\n> extends DText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DInputLabel\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DInputLabel, DInputLabelOptions } from \"./d-input-label\";\nimport { DLayoutOptions } from \"./d-layout\";\nimport { DLayoutHorizontal, DThemeLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutSpace, DLayoutSpaceOptions } from \"./d-layout-space\";\n\ninterface InputOptions {\n\tweight?: number;\n}\n\ninterface Input extends DisplayObject {\n\treadonly height: number;\n}\n\nexport interface DInputAndLabelOptions<\n\tINPUT_OPTIONS extends InputOptions = InputOptions,\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel\n> extends DLayoutOptions<THEME> {\n\tinput?: INPUT_OPTIONS;\n\tlabel?: DInputLabelOptions;\n\tspace?: DLayoutSpaceOptions;\n}\n\nexport interface DThemeInputAndLabel extends DThemeLayoutHorizontal {\n\n}\n\nexport abstract class DInputAndLabel<\n\tINPUT extends Input,\n\tINPUT_OPTIONS extends InputOptions,\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel,\n\tOPTIONS extends DInputAndLabelOptions<INPUT_OPTIONS, THEME> = DInputAndLabelOptions<INPUT_OPTIONS, THEME>\n> extends DLayoutHorizontal<THEME, OPTIONS> {\n\tprotected _input: INPUT;\n\tprotected _label: DInputLabel;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.addChild( this._label = new DInputLabel( options != null ? options.label : undefined ) );\n\t\tthis.addChild( this._input = this.createInput( options != null ? options.input : undefined ) );\n\t\tif( options != null && options.space != null ) {\n\t\t\tthis.addChild( new DLayoutSpace( options.space ) );\n\t\t}\n\t}\n\n\tget input() {\n\t\treturn this._input;\n\t}\n\n\tget label() {\n\t\treturn this._label;\n\t}\n\n\tprotected abstract createInput( options?: INPUT_OPTIONS | { weight: number } ): INPUT;\n\n\tprotected getType(): string {\n\t\treturn \"DInputAndLabel\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputAndLabel, DInputAndLabelOptions, DThemeInputAndLabel } from \"./d-input-and-label\";\nimport { DInputReal, DInputRealOptions, DThemeInputReal } from \"./d-input-real\";\n\nexport interface DInputRealAndLabelOptions<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel\n> extends DInputAndLabelOptions<DInputRealOptions, THEME> {}\n\nexport class DInputRealAndLabel<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel,\n\tOPTIONS extends DInputRealAndLabelOptions<THEME> = DInputRealAndLabelOptions<THEME>\n> extends DInputAndLabel<DInputReal, DInputRealOptions, THEME, OPTIONS> {\n\tprotected createInput( options?: DInputRealOptions<DThemeInputReal> ): DInputReal {\n\t\treturn new DInputReal( options );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DInput, DInputOptions, DThemeInput } from \"./d-input\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\n\nexport interface DInputTextOptions<\n\tTHEME extends DThemeInputText = DThemeInputText\n> extends DInputOptions<string, THEME> {\n\n}\n\nexport interface DThemeInputText extends DThemeInput {\n\tgetEditingFormatter(): ( value: string, caller: any ) => string;\n\tgetEditingUnformatter(): ( text: string, caller: any ) => string;\n\tgetEditingValidator(): ( value: string, caller: any ) => unknown;\n\tgetTextFormatter(): ( value: string, caller: any ) => string;\n\tgetTextValue( state: DBaseState ): string;\n\tnewTextValue(): DStateAwareOrValueMightBe<string>;\n}\n\nexport class DInputText<\n\tTHEME extends DThemeInputText = DThemeInputText,\n\tOPTIONS extends DInputTextOptions<THEME> = DInputTextOptions<THEME>\n> extends DInput<string, THEME, OPTIONS> {\n\tprotected toValue( valueAsString: string ): string {\n\t\treturn this._editingUnformatter( valueAsString, this );\n\t}\n\n\tprotected getInputType(): string {\n\t\treturn \"text\";\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DInputText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputAndLabel, DInputAndLabelOptions, DThemeInputAndLabel } from \"./d-input-and-label\";\nimport { DInputText, DInputTextOptions, DThemeInputText } from \"./d-input-text\";\n\nexport interface DInputTextAndLabelOptions<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel\n> extends DInputAndLabelOptions<DInputTextOptions, THEME> {}\n\nexport class DInputTextAndLabel<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel,\n\tOPTIONS extends DInputTextAndLabelOptions<THEME> = DInputTextAndLabelOptions<THEME>\n> extends DInputAndLabel<DInputText, DInputTextOptions, THEME, OPTIONS> {\n\tprotected createInput( options?: DInputTextOptions<DThemeInputText> ): DInputText {\n\t\treturn new DInputText( options );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DColorAndAlpha } from \"./d-color\";\n\nexport class DPickerColorAndAlpha implements DColorAndAlpha {\n\tprotected _colorAndAlpha: DColorAndAlpha;\n\tprotected _onColorChange: ( color: number ) => void;\n\tprotected _onAlphaChange: ( alpha: number ) => void;\n\n\tconstructor(\n\t\tcolorAndAlpha: DColorAndAlpha,\n\t\tonColorChange: ( color: number ) => void,\n\t\tonAlphaChange: ( alpha: number ) => void\n\t) {\n\t\tthis._colorAndAlpha = colorAndAlpha;\n\t\tthis._onColorChange = onColorChange;\n\t\tthis._onAlphaChange = onAlphaChange;\n\t}\n\n\tget color() {\n\t\treturn this._colorAndAlpha.color;\n\t}\n\n\tset color( color: number ) {\n\t\tif( this._colorAndAlpha.color !== color ) {\n\t\t\tconst callback = this._onColorChange;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback( color );\n\t\t\t}\n\t\t}\n\t}\n\n\tget alpha() {\n\t\treturn this._colorAndAlpha.alpha;\n\t}\n\n\tset alpha( alpha: number ) {\n\t\tif( this._colorAndAlpha.alpha !== alpha ) {\n\t\t\tconst callback = this._onAlphaChange;\n\t\t\tif( callback != null ) {\n\t\t\t\tcallback( alpha );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DColorAndAlpha } from \"./d-color\";\n\nexport class DPickerColorRecent extends utils.EventEmitter {\n\tprotected _recents: DColorAndAlpha[];\n\tprotected _capacity: number;\n\n\tconstructor( recents: DColorAndAlpha[], capacity: number ) {\n\t\tsuper();\n\n\t\tthis._recents = recents;\n\t\tthis._capacity = capacity;\n\t}\n\n\tget( index: number ): DColorAndAlpha | null {\n\t\tconst recents = this._recents;\n\t\tif( 0 <= index && index < recents.length ) {\n\t\t\treturn recents[ recents.length - 1 - index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( index: number, colorAndAlpha: DColorAndAlpha ): DColorAndAlpha | null {\n\t\tconst recents = this._recents;\n\t\tif( 0 <= index && index < recents.length ) {\n\t\t\tconst result = recents[ recents.length - 1 - index ];\n\t\t\trecents[ recents.length - 1 - index ] = {\n\t\t\t\tcolor: colorAndAlpha.color,\n\t\t\t\talpha: colorAndAlpha.alpha\n\t\t\t};\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcontains( colorAndAlpha: DColorAndAlpha ): boolean {\n\t\tconst recents = this._recents;\n\t\tfor( let i = 0, imax = recents.length; i < imax; ++i ) {\n\t\t\tconst recent = recents[ i ];\n\t\t\tif( recent.color === colorAndAlpha.color && recent.alpha === colorAndAlpha.alpha ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tadd( colorAndAlpha: DColorAndAlpha ): this {\n\t\tconst recents = this._recents;\n\t\trecents.push({\n\t\t\tcolor: colorAndAlpha.color,\n\t\t\talpha: colorAndAlpha.alpha\n\t\t});\n\t\tif( this._capacity < recents.length ) {\n\t\t\trecents.shift();\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\treturn this;\n\t}\n\n\tpop(): DColorAndAlpha | null {\n\t\tconst recents = this._recents;\n\t\tconst result = recents.shift();\n\t\tif( result != null ) {\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\treturn this._recents.length;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, interaction, Point, Sprite, Texture } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DColorAndAlpha } from \"./d-color\";\nimport { DInputRealAndLabel } from \"./d-input-real-and-label\";\nimport { DInputTextAndLabel } from \"./d-input-text-and-label\";\nimport { DPickerColorAndAlpha } from \"./d-picker-color-and-alpha\";\nimport { DPickerColorRecent } from \"./d-picker-color-recent\";\nimport { UtilHsv } from \"./util/util-hsv\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\nimport { UtilRgb } from \"./util/util-rgb\";\n\nexport interface DPickerColorOptions<THEME extends DThemePickerColor = DThemePickerColor> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerColor extends DThemeBase {\n\tgetMainWidth(): number;\n\tgetMainHeight(): number;\n\tgetMainTexture(): Texture;\n\tgetMainPointerTexture(): Texture;\n\tgetMainPointerColor(): number;\n\tgetMainPointerAlpha(): number;\n\n\tgetBaseHeight(): number;\n\tgetBaseMargin(): number;\n\tgetBaseTexture(): Texture;\n\tgetBasePointerTexture(): Texture;\n\tgetBasePointerColor(): number;\n\tgetBasePointerAlpha(): number;\n\n\tgetAlphaHeight(): number;\n\tgetAlphaMargin(): number;\n\tgetAlphaTexture(): Texture;\n\tgetAlphaCheckerboardTexture(): Texture;\n\tgetAlphaPointerTexture(): Texture;\n\tgetAlphaPointerColor(): number;\n\tgetAlphaPointerAlpha(): number;\n\n\tgetRecentMargin(): number;\n\tgetRecentColorMargin(): number;\n\tgetRecentColorWidth(): number;\n\tgetRecentColorHeight(): number;\n\tgetRecentColorCount(): number;\n\tgetRecentCheckerboardTexture(): Texture;\n\tgetRecents(): DColorAndAlpha[];\n\n\tgetInputMargin(): number;\n\tgetInputLabelWidth(): number;\n\n\tgetSampleWidth(): number;\n\tgetSampleHeight(): number;\n\tgetSampleCheckerboardTexture(): Texture;\n}\n\nexport class DPickerColor<\n\tTHEME extends DThemePickerColor = DThemePickerColor,\n\tOPTIONS extends DPickerColorOptions<THEME> = DPickerColorOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected static RECENT_COLORS: DPickerColorRecent | null = null;\n\n\tprotected _mainBaseSprite!: Sprite;\n\tprotected _mainSprite!: Sprite;\n\tprotected _mainPointerSprite!: Sprite;\n\tprotected _pointerPoint!: Point;\n\tprotected _onMainMoveBound!: ( e: InteractionEvent ) => void;\n\tprotected _onMainUpBound!: ( e: InteractionEvent ) => void;\n\n\tprotected _baseSprite!: Sprite;\n\tprotected _basePointerSprite!: Sprite;\n\tprotected _onBaseMoveBound!: ( e: InteractionEvent ) => void;\n\tprotected _onBaseUpBound!: ( e: InteractionEvent ) => void;\n\n\tprotected _alphaCheckerboardSprite!: Sprite;\n\tprotected _alphaSprite!: Sprite;\n\tprotected _alphaPointerSprite!: Sprite;\n\tprotected _onAlphaMoveBound!: ( e: InteractionEvent ) => void;\n\tprotected _onAlphaUpBound!: ( e: InteractionEvent ) => void;\n\n\tprotected _recentColorSprites!: Sprite[];\n\tprotected _recent!: DPickerColorRecent;\n\n\tprotected _inputAndLabelColor!: DInputTextAndLabel;\n\tprotected _inputAndLabelAlpha!: DInputRealAndLabel;\n\n\tprotected _sampleCurrentCheckerboardSprite!: Sprite;\n\tprotected _sampleCurrentSprite!: Sprite;\n\tprotected _sampleNewCheckerboardSprite!: Sprite;\n\tprotected _sampleNewSprite!: Sprite;\n\n\tprotected _current!: DColorAndAlpha;\n\tprotected _currentPicker!: DPickerColorAndAlpha;\n\tprotected _base!: number;\n\tprotected _new!: DColorAndAlpha;\n\tprotected _newPicker!: DPickerColorAndAlpha;\n\n\tget current(): DColorAndAlpha {\n\t\treturn this._currentPicker;\n\t}\n\n\tget new(): DColorAndAlpha {\n\t\treturn this._newPicker;\n\t}\n\n\tget recent(): DPickerColorRecent {\n\t\treturn this._recent;\n\t}\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tthis._base = 0xff0000;\n\t\tthis._new = { color: 0xffffff, alpha: 1 };\n\t\tthis._newPicker = new DPickerColorAndAlpha( this._new, ( color ) => {\n\t\t\tthis.setColorNew( color );\n\t\t}, ( alpha: number ) => {\n\t\t\tthis.setAlphaNew( alpha );\n\t\t});\n\t\tthis._current = { color: 0xffffff, alpha: 1 };\n\t\tthis._currentPicker = new DPickerColorAndAlpha( this._current, ( color ) => {\n\t\t\tthis.setColorCurrent( color );\n\t\t}, ( alpha: number ) => {\n\t\t\tthis.setAlphaCurrent( alpha );\n\t\t});\n\n\t\tconst theme = this.theme;\n\t\tconst padding = this._padding;\n\t\tconst paddingTop = padding.getTop();\n\t\tconst paddingRight = padding.getRight();\n\t\tconst paddingBottom = padding.getBottom();\n\t\tconst paddingLeft = padding.getLeft();\n\t\tthis._pointerPoint = new Point();\n\n\t\t// Main\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst mainHeight = theme.getMainHeight();\n\t\tconst mainBaseSprite = this._mainBaseSprite = new Sprite( Texture.WHITE );\n\t\tmainBaseSprite.x = paddingLeft;\n\t\tmainBaseSprite.y = paddingTop;\n\t\tmainBaseSprite.width = mainWidth;\n\t\tmainBaseSprite.height = mainHeight;\n\t\tmainBaseSprite.interactive = true;\n\t\tthis.addChild( mainBaseSprite );\n\n\t\tconst mainSprite = this._mainSprite = new Sprite( theme.getMainTexture() );\n\t\tmainSprite.x = paddingLeft;\n\t\tmainSprite.y = paddingTop;\n\t\tmainSprite.tint = this._base;\n\t\tmainSprite.interactive = false;\n\t\tthis.addChild( mainSprite );\n\n\t\t// Main event handling\n\t\tthis._onMainMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onMainMove( e );\n\t\t};\n\t\tthis._onMainUpBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onMainUp( e );\n\t\t};\n\t\tmainBaseSprite.on( UtilPointerEvent.down, ( e: InteractionEvent ) => {\n\t\t\tthis.onMainDown( e );\n\t\t});\n\n\t\t// Base color picker\n\t\tconst baseSprite = this._baseSprite = new Sprite( theme.getBaseTexture() );\n\t\tbaseSprite.x = paddingLeft;\n\t\tbaseSprite.y = mainBaseSprite.y + mainBaseSprite.height + theme.getBaseMargin();\n\t\tbaseSprite.interactive = true;\n\t\tthis.addChild( baseSprite );\n\n\t\t// Base event\n\t\tthis._onBaseMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onBaseMove( e );\n\t\t};\n\t\tthis._onBaseUpBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onBaseUp( e );\n\t\t};\n\t\tbaseSprite.on( UtilPointerEvent.down, ( e: InteractionEvent ) => {\n\t\t\tthis.onBaseDown( e );\n\t\t});\n\n\t\t// Alpha picker\n\t\tconst alphaCheckerboardSprite = this._alphaCheckerboardSprite =\n\t\t\tnew Sprite( theme.getAlphaCheckerboardTexture() );\n\t\talphaCheckerboardSprite.x = padding.getLeft();\n\t\talphaCheckerboardSprite.y = baseSprite.y + theme.getBaseHeight() + theme.getBaseMargin();\n\t\talphaCheckerboardSprite.interactive = false;\n\t\tthis.addChild( alphaCheckerboardSprite );\n\n\t\tconst alphaSprite = new Sprite( theme.getAlphaTexture() );\n\t\talphaSprite.tint = this._new.color;\n\t\talphaSprite.interactive = true;\n\t\talphaCheckerboardSprite.addChild( alphaSprite );\n\n\t\t// Alpha event\n\t\tthis._onAlphaMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAlphaMove( e );\n\t\t};\n\t\tthis._onAlphaUpBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAlphaUp( e );\n\t\t};\n\t\talphaSprite.on( UtilPointerEvent.down, ( e: InteractionEvent ) => {\n\t\t\tthis.onAlphaDown( e );\n\t\t});\n\n\t\t// Pointers\n\t\tconst mainPointerSprite = this._mainPointerSprite = new Sprite( theme.getMainPointerTexture() );\n\t\tmainPointerSprite.x = paddingLeft;\n\t\tmainPointerSprite.y = paddingTop;\n\t\tmainPointerSprite.anchor.x = 0.5;\n\t\tmainPointerSprite.anchor.y = 0.5;\n\t\tmainPointerSprite.tint = theme.getMainPointerColor();\n\t\tmainPointerSprite.alpha = theme.getMainPointerAlpha();\n\t\tmainPointerSprite.interactive = false;\n\t\tthis.addChild( mainPointerSprite );\n\n\t\tconst alphaPointerSprite = this._alphaPointerSprite = new Sprite( theme.getAlphaPointerTexture() );\n\t\talphaPointerSprite.x = mainWidth;\n\t\talphaPointerSprite.y = alphaCheckerboardSprite.height * 0.5;\n\t\talphaPointerSprite.tint = theme.getAlphaPointerColor();\n\t\talphaPointerSprite.alpha = theme.getAlphaPointerAlpha();\n\t\talphaPointerSprite.anchor.set( 0.5, 0.5 );\n\t\talphaPointerSprite.interactive = false;\n\t\talphaCheckerboardSprite.addChild( alphaPointerSprite );\n\n\t\tconst basePointerSprite = this._basePointerSprite = new Sprite( theme.getBasePointerTexture() );\n\t\tbasePointerSprite.x = 0;\n\t\tbasePointerSprite.y = baseSprite.height * 0.5;\n\t\tbasePointerSprite.tint = theme.getBasePointerColor();\n\t\tbasePointerSprite.alpha = theme.getBasePointerAlpha();\n\t\tbasePointerSprite.anchor.set( 0.5, 0.5 );\n\t\tbasePointerSprite.interactive = false;\n\t\tbaseSprite.addChild( basePointerSprite );\n\n\t\t// Recently used\n\t\tthis._recentColorSprites = [];\n\t\tconst recentColorSprites = this._recentColorSprites;\n\t\tconst recentColorCount = theme.getRecentColorCount();\n\t\tconst recentColorWidth = theme.getRecentColorWidth();\n\t\tconst recentColorHeight = theme.getRecentColorHeight();\n\t\tconst recentColorWidthHalf = recentColorWidth * 0.5;\n\t\tconst recentColorHeightHalf = recentColorHeight * 0.5;\n\t\tconst recentColorMargin = theme.getRecentColorMargin();\n\t\tconst recentColorY = alphaCheckerboardSprite.y + theme.getAlphaHeight() + theme.getRecentMargin();\n\t\tconst recentCheckerboardTexture = theme.getRecentCheckerboardTexture();\n\t\tif( DPickerColor.RECENT_COLORS == null ) {\n\t\t\tDPickerColor.RECENT_COLORS = new DPickerColorRecent(\n\t\t\t\ttheme.getRecents().slice( 0 ),\n\t\t\t\trecentColorCount\n\t\t\t);\n\t\t}\n\t\tconst recent = this._recent = DPickerColor.RECENT_COLORS;\n\t\trecent.on( \"change\", () => {\n\t\t\tthis.onRecentChange();\n\t\t});\n\t\tconst onRecentClick = ( e: InteractionEvent ) => {\n\t\t\tconst checkerboardSprite = e.currentTarget;\n\t\t\tif( checkerboardSprite instanceof Container ) {\n\t\t\t\tconst sprite = checkerboardSprite.children[ 0 ];\n\t\t\t\tif( sprite instanceof Sprite ) {\n\t\t\t\t\tthis.setColorNew( sprite.tint );\n\t\t\t\t\tthis.setAlphaNew( sprite.alpha );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tfor( let i = 0; i < recentColorCount; ++i ) {\n\t\t\tconst x = paddingLeft + i * (recentColorWidth + recentColorMargin);\n\n\t\t\tconst checkerboardSprite = new Sprite( recentCheckerboardTexture );\n\t\t\tcheckerboardSprite.x = x + recentColorWidthHalf;\n\t\t\tcheckerboardSprite.y = recentColorY + recentColorHeightHalf;\n\t\t\tcheckerboardSprite.anchor.x = 0.5;\n\t\t\tcheckerboardSprite.anchor.y = 0.5;\n\t\t\tcheckerboardSprite.buttonMode = true;\n\t\t\tcheckerboardSprite.interactive = true;\n\t\t\tUtilPointerEvent.onClick( checkerboardSprite, onRecentClick );\n\t\t\tthis.addChild( checkerboardSprite );\n\n\t\t\tconst sprite = new Sprite( Texture.WHITE );\n\t\t\tconst recentColorAndAlpha = recent.get( i );\n\t\t\tif( recentColorAndAlpha != null ) {\n\t\t\t\tsprite.tint = recentColorAndAlpha.color;\n\t\t\t\tsprite.alpha = recentColorAndAlpha.alpha;\n\t\t\t} else {\n\t\t\t\tsprite.tint = 0xffffff;\n\t\t\t\tsprite.alpha = 0;\n\t\t\t}\n\t\t\tsprite.width = recentColorWidth;\n\t\t\tsprite.height = recentColorHeight;\n\t\t\tsprite.anchor.x = 0.5;\n\t\t\tsprite.anchor.y = 0.5;\n\t\t\tsprite.interactive = false;\n\t\t\tcheckerboardSprite.addChild( sprite );\n\t\t\trecentColorSprites.push( sprite );\n\t\t}\n\n\t\t// Input color\n\t\tconst inputMargin = theme.getInputMargin();\n\t\tconst inputY = recentColorY + recentColorHeight + inputMargin;\n\t\tconst inputWidth = mainWidth * 0.5;\n\t\tconst inputAndLabelColor = this._inputAndLabelColor = new DInputTextAndLabel({\n\t\t\tparent: this,\n\t\t\tx: paddingLeft,\n\t\t\ty: inputY,\n\t\t\twidth: inputWidth,\n\t\t\tlabel: {\n\t\t\t\twidth: theme.getInputLabelWidth(),\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: \"#\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tinput: {\n\t\t\t\tweight: 1,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: \"FFFFFF\"\n\t\t\t\t},\n\t\t\t\ton: {\n\t\t\t\t\tinput: ( code: string ): void => {\n\t\t\t\t\t\tconst color = UtilRgb.fromCode( code );\n\t\t\t\t\t\tif( color != null ) {\n\t\t\t\t\t\t\tthis.setColorNew( color );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst inputAndLabelAlpha = this._inputAndLabelAlpha = new DInputRealAndLabel({\n\t\t\tparent: this,\n\t\t\tx: paddingLeft,\n\t\t\ty: inputY + inputAndLabelColor.height + inputMargin,\n\t\t\twidth: inputWidth,\n\t\t\tlabel: {\n\t\t\t\twidth: theme.getInputLabelWidth(),\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: \"A\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tinput: {\n\t\t\t\tweight: 1,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: 1\n\t\t\t\t},\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 1,\n\t\t\t\ton: {\n\t\t\t\t\tinput: ( value: number ) => {\n\t\t\t\t\t\tthis.setAlphaNew( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Samples\n\t\tconst sampleWidth = theme.getSampleWidth();\n\t\tconst sampleHeight = theme.getSampleHeight();\n\t\tconst sampleX = paddingLeft + mainWidth * 0.75 - sampleWidth;\n\t\tconst sampleY = inputY + (inputAndLabelColor.height + inputMargin + inputAndLabelAlpha.height - sampleHeight) * 0.5;\n\n\t\tconst sampleCurrentCheckerboardSprite = this._sampleCurrentCheckerboardSprite =\n\t\t\tnew Sprite( theme.getSampleCheckerboardTexture() );\n\t\tsampleCurrentCheckerboardSprite.x = sampleX;\n\t\tsampleCurrentCheckerboardSprite.y = sampleY;\n\t\tsampleCurrentCheckerboardSprite.width = sampleWidth;\n\t\tsampleCurrentCheckerboardSprite.height = sampleHeight;\n\t\tsampleCurrentCheckerboardSprite.interactive = false;\n\t\tthis.addChild( sampleCurrentCheckerboardSprite );\n\n\t\tconst current = this._current;\n\t\tconst sampleCurrentSprite = this._sampleCurrentSprite = new Sprite( Texture.WHITE );\n\t\tsampleCurrentSprite.x = sampleX;\n\t\tsampleCurrentSprite.y = sampleY;\n\t\tsampleCurrentSprite.tint = current.color;\n\t\tsampleCurrentSprite.alpha = current.alpha;\n\t\tsampleCurrentSprite.width = sampleWidth;\n\t\tsampleCurrentSprite.height = sampleHeight;\n\t\tsampleCurrentSprite.interactive = true;\n\t\tsampleCurrentSprite.buttonMode = true;\n\t\tUtilPointerEvent.onClick( sampleCurrentSprite, (): void => {\n\t\t\tthis.setColorNew( current.color );\n\t\t\tthis.setAlphaNew( current.alpha );\n\t\t});\n\t\tthis.addChild( sampleCurrentSprite );\n\n\t\tconst sampleNewCheckerboardSprite = this._sampleNewCheckerboardSprite =\n\t\t\tnew Sprite( theme.getSampleCheckerboardTexture() );\n\t\tsampleNewCheckerboardSprite.x = sampleX + sampleWidth;\n\t\tsampleNewCheckerboardSprite.y = sampleY;\n\t\tsampleNewCheckerboardSprite.width = sampleWidth;\n\t\tsampleNewCheckerboardSprite.height = sampleHeight;\n\t\tsampleNewCheckerboardSprite.interactive = false;\n\t\tthis.addChild( sampleNewCheckerboardSprite );\n\n\t\tconst sampleNewSprite = this._sampleNewSprite = new Sprite( Texture.WHITE );\n\t\tsampleNewSprite.x = sampleX + sampleWidth;\n\t\tsampleNewSprite.y = sampleY;\n\t\tsampleNewSprite.tint = this._new.color;\n\t\tsampleNewSprite.alpha = this._new.alpha;\n\t\tsampleNewSprite.width = sampleWidth;\n\t\tsampleNewSprite.height = sampleHeight;\n\t\tsampleNewSprite.interactive = false;\n\t\tthis.addChild( sampleNewSprite );\n\n\t\t// Width\n\t\tif( options == null || options.width == null ) {\n\t\t\tthis.width = paddingLeft + mainWidth + paddingRight;\n\t\t}\n\n\t\t// Height\n\t\tif( options == null || options.height == null ) {\n\t\t\tthis.height = inputY + inputAndLabelColor.height + inputMargin + inputAndLabelAlpha.height + paddingBottom;\n\t\t}\n\t}\n\n\tprotected onMainDown( e: InteractionEvent ): void {\n\t\tthis.onMainPick( e.data.global );\n\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst stage = layer.stage;\n\t\t\tstage.on( UtilPointerEvent.move, this._onMainMoveBound );\n\t\t\tstage.on( UtilPointerEvent.up, this._onMainUpBound );\n\t\t}\n\t}\n\n\tprotected onMainMove( e: InteractionEvent ): void {\n\t\tthis.onMainPick( e.data.global );\n\t}\n\n\tprotected onMainUp( e: InteractionEvent ): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst stage = layer.stage;\n\t\t\tstage.off( UtilPointerEvent.move, this._onMainMoveBound );\n\t\t\tstage.off( UtilPointerEvent.up, this._onMainUpBound );\n\t\t}\n\t}\n\n\tprotected toMainHex( b: number, w0: number, w1: number, shift: number ) {\n\t\treturn Math.max( 0, Math.min( 255, w0 * 255 + w1 * (( b >> shift ) & 0xff) ) ) << shift;\n\t}\n\n\tprotected toMainColor( base: number, tx: number, ty: number, width: number, height: number ): number {\n\t\tconst hw = width * 0.5;\n\t\tconst ux = Math.max( 0, Math.min( 1, ((tx - hw) * ( 1 - ty / height ) + hw) / width ) );\n\t\tconst uy = Math.max( 0, Math.min( 1, ty / height ) );\n\t\tconst w1 = Math.abs( 0.5 * uy  - ux );\n\t\tconst w0 = 1 - w1 - uy;\n\t\tconst r = this.toMainHex( base, w0, w1, 16 );\n\t\tconst g = this.toMainHex( base, w0, w1, 8 );\n\t\tconst b = this.toMainHex( base, w0, w1, 0 );\n\t\treturn r | g | b;\n\t}\n\n\tprotected onMainPick( global: Point ) {\n\t\tconst point = this._pointerPoint;\n\t\tconst padding = this._padding;\n\t\tconst paddingLeft = padding.getLeft();\n\t\tconst paddingTop = padding.getTop();\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst mainHeight = theme.getMainHeight();\n\t\tthis.toLocal( global, undefined, point );\n\t\tconst x = Math.max( 0, Math.min( mainWidth, point.x - paddingLeft ) );\n\t\tconst y = Math.max( 0, Math.min( mainHeight, point.y - paddingTop ) );\n\t\tconst mainPointerSprite = this._mainPointerSprite;\n\t\tmainPointerSprite.position.set( paddingLeft + x, paddingTop + y );\n\t\tthis.onColorNew( this.toMainColor(\n\t\t\tthis._base, x, y, mainWidth, mainHeight ) );\n\t}\n\n\tprotected setColorCurrent( color: number ) {\n\t\tthis._sampleCurrentSprite.tint = this._current.color = color;\n\t}\n\n\tprotected setAlphaCurrent( alpha: number ) {\n\t\tthis._sampleCurrentSprite.alpha = this._current.alpha = alpha;\n\t}\n\n\tprotected setColorNew( color: number ) {\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst mainHeight = theme.getMainHeight();\n\t\tconst padding = this._padding;\n\n\t\t// Base color\n\t\tconst hsv = UtilHsv.fromRgb( color );\n\t\tthis._mainSprite.tint = this._base = UtilHsv.toRgb( hsv[ 0 ], 255, 255 );\n\n\t\t// Move the base pointer\n\t\tconst basePointerSprite = this._basePointerSprite;\n\t\tbasePointerSprite.x = Math.max( 0, Math.min( 1, hsv[ 0 ] / 360 ) ) * mainWidth;\n\n\t\t// Move the main pointer\n\t\tconst ns = Math.max( 0, Math.min( 1, hsv[ 1 ] / 255 ) );\n\t\tconst nv = Math.max( 0, Math.min( 1, 1 - hsv[ 2 ] / 255 ) );\n\t\tconst mainPointerSprite = this._mainPointerSprite;\n\t\tmainPointerSprite.tint = (nv < 0.45 ? theme.getMainPointerColor() : 0xffffff);\n\t\tmainPointerSprite.position.set(\n\t\t\tpadding.getLeft() + ns * mainWidth,\n\t\t\tpadding.getTop() + nv * mainHeight\n\t\t);\n\n\t\t// New color\n\t\tthis.onColorNew( color );\n\t}\n\n\tprotected onColorNew( color: number ) {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tlayer.disallowUpdate();\n\t\t}\n\t\tthis._sampleNewSprite.tint = this._new.color = color;\n\t\tthis._inputAndLabelColor.input.value = UtilRgb.toCode( color );\n\t\tthis.emit( \"newcolorchange\", color, this );\n\t\tif( layer ) {\n\t\t\tlayer.allowUpdate();\n\t\t\tlayer.update();\n\t\t}\n\t}\n\n\tprotected onBaseDown( e: InteractionEvent ): void {\n\t\tthis.onBasePick( e.data.global );\n\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst stage = layer.stage;\n\t\t\tstage.on( UtilPointerEvent.move, this._onBaseMoveBound );\n\t\t\tstage.on( UtilPointerEvent.up, this._onBaseUpBound );\n\t\t}\n\t}\n\n\tprotected onBaseMove( e: InteractionEvent ): void {\n\t\tthis.onBasePick( e.data.global );\n\t}\n\n\tprotected onBaseUp( e: InteractionEvent ): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst stage = layer.stage;\n\t\t\tstage.off( UtilPointerEvent.move, this._onBaseMoveBound );\n\t\t\tstage.off( UtilPointerEvent.up, this._onBaseUpBound );\n\t\t}\n\t}\n\n\tprotected toBaseHex( t: number, shift: number ) {\n\t\treturn Math.max( 0, Math.min( 255, t * 6 * 255 ) ) << shift;\n\t}\n\n\tprotected toBaseColor( t: number ): number {\n\t\tif( t <= 0.167 ) {\n\t\t\treturn 0xff0000 + this.toBaseHex( t, 8 );\n\t\t} else if( t <= 0.333 ) {\n\t\t\tt = 0.333 - t;\n\t\t\treturn 0x00ff00 + this.toBaseHex( t, 16 );\n\t\t} else if( t <= 0.5 ) {\n\t\t\tt -= 0.333;\n\t\t\treturn 0x00ff00 + this.toBaseHex( t, 0 );\n\t\t} else if( t < 0.667 ) {\n\t\t\tt = 0.667 - t;\n\t\t\treturn 0x0000ff + this.toBaseHex( t, 8 );\n\t\t} else if( t < 0.883 ) {\n\t\t\tt -= 0.667;\n\t\t\treturn 0x0000ff + this.toBaseHex( t, 16 );\n\t\t} else {\n\t\t\tt = 0.883 - t;\n\t\t\treturn 0xff0000 + this.toBaseHex( t, 0 );\n\t\t}\n\t}\n\n\tprotected onBasePick( global: Point ) {\n\t\tconst point = this._pointerPoint;\n\t\tconst padding = this._padding;\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tthis.toLocal( global, undefined, point );\n\t\tconst x = Math.max( 0, Math.min( mainWidth, point.x - padding.getLeft() ) );\n\t\tconst basePointerSprite = this._basePointerSprite;\n\t\tbasePointerSprite.x = x;\n\t\tthis.onColorBase( this.toBaseColor( x / mainWidth ) );\n\t}\n\n\tprotected setColorBase( h: number ) {\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst basePointerSprite = this._basePointerSprite;\n\t\tbasePointerSprite.x = Math.max( 0, Math.min( 1, h / 360 ) ) * mainWidth;\n\t\tthis.onColorBase( UtilHsv.toRgb( h, 255, 255 ) );\n\t}\n\n\tprotected onColorBase( color: number ) {\n\t\tthis._mainSprite.tint = this._base = color;\n\n\t\tconst mainPointerSprite = this._mainPointerSprite;\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tconst mainHeight = theme.getMainHeight();\n\t\tconst padding = this._padding;\n\t\tthis.onColorNew( this.toMainColor(\n\t\t\tthis._base,\n\t\t\tmainPointerSprite.x - padding.getLeft(),\n\t\t\tmainPointerSprite.y - padding.getTop(),\n\t\t\tmainWidth,\n\t\t\tmainHeight\n\t\t));\n\t}\n\n\tprotected onAlphaDown( e: InteractionEvent ): void {\n\t\tthis.onAlphaPick( e.data.global );\n\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst stage = layer.stage;\n\t\t\tstage.on( UtilPointerEvent.move, this._onAlphaMoveBound );\n\t\t\tstage.on( UtilPointerEvent.up, this._onAlphaUpBound );\n\t\t}\n\t}\n\n\tprotected onAlphaMove( e: InteractionEvent ): void {\n\t\tthis.onAlphaPick( e.data.global );\n\t}\n\n\tprotected onAlphaUp( e: InteractionEvent ): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst stage = layer.stage;\n\t\t\tstage.off( UtilPointerEvent.move, this._onAlphaMoveBound );\n\t\t\tstage.off( UtilPointerEvent.up, this._onAlphaUpBound );\n\t\t}\n\t}\n\n\tprotected onAlphaPick( global: Point ) {\n\t\tconst point = this._pointerPoint;\n\t\tconst padding = this._padding;\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tthis.toLocal( global, undefined, point );\n\t\tconst x = Math.max( 0, Math.min( mainWidth, point.x - padding.getLeft() ) );\n\t\tthis._alphaPointerSprite.x = x;\n\t\tthis.onAlphaNew( x / mainWidth );\n\t}\n\n\tprotected setAlphaNew( alpha: number ): void {\n\t\tconst theme = this.theme;\n\t\tconst mainWidth = theme.getMainWidth();\n\t\tthis._alphaPointerSprite.x = Math.max( 0, Math.min( 1, alpha ) ) * mainWidth;\n\t\tthis.onAlphaNew( alpha );\n\t}\n\n\tprotected onAlphaNew( alpha: number ): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tlayer.disallowUpdate();\n\t\t}\n\t\tthis._sampleNewSprite.alpha = this._new.alpha = alpha;\n\t\tthis._inputAndLabelAlpha.input.value = Number( alpha.toFixed( 2 ) );\n\t\tthis.emit( \"newalphachange\", alpha, this );\n\t\tif( layer ) {\n\t\t\tlayer.allowUpdate();\n\t\t\tlayer.update();\n\t\t}\n\t}\n\n\tprotected onRecentChange(): void {\n\t\tconst sprites = this._recentColorSprites;\n\t\tconst recent = this._recent;\n\t\tfor( let i = 0, imax = sprites.length; i < imax; ++i ) {\n\t\t\tconst sprite = sprites[ i ];\n\t\t\tconst colorAndAlpha = recent.get( i );\n\t\t\tif( colorAndAlpha != null ) {\n\t\t\t\tsprite.tint = colorAndAlpha.color;\n\t\t\t\tsprite.alpha = colorAndAlpha.alpha;\n\t\t\t} else {\n\t\t\t\tsprite.tint = 0xffffff;\n\t\t\t\tsprite.alpha = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerColor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Buffer, Geometry, Mesh, Point, Rectangle, Shader, Texture, TextureUvs, utils } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DPickerColorGradientDataLike } from \"./d-picker-color-gradient-data\";\n\nconst VERTEX_SHADER = `\nattribute vec2 aPosition;\nattribute vec2 aUv;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nvoid main(void) {\n\tvec3 position = vec3(aPosition.x, aPosition.y, 1.0);\n\tgl_Position = vec4((projectionMatrix * translationMatrix * position).xy, 0.0, 1.0);\n\tvUv = aUv;\n\tvColor = aColor;\n}\n`;\n\nconst FRAGMENT_SHADER = `\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void) {\n\tvec4 texture = texture2D(uSampler, vUv);\n\tfloat cy = step( 1.0, mod( gl_FragCoord.y / 10.0, 2.0 ) );\n\tfloat cx = step( 1.0, mod( gl_FragCoord.x / 10.0 + cy, 2.0 ) );\n\tfloat c = mix( 0.75, 0.65, cx );\n\tgl_FragColor = texture * vec4( mix( vec3( c ), vColor.xyz, vColor.a ), 1.0 );\n}`;\n\ntype Parts = Array<{ data: DPickerColorGradientDataLike | null, rect: Rectangle }>;\n\nexport class DPickerColorGradientDataView extends Mesh {\n\tprotected _nPointsPerData: number;\n\tprotected _vertices: Float32Array;\n\tprotected _uvs: Float32Array;\n\tprotected _colors: Float32Array;\n\tprotected _indices: Uint16Array;\n\tprotected _lastHitIndex: number;\n\n\tprotected _workColor: number[];\n\tprotected _workPoint: Point;\n\n\tprotected _parts: Parts;\n\n\tprotected constructor(\n\t\tnPointsPerData: number,\n\t\tvertices: Float32Array, uvs: Float32Array, colors: Float32Array, indices: Uint16Array,\n\t\tparts: Parts, geometry: Geometry, shader: Shader\n\t) {\n\t\tsuper( geometry, shader );\n\n\t\tthis.interactive = true;\n\t\tthis.interactiveChildren = false;\n\t\tthis.cursor = \"pointer\";\n\n\t\tthis._nPointsPerData = nPointsPerData;\n\t\tthis._vertices = vertices;\n\t\tthis._uvs = uvs;\n\t\tthis._colors = colors;\n\t\tthis._indices = indices;\n\t\tthis._lastHitIndex = -1;\n\t\tthis._workColor = [ 0, 0, 0 ];\n\t\tthis._workPoint = new Point();\n\t\tthis._parts = parts;\n\n\t\tshader.uniforms.uSampler.on( \"update\", (): void => {\n\t\t\tthis.update();\n\t\t\tDApplications.update( this );\n\t\t});\n\t\tthis.update();\n\t}\n\n\tgetRectangle( index: number ): Rectangle | null {\n\t\tconst parts = this._parts;\n\t\tif( 0 <= index && index < parts.length ) {\n\t\t\treturn parts[ index ].rect;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetRectangle( index: number, x: number, y: number, width: number, height: number ): void {\n\t\tconst parts = this._parts;\n\t\tif( 0 <= index && index < parts.length ) {\n\t\t\tconst rect = parts[ index ].rect;\n\t\t\trect.x = x;\n\t\t\trect.y = y;\n\t\t\trect.width = width;\n\t\t\trect.height = height;\n\t\t}\n\t}\n\n\tgetData( index: number ): DPickerColorGradientDataLike | null {\n\t\tconst parts = this._parts;\n\t\tif( 0 <= index && index < parts.length ) {\n\t\t\treturn parts[ index ].data;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetData( index: number, data: DPickerColorGradientDataLike | null ): void {\n\t\tconst parts = this._parts;\n\t\tif( 0 <= index && index < parts.length ) {\n\t\t\tparts[ index ].data = data;\n\t\t}\n\t}\n\n\tgetLastHitIndex(): number {\n\t\treturn this._lastHitIndex;\n\t}\n\n\tprivate setColors( ic: number, colors: Float32Array, rgb: number[], alpha: number ) {\n\t\tcolors[ ic + 0 ] = rgb[ 0 ];\n\t\tcolors[ ic + 1 ] = rgb[ 1 ];\n\t\tcolors[ ic + 2 ] = rgb[ 2 ];\n\t\tcolors[ ic + 3 ] = alpha;\n\t\tcolors[ ic + 4 ] = rgb[ 0 ];\n\t\tcolors[ ic + 5 ] = rgb[ 1 ];\n\t\tcolors[ ic + 6 ] = rgb[ 2 ];\n\t\tcolors[ ic + 7 ] = alpha;\n\t}\n\n\tprivate setColorsHex( ic: number, colors: Float32Array, color: number, alpha: number ) {\n\t\tconst rgb = utils.hex2rgb( color, this._workColor );\n\t\tthis.setColors( ic, colors, rgb, alpha );\n\t}\n\n\tprivate setColorsWhite( ic: number, colors: Float32Array ) {\n\t\tconst rgb = this._workColor;\n\t\trgb[ 0 ] = 1;\n\t\trgb[ 1 ] = 1;\n\t\trgb[ 2 ] = 1;\n\t\tthis.setColors( ic, colors, rgb, 0 );\n\t}\n\n\tprivate setColorsPoint( ic: number, data: DPickerColorGradientDataLike, index: number, colors: Float32Array ) {\n\t\tconst point = data.points[ index ];\n\t\tif( point != null ) {\n\t\t\tthis.setColorsHex( ic, colors, point.color, point.alpha );\n\t\t} else {\n\t\t\tthis.setColorsWhite( ic, colors );\n\t\t}\n\t}\n\n\tprotected setVertices( iv: number, vertices: Float32Array, position: number, rect: Rectangle ) {\n\t\tconst y = rect.y + rect.height * position;\n\t\tvertices[ iv + 0 ] = rect.x;\n\t\tvertices[ iv + 1 ] = y;\n\t\tvertices[ iv + 2 ] = rect.x + rect.width;\n\t\tvertices[ iv + 3 ] = y;\n\t}\n\n\tprotected setUvs( iv: number, uvs: Float32Array, position: number, textureUvs: TextureUvs ) {\n\t\tconst x0 = textureUvs.x0 + (textureUvs.x3 - textureUvs.x0) * position;\n\t\tconst y0 = textureUvs.y0 + (textureUvs.y3 - textureUvs.y0) * position;\n\t\tconst x1 = textureUvs.x1 + (textureUvs.x2 - textureUvs.x1) * position;\n\t\tconst y1 = textureUvs.y1 + (textureUvs.y2 - textureUvs.y1) * position;\n\t\tuvs[ iv + 0 ] = x0;\n\t\tuvs[ iv + 1 ] = y0;\n\t\tuvs[ iv + 2 ] = x1;\n\t\tuvs[ iv + 3 ] = y1;\n\t}\n\n\tprivate newIndices( ii: number, iv: number, size: number, indices: Uint16Array ): Uint16Array {\n\t\tfor( let i = 0; i < size; ++i ) {\n\t\t\tindices[ ii + 0 ] = iv + 0;\n\t\t\tindices[ ii + 1 ] = iv + 1;\n\t\t\tindices[ ii + 2 ] = iv + 2;\n\n\t\t\tindices[ ii + 3 ] = iv + 2;\n\t\t\tindices[ ii + 4 ] = iv + 1;\n\t\t\tindices[ ii + 5 ] = iv + 3;\n\n\t\t\tii += 6;\n\t\t\tiv += 2;\n\t\t}\n\t\treturn indices;\n\t}\n\n\tprotected _calculateBounds() {\n\t\tconst rect = this._parts[ 0 ].rect;\n\t\tconst bounds = this._bounds;\n\t\tconst work = this._workPoint;\n\t\twork.set( rect.x, rect.y );\n\t\tbounds.addPoint( work );\n\t\twork.set( rect.x + rect.width, rect.y + rect.height );\n\t\tbounds.addPoint( work );\n\t}\n\n\tupdate(): void {\n\t\tconst vertices = this._vertices;\n\t\tconst uvs = this._uvs;\n\t\tconst colors = this._colors;\n\t\tconst indices = this._indices;\n\n\t\tconst texture = this.shader.uniforms.uSampler;\n\t\tif( texture._uvs == null ) {\n\t\t\ttexture.updateUvs();\n\t\t}\n\t\tconst textureUvs: TextureUvs = texture._uvs;\n\n\t\tlet iv = 0;\n\t\tlet nv = 0;\n\t\tlet ic = 0;\n\t\tlet ii = 0;\n\n\t\tconst parts = this._parts;\n\t\tfor( let i = 0, imax = parts.length; i < imax; ++i ) {\n\t\t\tconst data = parts[ i ].data;\n\t\t\tconst rect = parts[ i ].rect;\n\t\t\tif( data == null ) {\n\t\t\t\tthis.setVertices( iv, vertices, 0, rect );\n\t\t\t\tthis.setUvs( iv, uvs, 0, textureUvs );\n\t\t\t\tthis.setColorsWhite( ic, colors );\n\t\t\t\tthis.setVertices( iv + 4, vertices, 1, rect );\n\t\t\t\tthis.setUvs( iv, uvs, 1, textureUvs );\n\t\t\t\tthis.setColorsWhite( ic + 8, colors );\n\t\t\t\tthis.newIndices( ii, nv, 1, indices );\n\t\t\t\tiv += 4 * 2;\n\t\t\t\tic += 4 * 4;\n\t\t\t\tnv += 4;\n\t\t\t\tii += 6;\n\t\t\t} else {\n\t\t\t\tthis.setVertices( iv, vertices, 0, rect );\n\t\t\t\tthis.setUvs( iv, uvs, 0, textureUvs );\n\t\t\t\tthis.setColorsPoint( ic, data, 0, colors );\n\t\t\t\tiv += 2 * 2;\n\t\t\t\tic += 2 * 4;\n\t\t\t\tconst pointSize = data.points.length;\n\t\t\t\tfor( let j = 0, jmax = Math.min( pointSize, this._nPointsPerData ); j < jmax; ++j ) {\n\t\t\t\t\tconst point = data.points[ j ];\n\t\t\t\t\tthis.setVertices( iv, vertices, point.position, rect );\n\t\t\t\t\tthis.setUvs( iv, uvs, point.position, textureUvs );\n\t\t\t\t\tthis.setColorsHex( ic, colors, point.color, point.alpha );\n\t\t\t\t\tiv += 2 * 2;\n\t\t\t\t\tic += 2 * 4;\n\t\t\t\t}\n\t\t\t\tthis.setVertices( iv, vertices, 1, rect );\n\t\t\t\tthis.setUvs( iv, uvs, 1, textureUvs );\n\t\t\t\tthis.setColorsPoint( ic, data, pointSize - 1, colors );\n\t\t\t\tiv += 2 * 2;\n\t\t\t\tic += 2 * 4;\n\n\t\t\t\tthis.newIndices( ii, nv, pointSize + 1, indices );\n\t\t\t\tii += (pointSize + 1) * 6;\n\t\t\t\tnv += (pointSize + 2) * 2;\n\t\t\t}\n\t\t}\n\n\t\tthis.size = ii;\n\n\t\tconst geometry = this.geometry;\n\t\tgeometry.getBuffer( \"aPosition\" ).update();\n\t\tgeometry.getBuffer( \"aUv\" ).update();\n\t\tgeometry.getBuffer( \"aColor\" ).update();\n\t\tgeometry.getIndex().update();\n\t}\n\n\tcontainsPoint( point: Point ): boolean {\n\t\tconst local = this.toLocal( point, undefined, this._workPoint );\n\t\tconst parts = this._parts;\n\t\tfor( let i = 0, imax = parts.length; i < imax; ++i ) {\n\t\t\tconst rect = parts[ i ].rect;\n\t\t\tif( rect.contains( local.x, local.y ) ) {\n\t\t\t\tthis._lastHitIndex = i;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic from( size: number, nPointsPerData: number, texture: Texture = Texture.WHITE ) {\n\t\tconst vertices = new Float32Array( size * ( nPointsPerData + 2 ) * 2 * 2 );\n\t\tconst uvs = new Float32Array( size * ( nPointsPerData + 2 ) * 2 * 2 );\n\t\tconst colors = new Float32Array( size * ( nPointsPerData + 2 ) * 2 * 4 );\n\t\tconst indices = new Uint16Array( size * ( nPointsPerData + 1 ) * 6 );\n\n\t\tconst parts: Parts = [];\n\t\tfor( let i = 0; i < size; ++i ) {\n\t\t\tparts.push({\n\t\t\t\tdata: null,\n\t\t\t\trect: new Rectangle()\n\t\t\t});\n\t\t}\n\n\t\tconst geometry = new Geometry()\n\t\t\t.addIndex( new Buffer( indices, false, true ) )\n\t\t\t.addAttribute( \"aPosition\", new Buffer( vertices, false, false ), 2 )\n\t\t\t.addAttribute( \"aUv\", new Buffer( uvs, false, false ), 2 )\n\t\t\t.addAttribute( \"aColor\", new Buffer( colors, false, false ), 4 );\n\t\tconst shader = Shader.from( VERTEX_SHADER, FRAGMENT_SHADER, { uSampler: texture } );\n\n\t\treturn new DPickerColorGradientDataView(\n\t\t\tnPointsPerData,\n\t\t\tvertices, uvs, colors, indices,\n\t\t\tparts, geometry, shader\n\t\t);\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DPickerColorGradientDataLike } from \"./d-picker-color-gradient-data\";\n\nconst isEqual = ( a: DPickerColorGradientDataLike, b: DPickerColorGradientDataLike ) => {\n\tif( a.direction !== b.direction ) {\n\t\treturn false;\n\t}\n\n\tconst ap = a.points;\n\tconst bp = b.points;\n\tif( ap.length !== bp.length ) {\n\t\treturn false;\n\t}\n\n\tfor( let j = 0, jmax = ap.length; j < jmax; ++j ) {\n\t\tconst apj = ap[ j ];\n\t\tconst bpj = bp[ j ];\n\t\tif( apj.color !== bpj.color || apj.alpha !== bpj.alpha || apj.position !== bpj.position ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\nexport class DPickerColorGradientRecent extends utils.EventEmitter {\n\tprotected _recents: DPickerColorGradientDataLike[];\n\tprotected _capacity: number;\n\n\tconstructor( recents: DPickerColorGradientDataLike[], capacity: number ) {\n\t\tsuper();\n\n\t\tthis._recents = recents;\n\t\tthis._capacity = capacity;\n\t}\n\n\tgetCapacity(): number {\n\t\treturn this._capacity;\n\t}\n\n\tget( index: number ): DPickerColorGradientDataLike | null {\n\t\tconst recents = this._recents;\n\t\tif( 0 <= index && index < recents.length ) {\n\t\t\treturn recents[ recents.length - 1 - index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( index: number, points: DPickerColorGradientDataLike ): DPickerColorGradientDataLike | null {\n\t\tconst recents = this._recents;\n\t\tif( 0 <= index && index < recents.length ) {\n\t\t\tconst result = recents[ recents.length - 1 - index ];\n\t\t\trecents[ recents.length - 1 - index ] = points;\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcontains( points: DPickerColorGradientDataLike ): boolean {\n\t\tconst recents = this._recents;\n\t\tfor( let i = 0, imax = recents.length; i < imax; ++i ) {\n\t\t\tif( isEqual( recents[ i ], points ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tadd( points: DPickerColorGradientDataLike ): this {\n\t\tconst recents = this._recents;\n\t\trecents.push( points );\n\t\tif( this._capacity < recents.length ) {\n\t\t\trecents.shift();\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\treturn this;\n\t}\n\n\tpop(): DPickerColorGradientDataLike | null {\n\t\tconst recents = this._recents;\n\t\tconst result = recents.shift();\n\t\tif( result != null ) {\n\t\t\tthis.emit( \"change\", this );\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\treturn this._recents.length;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point, Sprite, Texture } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DAlignWith } from \"./d-align-with\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DInputReal } from \"./d-input-real\";\nimport { DPickerColor } from \"./d-picker-color\";\nimport { DPickerColorGradientData, DPickerColorGradientDataLike } from \"./d-picker-color-gradient-data\";\nimport { DPickerColorGradientDataView } from \"./d-picker-color-gradient-data-view\";\nimport { DPickerColorGradientPoint } from \"./d-picker-color-gradient-point\";\nimport { DPickerColorGradientRecent } from \"./d-picker-color-gradient-recent\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DPickerColorGradientOptions<\n\tTHEME extends DThemePickerColorGradient = DThemePickerColorGradient\n> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerColorGradient extends DThemeBase {\n\tgetGradientPointsWidth(): number;\n\tgetGradientPointsMargin(): number;\n\n\tgetGradientAnchorTexture(): Texture;\n\tgetGradientAnchorOutlinedTexture(): Texture;\n\tgetGradientAnchorOutlineTexture(): Texture;\n\n\tgetGradientDirectionMargin(): number;\n\tgetGradientDirectionTexture(): Texture;\n\n\tgetGradientRecentColumn(): number;\n\tgetGradientRecentWidth(): number;\n\tgetGradientRecentMargin(): number;\n\tgetGradientRecentCount(): number;\n\tgetGradientRecents(): DPickerColorGradientDataLike[];\n}\n\nexport class DPickerColorGradient<\n\tTHEME extends DThemePickerColorGradient = DThemePickerColorGradient,\n\tOPTIONS extends DPickerColorGradientOptions<THEME> = DPickerColorGradientOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected static RECENT_COLOR_GRADIENT: DPickerColorGradientRecent | null = null;\n\n\tprotected _picker!: DPickerColor;\n\tprotected _view!: DPickerColorGradientDataView;\n\tprotected _anchors!: Sprite[];\n\tprotected _recent!: DPickerColorGradientRecent;\n\n\tprotected _onAnchorDownBound!: ( e: InteractionEvent ) => void;\n\tprotected _onAnchorMoveBound!: ( e: InteractionEvent ) => void;\n\tprotected _onAnchorUpBound!: ( e: InteractionEvent ) => void;\n\n\tprotected _data!: DPickerColorGradientData;\n\tprotected _work!: Point;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tconst theme = this.theme;\n\t\tconst padding = this._padding;\n\t\tconst paddingTop = padding.getTop();\n\t\tconst paddingRight = padding.getRight();\n\t\tconst paddingBottom = padding.getBottom();\n\t\tconst paddingLeft = padding.getLeft();\n\t\tthis._work = new Point();\n\n\t\t// Picker\n\t\tconst gradientPointsWidth = theme.getGradientPointsWidth();\n\t\tconst gradientPointsMargin = theme.getGradientPointsMargin();\n\t\tconst picker = this._picker = new DPickerColor({\n\t\t\tx: paddingLeft + gradientPointsWidth + gradientPointsMargin,\n\t\t\ty: paddingTop\n\t\t});\n\t\tpicker.on( \"newcolorchange\", ( color: number ): void => {\n\t\t\tthis.onAnchorColorChange( color );\n\t\t});\n\t\tpicker.on( \"newalphachange\", ( alpha: number ): void => {\n\t\t\tthis.onAnchorAlphaChange( alpha );\n\t\t});\n\t\tthis.addChild( picker );\n\n\t\t// Points view\n\t\tconst view = this._view = DPickerColorGradientDataView.from( 17, 10 );\n\t\tview.setRectangle( 0, paddingLeft, paddingTop, gradientPointsWidth, picker.height );\n\t\tthis.addChild( view );\n\t\tview.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\n\t\t\tif( view.getLastHitIndex() === 0 ) {\n\t\t\t\tthis.onViewDown( e );\n\t\t\t}\n\t\t});\n\n\t\t// Anchor\n\t\tthis._onAnchorDownBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAnchorDown( e );\n\t\t};\n\t\tthis._onAnchorMoveBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAnchorMove( e );\n\t\t};\n\t\tthis._onAnchorUpBound = ( e: InteractionEvent ): void => {\n\t\t\tthis.onAnchorUp( e );\n\t\t};\n\t\tthis._anchors = [];\n\n\t\t//\n\t\tconst inputLabelWidth = picker.theme.getInputLabelWidth();\n\t\tconst inputWidth = picker.theme.getMainWidth() * 0.5;\n\t\tconst inputMargin = 5;\n\t\tconst inputDirectionMargin = theme.getGradientDirectionMargin();\n\t\tconst inputDirectionTexture = theme.getGradientDirectionTexture();\n\t\tconst inputLeft = picker.x + picker.width + inputDirectionMargin;\n\t\tconst inputDirection = new DInputReal({\n\t\t\tparent: this,\n\t\t\tx: inputLeft + inputLabelWidth + inputMargin,\n\t\t\ty: paddingTop,\n\t\t\twidth: inputWidth - inputLabelWidth - inputMargin,\n\t\t\tstep: 1,\n\t\t\timage: {\n\t\t\t\tsource: inputDirectionTexture,\n\t\t\t\talign: {\n\t\t\t\t\twith: DAlignWith.BORDER\n\t\t\t\t},\n\t\t\t\tmargin: {\n\t\t\t\t\thorizontal: -inputDirectionTexture.width - inputMargin\n\t\t\t\t}\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tchange: ( value: number ) => {\n\t\t\t\t\t(this._data as any)._direction = value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Recent gradients\n\t\tconst recentColumn = theme.getGradientRecentColumn();\n\t\tconst recentWidth = theme.getGradientRecentWidth();\n\t\tconst recentMargin = theme.getGradientRecentMargin();\n\t\tconst recentWidthAndMargin = recentWidth + recentMargin;\n\t\tconst x0 = inputLeft;\n\t\tconst y0 = inputDirection.y + inputDirection.height + inputDirectionMargin;\n\t\tif( DPickerColorGradient.RECENT_COLOR_GRADIENT == null ) {\n\t\t\tDPickerColorGradient.RECENT_COLOR_GRADIENT = new DPickerColorGradientRecent(\n\t\t\t\ttheme.getGradientRecents(),\n\t\t\t\ttheme.getGradientRecentCount()\n\t\t\t);\n\t\t}\n\t\tthis._recent = DPickerColorGradient.RECENT_COLOR_GRADIENT;\n\t\tconst recent = this._recent;\n\t\tfor( let i = 0, imax = recent.getCapacity(); i < imax; ++i ) {\n\t\t\tconst ix = i % recentColumn;\n\t\t\tconst x = x0 + ix * recentWidthAndMargin;\n\t\t\tconst iy = (i / recentColumn) | 0;\n\t\t\tconst y = y0 + iy * recentWidthAndMargin;\n\t\t\tview.setRectangle( 1 + i, x, y, recentWidth, recentWidth );\n\t\t}\n\t\trecent.on( \"change\", (): void => {\n\t\t\tthis.onRecentUpdate();\n\t\t});\n\t\tUtilPointerEvent.onClick( view, ( e: InteractionEvent ): void => {\n\t\t\tconst lastHitIndex = view.getLastHitIndex();\n\t\t\tif( 1 <= lastHitIndex ) {\n\t\t\t\tthis.onRecentClick( view.getData( lastHitIndex ) );\n\t\t\t}\n\t\t});\n\n\t\t// Points\n\t\tconst data = this._data = new DPickerColorGradientData();\n\t\tdata.on( \"change\", (): void => {\n\t\t\tthis.updateAnchors();\n\t\t\tview.update();\n\t\t});\n\t\tdata.on( \"selectionchange\", ( point: DPickerColorGradientPoint ): void => {\n\t\t\tthis.onAnchorSelect( point );\n\t\t});\n\t\tdata.on( \"directionchange\", ( value: number ): void => {\n\t\t\tinputDirection.value = value;\n\t\t});\n\t\tview.setData( 0, data );\n\t\tview.update();\n\t\tinputDirection.value = data.direction;\n\t\tthis.updateAnchors();\n\t\tconst selected = data.selected;\n\t\tif( selected != null ) {\n\t\t\tthis.onAnchorSelect( selected );\n\t\t}\n\n\t\t// Width\n\t\tif( options == null || options.width == null ) {\n\t\t\tthis.width = paddingLeft + gradientPointsWidth + gradientPointsMargin +\n\t\t\t\tpicker.width + inputDirectionMargin + (recentColumn - 1) * recentMargin +\n\t\t\t\trecentColumn * recentWidth + paddingRight;\n\t\t}\n\n\t\t// Height\n\t\tif( options == null || options.height == null ) {\n\t\t\tthis.height = paddingTop + picker.height + paddingBottom;\n\t\t}\n\t}\n\n\tget data(): DPickerColorGradientData {\n\t\treturn this._data;\n\t}\n\n\tget recent() {\n\t\treturn this._recent;\n\t}\n\n\tprotected onRecentClick( recentData: DPickerColorGradientDataLike | null ) {\n\t\tconst data = this._data;\n\t\tif( recentData != null ) {\n\t\t\tdata.fromObject( recentData );\n\t\t} else {\n\t\t\tdata.reset();\n\t\t}\n\t}\n\n\tprotected onRecentUpdate() {\n\t\tconst recent = this._recent;\n\t\tconst view = this._view;\n\t\tfor( let i = 0, imax = recent.size(); i < imax; ++i ) {\n\t\t\tview.setData( 1 + i, recent.get( i ) );\n\t\t}\n\t\tview.update();\n\t\tDApplications.update( this );\n\t}\n\n\tprotected toAnchorPosition( e: InteractionEvent ) {\n\t\tconst local = this.toLocal( e.data.global, undefined, this._work );\n\t\treturn Math.max( 0, Math.min( 1, (local.y - this.padding.getTop()) / this._picker.height ) );\n\t}\n\n\tprotected onViewDown( e: InteractionEvent ) {\n\t\tthis._data.addAt( this.toAnchorPosition( e ) );\n\t\tthis.onAnchorDragStart();\n\t}\n\n\tprotected onAnchorDown( e: InteractionEvent ) {\n\t\tconst target = e.target;\n\t\tif( target instanceof Sprite ) {\n\t\t\tconst data = this._data;\n\t\t\tconst index = this._anchors.indexOf( target );\n\t\t\tif( 0 <= index && index < data.points.length ) {\n\t\t\t\tdata.points[ index ].selected = true;\n\t\t\t\tthis.onAnchorDragStart();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onAnchorSelect( point: DPickerColorGradientPoint ) {\n\t\tconst picker = this._picker;\n\t\tpicker.current.color = point.color;\n\t\tpicker.current.alpha = point.alpha;\n\t\tpicker.new.color = point.color;\n\t\tpicker.new.alpha = point.alpha;\n\t}\n\n\tprotected onAnchorColorChange( color: number ) {\n\t\tconst points = this._data;\n\t\tif( points != null ) {\n\t\t\tconst selected = points.selected;\n\t\t\tif( selected != null ) {\n\t\t\t\tselected.color = color;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onAnchorAlphaChange( alpha: number ) {\n\t\tconst points = this._data;\n\t\tif( points != null ) {\n\t\t\tconst selected = points.selected;\n\t\t\tif( selected != null ) {\n\t\t\t\tselected.alpha = alpha;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onAnchorDragStart() {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst stage = layer.stage;\n\t\t\tstage.on( UtilPointerEvent.move, this._onAnchorMoveBound );\n\t\t\tstage.on( UtilPointerEvent.up, this._onAnchorUpBound );\n\t\t}\n\t}\n\n\tprotected onAnchorMove( e: InteractionEvent ): void {\n\t\tconst points = this._data;\n\t\tif( points != null ) {\n\t\t\tconst selected = points.selected;\n\t\t\tif( selected != null ) {\n\t\t\t\tselected.position = this.toAnchorPosition( e );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onAnchorUp( e: InteractionEvent ): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst stage = layer.stage;\n\t\t\tstage.off( UtilPointerEvent.move, this._onAnchorMoveBound );\n\t\t\tstage.off( UtilPointerEvent.up, this._onAnchorUpBound );\n\t\t}\n\t}\n\n\tprotected updateAnchors() {\n\t\tconst theme = this.theme;\n\t\tconst anchorTexture = theme.getGradientAnchorTexture();\n\t\tconst anchorOutlinedTexture = theme.getGradientAnchorOutlinedTexture();\n\t\tconst gradientPointsWidth = theme.getGradientPointsWidth();\n\n\t\tconst data = this._data;\n\t\tconst pointSize = data.points.length;\n\n\t\tconst anchors = this._anchors;\n\t\tconst anchorSize = anchors.length;\n\t\tfor( let i = anchorSize; i < pointSize; ++i ) {\n\t\t\tconst newAnchor = new Sprite( anchorTexture );\n\t\t\tnewAnchor.anchor.set( 0.5, 0.5 );\n\t\t\tnewAnchor.cursor = \"pointer\";\n\t\t\tnewAnchor.interactive = true;\n\t\t\tnewAnchor.on( UtilPointerEvent.down, this._onAnchorDownBound );\n\t\t\tanchors.push( newAnchor );\n\t\t\tthis.addChild( newAnchor );\n\t\t}\n\n\t\tfor( let i = anchorSize - 1; pointSize <= i; --i ) {\n\t\t\tconst oldAnchor = anchors[ i ];\n\t\t\toldAnchor.off( UtilPointerEvent.down, this._onAnchorDownBound );\n\t\t\toldAnchor.destroy();\n\t\t}\n\t\tanchors.length = pointSize;\n\n\t\tconst y = this.padding.getTop();\n\t\tconst right = this.padding.getLeft() + gradientPointsWidth;\n\t\tconst height = this._picker.height;\n\t\tfor( let i = 0; i < pointSize; ++i ) {\n\t\t\tconst point = data.points[ i ];\n\t\t\tconst anchor = anchors[ i ];\n\t\t\tanchor.tint = point.color;\n\t\t\tanchor.position.set(\n\t\t\t\tright,\n\t\t\t\ty + height * point.position\n\t\t\t);\n\t\t\tanchor.texture = (point.selected ? anchorOutlinedTexture : anchorTexture);\n\t\t}\n\n\t\tDApplications.update( this );\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isDeleteKey( e ) ) {\n\t\t\tconst points = this._data;\n\t\t\tif( points != null ) {\n\t\t\t\tconst selected = points.selected;\n\t\t\t\tif( selected != null ) {\n\t\t\t\t\tpoints.remove( selected );\n\t\t\t\t\tsuper.onKeyDown( e );\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerColorGradient\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerColorGradient, DPickerColorGradientOptions } from \"./d-picker-color-gradient\";\nimport { DPickerColorGradientData } from \"./d-picker-color-gradient-data\";\nimport { DPickerColorGradientRecent } from \"./d-picker-color-gradient-recent\";\n\nexport interface DDialogColorGradientOptions<\n\tTHEME extends DThemeDialogColorGradient = DThemeDialogColorGradient\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerColorGradientOptions;\n}\n\nexport interface DThemeDialogColorGradient extends DThemeDialogCommand {\n\n}\n\nexport class DDialogColorGradient<\n\tTHEME extends DThemeDialogColorGradient = DThemeDialogColorGradient,\n\tOPTIONS extends DDialogColorGradientOptions<THEME> = DDialogColorGradientOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerColorGradient;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerColorGradient( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\n\t\tthis.on( \"ok\", (): void => {\n\t\t\tconst data = picker.data;\n\t\t\tconst recent = picker.recent;\n\t\t\tif( ! recent.contains( data ) ) {\n\t\t\t\trecent.add( data.toObject() );\n\t\t\t}\n\t\t});\n\t}\n\n\tget data(): DPickerColorGradientData {\n\t\treturn this._picker.data;\n\t}\n\n\tget recent(): DPickerColorGradientRecent {\n\t\treturn this._picker.recent;\n\t}\n\n\tget picker(): DPickerColorGradient {\n\t\treturn this._picker;\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tthis._picker.onKeyDown( e );\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogColorGradient\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogColorGradient, DDialogColorGradientOptions } from \"./d-dialog-color-gradient\";\nimport { DPickerColorGradientData } from \"./d-picker-color-gradient-data\";\nimport { DPickerColorGradientDataView } from \"./d-picker-color-gradient-data-view\";\n\nexport interface DButtonColorGradientOptions<\n\tTHEME extends DThemeButtonColorGradient = DThemeButtonColorGradient\n> extends DButtonOptions<DPickerColorGradientData, THEME> {\n\tdialog?: DDialogColorGradientOptions;\n}\n\nexport interface DThemeButtonColorGradient extends DThemeButton {\n\tgetViewBaseTexture(): Texture | null;\n\tgetTextFormatter(): ( value: DPickerColorGradientData, caller: DButtonColorGradient ) => string;\n\tgetTextValue( state: DBaseState ): DPickerColorGradientData;\n\tnewTextValue(): DPickerColorGradientData;\n}\n\nexport class DButtonColorGradient<\n\tTHEME extends DThemeButtonColorGradient = DThemeButtonColorGradient,\n\tOPTIONS extends DButtonColorGradientOptions<THEME> = DButtonColorGradientOptions<THEME>\n> extends DButton<DPickerColorGradientData, THEME, OPTIONS> {\n\tprotected static DIALOG?: DDialogColorGradient;\n\tprotected _dialog?: DDialogColorGradient;\n\tprotected _dialogOptions?: DDialogColorGradientOptions;\n\tprotected _view?: DPickerColorGradientDataView;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst data = this._textValueComputed;\n\t\tthis._dialogOptions = options && options.dialog;\n\n\t\tif( options == null || options.image == null || options.image.source === undefined ) {\n\t\t\tconst texture = this.theme.getViewBaseTexture();\n\t\t\tif( texture instanceof Texture ) {\n\t\t\t\tconst view = this._view = DPickerColorGradientDataView.from( 1, 10, texture );\n\t\t\t\tview.setRectangle( 0, 0, 0, texture.width, texture.height );\n\t\t\t\tview.setData( 0, data );\n\t\t\t\tview.update();\n\t\t\t\tthis.image = view;\n\t\t\t}\n\t\t}\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.data.fromObject( data );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tdata.fromObject( dialog.data );\n\t\t\t\tconst view = this._view;\n\t\t\t\tif( view != null ) {\n\t\t\t\t\tview.update();\n\t\t\t\t}\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t\tDApplications.update( this );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tget dialog(): DDialogColorGradient {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogColorGradient( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tif( DButtonColorGradient.DIALOG == null ) {\n\t\t\t\t\tDButtonColorGradient.DIALOG = new DDialogColorGradient();\n\t\t\t\t}\n\t\t\t\tdialog = DButtonColorGradient.DIALOG;\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): DPickerColorGradientData {\n\t\treturn this._textValueComputed;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonColorGradient\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DColorAndAlpha } from \"./d-color\";\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerColor, DPickerColorOptions } from \"./d-picker-color\";\nimport { DPickerColorRecent } from \"./d-picker-color-recent\";\n\nexport interface DDialogColorOptions<\n\tTHEME extends DThemeDialogColor = DThemeDialogColor\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerColorOptions;\n}\n\nexport interface DThemeDialogColor extends DThemeDialogCommand {\n\n}\n\nexport class DDialogColor<\n\tTHEME extends DThemeDialogColor = DThemeDialogColor,\n\tOPTIONS extends DDialogColorOptions<THEME> = DDialogColorOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerColor;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerColor( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\n\t\tthis.on( \"ok\", (): void => {\n\t\t\tconst recent = picker.recent;\n\t\t\tif( ! recent.contains( picker.new ) ) {\n\t\t\t\trecent.add( picker.new );\n\t\t\t}\n\t\t});\n\t}\n\n\tget current(): DColorAndAlpha {\n\t\treturn this._picker.current;\n\t}\n\n\tget new(): DColorAndAlpha {\n\t\treturn this._picker.new;\n\t}\n\n\tget recent(): DPickerColorRecent {\n\t\treturn this._picker.recent;\n\t}\n\n\tget picker(): DPickerColor {\n\t\treturn this._picker;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogColor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DColorAndAlpha } from \"./d-color\";\nimport { DDialogColor, DDialogColorOptions } from \"./d-dialog-color\";\nimport { DPickerColorAndAlpha } from \"./d-picker-color-and-alpha\";\n\nexport interface DButtonColorOptions<\n\tTHEME extends DThemeButtonColor = DThemeButtonColor\n> extends DButtonOptions<DColorAndAlpha, THEME> {\n\tdialog?: DDialogColorOptions;\n}\n\nexport interface DThemeButtonColor extends DThemeButton {\n\tgetTextFormatter(): ( value: DColorAndAlpha, caller: DButtonColor ) => string;\n\tgetTextValue( state: DBaseState ): DColorAndAlpha;\n\tnewTextValue(): DColorAndAlpha;\n}\n\nexport class DButtonColor<\n\tTHEME extends DThemeButtonColor = DThemeButtonColor,\n\tOPTIONS extends DButtonColorOptions<THEME> = DButtonColorOptions<THEME>\n> extends DButton<DColorAndAlpha, THEME, OPTIONS> {\n\tprotected static DIALOG?: DDialogColor;\n\tprotected _dialog?: DDialogColor;\n\tprotected _dialogOptions!: DDialogColorOptions | undefined;\n\tprotected _value!: DPickerColorAndAlpha;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst colorAndAlpha = this._textValueComputed;\n\t\tthis._dialogOptions = options && options.dialog;\n\t\tthis._value = new DPickerColorAndAlpha( colorAndAlpha, ( color: number ): void => {\n\t\t\tcolorAndAlpha.color = color;\n\t\t\tthis.onColorChange();\n\t\t}, ( alpha: number ): void => {\n\t\t\tcolorAndAlpha.alpha = alpha;\n\t\t\tthis.updateTextForcibly();\n\t\t});\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current.color = colorAndAlpha.color;\n\t\t\tdialog.current.alpha = colorAndAlpha.alpha;\n\t\t\tdialog.new.color = colorAndAlpha.color;\n\t\t\tdialog.new.alpha = colorAndAlpha.alpha;\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dialogNew = dialog.new;\n\t\t\t\tconst dialogCurrent = dialog.current;\n\t\t\t\tthis.emit( \"select\", dialogNew, dialogCurrent, this );\n\t\t\t\tcolorAndAlpha.color = dialogNew.color;\n\t\t\t\tcolorAndAlpha.alpha = dialogNew.alpha;\n\t\t\t\tthis.onColorChange();\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tprotected getImageTintColor( theme: THEME, state: DBaseState ): number | null {\n\t\treturn this._textValueComputed.color;\n\t}\n\n\tprotected onColorChange(): void {\n\t\tconst image = this._image;\n\t\tif( this.isTintAware( image ) ) {\n\t\t\timage.tint = this._textValueComputed.color;\n\t\t\tDApplications.update( this );\n\t\t}\n\t\tthis.updateTextForcibly();\n\t}\n\n\tprotected updateTextForcibly(): void {\n\t\tthis.onTextChange();\n\t\tthis.createOrUpdateText();\n\t}\n\n\tget dialog(): DDialogColor {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogColor( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tif( DButtonColor.DIALOG == null ) {\n\t\t\t\t\tDButtonColor.DIALOG = new DDialogColor();\n\t\t\t\t}\n\t\t\t\tdialog = DButtonColor.DIALOG;\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): DColorAndAlpha {\n\t\treturn this._value;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonColor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\n\nexport class DButtonDanger extends DButton {\n\tprotected getType(): string {\n\t\treturn \"DButtonDanger\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonAmbient, DButtonAmbientOptions, DThemeButtonAmbient } from \"./d-button-ambient\";\n\nexport interface DPickerDatetimeButtonBackOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonBack = DThemePickerDatetimeButtonBack\n> extends DButtonAmbientOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeButtonBack extends DThemeButtonAmbient {\n\n}\n\nexport class DPickerDatetimeButtonBack<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonBack = DThemePickerDatetimeButtonBack,\n\tOPTIONS extends DPickerDatetimeButtonBackOptions<VALUE, THEME> = DPickerDatetimeButtonBackOptions<VALUE, THEME>\n> extends DButtonAmbient<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeButtonBack\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonAmbient, DButtonAmbientOptions, DThemeButtonAmbient } from \"./d-button-ambient\";\n\nexport interface DPickerDatetimeButtonDateOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonDate = DThemePickerDatetimeButtonDate\n> extends DButtonAmbientOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeButtonDate extends DThemeButtonAmbient {\n\n}\n\nexport class DPickerDatetimeButtonDate<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonDate = DThemePickerDatetimeButtonDate,\n\tOPTIONS extends DPickerDatetimeButtonDateOptions<VALUE, THEME> = DPickerDatetimeButtonDateOptions<VALUE, THEME>\n> extends DButtonAmbient<VALUE, THEME, OPTIONS> {\n\tprotected onToggleStart(): void {\n\t\tif( ! this.isActive() ) {\n\t\t\tthis.setActive( true );\n\t\t}\n\t}\n\n\tprotected onToggleEnd(): void {\n\t\tthis.emit( this.isActive() ? \"active\" : \"inactive\", this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeButtonDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonAmbient, DButtonAmbientOptions, DThemeButtonAmbient } from \"./d-button-ambient\";\n\nexport interface DPickerDatetimeButtonNextOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonNext = DThemePickerDatetimeButtonNext\n> extends DButtonAmbientOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeButtonNext extends DThemeButtonAmbient {\n\n}\n\nexport class DPickerDatetimeButtonNext<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeButtonNext = DThemePickerDatetimeButtonNext,\n\tOPTIONS extends DPickerDatetimeButtonNextOptions<VALUE, THEME> = DPickerDatetimeButtonNextOptions<VALUE, THEME>\n> extends DButtonAmbient<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeButtonNext\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DText, DTextOptions, DThemeText } from \"./d-text\";\n\nexport interface DPickerDatetimeLabelOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeLabel = DThemePickerDatetimeLabel\n> extends DTextOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeLabel extends DThemeText {\n\n}\n\nexport class DPickerDatetimeLabel<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeLabel = DThemePickerDatetimeLabel,\n\tOPTIONS extends DPickerDatetimeLabelOptions<VALUE, THEME> = DPickerDatetimeLabelOptions<VALUE, THEME>\n> extends DText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeLabel\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DText, DTextOptions, DThemeText } from \"./d-text\";\n\nexport interface DPickerDatetimeLabelDateOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeLabelDate = DThemePickerDatetimeLabelDate\n> extends DTextOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemePickerDatetimeLabelDate extends DThemeText {\n\n}\n\nexport class DPickerDatetimeLabelDate<\n\tVALUE = unknown,\n\tTHEME extends DThemePickerDatetimeLabelDate = DThemePickerDatetimeLabelDate,\n\tOPTIONS extends DPickerDatetimeLabelDateOptions<VALUE, THEME> = DPickerDatetimeLabelDateOptions<VALUE, THEME>\n> extends DText<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeLabelDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\n\nexport interface DPickerDatetimeSpaceOptions<\n\tTHEME extends DThemePickerDatetimeSpace = DThemePickerDatetimeSpace\n> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerDatetimeSpace extends DThemeBase {\n\n}\n\nexport class DPickerDatetimeSpace<\n\tTHEME extends DThemePickerDatetimeSpace = DThemePickerDatetimeSpace,\n\tOPTIONS extends DPickerDatetimeSpaceOptions<THEME> = DPickerDatetimeSpaceOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t\tthis.renderable = false;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetimeSpace\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputNumber, DInputNumberOptions, DThemeInputNumber } from \"./d-input-number\";\n\nexport interface DInputIntegerOptions<\n\tTHEME extends DThemeInputInteger = DThemeInputInteger\n> extends DInputNumberOptions<THEME> {\n\n}\n\nexport interface DThemeInputInteger extends DThemeInputNumber {\n}\n\nexport class DInputInteger<\n\tTHEME extends DThemeInputInteger = DThemeInputInteger,\n\tOPTIONS extends DInputIntegerOptions<THEME> = DInputIntegerOptions<THEME>\n> extends DInputNumber<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DInputInteger\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport type DPickerTimeBoundDate = Date | null;\n\nexport interface DPickerTimeBoundOptions {\n\tdate?: DPickerTimeBoundDate;\n\tinclusive?: boolean;\n}\n\nexport class DPickerTimeBound {\n\tprotected _date: DPickerTimeBoundDate;\n\tprotected _inclusive: boolean;\n\tprotected _onChange: () => void;\n\n\tconstructor( options: DPickerTimeBoundOptions | undefined, onChange: () => void ) {\n\t\tthis._date = ( options && options.date !== undefined ? options.date : null );\n\t\tthis._inclusive = ( options && options.inclusive !== undefined ? options.inclusive : false );\n\t\tthis._onChange = onChange;\n\t}\n\n\tget date(): DPickerTimeBoundDate {\n\t\treturn this._date;\n\t}\n\n\tset date( date: DPickerTimeBoundDate ) {\n\t\tif( this._date !== date ) {\n\t\t\tthis._date = date;\n\t\t\tthis._onChange();\n\t\t}\n\t}\n\n\tget inclusive(): boolean {\n\t\treturn this._inclusive;\n\t}\n\n\tset inclusive( inclusive: boolean ) {\n\t\tif( this._inclusive !== inclusive ) {\n\t\t\tthis._inclusive = inclusive;\n\t\t\tthis._onChange();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBound } from \"./d-picker-time-bound\";\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\n\nexport interface DPickerTimeBoundHoursParent {\n\tlower: DPickerTimeBound;\n\tupper: DPickerTimeBound;\n\tmask: DPickerDatetimeMask;\n\tconstant: DPickerTimeBoundConstant;\n}\n\nexport class DPickerTimeBoundHours {\n\tprotected _parent: DPickerTimeBoundHoursParent;\n\n\tconstructor( parent: DPickerTimeBoundHoursParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tmin( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst lower = parent.lower;\n\t\tconst lowerDate = lower.date;\n\t\tconst constant = parent.constant;\n\t\tif( lowerDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( lowerDate.getFullYear() < date.getFullYear() ) {\n\t\t\t\t\treturn constant.hour.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getMonth() < date.getMonth() ) {\n\t\t\t\t\treturn constant.hour.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getDate() < date.getDate() ) {\n\t\t\t\t\treturn constant.hour.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst lowerDateHours = lowerDate.getHours();\n\t\t\tif( lower.inclusive ) {\n\t\t\t\treturn lowerDateHours;\n\t\t\t} else {\n\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\tif( lowerDate.getSeconds() < constant.second.max ) {\n\t\t\t\t\t\treturn lowerDateHours;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\t\tif( lowerDate.getMinutes() < constant.minute.max ) {\n\t\t\t\t\t\treturn lowerDateHours;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn lowerDateHours + 1;\n\t\t\t}\n\t\t}\n\t\treturn constant.hour.min;\n\t}\n\n\tmax( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst upper = parent.upper;\n\t\tconst upperDate = upper.date;\n\t\tconst constant = parent.constant;\n\t\tif( upperDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( date.getFullYear() < upperDate.getFullYear() ) {\n\t\t\t\t\treturn constant.hour.max;\n\t\t\t\t}\n\t\t\t\tif( date.getMonth() < upperDate.getMonth() ) {\n\t\t\t\t\treturn constant.hour.max;\n\t\t\t\t}\n\t\t\t\tif( date.getDate() < upperDate.getDate() ) {\n\t\t\t\t\treturn constant.hour.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst upperDateHours = upperDate.getHours();\n\t\t\tif( upper.inclusive ) {\n\t\t\t\treturn upperDateHours;\n\t\t\t} else {\n\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\tif( constant.second.min < upperDate.getSeconds() ) {\n\t\t\t\t\t\treturn upperDateHours;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\t\tif( constant.minute.min < upperDate.getMinutes() ) {\n\t\t\t\t\t\treturn upperDateHours;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn upperDateHours - 1;\n\t\t\t}\n\t\t}\n\t\treturn constant.hour.max;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBound } from \"./d-picker-time-bound\";\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\n\nexport interface DPickerTimeBoundMinutesParent {\n\tlower: DPickerTimeBound;\n\tupper: DPickerTimeBound;\n\tmask: DPickerDatetimeMask;\n\tconstant: DPickerTimeBoundConstant;\n}\n\nexport class DPickerTimeBoundMinutes {\n\tprotected _parent: DPickerTimeBoundMinutesParent;\n\n\tconstructor( parent: DPickerTimeBoundMinutesParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tmin( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst lower = parent.lower;\n\t\tconst lowerDate = lower.date;\n\t\tconst constant = parent.constant;\n\t\tif( lowerDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( lowerDate.getFullYear() < date.getFullYear() ) {\n\t\t\t\t\treturn constant.minute.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getMonth() < date.getMonth() ) {\n\t\t\t\t\treturn constant.minute.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getDate() < date.getDate() ) {\n\t\t\t\t\treturn constant.minute.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\tif( lowerDate.getHours() < date.getHours() ) {\n\t\t\t\t\treturn constant.minute.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst lowerDateMinutes = lowerDate.getMinutes();\n\t\t\tif( lower.inclusive ) {\n\t\t\t\treturn lowerDateMinutes;\n\t\t\t} else {\n\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\tif( lowerDate.getSeconds() < constant.second.max ) {\n\t\t\t\t\t\treturn lowerDateMinutes;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn lowerDateMinutes + 1;\n\t\t\t}\n\t\t}\n\t\treturn constant.minute.min;\n\t}\n\n\tmax( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst upper = parent.upper;\n\t\tconst upperDate = upper.date;\n\t\tconst constant = parent.constant;\n\t\tif( upperDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( date.getFullYear() < upperDate.getFullYear() ) {\n\t\t\t\t\treturn constant.minute.max;\n\t\t\t\t}\n\t\t\t\tif( date.getMonth() < upperDate.getMonth() ) {\n\t\t\t\t\treturn constant.minute.max;\n\t\t\t\t}\n\t\t\t\tif( date.getDate() < upperDate.getDate() ) {\n\t\t\t\t\treturn constant.minute.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\tif( date.getHours() < upperDate.getHours() ) {\n\t\t\t\t\treturn constant.minute.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst upperDateMinutes = upperDate.getMinutes();\n\t\t\tif( upper.inclusive ) {\n\t\t\t\treturn upperDateMinutes;\n\t\t\t} else {\n\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\tif( constant.second.min < upperDate.getSeconds() ) {\n\t\t\t\t\t\treturn upperDateMinutes;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn upperDateMinutes - 1;\n\t\t\t}\n\t\t}\n\t\treturn constant.minute.max;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBound } from \"./d-picker-time-bound\";\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\n\nexport interface DPickerTimeBoundSecondsParent {\n\tlower: DPickerTimeBound;\n\tupper: DPickerTimeBound;\n\tmask: DPickerDatetimeMask;\n\tconstant: DPickerTimeBoundConstant;\n}\n\nexport class DPickerTimeBoundSeconds {\n\tprotected _parent: DPickerTimeBoundSecondsParent;\n\n\tconstructor( parent: DPickerTimeBoundSecondsParent ) {\n\t\tthis._parent = parent;\n\t}\n\n\tmin( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst lower = parent.lower;\n\t\tconst lowerDate = lower.date;\n\t\tconst constant = parent.constant;\n\t\tif( lowerDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( lowerDate.getFullYear() < date.getFullYear() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getMonth() < date.getMonth() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t\tif( lowerDate.getDate() < date.getDate() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\tif( lowerDate.getHours() < date.getHours() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\tif( lowerDate.getMinutes() < date.getMinutes() ) {\n\t\t\t\t\treturn constant.second.min;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lowerDate.getSeconds() + ( lower.inclusive ? 0 : 1 );\n\t\t}\n\t\treturn constant.second.min;\n\t}\n\n\tmax( date: Date ): number {\n\t\tconst parent = this._parent;\n\t\tconst upper = parent.upper;\n\t\tconst upperDate = upper.date;\n\t\tconst constant = parent.constant;\n\t\tif( upperDate != null ) {\n\t\t\tconst mask = parent.mask;\n\t\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\tif( date.getFullYear() < upperDate.getFullYear() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t\tif( date.getMonth() < upperDate.getMonth() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t\tif( date.getDate() < upperDate.getDate() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\tif( date.getHours() < upperDate.getHours() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\tif( date.getMinutes() < upperDate.getMinutes() ) {\n\t\t\t\t\treturn constant.second.max;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn upperDate.getSeconds() - ( upper.inclusive ? 0 : 1 );\n\t\t}\n\t\treturn constant.second.max;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBound, DPickerTimeBoundOptions } from \"./d-picker-time-bound\";\nimport { DPickerTimeBoundConstant } from \"./d-picker-time-bound-constant\";\nimport { DPickerTimeBoundHours } from \"./d-picker-time-bound-hours\";\nimport { DPickerTimeBoundMinutes } from \"./d-picker-time-bound-minutes\";\nimport { DPickerTimeBoundSeconds } from \"./d-picker-time-bound-seconds\";\n\nexport interface DPickerTimeBoundsOptions {\n\tlower?: DPickerTimeBoundOptions;\n\tupper?: DPickerTimeBoundOptions;\n}\n\nexport class DPickerTimeBounds {\n\tlower: DPickerTimeBound;\n\tupper: DPickerTimeBound;\n\tmask: DPickerDatetimeMask;\n\thours: DPickerTimeBoundHours;\n\tminutes: DPickerTimeBoundMinutes;\n\tseconds: DPickerTimeBoundSeconds;\n\tconstant: DPickerTimeBoundConstant;\n\n\tconstructor( options: DPickerTimeBoundsOptions | undefined, onChange: () => void ) {\n\t\tthis.constant = this.newConstant();\n\t\tthis.lower = new DPickerTimeBound( options && options.lower, onChange );\n\t\tthis.upper = new DPickerTimeBound( options && options.upper, onChange );\n\t\tthis.mask = DPickerDatetimeMask.ALL;\n\t\tthis.hours = new DPickerTimeBoundHours( this );\n\t\tthis.minutes = new DPickerTimeBoundMinutes( this );\n\t\tthis.seconds = new DPickerTimeBoundSeconds( this );\n\t}\n\n\tnewConstant(): DPickerTimeBoundConstant {\n\t\treturn {\n\t\t\tsecond: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 59\n\t\t\t},\n\n\t\t\tminute: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 59\n\t\t\t},\n\n\t\t\thour: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 23\n\t\t\t}\n\t\t};\n\t}\n\n\tadjust( date: Date ): boolean {\n\t\tconst result = this.test( date );\n\t\tif( result < 0 ) {\n\t\t\tconst lower = this.lower;\n\t\t\tconst lowerDate = lower.date;\n\t\t\tif( lowerDate ) {\n\t\t\t\tdate.setTime( lowerDate.getTime() );\n\t\t\t\tif( ! lower.inclusive ) {\n\t\t\t\t\tconst mask = this.mask;\n\t\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\t\tdate.setSeconds( lowerDate.getSeconds() + 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\t\t\tdate.setMinutes( lowerDate.getMinutes() + 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\t\t\tdate.setHours( lowerDate.getHours() + 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\t\t\tdate.setDate( lowerDate.getDate() + 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if( 0 < result ) {\n\t\t\tconst upper = this.upper;\n\t\t\tconst upperDate = upper.date;\n\t\t\tif( upperDate ) {\n\t\t\t\tdate.setTime( upperDate.getTime() );\n\t\t\t\tif( ! upper.inclusive ) {\n\t\t\t\t\tconst mask = this.mask;\n\t\t\t\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\t\t\t\tdate.setSeconds( upperDate.getSeconds() - 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\t\t\t\tdate.setMinutes( upperDate.getMinutes() - 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\t\t\t\tdate.setHours( upperDate.getHours() - 1 );\n\t\t\t\t\t} else if( mask & DPickerDatetimeMask.DATE ) {\n\t\t\t\t\t\tdate.setDate( upperDate.getDate() - 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tcompare( a: Date, b: Date ): number {\n\t\tconst mask = this.mask;\n\t\tif( mask & DPickerDatetimeMask.DATE ) {\n\t\t\tconst ay = a.getFullYear();\n\t\t\tconst by = b.getFullYear();\n\t\t\tif( ay !== by ) {\n\t\t\t\treturn ( ay < by ? -1 : +1 );\n\t\t\t}\n\n\t\t\tconst am = a.getMonth();\n\t\t\tconst bm = b.getMonth();\n\t\t\tif( am !== bm ) {\n\t\t\t\treturn ( am < bm ? -1 : +1 );\n\t\t\t}\n\n\t\t\tconst ad = a.getDate();\n\t\t\tconst bd = b.getDate();\n\t\t\tif( ad !== bd ) {\n\t\t\t\treturn ( ad < bd ? -1 : +1 );\n\t\t\t}\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.HOURS ) {\n\t\t\tconst ah = a.getHours();\n\t\t\tconst bh = b.getHours();\n\t\t\tif( ah !== bh ) {\n\t\t\t\treturn ( ah < bh ? -1 : +1 );\n\t\t\t}\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.MINUTES ) {\n\t\t\tconst am = a.getMinutes();\n\t\t\tconst bm = b.getMinutes();\n\t\t\tif( am !== bm ) {\n\t\t\t\treturn ( am < bm ? -1 : +1 );\n\t\t\t}\n\t\t}\n\t\tif( mask & DPickerDatetimeMask.SECONDS ) {\n\t\t\tconst ad = a.getSeconds();\n\t\t\tconst bd = b.getSeconds();\n\t\t\tif( ad !== bd ) {\n\t\t\t\treturn ( ad < bd ? -1 : +1 );\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\ttest( date: Date ): number {\n\t\t// Lower bound\n\t\tconst lower = this.lower;\n\t\tconst lowerDate = lower.date;\n\t\tif( lowerDate != null ) {\n\t\t\tconst result = this.compare( lowerDate, date );\n\t\t\tif( lower.inclusive ) {\n\t\t\t\treturn ( result <= 0 ? 0 : -1 );\n\t\t\t} else {\n\t\t\t\treturn ( result < 0 ? 0 : -1 );\n\t\t\t}\n\t\t}\n\n\t\t// Upper bound\n\t\tconst upper = this.upper;\n\t\tconst upperDate = upper.date;\n\t\tif( upperDate != null ) {\n\t\t\tconst result = this.compare( date, upperDate );\n\t\t\tif( upper.inclusive ) {\n\t\t\t\treturn ( result <= 0 ? 0 : +1 );\n\t\t\t} else {\n\t\t\t\treturn ( result < 0 ? 0 : +1 );\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tcontains( date: Date ): boolean {\n\t\treturn this.test( date ) === 0;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DInputInteger, DInputIntegerOptions } from \"./d-input-integer\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimeBoundDate, DPickerTimeBoundOptions } from \"./d-picker-time-bound\";\nimport { DPickerTimeBounds, DPickerTimeBoundsOptions } from \"./d-picker-time-bounds\";\nimport { DText } from \"./d-text\";\n\nexport interface DPickerTimeOptions<THEME extends DThemePickerTime = DThemePickerTime> extends DBaseOptions<THEME> {\n\tmargin?: number;\n\thours?: DInputIntegerOptions;\n\tminutes?: DInputIntegerOptions;\n\tseconds?: DInputIntegerOptions;\n\tmask?: DPickerDatetimeMask;\n\tbounds?: DPickerTimeBoundsOptions;\n}\n\nexport interface DThemePickerTime extends DThemeBase {\n\tgetMargin(): number;\n\tgetHoursOptions(): DInputIntegerOptions;\n\tgetMinutesOptions(): DInputIntegerOptions;\n\tgetSecondsOptions(): DInputIntegerOptions;\n\tgetMask(): DPickerDatetimeMask;\n\tgetLowerBound(): DPickerTimeBoundDate;\n\tisLowerBoundInclusive(): boolean;\n\tgetUpperBound(): DPickerTimeBoundDate;\n\tisUpperBoundInclusive(): boolean;\n}\n\nconst toBoundOptions = (\n\toptions: DPickerTimeBoundOptions | undefined,\n\tdate: DPickerTimeBoundDate,\n\tinclusive: boolean\n): DPickerTimeBoundOptions => {\n\tif( options ) {\n\t\treturn {\n\t\t\tdate: ( options.date !== undefined ? options.date : date ),\n\t\t\tinclusive: ( options.inclusive !== undefined ? options.inclusive : inclusive )\n\t\t};\n\t}\n\treturn {\n\t\tdate,\n\t\tinclusive\n\t};\n};\n\nconst toBoundsOptions = (\n\ttheme: DThemePickerTime,\n\toptions: DPickerTimeBoundsOptions | undefined\n): DPickerTimeBoundsOptions => {\n\tif( options ) {\n\t\treturn {\n\t\t\tlower: toBoundOptions(\n\t\t\t\toptions.lower,\n\t\t\t\ttheme.getLowerBound(),\n\t\t\t\ttheme.isLowerBoundInclusive()\n\t\t\t),\n\t\t\tupper: toBoundOptions(\n\t\t\t\toptions.upper,\n\t\t\t\ttheme.getUpperBound(),\n\t\t\t\ttheme.isUpperBoundInclusive()\n\t\t\t)\n\t\t};\n\t}\n\treturn {\n\t\tlower: {\n\t\t\tdate: theme.getLowerBound(),\n\t\t\tinclusive: theme.isLowerBoundInclusive()\n\t\t},\n\t\tupper: {\n\t\t\tdate: theme.getUpperBound(),\n\t\t\tinclusive: theme.isUpperBoundInclusive()\n\t\t}\n\t};\n};\n\nexport class DPickerTime<\n\tTHEME extends DThemePickerTime = DThemePickerTime,\n\tOPTIONS extends DPickerTimeOptions<THEME> = DPickerTimeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _dateBounds!: DPickerTimeBounds;\n\tprotected _dateCurrent!: Date;\n\tprotected _dateNew!: Date;\n\tprotected _inputHours!: DInputInteger | null;\n\tprotected _inputMinutes!: DInputInteger | null;\n\tprotected _inputSeconds!: DInputInteger | null;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.onNewChanged();\n\t}\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tconst theme = this.theme;\n\t\tthis._dateCurrent = new Date();\n\t\tconst dateCurrentTime = this._dateCurrent.getTime();\n\t\tthis._dateNew = new Date( dateCurrentTime );\n\t\tthis._dateBounds = new DPickerTimeBounds(\n\t\t\ttoBoundsOptions( theme, options && options.bounds ),\n\t\t\t(): void => { this.onNewChanged(); }\n\t\t);\n\t\tconst margin = ( options && options.margin != null ?\n\t\t\toptions.margin : theme.getMargin() );\n\t\tnew DLayoutVertical({\n\t\t\tparent: this,\n\t\t\tx: \"padding\", y: \"padding\",\n\t\t\twidth: \"auto\", height: \"auto\",\n\t\t\tmargin,\n\t\t\tchildren: this.newChildren( theme, options, margin )\n\t\t});\n\t}\n\n\tget current(): Date {\n\t\treturn this._dateCurrent;\n\t}\n\n\tset current( dateCurrent: Date ) {\n\t\tif( this._dateCurrent.getTime() !== dateCurrent.getTime() ) {\n\t\t\tthis._dateCurrent = dateCurrent;\n\t\t}\n\t}\n\n\tget new(): Date {\n\t\treturn this._dateNew;\n\t}\n\n\tset new( dateNew: Date ) {\n\t\tif( this._dateNew.getTime() !== dateNew.getTime() ) {\n\t\t\tthis._dateNew = dateNew;\n\t\t\tthis.onNewChanged();\n\t\t}\n\t}\n\n\tget bounds(): DPickerTimeBounds {\n\t\treturn this._dateBounds;\n\t}\n\n\thasHours(): boolean {\n\t\treturn this._inputHours != null;\n\t}\n\n\thasMinutes(): boolean {\n\t\treturn this._inputMinutes != null;\n\t}\n\n\thasSeconds(): boolean {\n\t\treturn this._inputSeconds != null;\n\t}\n\n\treset(): void {\n\t\tconst currentTime = this._dateCurrent.getTime();\n\t\tthis._dateNew.setTime( currentTime );\n\t\tthis.onReset();\n\t}\n\n\tprotected onReset(): void {\n\t\tthis.onNewChanged();\n\t}\n\n\tprotected onNewChanged(): void {\n\t\tconst dateNew = this._dateNew;\n\t\tconst dateBounds = this._dateBounds;\n\t\tdateBounds.adjust( this._dateNew );\n\n\t\tconst inputHours = this._inputHours;\n\t\tif( inputHours ) {\n\t\t\tconst hours = dateBounds.hours;\n\t\t\tinputHours.value = dateNew.getHours();\n\t\t\tinputHours.min = hours.min( dateNew );\n\t\t\tinputHours.max = hours.max( dateNew );\n\t\t}\n\n\t\tconst inputMinutes = this._inputMinutes;\n\t\tif( inputMinutes ) {\n\t\t\tconst minutes = dateBounds.minutes;\n\t\t\tinputMinutes.value = dateNew.getMinutes();\n\t\t\tinputMinutes.min = minutes.min( dateNew );\n\t\t\tinputMinutes.max = minutes.max( dateNew );\n\t\t}\n\n\t\tconst inputSeconds = this._inputSeconds;\n\t\tif( inputSeconds ) {\n\t\t\tconst seconds = dateBounds.seconds;\n\t\t\tinputSeconds.value = dateNew.getSeconds();\n\t\t\tinputSeconds.min = seconds.min( dateNew );\n\t\t\tinputSeconds.max = seconds.max( dateNew );\n\t\t}\n\t}\n\n\tprotected newChildren( theme: THEME, options: OPTIONS | undefined, margin: number ): Array<DisplayObject | null> {\n\t\tconst mask = ( (options && options.mask != null) ? options.mask : theme.getMask() );\n\t\tthis._dateBounds.mask = mask;\n\t\tthis._inputHours = ( (mask & DPickerDatetimeMask.HOURS) ? this.newInputHours( theme, options ) : null );\n\t\tthis._inputMinutes = ( (mask & DPickerDatetimeMask.MINUTES) ? this.newInputMinutes( theme, options ) : null );\n\t\tthis._inputSeconds = ( (mask & DPickerDatetimeMask.SECONDS) ? this.newInputSeconds( theme, options ) : null );\n\t\treturn [\n\t\t\tthis.newTimeLayout(\n\t\t\t\tthis._inputHours,\n\t\t\t\tthis._inputMinutes,\n\t\t\t\tthis._inputSeconds,\n\t\t\t\tmargin\n\t\t\t)\n\t\t];\n\t}\n\n\tprotected newTimeLayout(\n\t\thours: DInputInteger | null,\n\t\tminutes: DInputInteger | null,\n\t\tseconds: DInputInteger | null,\n\t\tmargin: number\n\t): DLayoutHorizontal | null {\n\t\tconst children = this.newTimeLayoutChildren( hours, minutes, seconds );\n\t\tif( 0 < children.length ) {\n\t\t\treturn new DLayoutHorizontal({\n\t\t\t\twidth: this.getTimeLayoutWidth(),\n\t\t\t\theight: this.getTimeLayoutHeight(),\n\t\t\t\tmargin,\n\t\t\t\tchildren\n\t\t\t});\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getTimeLayoutWidth(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tprotected getTimeLayoutHeight(): DCoordinate {\n\t\treturn \"auto\";\n\t}\n\n\tprotected newTimeLayoutChildren(\n\t\thours: DInputInteger | null,\n\t\tminutes: DInputInteger | null,\n\t\tseconds: DInputInteger | null\n\t): Array<DisplayObject | null> {\n\t\tconst result = [];\n\t\tif( hours != null ) {\n\t\t\tresult.push( hours );\n\t\t}\n\t\tif( minutes != null ) {\n\t\t\tif( 0 < result.length ) {\n\t\t\t\tresult.push( this.newMinuteSeparator() );\n\t\t\t}\n\t\t\tresult.push( minutes );\n\t\t}\n\t\tif( seconds != null ) {\n\t\t\tif( 0 < result.length ) {\n\t\t\t\tresult.push( this.newSecondSeparator() );\n\t\t\t}\n\t\t\tresult.push( seconds );\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected newMinuteSeparator(): DText | null {\n\t\treturn new DText({\n\t\t\twidth: \"auto\",\n\t\t\ttext: {\n\t\t\t\tvalue: this.getMinuteSeparator()\n\t\t\t}\n\t\t});\n\t}\n\n\tgetMinuteSeparator(): string {\n\t\treturn \":\";\n\t}\n\n\tprotected newSecondSeparator(): DText | null {\n\t\treturn new DText({\n\t\t\twidth: \"auto\",\n\t\t\ttext: {\n\t\t\t\tvalue: this.getSecondSeparator()\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSecondSeparator(): string {\n\t\treturn \":\";\n\t}\n\n\tprotected adjustInputOptions( theme: THEME, options: DInputIntegerOptions, max: number ): DInputIntegerOptions {\n\t\tif( options.step == null ) {\n\t\t\toptions.step = 1;\n\t\t}\n\t\tif( options.min == null ) {\n\t\t\toptions.min = 0;\n\t\t}\n\t\tif( options.max == null ) {\n\t\t\toptions.max = max;\n\t\t}\n\t\treturn options;\n\t}\n\n\tprotected newInputHours( theme: THEME, options?: OPTIONS ): DInputInteger | null {\n\t\tconst inputOptions = ( options && options.hours ) || theme.getHoursOptions();\n\t\tconst max = this._dateBounds.constant.hour.max;\n\t\tconst input = new DInputInteger( this.adjustInputOptions( theme, inputOptions, max ) );\n\t\tinput.on( \"change\", ( value: number ): void => {\n\t\t\tthis.onHoursChanged( value );\n\t\t});\n\t\treturn input;\n\t}\n\n\tprotected onHoursChanged( value: number ): void {\n\t\tconst dateNew = this._dateNew;\n\t\tdateNew.setHours( value );\n\t\tthis.onNewChanged();\n\t}\n\n\tprotected newInputMinutes( theme: THEME, options?: OPTIONS ): DInputInteger | null {\n\t\tconst inputOptions = ( options && options.minutes ) || theme.getMinutesOptions();\n\t\tconst max = this._dateBounds.constant.minute.max;\n\t\tconst input = new DInputInteger( this.adjustInputOptions( theme, inputOptions, max ) );\n\t\tinput.on( \"change\", ( value: number ): void => {\n\t\t\tthis.onMinutesChanged( value );\n\t\t});\n\t\treturn input;\n\t}\n\n\tprotected onMinutesChanged( value: number ): void {\n\t\tconst dateNew = this._dateNew;\n\t\tdateNew.setMinutes( value );\n\t\tthis.onNewChanged();\n\t}\n\n\tprotected newInputSeconds( theme: THEME, options?: OPTIONS ): DInputInteger | null {\n\t\tconst inputOptions = ( options && options.seconds ) || theme.getSecondsOptions();\n\t\tconst max = this._dateBounds.constant.second.max;\n\t\tconst input = new DInputInteger( this.adjustInputOptions( theme, inputOptions, max ) );\n\t\tinput.on( \"change\", ( value: number ): void => {\n\t\t\tthis.onSecondsChanged( value );\n\t\t});\n\t\treturn input;\n\t}\n\n\tprotected onSecondsChanged( value: number ): void {\n\t\tthis._dateNew.setSeconds( value );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerTime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DCoordinate } from \"./d-coordinate\";\nimport { DInputIntegerOptions } from \"./d-input-integer\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerDatetimeButtonBack, DPickerDatetimeButtonBackOptions } from \"./d-picker-datetime-button-back\";\nimport { DPickerDatetimeButtonDate } from \"./d-picker-datetime-button-date\";\nimport { DPickerDatetimeButtonNext, DPickerDatetimeButtonNextOptions } from \"./d-picker-datetime-button-next\";\nimport { DPickerDatetimeLabel } from \"./d-picker-datetime-label\";\nimport { DPickerDatetimeLabelDate } from \"./d-picker-datetime-label-date\";\nimport { DPickerDatetimeSpace } from \"./d-picker-datetime-space\";\nimport { DPickerTime, DPickerTimeOptions, DThemePickerTime } from \"./d-picker-time\";\nimport { DText } from \"./d-text\";\n\nexport type DPickerDatetimeLabelFormatter = ( date: Date ) => string;\nexport type DPickerDatetimeDateDecorator = ( date: Date, button: DPickerDatetimeButtonDate ) => void;\nexport type DPickerDatetimeDayLabels = [ string, string, string, string, string, string, string ];\n\nexport interface DPickerDatetimeOptions<\n\tTHEME extends DThemePickerDatetime = DThemePickerDatetime\n> extends DPickerTimeOptions<THEME> {\n\tback?: DPickerDatetimeButtonBackOptions | null;\n\tnext?: DPickerDatetimeButtonNextOptions | null;\n\tday?: {\n\t\tstart?: number;\n\t\tlabels?: DPickerDatetimeDayLabels;\n\t};\n\tlabel?: {\n\t\tformatter?: DPickerDatetimeLabelFormatter;\n\t};\n\tdate?: {\n\t\tdecorator?: DPickerDatetimeDateDecorator;\n\t};\n}\n\nexport interface DThemePickerDatetime extends DThemePickerTime {\n\tgetDayLabels(): DPickerDatetimeDayLabels;\n\tgetDayStart(): number;\n\tgetLabelFormatter(): DPickerDatetimeLabelFormatter;\n\tgetDateDecorator(): DPickerDatetimeDateDecorator;\n\tgetBackButtonOptions(): DPickerDatetimeButtonBackOptions | null;\n\tgetNextButtonOptions(): DPickerDatetimeButtonNextOptions | null;\n}\n\nexport class DPickerDatetime<\n\tTHEME extends DThemePickerDatetime = DThemePickerDatetime,\n\tOPTIONS extends DPickerDatetimeOptions<THEME> = DPickerDatetimeOptions<THEME>\n> extends DPickerTime<THEME, OPTIONS> {\n\tprotected _datePage!: Date;\n\tprotected _dateButtons!: Array<DPickerDatetimeSpace | DPickerDatetimeButtonDate>;\n\tprotected _dateDecorator!: DPickerDatetimeDateDecorator;\n\tprotected _label!: DText;\n\tprotected _labelFormatter!: DPickerDatetimeLabelFormatter;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._datePage = new Date( this._dateCurrent.getTime() );\n\t}\n\n\tprotected newChildren( theme: THEME, options: OPTIONS | undefined, margin: number ): Array<DisplayObject | null> {\n\t\tthis._dateButtons = this.newDateButtons( theme, options );\n\t\tthis._dateDecorator = ( options && options.date && options.date.decorator ) ||\n\t\t\ttheme.getDateDecorator();\n\t\tthis._label = this.newLabel();\n\t\tthis._labelFormatter = ( options && options.label && options.label.formatter ) ||\n\t\t\ttheme.getLabelFormatter();\n\t\tconst result = super.newChildren( theme, options, margin );\n\t\tresult.unshift(\n\t\t\tnew DLayoutHorizontal({\n\t\t\t\twidth: \"100%\", height: \"auto\",\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.newBackButton( theme, options ),\n\t\t\t\t\tthis._label,\n\t\t\t\t\tthis.newNextButton( theme, options )\n\t\t\t\t]\n\t\t\t}),\n\t\t\tnew DLayoutHorizontal({\n\t\t\t\twidth: \"auto\", height: \"auto\",\n\t\t\t\tmargin,\n\t\t\t\tchildren: this.newDateLabels( theme, options )\n\t\t\t}),\n\t\t\tnew DLayoutVertical({\n\t\t\t\twidth: \"auto\", height: \"auto\",\n\t\t\t\tmargin,\n\t\t\t\tcolumn: 7,\n\t\t\t\tchildren: this._dateButtons\n\t\t\t})\n\t\t);\n\t\treturn result;\n\t}\n\n\tget page(): Date {\n\t\treturn this._datePage;\n\t}\n\n\tset page( datePage: Date ) {\n\t\tif( this._datePage.getTime() !== datePage.getTime() ) {\n\t\t\tthis._datePage = datePage;\n\t\t\tthis.onPageChanged();\n\t\t}\n\t}\n\n\tprotected onReset(): void {\n\t\tthis._datePage.setTime( this._dateCurrent.getTime() );\n\t\tsuper.onReset();\n\t}\n\n\tnext(): void {\n\t\tconst work = this._datePage;\n\t\twork.setFullYear( work.getFullYear(), work.getMonth() + 1, 1 );\n\t\twork.setHours( 0, 0, 0, 0 );\n\t\tthis.onPageChanged();\n\t}\n\n\tback(): void {\n\t\tconst work = this._datePage;\n\t\twork.setFullYear( work.getFullYear(), work.getMonth() - 1, 1 );\n\t\twork.setHours( 0, 0, 0, 0 );\n\t\tthis.onPageChanged();\n\t}\n\n\tonNewChanged(): void {\n\t\tthis._dateBounds.adjust( this._datePage );\n\t\tsuper.onNewChanged();\n\t\tthis.onPageChanged();\n\t}\n\n\tprotected onPageChanged(): void {\n\t\tconst buttons = this._dateButtons;\n\t\tconst bounds = this._dateBounds;\n\t\tconst datePage = this._datePage;\n\t\tconst dateNew = this._dateNew;\n\n\t\tconst tmp = new Date( datePage.getTime() );\n\t\ttmp.setDate( 1 );\n\t\ttmp.setHours( 0, 0, 0, 0 );\n\n\t\t// Spaces\n\t\tconst theme = this.theme;\n\t\tconst spaceCount = ( tmp.getDay() - theme.getDayStart() + 7 ) % 7;\n\t\tfor( let i = 0; i < spaceCount; ++i ) {\n\t\t\tbuttons[ i ].show();\n\t\t}\n\t\tfor( let i = spaceCount; i < 7; ++i ) {\n\t\t\tbuttons[ i ].hide();\n\t\t}\n\n\t\t// Date buttons\n\t\tconst dateDecorator = this._dateDecorator;\n\t\ttmp.setFullYear( tmp.getFullYear(), tmp.getMonth() + 1, 0 );\n\t\tconst dateCount = tmp.getDate();\n\t\tconst dateNewDate = ( dateNew.getFullYear() === tmp.getFullYear() &&\n\t\t\tdateNew.getMonth() === tmp.getMonth() ? dateNew.getDate() : 0 );\n\t\tfor( let i = 0; i < dateCount; ++i ) {\n\t\t\ttmp.setDate( i + 1 );\n\n\t\t\tconst button = buttons[ i + 7 ];\n\t\t\tbutton.setActive( dateNewDate === i + 1 );\n\t\t\tbutton.setDisabled( ! bounds.contains( tmp ) );\n\t\t\tbutton.show();\n\n\t\t\tdateDecorator( tmp, button as DPickerDatetimeButtonDate );\n\t\t}\n\t\tfor( let i = dateCount; i < 31; ++i ) {\n\t\t\tconst button = buttons[ i + 7 ];\n\t\t\tbutton.setActive( false );\n\t\t\tbutton.hide();\n\t\t}\n\n\t\t// Label\n\t\tthis._label.text = this._labelFormatter( datePage );\n\t}\n\n\tprotected adjustInputOptions( theme: THEME, options: DInputIntegerOptions, max: number ): DInputIntegerOptions {\n\t\tif( options.weight == null ) {\n\t\t\toptions.weight = 1;\n\t\t}\n\t\treturn super.adjustInputOptions( theme, options, max );\n\t}\n\n\tprotected getTimeLayoutWidth(): DCoordinate {\n\t\treturn \"100%\";\n\t}\n\n\tprotected newLabel(): DPickerDatetimeLabel {\n\t\treturn new DPickerDatetimeLabel({\n\t\t\tweight: 1,\n\t\t\tpadding: 0,\n\t\t\ttext: {\n\t\t\t\talign: {\n\t\t\t\t\thorizontal: \"CENTER\"\n\t\t\t\t},\n\t\t\t\tvalue: \"\"\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected newBackButton( theme: THEME, options?: OPTIONS ): DPickerDatetimeButtonBack | null {\n\t\tconst buttonOptions = ( options && options.back !== undefined ?\n\t\t\toptions.back : theme.getBackButtonOptions() );\n\t\tif( buttonOptions != null ) {\n\t\t\tconst button = new DPickerDatetimeButtonBack( buttonOptions );\n\t\t\tbutton.on( \"active\", (): void => {\n\t\t\t\tthis.back();\n\t\t\t});\n\t\t\treturn button;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected newNextButton( theme: THEME, options?: OPTIONS ): DPickerDatetimeButtonNext | null {\n\t\tconst buttonOptions = ( options && options.next !== undefined ?\n\t\t\toptions.next : theme.getNextButtonOptions() );\n\t\tif( buttonOptions != null ) {\n\t\t\tconst button = new DPickerDatetimeButtonNext( buttonOptions );\n\t\t\tbutton.on( \"active\", (): void => {\n\t\t\t\tthis.next();\n\t\t\t});\n\t\t\treturn button;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected newDateLabels( theme: THEME, options: OPTIONS | undefined ): DPickerDatetimeLabelDate[] {\n\t\tconst dateLabels = theme.getDayLabels();\n\t\tconst dayStart = theme.getDayStart();\n\t\tconst result: DPickerDatetimeLabelDate[] = [];\n\t\tfor( let i = 0; i < 7; ++i ) {\n\t\t\tconst label = dateLabels[ (dayStart + i) % 7 ];\n\t\t\tresult.push(\n\t\t\t\tthis.newDateLabel( theme, options, label )\n\t\t\t);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected newDateLabel( theme: THEME, options: OPTIONS | undefined, label: string ): DPickerDatetimeLabelDate {\n\t\treturn new DPickerDatetimeLabelDate({\n\t\t\ttext: {\n\t\t\t\tvalue: label\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected newDateButtons(\n\t\ttheme: THEME, options: OPTIONS | undefined\n\t): Array<DPickerDatetimeSpace | DPickerDatetimeButtonDate> {\n\t\tconst result: Array<DPickerDatetimeSpace | DPickerDatetimeButtonDate> = [];\n\t\tfor( let i = 0; i < 7; ++i ) {\n\t\t\tresult.push(\n\t\t\t\tthis.newSpace( theme, options )\n\t\t\t);\n\t\t}\n\t\tfor( let i = 1; i <= 31; ++i ) {\n\t\t\tresult.push(\n\t\t\t\tthis.newDateButton( theme, options, i )\n\t\t\t);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected newSpace( theme: THEME, options: OPTIONS | undefined ): DPickerDatetimeSpace {\n\t\treturn new DPickerDatetimeSpace();\n\t}\n\n\tprotected newDateButton( theme: THEME, options: OPTIONS | undefined, date: number ): DPickerDatetimeButtonDate {\n\t\treturn new DPickerDatetimeButtonDate({\n\t\t\ttext: {\n\t\t\t\tvalue: String( date )\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tactive: (): void => {\n\t\t\t\t\tthis.onDateButtonClicked( date );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected onDateButtonClicked( date: number ): void {\n\t\tconst dateNew = this._dateNew;\n\t\tif( dateNew.getDate() !== date ) {\n\t\t\tconst datePage = this._datePage;\n\t\t\tdateNew.setFullYear( datePage.getFullYear() );\n\t\t\tdateNew.setMonth( datePage.getMonth() );\n\t\t\tdateNew.setDate( date );\n\t\t\tthis.onNewChanged();\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPickerDatetime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DPickerDatetime, DPickerDatetimeOptions, DThemePickerDatetime } from \"./d-picker-datetime\";\n\nexport interface DPickerDateOptions<\n\tTHEME extends DThemePickerDate = DThemePickerDate\n> extends DPickerDatetimeOptions<THEME> {\n\n}\n\nexport interface DThemePickerDate extends DThemePickerDatetime {\n\n}\n\nexport class DPickerDate<\n\tTHEME extends DThemePickerDate = DThemePickerDate,\n\tOPTIONS extends DPickerDateOptions<THEME> = DPickerDateOptions<THEME>\n> extends DPickerDatetime<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DPickerDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerDate, DPickerDateOptions } from \"./d-picker-date\";\n\nexport interface DDialogDateOptions<\n\tTHEME extends DThemeDialogDate = DThemeDialogDate\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerDateOptions;\n}\n\nexport interface DThemeDialogDate extends DThemeDialogCommand {\n\n}\n\nexport class DDialogDate<\n\tTHEME extends DThemeDialogDate = DThemeDialogDate,\n\tOPTIONS extends DDialogDateOptions<THEME> = DDialogDateOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerDate;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerDate( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\t}\n\n\tget current(): Date {\n\t\treturn this._picker.current;\n\t}\n\n\tset current( dateCurrent: Date ) {\n\t\tthis._picker.current = dateCurrent;\n\t}\n\n\tget new(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset new( dateNew: Date ) {\n\t\tthis._picker.new = dateNew;\n\t}\n\n\tget page(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset page( datePage: Date ) {\n\t\tthis._picker.page = datePage;\n\t}\n\n\tget picker(): DPickerDate {\n\t\treturn this._picker;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogDate } from \"./d-dialog-date\";\n\nexport class DDialogDates {\n\tprotected static INSTANCE?: DDialogDate;\n\tstatic getInstance(): DDialogDate {\n\t\tif( DDialogDates.INSTANCE == null ) {\n\t\t\tDDialogDates.INSTANCE = new DDialogDate();\n\t\t}\n\t\treturn DDialogDates.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogDate, DDialogDateOptions } from \"./d-dialog-date\";\nimport { DDialogDates } from \"./d-dialog-dates\";\n\nexport interface DButtonDateOptions<\n\tTHEME extends DThemeButtonDate = DThemeButtonDate\n> extends DButtonOptions<Date, THEME> {\n\tdialog?: DDialogDateOptions;\n}\n\nexport interface DThemeButtonDate extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DButtonDate ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DButtonDate<\n\tTHEME extends DThemeButtonDate = DThemeButtonDate,\n\tOPTIONS extends DButtonDateOptions<THEME> = DButtonDateOptions<THEME>\n> extends DButton<Date, THEME, OPTIONS> {\n\tprotected _dialog?: DDialogDate;\n\tprotected _dialogOptions?: DDialogDateOptions;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._dialogOptions = options && options.dialog;\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.page = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dateNew = dialog.new;\n\t\t\t\tconst dateCurrent = dialog.current;\n\t\t\t\tthis.emit( \"select\", dateNew, dateCurrent, this );\n\t\t\t\tthis.text = new Date( dateNew.getTime() );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tget dialog(): DDialogDate {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogDate( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogDates.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): Date {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: Date ) {\n\t\tif( this._textValueComputed.getTime() !== value.getTime() ) {\n\t\t\tthis.text = value;\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerDatetime, DPickerDatetimeOptions } from \"./d-picker-datetime\";\n\nexport interface DDialogDatetimeOptions<\n\tTHEME extends DThemeDialogDatetime = DThemeDialogDatetime\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerDatetimeOptions;\n}\n\nexport interface DThemeDialogDatetime extends DThemeDialogCommand {\n\n}\n\nexport class DDialogDatetime<\n\tTHEME extends DThemeDialogDatetime = DThemeDialogDatetime,\n\tOPTIONS extends DDialogDatetimeOptions<THEME> = DDialogDatetimeOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerDatetime;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerDatetime( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\t}\n\n\tget current(): Date {\n\t\treturn this._picker.current;\n\t}\n\n\tset current( dateCurrent: Date ) {\n\t\tthis._picker.current = dateCurrent;\n\t}\n\n\tget new(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset new( dateNew: Date ) {\n\t\tthis._picker.new = dateNew;\n\t}\n\n\tget page(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset page( datePage: Date ) {\n\t\tthis._picker.page = datePage;\n\t}\n\n\tget picker(): DPickerDatetime {\n\t\treturn this._picker;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogDatetime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogDatetime } from \"./d-dialog-datetime\";\n\nexport class DDialogDatetimes {\n\tprotected static INSTANCE?: DDialogDatetime;\n\tstatic getInstance(): DDialogDatetime {\n\t\tif( DDialogDatetimes.INSTANCE == null ) {\n\t\t\tDDialogDatetimes.INSTANCE = new DDialogDatetime();\n\t\t}\n\t\treturn DDialogDatetimes.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogDatetime, DDialogDatetimeOptions } from \"./d-dialog-datetime\";\nimport { DDialogDatetimes } from \"./d-dialog-datetimes\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerDatetimes } from \"./d-picker-datetimes\";\n\nexport interface DButtonDatetimeOptions<\n\tTHEME extends DThemeButtonDatetime = DThemeButtonDatetime\n> extends DButtonOptions<Date, THEME> {\n\tdialog?: DDialogDatetimeOptions;\n}\n\nexport interface DThemeButtonDatetime extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DButtonDatetime ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DButtonDatetime<\n\tTHEME extends DThemeButtonDatetime = DThemeButtonDatetime,\n\tOPTIONS extends DButtonDatetimeOptions<THEME> = DButtonDatetimeOptions<THEME>\n> extends DButton<Date, THEME, OPTIONS> {\n\tprotected _dialog?: DDialogDatetime;\n\tprotected _dialogOptions?: DDialogDatetimeOptions;\n\tprotected _datetimeMask!: DPickerDatetimeMask;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tthis._dialogOptions = options && options.dialog;\n\t\tthis._datetimeMask = DPickerDatetimes.toMask( options && options.dialog && options.dialog.picker );\n\n\t\tsuper.init( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.page = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dateNew = dialog.new;\n\t\t\t\tconst dateCurrent = dialog.current;\n\t\t\t\tthis.emit( \"select\", dateNew, dateCurrent, this );\n\t\t\t\tthis.text = new Date( dateNew.getTime() );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDatetimeMask(): DPickerDatetimeMask {\n\t\treturn this._datetimeMask;\n\t}\n\n\tget dialog(): DDialogDatetime {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogDatetime( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogDatetimes.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): Date {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: Date ) {\n\t\tif( this._textValueComputed.getTime() !== value.getTime() ) {\n\t\t\tthis.text = value;\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonDatetime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { UtilFileAs, UtilFileOpener } from \"./util/util-file-opener\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport import DButtonFileAs = UtilFileAs;\n\nexport interface DButtonFileOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonFile = DThemeButtonFile\n> extends DButtonOptions<VALUE, THEME> {\n\tas?: (keyof typeof UtilFileAs) | UtilFileAs;\n\tchecker?: () => Promise<unknown> | boolean;\n}\n\nexport interface DThemeButtonFile extends DThemeButton {\n\n}\n\nexport class DButtonFile<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonFile = DThemeButtonFile,\n\tOPTIONS extends DButtonFileOptions<VALUE, THEME> = DButtonFileOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tprotected _checker!: (() => Promise<unknown> | boolean) | undefined;\n\tprotected _opener!: UtilFileOpener;\n\n\tprotected init( options?: OPTIONS ): void {\n\t\tsuper.init( options );\n\n\t\tthis._checker = ( options != null && options.checker != null ? options.checker : undefined );\n\t\tconst as: DButtonFileAs = ( options != null && options.as != null ?\n\t\t\t( utilIsString( options.as ) ? DButtonFileAs[ options.as ] : options.as ) :\n\t\t\tDButtonFileAs.TEXT\n\t\t);\n\t\tconst opener = new UtilFileOpener( as, this );\n\t\tthis._opener = opener;\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst result = this.onOpening();\n\t\t\tif( result === true ) {\n\t\t\t\topener.open();\n\t\t\t} else if( result === false ) {\n\t\t\t\t// DO NOTHING\n\t\t\t} else {\n\t\t\t\tresult.then((): void => {\n\t\t\t\t\topener.open();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonOpening(): boolean | Promise<unknown> {\n\t\tconst checker = this._checker;\n\t\tif( checker != null ) {\n\t\t\treturn checker();\n\t\t}\n\t\treturn true;\n\t}\n\n\topen(): void {\n\t\tthis._opener.open();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonFile\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DButtonBase } from \"./d-button-base\";\n\ntype BUTTON = DButtonBase<any, any, any>;\n\nexport interface DButtonGroupOptions {\n\ton?: { [name: string]: Function };\n}\n\nexport class DButtonGroup extends utils.EventEmitter {\n\tprotected _buttons: BUTTON[];\n\tprotected _active: BUTTON | null;\n\tprotected _stateOn: DBaseState;\n\tprotected _stateOff: DBaseState;\n\tprotected _onActiveBound: ( button: BUTTON ) => void;\n\n\tconstructor( options?: DButtonGroupOptions ) {\n\t\tsuper();\n\n\t\tthis._buttons = [];\n\t\tthis._active = null;\n\t\tthis._stateOn = DBaseState.NONE;\n\t\tthis._stateOff = DBaseState.NONE;\n\t\tthis._onActiveBound = ( button: BUTTON ): void => {\n\t\t\tthis.onActive( button );\n\t\t};\n\n\t\t// Events\n\t\tif( options != null ) {\n\t\t\tconst on = options.on;\n\t\t\tif( on != null ) {\n\t\t\t\tfor( const name in on ) {\n\t\t\t\t\tthis.on( name, on[ name ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Done\n\t\tthis.emit( \"init\", this );\n\t}\n\n\tadd( button: BUTTON ): void {\n\t\tconst buttons = this._buttons;\n\t\tconst index = buttons.indexOf( button );\n\t\tif( index < 0 ) {\n\t\t\tthis._buttons.push( button );\n\t\t\tbutton.setState( this._stateOn, true );\n\t\t\tbutton.setState( this._stateOff, false );\n\t\t\tbutton.on( \"active\", this._onActiveBound );\n\t\t\tif( button.isActive() ) {\n\t\t\t\tthis.onActive( button );\n\t\t\t}\n\t\t}\n\t}\n\n\tget active() {\n\t\treturn this._active;\n\t}\n\n\tprotected onActive( active: BUTTON ): void {\n\t\tif( active.isToggle() ) {\n\t\t\tthis._active = active;\n\t\t\tconst buttons = this._buttons;\n\t\t\tfor( let i = 0, imax = buttons.length; i < imax; ++i ) {\n\t\t\t\tconst button = buttons[ i ];\n\t\t\t\tif( button !== active && button.isToggle() && button.isActive() ) {\n\t\t\t\t\tbutton.onClick();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tremove( button: BUTTON ): void {\n\t\tconst buttons = this._buttons;\n\t\tconst index = buttons.indexOf( button );\n\t\tif( 0 <= index ) {\n\t\t\tbuttons.splice( index, 1 );\n\t\t\tbutton.off( \"active\", this._onActiveBound );\n\t\t}\n\t}\n\n\tcontains( button: BUTTON ): boolean {\n\t\tconst buttons = this._buttons;\n\t\tconst index = buttons.indexOf( button );\n\t\treturn ( 0 <= index );\n\t}\n\n\tsetHovered( isHovered: boolean ) {\n\t\treturn this.setState( DBaseState.HOVERED, isHovered );\n\t}\n\n\tsetActive( isActive: boolean ) {\n\t\treturn this.setState( DBaseState.ACTIVE, isActive );\n\t}\n\n\tsetReadOnly( isReadOnly: boolean ) {\n\t\treturn this.setState( DBaseState.READ_ONLY, isReadOnly );\n\t}\n\n\tsetDisabled( isDisabled: boolean ) {\n\t\treturn this.setState( DBaseState.DISABLED, isDisabled );\n\t}\n\n\tsetDragging( isDragging: boolean ) {\n\t\treturn this.setState( DBaseState.DRAGGING, isDragging );\n\t}\n\n\tisHovered(): boolean {\n\t\treturn this.hasState( DBaseState.HOVERED );\n\t}\n\n\tisActive(): boolean {\n\t\treturn this.hasState( DBaseState.ACTIVE );\n\t}\n\n\tisReadOnly(): boolean {\n\t\treturn this.hasState( DBaseState.READ_ONLY );\n\t}\n\n\tisDisabled(): boolean {\n\t\treturn this.hasState( DBaseState.DISABLED );\n\t}\n\n\tisDragging(): boolean {\n\t\treturn this.hasState( DBaseState.DRAGGING );\n\t}\n\n\tisFocused(): boolean {\n\t\treturn this.hasState( DBaseState.FOCUSED );\n\t}\n\n\tisUnfocusable(): boolean {\n\t\treturn this.hasState( DBaseState.UNFOCUSABLE );\n\t}\n\n\tsetState( state: DBaseState, isOn: boolean ) {\n\t\tif( isOn ) {\n\t\t\tthis._stateOn |= state;\n\t\t\tthis._stateOff &= ~state;\n\t\t} else {\n\t\t\tthis._stateOff |= state;\n\t\t\tthis._stateOn &= ~state;\n\t\t}\n\n\t\tconst buttons = this._buttons;\n\t\tfor( let i = 0, imax = buttons.length; i < imax; ++i ) {\n\t\t\tconst button = buttons[ i ];\n\t\t\tbutton.setState( state, isOn );\n\t\t}\n\t\treturn this;\n\t}\n\n\thasState( state: DBaseState ): boolean {\n\t\tconst buttons = this._buttons;\n\t\tfor( let i = 0, imax = buttons.length; i < imax; ++i ) {\n\t\t\tif( buttons[ i ].hasState( state ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tclear(): void {\n\t\tthis._buttons.length = 0;\n\t}\n\n\tdestroy(): void {\n\t\tthis.clear();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonBase, DButtonBaseOptions, DThemeButtonBase } from \"./d-button-base\";\n\nexport interface DButtonRadioOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonRadio = DThemeButtonRadio\n> extends DButtonBaseOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonRadio extends DThemeButtonBase {\n\n}\n\nexport class DButtonRadio<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonRadio = DThemeButtonRadio,\n\tOPTIONS extends DButtonRadioOptions<VALUE, THEME> = DButtonRadioOptions<VALUE, THEME>\n> extends DButtonBase<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonRadio\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonRadio, DButtonRadioOptions, DThemeButtonRadio } from \"./d-button-radio\";\n\nexport interface DButtonRadioRightOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonRadioRight = DThemeButtonRadioRight\n> extends DButtonRadioOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeButtonRadioRight extends DThemeButtonRadio {\n\n}\n\nexport class DButtonRadioRight<\n\tVALUE = unknown,\n\tTHEME extends DThemeButtonRadioRight = DThemeButtonRadioRight,\n\tOPTIONS extends DButtonRadioRightOptions<VALUE, THEME> = DButtonRadioRightOptions<VALUE, THEME>\n> extends DButtonRadio<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DButtonRadioRight\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DButtonRedo<\n\tVALUE = unknown,\n\tTHEME extends DThemeButton = DThemeButton,\n\tOPTIONS extends DButtonOptions<VALUE, THEME> = DButtonOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tconst commandController = DControllers.getCommandController();\n\t\tthis.setState( DBaseState.DISABLED, ! commandController.isRedoable() );\n\t\tcommandController.on( \"change\", () => {\n\t\t\tthis.setState( DBaseState.DISABLED, ! commandController.isRedoable() );\n\t\t});\n\n\t\tthis.on( \"active\", () => {\n\t\t\tcommandController.redo();\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\n\nexport class DButtonSecondary extends DButton {\n\tprotected getType(): string {\n\t\treturn \"DButtonSecondary\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DPickerTime, DPickerTimeOptions } from \"./d-picker-time\";\n\nexport interface DDialogTimeOptions<\n\tTHEME extends DThemeDialogTime = DThemeDialogTime\n> extends DDialogCommandOptions<THEME> {\n\tpicker?: DPickerTimeOptions;\n}\n\nexport interface DThemeDialogTime extends DThemeDialogCommand {\n\n}\n\nexport class DDialogTime<\n\tTHEME extends DThemeDialogTime = DThemeDialogTime,\n\tOPTIONS extends DDialogTimeOptions<THEME> = DDialogTimeOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _picker!: DPickerTime;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\n\t\tconst picker = new DPickerTime( options && options.picker );\n\t\tthis._picker = picker;\n\t\tlayout.addChild( picker );\n\t}\n\n\tget current(): Date {\n\t\treturn this._picker.current;\n\t}\n\n\tset current( dateCurrent: Date ) {\n\t\tthis._picker.current = dateCurrent;\n\t}\n\n\tget new(): Date {\n\t\treturn this._picker.new;\n\t}\n\n\tset new( dateNew: Date ) {\n\t\tthis._picker.new = dateNew;\n\t}\n\n\tget picker(): DPickerTime {\n\t\treturn this._picker;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogTime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogTime } from \"./d-dialog-time\";\n\nexport class DDialogTimes {\n\tprotected static INSTANCE?: DDialogTime;\n\tstatic getInstance(): DDialogTime {\n\t\tif( DDialogTimes.INSTANCE == null ) {\n\t\t\tDDialogTimes.INSTANCE = new DDialogTime();\n\t\t}\n\t\treturn DDialogTimes.INSTANCE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogTime, DDialogTimeOptions } from \"./d-dialog-time\";\nimport { DDialogTimes } from \"./d-dialog-times\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimes } from \"./d-picker-times\";\n\nexport interface DButtonTimeOptions<\n\tTHEME extends DThemeButtonTime = DThemeButtonTime\n> extends DButtonOptions<Date, THEME> {\n\tdialog?: DDialogTimeOptions;\n}\n\nexport interface DThemeButtonTime extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DButtonTime ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DButtonTime<\n\tTHEME extends DThemeButtonTime = DThemeButtonTime,\n\tOPTIONS extends DButtonTimeOptions<THEME> = DButtonTimeOptions<THEME>\n> extends DButton<Date, THEME, OPTIONS> {\n\tprotected _dialog?: DDialogTime;\n\tprotected _dialogOptions?: DDialogTimeOptions;\n\tprotected _datetimeMask!: DPickerDatetimeMask;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tthis._dialogOptions = options && options.dialog;\n\t\tthis._datetimeMask = DPickerTimes.toMask( options && options.dialog && options.dialog.picker );\n\n\t\tsuper.init( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dateNew = dialog.new;\n\t\t\t\tconst dateCurrent = dialog.current;\n\t\t\t\tthis.emit( \"select\", dateNew, dateCurrent, this );\n\t\t\t\tthis.text = new Date( dateNew.getTime() );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDatetimeMask(): DPickerDatetimeMask {\n\t\treturn this._datetimeMask;\n\t}\n\n\tget dialog(): DDialogTime {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogTime( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogTimes.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tget value(): Date {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: Date ) {\n\t\tif( this._textValueComputed.getTime() !== value.getTime() ) {\n\t\t\tthis.text = value;\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DButtonTime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DButtonUndo<\n\tVALUE = unknown,\n\tTHEME extends DThemeButton = DThemeButton,\n\tOPTIONS extends DButtonOptions<VALUE, THEME> = DButtonOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tconst commandController = DControllers.getCommandController();\n\t\tthis.setState( DBaseState.DISABLED, ! commandController.isUndoable() );\n\t\tcommandController.on( \"change\", () => {\n\t\t\tthis.setState( DBaseState.DISABLED, ! commandController.isUndoable() );\n\t\t});\n\n\t\tthis.on( \"active\", () => {\n\t\t\tcommandController.undo();\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics, Renderer } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\nimport { DCornerMask } from \"./d-corner\";\n\nexport class DBaseOverflowMask extends Graphics implements DReflowable {\n\tconstructor( parent: DBase ) {\n\t\tsuper();\n\t\t(this as any).parent = parent;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tthis.updateTransform();\n\t\tsuper.render( renderer );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number): void {\n\t\tconst x = 0;\n\t\tconst y = 0;\n\t\tconst corner = base.corner;\n\t\tconst cornerRadius = Math.max( 0, corner.getRadius() - 0.5 );\n\t\tconst cornerMask = corner.getMask();\n\t\tconst tl = ( cornerMask & DCornerMask.TOP_LEFT ? 0 : cornerRadius );\n\t\tconst tr = ( cornerMask & DCornerMask.TOP_RIGHT ? 0 : cornerRadius );\n\t\tconst bl = ( cornerMask & DCornerMask.BOTTOM_LEFT ? 0 : cornerRadius );\n\t\tconst br = ( cornerMask & DCornerMask.BOTTOM_RIGHT ? 0 : cornerRadius );\n\t\tthis.clear();\n\t\tthis.beginFill( 0xFFFFFF, 1 );\n\t\tthis.lineStyle( 0, 0, 0, 0, false );\n\t\tif( tl <= 0 && tr <= 0 && bl <= 0 && br <= 0 ) {\n\t\t\tthis.moveTo( x, y );\n\t\t\tthis.lineTo( x + width, y );\n\t\t\tthis.lineTo( x + width, y + height );\n\t\t\tthis.lineTo( x, y + height );\n\t\t\tthis.lineTo( x, y );\n\t\t} else {\n\t\t\tthis.moveTo( x + tl, y );\n\t\t\tif( 0 < tr ) {\n\t\t\t\tthis.arcTo( x + width, y, x + width, y + height, tr );\n\t\t\t} else {\n\t\t\t\tthis.lineTo( x + width, y );\n\t\t\t}\n\t\t\tif( 0 < br ) {\n\t\t\t\tthis.arcTo( x + width, y + height, x, y + height, br );\n\t\t\t} else {\n\t\t\t\tthis.lineTo( x + width, y + height );\n\t\t\t}\n\t\t\tif( 0 < bl ) {\n\t\t\t\tthis.arcTo( x, y + height, x, y, bl );\n\t\t\t} else {\n\t\t\t\tthis.lineTo( x, y + height );\n\t\t\t}\n\t\t\tif( 0 < tl ) {\n\t\t\t\tthis.arcTo( x, y, x + width, y, tl );\n\t\t\t} else {\n\t\t\t\tthis.lineTo( x, y );\n\t\t\t}\n\t\t}\n\t\tthis.endFill();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DCanvas } from \"./d-canvas\";\nimport { DCanvasContainerOptions, DThemeCanvasContainer } from \"./d-canvas-container\";\nimport { DCanvasContainerViewParent } from \"./d-canvas-container-view\";\nimport { DCanvasContainerViewStopper } from \"./d-canvas-container-view-stopper\";\nimport { DDragMode } from \"./d-drag-mode\";\nimport { DMouseModifier } from \"./d-mouse-modifier\";\nimport { UtilDrag } from \"./util/util-drag\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport class DCanvasContainerViewDrag<\n\tCANVAS extends DBase = DCanvas,\n\tTHEME extends DThemeCanvasContainer = DThemeCanvasContainer,\n\tOPTIONS extends DCanvasContainerOptions<CANVAS, THEME> = DCanvasContainerOptions<CANVAS, THEME>\n> {\n\tprotected _parent: DCanvasContainerViewParent<CANVAS>;\n\tprotected _stopper: DCanvasContainerViewStopper;\n\tprotected _dragUtil?: UtilDrag;\n\tprotected _bind: boolean;\n\n\tconstructor(\n\t\tparent: DCanvasContainerViewParent<CANVAS>,\n\t\tstopper: DCanvasContainerViewStopper,\n\t\ttheme: THEME,\n\t\toptions: OPTIONS | undefined\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._stopper = stopper;\n\n\t\tconst drag = options && options.drag;\n\t\tconst mode = ( drag && drag.mode != null ?\n\t\t\t( utilIsString( drag.mode ) ? DDragMode[ drag.mode ] : drag.mode ) :\n\t\t\ttheme.getDragMode()\n\t\t);\n\t\tconst modifier = ( drag && drag.modifier != null ?\n\t\t\t( utilIsString( drag.modifier ) ? DMouseModifier[ drag.modifier ] : drag.modifier ) :\n\t\t\ttheme.getDragModifier()\n\t\t);\n\t\tconst duration = ( drag && drag.duration != null ?\n\t\t\tdrag.duration : {\n\t\t\t\tposition: theme.getDragDurationPosition(),\n\t\t\t\tscale: theme.getDragDurationScale()\n\t\t\t}\n\t\t);\n\t\tconst bind = (mode === DDragMode.TOUCH);\n\t\tthis._bind = bind;\n\t\tif( mode === DDragMode.ON || mode === DDragMode.TOUCH ) {\n\t\t\tthis._dragUtil = new UtilDrag({\n\t\t\t\ttarget: parent,\n\t\t\t\ttouch: bind,\n\t\t\t\tmodifier,\n\t\t\t\tchecker: drag && drag.checker,\n\t\t\t\teasing: {\n\t\t\t\t\tduration\n\t\t\t\t},\n\t\t\t\tbind,\n\t\t\t\ton: {\n\t\t\t\t\tstart: (): void => {\n\t\t\t\t\t\tthis._stopper.stop();\n\t\t\t\t\t},\n\t\t\t\t\tmove: ( dx: number, dy: number, x: number, y: number, ds: number ): void => {\n\t\t\t\t\t\tconst canvas = parent.canvas;\n\t\t\t\t\t\tif( canvas != null ) {\n\t\t\t\t\t\t\t// Scale\n\t\t\t\t\t\t\tconst oldScale = canvas.scale.y;\n\t\t\t\t\t\t\tconst newScale = stopper.toNormalizedScale( oldScale * ds );\n\t\t\t\t\t\t\tconst scaleRatio = newScale / oldScale;\n\n\t\t\t\t\t\t\t// Position\n\t\t\t\t\t\t\tconst cx = x - dx;\n\t\t\t\t\t\t\tconst cy = y - dy;\n\t\t\t\t\t\t\tconst position = canvas.position;\n\t\t\t\t\t\t\tconst newX = (position.x - cx) * scaleRatio + x;\n\t\t\t\t\t\t\tconst newY = (position.y - cy) * scaleRatio + y;\n\n\t\t\t\t\t\t\t// Update\n\t\t\t\t\t\t\tcanvas.scale.set( newScale, newScale );\n\t\t\t\t\t\t\tcanvas.position.set( newX, newY );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstop(): void {\n\t\tconst dragUtil = this._dragUtil;\n\t\tif( dragUtil != null ) {\n\t\t\tdragUtil.stop();\n\t\t}\n\t}\n\n\tonDown( e: interaction.InteractionEvent ): void {\n\t\tif( ! this._bind ) {\n\t\t\tconst dragUtil = this._dragUtil;\n\t\t\tif( dragUtil ) {\n\t\t\t\tdragUtil.onDown( e );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAnimationBase } from \"./d-animation-base\";\nimport { DBase } from \"./d-base\";\nimport { DCanvas } from \"./d-canvas\";\nimport { DCanvasContainerViewParent } from \"./d-canvas-container-view\";\nimport { DCanvasContainerViewStopper } from \"./d-canvas-container-view-stopper\";\n\nexport class DCanvasContainerViewTransform<CANVAS extends DBase = DCanvas> {\n\tprotected _parent: DCanvasContainerViewParent<CANVAS>;\n\tprotected _newX: number;\n\tprotected _newY: number;\n\tprotected _newScale: number;\n\tprotected _oldX: number;\n\tprotected _oldY: number;\n\tprotected _oldScale: number;\n\tprotected _animation: DAnimationBase;\n\tprotected _stopper: DCanvasContainerViewStopper;\n\tprotected _duration: number;\n\n\tconstructor( parent: DCanvasContainerViewParent<CANVAS>, stopper: DCanvasContainerViewStopper, duration: number ) {\n\t\tthis._parent = parent;\n\t\tthis._newScale = 1;\n\t\tthis._newX =  0;\n\t\tthis._newY = 0;\n\t\tthis._oldScale = 1;\n\t\tthis._oldX = 0;\n\t\tthis._oldY = 0;\n\t\tthis._animation = new DAnimationBase({\n\t\t\tonTime: ( time: number ): void => {\n\t\t\t\tthis.onTime( time );\n\t\t\t},\n\t\t\tduration\n\t\t});\n\t\tthis._stopper = stopper;\n\t\tthis._duration = duration;\n\t}\n\n\tprotected onTime( time: number ): void {\n\t\tconst w0 = 1 - time;\n\t\tconst w1 = time;\n\n\t\tconst scale = this._oldScale * w0 + this._newScale * w1;\n\t\tconst x = this._oldX * w0 + this._newX * w1;\n\t\tconst y = this._oldY * w0 + this._newY * w1;\n\n\t\tconst canvas = this._parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tcanvas.scale.set( scale, scale );\n\t\t\tcanvas.position.set( x, y );\n\t\t}\n\t}\n\n\tstart( canvas: CANVAS, newX: number, newY: number, newScale: number, duration?: number, stop?: boolean ): void {\n\t\tif( stop !== false ) {\n\t\t\tthis._stopper.stop();\n\t\t}\n\t\tif( duration == null ) {\n\t\t\tduration = this._duration;\n\t\t}\n\t\tif( duration <= 0 ) {\n\t\t\tcanvas.scale.set( newScale, newScale );\n\t\t\tcanvas.position.set( newX, newY );\n\t\t} else {\n\t\t\tconst position = canvas.position;\n\t\t\tconst scale = canvas.scale;\n\t\t\tthis._oldX = position.x;\n\t\t\tthis._oldY = position.y;\n\t\t\tthis._oldScale = scale.y;\n\n\t\t\tthis._newX = newX;\n\t\t\tthis._newY = newY;\n\t\t\tthis._newScale = newScale;\n\n\t\t\tthis._animation.duration = duration;\n\t\t\tthis._animation.start();\n\t\t}\n\t}\n\n\tstop(): void {\n\t\tthis._animation.stop();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, IPoint, Point } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DCanvas } from \"./d-canvas\";\nimport { DCanvasContainerOptions, DThemeCanvasContainer } from \"./d-canvas-container\";\nimport { DCanvasContainerViewDrag } from \"./d-canvas-container-view-drag\";\nimport { DCanvasContainerViewTransform } from \"./d-canvas-container-view-transform\";\nimport { DMouseModifier } from \"./d-mouse-modifier\";\nimport { DMouseModifiers } from \"./d-mouse-modifiers\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\nimport { UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\nexport interface DCanvasContainerViewParent<CANVAS extends DBase = DCanvas> extends DBase {\n\tcanvas: CANVAS | null;\n}\n\nexport type DCanvasContainerViewChecker =\n\t( e: WheelEvent | MouseEvent | TouchEvent, modifier: DMouseModifier, target: DBase ) => boolean;\n\nexport class DCanvasContainerView<\n\tCANVAS extends DBase = DCanvas,\n\tTHEME extends DThemeCanvasContainer = DThemeCanvasContainer,\n\tOPTIONS extends DCanvasContainerOptions<CANVAS, THEME> = DCanvasContainerOptions<CANVAS, THEME>\n> {\n\tprotected _parent: DCanvasContainerViewParent<CANVAS>;\n\n\tprotected _zoomPoint: Point;\n\tprotected _zoomMin: number;\n\tprotected _zoomMax: number;\n\n\tprotected _isWheelZoomEnabled: boolean;\n\tprotected _wheelZoomSpeed: number;\n\tprotected _wheelZoomModifier: DMouseModifier;\n\tprotected _wheelZoomChecker: DCanvasContainerViewChecker;\n\n\tprotected _isDblClickZoomEnabled: boolean;\n\tprotected _dblClickZoomSpeed: number;\n\tprotected _dblClickZoomModifier: DMouseModifier;\n\tprotected _dblClickZoomChecker: DCanvasContainerViewChecker;\n\tprotected _dblclickZoomDuration: number;\n\n\tprotected _isWheelTranslationEnabled: boolean;\n\tprotected _wheelTranslationSpeed: number;\n\tprotected _wheelTranslationModifier: DMouseModifier;\n\tprotected _wheelTranslationChecker: DCanvasContainerViewChecker;\n\n\tprotected _transform: DCanvasContainerViewTransform<CANVAS>;\n\tprotected _drag: DCanvasContainerViewDrag<CANVAS, THEME, OPTIONS>;\n\n\tconstructor( parent: DCanvasContainerViewParent<CANVAS>, theme: THEME, options: OPTIONS | undefined ) {\n\t\tthis._parent = parent;\n\n\t\t// Zoom\n\t\tconst zoom = options && options.zoom;\n\t\tthis._zoomPoint = new Point();\n\t\tthis._zoomMin = zoom && zoom.min != null ? zoom.min : theme.getZoomMin();\n\t\tthis._zoomMax = zoom && zoom.max != null ? zoom.max : theme.getZoomMax();\n\n\t\t// Zoom: Wheel\n\t\tconst wheelZoom = zoom && zoom.wheel;\n\t\tthis._isWheelZoomEnabled = ( wheelZoom && wheelZoom.enable != null ?\n\t\t\twheelZoom.enable : theme.isWheelZoomEnabled()\n\t\t);\n\t\tthis._wheelZoomSpeed = ( wheelZoom && wheelZoom.speed != null ?\n\t\t\twheelZoom.speed : theme.getWheelZoomSpeed()\n\t\t);\n\t\tthis._wheelZoomModifier = ( wheelZoom && wheelZoom.modifier != null ?\n\t\t\t( utilIsString( wheelZoom.modifier ) ?\n\t\t\t\tDMouseModifier[ wheelZoom.modifier ] : wheelZoom.modifier\n\t\t\t) :\n\t\t\ttheme.getWheelZoomModifier()\n\t\t);\n\t\tthis._wheelZoomChecker = (wheelZoom && wheelZoom.checker) || DMouseModifiers.match;\n\n\t\t// Zoom: Dbl click\n\t\tconst dblClickZoom = zoom && zoom.dblclick;\n\t\tthis._isDblClickZoomEnabled = ( dblClickZoom && dblClickZoom.enable != null ?\n\t\t\tdblClickZoom.enable : theme.isDblClickZoomEnabled()\n\t\t);\n\t\tthis._dblClickZoomSpeed = ( dblClickZoom && dblClickZoom.amount != null ?\n\t\t\tdblClickZoom.amount : theme.getDblClickZoomSpeed()\n\t\t);\n\t\tthis._dblClickZoomModifier = ( dblClickZoom && dblClickZoom.modifier != null ?\n\t\t\t( utilIsString( dblClickZoom.modifier ) ?\n\t\t\t\tDMouseModifier[ dblClickZoom.modifier ] : dblClickZoom.modifier\n\t\t\t) :\n\t\t\ttheme.getDblClickZoomModifier()\n\t\t);\n\t\tthis._dblClickZoomChecker = ( dblClickZoom && dblClickZoom.checker ) || DMouseModifiers.match;\n\t\tthis._dblclickZoomDuration = ( dblClickZoom && dblClickZoom.duration != null ?\n\t\t\tdblClickZoom.duration : theme.getDblClickZoomDuration()\n\t\t);\n\n\t\t// Translation: Wheel\n\t\tconst wheelTranslation = options && options.translation && options.translation.wheel;\n\t\tthis._isWheelTranslationEnabled = ( wheelTranslation && wheelTranslation.enable != null ?\n\t\t\twheelTranslation.enable : theme.isWheelTranslationEnabled()\n\t\t);\n\t\tthis._wheelTranslationSpeed = ( wheelTranslation && wheelTranslation.speed != null ?\n\t\t\twheelTranslation.speed : theme.getWheelTranslationSpeed()\n\t\t);\n\t\tthis._wheelTranslationModifier = ( wheelTranslation && wheelTranslation.modifier != null ?\n\t\t\t( utilIsString( wheelTranslation.modifier ) ?\n\t\t\t\tDMouseModifier[ wheelTranslation.modifier ] : wheelTranslation.modifier\n\t\t\t) :\n\t\t\ttheme.getWheelTranslationModifier()\n\t\t);\n\t\tthis._wheelTranslationChecker = ( wheelTranslation && wheelTranslation.checker ) || DMouseModifiers.match;\n\n\t\t// Drag\n\t\tthis._drag = new DCanvasContainerViewDrag<CANVAS, THEME, OPTIONS>( parent, this, theme, options );\n\n\t\t// Transform\n\t\tthis._transform = new DCanvasContainerViewTransform( parent, this, this._dblclickZoomDuration );\n\t}\n\n\tget drag(): DCanvasContainerViewDrag<CANVAS, THEME, OPTIONS> {\n\t\treturn this._drag;\n\t}\n\n\tstop(): void {\n\t\tthis._drag.stop();\n\t\tthis._transform.stop();\n\t}\n\n\treset( duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst newCanvasX = (parent.width - canvas.width) * 0.5;\n\t\t\tconst newCanvasY = (parent.height - canvas.height) * 0.5;\n\t\t\tthis._transform.start( canvas, newCanvasX, newCanvasY, 1, duration, stop );\n\t\t}\n\t}\n\n\tfit( duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst padding = parent.padding;\n\t\t\tconst width = parent.width;\n\t\t\tconst height = parent.height;\n\t\t\tconst canvasWidth = canvas.width;\n\t\t\tconst canvasHeight = canvas.height;\n\t\t\tconst canvasScaleX = (width - padding.getLeft() - padding.getRight()) / canvasWidth;\n\t\t\tconst canvasScaleY = (height - padding.getTop() - padding.getBottom()) / canvasHeight;\n\t\t\tconst newCanvasScale = this.toNormalizedScale( Math.min( canvasScaleX, canvasScaleY ) );\n\t\t\tconst newCanvasWidth = canvasWidth * newCanvasScale;\n\t\t\tconst newCanvasHeight = canvasHeight * newCanvasScale;\n\t\t\tconst newCanvasX = (width - newCanvasWidth) * 0.5;\n\t\t\tconst newCanvasY = (height - newCanvasHeight) * 0.5;\n\t\t\tthis._transform.start( canvas, newCanvasX, newCanvasY, newCanvasScale, duration, stop );\n\t\t}\n\t}\n\n\tzoomIn( duration?: number, stop?: boolean ): void {\n\t\tthis.zoom( this.scale * this._dblClickZoomSpeed, duration, stop );\n\t}\n\n\tzoomOut( duration?: number, stop?: boolean ): void {\n\t\tthis.zoom( this.scale / this._dblClickZoomSpeed, duration, stop );\n\t}\n\n\t/**\n\t *\n\t * @param x local x coordinate\n\t * @param y local y coordinate\n\t * @param scale scale\n\t */\n\tzoomAt( x: number, y: number, scale: number, duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\t// Canvas Scale\n\t\t\tconst oldCanvasScale = canvas.scale.y;\n\t\t\tconst newCanvasScale = this.toNormalizedScale( scale );\n\t\t\tconst canvasScaleRatio = newCanvasScale / oldCanvasScale;\n\n\t\t\t// Canvas Position\n\t\t\tconst newCanvasX = (canvas.x - x) * canvasScaleRatio + x;\n\t\t\tconst newCanvasY = (canvas.y - y) * canvasScaleRatio + y;\n\n\t\t\t// Canvas\n\t\t\tthis._transform.start( canvas, newCanvasX, newCanvasY, newCanvasScale, duration, stop );\n\t\t}\n\t}\n\n\tzoomAtGlobal( x: number, y: number, scale: number, duration?: number, stop?: boolean ): void {\n\t\tconst local = this._zoomPoint;\n\t\tlocal.set( x, y );\n\t\tthis.toLocal( local, local );\n\t\tthis.zoomAt( local.x, local.y, scale, duration, stop );\n\t}\n\n\tzoom( scale: number, duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tthis.zoomAt( parent.width * 0.5, parent.height * 0.5, scale, duration, stop );\n\t}\n\n\tget scale(): number {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\treturn canvas.scale.y;\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t}\n\n\tset scale( scale: number ) {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst newScale = this.toNormalizedScale( scale );\n\t\t\tcanvas.scale.set( newScale, newScale );\n\t\t}\n\t}\n\n\tmoveTo( x: number, y: number, duration?: number, stop?: boolean ): void {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._transform.start( canvas, x, y, canvas.scale.y, duration, stop );\n\t\t}\n\t}\n\n\tget position(): IPoint {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\treturn canvas.position;\n\t\t}\n\t\treturn new Point( 0, 0 );\n\t}\n\n\tset position( position: IPoint ) {\n\t\tconst parent = this._parent;\n\t\tconst canvas = parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tcanvas.position.set( position.x, position.y );\n\t\t}\n\t}\n\n\ttransform( newX: number, newY: number, newScale: number, duration?: number, stop?: boolean ): void {\n\t\tconst canvas = this._parent.canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis._transform.start( canvas, newX, newY, newScale, duration, stop );\n\t\t}\n\t}\n\n\ttoLocal( global: IPoint, local: IPoint, skipUpdate?: boolean ): IPoint {\n\t\treturn this._parent.toLocal( global, undefined, local, skipUpdate );\n\t}\n\n\ttoGlobal( local: IPoint, global: IPoint, skipUpdate?: boolean ): IPoint {\n\t\treturn this._parent.toGlobal( local, global, skipUpdate );\n\t}\n\n\ttoNormalizedScale( scale: number ): number {\n\t\treturn Math.min( this._zoomMax, Math.max( this._zoomMin, scale ) );\n\t}\n\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean {\n\t\tif( this._isWheelZoomEnabled &&\n\t\t\tthis._wheelZoomChecker( e, this._wheelZoomModifier, this._parent ) ) {\n\t\t\tif( deltas.deltaY !== 0 ) {\n\t\t\t\tconst speed = deltas.lowest * this._wheelZoomSpeed;\n\t\t\t\tconst scale = this.scale * ( 1 + deltas.deltaY * speed );\n\t\t\t\tthis.zoomAtGlobal( global.x, global.y, scale, 0 );\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif( this._isWheelTranslationEnabled &&\n\t\t\tthis._wheelTranslationChecker( e, this._wheelTranslationModifier, this._parent ) ) {\n\t\t\tconst parent = this._parent;\n\t\t\tconst canvas = parent.canvas;\n\t\t\tif( canvas != null ) {\n\t\t\t\tthis.stop();\n\t\t\t\tconst speed = deltas.lowest * this._wheelTranslationSpeed;\n\t\t\t\tcanvas.position.set(\n\t\t\t\t\tcanvas.x - deltas.deltaX * speed,\n\t\t\t\t\tcanvas.y + deltas.deltaY * speed\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tonDown( e: interaction.InteractionEvent ): void {\n\t\tthis._drag.onDown( e );\n\t}\n\n\tonDblClick( e: MouseEvent | TouchEvent, interactionManager: interaction.InteractionManager ): boolean {\n\t\tif( this._isDblClickZoomEnabled &&\n\t\t\tthis._dblClickZoomChecker( e, this._dblClickZoomModifier, this._parent ) ) {\n\t\t\tconst global = this._zoomPoint;\n\t\t\tUtilPointerEvent.toGlobal( e, interactionManager, global );\n\t\t\tconst scale = this.scale * this._dblClickZoomSpeed;\n\t\t\tthis.zoomAtGlobal( global.x, global.y, scale, this._dblclickZoomDuration );\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseOverflowMask } from \"./d-base-overflow-mask\";\nimport { DCanvas } from \"./d-canvas\";\nimport { DCanvasContainerView, DCanvasContainerViewChecker } from \"./d-canvas-container-view\";\nimport { DDragMode } from \"./d-drag-mode\";\nimport { DMouseModifier } from \"./d-mouse-modifier\";\nimport { UtilDragChecker } from \"./util/util-drag\";\nimport { UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\nexport interface DCanvasContainerOptions<\n\tCANVAS extends DBase = DCanvas,\n\tTHEME extends DThemeCanvasContainer = DThemeCanvasContainer\n> extends DBaseOptions<THEME> {\n\tmask?: boolean;\n\tcanvas?: CANVAS;\n\tdrag?: {\n\t\tmode?: (keyof typeof DDragMode) | DDragMode;\n\t\tmodifier?: (keyof typeof DMouseModifier) | DMouseModifier;\n\t\tchecker?: {\n\t\t\tstart?: UtilDragChecker,\n\t\t\tmove?: UtilDragChecker\n\t\t},\n\t\tduration?: number | {\n\t\t\tposition?: number,\n\t\t\tscale?: number\n\t\t};\n\t};\n\tzoom?: {\n\t\tmin?: number;\n\t\tmax?: number;\n\t\twheel?: {\n\t\t\tenable?: boolean;\n\t\t\tspeed?: number;\n\t\t\tmodifier?: (keyof typeof DMouseModifier) | DMouseModifier;\n\t\t\tchecker?: DCanvasContainerViewChecker;\n\t\t},\n\t\tdblclick?: {\n\t\t\tenable?: boolean;\n\t\t\tamount?: number;\n\t\t\tmodifier?: (keyof typeof DMouseModifier) | DMouseModifier;\n\t\t\tchecker?: DCanvasContainerViewChecker;\n\t\t\tduration?: number;\n\t\t}\n\t};\n\ttranslation?: {\n\t\twheel?: {\n\t\t\tenable?: boolean;\n\t\t\tspeed?: number;\n\t\t\tmodifier?: (keyof typeof DMouseModifier) | DMouseModifier;\n\t\t\tchecker?: DCanvasContainerViewChecker;\n\t\t}\n\t};\n}\n\nexport interface DThemeCanvasContainer extends DThemeBase {\n\tisOverflowMaskEnabled(): boolean;\n\tisWheelZoomEnabled(): boolean;\n\tisDblClickZoomEnabled(): boolean;\n\tisWheelTranslationEnabled(): boolean;\n\tgetWheelZoomSpeed(): number;\n\tgetWheelZoomModifier(): DMouseModifier;\n\tgetDblClickZoomSpeed(): number;\n\tgetDblClickZoomModifier(): DMouseModifier;\n\tgetDblClickZoomDuration(): number;\n\tgetWheelTranslationSpeed(): number;\n\tgetWheelTranslationModifier(): DMouseModifier;\n\tgetDragMode(): DDragMode;\n\tgetDragModifier(): DMouseModifier;\n\tgetDragDurationPosition(): number;\n\tgetDragDurationScale(): number;\n\tgetZoomMin(): number;\n\tgetZoomMax(): number;\n}\n\nconst isOverflowMaskEnabled = <\n\tCANVAS extends DBase,\n\tTHEME extends DThemeCanvasContainer\n>( theme: THEME, options?: DCanvasContainerOptions<CANVAS, THEME> ): boolean => {\n\tif( options && options.mask != null ) {\n\t\treturn options.mask;\n\t}\n\treturn theme.isOverflowMaskEnabled();\n};\n\nexport class DCanvasContainer<\n\tCANVAS extends DBase = DCanvas,\n\tTHEME extends DThemeCanvasContainer = DThemeCanvasContainer,\n\tOPTIONS extends DCanvasContainerOptions<CANVAS, THEME> = DCanvasContainerOptions<CANVAS, THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _canvas!: CANVAS | null;\n\tprotected _overflowMask!: DBaseOverflowMask | null;\n\tprotected _view!: DCanvasContainerView<CANVAS, THEME, OPTIONS>;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._canvas = null;\n\t\tconst theme = this.theme;\n\t\tthis._view = new DCanvasContainerView( this, theme, options );\n\n\t\t// Canvas\n\t\tthis.canvas = ( options && options.canvas ? options.canvas : null );\n\n\t\t// Overflow mask\n\t\tif( isOverflowMaskEnabled( theme, options ) ) {\n\t\t\tthis.mask = this.getOrCreateOverflowMask();\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DCanvasContainer\";\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tsuper.onResize( newWidth, newHeight, oldWidth, oldHeight );\n\t\tthis.updateContentSize( newWidth, newHeight, oldWidth, oldHeight );\n\t}\n\n\tget canvas(): CANVAS | null {\n\t\treturn this._canvas;\n\t}\n\n\tset canvas( canvas: CANVAS | null ) {\n\t\tconst previous = this._canvas;\n\t\tif( previous != null ) {\n\t\t\tthis._canvas = null;\n\t\t\tthis.removeChild( previous );\n\t\t\tthis.emit( \"unset\", previous, this );\n\t\t\tprevious.destroy();\n\t\t}\n\n\t\tthis._canvas = canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis.addChild( canvas );\n\t\t\tthis._view.reset( 0 );\n\t\t\tthis.emit( \"set\", canvas, this );\n\t\t} else {\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\tprotected getOrCreateOverflowMask(): DBaseOverflowMask {\n\t\tif( this._overflowMask == null ) {\n\t\t\tthis._overflowMask = new DBaseOverflowMask( this );\n\t\t\tthis.addReflowable( this._overflowMask );\n\t\t\tthis.toDirty();\n\t\t}\n\t\treturn this._overflowMask;\n\t}\n\n\tprotected updateContentSize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst canvasX = canvas.x + (newWidth - oldWidth) * 0.5;\n\t\t\tconst canvasY = canvas.y + (newHeight - oldHeight) * 0.5;\n\t\t\tcanvas.position.set( canvasX, canvasY );\n\t\t}\n\t}\n\n\tget view(): DCanvasContainerView<CANVAS, THEME, OPTIONS> {\n\t\treturn this._view;\n\t}\n\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean {\n\t\tconst vresult = this._view.onWheel( e, deltas, global );\n\t\tconst sresult = super.onWheel( e, deltas, global );\n\t\treturn vresult || sresult;\n\t}\n\n\tonDblClick( e: MouseEvent | TouchEvent, interactionManager: interaction.InteractionManager ): boolean {\n\t\tconst vresult = this._view.onDblClick( e, interactionManager );\n\t\tconst sresult = super.onDblClick( e, interactionManager );\n\t\treturn vresult || sresult;\n\t}\n\n\tprotected onDown( e: interaction.InteractionEvent ): void {\n\t\tthis._view.onDown( e );\n\t\tsuper.onDown( e );\n\t}\n\n\tdestroy(): void {\n\t\t// Overflow mask\n\t\tconst overflowMask = this._overflowMask;\n\t\tif( overflowMask != null ) {\n\t\t\tthis._overflowMask = null;\n\t\t\toverflowMask.destroy();\n\t\t}\n\t\tthis.mask = null;\n\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase,  DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DCanvasOptions<THEME extends DThemeCanvas = DThemeCanvas> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeCanvas extends DThemeBase {\n\n}\n\nexport class DCanvas<\n\tTHEME extends DThemeCanvas = DThemeCanvas,\n\tOPTIONS extends DCanvasOptions<THEME> = DCanvasOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DCanvas\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisOptions, DChartAxisPosition, DChartAxisTickPosition } from \"./d-chart-axis\";\nimport { EShapePointsStyle } from \"./shape/e-shape-points\";\nimport { EShapeStrokeLike } from \"./shape/e-shape-stroke\";\nimport { EShapeTextLike } from \"./shape/e-shape-text\";\nimport { EShapeTextAlignLike } from \"./shape/e-shape-text-align\";\nimport { EShapeTextAlignHorizontal } from \"./shape/e-shape-text-align-horizontal\";\nimport { EShapeTextAlignVertical } from \"./shape/e-shape-text-align-vertical\";\nimport { EShapeTextDirection } from \"./shape/e-shape-text-direction\";\nimport { EShapeTextOffsetLike } from \"./shape/e-shape-text-offset\";\nimport { EShapeTextOutlineLike } from \"./shape/e-shape-text-outline\";\nimport { EShapeBar } from \"./shape/variant/e-shape-bar\";\nimport { EShapeBarPosition } from \"./shape/variant/e-shape-bar-position\";\nimport { DeepPartial } from \"./util/deep-partial\";\nimport { NumberFormatter } from \"./util/number-formatter\";\nimport { NumberFormatters } from \"./util/number-formatters\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DThemeChartAxisBase {\n\tgetPosition(): DChartAxisPosition;\n\tgetPadding(): number;\n\n\tgetLabelAlignHorizontal( position: DChartAxisPosition ): EShapeTextAlignHorizontal;\n\tgetLabelAlignVertical( position: DChartAxisPosition ): EShapeTextAlignVertical;\n\tgetLabelPaddingHorizontal(): number;\n\tgetLabelPaddingVertical(): number;\n\tgetLabelDirection(): EShapeTextDirection;\n\n\tgetTickEnable(): boolean;\n\n\tgetMajorTickCount(): number;\n\tgetMajorTickSize(): number;\n\tgetMajorTickPosition(): DChartAxisTickPosition;\n\tgetMajorTickStyle(): EShapePointsStyle;\n\tgetMajorTickTextAlignHorizontal( position: DChartAxisPosition ): EShapeTextAlignHorizontal;\n\tgetMajorTickTextAlignVertical( position: DChartAxisPosition ): EShapeTextAlignVertical;\n\tgetMajorTickTextDirection(): EShapeTextDirection;\n\tgetMajorTickTextFormat(): string;\n\tgetMajorTickTextPaddingHorizontal(): number;\n\tgetMajorTickTextPaddingVertical(): number;\n\n\tgetMinorTickCount(): number;\n\tgetMinorTickSize(): number;\n\tgetMinorTickPosition(): DChartAxisTickPosition;\n\tgetMinorTickStyle(): EShapePointsStyle;\n}\n\nexport interface DChartAxisBaseTickMajorOptions {\n\tcount?: number;\n\tsize?: number;\n\tposition?: DChartAxisTickPosition | keyof typeof DChartAxisTickPosition;\n\tstyle?: EShapePointsStyle | keyof typeof EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n\ttext?: DeepPartial<EShapeTextLike>;\n}\n\nexport interface DChartAxisBaseTickMinorOptions {\n\tcount?: number;\n\tsize?: number;\n\tposition?: DChartAxisTickPosition | keyof typeof DChartAxisTickPosition;\n\tstyle?: EShapePointsStyle | keyof typeof EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n}\n\nexport interface DChartAxisBaseTickContainerOptions {\n\tenable?: boolean;\n\tposition?: DChartAxisTickPosition | keyof typeof DChartAxisTickPosition;\n\tstyle?: EShapePointsStyle | keyof typeof EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n\tmajor?: DChartAxisBaseTickMajorOptions;\n\tminor?: DChartAxisBaseTickMinorOptions;\n}\n\nexport interface DChartAxisBaseOptions extends DChartAxisOptions {\n\ttick?: DChartAxisBaseTickContainerOptions;\n\tlabel?: DeepPartial<EShapeTextLike>;\n\ttheme?: DThemeChartAxisBase;\n\tcoordinate?: number;\n\tpadding?: number;\n}\n\nexport interface DChartAxisBaseTickMajor {\n\tcount: number;\n\tsize: number;\n\tposition: EShapeBarPosition;\n\tstyle: EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n\ttext?: DeepPartial<EShapeTextLike>;\n\tformatter: NumberFormatter;\n\tshapes?: EShapeBar[];\n}\n\nexport interface DChartAxisBaseTickMinor {\n\tcount: number;\n\tsize: number;\n\tposition: EShapeBarPosition;\n\tstyle: EShapePointsStyle;\n\tstroke?: Partial<EShapeStrokeLike>;\n\tshapes?: EShapeBar[];\n}\n\nexport interface DChartAxisBaseTickContainer {\n\tenable: boolean;\n\tmajor: DChartAxisBaseTickMajor;\n\tminor: DChartAxisBaseTickMinor;\n}\n\nexport class DChartAxisBaseOptionParser {\n\tprotected _coordinateIndex: number;\n\tprotected _position: DChartAxisPosition;\n\tprotected _tick: DChartAxisBaseTickContainer;\n\tprotected _label: DeepPartial<EShapeTextLike> | undefined;\n\tprotected _padding: number;\n\n\tconstructor( theme: DThemeChartAxisBase, options?: DChartAxisBaseOptions ) {\n\t\tthis._coordinateIndex = ( options && options.coordinate != null ? options.coordinate : 0 );\n\t\tthis._position = this.toPosition( theme, options );\n\t\tthis._tick = this.toTickContainer( theme, options );\n\t\tthis._label = this.toLabel( theme, options );\n\t\tthis._padding = ( options && options.padding != null ? options.padding : theme.getPadding() );\n\t}\n\n\tget coordinateIndex(): number {\n\t\treturn this._coordinateIndex;\n\t}\n\n\tget padding(): number {\n\t\treturn this._padding;\n\t}\n\n\tget position(): DChartAxisPosition {\n\t\treturn this._position;\n\t}\n\n\tget tick(): DChartAxisBaseTickContainer {\n\t\treturn this._tick;\n\t}\n\n\tget label(): DeepPartial<EShapeTextLike> | undefined {\n\t\treturn this._label;\n\t}\n\n\tprotected toPosition(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseOptions\n\t): DChartAxisPosition {\n\t\tconst position = options && options.position;\n\t\tif( utilIsString( position ) ) {\n\t\t\treturn DChartAxisPosition[ position ];\n\t\t} else if( position != null ) {\n\t\t\treturn position;\n\t\t}\n\t\treturn theme.getPosition();\n\t}\n\n\tprotected toTickContainer(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseOptions\n\t): DChartAxisBaseTickContainer {\n\t\tconst tick = options && options.tick;\n\t\treturn {\n\t\t\tenable: ( tick && tick.enable != null ? tick.enable : theme.getTickEnable() ),\n\t\t\tmajor: this.toTickMajor( theme, tick ),\n\t\t\tminor: this.toMinorTick( theme, tick )\n\t\t};\n\t}\n\n\tprotected toTickMajor(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseTickContainerOptions\n\t): DChartAxisBaseTickMajor {\n\t\tconst major: DChartAxisBaseTickMajorOptions | undefined = options && options.major;\n\t\tconst position = ( major && major.position != null ? major.position :\n\t\t\t( options && options.position != null ? options.position : theme.getMajorTickPosition() )\n\t\t);\n\t\tconst style = ( major && major.style != null ? major.style :\n\t\t\t( options && options.style != null ? options.style : theme.getMajorTickStyle() )\n\t\t);\n\t\treturn {\n\t\t\tcount: ( major && major.count != null ? major.count : theme.getMajorTickCount() ),\n\t\t\tsize: ( major && major.size != null ? major.size : theme.getMajorTickSize() ),\n\t\t\tposition: this.toTickPosition( position ),\n\t\t\tstyle: ( utilIsString( style ) ? EShapePointsStyle[ style ] : style ),\n\t\t\tstroke: this.toTickStroke( theme, major && major.stroke, options && options.stroke ),\n\t\t\ttext: this.toMajorTickText( theme, major && major.text ),\n\t\t\tformatter: this.toMajorTickFormatter( theme, major ),\n\t\t\tshapes: undefined\n\t\t};\n\t}\n\n\tprotected toTickPosition(\n\t\ttickPosition: DChartAxisTickPosition | keyof typeof DChartAxisTickPosition\n\t): EShapeBarPosition {\n\t\tconst position = this._position;\n\t\tif( tickPosition === DChartAxisTickPosition.OUTSIDE || tickPosition === \"OUTSIDE\" ) {\n\t\t\tswitch( position ) {\n\t\t\tcase DChartAxisPosition.TOP:\n\t\t\t\treturn EShapeBarPosition.BOTTOM;\n\t\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\t\treturn EShapeBarPosition.TOP;\n\t\t\tcase DChartAxisPosition.LEFT:\n\t\t\t\treturn EShapeBarPosition.RIGHT;\n\t\t\tcase DChartAxisPosition.RIGHT:\n\t\t\t\treturn EShapeBarPosition.LEFT;\n\t\t\tdefault:\n\t\t\t\treturn EShapeBarPosition.TOP;\n\t\t\t}\n\t\t} else {\n\t\t\tswitch( position ) {\n\t\t\tcase DChartAxisPosition.TOP:\n\t\t\t\treturn EShapeBarPosition.TOP;\n\t\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\t\treturn EShapeBarPosition.BOTTOM;\n\t\t\tcase DChartAxisPosition.LEFT:\n\t\t\t\treturn EShapeBarPosition.LEFT;\n\t\t\tcase DChartAxisPosition.RIGHT:\n\t\t\t\treturn EShapeBarPosition.RIGHT;\n\t\t\tdefault:\n\t\t\t\treturn EShapeBarPosition.TOP;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected toMinorTick(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseTickContainerOptions\n\t): DChartAxisBaseTickMinor {\n\t\tconst minor: DChartAxisBaseTickMajorOptions | undefined = options && options.major;\n\t\tconst position = ( minor && minor.position != null ? minor.position :\n\t\t\t( options && options.position != null ? options.position : theme.getMinorTickPosition() )\n\t\t);\n\t\tconst style = ( minor && minor.style != null ? minor.style :\n\t\t\t( options && options.style != null ? options.style : theme.getMinorTickStyle() )\n\t\t);\n\t\treturn {\n\t\t\tcount: ( minor && minor.count != null ? minor.count : theme.getMinorTickCount() ),\n\t\t\tsize: ( minor && minor.size != null ? minor.size : theme.getMinorTickSize() ),\n\t\t\tposition: this.toTickPosition( position ),\n\t\t\tstyle: ( utilIsString( style ) ? EShapePointsStyle[ style ] : style ),\n\t\t\tstroke: this.toTickStroke( theme, minor && minor.stroke, options && options.stroke ),\n\t\t\tshapes: undefined\n\t\t};\n\t}\n\n\tprotected toTickStroke(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptionsA?: Partial<EShapeStrokeLike>,\n\t\toptionsB?: Partial<EShapeStrokeLike>\n\t): Partial<EShapeStrokeLike> | undefined {\n\t\tif( optionsA ) {\n\t\t\tif( optionsB ) {\n\t\t\t\treturn {\n\t\t\t\t\tenable: ( optionsA.enable != null ? optionsA.enable : optionsB.enable ),\n\t\t\t\t\tcolor: ( optionsA.color != null ? optionsA.color : optionsB.color ),\n\t\t\t\t\talpha: ( optionsA.alpha != null ? optionsA.alpha : optionsB.alpha ),\n\t\t\t\t\twidth: ( optionsA.width != null ? optionsA.width : optionsB.width ),\n\t\t\t\t\talign: ( optionsA.align != null ? optionsA.align : optionsB.align ),\n\t\t\t\t\tside: ( optionsA.side != null ? optionsA.side : optionsB.side )\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tenable: optionsA.enable,\n\t\t\t\t\tcolor: optionsA.color,\n\t\t\t\t\talpha: optionsA.alpha,\n\t\t\t\t\twidth: optionsA.width,\n\t\t\t\t\talign: optionsA.align,\n\t\t\t\t\tside: optionsA.side\n\t\t\t\t};\n\t\t\t}\n\t\t} else if( optionsB ) {\n\t\t\treturn {\n\t\t\t\tenable: optionsB.enable,\n\t\t\t\tcolor: optionsB.color,\n\t\t\t\talpha: optionsB.alpha,\n\t\t\t\twidth: optionsB.width,\n\t\t\t\talign: optionsB.align,\n\t\t\t\tside: optionsB.side\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toMajorTickFormatter(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseTickMajorOptions\n\t): NumberFormatter {\n\t\tconst format = ( options && options.text && options.text.value );\n\t\treturn NumberFormatters.create( format != null ?\n\t\t\tformat : theme.getMajorTickTextFormat()\n\t\t);\n\t}\n\n\tprotected toMajorTickText(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DeepPartial<EShapeTextLike>\n\t): DeepPartial<EShapeTextLike> | undefined {\n\t\toptions = options || {};\n\t\treturn {\n\t\t\tvalue: options.value,\n\t\t\tcolor: options.color,\n\t\t\talpha: options.alpha,\n\t\t\tfamily: options.family,\n\t\t\tsize: options.size,\n\t\t\tweight: options.weight,\n\t\t\talign: this.toMajorTickTextAlign( theme, options.align ),\n\t\t\toffset: this.toMajorTickTextOffset( theme, options.offset ),\n\t\t\tstyle: options.style,\n\t\t\toutline: this.toMajorTickTextOutline( theme, options.outline ),\n\t\t\tspacing: this.toMajorTickTextSpacing( theme, options.spacing ),\n\t\t\tdirection: this.toTickMajorTextDirection( theme, options.direction ),\n\t\t\tpadding: this.toMajorTickTextPadding( theme, options.padding ),\n\t\t\tclipping: options.clipping\n\t\t};\n\t}\n\n\tprotected toMajorTickTextOutline(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOutlineLike>\n\t): Partial<EShapeTextOutlineLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\tenable: options.enable,\n\t\t\t\tcolor: options.color,\n\t\t\t\talpha: options.alpha,\n\t\t\t\twidth: options.width\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toMajorTickTextAlign(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextAlignLike>\n\t): Partial<EShapeTextAlignLike> | undefined {\n\t\tconst position = this._position;\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: ( options.horizontal != null ? options.horizontal : theme.getMajorTickTextAlignHorizontal( position ) ),\n\t\t\t\tvertical: ( options.vertical != null ? options.vertical : theme.getMajorTickTextAlignVertical( position ) )\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\thorizontal: theme.getMajorTickTextAlignHorizontal( position ),\n\t\t\tvertical: theme.getMajorTickTextAlignVertical( position )\n\t\t};\n\t}\n\n\tprotected toMajorTickTextOffset(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: options.horizontal,\n\t\t\t\tvertical: options.vertical\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toMajorTickTextSpacing(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: options.horizontal,\n\t\t\t\tvertical: options.vertical\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toMajorTickTextPadding(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> {\n\t\treturn {\n\t\t\thorizontal: ( options && options.horizontal != null ?\n\t\t\t\toptions.horizontal : theme.getMajorTickTextPaddingHorizontal()\n\t\t\t),\n\t\t\tvertical: ( options && options.vertical != null ?\n\t\t\t\toptions.vertical : theme.getMajorTickTextPaddingVertical()\n\t\t\t)\n\t\t};\n\t}\n\n\tprotected toTickMajorTextDirection(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: EShapeTextDirection\n\t): EShapeTextDirection {\n\t\treturn ( options != null ? options : theme.getMajorTickTextDirection() );\n\t}\n\n\tprotected toLabel(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: DChartAxisBaseOptions\n\t): DeepPartial<EShapeTextLike> | undefined {\n\t\tconst label = options && options.label;\n\t\tif( label ) {\n\t\t\treturn {\n\t\t\t\tvalue: label.value,\n\t\t\t\tcolor: label.color,\n\t\t\t\talpha: label.alpha,\n\t\t\t\tfamily: label.family,\n\t\t\t\tsize: label.size,\n\t\t\t\tweight: label.weight,\n\t\t\t\talign: this.toLabelAlign( theme, label.align ),\n\t\t\t\toffset: this.toLabelOffset( theme, label.offset ),\n\t\t\t\tstyle: label.style,\n\t\t\t\toutline: this.toLabelOutline( theme, label.outline ),\n\t\t\t\tspacing: this.toLabelSpacing( theme, label.spacing ),\n\t\t\t\tdirection: this.toLabelDirection( theme, label.direction ),\n\t\t\t\tpadding: this.toLabelPadding( theme, label.padding ),\n\t\t\t\tclipping: label.clipping\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toLabelOutline(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOutlineLike>\n\t): Partial<EShapeTextOutlineLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\tenable: options.enable,\n\t\t\t\tcolor: options.color,\n\t\t\t\talpha: options.alpha,\n\t\t\t\twidth: options.width\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toLabelAlign(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextAlignLike>\n\t): Partial<EShapeTextAlignLike> | undefined {\n\t\tconst position = this._position;\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: ( options.horizontal != null ?\n\t\t\t\t\toptions.horizontal : theme.getLabelAlignHorizontal( position )\n\t\t\t\t),\n\t\t\t\tvertical: ( options.vertical != null ?\n\t\t\t\t\toptions.vertical : theme.getLabelAlignVertical( position )\n\t\t\t\t)\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\thorizontal: theme.getLabelAlignHorizontal( position ),\n\t\t\tvertical: theme.getLabelAlignVertical( position )\n\t\t};\n\t}\n\n\tprotected toLabelOffset(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: options.horizontal,\n\t\t\t\tvertical: options.vertical\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toLabelSpacing(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> | undefined {\n\t\tif( options ) {\n\t\t\treturn {\n\t\t\t\thorizontal: options.horizontal,\n\t\t\t\tvertical: options.vertical\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected toLabelPadding(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: Partial<EShapeTextOffsetLike>\n\t): Partial<EShapeTextOffsetLike> {\n\t\treturn {\n\t\t\thorizontal: ( options && options.horizontal != null ?\n\t\t\t\toptions.horizontal : theme.getLabelPaddingHorizontal()\n\t\t\t),\n\t\t\tvertical: ( options && options.vertical != null ?\n\t\t\t\toptions.vertical : theme.getLabelPaddingVertical()\n\t\t\t)\n\t\t};\n\t}\n\n\tprotected toLabelDirection(\n\t\ttheme: DThemeChartAxisBase,\n\t\toptions?: EShapeTextDirection\n\t): EShapeTextDirection {\n\t\treturn ( options != null ? options : theme.getLabelDirection() );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxis, DChartAxisPosition } from \"./d-chart-axis\";\nimport {\n\tDChartAxisBaseOptionParser, DChartAxisBaseOptions, DChartAxisBaseTickContainer, DThemeChartAxisBase\n} from \"./d-chart-axis-base-options\";\nimport { DChartAxisContainer } from \"./d-chart-axis-container\";\nimport { DChartCoordinate } from \"./d-chart-coordinate\";\nimport { EShapeDefaults } from \"./shape/e-shape-defaults\";\nimport { EShapePointsStyle } from \"./shape/e-shape-points\";\nimport { EShapeTextLike } from \"./shape/e-shape-text\";\nimport { EShapeBar } from \"./shape/variant/e-shape-bar\";\nimport { EShapeBarPosition } from \"./shape/variant/e-shape-bar-position\";\nimport { DThemes } from \"./theme/d-themes\";\nimport { DeepPartial } from \"./util/deep-partial\";\nimport { utilIsNaN } from \"./util/util-is-nan\";\n\nexport class DChartAxisBase implements DChartAxis {\n\tprotected _coordinateIndex: number;\n\tprotected _padding: number;\n\tprotected _position: DChartAxisPosition;\n\tprotected _container?: DChartAxisContainer;\n\tprotected _bar?: EShapeBar;\n\tprotected _index: number;\n\tprotected _tick: DChartAxisBaseTickContainer;\n\tprotected _majorTicks: Float64Array;\n\tprotected _minorTicks: Float64Array;\n\tprotected _label?: DeepPartial<EShapeTextLike>;\n\tprotected _theme: DThemeChartAxisBase;\n\n\tconstructor( options?: DChartAxisBaseOptions ) {\n\t\tconst theme = ( options && options.theme ) || this.getThemeDefault();\n\t\tthis._theme = theme;\n\t\tthis._index = 0;\n\n\t\tconst parser = new DChartAxisBaseOptionParser( theme, options );\n\t\tthis._coordinateIndex = parser.coordinateIndex;\n\t\tthis._padding = parser.padding;\n\t\tthis._position = parser.position;\n\t\tconst tick = parser.tick;\n\t\tthis._tick = tick;\n\t\tthis._label = parser.label;\n\t\tthis._majorTicks = new Float64Array( tick.major.count * 3 );\n\t\tthis._minorTicks = new Float64Array( (tick.major.count + 1) * tick.minor.count * 3 );\n\t}\n\n\tget position(): DChartAxisPosition {\n\t\treturn this._position;\n\t}\n\n\tprotected updateBar(): void {\n\t\tconst position = this._position;\n\t\tconst container = this._container;\n\t\tconst bar = this._bar;\n\t\tif( container && bar ) {\n\t\t\tconst plotAreaSize = container.plotArea.size;\n\t\t\tconst plotAreaSizeX = plotAreaSize.x;\n\t\t\tconst plotAreaSizeY = plotAreaSize.y;\n\t\t\tconst padding = this._padding * this._index;\n\t\t\tbar.disallowUploadedUpdate();\n\t\t\tswitch( position ) {\n\t\t\tcase DChartAxisPosition.TOP:\n\t\t\t\tbar.transform.position.set( plotAreaSizeX * 0.5, 0 - padding );\n\t\t\t\tbar.size.set( plotAreaSizeX, 0 );\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\t\tbar.transform.position.set( plotAreaSizeX * 0.5, plotAreaSizeY + padding );\n\t\t\t\tbar.size.set( plotAreaSizeX, 0 );\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.LEFT:\n\t\t\t\tbar.transform.position.set( 0 - padding, plotAreaSizeY * 0.5 );\n\t\t\t\tbar.size.set( 0, plotAreaSizeY );\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.RIGHT:\n\t\t\t\tbar.transform.position.set( plotAreaSizeX + padding, plotAreaSizeY * 0.5 );\n\t\t\t\tbar.size.set( 0, plotAreaSizeY );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbar.allowUploadedUpdate();\n\t\t}\n\t}\n\n\tupdateTicksX(\n\t\tcoordinate: DChartCoordinate,\n\t\tmajorShapes: EShapeBar[], minorShapes: EShapeBar[],\n\t\tshapePositionY: number\n\t): void {\n\t\tconst tick = this._tick;\n\t\tconst majorCount = tick.major.count;\n\t\tconst majorFormatter = tick.major.formatter;\n\t\tconst minorCountPerMajor = tick.minor.count;\n\t\tconst minorCount = (majorCount + 1) * minorCountPerMajor;\n\t\tconst majorTicks = this._majorTicks;\n\t\tconst minorTicks = this._minorTicks;\n\t\tcoordinate.ticks( majorCount, minorCountPerMajor, minorCount, majorTicks, minorTicks );\n\n\t\tfor( let i = 0; i < majorCount; ++i ) {\n\t\t\tconst majorShape = majorShapes[ i ];\n\t\t\tconst imajorTick = i * 3;\n\t\t\tconst majorTickPosition = majorTicks[ imajorTick + 0 ];\n\t\t\tconst majorTickProjectedPosition = majorTicks[ imajorTick + 1 ];\n\t\t\tconst majorTickStep = majorTicks[ imajorTick + 2 ];\n\t\t\tif( ! utilIsNaN( majorTickPosition ) ) {\n\t\t\t\tmajorShape.disallowUploadedUpdate();\n\t\t\t\tmajorShape.visible = true;\n\t\t\t\tmajorShape.transform.position.set( majorTickProjectedPosition, shapePositionY );\n\t\t\t\tmajorShape.text.value = majorFormatter.format( majorTickPosition, majorTickStep );\n\t\t\t\tmajorShape.allowUploadedUpdate();\n\t\t\t} else {\n\t\t\t\tmajorShape.visible = false;\n\t\t\t}\n\t\t}\n\n\t\tfor( let i = 0; i < minorCount; ++i ) {\n\t\t\tconst minorShape = minorShapes[ i ];\n\t\t\tconst iminorTick = i * 3;\n\t\t\tconst minorTickPosition = minorTicks[ iminorTick + 0 ];\n\t\t\tconst minorTickProjectedPosition = minorTicks[ iminorTick + 1 ];\n\t\t\tif( ! utilIsNaN( minorTickPosition ) ) {\n\t\t\t\tminorShape.disallowUploadedUpdate();\n\t\t\t\tminorShape.visible = true;\n\t\t\t\tminorShape.transform.position.set( minorTickProjectedPosition, shapePositionY );\n\t\t\t\tminorShape.allowUploadedUpdate();\n\t\t\t} else {\n\t\t\t\tminorShape.visible = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateTicksY(\n\t\tcoordinate: DChartCoordinate,\n\t\tmajorShapes: EShapeBar[], minorShapes: EShapeBar[],\n\t\tshapePositionX: number\n\t): void {\n\t\tconst tick = this._tick;\n\t\tconst majorCount = tick.major.count;\n\t\tconst majorFormatter = tick.major.formatter;\n\t\tconst minorCountPerMajor = tick.minor.count;\n\t\tconst minorCount = (majorCount + 1) * minorCountPerMajor;\n\t\tconst majorTicks = this._majorTicks;\n\t\tconst minorTicks = this._minorTicks;\n\t\tcoordinate.ticks( majorCount, minorCountPerMajor, minorCount, majorTicks, minorTicks );\n\n\t\tfor( let i = 0; i < majorCount; ++i ) {\n\t\t\tconst majorShape = majorShapes[ i ];\n\t\t\tconst imajorTick = i * 3;\n\t\t\tconst majorTickPosition = majorTicks[ imajorTick + 0 ];\n\t\t\tconst majorTickProjectedPosition = majorTicks[ imajorTick + 1 ];\n\t\t\tconst majorTickStep = majorTicks[ imajorTick + 2 ];\n\t\t\tif( ! utilIsNaN( majorTickPosition ) ) {\n\t\t\t\tmajorShape.disallowUploadedUpdate();\n\t\t\t\tmajorShape.visible = true;\n\t\t\t\tmajorShape.transform.position.set( shapePositionX, majorTickProjectedPosition );\n\t\t\t\tmajorShape.text.value = majorFormatter.format( majorTickPosition, majorTickStep );\n\t\t\t\tmajorShape.allowUploadedUpdate();\n\t\t\t} else {\n\t\t\t\tmajorShape.visible = false;\n\t\t\t}\n\t\t}\n\n\t\tfor( let i = 0; i < minorCount; ++i ) {\n\t\t\tconst minorShape = minorShapes[ i ];\n\t\t\tconst iminorTick = i * 3;\n\t\t\tconst minorTickPosition = minorTicks[ iminorTick + 0 ];\n\t\t\tconst minorTickProjectedPosition = minorTicks[ iminorTick + 1 ];\n\t\t\tif( ! utilIsNaN( minorTickPosition ) ) {\n\t\t\t\tminorShape.disallowUploadedUpdate();\n\t\t\t\tminorShape.visible = true;\n\t\t\t\tminorShape.transform.position.set( shapePositionX, minorTickProjectedPosition );\n\t\t\t\tminorShape.allowUploadedUpdate();\n\t\t\t} else {\n\t\t\t\tminorShape.visible = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateTicks(): void {\n\t\tconst tick = this._tick;\n\t\tconst majorShapes = tick.major.shapes;\n\t\tconst minorShapes = tick.minor.shapes;\n\t\tconst container = this._container;\n\t\tif( majorShapes && minorShapes && container ) {\n\t\t\tconst plotArea = container.plotArea;\n\t\t\tconst coordinateIndex = this._coordinateIndex;\n\t\t\tlet coordinate: DChartCoordinate | null;\n\t\t\tconst padding = this._padding * this._index;\n\t\t\tswitch( this._position ) {\n\t\t\tcase DChartAxisPosition.TOP:\n\t\t\t\tcoordinate = plotArea.coordinate.x.get( coordinateIndex );\n\t\t\t\tif( coordinate ) {\n\t\t\t\t\tthis.updateTicksX(\n\t\t\t\t\t\tcoordinate,\n\t\t\t\t\t\tmajorShapes, minorShapes,\n\t\t\t\t\t\t0 - padding\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.BOTTOM:\n\t\t\t\tcoordinate = plotArea.coordinate.x.get( coordinateIndex );\n\t\t\t\tif( coordinate ) {\n\t\t\t\t\tthis.updateTicksX(\n\t\t\t\t\t\tcoordinate,\n\t\t\t\t\t\tmajorShapes, minorShapes,\n\t\t\t\t\t\tplotArea.size.y + padding\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.LEFT:\n\t\t\t\tcoordinate = plotArea.coordinate.y.get( coordinateIndex );\n\t\t\t\tif( coordinate ) {\n\t\t\t\t\tthis.updateTicksY(\n\t\t\t\t\t\tcoordinate,\n\t\t\t\t\t\tmajorShapes, minorShapes,\n\t\t\t\t\t\t0 - padding\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase DChartAxisPosition.RIGHT:\n\t\t\t\tcoordinate = plotArea.coordinate.y.get( coordinateIndex );\n\t\t\t\tif( coordinate ) {\n\t\t\t\t\tthis.updateTicksY(\n\t\t\t\t\t\tcoordinate,\n\t\t\t\t\t\tmajorShapes, minorShapes,\n\t\t\t\t\t\tplotArea.size.x + padding\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tbind( container: DChartAxisContainer, index: number ): void {\n\t\tthis._container = container;\n\t\tthis._index = index;\n\t\tconst tickShapeContainer = container.container;\n\n\t\t// Bar\n\t\tlet bar = this._bar;\n\t\tif( ! bar ) {\n\t\t\tconst position = this._position;\n\t\t\tconst barPosition = ( position === DChartAxisPosition.LEFT || position === DChartAxisPosition.RIGHT ?\n\t\t\t\tEShapeBarPosition.TOP : EShapeBarPosition.LEFT\n\t\t\t);\n\t\t\tbar = new EShapeBar( barPosition, -1, EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE );\n\t\t\tbar.text.copy( this._label );\n\t\t\tthis._bar = bar;\n\t\t}\n\t\tbar.attach( container.container );\n\n\t\t// Major ticks\n\t\tconst tick = this._tick;\n\t\tconst tickMajor = tick.major;\n\t\tlet tickMajorShapes = tickMajor.shapes;\n\t\tif( ! tickMajorShapes && tick.enable ) {\n\t\t\ttickMajorShapes = [];\n\t\t\ttickMajor.shapes = tickMajorShapes;\n\t\t\tconst tickMajorCount = tickMajor.count;\n\t\t\tconst tickMajorSize = tickMajor.size;\n\t\t\tconst tickMajorPosition = tickMajor.position;\n\t\t\tconst tickMajorStyle = tickMajor.style;\n\t\t\tfor( let i = 0; i < tickMajorCount; ++i ) {\n\t\t\t\tconst tickMajorShape = new EShapeBar(\n\t\t\t\t\ttickMajorPosition,\n\t\t\t\t\ttickMajorSize,\n\t\t\t\t\tEShapeDefaults.STROKE_WIDTH,\n\t\t\t\t\ttickMajorStyle\n\t\t\t\t);\n\t\t\t\ttickMajorShape.stroke.copy( tickMajor.stroke );\n\t\t\t\ttickMajorShape.text.copy( tickMajor.text );\n\t\t\t\ttickMajorShape.size.set( 0, 0 );\n\t\t\t\ttickMajorShapes.push( tickMajorShape );\n\t\t\t}\n\t\t}\n\t\tif( tickMajorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMajorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMajorShapes[ i ].attach( tickShapeContainer );\n\t\t\t}\n\t\t}\n\n\t\t// Minor ticks\n\t\tconst tickMinor = tick.minor;\n\t\tlet tickMinorShapes = tickMinor.shapes;\n\t\tif( ! tickMinorShapes && tick.enable ) {\n\t\t\ttickMinorShapes = [];\n\t\t\ttickMinor.shapes = tickMinorShapes;\n\t\t\tconst tickMinorCount = tickMinor.count;\n\t\t\tconst tickMinorSize = tickMinor.size;\n\t\t\tconst tickMinorPosition = tickMinor.position;\n\t\t\tconst tickMinorStyle = tickMinor.style;\n\t\t\tfor( let i = 0, imax = ( tickMajor.count + 1 ) * tickMinorCount; i < imax; ++i ) {\n\t\t\t\tconst tickMinorShape = new EShapeBar(\n\t\t\t\t\ttickMinorPosition,\n\t\t\t\t\ttickMinorSize,\n\t\t\t\t\tEShapeDefaults.STROKE_WIDTH,\n\t\t\t\t\ttickMinorStyle\n\t\t\t\t);\n\t\t\t\ttickMinorShape.stroke.copy( tickMinor.stroke );\n\t\t\t\ttickMinorShape.size.set( 0, 0 );\n\t\t\t\ttickMinorShapes.push( tickMinorShape );\n\t\t\t}\n\t\t}\n\t\tif( tickMinorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMinorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMinorShapes[ i ].attach( tickShapeContainer );\n\t\t\t}\n\t\t}\n\t}\n\n\tunbind(): void {\n\t\t// Bar\n\t\tconst bar = this._bar;\n\t\tif( bar ) {\n\t\t\tbar.detach();\n\t\t}\n\n\t\t// Major ticks\n\t\tconst tick = this._tick;\n\t\tconst tickMajorShapes = tick.major.shapes;\n\t\tif( tickMajorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMajorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMajorShapes[ i ].detach();\n\t\t\t}\n\t\t}\n\n\t\t// Minor ticks\n\t\tconst tickMinorShapes = tick.minor.shapes;\n\t\tif( tickMinorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMinorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMinorShapes[ i ].detach();\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tthis._container = undefined;\n\t}\n\n\tupdate(): void {\n\t\tthis.updateBar();\n\t\tthis.updateTicks();\n\t}\n\n\tdestroy(): void {\n\t\t// Bar\n\t\tconst bar = this._bar;\n\t\tif( bar ) {\n\t\t\tbar.destroy();\n\t\t}\n\n\t\t// Major ticks\n\t\tconst tick = this._tick;\n\t\tconst tickMajorShapes = tick.major.shapes;\n\t\tif( tickMajorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMajorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMajorShapes[ i ].destroy();\n\t\t\t}\n\t\t}\n\n\t\t// Minor ticks\n\t\tconst tickMinorShapes = tick.minor.shapes;\n\t\tif( tickMinorShapes ) {\n\t\t\tfor( let i = 0, imax = tickMinorShapes.length; i < imax; ++i ) {\n\t\t\t\ttickMinorShapes[ i ].destroy();\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\tthis._container = undefined;\n\t}\n\n\tprotected getThemeDefault(): DThemeChartAxisBase {\n\t\treturn DThemes.getInstance().get( this.getType() );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DChartAxisBase\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxis, DChartAxisPosition } from \"./d-chart-axis\";\nimport { DChartAxisContainer, DChartAxisContainerOptions } from \"./d-chart-axis-container\";\nimport { DChartPlotArea } from \"./d-chart-plot-area\";\nimport { EShapeContainer } from \"./shape/e-shape-container\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nexport class DChartAxisContainerImpl implements DChartAxisContainer {\n\tprotected _plotArea: DChartPlotArea;\n\tprotected _container: EShapeContainer;\n\tprotected _list: Map<DChartAxisPosition, DChartAxis[]>;\n\n\tconstructor( plotArea: DChartPlotArea, options?: DChartAxisContainerOptions ) {\n\t\tthis._plotArea = plotArea;\n\t\tthis._container = new EShapeContainer();\n\n\t\tthis._list = new Map<DChartAxisPosition, DChartAxis[]>();\n\t\tconst list = options && options.list;\n\t\tif( list ) {\n\t\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\t\tthis.add( list[ i ] );\n\t\t\t}\n\t\t}\n\t}\n\n\tget container(): EShapeContainer {\n\t\treturn this._container;\n\t}\n\n\tget plotArea(): DChartPlotArea {\n\t\treturn this._plotArea;\n\t}\n\n\tadd( axis: DChartAxis ): void {\n\t\tconst list = this._list;\n\t\tlet axes = list.get( axis.position );\n\t\tif( axes == null ) {\n\t\t\taxes = [];\n\t\t\tlist.set( axis.position, axes );\n\t\t}\n\t\taxes.push( axis );\n\t\taxis.bind( this, axes.length - 1 );\n\t}\n\n\tget( position: DChartAxisPosition, index: number ): DChartAxis | null {\n\t\tconst list = this._list;\n\t\tconst axes = list.get( position );\n\t\tif( axes ) {\n\t\t\tif( 0 <= index && index < axes.length ) {\n\t\t\t\treturn axes[ index ];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tindexOf( axis: DChartAxis ): number {\n\t\tconst list = this._list;\n\t\tconst axes = list.get( axis.position );\n\t\tif( axes ) {\n\t\t\treturn axes.indexOf( axis );\n\t\t}\n\t\treturn -1;\n\t}\n\n\tremove( axis: DChartAxis ): DChartAxis | null;\n\tremove( position: DChartAxisPosition, index: number ): DChartAxis | null;\n\tremove( axisOrPosition: DChartAxis | DChartAxisPosition, indexOrUndefined?: number ): DChartAxis | null {\n\t\tconst list = this._list;\n\t\tif( utilIsNumber( axisOrPosition ) ) {\n\t\t\tconst position: DChartAxisPosition = axisOrPosition;\n\t\t\tconst index = indexOrUndefined!;\n\t\t\tconst axes = list.get( position );\n\t\t\tif( axes ) {\n\t\t\t\tif( 0 <= index && index < axes.length ) {\n\t\t\t\t\tconst removed = axes.splice( index, 1 )[ 0 ];\n\t\t\t\t\tremoved.unbind();\n\t\t\t\t\tremoved.destroy();\n\t\t\t\t\treturn removed;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst axis = axisOrPosition;\n\t\t\tconst position: DChartAxisPosition = axis.position;\n\t\t\tconst axes = list.get( position );\n\t\t\tif( axes ) {\n\t\t\t\tconst index = axes.indexOf( axisOrPosition );\n\t\t\t\tif( 0 <= index ) {\n\t\t\t\t\taxes.splice( index, 1 );\n\t\t\t\t\taxis.unbind();\n\t\t\t\t\taxis.destroy();\n\t\t\t\t\treturn axis;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear( position: DChartAxisPosition ): this {\n\t\tconst list = this._list;\n\t\tconst axes = list.get( position );\n\t\tif( axes ) {\n\t\t\tfor( let i = 0, imax = axes.length; i < imax; ++i ) {\n\t\t\t\taxes[ i ].destroy();\n\t\t\t}\n\t\t\taxes.length = 0;\n\t\t}\n\t\treturn this;\n\t}\n\n\tsize( position: DChartAxisPosition ): number {\n\t\tconst list = this._list;\n\t\tconst axes = list.get( position );\n\t\tif( axes ) {\n\t\t\treturn axes.length;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tupdate(): void {\n\t\tthis._list.forEach(( axes: DChartAxis[] ): void => {\n\t\t\tfor( let i = 0, imax = axes.length; i < imax; ++i ) {\n\t\t\t\taxes[ i ].update();\n\t\t\t}\n\t\t});\n\t}\n\n\tdestroy(): void {\n\t\tthis._list.forEach(( axes: DChartAxis[] ): void => {\n\t\t\tfor( let i = 0, imax = axes.length; i < imax; ++i ) {\n\t\t\t\taxes[ i ].destroy();\n\t\t\t}\n\t\t\taxes.length = 0;\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisBase } from \"./d-chart-axis-base\";\n\nexport class DChartAxisX extends DChartAxisBase {\n\tprotected getType(): string {\n\t\treturn \"DChartAxisX\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartAxisBase } from \"./d-chart-axis-base\";\n\nexport class DChartAxisY extends DChartAxisBase {\n\tprotected getType(): string {\n\t\treturn \"DChartAxisY\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { UtilRgb } from \"./util/util-rgb\";\n\nconst DCHART_COLOR_SET_1 = [\n\t0x10b7e3,\n\t0xfe5420,\n\t0xf0c312,\n\t0x1c5d71\n];\n\nconst DCHART_COLOR_SET_2 = [\n\tDCHART_COLOR_SET_1[ 0 ],\n\tUtilRgb.brighten( DCHART_COLOR_SET_1[ 0 ], 0.4 ),\n\n\tDCHART_COLOR_SET_1[ 1 ],\n\tUtilRgb.brighten( DCHART_COLOR_SET_1[ 1 ], 0.4 ),\n\n\tDCHART_COLOR_SET_1[ 2 ],\n\tUtilRgb.brighten( DCHART_COLOR_SET_1[ 2 ], 0.4 ),\n\n\tDCHART_COLOR_SET_1[ 3 ],\n\tUtilRgb.brighten( DCHART_COLOR_SET_1[ 3 ], 0.4 )\n];\n\nexport const DChartColorSet1 = ( index: number ): number => {\n\treturn DCHART_COLOR_SET_1[ index % DCHART_COLOR_SET_1.length ];\n};\n\nexport const DChartColorSet2 = ( index: number ): number => {\n\treturn DCHART_COLOR_SET_2[ index % DCHART_COLOR_SET_2.length ];\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartCoordinate, DChartCoordinateDirection } from \"./d-chart-coordinate\";\nimport { DChartCoordinateContainer } from \"./d-chart-coordinate-container\";\nimport { DChartCoordinateContainerSub } from \"./d-chart-coordinate-container-sub\";\nimport { utilIsNumber } from \"./util\";\n\nexport class DChartCoordinateContainerSubImpl implements DChartCoordinateContainerSub {\n\tprotected _list: DChartCoordinate[];\n\tprotected _direction: DChartCoordinateDirection;\n\tprotected _container: DChartCoordinateContainer;\n\n\tconstructor( container: DChartCoordinateContainer, direction: DChartCoordinateDirection ) {\n\t\tthis._container = container;\n\t\tthis._direction = direction;\n\t\tthis._list = [];\n\t}\n\n\tget container(): DChartCoordinateContainer {\n\t\treturn this._container;\n\t}\n\n\tadd( coordinate: DChartCoordinate, index?: number ): this {\n\t\tconst list = this._list;\n\t\tif( index == null ) {\n\t\t\tlist.push( coordinate );\n\t\t} else if( 0 <= index && index < list.length ) {\n\t\t\tlist.splice( index, 0, coordinate );\n\t\t} else {\n\t\t\tlist.push( coordinate );\n\t\t}\n\t\tcoordinate.bind( this, this._direction );\n\t\treturn this;\n\t}\n\n\tget( index: number ): DChartCoordinate | null {\n\t\tconst list = this._list;\n\t\tif( 0 <= index && index < list.length ) {\n\t\t\treturn list[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tindexOf( coordinate: DChartCoordinate ): number {\n\t\treturn this._list.indexOf( coordinate );\n\t}\n\n\tremove( coordinate: DChartCoordinate ): DChartCoordinate | null;\n\tremove( index: number ): DChartCoordinate | null;\n\tremove( coordinateOrIndex: DChartCoordinate | number ): DChartCoordinate | null {\n\t\tconst list = this._list;\n\t\tif( utilIsNumber( coordinateOrIndex ) ) {\n\t\t\tconst index = coordinateOrIndex;\n\t\t\tif( 0 <= index && index < list.length ) {\n\t\t\t\tconst removed = list.splice( index, 1 )[ 0 ];\n\t\t\t\tremoved.unbind();\n\t\t\t\treturn removed;\n\t\t\t}\n\t\t} else {\n\t\t\tconst coordinate = coordinateOrIndex;\n\t\t\tconst index = list.indexOf( coordinate );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tlist.splice( index, 1 );\n\t\t\t\tcoordinate.unbind();\n\t\t\t\treturn coordinate;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear(): this {\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tlist[ i ].unbind();\n\t\t}\n\t\tlist.length = 0;\n\t\treturn this;\n\t}\n\n\tdestroy(): this {\n\t\treturn this.clear();\n\t}\n\n\tsize(): number {\n\t\treturn this._list.length;\n\t}\n\n\tfit(): this {\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tlist[ i ].fit();\n\t\t}\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\nimport { DChartAxisContainer, DChartAxisContainerOptions } from \"./d-chart-axis-container\";\nimport { DChartCoordinateContainer, DChartCoordinateContainerOptions } from \"./d-chart-coordinate-container\";\nimport { DChartSeriesContainer, DChartSeriesContainerOptions } from \"./d-chart-series-container\";\nimport { EShapeContainer } from \"./shape/e-shape-container\";\n\nexport enum DChartPlotAreaFitTarget {\n\tNONE\t= 0,\n\tDOMAIN\t= 1,\n\tRANGE\t= 2,\n\tBOTH\t= DOMAIN | RANGE\n}\n\nexport interface DChartPlotAreaOptions {\n\twidth?: number;\n\theight?: number;\n\tcoordinate?: DChartCoordinateContainerOptions;\n\tseries?: DChartSeriesContainerOptions;\n\taxis?: DChartAxisContainerOptions;\n}\n\nexport interface DChartPlotArea {\n\treadonly series: DChartSeriesContainer;\n\treadonly coordinate: DChartCoordinateContainer;\n\treadonly container: EShapeContainer;\n\treadonly size: IPoint;\n\treadonly axis: DChartAxisContainer;\n\n\tdestroy(): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartCoordinateDirection } from \"./d-chart-coordinate\";\nimport { DChartCoordinateContainer, DChartCoordinateContainerOptions } from \"./d-chart-coordinate-container\";\nimport { DChartCoordinateContainerSub } from \"./d-chart-coordinate-container-sub\";\nimport { DChartCoordinateContainerSubImpl } from \"./d-chart-coordinate-container-sub-impl\";\nimport { DChartPlotArea } from \"./d-chart-plot-area\";\nimport { utilIsArray } from \"./util/util-is-array\";\n\nexport class DChartCoordinateContainerImpl implements DChartCoordinateContainer {\n\tprotected _x: DChartCoordinateContainerSub;\n\tprotected _y: DChartCoordinateContainerSub;\n\tprotected _plotArea: DChartPlotArea;\n\n\tconstructor( plotArea: DChartPlotArea, options?: DChartCoordinateContainerOptions ) {\n\t\tthis._plotArea = plotArea;\n\t\tconst x = this._x = new DChartCoordinateContainerSubImpl( this, DChartCoordinateDirection.X );\n\t\tconst y = this._y = new DChartCoordinateContainerSubImpl( this, DChartCoordinateDirection.Y );\n\t\tif( options ) {\n\t\t\tconst cxs = options.x;\n\t\t\tif( cxs ) {\n\t\t\t\tif( utilIsArray( cxs ) ) {\n\t\t\t\t\tfor( let i = 0, imax = cxs.length; i < imax; ++i ) {\n\t\t\t\t\t\tx.add( cxs[ i ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tx.add( cxs );\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst cys = options.y;\n\t\t\tif( cys ) {\n\t\t\t\tif( utilIsArray( cys ) ) {\n\t\t\t\t\tfor( let i = 0, imax = cys.length; i < imax; ++i ) {\n\t\t\t\t\t\ty.add( cys[ i ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ty.add( cys );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget x(): DChartCoordinateContainerSub {\n\t\treturn this._x;\n\t}\n\n\tget y(): DChartCoordinateContainerSub {\n\t\treturn this._y;\n\t}\n\n\tget plotArea(): DChartPlotArea {\n\t\treturn this._plotArea;\n\t}\n\n\tfit(): this {\n\t\tthis._x.fit();\n\t\tthis._y.fit();\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartRegion } from \"./d-chart-region\";\n\nexport class DChartRegionImplObservable implements DChartRegion {\n\tprotected _from: number;\n\tprotected _to: number;\n\tprotected _onChange: () => void;\n\n\tconstructor( from: number, to: number, onChange: () => void ) {\n\t\tthis._from = from;\n\t\tthis._to = to;\n\t\tthis._onChange = onChange;\n\t}\n\n\tget from(): number {\n\t\treturn this._from;\n\t}\n\n\tset from( from: number ) {\n\t\tthis.set( from, undefined );\n\t}\n\n\tget to(): number {\n\t\treturn this._to;\n\t}\n\n\tset to( to: number ) {\n\t\tthis.set( undefined, to );\n\t}\n\n\tset( from?: number, to?: number ): this {\n\t\tlet isChanged = false;\n\n\t\tif( from != null && this._from !== from ) {\n\t\t\tthis._from = from;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( to != null && this._to !== to ) {\n\t\t\tthis._to = to;\n\t\t\tisChanged = true;\n\t\t}\n\n\t\tif( isChanged ) {\n\t\t\tthis._onChange();\n\t\t}\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartCoordinate, DChartCoordinateDirection } from \"./d-chart-coordinate\";\nimport { DChartCoordinateContainerSub } from \"./d-chart-coordinate-container-sub\";\nimport { DChartRegion } from \"./d-chart-region\";\nimport { DChartRegionImplObservable } from \"./d-chart-region-impl-observable\";\nimport { DThemes } from \"./theme\";\nimport { utilIsNaN } from \"./util/util-is-nan\";\n\nexport interface DThemeChartCoordinateLinear {\n\tgetPadding(): number;\n\tisZero( value: number ): boolean;\n\ttoStepScale( scale: number ): number;\n}\n\nexport interface DChartCoordinateLinearOptions {\n\tpadding?: number;\n\tdomain?: {\n\t\tfrom?: number;\n\t\tto?: number;\n\t};\n\trange?: {\n\t\tfrom?: number;\n\t\tto?: number;\n\t};\n\ttheme?: DThemeChartCoordinateLinear;\n}\n\nexport class DChartCoordinateLinear implements DChartCoordinate {\n\tprotected _id: number;\n\tprotected _padding: number;\n\tprotected _domain: DChartRegionImplObservable;\n\tprotected _range: DChartRegionImplObservable;\n\n\tprotected _container?: DChartCoordinateContainerSub;\n\tprotected _direction: DChartCoordinateDirection;\n\n\tprotected _ratio!: number;\n\tprotected _offset!: number;\n\tprotected _iratio!: number;\n\tprotected _ioffset!: number;\n\n\tprotected _theme: DThemeChartCoordinateLinear;\n\n\tconstructor( options?: DChartCoordinateLinearOptions ) {\n\t\tconst theme = ( options && options.theme ) || this.getThemeDefault();\n\t\tthis._theme = theme;\n\t\tthis._id = 0;\n\t\tthis._padding = ( options && options.padding != null ? options.padding : theme.getPadding() );\n\t\tthis._direction = DChartCoordinateDirection.X;\n\t\tconst domainFrom = ( options && options.domain && options.domain.from != null ? options.domain.from : 0 );\n\t\tconst domainTo = ( options && options.domain && options.domain.to != null ? options.domain.to : 1 );\n\t\tthis._domain = new DChartRegionImplObservable( domainFrom, domainTo, (): void => {\n\t\t\tthis.onRegionChange();\n\t\t});\n\t\tconst rangeFrom = ( options && options.range && options.range.from != null ? options.range.from : 0 );\n\t\tconst rangeTo = ( options && options.range && options.range.to != null ? options.range.to : 1 );\n\t\tthis._range = new DChartRegionImplObservable( rangeFrom, rangeTo, (): void => {\n\t\t\tthis.onRegionChange();\n\t\t});\n\t\tthis.onRegionChange();\n\t}\n\n\tprotected getThemeDefault(): DThemeChartCoordinateLinear {\n\t\treturn DThemes.getInstance().get( this.getType() );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DChartCoordinateLinear\";\n\t}\n\n\tbind( container: DChartCoordinateContainerSub, direction: DChartCoordinateDirection ): void {\n\t\tthis._container = container;\n\t\tthis._direction = direction;\n\t}\n\n\tunbind(): void {\n\t\tthis._container = undefined;\n\t}\n\n\tfit(): void {\n\t\tconst container = this._container;\n\t\tif( container ) {\n\t\t\tconst plotArea = container.container.plotArea;\n\t\t\tconst padding = this._padding;\n\t\t\tswitch( this._direction ) {\n\t\t\tcase DChartCoordinateDirection.X:\n\t\t\t\tconst domain = plotArea.series.domain;\n\t\t\t\tconst domainFrom = domain.from;\n\t\t\t\tconst domainTo = domain.to;\n\t\t\t\tif( ! (utilIsNaN( domainFrom ) || utilIsNaN( domainTo )) ) {\n\t\t\t\t\tthis._domain.set( domainFrom, domainTo );\n\t\t\t\t\tlet pixelFrom = padding;\n\t\t\t\t\tlet pixelTo = plotArea.size.x - padding;\n\t\t\t\t\tif( pixelTo < pixelFrom ) {\n\t\t\t\t\t\tpixelFrom = plotArea.size.x * 0.5;\n\t\t\t\t\t\tpixelTo = pixelFrom;\n\t\t\t\t\t}\n\t\t\t\t\tthis._range.set( pixelFrom, pixelTo );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase DChartCoordinateDirection.Y:\n\t\t\t\tconst range = plotArea.series.range;\n\t\t\t\tconst rangeFrom = range.from;\n\t\t\t\tconst rangeTo = range.to;\n\t\t\t\tif( ! (utilIsNaN( rangeFrom ) || utilIsNaN( rangeTo )) ) {\n\t\t\t\t\tthis._domain.set( rangeFrom, rangeTo );\n\t\t\t\t\tlet pixelFrom = plotArea.size.y - padding;\n\t\t\t\t\tlet pixelTo = padding;\n\t\t\t\t\tif( pixelFrom < pixelTo ) {\n\t\t\t\t\t\tpixelFrom = plotArea.size.y * 0.5;\n\t\t\t\t\t\tpixelTo = pixelFrom;\n\t\t\t\t\t}\n\t\t\t\t\tthis._range.set( pixelFrom, pixelTo );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onRegionChange(): void {\n\t\tthis._id += 1;\n\t\tconst domain = this._domain;\n\t\tconst range = this._range;\n\t\tconst domainSpan = domain.to - domain.from;\n\t\tconst rangeSpan = range.to - range.from;\n\t\tconst theme = this._theme;\n\t\tthis._ratio = ( theme.isZero( domainSpan ) ? 0 : rangeSpan / domainSpan );\n\t\tthis._offset = range.from - this._ratio * domain.from;\n\t\tthis._iratio = ( theme.isZero( rangeSpan ) ? 0 : domainSpan / rangeSpan );\n\t\tthis._ioffset = domain.from - this._iratio * range.from;\n\t}\n\n\tget id(): number {\n\t\treturn this._id;\n\t}\n\n\tget domain(): DChartRegion {\n\t\treturn this._domain;\n\t}\n\n\tget range(): DChartRegion {\n\t\treturn this._range;\n\t}\n\n\tmap( value: number ): number {\n\t\treturn this._offset + this._ratio * value;\n\t}\n\n\tunmap( value: number ): number {\n\t\treturn this._ioffset + this._iratio * value;\n\t}\n\n\tprotected calcStepMajor( count: number ): number {\n\t\tif( 0 < count ) {\n\t\t\tconst domain = this._domain;\n\t\t\tconst span = Math.abs( domain.to - domain.from ) / count;\n\t\t\tconst power = Math.floor( Math.log( span ) / Math.LN10 );\n\t\t\tconst base = Math.pow( 10, power );\n\t\t\treturn this._theme.toStepScale( span / base ) * base;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tprotected calcStepMinor( step: number, minorCount: number ): number {\n\t\tif( 0 <= step ) {\n\t\t\treturn step / ( minorCount + 1 );\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tprotected calcTickMinorPositions(\n\t\tstep: number, count: number, majorPosition: number,\n\t\trangeMin: number, rangeMax: number,\n\t\tiresult: number, result: Float64Array\n\t): void {\n\t\tfor( let i = 0; i < count; i += 1 ) {\n\t\t\tconst minorPosition = majorPosition + (i + 1) * step;\n\t\t\tif( rangeMin <= minorPosition && minorPosition <= rangeMax ) {\n\t\t\t\tresult[ iresult++ ] = minorPosition;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getRangeMax(): number {\n\t\tconst container = this._container;\n\t\tif( container ) {\n\t\t\tconst plotAreaSize = container.container.plotArea.size;\n\t\t\tswitch( this._direction ) {\n\t\t\tcase DChartCoordinateDirection.X:\n\t\t\t\treturn plotAreaSize.x;\n\t\t\tcase DChartCoordinateDirection.Y:\n\t\t\t\treturn plotAreaSize.y;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tticks(\n\t\tmajorCount: number,\n\t\tminorCountPerMajor: number,\n\t\tminorCount: number,\n\t\tmajorResult: Float64Array,\n\t\tminorResult: Float64Array\n\t): void {\n\t\tif( majorCount <= 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domain = this._domain;\n\t\tconst domainMin = Math.min( domain.from, domain.to );\n\t\tconst domainMax = Math.max( domain.from, domain.to );\n\n\t\tconst majorStep = this.calcStepMajor( majorCount );\n\t\tif( majorStep <= 0 ) {\n\t\t\tmajorResult[ 0 ] = domainMin;\n\t\t\tmajorResult[ 1 ] = this.map( domainMin );\n\t\t\tmajorResult[ 2 ] = 0;\n\t\t\tfor( let i = 1; i < majorCount; ++i ) {\n\t\t\t\tconst imajorResult = i * 3;\n\t\t\t\tmajorResult[ imajorResult + 0 ] = NaN;\n\t\t\t\tmajorResult[ imajorResult + 1 ] = NaN;\n\t\t\t\tmajorResult[ imajorResult + 2 ] = NaN;\n\t\t\t}\n\t\t\tfor( let i = 0; i < minorCount; ++i ) {\n\t\t\t\tconst iminorResult = i * 3;\n\t\t\t\tminorResult[ iminorResult + 0 ] = NaN;\n\t\t\t\tminorResult[ iminorResult + 1 ] = NaN;\n\t\t\t\tminorResult[ iminorResult + 2 ] = NaN;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Range\n\t\tconst rangeMin = 0;\n\t\tconst rangeMax = this.getRangeMax();\n\n\t\t// Major tick start position\n\t\tconst idomainStart = Math.floor( domainMin / majorStep ) - 1;\n\t\tconst idomainEnd = Math.ceil( domainMax / majorStep ) + 1;\n\n\t\t// Major / minor tick positions\n\t\tconst minorStep = this.calcStepMinor( majorStep, minorCountPerMajor );\n\t\tlet imajor = 0;\n\t\tlet iminor = 0;\n\t\tfor( let i = idomainStart; i <= idomainEnd; ++i ) {\n\t\t\tconst majorPosition = i * majorStep;\n\t\t\tif( imajor < majorCount ) {\n\t\t\t\tconst majorProjectedPosition = this.map( majorPosition );\n\t\t\t\tif( rangeMin <= majorProjectedPosition && majorProjectedPosition <= rangeMax ) {\n\t\t\t\t\tconst imajorResult = imajor * 3;\n\t\t\t\t\tmajorResult[ imajorResult + 0 ] = majorPosition;\n\t\t\t\t\tmajorResult[ imajorResult + 1 ] = majorProjectedPosition;\n\t\t\t\t\tmajorResult[ imajorResult + 2 ] = majorStep;\n\t\t\t\t\timajor += 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor( let j = 0; j < minorCountPerMajor; j += 1 ) {\n\t\t\t\tif( iminor < minorCount ) {\n\t\t\t\t\tconst minorPosition = majorPosition + (j + 1) * minorStep;\n\t\t\t\t\tconst minorProjectedPosition = this.map( minorPosition );\n\t\t\t\t\tif( rangeMin <= minorProjectedPosition && minorProjectedPosition <= rangeMax ) {\n\t\t\t\t\t\tconst iminorResult = iminor * 3;\n\t\t\t\t\t\tminorResult[ iminorResult + 0 ] = minorPosition;\n\t\t\t\t\t\tminorResult[ iminorResult + 1 ] = minorProjectedPosition;\n\t\t\t\t\t\tminorResult[ iminorResult + 2 ] = minorStep;\n\t\t\t\t\t\timinor += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor( let i = imajor; i < majorCount; ++i ) {\n\t\t\tconst imajorResult = i * 3;\n\t\t\tmajorResult[ imajorResult + 0 ] = NaN;\n\t\t\tmajorResult[ imajorResult + 1 ] = NaN;\n\t\t\tmajorResult[ imajorResult + 2 ] = NaN;\n\t\t}\n\t\tfor( let i = iminor; i < minorCount; ++i ) {\n\t\t\tconst iminorResult = i * 3;\n\t\t\tminorResult[ iminorResult + 0 ] = NaN;\n\t\t\tminorResult[ iminorResult + 1 ] = NaN;\n\t\t\tminorResult[ iminorResult + 2 ] = NaN;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartRegion } from \"./d-chart-region\";\nimport { utilIsNaN } from \"./util/util-is-nan\";\n\nexport class DChartRegionImpl implements DChartRegion {\n\tfrom: number;\n\tto: number;\n\n\tconstructor( from: number, to: number ) {\n\t\tthis.from = from;\n\t\tthis.to = to;\n\t}\n\n\tset( from?: number, to?: number ): this {\n\t\tif( from != null ) {\n\t\t\tthis.from = from;\n\t\t}\n\t\tif( to != null ) {\n\t\t\tthis.to = to;\n\t\t}\n\t\treturn this;\n\t}\n\n\tclear(): this {\n\t\tthis.from = NaN;\n\t\tthis.to = NaN;\n\t\treturn this;\n\t}\n\n\tadd( from: number, to: number ): this {\n\t\tif( ! utilIsNaN( from ) ) {\n\t\t\tthis.from = ( utilIsNaN( this.from ) ?\n\t\t\t\tfrom : Math.min( this.from, from )\n\t\t\t);\n\t\t}\n\n\t\tif( ! utilIsNaN( to ) ) {\n\t\t\tthis.to = ( utilIsNaN( this.to ) ?\n\t\t\t\tto : Math.max( this.to, to )\n\t\t\t);\n\t\t}\n\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartColorSet2 } from \"./d-chart-color-set\";\nimport { DChartSeriesScalar } from \"./d-chart-series-scalar\";\nimport { DChartSeriesStroke, DChartSeriesStrokeOptions, DChartSeriesStrokeStyleOption } from \"./d-chart-series-stroke\";\nimport { EShapeDefaults } from \"./shape/e-shape-defaults\";\nimport { EShapePointsStyle } from \"./shape/e-shape-points\";\nimport { utilIsArray } from \"./util/util-is-array\";\nimport { utilIsFunction } from \"./util/util-is-function\";\n\nexport class DChartSeriesStrokeImpl implements DChartSeriesStroke {\n\twidth: DChartSeriesScalar<number>;\n\tcolor: DChartSeriesScalar<number>;\n\talpha: DChartSeriesScalar<number>;\n\tstyle: DChartSeriesScalar<DChartSeriesStrokeStyleOption>;\n\n\tconstructor( options?: DChartSeriesStrokeOptions ) {\n\t\tthis.width = this.toScalar( options && options.width, EShapeDefaults.STROKE_WIDTH );\n\t\tthis.color = this.toScalar( options && options.color, DChartColorSet2 );\n\t\tthis.alpha = this.toScalar( options && options.alpha, EShapeDefaults.STROKE_ALPHA );\n\t\tthis.style = this.toScalar( options && options.style, EShapePointsStyle.NONE );\n\t}\n\n\tprotected toScalar<T>(\n\t\tvalue: T | T[] | DChartSeriesScalar<T> | undefined,\n\t\tdef: T | T[] | DChartSeriesScalar<T>\n\t): DChartSeriesScalar<T> {\n\t\tif( utilIsArray( value ) ) {\n\t\t\treturn ( index: number ) => value[ index % value.length ];\n\t\t} else if( utilIsFunction( value ) ) {\n\t\t\treturn value;\n\t\t} else if( value != null ) {\n\t\t\treturn () => value;\n\t\t} else if( utilIsArray( def ) ) {\n\t\t\treturn ( index: number ) => def[ index % def.length ];\n\t\t} else if( utilIsFunction( def ) ) {\n\t\t\treturn def;\n\t\t} else {\n\t\t\treturn () => def;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DChartPlotArea } from \"./d-chart-plot-area\";\nimport { DChartRegion } from \"./d-chart-region\";\nimport { DChartRegionImpl } from \"./d-chart-region-impl\";\nimport { DChartSeries } from \"./d-chart-series\";\nimport { DChartSeriesContainer, DChartSeriesContainerOptions } from \"./d-chart-series-container\";\nimport { DChartSeriesStroke } from \"./d-chart-series-stroke\";\nimport { DChartSeriesStrokeImpl } from \"./d-chart-series-stroke-impl\";\nimport { utilIsNumber } from \"./util\";\n\nexport class DChartSeriesContainerImpl implements DChartSeriesContainer {\n\tprotected _plotArea: DChartPlotArea;\n\tprotected _list: DChartSeries[];\n\tprotected _domain: DChartRegionImpl;\n\tprotected _range: DChartRegionImpl;\n\tprotected _stroke: DChartSeriesStrokeImpl;\n\n\tconstructor( plotArea: DChartPlotArea, options?: DChartSeriesContainerOptions ) {\n\t\tthis._plotArea = plotArea;\n\t\tthis._domain = new DChartRegionImpl( NaN, NaN );\n\t\tthis._range = new DChartRegionImpl( NaN, NaN );\n\t\tthis._stroke = new DChartSeriesStrokeImpl( options && options.stroke );\n\n\t\tthis._list = [];\n\t\tconst list = options && options.list;\n\t\tif( list ) {\n\t\t\tconst listLength = list.length;\n\t\t\tif( 0 < listLength ) {\n\t\t\t\tfor( let i = 0; i < listLength; ++i ) {\n\t\t\t\t\tthis.add( list[ i ] );\n\t\t\t\t}\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tget plotArea(): DChartPlotArea {\n\t\treturn this._plotArea;\n\t}\n\n\tget stroke(): DChartSeriesStroke {\n\t\treturn this._stroke;\n\t}\n\n\tupdate(): void {\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tlist[ i ].update();\n\t\t}\n\t}\n\n\tadd( series: DChartSeries ): void {\n\t\tconst list = this._list;\n\t\tseries.bind( this, list.length );\n\t\tlist.push( series );\n\t}\n\n\tget( index: number ): DChartSeries | null {\n\t\tconst list = this._list;\n\t\tif( 0 <= index && index < list.length ) {\n\t\t\treturn list[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tindexOf( series: DChartSeries ): number {\n\t\treturn this._list.indexOf( series );\n\t}\n\n\tremove( series: DChartSeries ): DChartSeries | null;\n\tremove( index: number ): DChartSeries | null;\n\tremove( seriesOrIndex: DChartSeries | number ): DChartSeries | null {\n\t\tconst list = this._list;\n\t\tif( utilIsNumber( seriesOrIndex ) ) {\n\t\t\tconst index = seriesOrIndex;\n\t\t\tif( 0 <= index && index < list.length ) {\n\t\t\t\tconst removed = list.splice( index, 1 )[ 0 ];\n\t\t\t\tremoved.unbind();\n\t\t\t\tremoved.destroy();\n\t\t\t\treturn removed;\n\t\t\t}\n\t\t} else {\n\t\t\tconst series = seriesOrIndex;\n\t\t\tconst index = list.indexOf( series );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tlist.splice( index, 1 );\n\t\t\t\tseries.unbind();\n\t\t\t\tseries.destroy();\n\t\t\t\treturn series;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear(): this {\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tlist[ i ].destroy();\n\t\t}\n\t\tlist.length = 0;\n\t\treturn this;\n\t}\n\n\tsize(): number {\n\t\treturn this._list.length;\n\t}\n\n\tdestroy(): void {\n\t\tthis.clear();\n\t}\n\n\tget domain(): DChartRegion {\n\t\tconst result = this._domain;\n\t\tresult.clear();\n\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tconst domain = list[ i ].domain;\n\t\t\tresult.add( domain.from, domain.to );\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tget range(): DChartRegion {\n\t\tconst result = this._range;\n\t\tresult.clear();\n\n\t\tconst list = this._list;\n\t\tfor( let i = 0, imax = list.length; i < imax; ++i ) {\n\t\t\tconst range = list[ i ].range;\n\t\t\tresult.add( range.from, range.to );\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint, Point } from \"pixi.js\";\nimport { DChartAxisContainer } from \"./d-chart-axis-container\";\nimport { DChartAxisContainerImpl } from \"./d-chart-axis-container-impl\";\nimport { DChartCoordinateContainer } from \"./d-chart-coordinate-container\";\nimport { DChartCoordinateContainerImpl } from \"./d-chart-coordinate-container-impl\";\nimport { DChartPlotArea, DChartPlotAreaOptions } from \"./d-chart-plot-area\";\nimport { DChartSeriesContainer } from \"./d-chart-series-container\";\nimport { DChartSeriesContainerImpl } from \"./d-chart-series-container-impl\";\nimport { EShapeContainer } from \"./shape\";\n\nexport class DChartPlotAreaImpl implements DChartPlotArea {\n\tprotected _container: EShapeContainer;\n\tprotected _series: DChartSeriesContainerImpl;\n\tprotected _coordinate: DChartCoordinateContainer;\n\tprotected _size: Point;\n\tprotected _axis: DChartAxisContainerImpl;\n\n\tconstructor( options?: DChartPlotAreaOptions ) {\n\t\tthis._size = new Point(\n\t\t\toptions && options.width != null ? options.width : 100,\n\t\t\toptions && options.height != null ? options.height : 100\n\t\t);\n\t\tthis._container = new EShapeContainer();\n\t\tthis._coordinate = new DChartCoordinateContainerImpl( this, options && options.coordinate );\n\t\tthis._series = new DChartSeriesContainerImpl( this, options && options.series );\n\t\tthis._axis = new DChartAxisContainerImpl( this, options && options.axis );\n\t}\n\n\tget coordinate(): DChartCoordinateContainer {\n\t\treturn this._coordinate;\n\t}\n\n\tget series(): DChartSeriesContainer {\n\t\treturn this._series;\n\t}\n\n\tget container(): EShapeContainer {\n\t\treturn this._container;\n\t}\n\n\tget size(): IPoint {\n\t\treturn this._size;\n\t}\n\n\tget axis(): DChartAxisContainer {\n\t\treturn this._axis;\n\t}\n\n\tdestroy(): void {\n\t\tthis._container.destroy();\n\t\tthis._series.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DChartCoordinate } from \"./d-chart-coordinate\";\nimport { DChartRegionImmutable } from \"./d-chart-region\";\nimport { DChartRegionImpl } from \"./d-chart-region-impl\";\nimport { DChartSeries } from \"./d-chart-series\";\nimport { DChartSeriesContainer } from \"./d-chart-series-container\";\nimport { DChartSeriesStrokeComputed, DChartSeriesStrokeComputedOptions } from \"./d-chart-series-stroke\";\nimport { EShapePointsStyle } from \"./shape\";\nimport { EShapeLine } from \"./shape/variant/e-shape-line\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DChartSeriesLineOptions {\n\tpoints?: Array<number | null>;\n\tstroke?: DChartSeriesStrokeComputedOptions;\n\tcoordinate?: {\n\t\tx?: number;\n\t\ty?: number;\n\t};\n}\n\nexport class DChartSeriesLine implements DChartSeries {\n\tprotected _line?: EShapeLine;\n\tprotected _coordinateIndexX: number;\n\tprotected _coordinateIndexY: number;\n\n\tprotected _points: Array<number | null>;\n\tprotected _pointId: number;\n\tprotected _pointIdUpdated: number;\n\n\tprotected _coordinateIdUpdatedX: number;\n\tprotected _coordinateIdUpdatedY: number;\n\n\tprotected _container?: DChartSeriesContainer;\n\n\tprotected _domain: DChartRegionImpl;\n\tprotected _range: DChartRegionImpl;\n\tprotected _regionPointId: number;\n\n\tprotected _options?: DChartSeriesLineOptions;\n\n\tconstructor( options?: DChartSeriesLineOptions ) {\n\t\tconst coordinate = options && options.coordinate;\n\t\tthis._coordinateIndexX = ( coordinate && coordinate.x != null ? coordinate.x : 0 );\n\t\tthis._coordinateIndexY = ( coordinate && coordinate.y != null ? coordinate.y : 0 );\n\n\t\tthis._points = (options && options.points) || [];\n\t\tthis._pointId = 0;\n\t\tthis._pointIdUpdated = NaN;\n\n\t\tthis._coordinateIdUpdatedX = NaN;\n\t\tthis._coordinateIdUpdatedY = NaN;\n\n\t\tthis._domain = new DChartRegionImpl( NaN, NaN );\n\t\tthis._range = new DChartRegionImpl( NaN, NaN );\n\t\tthis._regionPointId = NaN;\n\n\t\tthis._options = options;\n\t}\n\n\tprotected toStroke( container: DChartSeriesContainer, index: number ): DChartSeriesStrokeComputed {\n\t\tconst options = this._options;\n\t\tconst stroke = options && options.stroke;\n\t\tconst containerStroke = container.stroke;\n\t\tif( stroke ) {\n\t\t\tconst style = ( stroke.style != null ? stroke.style : containerStroke.style( index ) );\n\t\t\treturn {\n\t\t\t\twidth: ( stroke.width != null ? stroke.width : containerStroke.width( index ) ),\n\t\t\t\tcolor: ( stroke.color != null ? stroke.color : containerStroke.color( index ) ),\n\t\t\t\talpha: ( stroke.alpha != null ? stroke.alpha : containerStroke.alpha( index ) ),\n\t\t\t\tstyle: ( utilIsString( style ) ? EShapePointsStyle[ style ] : style )\n\t\t\t};\n\t\t} else {\n\t\t\tconst style = containerStroke.style( index );\n\t\t\treturn {\n\t\t\t\twidth: containerStroke.width( index ),\n\t\t\t\tcolor: containerStroke.color( index ),\n\t\t\t\talpha: containerStroke.alpha( index ),\n\t\t\t\tstyle: ( utilIsString( style ) ? EShapePointsStyle[ style ] : style )\n\t\t\t};\n\t\t}\n\t}\n\n\tbind( container: DChartSeriesContainer, index: number ): void {\n\t\tlet line = this._line;\n\t\tif( ! line ) {\n\t\t\tconst stroke = this.toStroke( container, index );\n\t\t\tline = this._line = new EShapeLine([], [], stroke.width, stroke.style);\n\t\t\tline.stroke.color = stroke.color;\n\t\t\tline.stroke.alpha = stroke.alpha;\n\t\t}\n\t\tthis._container = container;\n\t\tline.attach( container.plotArea.container, index );\n\t\tthis._pointIdUpdated = NaN;\n\t\tthis._coordinateIdUpdatedX = NaN;\n\t\tthis._coordinateIdUpdatedY = NaN;\n\t}\n\n\tunbind(): void {\n\t\tconst line = this._line;\n\t\tif( line ) {\n\t\t\tline.detach();\n\t\t}\n\t\tthis._container = undefined;\n\t}\n\n\tget points(): Array<number | null> {\n\t\treturn this._points;\n\t}\n\n\tset points( points: Array<number | null> ) {\n\t\tthis._points = points;\n\t\tthis._pointId += 1;\n\t}\n\n\ttoDirty(): void {\n\t\tthis._pointId += 1;\n\t}\n\n\tupdate(): void {\n\t\tconst line = this._line;\n\t\tconst container = this._container;\n\t\tif( line && container ) {\n\t\t\tconst plotArea = container.plotArea;\n\t\t\tconst coordinate = plotArea.coordinate;\n\t\t\tconst coordinateX = coordinate.x.get( this._coordinateIndexX );\n\t\t\tconst coordinateY = coordinate.y.get( this._coordinateIndexY );\n\t\t\tif( coordinateX && coordinateY ) {\n\t\t\t\tconst coordinateIdX = coordinateX.id;\n\t\t\t\tconst coordinateIdY = coordinateY.id;\n\n\t\t\t\tconst pointId = this._pointId;\n\t\t\t\tconst isPointChanged = ( pointId !== this._pointIdUpdated );\n\t\t\t\tconst isCoordinateXChanged = ( coordinateIdX !== this._coordinateIdUpdatedX );\n\t\t\t\tconst isCoordinateYChanged = ( coordinateIdY !== this._coordinateIdUpdatedY );\n\t\t\t\tif( isPointChanged || isCoordinateXChanged || isCoordinateYChanged ) {\n\t\t\t\t\tthis._pointIdUpdated = pointId;\n\t\t\t\t\tthis._coordinateIdUpdatedX = coordinateIdX;\n\t\t\t\t\tthis._coordinateIdUpdatedY = coordinateIdY;\n\t\t\t\t\tthis.updateLine( line, coordinateX, coordinateY );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateLine(\n\t\tline: EShapeLine,\n\t\txcoordinate: DChartCoordinate,\n\t\tycoordinate: DChartCoordinate\n\t): void {\n\t\tconst values = line.points.values;\n\t\tconst segments = line.points.segments;\n\t\tconst valuesLength = values.length;\n\t\tconst segmentsLength = segments.length;\n\t\tlet ivalues = 0;\n\t\tlet isegments = 0;\n\t\tconst points = this._points;\n\t\tfor( let i = 0, imax = points.length; i < imax; i += 2 ) {\n\t\t\tconst xraw = points[ i ];\n\t\t\tconst yraw = points[ i + 1 ];\n\t\t\tif( xraw != null && yraw != null ) {\n\t\t\t\tconst x = xcoordinate.map( xraw );\n\t\t\t\tconst y = ycoordinate.map( yraw );\n\t\t\t\tif( ivalues < valuesLength ) {\n\t\t\t\t\tvalues[ ivalues ] = x;\n\t\t\t\t\tvalues[ ivalues + 1 ] = y;\n\t\t\t\t} else {\n\t\t\t\t\tvalues.push( x, y );\n\t\t\t\t}\n\t\t\t\tivalues += 2;\n\t\t\t} else {\n\t\t\t\tconst segment = (i >> 1) - isegments;\n\t\t\t\tif( isegments < segmentsLength ) {\n\t\t\t\t\tsegments[ isegments ] = segment;\n\t\t\t\t} else {\n\t\t\t\t\tsegments.push( segment );\n\t\t\t\t}\n\t\t\t\tisegments += 1;\n\t\t\t}\n\t\t}\n\t\tif( values.length !== ivalues ) {\n\t\t\tvalues.length = ivalues;\n\t\t}\n\t\tif( segments.length !== isegments ) {\n\t\t\tsegments.length = isegments;\n\t\t}\n\t\tline.points.set( values, segments );\n\t\tDApplications.update( line );\n\t}\n\n\tget domain(): DChartRegionImmutable {\n\t\tthis.updateRegion();\n\t\treturn this._domain;\n\t}\n\n\tget range(): DChartRegionImmutable {\n\t\tthis.updateRegion();\n\t\treturn this._range;\n\t}\n\n\tprotected updateRegion(): void {\n\t\tconst pointId = this._pointId;\n\t\tif( this._regionPointId !== pointId ) {\n\t\t\tthis._regionPointId = pointId;\n\n\t\t\tconst points = this._points;\n\t\t\tconst domain = this._domain;\n\t\t\tconst range = this._range;\n\t\t\tdomain.clear();\n\t\t\trange.clear();\n\t\t\tif( points != null ) {\n\t\t\t\tfor( let i = 0, imax = points.length; i < imax; i += 2 ) {\n\t\t\t\t\tconst xraw = points[ i ];\n\t\t\t\t\tif( xraw != null ) {\n\t\t\t\t\t\tdomain.add( xraw, xraw );\n\t\t\t\t\t}\n\t\t\t\t\tconst yraw = points[ i + 1 ];\n\t\t\t\t\tif( yraw != null ) {\n\t\t\t\t\t\trange.add( yraw, yraw );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tconst line = this._line;\n\t\tif( line ) {\n\t\t\tthis._line = undefined;\n\t\t\tline.detach();\n\t\t\tline.destroy();\n\t\t}\n\n\t\tthis._container = undefined;\n\t\tthis._points.length = 0;\n\t\tthis._pointId = 0;\n\t\tthis._pointIdUpdated = NaN;\n\t\tthis._coordinateIdUpdatedX = NaN;\n\t\tthis._coordinateIdUpdatedY = NaN;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, utils } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\n\nexport enum DListSelectionMode {\n\tNONE,\n\tSINGLE,\n\tMULTIPLE\n}\n\nexport interface DListSelectionOptions {\n\tmode?: DListSelectionMode;\n\ton?: { [ name: string ]: Function };\n}\n\nexport class DListSelection extends utils.EventEmitter {\n\tprotected _content: Container;\n\tprotected _isDirty: boolean;\n\tprotected _indices: number[];\n\tprotected _mode: DListSelectionMode;\n\n\tconstructor( content: Container, options?: DListSelectionOptions ) {\n\t\tsuper();\n\n\t\tthis._content = content;\n\t\tthis._isDirty = false;\n\t\tthis._indices = [];\n\t\tthis._mode = ( options && options.mode != null ? options.mode : DListSelectionMode.SINGLE );\n\n\t\t// Events\n\t\tconst on = options && options.on;\n\t\tif( on ) {\n\t\t\tfor( const name in on ) {\n\t\t\t\tthis.on( name, on[ name ] );\n\t\t\t}\n\t\t}\n\t}\n\n\ttoDirty() {\n\t\tthis._isDirty = true;\n\t}\n\n\tupdate() {\n\t\tif( this._isDirty ) {\n\t\t\tthis._isDirty = false;\n\t\t\tconst indices = this._indices;\n\t\t\tindices.length = 0;\n\t\t\tconst content = this._content;\n\t\t\tconst children = content.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tif( child.isActive() ) {\n\t\t\t\t\t\tindices.push( i );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsize() {\n\t\tthis.update();\n\t\treturn this._indices.length;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this.size() <= 0;\n\t}\n\n\tfirst<T>(): T | null {\n\t\treturn this.get( 0 );\n\t}\n\n\tget<T>( index: number ): T | null {\n\t\tthis.update();\n\t\tconst indices = this._indices;\n\t\tif( 0 <= index && index < indices.length ) {\n\t\t\tconst content = this._content;\n\t\t\tconst child = content.children[ indices[ index ] ];\n\t\t\tif( child != null ) {\n\t\t\t\treturn child as any;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetIndex( index: number ): number | null {\n\t\tthis.update();\n\t\tconst indices = this._indices;\n\t\tif( 0 <= index && index < indices.length ) {\n\t\t\treturn indices[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear(): void {\n\t\tthis.update();\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.length ) {\n\t\t\tconst content = this._content;\n\t\t\tconst children = content.children;\n\t\t\tfor( let i = 0, imax = indices.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ indices[ i ] ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.setActive( false );\n\t\t\t\t}\n\t\t\t}\n\t\t\tindices.length = 0;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tadd<T extends DBase<any, any>>( target: T ) {\n\t\tconst mode = this._mode;\n\t\tconst content = this._content;\n\t\tif( mode === DListSelectionMode.SINGLE ) {\n\t\t\tif( ! target.isActive() ) {\n\t\t\t\tthis.update();\n\n\t\t\t\t// Remove the existing\n\t\t\t\tconst indices = this._indices;\n\t\t\t\tconst children = content.children;\n\t\t\t\tfor( let i = 0, imax = indices.length; i < imax; ++i ) {\n\t\t\t\t\tconst child = children[ indices[ i ] ];\n\t\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\t\tchild.setActive( false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tindices.length = 0;\n\n\t\t\t\t// Add a new child\n\t\t\t\tindices.push( content.getChildIndex( target ) );\n\t\t\t\ttarget.setActive( true );\n\n\t\t\t\t// Event\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t}\n\t\t} else if( mode === DListSelectionMode.MULTIPLE ) {\n\t\t\tif( ! target.isActive() ) {\n\t\t\t\tif( this._isDirty ) {\n\t\t\t\t\ttarget.setActive( true );\n\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t} else {\n\t\t\t\t\t// Find an insertion position\n\t\t\t\t\tconst indices = this._indices;\n\t\t\t\t\tconst targetIndex = content.getChildIndex( target );\n\t\t\t\t\tfor( let i = 0, imax = indices.length; i < imax; ++i ) {\n\t\t\t\t\t\tconst index = indices[ i ];\n\t\t\t\t\t\tif( targetIndex === index ) {\n\t\t\t\t\t\t\ttarget.setActive( true );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else if( targetIndex < index ) {\n\t\t\t\t\t\t\tindices.splice( i, 0, targetIndex );\n\t\t\t\t\t\t\ttarget.setActive( true );\n\t\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Push\n\t\t\t\t\tindices.push( targetIndex );\n\t\t\t\t\ttarget.setActive( true );\n\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tremove<T extends DBase<any, any>>( target: T ) {\n\t\tif( ! target.isActive() ) {\n\t\t\tif( this._isDirty ) {\n\t\t\t\ttarget.setActive( false );\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t} else {\n\t\t\t\tconst indices = this._indices;\n\t\t\t\tconst content = this._content;\n\t\t\t\tconst targetIndex = content.getChildIndex( target );\n\t\t\t\tfor( let i = 0, imax = indices.length; i < imax; ++i ) {\n\t\t\t\t\tconst index = indices[ i ];\n\t\t\t\t\tif( targetIndex === index ) {\n\t\t\t\t\t\tindices.splice( i, 1 );\n\t\t\t\t\t\ttarget.setActive( false );\n\t\t\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DChartPlotArea, DChartPlotAreaOptions} from \"./d-chart-plot-area\";\nimport { DChartPlotAreaImpl } from \"./d-chart-plot-area-impl\";\n\nexport interface DChartOptions<THEME extends DThemeChart> extends DBaseOptions<THEME> {\n\tplotArea: DChartPlotAreaOptions;\n}\n\nexport interface DThemeChart extends DThemeBase {\n}\n\nexport class DChart<\n\tTHEME extends DThemeChart = DThemeChart,\n\tOPTIONS extends DChartOptions<THEME> = DChartOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\tprotected _plotArea!: DChartPlotArea;\n\n\tprotected init( options?: OPTIONS ): void {\n\t\tsuper.init( options );\n\n\t\tconst plotArea = new DChartPlotAreaImpl( options && options.plotArea );\n\t\tthis._plotArea = plotArea;\n\t\tthis.addChild( plotArea.container );\n\t\tthis.addChild( plotArea.axis.container );\n\t}\n\n\tget plotArea(): DChartPlotArea {\n\t\treturn this._plotArea;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DChart\";\n\t}\n\n\tdestroy(): void {\n\t\tif( ! this._destroyed ) {\n\t\t\tthis._plotArea.destroy();\n\t\t\tsuper.destroy();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\n\nexport abstract class DCommandCreate implements DCommand {\n\tabstract execute(): Promise<unknown> | boolean;\n\n\tredo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE | DCommandFlag.CLEAR;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DCommandDelete implements DCommand {\n\texecute(): Promise<unknown> | boolean {\n\t\treturn DControllers.getDocumentController().delete();\n\t}\n\n\tredo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE | DCommandFlag.CLEAR;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DCommandSaveAs implements DCommand {\n\tprotected _name: string;\n\n\tconstructor( name: string ) {\n\t\tthis._name = name;\n\t}\n\n\texecute(): Promise<unknown> | boolean {\n\t\treturn DControllers.getDocumentController().saveAs( this._name );\n\t}\n\n\tredo(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommand } from \"./d-command\";\nimport { DCommandFlag } from \"./d-command-flag\";\nimport { DControllers } from \"./d-controllers\";\n\nexport class DCommandSave implements DCommand {\n\texecute(): Promise<unknown> | boolean {\n\t\treturn DControllers.getDocumentController().save();\n\t}\n\n\tredo(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tundo(): Promise<unknown> | boolean {\n\t\treturn true;\n\t}\n\n\tdestroy(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetFlag(): DCommandFlag {\n\t\treturn DCommandFlag.UNSTORABLE;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\n\nexport interface DContentOptions extends DBaseOptions<DThemeContent> {\n\n}\n\nexport interface DThemeContent extends DThemeBase {\n\n}\n\nexport class DContent extends DBase<DThemeContent, DContentOptions> {\n\tprotected init( options?: DContentOptions ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected initReflowable(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DContent\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ObservablePoint } from \"pixi.js\";\nimport { DMapTileMappingPoint } from \"./d-map-tile-mapping\";\n\nexport class DDiagramCanvasTileMappingPointImpl extends ObservablePoint implements DMapTileMappingPoint {\n\tget lon(): number {\n\t\treturn this.x;\n\t}\n\n\tset lon( lon: number ) {\n\t\tthis.x = lon;\n\t}\n\n\tget lat(): number {\n\t\treturn this.y;\n\t}\n\n\tset lat( lat: number ) {\n\t\tthis.y = lat;\n\t}\n\n\ttoObject(): { lon: number, lat: number } {\n\t\treturn {\n\t\t\tlon: this.x,\n\t\t\tlat: this.y\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramCanvasTileMapping } from \"./d-diagram-canvas-mapping\";\nimport { DDiagramCanvasTileMappingPointImpl } from \"./d-diagram-canvas-mapping-point-impl\";\nimport { DMapTileMappingPoint } from \"./d-map-tile-mapping\";\n\nexport class DDiagramCanvasTileMappingImpl implements DDiagramCanvasTileMapping {\n\tprotected _enable: boolean;\n\tprotected _from: DDiagramCanvasTileMappingPointImpl;\n\tprotected _to: DDiagramCanvasTileMappingPointImpl;\n\tprotected _cb: () => void;\n\n\tconstructor( cb: () => void, mapping?: DDiagramCanvasTileMapping );\n\tconstructor( cb: () => void, enable: boolean, lon0: number, lat0: number, lon1: number, lat1: number );\n\tconstructor(\n\t\tcb: () => void,\n\t\tmappingOrEnable?: DDiagramCanvasTileMapping | boolean,\n\t\tlon0?: number,\n\t\tlat0?: number,\n\t\tlon1?: number,\n\t\tlat1?: number\n\t) {\n\t\tthis._cb = cb;\n\t\tif( mappingOrEnable === true || mappingOrEnable === false ) {\n\t\t\tthis._enable = mappingOrEnable;\n\t\t\tthis._from = new DDiagramCanvasTileMappingPointImpl( cb, null, lon0, lat0 );\n\t\t\tthis._to = new DDiagramCanvasTileMappingPointImpl( cb, null, lon1, lat1 );\n\t\t} else if( mappingOrEnable != null ) {\n\t\t\tthis._enable = mappingOrEnable.enable;\n\t\t\tthis._from = new DDiagramCanvasTileMappingPointImpl( cb, null, mappingOrEnable.from.lon, mappingOrEnable.from.lat );\n\t\t\tthis._to = new DDiagramCanvasTileMappingPointImpl( cb, null, mappingOrEnable.to.lon, mappingOrEnable.to.lat );\n\t\t} else {\n\t\t\tthis._enable = false;\n\t\t\tthis._from = new DDiagramCanvasTileMappingPointImpl( cb, null, -180, +85.05112877980659 );\n\t\t\tthis._to = new DDiagramCanvasTileMappingPointImpl( cb, null, +180, -85.05112877980659 );\n\t\t}\n\t}\n\n\tget enable(): boolean {\n\t\treturn this._enable;\n\t}\n\n\tset enable( enable: boolean ) {\n\t\tif( this._enable !== enable ) {\n\t\t\tthis._enable = enable;\n\t\t\tthis._cb();\n\t\t}\n\t}\n\n\tget from(): DMapTileMappingPoint {\n\t\treturn this._from;\n\t}\n\n\tget to(): DMapTileMappingPoint {\n\t\treturn this._to;\n\t}\n\n\tserialize(): DDiagramCanvasTileMapping {\n\t\treturn {\n\t\t\tenable: this._enable,\n\t\t\tfrom: this._from.toObject(),\n\t\t\tto: this._to.toObject()\n\t\t};\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DDiagramCanvasTileMapping } from \"./d-diagram-canvas-mapping\";\nimport { DDiagramCanvasTileMappingImpl } from \"./d-diagram-canvas-mapping-impl\";\nimport { DMapTilePyramid } from \"./d-map-tile-pyramid\";\n\nexport type DDiagramCanvasTilePyramidFactory = ( canvas: DDiagramCanvasBase<any, any> ) => DMapTilePyramid;\n\nexport interface DDiagramCanvasTileOptions {\n\tfactory?: DDiagramCanvasTilePyramidFactory;\n\tmapping?: DDiagramCanvasTileMapping;\n}\n\nexport class DDiagramCanvasTile {\n\tprotected _canvas: DDiagramCanvasBase<any, any>;\n\tprotected _pyramid?: DMapTilePyramid;\n\tprotected _factory?: DDiagramCanvasTilePyramidFactory;\n\tprotected _mapping: DDiagramCanvasTileMappingImpl;\n\n\tconstructor( canvas: DDiagramCanvasBase<any, any>, options?: DDiagramCanvasTileOptions ) {\n\t\tthis._canvas = canvas;\n\t\tthis._factory = options && options.factory;\n\t\tthis._mapping = new DDiagramCanvasTileMappingImpl((): void => {\n\t\t\tthis.onMappingChange();\n\t\t}, options && options.mapping );\n\t}\n\n\tinit(): void {\n\t\tthis.onMappingChange();\n\t}\n\n\tprotected onMappingChange(): void {\n\t\tconst factory = this._factory;\n\t\tif( factory ) {\n\t\t\tconst mapping = this._mapping;\n\t\t\tif( mapping.enable ) {\n\t\t\t\tconst pyramid = this._pyramid;\n\t\t\t\tif( pyramid ) {\n\t\t\t\t\tpyramid.mapping = mapping;\n\t\t\t\t} else {\n\t\t\t\t\tthis._pyramid = factory( this._canvas ).fit();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst pyramid = this._pyramid;\n\t\t\t\tif( pyramid ) {\n\t\t\t\t\tthis._pyramid = undefined;\n\t\t\t\t\tpyramid.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget pyramid(): DMapTilePyramid | undefined {\n\t\treturn this._pyramid;\n\t}\n\n\tget factory(): DDiagramCanvasTilePyramidFactory | undefined {\n\t\treturn this._factory;\n\t}\n\n\tget mapping(): DDiagramCanvasTileMapping {\n\t\treturn this._mapping;\n\t}\n\n\tserialize(): { mapping: DDiagramCanvasTileMapping } {\n\t\treturn {\n\t\t\tmapping: this._mapping.serialize()\n\t\t};\n\t}\n\n\tdestroy(): void {\n\t\tconst pyramid = this._pyramid;\n\t\tif( pyramid != null ) {\n\t\t\tthis._pyramid = undefined;\n\t\t\tpyramid.destroy();\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramSerializedItem, DDiagramSerializedLayer } from \"./d-diagram-serialized\";\nimport { EShapeContainer } from \"./shape/e-shape-container\";\nimport { EShapeResourceManagerSerialization } from \"./shape/e-shape-resource-manager-serialization\";\n\nexport class DDiagramLayer extends EShapeContainer {\n\treference: number;\n\n\tconstructor( name: string ) {\n\t\tsuper();\n\t\tthis.name = name;\n\t\tthis.interactive = false;\n\t\tthis.reference = 0;\n\t}\n\n\tdestroy(): void {\n\t\tif( ! this._destroyed ) {\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\t\tchildren[ i ].destroy();\n\t\t\t}\n\t\t\tchildren.length = 0;\n\t\t\tsuper.destroy();\n\t\t}\n\t}\n\n\tserialize(\n\t\tlayer: number, manager: EShapeResourceManagerSerialization, items: DDiagramSerializedItem[]\n\t): DDiagramSerializedLayer {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst shape = children[ i ];\n\t\t\tconst item = shape.serialize( manager );\n\t\t\titem[ 16 ] = layer;\n\t\t\titems.push( item );\n\t\t}\n\n\t\treturn [\n\t\t\tthis.name || \"\"\n\t\t];\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DDiagramLayer } from \"./d-diagram-layer\";\nimport { DDiagramSerializedItem, DDiagramSerializedLayer } from \"./d-diagram-serialized\";\nimport { EShapeResourceManagerSerialization } from \"./shape/e-shape-resource-manager-serialization\";\n\nexport class DDiagramLayerContainer extends Container {\n\tpublic children!: DDiagramLayer[];\n\tprotected _active: DDiagramLayer | null;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._active = null;\n\t\tthis.interactive = false;\n\t\tthis.interactiveChildren = false;\n\t}\n\n\tget active(): DDiagramLayer | null {\n\t\treturn this._active;\n\t}\n\n\tset active( layer: DDiagramLayer | null ) {\n\t\tif( this._active !== layer && (layer == null || 0 <= this.children.indexOf( layer )) ) {\n\t\t\tthis._active = layer;\n\t\t\tthis.emit( \"change\", this );\n\t\t}\n\t}\n\n\tcreate( name: string, activate?: boolean ): DDiagramLayer {\n\t\tconst result = new DDiagramLayer( name );\n\t\tthis.attach( result, activate );\n\t\treturn result;\n\t}\n\n\t/**\n\t * Adds the specified layer and activates it if the `activate` is true.\n\t *\n\t * @param layer\n\t * @param activate\n\t */\n\tattach( layer: DDiagramLayer, activate?: boolean ): void {\n\t\tthis.addChild( layer );\n\t\tif( activate === true ) {\n\t\t\tthis._active = layer;\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\tDApplications.update( this );\n\t}\n\n\tattachAt( layer: DDiagramLayer, index: number, activate?: boolean ): void {\n\t\tthis.addChildAt( layer, index );\n\t\tif( activate === true ) {\n\t\t\tthis._active = layer;\n\t\t}\n\t\tthis.emit( \"change\", this );\n\t\tDApplications.update( this );\n\t}\n\n\t/**\n\t * Removes the specified layer from this container and activates the specified layer.\n\t * This method does not destroy the secified layer.\n\t *\n\t * @param layer\n\t */\n\tdetach( layer: DDiagramLayer, active: DDiagramLayer | null ): void {\n\t\tconst children = this.children;\n\t\tconst index = children.indexOf( layer );\n\t\tif( 0 <= index ) {\n\t\t\tthis._active = active;\n\n\t\t\tchildren.splice( index, 1 );\n\t\t\t(layer as any).parent = undefined;\n\n\t\t\tthis.emit( \"change\", this );\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\t/**\n\t * Removes the specified layer and activate the next layer.\n\t * This method does not destroy the specified layer.\n\t *\n\t * @param layer\n\t * @param activateNext\n\t */\n\tdelete( layer: DDiagramLayer, activateNext?: boolean ): number {\n\t\tconst children = this.children;\n\t\tconst index = children.indexOf( layer );\n\t\tif( 0 <= index ) {\n\t\t\tchildren.splice( index, 1 );\n\t\t\t(layer as any).parent = undefined;\n\n\t\t\tif( this._active === layer ) {\n\t\t\t\tif( activateNext === true ) {\n\t\t\t\t\tif( index < children.length ) {\n\t\t\t\t\t\tthis._active = children[ index ];\n\t\t\t\t\t} else if( 0 < children.length ) {\n\t\t\t\t\t\tthis._active = children[ index - 1 ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._active = null;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._active = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.emit( \"change\", this );\n\t\t\tDApplications.update( this );\n\t\t}\n\t\treturn index;\n\t}\n\n\tget( index: number ): DDiagramLayer | null {\n\t\tconst child = this.children[ index ];\n\t\tif( child != null ) {\n\t\t\treturn child;\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear(): void {\n\t\tconst children = this.children;\n\t\tif( 0 < children.length ) {\n\t\t\tfor( let i = children.length - 1; 0 <= i; --i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\t(child as any).parent = null;\n\t\t\t\tchild.destroy();\n\t\t\t}\n\t\t\tchildren.length = 0;\n\n\t\t\tthis.emit( \"change\", this );\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tif( ! this._destroyed ) {\n\t\t\tthis.clear();\n\t\t\tsuper.destroy();\n\t\t}\n\t}\n\n\tsize(): number {\n\t\treturn this.children.length;\n\t}\n\n\tserialize(\n\t\tmanager: EShapeResourceManagerSerialization, items: DDiagramSerializedItem[]\n\t): DDiagramSerializedLayer[] {\n\t\tconst result: DDiagramSerializedLayer[] = [];\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tresult.push( child.serialize( i, manager, items ) );\n\t\t}\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IPoint } from \"pixi.js\";\nimport { DCanvas, DCanvasOptions, DThemeCanvas } from \"./d-canvas\";\nimport { DDiagramCanvasTile, DDiagramCanvasTileOptions } from \"./d-diagram-canvas-tile\";\nimport { DDiagramLayerContainer } from \"./d-diagram-layer-container\";\nimport { EShape } from \"./shape/e-shape\";\n\nexport interface DDiagramCanvasBaseOptions<\n\tTHEME extends DThemeDiagramCanvasBase = DThemeDiagramCanvasBase\n> extends DCanvasOptions<THEME> {\n\ttile?: DDiagramCanvasTileOptions;\n}\n\nexport interface DThemeDiagramCanvasBase extends DThemeCanvas {\n\n}\n\nexport class DDiagramCanvasBase<\n\tTHEME extends DThemeDiagramCanvasBase = DThemeDiagramCanvasBase,\n\tOPTIONS extends DDiagramCanvasBaseOptions<THEME> = DDiagramCanvasBaseOptions<THEME>\n> extends DCanvas<THEME, OPTIONS> {\n\tprotected _layer: DDiagramLayerContainer;\n\tprotected _tile: DDiagramCanvasTile;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tconst layer = new DDiagramLayerContainer();\n\t\tthis._layer = layer;\n\t\tthis.addChild( layer );\n\n\t\tconst tile = this._tile = new DDiagramCanvasTile( this, options && options.tile );\n\t\ttile.init();\n\t}\n\n\tget tile(): DDiagramCanvasTile {\n\t\treturn this._tile;\n\t}\n\n\tget layer(): DDiagramLayerContainer {\n\t\treturn this._layer;\n\t}\n\n\tinitialize( shapes: EShape[] ): void {\n\t\t// DO NOTHING\n\t}\n\n\tdestroy(): void {\n\t\tif( ! this._destroyed ) {\n\t\t\tthis._tile.destroy();\n\t\t\tthis._layer.destroy();\n\t\t\tsuper.destroy();\n\t\t}\n\t}\n\n\thitTest( global: IPoint, handler?: ( shape: EShape ) => boolean ): EShape | null {\n\t\tconst layers = this._layer.children;\n\t\tfor( let i = layers.length - 1; 0 <= i; --i ) {\n\t\t\tconst layer = layers[ i ];\n\t\t\tconst shape = layer.hitTest( global, handler );\n\t\t\tif( shape != null ) {\n\t\t\t\treturn shape;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramCanvasBase\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DDiagramCanvasBase, DDiagramCanvasBaseOptions, DThemeDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DDiagramSerialized, DDiagramSerializedItem, DDiagramSerializedVersion } from \"./d-diagram-serialized\";\nimport { EShapeResourceManagerSerialization } from \"./shape/e-shape-resource-manager-serialization\";\nimport { ESnapper } from \"./snapper/e-snapper\";\nimport { ESnapperTargetValueType } from \"./snapper/e-snapper-target-value\";\n\nexport interface DDiagramCanvasEditorOptions<\n\tTHEME extends DThemeDiagramCanvasEditor = DThemeDiagramCanvasEditor\n> extends DDiagramCanvasBaseOptions<THEME> {\n\tsnapper: ESnapper;\n}\n\nexport interface DThemeDiagramCanvasEditor extends DThemeDiagramCanvasBase {\n\n}\n\nexport class DDiagramCanvasEditor<\n\tTHEME extends DThemeDiagramCanvasEditor = DThemeDiagramCanvasEditor,\n\tOPTIONS extends DDiagramCanvasEditorOptions<THEME> = DDiagramCanvasEditorOptions<THEME>\n> extends DDiagramCanvasBase<THEME, OPTIONS> {\n\tprotected _snapper: ESnapper;\n\tprotected _snapperGraphics: Graphics;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis.shadow = this.theme.newShadowWeak();\n\n\t\tconst snapperGraphics = new Graphics();\n\t\tsnapperGraphics.visible = false;\n\t\tthis.addChildAt( snapperGraphics, this.children.length - 1 );\n\t\tthis._snapperGraphics = snapperGraphics;\n\n\t\tconst snapper = options.snapper;\n\t\tsnapper.target.on( \"change\", (): void => {\n\t\t\tthis.toDirty();\n\t\t\tDApplications.update( this );\n\t\t});\n\t\tthis._snapper = snapper;\n\t}\n\n\tserialize( id: number | undefined ): DDiagramSerialized {\n\t\tconst manager = new EShapeResourceManagerSerialization();\n\t\tconst items: DDiagramSerializedItem[] = [];\n\t\tconst background = this.background;\n\t\treturn {\n\t\t\tversion: DDiagramSerializedVersion,\n\t\t\tid,\n\t\t\tname: this.name,\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\tbackground: {\n\t\t\t\tcolor: background.getColor( 0 ),\n\t\t\t\talpha: background.getAlpha( 0 )\n\t\t\t},\n\t\t\ttile: this._tile.serialize(),\n\t\t\tresources: manager.serialize(),\n\t\t\tlayers: this._layer.serialize( manager, items ),\n\t\t\titems,\n\t\t\tsnap: this._snapper.serialize()\n\t\t};\n\t}\n\n\tonReflow(): void {\n\t\tsuper.onReflow();\n\n\t\tconst snapperGraphics = this._snapperGraphics;\n\t\tconst target = this._snapper.target;\n\t\tif( target.visible ) {\n\t\t\tconst borderColor = 0x1e87f0;\n\t\t\tconst borderWidth = 1;\n\t\t\tconst borderAlpha = 0.5;\n\t\t\tconst width = this.width + 0.5;\n\t\t\tconst height = this.height + 0.5;\n\t\t\tconst values = target.values;\n\t\t\tsnapperGraphics.clear();\n\t\t\tsnapperGraphics.lineStyle( 0, 0, 0, 0 );\n\t\t\tsnapperGraphics.beginFill( borderColor, borderAlpha );\n\t\t\tfor( let i = 0, imax = values.length; i < imax; ++i ) {\n\t\t\t\tconst value = values[ i ];\n\t\t\t\tif( value.type === ESnapperTargetValueType.VERTICAL ) {\n\t\t\t\t\tsnapperGraphics.drawRect( value.position, 0, borderWidth, height );\n\t\t\t\t} else {\n\t\t\t\t\tsnapperGraphics.drawRect( 0, value.position, width, borderWidth );\n\t\t\t\t}\n\t\t\t}\n\t\t\tsnapperGraphics.endFill();\n\t\t\tsnapperGraphics.visible = true;\n\t\t} else {\n\t\t\tsnapperGraphics.visible = false;\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramCanvasEditor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramCanvasTileMapping } from \"./d-diagram-canvas-mapping\";\n\nexport const DDiagramSerializedVersion = 1;\n\nexport interface DDiagramSerializedTagRange {\n\t[ 0 ]: number; // type\n\t[ 1 ]: number; // from\n\t[ 2 ]: number; // to\n}\n\nexport interface DDiagramSerializedTagValue {\n\t[ 0 ]: number; // id (Stored as a resouce)\n\t[ 1 ]: number; // initial value (Stored as a resource)\n\t[ 2 ]: number; // format (Stored as a resouce)\n\t[ 3 ]: number; // Range (Stored as a resource)\n\t[ 4 ]: number; // Capacity\n\t[ 5 ]: number; // Order\n}\n\nexport interface DDiagramSerializedFill {\n\t[ 0 ]: number; // enable (0: false, 1: true)\n\t[ 1 ]: number; // color\n\t[ 2 ]: number; // alpha\n}\n\nexport interface DDiagramSerializedStroke {\n\t[ 0 ]: number; // enable (0: false, 1: true)\n\t[ 1 ]: number; // color\n\t[ 2 ]: number; // alpha\n\t[ 3 ]: number; // width\n\t[ 4 ]: number; // align\n\t[ 5 ]: number; // side\n}\n\nexport interface DDiagramSerializedTextOutline {\n\t[ 0 ]: number; // enable (0: false, 1: true)\n\t[ 1 ]: number; // color\n\t[ 2 ]: number; // alpha\n\t[ 3 ]: number; // width\n}\n\nexport interface DDiagramSerializedText {\n\t[  0 ]: number; // value (Stored as a resouce)\n\t[  1 ]: number; // color\n\t[  2 ]: number; // alpha\n\t[  3 ]: number; // family (Stored as a resouce)\n\t[  4 ]: number; // size\n\t[  5 ]: number; // weight (0: normal, 1: bold)\n\t[  6 ]: number; // align (Stored as a resource)\n\t[  7 ]: number; // margin (Stored as a resource)\n\t[  8 ]: number; // style (0: normal, 1: italic)\n\t[  9 ]: number; // outline (Stored as a resource)\n\t[ 10 ]: number; // spacing (Stored as a resource)\n\t[ 11 ]: number; // direction\n\t[ 12 ]: number; // padding\n\t[ 13 ]: number; // clipping (0: false, 1: true)\n}\n\nexport interface DDiagramSerializedItem {\n\t[  0 ]: number; // type\n\t[  1 ]: number; // id (Stored as resource)\n\t[  2 ]: number; // x\n\t[  3 ]: number; // y\n\t[  4 ]: number; // width\n\t[  5 ]: number; // height\n\t[  6 ]: number; // rotation\n\t[  7 ]: number; // skew\n\t[  8 ]: number; // fill (Stored as a resource)\n\t[  9 ]: number; // stroke (Stored as a resource)\n\t[ 10 ]: number; // cursor (Stored as a resource)\n\t[ 11 ]: number; // text (Stored as a resource)\n\t[ 12 ]: number; // tag (Stored as a resource)\n\t[ 13 ]: number; // radius\n\t[ 14 ]: number; // Corner\n\t[ 15 ]: number; // resource (Stored as a resouce)\n\t[ 16 ]: number; // layer\n\t[ 17 ]: number[]; // actions\n\t[ 18 ]: number; // Image (Stored as a resource)\n\t[ 19 ]: number; // Gradient\n\t[ 20 ]: DDiagramSerializedItem[];\n\t[ 21 ]: number; // pivot x\n\t[ 22 ]: number; // pivot y\n\t[ 23 ]: number; // (interactive ? 1 : 0) | (unfocusable ? 2 : 0)\n\t[ 24 ]: number; // shortcut\n\t[ 25 ]: number; // title\n}\n\nexport interface DDiagramSerializedLayer {\n\t[ 0 ]: string;\n}\n\nexport interface DDiagramSerializedSnapTargetValue {\n\t[ 0 ]: number; // 0: Horizontal, 1: Vertical\n\t[ 1 ]: number; // Position\n}\n\nexport interface DDiagramSerializedSnapTarget {\n\t[ 0 ]: number; // Snap on guide (0: Off, 1: On)\n\t[ 1 ]: number; // Visibility (0: Invisible, 1: Visible)\n\t[ 2 ]: DDiagramSerializedSnapTargetValue[]; // Snap targets\n}\n\nexport interface DDiagramSerializedSnapGrid {\n\t[ 0 ]: number; // Snap on grid (0: Off, 1: On)\n\t[ 1 ]: number; // Grid size\n}\n\nexport interface DDiagramSerializedSnap {\n\t[ 0 ]: number; // Snap (0: Off, 1: On)\n\t[ 1 ]: DDiagramSerializedSnapTarget;\n\t[ 2 ]: DDiagramSerializedSnapGrid;\n}\n\nexport interface DDiagramSerialized {\n\tversion: number;\n\tid?: number;\n\tname: string;\n\twidth: number;\n\theight: number;\n\tbackground?: {\n\t\tcolor?: number | null,\n\t\talpha?: number\n\t};\n\ttile?: {\n\t\tmapping?: DDiagramCanvasTileMapping;\n\t};\n\tresources: string[];\n\tlayers: DDiagramSerializedLayer[];\n\titems: DDiagramSerializedItem[];\n\tsnap?: DDiagramSerializedSnap;\n}\n\nexport interface DDiagramSerializedSimple {\n\tversion: number;\n\tid: number | undefined;\n\tname: string;\n\tdata: string;\n}\n\nexport interface DDiagramSerializedName {\n\tid: number;\n\tname: string;\n}\n\nexport interface DDiagramSerializedTag {\n\tgid: number;\n\tid: string;\n\tsource: string;\n\tdevice: string;\n\tsensor: string;\n\ttype: string;\n\tinterval: number;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DDiagramCanvasBase, DDiagramCanvasBaseOptions, DThemeDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DDiagramCanvasIdMap } from \"./d-diagram-canvas-id-map\";\nimport { DDiagramCanvasTagMap } from \"./d-diagram-canvas-tag-map\";\nimport { EShape } from \"./shape/e-shape\";\nimport { EShapeBase } from \"./shape/variant/e-shape-base\";\nimport { UtilPointerEvent } from \"./util\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\n\nexport interface DDiagramCanvasOptions<\n\tTHEME extends DThemeDiagramCanvas = DThemeDiagramCanvas\n> extends DDiagramCanvasBaseOptions<THEME> {\n\n}\n\nexport interface DThemeDiagramCanvas extends DThemeDiagramCanvasBase {\n\n}\n\nexport class DDiagramCanvas<\n\tTHEME extends DThemeDiagramCanvas = DThemeDiagramCanvas,\n\tOPTIONS extends DDiagramCanvasOptions<THEME> = DDiagramCanvasOptions<THEME>\n> extends DDiagramCanvasBase<THEME, OPTIONS> {\n\ttags: DDiagramCanvasTagMap;\n\tinteractives: EShape[];\n\tactionables: EShape[];\n\tids: DDiagramCanvasIdMap;\n\n\tprotected _workLocal: Point;\n\tprotected _workGlobal: Point;\n\tprotected _lastOverShape: EShape | null;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.tags = {};\n\t\tthis.interactives = [];\n\t\tthis.actionables = [];\n\t\tthis.ids = {};\n\t\tthis._workLocal = new Point();\n\t\tthis._workGlobal = new Point();\n\t\tthis._lastOverShape = null;\n\t}\n\n\tinitialize(): void {\n\t\tconst time = Date.now();\n\t\tconst tags = this.tags;\n\t\tconst interactives = this.interactives;\n\t\tconst actionables = this.actionables;\n\t\tconst ids = this.ids;\n\t\tconst layers = this._layer.children;\n\n\t\tfor( let i = 0, imax = layers.length; i < imax; ++i ) {\n\t\t\tthis.initializeShapes( layers[ i ].children, tags, interactives, actionables, ids );\n\t\t}\n\n\t\tfor( let i = 0, imax = layers.length; i < imax; ++i ) {\n\t\t\tthis.updateShapes( layers[ i ].children, time );\n\t\t}\n\n\t\tthis.initializeFocus();\n\t}\n\n\tprotected initializeFocus(): void {\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( layer ) {\n\t\t\tconst focusController = layer.getFocusController();\n\t\t\tconst focusable = focusController.findFocusable( this, false, true, true );\n\t\t\tif( focusable ) {\n\t\t\t\tfocusController.setFocused( focusable, true, true );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected initializeShapes(\n\t\tshapes: EShape[], tags: DDiagramCanvasTagMap,\n\t\tinteractives: EShape[], actionables: EShape[],\n\t\tids: DDiagramCanvasIdMap\n\t): void {\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\t// Tag mappings\n\t\t\tconst tag = shape.tag;\n\t\t\tfor( let j = 0, jmax = tag.size(); j < jmax; ++j ) {\n\t\t\t\tconst value = tag.get( j );\n\t\t\t\tif( value ) {\n\t\t\t\t\tconst valueId = value.id;\n\t\t\t\t\tif( 0 < valueId.length ) {\n\t\t\t\t\t\tlet values = tags[ valueId ];\n\t\t\t\t\t\tif( values == null ) {\n\t\t\t\t\t\t\tvalues = [];\n\t\t\t\t\t\t\ttags[ valueId ] = values;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Id mappings\n\t\t\tconst shapeId = shape.id;\n\t\t\tif( 0 < shapeId.length ) {\n\t\t\t\tconst mapping: EShape[] | undefined = ids[ shapeId ];\n\t\t\t\tif( mapping == null ) {\n\t\t\t\t\tids[ shapeId ] = [ shape ];\n\t\t\t\t} else {\n\t\t\t\t\tmapping.push( shape );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Interactives\n\t\t\tconst runtime = shape.runtime;\n\t\t\tif( shape.interactive || (0 < shape.cursor.length) || (runtime && runtime.interactive) ) {\n\t\t\t\tinteractives.push( shape );\n\t\t\t}\n\n\t\t\t// Actionables\n\t\t\tif( runtime && 0 < runtime.actions.length ) {\n\t\t\t\tactionables.push( shape );\n\t\t\t}\n\n\t\t\t// Shortcuts\n\t\t\tconst shortcut = shape.shortcut;\n\t\t\tif( shortcut != null ) {\n\t\t\t\tUtilKeyboardEvent.on( this, shortcut, ( e: KeyboardEvent ): void => {\n\t\t\t\t\tshape.onShortcut( e );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Children\n\t\t\tconst children = shape.children;\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tthis.initializeShapes( children, tags, interactives, actionables, ids );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateShapes( shapes: EShape[], time: number ): void {\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tshapes[ i ].update( time );\n\t\t}\n\t}\n\n\tonShapeMove( e: interaction.InteractionEvent ): boolean {\n\t\tconst global = e.data.global;\n\t\tconst local = this._workLocal;\n\t\tconst interactives = this.interactives;\n\t\tlet found: EShape | null = null;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst interactive = interactives[ i ];\n\t\t\tif( interactive.visible ) {\n\t\t\t\tinteractive.toLocal( global, undefined, local );\n\t\t\t\tif( interactive.contains( local ) ) {\n\t\t\t\t\tfound = interactive;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst layer = DApplications.getLayer( this );\n\t\tif( found ) {\n\t\t\tif( 0 < found.cursor.length ) {\n\t\t\t\tif( layer && layer.view.style.cursor !== found.cursor ) {\n\t\t\t\t\tlayer.view.style.cursor = found.cursor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lastOverShape = this._lastOverShape;\n\t\t\tif( found === lastOverShape ) {\n\t\t\t\tconst runtime = lastOverShape.runtime;\n\t\t\t\tif( runtime ) {\n\t\t\t\t\truntime.onPointerMove( lastOverShape, e );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._lastOverShape = found;\n\n\t\t\t\t// Previous\n\t\t\t\tif( lastOverShape ) {\n\t\t\t\t\tconst previousRuntime = lastOverShape.runtime;\n\t\t\t\t\tif( previousRuntime ) {\n\t\t\t\t\t\tpreviousRuntime.onPointerOut( lastOverShape, e );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Parents\n\t\t\t\t\tlet lastOverParent = lastOverShape.parent;\n\t\t\t\t\twhile( (lastOverParent instanceof EShapeBase) && lastOverParent !== found ) {\n\t\t\t\t\t\tconst parentRuntime = lastOverShape.runtime;\n\t\t\t\t\t\tif( parentRuntime ) {\n\t\t\t\t\t\t\tparentRuntime.onPointerOut( lastOverParent, e );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastOverParent = lastOverParent.parent;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Next\n\t\t\t\tconst runtime = found.runtime;\n\t\t\t\tif( runtime ) {\n\t\t\t\t\truntime.onPointerOver( found, e );\n\t\t\t\t}\n\t\t\t\tif( layer ) {\n\t\t\t\t\tlayer.view.title = ( found.title || \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Parents\n\t\t\t\tlet parent = found.parent;\n\t\t\t\twhile( parent instanceof EShapeBase ) {\n\t\t\t\t\tconst parentRuntime = parent.runtime;\n\t\t\t\t\tif( parentRuntime ) {\n\t\t\t\t\t\tparentRuntime.onPointerOver( parent, e );\n\t\t\t\t\t}\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif( layer && layer.view.style.cursor !== \"auto\" ) {\n\t\t\t\tlayer.view.style.cursor = \"auto\";\n\t\t\t}\n\n\t\t\t// Previous\n\t\t\tconst lastOverShape = this._lastOverShape;\n\t\t\tthis._lastOverShape = null;\n\t\t\tif( lastOverShape ) {\n\t\t\t\tconst runtime = lastOverShape.runtime;\n\t\t\t\tif( runtime ) {\n\t\t\t\t\truntime.onPointerOut( lastOverShape, e );\n\t\t\t\t}\n\n\t\t\t\t// Parents\n\t\t\t\tlet lastOverParent = lastOverShape.parent;\n\t\t\t\twhile( lastOverParent instanceof EShapeBase ) {\n\t\t\t\t\tconst parentRuntime = lastOverParent.runtime;\n\t\t\t\t\tif( parentRuntime ) {\n\t\t\t\t\t\tparentRuntime.onPointerOut( lastOverParent, e );\n\t\t\t\t\t}\n\t\t\t\t\tlastOverParent = lastOverParent.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//\n\t\t\tif( layer ) {\n\t\t\t\tlayer.view.title = \"\";\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tonShapeDown( e: interaction.InteractionEvent ): boolean {\n\t\tconst interactives = this.interactives;\n\t\tconst global = e.data.global;\n\t\tconst local = this._workLocal;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst interactive = interactives[ i ];\n\t\t\tif( interactive.visible ) {\n\t\t\t\tinteractive.toLocal( global, undefined, local );\n\t\t\t\tif( interactive.contains( local ) ) {\n\t\t\t\t\tconst runtime = interactive.runtime;\n\t\t\t\t\tif( runtime ) {\n\t\t\t\t\t\truntime.onPointerDown( interactive, e );\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tonShapeUp( e: interaction.InteractionEvent ): boolean {\n\t\tconst interactives = this.interactives;\n\t\tconst global = e.data.global;\n\t\tconst local = this._workLocal;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst interactive = interactives[ i ];\n\t\t\tif( interactive.visible ) {\n\t\t\t\tinteractive.toLocal( global, undefined, local );\n\t\t\t\tif( interactive.contains( local ) ) {\n\t\t\t\t\tconst runtime = interactive.runtime;\n\t\t\t\t\tif( runtime ) {\n\t\t\t\t\t\truntime.onPointerUp( interactive, e );\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tonShapeClick( e: interaction.InteractionEvent ): boolean {\n\t\tconst interactives = this.interactives;\n\t\tconst global = e.data.global;\n\t\tconst local = this._workLocal;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst interactive = interactives[ i ];\n\t\t\tif( interactive.visible ) {\n\t\t\t\tinteractive.toLocal( global, undefined, local );\n\t\t\t\tif( interactive.contains( local ) ) {\n\t\t\t\t\tlet target: EShape = interactive;\n\t\t\t\t\twhile( true ) {\n\t\t\t\t\t\tconst runtime = target.runtime;\n\t\t\t\t\t\tif( runtime ) {\n\t\t\t\t\t\t\truntime.onPointerClick( target, e );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst parent = target.parent;\n\t\t\t\t\t\tif( parent instanceof EShapeBase ) {\n\t\t\t\t\t\t\ttarget = parent;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tonShapeDblClick( e: MouseEvent | TouchEvent, interactionManager: interaction.InteractionManager ): boolean {\n\t\tconst interactives = this.interactives;\n\t\tconst global = UtilPointerEvent.toGlobal( e, interactionManager, this._workGlobal );\n\t\tconst local = this._workLocal;\n\t\tfor( let i = interactives.length - 1; 0 <= i; --i ) {\n\t\t\tconst interactive = interactives[ i ];\n\t\t\tif( interactive.visible ) {\n\t\t\t\tinteractive.toLocal( global, undefined, local );\n\t\t\t\tif( interactive.contains( local ) ) {\n\t\t\t\t\tlet target: EShape = interactive;\n\t\t\t\t\twhile( true ) {\n\t\t\t\t\t\tconst runtime = target.runtime;\n\t\t\t\t\t\tif( runtime ) {\n\t\t\t\t\t\t\truntime.onPointerDblClick( target, e );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst parent = target.parent;\n\t\t\t\t\t\tif( parent instanceof EShapeBase ) {\n\t\t\t\t\t\t\ttarget = parent;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramCanvas\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DDiagramLayerContainer } from \"./d-diagram-layer-container\";\nimport { DDiagramSerialized, DDiagramSerializedSimple } from \"./d-diagram-serialized\";\nimport { EShape } from \"./shape/e-shape\";\nimport { EShapeDefaults } from \"./shape/e-shape-defaults\";\nimport { EShapeDeserializer } from \"./shape/e-shape-deserializer\";\n\nexport class DDiagrams {\n\tstatic toSerialized( simple: DDiagramSerializedSimple ): DDiagramSerialized {\n\t\tconst result: DDiagramSerialized = JSON.parse( simple.data );\n\t\tresult.id = simple.id;\n\t\treturn result;\n\t}\n\n\tstatic newLayer(\n\t\tserialized: DDiagramSerialized,\n\t\tcontainer: DDiagramLayerContainer\n\t): Promise<EShape[]> {\n\t\t// Layers\n\t\tconst pflayers = serialized.layers;\n\t\tfor( let i = 0, imax = pflayers.length; i < imax; ++i ) {\n\t\t\tcontainer.create( pflayers[ i ][ 0 ] || \"\" );\n\t\t}\n\n\t\t// Activate the first later if it exists\n\t\tif( 0 < container.size() ) {\n\t\t\tcontainer.active = container.children[ 0 ];\n\t\t}\n\n\t\t// Items\n\t\tconst pfresources = serialized.resources;\n\t\tconst pfitems = serialized.items;\n\t\tconst shapePromises = EShapeDeserializer.deserializeAll( pfitems, pfresources );\n\t\tif( shapePromises != null ) {\n\t\t\treturn shapePromises.then(( shapes: EShape[] ): EShape[] => {\n\t\t\t\tconst layers = container.children;\n\t\t\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\t\t\tconst pfitem = pfitems[ i ];\n\t\t\t\t\tconst shape = shapes[ i ];\n\t\t\t\t\tconst layer = layers[ pfitem[ 16 ] ];\n\t\t\t\t\tif( layer != null ) {\n\t\t\t\t\t\tshape.attach( layer );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn shapes;\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.resolve([]);\n\t\t}\n\t}\n\n\tstatic applyBackground(\n\t\tserialized: DDiagramSerialized,\n\t\tcanvas: DBase,\n\t\tcanvasContainer: DBase\n\t): void {\n\t\tconst background = serialized.background;\n\t\tconst backgroundColor = ( background && background.color != null ? background.color : 0xffffff );\n\t\tconst backgroundAlpha = ( background && background.alpha != null ? background.alpha : 1.0 );\n\t\tif( EShapeDefaults.IS_EDIT_MODE ) {\n\t\t\tcanvas.background.color = backgroundColor;\n\t\t\tcanvas.background.alpha = backgroundAlpha;\n\t\t} else {\n\t\t\tcanvasContainer.background.color = backgroundColor;\n\t\t\tconst layer = DApplications.getLayer( canvasContainer );\n\t\t\tif( layer ) {\n\t\t\t\tlayer.renderer.backgroundColor = backgroundColor;\n\t\t\t}\n\t\t\tcanvasContainer.background.alpha = backgroundAlpha;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DApplications } from \"./d-applications\";\nimport { DCanvasContainer, DCanvasContainerOptions, DThemeCanvasContainer } from \"./d-canvas-container\";\nimport { DDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DDiagramCanvasTilePyramidFactory } from \"./d-diagram-canvas-tile\";\nimport { DDiagramLayer } from \"./d-diagram-layer\";\nimport { DDiagramSerialized } from \"./d-diagram-serialized\";\nimport { DDiagrams } from \"./d-diagrams\";\nimport { EShape } from \"./shape/e-shape\";\n\nexport interface DDiagramBaseOptions<\n\tCANVAS extends DDiagramCanvasBase = DDiagramCanvasBase,\n\tTHEME extends DThemeDiagramBase = DThemeDiagramBase\n> extends DCanvasContainerOptions<CANVAS, THEME> {\n\ttile?: DDiagramCanvasTilePyramidFactory;\n}\n\nexport interface DThemeDiagramBase extends DThemeCanvasContainer {\n\n}\n\nexport abstract class DDiagramBase<\n\tCANVAS extends DDiagramCanvasBase = DDiagramCanvasBase,\n\tTHEME extends DThemeDiagramBase = DThemeDiagramBase,\n\tOPTIONS extends DDiagramBaseOptions<CANVAS, THEME> = DDiagramBaseOptions<CANVAS, THEME>\n> extends DCanvasContainer<CANVAS, THEME, OPTIONS> {\n\tprotected _serialized: DDiagramSerialized | null;\n\tprotected _tileFactory?: DDiagramCanvasTilePyramidFactory;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis._serialized = null;\n\t\tthis._tileFactory = options && options.tile;\n\t}\n\n\tset( serialized: DDiagramSerialized | null ) {\n\t\tconst oldSerialized = this._serialized;\n\t\tif( oldSerialized !== serialized ) {\n\t\t\tif( oldSerialized ) {\n\t\t\t\tthis._serialized = null;\n\t\t\t\tthis.onUnset();\n\t\t\t}\n\n\t\t\tthis._serialized = serialized;\n\t\t\tif( serialized ) {\n\t\t\t\tthis.onSet( serialized );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onSet( serialized: DDiagramSerialized ): void {\n\t\tconst canvas = this.newCanvas( serialized );\n\t\tDDiagrams.newLayer( serialized, canvas.layer ).then(( shapes: EShape[] ): void => {\n\t\t\tthis.initialize( shapes );\n\t\t\tcanvas.initialize( shapes );\n\t\t\tDApplications.update( this );\n\t\t});\n\t\tDDiagrams.applyBackground( serialized, canvas, this );\n\t\tthis.canvas = canvas;\n\t}\n\n\tprotected initialize( shapes: EShape[] ): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected abstract newCanvas( serialized: DDiagramSerialized ): CANVAS;\n\n\tprotected onUnset(): void {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas != null ) {\n\t\t\tthis.canvas = null;\n\t\t}\n\t}\n\n\tget(): DDiagramSerialized | null {\n\t\treturn this._serialized;\n\t}\n\n\tget layer(): DDiagramLayer | null {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas != null ) {\n\t\t\treturn canvas.layer.active;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramBase\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DControllerDocument } from \"./d-controller-document\";\nimport { DControllers } from \"./d-controllers\";\nimport { DDiagramBase, DDiagramBaseOptions, DThemeDiagramBase } from \"./d-diagram-base\";\nimport { DDiagramCanvasEditor } from \"./d-diagram-canvas-editor\";\nimport { DDiagramSerialized, DDiagramSerializedSimple, DDiagramSerializedVersion } from \"./d-diagram-serialized\";\nimport { DDiagrams } from \"./d-diagrams\";\nimport { ESnapper } from \"./snapper/e-snapper\";\n\nexport interface DDiagramEditorController {\n\tget( id: number ): Promise<DDiagramSerializedSimple>;\n\tsave( simple: DDiagramSerializedSimple ): Promise<number>;\n\tdelete( id: number ): Promise<void>;\n}\n\nexport interface DDiagramEditorOptions<\n\tTHEME extends DThemeDiagramEditor = DThemeDiagramEditor\n> extends DDiagramBaseOptions<DDiagramCanvasEditor, THEME> {\n\tcontroller: DDiagramEditorController;\n}\n\nexport interface DThemeDiagramEditor extends DThemeDiagramBase {\n\n}\n\nexport class DDiagramEditor<\n\tTHEME extends DThemeDiagramEditor = DThemeDiagramEditor,\n\tOPTIONS extends DDiagramEditorOptions<THEME> = DDiagramEditorOptions<THEME>\n> extends DDiagramBase<DDiagramCanvasEditor, THEME, OPTIONS> implements DControllerDocument<DDiagramSerialized> {\n\tprotected _isChanged: boolean = false;\n\tprotected _controller: DDiagramEditorController;\n\tsnapper: ESnapper;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis._controller = options.controller;\n\t\tthis._isChanged = false;\n\n\t\tconst commands = DControllers.getCommandController();\n\t\tcommands.on( \"dirty\", (): void => {\n\t\t\tif( this._isChanged !== true ) {\n\t\t\t\tthis._isChanged = true;\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t}\n\t\t});\n\n\t\tthis.snapper = new ESnapper( this );\n\t}\n\n\tprotected newCanvas( serialized: DDiagramSerialized ): DDiagramCanvasEditor {\n\t\treturn new DDiagramCanvasEditor({\n\t\t\tname: serialized.name,\n\t\t\twidth: serialized.width,\n\t\t\theight: serialized.height,\n\t\t\tsnapper: this.snapper,\n\t\t\ttile: {\n\t\t\t\tfactory: this._tileFactory,\n\t\t\t\tmapping: serialized.tile && serialized.tile.mapping\n\t\t\t}\n\t\t});\n\t}\n\n\tserialize(): DDiagramSerialized | null {\n\t\tconst canvas = this.canvas;\n\t\tconst serialized = this._serialized;\n\t\tif( canvas != null && serialized != null ) {\n\t\t\treturn canvas.serialize( serialized.id );\n\t\t}\n\t\treturn null;\n\t}\n\n\tsave(): Promise<unknown> | boolean {\n\t\tconst serialized = this.serialize();\n\t\tif( serialized != null ) {\n\t\t\treturn this.controller.save({\n\t\t\t\tversion: serialized.version,\n\t\t\t\tid: serialized.id,\n\t\t\t\tname: serialized.name,\n\t\t\t\tdata: JSON.stringify( serialized )\n\t\t\t})\n\t\t\t.then(( newId: number ): void => {\n\t\t\t\tthis._isChanged = false;\n\t\t\t\tserialized.id = newId;\n\t\t\t\tthis._serialized = serialized;\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\tthis.emit( \"success\", \"save\", this );\n\t\t\t}, ( reason: any ): void => {\n\t\t\t\tthis.emit( \"fail\", \"save\", this );\n\t\t\t});\n\t\t}\n\t\treturn true;\n\t}\n\n\tsaveAs( name: string ): Promise<unknown> | boolean {\n\t\tconst serialized = this.serialize();\n\t\tif( serialized != null ) {\n\t\t\tserialized.id = undefined;\n\t\t\tserialized.name = name;\n\t\t\treturn this.controller.save({\n\t\t\t\tversion: serialized.version,\n\t\t\t\tid: serialized.id,\n\t\t\t\tname: serialized.name,\n\t\t\t\tdata: JSON.stringify( serialized )\n\t\t\t})\n\t\t\t.then(( newId: number ): void => {\n\t\t\t\tthis._isChanged = false;\n\t\t\t\tserialized.id = newId;\n\t\t\t\tthis._serialized = serialized;\n\t\t\t\tconst canvas = this.canvas;\n\t\t\t\tif( canvas != null ) {\n\t\t\t\t\tcanvas.name = name;\n\t\t\t\t}\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t\tthis.emit( \"success\", \"save-as\", this );\n\t\t\t}, ( reason: any ): void => {\n\t\t\t\tthis.emit( \"fail\", \"save-as\", this );\n\t\t\t});\n\t\t}\n\t\treturn true;\n\t}\n\n\tdelete(): Promise<unknown> | boolean {\n\t\tconst serialized = this._serialized;\n\t\tif( serialized != null ) {\n\t\t\tif( serialized.id != null ) {\n\t\t\t\treturn this.controller.delete( serialized.id )\n\t\t\t\t.then((): void => {\n\t\t\t\t\tthis.set( null );\n\t\t\t\t\tthis.emit( \"success\", \"delete\", this );\n\t\t\t\t}, ( reason: any ): void => {\n\t\t\t\t\tthis.emit( \"fail\", \"delete\", this );\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.set( null );\n\t\t\t\tthis.emit( \"success\", \"delete\", this );\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tcreate( name: string, width: number, height: number ): Promise<unknown> | boolean {\n\t\tthis.set({\n\t\t\tversion: DDiagramSerializedVersion,\n\t\t\tid: undefined,\n\t\t\tname,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tresources: [],\n\t\t\tlayers: [[ \"Default layer\" ]],\n\t\t\titems: [],\n\t\t\tsnap: undefined\n\t\t});\n\t\treturn true;\n\t}\n\n\tprotected onSet( serialized: DDiagramSerialized ): void {\n\t\tsuper.onSet( serialized );\n\t\tconst snap = serialized.snap;\n\t\tconst snapper = this.snapper;\n\t\tif( snap != null ) {\n\t\t\tsnapper.deserialize( snap );\n\t\t} else {\n\t\t\tsnapper.reset();\n\t\t}\n\t\tthis._isChanged = false;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\tprotected onUnset(): void {\n\t\tsuper.onUnset();\n\t\tthis._isChanged = false;\n\t\tthis.emit( \"change\", this );\n\t}\n\n\topen( id: number ): Promise<unknown> | boolean {\n\t\treturn this._controller.get( id ).then(( simple: DDiagramSerializedSimple ): void => {\n\t\t\tthis.set( DDiagrams.toSerialized( simple ) );\n\t\t\tthis.emit( \"success\", \"open\", this );\n\t\t}, ( reason: any ): void => {\n\t\t\tthis.emit( \"fail\", \"open\", this );\n\t\t});\n\t}\n\n\tclose(): void {\n\t\tthis.set( null );\n\t}\n\n\tisChanged(): boolean {\n\t\treturn this._isChanged || this.isNew();\n\t}\n\n\tisNew(): boolean {\n\t\tconst serialized = this._serialized;\n\t\tif( serialized != null ) {\n\t\t\treturn serialized.id == null;\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetName(): string | null {\n\t\tconst serialized = this._serialized;\n\t\tif( serialized != null ) {\n\t\t\treturn serialized.name;\n\t\t}\n\t\treturn null;\n\t}\n\n\tget controller(): DDiagramEditorController {\n\t\treturn this._controller;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagramEditor\";\n\t}\n}\n","import { utils } from \"pixi.js\";\nimport { DApplicationTarget } from \"./d-application-like\";\nimport { DApplications } from \"./d-applications\";\nimport { DDiagramCanvasIdMap } from \"./d-diagram-canvas-id-map\";\nimport { EShape } from \"./shape/e-shape\";\n\nexport interface DDiagramShapeLayer {\n\tchildren: EShape[];\n}\n\nexport interface DDiagramShapeLayerContainer {\n\tchildren: DDiagramShapeLayer[];\n}\n\nexport interface DDiagramShapeCanvas {\n\tlayer: DDiagramShapeLayerContainer;\n\tids: DDiagramCanvasIdMap;\n\tactionables: EShape[];\n}\n\nexport interface DDiagramShapeDiagram extends DApplicationTarget {\n\tcanvas: DDiagramShapeCanvas | null;\n}\n\nexport class DDiagramShape extends utils.EventEmitter {\n\tprotected _diagram: DDiagramShapeDiagram;\n\tprotected _updateBound: () => void;\n\n\tconstructor( diagram: DDiagramShapeDiagram ) {\n\t\tsuper();\n\t\tthis._diagram = diagram;\n\t\tthis._updateBound = (): void => {\n\t\t\tDApplications.update( diagram );\n\t\t};\n\t}\n\n\tupdate(): void {\n\t\tconst diagram = this._diagram;\n\t\tconst canvas = diagram.canvas;\n\t\tif( canvas ) {\n\t\t\tconst actionables = canvas.actionables;\n\t\t\tif( 0 < actionables.length ) {\n\t\t\t\tlet effect = -1;\n\t\t\t\tconst time = Date.now();\n\t\t\t\tfor( let i = 0, imax = actionables.length; i < imax; ++i ) {\n\t\t\t\t\tconst actionable = actionables[ i ];\n\t\t\t\t\tactionable.update( time );\n\t\t\t\t\tconst runtime = actionable.runtime;\n\t\t\t\t\tif( runtime && time < runtime.effect ) {\n\t\t\t\t\t\tconst runtimeEffect = runtime.effect;\n\t\t\t\t\t\tif( time < runtimeEffect ) {\n\t\t\t\t\t\t\teffect = ( effect < 0 ? runtimeEffect : Math.min( effect, runtimeEffect ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( 0 <= effect ) {\n\t\t\t\t\tsetTimeout( this._updateBound, effect - Date.now() );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tget( id: string ): EShape | null {\n\t\tconst canvas = this._diagram.canvas;\n\t\tconst shapes = ( canvas && canvas.ids[ id ] );\n\t\treturn ( shapes && 0 < shapes.length ? shapes[ 0 ] : null );\n\t}\n\n\tgetAll( id: string ): EShape[] {\n\t\tconst canvas = this._diagram.canvas;\n\t\treturn ( canvas && canvas.ids[ id ] ) || [];\n\t}\n\n\teach( callback: ( shape: EShape ) => (boolean | void), reverse = false ): EShape | null {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst layers = canvas.layer.children;\n\t\t\tif( ! reverse ) {\n\t\t\t\tfor( let i = 0, imax = layers.length; i < imax; ++i ) {\n\t\t\t\t\tconst layer = layers[ i ];\n\t\t\t\t\tconst children = layer.children;\n\t\t\t\t\tfor( let j = 0, jmax = children.length; j < jmax; ++j ) {\n\t\t\t\t\t\tconst child = children[ j ];\n\t\t\t\t\t\tif( callback( child ) === false ) {\n\t\t\t\t\t\t\treturn child;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = layers.length - 1; 0 <= i; --i ) {\n\t\t\t\t\tconst layer = layers[ i ];\n\t\t\t\t\tconst children = layer.children;\n\t\t\t\t\tfor( let j = children.length - 1; 0 <= j; --j ) {\n\t\t\t\t\t\tconst child = children[ j ];\n\t\t\t\t\t\tif( callback( child ) === false ) {\n\t\t\t\t\t\t\treturn child;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n","import { DDiagramCanvasTagMap } from \"./d-diagram-canvas-tag-map\";\nimport { EShapeTagValueRangeType } from \"./shape/e-shape-tag-value-range\";\n\nexport interface DDiagramTagCanvas {\n\ttags: DDiagramCanvasTagMap;\n}\n\nexport interface DDiagramTagDiagram {\n\tcanvas: DDiagramTagCanvas | null;\n}\n\nexport class DDiagramTag {\n\tprotected _diagram: DDiagramTagDiagram;\n\n\tconstructor( diagram: DDiagramTagDiagram ) {\n\t\tthis._diagram = diagram;\n\t}\n\n\tupdate(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetIds(): string[] {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\treturn Object.keys( canvas.tags );\n\t\t}\n\t\treturn [];\n\t}\n\n\teach( callback: ( tagId: string ) => (boolean | void) ): string | null {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tags = canvas.tags;\n\t\t\tfor( const id in tags ) {\n\t\t\t\tif( callback( id ) === false ) {\n\t\t\t\t\treturn id;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( id: string, value: unknown, time?: number, from?: number | null, to?: number | null ): void {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tagValues = canvas.tags[ id ];\n\t\t\tif( tagValues != null ) {\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\n\t\t\t\t\tconst tagValue = tagValues[ i ];\n\t\t\t\t\tconst range = tagValue.range;\n\n\t\t\t\t\t// Range\n\t\t\t\t\trange.set( from, to );\n\n\t\t\t\t\t// Time\n\t\t\t\t\tif( time !== undefined ) {\n\t\t\t\t\t\ttagValue.time = time;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Value\n\t\t\t\t\ttagValue.value = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tclear( id: string ): void {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tagValues = canvas.tags[ id ];\n\t\t\tif( tagValues != null ) {\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\n\t\t\t\t\ttagValues[ i ].clear();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetAll( id: string, values: unknown[], times?: number[], from?: number | null, to?: number | null ): void {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tagValues = canvas.tags[ id ];\n\t\t\tif( tagValues != null ) {\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\n\t\t\t\t\tconst tagValue = tagValues[ i ];\n\t\t\t\t\tconst range = tagValue.range;\n\n\t\t\t\t\t// Range\n\t\t\t\t\trange.set( from, to );\n\n\t\t\t\t\t// Time\n\t\t\t\t\tif( times !== undefined ) {\n\t\t\t\t\t\ttagValue.times = times;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Value\n\t\t\t\t\ttagValue.values = values;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue( id: string, value: unknown, time?: number ): void {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tagValues = canvas.tags[ id ];\n\t\t\tif( tagValues != null ) {\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\n\t\t\t\t\tconst tagValue = tagValues[ i ];\n\n\t\t\t\t\tif( time !== undefined ) {\n\t\t\t\t\t\ttagValue.time = time;\n\t\t\t\t\t}\n\n\t\t\t\t\ttagValue.value = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValues( id: string, values: unknown[], times?: number[] ): void {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tagValues = canvas.tags[ id ];\n\t\t\tif( tagValues != null ) {\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\n\t\t\t\t\tconst tagValue = tagValues[ i ];\n\n\t\t\t\t\tif( times !== undefined ) {\n\t\t\t\t\t\ttagValue.times = times;\n\t\t\t\t\t}\n\n\t\t\t\t\ttagValue.values = values;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetTime( id: string, time: number ): void {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tagValues = canvas.tags[ id ];\n\t\t\tif( tagValues != null ) {\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\n\t\t\t\t\ttagValues[ i ].time = time;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetTimes( id: string, times: number[] ): void {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tagValues = canvas.tags[ id ];\n\t\t\tif( tagValues != null ) {\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\n\t\t\t\t\ttagValues[ i ].times = times;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetRange( id: string, from?: number | null, to?: number | null ): void {\n\t\tconst canvas = this._diagram.canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst tagValues = canvas.tags[ id ];\n\t\t\tif( tagValues != null ) {\n\t\t\t\tfor( let i = 0, imax = tagValues.length; i < imax; ++i ) {\n\t\t\t\t\tconst range = tagValues[ i ].range;\n\t\t\t\t\tif( from !== undefined ) {\n\t\t\t\t\t\tif( from !== null ) {\n\t\t\t\t\t\t\trange.type |= EShapeTagValueRangeType.FROM;\n\t\t\t\t\t\t\trange.from = from;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trange.type &= ~EShapeTagValueRangeType.FROM;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif( to !== undefined ) {\n\t\t\t\t\t\tif( to !== null ) {\n\t\t\t\t\t\t\trange.type |= EShapeTagValueRangeType.TO;\n\t\t\t\t\t\t\trange.to = to;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trange.type &= ~EShapeTagValueRangeType.TO;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Renderer } from \"pixi.js\";\nimport { DDiagramBase, DDiagramBaseOptions, DThemeDiagramBase } from \"./d-diagram-base\";\nimport { DDiagramCanvas } from \"./d-diagram-canvas\";\nimport { DDiagramSerialized } from \"./d-diagram-serialized\";\nimport { DDiagramShape } from \"./d-diagram-shape\";\nimport { DDiagramTag } from \"./d-diagram-tag\";\nimport { EShapeActionRuntime } from \"./shape/action/e-shape-action-runtime\";\nimport { EShapeActionRuntimeOpen } from \"./shape/action/e-shape-action-runtime-open\";\nimport { EShapeActionValue } from \"./shape/action/e-shape-action-value\";\nimport { EShape } from \"./shape/e-shape\";\nimport { EShapeRuntime } from \"./shape/e-shape-runtime\";\nimport { EShapeRuntimes } from \"./shape/e-shape-runtimes\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DDiagramOptions<\n\tTHEME extends DThemeDiagram = DThemeDiagram\n> extends DDiagramBaseOptions<DDiagramCanvas, THEME> {\n\n}\n\nexport interface DThemeDiagram extends DThemeDiagramBase {\n\n}\n\nexport class DDiagram<\n\tTHEME extends DThemeDiagram = DThemeDiagram,\n\tOPTIONS extends DDiagramOptions<THEME> = DDiagramOptions<THEME>\n> extends DDiagramBase<DDiagramCanvas, THEME, OPTIONS> {\n\ttag: DDiagramTag;\n\tshape: DDiagramShape;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\n\t\t// Hover handling\n\t\tthis.on( UtilPointerEvent.move, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( UtilPointerEvent.contains( this, e.target ) ) {\n\t\t\t\tconst canvas = this.canvas;\n\t\t\t\tif( canvas ) {\n\t\t\t\t\tcanvas.onShapeMove( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Pointer down / up handling\n\t\tthis.on( UtilPointerEvent.up, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( UtilPointerEvent.contains( this, e.target ) ) {\n\t\t\t\tconst canvas = this.canvas;\n\t\t\t\tif( canvas ) {\n\t\t\t\t\tcanvas.onShapeUp( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Click handling\n\t\tthis.on( \"click\", ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( UtilPointerEvent.contains( this, e.target ) ) {\n\t\t\t\tconst canvas = this.canvas;\n\t\t\t\tif( canvas ) {\n\t\t\t\t\tcanvas.onShapeClick( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//\n\t\tthis.tag = new DDiagramTag( this );\n\t\tthis.shape = new DDiagramShape( this );\n\t}\n\n\tprotected initialize( shapes: EShape[] ): void {\n\t\tconst formatterMap: { [format: string]: ( value: unknown ) => unknown } = {};\n\t\tconst initialMap: { [initial: string]: unknown | undefined } = {};\n\t\tconst actionMap: Map<EShapeActionValue, EShapeActionRuntime> = new Map<EShapeActionValue, EShapeActionRuntime>();\n\n\t\tfor( let i = 0, imax = shapes.length; i < imax; ++i ) {\n\t\t\tconst shape = shapes[ i ];\n\t\t\tconst runtimeConstructor = EShapeRuntimes[ shape.type ] || EShapeRuntime;\n\t\t\tconst runtime = shape.runtime = new (runtimeConstructor)( shape );\n\n\t\t\t// Tag\n\t\t\tconst tag = shape.tag;\n\t\t\tfor( let j = 0, jmax = tag.size(); j < jmax; ++j ) {\n\t\t\t\tconst value = tag.get( j );\n\t\t\t\tif( value ) {\n\t\t\t\t\t// Format\n\t\t\t\t\tconst tagFormat = value.format;\n\t\t\t\t\tconst tagInitial = value.initial;\n\t\t\t\t\tif( tagFormat in formatterMap ) {\n\t\t\t\t\t\tvalue.formatter = formatterMap[ tagFormat ];\n\t\t\t\t\t} else if( 0 < tagFormat.length ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst formatter = Function(\n\t\t\t\t\t\t\t\t\"value\",\n\t\t\t\t\t\t\t\t`try {` +\n\t\t\t\t\t\t\t\t\t`return (${tagFormat});` +\n\t\t\t\t\t\t\t\t`} catch( e1 ) {` +\n\t\t\t\t\t\t\t\t\t`try {` +\n\t\t\t\t\t\t\t\t\t\t`return (${0 < tagInitial.length ? tagInitial : 0});` +\n\t\t\t\t\t\t\t\t\t`} catch( e2 ) {` +\n\t\t\t\t\t\t\t\t\t\t`return 0;` +\n\t\t\t\t\t\t\t\t\t`}` +\n\t\t\t\t\t\t\t\t`}`\n\t\t\t\t\t\t\t) as any;\n\t\t\t\t\t\t\tformatterMap[ tagFormat ] = formatter;\n\t\t\t\t\t\t\tvalue.formatter = formatter;\n\t\t\t\t\t\t} catch( e ) {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Initial\n\t\t\t\t\tif( tagInitial in initialMap ) {\n\t\t\t\t\t\tvalue.value = initialMap[ tagInitial ];\n\t\t\t\t\t} else if( 0 < tagInitial.length ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvalue.value = initialMap[ tagInitial ] = (Function(\n\t\t\t\t\t\t\t\t`try {` +\n\t\t\t\t\t\t\t\t\t`return (${tagInitial});` +\n\t\t\t\t\t\t\t\t`} catch( e ) {` +\n\t\t\t\t\t\t\t\t\t`return 0;` +\n\t\t\t\t\t\t\t\t`}`\n\t\t\t\t\t\t\t)());\n\t\t\t\t\t\t} catch( e ) {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Initialize runtime actions\n\t\t\tconst values = shape.action.values;\n\t\t\tconst actions = runtime.actions;\n\t\t\tfor( let j = 0, jmax = values.length; j < jmax; ++j ) {\n\t\t\t\tconst value = values[ j ];\n\t\t\t\tlet action: EShapeActionRuntime | undefined | null = actionMap.get( value );\n\t\t\t\tif( action == null ) {\n\t\t\t\t\taction = value.toRuntime( shape );\n\t\t\t\t\tif( action != null ) {\n\t\t\t\t\t\tif( action instanceof EShapeActionRuntimeOpen ) {\n\t\t\t\t\t\t\tif( shape.cursor.length <= 0 ) {\n\t\t\t\t\t\t\t\tshape.cursor = \"pointer\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tactionMap.set( value, action );\n\t\t\t\t\t\tactions.push( action );\n\t\t\t\t\t\truntime.reset |= action.reset;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tactions.push( action );\n\t\t\t\t\truntime.reset |= action.reset;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Children\n\t\t\tconst children = shape.children;\n\t\t\tif( 0 < children.length ) {\n\t\t\t\tthis.initialize( children );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected newCanvas( serialized: DDiagramSerialized ): DDiagramCanvas {\n\t\treturn new DDiagramCanvas({\n\t\t\tname: serialized.name,\n\t\t\twidth: serialized.width,\n\t\t\theight: serialized.height,\n\t\t\tbackground: {\n\t\t\t\tcolor: null\n\t\t\t},\n\t\t\tborder: {\n\t\t\t\tcolor: null\n\t\t\t},\n\t\t\ttile: {\n\t\t\t\tfactory: this._tileFactory,\n\t\t\t\tmapping: serialized.tile && serialized.tile.mapping\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected onDown( e: interaction.InteractionEvent ): void {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas && canvas.onShapeDown( e ) ) {\n\t\t\treturn;\n\t\t}\n\t\tsuper.onDown( e );\n\t}\n\n\tonDblClick( e: MouseEvent | TouchEvent, interactionManager: interaction.InteractionManager ): boolean {\n\t\tconst canvas = this.canvas;\n\t\tif( canvas && canvas.onShapeDblClick( e, interactionManager ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn super.onDblClick( e, interactionManager );\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tthis.shape.update();\n\t\tsuper.render( renderer );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDiagram\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DImage, DImageOptions, DThemeImage } from \"./d-image\";\n\nexport interface DDialogConfirmMessageOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogConfirmMessage = DThemeDialogConfirmMessage\n> extends DImageOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeDialogConfirmMessage extends DThemeImage {\n\n}\n\nexport class DDialogConfirmMessage<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogConfirmMessage = DThemeDialogConfirmMessage,\n\tOPTIONS extends DDialogConfirmMessageOptions<VALUE, THEME> = DDialogConfirmMessageOptions<VALUE, THEME>\n> extends DImage<VALUE, THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogConfirmMessage\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DDialogCommand, DDialogCommandOptions, DThemeDialogCommand } from \"./d-dialog-command\";\nimport { DDialogConfirmMessage, DDialogConfirmMessageOptions } from \"./d-dialog-confirm-message\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DStateAwareOrValue } from \"./d-state-aware\";\nimport { utilIsFunction } from \"./util/util-is-function\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DDialogConfirmOptions<\n\tTHEME extends DThemeDialogConfirm = DThemeDialogConfirm\n> extends DDialogCommandOptions<THEME> {\n\tmessage?: DStateAwareOrValue<string> | DDialogConfirmMessageOptions | DDialogConfirmMessage;\n}\n\nexport interface DThemeDialogConfirm extends DThemeDialogCommand {\n\tgetMessage(): DStateAwareOrValue<string>;\n}\n\nexport class DDialogConfirm<\n\tTHEME extends DThemeDialogConfirm = DThemeDialogConfirm,\n\tOPTIONS extends DDialogConfirmOptions<THEME> = DDialogConfirmOptions<THEME>\n> extends DDialogCommand<THEME, OPTIONS> {\n\tprotected _message!: DDialogConfirmMessage;\n\n\tprotected onInit( layout: DLayoutVertical, options?: OPTIONS ) {\n\t\tsuper.onInit( layout, options );\n\t\tconst message = this.toMessage( this.theme, options );\n\t\tthis._message = message;\n\t\tlayout.addChild( message );\n\t}\n\n\tprotected toMessage( theme: DThemeDialogConfirm, options?: DDialogConfirmOptions ): DDialogConfirmMessage {\n\t\tif( options && options.message != null ) {\n\t\t\tconst message = options.message;\n\t\t\tif( utilIsString( message ) || utilIsFunction( message ) ) {\n\t\t\t\treturn this.newMessage(\n\t\t\t\t\tthis.toMessageOptions( message )\n\t\t\t\t);\n\t\t\t} else if( message instanceof DBase ) {\n\t\t\t\treturn message;\n\t\t\t} else {\n\t\t\t\treturn this.newMessage(\n\t\t\t\t\tthis.toMessageOptionsMerged( message, theme.getMessage() )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn this.newMessage(\n\t\t\tthis.toMessageOptions( theme.getMessage() )\n\t\t);\n\t}\n\n\tprotected toMessageOptionsMerged(\n\t\toptions: DDialogConfirmMessageOptions,\n\t\tmessage: DStateAwareOrValue<string>\n\t): DDialogConfirmMessageOptions {\n\t\tif( options.text == null ) {\n\t\t\toptions.text =　{};\n\t\t}\n\t\tif( options.text.value === undefined ) {\n\t\t\toptions.text.value = message;\n\t\t}\n\t\treturn options;\n\t}\n\n\tprotected toMessageOptions( message: DStateAwareOrValue<string> ): DDialogConfirmMessageOptions {\n\t\treturn {\n\t\t\ttext: {\n\t\t\t\tvalue: message\n\t\t\t}\n\t\t};\n\t}\n\n\tprotected newMessage( options: DDialogConfirmMessageOptions ): DDialogConfirmMessage {\n\t\treturn new DDialogConfirmMessage( options );\n\t}\n\n\tget message(): DDialogConfirmMessage {\n\t\treturn this._message;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogConfirm\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogConfirm, DDialogConfirmOptions, DThemeDialogConfirm } from \"./d-dialog-confirm\";\n\nexport interface DDialogConfirmDeleteOptions<\n\tTHEME extends DThemeDialogConfirm\n> extends DDialogConfirmOptions<THEME> {\n\n}\n\nexport interface DThemeDialogConfirmDelete extends DThemeDialogConfirm {\n\n}\n\nexport class DDialogConfirmDelete<\n\tTHEME extends DThemeDialogConfirm = DThemeDialogConfirm,\n\tOPTIONS extends DDialogConfirmDeleteOptions<THEME> = DDialogConfirmDeleteOptions<THEME>\n> extends DDialogConfirm<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogConfirmDelete\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogConfirm, DDialogConfirmOptions, DThemeDialogConfirm } from \"./d-dialog-confirm\";\n\nexport interface DDialogConfirmDiscardOptions<\n\tTHEME extends DThemeDialogConfirm\n> extends DDialogConfirmOptions<THEME> {\n\n}\n\nexport interface DThemeDialogConfirmDiscard extends DThemeDialogConfirm {\n\n}\n\nexport class DDialogConfirmDiscard<\n\tTHEME extends DThemeDialogConfirm = DThemeDialogConfirm,\n\tOPTIONS extends DDialogConfirmDiscardOptions<THEME> = DDialogConfirmDiscardOptions<THEME>\n> extends DDialogConfirm<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogConfirmDiscard\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton } from \"./d-button\";\nimport { DButtonPrimary } from \"./d-button-primary\";\nimport { DDialog, DDialogOptions, DThemeDialog } from \"./d-dialog\";\nimport { DInputTextAndLabel } from \"./d-input-text-and-label\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutSpace } from \"./d-layout-space\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DDialogInputTextOptions<THEME extends DThemeDialog> extends DDialogOptions<THEME> {\n\tok?: string;\n\tcancel?: string;\n\tlabel?: string;\n}\n\nexport interface DThemeDialogInputText extends DThemeDialog {\n\tgetOk(): string;\n\tgetCancel(): string;\n\tgetLabel(): string;\n\tgetLabelWidth(): number;\n}\n\nexport class DDialogInputText<\n\tTHEME extends DThemeDialogInputText = DThemeDialogInputText,\n\tOPTIONS extends DDialogInputTextOptions<THEME> = DDialogInputTextOptions<THEME>\n> extends DDialog<THEME, OPTIONS> {\n\tprotected _input: DInputTextAndLabel;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tconst theme = this.theme;\n\n\t\tconst layout = new DLayoutVertical({\n\t\t\tparent: this,\n\t\t\tx: \"padding\", y: \"padding\",\n\t\t\twidth: \"padding\", height: \"auto\"\n\t\t});\n\n\t\t// Input\n\t\tthis._input = new DInputTextAndLabel({\n\t\t\tparent: layout,\n\t\t\twidth: \"padding\", height: \"auto\",\n\t\t\tinput: {\n\t\t\t\tweight: 1,\n\t\t\t\ton: {\n\t\t\t\t\tenter: () => {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\tthis.onOk();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tlabel: {\n\t\t\t\twidth: theme.getLabelWidth(),\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: ( options != null && options.label != null ?\n\t\t\t\t\t\toptions.label : theme.getLabel()\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t},\n\t\t\tspace: {\n\t\t\t\twidth: theme.getLabelWidth()\n\t\t\t}\n\t\t});\n\n\t\t// Buttons\n\t\tnew DLayoutHorizontal({\n\t\t\tparent: layout,\n\t\t\twidth: \"padding\", height: \"auto\",\n\t\t\tpadding: {\n\t\t\t\ttop: this.padding.getBottom()\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tnew DLayoutSpace({\n\t\t\t\t\tweight: 1\n\t\t\t\t}),\n\t\t\t\tnew DButtonPrimary({\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: ( options != null && options.ok != null ?\n\t\t\t\t\t\t\toptions.ok : theme.getOk()\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: () => {\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\tthis.onOk();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew DButton({\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tvalue: ( options != null && options.cancel != null ?\n\t\t\t\t\t\t\toptions.cancel : theme.getCancel()\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\ton: {\n\t\t\t\t\t\tactive: () => {\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\tthis.onCancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew DLayoutSpace({\n\t\t\t\t\tweight: 1\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t}\n\n\tget input() {\n\t\treturn this._input.input;\n\t}\n\n\tprotected onOk() {\n\t\tthis.emit( \"ok\", this._input.input.value, this );\n\t}\n\n\tprotected onCancel() {\n\t\tthis.emit( \"cancel\", this );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogInputText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogConfirm, DDialogConfirmOptions, DThemeDialogConfirm } from \"./d-dialog-confirm\";\n\nexport interface DDialogMessageOptions<THEME extends DThemeDialogMessage> extends DDialogConfirmOptions<THEME> {\n\n}\n\nexport interface DThemeDialogMessage extends DThemeDialogConfirm {\n\n}\n\nexport class DDialogMessage<\n\tTHEME extends DThemeDialogMessage = DThemeDialogMessage,\n\tOPTIONS extends DDialogMessageOptions<THEME> = DDialogMessageOptions<THEME>\n> extends DDialogConfirm<THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogMessage\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n\tDDialogConfirmMessage, DDialogConfirmMessageOptions, DThemeDialogConfirmMessage\n} from \"./d-dialog-confirm-message\";\n\nexport class DDialogProcessingMessage<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogConfirmMessage = DThemeDialogConfirmMessage,\n\tOPTIONS extends DDialogConfirmMessageOptions<VALUE, THEME> = DDialogConfirmMessageOptions<VALUE, THEME>\n> extends DDialogConfirmMessage<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogProcessingMessage\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DDialogConfirm, DDialogConfirmOptions, DThemeDialogConfirm } from \"./d-dialog-confirm\";\nimport { DDialogConfirmMessage, DDialogConfirmMessageOptions } from \"./d-dialog-confirm-message\";\nimport { DDialogProcessingMessage } from \"./d-dialog-processing-message\";\n\nexport interface DDialogProcessingOptions<THEME extends DThemeDialogProcessing> extends DDialogConfirmOptions<THEME> {\n\tinterval?: number;\n}\n\nexport interface DThemeDialogProcessing extends DThemeDialogConfirm {\n\tgetInterval(): number;\n}\n\nexport class DDialogProcessing<\n\tTHEME extends DThemeDialogProcessing = DThemeDialogProcessing,\n\tOPTIONS extends DDialogProcessingOptions<THEME> = DDialogProcessingOptions<THEME>\n> extends DDialogConfirm<THEME, OPTIONS> {\n\tprotected _isDone: boolean;\n\tprotected _startTime: number;\n\tprotected _interval: number;\n\tprotected _timeoutId?: number;\n\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis._isDone = true;\n\t\tthis._startTime =  0;\n\t\tthis._interval = ( options && options.interval != null ? options.interval : this.theme.getInterval() );\n\t}\n\n\tprotected newMessage( options: DDialogConfirmMessageOptions ): DDialogConfirmMessage {\n\t\treturn new DDialogProcessingMessage( options );\n\t}\n\n\tprotected onOpen() {\n\t\tthis._isDone = false;\n\t\tthis._startTime = Date.now();\n\t\tconst timeoutId = this._timeoutId;\n\t\tif( timeoutId != null ) {\n\t\t\tclearTimeout( timeoutId );\n\t\t}\n\t\tthis._message.setStates( DBaseState.NONE, DBaseState.SUCCEEDED | DBaseState.FAILED );\n\t\tconst buttonLayout = this._buttonLayout;\n\t\tif( buttonLayout != null ) {\n\t\t\tbuttonLayout.setDisabled( true );\n\t\t}\n\t\tsuper.onOpen();\n\t}\n\n\tprotected onDone(): void {\n\t\tconst buttonLayout = this._buttonLayout;\n\t\tif( buttonLayout != null ) {\n\t\t\tbuttonLayout.setDisabled( false );\n\t\t} else {\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tprotected onResolved( message?: string ): void {\n\t\tif( message != null ) {\n\t\t\tthis._message.text = message;\n\t\t}\n\t\tthis._message.setStates( DBaseState.SUCCEEDED, DBaseState.FAILED );\n\t\tthis.onDone();\n\t}\n\n\tprotected onRejected( message?: string ): void {\n\t\tif( message != null ) {\n\t\t\tthis._message.text = message;\n\t\t}\n\t\tthis._message.setStates( DBaseState.FAILED, DBaseState.SUCCEEDED );\n\t\tthis.onDone();\n\t}\n\n\tresolve( message?: string ): void {\n\t\tif( ! this._isDone ) {\n\t\t\tthis._isDone = true;\n\t\t\tconst elapsedTime = Date.now() - this._startTime;\n\t\t\tconst delay = this._interval - elapsedTime;\n\t\t\tif( 0 < delay ) {\n\t\t\t\tthis._timeoutId = window.setTimeout((): void => {\n\t\t\t\t\tthis._timeoutId = undefined;\n\t\t\t\t\tthis.onResolved( message );\n\t\t\t\t}, delay );\n\t\t\t} else {\n\t\t\t\tthis.onResolved( message );\n\t\t\t}\n\t\t}\n\t}\n\n\treject( message?: string ): void {\n\t\tif( ! this._isDone ) {\n\t\t\tthis._isDone = true;\n\t\t\tconst elapsedTime = Date.now() - this._startTime;\n\t\t\tconst delay = this._interval - elapsedTime;\n\t\t\tif( 0 < delay ) {\n\t\t\t\tthis._timeoutId = window.setTimeout((): void => {\n\t\t\t\t\tthis._timeoutId = undefined;\n\t\t\t\t\tthis.onRejected( message );\n\t\t\t\t}, delay );\n\t\t\t} else {\n\t\t\t\tthis.onRejected( message );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onCloseOn(): void {\n\t\tif( this._isDone ) {\n\t\t\tsuper.onCloseOn();\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogProcessing\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DCommandSaveAs } from \"./d-command-save-as\";\nimport { DControllers } from \"./d-controllers\";\nimport { DDialogInputText, DDialogInputTextOptions, DThemeDialogInputText } from \"./d-dialog-input-text\";\n\nexport interface DDialogSaveAsOptions<THEME extends DThemeDialogSaveAs> extends DDialogInputTextOptions<THEME> {\n\n}\n\nexport interface DThemeDialogSaveAs extends DThemeDialogInputText {\n\n}\n\nexport class DDialogSaveAs<\n\tTHEME extends DThemeDialogSaveAs = DThemeDialogSaveAs,\n\tOPTIONS extends DDialogSaveAsOptions<THEME> = DDialogSaveAsOptions<THEME>\n> extends DDialogInputText<THEME, OPTIONS> {\n\tprotected onOpen() {\n\t\tconst name = DControllers.getDocumentController().getName();\n\t\tif( name != null ) {\n\t\t\tthis._input.input.value = name;\n\t\t}\n\t\tsuper.onOpen();\n\t}\n\n\tprotected onOk() {\n\t\tsuper.onOk();\n\n\t\tconst name = this._input.input.value;\n\t\tDControllers.getCommandController().push( new DCommandSaveAs( name ) );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogSaveAs\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DListItem, DListItemOptions, DThemeListItem } from \"./d-list-item\";\n\nexport interface DDialogSelectListItemOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogSelecListItem = DThemeDialogSelecListItem\n> extends DListItemOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeDialogSelecListItem extends DThemeListItem {\n\n}\n\nexport class DDialogSelectListItem<\n\tVALUE = unknown,\n\tTHEME extends DThemeDialogSelecListItem = DThemeDialogSelecListItem,\n\tOPTIONS extends DDialogSelectListItemOptions<VALUE, THEME> = DDialogSelectListItemOptions<VALUE, THEME>\n> extends DListItem<VALUE, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DDialogSelectListItem\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DScrollBarThumb, DScrollBarThumbOptions } from \"./d-scroll-bar-thumb\";\n\nexport interface DScrollBarOptions extends DBaseOptions<DThemeScrollBar> {\n\tthumb?: DScrollBarThumbOptions;\n}\n\nexport interface DThemeScrollBar extends DThemeBase {\n\n}\n\nexport abstract class DScrollBar extends DBase<DThemeScrollBar, DScrollBarOptions> {\n\tprotected _start!: number;\n\tprotected _end!: number;\n\tprotected _thumb!: DScrollBarThumb;\n\n\tprotected init( options?: DScrollBarOptions ): void {\n\t\tsuper.init( options );\n\n\t\tthis._start = 0;\n\t\tthis._end = 1;\n\t\tconst thumb = this._thumb = this.createThumb( options != null ? options.thumb : undefined );\n\t\tthis.addChild( thumb );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tget thumb(): DScrollBarThumb {\n\t\treturn this._thumb;\n\t}\n\n\tprotected abstract createThumb( options?: DScrollBarThumbOptions ): DScrollBarThumb;\n\n\tprotected getType(): string {\n\t\treturn \"DScrollBar\";\n\t}\n\n\tsetRegion( start: number, end: number, size: number ): void {\n\t\tif( size < 1 ) {\n\t\t\tstart = 0;\n\t\t\tend = 1;\n\t\t} else {\n\t\t\tstart = Math.max( 0, Math.min( 1, start / size ) );\n\t\t\tend = Math.max( start, Math.min( 1, end / size ) );\n\t\t}\n\t\tif( this._start !== start || this._end !== end ) {\n\t\t\tthis._start = start;\n\t\t\tthis._end = end;\n\t\t\tthis.onRegionChange();\n\t\t}\n\t}\n\n\tisRegionVisible(): boolean {\n\t\treturn 0 < this._start || this._end < 1;\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tsuper.onResize( newWidth, newHeight, oldWidth, oldHeight );\n\t\tthis.onRegionChange();\n\t}\n\n\tonRegionChange(): void {\n\t\t// DO NOTHING\n\t}\n\n\tgetRegionStart(): number {\n\t\treturn this._start;\n\t}\n\n\tgetRegionEnd(): number {\n\t\treturn this._end;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { UtilDrag } from \"./util/util-drag\";\n\nexport interface DScrollBarThumbOptions extends DBaseOptions<DThemeScrollBarThumb> {\n\n}\n\nexport interface DThemeScrollBarThumb extends DThemeBase {\n\tgetMinimumSize(): number;\n}\n\nexport abstract class DScrollBarThumb extends DBase<DThemeScrollBarThumb, DScrollBarThumbOptions> {\n\tprotected _dragUtil!: UtilDrag;\n\n\tprotected init( options?: DScrollBarThumbOptions ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\n\t\tconst position = new Point();\n\t\tthis._dragUtil = new UtilDrag({\n\t\t\ttarget: this,\n\t\t\teasing: false,\n\t\t\ton: {\n\t\t\t\tstart: (): void => {\n\t\t\t\t\tposition.copyFrom( this.position );\n\t\t\t\t},\n\t\t\t\tmove: ( dx: number, dy: number ): void => {\n\t\t\t\t\tposition.set( position.x + dx, position.y + dy );\n\t\t\t\t\tthis.onDragMove( position.x, position.y );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetMinimumSize(): number {\n\t\treturn this.theme.getMinimumSize();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DScrollBarThumb\";\n\t}\n\n\tprotected abstract onDragMove( dx: number, dy: number ): void;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\nimport { DScrollBarThumb } from \"./d-scroll-bar-thumb\";\n\nexport class DScrollBarThumbReflowableHorizontal extends Graphics implements DReflowable {\n\tconstructor( base: DScrollBarThumb ) {\n\t\tsuper();\n\t\tbase.appendRenderable( this, true );\n\t\tbase.addReflowable( this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tconst state = base.state;\n\n\t\tthis.clear();\n\n\t\tconst background = base.background;\n\t\tconst backgroundColor = background.getColor( state );\n\t\tconst backgroundAlpha = background.getAlpha( state );\n\t\tif( backgroundColor != null ) {\n\t\t\tconst size = 1;\n\t\t\tthis.beginFill( backgroundColor, backgroundAlpha );\n\t\t\tthis.lineStyle( 0, 0, 0, 0 );\n\t\t\tthis.drawRect( 0, height * 0.5 - size, width, size * 2 );\n\t\t\tthis.endFill();\n\t\t\tthis.visible = true;\n\t\t} else {\n\t\t\tthis.visible = false;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DScrollBarThumb } from \"./d-scroll-bar-thumb\";\nimport { DScrollBarThumbReflowableHorizontal } from \"./d-scroll-bar-thumb-reflowable-horizontal\";\n\nexport class DScrollBarThumbHorizontal extends DScrollBarThumb {\n\tprotected onDragMove( dx: number, dy: number ) {\n\t\tthis.emit( \"regionmove\", dx, this );\n\t}\n\n\tprotected initReflowable(): void {\n\t\tnew DScrollBarThumbReflowableHorizontal( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DScrollBar, DScrollBarOptions } from \"./d-scroll-bar\";\nimport { DScrollBarThumb, DScrollBarThumbOptions } from \"./d-scroll-bar-thumb\";\nimport { DScrollBarThumbHorizontal } from \"./d-scroll-bar-thumb-horizontal\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport class DScrollBarHorizontal extends DScrollBar {\n\tprotected init( options?: DScrollBarOptions ) {\n\t\tsuper.init( options );\n\n\t\tthis.on( UtilPointerEvent.down, ( e: InteractionEvent ) => {\n\t\t\tif( e.target === this ) {\n\t\t\t\tconst width = this.width;\n\t\t\t\tif( 0 < width ) {\n\t\t\t\t\tconst size = this._end - this._start;\n\t\t\t\t\tconst position = e.data.getLocalPosition( this );\n\t\t\t\t\tconst newStart = Math.min( 1 - size, Math.max( 0, position.x / width - size * 0.5 ) );\n\t\t\t\t\tif( this._start !== newStart ) {\n\t\t\t\t\t\tthis.emit( \"regionmove\", newStart, this );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._thumb.on( \"regionmove\", ( x: number ) => {\n\t\t\tconst width = this.width;\n\t\t\tif( 0 < width ) {\n\t\t\t\tconst size = this._end - this._start;\n\t\t\t\tconst newStart = Math.min( 1 - size, Math.max( 0, x / width ) );\n\t\t\t\tif( this._start !== newStart ) {\n\t\t\t\t\tthis.emit( \"regionmove\", newStart, this );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected createThumb( options?: DScrollBarThumbOptions ): DScrollBarThumb {\n\t\treturn new DScrollBarThumbHorizontal( options );\n\t}\n\n\tonRegionChange(): void {\n\t\tconst thumb = this._thumb;\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\t\tconst thumbMinimumSize = Math.min( width * 0.5, thumb.getMinimumSize() );\n\t\tconst space = width - thumbMinimumSize;\n\t\tconst barStart = space * this._start;\n\t\tconst barSize = space * this._end + thumbMinimumSize - barStart;\n\n\t\tthumb.position.set( barStart, 0 );\n\t\tthumb.resize( barSize, height );\n\n\t\tsuper.onRegionChange();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Graphics } from \"pixi.js\";\nimport { DBase, DReflowable } from \"./d-base\";\n\nexport class DScrollBarThumbReflowableVertical extends Graphics implements DReflowable {\n\tconstructor( base: DBase ) {\n\t\tsuper();\n\t\tbase.appendRenderable( this, true );\n\t\tbase.addReflowable( this );\n\t}\n\n\tonReflow( base: DBase, width: number, height: number ): void {\n\t\tconst state = base.state;\n\n\t\tthis.clear();\n\n\t\tconst background = base.background;\n\t\tconst backgroundColor = background.getColor( state );\n\t\tconst backgroundAlpha = background.getAlpha( state );\n\t\tif( backgroundColor != null ) {\n\t\t\tconst size = 1;\n\t\t\tthis.beginFill( backgroundColor, backgroundAlpha );\n\t\t\tthis.lineStyle( 0, 0, 0, 0 );\n\t\t\tthis.drawRect( width * 0.5 - size, 0, size * 2, height );\n\t\t\tthis.endFill();\n\t\t\tthis.visible = true;\n\t\t} else {\n\t\t\tthis.visible = false;\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DScrollBarThumb } from \"./d-scroll-bar-thumb\";\nimport { DScrollBarThumbReflowableVertical } from \"./d-scroll-bar-thumb-reflowable-vertical\";\n\nexport class DScrollBarThumbVertocal extends DScrollBarThumb {\n\tprotected onDragMove( dx: number, dy: number ) {\n\t\tthis.emit( \"regionmove\", dy, this );\n\t}\n\n\tprotected initReflowable(): void {\n\t\tnew DScrollBarThumbReflowableVertical( this );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DScrollBar, DScrollBarOptions } from \"./d-scroll-bar\";\nimport { DScrollBarThumb, DScrollBarThumbOptions } from \"./d-scroll-bar-thumb\";\nimport { DScrollBarThumbVertocal } from \"./d-scroll-bar-thumb-vertical\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport class DScrollBarVertical extends DScrollBar {\n\tprotected init( options?: DScrollBarOptions ) {\n\t\tsuper.init( options );\n\n\t\tthis.on( UtilPointerEvent.down, ( e: InteractionEvent ): void => {\n\t\t\tif( e.target === this ) {\n\t\t\t\tconst height = this.height;\n\t\t\t\tif( 0 < height ) {\n\t\t\t\t\tconst size = this._end - this._start;\n\t\t\t\t\tconst position = e.data.getLocalPosition( this );\n\t\t\t\t\tconst newStart = Math.min( 1 - size, Math.max( 0, position.y / height - size * 0.5 ) );\n\t\t\t\t\tif( this._start !== newStart ) {\n\t\t\t\t\t\tthis.emit( \"regionmove\", newStart, this );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\n\t\tthis._thumb.on( \"regionmove\", ( y: number ): void => {\n\t\t\tconst height = this.height;\n\t\t\tif( 0 < height ) {\n\t\t\t\tconst size = this._end - this._start;\n\t\t\t\tconst newStart = Math.min( 1 - size, Math.max( 0, y / height ) );\n\t\t\t\tif( this._start !== newStart ) {\n\t\t\t\t\tthis.emit( \"regionmove\", newStart, this );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected createThumb( options?: DScrollBarThumbOptions ): DScrollBarThumb {\n\t\treturn new DScrollBarThumbVertocal( options );\n\t}\n\n\tonRegionChange(): void {\n\t\tconst thumb = this._thumb;\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\t\tconst thumbMinimumSize = Math.min( height * 0.5, thumb.getMinimumSize() );\n\t\tconst space = height - thumbMinimumSize;\n\t\tconst barStart = space * this._start;\n\t\tconst barSize = space * this._end + thumbMinimumSize - barStart;\n\n\t\tthumb.position.set( 0, barStart );\n\t\tthumb.resize( width, barSize );\n\n\t\tsuper.onRegionChange();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\nimport { DBaseOverflowMask } from \"./d-base-overflow-mask\";\nimport { DContent, DContentOptions } from \"./d-content\";\nimport { DDragMode } from \"./d-drag-mode\";\nimport { DScrollBar, DScrollBarOptions } from \"./d-scroll-bar\";\nimport { DScrollBarHorizontal } from \"./d-scroll-bar-horizontal\";\nimport { DScrollBarVertical } from \"./d-scroll-bar-vertical\";\nimport { UtilDrag } from \"./util/util-drag\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilWheelEventDeltas } from \"./util/util-wheel-event\";\n\nexport interface DPaneOptions<\n\tTHEME extends DThemePane = DThemePane,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions\n> extends DBaseOptions<THEME> {\n\tmask?: boolean;\n\tcontent?: CONTENT_OPTIONS | DBase;\n\tbar?: {\n\t\tvertical?: DScrollBarOptions,\n\t\thorizontal?: DScrollBarOptions\n\t};\n\tdrag?: {\n\t\tmode?: (keyof typeof DDragMode) | DDragMode;\n\t};\n}\n\nexport interface DThemePane extends DThemeBase {\n\tisOverflowMaskEnabled(): boolean;\n\tgetWheelSpeed(): number;\n\tgetDragMode(): DDragMode;\n}\n\n// Option parsers\nconst isOverflowMaskEnabled = <\n\tTHEME extends DThemePane,\n\tCONTENT_OPTIONS extends DBaseOptions\n>( theme: THEME, options?: DPaneOptions<THEME, CONTENT_OPTIONS> ): boolean => {\n\tif( options && options.mask != null ) {\n\t\treturn options.mask;\n\t}\n\treturn theme.isOverflowMaskEnabled();\n};\n\nconst toBarOptionsVertical = ( options?: DPaneOptions ): DScrollBarOptions | undefined => {\n\treturn options && options.bar && options.bar.vertical;\n};\n\nconst toBarOptionsHorizontal = ( options?: DPaneOptions ): DScrollBarOptions | undefined => {\n\treturn options && options.bar && options.bar.horizontal;\n};\n\n// Class\nexport class DPane<\n\tTHEME extends DThemePane = DThemePane,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions,\n\tOPTIONS extends DPaneOptions<THEME, CONTENT_OPTIONS> = DPaneOptions<THEME, CONTENT_OPTIONS>\n> extends DBase<THEME, OPTIONS> {\n\tprotected static WORK_ON_FOCUSED = new Point();\n\tprotected _content!: DBase;\n\tprotected _overflowMask!: DBaseOverflowMask | null;\n\tprotected _verticalBar?: DScrollBarVertical;\n\tprotected _horizontalBar?: DScrollBarHorizontal;\n\tprotected _dragUtil?: UtilDrag;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._overflowMask = null;\n\n\t\t// Content\n\t\tconst theme = this.theme;\n\t\tconst content = this._content = this.toContent( options );\n\t\tif( isOverflowMaskEnabled( theme, options ) ) {\n\t\t\tthis.mask = this.getOrCreateOverflowMask();\n\t\t}\n\t\tthis.addChild( content );\n\n\t\t// Scroll bar\n\t\tthis.initScrollBar( content, theme, options );\n\n\t\t// Drag\n\t\tthis.initDrag( content, theme, options );\n\t}\n\n\tprotected initDrag( content: DBase, theme: THEME, options?: OPTIONS ): void {\n\t\tconst dragMode = ( options && options.drag && options.drag.mode != null ?\n\t\t\t( utilIsString( options.drag.mode ) ? DDragMode[ options.drag.mode ] : options.drag.mode ) :\n\t\t\ttheme.getDragMode()\n\t\t);\n\t\t// Edge does not fire the wheel event when scrolling using the 2-fingure scroll gesture on a touchpad.\n\t\t// Instead, it fires touch events. This is why the dragging is enabled regardless of the `UtilPointerEvent.touchable`.\n\t\t// https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7134034/\n\t\tif( dragMode === DDragMode.ON || dragMode === DDragMode.TOUCH ) {\n\t\t\tconst position = new Point();\n\t\t\tthis._dragUtil = new UtilDrag({\n\t\t\t\ttarget: this,\n\t\t\t\ttouch: dragMode === DDragMode.TOUCH,\n\t\t\t\ton: {\n\t\t\t\t\tstart: (): void => {\n\t\t\t\t\t\tposition.copyFrom( content.position );\n\t\t\t\t\t},\n\t\t\t\t\tmove: ( dx: number, dy: number ): void => {\n\t\t\t\t\t\tposition.set( position.x + dx, position.y + dy );\n\t\t\t\t\t\tcontent.position.set(\n\t\t\t\t\t\t\tthis.toContentX( content, position.x ),\n\t\t\t\t\t\t\tthis.toContentY( content, position.y )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected onRegionMoveX( content: DBase, start: number ) {\n\t\tconst dragUtil = this._dragUtil;\n\t\tif( dragUtil != null ) {\n\t\t\tdragUtil.stop();\n\t\t}\n\t\tcontent.x = - content.width * start;\n\t}\n\n\tprotected onRegionMoveY( content: DBase, start: number ) {\n\t\tconst dragUtil = this._dragUtil;\n\t\tif( dragUtil != null ) {\n\t\t\tdragUtil.stop();\n\t\t}\n\t\tcontent.y = - content.height * start;\n\t}\n\n\tprotected initScrollBar( content: DBase, theme: THEME, options?: OPTIONS ): void {\n\t\t// Vertical bar\n\t\tconst verticalBar = this._verticalBar = new DScrollBarVertical( toBarOptionsVertical( options ) );\n\t\tverticalBar.on( \"regionmove\", ( start: number ): void => {\n\t\t\tthis.onRegionMoveY( content, start );\n\t\t});\n\t\tthis.addChild( verticalBar );\n\n\t\t// Horizontal bar\n\t\tconst horizontalBar = this._horizontalBar = new DScrollBarHorizontal( toBarOptionsHorizontal( options ) );\n\t\thorizontalBar.on( \"regionmove\", ( start: number ): void => {\n\t\t\tthis.onRegionMoveX( content, start );\n\t\t});\n\t\tthis.addChild( horizontalBar );\n\n\t\t//\n\t\tcontent.on( \"move\", (): void => {\n\t\t\tthis.onContentChanged();\n\t\t});\n\t\tcontent.on( \"resize\", (): void => {\n\t\t\tthis.onContentChanged();\n\t\t});\n\t\tthis.updateScrollBar();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DPane\";\n\t}\n\n\tget content(): DBase {\n\t\treturn this._content;\n\t}\n\n\tprotected toContent( options?: OPTIONS ): DBase {\n\t\tif( options && options.content ) {\n\t\t\tconst content = options.content;\n\t\t\tif( content instanceof DBase ) {\n\t\t\t\treturn content;\n\t\t\t} else {\n\t\t\t\treturn this.newContent( content );\n\t\t\t}\n\t\t}\n\t\treturn this.newContent();\n\t}\n\n\tprotected newContent( options?: CONTENT_OPTIONS ): DBase {\n\t\treturn new DContent( options );\n\t}\n\n\tprotected getOrCreateOverflowMask(): DBaseOverflowMask {\n\t\tif( this._overflowMask == null ) {\n\t\t\tthis._overflowMask = new DBaseOverflowMask( this );\n\t\t\tthis.addReflowable( this._overflowMask );\n\t\t\tthis.toDirty();\n\t\t}\n\t\treturn this._overflowMask;\n\t}\n\n\tonWheel( e: WheelEvent, deltas: UtilWheelEventDeltas, global: Point ): boolean {\n\t\tconst content = this._content;\n\t\tconst x = this.getWheelContentX( content, deltas.deltaX * deltas.lowest );\n\t\tconst y = this.getWheelContentY( content, deltas.deltaY * deltas.lowest );\n\t\tif( content.x !== x || content.y !== y ) {\n\t\t\tconst dragUtil = this._dragUtil;\n\t\t\tif( dragUtil != null ) {\n\t\t\t\tdragUtil.stop();\n\t\t\t}\n\t\t\tcontent.position.set( x, y );\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected getWheelContentX( content: DBase, delta: number ): number {\n\t\tif( 0 < delta || delta < 0 ) {\n\t\t\tconst speed = this.theme.getWheelSpeed();\n\t\t\treturn this.toContentX( content, content.x - delta * speed );\n\t\t}\n\t\treturn content.x;\n\t}\n\n\tprotected getWheelContentY( content: DBase, delta: number ): number {\n\t\tif( 0 < delta || delta < 0 ) {\n\t\t\tconst speed = this.theme.getWheelSpeed();\n\t\t\treturn this.toContentY( content, content.y + delta * speed );\n\t\t}\n\t\treturn content.y;\n\t}\n\n\tprotected toContentX( content: DBase, x: number ): number {\n\t\treturn Math.min( 0, Math.max( this.width - content.width, x ) );\n\t}\n\n\tprotected toContentY( content: DBase, y: number ): number {\n\t\treturn Math.min( 0, Math.max( this.height - content.height, y ) );\n\t}\n\n\tprotected isRefitable( target: any ): target is DBase<any, any> {\n\t\treturn super.isRefitable( target ) && ! ( target instanceof DScrollBar );\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tsuper.onResize( newWidth, newHeight, oldWidth, oldHeight );\n\t\tthis.updateScrollBar();\n\t}\n\n\tprotected onContentChanged(): void {\n\t\tthis.updateScrollBar();\n\t}\n\n\tprotected updateScrollBar(): void {\n\t\tconst verticalBar = this._verticalBar;\n\t\tconst horizontalBar = this._horizontalBar;\n\t\tif( verticalBar != null && horizontalBar != null ) {\n\t\t\tthis.updateScrollBarRegions( verticalBar, horizontalBar );\n\t\t\tthis.updateScrollBarVisibilities( verticalBar, horizontalBar );\n\t\t\tthis.updateScrollBarPositions( verticalBar, horizontalBar );\n\t\t}\n\t}\n\n\tprotected updateScrollBarPositions( verticalBar: DScrollBarVertical, horizontalBar: DScrollBarHorizontal ): void {\n\t\tconst width = this.width;\n\t\tconst height = this.height;\n\n\t\tconst verticalBarWidth = verticalBar.width;\n\t\tverticalBar.position.set( width - verticalBarWidth, verticalBarWidth * 0.5 );\n\t\tverticalBar.height = height - verticalBarWidth;\n\n\t\tconst horizontalBarHeight = horizontalBar.height;\n\t\thorizontalBar.position.set( horizontalBarHeight * 0.5, height - horizontalBarHeight );\n\t\thorizontalBar.width = width - horizontalBarHeight;\n\t}\n\n\tprotected updateScrollBarRegions( verticalBar: DScrollBarVertical, horizontalBar: DScrollBarHorizontal ): void {\n\t\tconst content = this._content;\n\t\tconst x = -content.x;\n\t\tconst y = -content.y;\n\t\thorizontalBar.setRegion( x, x + this.width, content.width );\n\t\tverticalBar.setRegion( y, y + this.height, content.height );\n\t}\n\n\tprotected updateScrollBarVisibilities( verticalBar: DScrollBarVertical, horizontalBar: DScrollBarHorizontal ): void {\n\t\tconst isChangedHorizontal = this.updateScrollBarVisibility( horizontalBar );\n\t\tconst isChangedVertical = this.updateScrollBarVisibility( verticalBar );\n\t\tif( isChangedHorizontal || isChangedVertical ) {\n\t\t\t// Update the overflow mask\n\t\t\tconst overflowMask = this._overflowMask;\n\t\t\tif( overflowMask != null ) {\n\t\t\t\tif( horizontalBar.visible || verticalBar.visible ) {\n\t\t\t\t\tconst content = this._content;\n\t\t\t\t\tif( content.mask !== overflowMask ) {\n\t\t\t\t\t\tcontent.mask = overflowMask;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst content = this._content;\n\t\t\t\t\tif( content.mask ) {\n\t\t\t\t\t\tcontent.mask = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Rerender\n\t\t\tDApplications.update( this );\n\t\t}\n\t}\n\n\tprotected updateScrollBarVisibility( bar: DScrollBar ): boolean {\n\t\tconst isRegionVisible = bar.isRegionVisible();\n\t\tif( bar.visible !== isRegionVisible ) {\n\t\t\tbar.visible = isRegionVisible;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected onChildFocused( focused: DBase ): void {\n\t\tconst work = DPane.WORK_ON_FOCUSED;\n\t\tconst content = this.content;\n\t\tconst contentX = content.x;\n\t\tconst contentY = content.y;\n\t\tconst contentWidth = content.width;\n\t\tconst contentHeight = content.height;\n\n\t\twork.set( 0, 0 );\n\t\tfocused.toGlobal( work, work, false );\n\t\tcontent.toLocal( work, undefined, work, false );\n\t\tconst x0 = contentX + Math.min( contentWidth, Math.max( 0, work.x ) );\n\t\tconst y0 = contentY + Math.min( contentHeight, Math.max( 0, work.y ) );\n\n\t\twork.set( focused.width, focused.height );\n\t\tfocused.toGlobal( work, work, true );\n\t\tcontent.toLocal( work, undefined, work, true );\n\t\tconst x1 = contentX + Math.min( contentWidth, Math.max( 0, work.x ) );\n\t\tconst y1 = contentY + Math.min( contentHeight, Math.max( 0, work.y ) );\n\n\t\tconst width = this.width;\n\t\tlet newX: number | null = null;\n\t\tif( x0 < 0 ) {\n\t\t\tif( x1 <= width ) {\n\t\t\t\tnewX = Math.max( width - contentWidth, Math.min( 0, contentX + (0 - x0) ) );\n\t\t\t}\n\t\t} else {\n\t\t\tif( width < x1 ) {\n\t\t\t\tnewX = Math.max( width - contentWidth, Math.min( 0, contentX - (x1 - width) ) );\n\t\t\t}\n\t\t}\n\n\t\tconst height = this.height;\n\t\tlet newY: number | null = null;\n\t\tif( y0 < 0 ) {\n\t\t\tif( y1 <= height ) {\n\t\t\t\tnewY = Math.max( height - contentHeight, Math.min( 0, contentY + (0 - y0) ) );\n\t\t\t}\n\t\t} else {\n\t\t\tif( height < y1 ) {\n\t\t\t\tnewY = Math.max( height - contentHeight, Math.min( 0, contentY - (y1 - height) ) );\n\t\t\t}\n\t\t}\n\n\t\tif( newX != null ) {\n\t\t\tif( newY != null ) {\n\t\t\t\tcontent.position.set( newX, newY );\n\t\t\t} else {\n\t\t\t\tcontent.position.x = newX;\n\t\t\t}\n\t\t} else {\n\t\t\tif( newY != null ) {\n\t\t\t\tcontent.position.y = newY;\n\t\t\t}\n\t\t}\n\n\t\tsuper.onChildFocused( focused );\n\t}\n\n\tdestroy(): void {\n\t\t// Overflow mask\n\t\tconst overflowMask = this._overflowMask;\n\t\tif( overflowMask != null ) {\n\t\t\tthis._overflowMask = null;\n\t\t\toverflowMask.destroy();\n\t\t}\n\t\tthis.mask = null;\n\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, interaction } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DBase, DBaseOptions } from \"./d-base\";\nimport { DContentOptions } from \"./d-content\";\nimport { DListSelection, DListSelectionOptions } from \"./d-list-selection\";\nimport { DPane, DPaneOptions, DThemePane } from \"./d-pane\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DListOptions<\n\tTHEME extends DThemeList = DThemeList,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions\n> extends DPaneOptions<THEME, CONTENT_OPTIONS> {\n\tselection?: DListSelectionOptions | DListSelection;\n}\n\nexport interface DThemeList extends DThemePane {\n\n}\n\nexport class DList<\n\tTHEME extends DThemeList = DThemeList,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions,\n\tOPTIONS extends DListOptions<THEME, CONTENT_OPTIONS> = DListOptions<THEME, CONTENT_OPTIONS>\n> extends DPane<THEME, CONTENT_OPTIONS, OPTIONS> {\n\tprotected _selection!: DListSelection;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst selection = options && options.selection;\n\t\tthis._selection = ( selection instanceof DListSelection ?\n\t\t\tselection : this.newSelection( selection )\n\t\t);\n\n\t\tUtilPointerEvent.onClick( this, ( e: InteractionEvent ): void => {\n\t\t\tconst child: DisplayObject | null = this.findItem( e.target );\n\t\t\tif( child instanceof DBase && child.isActionable() ) {\n\t\t\t\tthis.selection.add( child );\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected newSelection( options?: DListSelectionOptions ): DListSelection {\n\t\treturn new DListSelection( this._content, options );\n\t}\n\n\tprotected onChildrenDirty(): void {\n\t\tconst selection = this._selection;\n\t\tif( selection != null ) {\n\t\t\tselection.toDirty();\n\t\t}\n\t\tsuper.onChildrenDirty();\n\t}\n\n\tget selection(): DListSelection {\n\t\treturn this._selection;\n\t}\n\n\tprotected findItem( target: DisplayObject | null ): DisplayObject | null {\n\t\tconst content = this.content;\n\t\tlet current = target;\n\t\twhile( current != null ) {\n\t\t\tif( current.parent === content ) {\n\t\t\t\treturn current;\n\t\t\t}\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tonRefit(): void {\n\t\tsuper.onRefit();\n\t\tthis.updateChildPosition();\n\t\tthis.updateChildVisibility();\n\t}\n\n\tprotected updateChildPosition(): void {\n\t\tconst content = this.content;\n\t\tconst items = content.children;\n\t\tlet y = 0;\n\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\n\t\t\tconst item = items[ i ];\n\t\t\tif( item instanceof DBase ) {\n\t\t\t\titem.y = y;\n\t\t\t\ty += item.height;\n\t\t\t}\n\t\t}\n\t\tconst scrollLimit = Math.min( 0, -y + this.height );\n\t\tif( content.y < scrollLimit ) {\n\t\t\tcontent.y = scrollLimit;\n\t\t}\n\t\tcontent.height = y;\n\t}\n\n\tprotected updateChildVisibility(): void {\n\t\tconst content = this.content;\n\t\tconst items = content.children;\n\t\tconst from = -content.y;\n\t\tconst to = from + this.height;\n\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\n\t\t\tconst item = items[ i ];\n\t\t\tif( item instanceof DBase ) {\n\t\t\t\tconst itemY = item.y;\n\t\t\t\titem.visible = ( from <= itemY + item.height && itemY <= to );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onContentChanged(): void {\n\t\tsuper.onContentChanged();\n\t\tthis.updateChildVisibility();\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DList\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseOptions } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DContentOptions } from \"./d-content\";\nimport { DList, DListOptions, DThemeList } from \"./d-list\";\n\nexport interface DDialogSelectListOptions<\n\tTHEME extends DThemeDialogSelecList = DThemeDialogSelecList,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions\n> extends DListOptions<THEME, CONTENT_OPTIONS> {\n\n}\n\nexport interface DThemeDialogSelecList extends DThemeList {\n\n}\n\nexport class DDialogSelectList<\n\tTHEME extends DThemeDialogSelecList = DThemeDialogSelecList,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions,\n\tOPTIONS extends DDialogSelectListOptions<THEME, CONTENT_OPTIONS> = DDialogSelectListOptions<THEME, CONTENT_OPTIONS>\n> extends DList<THEME, CONTENT_OPTIONS, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogSelectList\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DText, DTextOptions, DThemeText } from \"./d-text\";\n\nexport interface DNoteOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeNote = DThemeNote\n> extends DTextOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeNote extends DThemeText {\n\n}\n\nexport class DNote<\n\tVALUE = unknown,\n\tTHEME extends DThemeNote = DThemeNote,\n\tOPTIONS extends DNoteOptions<VALUE, THEME> = DNoteOptions<VALUE, THEME>\n> extends DText<VALUE, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.visible = false;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DNote\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DDialog, DDialogOptions, DThemeDialog } from \"./d-dialog\";\nimport { DDialogSelectList } from \"./d-dialog-select-list\";\nimport { DDialogSelectListItem } from \"./d-dialog-select-list-item\";\nimport { DInputText } from \"./d-input-text\";\nimport { DLayoutVertical } from \"./d-layout-vertical\";\nimport { DListItem } from \"./d-list-item\";\nimport { DListSelection } from \"./d-list-selection\";\nimport { DNote, DNoteOptions } from \"./d-note\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilTransition } from \"./util/util-transition\";\n\nexport interface Search<SEARCH_RESULT> {\n\tcreate( args: [ string ] ): void;\n\ton( event: \"success\", handler: ( e: unknown, searchResults: SEARCH_RESULT[] ) => void ): void;\n\ton( event: \"change\", handler: () => void ): void;\n\tisDone(): boolean;\n\tgetResult(): SEARCH_RESULT[] | null;\n}\n\nexport interface Controller<SEARCH_RESULT> {\n\tsearch: Search<SEARCH_RESULT>;\n}\n\nexport interface DDialogSelectOptions<\n\tSEARCH_RESULT,\n\tTHEME extends DThemeDialogSelect = DThemeDialogSelect\n> extends DDialogOptions<THEME> {\n\tcontroller: Controller<SEARCH_RESULT>;\n\tconverter?: {\n\t\ttoLabel?: ( searchResult: SEARCH_RESULT ) => string;\n\t};\n\tnote?: {\n\t\tnoItems?: DNoteOptions;\n\t\tsearching?: DNoteOptions;\n\t};\n}\n\nexport interface DThemeDialogSelect extends DThemeDialog {\n\tgetNoteNoItemsText(): string;\n\tgetNoteSearchingText(): string;\n}\n\n// Helper\nconst defaultConverter = {\n\ttoLabel: ( target: any ): string => {\n\t\tif( utilIsString( target ) ) {\n\t\t\treturn target;\n\t\t} else if( utilIsNumber( target ) ) {\n\t\t\treturn String( target );\n\t\t} else if( \"name\" in target ) {\n\t\t\treturn target.name;\n\t\t} else if( \"label\" in target ) {\n\t\t\treturn target.label;\n\t\t} else if( \"id\" in target ) {\n\t\t\treturn target.id;\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n};\n\nconst toToLabel = <SEARCH_RESULT>( options: DDialogSelectOptions<SEARCH_RESULT, any> ) => {\n\treturn ( options.converter != null ? options.converter.toLabel : null ) || defaultConverter.toLabel;\n};\n\nconst toNoteOptions = ( options: DNoteOptions | undefined, parent: DBase, text: string ): DNoteOptions => {\n\tif( options != null ) {\n\t\tif( options.parent == null ) {\n\t\t\toptions.parent = parent;\n\t\t}\n\t\tif( options.text == null ) {\n\t\t\toptions.text = {\n\t\t\t\tvalue: text\n\t\t\t};\n\t\t} else if( options.text.value == null ) {\n\t\t\toptions.text.value = text;\n\t\t}\n\t\treturn options;\n\t}\n\treturn {\n\t\tparent,\n\t\ttext: {\n\t\t\tvalue: text\n\t\t}\n\t};\n};\n\nconst toNoteNoItemsOptions = (\n\ttheme: DThemeDialogSelect, options: DDialogSelectOptions<any>, parent: DBase\n): DNoteOptions => {\n\treturn toNoteOptions(\n\t\toptions.note && options.note.noItems,\n\t\tparent,\n\t\ttheme.getNoteNoItemsText()\n\t);\n};\n\nconst toNoteSearchingOptions = (\n\ttheme: DThemeDialogSelect, options: DDialogSelectOptions<any>, parent: DBase\n): DNoteOptions => {\n\treturn toNoteOptions(\n\t\toptions.note && options.note.searching,\n\t\tparent,\n\t\ttheme.getNoteSearchingText()\n\t);\n};\n\nexport class DDialogSelect<\n\tSEARCH_RESULT,\n\tTHEME extends DThemeDialogSelect = DThemeDialogSelect,\n\tOPTIONS extends DDialogSelectOptions<SEARCH_RESULT, THEME> = DDialogSelectOptions<SEARCH_RESULT, THEME>\n> extends DDialog<THEME, OPTIONS> {\n\tprotected _value: SEARCH_RESULT | null;\n\tprotected _input: DInputText;\n\tprotected _list: DDialogSelectList;\n\tprotected _noteNoItems: DNote;\n\tprotected _noteSearching: DNote;\n\tprotected _controller: Controller<SEARCH_RESULT>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis._value = null;\n\t\tconst theme = this.theme;\n\t\tconst controller = this._controller = options.controller;\n\t\tconst toLabel = toToLabel( options );\n\n\t\tconst layout = new DLayoutVertical({\n\t\t\tparent: this,\n\t\t\tx: \"padding\", y: \"padding\",\n\t\t\twidth: \"padding\", height: \"auto\"\n\t\t});\n\n\t\t// Search box\n\t\tthis._input = new DInputText({\n\t\t\tparent: layout,\n\t\t\twidth: \"padding\"\n\t\t});\n\n\t\t// List\n\t\tconst list = this._list = new DDialogSelectList({\n\t\t\tparent: layout,\n\t\t\twidth: \"padding\",\n\t\t\tselection: {\n\t\t\t\ton: {\n\t\t\t\t\tchange: ( selection: DListSelection ): void => {\n\t\t\t\t\t\tconst item: DListItem<SEARCH_RESULT> | null = selection.first();\n\t\t\t\t\t\tif( item != null ) {\n\t\t\t\t\t\t\tconst value = this._value = item.value;\n\t\t\t\t\t\t\tthis.emit( \"select\", value, this );\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Text No Items\n\t\tconst noteNoItems = new DNote( toNoteNoItemsOptions( theme, options, list ) );\n\t\tthis._noteNoItems = noteNoItems;\n\n\t\t// Text Searching\n\t\tconst noteSearching = new DNote( toNoteSearchingOptions( theme, options, list ) );\n\t\tthis._noteSearching = noteSearching;\n\n\t\t// Controller binding\n\t\tthis._input.on( \"input\", ( value: string ): void => {\n\t\t\tcontroller.search.create([ value ]);\n\t\t});\n\n\t\tcontroller.search.on( \"success\", ( e: unknown, searchResults: SEARCH_RESULT[] ): void => {\n\t\t\tconst content = list.content;\n\t\t\tconst children = content.children;\n\n\t\t\t// Update the existing children\n\t\t\tconst childrenLength = children.length;\n\t\t\tconst searchResultsLength = searchResults.length;\n\t\t\tconst minLength = Math.min( childrenLength, searchResultsLength );\n\t\t\tfor( let i = 0, imax = minLength; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tconst searchResult = searchResults[ i ];\n\t\t\t\tif( child instanceof DListItem ) {\n\t\t\t\t\tchild.text = toLabel( searchResult );\n\t\t\t\t\tchild.value = searchResult;\n\t\t\t\t} else {\n\t\t\t\t\tcontent.removeChildAt( i );\n\t\t\t\t\tchild.destroy();\n\t\t\t\t\tconst newChild = this.newItem( searchResult, toLabel( searchResult ) );\n\t\t\t\t\tcontent.addChildAt( newChild, i );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Insert new children\n\t\t\tfor( let i = minLength, imax = searchResultsLength; i < imax; ++i ) {\n\t\t\t\tconst searchResult = searchResults[ i ];\n\t\t\t\tconst newChild = this.newItem( searchResult, toLabel( searchResult ) );\n\t\t\t\tcontent.addChild( newChild );\n\t\t\t}\n\n\t\t\t// Remove unused children\n\t\t\tfor( let i = childrenLength - 1; minLength <= i; --i ) {\n\t\t\t\tchildren[ i ].destroy();\n\t\t\t}\n\t\t});\n\n\t\t// Visibility\n\t\tconst transition = new UtilTransition();\n\t\tcontroller.search.on( \"change\", (): void => {\n\t\t\tif( controller.search.isDone() ) {\n\t\t\t\tconst result = controller.search.getResult();\n\t\t\t\tif( result != null && 0 < result.length ) {\n\t\t\t\t\ttransition.hide();\n\t\t\t\t} else {\n\t\t\t\t\ttransition.show( noteNoItems );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttransition.show( noteSearching );\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected newItem( searchResult: SEARCH_RESULT, label: string ): DDialogSelectListItem<SEARCH_RESULT> {\n\t\treturn new DDialogSelectListItem<SEARCH_RESULT>({\n\t\t\tvalue: searchResult,\n\t\t\ttext: {\n\t\t\t\tvalue: label\n\t\t\t}\n\t\t});\n\t}\n\n\tget value() {\n\t\treturn this._value;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDialogSelect\";\n\t}\n\n\tprotected onOpen() {\n\t\tsuper.onOpen();\n\t\tthis._list.selection.clear();\n\t\tthis._controller.search.create([ this._input.value ]);\n\t}\n\n\tprotected onClose() {\n\t\tsuper.onClose();\n\t}\n\n\tdestroy() {\n\t\tthis._input.destroy();\n\t\tthis._noteNoItems.destroy();\n\t\tthis._noteSearching.destroy();\n\t\tthis._list.destroy();\n\t\tsuper.destroy();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\n\nexport interface Owner {\n\tfocus(): void;\n}\n\nexport interface Parent {\n\tparent: unknown;\n}\n\nexport interface Closeable extends DisplayObject {\n\tclose(): void;\n}\n\nexport class DMenuContext {\n\tprotected _owner: Owner;\n\tprotected _closeables: Closeable[];\n\n\tconstructor( owner: Owner ) {\n\t\tthis._owner = owner;\n\t\tthis._closeables = [];\n\t}\n\n\tprotected indexOf( target: unknown ): number {\n\t\treturn this._closeables.indexOf( target as any );\n\t}\n\n\tprotected close( index: number ): void {\n\t\tconst closeables = this._closeables;\n\t\tconst imin = Math.max( 0, index );\n\t\tfor( let i = closeables.length - 1; imin <= i; --i ) {\n\t\t\tcloseables[ i ].close();\n\t\t}\n\t}\n\n\tadd( closeable: Closeable ): void {\n\t\tthis._closeables.push( closeable );\n\t}\n\n\ttrim( closeable: Closeable | null ): void {\n\t\tthis.close( this.indexOf( closeable ) + 1 );\n\t}\n\n\tremove( closeable: Closeable ): void {\n\t\tconst index = this.indexOf( closeable );\n\t\tif( 0 <= index ) {\n\t\t\tthis.close( index + 1 );\n\t\t\tthis._closeables.splice( index, 1 );\n\t\t\tif( index === 0 ) {\n\t\t\t\tthis._owner.focus();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject, Point } from \"pixi.js\";\nimport { DApplicationLayerLike } from \"./d-application-layer-like\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\nimport { DMenuAlign } from \"./d-menu-align\";\nimport { Closeable, DMenuContext } from \"./d-menu-context\";\nimport { DMenuItem } from \"./d-menu-item\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenus } from \"./d-menus\";\nimport { UtilAttach } from \"./util/util-attach\";\nimport { UtilClickOutside } from \"./util/util-click-outside\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilOverlay } from \"./util/util-overlay\";\n\nexport interface DMenuOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenu = DThemeMenu\n> extends DLayoutVerticalOptions<THEME> {\n\talign?: (keyof typeof DMenuAlign) | DMenuAlign;\n\tfit?: boolean;\n\tsticky?: boolean;\n\titems?: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>;\n}\n\nexport interface DThemeMenu extends DThemeLayoutVertical {\n\tgetOffsetX(): number;\n\tgetOffsetY(): number;\n}\n\nexport class DMenu<\n\tVALUE,\n\tTHEME extends DThemeMenu = DThemeMenu,\n\tOPTIONS extends DMenuOptions<VALUE, THEME> = DMenuOptions<VALUE, THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\tprotected _align!: DMenuAlign;\n\tprotected _fit!: boolean;\n\tprotected _sticky!: boolean;\n\tprotected _sub!: boolean;\n\tprotected _owner!: DBase<any, any> | null;\n\tprotected _context!: DMenuContext | null;\n\tprotected _overlay!: UtilOverlay;\n\tprotected _onPrerenderBound!: () => void;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._onPrerenderBound = (): void => {\n\t\t\tthis.onPrerender();\n\t\t};\n\n\t\tif( options != null ) {\n\t\t\tthis._align = ( options.align != null ?\n\t\t\t\t( utilIsString( options.align ) ? DMenuAlign[ options.align ] : options.align ) :\n\t\t\t\tDMenuAlign.BOTTOM\n\t\t\t);\n\t\t\tthis._fit = ( options.fit != null ? options.fit : false );\n\t\t\tthis._sticky = ( options.sticky != null ? options.sticky : false );\n\t\t} else {\n\t\t\tthis._align = DMenuAlign.BOTTOM;\n\t\t\tthis._fit = false;\n\t\t\tthis._sticky = false;\n\t\t}\n\t\tthis._sub = false;\n\t\tthis._owner = null;\n\t\tthis.visible = false;\n\t\tthis._context = null;\n\t\tthis.setState( DBaseState.FOCUS_ROOT, true );\n\n\t\t// Event handlers\n\t\tUtilClickOutside.apply( this, (): void => {\n\t\t\tthis.close();\n\t\t});\n\n\t\tthis.on( \"select\", (): void => {\n\t\t\tthis.close();\n\t\t});\n\n\t\t// Items\n\t\tif( options && options.items ) {\n\t\t\tDMenus.newItems( this, options.items, this._sticky );\n\t\t}\n\n\t\t// Overlay\n\t\tthis._overlay = new UtilOverlay( options );\n\t}\n\n\tfindItem( value: VALUE ): DMenuItem<VALUE> | null {\n\t\tconst children = this.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DMenuItem && child.value === value ) {\n\t\t\t\treturn child;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenu\";\n\t}\n\n\tgetContext(): DMenuContext | null {\n\t\treturn this._context;\n\t}\n\n\tgetCloseable(): Closeable | null {\n\t\treturn this;\n\t}\n\n\topen( owner: DBase<any, any>, closeable?: Closeable | null, context?: DMenuContext | null ): this {\n\t\tif( this.isHidden() ) {\n\t\t\tconst layer = this._overlay.pick( this );\n\t\t\tthis._owner = owner;\n\n\t\t\t// States\n\t\t\tconst children = this.children;\n\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tif( child instanceof DBase ) {\n\t\t\t\t\tchild.setState( DBaseState.FOCUSED | DBaseState.HOVERED, false );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Position & size\n\t\t\tconst renderer = layer.renderer;\n\t\t\tconst onPrerenderBound = this._onPrerenderBound;\n\t\t\tif( this._sticky ) {\n\t\t\t\trenderer.on( \"prerender\", onPrerenderBound );\n\t\t\t} else {\n\t\t\t\trenderer.once( \"prerender\", onPrerenderBound );\n\t\t\t}\n\t\t\tif( this._fit ) {\n\t\t\t\tconst bounds = owner.getBounds();\n\t\t\t\tif( bounds != null ) {\n\t\t\t\t\tthis.width = bounds.width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Target\n\t\t\tthis._sub = (context != null);\n\t\t\tcontext = context || new DMenuContext( owner );\n\t\t\tif( closeable != null ) {\n\t\t\t\tcontext.trim( closeable );\n\t\t\t}\n\t\t\tcontext.add( this );\n\t\t\tthis._context = context;\n\n\t\t\t// Stage\n\t\t\tlayer.stage.addChild( this );\n\n\t\t\t// Focus\n\t\t\tthis.focus();\n\n\t\t\t// Show\n\t\t\tsuper.show();\n\n\t\t\t// Event\n\t\t\tthis.emit( \"open\", this );\n\t\t}\n\t\treturn this;\n\t}\n\n\tprotected onPrerender(): void {\n\t\tconst owner = this._owner;\n\t\tif( owner ) {\n\t\t\tconst bounds = owner.getBounds();\n\t\t\tif( bounds ) {\n\t\t\t\tif( this._fit ) {\n\t\t\t\t\tthis.width = bounds.width;\n\t\t\t\t}\n\t\t\t\tconst layer = this._overlay.picked;\n\t\t\t\tif( layer ) {\n\t\t\t\t\tconst theme = this.theme;\n\t\t\t\t\tUtilAttach.attach(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\tbounds,\n\t\t\t\t\t\ttheme.getOffsetX(), theme.getOffsetY(),\n\t\t\t\t\t\tlayer.width, layer.height,\n\t\t\t\t\t\tthis._align\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tclose(): this {\n\t\tif( this.isShown() ) {\n\t\t\tconst context = this._context;\n\t\t\tif( context ) {\n\t\t\t\tcontext.remove( this );\n\t\t\t}\n\n\t\t\tconst parent = this.parent;\n\t\t\tif( parent ) {\n\t\t\t\tparent.removeChild( this );\n\t\t\t}\n\n\t\t\tconst layer = this._overlay.picked;\n\t\t\tif( layer ) {\n\t\t\t\tlayer.renderer.off( \"prerender\", this._onPrerenderBound );\n\t\t\t}\n\n\t\t\tthis._owner = null;\n\n\t\t\tsuper.hide();\n\n\t\t\tthis.emit( \"close\", this );\n\t\t}\n\t\treturn this;\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( UtilKeyboardEvent.isArrowUpKey( e ) || UtilKeyboardEvent.isArrowDownKey( e ) ) {\n\t\t\tconst layer = this._overlay.picked;\n\t\t\tif( layer ) {\n\t\t\t\tconst focusController = layer.getFocusController();\n\t\t\t\tconst focused = focusController.getFocused();\n\t\t\t\tif( focused != null ) {\n\t\t\t\t\tconst direction = UtilKeyboardEvent.isArrowDownKey( e );\n\t\t\t\t\tconst next = focusController.findFocusable(\n\t\t\t\t\t\tfocused, false, focused.hasState( DBaseState.FOCUS_ROOT ) || direction, direction\n\t\t\t\t\t);\n\t\t\t\t\tif( next != null ) {\n\t\t\t\t\t\tfocusController.setFocused( next, true, true );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected containsGlobalPoint( point: Point ): boolean {\n\t\treturn ! this._sub;\n\t}\n}\n\nDMenus.setMenuCreator( ( options?: DMenuOptions<any> ) => new DMenu<any>( options ) );\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButtonBase, DButtonBaseOptions, DThemeButtonBase } from \"./d-button-base\";\nimport { DMenu, DMenuOptions, DThemeMenu } from \"./d-menu\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\n\nexport interface DDropdownOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeDropdown = DThemeDropdown\n> extends DButtonBaseOptions<string, THEME> {\n\tmenu?: DMenuOptions<VALUE> | DMenu<VALUE>;\n}\n\nexport interface DThemeDropdown extends DThemeButtonBase {\n\tgetTextFormatter(): ( value: string, caller: DDropdown ) => string;\n\tgetTextValue( state: DBaseState ): string;\n\tnewTextValue(): DStateAwareOrValueMightBe<string>;\n}\n\nexport class DDropdown<\n\tVALUE = unknown,\n\tTHEME extends DThemeDropdown = DThemeDropdown,\n\tOPTIONS extends DDropdownOptions<VALUE, THEME> = DDropdownOptions<VALUE, THEME>\n> extends DButtonBase<string, THEME, OPTIONS> {\n\tprotected _menu!: DMenu<VALUE>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tthis.start();\n\t\t});\n\t}\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._menu = this.toMenu( this.theme, options );\n\t}\n\n\tprotected toMenu( theme: THEME, options?: OPTIONS ): DMenu<VALUE> {\n\t\tconst menu = options && options.menu;\n\t\treturn ( menu instanceof DMenu ? menu :\n\t\t\tnew DMenu<VALUE>( this.toMenuOptions( theme, menu ) )\n\t\t);\n\t}\n\n\tprotected toMenuOptions( theme: THEME, options?: DMenuOptions<VALUE> ): DMenuOptions<VALUE, DThemeMenu> {\n\t\toptions = options || {};\n\t\tif( options.fit == null ) {\n\t\t\toptions.fit = true;\n\t\t}\n\t\treturn options;\n\t}\n\n\tget menu(): DMenu<VALUE> {\n\t\treturn this._menu;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DDropdown\";\n\t}\n\n\tstart(): void {\n\t\tthis._menu.open( this );\n\t}\n\n\tclose(): void {\n\t\tthis._menu.close();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, utils } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DListItem, DListItemSelection } from \"./d-list-item\";\nimport { DMenu } from \"./d-menu\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport enum DMenuSidedSelectionMode {\n\tNONE,\n\tSINGLE,\n\tSINGLE_ONCE,\n\tDEFAULT = SINGLE_ONCE\n}\n\nexport interface DMenuSidedSelectionOptions {\n\tmode?: (keyof typeof DMenuSidedSelectionMode) | DMenuSidedSelectionMode;\n\ton?: { [ name: string ]: Function };\n\tfilter?: ( item: DBase | null ) => boolean;\n}\n\nconst defaultFilter = () => true;\n\nexport class DMenuSidedSelection extends utils.EventEmitter implements DListItemSelection {\n\tprotected _content: Container;\n\tprotected _item: DBase | null;\n\tprotected _isDirty: boolean;\n\tprotected _mode: DMenuSidedSelectionMode;\n\tprotected _filter: ( item: DBase | null ) => boolean;\n\n\tconstructor( content: Container, options?: DMenuSidedSelectionOptions ) {\n\t\tsuper();\n\n\t\tthis._content = content;\n\t\tthis._item = null;\n\t\tthis._isDirty = true;\n\t\tthis._mode = ( options && options.mode != null ?\n\t\t\t(utilIsString( options.mode ) ? DMenuSidedSelectionMode[ options.mode ] : options.mode) :\n\t\t\tDMenuSidedSelectionMode.DEFAULT\n\t\t);\n\t\tthis._filter = ( options && options.filter ) || this.getFilterDefault();\n\n\t\t// Events\n\t\tconst on = options && options.on;\n\t\tif( on ) {\n\t\t\tfor( const name in on ) {\n\t\t\t\tthis.on( name, on[ name ] );\n\t\t\t}\n\t\t}\n\t}\n\n\ttoDirty() {\n\t\tthis._isDirty = true;\n\t}\n\n\tupdate() {\n\t\tif( this._isDirty ) {\n\t\t\tthis._isDirty = false;\n\t\t\tthis.update_( this._content );\n\t\t}\n\t}\n\n\tprotected hasMenu( child: any ): child is { menu: DMenu<any> } {\n\t\treturn child && child.menu instanceof DMenu;\n\t}\n\n\tprotected update_( root: Container ): void {\n\t\tconst children = root.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DListItem ) {\n\t\t\t\tif( child.isActive() ) {\n\t\t\t\t\tthis.set_( child, false );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( child instanceof Container ) {\n\t\t\t\tthis.update_( child );\n\t\t\t}\n\n\t\t\tif( this.hasMenu( child ) ) {\n\t\t\t\tthis.update_( child.menu );\n\t\t\t}\n\t\t}\n\t}\n\n\tadd( item: DBase ): void {\n\t\tthis.update();\n\t\tthis.set_( item, true );\n\t}\n\n\tset( item: DBase ): void {\n\t\tthis.update();\n\t\tthis.set_( item, true );\n\t}\n\n\tget(): DBase | null {\n\t\tthis.update();\n\t\treturn this._item;\n\t}\n\n\tsize(): number {\n\t\treturn ( this._item ? 1 : 0 );\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this._item == null;\n\t}\n\n\tremove( item: DBase ): void {\n\t\tthis.update();\n\t\tif( this._item === item ) {\n\t\t\tthis.set_( null, true );\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tthis.update();\n\t\tthis.set_( null, true );\n\t}\n\n\tprotected getFilterDefault(): ( item: DBase | null ) => boolean {\n\t\treturn defaultFilter;\n\t}\n\n\tprotected set_( item: DBase | null, emit: boolean ): void {\n\t\tconst oldItem = this._item;\n\t\tconst mode = this._mode;\n\t\tif( mode !== DMenuSidedSelectionMode.NONE && this._filter( item ) && oldItem !== item ) {\n\t\t\tthis.setState( oldItem, mode, false );\n\t\t\tthis._item = item;\n\t\t\tthis.setState( item, mode, true );\n\t\t\tif( emit ) {\n\t\t\t\tthis.emit( \"change\", this );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected setState( item: DBase | null, mode: DMenuSidedSelectionMode, isOn: boolean ): void {\n\t\tif( item ) {\n\t\t\tif( mode === DMenuSidedSelectionMode.SINGLE ) {\n\t\t\t\titem.setState( DBaseState.ACTIVE, isOn );\n\t\t\t} else {\n\t\t\t\titem.setState( DBaseState.ACTIVE | DBaseState.READ_ONLY, isOn );\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DImage, DImageOptions, DThemeImage } from \"./d-image\";\nimport { UtilKeyboardEvent } from \"./util/util-keyboard-event\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DExpandableHeaderOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeExpandableHeader = DThemeExpandableHeader\n> extends DImageOptions<VALUE, THEME> {\n\n}\n\nexport interface DThemeExpandableHeader extends DThemeImage {\n\n}\n\nexport class DExpandableHeader<\n\tVALUE = unknown,\n\tTHEME extends DThemeExpandableHeader = DThemeExpandableHeader,\n\tOPTIONS extends DExpandableHeaderOptions<VALUE, THEME> = DExpandableHeaderOptions<VALUE, THEME>\n> extends DImage<VALUE, THEME, OPTIONS> {\n\tconstructor( options?: OPTIONS ) {\n\t\tsuper( options );\n\n\t\tthis.on( UtilPointerEvent.down, (): void => {\n\t\t\tif( this.isActionable() ) {\n\t\t\t\tthis.onSelect();\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected onSelect() {\n\t\tthis.emit( \"select\", this );\n\t}\n\n\tonKeyDown( e: KeyboardEvent ): boolean {\n\t\tif( this.isActionable() && this.isFocused() && UtilKeyboardEvent.isActivateKey( e ) ) {\n\t\t\tthis.onSelect();\n\t\t}\n\n\t\treturn super.onKeyDown( e );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DExpandableHeader\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, DisplayObject } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DExpandableHeader, DExpandableHeaderOptions } from \"./d-expandable-header\";\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DExpandableOptions<\n\tTHEME extends DThemeExpandable = DThemeExpandable\n> extends DLayoutVerticalOptions<THEME> {\n\theader?: DisplayObject | DExpandableHeaderOptions;\n\tbody: Container;\n}\n\nexport interface DThemeExpandable extends DThemeLayoutVertical {\n\n}\n\nexport class DExpandable<\n\tTHEME extends DThemeExpandable = DThemeExpandable,\n\tOPTIONS extends DExpandableOptions<THEME> = DExpandableOptions<THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\tprotected _header!: DisplayObject;\n\tprotected _body!: Container;\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\t// Header\n\t\tconst theme = this.theme;\n\t\tconst header = this.toHeader( theme, options );\n\t\tthis._header = header;\n\t\theader.on( \"select\", (): void => {\n\t\t\tthis.toggle();\n\t\t});\n\t\tthis.addChild( header );\n\n\t\t// Body\n\t\tconst body = this.toBody( theme, options );\n\t\tthis._body = body;\n\t\tthis.addChild( body );\n\n\t\t//\n\t\tif( this.isActive() ) {\n\t\t\tthis.onActivated();\n\t\t} else {\n\t\t\tthis.onDeactivated();\n\t\t}\n\t}\n\n\tprotected toHeader( theme: THEME, options?: OPTIONS ): DisplayObject {\n\t\tif( options && options.header ) {\n\t\t\tif( options.header instanceof DisplayObject ) {\n\t\t\t\treturn options.header;\n\t\t\t} else {\n\t\t\t\treturn this.newHeader( theme, options.header );\n\t\t\t}\n\t\t}\n\t\treturn this.newHeader( theme );\n\t}\n\n\tprotected newHeader( theme: THEME, options?: DExpandableHeaderOptions ): DisplayObject {\n\t\treturn new DExpandableHeader( options );\n\t}\n\n\tprotected toBody( theme: THEME,  options: OPTIONS ): Container {\n\t\treturn options.body;\n\t}\n\n\topen(): void {\n\t\tthis.setActive( true );\n\t}\n\n\tclose(): void {\n\t\tthis.setActive( false );\n\t}\n\n\ttoggle(): void {\n\t\tthis.setActive( ! this.isActive() );\n\t}\n\n\tprotected onActivated(): void {\n\t\tconst body = this._body;\n\t\tif( body instanceof DBase ) {\n\t\t\tbody.show();\n\t\t} else {\n\t\t\tbody.visible = true;\n\t\t}\n\t}\n\n\tprotected onDeactivated(): void {\n\t\tconst body = this._body;\n\t\tif( body instanceof DBase ) {\n\t\t\tbody.hide();\n\t\t} else {\n\t\t\tbody.visible = false;\n\t\t}\n\t}\n\n\tprotected onStateChange( newState: DBaseState, oldState: DBaseState ): void {\n\t\tsuper.onStateChange( newState, oldState );\n\n\t\tif( DBaseStates.isActive( newState ) ) {\n\t\t\tif( ! DBaseStates.isActive( oldState ) ) {\n\t\t\t\tthis.onActivated();\n\t\t\t}\n\t\t} else {\n\t\t\tif( DBaseStates.isActive( oldState ) ) {\n\t\t\t\tthis.onDeactivated();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DExpandable\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputAndLabel, DInputAndLabelOptions, DThemeInputAndLabel } from \"./d-input-and-label\";\nimport { DInputInteger, DInputIntegerOptions, DThemeInputInteger } from \"./d-input-integer\";\n\nexport interface DInputIntegerAndLabelOptions<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel\n> extends DInputAndLabelOptions<DInputIntegerOptions, THEME> {}\n\nexport class DInputIntegerAndLabel<\n\tTHEME extends DThemeInputAndLabel = DThemeInputAndLabel,\n\tOPTIONS extends DInputIntegerAndLabelOptions<THEME> = DInputIntegerAndLabelOptions<THEME>\n> extends DInputAndLabel<DInputInteger, DInputIntegerOptions, THEME, OPTIONS> {\n\tprotected createInput( options?: DInputIntegerOptions<DThemeInputInteger> ): DInputInteger {\n\t\treturn new DInputInteger( options );\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMapCoordinate, DMapPoint } from \"./d-map-coordinate\";\n\nexport class DMapCoordinateEPSG3857 implements DMapCoordinate {\n\tprotected static CIRCUMFERENCE_HALF: number = Math.PI * 6378137 /* Approximate earth radius in meter */;\n\tprotected _tileSize: number;\n\n\tconstructor( tileSize: number = 256 ) {\n\t\tthis._tileSize = tileSize;\n\t}\n\n\tgetTileSize(): number {\n\t\treturn this._tileSize;\n\t}\n\n\t/**\n\t * Converts the given (lon, lat) point in WGS84 to (x, y) in EPSG:900913.\n\t * The origin of the converted point (x, y) is at the middle-left corner.\n\t * The `meters` can be the same instance that is passed in as the `lonlat`.\n\t *\n\t * @param lonlat (lon, lat) point\n\t * @param meters (x, y) point in meters converted from the given lonlat.\n\t * @return (x, y) point in meters\n\t * @see https://www.maptiler.com/google-maps-coordinates-tile-bounds-projection/\n\t * @see https://qiita.com/MALORGIS/items/1a9114dd090e5b891bf7\n\t */\n\tlonLatToMeters( lonlat: DMapPoint, meters: DMapPoint ): DMapPoint {\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tmeters.x = lonlat.x * C / 180;\n\t\tmeters.y = Math.log( Math.tan( ( 90 + lonlat.y ) * Math.PI / 360 ) ) * C / Math.PI;\n\t\treturn meters;\n\t}\n\n\t/**\n\t * The `lonlat` can be the same instance that is passed in as the `meters`.\n\t *\n\t * @param meters\n\t * @param lonlat\n\t */\n\tmetersToLonLat( meters: DMapPoint, lonlat: DMapPoint ): DMapPoint {\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tlonlat.x = meters.x / C * 180;\n\t\tlonlat.y = Math.atan( Math.exp( meters.y * Math.PI / C ) ) * 360 / Math.PI - 90;\n\t\treturn lonlat;\n\t}\n\n\t/**\n\t * Converts pixel coordinates in given zoom level of pyramid to EPSG:900913.\n\t * The origin of the `pixels` is the top-left corner.\n\t * The `meters` can be the same instance that is passed in as the `pixels`.\n\t */\n\tpixelsToMeters( pixels: DMapPoint, tz: number, tileSize: number, meters: DMapPoint ): DMapPoint {\n\t\tconst R = this.toResolution( tz, tileSize );\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tmeters.x = pixels.x * R - C;\n\t\tmeters.y = C - pixels.y * R;\n\t\treturn meters;\n\t}\n\n\t/**\n\t * Converts EPSG:900913 to pyramid pixel coordinates in given zoom level.\n\t * The origin of the pixels is the top-left corner.\n\t * The `pixels` can be the same instance that is passed in as the `meters`.\n\t */\n\tmetersToPixels( meters: DMapPoint, tz: number, tileSize: number, pixels: DMapPoint ): DMapPoint {\n\t\tconst R = this.toResolution( tz, tileSize );\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tpixels.x = ( meters.x + C ) / R;\n\t\tpixels.y = ( C - meters.y ) / R;\n\t\treturn pixels;\n\t}\n\n\t/**\n\t * Returns a tile covering region in given pixel coordinates.\n\t * The origin of the tile is the top-left corner.\n\t * The `tile` can be the same instance that is passed in as the `pixels`.\n\t */\n\tpixelsToTile( pixels: DMapPoint, tileSize: number, tile: DMapPoint ): DMapPoint {\n\t\ttile.x = Math.ceil( pixels.x / tileSize ) - 1;\n\t\ttile.y = Math.ceil( pixels.y / tileSize ) - 1;\n\t\treturn tile;\n\t}\n\n\t/**\n\t * The origin of the tile is the top-left corner.\n\t * The `tile` can be the same instance that is passed in as the `meters`.\n\t */\n\tmetersToTile( meters: DMapPoint, tz: number, tile: DMapPoint ): DMapPoint {\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tconst Z = 1 << tz;\n\t\ttile.x = Math.ceil( 0.5 * ( meters.x / C + 1 ) * Z ) - 1;\n\t\ttile.y = Math.ceil( 0.5 * ( 1 - meters.y / C ) * Z ) - 1;\n\t\treturn tile;\n\t}\n\n\tlonLatToTile( lonlat: DMapPoint, tz: number, tile: DMapPoint ): DMapPoint {\n\t\treturn this.metersToTile( this.lonLatToMeters( lonlat, tile ), tz, tile );\n\t}\n\n\tlonLatToPixels( lonlat: DMapPoint, tz: number, tileSize: number, pixels: DMapPoint ): DMapPoint {\n\t\treturn this.metersToPixels( this.lonLatToMeters( lonlat, pixels ), tz, tileSize, pixels );\n\t}\n\n\tpixelsToLonLat( pixels: DMapPoint, tz: number, tileSize: number, lonlat: DMapPoint ): DMapPoint {\n\t\treturn this.metersToLonLat( this.pixelsToMeters( pixels, tz, tileSize, lonlat ), lonlat );\n\t}\n\n\t/**\n\t * The `pixels` can be the same instance that is passed in as the `tile`.\n\t */\n\ttileToPixels( tile: DMapPoint, tileSize: number, pixels: DMapPoint ): DMapPoint {\n\t\tpixels.x = tile.x * tileSize;\n\t\tpixels.y = tile.y * tileSize;\n\t\treturn pixels;\n\t}\n\n\t/**\n\t * Returns bounds of the given tile in EPSG:900913 coordinates\n\t * The `meters` can be the same instance that is passed in as the `tile`.\n\t */\n\ttileToMeters( tile: DMapPoint, tz: number, meters: DMapPoint ): DMapPoint {\n\t\tconst R = this.toResolutionMeter( tz );\n\t\tconst C = DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF;\n\t\tmeters.x = tile.x * R + C;\n\t\tmeters.y = C - tile.y * R;\n\t\treturn meters;\n\t}\n\n\tprotected toResolutionMeter( tz: number ): number {\n\t\treturn ( 2 * DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF ) / ( 1 << tz );\n\t}\n\n\tprotected toResolution( tz: number, tileSize: number ): number {\n\t\treturn ( 2 * DMapCoordinateEPSG3857.CIRCUMFERENCE_HALF ) / ( tileSize << tz );\n\t}\n\n\ttoTileCount( tz: number ): number {\n\t\treturn (1 << tz);\n\t}\n\n\ttoTileCode( tz: number, tx: number, ty: number ): number {\n\t\treturn (tx << tz) + ty;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DMapCoordinate } from \"./d-map-coordinate\";\nimport { DMapCoordinateEPSG3857 } from \"./d-map-coordinate-epsg3857\";\n\nexport class DMapCoordinates {\n\tprotected static _default?: DMapCoordinate;\n\n\tstatic get DEFAULT(): DMapCoordinate {\n\t\tif( this._default == null ) {\n\t\t\tthis._default = new DMapCoordinateEPSG3857();\n\t\t}\n\t\treturn this._default;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, Renderer, resources, Sprite, Texture } from \"pixi.js\";\n\nexport class DMapTile {\n\ttx: number;\n\tty: number;\n\n\tprotected _sprite: Sprite;\n\n\tconstructor(\n\t\tparent: Container,\n\t\ttx: number, ty: number,\n\t\tpx: number, py: number,\n\t\tscale: number\n\t) {\n\t\tthis.tx = tx;\n\t\tthis.ty = ty;\n\t\tconst sprite = new Sprite( Texture.EMPTY );\n\t\t(sprite as any).parent = parent;\n\t\tsprite.position.set( px, py );\n\t\tsprite.scale.set( scale, scale );\n\t\tthis._sprite = sprite;\n\t}\n\n\tload( url: string, onLoaded: () => void ): void {\n\t\tconst texture = Texture.from( url, { resolution: 1 } );\n\t\tthis._sprite.texture = texture;\n\t\tif( texture.valid ) {\n\t\t\tonLoaded();\n\t\t} else {\n\t\t\ttexture.on( \"update\", onLoaded );\n\t\t}\n\t}\n\n\ttransform( px: number, py: number, scale: number ): void {\n\t\tconst sprite = this._sprite;\n\t\tsprite.position.set( px, py );\n\t\tsprite.scale.set( scale, scale );\n\t}\n\n\tget loaded(): boolean {\n\t\treturn this._sprite.texture.valid;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tconst sprite = this._sprite;\n\t\tsprite.updateTransform();\n\t\tsprite.render( renderer );\n\t}\n\n\tdestroy(): void {\n\t\tconst sprite = this._sprite;\n\t\tconst texture = sprite.texture;\n\t\tconst resource = texture.baseTexture.resource;\n\t\tlet image: HTMLImageElement | null = null;\n\t\tif( resource instanceof resources.BaseImageResource ) {\n\t\t\tif( resource.source instanceof HTMLImageElement ) {\n\t\t\t\timage = resource.source;\n\t\t\t}\n\t\t}\n\t\ttexture.destroy( true );\n\t\tsprite.destroy();\n\t\tif( image ) {\n\t\t\timage.src = \"\";\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point, Renderer } from \"pixi.js\";\nimport { DBase } from \"./d-base\";\nimport { DMapCoordinate } from \"./d-map-coordinate\";\nimport { DMapTile } from \"./d-map-tile\";\nimport { DMapTileMappingInternal } from \"./d-map-tile-mapping-internal\";\nimport { DMapTileUrlBuilder } from \"./d-map-tile-url-builder\";\n\nexport class DMapTilePlane {\n\tprotected static WORK: Point = new Point();\n\n\tprotected readonly _parent: DBase;\n\tprotected readonly _builder: DMapTileUrlBuilder;\n\tprotected readonly _tz: number;\n\tprotected _lon0: number;\n\tprotected _lat0: number;\n\tprotected _lon1: number;\n\tprotected _lat1: number;\n\tprotected readonly _tiles: Map<number, DMapTile>;\n\tprotected _renderer?: Renderer;\n\tprotected readonly _renderTileBound: ( tile: DMapTile ) => void;\n\tprotected _txmin: number;\n\tprotected _txmax: number;\n\tprotected _tymin: number;\n\tprotected _tymax: number;\n\tprotected readonly _deleteTileBound: ( tile: DMapTile, tileCode: number, tiles: Map<number, DMapTile> ) => void;\n\tprotected readonly _destroyTileBound: ( tile: DMapTile ) => void;\n\tprotected _tileCount: number;\n\tprotected _tileScale: number;\n\tprotected _tileScaleRelative: number;\n\tprotected _tileSize: number;\n\tprotected _mapping: DMapTileMappingInternal;\n\tprotected _coordinate: DMapCoordinate;\n\tprotected _isLoaded: boolean;\n\tprotected readonly _updateLoadingStateForEach: ( tile: DMapTile ) => void;\n\tprotected readonly _onLoaded: () => void;\n\tprotected readonly _onLoadedBound: () => void;\n\tprotected _isOnLoadedCalled: boolean;\n\tprotected _isOnLoadedAllowed: boolean;\n\n\tconstructor(\n\t\tparent: DBase,\n\t\tbuilder: DMapTileUrlBuilder,\n\t\ttz: number,\n\t\tmapping: DMapTileMappingInternal,\n\t\tcoordinate: DMapCoordinate,\n\t\tonLoaded: () => void\n\t) {\n\t\tthis._parent = parent;\n\t\tthis._builder = builder;\n\t\tthis._onLoaded = onLoaded;\n\t\tthis._isOnLoadedCalled = false;\n\t\tthis._isOnLoadedAllowed = true;\n\t\tthis._onLoadedBound = (): void => {\n\t\t\tthis.onLoaded();\n\t\t};\n\t\tthis._tz = tz;\n\t\tthis._lon0 = NaN;\n\t\tthis._lat0 = NaN;\n\t\tthis._lon1 = NaN;\n\t\tthis._lat1 = NaN;\n\t\tthis._tiles = new Map<number, DMapTile>();\n\t\tthis._renderTileBound = ( tile: DMapTile ): void => {\n\t\t\tthis.renderTile( tile );\n\t\t};\n\t\tthis._txmin = NaN;\n\t\tthis._txmax = NaN;\n\t\tthis._tymin = NaN;\n\t\tthis._tymax = NaN;\n\t\tthis._deleteTileBound = ( tile: DMapTile, tileCode: number, tiles: Map<number, DMapTile> ): void => {\n\t\t\tthis.deleteTile( tile, tileCode, tiles );\n\t\t};\n\t\tthis._destroyTileBound = ( tile: DMapTile ): void => {\n\t\t\tthis.destroyTile( tile );\n\t\t};\n\t\tthis._updateLoadingStateForEach = ( tile: DMapTile ): void => {\n\t\t\tif( ! tile.loaded ) {\n\t\t\t\tthis._isLoaded = false;\n\t\t\t}\n\t\t};\n\t\tthis._tileCount = coordinate.toTileCount( tz );\n\t\tthis._tileScaleRelative = 1 / this._tileCount;\n\t\tthis._tileScale = mapping.scale * this._tileScaleRelative;\n\t\tthis._tileSize = coordinate.getTileSize() * mapping.scale;\n\t\tthis._mapping = mapping;\n\t\tthis._coordinate = coordinate;\n\t\tthis._isLoaded = true;\n\t}\n\n\tprotected newTile( tx: number, ty: number, px: number, py: number, scale: number ): DMapTile {\n\t\treturn new DMapTile( this._parent, tx, ty, px, py, scale );\n\t}\n\n\tprotected renderTile( tile: DMapTile ): void {\n\t\ttile.render( this._renderer! );\n\t}\n\n\tget tz(): number {\n\t\treturn this._tz;\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tthis._renderer = renderer;\n\t\tthis._tiles.forEach( this._renderTileBound );\n\t}\n\n\tmove( lon0: number, lat0: number, lon1: number, lat1: number ): void {\n\t\tconst oldLon0 = this._lon0;\n\t\tconst oldLat0 = this._lat0;\n\t\tconst oldLon1 = this._lon1;\n\t\tconst oldLat1 = this._lat1;\n\t\tif( oldLon0 !== lon0 || oldLat0 !== lat0 || oldLon1 !== lon1 || oldLat1 !== lat1 ) {\n\t\t\tthis._lon0 = lon0;\n\t\t\tthis._lat0 = lat0;\n\t\t\tthis._lon1 = lon1;\n\t\t\tthis._lat1 = lat1;\n\n\t\t\tconst tz = this._tz;\n\t\t\tconst coordinate = this._coordinate;\n\n\t\t\tconst work = DMapTilePlane.WORK;\n\t\t\twork.set( lon0, lat0 );\n\t\t\tcoordinate.lonLatToTile( work, tz, work );\n\t\t\tconst tx0 = work.x;\n\t\t\tconst ty0 = work.y;\n\n\t\t\twork.set( lon1, lat1 );\n\t\t\tcoordinate.lonLatToTile( work, tz, work );\n\t\t\tconst tx1 = work.x;\n\t\t\tconst ty1 = work.y;\n\n\t\t\tconst tileCount = this._tileCount;\n\t\t\tlet txmin = Math.max( 0, tx0 );\n\t\t\tlet txmax = Math.min( tileCount - 1, tx1 );\n\t\t\tlet tymin = Math.max( 0, ty0 );\n\t\t\tlet tymax = Math.min( tileCount - 1, ty1 );\n\t\t\tconst dtxmin = txmin - this._txmin;\n\t\t\tconst dtxmax = txmax - this._txmax;\n\t\t\tconst dtymin = tymin - this._tymin;\n\t\t\tconst dtymax = tymax - this._tymax;\n\n\t\t\tconst isTxMinChanged = dtxmin !== dtxmin || dtxmin < 0 || 1 < dtxmin;\n\t\t\tconst isTxMaxChanged = dtxmax !== dtxmax || 0 < dtxmax || dtxmax < -1;\n\t\t\tconst isTyMinChanged = dtymin !== dtymin || dtymin < 0 || 1 < dtymin;\n\t\t\tconst isTyMaxChanged = dtymax !== dtymax || 0 < dtymax || dtymax < -1;\n\t\t\tif( isTxMinChanged || isTxMaxChanged || isTyMinChanged || isTyMaxChanged ) {\n\t\t\t\tif( isTxMinChanged ) {\n\t\t\t\t\tthis._txmin = txmin;\n\t\t\t\t} else {\n\t\t\t\t\ttxmin = this._txmin;\n\t\t\t\t}\n\t\t\t\tif( isTxMaxChanged ) {\n\t\t\t\t\tthis._txmax = txmax;\n\t\t\t\t} else {\n\t\t\t\t\ttxmax = this._txmax;\n\t\t\t\t}\n\t\t\t\tif( isTyMinChanged ) {\n\t\t\t\t\tthis._tymin = tymin;\n\t\t\t\t} else {\n\t\t\t\t\ttymin = this._tymin;\n\t\t\t\t}\n\t\t\t\tif( isTyMaxChanged ) {\n\t\t\t\t\tthis._tymax = tymax;\n\t\t\t\t} else {\n\t\t\t\t\ttymax = this._tymax;\n\t\t\t\t}\n\n\t\t\t\tconst tiles = this._tiles;\n\t\t\t\ttiles.forEach( this._deleteTileBound );\n\n\t\t\t\tconst ctx = (txmin + txmax) >> 1;\n\t\t\t\tconst cty = (tymin + tymax) >> 1;\n\t\t\t\tconst ltx = Math.max( ctx - txmin, txmax - ctx );\n\t\t\t\tconst lty = Math.max( cty - tymin, tymax - cty );\n\t\t\t\tconst lt = Math.max( ltx, lty );\n\n\t\t\t\tthis.toOffset( work );\n\t\t\t\tconst offsetX = work.x;\n\t\t\t\tconst offsetY = work.y;\n\n\t\t\t\tthis._isOnLoadedCalled = false;\n\t\t\t\tthis._isOnLoadedAllowed = false;\n\t\t\t\tthis.loadTile( tz, ctx, cty, offsetX, offsetY, work );\n\t\t\t\tfor( let it = 1; it <= lt; ++it ) {\n\t\t\t\t\tconst txa = ctx - it;\n\t\t\t\t\tif( txmin <= txa ) {\n\t\t\t\t\t\tthis.loadTilesY( tz, txa, cty, it, tymin, tymax, offsetX, offsetY, work );\n\t\t\t\t\t}\n\t\t\t\t\tconst txb = ctx + it;\n\t\t\t\t\tif( txb <= txmax ) {\n\t\t\t\t\t\tthis.loadTilesY( tz, txb, cty, it, tymin, tymax, offsetX, offsetY, work );\n\t\t\t\t\t}\n\t\t\t\t\tconst tya = cty - it;\n\t\t\t\t\tif( tymin <= tya ) {\n\t\t\t\t\t\tthis.loadTilesX( tz, ctx, it - 1, txmin, txmax, tya, offsetX, offsetY, work );\n\t\t\t\t\t}\n\t\t\t\t\tconst tyb = cty + it;\n\t\t\t\t\tif( tyb <= tymax ) {\n\t\t\t\t\t\tthis.loadTilesX( tz, ctx, it - 1, txmin, txmax, tyb, offsetX, offsetY, work );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._isOnLoadedAllowed = true;\n\t\t\t\tif( this._isOnLoadedCalled ) {\n\t\t\t\t\tthis.onLoaded();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected loadTilesX(\n\t\ttz: number,\n\t\tctx: number, ltx: number, txmin: number, txmax: number,\n\t\tty: number,\n\t\tox: number, oy: number,\n\t\twork: Point\n\t): void {\n\t\tthis.loadTile( tz, ctx, ty, ox, oy, work );\n\t\tfor( let i = 1; i <= ltx; ++i ) {\n\t\t\tconst txa = ctx - i;\n\t\t\tif( txmin <= txa ) {\n\t\t\t\tthis.loadTile( tz, txa, ty, ox, oy, work );\n\t\t\t}\n\t\t\tconst txb = ctx + i;\n\t\t\tif( txb <= txmax ) {\n\t\t\t\tthis.loadTile( tz, txb, ty, ox, oy, work );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected loadTilesY(\n\t\ttz: number, tx: number,\n\t\tcty: number, lty: number, tymin: number, tymax: number,\n\t\tox: number, oy: number,\n\t\twork: Point\n\t): void {\n\t\tthis.loadTile( tz, tx, cty, ox, oy, work );\n\t\tfor( let i = 1; i <= lty; ++i ) {\n\t\t\tconst tya = cty - i;\n\t\t\tif( tymin <= tya ) {\n\t\t\t\tthis.loadTile( tz, tx, tya, ox, oy, work );\n\t\t\t}\n\t\t\tconst tyb = cty + i;\n\t\t\tif( tyb <= tymax ) {\n\t\t\t\tthis.loadTile( tz, tx, tyb, ox, oy, work );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected loadTile( tz: number, tx: number, ty: number, ox: number, oy: number, work: Point ): void {\n\t\tconst coordinate = this._coordinate;\n\t\tconst tileCode = coordinate.toTileCode( tz, tx, ty );\n\t\tconst tiles = this._tiles;\n\t\tlet tile = tiles.get( tileCode );\n\t\tif( tile == null ) {\n\t\t\tthis.toTilePosition( tx, ty, ox, oy, work );\n\t\t\ttile = this.newTile( tx, ty, work.x, work.y, this._tileScale );\n\t\t\ttiles.set( tileCode, tile );\n\t\t\ttile.load( this._builder( tz, tx, ty ), this._onLoadedBound );\n\t\t\tthis._isLoaded = false;\n\t\t}\n\t}\n\n\tprotected toTilePosition( tx: number, ty: number, ox: number, oy: number, result: Point ): Point {\n\t\tconst tileSize = this._tileSize;\n\t\tconst tileScaleRelative = this._tileScaleRelative;\n\t\tresult.set( tx, ty );\n\t\tthis._coordinate.tileToPixels( result, tileSize, result );\n\t\tresult.set( result.x * tileScaleRelative + ox, result.y * tileScaleRelative + oy );\n\t\treturn result;\n\t}\n\n\tprotected toOffset( result: Point ): Point {\n\t\tconst parent = this._parent;\n\t\tconst mapping = this._mapping;\n\t\tconst tileSize = this._tileSize;\n\t\tresult.set(\n\t\t\t-mapping.x * tileSize + parent.width * 0.5,\n\t\t\t-mapping.y * tileSize + parent.height * 0.5\n\t\t);\n\t\treturn result;\n\t}\n\n\tprotected deleteTile( tile: DMapTile, tileCode: number, tiles: Map<number, DMapTile> ): void {\n\t\tconst tx = tile.tx;\n\t\tconst ty = tile.ty;\n\t\tif( tx < this._txmin || this._txmax < tx || ty < this._tymin || this._tymax < ty ) {\n\t\t\ttiles.delete( tileCode );\n\t\t\ttile.destroy();\n\t\t}\n\t}\n\n\tdestroy(): void {\n\t\tconst tiles = this._tiles;\n\t\ttiles.forEach( this._destroyTileBound );\n\t\ttiles.clear();\n\t}\n\n\tprotected destroyTile( tile: DMapTile ): void {\n\t\ttile.destroy();\n\t}\n\n\tprotected updateLoadingState(): void {\n\t\tthis._isLoaded = true;\n\t\tthis._tiles.forEach( this._updateLoadingStateForEach );\n\t}\n\n\tprotected onLoaded(): void {\n\t\tif( this._isOnLoadedAllowed ) {\n\t\t\tthis._onLoaded();\n\t\t} else {\n\t\t\tthis._isOnLoadedCalled = true;\n\t\t}\n\t}\n\n\tget loaded(): boolean {\n\t\tif( ! this._isLoaded ) {\n\t\t\tthis.updateLoadingState();\n\t\t}\n\t\treturn this._isLoaded;\n\t}\n\n\tget mapping(): DMapTileMappingInternal {\n\t\treturn this._mapping;\n\t}\n\n\tset mapping( mapping: DMapTileMappingInternal ) {\n\t\tconst coordinate = this._coordinate;\n\t\tconst tileScale = mapping.scale * this._tileScaleRelative;\n\t\tconst tileSize = coordinate.getTileSize() * mapping.scale;\n\t\tthis._tileScale = tileScale;\n\t\tthis._tileSize = tileSize;\n\t\tthis._mapping = mapping;\n\n\t\tconst work = DMapTilePlane.WORK;\n\t\tthis.toOffset( work );\n\t\tconst offsetX = work.x;\n\t\tconst offsetY = work.y;\n\n\t\tthis._tiles.forEach(( tile: DMapTile ): void => {\n\t\t\tthis.toTilePosition( tile.tx, tile.ty, offsetX, offsetY, work );\n\t\t\ttile.transform( work.x, work.y, tileScale );\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point, Renderer, utils } from \"pixi.js\";\nimport { DApplications } from \"./d-applications\";\nimport { DBase } from \"./d-base\";\nimport { DMapCoordinate } from \"./d-map-coordinate\";\nimport { DMapTileMapping } from \"./d-map-tile-mapping\";\nimport { DMapTileMappingInternal } from \"./d-map-tile-mapping-internal\";\nimport { DMapTilePlane } from \"./d-map-tile-plane\";\nimport { DMapTilePyramid, DMapTilePyramidOptions } from \"./d-map-tile-pyramid\";\nimport { DMapTileUrlBuilder } from \"./d-map-tile-url-builder\";\n\nexport class DMapTilePyramidImpl extends utils.EventEmitter implements DMapTilePyramid {\n\tprotected static WORK_LONLAT: Point = new Point();\n\n\tprotected readonly _canvas: DBase;\n\tprotected readonly _builder: DMapTileUrlBuilder;\n\tprotected readonly _planes: Array<DMapTilePlane | undefined>;\n\tprotected _z: number;\n\tprotected _tz: number;\n\tprotected _minZ: number;\n\tprotected _maxZ: number;\n\tprotected _mapping: DMapTileMapping;\n\tprotected _mappingInternal: DMapTileMappingInternal;\n\tprotected _coordinate: DMapCoordinate;\n\tprotected _onLoadedBound: () => void;\n\tprotected _fitBound: () => void;\n\tprotected _fitBoundTimeout: number | undefined;\n\tprotected _fitThrottledBound: () => void;\n\tprotected _fitThrottle: number;\n\n\tconstructor( options: DMapTilePyramidOptions ) {\n\t\tsuper();\n\t\tconst canvas = this._canvas = options.canvas;\n\t\tthis._builder = options.builder;\n\t\tconst mappingLonLat = this._mapping = options.mapping;\n\t\tconst coordinate = this._coordinate = options.coordinate;\n\t\tthis._mappingInternal = this.toMapping( canvas, mappingLonLat, coordinate );\n\t\tthis._z = NaN;\n\t\tthis._tz = NaN;\n\t\tthis._minZ = options.plane.min;\n\t\tthis._maxZ = options.plane.max;\n\t\tthis._planes = [];\n\t\tthis._onLoadedBound = (): void => {\n\t\t\tthis.onLoaded();\n\t\t};\n\t\tthis._fitBound = (): void => {\n\t\t\tthis._fitBoundTimeout = undefined;\n\t\t\tthis.fit();\n\t\t};\n\t\tthis._fitThrottle = options.plane.throttle;\n\t\tconst fitThrottledBound = this._fitThrottledBound = (): void => {\n\t\t\tthis.fitThrottled();\n\t\t};\n\t\tcanvas.on( \"scale\", fitThrottledBound );\n\t\tcanvas.on( \"move\", fitThrottledBound );\n\t\tcanvas.appendRenderable( this, true );\n\t}\n\n\tget coordinate(): DMapCoordinate {\n\t\treturn this._coordinate;\n\t}\n\n\tprotected fitThrottled(): void {\n\t\tif( this._fitBoundTimeout == null ) {\n\t\t\tthis._fitBoundTimeout = window.setTimeout( this._fitBound, this._fitThrottle );\n\t\t}\n\t}\n\n\tprotected toMapping( canvas: DBase, mapping: DMapTileMapping, coordinate: DMapCoordinate ): DMapTileMappingInternal {\n\t\tconst work = DMapTilePyramidImpl.WORK_LONLAT;\n\t\tconst tileSize = coordinate.getTileSize();\n\n\t\twork.set( mapping.from.lon, mapping.from.lat );\n\t\tcoordinate.lonLatToPixels( work, 0, tileSize, work );\n\t\tconst x0 = work.x;\n\t\tconst y0 = work.y;\n\n\t\twork.set( mapping.to.lon, mapping.to.lat );\n\t\tcoordinate.lonLatToPixels( work, 0, tileSize, work );\n\t\tconst x1 = work.x;\n\t\tconst y1 = work.y;\n\n\t\tconst dx = Math.abs(x1 - x0);\n\t\tconst dy = Math.abs(y1 - y0);\n\t\tconst dmin = 0.0000001;\n\t\tlet scale = 1;\n\t\tif( dmin < dx ) {\n\t\t\tif( dmin < dy ) {\n\t\t\t\tscale = Math.max( canvas.width / dx, canvas.height / dy );\n\t\t\t} else {\n\t\t\t\tscale = canvas.width / dx;\n\t\t\t}\n\t\t} else {\n\t\t\tif( dmin < dy ) {\n\t\t\t\tscale = canvas.height / dy;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tscale,\n\t\t\tx: 0.5 * (x1 + x0) / tileSize,\n\t\t\ty: 0.5 * (y1 + y0) / tileSize\n\t\t};\n\t}\n\n\tget mapping(): DMapTileMapping {\n\t\treturn this._mapping;\n\t}\n\n\tset mapping( mapping: DMapTileMapping ) {\n\t\tconst oldMapping = this._mappingInternal;\n\t\tconst newMapping = this.toMapping( this._canvas, mapping, this._coordinate );\n\t\tconst threshold = 0.0000001;\n\t\tif(\n\t\t\tthreshold < Math.abs(oldMapping.scale - newMapping.scale) ||\n\t\t\tthreshold < Math.abs(oldMapping.x - newMapping.x) ||\n\t\t\tthreshold < Math.abs(oldMapping.y - newMapping.y)\n\t\t) {\n\t\t\tthis._mappingInternal = newMapping;\n\n\t\t\tconst planes = this._planes;\n\t\t\tfor( let i = 0, imax = planes.length; i < imax; ++i ) {\n\t\t\t\tconst plane = planes[ i ];\n\t\t\t\tif( plane ) {\n\t\t\t\t\tplane.mapping = newMapping;\n\t\t\t\t}\n\t\t\t}\n\t\t\tDApplications.update( this._canvas );\n\n\t\t\tthis._fitThrottledBound();\n\t\t}\n\t}\n\n\tprotected newPlane( tz: number ): DMapTilePlane {\n\t\treturn new DMapTilePlane(\n\t\t\tthis._canvas,\n\t\t\tthis._builder,\n\t\t\ttz,\n\t\t\tthis._mappingInternal,\n\t\t\tthis._coordinate,\n\t\t\tthis._onLoadedBound\n\t\t);\n\t}\n\n\trender( renderer: Renderer ): void {\n\t\tconst tz = this._tz;\n\t\tconst planes = this._planes;\n\t\tfor( let i = 0; i < tz; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane != null ) {\n\t\t\t\tplane.render( renderer );\n\t\t\t}\n\t\t}\n\n\t\tfor( let i = planes.length - 1; tz < i; --i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane != null ) {\n\t\t\t\tplane.render( renderer );\n\t\t\t}\n\t\t}\n\n\t\tconst planeTz = planes[ tz ];\n\t\tif( planeTz != null ) {\n\t\t\tplaneTz.render( renderer );\n\t\t}\n\t}\n\n\tprotected toTileZ( tz: number ): number {\n\t\treturn Math.min( this._maxZ, Math.max( this._minZ, Math.floor( tz ) ) );\n\t}\n\n\tupdateTransform(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected toZ( scale: number ): number {\n\t\treturn Math.log( this._mappingInternal.scale * scale ) / Math.log( 2 );\n\t}\n\n\tmove( scale: number, lon0: number, lat0: number, lon1: number, lat1: number ): this {\n\t\tconst planes = this._planes;\n\t\tconst z = this.toZ( scale );\n\t\tif( this._z !== z ) {\n\t\t\tthis._z = z;\n\n\t\t\tconst tz = this.toTileZ( z );\n\t\t\tif( this._tz !== tz ) {\n\t\t\t\tthis._tz = tz;\n\n\t\t\t\tlet newPlane = planes[ tz ];\n\t\t\t\tif( newPlane == null ) {\n\t\t\t\t\tnewPlane = this.newPlane( tz );\n\t\t\t\t\tplanes[ tz ] = newPlane;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst plane = planes[ this._tz ];\n\t\tif( plane != null ) {\n\t\t\tplane.move( lon0, lat0, lon1, lat1 );\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfit(): this {\n\t\tconst canvas = this._canvas;\n\t\tif( canvas != null ) {\n\t\t\tconst container = canvas.parent;\n\t\t\tif( container != null ) {\n\t\t\t\tconst scale = canvas.scale;\n\t\t\t\tconst scaleX = scale.x;\n\t\t\t\tconst scaleY = scale.y;\n\t\t\t\tconst x = canvas.x;\n\t\t\t\tconst y = canvas.y;\n\t\t\t\tconst coordinate = this._coordinate;\n\t\t\t\tconst mapping = this._mappingInternal;\n\t\t\t\tconst tileSize = coordinate.getTileSize() * mapping.scale;\n\t\t\t\tconst x0 = mapping.x * tileSize - (x / scaleX + 0.5 * canvas.width);\n\t\t\t\tconst x1 = x0 + container.width / scaleX;\n\t\t\t\tconst y0 = mapping.y * tileSize - (y / scaleY + 0.5 * canvas.height);\n\t\t\t\tconst y1 = y0 + container.height / scaleY;\n\n\t\t\t\tconst work = DMapTilePyramidImpl.WORK_LONLAT;\n\t\t\t\twork.set( x0, y0 );\n\t\t\t\tcoordinate.pixelsToLonLat( work, 0, tileSize, work );\n\t\t\t\tconst lon0 = work.x;\n\t\t\t\tconst lat0 = work.y;\n\n\t\t\t\twork.set( x1, y1 );\n\t\t\t\tcoordinate.pixelsToLonLat( work, 0, tileSize, work );\n\t\t\t\tconst lon1 = work.x;\n\t\t\t\tconst lat1 = work.y;\n\n\t\t\t\tthis.move( scaleX, lon0, lat0, lon1, lat1 );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tprotected destroyPlanesBefore( tz: number, planes: Array<DMapTilePlane | undefined> ): void {\n\t\tfor( let i = 0; i < tz; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane ) {\n\t\t\t\tplane.destroy();\n\t\t\t\tplanes[ i ] = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected destroyPlanesAfter( tz: number, planes: Array<DMapTilePlane | undefined> ): void {\n\t\tfor( let i = tz + 1, imax = planes.length; i < imax; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane ) {\n\t\t\t\tplane.destroy();\n\t\t\t\tplanes[ i ] = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected cleanup(): void {\n\t\tconst tz = this._tz;\n\t\tconst planes = this._planes;\n\t\tconst planeTz = planes[ tz ];\n\t\tif( planeTz && planeTz.loaded ) {\n\t\t\tthis.destroyPlanesBefore( tz, planes );\n\t\t\tthis.destroyPlanesAfter( tz, planes );\n\t\t\treturn;\n\t\t}\n\n\t\tfor( let i = tz + 1, imax = planes.length; i < imax; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane && plane.loaded ) {\n\t\t\t\tthis.destroyPlanesBefore( tz, planes );\n\t\t\t\tthis.destroyPlanesAfter( i, planes );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor( let i = tz - 1; 0 <= i; --i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane && plane.loaded ) {\n\t\t\t\tthis.destroyPlanesBefore( i, planes );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onLoaded(): void {\n\t\tthis.cleanup();\n\t\tDApplications.update( this._canvas );\n\t}\n\n\tdestroy(): this {\n\t\tconst planes = this._planes;\n\t\tfor( let i = 0, imax = planes.length; i < imax; ++i ) {\n\t\t\tconst plane = planes[ i ];\n\t\t\tif( plane ) {\n\t\t\t\tplane.destroy();\n\t\t\t\tplanes[ i ] = undefined;\n\t\t\t}\n\t\t}\n\n\t\tconst canvas = this._canvas;\n\t\tconst fitThrottledBound = this._fitThrottledBound;\n\t\tcanvas.off( \"scale\", fitThrottledBound );\n\t\tcanvas.off( \"move\", fitThrottledBound );\n\t\tcanvas.removeRenderable( this, true );\n\n\t\treturn this;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDiagramCanvasBase } from \"./d-diagram-canvas-base\";\nimport { DMapCoordinate } from \"./d-map-coordinate\";\nimport { DMapCoordinates } from \"./d-map-coordinates\";\nimport { DMapTilePyramid } from \"./d-map-tile-pyramid\";\nimport { DMapTilePyramidImpl } from \"./d-map-tile-pyramid-impl\";\nimport { DMapTileUrlBuilder } from \"./d-map-tile-url-builder\";\n\nexport const DMapTileUrlBuilderKokudo: DMapTileUrlBuilder = ( tz: number, tx: number, ty: number ): string => {\n\tif( 5 <= tz ) {\n\t\treturn `https://cyberjapandata.gsi.go.jp/xyz/pale/${tz}/${tx}/${ty}.png`;\n\t} else if( 2 <= tz ) {\n\t\treturn `https://cyberjapandata.gsi.go.jp/xyz/std/${tz}/${tx}/${ty}.png`;\n\t} else {\n\t\treturn `https://cyberjapandata.gsi.go.jp/xyz/earthhillshade/${tz}/${tx}/${ty}.png`;\n\t}\n};\n\nexport const DMapTileUrlBuilderOsm: DMapTileUrlBuilder = ( tz: number, tx: number, ty: number ): string => {\n\treturn `https://${\"abc\"[( tx + ty ) % 3]}.tile.openstreetmap.org/${tz}/${tx}/${ty}.png`;\n};\n\nexport const DMapTileUrlBuilderOsmfj: DMapTileUrlBuilder = ( tz: number, tx: number, ty: number ): string => {\n\treturn `https://j.tile.openstreetmap.jp/${tz}/${tx}/${ty}.png`;\n};\n\nexport interface DMapTilePyramidsFromOptions {\n\tcanvas: DDiagramCanvasBase<any, any>;\n\tbuilder?: DMapTileUrlBuilder;\n\tcoordinate?: DMapCoordinate;\n\tplane?: {\n\t\tmin?: number;\n\t\tmax?: number;\n\t\tthrottle?: number;\n\t};\n}\n\nexport class DMapTilePyramids {\n\tstatic MIN: number = 0;\n\tstatic MAX: number = 18;\n\tstatic THROTTLE: number = 333;\n\n\tstatic toPlaneOptions( options: DMapTilePyramidsFromOptions ) {\n\t\tconst plane = options.plane;\n\t\tif( plane ) {\n\t\t\treturn {\n\t\t\t\tmin: ( plane.min != null ? plane.min : this.MIN ),\n\t\t\t\tmax: ( plane.max != null ? plane.max : this.MAX ),\n\t\t\t\tthrottle: ( plane.throttle != null ? plane.throttle : this.THROTTLE )\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tmin: this.MIN,\n\t\t\t\tmax: this.MAX,\n\t\t\t\tthrottle: this.THROTTLE\n\t\t\t};\n\t\t}\n\t}\n\n\tstatic from( options: DMapTilePyramidsFromOptions ): DMapTilePyramid {\n\t\treturn new DMapTilePyramidImpl({\n\t\t\tcanvas: options.canvas,\n\t\t\tbuilder: options.builder || DMapTileUrlBuilderOsmfj,\n\t\t\tmapping: options.canvas.tile.mapping,\n\t\t\tcoordinate: options.coordinate || DMapCoordinates.DEFAULT,\n\t\t\tplane: this.toPlaneOptions( options )\n\t\t});\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DMenuItem } from \"./d-menu-item\";\n\nexport interface DMenuBarItemOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuBarItem = DThemeMenuBarItem\n> extends DButtonOptions<VALUE, THEME> {\n\tmenu?: DMenuOptions<VALUE> | DMenu<VALUE>;\n}\n\nexport interface DThemeMenuBarItem extends DThemeButton {\n\n}\n\nexport class DMenuBarItem<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuBarItem = DThemeMenuBarItem,\n\tOPTIONS extends DMenuBarItemOptions<VALUE, THEME> = DMenuBarItemOptions<VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> {\n\tprotected _menu!: DMenu<VALUE>;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._menu = this.toMenu( this.theme, options );\n\t\tthis._menu.on( \"select\", ( value: VALUE, item: DMenuItem<VALUE>, menu: DMenu<VALUE> ): void => {\n\t\t\tthis.onSelect( value, item, menu );\n\t\t});\n\t}\n\n\tprotected toMenu( theme: THEME, options?: OPTIONS ): DMenu<VALUE> {\n\t\tconst menu = options && options.menu;\n\t\tif( menu instanceof DMenu ) {\n\t\t\treturn menu;\n\t\t} else {\n\t\t\treturn new DMenu( this.toMenuOptions( theme, menu ) );\n\t\t}\n\t}\n\n\tprotected newMenu( theme: THEME, options?: DMenuOptions<VALUE> ): DMenu<VALUE> {\n\t\treturn new DMenu<VALUE>( this.toMenuOptions( theme, options ) );\n\t}\n\n\tprotected toMenuOptions( theme: THEME, options?: DMenuOptions<VALUE> ): DMenuOptions<VALUE> | undefined {\n\t\toptions = options || {};\n\t\tif( options.fit == null ) {\n\t\t\toptions.fit = false;\n\t\t}\n\t\treturn options;\n\t}\n\n\tclose(): void {\n\t\tthis._menu.close();\n\t}\n\n\tget menu() {\n\t\treturn this._menu;\n\t}\n\n\tprotected onSelect( value: VALUE, item: DMenuItem<VALUE>, menu: DMenu<VALUE> ): void {\n\t\tconst parent = this.parent;\n\t\tif( parent != null ) {\n\t\t\tparent.emit( \"select\", value, item, menu );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuBarItem\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Container, interaction, Point } from \"pixi.js\";\nimport { DMenuBarItem } from \"./d-menu-bar-item\";\nimport { Closeable } from \"./d-menu-context\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport class DMenuBarBlocker extends Container {\n\tconstructor( target: Closeable & Container ) {\n\t\tsuper();\n\t\tthis.renderable = false;\n\t\tthis.interactive = true;\n\n\t\tthis.on( UtilPointerEvent.down, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( e.target === this ) {\n\t\t\t\ttarget.close();\n\t\t\t}\n\t\t});\n\t\tthis.on( UtilPointerEvent.move, ( e: interaction.InteractionEvent ): void => {\n\t\t\tif( e.target === this ) {\n\t\t\t\tconst children = target.children;\n\t\t\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\t\t\tconst child = children[ i ];\n\t\t\t\t\tif( child instanceof DMenuBarItem ) {\n\t\t\t\t\t\tchild.setHovered( child.containsPoint( e.data.global ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcontainsPoint( global: Point ): boolean {\n\t\treturn true;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DBaseState } from \"./d-base-state\";\nimport { DBaseStates } from \"./d-base-states\";\nimport { DLayoutHorizontal, DLayoutHorizontalOptions, DThemeLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DMenuBarBlocker } from \"./d-menu-bar-blocker\";\nimport { DMenuBarItem, DMenuBarItemOptions, DThemeMenuBarItem } from \"./d-menu-bar-item\";\nimport { Closeable, DMenuContext } from \"./d-menu-context\";\nimport { UtilClickOutside } from \"./util/util-click-outside\";\nimport { UtilOverlay } from \"./util/util-overlay\";\n\nexport interface DMenuBarOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuBar = DThemeMenuBar\n> extends DLayoutHorizontalOptions<THEME> {\n\titems?: Array<DMenuBarItemOptions<VALUE, DThemeMenuBarItem> | DisplayObject>;\n}\n\nexport interface DThemeMenuBar extends DThemeLayoutHorizontal {\n\n}\n\nexport class DMenuBar<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuBar = DThemeMenuBar,\n\tOPTIONS extends DMenuBarOptions<VALUE, THEME> = DMenuBarOptions<VALUE, THEME>\n>　extends DLayoutHorizontal<THEME, OPTIONS> {\n\tprotected _context!: DMenuContext | null;\n\tprotected _blocker!: DMenuBarBlocker;\n\tprotected _overlay!: UtilOverlay;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis.setState( DBaseState.FOCUS_ROOT, true );\n\n\t\tif( options != null && options.items != null ) {\n\t\t\tconst items = options.items;\n\t\t\tUtilClickOutside.apply( this, (): void => {\n\t\t\t\tthis.close();\n\t\t\t});\n\t\t\tconst onItemStateChangeBound = ( newState: DBaseState, oldState: DBaseState, item: DMenuBarItem<VALUE> ): void => {\n\t\t\t\tthis.onItemStateChange( newState, oldState, item );\n\t\t\t};\n\t\t\tfor( let i = 0, imax = items.length; i < imax; ++i ) {\n\t\t\t\tconst itemOrItemOptions = items[ i ];\n\t\t\t\tconst item = ( itemOrItemOptions instanceof DisplayObject ?\n\t\t\t\t\titemOrItemOptions : new DMenuBarItem<VALUE>( itemOrItemOptions )\n\t\t\t\t);\n\t\t\t\tif( item instanceof DMenuBarItem ) {\n\t\t\t\t\titem.on( \"statechange\", onItemStateChangeBound );\n\t\t\t\t}\n\t\t\t\tthis.addChild( item );\n\t\t\t}\n\t\t}\n\n\t\tthis.on( \"select\", (): void => {\n\t\t\tthis.close();\n\t\t});\n\n\t\tthis._context = null;\n\t\tthis._blocker = new DMenuBarBlocker( this );\n\t\tthis._overlay = new UtilOverlay( options );\n\t}\n\n\tprotected onItemStateChange( newState: DBaseState, oldState: DBaseState, item: DMenuBarItem<VALUE> ): void {\n\t\tconst context = this._context;\n\t\tif( context == null ) {\n\t\t\tif( ! DBaseStates.isDisabled( newState ) ) {\n\t\t\t\tif( DBaseStates.isPressed( newState ) ) {\n\t\t\t\t\tif( item.menu.isHidden() ) {\n\t\t\t\t\t\titem.setPressed( false );\n\t\t\t\t\t\tthis.open( item );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif( ! DBaseStates.isDisabled( newState ) ) {\n\t\t\t\tif( DBaseStates.isHovered( newState ) && ! DBaseStates.isHovered( oldState ) ) {\n\t\t\t\t\tconst menu = item.menu;\n\t\t\t\t\tif( menu.isHidden() ) {\n\t\t\t\t\t\tmenu.open( item, this, context );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetContext(): DMenuContext | null {\n\t\treturn this._context;\n\t}\n\n\tgetCloseable(): Closeable | null {\n\t\treturn this;\n\t}\n\n\topen( item: DMenuBarItem<VALUE> ): void {\n\t\tlet context = this._context;\n\t\tif( context == null ) {\n\t\t\tconst layer = this._overlay.pick( this );\n\t\t\tlayer.stage.addChild( this._blocker );\n\t\t\tcontext = this._context = new DMenuContext( this );\n\t\t\tcontext.trim( item );\n\t\t\tcontext.add( this );\n\t\t\titem.menu.open( item, this, context );\n\t\t}\n\t}\n\n\tclose(): void {\n\t\tconst context = this._context;\n\t\tif( context != null ) {\n\t\t\tthis._context = null;\n\t\t\tcontext.remove( this );\n\t\t\tconst blocker = this._blocker;\n\t\t\tconst parent = blocker.parent;\n\t\t\tif( parent ) {\n\t\t\t\tparent.removeChild( blocker );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuBar\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\n\nexport interface DMenuSidedContentOptions<\n\tTHEME extends DThemeMenuSidedContent = DThemeMenuSidedContent\n> extends DLayoutVerticalOptions<THEME> {\n\n}\n\nexport interface DThemeMenuSidedContent extends DThemeLayoutVertical {\n\n}\n\nexport class DMenuSidedContent<\n\tTHEME extends DThemeMenuSidedContent = DThemeMenuSidedContent,\n\tOPTIONS extends DMenuSidedContentOptions<THEME> = DMenuSidedContentOptions<THEME>\n> extends DLayoutHorizontal<THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected initReflowable(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSidedContent\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DAlignHorizontal } from \"./d-align-horizontal\";\nimport { DDialogSelect, DDialogSelectOptions } from \"./d-dialog-select\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DTableBodyCellCheckOptions } from \"./d-table-body-cell-check\";\nimport { DTableBodyCellColorOptions } from \"./d-table-body-cell-color\";\nimport { DTableBodyCellDateOptions } from \"./d-table-body-cell-date\";\nimport { DTableBodyCellDatetimeOptions } from \"./d-table-body-cell-datetime\";\nimport { DTableBodyCellIndexOptions } from \"./d-table-body-cell-index\";\nimport { DTableBodyCellInputIntegerOptions } from \"./d-table-body-cell-input-integer\";\nimport { DTableBodyCellInputRealOptions } from \"./d-table-body-cell-input-real\";\nimport { DTableBodyCellInputTextOptions } from \"./d-table-body-cell-input-text\";\nimport { DTableBodyCellSelectDialogOptions } from \"./d-table-body-cell-select-dialog\";\nimport { DTableBodyCellSelectFetcherOptions } from \"./d-table-body-cell-select-fetcher\";\nimport { DTableBodyCellSelectMenuOptions } from \"./d-table-body-cell-select-menu\";\nimport { DTableBodyCellTextOptions } from \"./d-table-body-cell-text\";\nimport { DTableBodyCellTimeOptions } from \"./d-table-body-cell-time\";\nimport { DTableHeaderCellOptions } from \"./d-table-header-cell\";\n\nexport enum DTableColumnType {\n\tINDEX,\n\tTEXT,\n\tINTEGER,\n\tREAL,\n\tCHECK,\n\tCOLOR,\n\tBUTTON,\n\tSELECT,\n\tDATE,\n\tDATETIME,\n\tTIME\n}\n\nexport type DTableGetter<ROW> = ( row: ROW, index: number ) => unknown;\nexport type DTableSetter<ROW> = ( row: ROW, index: number, cell: unknown ) => void;\nexport type DTableFormatter = ( cell: unknown ) => string;\nexport type DTableEditingFormatter = ( cell: unknown ) => string;\nexport type DTableEditingUnformatter = ( cell: string ) => unknown;\nexport type DTableEditingValidator = ( cell: unknown ) => unknown;\nexport type DTableSelectingGetter = ( selected: unknown ) => unknown;\n\nexport type DTableBodyCellOptionsUnion<ROW> = DTableBodyCellTextOptions<ROW> | DTableBodyCellInputTextOptions<ROW> |\n\tDTableBodyCellInputIntegerOptions<ROW> | DTableBodyCellInputRealOptions<ROW> | DTableBodyCellIndexOptions<ROW> |\n\tDTableBodyCellColorOptions<ROW> | DTableBodyCellCheckOptions<ROW> | DTableBodyCellSelectDialogOptions<ROW> |\n\tDTableBodyCellSelectFetcherOptions<ROW> | DTableBodyCellSelectMenuOptions<ROW> | DTableBodyCellDateOptions<ROW> |\n\tDTableBodyCellDatetimeOptions<ROW> | DTableBodyCellTimeOptions<ROW>;\n\nexport type DTableBodyCellOptionsMerged<ROW> = DTableBodyCellTextOptions<ROW> & DTableBodyCellInputTextOptions<ROW> &\n\tDTableBodyCellInputIntegerOptions<ROW> & DTableBodyCellInputRealOptions<ROW> & DTableBodyCellIndexOptions<ROW> &\n\tDTableBodyCellColorOptions<ROW> & DTableBodyCellCheckOptions<ROW> & DTableBodyCellSelectDialogOptions<ROW> &\n\tDTableBodyCellSelectFetcherOptions<ROW> & DTableBodyCellSelectMenuOptions<ROW> & DTableBodyCellDateOptions<ROW> &\n\tDTableBodyCellDatetimeOptions<ROW> & DTableBodyCellTimeOptions<ROW>;\n\nexport interface DTableColumnEditingOptions {\n\tformatter?: DTableEditingFormatter;\n\tunformatter?: DTableEditingUnformatter;\n\tvalidator?: DTableEditingValidator;\n}\n\nexport interface DTableColumnEditing {\n\tformatter?: DTableEditingFormatter;\n\tunformatter?: DTableEditingUnformatter;\n\tvalidator?: DTableEditingValidator;\n}\n\nexport interface DTableColumnSelectingOptions {\n\tgetter?: DTableSelectingGetter;\n\n\tmenu?: DMenuOptions<unknown> | DMenu<unknown>;\n\tdialog?: DDialogSelectOptions<unknown> | DDialogSelect<unknown>;\n\tfetcher?: () => Promise<unknown>;\n}\n\nexport interface DTableColumnSelecting {\n\tgetter: DTableSelectingGetter;\n\n\tmenu?: DMenu<unknown>;\n\tdialog?: DDialogSelect<unknown>;\n\tfetcher?: () => Promise<unknown>;\n}\n\nexport interface DTableColumnOptions<ROW> {\n\tweight?: number;\n\twidth?: number;\n\n\ttype?: (keyof typeof DTableColumnType) | DTableColumnType;\n\tlabel?: string;\n\tgetter?: DTableGetter<ROW>;\n\tsetter?: DTableSetter<ROW>;\n\tformatter?: DTableFormatter;\n\talign?: (keyof typeof DAlignHorizontal) | DAlignHorizontal;\n\n\teditable?: boolean;\n\tediting?: DTableColumnEditingOptions;\n\n\theader?: DTableHeaderCellOptions;\n\tbody?: DTableBodyCellOptionsUnion<ROW>;\n\n\tselecting?: DTableColumnSelectingOptions;\n}\n\nexport interface DTableColumn<ROW> {\n\tweight: number | undefined;\n\twidth: number | undefined;\n\n\ttype: DTableColumnType;\n\tlabel: string;\n\tgetter: DTableGetter<ROW>;\n\tsetter: DTableSetter<ROW>;\n\tformatter?: DTableFormatter;\n\talign: DAlignHorizontal;\n\n\teditable: boolean;\n\tediting: DTableColumnEditing;\n\n\theader?: DTableHeaderCellOptions;\n\tbody?: DTableBodyCellOptionsUnion<ROW>;\n\n\tselecting: DTableColumnSelecting;\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DisplayObject } from \"pixi.js\";\nimport { DBase, DBaseOptions } from \"./d-base\";\nimport { Closeable, DMenuContext } from \"./d-menu-context\";\nimport { DMenuItemOptionsUnion } from \"./d-menu-item-options-union\";\nimport { DMenuSidedContent, DMenuSidedContentOptions } from \"./d-menu-sided-content\";\nimport { DMenuSidedSelection, DMenuSidedSelectionOptions } from \"./d-menu-sided-selection\";\nimport { DMenuSideds } from \"./d-menu-sideds\";\nimport { DPane, DPaneOptions, DThemePane } from \"./d-pane\";\n\nexport interface DMenuSidedOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuSided = DThemeMenuSided,\n\tCONTENT_OPTIONS extends DBaseOptions = DMenuSidedContentOptions\n> extends DPaneOptions<THEME, CONTENT_OPTIONS> {\n\titems?: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>;\n\tsticky?: boolean;\n\tselection?: DMenuSidedSelectionOptions | DMenuSidedSelection;\n}\n\nexport interface DThemeMenuSided extends DThemePane {\n\n}\n\nexport class DMenuSided<\n\tVALUE = unknown,\n\tTHEME extends DThemeMenuSided = DThemeMenuSided,\n\tCONTENT_OPTIONS extends DMenuSidedContentOptions = DMenuSidedContentOptions,\n\tOPTIONS extends DMenuSidedOptions<VALUE, THEME, CONTENT_OPTIONS> = DMenuSidedOptions<VALUE, THEME, CONTENT_OPTIONS>\n> extends DPane<THEME, CONTENT_OPTIONS, OPTIONS> {\n\tprotected _context!: DMenuContext | null;\n\tprotected _selection!: DMenuSidedSelection;\n\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst context = new DMenuContext( this );\n\t\tthis._context = context;\n\t\tcontext.add( this );\n\n\t\tconst items = options && options.items;\n\t\tif( items != null ) {\n\t\t\tconst sticky = ( options && options.sticky != null ? options.sticky : false );\n\t\t\tthis.newItems( items, sticky );\n\t\t}\n\n\t\tconst selection = options && options.selection;\n\t\tthis._selection = ( selection instanceof DMenuSidedSelection ?\n\t\t\tselection : this.newSelection( selection ) );\n\t}\n\n\tprotected newSelection( options?: DMenuSidedSelectionOptions ): DMenuSidedSelection {\n\t\treturn new DMenuSidedSelection( this._content, options );\n\t}\n\n\tprotected onChildrenDirty(): void {\n\t\tconst selection = this._selection;\n\t\tif( selection != null ) {\n\t\t\tselection.toDirty();\n\t\t}\n\t\tsuper.onChildrenDirty();\n\t}\n\n\tprotected newItems( items: Array<DMenuItemOptionsUnion<VALUE> | DisplayObject>, sticky: boolean ): void {\n\t\tDMenuSideds.newItems( this.content, items, sticky );\n\t}\n\n\tprotected newContent( options?: CONTENT_OPTIONS ): DBase {\n\t\treturn new DMenuSidedContent( options );\n\t}\n\n\tget selection(): DMenuSidedSelection {\n\t\treturn this._selection;\n\t}\n\n\tgetContext(): DMenuContext | null {\n\t\treturn this._context;\n\t}\n\n\tgetCloseable(): Closeable | null {\n\t\treturn this;\n\t}\n\n\topen(): void {\n\t\t// DO NOTHING\n\t}\n\n\tclose(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DMenuSided\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DNotificationOptions<THEME extends DThemeNotification> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeNotification extends DThemeBase {\n\n}\n\nexport class DNotification<\n\tTHEME extends DThemeNotification = DThemeNotification,\n\tOPTIONS extends DNotificationOptions<THEME> = DNotificationOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DPaginationOptions<THEME extends DThemePagination> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePagination extends DThemeBase {\n\n}\n\nexport class DPagination<\n\tTHEME extends DThemePagination = DThemePagination,\n\tOPTIONS extends DPaginationOptions<THEME> = DPaginationOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DPickerDatetimeRangeOptions<THEME extends DThemePickerDatetimeRange> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerDatetimeRange extends DThemeBase {\n\n}\n\nexport class DPickerDatetimeRange<\n\tTHEME extends DThemePickerDatetimeRange = DThemePickerDatetimeRange,\n\tOPTIONS extends DPickerDatetimeRangeOptions<THEME> = DPickerDatetimeRangeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DPickerTimeRangeOptions<THEME extends DThemePickerTimeRange> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemePickerTimeRange extends DThemeBase {\n\n}\n\nexport class DPickerTimeRange<\n\tTHEME extends DThemePickerTimeRange = DThemePickerTimeRange,\n\tOPTIONS extends DPickerTimeRangeOptions<THEME> = DPickerTimeRangeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDropdown, DDropdownOptions, DThemeDropdown } from \"./d-dropdown\";\nimport { DMenu } from \"./d-menu\";\nimport { DMenuItem } from \"./d-menu-item\";\nimport { DMenuItemMenu } from \"./d-menu-item-menu\";\n\nexport interface DSelectOptions<\n\tVALUE = unknown,\n\tTHEME extends DThemeSelect = DThemeSelect\n> extends DDropdownOptions<VALUE, THEME> {\n\tvalue?: VALUE;\n}\n\nexport interface DThemeSelect extends DThemeDropdown {\n\n}\n\nexport class DSelect<\n\tVALUE = unknown,\n\tTHEME extends DThemeSelect = DThemeSelect,\n\tOPTIONS extends DSelectOptions<VALUE, THEME> = DSelectOptions<VALUE, THEME>\n> extends DDropdown<VALUE, THEME, OPTIONS> {\n\tprotected _value!: VALUE | null;\n\tprotected _onSelectedBound!: ( value: VALUE, child: DMenuItem<VALUE> ) => void;\n\tprotected _onClosedBound!: () => void;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._value = null;\n\n\t\tthis._onSelectedBound = ( value: VALUE, child: DMenuItem<VALUE> ): void => {\n\t\t\tthis.onSelected( value, child, true );\n\t\t};\n\t\tthis._onClosedBound = (): void => {\n\t\t\tthis.onClosed();\n\t\t};\n\n\t\t// Default value\n\t\tif( options != null && options.value !== undefined ) {\n\t\t\tthis.value = options.value;\n\t\t}\n\t}\n\n\tprotected onSelected( newValue: VALUE | null, item: DMenuItem<VALUE> | null, emit: boolean ): void {\n\t\tif( this._value !== newValue ) {\n\t\t\t// Value\n\t\t\tconst oldValue = this._value;\n\t\t\tthis._value = newValue;\n\n\t\t\t// Text\n\t\t\tif( item != null ) {\n\t\t\t\tthis.text = item.text || \"\";\n\t\t\t} else {\n\t\t\t\tconst options = this._options;\n\t\t\t\tthis.text = ( options && options.text && options.text.value ) || this.theme.newTextValue();\n\t\t\t}\n\n\t\t\t// Event\n\t\t\tif( emit ) {\n\t\t\t\tthis.emit( \"change\", newValue, oldValue, item, this );\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onClosed(): void {\n\t\tconst menu = this._menu;\n\t\tmenu.off( \"select\", this._onSelectedBound );\n\t\tmenu.off( \"close\", this._onClosedBound );\n\t}\n\n\tstart(): void {\n\t\tconst menu = this._menu;\n\t\tmenu.on( \"select\", this._onSelectedBound );\n\t\tmenu.on( \"close\", this._onClosedBound );\n\t\tsuper.start();\n\t}\n\n\tprotected findMenuItem( menu: DMenu<VALUE>, value: VALUE | null ): DMenuItem<VALUE> | null {\n\t\tconst children = this._menu.children;\n\t\tfor( let i = 0, imax = children.length; i < imax; ++i ) {\n\t\t\tconst child = children[ i ];\n\t\t\tif( child instanceof DMenuItemMenu ) {\n\t\t\t\tconst result = this.findMenuItem( child.menu, value );\n\t\t\t\tif( result != null ) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t} else if( child instanceof DMenuItem ) {\n\t\t\t\tif( child.value === value ) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tget value(): VALUE | null {\n\t\treturn this._value;\n\t}\n\n\tset value( value: VALUE | null ) {\n\t\tconst item = this.findMenuItem( this._menu, value );\n\t\tif( item != null ) {\n\t\t\tthis.onSelected( value, item, false );\n\t\t} else {\n\t\t\tthis.onSelected( null, null, false );\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DSelect\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DSliderRangeOptions<THEME extends DThemeSliderRange> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeSliderRange extends DThemeBase {\n\n}\n\nexport class DSliderRange<\n\tTHEME extends DThemeSliderRange = DThemeSliderRange,\n\tOPTIONS extends DSliderRangeOptions<THEME> = DSliderRangeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DSliderOptions<THEME extends DThemeSlider> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeSlider extends DThemeBase {\n\n}\n\nexport class DSlider<\n\tTHEME extends DThemeSlider = DThemeSlider,\n\tOPTIONS extends DSliderOptions<THEME> = DSliderOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonCheck, DButtonCheckOptions, DThemeButtonCheck } from \"./d-button-check\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellCheckOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellCheck = DThemeTableBodyCellCheck\n> extends DButtonCheckOptions<unknown, THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellCheck extends DThemeButtonCheck {\n\n}\n\nexport class DTableBodyCellCheck<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellCheck = DThemeTableBodyCellCheck,\n\tOPTIONS extends DTableBodyCellCheckOptions<ROW, THEME> = DTableBodyCellCheckOptions<ROW, THEME>\n> extends DButtonCheck<unknown, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tthis.emit( \"cellchange\", true, false, this._columnIndex, this._columnData );\n\t\t});\n\n\t\tthis.on( \"inactive\", (): void => {\n\t\t\tthis.emit( \"cellchange\", false, true, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.setActive( !! value );\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellCheck\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButtonColor, DButtonColorOptions, DThemeButtonColor } from \"./d-button-color\";\nimport { DColorAndAlpha } from \"./d-color\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { utilIsNumber } from \"./util/util-is-number\";\nimport { utilIsString } from \"./util/util-is-string\";\n\nexport interface DTableBodyCellColorOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellColor = DThemeTableBodyCellColor\n> extends DButtonColorOptions<THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellColor extends DThemeButtonColor {\n\n}\n\nconst clone = ( value: DColorAndAlpha ): DColorAndAlpha => {\n\treturn {\n\t\tcolor: value.color,\n\t\talpha: value.alpha\n\t};\n};\n\nconst hasColor = ( value: any ): value is { color: unknown } => {\n\treturn ( \"color\" in value );\n};\n\nconst hasAlpha = ( value: any ): value is { alpha: unknown } => {\n\treturn ( \"alpha\" in value );\n};\n\nexport class DTableBodyCellColor<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellColor = DThemeTableBodyCellColor,\n\tOPTIONS extends DTableBodyCellColorOptions<ROW, THEME> = DTableBodyCellColorOptions<ROW, THEME>\n> extends DButtonColor<THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tthis.on( \"select\", ( newValue: DColorAndAlpha, oldValue: DColorAndAlpha ): void => {\n\t\t\tthis.emit( \"cellchange\", clone( newValue ), clone( oldValue ), this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( newValue: unknown ): void {\n\t\tconst value = this._value;\n\t\tif( utilIsNumber( newValue ) ) {\n\t\t\tvalue.color = newValue;\n\t\t\tvalue.alpha = 1;\n\t\t} else if( utilIsString( newValue ) ) {\n\t\t\tconst parsed = Number( newValue );\n\t\t\tif( parsed === parsed ) {\n\t\t\t\tvalue.color = parsed;\n\t\t\t} else {\n\t\t\t\tvalue.color = 0xffffff;\n\t\t\t}\n\t\t\tvalue.alpha = 1;\n\t\t} else if( newValue != null ) {\n\t\t\tif( hasColor( newValue ) ) {\n\t\t\t\tvalue.color = Number( newValue.color );\n\t\t\t} else {\n\t\t\t\tvalue.color = 0xffffff;\n\t\t\t}\n\t\t\tif( hasAlpha( newValue ) ) {\n\t\t\t\tvalue.alpha = Number( newValue.alpha );\n\t\t\t} else {\n\t\t\t\tvalue.alpha = 1;\n\t\t\t}\n\t\t} else {\n\t\t\tvalue.color = 0xffffff;\n\t\t\tvalue.alpha = 1;\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellColor\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellIndexOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellIndex = DThemeTableBodyCellIndex\n> extends DImageBaseOptions<number, THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellIndex extends DThemeImageBase {\n\tgetTextFormatter(): ( value: number, caller: DTableBodyCellIndex ) => string;\n\tgetTextValue( state: DBaseState ): number;\n\tnewTextValue(): number;\n}\n\nexport class DTableBodyCellIndex<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellIndex = DThemeTableBodyCellIndex,\n\tOPTIONS extends DTableBodyCellIndexOptions<ROW, THEME> = DTableBodyCellIndexOptions<ROW, THEME>\n> extends DImageBase<number, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tset( value: unknown, rowIndex: number): void {\n\t\tthis.text = rowIndex;\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellIndex\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputInteger, DInputIntegerOptions, DThemeInputInteger } from \"./d-input-integer\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellInputIntegerOptions<\n\tROW = unknown,\n\tTHEME extends DThemeInputInteger = DThemeInputInteger\n> extends DInputIntegerOptions<THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellInputInteger extends DThemeInputInteger {\n\n}\n\nexport class DTableBodyCellInputInteger<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellInputInteger = DThemeTableBodyCellInputInteger,\n\tOPTIONS extends DTableBodyCellInputIntegerOptions<ROW, THEME> = DTableBodyCellInputIntegerOptions<ROW, THEME>\n> extends DInputInteger<THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.on( \"change\", ( newCellValue: unknown, oldCellValue: unknown ): void => {\n\t\t\tthis.emit( \"cellchange\", newCellValue, oldCellValue, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.text = Number( value );\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellInputInteger\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputReal, DInputRealOptions, DThemeInputReal } from \"./d-input-real\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellInputRealOptions<\n\tROW = unknown,\n\tTHEME extends DThemeInputReal = DThemeInputReal\n> extends DInputRealOptions<THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellInputReal extends DThemeInputReal {\n\n}\n\nexport class DTableBodyCellInputReal<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellInputReal = DThemeTableBodyCellInputReal,\n\tOPTIONS extends DTableBodyCellInputRealOptions<ROW, THEME> = DTableBodyCellInputRealOptions<ROW, THEME>\n> extends DInputReal<THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.on( \"change\", ( newCellValue: unknown, oldCellValue: unknown ): void => {\n\t\t\tthis.emit( \"cellchange\", newCellValue, oldCellValue, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.text = Number( value );\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellInputReal\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DInputText, DInputTextOptions, DThemeInputText } from \"./d-input-text\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellInputTextOptions<\n\tROW = unknown,\n\tTHEME extends DThemeInputText = DThemeInputText\n> extends DInputTextOptions<THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellInputText extends DThemeInputText {\n\n}\n\nexport class DTableBodyCellInputText<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellInputText = DThemeTableBodyCellInputText,\n\tOPTIONS extends DTableBodyCellInputTextOptions<ROW, THEME> = DTableBodyCellInputTextOptions<ROW, THEME>\n> extends DInputText<THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.on( \"change\", ( newCellValue: unknown, oldCellValue: unknown ): void => {\n\t\t\tthis.emit( \"cellchange\", newCellValue, oldCellValue, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.text = String( value );\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellInputText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellSelectDialogOptions<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectDialog = DThemeTableBodyCellSelectDialog\n> extends DButtonOptions<VALUE, THEME>, DTableBodyCellOptions<ROW> {\n\n}\n\nexport interface DThemeTableBodyCellSelectDialog extends DThemeButton {\n\n}\n\nexport class DTableBodyCellSelectDialog<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectDialog = DThemeTableBodyCellSelectDialog,\n\tOPTIONS extends DTableBodyCellSelectDialogOptions<ROW, VALUE, THEME> =\n\t\tDTableBodyCellSelectDialogOptions<ROW, VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tconst column = options.column;\n\t\tthis._columnIndex = column.index;\n\t\tthis._columnData = column.data;\n\t\tconst selecting = column.data.selecting;\n\t\tconst dialog = selecting.dialog;\n\t\tif( dialog != null ) {\n\t\t\tconst getter = selecting.getter;\n\t\t\tconst onSelectBound = ( selected: VALUE | null ): void => {\n\t\t\t\tconst newValue = getter( selected );\n\t\t\t\tconst oldValue = this.text;\n\t\t\t\tif( newValue !== oldValue ) {\n\t\t\t\t\tthis.text = newValue as VALUE;\n\t\t\t\t\tthis.emit( \"cellchange\", newValue, oldValue, this._columnIndex, this._columnData );\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onCloseBound = (): void => {\n\t\t\t\tdialog.off( \"select\", onSelectBound );\n\t\t\t\tdialog.off( \"close\", onCloseBound );\n\t\t\t};\n\t\t\tthis.on( \"active\", (): void => {\n\t\t\t\tdialog.on( \"select\", onSelectBound );\n\t\t\t\tdialog.on( \"close\", onCloseBound );\n\t\t\t\tdialog.open();\n\t\t\t});\n\t\t}\n\t}\n\n\tget value(): VALUE {\n\t\treturn this.text as VALUE;\n\t}\n\n\tset value( value: VALUE ) {\n\t\tthis.text = value;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( forcibly ) {\n\t\t\tthis._textValue = value as VALUE;\n\t\t\tthis._textValueComputed = value as VALUE;\n\t\t\tthis.onTextChange();\n\t\t\tthis.createOrUpdateText();\n\t\t} else {\n\t\t\tthis.text = value as VALUE;\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellSelectDialog\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellSelectFetcherOptions<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectFetcher = DThemeTableBodyCellSelectFetcher\n> extends DButtonOptions<VALUE, THEME>, DTableBodyCellOptions<ROW> {\n\n}\n\nexport interface DThemeTableBodyCellSelectFetcher extends DThemeButton {\n\n}\n\nexport class DTableBodyCellSelectFetcher<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectFetcher = DThemeTableBodyCellSelectFetcher,\n\tOPTIONS extends DTableBodyCellSelectFetcherOptions<ROW, VALUE, THEME> =\n\t\tDTableBodyCellSelectFetcherOptions<ROW, VALUE, THEME>\n> extends DButton<VALUE, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tconst column = options.column;\n\t\tthis._columnIndex = column.index;\n\t\tthis._columnData = column.data;\n\t\tconst selecting = column.data.selecting;\n\t\tconst fetcher = selecting.fetcher;\n\t\tif( fetcher != null ) {\n\t\t\tconst getter = selecting.getter;\n\t\t\tconst onSelectBound = ( selected: unknown ): void => {\n\t\t\t\tconst newValue = getter( selected );\n\t\t\t\tconst oldValue = this.text;\n\t\t\t\tif( newValue !== oldValue ) {\n\t\t\t\t\tthis.text = newValue as VALUE;\n\t\t\t\t\tthis.emit( \"cellchange\", newValue, oldValue, this._columnIndex, this._columnData );\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.on( \"active\", (): void => {\n\t\t\t\tfetcher().then( onSelectBound );\n\t\t\t});\n\t\t}\n\t}\n\n\tget value(): VALUE {\n\t\treturn this._textValueComputed;\n\t}\n\n\tset value( value: VALUE ) {\n\t\tthis.text = value;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( forcibly ) {\n\t\t\tthis._textValue = value as VALUE;\n\t\t\tthis._textValueComputed = value as VALUE;\n\t\t\tthis.onTextChange();\n\t\t\tthis.createOrUpdateText();\n\t\t} else {\n\t\t\tthis.text = value as VALUE;\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellSelectFetcher\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DSelect, DSelectOptions, DThemeSelect } from \"./d-select\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellSelectMenuOptions<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectMenu = DThemeTableBodyCellSelectMenu\n> extends DSelectOptions<VALUE, THEME>, DTableBodyCellOptions<ROW> {\n\n}\n\nexport interface DThemeTableBodyCellSelectMenu extends DThemeSelect {\n\n}\n\nexport class DTableBodyCellSelectMenu<\n\tROW = unknown,\n\tVALUE = unknown,\n\tTHEME extends DThemeTableBodyCellSelectMenu = DThemeTableBodyCellSelectMenu,\n\tOPTIONS extends DTableBodyCellSelectMenuOptions<ROW, VALUE, THEME> = DTableBodyCellSelectMenuOptions<ROW, VALUE, THEME>\n> extends DSelect<VALUE, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tconst column = options.column;\n\t\tthis._columnIndex = column.index;\n\t\tthis._columnData = column.data;\n\t\tconst selecting = column.data.selecting;\n\t\tconst getter = selecting.getter;\n\t\tthis.on( \"change\", ( newSelected: VALUE | null, oldSelected: VALUE | null ): void => {\n\t\t\tconst newValue = getter( newSelected );\n\t\t\tconst oldValue = getter( oldSelected );\n\t\t\tthis.emit( \"cellchange\", newValue, oldValue, this._columnIndex, this._columnData );\n\t\t});\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.value = value as VALUE;\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellSelectMenu\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DImageBase, DImageBaseOptions, DThemeImageBase } from \"./d-image-base\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableBodyCellTextOptions<ROW, THEME extends DThemeTableBodyCellText = DThemeTableBodyCellText>\n\textends DImageBaseOptions<unknown, THEME>, DTableBodyCellOptions<ROW> {\n}\n\nexport interface DThemeTableBodyCellText extends DThemeImageBase {\n\tgetTextValue( state: DBaseState ): unknown;\n\tnewTextValue(): unknown;\n}\n\nexport class DTableBodyCellText<\n\tROW,\n\tTHEME extends DThemeTableBodyCellText = DThemeTableBodyCellText,\n\tOPTIONS extends DTableBodyCellTextOptions<ROW, THEME> = DTableBodyCellTextOptions<ROW, THEME>\n> extends DImageBase<unknown, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ): void {\n\t\tsuper.init( options );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tset( value: unknown ): void {\n\t\tthis.text = value;\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellText\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utilIndexOf } from \"./util/util-index-of\";\nimport { utilIsFunction } from \"./util/util-is-function\";\n\nexport type DTableBodyFilterFunction<ROW> = ( row: ROW, index: number, rows: ROW[] ) => boolean;\nexport interface DTableBodyFilterObject<ROW> {\n\ttest( row: ROW, index: number, rows: ROW[] ): boolean;\n}\n\ninterface DTableBodyFilterParent<ROW> {\n\trows: ROW[];\n}\n\nexport interface DTableBodyFilter<ROW> {\n\treadonly indices: number[] | undefined;\n\n\tapply(): void;\n\tunapply(): void;\n\tisApplied(): boolean;\n\tget(): DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW> | undefined;\n\tset( filter: DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW> | undefined ): void;\n}\n\nconst FILTERED_COMPARATOR = ( a: number, b: number ): number => {\n\treturn a - b;\n};\n\nexport class DTableBodyFilterImpl<ROW> implements DTableBodyFilter<ROW> {\n\tprotected _parent: DTableBodyFilterParent<ROW>;\n\tprotected _filter?: DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW>;\n\tprotected _filtered?: number[];\n\tprotected _onChange: () => void;\n\n\tconstructor( parent: DTableBodyFilterParent<ROW>, onChange: () => void ) {\n\t\tthis._parent = parent;\n\t\tthis._onChange = onChange;\n\t}\n\n\tapply(): void {\n\t\tconst newFiltered = this.newFiltered();\n\t\tconst oldFiltered = this._filtered;\n\t\tif( newFiltered != null ) {\n\t\t\tif( oldFiltered != null ) {\n\t\t\t\tif( newFiltered.length !== oldFiltered.length ) {\n\t\t\t\t\tthis.setFiltered( newFiltered );\n\t\t\t\t} else {\n\t\t\t\t\tfor( let i = 0, imax = newFiltered.length; i < imax; ++i ) {\n\t\t\t\t\t\tif( newFiltered[ i ] !== oldFiltered[ i ] ) {\n\t\t\t\t\t\t\tthis.setFiltered( newFiltered );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setFiltered( newFiltered );\n\t\t\t}\n\t\t} else if( oldFiltered != null ) {\n\t\t\tthis.setFiltered();\n\t\t}\n\t}\n\n\tprotected setFiltered( filtered?: number[] ): void {\n\t\tthis._filtered = filtered;\n\t\tthis._onChange();\n\t}\n\n\tunapply(): void {\n\t\tif( this._filtered != null ) {\n\t\t\tthis.setFiltered();\n\t\t}\n\t}\n\n\tisApplied(): boolean {\n\t\treturn this._filtered != null;\n\t}\n\n\tprotected newFiltered(): number[] | undefined {\n\t\tconst filter = this._filter;\n\t\tif( filter != null ) {\n\t\t\tconst rows = this._parent.rows;\n\t\t\tconst rowsLength = rows.length;\n\t\t\tconst filtered: number[] = [];\n\t\t\tif( utilIsFunction( filter ) ) {\n\t\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\t\tconst row = rows[ i ];\n\t\t\t\t\tif( filter( row, i, rows ) ) {\n\t\t\t\t\t\tfiltered.push( i );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\t\tconst row = rows[ i ];\n\t\t\t\t\tif( filter.test( row, i, rows ) ) {\n\t\t\t\t\t\tfiltered.push( i );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn filtered;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tget(): DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW> | undefined {\n\t\treturn this._filter;\n\t}\n\n\tset( filter: DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW> | undefined ): void {\n\t\tif( this._filter !== filter ) {\n\t\t\tthis._filter = filter;\n\t\t}\n\t}\n\n\tadd( rowIndex: number, count: number ): void {\n\t\tconst filtered = this._filtered;\n\t\tif( filtered != null ) {\n\t\t\tfor( let i = 0; i < count; ++i ) {\n\t\t\t\tfiltered.push( rowIndex + i );\n\t\t\t}\n\t\t\tfiltered.sort( FILTERED_COMPARATOR );\n\t\t\tthis._onChange();\n\t\t}\n\t}\n\n\tshift( rowIndex: number, amount: number, add: boolean ): void {\n\t\tconst filtered = this._filtered;\n\t\tif( filtered != null ) {\n\t\t\tfor( let i = filtered.length - 1; 0 <= i; --i ) {\n\t\t\t\tconst filteredRowIndex = filtered[ i ];\n\t\t\t\tif( rowIndex <= filteredRowIndex ) {\n\t\t\t\t\tfiltered[ i ] = filteredRowIndex + amount;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( add ) {\n\t\t\t\tthis.add( rowIndex, amount );\n\t\t\t}\n\t\t\tthis._onChange();\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tconst filtered = this._filtered;\n\t\tif( filtered != null && 0 < filtered.length ) {\n\t\t\tfiltered.length = 0;\n\t\t\tthis._onChange();\n\t\t}\n\t}\n\n\tremove( rowIndex: number ): boolean {\n\t\tconst filtered = this._filtered;\n\t\tif( filtered != null ) {\n\t\t\tconst index = utilIndexOf( filtered, rowIndex );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tfiltered.splice( index, 1 );\n\t\t\t\tthis._onChange();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tget indices(): number[] | undefined {\n\t\treturn this._filtered;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogDate, DDialogDateOptions } from \"./d-dialog-date\";\nimport { DDialogDates } from \"./d-dialog-dates\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nexport interface DTableBodyCellDateOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellDate = DThemeTableBodyCellDate\n> extends DButtonOptions<Date, THEME>, DTableBodyCellOptions<ROW> {\n\tdialog?: DDialogDateOptions;\n}\n\nexport interface DThemeTableBodyCellDate extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellDate ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DTableBodyCellDate<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellDate = DThemeTableBodyCellDate,\n\tOPTIONS extends DTableBodyCellDateOptions<ROW, THEME> = DTableBodyCellDateOptions<ROW, THEME>\n> extends DButton<Date, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected _dialog?: DDialogDate;\n\tprotected _dialogOptions?: DDialogDateOptions;\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tthis._dialogOptions = options.dialog;\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.page = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dialogNew = dialog.new;\n\t\t\t\tconst dialogCurrent = dialog.current;\n\t\t\t\tthis.text = new Date( dialogNew.getTime() );\n\t\t\t\tthis.emit( \"cellchange\", dialogNew, dialogCurrent, this._columnIndex, this._columnData );\n\t\t\t});\n\t\t});\n\t}\n\n\tget dialog(): DDialogDate {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogDate( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogDates.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( value instanceof Date ) {\n\t\t\tif( forcibly ) {\n\t\t\t\tthis._textValue = value;\n\t\t\t\tthis._textValueComputed = value;\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t} else {\n\t\t\t\tthis.text = value;\n\t\t\t}\n\t\t} else if( utilIsNumber( value ) ) {\n\t\t\tconst textValueComputed = this._textValueComputed;\n\t\t\tif( textValueComputed.getTime() !== value ) {\n\t\t\t\ttextValueComputed.setTime( value );\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t}\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellDate\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogDatetime, DDialogDatetimeOptions } from \"./d-dialog-datetime\";\nimport { DDialogDatetimes } from \"./d-dialog-datetimes\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerDatetimes } from \"./d-picker-datetimes\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nexport interface DTableBodyCellDatetimeOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellDatetime = DThemeTableBodyCellDatetime\n> extends DButtonOptions<Date, THEME>, DTableBodyCellOptions<ROW> {\n\tdialog?: DDialogDatetimeOptions;\n}\n\nexport interface DThemeTableBodyCellDatetime extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellDatetime ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DTableBodyCellDatetime<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellDatetime = DThemeTableBodyCellDatetime,\n\tOPTIONS extends DTableBodyCellDatetimeOptions<ROW, THEME> = DTableBodyCellDatetimeOptions<ROW, THEME>\n> extends DButton<Date, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected static DIALOG?: DDialogDatetime;\n\tprotected _dialog?: DDialogDatetime;\n\tprotected _dialogOptions?: DDialogDatetimeOptions;\n\tprotected _datetimeMask!: DPickerDatetimeMask;\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tthis._dialogOptions = options.dialog;\n\t\tthis._datetimeMask = DPickerDatetimes.toMask( options && options.dialog && options.dialog.picker );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tsuper.init( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.page = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dialogNew = dialog.new;\n\t\t\t\tconst dialogCurrent = dialog.current;\n\t\t\t\tthis.text = new Date( dialogNew.getTime() );\n\t\t\t\tthis.emit( \"cellchange\", dialogNew, dialogCurrent, this._columnIndex, this._columnData );\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDatetimeMask(): DPickerDatetimeMask {\n\t\treturn this._datetimeMask;\n\t}\n\n\tget dialog(): DDialogDatetime {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogDatetime( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tdialog = DDialogDatetimes.getInstance();\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( value instanceof Date ) {\n\t\t\tif( forcibly ) {\n\t\t\t\tthis._textValue = value;\n\t\t\t\tthis._textValueComputed = value;\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t} else {\n\t\t\t\tthis.text = value;\n\t\t\t}\n\t\t} else if( utilIsNumber( value ) ) {\n\t\t\tconst textValueComputed = this._textValueComputed;\n\t\t\tif( textValueComputed.getTime() !== value ) {\n\t\t\t\ttextValueComputed.setTime( value );\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t}\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellDatetime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DButton, DButtonOptions, DThemeButton } from \"./d-button\";\nimport { DDialogTime, DDialogTimeOptions } from \"./d-dialog-time\";\nimport { DPickerDatetimeMask } from \"./d-picker-datetime-mask\";\nimport { DPickerTimes } from \"./d-picker-times\";\nimport { DTableBodyCell, DTableBodyCellOptions } from \"./d-table-body-cell\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { utilIsNumber } from \"./util/util-is-number\";\n\nexport interface DTableBodyCellTimeOptions<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellTime = DThemeTableBodyCellTime\n> extends DButtonOptions<Date, THEME>, DTableBodyCellOptions<ROW> {\n\tdialog?: DDialogTimeOptions;\n}\n\nexport interface DThemeTableBodyCellTime extends DThemeButton {\n\tgetTextFormatter(): ( value: Date, caller: DTableBodyCellTime ) => string;\n\tgetTextValue( state: DBaseState ): Date;\n\tnewTextValue(): Date;\n}\n\nexport class DTableBodyCellTime<\n\tROW = unknown,\n\tTHEME extends DThemeTableBodyCellTime = DThemeTableBodyCellTime,\n\tOPTIONS extends DTableBodyCellTimeOptions<ROW, THEME> = DTableBodyCellTimeOptions<ROW, THEME>\n> extends DButton<Date, THEME, OPTIONS> implements DTableBodyCell {\n\tprotected static DIALOG?: DDialogTime;\n\tprotected _dialog?: DDialogTime;\n\tprotected _dialogOptions?: DDialogTimeOptions;\n\tprotected _datetimeMask!: DPickerDatetimeMask;\n\tprotected _columnIndex!: number;\n\tprotected _columnData!: DTableColumn<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tthis._dialogOptions = options.dialog;\n\t\tthis._datetimeMask = DPickerTimes.toMask( options.dialog && options.dialog.picker );\n\t\tthis._columnIndex = options.column.index;\n\t\tthis._columnData = options.column.data;\n\n\t\tsuper.init( options );\n\n\t\tthis.on( \"active\", (): void => {\n\t\t\tconst currentTime = this._textValueComputed.getTime();\n\t\t\tconst dialog = this.dialog;\n\t\t\tdialog.current = new Date( currentTime );\n\t\t\tdialog.new = new Date( currentTime );\n\t\t\tdialog.open().then((): void => {\n\t\t\t\tconst dialogNew = dialog.new;\n\t\t\t\tconst dialogCurrent = dialog.current;\n\t\t\t\tthis.text = new Date( dialogNew.getTime() );\n\t\t\t\tthis.emit( \"cellchange\", dialogNew, dialogCurrent, this._columnIndex, this._columnData );\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDatetimeMask(): DPickerDatetimeMask {\n\t\treturn this._datetimeMask;\n\t}\n\n\tget dialog(): DDialogTime {\n\t\tlet dialog = this._dialog;\n\t\tif( dialog == null ) {\n\t\t\tconst dialogOptions = this._dialogOptions;\n\t\t\tif( dialogOptions != null ) {\n\t\t\t\tdialog = new DDialogTime( this._dialogOptions );\n\t\t\t} else {\n\t\t\t\tif( DTableBodyCellTime.DIALOG == null ) {\n\t\t\t\t\tDTableBodyCellTime.DIALOG = new DDialogTime();\n\t\t\t\t}\n\t\t\t\tdialog = DTableBodyCellTime.DIALOG;\n\t\t\t}\n\t\t\tthis._dialog = dialog;\n\t\t}\n\t\treturn dialog;\n\t}\n\n\tset( value: unknown, rowIndex: number, columnIndex: number, forcibly?: boolean ): void {\n\t\tif( value instanceof Date ) {\n\t\t\tif( forcibly ) {\n\t\t\t\tthis._textValue = value;\n\t\t\t\tthis._textValueComputed = value;\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t} else {\n\t\t\t\tthis.text = value;\n\t\t\t}\n\t\t} else if( utilIsNumber( value ) ) {\n\t\t\tconst textValueComputed = this._textValueComputed;\n\t\t\tif( textValueComputed.getTime() !== value ) {\n\t\t\t\ttextValueComputed.setTime( value );\n\t\t\t\tthis.onTextChange();\n\t\t\t\tthis.createOrUpdateText();\n\t\t\t}\n\t\t}\n\t}\n\n\tunset(): void {\n\t\t// DO NOTHING\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyCellTime\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DLayoutHorizontal, DLayoutHorizontalOptions, DThemeLayoutHorizontal } from \"./d-layout-horizontal\";\nimport { DTableColumn } from \"./d-table-column\";\n\nexport interface DTableRowOptions<ROW, THEME extends DThemeTableRow = DThemeTableRow>\n\textends DLayoutHorizontalOptions<THEME> {\n\tcolumns?: Array<DTableColumn<ROW>>;\n}\n\nexport interface DThemeTableRow extends DThemeLayoutHorizontal {\n\n}\n\nexport abstract class DTableRow<\n\tROW,\n\tTHEME extends DThemeTableRow = DThemeTableRow,\n\tOPTIONS extends DTableRowOptions<ROW, THEME> = DTableRowOptions<ROW, THEME>\n> extends DLayoutHorizontal<THEME, OPTIONS> {\n\tprotected _columns!: Array<DTableColumn<ROW>>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\t// Cells\n\t\tconst columns = this._columns = options.columns || [];\n\t\tfor( let i = 0, imax = columns.length; i < imax; ++i ) {\n\t\t\tthis.addChild( this.newCell( columns[ i ], i, columns, options ) );\n\t\t}\n\t}\n\n\tprotected abstract newCell(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\tcolumns: Array<DTableColumn<ROW>>,\n\t\toptions: OPTIONS\n\t): DBase;\n\n\tprotected getType(): string {\n\t\treturn \"DTableRow\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { utils } from \"pixi.js\";\n\nexport enum DTableSelectionType {\n\tNONE,\n\tSINGLE,\n\tMULTIPLE\n}\n\nconst COMPARATOR = ( a: [number, unknown], b: [number, unknown] ): number => {\n\treturn a[ 0 ] - b[ 0 ];\n};\n\nexport class DTableSelection<ROW> extends utils.EventEmitter {\n\tprotected _type: DTableSelectionType;\n\tprotected _indices: Set<number>;\n\tprotected _data: ROW[];\n\tprotected _onChange: () => void;\n\n\tconstructor( type: DTableSelectionType, data: ROW[], onChange: () => void ) {\n\t\tsuper();\n\n\t\tthis._type = type;\n\t\tthis._indices = new Set<number>();\n\t\tthis._data = data;\n\t\tthis._onChange = onChange;\n\t}\n\n\tget type(): DTableSelectionType {\n\t\treturn this._type;\n\t}\n\n\tprotected onChange(): void {\n\t\tthis._onChange();\n\t\tthis.emit( \"change\", this );\n\t}\n\n\ttoggle( rowIndex: number ): void {\n\t\tconst indices = this._indices;\n\t\tif( indices.has( rowIndex ) ) {\n\t\t\tindices.delete( rowIndex );\n\t\t} else {\n\t\t\tindices.add( rowIndex );\n\t\t}\n\t\tthis.onChange();\n\t}\n\n\tadd( rowIndex: number ): void {\n\t\tconst indices = this._indices;\n\t\tconst oldSize = indices.size;\n\t\tindices.add( rowIndex );\n\t\tconst newSize = indices.size;\n\t\tif( oldSize !== newSize ) {\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tprotected getFirstIndex(): number | null {\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.size ) {\n\t\t\tlet result: number = NaN;\n\t\t\tindices.forEach(( index: number ): void => {\n\t\t\t\tif( result !== result ) {\n\t\t\t\t\tresult = index;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected getLastIndex(): number | null {\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.size ) {\n\t\t\tlet result: number = 0;\n\t\t\tindices.forEach(( index: number ): void => {\n\t\t\t\tresult = index;\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\taddTo( rowIndex: number ): void {\n\t\tconst lastRowIndex = this.getLastIndex();\n\t\tif( lastRowIndex != null ) {\n\t\t\tthis.addRange( lastRowIndex, false, rowIndex, true );\n\t\t}\n\t}\n\n\taddRange( from: number, includeFrom: boolean, to: number, includeTo: boolean ): void {\n\t\tconst indices = this._indices;\n\t\tconst oldSize = indices.size;\n\t\tif( from < to ) {\n\t\t\tfor( let i = from + (includeFrom ? 0 : 1), imax = to + (includeTo ? 1 : 0); i < imax; ++i ) {\n\t\t\t\tindices.add( i );\n\t\t\t}\n\t\t} else {\n\t\t\tfor( let i = to + (includeTo ? 0 : 1), imax = from + (includeFrom ? 1 : 0); i < imax; ++i ) {\n\t\t\t\tindices.add( i );\n\t\t\t}\n\t\t}\n\t\tconst newSize = indices.size;\n\t\tif( oldSize !== newSize ) {\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\taddAll( rowIndices: number[] ): void {\n\t\tconst indices = this._indices;\n\t\tconst oldSize = indices.size;\n\t\tfor( let i = 0, imax = rowIndices.length; i < imax; ++i ) {\n\t\t\tindices.add( rowIndices[ i ] );\n\t\t}\n\t\tconst newSize = indices.size;\n\t\tif( oldSize !== newSize ) {\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tcontains( rowIndex: number ): boolean {\n\t\treturn this._indices.has( rowIndex );\n\t}\n\n\tremove( rowIndex: number ): void {\n\t\tif( this._indices.delete( rowIndex ) ) {\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.size ) {\n\t\t\tindices.clear();\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tclearAndAdd( rowIndex: number ): void {\n\t\tconst indices = this._indices;\n\t\tif( ! indices.has( rowIndex ) || indices.size !== 1 ) {\n\t\t\tindices.clear();\n\t\t\tindices.add( rowIndex );\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tclearAndAddAll( rowIndices: number[] ): void {\n\t\tconst indices = this._indices;\n\t\tif( 0 < indices.size || 0 < rowIndices.length ) {\n\t\t\tindices.clear();\n\t\t\tfor( let i = 0, imax = rowIndices.length; i < imax; ++i ) {\n\t\t\t\tindices.add( rowIndices[ i ] );\n\t\t\t}\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tshift( rowIndex: number, amount: number ): void {\n\t\tconst shifted: number[] = [];\n\t\tconst indices = this._indices;\n\t\tindices.forEach(( index: number ): void => {\n\t\t\tif( rowIndex <= index ) {\n\t\t\t\tshifted.push( index );\n\t\t\t}\n\t\t});\n\t\tconst shiftedLength = shifted.length;\n\t\tif( 0 < shiftedLength ) {\n\t\t\tfor( let i = 0, imax = shifted.length; i < imax; ++i ) {\n\t\t\t\tindices.delete( shifted[ i ] );\n\t\t\t}\n\t\t\tfor( let i = 0, imax = shifted.length; i < imax; ++i ) {\n\t\t\t\tindices.add( shifted[ i ] + amount );\n\t\t\t}\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tsize(): number {\n\t\treturn this._indices.size;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this._indices.size === 0;\n\t}\n\n\t/**\n\t * Returns a copy of an index array of selected rows.\n\t * The order of indices is an insertion order.\n\t */\n\tget indices(): number[] {\n\t\tconst result: number[] = [];\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult.push( index );\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a copy of an array of selected row value.\n\t * The order is an insertion order.\n\t */\n\tget rows(): unknown[] {\n\t\tconst result: unknown[] = [];\n\t\tconst data = this._data;\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult.push( data[ index ] );\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns an array of the (index, row value) pairs of selected rows.\n\t * The order of pairs is an insertion order.\n\t */\n\ttoArray(): Array<[ number, unknown ]> {\n\t\tconst result: Array<[ number, unknown ]> = [];\n\t\tconst data = this._data;\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult.push([ index, data[ index ]]);\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns an sorted array of the (index, row value) pairs of selected rows.\n\t */\n\ttoSortedArray(): Array<[ number, unknown ]> {\n\t\treturn this.toArray().sort( COMPARATOR );\n\t}\n\n\ttoObject(): {[index: number]: unknown} {\n\t\tconst result: {[index: number]: unknown} = {};\n\t\tconst data = this._data;\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult[ index ] = data[ index ];\n\t\t});\n\t\treturn result;\n\t}\n\n\ttoMap(): Map<number, unknown> {\n\t\tconst result: Map<number, unknown> = new Map<number, unknown>();\n\t\tconst data = this._data;\n\t\tthis._indices.forEach(( index: number ): void => {\n\t\t\tresult.set( index, data[ index ] );\n\t\t});\n\t\treturn result;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DTableBodyCell } from \"./d-table-body-cell\";\nimport { DTableBodyCellCheck } from \"./d-table-body-cell-check\";\nimport { DTableBodyCellColor } from \"./d-table-body-cell-color\";\nimport { DTableBodyCellDate } from \"./d-table-body-cell-date\";\nimport { DTableBodyCellDatetime } from \"./d-table-body-cell-datetime\";\nimport { DTableBodyCellIndex } from \"./d-table-body-cell-index\";\nimport { DTableBodyCellInputInteger } from \"./d-table-body-cell-input-integer\";\nimport { DTableBodyCellInputReal } from \"./d-table-body-cell-input-real\";\nimport { DTableBodyCellInputText } from \"./d-table-body-cell-input-text\";\nimport { DTableBodyCellSelectDialog } from \"./d-table-body-cell-select-dialog\";\nimport { DTableBodyCellSelectFetcher } from \"./d-table-body-cell-select-fetcher\";\nimport { DTableBodyCellSelectMenu } from \"./d-table-body-cell-select-menu\";\nimport { DTableBodyCellText } from \"./d-table-body-cell-text\";\nimport { DTableBodyCellTime } from \"./d-table-body-cell-time\";\nimport {\n\tDTableBodyCellOptionsMerged, DTableBodyCellOptionsUnion,\n\tDTableColumn, DTableColumnType\n} from \"./d-table-column\";\nimport { DTableRow, DTableRowOptions, DThemeTableRow } from \"./d-table-row\";\n\nexport interface DTableBodyRowOptions<ROW, THEME extends DThemeTableBodyRow = DThemeTableBodyRow>\n\textends DTableRowOptions<ROW, THEME> {\n\theight?: number;\n\tcell?: DTableBodyCellOptionsUnion<ROW>;\n}\n\nexport interface DThemeTableBodyRow extends DThemeTableRow {\n\n}\n\nconst isBodyCell = ( target: any ): target is DTableBodyCell => {\n\treturn (target != null && \"set\" in target);\n};\n\ntype OnCellChange = (\n\tnewCellValue: unknown, oldCellValue: unknown,\n\tcolumnIndex: number, column: DTableColumn<unknown>\n) => void;\n\nexport class DTableBodyRow<\n\tROW,\n\tTHEME extends DThemeTableBodyRow = DThemeTableBodyRow,\n\tOPTIONS extends DTableBodyRowOptions<ROW, THEME> = DTableBodyRowOptions<ROW, THEME>\n> extends DTableRow<ROW, THEME, OPTIONS> {\n\tprotected _row: ROW | undefined = undefined;\n\tprotected _onCellChangeBound!: OnCellChange;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tthis._onCellChangeBound = (\n\t\t\tnewCellValue: unknown, oldCellValue: unknown,\n\t\t\tcolumnIndex: number, column: DTableColumn<unknown>\n\t\t): void => {\n\t\t\tconst row = this._row;\n\t\t\tif( row != null ) {\n\t\t\t\tcolumn.setter( row, columnIndex, newCellValue );\n\t\t\t\tthis.emit( \"change\", newCellValue, oldCellValue, columnIndex, this );\n\t\t\t}\n\t\t};\n\t\tsuper.init( options );\n\t}\n\n\tprotected newCell(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\tcolumns: Array<DTableColumn<ROW>>,\n\t\toptions: OPTIONS\n\t): DBase {\n\t\tconst cellOptions = this.toCellOptions( column, columnIndex, options ) as any;\n\t\tif( column.editable ) {\n\t\t\tconst cell = this.newCellEditable( column, columnIndex, cellOptions );\n\t\t\tcell.on( \"cellchange\", this._onCellChangeBound );\n\t\t\treturn cell;\n\t\t} else {\n\t\t\tconst cell = this.newCellUnediable( column, columnIndex, cellOptions );\n\t\t\tcell.setReadOnly( true );\n\t\t\treturn cell;\n\t\t}\n\t}\n\n\tprotected newCellEditable(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\toptions: any\n\t): DBase {\n\t\tswitch( column.type ) {\n\t\tcase DTableColumnType.INDEX:\n\t\t\treturn new DTableBodyCellIndex( options );\n\t\tcase DTableColumnType.TEXT:\n\t\t\treturn new DTableBodyCellInputText( options );\n\t\tcase DTableColumnType.INTEGER:\n\t\t\treturn new DTableBodyCellInputInteger( options );\n\t\tcase DTableColumnType.REAL:\n\t\t\treturn new DTableBodyCellInputReal( options );\n\t\tcase DTableColumnType.CHECK:\n\t\t\treturn new DTableBodyCellCheck( options );\n\t\tcase DTableColumnType.COLOR:\n\t\t\treturn new DTableBodyCellColor( options );\n\t\tcase DTableColumnType.BUTTON:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.SELECT:\n\t\t\tconst selecting = column.selecting;\n\t\t\tif( selecting.menu != null ) {\n\t\t\t\treturn new DTableBodyCellSelectMenu( options );\n\t\t\t} else if( selecting.dialog != null ) {\n\t\t\t\treturn new DTableBodyCellSelectDialog( options );\n\t\t\t} else if( selecting.fetcher != null ) {\n\t\t\t\treturn new DTableBodyCellSelectFetcher( options );\n\t\t\t} else {\n\t\t\t\treturn new DTableBodyCellText( options );\n\t\t\t}\n\t\tcase DTableColumnType.DATE:\n\t\t\treturn new DTableBodyCellDate( options );\n\t\tcase DTableColumnType.DATETIME:\n\t\t\treturn new DTableBodyCellDatetime( options );\n\t\tcase DTableColumnType.TIME:\n\t\t\treturn new DTableBodyCellTime( options );\n\t\tdefault:\n\t\t\treturn new DTableBodyCellText( options );\n\t\t}\n\t}\n\tprotected newCellUnediable(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\toptions: any\n\t): DBase {\n\t\tswitch( column.type ) {\n\t\tcase DTableColumnType.INDEX:\n\t\t\treturn new DTableBodyCellIndex( options );\n\t\tcase DTableColumnType.TEXT:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.INTEGER:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.REAL:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.CHECK:\n\t\t\treturn new DTableBodyCellCheck( options );\n\t\tcase DTableColumnType.COLOR:\n\t\t\treturn new DTableBodyCellColor( options );\n\t\tcase DTableColumnType.BUTTON:\n\t\t\treturn new DTableBodyCellText( options );\n\t\tcase DTableColumnType.SELECT:\n\t\t\tconst selecting = column.selecting;\n\t\t\tif( selecting.menu != null ) {\n\t\t\t\treturn new DTableBodyCellSelectMenu( options );\n\t\t\t} else if( selecting.dialog != null ) {\n\t\t\t\treturn new DTableBodyCellSelectDialog( options );\n\t\t\t} else if( selecting.fetcher != null ) {\n\t\t\t\treturn new DTableBodyCellSelectFetcher( options );\n\t\t\t} else {\n\t\t\t\treturn new DTableBodyCellText( options );\n\t\t\t}\n\t\tcase DTableColumnType.DATE:\n\t\t\treturn new DTableBodyCellDate( options );\n\t\tcase DTableColumnType.DATETIME:\n\t\t\treturn new DTableBodyCellDatetime( options );\n\t\tcase DTableColumnType.TIME:\n\t\t\treturn new DTableBodyCellTime( options );\n\t\tdefault:\n\t\t\treturn new DTableBodyCellText( options );\n\t\t}\n\t}\n\n\tprotected toCellOptions(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\toptions: OPTIONS\n\t): DTableBodyCellOptionsUnion<ROW> {\n\t\tlet result = (column.body || options.cell) as DTableBodyCellOptionsMerged<ROW> | undefined;\n\t\tif( result != null ) {\n\t\t\tresult.weight = column.weight;\n\t\t\tresult.width = column.width;\n\t\t\tconst text = result.text = result.text || {};\n\t\t\tconst align = text.align = text.align || {};\n\t\t\talign.horizontal = column.align;\n\t\t\ttext.formatter = column.formatter;\n\t\t\tresult.column = {\n\t\t\t\tindex: columnIndex,\n\t\t\t\tdata: column\n\t\t\t};\n\t\t\tif( column.selecting.menu ) {\n\t\t\t\tresult.menu = column.selecting.menu;\n\t\t\t}\n\t\t} else {\n\t\t\tresult = {\n\t\t\t\tweight: column.weight,\n\t\t\t\twidth: column.width,\n\t\t\t\ttext: {\n\t\t\t\t\tformatter: column.formatter,\n\t\t\t\t\talign: {\n\t\t\t\t\t\thorizontal: column.align\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcolumn: {\n\t\t\t\t\tindex: columnIndex,\n\t\t\t\t\tdata: column\n\t\t\t\t},\n\t\t\t\tmenu: column.selecting.menu\n\t\t\t};\n\t\t}\n\n\t\tif( column.editable ) {\n\t\t\tconst editing = result!.editing = result!.editing || {};\n\t\t\tediting.formatter = editing.formatter || column.editing.formatter;\n\t\t\tediting.unformatter = editing.unformatter || column.editing.unformatter as any;\n\t\t\tediting.validator = editing.validator || column.editing.validator as any;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBodyRow\";\n\t}\n\n\tset( row: ROW, rowIndex: number, forcibly?: boolean ): void {\n\t\tif( forcibly || this._row !== row ) {\n\t\t\tthis._row = row;\n\n\t\t\tconst cells = this.children;\n\t\t\tconst cellsLength = cells.length;\n\t\t\tconst columns = this._columns;\n\t\t\tconst columnsLength = columns.length;\n\t\t\tfor( let i = 0, imax = Math.min( columnsLength, cellsLength ); i < imax; ++i ) {\n\t\t\t\tconst cell = cells[ cellsLength - i - 1 ];\n\t\t\t\tconst columnIndex = columnsLength - i - 1;\n\t\t\t\tconst column = columns[ columnIndex ];\n\t\t\t\tif( isBodyCell( cell ) ) {\n\t\t\t\t\tcell.set( column.getter( row, columnIndex ), rowIndex, columnIndex, forcibly );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.emit( \"set\", row, rowIndex, this );\n\t\t}\n\t}\n\n\tunset(): void {\n\t\tif( this._row !== undefined ) {\n\t\t\tthis._row = undefined;\n\n\t\t\tconst cells = this.children;\n\t\t\tfor( let i = 0, imax = cells.length; i < imax; ++i ) {\n\t\t\t\tconst cell = cells[ i ];\n\t\t\t\tif( isBodyCell( cell ) ) {\n\t\t\t\t\tcell.unset();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.emit( \"unset\", this );\n\t\t}\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DTableBodyRow, DTableBodyRowOptions, DThemeTableBodyRow } from \"./d-table-body-row\";\n\nexport interface DTableBodyRowEvenOptions<ROW, THEME extends DThemeTableBodyRowEven = DThemeTableBodyRowEven>\n\textends DTableBodyRowOptions<ROW, THEME> {\n\n}\n\nexport interface DThemeTableBodyRowEven extends DThemeTableBodyRow {\n\n}\n\nexport class DTableBodyRowEven<\n\tROW,\n\tTHEME extends DThemeTableBodyRowEven = DThemeTableBodyRowEven,\n\tOPTIONS extends DTableBodyRowEvenOptions<ROW, THEME> = DTableBodyRowEvenOptions<ROW, THEME>\n> extends DTableBodyRow<ROW, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DTableBodyRowEven\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DTableBodyRow, DTableBodyRowOptions, DThemeTableBodyRow } from \"./d-table-body-row\";\n\nexport interface DTableBodyRowOddOptions<ROW, THEME extends DThemeTableBodyRowOdd = DThemeTableBodyRowOdd>\n\textends DTableBodyRowOptions<ROW, THEME> {\n\n}\n\nexport interface DThemeTableBodyRowOdd extends DThemeTableBodyRow {\n\n}\n\nexport class DTableBodyRowOdd<\n\tROW,\n\tTHEME extends DThemeTableBodyRowOdd = DThemeTableBodyRowOdd,\n\tOPTIONS extends DTableBodyRowOddOptions<ROW, THEME> = DTableBodyRowOddOptions<ROW, THEME>\n> extends DTableBodyRow<ROW, THEME, OPTIONS> {\n\tprotected getType(): string {\n\t\treturn \"DTableBodyRowOdd\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { interaction, Point } from \"pixi.js\";\nimport InteractionEvent = interaction.InteractionEvent;\nimport { DBase, DBaseOptions } from \"./d-base\";\nimport { DButtonBase } from \"./d-button-base\";\nimport { DContentOptions } from \"./d-content\";\nimport { DPane, DPaneOptions, DThemePane } from \"./d-pane\";\nimport {\n\tDTableBodyFilter, DTableBodyFilterFunction, DTableBodyFilterImpl, DTableBodyFilterObject\n} from \"./d-table-body-filter\";\nimport { DTableBodyRow, DTableBodyRowOptions } from \"./d-table-body-row\";\nimport { DTableBodyRowEven } from \"./d-table-body-row-even\";\nimport { DTableBodyRowOdd } from \"./d-table-body-row-odd\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { DTableSelection, DTableSelectionType } from \"./d-table-selection\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { UtilPointerEvent } from \"./util/util-pointer-event\";\n\nexport interface DTableBodyOptions<\n\tROW,\n\tTHEME extends DThemeTableBody = DThemeTableBody,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions\n> extends DPaneOptions<THEME, CONTENT_OPTIONS> {\n\tcolumns?: Array<DTableColumn<ROW>>;\n\tdata?: ROW[];\n\tselection?: {\n\t\ttype?: (keyof typeof DTableSelectionType) | DTableSelectionType;\n\t};\n\trow?: DTableBodyRowOptions<ROW>;\n\tfilter?: DTableBodyFilterFunction<ROW> | DTableBodyFilterObject<ROW>;\n}\n\nexport interface DThemeTableBody extends DThemePane {\n\tgetRowHeight(): number;\n}\n\nconst toData = <ROW>( data: ROW[] | undefined ): ROW[] => {\n\tconst result: ROW[] = [];\n\tif( data != null ) {\n\t\tfor( let i = 0, imax = data.length; i < imax; ++i ) {\n\t\t\tresult.push( data[ i ] );\n\t\t}\n\t}\n\treturn result;\n};\n\nconst toSelectionType = ( options: DTableBodyOptions<any> ): DTableSelectionType => {\n\treturn ( options.selection && options.selection.type != null ?\n\t\t( utilIsString( options.selection.type ) ? DTableSelectionType[ options.selection.type ] : options.selection.type ) :\n\t\tDTableSelectionType.NONE\n\t);\n};\n\nconst toRowOptions = <ROW>(\n\ttheme: DThemeTableBody,\n\toptions: DTableBodyOptions<ROW>,\n\tselectionType: DTableSelectionType\n): DTableBodyRowOptions<ROW> => {\n\tconst columns = options.columns || [];\n\tlet result = options.row;\n\tif( result != null ) {\n\t\tif( result.height == null ) {\n\t\t\tresult.height = theme.getRowHeight();\n\t\t}\n\t\tif( result.columns === undefined ) {\n\t\t\tresult.columns = columns;\n\t\t}\n\t\tif( selectionType !== DTableSelectionType.NONE && result.interactive == null ) {\n\t\t\tresult.interactive = \"SELF\";\n\t\t}\n\t} else {\n\t\tresult = {\n\t\t\tcolumns,\n\t\t\theight: theme.getRowHeight(),\n\t\t\tinteractive: ( selectionType !== DTableSelectionType.NONE ? \"SELF\" : undefined )\n\t\t};\n\t}\n\treturn result as DTableBodyRowOptions<ROW>;\n};\n\nexport class DTableBody<\n\tROW,\n\tTHEME extends DThemeTableBody = DThemeTableBody,\n\tCONTENT_OPTIONS extends DBaseOptions = DContentOptions,\n\tOPTIONS extends DTableBodyOptions<ROW, THEME, CONTENT_OPTIONS> = DTableBodyOptions<ROW, THEME, CONTENT_OPTIONS>\n> extends DPane<THEME, CONTENT_OPTIONS, OPTIONS> {\n\tprotected static WORK_ON_CLICK = new Point();\n\tprotected _columns!: Array<DTableColumn<ROW>>;\n\tprotected _rowHeight!: number;\n\tprotected _rowIndexStart!: number;\n\tprotected _rowIndexEnd!: number;\n\tprotected _data!: ROW[];\n\tprotected _rowOptions!: DTableBodyRowOptions<ROW>;\n\tprotected _selection!: DTableSelection<ROW>;\n\tprotected _updateRowsCount!: number;\n\tprotected _isUpdateRowsCalled!: boolean;\n\tprotected _isUpdateRowsCalledForcibly!: boolean;\n\tprotected _filter!: DTableBodyFilterImpl<ROW>;\n\tprotected _workRows!: Array<DTableBodyRow<ROW>>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst theme = this.theme;\n\t\tconst selectionType = toSelectionType( options );\n\t\tconst rowOptions = toRowOptions( theme, options, selectionType );\n\t\tthis._rowOptions = rowOptions;\n\t\tthis._rowHeight = ( rowOptions.height != null ? rowOptions.height : theme.getRowHeight() );\n\t\tthis._columns = rowOptions.columns || [];\n\t\tthis._rowIndexStart = 0;\n\t\tthis._rowIndexEnd = 0;\n\t\tthis._data = toData( options.data );\n\t\tthis._updateRowsCount = 0;\n\t\tthis._isUpdateRowsCalled = false;\n\t\tthis._isUpdateRowsCalledForcibly = false;\n\t\tthis._workRows = [];\n\t\tconst selection = this._selection = new DTableSelection( selectionType, this._data, (): void => {\n\t\t\tthis.onSelectionChange();\n\t\t});\n\n\t\tthis._filter = new DTableBodyFilterImpl<ROW>( this, (): void => {\n\t\t\tthis.onFilterChange();\n\t\t});\n\t\tif( options && options.filter ) {\n\t\t\tthis._filter.set( options.filter );\n\t\t}\n\n\t\tconst content = this.content;\n\t\tcontent.on( \"move\", (): void => {\n\t\t\tthis.update();\n\t\t});\n\t\tcontent.on( \"resize\", (): void => {\n\t\t\tthis.update();\n\t\t});\n\t\tthis.update();\n\n\t\tif( selection.type !== DTableSelectionType.NONE ) {\n\t\t\tUtilPointerEvent.onClick( this, ( e: InteractionEvent ): void => {\n\t\t\t\tif( this.isActionable() ) {\n\t\t\t\t\tconst local = DTableBody.WORK_ON_CLICK;\n\t\t\t\t\tlocal.copyFrom( e.data.global );\n\t\t\t\t\tcontent.toLocal( local, undefined, local, false );\n\t\t\t\t\tconst rowIndex = Math.floor( local.y / this._rowHeight );\n\t\t\t\t\tconst indices = this._filter.indices;\n\t\t\t\t\tconst data = this._data;\n\t\t\t\t\tconst dataLength = ( indices != null ? indices.length : data.length );\n\t\t\t\t\tif( 0 <= rowIndex && rowIndex < dataLength ) {\n\t\t\t\t\t\tconst isSingle = ( selection.type === DTableSelectionType.SINGLE );\n\t\t\t\t\t\tconst isNotSingle = ! isSingle;\n\t\t\t\t\t\tconst originalEvent = e.data.originalEvent;\n\t\t\t\t\t\tconst ctrlKey = originalEvent.ctrlKey;\n\t\t\t\t\t\tconst shiftKey = originalEvent.shiftKey;\n\t\t\t\t\t\tconst realRowIndex = ( indices ? indices[ rowIndex ] : rowIndex );\n\t\t\t\t\t\tif( isSingle || selection.isEmpty() || ! ( isNotSingle && ( ctrlKey || shiftKey ) ) ) {\n\t\t\t\t\t\t\tselection.clearAndAdd( realRowIndex );\n\t\t\t\t\t\t} else if( ctrlKey ) {\n\t\t\t\t\t\t\tselection.toggle( realRowIndex );\n\t\t\t\t\t\t} else if( shiftKey ) {\n\t\t\t\t\t\t\tselection.addTo( realRowIndex );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tonResize( newWidth: number, newHeight: number, oldWidth: number, oldHeight: number ): void {\n\t\tsuper.onResize( newWidth, newHeight, oldWidth, oldHeight );\n\t\tthis.update();\n\t}\n\n\tget selection(): DTableSelection<ROW> {\n\t\treturn this._selection;\n\t}\n\n\tlock(): void {\n\t\tthis._updateRowsCount += 1;\n\t\tif( this._updateRowsCount === 1 ) {\n\t\t\tthis._isUpdateRowsCalled = false;\n\t\t\tthis._isUpdateRowsCalledForcibly = false;\n\t\t}\n\t}\n\n\tunlock( callIfNeeded: boolean ): void {\n\t\tthis._updateRowsCount -= 1;\n\t\tif( this._updateRowsCount === 0 ) {\n\t\t\tif( callIfNeeded && this._isUpdateRowsCalled ) {\n\t\t\t\tthis.update( this._isUpdateRowsCalledForcibly );\n\t\t\t}\n\t\t\tthis._isUpdateRowsCalled = false;\n\t\t\tthis._isUpdateRowsCalledForcibly = false;\n\t\t}\n\t}\n\n\tprotected onSelectionChange(): void {\n\t\tthis.update();\n\t}\n\n\tprotected onFilterChange(): void {\n\t\tthis.update();\n\t}\n\n\t/**\n\t * Updates rows. If the `forcibly` is true, some dirty checkings for\n\t * avoiding unnecessary state changes are skipped.\n\t *\n\t * @param forcibly true to update forcibly\n\t */\n\tupdate( forcibly?: boolean ): void {\n\t\tif( 0 < this._updateRowsCount ) {\n\t\t\tthis._isUpdateRowsCalled = true;\n\t\t\tif( forcibly ) {\n\t\t\t\tthis._isUpdateRowsCalledForcibly = true;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst content = this.content;\n\t\tconst rows = content.children as Array<DTableBodyRow<ROW>>;\n\t\tconst height = this.height;\n\t\tconst rowHeight = this._rowHeight;\n\n\t\tconst indices = this._filter.indices;\n\t\tconst data = this._data;\n\t\tconst dataLength = ( indices != null ? indices.length : data.length );\n\n\t\tconst oldRowIndexStart = this._rowIndexStart;\n\t\tlet oldRowIndexEnd = this._rowIndexEnd;\n\t\tlet oldRowCount = oldRowIndexEnd - oldRowIndexStart;\n\n\t\tconst newContentHeight = Math.max( height, dataLength * rowHeight );\n\t\tconst newContentY = Math.max( height - newContentHeight, content.position.y );\n\t\tcontent.position.y = newContentY;\n\t\tcontent.height = newContentHeight;\n\n\t\tconst newRowIndexLowerBound = Math.floor( (0 - newContentY) / rowHeight );\n\t\tconst newRowIndexUpperBound = Math.floor( (height - newContentY) / rowHeight );\n\t\tconst newRowIndexStart = newRowIndexLowerBound - ( newRowIndexLowerBound % 2 === 0 ? 2 : 1 );\n\t\tlet newRowIndexEnd = newRowIndexUpperBound + ((newRowIndexUpperBound - newRowIndexStart + 1) % 2 === 0 ? 3 : 2);\n\t\tlet newRowCount = newRowIndexEnd - newRowIndexStart;\n\t\tif( newRowCount < oldRowCount && oldRowCount - 2 <= newRowCount ) {\n\t\t\tnewRowCount = oldRowCount;\n\t\t\tnewRowIndexEnd = newRowIndexStart + newRowCount;\n\t\t}\n\n\t\tif( oldRowCount < newRowCount ) {\n\t\t\tfor( let i = oldRowCount; i < newRowCount; ++i ) {\n\t\t\t\tconst oldRowIndex = oldRowIndexStart + i;\n\t\t\t\tconst newRow = this.newRow( (oldRowIndex % 2) === 0 );\n\t\t\t\tcontent.addChild( newRow );\n\t\t\t}\n\t\t\toldRowCount = newRowCount;\n\t\t\toldRowIndexEnd = oldRowIndexStart + oldRowCount;\n\t\t} else if( newRowCount < oldRowCount ) {\n\t\t\tfor( let i = oldRowCount - 1; newRowCount <= i; --i ) {\n\t\t\t\tcontent.removeChild( rows[ i ] );\n\t\t\t}\n\t\t\toldRowCount = newRowCount;\n\t\t\toldRowIndexEnd = oldRowIndexStart + oldRowCount;\n\t\t}\n\n\t\tthis._rowIndexStart = newRowIndexStart;\n\t\tthis._rowIndexEnd = newRowIndexEnd;\n\n\t\tconst rowIndexStartDelta = newRowIndexStart - oldRowIndexStart;\n\t\tconst absRowIndexStartDelta = Math.abs(rowIndexStartDelta);\n\t\tconst rowsLength = rows.length;\n\t\tif( 0 < absRowIndexStartDelta && absRowIndexStartDelta < rowsLength ) {\n\t\t\tconst work = this._workRows;\n\t\t\tif( 0 < rowIndexStartDelta ) {\n\t\t\t\tfor( let i = 0; i < absRowIndexStartDelta; ++i ) {\n\t\t\t\t\twork.push( this.resetRow( rows[ i ] ) );\n\t\t\t\t}\n\t\t\t\tfor( let i = absRowIndexStartDelta; i < rowsLength; ++i ) {\n\t\t\t\t\trows[ i - absRowIndexStartDelta ] = rows[ i ];\n\t\t\t\t}\n\t\t\t\tfor( let i = 0; i < absRowIndexStartDelta; ++i ) {\n\t\t\t\t\trows[ rowsLength - absRowIndexStartDelta + i ] = work[ i ];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor( let i = 0; i < absRowIndexStartDelta; ++i ) {\n\t\t\t\t\twork.push( this.resetRow( rows[ rowsLength - absRowIndexStartDelta + i ] ) );\n\t\t\t\t}\n\t\t\t\tfor( let i = rowsLength - absRowIndexStartDelta - 1; 0 <= i; --i ) {\n\t\t\t\t\trows[ i + absRowIndexStartDelta ] = rows[ i ];\n\t\t\t\t}\n\t\t\t\tfor( let i = 0; i < absRowIndexStartDelta; ++i ) {\n\t\t\t\t\trows[ i ] = work[ i ];\n\t\t\t\t}\n\t\t\t}\n\t\t\twork.length = 0;\n\t\t}\n\n\t\tconst selection = this._selection;\n\t\tif( indices != null ) {\n\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\tconst row = rows[ i ];\n\t\t\t\tconst rowIndex = newRowIndexStart + i;\n\t\t\t\tconst realRowIndex = indices[ rowIndex ];\n\t\t\t\trow.position.y = rowIndex * rowHeight;\n\t\t\t\trow.setDisabled( rowIndex < 0 || dataLength <= rowIndex );\n\t\t\t\trow.setActive( selection.contains( realRowIndex ) );\n\t\t\t\tif( 0 <= rowIndex && rowIndex < dataLength ) {\n\t\t\t\t\trow.set( data[ realRowIndex ], realRowIndex, forcibly );\n\t\t\t\t} else {\n\t\t\t\t\trow.unset();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\tconst row = rows[ i ];\n\t\t\t\tconst rowIndex = newRowIndexStart + i;\n\t\t\t\trow.position.y = rowIndex * rowHeight;\n\t\t\t\trow.setDisabled( rowIndex < 0 || dataLength <= rowIndex );\n\t\t\t\trow.setActive( selection.contains( rowIndex ) );\n\t\t\t\tif( 0 <= rowIndex && rowIndex < dataLength ) {\n\t\t\t\t\trow.set( data[ rowIndex ], rowIndex, forcibly );\n\t\t\t\t} else {\n\t\t\t\t\trow.unset();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected resetRow( row: DTableBodyRow<ROW> ): DTableBodyRow<ROW> {\n\t\trow.blur( true );\n\t\tconst cells = row.children;\n\t\tfor( let i = 0, imax = cells.length; i < imax; ++i ) {\n\t\t\tconst cell = cells[ i ];\n\t\t\tif( cell instanceof DBase ) {\n\t\t\t\tcell.setPressed( false );\n\t\t\t}\n\t\t}\n\t\treturn row;\n\t}\n\n\tprotected newRow( isEven: boolean ): DTableBodyRow<ROW> {\n\t\tconst options = this._rowOptions;\n\t\tconst result = ( isEven ?\n\t\t\tnew DTableBodyRowEven<ROW>( options ) : new DTableBodyRowOdd<ROW>( options )\n\t\t);\n\t\tresult.on( \"change\", ( newCellValue: unknown, oldCellValue: unknown, columnIndex: number ): void => {\n\t\t\tconst index = this.content.getChildIndex( result );\n\t\t\tif( 0 <= index ) {\n\t\t\t\tconst rowIndex = this._rowIndexStart + index;\n\t\t\t\tthis.emit( \"change\", newCellValue, oldCellValue, rowIndex, columnIndex, this );\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tonDblClick( e: MouseEvent | TouchEvent, interactionManager: interaction.InteractionManager ): boolean {\n\t\tlet result = false;\n\t\tif( this.isActionable() && this._selection.type !== DTableSelectionType.NONE ) {\n\t\t\tconst local = UtilPointerEvent.toGlobal( e, interactionManager, DTableBody.WORK_ON_CLICK );\n\t\t\tconst content = this.content;\n\t\t\tcontent.toLocal( local, undefined, local, false );\n\t\t\tconst x = local.x;\n\t\t\tconst y = local.y;\n\t\t\tconst rowIndex = Math.floor( y / this._rowHeight );\n\t\t\tconst indices = this._filter.indices;\n\t\t\tconst data = this._data;\n\t\t\tconst dataLength = ( indices != null ? indices.length : data.length );\n\t\t\tif( 0 <= rowIndex && rowIndex < dataLength ) {\n\t\t\t\tconst index = rowIndex - this._rowIndexStart;\n\t\t\t\tconst rows = content.children as Array<DTableBodyRow<ROW>>;\n\t\t\t\tif( 0 <= index && index < rows.length ) {\n\t\t\t\t\tconst row = rows[ index ];\n\t\t\t\t\tconst cells = row.children as DBase[];\n\t\t\t\t\tconst cellsLength = cells.length;\n\t\t\t\t\tconst columns = this._columns;\n\t\t\t\t\tconst columnsLength = columns.length;\n\t\t\t\t\tfor( let i = 0, imax = Math.min( cellsLength, columnsLength ); i < imax; ++i ) {\n\t\t\t\t\t\tconst column = columns[ columnsLength - i - 1 ];\n\t\t\t\t\t\tif( column.editable ) {\n\t\t\t\t\t\t\tconst cell = cells[ cellsLength - i - 1 ];\n\t\t\t\t\t\t\tconst dx = x - cell.position.x;\n\t\t\t\t\t\t\tif( 0 <= dx && dx <= cell.width ) {\n\t\t\t\t\t\t\t\tcell.focus();\n\t\t\t\t\t\t\t\tif( cell instanceof DButtonBase ) {\n\t\t\t\t\t\t\t\t\tcell.onClick();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tresult = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresult = super.onDblClick( e, interactionManager ) || result;\n\t\treturn result;\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableBody\";\n\t}\n\n\t/**\n\t * Returns an array of row data.\n\t * If you need to modify the returned array,\n\t * call the `#update(boolean)` to apply your changes.\n\t */\n\tget rows(): ROW[] {\n\t\treturn this._data;\n\t}\n\n\tset rows( rows: ROW[] ) {\n\t\tif( this._data !== rows ) {\n\t\t\tthis._data = rows;\n\t\t\tthis.lock();\n\t\t\tthis._selection.clear();\n\t\t\tthis._filter.clear();\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tconst data = this._data;\n\t\tif( 0 < data.length ) {\n\t\t\tdata.length = 0;\n\t\t\tthis.lock();\n\t\t\tthis._selection.clear();\n\t\t\tthis._filter.clear();\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\tclearAndAdd( row: ROW ): void {\n\t\tconst data = this._data;\n\t\tdata.length = 0;\n\t\tdata.push( row );\n\t\tthis.lock();\n\t\tthis._selection.clear();\n\t\tthis._filter.clear();\n\t\tthis.unlock( false );\n\t\tthis.update();\n\t}\n\n\tclearAndAddAll( rows: ROW[] ): void {\n\t\tconst data = this._data;\n\t\tdata.length = 0;\n\t\tfor( let i = 0, imax = rows.length; i < imax; ++i ) {\n\t\t\tdata.push( rows[ i ] );\n\t\t}\n\t\tthis.lock();\n\t\tthis._selection.clear();\n\t\tthis._filter.clear();\n\t\tthis.unlock( false );\n\t\tthis.update();\n\t}\n\n\tadd( row: ROW, index?: number ): void {\n\t\tconst data = this._data;\n\t\tconst filter = this._filter;\n\t\tconst selection = this._selection;\n\t\tif( index == null ) {\n\t\t\tdata.push( row );\n\t\t\tthis.lock();\n\t\t\tfilter.add( data.length - 1, 1 );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t} else if( 0 <= index && index < data.length ) {\n\t\t\tdata.splice( index, 0, row );\n\t\t\tthis.lock();\n\t\t\tselection.shift( index, 1 );\n\t\t\tfilter.shift( index, 1, true );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\taddAll( rows: ROW[], index?: number ): void {\n\t\tconst data = this._data;\n\t\tconst dataLength = data.length;\n\t\tconst filter = this._filter;\n\t\tconst selection = this._selection;\n\t\tif( index == null ) {\n\t\t\tconst rowsLength = rows.length;\n\t\t\tfor( let i = 0, imax = rowsLength; i < imax; ++i ) {\n\t\t\t\tdata.push( rows[ i ] );\n\t\t\t}\n\t\t\tthis.lock();\n\t\t\tfilter.add( dataLength - 1, rowsLength );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t} else if( 0 <= index && index < dataLength ) {\n\t\t\tconst rowsLength = rows.length;\n\t\t\tfor( let i = 0; i < rowsLength; ++i ) {\n\t\t\t\tdata.splice( index + i, 0, rows[ i ] );\n\t\t\t}\n\t\t\tthis.lock();\n\t\t\tselection.shift( index, rowsLength );\n\t\t\tfilter.shift( index, rowsLength, true );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\tget( index: number ): ROW | null {\n\t\tconst data = this._data;\n\t\tif( 0 <= index && index < data.length ) {\n\t\t\treturn data[ index ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tset( index: number, row: ROW ): ROW | null {\n\t\tconst data = this._data;\n\t\tif( 0 <= index && index < data.length ) {\n\t\t\tconst result = data[ index ];\n\t\t\tdata[ index ] = row;\n\t\t\tthis.update();\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tremove( index: number ): ROW | null {\n\t\tconst data = this._data;\n\t\tif( 0 <= index && index < data.length ) {\n\t\t\tconst result = data.splice( index, 1 )[ 0 ];\n\t\t\tthis.lock();\n\t\t\tthis._selection.remove( index );\n\t\t\tthis._filter.remove( index );\n\t\t\tthis.unlock( false );\n\t\t\tthis.update();\n\t\t\treturn result;\n\t\t}\n\t\treturn null;\n\t}\n\n\tsize(): number {\n\t\treturn this._data.length;\n\t}\n\n\tget filter(): DTableBodyFilter<ROW> {\n\t\treturn this._filter;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBaseState } from \"./d-base-state\";\nimport { DStateAwareOrValueMightBe } from \"./d-state-aware\";\nimport { DThemeText } from \"./d-text\";\nimport { DTextBase, DTextBaseOptions, DThemeTextBase } from \"./d-text-base\";\n\nexport interface DTableHeaderCellOptions<THEME extends DThemeText = DThemeText>\n\textends DTextBaseOptions<string | null, THEME> {\n}\n\nexport interface DThemeTableHeaderCell extends DThemeTextBase {\n\tgetTextFormatter(): ( value: string | null, caller: DTableHeaderCell ) => string;\n\tgetTextValue( state: DBaseState ): string | null;\n\tnewTextValue(): DStateAwareOrValueMightBe<string | null>;\n}\n\nexport class DTableHeaderCell<\n\tTHEME extends DThemeTableHeaderCell = DThemeTableHeaderCell,\n\tOPTIONS extends DTableHeaderCellOptions<THEME> = DTableHeaderCellOptions<THEME>\n> extends DTextBase<string | null, THEME, OPTIONS> {\n\tprotected init( options?: OPTIONS ) {\n\t\tsuper.init( options );\n\t\tthis.setState( DBaseState.UNFOCUSABLE, true );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableHeaderCell\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase } from \"./d-base\";\nimport { DTableColumn } from \"./d-table-column\";\nimport { DTableHeaderCell, DTableHeaderCellOptions } from \"./d-table-header-cell\";\nimport { DTableRow, DTableRowOptions, DThemeTableRow } from \"./d-table-row\";\n\nexport interface DTableHeaderOptions<ROW, THEME extends DThemeTableHeader = DThemeTableHeader>\n\textends DTableRowOptions<ROW, THEME> {\n\tcell?: DTableHeaderCellOptions;\n}\n\nexport interface DThemeTableHeader extends DThemeTableRow {\n\n}\n\nexport class DTableHeader<\n\tROW,\n\tTHEME extends DThemeTableHeader = DThemeTableHeader,\n\tOPTIONS extends DTableHeaderOptions<ROW, THEME> = DTableHeaderOptions<ROW, THEME>\n> extends DTableRow<ROW, THEME, OPTIONS> {\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\t}\n\n\tprotected newCell(\n\t\tcolumn: DTableColumn<ROW>,\n\t\tcolumnIndex: number,\n\t\tcolumns: Array<DTableColumn<ROW>>,\n\t\toptions: OPTIONS\n\t): DBase {\n\t\treturn new DTableHeaderCell( this.toCellOptions( column, options ) );\n\t}\n\n\tprotected toCellOptions(\n\t\tcolumn: DTableColumn<ROW>,\n\t\toptions: OPTIONS\n\t): DTableHeaderCellOptions {\n\t\tconst header = column.header || options.cell;\n\t\tif( header != null ) {\n\t\t\theader.weight = column.weight;\n\t\t\theader.width = column.width;\n\t\t\tconst text = header.text = header.text || {};\n\t\t\ttext.value = text.value || column.label;\n\t\t\treturn header;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tweight: column.weight,\n\t\t\t\twidth: column.width,\n\t\t\t\ttext: {\n\t\t\t\t\tvalue: column.label\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTableHeader\";\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DDialogSelectOptions } from \"../ui/d-dialog-select\";\nimport { DAlignHorizontal } from \"./d-align-horizontal\";\nimport { DDialogSelect } from \"./d-dialog-select\";\nimport { DLayoutVertical, DLayoutVerticalOptions, DThemeLayoutVertical } from \"./d-layout-vertical\";\nimport { DMenu, DMenuOptions } from \"./d-menu\";\nimport { DTableBody, DTableBodyOptions, DThemeTableBody } from \"./d-table-body\";\nimport {\n\tDTableColumn, DTableColumnEditing, DTableColumnEditingOptions, DTableColumnOptions,\n\tDTableColumnSelecting, DTableColumnSelectingOptions, DTableColumnType, DTableEditingUnformatter,\n\tDTableGetter, DTableSelectingGetter, DTableSetter\n} from \"./d-table-column\";\nimport { DTableHeader, DTableHeaderOptions, DThemeTableHeader } from \"./d-table-header\";\nimport { utilIsString } from \"./util/util-is-string\";\nimport { utilToString } from \"./util/util-to-string\";\n\nexport interface DTableOptions<ROW, THEME extends DThemeTable = DThemeTable> extends DLayoutVerticalOptions<THEME> {\n\tcolumns: Array<DTableColumnOptions<ROW>>;\n\theader?: DTableHeaderOptions<ROW>;\n\tbody?: DTableBodyOptions<ROW>;\n\tdata?: ROW[];\n}\n\nexport interface DThemeTable extends DThemeLayoutVertical {\n\n}\n\nconst defaultGetter: DTableGetter<any> = ( row: any, index: number ): unknown => {\n\treturn row[ index ];\n};\n\nconst defaultSetter: DTableSetter<any> = ( row: any, index: number, cell: unknown ): void => {\n\trow[ index ] = cell;\n};\n\nconst defaultEditingUnformatter: DTableEditingUnformatter = ( cell: string ): unknown => {\n\treturn cell;\n};\n\nconst toColumnAlign = <ROW>( options: DTableColumnOptions<ROW>, type: DTableColumnType ): DAlignHorizontal => {\n\tif( options.align != null ) {\n\t\tif( utilIsString( options.align ) ) {\n\t\t\treturn DAlignHorizontal[ options.align ];\n\t\t} else {\n\t\t\treturn options.align;\n\t\t}\n\t}\n\tswitch( type ) {\n\tcase DTableColumnType.TEXT:\n\t\treturn DAlignHorizontal.LEFT;\n\tcase DTableColumnType.REAL:\n\tcase DTableColumnType.INTEGER:\n\t\treturn DAlignHorizontal.RIGHT;\n\tcase DTableColumnType.INDEX:\n\tcase DTableColumnType.SELECT:\n\t\treturn DAlignHorizontal.CENTER;\n\tdefault:\n\t\treturn DAlignHorizontal.LEFT;\n\t}\n};\n\nconst toColumnEditing = ( options: DTableColumnEditingOptions | undefined ): DTableColumnEditing => {\n\tif( options ) {\n\t\treturn {\n\t\t\tformatter: options.formatter || utilToString,\n\t\t\tunformatter: options.unformatter || defaultEditingUnformatter,\n\t\t\tvalidator: options.validator\n\t\t};\n\t}\n\treturn {\n\t\tformatter: utilToString,\n\t\tunformatter: defaultEditingUnformatter\n\t};\n};\n\nconst toColumnMenu = ( options?: DMenuOptions<unknown> | DMenu<unknown> ): DMenu<unknown> | undefined => {\n\tif( options == null ) {\n\t\treturn undefined;\n\t} else if( options instanceof DMenu ) {\n\t\treturn options;\n\t} else {\n\t\treturn new DMenu( options );\n\t}\n};\n\nconst toColumnDialog = (\n\toptions?: DDialogSelectOptions<unknown> | DDialogSelect<unknown>\n): DDialogSelect<unknown> | undefined => {\n\tif( options == null ) {\n\t\treturn undefined;\n\t} else if( options instanceof DDialogSelect ) {\n\t\treturn options;\n\t} else {\n\t\treturn new DDialogSelect( options );\n\t}\n};\n\nconst defaultSelectingGetter: DTableSelectingGetter = ( selected: unknown ): unknown => {\n\treturn selected;\n};\n\nconst toColumnSelecting = ( options: DTableColumnSelectingOptions | undefined ): DTableColumnSelecting => {\n\tif( options ) {\n\t\treturn {\n\t\t\tgetter: options.getter || defaultSelectingGetter,\n\t\t\tmenu: toColumnMenu( options.menu ),\n\t\t\tdialog: toColumnDialog( options.dialog ),\n\t\t\tfetcher: options.fetcher\n\t\t};\n\t}\n\treturn {\n\t\tgetter: defaultSelectingGetter\n\t};\n};\n\nconst toColumn = <ROW>( options: DTableColumnOptions<ROW> ): DTableColumn<ROW> => {\n\tconst weight = ( options.weight != null ? options.weight :\n\t\t( options.width != null ? undefined : +1 )\n\t);\n\tconst width = ( weight != null ? undefined :\n\t\t( options.width != null ? options.width : 100 )\n\t);\n\tconst type = ( options.type != null ?\n\t\t( utilIsString( options.type ) ? DTableColumnType[ options.type ] : options.type ) :\n\t\tDTableColumnType.TEXT\n\t);\n\tconst align = toColumnAlign( options, type );\n\tconst editable = ( options.editable === true );\n\treturn {\n\t\tweight,\n\t\twidth,\n\t\ttype,\n\t\tlabel: options.label || \"\",\n\t\tgetter: options.getter || defaultGetter,\n\t\tsetter: options.setter || defaultSetter,\n\t\tformatter: options.formatter,\n\t\talign,\n\n\t\teditable,\n\t\tediting: toColumnEditing( options.editing ),\n\n\t\theader: options.header,\n\t\tbody: options.body,\n\n\t\tselecting: toColumnSelecting( options.selecting )\n\t};\n};\n\nconst toColumns = <ROW>( options: Array<DTableColumnOptions<ROW>> ): Array<DTableColumn<ROW>> => {\n\tconst result = [];\n\tfor( let i = 0, imax = options.length; i < imax; ++i ) {\n\t\tresult.push( toColumn( options[ i ] ) );\n\t}\n\treturn result;\n};\n\nconst toHeaderOptions = <ROW, THEME extends DThemeTableHeader>(\n\toptions: DTableHeaderOptions<ROW, THEME> | undefined,\n\tcolumns: Array<DTableColumn<ROW>>\n): DTableHeaderOptions<ROW, THEME> => {\n\tif( options != null ) {\n\t\tif( options.columns === undefined ) {\n\t\t\toptions.columns = columns;\n\t\t}\n\t\treturn options as DTableHeaderOptions<ROW, THEME>;\n\t}\n\treturn {\n\t\tcolumns\n\t};\n};\n\nconst toBodyOptions = <ROW, THEME extends DThemeTableBody>(\n\toptions: DTableBodyOptions<ROW, THEME> | undefined,\n\tcolumns: Array<DTableColumn<ROW>>,\n\tdata: ROW[] | undefined\n): DTableBodyOptions<ROW, THEME> => {\n\tif( options != null ) {\n\t\tif( options.data === undefined && data !== undefined ) {\n\t\t\toptions.data = data;\n\t\t}\n\t\tif( options.columns === undefined ) {\n\t\t\toptions.columns = columns;\n\t\t}\n\t\tif( options.height === undefined && options.weight === undefined ) {\n\t\t\toptions.weight = 1;\n\t\t}\n\t\treturn options as DTableBodyOptions<ROW, THEME>;\n\t}\n\treturn {\n\t\tcolumns,\n\t\tdata,\n\t\tweight: 1\n\t};\n};\n\nexport class DTable<\n\tROW,\n\tTHEME extends DThemeTable = DThemeTable,\n\tOPTIONS extends DTableOptions<ROW, THEME> = DTableOptions<ROW, THEME>\n> extends DLayoutVertical<THEME, OPTIONS> {\n\tprotected _header!: DTableHeader<ROW>;\n\tprotected _body!: DTableBody<ROW>;\n\n\tconstructor( options: OPTIONS ) {\n\t\tsuper( options );\n\t}\n\n\tprotected init( options: OPTIONS ) {\n\t\tsuper.init( options );\n\n\t\tconst columns = toColumns( options.columns );\n\n\t\tconst header = this.newHeader( options, columns );\n\t\tthis._header = header;\n\t\tthis.addChild( header );\n\n\t\tconst body = this.newBody( options, columns );\n\t\tthis._body = body;\n\t\tthis.addChild( body );\n\t}\n\n\tprotected newHeader( options: OPTIONS, columns: Array<DTableColumn<ROW>> ): DTableHeader<ROW> {\n\t\treturn new DTableHeader( toHeaderOptions( options.header, columns ) );\n\t}\n\n\tprotected newBody( options: OPTIONS, columns: Array<DTableColumn<ROW>> ): DTableBody<ROW> {\n\t\treturn new DTableBody( toBodyOptions( options.body, columns, options.data ) );\n\t}\n\n\tprotected getType(): string {\n\t\treturn \"DTable\";\n\t}\n\n\tget header(): DTableHeader<ROW> {\n\t\treturn this._header;\n\t}\n\n\tget body(): DTableBody<ROW> {\n\t\treturn this._body;\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DBase, DBaseOptions, DThemeBase } from \"./d-base\";\n\nexport interface DTreeOptions<THEME extends DThemeTree> extends DBaseOptions<THEME> {\n\n}\n\nexport interface DThemeTree extends DThemeBase {\n\n}\n\nexport class DTree<\n\tTHEME extends DThemeTree = DThemeTree,\n\tOPTIONS extends DTreeOptions<THEME> = DTreeOptions<THEME>\n> extends DBase<THEME, OPTIONS> {\n\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Point } from \"pixi.js\";\n\nexport class ESnapperResultScale {\n\tdistance: number;\n\tscale: Point;\n\n\tconstructor() {\n\t\tthis.distance = NaN;\n\t\tthis.scale = new Point();\n\t}\n}\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const utilCeilingIndex = <V>( array: V[], value: V ): number => {\n\tlet i0 = 0;\n\tlet i1 = array.length - 1;\n\n\twhile( i0 <= i1 ) {\n\t\tconst i2 = i0 + ((i1 - i0) >> 1);\n\t\tconst v2 = array[ i2 ];\n\t\tif( value < v2 ) {\n\t\t\ti1 = i2 - 1;\n\t\t} else if( v2 < value ) {\n\t\t\ti0 = i2 + 1;\n\t\t} else {\n\t\t\treturn i2;\n\t\t}\n\t}\n\n\treturn Math.max( i0, i1 );\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Texture } from \"pixi.js\";\nimport { utilToSvgUrl } from \"./util-to-svg-url\";\n\nexport const utilToSvgTexture = ( svg: string, resolution: number ): Texture => {\n\treturn Texture.from( utilToSvgUrl( svg ), {\n\t\tresolution\n\t});\n};\n","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as ui from \"./wcardinal/ui\";\n\nui.loadAll();\n\nconst global = window as any;\nglobal.wcardinal = global.wcardinal || {};\nglobal.wcardinal.ui = ui;\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","DBorderMask","DApplications","instance","INSTANCES","push","instances","length","Error","index","indexOf","target","stage","parent","toStage","layer","application","getLayerBase","getLayerOverlay","update","i","imax","render","utilIsFunction","theme","options","callback","_theme","_callback","background","_color","color","_alpha","alpha","DBaseBackground","state","undefined","result","getBackgroundColor","onChange","getBackgroundAlpha","DCornerMask","utilIsString","toString","call","border","_width","width","_align","align","_mask","mask","DBaseBorder","getBorderColor","getBorderAlpha","getBorderWidth","getBorderAlign","getBorderMask","DBaseInteractive","utilIsNumber","corner","_radius","radius","DBaseCorner","getCornerRadius","getCornerMask","isChanged","DBaseState","outline","_offset","offset","DBaseOutline","getOutlineColor","getOutlineAlpha","getOutlineWidth","getOutlineOffset","getOutlineAlign","getOutlineMask","padding","_left","_top","_right","_bottom","left","top","right","bottom","DBasePadding","getPaddingLeft","getPaddingTop","getPaddingRight","getPaddingBottom","point","cb","scope","_point","DBasePoint","x","y","set","copyFrom","arguments","equals","texture","height","borderSize","cornerMask","_super","Float32Array","Uint16Array","_this","_height","_texture","_borderSize","_cornerMask","_isDirty","_textureId","NaN","_vertexBuffer","getBuffer","_vertices","data","_uvBuffer","_uvs","_indexBuffer","getIndex","_indices","DBaseBackgroundMeshGeometry","_updateID","iv","array","x0","x1","y0","y1","ii","indices","uvs","c","u0","u1","u2","u3","v0","v1","v2","v3","fillVertices","valid","textureId","getTextureId","vertices","Math","min","x2","max","x3","y2","y3","textureUvs","l","r","t","w","h","ctl","TOP_LEFT","ctr","TOP_RIGHT","cbl","BOTTOM_LEFT","cbr","BOTTOM_RIGHT","ia","fillUvsCorner","fillIndices","fillUvs","MeshGeometry","MeshMaterial","DBaseBackgroundMesh","shader","geometry","renderer","_render","Mesh","borderMask","_borderMask","DBaseBorderMeshGeometry","b1","b2","uz","vz","bt","TOP","bb","BOTTOM","bl","LEFT","br","RIGHT","DBaseBorderMesh","base","cornerRadius","getRadius","cornerHeight","getMask","backgroundPlane","_backgroundPlane","getBackgroundTexture","appendRenderable","borderWidth","getWidth","borderPlane","_borderPlane","getBorderTexture","outlineWidth","outlineMask","outlinePlane","_outlinePlane","DBaseOutlineMesh","_lastBackgroundCornerRadius","_lastBorderCornerRadius","_lastBorderWidth","_lastOutlineCornerRadius","_lastOutlineWidth","addReflowable","DBaseReflowable","backgroundColor","getColor","backgroundAlpha","getAlpha","tint","visible","borderColor","borderAlpha","borderAlign","getAlign","borderOffset","outlineColor","outlineAlpha","outlineOffset","getOffset","outlineAlign","outlineOffsetAccumulative","NodeType","DBaseStates","is","HOVERED","DRAGGING","FOCUSED","FOCUSED_IN","ACTIVE","ACTIVE_IN","DISABLED","PRESSED","READ_ONLY","INVALID","SUCCEEDED","FAILED","destination","destinationState","source","when","setState","on","newSourceState","isNotActive","bind","AutoFlag","TOKEN_MAPPING_OPERATOR","+","-","*","/","(",")","TOKEN_MAPPING_LITERAL","%","s","expression","nodes","toToken","toParensesis","toUnary","toArithmetic","node","_node","DScalarExpression","from","j","jmax","operand","splice","type","toUnaryNode","operatorA","operatorB","toArithmeticNode","tokenRegEx","tokens","matched","exec","token","tokenTypeOperator","parsedToken","parseFloat","tokenTypeLiteral","self","current","evaluate","DScalarFunctions","coordinate","isPosition","POSITION","CENTER","PADDING","SIZE","MAXIMIZED","scalarExpression_1","calculate","scalar_1","DLayoutClearType","scalarSet","_base","_scalarSet","_autoFlags","DCoordinateSet","scalar","position","layout","isWidthAuto","toAutoWidth","toChildrenDirty","size","isHeightAuto","toAutoHeight","DAlignHorizontal","DAlignVertical","DAlignWith","DThemes","DEFAULT_THEME_CLASS","INSTANCE","defaultThemeClass","getDefaultThemeClass","UtilKeyboardEvent","e","key","which","ctrlKey","shiftKey","expressionOrShortcut","event_1","arrowIndex","keyExpression","substring","trim","keys","toLowerCase","split","shortcut","shift","toUpperCase","code","charCodeAt","setShortcutKeyAndWhich","alt","ctrl","event","parts","join","handler","toShortcut","document","body","addEventListener","altKey","isActionable","emit","preventDefault","UtilPointerEvent","interactionManager","touches","changedTouches","touch","mapPositionToPoint","clientX","clientY","touchable","isDowned_1","downX_1","downY_1","interactionManagerBound_1","cleanup_1","off","up_1","onUp_1","up","contains","global","dx","abs","dy","threshold","CLICK_DISTANCE_THRESHOLD","isValidDistance_1","down","global_1","global_2","getLayer","plugins","interaction","once","onClick","onLongClick","isDowned_2","downX_2","downY_2","timeoutId_1","interactionManagerBound_2","cleanupTimeout_1","clearTimeout","cleanup_2","up_2","onUp_2","move_1","onMove_1","isValidDistance_2","move","global_3","originalEvent","window","setTimeout","LONG_CLICK_THRESHOLD","isDowned_3","downX_3","downY_3","clickTime_1","timeStamp","DBLCLICK_INTERVAL_THRESHOLD","item","targetOrChild","toTheme","getInstance","get","toShortcuts","shortcuts","transform","_transform","_position","onMove","_scale","scale","onScale","_skew","skew","onSkew","_options","_coordinateSet","_hasDirty","_isChildrenDirty","_shadow","_name","name","getThemeDefault","_befores","_afters","_reflowables","_clearType","clear","getClearType","_padding","toDirtyAndUpdate","toDirty","_background","_border","_outline","_corner","initReflowable","getX","getY","getHeight","_state","NONE","_stateLocal","interactive","getInteractive","SELF","interactiveChildren","CHILDREN","name_1","_title","title","getTitle","_weight","weight","getWeight","_onShadowUpdateBound","shadow","getShadow","over","setHovered","applyTitle","out","onDown","isDirty","hasDirty","toParentHasDirty","toParentChildrenDirty","updateState","blur","_shortcuts","onShortcutBound","onShortcut","cursor","getCursor","init","states","addChild","children","child","DBase","renderable","phase","unshift","list","reflowable","reflowables","onChildrenChange","moveChildren","oldWidth","oldHeight","widthResized","heightResized","resized","onResize","parent_1","getParentOfSize","getLeft","parent_2","getTop","newWidth","newHeight","resizeChildren","getType","parent_3","parent_4","isHovered","view","toHasDirty","onChildrenDirty","isActive","isPressed","isReadOnly","isDisabled","isDragging","isInvalid","isSucceeded","isFailed","isFocused","getFocusController","setFocused","recursively","focused","getFocused","hasState","UNFOCUSABLE","isOn","oldStateLocal","newStateLocal","statesOn","statesOff","stateLocal","newState","mergeState","oldState","onStateChange","stateParent","onParentStateChange","onFocused","onBlured","onChildFocused","newStateParent","oldStateParent","setTheme","refit","onRefit","coordinateSet","hasRefitableWidth","hasRefitableHeight","resize","getRight","getBottom","isRefitable","onReflow","reflow","previous","removeReflowable","removeRenderable","prependRenderable","onParentResize","parentWidth","parentHeight","parentPadding","paddingWidth","paddingHeight","newX","newY","onParentMove","deltas","onDownThis","parent_5","focusController","findFocusableParent","worldAlpha","renderBefore","renderAfter","befores","before","updateTransform","afters","after","worldTransform","bounds","_bounds","work","WORK_CONTAINS_POINT","apply","addPoint","_calculateBounds","containsGlobalPoint","containsLocalPoint","applyInverse","destroy","Point","Container","character","DDynamicTextMeasureResultCharacter","count","characters","DDynamicTextMeasureResult","advance","lineHeight","newLine","_target","UtilCharacterIterator","istart","iend","isLowSurrogate","isVariationSelector","nextBreak","findNextBreak","_instance","DDynamicTextMeasure","text","atlas","clippingWidth","RESULT","start","iterator","font","hasNext","next","a","dots","pop","end","DDynamicTextGeometry","vertexBuffer","uvBuffer","indexBuffer","measure","requiredTextSize","ceil","requiredVertexSize","requiredIndexSize","writeCharacter","writeCharacterEmpty","offsetX","origin","vo","_id","_idApproved","DDynamicTextStyle","FONT","_fontFamily","fontFamily","getFontFamilly","_fontSize","fontSize","getFontSize","_fontStyle","fontStyle","_fontVariant","fontVariant","_fontWeight","fontWeight","_fontIdId","_fontId","_fontIdApproved","_fill","fill","_fillApproved","_clipping","clipping","_onChange","newFontId","Texture","EMPTY","_style","_isGeometryDirty","_atlas","update_","_text","_textApproved","_atlasRevisionUpdated","_clippingWidthDelta","DDynamicText","style","textApproved","fontId","fontIdApproved","fillApproved","approve","atlases","getDynamicFontAtlases","add","remove","geometryWidth","newScale","geometryHeight","getRevisionUpdate","revisionUpdate","_clippingWidth","newClippingWidth","getClippingWidth","DBaseOverflowMaskSimple","beginFill","drawRect","endFill","Graphics","DTextBase","_textValue","value","newTextValue","toTextValue","_textValueComputed","computeTextValue","_textColor","_textAlpha","_textStyle","getFontWeight","getFontStyle","getFontVariant","getTextStyleClipping","toTextStyle","_textAlign","vertical","getTextAlignVertical","horizontal","getTextAlignHorizontal","toTextAlign","_textFormatter","formatter","getTextFormatter","toTextFormatter","_textDynamic","dynamic","isTextDynamic","toTextDynamic","_isOverflowMaskEnabled","isOverflowMaskEnabled","_overflowMask","onTextChange","createOrUpdateText","updateTextValue","textValue","getTextValue","formatted","createText","updateTextPosition","getOrCreateOverflowMask","Text","toRounded","MIDDLE","round","getTextColor","getTextAlpha","newTextValueComputed","updateTextColor","updateText","overflowMask","DImageBase","_image","_imageAlign","image","with","getImageAlignWith","getImageAlignVertical","getImageAlignHorizontal","toImageAlign","_imageMargin","margin","getImageMarginVertial","getImageMarginHorizontal","toImageMargin","_imageTint","toImageTint","_imageBound","Rectangle","_imageBoundPoint","_imageSource","_imageSourceComputed","_onImageChangeBound","onImageChange","imageSource","getImageSource","updateImageTint","getLocalBounds","localTransform","getImageRect","imageWidth","imageHeight","textAlign","imageAlign","marginHorizontal","imageWaMH","setClippingWidthDelta","marginVertical","imageHaMV","imageTint","getImageTintColor","getImageTintAlpha","isTintAware","newImageSourceComputed","computeImageSource","oldImageSourceComputed","oldImage","Sprite","removeChild","newImage","updateImageSource","TEXT","updateTextAndImagePosition","updateImagePositionPadding","BORDER","updateImagePositionBorder","updateImagePositionText","imageSourceComputed","DImage","DListItem","buttonMode","_value","toValue","selection","hasSelection","getSelection","isActivateKey","onSelect","onKeyDown","DMenuItem","getContext","getCloseable","DMenuItemText","initOnClick","initOnOver","initShortcuts","context","_shortcutMargin","getShortcutTextMargin","shortcutTextValue","_shortcutText","shortcutText","updateShortcutText","closeable","DMenuItemCheck","check","setActive","DMenus","creator","CREATORS","CREATOR_DEFAULT","MENU_CREATOR","creators","creatorDefault","sticky","created","newItemOf","items","DisplayObject","newItem","JSON","stringify","newItemsOf","id","strokeWidth","baseTexture","ref","resolution","frame","DynamicAtlasItem","resolutionInverse","updateUvs","DynamicAtlasItemEmpty","canvas","DynamicAtlasItemFontAtlas","drawImage","src","DynamicAtlasItemImage","DynamicAtlasItemText","DynamicAtlasItemWhite","save","fillStyle","fillRect","restore","_canvas","createElement","_baseTexture","BaseTexture","mipmap","MIPMAP_MODES","OFF","_idToDatum","_sortedData","_predefined","empty","white","DynamicAtlas","maxRowHeight","datum","minHeight","applyFrame","sort","ITEM_COMPARATOR","idToDatum","forcibly","cleanup","canvasWidth","calcCanvasWidth","canvasHeight","updateFrames","renderFrames","setRealSize","applyFrames","predefined","reserved","life","DynamicFontAtlasCharacterOrigin","utils","hex2string","metrics","TextMetrics","measureFont","ascent","descent","ASCII_CHARACTERS","fontColor","_context","_font","DynamicFontAtlasFont","_characters","_length","_unrefCount","_revision","_revisionUpdated","scaleMode","SCALE_MODES","NEAREST","add_","DynamicFontAtlas","getAdvance","DynamicFontAtlasCharacter","targets","remove_","measureText","textBaseline","lineWidth","lineCap","lineJoin","miterLimit","strokeStyle","cleanup_","fontHeight","toPowerOf2","sqrt","offsetY","realWidth","realHeight","clearRect","fillText","updateAll","colorToAltas","forEach","destroyAll","_atlases","Map","_resolution","DynamicFontAtlases","colorToAtlas","_gl","_shaderProgram","_vertexPositionAttribute","_textureCoordAttribute","_samplerUniform","_sizeUniform","_vb","_uvb","_onLostBound","_onRestoreBound","_onUnloadBound","DynamicSDFFontGenerator","isContextLost","config","antialias","depth","stencil","premultipliedAlpha","gl","clearColor","makeVertexBuffer","makeUvBuffer","makeShaders","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","getShaderInfoLog","vertexShader","getShader","fragmentShader","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteShader","useProgram","getAttribLocation","getUniformLocation","getError","deleteProgram","textureCanvas","viewport","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","deleteTexture","vb","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","deleteBuffer","uvb","COLOR_BUFFER_BIT","vertexPositionAttribute","enableVertexAttribArray","vertexAttribPointer","FLOAT","textureCoordAttribute","activeTexture","TEXTURE0","uniform1i","uniform2f","drawArrays","TRIANGLE_STRIP","copyCanvas","copyContext","destroyVertexBuffer","destroyUvBuffer","destroyShaders","removeEventListener","WebGLLoseContext","getExtension","loseContext","_generator","DynamicSDFFontAtlas","getGenerator","family","toFontFamily","italic","addChar","generator","characterSize","characterWidth","characterHeight","updateTexture","read","toJson","getAutoFontFamily","GENERATOR","FONT_FAMILY_AUTO","DynamicSDFFontAtlases","begin","addAscii","newAtlas","baseAtlas","getBaseTexture","atlasId","newInstance","Lazy","FormatNodeA","step","date","getHours","FormatNodea","FormatNodeD","String","getDate","FormatNoded","precision","FormatNodee","toExponential","FormatNodePrecision","FormatNodef","toFixed","FormatNodefsi","toAbs","format_","unitInverse","postfix","FormatNodeg","toPrecision","FormatNodeH","FormatNodeh","FormatNodeM","getMonth","FormatNodem","getMinutes","FormatNodemi","getMilliseconds","FormatNodeP","FormatNodep","utilPad","str","strLength","FormatNodePadding","format","FormatNodeParenthesis","FormatNodePlus","FormatNodeRP","FormatNoderp","Y","M","D","H","m","mi","FormatNodesdt","FormatNodeSpace","FormatNodessi","FormatNodeString","FormatNodeY","getFullYear","FormatNodey","FormatNodez","z","getTimezoneOffset","floor","FormatNoderd","FormatNodes","getSeconds","REGEXP","previousIndex","isDateRequired","lastIndex","all","modifier","toModifiedNodeDatetime2","toModifiedNodeDatetime3","toModifiedNodeNumber","Date","NumberFormatterImpl","setTime","NumberFormatters","UtilAlpha","alphaA","alphaB","Image","svg","resources","BaseImageResource","crossOrigin","crossorigin","autoLoad","load","SVGResource","_load","Promise","resolve","onerror","onError","run","onload","extension","utilToSvgUrl","btoa","INSTALLED","UtilAttachAlign","ratio","_ratio","_margin","_frames","_svg","_nextX","_nextY","UtilSvgAtlasBuilder","path","frames","build","built","_built","force","devicePixelRatio","pow","log","LN2","url","scaling","frames_1","DMouseModifier","UtilAttach","clippingHeight","adjust","clippingSize","UtilClickOutside","toLocal","element","range","createRange","selectNodeContents","removeAllRanges","addRange","toClipboardData","clipboardData","stopPropagation","UtilClipboard","clipboard","navigator","writeText","ClipboardEvent","setData","copyUsingWindow","div","setAttribute","textContent","appendChild","getData","execCommand","copyUsingDiv","userAgent","span","innerText","attachShadow","mode","copyUsingSpan","EventEmitter","ds","dt","UtilDragEasingHistory","DAnimationTimings","_startTime","_duration","duration","_durationInverse","_reverse","_onTime","onTime","_onTimeBaseBound","onTimeBase","_onStart","onStart","_onEnd","onEnd","_timing","timing","ELASTIC","DAnimationBase","reverse","stop","now","time","toTime","isReverse","elapsedTime","_histories","_historiesSorted","_historyBegin","_historyEnd","_dx","_dy","_ds","_dt","_animation","onEase","LINEAR","_durationPosition","_durationScale","_onMove","UtilDragEasing","histories","HISTORY_CAPACITY","capacity","oldHistoryEnd","newHistoryEnd","oldHistoryBegin","unsorted","sorted","total","history_1","history_2","history_3","ldt","adt","updateHistoriesSorted","sortedLength","history_4","d0","d1","animation","UtilFileAs","DMouseModifiers","oe","CTRL","ALT","SHIFT","OR","toEasingOptions","toChecker","checker","defaultChecker","match","_modifier","_checker","_interactionManager","_center","_scalingCenter","_time","easing","_easing","onEasingMove","_onDownBound","_onMoveBound","_onEndBound","_down","_move","_up","UtilDrag","center","touchesLength","first","centerX","centerY","squareDistance","calcCenterAndScale","setDragging","oldScale","oldTime","newTime","EPSILON","scalingCenter","UtilExtractor","skipUpdateTransform","RenderTexture","matrix","Matrix","renderTexture","pixels","Uint8Array","readPixels","ignorePremutipliedAlpha","canvasRenderTarget","CanvasRenderTarget","imageData","getImageData","extract","Extract","arrayPostDivide","putImageData","scaledWidth","scaledHeight","scaledImageData","quality","toDataURL","UtilFileDownloader","filename","href","display","click","open","location","contents","blob","Blob","msSaveBlob","downloadUrl","URL","createObjectURL","UtilExtract","toResolution","toSkipUpdateTransform","toTexture","toRenderer","toPixels","premultiplied","ignore","toIgnorePremultipliedAlpha","toScale","toCanvas","toBase64","base64","DMenuItemLinkMenuItemId","DMenuItemLinkTarget","as","facade","_input","_as","_facade","UtilFileOpener","input","getOrCreateInput","onCancel","input_1","onInputChange","stopImmediatePropagation","files","file","fileReader","FileReader","onOpen","onabort","onAboart","readAsText","DATA_URL","readAsDataURL","BINARY_STRING","readAsBinaryString","ARRAY_BUTTER","readAsArrayBuffer","UtilHsv","g","v","utilIndexOf","i0","i1","i2","utilIsArray","isArray","utilIsNaN","UtilName","mapping","_mapping","_layer","_application","last","UtilOverlay","UtilPromise","UtilRgb","trimmed","Number","colorA","colorB","ar","ag","ab","bg","w1","w0","amount","blend","UtilRgba","_backgroundCache","_backgroundAttribute","_borderCache","_borderAttribute","_onUpdate","UtilTexturePlane","tl","attr","realRadius","realSize","toCornerBr","toCornerTl","toSvg","make","cache","newBackground","maskToTexture","newBorder","UtilTexture","onLoad","utilToString","_current","_lastUpdate","_updateId","UtilTransition","updateId","lastUpdate","remaining","hide","show","_names","documentMode","UtilWheelEvent","useCapture","names","name_2","_lineHeight","getLineHeight","_pageHeight","deltaX","deltaY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","delta","_timestamp","_lowest","shouldAdjust","lowest","deltaMode","getPageHeight","DLayoutDirection","_link","link","_menuOptions","menu","DMenuItemLink","NEW_WINDOW","EXTENSION_0","_menu","getMenuOptions","toMenu","onMenuSelect","newMenu","OPEN_LINK_IN_NEW_WINDOW","COPY_LINK_ADDRESS","copy","then","resolved","isHidden","inNewWindow","checked","a_1","rel","InteractionEvent","metaKey","button","DMenuAlign","DMenuItemMenu","toggle","initHover","close","DListItemSeparatorReflowable","middle","lineStyle","moveTo","lineTo","DListItemSeparator","DMenuItemSeparator","DLayoutSpace","DMenuItemSpace","loadMenuItem","addItemCreator","isCompatible","toSubMenuOptions","setItemCreatorDefault","EShapeType","isDBaseVisible","toMultiplicity","row","column","getMultiplicity","toMargin","themeMargin","getMargin","toDirection","direction","getDirection","toCornerAdjust","getCornerAdjust","_direction","_cornerAdjust","_multiplicity","DLayout","multiplicity","clearType","BEFORE","AFTER","baseSize","VERTICAL","marginNext","paddingTop","paddingBottom","paddingLeft","paddingRight","weightTotal","getWeightTotal","cornerAdjustWork","requiredSize","CORNER_ADJUST_WORK","irow","weightTotalInverse","spaceLeft","getSpaceLeft","k","icolumn1","irow1","icolumn0","findRowIndexPrevious","hasClearTypeAfter","icolumn2","findRowIndexNext","hasClearTypeBefore","ncolumn","countColumn","toCornerMaskColumn","icolumn","irow0","findColumnIndexPrevious","irow2","findColumnIndexNext","nrow","countRow","toCornerMaskRow","hasClearType","n","ALL","DLayoutVertical","DMenuItemExpandableBody","DMenuItemExpandableHeader","DMenuItemExpandables","DMenuItemExpandable","header","toHeader","_header","toBody","_body","newItems","onActivated","onDeactivated","newHeader","newBody","DMenuItemExpandableItemCheck","DMenuItemExpandableItemLink","DMenuItemExpandableItemSeparator","DMenuItemExpandableItemSpace","DMenuItemExpandableItemText","loadMenuItemExpandable","DMenuSidedItemCheck","DMenuSidedItemLink","DMenuSidedItemMenu","DMenuSidedItemSeparator","DMenuSidedItemSpace","DMenuSidedItemText","DMenuSideds","loadMenuSidedItem","DMenuSidedItemExpandables","DMenuSidedItemExpandable","DMenuSidedItemExpandableItemCheck","DMenuSidedItemExpandableItemLink","DMenuItemExpandableItemMenu","DMenuSidedItemExpandableItemMenu","DMenuSidedItemExpandableItemSeparator","DMenuSidedItemExpandableItemSpace","DMenuSidedItemExpandableItemText","loadMenuSidedItemExpandable","loadMenuItemAll","EShapeDeserializers","EShapePointsStyle","EShapeUploadeds","EShapeBarPosition","EShapePointsStyleUploadeds","nonExpandingWidth","NON_EXPANDING_WIDTH","nonShrinkingWidth","NON_SHRINKING_WIDTH","nonScalingDotAndDash","NON_SCALING_DOT_AND_DASH","NON_SOLID_MASK","DOTTED","DOTTED_DENSELY","DOTTED_LOOSELY","DASHED","DASHED_DENSELY","DASHED_LOOSELY","EShapeCorner","EShapeStrokeSide","_parent","_values","_segments","_size","_updatedSize","_updatedParentSizeX","_updatedParentSizeY","_updatedPosition","EShapeBarPoints","sizeX","sizeY","parentSize","parentSizeX","parentSizeY","psxh","psyh","computedSize","getComputedSize","values","segments","newValues","newSegments","newStyle","newPosition","newSize","updateUploaded","manager","resourceId","resource","parsed","parse","EShapeCopyPart","EShapeRuntimeReset","EShapeRuntimeState","EShapeDefaults","EShapeAction","sources","destinations","isEquals","indexA","indexB","tmp","serialize","EShapeTagValueOrder","EShapeTagValueRangeType","shape","rotation","actions","toObject","stroke","reset","written","effect","EShapeRuntime","disabled","CLICKED","CHANGED","hovered","DOWN","UP","onPointerDown","onPointerUp","onPointerClick","tag","isEffectTimeUp","disallowUploadedUpdate","onUpdate","allowUploadedUpdate","PERSISTENT","executeActions","resetUnwrittenProperties","execute","POSITION_X","POSITION_Y","VISIBILITY","COLOR_FILL","COLOR_STROKE","COLOR_TEXT","COLOR_TEXT_OUTLINE","HEIGHT","WIDTH","ROTATION","CURSOR","internalTransform","EShapeTransformImpl","Transform","onTransformChange","updateSkew","_currentLocalID","_localID","_parentID","_worldID","parentTransform","oldLocalId","oldWorldId","newLocalId","newWorldId","copyTo","prepend","EShapeGradients","gradient","points","parseGradient","serialized","serializeGradient","stops","toCode","radian","PI","cos","sin","newTransform","_onTransformChangeLock","_isOnTransformChanged","action","_visible","_uploadedUpdateLock","_isUploadedUpdated","_isUploadedUpdatedRecursively","_boundsTransformId","_boundsInternalTransformId","_boundsLocalTransformId","selected","reference","EShapeBase","onTransformChange_","updateUploadedRecursively","onChildTransformChange","invokeOnTransformChange","uploaded","root","at","detach","IDENTITY","childrenSerialized","toGradientId","pivot","shortcutId","titleId","serializeImage","serializeChildren","unfocusable","sx","sy","containsAbs","containsText","containsChildren","textWorld","world","tx","ty","th","tv","childResult","shadowed","containsAbsBBox","ax","ay","skipUpdate","worldId","getWorldId","getBounds_","boundsInternal","_boundsInternal","currentLocalId","getLocalIdCurrent","boundsLocal","_boundsLocal","px","py","getBoundsSize","xmin","ymin","xmax","ymax","getState","runtime","unforcusable","onPointerDblClick","onKeyUp","part","TRANSFORM","sourceTransform","STYLE","ACTION","addAll","POINTS","sourcePoints","clone","STATE","enable","_enable","EShapeFillImpl","stringified","fills","deserialized","side","_side","EShapeStrokeImpl","strokes","EShapeTextWeight","EShapeTextStyle","EShapeTextAlignHorizontal","EShapeTextAlignVertical","EShapeTextDirection","_type","_from","_to","EShapeTagValueRangeImpl","to","FROM","TO","FROM_TO","copy_","ranges","INDEX_COMPARATOR","initial","_capacity","_order","ASCENDING","EShapeTagValueImpl","newValue","order","normalize","times","_times","parent_6","newTimes","parent_7","parent_8","parent_9","parent_10","slice","parent_11","parent_12","idSerialized","initialSerialized","formatSerialized","rangeSerialized","tagValues","deserialize","EShapeTagImpl","inherited","RANGE_DUMMY","nvalue","EMPTY_ARRAY","tags","EShapeActionValueBlinkType","_horizontal","_vertical","EShapeTextAlignImpl","aligns","EShapeTextOffsetImpl","margins","EShapeTextOutlineImpl","textOutlines","_family","NORMAL","spacing","LEFT_TO_RIGHT","EShapeTextImpl","isChangedDirty","isChangedUploaded","alignSerialized","offsetSerialized","outlineSerialized","spacingSerialized","paddingSerialized","texts","newFill","newStroke","RADIUS","newText","EShapePrimitive","ObservablePoint","onSizeChange","SIZE_X","SIZE_Y","FILL_COLOR","FILL_ALPHA","STROKE_COLOR","STROKE_ALPHA","STROKE_WIDTH","STROKE_ALIGN","STROKE_SIDE","TEXT_VALUE","TEXT_FAMILY","TEXT_SIZE","imageSrc","EShapeLineBase","container","getPixelScale","getStrokeWidthScale","swh","getStrokeWidthScaled","pointCount","pointValues","pointSegments","p0x","p0y","p1x","p1y","calcHitPosition","CLOSED","squaredDistance","d0x","d0y","d1x","d1y","t0","BAR","EShapeBar","buffer","voffset","ioffset","vcount","icount","antialiasWeight","transformLocalId","vertexOffset","vertexCount","indexOffset","indexCount","colorFill","alphaFill","colorStroke","alphaStroke","worldSizeXHalf","worldSizeYHalf","worldSizeZHalf","worldSizeWHalf","worldSizeR","strokeAlign","strokeSide","textureTransformId","EShapeUploadedBase","getLocalId","WHITE","textureAny","colors","rgba","premultiplyTintToRgba","workColor","isEnabled","colorFillBuffer","fillColor","colorFills","colorStrokeBuffer","colorStrokes","updateColorFill","updateColorStroke","dpc0","pc0","pc1","swc","pc","swx","swy","px0","py0","px1","py1","steps","antialiases","clippings","cx","cy","dx01","dy01","builder","EShapeTextUploadeds","tvcount","ticount","textSize","textFamily","textTexture","textTextureTransformId","textColor","textAlpha","textWeight","textStyle","textAlignHorizontal","textAlignVertical","textOffsetHorizontal","textOffsetVertical","textOutlineWidth","textOutlineColor","textOutlineAlpha","textSpacingHorizontal","textSpacingVertical","textDirection","textPaddingHorizontal","textPaddingVertical","textClipping","textVertexCount","textIndexCount","EShapeTextUploaded","getTextCount","workCount","updateColorFillAndStroke","halign","valign","hoffset","hpadding","vpadding","hnx","hny","vnx","vny","OUTSIDE_TOP","OUTSIDE_BOTTOM","OUTSIDE_LEFT","OUTSIDE_RIGHT","defx","defy","li","textAtlas","toTextureTransformId","isCharChanged","isCharSizeChanged","isCharStyleChanged","isCharAlignChanged","isCharOffsetChanged","isCharSpacingChanged","isCharDirectionChanged","isClippingChanged","isTextureChanged","hl","calcLength","vl","heightChar","textAtlasCharacters","toAdvance","tx0","ty0","lineWidthMaximum","getTextBBox","TOP_TO_BOTTOM","rotateAlignVerticalRight","rotateAlignHorizontalRight","BOTTOM_TO_TOP","rotateAlignVerticalLeft","rotateAlignHorizontalLeft","dwidth","toTextureUvs","uvx0","uvx1","uvx3","uvy0","uvy1","uvy3","duvx01","duvy01","duvx03","duvy03","lhx","lhy","snx","sny","oyx","oyy","offsetItalic","bx0","by0","bx3","by3","cx0","cy0","cx3","cy3","lineCount","textValueLength","dotsAdvance","adjustTextAlignment","dataOffsetX","dataWidth","dx0","dy0","dx1","dy1","dux0","duy0","dux1","duy1","dvx0","dvy0","dvx1","dvy1","vertexIndex","textCount","nx","ny","moveText","moveTextHalf","moveTextFull","textOutline","stepBuffer","antialiasBuffer","updateTextVertex","updateTextColorFill","updateTextColorStroke","updateTextStep","clippingBuffer","buildUnit","textBaseTexture","pointsId","pointsStyle","EShapeBarUploaded","ic","initText","isSizeChanged","isStrokeWidthChanged","toTransformLocalId","isTransformChanged","isPointsIdChanged","isPointsStyleChanged","updateLineVertexStepAndColorFill","updateColor","updateBarUv","pointsSize","scaleInvariant","toScaleInvariant","p2x","p2y","p3x","p3y","toDash","dash0","dash1","iuv","EShapeBarUploadeds","tcount","vertexCapacity","indexCapacity","EShapeActionBases","EShapeActionRuntime","def","defLiteral","Function","parameter1","parameter2","conditionDefault","condition","toExpression","interval","EShapeActionRuntimeBlink","dinterval","elapsed","toOff","toOn","EShapeActionRuntimeConditional","COLOR","EShapeActionRuntimeBlinkBrighten","toBaseFill","brighten","toBaseStroke","toBaseText","toBaseTextOutline","EShapeActionRuntimeBlinkColorFill","EShapeActionRuntimeBlinkColorStroke","EShapeActionRuntimeBlinkDarken","darken","COLOR_FILL_AND_STROKE","EShapeActionRuntimeBlinkOpacity","EShapeActionRuntimeBlinkVisibility","EShapeActionValueType","EShapeActionValueBase","toLabel","subtype","EShapeActionValueSubtyped","EShapeActionValueChangeColorType","EShapeActionValueChangeColorTarget","EShapeActionValues","BLINK","EShapeActionValueBlink","BRIGHTEN","DARKEN","OPACITY","conditionId","toResource","EShapeActionValueChangeTextType","blendDefault","ALPHA","EShapeActionRuntimeChangeColor","baseFill","baseStroke","baseText","baseOutline","EShapeActionRuntimeChangeColorAll","setAll","EShapeActionRuntimeChangeColorFill","EShapeActionRuntimeChangeColorFillAndStroke","sets","EShapeActionRuntimeChangeColorStroke","EShapeActionRuntimeChangeColorText","EShapeActionRuntimeChangeColorTextOutline","CHANGE_COLOR","EShapeActionValueChangeColor","FILL","STROKE","FILL_AND_STROKE","TEXT_OUTLINE","blendId","brightnessDefault","brightness","EShapeActionRuntimeChangeColorBrightness","toColorAdjusted","EShapeActionRuntimeChangeColorBrightnessAll","EShapeActionRuntimeChangeColorBrightnessFill","EShapeActionRuntimeChangeColorBrightnessFillAndStroke","EShapeActionRuntimeChangeColorBrightnessStroke","EShapeActionRuntimeChangeColorBrightnessText","EShapeActionRuntimeChangeColorBrightnessTextOutline","EShapeActionValueChangeColorBrightness","BRIGHTNESS","brightnessId","colorDefault","alphaDefault","EShapeActionRuntimeChangeColorCode","EShapeActionRuntimeChangeColorCodeAll","EShapeActionRuntimeChangeColorCodeFill","EShapeActionRuntimeChangeColorCodeFillAndStroke","EShapeActionRuntimeChangeColorCodeStroke","EShapeActionRuntimeChangeColorCodeText","EShapeActionRuntimeChangeColorCodeTextOutline","EShapeActionValueChangeColorCode","CODE","colorId","alphaId","nameDefault","EShapeActionRuntimeChangeCursor","CHANGE_CURSOR","EShapeActionValueChangeCursor","nameId","numberDefault","number","EShapeActionRuntimeChangeTextNumber","textDefault","EShapeActionRuntimeChangeTextText","EShapeActionValueMiscType","CHANGE_TEXT","EShapeActionValueChangeText","NUMBER","valueId","EShapeActionRuntimeEmitEvent","EMIT_EVENT","EShapeActionValueEmitEvent","rect","_onInputKeyDownBound","onInputKeyDown","_onInputBlurBound","onInputBlur","_updateInputBound","updateInput","_onInputChangeBound","_onInputInputBound","onInputInput","_updateInputBoundRenderer","EShapeActionRuntimeMiscInputData","getRootElement","createInput","getInputType","getInputStyle","readonly","removeAttribute","paddingHorizontal","getInputStylePosition","getInputStyleMargin","getInputStyleText","getInputStyleBackground","getInputStyleBorder","getInputStylePadding","getInputStyleOutline","isFocusKey","getFocusDirection","focusable","findFocusable","focus","isOkKey","HTMLInputElement","onInput","newShape","oldShape","getInput","initInput","updateInputBound","select","EShapeActionRuntimeMiscInput","data_1","isShown","_","EShapeActionValueOpenType","MISC","EShapeActionValueMisc","INPUT","targetDefault","EShapeActionRuntimeOpenFlow","opener","EShapeActionRuntimeOpen","EShapeActionRuntimeOpenPage","EShapeActionRuntimeOpenPageInplace","EShapeActionValueShowHideType","OPEN","EShapeActionValueOpen","FLOW","PAGE","PAGE_INPLACE","targetId","EShapeActionValueTransformMoveType","EShapeActionValueTransformType","visibility","SHOW","EShapeActionRuntimeShowHide","SHOW_HIDE","EShapeActionValueShowHide","amountDefault","EShapeActionRuntimeTransformMoveAbsoluteX","EShapeActionRuntimeTransformMove","EShapeActionRuntimeTransformMoveAbsoluteY","EShapeActionRuntimeTransformMoveForwardOrBackward","writtenPositionX","writtenPositionY","oldPositionX","oldPositionY","EShapeActionRuntimeTransformMoveLeftOrRight","EShapeActionRuntimeTransformMoveRelativeX","EShapeActionRuntimeTransformMoveRelativeY","opetype","EShapeActionValueOpetyped","EShapeActionValueTransformResizeType","MOVE","EShapeActionValueTransformMove","ABSOLUTE_X","ABSOLUTE_Y","FORWARD_OR_BACKWARD","LEFT_OR_RIGHT","RELATIVE_X","RELATIVE_Y","amountId","EShapeSizes","centerMode","isPerfect","hsize","toNormalized","EShapeActionValueTransformRotateType","sizeRelativeDefault","sizeAbsoluteDefault","RELATIVE_SIZE","ABSOLUTE_SIZE","RELATIVE_HEIGHT","ABSOLUTE_HEIGHT","RELATIVE_WIDTH","ABSOLUTE_WIDTH","EShapeActionRuntimeTransformResize","dsx","dsy","originX","originY","EShapeActionRuntimeTransformResizeHeightAbsolute","sizeAbsolute","oldSizeY","adjustPosition","EShapeActionRuntimeTransformResizeHeightRelative","sizeRelative","EShapeActionRuntimeTransformResizeSizeAbsolute","writtenWidth","writtenHeight","oldSizeX","EShapeActionRuntimeTransformResizeSizeRelative","EShapeActionRuntimeTransformResizeWidthAbsolute","EShapeActionRuntimeTransformResizeWidthRelative","RESIZE","EShapeActionValueTransformResize","EShapeActionRuntimeTransformRotate","oldRotation","newRotation","EShapeActionRuntimeTransformRotateAbsolute","EShapeActionRuntimeTransformRotateRelative","EShapeCapability","ROTATE","EShapeActionValueTransformRotate","ABSOLUTE","RELATIVE","EShapeActionValueDeserializer","toSerialized","COLOR_AND_ALPHA","EShapeImageElements","dataUrl","imageElements","cachedImageElement","HTMLImageElement","reject","imageElement","extensions","EShapeDeserializer","shapeDeserializer","childrenPromise","childrenOrPromises","childSerialized","childOrPromise","toShape","serializedActions","gradientId","deserializeGradient","imagePromise","imageId","toImageElement","serializeds","EShapeResourceManagerDeserialization","shapes","EShapeBars","loadShapeBar","EShapeCircleUploaded","updateType0Vertex","updateType0Step","updateType0Uv","isStrokeChanged","x4","y4","x7","y7","workStep","calcStep","updateStep","EShapeCircleUploadeds","CIRCLE","EShapeCircle","ay2","ax2","wx","wy","wx2","wy2","EShapeCircles","loadShapeCircle","EShapeGroupUploaded","EShapeGroupUploadeds","EShapeGroupFillEditor","EShapeGroupPoints","toPoints","internalTransformParentInverse","EShapeTransforms","editor","EShapeEditor","invert","identity","disallowOnTransformChange","allowOnTransformChange","keepSize","newLocalTransform","append","applyLocal","bx","by","rx","atan2","ry","shapeBase","EShapeGroupSizeLayout","baseX","baseY","pivotX","pivotY","childBase","WORK_TRANSFORM","translate","_layouts","EShapeGroupSizeEditor","ox","oy","calcRect","_workRectForFit","layouts","workPoint","_workPoint","workRect","_workRectForCalcRect","getBoundsLocal","enlarge","onChange_","newLayout","EShapeGroupSizeViewer","EShapeGroupStrokeEditor","EShapeGroupTextAlignEditor","EShapeGroupTextOffsetEditor","EShapeGroupTextOutlineEditor","EShapeGroupTextPaddingEditor","EShapeGroupTextSpacingEditor","EShapeGroupTextEditor","GROUP","newGroupSize","newGroupFill","newGroupStroke","newGroupText","newGroupPoints","EShapeGroup","IS_EDIT_MODE","result_1","fit","_points","EShapeGroups","loadShapeGroup","EShapeGroupSizeShadowed","GROUP_SHADOWED","EShapeGroupShadowed","EShapeGroupShadoweds","loadShapeGroupShadowed","RECTANGLE","EShapeRectangle","TOP_OR_LEFT","BOTTOM_OR_LEFT","TOP_OR_RIGHT","BOTTOM_OR_RIGHT","IMAGE","EShapeImage","EShapeImages","EShapeRectangleUploaded","x10","y10","swt","pt0","swr","pr0","swb","pb0","swl","pl0","pm0","x02","y02","EShapeRectangleUploadeds","loadShapeImage","EShapeLabelUploaded","updateLabelVertex","updateLabelUv","EShapeLabelUploadeds","LABEL","EShapeLabel","EShapeLabels","loadShapeLabel","pointsClosed","pointId","EShapeLineUploaded","io","isPointChanged","updateLineUv","closed","lprev","lnext","llop","llo","lmax","pprevx","pprevy","pnextx","pnexty","pseg","psegnext","icfprev","loffset","pfirstx","pfirsty","psegfirst","plastx","plasty","pseglast","psecondx","psecondy","psegsecond","nextIndex","pnextxn","pnextyn","loffsetprev","dx32","dy32","closed_1","icf","lengthInverse","EShapeLineUploadeds","minX","maxX","minY","maxY","pointsLength","_valuesBase","_valuesBaseLength","_sizeBase","EShapeLinePoints","ssx","ssy","sizeBase","hasSizeBaseX","hasSizeBaseY","scaleX","scaleY","valuesBase","fitToParentSize","isUpdated","valuesBaseLength","newValuesLength","iupdate","newSegmentsLength","oldStyle","lineOrPoints","LINE","EShapeLine","EShapeLines","loadShapeLine","EShapeNullUploaded","EShapeNullUploadeds","NULL","EShapeNull","EShapeNulls","loadShapeNull","EShapeCapabilities","mappings","PRIMITIVE","capability","EShapeRectangles","loadShapeRectangle","EShapeRectangleRoundedUploaded","updateType1Vertex","updateType1Clipping","updateType1Step","updateType1Uv","dxh","dyh","dxhr","dyhr","x11","y11","dxv","dyv","dxvr","dyvr","x5","y5","x6","y6","x9","y9","x8","y8","x12","y12","x20","y20","x15","y15","x13","y13","x14","y14","x17","y17","x16","y16","x18","y18","x19","y19","x22","y22","x21","y21","rxc","ryc","swtc","ptc0","swrc","prc0","swbc","pbc0","swlc","plc0","plr0","ptb0","ruvx","ruvy","EShapeRectangleRoundedUploadeds","RECTANGLE_ROUNDED","EShapeRectangleRounded","by1","bx1","containsAbs_","wr","hasLeftSide","hasTopSide","hasBottomSide","hasRightSide","EShapeRectangleRoundeds","loadShapeRectangleRounded","BORDER_RADIUS","EShapeTriangleUploaded","updateTriangleVertex","updateTriangleStep","updateTriangleUv","sw","xb","yb","EShapeTriangleUploadeds","TRIANGLE","EShapeTriangle","ay1","aw","EShapeTriangles","loadShapeTriangle","EShapeTriangleRoundedUploaded","updateTriangleRoundedVertex","updateTriangleRoundedClipping","updateTriangleRoundedStep","updateTriangleRoundedUv","isRadiusChanged","sz","rz","dx14","dy14","dx47r","dy47r","dx71","dy71","wsr","pr1","updateStepIf","EShapeTriangleRoundedUploadeds","TRIANGLE_ROUNDED","EShapeTriangleRounded","r12","r13","xl","yl","ni","nlx","nly","nrx","nry","det","deti","xc","yc","containsCorner_","az","c0","c1","c2","containsCorner","EShapeTriangleRoundeds","loadShapeTriangleRounded","loadShapeAll","DThemeWhiteAtlas","_instances","DThemeWhite","klass","_classes","themeClass","loadThemeWhite","setDefaultThemeClass","_offsetX","_offsetY","onTextureUpdate","DShadowImpl","leftWidth","topHeight","rightWidth","bottomHeight","NineSlicePlane","DThemeWhiteConstants","DThemeWhiteFont","newShadow","opacity","stdDeviation","DThemeWhiteBase","getBackground","HIGHLIGHT_COLOR","getBorder","shadow_weak","loadThemeWhiteBase","DThemeWhiteBoard","BACKGROUND_COLOR","BOTH","loadThemeWhiteBoard","DThemeWhiteTextBase","DThemeWhiteImageBase","DThemeWhiteButtonBase","COLOR_PRESSED","COLOR_HOVERED","loadThemeWhiteButton","DThemeWhiteButton","DThemeWhiteButtonAmbient","WEAK_HIGHLIGHT_COLOR","WEAK_HIGHLIGHT_ALPHA","loadThemeWhiteButtonAmbient","DThemeWhiteButtonCheck","IMAGE_TINT_COLOR_FOCUSED","button_check_mark_on","button_check_mark_off","loadThemeWhiteButtonCheck","DThemeWhiteButtonCheckRight","loadThemeWhiteButtonCheckRight","DDialogCloseOn","colorAndAlpha","DThemeWhiteButtonColor","button_color_sample","_shiftX","_shiftY","_onPrerenderBound","onPrerender","_onPostrenderBound","onPostrender","DAnimationFadeIn","_storedTime","removeEventListeners","_storedTarget","addEventListeners","disallowUpdate","allowUpdate","storedTime","unsafe","_storedX","_storedY","_storedAlpha","DDialog","FOCUS_ROOT","_focusable","_isOpened","onAnimationEnd","_closeOn","closeOn","CLICK_OUTSIDE","onCloseOn","_overlay","firstFocusable","pick","onClose","ESC","isCancelKey","DThemeWhiteDialog","DThemeWhiteDialogCommand","DThemeWhiteDialogColor","makeCheckerboard","iheight","DThemeWhitePickerColor","picker_color_main","picker_color_pointer","picker_color_base","picker_color_base_pointer","getMainPointerAlpha","getBaseHeight","getBaseMargin","picker_color_alpha","picker_color_alpha_checkerboard","getBasePointerTexture","getBasePointerColor","getRecentColorWidth","getRecentMargin","picker_color_recent_checkerboard","picker_color_recent_null","getSampleWidth","picker_color_sample_checkerboard","picker_color_sample_null","loadThemeWhitePickerColor","loadThemeWhiteDialogColor","loadThemeWhiteButtonColor","_selected","DPickerColorGradientPoint","POINT_SORTER","_onChangeBound","second","_workColor","DPickerColorGradientData","isSelectionChanged","rgb0","hex2rgb","r0","g0","b0","rgb1","r1","g1","rgb","rgb2hex","oldDirection","oldSelected","pointsCopy","pointLike","DPickerDatetimeMask","DThemeWhiteButtonColorGradient","button_color_gradient_sample","DThemeWhiteDialogColorGradient","DThemeWhitePickerColorGradient","picker_color_anchor","picker_color_anchor_outlined","picker_color_anchor_outline","picker_color_direction","loadThemeWhitePickerColorGradient","loadThemeWhiteDialogColorGradient","loadThemeWhiteButtonColorGradient","DThemeWhiteButtonDanger","loadThemeWhiteButtonDanger","DPickerDates","DThemeWhiteButtonDate","DThemeWhiteDialogDate","DThemeWhitePickerTime","HOURS","MINUTES","MONTH_LABELS","DAY_LABELS","defaultLabelFormatter","defaultDateDecorator","DThemeWhitePickerDatetime","DATE","DThemeWhitePickerDate","DThemeWhitePickerDatetimeButtonBack","picker_date_back","DThemeWhitePickerDatetimeButtonDate","DThemeWhitePickerDatetimeButtonNext","picker_date_next","DThemeWhiteText","DThemeWhitePickerDatetimeLabel","DThemeWhitePickerDatetimeLabelDate","DThemeWhitePickerDatetimeSpace","loadThemeWhitePickerTime","loadThemeWhitePickerDatetime","loadThemeWhitePickerDate","loadThemeWhiteDialogDate","loadThemeWhiteButtonDate","DPickerTimes","SECONDS","DPickerDatetimes","hms","caller","getDatetimeMask","DThemeWhiteButtonDatetime","DThemeWhiteDialogDatetime","loadThemeWhiteDialogDatetime","loadThemeWhiteButtonDatetime","loadThemeWhiteButtonFile","DThemeWhiteButtonFile","DThemeWhiteButtonPrimary","loadThemeWhiteButtonPrimary","DDragMode","DThemeWhiteButtonRadio","button_radio_mark_on","button_radio_mark_off","loadThemeWhiteButtonRadio","DThemeWhiteButtonRadioRight","loadThemeWhiteButtonRadioRight","loadThemeWhiteButtonSecondary","DThemeWhiteButtonSecondary","DThemeWhiteButtonTime","DThemeWhiteDialogTime","loadThemeWhiteDialogTime","loadThemeWhiteButtonTime","loadThemeWhiteButtonAll","DThemeWhiteCanvas","DChartAxisPosition","DChartAxisTickPosition","DThemeWhiteCanvasContainer","NOT_NONE","ON","loadThemeWhiteCanvasContainer","EShapeGroupFillViewer","EShapeGroupStrokeViewer","EShapeGroupTextAlignViewer","EShapeGroupTextOffsetViewer","EShapeGroupTextOutlineViewer","EShapeGroupTextPaddingViewer","EShapeGroupTextSpacingViewer","EShapeGroupTextViewer","units","EShapeBufferUnitBuilder","unit","EShapeBufferUnit","ntriangles","nindices","nvertices","Buffer","isIndicesShort","Uint32Array","EShapeBufferCount","Geometry","addIndex","addAttribute","EShapeBuffer","unitCount","DRAW_MODES","TRIANGLES","unit0","unit1","ioffset0","ioffset1","uniforms","sampler","draw","vindex","iindex","getVertexOffset","getIndexOffset","getVertexCount","getIndexCount","creater","DUMMY_SHAPES","EShapeRendererIteratorDatum","_index","_datum","_data","EShapeRendererIterator","datumIndex","newDatum","_shader","Shader","_iterator","_bufferSize","_bufferSizeMax","getBufferSizeMax","EShapeRenderer","webGLVersion","uint32ElementIndex","fontAtlases","defaultTexture","textureItem","newTextureItem","updateAtlas","updateAtlases","fontAtlas","updateFontAtlas","updateFontAtlases","buffers","getBuffers","getAntialiasWeight","getAtlas","getFontAtlases","getDefaultTexture","repack","updateBuffers","pixelScale","translationMatrix","toArray","setBlendMode","correctBlendMode","BLEND_MODES","bufferSize","bufferSizeMax","ib","ibmax","increaseBufferSize","jb","getBufferSize","ObjectRenderer","_childrenId","_childrenIdRendered","_fontAtlases","_pixelScale","_pixelScaleId","_work","_buffers","EShapeContainer","childrenId","childrenIdRendered","shapeRenderer","SHAPE_RENDERER","batch","setObjectRenderer","render_","worldID","childLocal","containsBBox","EShapeSearch","toDepth","isParent","shapeParent","findChildById","findChildByType","matcher","findChild","findChildrenByType","findChildren","EShapeDeleter","generateListOfDetachedShapes","COMPARATOR_INDEX","resourceToIndex","EShapeResourceManagerSerialization","EShapeRuntimes","DThemeWhiteChartAxisBase","OUTSIDE","DThemeWhiteChartAxisY","DThemeWhiteChartCoordinateLinear","DThemeWhiteDiagramBase","DThemeWhiteDiagramCanvasBase","loadThemeWhiteDiagram","DThemeWhiteDiagram","DThemeWhiteDiagramCanvas","DThemeWhiteDiagramEditor","EThemeWhiteShapeActionValue","toOpetypedLabel","toSubtypedLabel","toTypedLabel","toTypeLabel","toConditionLabel","typeLabel","toShowHideTypeLabel","toBlinkTypeLabel","toChangeColorTypeLabel","toMiscTypeLabel","subtypeLabel","toTransformTypeLabel","toTransformRotateTypeLabel","toTransformMoveTypeLabel","toTransformResizeTypeLabel","HIDE","loadThemeWhiteShapeActionValue","loadThemeWhiteDiagramEditor","DThemeWhiteDiagramCanvasEditor","loadThemeWhiteDialog","loadThemeWhiteDialogCommand","DThemeWhiteDialogConfirm","DThemeWhiteDialogConfirmMessage","DThemeWhiteImage","loadThemeWhiteDialogConfirm","DThemeWhiteDialogConfirmDelete","loadThemeWhiteDialogConfirmDelete","DThemeWhiteDialogConfirmDiscard","loadThemeWhiteDialogConfirmDiscard","DThemeWhiteDialogInputText","loadThemeWhiteDialogInputText","DThemeWhiteDialogMessage","loadThemeWhiteDialogMessage","message","DThemeWhiteDialogProcessing","DThemeWhiteDialogProcessingMessage","loadThemeWhiteDialogProcessing","DThemeWhiteDialogSaveAs","loadThemeWhiteDialogSaveAs","DThemeWhiteDialogSelect","DThemeWhitePane","TOUCH","DThemeWhiteList","DThemeWhiteDialogSelectList","DThemeWhiteListItem","HIGHLIGHT_ALPHA","DThemeWhiteDialogSelectListItem","loadThemeWhiteDialogSelect","loadThemeWhiteDialogAll","DThemeWhiteDropdown","dropdown_mark","DThemeWhiteLayout","DThemeWhiteLayoutVertical","DThemeWhiteMenu","newShadowWeak","DThemeWhiteMenuItem","DThemeWhiteMenuItemText","DThemeWhiteMenuItemCheck","menu_item_mark_check_active","menu_item_mark_check_inactive","DThemeWhiteMenuItemExpandable","DThemeWhiteMenuItemExpandableBody","DThemeWhiteMenuItemExpandableHeader","isActiveIn","menu_item_expandable_header_opened","menu_item_expandable_header_closed","DThemeWhiteMenuItemExpandableItemCheck","DThemeWhiteMenuItemLink","menu_item_mark_link","getOpenLinkInNewWindow","getCopyLinkAddress","DThemeWhiteMenuItemExpandableItemLink","DThemeWhiteMenuItemMenu","menu_item_mark_next","DThemeWhiteMenuItemExpandableItemMenu","DThemeWhiteListItemSeparator","DThemeWhiteMenuItemExpandableItemSeparator","DThemeWhiteMenuItemSeparator","DThemeWhiteLayoutSpace","DThemeWhiteMenuItemExpandableItemSpace","DThemeWhiteMenuItemSpace","DThemeWhiteMenuItemExpandableItemText","loadThemeWhiteMenu","loadThemeWhiteDropdown","DThemeWhiteExpandable","DHTMLElementWhen","DThemeWhiteExpandableHeader","loadThemeWhiteExpandable","ESnapperTargetValueType","DHTMLElement","clipper","clipperCreator","getClipperCreator","_clipper","_clipperCreator","_clipperRect","elementCreator","getElementCreator","_element","_elementCreator","_elementStyle","_elementRect","_isElementShown","_isElementSelected","_onElementFocusedBound","onElementFocused","_before","_beforeCreator","getBeforeCreator","_beforeStyle","_onBeforeFocusedBound","onBeforeFocused","_after","_afterCreator","getAfterCreator","_afterStyle","_onAfterFocusedBound","onAfterFocused","_isStarted","_select","getSelect","_doSelectBound","doSelect","getWhen","_when","ALWAYS","onEndByBlured","cancel","isStartable","doStart","updateElement","getClipper","getBefore","getElement","getAfter","elementRect","getElementRect","clipperRect","getClipperRect","setClipperStyle","setElementStyle","setBeforeStyle","setAfterStyle","onElementAttached","scrollTop","scrollLeft","toGlobal","onElementDetached","containsPoint","mouse","getElementContainer","_clipperStyle","worldVisible","divCreator","DThemeWhiteHTMLElement","getElementStylePosition","getElementStyleMargin","getElementStyleText","getElementStyleBackground","getElementStyleBorder","getElementStylePadding","getElementStyleOutline","getClipperStylePosition","loadThemeWhiteImage","DThemeWhiteLayoutHorizontal","HORIZONTAL","DThemeWhiteInputAndLabel","loadThemeWhiteInputAndLabel","editingValidator","editingUnformatter","found","getElementsByClassName","CREATOR_CLASSNAME","classname","beforeCreator","afterCreator","DThemeWhiteInput","INVALID_COLOR","DThemeWhiteInputNumber","parseInt","DThemeWhiteInputInteger","loadThemeWhiteInputInteger","DThemeWhiteInputLabel","loadThemeWhiteInputLabel","DThemeWhiteInputReal","loadThemeWhiteInputReal","DThemeWhiteInputText","loadThemeWhiteInputText","loadThemeWhiteInputAll","loadThemeWhiteLayout","loadThemeWhiteList","DThemeWhiteMenuBar","DThemeWhiteMenuBarItem","loadThemeWhiteMenuBar","DThemeWhiteMenuSided","DThemeWhiteMenuSidedContent","loadThemeWhiteMenuSided","DThemeWhiteMenuSidedItemCheck","DThemeWhiteMenuSidedItemLink","DThemeWhiteMenuSidedItemMenu","DThemeWhiteMenuSidedItemSeparator","DThemeWhiteMenuSidedItemSpace","DThemeWhiteMenuSidedItemText","DThemeWhiteMenuSidedItemExpandable","DThemeWhiteMenuSidedItemExpandableItemCheck","DThemeWhiteMenuSidedItemExpandableItemLink","DThemeWhiteMenuSidedItemExpandableItemMenu","DThemeWhiteMenuSidedItemExpandableItemSeparator","DThemeWhiteMenuSidedItemExpandableItemSpace","DThemeWhiteMenuSidedItemExpandableItemText","DThemeWhiteNote","loadThemeWhiteNote","DThemeWhiteContent","DThemeWhiteScrollBar","DThemeWhiteScrollBarThumb","loadThemeWhiteScrollBar","loadThemeWhitePane","loadThemeWhiteSelect","DThemeWhiteSelect","DThemeWhiteTable","DThemeWhiteTableBody","DThemeWhiteTableBodyCells","TOP_BOTTOM","DThemeWhiteTableBodyCellCheck","DThemeWhiteTableBodyCellColor","DThemeWhiteTableBodyCellDate","DThemeWhiteTableBodyCellDatetime","DThemeWhiteTableBodyCellIndex","DThemeWhiteTableBodyCellInputInteger","DThemeWhiteTableBodyCellInputReal","DThemeWhiteTableBodyCellInputText","DThemeWhiteTableBodyCellSelectDialog","DThemeWhiteTableBodyCellSelectFetcher","DThemeWhiteTableBodyCellSelectMenu","DThemeWhiteTableBodyCellText","DThemeWhiteTableBodyCellTime","DThemeWhiteTableRow","DThemeWhiteTableBodyRow","DThemeWhiteTableBodyRowEven","HIGHLIGHT_BLENDED","WEAK_HIGHLIGHT_BLENDED","DThemeWhiteTableBodyRowOdd","DThemeWhiteTableHeader","DThemeWhiteTableHeaderCell","loadThemeWhiteTable","loadThemeWhiteText","loadThemeWhiteAll","DThemeWhiteChart","DThemeWhiteChartAxisX","loadAll","_isEnabled","ESnapperGrid","disable","distance","ESnapperResult","snapped","newDistance","oldDistance","ESnapperModifierAnchor","ESnapperTargetValue","_isVisible","ESnapperTarget","valueA","DCommandFlag","_normals","_lengths","_workScale","_workSnapResultX","_workSnapResultY","_workScaleResult","_workTranslate","_workSnapRectangle","_workSnap","grid","ESnapper","prepare","snap","workTranslate","newDx","newDy","baseRotation","deltaRotation","gridSize","getGridSizeRotation","newRotationDegree","toDegree","newRotationDegreeResidual","toRadian","p0","p1","anchor","normals","lengths","calcNormalizedVector","TOP_CENTER","MIDDLE_LEFT","MIDDLE_RIGHT","BOTTOM_CENTER","normal","mx","setScaleSnappedResult","my","calcScaleSnapped1D","detA","mdx","mdy","pointO","pointX","pointY","calcScaleSnapped2D","calcScaleSnappedX","calcScaleSnappedY","keepRatio","calcScaleSnappedXY","DAnimationEmpty","DApplicationPadding","_root","overlay","getBoundingClientRect","bbox","transparent","_pixi","autoStart","DApplicationLayerOptions","updateWidthAndHeight","pixi","isFocusable","isFocusableContainer","isSelectable","DControllerDefaultFocus","_focused","mightBeFocusable","includesTarget","includesTargetChildren","findFocusableNext","isFocusRoot","findFocusablePrevious","DChartCoordinateDirection","DCommandClear","UNSTORABLE","CLEAR","DCommandRedo","DCommandUndo","isCommandStorable","command","getFlag","_done","_waiting","_executing","DControllerDefaultCommand","done","waiting","command_1","undo","onSuccess","onFail","redo","isClear","isStorable","ifrom","isRedoable","isUndoable","DControllerKeyboard","hasOnKeyDown","hasOnKeyUp","DControllers","KEYBOARD","COMMAND","DOCUMENT","isDblClickable","onDblClick","isWheelable","onWheel","getPixiApplicationOptions","stageAny","_isUpdateAllowed","_refitLimit","_reflowLimit","_renderBound","_renderId","rootElement","elementContainer","_elementContainer","isOverlay","thirdChild","insertBefore","oldOnChildrenChange_1","updateVisibility","firstChild","rootElementStyle","getComputedStyle","overflow","viewStyle","hasFocus","onBlurBound","getKeyboardController","getPadding","wheelGlobal","wheelEventUtil","wheelEvent","hitTest","DApplicationLayer","requestAnimationFrame","screen","ilimit","limit","isChildrenDirty","_focus","_dynamicFontAtlases","Application","toRootElement","Renderer","__plugins","accessibility","newLayerBase","_isOverlayEnabled","DApplication","querySelector","toLayerBaseOptions","toLayerOverlayOptions","newLayerOverlay","DBoard","DButtonBase","_isToggle","isToggle","_onActiveUpBound","setPressed","_onActiveUpBoundTarget","setActiveHandlers","group","onToggleStart","onToggleEnd","onActivateKeyDown","onActivateKeyUp","DButton","DButtonAmbient","DButtonCheck","DButtonCheckRight","DButtonPrimary","DLayoutHorizontal","DDialogCommand","getLayoutX","getLayoutY","getLayoutWidth","getLayoutHeight","onInit","ok","getOk","getCancel","buttonLayout","_buttonLayout","_buttonCancel","active","_buttonOk","onOk","_promise","_resolve","_reject","DInput","_editingValidationResult","_editingValidator","editing","validator","getEditingValidator","_description","description","_editingFormatter","getEditingFormatter","_editingUnformatter","unformatter","getEditingUnformatter","validate","setInvalid","editingValidationResult","oldValue","DInputNumber","_step","getStep","toStep","_min","getMin","toMin","_max","getMax","toMax","updateInputStep","updateInputMin","updateInputMax","valueAsString","initInputStep","initInputMin","initInputMax","DInputReal","DText","DInputLabel","_label","label","space","DInputAndLabel","DInputRealAndLabel","DInputText","DInputTextAndLabel","onColorChange","onAlphaChange","_colorAndAlpha","_onColorChange","_onAlphaChange","DPickerColorAndAlpha","recents","_recents","DPickerColorRecent","recent","DPickerColor","_currentPicker","_newPicker","_recent","_new","setColorNew","setAlphaNew","setColorCurrent","setAlphaCurrent","_pointerPoint","mainWidth","getMainWidth","mainHeight","getMainHeight","mainBaseSprite","_mainBaseSprite","mainSprite","_mainSprite","getMainTexture","_onMainMoveBound","onMainMove","_onMainUpBound","onMainUp","onMainDown","baseSprite","_baseSprite","_onBaseMoveBound","onBaseMove","_onBaseUpBound","onBaseUp","onBaseDown","alphaCheckerboardSprite","_alphaCheckerboardSprite","getAlphaCheckerboardTexture","alphaSprite","getAlphaTexture","_onAlphaMoveBound","onAlphaMove","_onAlphaUpBound","onAlphaUp","onAlphaDown","mainPointerSprite","_mainPointerSprite","getMainPointerTexture","getMainPointerColor","alphaPointerSprite","_alphaPointerSprite","getAlphaPointerTexture","getAlphaPointerColor","getAlphaPointerAlpha","basePointerSprite","_basePointerSprite","getBasePointerAlpha","_recentColorSprites","recentColorSprites","recentColorCount","getRecentColorCount","recentColorWidth","recentColorHeight","getRecentColorHeight","recentColorWidthHalf","recentColorHeightHalf","recentColorMargin","getRecentColorMargin","recentColorY","getAlphaHeight","recentCheckerboardTexture","getRecentCheckerboardTexture","RECENT_COLORS","getRecents","onRecentChange","onRecentClick","checkerboardSprite","currentTarget","sprite","recentColorAndAlpha","inputMargin","getInputMargin","inputY","inputWidth","inputAndLabelColor","_inputAndLabelColor","getInputLabelWidth","fromCode","inputAndLabelAlpha","_inputAndLabelAlpha","sampleWidth","sampleHeight","getSampleHeight","sampleX","sampleY","sampleCurrentCheckerboardSprite","_sampleCurrentCheckerboardSprite","getSampleCheckerboardTexture","sampleCurrentSprite","_sampleCurrentSprite","sampleNewCheckerboardSprite","_sampleNewCheckerboardSprite","sampleNewSprite","_sampleNewSprite","onMainPick","hw","ux","uy","toMainHex","onColorNew","toMainColor","hsv","fromRgb","toRgb","ns","nv","onBasePick","toBaseHex","onColorBase","toBaseColor","onAlphaPick","onAlphaNew","sprites","nPointsPerData","_nPointsPerData","_colors","_lastHitIndex","_parts","uSampler","DPickerColorGradientDataView","setColors","setColorsHex","setColorsWhite","setVertices","setUvs","newIndices","setColorsPoint","pointSize","local","isEqual","ap","bp","apj","bpj","DPickerColorGradientRecent","DPickerColorGradient","gradientPointsWidth","getGradientPointsWidth","gradientPointsMargin","getGradientPointsMargin","picker","_picker","onAnchorColorChange","onAnchorAlphaChange","_view","setRectangle","getLastHitIndex","onViewDown","_onAnchorDownBound","onAnchorDown","_onAnchorMoveBound","onAnchorMove","_onAnchorUpBound","onAnchorUp","_anchors","inputLabelWidth","inputDirectionMargin","getGradientDirectionMargin","inputDirectionTexture","getGradientDirectionTexture","inputLeft","inputDirection","change","recentColumn","getGradientRecentColumn","recentWidth","getGradientRecentWidth","recentMargin","getGradientRecentMargin","recentWidthAndMargin","RECENT_COLOR_GRADIENT","getGradientRecents","getGradientRecentCount","getCapacity","onRecentUpdate","lastHitIndex","updateAnchors","onAnchorSelect","recentData","fromObject","addAt","toAnchorPosition","onAnchorDragStart","new","anchorTexture","getGradientAnchorTexture","anchorOutlinedTexture","getGradientAnchorOutlinedTexture","anchors","anchorSize","newAnchor","oldAnchor","isDeleteKey","DDialogColorGradient","DButtonColorGradient","_dialogOptions","dialog","getViewBaseTexture","_dialog","DIALOG","DDialogColor","DButtonColor","updateTextForcibly","dialogNew","dialogCurrent","DButtonDanger","DPickerDatetimeButtonBack","DPickerDatetimeButtonDate","DPickerDatetimeButtonNext","DPickerDatetimeLabel","DPickerDatetimeLabelDate","DPickerDatetimeSpace","DInputInteger","_date","_inclusive","inclusive","DPickerTimeBound","DPickerTimeBoundHours","lower","lowerDate","constant","hour","lowerDateHours","minute","upper","upperDate","upperDateHours","DPickerTimeBoundMinutes","lowerDateMinutes","upperDateMinutes","DPickerTimeBoundSeconds","newConstant","hours","minutes","seconds","DPickerTimeBounds","test","getTime","setSeconds","setMinutes","setHours","setDate","am","bm","ad","bd","ah","bh","compare","toBoundOptions","onNewChanged","DPickerTime","_dateCurrent","dateCurrentTime","_dateNew","_dateBounds","getLowerBound","isLowerBoundInclusive","getUpperBound","isUpperBoundInclusive","toBoundsOptions","newChildren","dateCurrent","dateNew","_inputHours","_inputMinutes","_inputSeconds","currentTime","onReset","dateBounds","inputHours","inputMinutes","inputSeconds","newInputHours","newInputMinutes","newInputSeconds","newTimeLayout","newTimeLayoutChildren","getTimeLayoutWidth","getTimeLayoutHeight","newMinuteSeparator","newSecondSeparator","getMinuteSeparator","getSecondSeparator","inputOptions","getHoursOptions","adjustInputOptions","onHoursChanged","getMinutesOptions","onMinutesChanged","getSecondsOptions","onSecondsChanged","DPickerDatetime","_datePage","_dateButtons","newDateButtons","_dateDecorator","decorator","getDateDecorator","newLabel","_labelFormatter","getLabelFormatter","newBackButton","newNextButton","newDateLabels","datePage","onPageChanged","setFullYear","buttons","spaceCount","getDay","getDayStart","dateDecorator","dateCount","dateNewDate","setDisabled","buttonOptions","back","getBackButtonOptions","getNextButtonOptions","dateLabels","getDayLabels","dayStart","newDateLabel","newSpace","newDateButton","onDateButtonClicked","setMonth","DPickerDate","DDialogDate","page","DDialogDates","DButtonDate","DDialogDatetime","DDialogDatetimes","DButtonDatetime","_datetimeMask","toMask","DButtonFileAs","DButtonFile","_opener","onOpening","_buttons","_active","_stateOn","_stateOff","_onActiveBound","onActive","DButtonGroup","DButtonRadio","DButtonRadioRight","commandController","getCommandController","DButtonSecondary","DDialogTime","DDialogTimes","DButtonTime","DBaseOverflowMask","tr","arcTo","stopper","_stopper","drag","getDragMode","getDragModifier","getDragDurationPosition","getDragDurationScale","_bind","_dragUtil","toNormalizedScale","scaleRatio","DCanvasContainerViewDrag","dragUtil","_newScale","_newX","_newY","_oldScale","_oldX","_oldY","DCanvasContainerViewTransform","zoom","_zoomPoint","_zoomMin","getZoomMin","_zoomMax","getZoomMax","wheelZoom","wheel","_isWheelZoomEnabled","isWheelZoomEnabled","_wheelZoomSpeed","speed","getWheelZoomSpeed","_wheelZoomModifier","getWheelZoomModifier","_wheelZoomChecker","dblClickZoom","dblclick","_isDblClickZoomEnabled","isDblClickZoomEnabled","_dblClickZoomSpeed","getDblClickZoomSpeed","_dblClickZoomModifier","getDblClickZoomModifier","_dblClickZoomChecker","_dblclickZoomDuration","getDblClickZoomDuration","wheelTranslation","translation","_isWheelTranslationEnabled","isWheelTranslationEnabled","_wheelTranslationSpeed","getWheelTranslationSpeed","_wheelTranslationModifier","getWheelTranslationModifier","_wheelTranslationChecker","_drag","DCanvasContainerView","newCanvasX","newCanvasY","canvasScaleX","canvasScaleY","newCanvasScale","oldCanvasScale","canvasScaleRatio","zoomAt","zoomAtGlobal","DCanvasContainer","updateContentSize","canvasX","canvasY","vresult","sresult","DCanvas","_coordinateIndex","toPosition","_tick","toTickContainer","DChartAxisBaseOptionParser","getPosition","tick","getTickEnable","major","toTickMajor","minor","toMinorTick","getMajorTickPosition","getMajorTickStyle","getMajorTickCount","getMajorTickSize","toTickPosition","toTickStroke","toMajorTickText","toMajorTickFormatter","tickPosition","getMinorTickPosition","getMinorTickStyle","getMinorTickCount","getMinorTickSize","optionsA","optionsB","getMajorTickTextFormat","toMajorTickTextAlign","toMajorTickTextOffset","toMajorTickTextOutline","toMajorTickTextSpacing","toTickMajorTextDirection","toMajorTickTextPadding","getMajorTickTextAlignHorizontal","getMajorTickTextAlignVertical","getMajorTickTextPaddingHorizontal","getMajorTickTextPaddingVertical","getMajorTickTextDirection","toLabelAlign","toLabelOffset","toLabelOutline","toLabelSpacing","toLabelDirection","toLabelPadding","getLabelAlignHorizontal","getLabelAlignVertical","getLabelPaddingHorizontal","getLabelPaddingVertical","getLabelDirection","parser","coordinateIndex","_majorTicks","Float64Array","_minorTicks","DChartAxisBase","_container","bar","_bar","plotAreaSize","plotArea","plotAreaSizeX","plotAreaSizeY","majorShapes","minorShapes","shapePositionY","majorCount","majorFormatter","minorCountPerMajor","minorCount","majorTicks","minorTicks","ticks","majorShape","imajorTick","majorTickPosition","majorTickProjectedPosition","majorTickStep","minorShape","iminorTick","minorTickPosition","minorTickProjectedPosition","shapePositionX","updateTicksX","updateTicksY","tickShapeContainer","barPosition","attach","tickMajor","tickMajorShapes","tickMajorCount","tickMajorSize","tickMajorPosition","tickMajorStyle","tickMajorShape","tickMinor","tickMinorShapes","tickMinorCount","tickMinorSize","tickMinorPosition","tickMinorStyle","tickMinorShape","updateBar","updateTicks","_plotArea","_list","DChartAxisContainerImpl","axes","axisOrPosition","indexOrUndefined","removed","unbind","DChartAxisX","DChartAxisY","DCHART_COLOR_SET_1","DCHART_COLOR_SET_2","DChartColorSet2","DChartPlotAreaFitTarget","DChartCoordinateContainerSubImpl","coordinateOrIndex","_x","X","_y","cxs","cys","DChartCoordinateContainerImpl","DChartRegionImplObservable","domainFrom","domain","domainTo","_domain","onRegionChange","rangeFrom","rangeTo","_range","DChartCoordinateLinear","series","pixelFrom","pixelTo","domainSpan","rangeSpan","isZero","_iratio","_ioffset","power","LN10","toStepScale","majorPosition","rangeMin","rangeMax","iresult","minorPosition","majorResult","minorResult","domainMin","domainMax","majorStep","calcStepMajor","map","imajorResult","iminorResult","getRangeMax","idomainStart","idomainEnd","minorStep","calcStepMinor","imajor","iminor","majorProjectedPosition","minorProjectedPosition","DChartRegionImpl","toScalar","DChartSeriesStrokeImpl","_stroke","listLength","DChartSeriesContainerImpl","seriesOrIndex","_coordinate","_series","_axis","DChartPlotAreaImpl","DListSelectionMode","_coordinateIndexX","_coordinateIndexY","_pointId","_pointIdUpdated","_coordinateIdUpdatedX","_coordinateIdUpdatedY","_regionPointId","DChartSeriesLine","containerStroke","line","_line","toStroke","coordinateX","coordinateY","coordinateIdX","coordinateIdY","isCoordinateXChanged","isCoordinateYChanged","updateLine","xcoordinate","ycoordinate","valuesLength","segmentsLength","ivalues","isegments","xraw","yraw","segment","updateRegion","DChart","_destroyed","DCommandCreate","DCommandDelete","getDocumentController","delete","DCommandSaveAs","saveAs","DCommandSave","DContent","DDiagramCanvasTileMappingPointImpl","lon","lat","mappingOrEnable","lon0","lat0","lon1","lat1","_cb","DDiagramCanvasTileMappingImpl","_factory","factory","onMappingChange","DDiagramCanvasTile","pyramid","_pyramid","DDiagramLayer","DDiagramLayerContainer","activate","addChildAt","activateNext","_tile","tile","DDiagramCanvasBase","layers","snapperGraphics","_snapperGraphics","snapper","_snapper","DDiagramCanvasEditor","version","interactives","actionables","ids","_workLocal","_workGlobal","_lastOverShape","DDiagramCanvas","initializeShapes","updateShapes","initializeFocus","shapeId","this_1","lastOverShape","onPointerMove","previousRuntime","onPointerOut","lastOverParent","parentRuntime","onPointerOver","DDiagrams","simple","pflayers","pfresources","pfitems","shapePromises","deserializeAll","pfitem","canvasContainer","_serialized","_tileFactory","DDiagramBase","oldSerialized","onUnset","onSet","newCanvas","newLayer","initialize","applyBackground","_controller","controller","_isChanged","DDiagramEditor","newId","reason","isNew","diagram","_diagram","_updateBound","DDiagramShape","actionable","runtimeEffect","DDiagramTag","tagValue","onShapeMove","onShapeUp","onShapeClick","DDiagram","formatterMap","initialMap","actionMap","runtimeConstructor","tagFormat","tagInitial","toRuntime","onShapeDown","onShapeDblClick","DDialogConfirmMessage","DDialogConfirm","toMessage","_message","newMessage","toMessageOptions","toMessageOptionsMerged","getMessage","DDialogConfirmDelete","DDialogConfirmDiscard","enter","getLabelWidth","getLabel","DDialogInputText","DDialogMessage","DDialogProcessingMessage","_isDone","_interval","getInterval","DDialogProcessing","timeoutId","_timeoutId","setStates","onDone","delay","onResolved","onRejected","DDialogSaveAs","getName","DDialogSelectListItem","content","_content","_mode","SINGLE","DListSelection","getChildIndex","MULTIPLE","targetIndex","DScrollBar","_start","_end","thumb","_thumb","createThumb","DScrollBarThumb","onDragMove","getMinimumSize","DScrollBarThumbReflowableHorizontal","DScrollBarThumbHorizontal","DScrollBarHorizontal","getLocalPosition","newStart","thumbMinimumSize","barStart","barSize","DScrollBarThumbReflowableVertical","DScrollBarThumbVertocal","DScrollBarVertical","DPane","toContent","initScrollBar","initDrag","dragMode","position_1","toContentX","toContentY","verticalBar","_verticalBar","toBarOptionsVertical","onRegionMoveY","horizontalBar","_horizontalBar","toBarOptionsHorizontal","onRegionMoveX","onContentChanged","updateScrollBar","newContent","getWheelContentX","getWheelContentY","getWheelSpeed","updateScrollBarRegions","updateScrollBarVisibilities","updateScrollBarPositions","verticalBarWidth","horizontalBarHeight","setRegion","isChangedHorizontal","updateScrollBarVisibility","isChangedVertical","isRegionVisible","WORK_ON_FOCUSED","contentX","contentY","contentWidth","contentHeight","DList","_selection","newSelection","findItem","updateChildPosition","updateChildVisibility","scrollLimit","itemY","DDialogSelectList","DNote","defaultConverter","toToLabel","converter","toNoteOptions","toNoteNoItemsOptions","note","noItems","getNoteNoItemsText","toNoteSearchingOptions","searching","getNoteSearchingText","noteNoItems","_noteNoItems","noteSearching","_noteSearching","search","searchResults","childrenLength","searchResultsLength","minLength","searchResult","removeChildAt","newChild","transition","isDone","getResult","DDialogSelect","owner","_owner","_closeables","DMenuContext","closeables","imin","DMenu","_fit","_sticky","_sub","onPrerenderBound","getBounds","picked","getOffsetX","getOffsetY","isArrowUpKey","isArrowDownKey","setMenuCreator","DMenuSidedSelectionMode","DDropdown","toMenuOptions","DExpandableHeader","DExpandable","DInputIntegerAndLabel","tileSize","_tileSize","DMapCoordinateEPSG3857","lonlat","meters","C","CIRCUMFERENCE_HALF","tan","atan","exp","tz","R","Z","metersToTile","lonLatToMeters","metersToPixels","metersToLonLat","pixelsToMeters","toResolutionMeter","DMapCoordinates","_default","_sprite","DMapTile","onLoaded","_builder","_onLoaded","_isOnLoadedCalled","_isOnLoadedAllowed","_onLoadedBound","_tz","_lon0","_lat0","_lon1","_lat1","_tiles","_renderTileBound","renderTile","_txmin","_txmax","_tymin","_tymax","_deleteTileBound","tileCode","tiles","deleteTile","_destroyTileBound","destroyTile","_updateLoadingStateForEach","loaded","_isLoaded","_tileCount","toTileCount","_tileScaleRelative","_tileScale","getTileSize","DMapTilePlane","_renderer","oldLon0","oldLat0","oldLon1","oldLat1","WORK","lonLatToTile","tx1","ty1","tileCount","txmin","txmax","tymin","tymax","dtxmin","dtxmax","dtymin","dtymax","isTxMinChanged","isTxMaxChanged","isTyMinChanged","isTyMaxChanged","ctx","cty","ltx","lty","lt","toOffset","loadTile","it","txa","loadTilesY","txb","tya","loadTilesX","tyb","toTileCode","toTilePosition","newTile","tileScaleRelative","tileToPixels","updateLoadingState","tileScale","mappingLonLat","_mappingInternal","toMapping","_z","_minZ","plane","_maxZ","_planes","_fitBound","_fitBoundTimeout","_fitThrottle","throttle","fitThrottledBound","_fitThrottledBound","fitThrottled","DMapTilePyramidImpl","WORK_LONLAT","lonLatToPixels","oldMapping","newMapping","planes","planeTz","toZ","toTileZ","newPlane","pixelsToLonLat","destroyPlanesBefore","destroyPlanesAfter","DMapTileUrlBuilderOsmfj","DMapTilePyramids","MIN","MAX","THROTTLE","DEFAULT","toPlaneOptions","DMenuBarItem","DMenuBarBlocker","DMenuBar","onItemStateChangeBound","onItemStateChange","itemOrItemOptions","_blocker","blocker","DMenuSidedContent","DTableColumnType","defaultFilter","_item","_filter","filter","getFilterDefault","DMenuSidedSelection","set_","hasMenu","oldItem","DMenuSided","DSelect","_onSelectedBound","onSelected","_onClosedBound","onClosed","findMenuItem","DTableBodyCellCheck","_columnIndex","_columnData","DTableBodyCellColor","hasColor","hasAlpha","DTableBodyCellIndex","rowIndex","DTableBodyCellInputInteger","newCellValue","oldCellValue","DTableBodyCellInputReal","DTableBodyCellInputText","DTableBodyCellSelectDialog","selecting","getter_1","getter","onSelectBound_1","onCloseBound_1","columnIndex","DTableBodyCellSelectFetcher","fetcher","DTableBodyCellSelectMenu","newSelected","DTableBodyCellText","FILTERED_COMPARATOR","DTableBodyFilterImpl","newFiltered","oldFiltered","_filtered","setFiltered","filtered","rows","rowsLength","filteredRowIndex","DTableBodyCellDate","textValueComputed","DTableBodyCellDatetime","DTableBodyCellTime","DTableSelectionType","DTableRow","columns","_columns","newCell","isBodyCell","DTableBodyRow","_onCellChangeBound","_row","setter","cell","cellOptions","toCellOptions","editable","newCellEditable","newCellUnediable","setReadOnly","INDEX","INTEGER","REAL","CHECK","BUTTON","SELECT","DATETIME","TIME","cells","cellsLength","columnsLength","unset","DTableBodyRowEven","DTableBodyRowOdd","COMPARATOR","Set","DTableSelection","has","oldSize","result_2","lastRowIndex","getLastIndex","includeFrom","includeTo","rowIndices","shifted","DTableBody","selectionType","toSelectionType","rowOptions","getRowHeight","toRowOptions","_rowOptions","_rowHeight","_rowIndexStart","_rowIndexEnd","toData","_updateRowsCount","_isUpdateRowsCalled","_isUpdateRowsCalledForcibly","_workRows","onSelectionChange","onFilterChange","WORK_ON_CLICK","dataLength","isSingle","isNotSingle","realRowIndex","isEmpty","clearAndAdd","addTo","callIfNeeded","rowHeight","oldRowIndexStart","oldRowIndexEnd","oldRowCount","newContentHeight","newContentY","newRowIndexLowerBound","newRowIndexUpperBound","newRowIndexStart","newRowIndexEnd","newRowCount","oldRowIndex","newRow","rowIndexStartDelta","absRowIndexStartDelta","resetRow","isEven","lock","unlock","DTableHeaderCell","DTableHeader","defaultGetter","defaultSetter","defaultEditingUnformatter","toColumnEditing","toColumnMenu","toColumnDialog","defaultSelectingGetter","toColumnSelecting","toColumn","toColumnAlign","DTable","toColumns","toHeaderOptions","toBodyOptions","wcardinal","ui"],"mappings":";;;;;;;;;;;;;;;;;;;;;;oFAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAGrB,SAASO,EAAUR,EAAGC,GAEzB,SAASQ,IAAOC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GCjBnF,ICIYK,eDJZ,cA8GA,OA3GQC,MAAP,SAAYC,GACOD,EAAcE,UACtBC,KAAMF,IAGVD,QAAP,WACC,IAAMI,EAAYJ,EAAcE,UAChC,GAAI,EAAIE,EAAUC,OACjB,OAAOD,EAAW,GAEnB,MAAM,IAAIE,MAAO,0BAGXN,OAAP,WACC,IAAMI,EAAYJ,EAAcE,UAChC,GAAI,EAAIE,EAAUC,OACjB,OAAOD,EAAWA,EAAUC,OAAS,GAEtC,MAAM,IAAIC,MAAO,0BAGXN,MAAP,SAAYO,GACX,IAAMH,EAAYJ,EAAcE,UAChC,OAAI,GAAKK,GAASA,EAAQH,EAAUC,OAC5BD,EAAWG,GAEZ,MAGDP,UAAP,SAAgBC,GACf,OAAOD,EAAcE,UAAUM,QAASP,IAGlCD,OAAP,WACC,OAAOA,EAAcE,UAAUG,QAGfL,UAAjB,SAA0BS,GAEzB,IADA,IAAIC,EAAaD,EACVC,EAAMC,QACZD,EAAQA,EAAMC,OAEf,MAAK,gBAAiBD,GAAW,UAAWA,EACpCA,EAED,MAGDV,OAAP,SAAaS,GACZ,IAAMC,EAAQf,KAAKiB,QAASH,GAC5B,OAAIC,EACIA,EAAMG,MAAMC,YAEb,MAGDd,eAAP,SAAqBS,GACpB,IAAMC,EAAQf,KAAKiB,QAASH,GAC5B,OAAIC,EACIA,EAAMG,MAAMC,YAAYC,eAEzB,MAGDf,kBAAP,SAAwBS,GACvB,IAAMC,EAAQf,KAAKiB,QAASH,GAC5B,OAAIC,EACIA,EAAMG,MAAMC,YAAYE,kBAEzB,MAGDhB,WAAP,SAAiBS,GAChB,IAAMC,EAAQf,KAAKiB,QAASH,GAC5B,OAAIC,EACIA,EAAMG,MAEP,MAGDb,SAAP,SAAeS,GACd,GAAIA,EAAS,CACZ,IAAMC,EAAQf,KAAKiB,QAASH,GACxBC,GACHA,EAAMG,MAAMI,cAIb,IADA,IAAMb,EAAYJ,EAAcE,UACvBgB,EAAI,EAAGC,EAAOf,EAAUC,OAAQa,EAAIC,IAAQD,EACpDd,EAAWc,GAAID,UAKXjB,SAAP,SAAeS,GACd,GAAIA,EAAS,CACZ,IAAMC,EAAQf,KAAKiB,QAASH,GACxBC,GACHA,EAAMG,MAAMO,cAIb,IADA,IAAMhB,EAAYJ,EAAcE,UACvBgB,EAAI,EAAGC,EAAOf,EAAUC,OAAQa,EAAIC,IAAQD,EACpDd,EAAWc,GAAIE,UAzGDpB,YAAgC,QELrCqB,EAAiB,SAAEZ,GAC/B,MAA2B,mBAAZA,gBCaf,WAAaa,EAAmBC,EAA6BC,GAG5D,GAFA7B,KAAK8B,EAASH,EACd3B,KAAK+B,EAAYF,EACF,MAAXD,GAAyC,MAAtBA,EAAQI,WAAqB,CACnD,IAAMA,EAAaJ,EAAQI,WAC3BhC,KAAKiC,EAASD,EAAWE,MACzBlC,KAAKmC,EAASH,EAAWI,OAsE5B,OAlECC,qBAAA,WACC,OAAOrC,KAAK8B,GAGbO,qBAAA,SAAUV,GACT3B,KAAK8B,EAASH,GAGfU,qBAAA,SAAUC,GACT,IAAMJ,EAAQlC,KAAKiC,EACnB,QAAcM,IAAVL,EAAsB,CACzB,IAAIR,EAAgBQ,GAMnB,OAAOA,EALP,IAAMM,EAASN,EAAOI,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAOW,mBAAoBH,IAGxC9C,sBAAI6C,yBAAJ,WACC,OAAOrC,KAAKiC,OAGb,SAAWC,GACNlC,KAAKiC,IAAWC,IACnBlC,KAAKiC,EAASC,EACdlC,KAAK0C,6CAIPL,qBAAA,SAAUC,GACT,IAAMF,EAAQpC,KAAKmC,EACnB,QAAcI,IAAVH,EAAsB,CACzB,IAAIV,EAAgBU,GAMnB,OAAOA,EALP,IAAMI,EAASJ,EAAOE,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAOa,mBAAoBL,IAGxC9C,sBAAI6C,yBAAJ,WACC,OAAOrC,KAAKmC,OAGb,SAAWC,GACNpC,KAAKmC,IAAWC,IACnBpC,KAAKmC,EAASC,EACdpC,KAAK0C,6CAIGL,qBAAV,WACC,IAAMR,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,WF/EH,SAAYzB,GACXA,mBAEAA,iBACAA,qBACAA,uBACAA,mBAEAA,6BACAA,+BACAA,2BAEAA,mCACAA,gCAEAA,kCAEAA,0BACAA,8BACAA,gCACAA,2BAEAA,kBAtBD,CAAYA,IAAAA,OGRL,ICEKwC,EDFCC,EAAe,SAAE/B,GAC7B,MAA2B,iBAAXA,GACgC,oBAA7CtB,OAAOU,UAAU4C,SAASC,KAAMjC,iBEgBnC,WAAaa,EAAmBC,EAA6BC,GAG5D,GAFA7B,KAAK8B,EAASH,EACd3B,KAAK+B,EAAYF,EACF,MAAXD,GAAqC,MAAlBA,EAAQoB,OAAiB,CAC/C,IAAMA,EAASpB,EAAQoB,OACvBhD,KAAKiC,EAASe,EAAOd,MACrBlC,KAAKmC,EAASa,EAAOZ,MACrBpC,KAAKiD,EAASD,EAAOE,MACrBlD,KAAKmD,EAASH,EAAOI,MACrBpD,KAAKqD,EAAUR,EAAcG,EAAOM,MAASlD,EAAa4C,EAAOM,MAASN,EAAOM,MAoJpF,OAhJCC,qBAAA,WACC,OAAOvD,KAAK8B,GAGbyB,qBAAA,SAAU5B,GACT3B,KAAK8B,EAASH,GAGf4B,qBAAA,SAAUjB,GACT,IAAMJ,EAAQlC,KAAKiC,EACnB,QAAcM,IAAVL,EAAsB,CACzB,IAAIR,EAAgBQ,GAMnB,OAAOA,EALP,IAAMM,EAASN,EAAOI,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAO0B,eAAgBlB,IAGpC9C,sBAAI+D,yBAAJ,WACC,OAAOvD,KAAKiC,OAGb,SAAWC,GACNlC,KAAKiC,IAAWC,IACnBlC,KAAKiC,EAASC,EACdlC,KAAK0C,6CAIPa,qBAAA,SAAUjB,GACT,IAAMF,EAAQpC,KAAKmC,EACnB,QAAcI,IAAVH,EAAsB,CACzB,IAAIV,EAAgBU,GAMnB,OAAOA,EALP,IAAMI,EAASJ,EAAOE,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAO2B,eAAgBnB,IAGpC9C,sBAAI+D,yBAAJ,WACC,OAAOvD,KAAKmC,OAGb,SAAWC,GACNpC,KAAKmC,IAAWC,IACnBpC,KAAKmC,EAASC,EACdpC,KAAK0C,6CAIPa,qBAAA,SAAUjB,GACT,IAAMY,EAAQlD,KAAKiD,EACnB,QAAcV,IAAVW,EAAsB,CACzB,IAAIxB,EAAgBwB,GAMnB,OAAOA,EALP,IAAMV,EAASU,EAAOZ,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAO4B,eAAgBpB,IAGpC9C,sBAAI+D,yBAAJ,WACC,OAAOvD,KAAKiD,OAGb,SAAWC,GACNlD,KAAKiD,IAAWC,IACnBlD,KAAKiD,EAASC,EACdlD,KAAK0C,6CAIPa,qBAAA,SAAUjB,GACT,IAAMc,EAAQpD,KAAKmD,EACnB,QAAcZ,IAAVa,EAAsB,CACzB,IAAI1B,EAAgB0B,GAMnB,OAAOA,EALP,IAAMZ,EAASY,EAAOd,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAO6B,eAAgBrB,IAGpC9C,sBAAI+D,yBAAJ,WACC,OAAOvD,KAAKmD,OAGb,SAAWC,GACNpD,KAAKmD,IAAWC,IACnBpD,KAAKmD,EAASC,EACdpD,KAAK0C,6CAIPa,oBAAA,SAASjB,GACR,IAAMgB,EAAOtD,KAAKqD,EAClB,QAAad,IAATe,EAAqB,CACxB,IAAI5B,EAAgB4B,GAMnB,OAAOA,EALP,IAAMd,EAASc,EAAMhB,GACrB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAO8B,cAAetB,IAGnC9C,sBAAI+D,wBAAJ,WACC,OAAOvD,KAAKqD,OAGb,SAAUC,GACLtD,KAAKqD,IAAUC,IAClBtD,KAAKqD,EAAQC,EACbtD,KAAK0C,6CAIGa,qBAAV,WACC,IAAM1B,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,WD1KH,SAAYe,GACXA,mBACAA,2BACAA,6BACAA,iCACAA,mCACAA,iBACAA,wBACAA,mBACAA,sBACAA,kBAVD,CAAYA,IAAAA,OEFL,ICIKiB,EDJCC,EAAe,SAAEhD,GAC7B,MAA2B,iBAAXA,GACgC,oBAA7CtB,OAAOU,UAAU4C,SAASC,KAAMjC,iBEWnC,WAAaa,EAAmBC,EAA6BC,GAG5D,GAFA7B,KAAK8B,EAASH,EACd3B,KAAK+B,EAAYF,EACF,MAAXD,GAAqC,MAAlBA,EAAQmC,OAAiB,CAC/C,IAAMA,EAASnC,EAAQmC,OACnBD,EAAcC,IACjB/D,KAAKgE,EAAUD,EACf/D,KAAKqD,OAAQd,IAEbvC,KAAKgE,EAAUD,EAAOE,OACtBjE,KAAKqD,EAAUR,EAAckB,EAAOT,MAASV,EAAamB,EAAOT,MAASS,EAAOT,OAqErF,OAhECY,qBAAA,WACC,OAAOlE,KAAK8B,GAGboC,qBAAA,SAAUvC,GACT3B,KAAK8B,EAASH,GAGfuC,sBAAA,WACC,IAAMD,EAASjE,KAAKgE,EACpB,YAAoBzB,IAAX0B,EAAuBA,EAASjE,KAAK8B,EAAOqC,mBAGtD3E,sBAAI0E,0BAAJ,WACC,OAAOlE,KAAKgE,OAGb,SAAYC,GACX,GAAIjE,KAAKgE,IAAYC,EAAS,CAC7BjE,KAAKgE,EAAUC,EACf,IAAMpC,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,sCAKHqC,oBAAA,WACC,IAAMZ,EAAOtD,KAAKqD,EAClB,YAAkBd,IAATe,EAAqBA,EAAOtD,KAAK8B,EAAOsC,iBAGlD5E,sBAAI0E,wBAAJ,WACC,OAAOlE,KAAKqD,OAGb,SAAUC,GACT,GAAItD,KAAKqD,IAAUC,EAAO,CACzBtD,KAAKqD,EAAQC,EACb,IAAMzB,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,sCAKHqC,gBAAA,SAAKD,EAAiBX,GACrB,IAAIe,GAAY,EAEZrE,KAAKgE,IAAYC,IACpBjE,KAAKgE,EAAUC,EACfI,GAAY,GAGTrE,KAAKqD,IAAUC,IAClBtD,KAAKqD,EAAQC,EACbe,GAAY,GAGb,IAAMxC,EAAW7B,KAAK+B,EAClBsC,GAAyB,MAAZxC,GAChBA,WDrFH,SAAYgC,GAIXA,mBAMAA,mBAMAA,2BAMAA,mBAtBD,CAAYA,IAAAA,OEMZ,ICVYS,eDoBX,WAAa3C,EAAmBC,EAA6BC,GAG5D,GAFA7B,KAAK8B,EAASH,EACd3B,KAAK+B,EAAYF,EACF,MAAXD,GAAsC,MAAnBA,EAAQ2C,QAAkB,CAChD,IAAMA,EAAU3C,EAAQ2C,QACxBvE,KAAKiC,EAASsC,EAAQrC,MACtBlC,KAAKmC,EAASoC,EAAQnC,MACtBpC,KAAKiD,EAASsB,EAAQrB,MACtBlD,KAAKwE,EAAUD,EAAQE,OACvBzE,KAAKmD,EAASoB,EAAQnB,MACtBpD,KAAKqD,EAAUR,EAAc0B,EAAQjB,MAASlD,EAAamE,EAAQjB,MAASiB,EAAQjB,MAyLvF,OArLCoB,qBAAA,WACC,OAAO1E,KAAK8B,GAGb4C,qBAAA,SAAU/C,GACT3B,KAAK8B,EAASH,GAGf+C,qBAAA,SAAUpC,GACT,IAAMJ,EAAQlC,KAAKiC,EACnB,QAAcM,IAAVL,EAAsB,CACzB,IAAIR,EAAgBQ,GAMnB,OAAOA,EALP,IAAMM,EAASN,EAAOI,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAO6C,gBAAiBrC,IAGrC9C,sBAAIkF,yBAAJ,WACC,OAAO1E,KAAKiC,OAGb,SAAWC,GACV,GAAIlC,KAAKiC,IAAWC,EAAQ,CAC3BlC,KAAKiC,EAASC,EACd,IAAML,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,sCAKH6C,qBAAA,SAAUpC,GACT,IAAMF,EAAQpC,KAAKmC,EACnB,QAAcI,IAAVH,EAAsB,CACzB,IAAIV,EAAgBU,GAMnB,OAAOA,EALP,IAAMI,EAASJ,EAAOE,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAO8C,gBAAiBtC,IAGrC9C,sBAAIkF,yBAAJ,WACC,OAAO1E,KAAKmC,OAGb,SAAWC,GACV,GAAIpC,KAAKmC,IAAWC,EAAQ,CAC3BpC,KAAKmC,EAASC,EACd,IAAMP,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,sCAKH6C,qBAAA,SAAUpC,GACT,IAAMY,EAAQlD,KAAKiD,EACnB,QAAcV,IAAVW,EAAsB,CACzB,IAAIxB,EAAgBwB,GAMnB,OAAOA,EALP,IAAMV,EAASU,EAAOZ,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAO+C,gBAAiBvC,IAGrC9C,sBAAIkF,yBAAJ,WACC,OAAO1E,KAAKiD,OAGb,SAAWC,GACV,GAAIlD,KAAKiD,IAAWC,EAAQ,CAC3BlD,KAAKiD,EAASC,EACd,IAAMrB,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,sCAKH6C,sBAAA,SAAWpC,GACV,IAAMmC,EAASzE,KAAKwE,EACpB,QAAejC,IAAXkC,EAAuB,CAC1B,IAAI/C,EAAgB+C,GAMnB,OAAOA,EALP,IAAMjC,EAASiC,EAAQnC,GACvB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAOgD,iBAAkBxC,IAGtC9C,sBAAIkF,0BAAJ,WACC,OAAO1E,KAAKwE,OAGb,SAAYC,GACX,GAAIzE,KAAKwE,IAAYC,EAAS,CAC7BzE,KAAKwE,EAAUC,EACf,IAAM5C,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,sCAKH6C,qBAAA,SAAUpC,GACT,IAAMc,EAAQpD,KAAKmD,EACnB,QAAcZ,IAAVa,EAAsB,CACzB,IAAI1B,EAAgB0B,GAMnB,OAAOA,EALP,IAAMZ,EAASY,EAAOd,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAOiD,gBAAiBzC,IAGrC9C,sBAAIkF,yBAAJ,WACC,OAAO1E,KAAKmD,OAGb,SAAWC,GACV,GAAIpD,KAAKmD,IAAWC,EAAQ,CAC3BpD,KAAKmD,EAASC,EACd,IAAMvB,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,sCAKH6C,oBAAA,SAASpC,GACR,IAAMgB,EAAOtD,KAAKqD,EAClB,QAAad,IAATe,EAAqB,CACxB,IAAI5B,EAAgB4B,GAMnB,OAAOA,EALP,IAAMd,EAASc,EAAMhB,GACrB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK8B,EAAOkD,eAAgB1C,IAGpC9C,sBAAIkF,wBAAJ,WACC,OAAO1E,KAAKqD,OAGb,SAAUC,GACT,GAAItD,KAAKqD,IAAUC,EAAO,CACzBtD,KAAKqD,EAAQC,EACb,IAAMzB,EAAW7B,KAAK+B,EACN,MAAZF,GACHA,wDErMH,WAAaF,EAAmBC,EAA6BC,GAI5D,GAHA7B,KAAK8B,EAASH,EACd3B,KAAK+B,EAAYF,EAEF,MAAXD,GAAsC,MAAnBA,EAAQqD,QAAkB,CAChD,IAAMA,EAAUrD,EAAQqD,QACpBnB,EAAcmB,IACjBjF,KAAKkF,EAAQD,EACbjF,KAAKmF,EAAOF,EACZjF,KAAKoF,EAASH,EACdjF,KAAKqF,EAAUJ,IAEfjF,KAAKkF,EAAQD,EAAQK,KACrBtF,KAAKmF,EAAOF,EAAQM,IACpBvF,KAAKoF,EAASH,EAAQO,MACtBxF,KAAKqF,EAAUJ,EAAQQ,SAkH3B,OA7GCC,qBAAA,WACC,OAAO1F,KAAK8B,GAGb4D,qBAAA,SAAU/D,GACT3B,KAAK8B,EAASH,GAGf+D,oBAAA,WACC,IAAMJ,EAAOtF,KAAKkF,EAClB,YAAgB3C,IAAT+C,EAAqBA,EAAOtF,KAAK8B,EAAO6D,kBAGhDnG,sBAAIkG,wBAAJ,WACC,OAAO1F,KAAKkF,OAGb,SAAUI,GACLtF,KAAKkF,IAAUI,IAClBtF,KAAKkF,EAAQI,EACS,MAAlBtF,KAAK+B,GACR/B,KAAK+B,sCAKR2D,mBAAA,WACC,IAAMH,EAAMvF,KAAKmF,EACjB,YAAe5C,IAARgD,EAAoBA,EAAMvF,KAAK8B,EAAO8D,iBAG9CpG,sBAAIkG,uBAAJ,WACC,OAAO1F,KAAKmF,OAGb,SAASI,GACJvF,KAAKmF,IAASI,IACjBvF,KAAKmF,EAAOI,EACU,MAAlBvF,KAAK+B,GACR/B,KAAK+B,sCAKR2D,qBAAA,WACC,IAAMF,EAAQxF,KAAKoF,EACnB,YAAiB7C,IAAViD,EAAsBA,EAAQxF,KAAK8B,EAAO+D,mBAGlDrG,sBAAIkG,yBAAJ,WACC,OAAO1F,KAAKoF,OAGb,SAAWI,GACNxF,KAAKoF,IAAWI,IACnBxF,KAAKoF,EAASI,EACQ,MAAlBxF,KAAK+B,GACR/B,KAAK+B,sCAKR2D,sBAAA,WACC,IAAMD,EAASzF,KAAKqF,EACpB,YAAkB9C,IAAXkD,EAAuBA,EAASzF,KAAK8B,EAAOgE,oBAGpDtG,sBAAIkG,0BAAJ,WACC,OAAO1F,KAAKqF,OAGb,SAAYI,GACPzF,KAAKqF,IAAYI,IACpBzF,KAAKqF,EAAUI,EACO,MAAlBzF,KAAK+B,GACR/B,KAAK+B,sCAQR2D,gBAAA,SAAKH,EAAaC,EAAgBC,EAAiBH,GACrC,MAATE,GACHxF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQD,EACbvF,KAAKyF,OAASF,EACdvF,KAAKsF,KAAOC,GACQ,MAAVE,GACVzF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQA,EACbxF,KAAKyF,OAASF,EACdvF,KAAKsF,KAAOE,GACM,MAARF,GACVtF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQA,EACbxF,KAAKyF,OAASA,EACdzF,KAAKsF,KAAOE,IAEZxF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQA,EACbxF,KAAKyF,OAASA,EACdzF,KAAKsF,KAAOA,GAES,MAAlBtF,KAAK+B,GACR/B,KAAK+B,uBCnIP,WAAagE,EAAeC,EAAcC,GACzCjG,KAAKkG,EAASH,EACd/F,KAAKgG,GAAKA,EA6DZ,OA1DCxG,sBAAI2G,qBAAJ,WACC,OAAOnG,KAAKkG,EAAOE,OAGpB,SAAOA,GACN,IAAML,EAAQ/F,KAAKkG,EACfH,EAAMK,IAAMA,IACfL,EAAMK,EAAIA,EACVpG,KAAKgG,GAAGjD,KAAM/C,KAAKiG,yCAIrBzG,sBAAI2G,qBAAJ,WACC,OAAOnG,KAAKkG,EAAOG,OAGpB,SAAOA,GACN,IAAMN,EAAQ/F,KAAKkG,EACfH,EAAMM,IAAMA,IACfN,EAAMM,EAAIA,EACVrG,KAAKgG,GAAGjD,KAAM/C,KAAKiG,yCAIrBE,gBAAA,SAAKC,EAAWC,GACf,IAAMN,EAAQ/F,KAAKkG,EACfH,EAAMK,IAAMA,GAAKL,EAAMM,IAAMA,IAChCN,EAAMO,IAAKF,EAAGC,GACdrG,KAAKgG,GAAGjD,KAAM/C,KAAKiG,SAIrBE,qBAAA,SAAUrF,GACT,IAAMiF,EAAQ/F,KAAKkG,EAKnB,OAJIH,EAAMK,IAAMtF,EAAOsF,GAAKL,EAAMM,IAAMvF,EAAOuF,IAC9CN,EAAMQ,SAAUzF,GAChBd,KAAKgG,GAAGjD,KAAM/C,KAAKiG,QAEbjG,MAGRmG,mBAAA,SAAQrF,GACP,OAAOA,EAAOyF,SAAUvG,KAAKkG,IAG9BC,iBAAA,WACC,OAAOnG,KAAKuG,SAAUC,UAAW,KAGlCL,kBAAA,SAAOH,EAAeC,GAGrB,OAFAD,EAAKA,GAAMhG,KAAKgG,GAChBC,EAAQA,GAASjG,KAAKiG,MACf,IAAIE,EAAYnG,KAAKkG,EAAQF,EAAgBC,IAGrDE,mBAAA,SAAQvG,GACP,OAAOI,KAAKkG,EAAOO,OAAQ7G,uBCpD5B,WAAa8G,EAAkBxD,EAAeyD,EAAgBC,EAAoBC,GAAlF,MACCC,YAAO,IAAIC,aAAc,IAAM,IAAIA,aAAc,IAAM,IAAIC,YAAa,kBAExEC,EAAKhE,EAASC,EACd+D,EAAKC,EAAUP,EACfM,EAAKE,EAAWT,EAChBO,EAAKG,EAAcR,EACnBK,EAAKI,EAAcR,EACnBI,EAAKK,GAAW,EAChBL,EAAKM,EAAaC,IAElBP,EAAKQ,EAAgBR,EAAKS,UAAW,mBACrCT,EAAKU,EAAYV,EAAKQ,EAAcG,KACpCX,EAAKY,EAAYZ,EAAKS,UAAW,iBACjCT,EAAKa,KAAOb,EAAKY,EAAUD,KAC3BX,EAAKc,EAAed,EAAKe,WACzBf,EAAKgB,EAAWhB,EAAKc,EAAaH,OAsNpC,OArPiD9H,OAkChDN,sBAAI0I,8BAAJ,WACC,OAAOlI,KAAKoH,OAGb,SAAgBR,GACX5G,KAAKoH,IAAgBR,IACxB5G,KAAKoH,EAAcR,EACnB5G,KAAKsH,GAAW,oCAIlB9H,sBAAI0I,8BAAJ,WACC,OAAOlI,KAAKqH,OAGb,SAAgBR,GACX7G,KAAKqH,IAAgBR,IACxB7G,KAAKqH,EAAcR,EACnB7G,KAAKsH,GAAW,oCAIlB9H,sBAAI0I,yBAAJ,WACC,OAAOlI,KAAKiD,OAGb,SAAWC,GACNlD,KAAKiD,IAAWC,IACnBlD,KAAKiD,EAASC,EACdlD,KAAKsH,GAAW,oCAIlB9H,sBAAI0I,0BAAJ,WACC,OAAOlI,KAAKkH,OAGb,SAAYP,GACP3G,KAAKkH,IAAYP,IACpB3G,KAAKkH,EAAUP,EACf3G,KAAKsH,GAAW,oCAIlB9H,sBAAI0I,2BAAJ,WACC,OAAOlI,KAAKmH,OAGb,SAAaT,GACR1G,KAAKmH,IAAaT,IACrB1G,KAAKmH,EAAWT,EAChB1G,KAAKsH,GAAW,EAChBtH,KAAKuH,EAAaC,sCAIVU,yBAAV,WACC,OAAQlI,KAAKmH,EAAiBgB,WAGrBD,yBAAV,SAAwBE,EAAYC,EAAqBC,EAAYC,EAAYC,EAAYC,GAC5FJ,EAAOD,EAAK,GAAME,EAClBD,EAAOD,EAAK,GAAMI,EAClBH,EAAOD,EAAK,GAAMG,EAClBF,EAAOD,EAAK,GAAMI,EAClBH,EAAOD,EAAK,GAAME,EAClBD,EAAOD,EAAK,GAAMK,EAClBJ,EAAOD,EAAK,GAAMG,EAClBF,EAAOD,EAAK,GAAMK,GAGTP,wBAAV,SAAuBQ,EAAYC,EAAsBP,GACxDO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,GAGhBF,0BAAV,SACCE,EAAYQ,EAAmBC,EAC/BC,EAAYC,EAAYC,EAAYC,EACpCC,EAAYC,EAAYC,EAAYC,GAEhCR,EACH7I,KAAKsJ,aAAclB,EAAIQ,EAAKE,EAAIC,EAAIG,EAAIC,GAExCnJ,KAAKsJ,aAAclB,EAAIQ,EAAKK,EAAID,EAAIE,EAAIC,IAIhCjB,oBAAV,SAAmBE,EAAYQ,EAAmBE,EAAYC,EAAYG,EAAYC,GACrFnJ,KAAKsJ,aAAclB,EAAIQ,EAAKE,EAAIC,EAAIG,EAAIC,IAGzCjB,mBAAA,WACC,IAAMxB,EAAU1G,KAAK0G,QACrB,GAAMA,EAAQ6C,MAAd,CAGA,IAAMC,EAAYxJ,KAAKyJ,eACvB,GAAIzJ,KAAKsH,GAAYtH,KAAKuH,IAAeiC,EAAY,CACpDxJ,KAAKsH,GAAW,EAChBtH,KAAKuH,EAAaiC,EAClB,IAAME,EAAW1J,KAAK2H,EAChBiB,EAAM5I,KAAK8H,KACXa,EAAU3I,KAAKiI,EAEf/E,EAAQlD,KAAKiD,EACb0D,EAAS3G,KAAKkH,EACdN,EAAa5G,KAAKoH,EAGlBmB,EAAKoB,KAAKC,IAAa,GAAR1G,EAAa0D,GAC5BiD,EAAKF,KAAKG,IAAa,GAAR5G,EAAaA,EAAQ0D,GACpCmD,EAAK7G,EAGLuF,EAAKkB,KAAKC,IAAc,GAATjD,EAAcC,GAC7BoD,EAAKL,KAAKG,IAAc,GAATnD,EAAcA,EAASC,GACtCqD,EAAKtD,EAELuD,EAAyBxD,EAAQoB,KAEjCqC,EAAID,EAAW5B,GACf8B,EAAIF,EAAW3B,GACf8B,EAAIH,EAAW1B,GACfjJ,EAAI2K,EAAWD,GACfK,GAAKF,EAAID,IAAMvD,EAAaF,EAAQxD,OACpCqH,GAAKhL,EAAI8K,IAAMzD,EAAaF,EAAQC,QAEpCmC,EAAKqB,EACLpB,EAAKoB,EAAIG,EACTtB,EAAKoB,EAAIE,EACTrB,EAAKmB,EAELlB,EAAKmB,EACLlB,EAAKkB,EAAIE,EACTnB,EAAK7J,EAAIgL,EACTlB,EAAK9J,EAELsH,EAAa7G,KAAKqH,EAClBmD,IAAS3D,EAAajE,EAAY6H,UAClCC,IAAS7D,EAAajE,EAAY+H,WAClCC,IAAS/D,EAAajE,EAAYiI,aAClCC,IAASjE,EAAajE,EAAYmI,cAGpC3C,EAAK,EACL4C,EAAK,EACLtC,EAAK,EAGT1I,KAAKsJ,aAAclB,EAAIsB,EAzCZ,EAyC0BnB,EApC1B,EAoCkCE,GAC7CzI,KAAKiL,cAAe7C,EAAIQ,EAAK4B,EAAK1B,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAC9DrJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUnB,EAAIsB,EA5C1B,EA4CkCpB,GAC7CzI,KAAKmL,QAAS/C,EAAIQ,EAAKG,EAAIC,EAAIE,EAAIC,GACnCnJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUK,EAAIF,EApD1B,EAoDkCpB,GAC7CzI,KAAKiL,cAAe7C,EAAIQ,EAAK8B,EAAK5B,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAC9DrJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAjEZ,EAiE0BK,EAAItB,EAAIuB,GAC7ChK,KAAKmL,QAAS/C,EAAIQ,EAAKE,EAAIG,EAAIE,EAAIC,GACnCpJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAzEZ,EAyE0BnB,EAAI0B,EAAID,GAC7ChK,KAAKiL,cAAe7C,EAAIQ,EAAKgC,EAAK9B,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAC9DrJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUnB,EAAIsB,EAAIG,EAAIC,GAC7CjK,KAAKmL,QAAS/C,EAAIQ,EAAKG,EAAIC,EAAII,EAAIC,GACnCrJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUK,EAAIF,EAAII,EAAID,GAC7ChK,KAAKiL,cAAe7C,EAAIQ,EAAKkC,EAAK7B,EAAID,EAAID,EAAID,EAAIO,EAAID,EAAID,EAAID,GAC9DlJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAE/BhL,KAAKyH,EAAcnG,SACnBtB,KAAK6H,EAAUvG,SACftB,KAAK+H,EAAazG,eAlP4B8J,8BCKhD,WAAa1E,EAAkBE,EAAoBC,UAClDC,YACC,IAAIoB,EAA6BxB,EAAS,IAAK,IAAKE,EAAYC,GAChE,IAAIwE,eAAc3E,UAuDrB,OA9DyC5G,OAWxCN,sBAAI8L,2BAAJ,WACC,OAAOtL,KAAKuL,OAAO7E,aAGpB,SAAaA,GACR1G,KAAKuL,OAAO7E,UAAYA,IAC3B1G,KAAKuL,OAAO7E,QAAUA,EACtB1G,KAAKwL,SAAS9E,QAAUA,oCAI1BlH,sBAAI8L,yBAAJ,WACC,OAAOtL,KAAKwL,SAAStI,WAGtB,SAAWA,GACVlD,KAAKwL,SAAStI,MAAQA,mCAGvB1D,sBAAI8L,0BAAJ,WACC,OAAOtL,KAAKwL,SAAS7E,YAGtB,SAAYA,GACX3G,KAAKwL,SAAS7E,OAASA,mCAGxBnH,sBAAI8L,8BAAJ,WACC,OAAOtL,KAAKwL,SAAS3E,gBAGtB,SAAgBD,GACf5G,KAAKwL,SAAS5E,WAAaA,mCAG5BpH,sBAAI8L,8BAAJ,WACC,OAAOtL,KAAKwL,SAAS3E,gBAGtB,SAAgBA,GACf7G,KAAKwL,SAAS3E,WAAaA,mCAGlByE,oBAAV,SAAmBG,GAClBzL,KAAKwL,SAASlK,SACdwF,YAAM4E,kBAASD,IAGhBH,mBAAA,WACCtL,KAAKwL,SAASlK,aA5DyBqK,sBCgBxC,WACCjF,EAAkBxD,EAAeyD,EACjCC,EAAoBgF,EAAyB/E,GAF9C,MAICC,YAAO,IAAIC,aAAc,IAAM,IAAIA,aAAc,IAAM,IAAIC,YAAa,kBAExEC,EAAKhE,EAASC,EACd+D,EAAKC,EAAUP,EACfM,EAAKE,EAAWT,EAChBO,EAAKG,EAAcR,EACnBK,EAAK4E,EAAcD,EACnB3E,EAAKI,EAAcR,EACnBI,EAAKK,GAAW,EAChBL,EAAKM,EAAaC,IAElBP,EAAKQ,EAAgBR,EAAKS,UAAW,mBACrCT,EAAKU,EAAYV,EAAKQ,EAAcG,KACpCX,EAAKY,EAAYZ,EAAKS,UAAW,iBACjCT,EAAKa,KAAOb,EAAKY,EAAUD,KAC3BX,EAAKc,EAAed,EAAKe,WACzBf,EAAKgB,EAAWhB,EAAKc,EAAaH,OA2PpC,OA/R6C9H,OAuC5CN,sBAAIsM,8BAAJ,WACC,OAAO9L,KAAK6L,OAGb,SAAgBD,GACX5L,KAAK6L,IAAgBD,IACxB5L,KAAK6L,EAAcD,EACnB5L,KAAKsH,GAAW,oCAIlB9H,sBAAIsM,8BAAJ,WACC,OAAO9L,KAAKqH,OAGb,SAAgBR,GACX7G,KAAKqH,IAAgBR,IACxB7G,KAAKqH,EAAcR,EACnB7G,KAAKsH,GAAW,oCAIlB9H,sBAAIsM,8BAAJ,WACC,OAAO9L,KAAKoH,OAGb,SAAgBR,GACX5G,KAAKoH,IAAgBR,IACxB5G,KAAKoH,EAAcR,EACnB5G,KAAKsH,GAAW,oCAIlB9H,sBAAIsM,yBAAJ,WACC,OAAO9L,KAAKiD,OAGb,SAAWC,GACNlD,KAAKiD,IAAWC,IACnBlD,KAAKiD,EAASC,EACdlD,KAAKsH,GAAW,oCAIlB9H,sBAAIsM,0BAAJ,WACC,OAAO9L,KAAKkH,OAGb,SAAYP,GACP3G,KAAKkH,IAAYP,IACpB3G,KAAKkH,EAAUP,EACf3G,KAAKsH,GAAW,oCAIlB9H,sBAAIsM,2BAAJ,WACC,OAAO9L,KAAKmH,OAGb,SAAaT,GACR1G,KAAKmH,IAAaT,IACrB1G,KAAKmH,EAAWT,EAChB1G,KAAKsH,GAAW,EAChBtH,KAAKuH,EAAaC,sCAIVsE,yBAAV,SAAwB1D,EAAYC,EAAqBC,EAAYC,EAAYC,EAAYC,GAC5FJ,EAAOD,EAAK,GAAME,EAClBD,EAAOD,EAAK,GAAMI,EAClBH,EAAOD,EAAK,GAAMG,EAClBF,EAAOD,EAAK,GAAMI,EAClBH,EAAOD,EAAK,GAAME,EAClBD,EAAOD,EAAK,GAAMK,EAClBJ,EAAOD,EAAK,GAAMG,EAClBF,EAAOD,EAAK,GAAMK,GAGTqD,wBAAV,SAAuBpD,EAAYC,EAAsBP,GACxDO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,GAGhB0D,0BAAV,SACC1D,EAAYQ,EAAmBmD,EAAaC,EAAanD,EACzDC,EAAYC,EAAYC,EAAYC,EACpCC,EAAYC,EAAYC,EAAYC,GAEhC0C,GAAMC,EACLnD,EACH7I,KAAKsJ,aAAclB,EAAIQ,EAAKE,EAAIC,EAAIG,EAAIC,GAC9B4C,GAAMC,EAChBhM,KAAKsJ,aAAclB,EAAIQ,EAAKK,EAAID,EAAIE,EAAIC,GAC9B4C,EACV/L,KAAKsJ,aAAclB,EAAIQ,EAAKG,EAAIC,EAAIE,EAAIC,GAExCnJ,KAAKsJ,aAAclB,EAAIQ,EAAKE,EAAIC,EAAII,EAAIC,GAGzCpJ,KAAKsJ,aAAclB,EAAIQ,EAAKG,EAAIA,EAAII,EAAIA,IAIhC2C,oBAAV,SACC1D,EAAYQ,EAAmBrJ,EAC/BuJ,EAAYC,EAAYG,EAAYC,EACpC8C,EAAYC,GAER3M,EACHS,KAAKsJ,aAAclB,EAAIQ,EAAKE,EAAIC,EAAIG,EAAIC,GAExCnJ,KAAKsJ,aAAclB,EAAIQ,EAAKqD,EAAIA,EAAIC,EAAIA,IAI1CJ,mBAAA,WACC,IAAMpF,EAAU1G,KAAKmH,EACrB,GAAMT,EAAQ6C,MAAd,CAGA,IAAMC,EAAY9C,EAAQyB,UAC1B,GAAInI,KAAKsH,GAAYtH,KAAKuH,IAAeiC,EAAY,CACpDxJ,KAAKsH,GAAW,EAChBtH,KAAKuH,EAAaiC,EAClB,IAAME,EAAW1J,KAAK2H,EAChBiB,EAAM5I,KAAK8H,KACXa,EAAU3I,KAAKiI,EAEf/E,EAAQlD,KAAKiD,EACb0D,EAAS3G,KAAKkH,EACdN,EAAa5G,KAAKoH,EAGlBmB,EAAKoB,KAAKC,IAAa,GAAR1G,EAAa0D,GAC5BiD,EAAKF,KAAKG,IAAa,GAAR5G,EAAaA,EAAQ0D,GACpCmD,EAAK7G,EAGLuF,EAAKkB,KAAKC,IAAc,GAATjD,EAAcC,GAC7BoD,EAAKL,KAAKG,IAAc,GAATnD,EAAcA,EAASC,GACtCqD,EAAKtD,EAELuD,EAAyBxD,EAAQoB,KAEjCqC,EAAID,EAAW5B,GACf8B,EAAIF,EAAW3B,GACf8B,EAAIH,EAAW1B,GACfjJ,EAAI2K,EAAWD,GACfK,GAAKF,EAAID,IAAMvD,EAAaF,EAAQxD,OACpCqH,GAAKhL,EAAI8K,IAAMzD,EAAaF,EAAQC,QAEpCmC,EAAKqB,EACLpB,EAAKoB,EAAIG,EACTtB,EAAKoB,EAAIE,EACTrB,EAAKmB,EAELlB,EAAKmB,EACLlB,EAAKkB,EAAIE,EACTnB,EAAK7J,EAAIgL,EACTlB,EAAK9J,EAELqM,EAAa5L,KAAK6L,EAClBM,IAAQP,EAAaxL,EAAYgM,KACjCC,IAAQT,EAAaxL,EAAYkM,QACjCC,IAAQX,EAAaxL,EAAYoM,MACjCC,IAAQb,EAAaxL,EAAYsM,OAEjC7F,EAAa7G,KAAKqH,EAClBmD,IAAS3D,EAAajE,EAAY6H,UAClCC,IAAS7D,EAAajE,EAAY+H,WAClCC,IAAS/D,EAAajE,EAAYiI,aAClCC,IAASjE,EAAajE,EAAYmI,cAGpC3C,EAAK,EACL4C,EAAK,EACLtC,EAAK,EAGT1I,KAAKsJ,aAAclB,EAAIsB,EA/CZ,EA+C0BnB,EA1C1B,EA0CkCE,GAC7CzI,KAAKiL,cAAe7C,EAAIQ,EAAKuD,EAAII,EAAI/B,EAAK1B,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACtErJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUnB,EAAIsB,EAlD1B,EAkDkCpB,GAC7CzI,KAAKmL,QAAS/C,EAAIQ,EAAKuD,EAAIpD,EAAIC,EAAIE,EAAIC,EAAIJ,EAAII,GAC/CnJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUK,EAAIF,EA1D1B,EA0DkCpB,GAC7CzI,KAAKiL,cAAe7C,EAAIQ,EAAKuD,EAAIM,EAAI/B,EAAK5B,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACtErJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAvEZ,EAuE0BnB,EAAIE,EAAIuB,GAC7ChK,KAAKmL,QAAS/C,EAAIQ,EAAK2D,EAAIzD,EAAIC,EAAII,EAAIC,EAAIL,EAAII,GAC/CnJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUG,EAAIE,EAAItB,EAAIuB,GAC7ChK,KAAKmL,QAAS/C,EAAIQ,EAAK6D,EAAIzD,EAAIC,EAAIE,EAAIC,EAAIJ,EAAII,GAC/CpJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAvFZ,EAuF0BnB,EAAI0B,EAAID,GAC7ChK,KAAKiL,cAAe7C,EAAIQ,EAAKyD,EAAIE,EAAI3B,EAAK9B,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACtErJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUnB,EAAIsB,EAAIG,EAAIC,GAC7CjK,KAAKmL,QAAS/C,EAAIQ,EAAKyD,EAAItD,EAAIC,EAAII,EAAIC,EAAIL,EAAII,GAC/CpJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAC/B5C,GAAM,EACN4C,GAAM,EACNtC,GAAM,EAGN1I,KAAKsJ,aAAclB,EAAIsB,EAAUK,EAAIF,EAAII,EAAID,GAC7ChK,KAAKiL,cAAe7C,EAAIQ,EAAKyD,EAAII,EAAI3B,EAAK7B,EAAID,EAAID,EAAID,EAAIO,EAAID,EAAID,EAAID,GACtElJ,KAAKkL,YAAaxC,EAAIC,EAASqC,GAE/BhL,KAAKyH,EAAcnG,SACnBtB,KAAK6H,EAAUvG,SACftB,KAAK+H,EAAazG,eA5RwB8J,8BCK5C,WAAa1E,EAAkBE,EAAoBgF,EAAyB/E,UAC3EC,YACC,IAAIgF,EAAyBpF,EAAS,IAAK,IAAKE,EAAYgF,EAAY/E,GACxE,IAAIwE,eAAc3E,UA+DrB,OAtEqC5G,OAWpCN,sBAAImN,2BAAJ,WACC,OAAO3M,KAAKuL,OAAO7E,aAGpB,SAAaA,GACR1G,KAAKuL,OAAO7E,UAAYA,IAC3B1G,KAAKuL,OAAO7E,QAAUA,EACtB1G,KAAKwL,SAAS9E,QAAUA,oCAI1BlH,sBAAImN,yBAAJ,WACC,OAAO3M,KAAKwL,SAAStI,WAGtB,SAAWA,GACVlD,KAAKwL,SAAStI,MAAQA,mCAGvB1D,sBAAImN,0BAAJ,WACC,OAAO3M,KAAKwL,SAAS7E,YAGtB,SAAYA,GACX3G,KAAKwL,SAAS7E,OAASA,mCAGxBnH,sBAAImN,8BAAJ,WACC,OAAO3M,KAAKwL,SAAS5E,gBAGtB,SAAgBA,GACf5G,KAAKwL,SAAS5E,WAAaA,mCAG5BpH,sBAAImN,8BAAJ,WACC,OAAO3M,KAAKwL,SAASI,gBAGtB,SAAgBA,GACf5L,KAAKwL,SAASI,WAAaA,mCAG5BpM,sBAAImN,8BAAJ,WACC,OAAO3M,KAAKwL,SAAS3E,gBAGtB,SAAgBA,GACf7G,KAAKwL,SAAS3E,WAAaA,mCAGlB8F,oBAAV,SAAmBlB,GAClBzL,KAAKwL,SAASlK,SACdwF,YAAM4E,kBAASD,IAGhBkB,mBAAA,WACC3M,KAAKwL,SAASlK,aApEqBqK,sBCHrC,4DAEA,OAFsC7L,UAAA6M,gBCarC,WAAaC,GACZ,IAAMjL,EAAQiL,EAAKjL,MACboC,EAAS6I,EAAK7I,OACd8I,EAAe9I,EAAO+I,YACtBC,EAAeF,EAAe,EAC9BhG,EAAa9C,EAAOiJ,UACpBC,EAAkBjN,KAAKkN,EAAmB,IAAI5B,EACnD3J,EAAMwL,qBAAsBN,GAC5BE,EAAclG,GAEf+F,EAAKQ,iBAAkBH,GAAiB,GAExC,IAAM3K,EAAQsK,EAAKtK,MAEbU,EAAS4J,EAAK5J,OACdqK,EAAcrK,EAAOsK,SAAUhL,GAC/BsJ,EAAa5I,EAAOgK,QAAS1K,GAC7BiL,EAAcvN,KAAKwN,EAAe,IAAIb,EAC3ChL,EAAM8L,iBAAkBZ,EAAcQ,GACtCN,EACAnB,EACA/E,GAED+F,EAAKQ,iBAAkBG,GAAa,GAEpC,IAAMhJ,EAAUqI,EAAKrI,QACfmJ,EAAenJ,EAAQ+I,SAAUhL,GACjCqL,EAAcpJ,EAAQyI,QAAS1K,GAC/BsL,EAAe5N,KAAK6N,EAAgB,IAAIC,EAC7CnM,EAAM8L,iBAAkBZ,EAAca,GACtCX,EACAY,EACA9G,GAED+F,EAAKQ,iBAAkBQ,GAAc,GAErC5N,KAAK+N,EAA8BlB,EACnC7M,KAAKgO,EAA0BnB,EAC/B7M,KAAKiO,EAAmBZ,EACxBrN,KAAKkO,GAA2BrB,EAChC7M,KAAKmO,GAAoBT,EAEzBd,EAAKwB,cAAepO,MAuGtB,OApGCqO,qBAAA,SAAUzB,EAAa1J,EAAeyD,GACrC,IAAMhF,EAAQiL,EAAKjL,MACbW,EAAQsK,EAAKtK,MACbyB,EAAS6I,EAAK7I,OACd8I,EAAe9I,EAAO+I,YACtBC,EAAeF,EAAe,EAC9BhG,EAAa9C,EAAOiJ,UAGpBhL,EAAa4K,EAAK5K,WAClBiL,EAAkBjN,KAAKkN,EACvBoB,EAAkBtM,EAAWuM,SAAUjM,GAC7C,GAAuB,MAAnBgM,EAA0B,CAC7B,IAAME,EAAkBxM,EAAWyM,SAAUnM,GACzC,EAAIkM,GACHxO,KAAK+N,IAAgClB,IACxC7M,KAAK+N,EAA8BlB,EACnCI,EAAgBvG,QAAU/E,EAAMwL,qBAAsBN,GACtDI,EAAgBrG,WAAamG,GAE9BE,EAAgByB,KAAOJ,EACvBrB,EAAgB7K,MAAQoM,EACxBvB,EAAgB/J,MAAQA,EACxB+J,EAAgBtG,OAASA,EACzBsG,EAAgBpG,WAAaA,EAC7BoG,EAAgB0B,SAAU,GAE1B1B,EAAgB0B,SAAU,OAG3B1B,EAAgB0B,SAAU,EAI3B,IAAM3L,EAAS4J,EAAK5J,OACduK,EAAcvN,KAAKwN,EACnBoB,EAAc5L,EAAOuL,SAAUjM,GACrC,GAAmB,MAAfsM,EAAsB,CACzB,IAAMC,EAAc7L,EAAOyL,SAAUnM,GACrC,GAAI,EAAIuM,EAAc,CACrB,IAAMxB,EAAcrK,EAAOsK,SAAUhL,GACjCtC,KAAKgO,IAA4BnB,GAAgB7M,KAAKiO,IAAqBZ,IAC9ErN,KAAKgO,EAA0BnB,EAC/B7M,KAAKiO,EAAmBZ,EACxBE,EAAY7G,QAAU/E,EAAM8L,iBAAkBZ,EAAcQ,GAC5DE,EAAY3G,WAAamG,GAE1B,IAAM+B,EAAc9L,EAAO+L,SAAUzM,GAC/BsJ,EAAa5I,EAAOgK,QAAS1K,GACnCiL,EAAYmB,KAAOE,EACnBrB,EAAYnL,MAAQyM,EACpB,IAAMG,EAAeF,EAAczB,EACnCE,EAAYnH,GAAK4I,EACjBzB,EAAYlH,GAAK2I,EACjBzB,EAAYrK,MAAQA,EAAuB,EAAf8L,EAC5BzB,EAAY5G,OAASA,EAAwB,EAAfqI,EAC9BzB,EAAY3B,WAAaA,EACzB2B,EAAY1G,WAAaA,EACzB0G,EAAYoB,SAAU,OAEtBpB,EAAYoB,SAAU,OAGvBpB,EAAYoB,SAAU,EAIvB,IAAMpK,EAAUqI,EAAKrI,QACfqJ,EAAe5N,KAAK6N,EACpBoB,EAAe1K,EAAQgK,SAAUjM,GACvC,GAAoB,MAAhB2M,EAAuB,CAC1B,IAAMC,EAAe3K,EAAQkK,SAAUnM,GACvC,GAAI,EAAI4M,EAAe,CACtB,IAAMxB,EAAenJ,EAAQ+I,SAAUhL,GACnCtC,KAAKkO,KAA6BrB,GAAgB7M,KAAKmO,KAAsBT,IAChF1N,KAAKkO,GAA2BrB,EAChC7M,KAAKmO,GAAoBT,EACzBE,EAAalH,QAAU/E,EAAM8L,iBAAkBZ,EAAca,GAC7DE,EAAahH,WAAamG,GAE3B,IAAMY,EAAcpJ,EAAQyI,QAAS1K,GAC/B6M,EAAgB5K,EAAQ6K,UAAW9M,GACnC+M,EAAe9K,EAAQwK,SAAUzM,GACvCsL,EAAac,KAAOO,EACpBrB,EAAaxL,MAAQ8M,EACrB,IAAMI,EAA4BH,EAAgBE,EAAe3B,EACjEE,EAAaxH,GAAKkJ,EAClB1B,EAAavH,GAAKiJ,EAClB1B,EAAa1K,MAAQA,EAAoC,EAA5BoM,EAC7B1B,EAAajH,OAASA,EAAqC,EAA5B2I,EAC/B1B,EAAahC,WAAa+B,EAC1BC,EAAa/G,WAAaA,EAC1B+G,EAAae,SAAU,OAEvBf,EAAae,SAAU,OAGxBf,EAAae,SAAU,SR7J1B,SAAYrK,GACXA,mBACAA,yBACAA,uBACAA,6BACAA,yBACAA,gCACAA,kCACAA,gCACAA,+BACAA,6BACAA,6BACAA,4BACAA,4BACAA,gCACAA,0BAEAA,uCACAA,uCACAA,uCACAA,uCAEAA,8BAtBD,CAAYA,IAAAA,OSGZ,ICAWiL,eDAX,cA6EA,OA5EQC,KAAP,SAAW1O,EAAoBwB,GAC9B,OAA8B,IAApBxB,EAASwB,IAGbkN,YAAP,SAAkB1O,GACjB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAWoL,UAGpCF,aAAP,SAAmB1O,GAClB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAWqL,WAGpCH,YAAP,SAAkB1O,GACjB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAWsL,UAGpCJ,cAAP,SAAoB1O,GACnB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAWsL,QAAUtL,EAAWuL,aAGzDL,WAAP,SAAiB1O,GAChB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAWwL,SAGpCN,aAAP,SAAmB1O,GAClB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAWwL,OAASxL,EAAWyL,YAGxDP,cAAP,SAAoBlN,GACnB,OAAOkN,EAAYC,GAAInN,EAAOgC,EAAW0L,YAAgBR,EAAYC,GAAInN,EAAOgC,EAAWwL,SAGrFN,YAAP,SAAkB1O,GACjB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAW2L,UAGpCT,aAAP,SAAmB1O,GAClB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAW0L,WAGpCR,aAAP,SAAmB1O,GAClB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAW4L,YAGpCV,eAAP,SAAqB1O,GACpB,OAAS0O,EAAYC,GAAI3O,EAAQwD,EAAW0L,SAAW1L,EAAW4L,YAG5DV,YAAP,SAAkB1O,GACjB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAW6L,UAGpCX,cAAP,SAAoB1O,GACnB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAW8L,YAGpCZ,WAAP,SAAiB1O,GAChB,OAAO0O,EAAYC,GAAI3O,EAAQwD,EAAW+L,SAGpCb,OAAP,SACCc,EAA8BC,EAC9BC,EAAyBC,GAEzBH,EAAYI,SAAUH,EAAkBE,EAAMD,EAAOlO,QACrDkO,EAAOG,GAAI,eAAe,SAAEC,GAC3BN,EAAYI,SAAUH,EAAkBE,EAAMG,QAIzCpB,UAAP,SACCc,EAA8BE,EAC9BC,gBAAAA,EAA+CjB,EAAYqB,aAE3DrB,EAAYsB,KAAMR,EAAahM,EAAW0L,SAAUQ,EAAQC,UC3E9D,SAAWlB,GAEVA,mBACAA,qBACAA,+BAGAA,iCACAA,mCAEAA,mBACAA,qBAEAA,iBACAA,iBACAA,iBACAA,kBAGAA,wBACAA,oBACAA,0BACAA,0BACAA,wBAvBD,CAAWA,IAAAA,OA2EX,ICvEWwB,EDuELC,EAA8E,CACnFC,MACAC,MACAC,MACAC,OACAC,MACAC,OAGKC,EAA4E,CACjFC,OACAC,KACA7R,KACAiJ,mBA+BA,WAAa6I,GACZ,IAAMC,EAAuB3R,KAAK4R,QAASF,GAK3C,GAJA1R,KAAK6R,aAAcF,EAAO,GAC1B3R,KAAK8R,QAASH,GACd3R,KAAK+R,aAAcJ,QACnB3R,KAAK+R,aAAcJ,OACE,IAAjBA,EAAMjR,OAAe,CACxB,IAAMsR,EAAOL,EAAO,GACpB,IAAM7N,EAAckO,GAEnB,YADAhS,KAAKiS,GAAQD,GAIf,MAAM,IAAIrR,MAAO,oBAAoB+Q,OA4KvC,OAzKCQ,yBAAA,SAAcP,EAAsBQ,GACnC,IAAK,IAAI5Q,EAAI4Q,EAAM3Q,EAAOmQ,EAAMjR,OAAQa,EAAIC,IAAQD,EAEnD,OADcoQ,EAAOpQ,GACS,CAC7B,IAAK,IAAI6Q,EAAI7Q,EAAI,EAAG8Q,EAAOV,EAAMjR,OAAQ0R,EAAIC,IAAQD,EAEpD,OADcT,EAAOS,IAErB,OACC,IAAME,EAAUX,EAAMY,OAAQhR,EAAI,EAAG6Q,EAAI7Q,GAGzC,OAFA+Q,EAAQ5R,QAAU,OAClBiR,EAAOpQ,GAAM,GAAuB+Q,IAErC,OACCtS,KAAK6R,aAAcF,EAAOS,GAC1BC,EAAOV,EAAMjR,OAKf,MAAM,IAAIC,MAAO,0BAKpBuR,wBAAA,SAAaF,GACNlO,EAAckO,QAAUA,EAAM,IACnChS,KAAK8R,QAASE,EAAM,KAItBE,oBAAA,SAASP,GACR,IAAK,IAAIpQ,EAAI,EAAGC,EAAOmQ,EAAMjR,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAMyQ,EAAOL,EAAOpQ,GACpB,OAAIyQ,OAAiCA,EACpC,GAAIzQ,GAAK,GAAKuC,EAAc6N,EAAOpQ,EAAI,IAAQ,CAC9C,KAAIA,EAAI,EAAIC,IAAUsC,EAAc6N,EAAOpQ,EAAI,IAO9C,MAAM,IAAIZ,MAAO,4BANjB,IAAM2R,EAAUX,EAAMY,OAAQhR,EAAI,EAAG,GAAK,GACpCiR,MAASR,MACfL,EAAOpQ,GAAM,CAAEiR,EAAMF,GACrB9Q,EAAOmQ,EAAMjR,OACbV,KAAKyS,YAAaH,QAKbE,MAASR,MACfL,EAAOpQ,GAAMiR,OAGdxS,KAAKyS,YAAaT,GAClBxQ,EAAOmQ,EAAMjR,SAKhBwR,6BAAA,SAAkBF,EAAmBU,EAAmCC,GACjE7O,EAAckO,SACfA,EAAM,GACThS,KAAK+R,aAAcC,EAAM,GAAKU,EAAWC,OAC/BX,EAAM,QAAyBA,EAAM,GAC/ChS,KAAK4S,iBAAkBZ,EAAM,GAAKU,EAAWC,OACnCX,EAAM,QAAwBA,EAAM,QAC9CA,EAAM,SAAwBA,EAAM,KACpChS,KAAK4S,iBAAkBZ,EAAM,GAAKU,EAAWC,GAC7C3S,KAAK4S,iBAAkBZ,EAAM,GAAKU,EAAWC,MAKhDT,yBAAA,SAAcP,EAAsBe,EAAmCC,GACtE,IAAK,IAAIpR,EAAI,EAAGC,EAAOmQ,EAAMjR,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAMyQ,EAAOL,EAAOpQ,GACpB,GAAIyQ,IAASU,GAAaV,IAASW,EAAY,CAC9C,GAAI,EAAIpR,GAAKA,EAAI,EAAIC,EAAO,CAC3B,IAAM8D,EAAOqM,EAAOpQ,EAAI,GAClBiE,EAAQmM,EAAOpQ,EAAI,GACzB,IAAMuC,EAAcwB,KAAYxB,EAAc0B,GAAU,CACvDmM,EAAMY,OAAQhR,EAAG,GACjBoQ,EAAOpQ,EAAI,GAAM,CAAEyQ,EAAM1M,EAAME,GAC/BjE,GAAK,EACLC,EAAOmQ,EAAMjR,OACbV,KAAK4S,iBAAkBtN,EAAMoN,EAAWC,GACxC3S,KAAK4S,iBAAkBpN,EAAOkN,EAAWC,GACzC,UAGF,MAAM,IAAIhS,MAAO,uCAAuCqR,GAExDhS,KAAK4S,iBAAkBZ,EAAMU,EAAWC,GACxCnR,EAAOmQ,EAAMjR,SAKhBwR,oBAAA,SAASR,GAGR,IAFA,IAAMmB,EAAa,iDACbC,EAAkB,KACV,CACb,IAAMC,EAAUF,EAAWG,KAAMtB,GACjC,GAAe,MAAXqB,EAmBH,MAlBA,IAAME,EAAQF,EAAS,GACjBG,EAAoBlC,EAAwBiC,GAClD,GAAyB,MAArBC,EACHJ,EAAOtS,KAAM0S,OACP,CACN,IAAMC,EAAcC,WAAYH,GAChC,GAAIE,GAAgBA,EACnB,MAAM,IAAIxS,MAAO,qBAAqBsS,UAAaF,EAAQnS,cAAa8Q,OAGzE,IAAM2B,EAAmB9B,EAAuB0B,EAAOA,EAAMvS,OAAS,IAC9C,MAApB2S,EACHP,EAAOtS,KAAK,CAAE6S,EAAgC,IAAdF,IAEhCL,EAAOtS,KAAK,IAAmB2S,KAOnC,OAAOL,GAGEZ,qBAAV,SAAoBF,EAAYhR,EAAgBsS,EAAcrO,EAAiBsO,GAC9E,OAAQvB,EAAM,IACd,OACC,OAAOhS,KAAKwT,SAAUxB,EAAM,GAAK,GAAKhR,EAAQsS,EAAMrO,EAASsO,GAG9D,OACC,OAASvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GAE3D,OACC,OAASvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GAG3D,OACC,OAAOvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GACvDvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GACnD,OACC,OAAOvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GACvDvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GACnD,OACC,OAAOvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GACvDvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GACnD,QACC,OAAOvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GACvDvT,KAAKwT,SAAUxB,EAAM,GAAKhR,EAAQsS,EAAMrO,EAASsO,GAGnD,QACC,OAAOvB,EAAM,GAAMhR,EACpB,QACC,OAAOgR,EAAM,GAAMsB,EACpB,QACC,OAAOtB,EAAM,GAAM/M,EACpB,QACC,OAAO+M,EAAM,GAAMuB,EACpB,QACC,OAAOvB,EAAM,GAGd,OAAO,GAGRE,sBAAA,SAAWlR,EAAgBsS,EAAcrO,EAAiBsO,GACzD,OAAOvT,KAAKwT,SAAUxT,KAAKiS,GAAOjR,EAAQsS,EAAMrO,EAASsO,sBE1S3D,cAqDA,OA1CQE,WAAP,SAAiBC,GAChB,OAAO1T,KAAKmS,KAAMuB,GAAY,IAGxBD,OAAP,SAAaC,GACZ,OAAO1T,KAAKmS,KAAMuB,GAAY,IAGdD,OAAjB,SAAuBC,EAAqCC,GAC3D,GAAkB,MAAdD,GAAsB5P,EAAc4P,GACvC,OAAO,KACD,GAAI7Q,EAAc6Q,GAAe,CACvC,GAAIC,EACH,OAAQD,GACR,IAAK,SACJ,OAAOD,EAAiBG,SAASC,OAClC,IAAK,UACJ,OAAOJ,EAAiBG,SAASE,aAGlC,OAAQJ,GACR,IAAK,OACL,IAAK,YACJ,OAAOD,EAAiBM,KAAKC,UAC9B,IAAK,UACJ,OAAOP,EAAiBM,KAAKD,QAI/B,IAAMG,EAAmB,IAAI/B,EAAmBwB,GAChD,OAAO,SAAE1S,EAAgBsS,EAAcrO,EAAiBsO,GACvD,OAAOU,EAAiBC,UAAWlT,EAAQsS,EAAMrO,EAASsO,IAErD,GAAI7R,EAAgBgS,GAC1B,OAAOA,EAEP,IAAMS,EAAST,EACf,OAAO,SAAE1S,EAAgBsS,EAAcrO,EAAiBsO,GACvD,OAAOY,EAAOD,UAAWlT,EAAQsS,EAAMrO,EAASsO,KAhD5CE,WAAW,CACjBK,QAAS,SAAElU,EAAW6R,EAAWnS,GAAe,OAAAA,GAChDuU,OAAQ,SAAEjU,EAAW6R,GAAe,MAAY,IAAV7R,EAAI6R,KAGpCgC,OAAO,CACbO,UAAW,SAAEpU,GAAe,OAAAA,GAC5BkU,QAAS,SAAElU,EAAW6R,EAAWnS,GAAe,OAAAM,EAAIN,UDRtD,SAAWyR,GACVA,mBACAA,qBACAA,uBAHD,CAAWA,IAAAA,OAMX,IEbYqD,eFkBX,WAAaxH,EAAuByH,GACnCrU,KAAKsU,GAAQ1H,EACb5M,KAAKuU,GAAaF,EAClBrU,KAAKwU,KA8HP,OA3HChV,sBAAIiV,qBAAJ,WACC,IAAMJ,EAAYrU,KAAKuU,GACvB,OAAmB,MAAfF,EAAUjO,EACNiO,EAAUjO,EAEVpG,KAAKsU,GAAMlO,OAIpB,SAAOA,GACN,IAAMwG,EAAO5M,KAAKsU,GAClB,GAAIxQ,EAAcsC,GACjBwG,EAAKxG,EAAIA,MACH,CACN,IAAMiO,EAAYrU,KAAKuU,GACjBG,EAASjB,EAAiBkB,SAAUvO,GACtCiO,EAAUjO,IAAMsO,IACnBL,EAAUjO,EAAIsO,EACd9H,EAAKgI,4CAKRpV,sBAAIiV,qBAAJ,WACC,IAAMJ,EAAYrU,KAAKuU,GACvB,OAAmB,MAAfF,EAAUhO,EACNgO,EAAUhO,EAEVrG,KAAKsU,GAAMjO,OAIpB,SAAOA,GACN,IAAMuG,EAAO5M,KAAKsU,GAClB,GAAIxQ,EAAcuC,GACjBuG,EAAKvG,EAAIA,MACH,CACN,IAAMgO,EAAYrU,KAAKuU,GACjBG,EAASjB,EAAiBkB,SAAUtO,GACtCgO,EAAUhO,IAAMqO,IACnBL,EAAUhO,EAAIqO,EACd9H,EAAKgI,4CAKRH,wBAAA,WACCzU,KAAKwU,OAGNC,wBAAA,WACC,OAAgD,MAAvCzU,KAAKwU,KAGfhV,sBAAIiV,yBAAJ,WACC,IAAMJ,EAAYrU,KAAKuU,GACvB,OAAIvU,KAAK6U,cACD,OACsB,MAAnBR,EAAUnR,MACbmR,EAAUnR,MAEVlD,KAAKsU,GAAMpR,WAIpB,SAAWA,GACV,GAAIY,EAAcZ,GACjBlD,KAAKsU,GAAMpR,MAAQA,OACb,GAAc,SAAVA,EACJlD,KAAK6U,gBACV7U,KAAK8U,cACQ9U,KAAKsU,GACbS,kBACL1U,EAAciB,OAAQtB,KAAKsU,SAEtB,CACN,IAAMD,EAAYrU,KAAKuU,GACjBG,EAASjB,EAAiBuB,KAAM9R,GAClCmR,EAAUnR,QAAUwR,IACvBL,EAAUnR,MAAQwR,EAClB1U,KAAKsU,GAAMM,4CAKdH,yBAAA,WACCzU,KAAKwU,OAGNC,yBAAA,WACC,OAAiD,MAAxCzU,KAAKwU,KAGfhV,sBAAIiV,0BAAJ,WACC,IAAMJ,EAAYrU,KAAKuU,GACvB,OAAIvU,KAAKiV,eACD,OACuB,MAApBZ,EAAU1N,OACb0N,EAAU1N,OAEV3G,KAAKsU,GAAM3N,YAIpB,SAAYA,GACX,GAAI7C,EAAc6C,GACjB3G,KAAKsU,GAAM3N,OAASA,OACd,GAAe,SAAXA,EACJ3G,KAAKiV,iBACVjV,KAAKkV,eACQlV,KAAKsU,GACbS,kBACL1U,EAAciB,OAAQtB,KAAKsU,SAEtB,CACN,IAAMD,EAAYrU,KAAKuU,GACjBG,EAASjB,EAAiBuB,KAAMrO,GAClC0N,EAAU1N,SAAW+N,IACxBL,EAAU1N,OAAS+N,EACnB1U,KAAKsU,GAAMM,kDE/If,SAAYR,GACXA,mBACAA,uBACAA,qBACAA,mBAJD,CAAYA,IAAAA,OCEZ,ICFYe,ECAAC,ECAAC,eHEZ,cA4BA,OAxBeC,uBAAd,SAAoC3T,GACnC3B,KAAKuV,oBAAsB5T,GAGd2T,uBAAd,WACC,OAAOtV,KAAKuV,qBAGCD,cAAd,WACC,GAAqB,MAAjBtV,KAAKwV,SAAmB,CAC3B,IAAMC,EAAoBzV,KAAK0V,uBAC/B,GAAyB,MAArBD,EACH,MAAM,IAAI9U,MAAO,gCAElBX,KAAKwV,SAAW,IAAIC,EAErB,OAAOzV,KAAKwV,UAGCF,cAAd,SAA2BhV,GAC1B,IAAMkC,EAASxC,KAAKwV,SAEpB,OADAxV,KAAKwV,SAAWlV,EACTkC,GAzBO8S,sBAAiD,KACjDA,WAA0B,uBIwH1C,cAiIA,OAhIQK,gBAAP,SAAsBC,GACrB,MAAmB,UAAVA,EAAEC,KAA6B,UAAVD,EAAEC,KAA+B,KAAZD,EAAEE,OAA4B,KAAZF,EAAEE,OAGjEH,eAAP,SAAqBC,GACpB,MAAmB,YAAVA,EAAEC,KAAiC,KAAZD,EAAEE,OAG5BH,iBAAP,SAAuBC,GACtB,MAAmB,cAAVA,EAAEC,KAAmC,KAAZD,EAAEE,OAG9BH,iBAAP,SAAuBC,GACtB,MAAmB,cAAVA,EAAEC,KAAmC,KAAZD,EAAEE,OAG9BH,kBAAP,SAAwBC,GACvB,MAAmB,eAAVA,EAAEC,KAAoC,KAAZD,EAAEE,OAG/BH,cAAP,SAAoBC,GACnB,MAAmB,QAAVA,EAAEC,KAA6B,KAAZD,EAAEE,OAGxBH,aAAP,SAAmBC,GAClB,MAAmB,QAAVA,EAAEC,KAA6B,IAAZD,EAAEE,OAGxBH,YAAP,SAAkBC,GACjB,OAASA,EAAEG,UAAuB,MAAVH,EAAEC,KAA2B,KAAZD,EAAEE,QAGrCH,YAAP,SAAkBC,GACjB,OAASA,EAAEG,UAAuB,MAAVH,EAAEC,KAA2B,KAAZD,EAAEE,QAGrCH,YAAP,SAAkBC,GACjB,OAASA,EAAEG,UAAaH,EAAEI,WAAwB,MAAVJ,EAAEC,KAA2B,KAAZD,EAAEE,QAGrDH,cAAP,SAAoBC,GACnB,OAASA,EAAEG,SAAWH,EAAEI,WAAwB,MAAVJ,EAAEC,KAA2B,KAAZD,EAAEE,QAGnDH,cAAP,SAAoBC,GACnB,MAAmB,WAAVA,EAAEC,KAAgC,KAAZD,EAAEE,OAG3BH,iBAAP,SAAuBC,GACtB,OAASA,EAAEG,UAAaH,EAAEI,WAAwB,MAAVJ,EAAEC,KAA2B,KAAZD,EAAEE,QAGrDH,UAAP,SAAgBC,GACf,MAAmB,UAAVA,EAAEC,KAA+B,KAAZD,EAAEE,OAG1BH,oBAAP,SAA0BC,GACzB,OAAwB,IAAfA,EAAEI,UAGLL,aAAP,SAAmBM,GAClB,GAAMpT,EAAcoT,GAEb,CACN,IAGIC,EAHExE,EAAauE,EACbE,EAAazE,EAAW7Q,QAAQ,MAClCuV,SAEA,GAAKD,GACRC,EAAgB1E,EAAW2E,UAAW,EAAGF,GAAaG,OACtDJ,EAAQxE,EAAW2E,UAAWF,EAAa,GAAIG,QAE/CF,EAAgB1E,EAAW4E,OAE5B,IAAMC,EAAOH,EAAcI,cAAcC,MAAO,KAKhD,OAhM4B,SAAEC,GAChC,IAAMb,EAAMa,EAASb,IACrB,GAAIA,EAAInV,QAAU,EAAI,CACjBgW,EAASC,QACZD,EAASb,IAAMA,EAAIe,eAEpB,IAAMC,EAAOhB,EAAIiB,WAAY,GAG5BJ,EAASZ,MAFN,IAAMe,GAAQA,GAAQ,IAERA,EAAO,GAEPA,OAGlB,OAAQhB,GACR,IAAK,QACJa,EAASZ,MAAQ,GACjB,MACD,IAAK,QACJY,EAASb,IAAM,IACfa,EAASZ,MAAQ,GACjB,MACD,IAAK,SACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,KACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,MACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,MACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,MACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,WACAY,EAASC,MACZD,EAASZ,MAAQ,GAEjBY,EAASZ,MAAQ,IAElB,MACD,IAAK,UACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,YACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,YACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,aACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,SACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,SACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,SACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,WACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,YACJY,EAASZ,MAAQ,EACjB,MACD,IAAK,IACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,QACJY,EAASZ,MAAQ,GACjB,MACD,IAAK,aACJY,EAASZ,MAAQ,IACjB,MACD,IAAK,MACJY,EAASZ,MAAQ,EAInB,OAAOY,EAmFEK,CAAuB,CAC7BC,IALoB,GAAKT,EAAK1V,QAAS,OAMvCoW,KALqB,GAAKV,EAAK1V,QAAS,QAMxC8V,MALsB,GAAKJ,EAAK1V,QAAS,SAMzCgV,IALmBU,EAAMA,EAAK7V,OAAS,GAMvCoV,MAAO,EACPoB,UAvBD,OAAOjB,GA4BFN,WAAP,SAAiBe,GAChB,IAAMS,EAAQ,GAWd,OAVIT,EAASO,MACZE,EAAM3W,KAAM,QAETkW,EAASC,OACZQ,EAAM3W,KAAM,SAETkW,EAASM,KACZG,EAAM3W,KAAM,OAEb2W,EAAM3W,KAAMkW,EAASb,IAAIe,eAClBO,EAAMC,KAAM,MAGbzB,KAAP,SACC7U,EACAmV,EACAoB,GAEA,IAAMX,EAAW1W,KAAKsX,WAAYrB,GAClCsB,SAASC,KAAKC,iBAAkB,WAAW,SAAE7B,GAE3CA,EAAE8B,SAAWhB,EAASM,KAAOpB,EAAEG,UAAYW,EAASO,MACpDrB,EAAEI,WAAaU,EAASC,OACtBf,EAAEC,MAAQa,EAASb,KAAOD,EAAEE,QAAUY,EAASZ,QAE7ChV,EAAO6W,iBACY,MAAlBjB,EAASQ,MACZpW,EAAO8W,KAAMlB,EAASQ,OACD,MAAXG,GACVA,EAASzB,IAGXA,EAAEiC,wCC9ON,cAkSA,OA7RCrY,sBAAWsY,mBAAX,WACC,MAAS,iBAAkBP,0CAG5B/X,sBAAWsY,aAAX,WACC,MAAO,8CAGRtY,sBAAWsY,cAAX,WACC,MAAO,+CAGRtY,sBAAWsY,eAAX,WACC,MAAO,gDAGRtY,sBAAWsY,eAAX,WACC,MAAO,gDAGRtY,sBAAWsY,cAAX,WACC,MAAO,+CAGRtY,sBAAWsY,aAAX,WACC,MAAO,8CAGRtY,sBAAWsY,cAAX,WACC,MAAO,+CAGRtY,sBAAWsY,YAAX,WACC,MAAO,6CAGRtY,sBAAWsY,gBAAX,WACC,MAAO,iDAGDA,WAAP,SACClC,EACAmC,EACAvV,GAEA,GAAI,YAAaoT,EAAI,CACpB,IAAMoC,EAAUpC,EAAEqC,eACZC,EAAQF,EAASA,EAAQtX,OAAS,GAC3B,MAATwX,EACHH,EAAmBI,mBAAoB3V,EAAQ0V,EAAME,QAASF,EAAMG,SAEpEN,EAAmBI,mBAAoB3V,EAAQ,EAAG,QAGnDuV,EAAmBI,mBAAoB3V,EAAQoT,EAAEwC,QAASxC,EAAEyC,SAE7D,OAAO7V,GAGDsV,UAAP,SAAgBhX,EAAqCuW,GAArD,WACC,GAAMrX,KAAKsY,UAEJ,CACN,IAAIC,GAAW,EACXC,EAAQ,EACRC,EAAQ,EACRC,EAAiE,KAC/DC,EAAU,WACfJ,GAAW,EACPG,IACHA,EAAwBE,IAAKC,EAAIC,GACjCJ,EAA0B,OAU5B5X,EAAO6P,GAAI,SAAS,SAAEiF,GACjB2C,GACHI,IAEDtB,EAASzB,MAEV,IAAMiD,EAAK7Y,KAAK+Y,GACVD,EAAO,SAAElD,GACV2C,IACHI,IACI1R,EAAK+R,SAAUlY,EAAQ8U,EAAE9U,SAjBP,SAAE8U,GACzB,IAAMqD,EAASrD,EAAEhO,KAAKqR,OAChBC,EAAKvP,KAAKwP,IAAKX,EAAQS,EAAO7S,GAC9BgT,EAAKzP,KAAKwP,IAAKV,EAAQQ,EAAO5S,GAC9BgT,EAAYpS,EAAKqS,yBACvB,OAASJ,GAAMG,GAAaD,GAAMC,EAa5BE,CAAiB3D,IACpByB,EAASzB,KAKb9U,EAAO6P,GAAI3Q,KAAKwZ,MAAM,SAAE5D,GACvB,GAAI2C,EAAW,CACd,IAAMkB,EAAS7D,EAAEhO,KAAKqR,OACtBT,EAAQiB,EAAOrT,EACfqS,EAAQgB,EAAOpT,MACT,CACNkS,GAAW,EACX,IAAMmB,EAAS9D,EAAEhO,KAAKqR,OACtBT,EAAQkB,EAAOtT,EACfqS,EAAQiB,EAAOrT,EACXqS,IACHA,EAAwBE,IAAKC,EAAIC,GACjCJ,EAA0B,MAE3B,IAAMxX,EAAQb,EAAcsZ,SAAU7Y,GAClCI,IACHwX,EAA0BxX,EAAMuK,SAASmO,QAAQC,aACzBC,KAAMjB,EAAIC,YAtDrChY,EAAO6P,GAAI,QAAS0G,IA6DfS,cAAP,SACChX,EACAiZ,EACAC,GAHD,WAKC,GAAMha,KAAKsY,UAEJ,CACN,IAAI2B,GAAW,EACXC,EAAQ,EACRC,EAAQ,EACRC,EAA2B,KAC3BC,EAAiE,KAC/DC,EAAiB,WACL,MAAbF,IACHG,aAAcH,GACdA,EAAY,OAGRI,EAAU,WACfP,GAAW,EACPI,IACHA,EAAwBzB,IAAK6B,EAAIC,GACjCL,EAAwBzB,IAAK+B,EAAMC,GACnCP,EAA0B,MAE3BC,KAEKO,EAAkB,SAAEjF,GACzB,IAAMqD,EAASrD,EAAEhO,KAAKqR,OAChBC,EAAKvP,KAAKwP,IAAKe,EAAQjB,EAAO7S,GAC9BgT,EAAKzP,KAAKwP,IAAKgB,EAAQlB,EAAO5S,GAC9BgT,EAAYpS,EAAKqS,yBACvB,OAASJ,EAAKG,GAAaD,EAAKC,GAEjCvY,EAAO6P,GAAI,SAAS,SAAEiF,GACjBqE,GACHO,IAEDT,EAASnE,MAEV,IAAM6E,EAAKza,KAAK+Y,GACV4B,EAAO3a,KAAK8a,KACZJ,EAAO,SAAE9E,GACVqE,IACHO,IACIvT,EAAK+R,SAAUlY,EAAQ8U,EAAE9U,SACxB+Z,EAAiBjF,IACpBmE,EAASnE,KAKPgF,EAAS,SAAEhF,GACZqE,GACChT,EAAK+R,SAAUlY,EAAQ8U,EAAE9U,UACtB+Z,EAAiBjF,IACtB4E,MAKJ1Z,EAAO6P,GAAI3Q,KAAKwZ,MAAM,SAAE5D,GACvB,IAAMqE,EAAW,CAChBA,GAAW,EACX,IAAMc,EAASnF,EAAEhO,KAAKqR,OACtBiB,EAAQa,EAAO3U,EACf+T,EAAQY,EAAO1U,EACfiU,IAEI,YADO1E,EAAEhO,KAAKoT,gBAEjBZ,EAAYa,OAAOC,YAAW,WACzBjB,IACHO,IACAR,EAAapE,MAEZ3O,EAAKkU,uBAELd,IACHA,EAAwBzB,IAAK6B,EAAIC,GACjCL,EAAwBzB,IAAK+B,EAAMC,GACnCP,EAA0B,MAE3B,IAAMnZ,EAAQb,EAAcsZ,SAAU7Y,GAClCI,KACHmZ,EAA0BnZ,EAAMuK,SAASmO,QAAQC,aACzBC,KAAMW,EAAIC,GAClCL,EAAwB1J,GAAIgK,EAAMC,aAjFrC9Z,EAAO6P,GAAI,QAASoJ,IAwFfjC,aAAP,SAAmBhX,EAAqBuW,GAAxC,WACC,GAAMrX,KAAKsY,UAEJ,CACN,IAAI8C,EAAW,EACXC,EAAQ,EACRC,EAAQ,EACRC,EAAY,EAEhBza,EAAO2W,iBAAkB,WAAYJ,GAErCvW,EAAO2W,iBAAkB,YAAY,SAAE7B,GACtC,GAAiB,IAAbwF,GAA+B,IAAbA,EAAiB,CACtC,IAAMpD,EAAUpC,EAAEqC,eACZC,EAAsBF,EAASA,EAAQtX,OAAS,GACtD,GAAa,MAATwX,EAAgB,CACnB,IAAMgB,EAAKmC,EAAQnD,EAAME,QACnBgB,EAAKkC,EAAQpD,EAAMG,QACzB,GAAI1O,KAAKwP,IAAKD,GAAOvP,KAAKwP,IAAKC,GAAOnS,EAAKqS,yBAc1C,YAZiB,KADjB8B,GAAY,IAEXA,EAAW,EACSxF,EAAE4F,UAAYD,EAChBtU,EAAKwU,4BACtBpE,EAASzB,IAET2F,EAAY3F,EAAE4F,UACdJ,EAAW,IAGZG,EAAY3F,EAAE4F,YAMlBJ,EAAW,KAGZta,EAAO2W,iBAAkB,cAAc,SAAE7B,GACxC,GAAiB,IAAbwF,GAEH,GAAa,OADPlD,EAAsBtC,EAAEoC,QAAQ0D,KAAM9F,EAAEoC,QAAQtX,OAAS,IAK9D,OAHA0a,EAAW,EACXC,EAAQnD,EAAME,aACdkD,EAAQpD,EAAMG,cAGT,GAAiB,IAAb+C,EAAiB,CAC3B,IAAMlD,EACN,GAAa,OADPA,EAAsBtC,EAAEoC,QAAQ0D,KAAM9F,EAAEoC,QAAQtX,OAAS,IAK9D,OAHA0a,EAAW,EACXC,EAAQnD,EAAME,aACdkD,EAAQpD,EAAMG,SAIhB+C,EAAW,UAvDZta,EAAO2W,iBAAkB,WAAYJ,IA4DhCS,WAAP,SAAiBhX,EAAiB6a,GAEjC,IADA,IAAIpI,EAAUoI,EACI,MAAXpI,GAAmBA,IAAYzS,GACrCyS,EAAUA,EAAQvS,OAEnB,OAAOuS,IAAYzS,GA/RbgX,2BAAmC,GACnCA,8BAAsC,IACtCA,uBAA+B,SCkSjC8D,EAAU,SAA4Bha,GAC3C,GAAe,MAAXA,GAAoC,MAAjBA,EAAQD,MAAgB,CAC9C,IAAMA,EAAQC,EAAQD,MACtB,OAAIkB,EAAclB,GACV2T,EAAQuG,cAAcC,IAAKna,GAE3BA,EAGT,OAAO,MAQFoa,EAAc,SACnBna,GAEA,GAAe,MAAXA,IAA0C,MAArBA,EAAQoa,WAAyC,MAApBpa,EAAQ8U,UAAqB,CAClF,IAAMlU,EAAsC,GAK5C,GAJwB,MAApBZ,EAAQ8U,UACXlU,EAAOhC,KAAMmV,EAAkB2B,WAAY1V,EAAQ8U,WAG3B,MAArB9U,EAAQoa,UAEX,IADA,IAAMA,EAAYpa,EAAQoa,UACjBza,EAAI,EAAGC,EAAOwa,EAAUtb,OAAQa,EAAIC,IAAQD,EACpDoU,EAAkB2B,WAAY0E,EAAWza,IAG3C,OAAOiB,kBAmDR,WAAaZ,GAAb,MACCkF,mBAGMmV,EAAuBhV,EAAKiV,GAAajV,EAAKgV,UACpDhV,EAAKkV,GAAY,IAAIhW,EAAY8V,EAAUtH,UAAU,WACpD1N,EAAKmV,YAENnV,EAAKoV,GAAS,IAAIlW,EAAY8V,EAAUK,OAAO,WAC9CrV,EAAKsV,aAENtV,EAAKuV,GAAQ,IAAIrW,EAAY8V,EAAUQ,MAAM,WAC5CxV,EAAKyV,YAINzV,EAAK0V,GAAW/a,EAChB,IAAMyS,EAAwBpN,EAAKsN,GAAa,GAChDtN,EAAK2V,GAAiB,IAAInI,EAAgBxN,EAAMoN,GAChDpN,EAAKK,GAAW,EAChBL,EAAK4V,IAAY,EACjB5V,EAAK6V,IAAmB,EACxB7V,EAAK8V,GAAU,KACf9V,EAAK+V,GAAUpb,GAAWA,EAAQqb,MAAU,GAC5C,IAAMtb,EAAQsF,EAAKnF,EAAS8Z,EAASha,IAAaqF,EAAKiW,kBACvDjW,EAAKkW,GAAW,GAChBlW,EAAKmW,GAAU,GACfnW,EAAKoW,GAAe,GACpBpW,EAAKqW,GAAe1b,GAA4B,MAAjBA,EAAQ2b,MACpC1a,EAAcjB,EAAQ2b,OAAUnJ,EAAkBxS,EAAQ2b,OAAU3b,EAAQ2b,MAC9E5b,EAAM6b,eAEPvW,EAAKwW,GAAW,IAAI/X,EAAc/D,EAAOC,GAAS,WACjDqF,EAAK2N,SACL3N,EAAK8N,kBACL1U,EAAciB,OAAQ2F,MAEvB,IAAMyW,EAAmB,WACxBzW,EAAK0W,UACLtd,EAAciB,OAAQ2F,IAEvBA,EAAK2W,GAAc,IAAIvb,EAAiBV,EAAOC,EAAS8b,GACxDzW,EAAK4W,GAAU,IAAIta,EAAa5B,EAAOC,EAAS8b,GAChDzW,EAAK6W,GAAW,IAAIpZ,EAAc/C,EAAOC,EAAS8b,GAClDzW,EAAK8W,GAAU,IAAI7Z,EAAavC,EAAOC,EAAS8b,GAChDzW,EAAK+W,iBAGL,IAAMrJ,EAAWsH,EAAUtH,SACrBvO,EAAMxE,GAAwB,MAAbA,EAAQwE,EAAYxE,EAAQwE,EAAIzE,EAAMsc,OACzDna,EAAcsC,GACjBuO,EAASvO,EAAIA,GAEbuO,EAASvO,EAAI,EACbiO,EAAUjO,EAAIqN,EAAiBkB,SAAUvO,IAI1C,IAAMC,EAAMzE,GAAwB,MAAbA,EAAQyE,EAAYzE,EAAQyE,EAAI1E,EAAMuc,OACzDpa,EAAcuC,GACjBsO,EAAStO,EAAIA,GAEbsO,EAAStO,EAAI,EACbgO,EAAUhO,EAAIoN,EAAiBkB,SAAUtO,IAI1C,IAAMnD,EAAUtB,GAA4B,MAAjBA,EAAQsB,MAAgBtB,EAAQsB,MAAQvB,EAAM2L,WACrExJ,EAAcZ,GACjB+D,EAAKhE,EAASC,EACM,SAAVA,GACV+D,EAAKhE,EAAS,IACdgE,EAAK2V,GAAe9H,gBAEpB7N,EAAKhE,EAAS,IACdoR,EAAUnR,MAAQuQ,EAAiBuB,KAAM9R,IAI1C,IAAMyD,EAAW/E,GAA6B,MAAlBA,EAAQ+E,OAAiB/E,EAAQ+E,OAAShF,EAAMwc,YACxEra,EAAc6C,GACjBM,EAAKC,EAAUP,EACM,SAAXA,GACVM,EAAKC,EAAU,IACfD,EAAK2V,GAAe1H,iBAEpBjO,EAAKC,EAAU,IACfmN,EAAU1N,OAAS8M,EAAiBuB,KAAMrO,IAIvC/E,GAA8B,MAAnBA,EAAQ+M,UACtB1H,EAAK0H,QAAU/M,EAAQ+M,SAIxB1H,EAAKmX,GAAS9Z,EAAW+Z,KACzBpX,EAAKqX,GAAcha,EAAW+Z,KAG9B,IAAME,EAAgB3c,GAAkC,MAAvBA,EAAQ2c,YACtC1b,EAAcjB,EAAQ2c,aAAgB1a,EAAkBjC,EAAQ2c,aAAgB3c,EAAQ2c,YAC1F5c,EAAM6c,iBAMP,GAJAvX,EAAKsX,YAA4D,IAA1CA,EAAc1a,EAAiB4a,MACtDxX,EAAKyX,oBAAwE,IAA9CH,EAAc1a,EAAiB8a,UAG/C,MAAX/c,EAAkB,CACrB,IAAM+O,EAAK/O,EAAQ+O,GACnB,GAAU,MAANA,EACH,IAAK,IAAMiO,KAAQjO,EAClB1J,EAAK0J,GAAIiO,EAAMjO,EAAIiO,IAMtB3X,EAAK4X,GAAWjd,GAA4B,MAAjBA,EAAQkd,MAAgBld,EAAQkd,MAAQnd,EAAMod,WAGzE9X,EAAK+X,GAAYpd,GAA6B,MAAlBA,EAAQqd,OAAiBrd,EAAQqd,OAAStd,EAAMud,YAG5EjY,EAAKkY,GAAuB,WAC3B9e,EAAciB,OAAQ2F,IAEvB,IAAMmY,EAAUxd,GAAWA,EAAQwd,QAAWzd,EAAM0d,YAChDD,IACHnY,EAAKmY,OAASA,GAIfnY,EAAK0J,GAAImH,EAAiBwH,MAAM,SAAE1J,GAEjC3O,EAAKsY,YAAY,GAGb3J,EAAE9U,SAAWmG,GAChBA,EAAKuY,gBAIPvY,EAAK0J,GAAImH,EAAiB2H,KAAK,WAC9BxY,EAAKsY,YAAY,MAGlBtY,EAAK0J,GAAImH,EAAiB0B,MAAM,SAAE5D,GACjC3O,EAAKyY,OAAQ9J,MAId3O,EAAK0J,GAAI,SAAS,WACjB1J,EAAK2N,UACD3N,EAAK0Y,WAAa1Y,EAAK2Y,aAC1B3Y,EAAK4Y,mBAEF5Y,EAAK6V,IACR7V,EAAK6Y,wBAEN7Y,EAAK8Y,cACL1f,EAAciB,OAAQ2F,MAGvBA,EAAK0J,GAAI,WAAW,WACnB1J,EAAK+Y,MAAM,GACX/Y,EAAK8Y,cACL1f,EAAciB,OAAQ2F,MAIvB,IAAM+U,EAAY/U,EAAKgZ,GAAalE,EAAana,GACjD,GAAiB,MAAboa,EAIH,IAHA,IAAMkE,EAAkB,SAAEtK,GACzB3O,EAAKkZ,WAAYvK,IAETrU,EAAI,EAAGC,EAAOwa,EAAUtb,OAAQa,EAAIC,IAAQD,EACpDoU,EAAkBhF,GAAI1J,EAAM+U,EAAWza,GAAK2e,GAK9C,IAAIE,EAAoCxe,GAAWA,EAAQwe,OAY3D,GAXc,MAAVA,IACHA,EAASze,EAAM0e,aAEF,MAAVD,IACHnZ,EAAKmZ,OAASA,GAIfnZ,EAAKqZ,KAAM1e,GAGPA,GAA4B,MAAjBA,EAAQU,MACtB,GAAIO,EAAcjB,EAAQU,OACzB2E,EAAKyJ,SAAUpM,EAAY1C,EAAQU,QAAS,QACtC,GAAIwB,EAAclC,EAAQU,OAChC2E,EAAKyJ,SAAU9O,EAAQU,OAAO,OAE9B,CAAA,IAAMie,EAAS3e,EAAQU,MACvB,IAASf,EAAI,EAAGC,EAAO+e,EAAO7f,OAAQa,EAAIC,IAAQD,EACjD0F,EAAKyJ,SAAUpM,EAAYic,EAAQhf,KAAO,GAW7C,GALIK,GAA6B,MAAlBA,EAAQZ,QACtBY,EAAQZ,OAAOwf,SAAUvZ,GAItBrF,GAA+B,MAApBA,EAAQ6e,SACtB,CAAA,IAAMA,EAAW7e,EAAQ6e,SACzB,IAASlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACX,MAATmf,GACHzZ,EAAKuZ,SAAUE,WAMlBzZ,EAAK2Q,KAAM,OAAQ3Q,KAm7BrB,OArrCUnH,OAqQT6gB,8BAAA,SAAmBC,EAAyBC,GAC1CD,EAAmB5f,OAAShB,MACd6gB,EAAQ7gB,KAAKmd,GAAWnd,KAAKod,IACvC0D,QAASF,IAGfD,6BAAA,SAAkBC,EAAyBC,GACzCD,EAAmB5f,OAAShB,MACd6gB,EAAQ7gB,KAAKmd,GAAWnd,KAAKod,IACvC5c,KAAMogB,IAGZD,6BAAA,SAAkBC,EAAyBC,GACzCD,EAAmB5f,OAAS,KAC7B,IAAM+f,EAASF,EAAQ7gB,KAAKmd,GAAWnd,KAAKod,GACtCxc,EAAQmgB,EAAKlgB,QAAS+f,GACxB,GAAKhgB,GACRmgB,EAAKxO,OAAQ3R,EAAO,IAItB+f,0BAAA,SAAeK,GACdhhB,KAAKqd,GAAa7c,KAAMwgB,IAGzBL,6BAAA,SAAkBK,GACjB,IAAMC,EAAcjhB,KAAKqd,GACnBzc,EAAQqgB,EAAYpgB,QAASmgB,GAC/B,GAAKpgB,GACRqgB,EAAY1O,OAAQ3R,EAAO,IAInB+f,2BAAV,WACC,IAAItS,EAAiBrO,OAGZ2gB,6BAAV,WACC3gB,KAAK+U,kBACLjO,YAAMoa,6BAGGP,uBAAV,SAAsB/K,KAItBpW,sBAAImhB,8BAAJ,WACC,OAAO3gB,KAAK4c,oCAGH+D,iBAAV,SAAgB/e,KAIhBpC,sBAAImhB,0BAAJ,WACC,OAAO3gB,KAAKgf,oCAGb2B,mBAAA,WACC3gB,KAAKmhB,eACL9gB,EAAciB,OAAQtB,MACtBA,KAAK4X,KAAM,OAAQ5X,OAGpB2gB,mBAAA,SAAQzd,EAAeyD,GACtB,IAAMya,EAAWphB,KAAKiD,EAChBoe,EAAYrhB,KAAKkH,EACjBoa,EAAeF,IAAale,EAC5Bqe,EAAgBF,IAAc1a,EAEhC2a,IACHthB,KAAKiD,EAASC,GAGXqe,IACHvhB,KAAKkH,EAAUP,GAGhB,IAiBO0N,EAjBDmN,EAAUF,GAAgBC,EAKhC,GAJIC,GACHxhB,KAAKyhB,SAAUve,EAAOyD,EAAQya,EAAUC,GAGrCC,GAEgB,OADbjN,EAAYrU,KAAKuU,IACTnO,EAAY,CACzB,IAAMuO,EAAW3U,KAAKkc,GAAWvH,SAC3B+M,EAAS1hB,KAAK2hB,kBAChBD,IACH1hB,KAAKoG,EAAIiO,EAAUjO,EAAGsb,EAAOxe,MAAOA,EAAOwe,EAAOzc,QAAQ2c,UAAWjN,EAASvO,IAKjF,GAAImb,GAEgB,OADblN,EAAYrU,KAAKuU,IACTlO,EAAY,CACnBsO,EAAW3U,KAAKkc,GAAWvH,SAAjC,IACMkN,EAAS7hB,KAAK2hB,kBAChBE,IACH7hB,KAAKqG,EAAIgO,EAAUhO,EAAGwb,EAAOlb,OAAQA,EAAQkb,EAAO5c,QAAQ6c,SAAUnN,EAAStO,IAKlF,OAAOmb,GAGRb,yBAAA,WACC,OAAO3gB,KAAKsd,IAGbqD,qBAAA,SAAUoB,EAAkBC,EAAmBZ,EAAkBC,GAChErhB,KAAK2d,UACL3d,KAAK+U,kBACL/U,KAAKiiB,iBACL5hB,EAAciB,OAAQtB,MACtBA,KAAK4X,KAAM,SAAUmK,EAAUC,EAAWZ,EAAUC,EAAWrhB,OAGhE2gB,oBAAA,WACCtgB,EAAciB,OAAQtB,MACtBA,KAAK4X,KAAM,QAAS5X,OAGrB2gB,mBAAA,WACCtgB,EAAciB,OAAQtB,MACtBA,KAAK4X,KAAM,OAAQ5X,OAGpBR,sBAAImhB,wBAAJ,WACC,OAAO3gB,KAAKkiB,2CAGb1iB,sBAAImhB,wBAAJ,WACC,OAAO3gB,KAAKgd,QAGb,SAAUC,GACTjd,KAAKgd,GAAQC,mCAGdzd,sBAAImhB,qBAAJ,WACC,OAAO3gB,KAAKmc,GAAU/V,OAGvB,SAAOA,GACNpG,KAAKmc,GAAU/V,EAAIA,mCAGpB5G,sBAAImhB,qBAAJ,WACC,OAAO3gB,KAAKmc,GAAU9V,OAGvB,SAAOA,GACNrG,KAAKmc,GAAU9V,EAAIA,mCAGpB7G,sBAAImhB,yBAAJ,WACC,OAAO3gB,KAAKiD,OAGb,SAAWC,GACV,IAAMke,EAAWphB,KAAKiD,EACtB,GAAIme,IAAale,EAAQ,CACxBlD,KAAKiD,EAASC,EACd,IAAMyD,EAAS3G,KAAKkH,EACpBlH,KAAKyhB,SAAUve,EAAOyD,EAAQya,EAAUza,GAGxC,IAAM0N,EAAYrU,KAAKuU,GACvB,GAAmB,MAAfF,EAAUjO,EAAY,CACzB,IAAMuO,EAAW3U,KAAKkc,GAAWvH,SAC3BwN,EAASniB,KAAK2hB,kBAChBQ,IACHniB,KAAKoG,EAAIiO,EAAUjO,EAAG+b,EAAOjf,MAAOA,EAAOif,EAAOld,QAAQ2c,UAAWjN,EAASvO,uCAMlF5G,sBAAImhB,0BAAJ,WACC,OAAO3gB,KAAKkH,OAGb,SAAYP,GACX,IAAM0a,EAAYrhB,KAAKkH,EACvB,GAAIma,IAAc1a,EAAS,CAC1B3G,KAAKkH,EAAUP,EACf,IAAMzD,EAAQlD,KAAKiD,EACnBjD,KAAKyhB,SAAUve,EAAOyD,EAAQzD,EAAOme,GAGrC,IAAMhN,EAAYrU,KAAKuU,GACvB,GAAmB,MAAfF,EAAUhO,EAAY,CACzB,IAAMsO,EAAW3U,KAAKkc,GAAWvH,SAC3ByN,EAASpiB,KAAK2hB,kBAChBS,IACHpiB,KAAKqG,EAAIgO,EAAUhO,EAAG+b,EAAOzb,OAAQA,EAAQyb,EAAOnd,QAAQ6c,SAAUnN,EAAStO,uCAMnF7G,sBAAImhB,4BAAJ,WACC,OAAO3gB,KAAKmc,oCAGb3c,sBAAImhB,yBAAJ,WACC,OAAO3gB,KAAKqc,oCAGb7c,sBAAImhB,wBAAJ,WACC,OAAO3gB,KAAKwc,oCAGbhd,sBAAImhB,2BAAJ,WACC,OAAO3gB,KAAKyd,oCAGbje,sBAAImhB,0BAAJ,WACC,OAAO3gB,KAAK+d,oCAGbve,sBAAImhB,8BAAJ,WACC,OAAO3gB,KAAK4d,oCAGbpe,sBAAImhB,0BAAJ,WACC,OAAO3gB,KAAK6d,oCAGbre,sBAAImhB,2BAAJ,WACC,OAAO3gB,KAAK8d,oCAGbte,sBAAImhB,0BAAJ,WACC,OAAO3gB,KAAKkc,oCAGb1c,sBAAImhB,yBAAJ,WACC,OAAO3gB,KAAK6e,QAGb,SAAWC,GACN9e,KAAK6e,KAAWC,IACnB9e,KAAK6e,GAASC,EACV9e,KAAKqiB,aACRriB,KAAKwf,+CAKEmB,uBAAV,WACC,IAAMzf,EAAQb,EAAcsZ,SAAU3Z,MAClCkB,IACHA,EAAMohB,KAAKxD,MAAQ9e,KAAK6e,KAI1B8B,iBAAA,WAMC,OALM3gB,KAAK2O,UACV3O,KAAK2O,SAAU,EACf3O,KAAK8f,wBACLzf,EAAciB,OAAQtB,OAEhBA,MAGR2gB,oBAAA,WACC,OAAO3gB,KAAK2O,SAGbgS,iBAAA,WAMC,OALI3gB,KAAK2O,UACR3O,KAAK2O,SAAU,EACf3O,KAAK8f,wBACLzf,EAAciB,OAAQtB,OAEhBA,MAGR2gB,qBAAA,WACC,OAAS3gB,KAAK2O,SAGfgS,oBAAA,WACC,OAAM3gB,KAAKsH,IACVtH,KAAKsH,GAAW,EAChBtH,KAAK6f,oBACE,IAKTc,uBAAA,WACC,OAAM3gB,KAAK6c,KACV7c,KAAK6c,IAAY,EACjB7c,KAAK6f,oBACE,IAKTc,6BAAA,WACC,IAAM3f,EAAShB,KAAKgB,OAChBA,aAAkB2f,GACrB3f,EAAOuhB,cAIT5B,4BAAA,WACC,OAAM3gB,KAAK8c,KACV9c,KAAK8c,IAAmB,EACxB9c,KAAKwiB,kBACLxiB,KAAK8f,yBACE,IAKTa,kCAAA,WACC,IAAM3f,EAAShB,KAAKgB,OAChBA,aAAkB2f,GACrB3f,EAAO+T,mBAIT4L,4BAAA,WACC,OAAO3gB,KAAK8c,IAGH6D,4BAAV,aAIAA,oBAAA,WACC,OAAO3gB,KAAKsH,GAGbqZ,qBAAA,WACC,OAAO3gB,KAAK6c,IAGb8D,uBAAA,SAAY0B,GACX,OAAOriB,KAAK0Q,SAAUpM,EAAWoL,QAAS2S,IAG3C1B,sBAAA,SAAW8B,GACV,OAAOziB,KAAK0Q,SAAUpM,EAAWwL,OAAQ2S,IAG1C9B,uBAAA,SAAY+B,GACX,OAAO1iB,KAAK0Q,SAAUpM,EAAW2L,QAASyS,IAG3C/B,wBAAA,SAAagC,GACZ,OAAO3iB,KAAK0Q,SAAUpM,EAAW4L,UAAWyS,IAG7ChC,wBAAA,SAAaiC,GACZ,OAAO5iB,KAAK0Q,SAAUpM,EAAW0L,SAAU4S,IAG5CjC,wBAAA,SAAakC,GACZ,OAAO7iB,KAAK0Q,SAAUpM,EAAWqL,SAAUkT,IAG5ClC,uBAAA,SAAYmC,GACX,OAAO9iB,KAAK0Q,SAAUpM,EAAW6L,QAAS2S,IAG3CnC,yBAAA,SAAcoC,GACb,OAAO/iB,KAAK0Q,SAAUpM,EAAW8L,UAAW2S,IAG7CpC,sBAAA,SAAWqC,GACV,OAAOhjB,KAAK0Q,SAAUpM,EAAW+L,OAAQ2S,IAG1CrC,uBAAA,SAAYsC,GACX,GAAIjjB,KAAKijB,cAAgBA,EAAY,CACpC,IAAM/hB,EAAQb,EAAcsZ,SAAU3Z,MAClCkB,GACHA,EAAMgiB,qBAAqBC,WAAYnjB,KAAMijB,GAAW,GAG1D,OAAOjjB,MAGR2gB,kBAAA,WACC,OAAO3gB,KAAKmjB,YAAY,IAGzBxC,iBAAA,SAAMyC,GACL,GAAIA,EAAc,CACjB,IAAMliB,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IACMmiB,EADkBniB,EAAMgiB,qBACEI,aAChC,GAAID,aAAmB1C,EAEtB,IADA,IAAIpN,EAAqB8P,EAClB9P,GAAU,CAChB,GAAIA,IAAYvT,KAAO,CACtBqjB,EAAQF,YAAY,GACpB,MAED5P,EAAUA,EAAQvS,cAKrBhB,KAAKmjB,YAAY,GAElB,OAAOnjB,MAGR2gB,sBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAWoL,UAGlCiR,qBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAWwL,SAGlC6Q,uBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAWwL,OAASxL,EAAWyL,YAGtD4Q,sBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAW2L,UAGlC0Q,uBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAW4L,YAGlCyQ,uBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAW0L,WAGlC2Q,yBAAA,WACC,OAAS3gB,KAAKujB,SAAUjf,EAAW0L,SAAW1L,EAAW4L,YAG1DyQ,uBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAWqL,WAGlCgR,sBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAWsL,UAGlC+Q,wBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAWsL,QAAUtL,EAAWuL,aAGvD8Q,0BAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAWkf,cAGlC7C,sBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAW6L,UAGlCwQ,wBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAW8L,YAGlCuQ,qBAAA,WACC,OAAO3gB,KAAKujB,SAAUjf,EAAW+L,SAGlCsQ,qBAAA,SAAUre,EAAmBmhB,GAC5B,IAAMC,EAAgB1jB,KAAKse,GACrBqF,EAAkBF,EAAQC,EAAgBphB,EAAUohB,GAAiBphB,EAK3E,OAJIohB,IAAkBC,IACrB3jB,KAAKse,GAAcqF,EACnB3jB,KAAK+f,eAEC/f,MAGR2gB,sBAAA,SAAWiD,EAAsBC,GAChC,IAAMH,EAAgB1jB,KAAKse,GACrBqF,GAAmBD,EAAgBE,IAAaC,EAKtD,OAJIH,IAAkBC,IACrB3jB,KAAKse,GAAcqF,EACnB3jB,KAAK+f,eAEC/f,MAGE2gB,wBAAV,WACC,IAAM3f,EAAShB,KAAKgB,OACd8iB,EAAa9jB,KAAKse,GAClByF,EAAa/iB,aAAkB2f,EACpC3gB,KAAKgkB,WAAYF,EAAY9iB,EAAOsB,OACpCwhB,EAEKG,EAAWjkB,KAAKoe,GAClB6F,IAAaF,IAChB/jB,KAAKoe,GAAS2F,EACd/jB,KAAKkkB,cAAeH,EAAUE,KAItBtD,uBAAV,SAAsBmD,EAAwBK,GAC7C,OAAOL,EAAeK,EAAc7f,EAAW0L,UAC5CmU,GAAe7f,EAAWsL,QAAUtL,EAAWuL,YAAcvL,EAAWuL,WAAavL,EAAW+Z,OAChG8F,GAAe7f,EAAWwL,OAASxL,EAAWyL,WAAazL,EAAWyL,UAAYzL,EAAW+Z,OAGvFsC,0BAAV,SAAyBoD,EAAkBE,GAC1CjkB,KAAK2d,UACLtd,EAAciB,OAAQtB,MACtBA,KAAK4X,KAAM,cAAemM,EAAUE,EAAUjkB,MAG9C,IADA,IAAMygB,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,GACpBD,EAAM0D,oBAAqBL,EAAUE,GAInCzU,EAAYyT,UAAWc,GACpBvU,EAAYyT,UAAWgB,IAC5BjkB,KAAKqkB,YAGF7U,EAAYyT,UAAWgB,IAC1BjkB,KAAKskB,YAKE3D,2BAAV,SAA0B0C,GACzB,IAAMriB,EAAShB,KAAKgB,OAChBA,aAAkB2f,GACrB3f,EAAOujB,eAAgBlB,IAIf1C,sBAAV,WACC,IAAM3f,EAAShB,KAAKgB,OAChBA,aAAkB2f,GACrB3f,EAAOujB,eAAgBvkB,OAIf2gB,qBAAV,aAIUA,gCAAV,SAA+B6D,EAAwBC,GACtD,IAAMV,EAAW/jB,KAAKgkB,WAAYhkB,KAAKse,GAAakG,GAC9CP,EAAWjkB,KAAKoe,GAClB6F,IAAaF,IAChB/jB,KAAKoe,GAAS2F,EACd/jB,KAAKkkB,cAAeH,EAAUE,KAIhCzkB,sBAAImhB,yBAAJ,WACC,OAAO3gB,KAAKoe,oCAGbuC,qBAAA,WACC,OAAO3gB,KAAKoe,IAGbuC,qBAAA,SAAUre,GACT,OAAOkN,EAAYC,GAAIzP,KAAKoe,GAAQ9b,IAGrC9C,sBAAImhB,yBAAJ,WACC,OAAO3gB,KAAK8B,OAGb,SAAWH,GACK3B,KAAK8B,IACLH,IACd3B,KAAK8B,EAASH,EACd3B,KAAKyd,GAASiH,SAAU/iB,GACxB3B,KAAK4d,GAAY8G,SAAU/iB,GAC3B3B,KAAK6d,GAAQ6G,SAAU/iB,GACvB3B,KAAK8d,GAAS4G,SAAU/iB,GACxB3B,KAAK+d,GAAQ2G,SAAU/iB,GACvB3B,KAAK2d,UACLtd,EAAciB,OAAQtB,wCAIxB2gB,kBAAA,WACC,GAAI3gB,KAAK8c,GAAmB,CAC3B9c,KAAK8c,IAAmB,EAGxB,IADA,IAAM2D,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,GACpBD,EAAMiE,QAIR3kB,KAAK4kB,YAIGjE,oBAAV,WACC,IAAMkE,EAAgB7kB,KAAK4c,GACrB/H,EAAcgQ,EAAchQ,cAC5BI,EAAe4P,EAAc5P,eACnC,GAAIJ,GAAeI,EAAe,CAIjC,IAHA,IAAI/R,EAAQ,EACRyD,EAAS,EAEJpF,EAAI,EAAGC,GADVif,EAAWzgB,KAAKygB,UACU/f,OAAQa,EAAIC,IAAQD,GAC7Cmf,EAAQD,EAAUlf,IACdoN,UACL3O,KAAK8kB,kBAAmBpE,KAC3Bxd,EAAQyG,KAAKG,IAAK5G,EAAOwd,EAAMta,EAAIsa,EAAMxd,QAEtClD,KAAK+kB,mBAAoBrE,KAC5B/Z,EAASgD,KAAKG,IAAKnD,EAAQ+Z,EAAMra,EAAIqa,EAAM/Z,UAI9C,IAAM1B,EAAUjF,KAAKiF,QACrBjF,KAAKglB,OAAQ9hB,EAAQ+B,EAAQggB,WAAYte,EAAS1B,EAAQigB,kBACpD,GAAIrQ,EAAc,CAGxB,IAFI3R,EAAQ,EAEH3B,EAAI,EAAGC,GADVif,EAAWzgB,KAAKygB,UACU/f,OAAQa,EAAIC,IAAQD,GAC7Cmf,EAAQD,EAAUlf,IACdoN,SAAW3O,KAAK8kB,kBAAmBpE,KAC5Cxd,EAAQyG,KAAKG,IAAK5G,EAAOwd,EAAMta,EAAIsa,EAAMxd,QAGrC+B,EAAUjF,KAAKiF,QACrBjF,KAAKkD,MAAQA,EAAQ+B,EAAQggB,gBACvB,GAAIhQ,EAAe,CACzB,IACMwL,EACN,IAFI9Z,EAAS,EAEJpF,EAAI,EAAGC,GADVif,EAAWzgB,KAAKygB,UACU/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,GAAAA,EAAQD,EAAUlf,IACdoN,SAAW3O,KAAK+kB,mBAAoBrE,KAC7C/Z,EAASgD,KAAKG,IAAKnD,EAAQ+Z,EAAMra,EAAIqa,EAAM/Z,SAGvC1B,EAAUjF,KAAKiF,QACrBjF,KAAK2G,OAASA,EAAS1B,EAAQigB,cAIvBvE,wBAAV,SAAuB7f,GACtB,OAAOA,aAAkB6f,GAGhBA,+BAAV,SAA8B7f,GAC7B,OAAOd,KAAKmlB,YAAarkB,MACpBA,aAAkB6f,GAASjf,EAAgBZ,EAAO4S,WAAW/M,UAGzDga,8BAAV,SAA6B7f,GAC5B,OAAOd,KAAKmlB,YAAarkB,MACpBA,aAAkB6f,GAASjf,EAAgBZ,EAAO4S,WAAWxQ,SAGnEyd,mBAAA,WAMC,GALI3gB,KAAKsH,IACRtH,KAAKolB,WACLplB,KAAKsH,GAAW,GAGbtH,KAAK6c,GAAY,CAEpB,IADA,IAAM4D,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,GACpBD,EAAM2E,SAGRrlB,KAAK6c,IAAY,IAIT8D,qBAAV,WAIC,IAHA,IAAMzd,EAAQlD,KAAKkD,MACbyD,EAAS3G,KAAK2G,OACdsa,EAAcjhB,KAAKqd,GAChB9b,EAAI,EAAGC,EAAOyf,EAAYvgB,OAAQa,EAAIC,IAAQD,EACtD0f,EAAa1f,GAAI6jB,SAAUplB,KAAMkD,EAAOyD,IAI1CnH,sBAAImhB,0BAAJ,WACC,OAAO3gB,KAAK+c,QAGb,SAAYqC,GACX,IAAMkG,EAAWtlB,KAAK+c,GAClBuI,IAAalG,IACA,MAAZkG,IACHA,EAAS1M,IAAK,SAAU5Y,KAAKmf,IAC7Bnf,KAAKulB,iBAAkBD,GACvBtlB,KAAKwlB,iBAAkBF,GAAU,IAGlCtlB,KAAK+c,GAAUqC,EACD,MAAVA,IACHA,EAAOzO,GAAI,SAAU3Q,KAAKmf,IAC1Bnf,KAAKoO,cAAegR,GACpBpf,KAAKylB,kBAAmBrG,GAAQ,IAGjC/e,EAAciB,OAAQtB,wCAIxB2gB,mBAAA,WACC,IAAM3f,EAAShB,KAAK2hB,kBAChB3gB,GACHhB,KAAK0lB,eAAgB1kB,EAAOkC,MAAOlC,EAAO2F,OAAQ3F,EAAOiE,UAIjD0b,4BAAV,WACC,IAAM3f,EAAShB,KAAKgB,OACpB,OAAIA,aAAkB2f,EACd3f,EAEAX,EAAcsZ,SAAU3Z,OAUjC2gB,2BAAA,SAAgBgF,EAAqBC,EAAsBC,GAC1D,IAAMxR,EAAYrU,KAAKuU,GACjBI,EAAW3U,KAAKkc,GAAWvH,SAC3BvO,EAAIuO,EAASvO,EACbC,EAAIsO,EAAStO,EACbnD,EAAQlD,KAAKiD,EACb0D,EAAS3G,KAAKkH,EAGd4e,EAAeD,EAAcjE,UAAYiE,EAAcZ,WACvDc,EAAgBF,EAAc/D,SAAW+D,EAAcX,YACvDnD,EAAgC,MAAnB1N,EAAUnR,MAC5BmR,EAAUnR,MAAOyiB,EAAaziB,EAAO4iB,EAAc5iB,GAAUA,EACxD8e,EAAkC,MAApB3N,EAAU1N,OAC7B0N,EAAU1N,OAAQif,EAAcjf,EAAQof,EAAepf,GAAWA,EACnE3G,KAAKglB,OAAQjD,EAAUC,GAGvB,IAAMgE,EAAwB,MAAf3R,EAAUjO,EAAYiO,EAAUjO,EAAGuf,EAAa3lB,KAAKkD,MAAO2iB,EAAcjE,UAAWxb,GAAMA,EACpG6f,EAAwB,MAAf5R,EAAUhO,EAAYgO,EAAUhO,EAAGuf,EAAc5lB,KAAK2G,OAAQkf,EAAc/D,SAAUzb,GAAMA,EAC3GrG,KAAK2U,SAASrO,IAAK0f,EAAMC,IAG1BtF,2BAAA,WAMC,IALA,IAAMzd,EAAQlD,KAAKkD,MACbyD,EAAS3G,KAAK2G,OACd1B,EAAUjF,KAAKyd,GAEfgD,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,GACpBD,EAAMgF,eAAgBxiB,EAAOyD,EAAQ1B,KAWxC0b,yBAAA,SAAcva,EAAWC,KAIfsa,yBAAV,WAIC,IAHA,IAAMva,EAAIpG,KAAKoG,EACTC,EAAIrG,KAAKqG,EACToa,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,GACpBD,EAAMwF,aAAc9f,EAAGC,KAM1Bsa,oBAAA,SAAS/K,EAAeuQ,EAA8BlN,GAErD,OADAjZ,KAAK4X,KAAM,QAAShC,EAAGuQ,EAAQlN,EAAQjZ,OAChC,GAIR2gB,sBAAA,SAAW/K,GAEV,OADA5V,KAAK4X,KAAM,UAAWhC,EAAG5V,OAClB,GAGR2gB,oBAAA,SAAS/K,GAER,OADA5V,KAAK4X,KAAM,QAAShC,EAAG5V,OAChB,GAIE2gB,mBAAV,SAAkB/K,GACjB,IAAM9U,EAAS8U,EAAE9U,OACjB,GAAIA,IAAWd,KACdA,KAAKomB,WAAYxQ,QACX,KAAO9U,aAAkB6f,GAAU,CAEzC,IADA,IAAI0F,EAASvlB,EAAOE,OACH,MAAVqlB,KAAsBA,aAAkB1F,IAC9C0F,EAASA,EAAOrlB,OAEbqlB,IAAWrmB,MACdA,KAAKomB,WAAYxQ,KAKV+K,uBAAV,SAAsB/K,GACrB,IAAM1U,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMolB,EAAkBplB,EAAMgiB,qBAC9BoD,EAAgBnD,WAAYmD,EAAgBC,oBAAqBvmB,OAAQ,GAAM,KAKjF2gB,uBAAA,SAAY/K,EAA4BmC,GAEvC,OADA/X,KAAK4X,KAAM,WAAYhC,EAAGmC,EAAoB/X,OACvC,GAIR2gB,mBAAA,SAAQlV,GACHzL,KAAK2O,SAAW,EAAI3O,KAAKwmB,YAAcxmB,KAAK4gB,aAC/C5gB,KAAKymB,aAAchb,GACnB3E,YAAMrF,iBAAQgK,GACdzL,KAAK0mB,YAAajb,KAIVkV,yBAAV,SAAwBlV,GAEvB,IADA,IAAMkb,EAAU3mB,KAAKmd,GACZ5b,EAAI,EAAGC,EAAOmlB,EAAQjmB,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAMqlB,EAASD,EAASplB,GACxBqlB,EAAOC,kBACPD,EAAOnlB,OAAQgK,KAIPkV,wBAAV,SAAuBlV,GAEtB,IADA,IAAMqb,EAAS9mB,KAAKod,GACX7b,EAAI,EAAGC,EAAOslB,EAAOpmB,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMwlB,EAAQD,EAAQvlB,GACtBwlB,EAAMF,kBACNE,EAAMtlB,OAAQgK,KAKNkV,4BAAV,WACC,OAAOrL,EAAQuG,cAAcC,IAAK9b,KAAKkiB,YAG9BvB,oBAAV,WACC,MAAO,SAIEA,6BAAV,WACC,IAAMqG,EAAiBhnB,KAAKkc,GAAW8K,eACjCC,EAASjnB,KAAKknB,QAEdC,EAAOxG,EAAMyG,oBACnBD,EAAK7gB,IAAK,EAAG,GACb0gB,EAAeK,MAAOF,EAAMA,GAC5BF,EAAOK,SAAUH,GAEjBA,EAAK7gB,IAAKtG,KAAKiD,EAAQjD,KAAKkH,GAC5B8f,EAAeK,MAAOF,EAAMA,GAC5BF,EAAOK,SAAUH,GAEjBrgB,YAAMygB,6BAGP5G,0BAAA,SAAe5a,GACd,OAAO/F,KAAKwnB,oBAAqBzhB,IAAW/F,KAAKynB,mBAChDznB,KAAKgnB,eAAeU,aAAc3hB,EAAO4a,EAAMyG,uBAIvCzG,gCAAV,SAA+B5a,GAC9B,OAAO,GAGE4a,+BAAV,SAA8B5a,GAC7B,OACC,GAAKA,EAAMK,GAAKL,EAAMK,GAAKpG,KAAKkD,OAChC,GAAK6C,EAAMM,GAAKN,EAAMM,GAAKrG,KAAK2G,QAIlCga,oBAAA,WAEC,IAAMtM,EAAYrU,KAAKuU,GACvBF,EAAUjO,EAAI,KACdiO,EAAUhO,EAAI,KACdgO,EAAUnR,MAAQ,KAClBmR,EAAU1N,OAAS,KAGnB,IAAMyY,EAASpf,KAAK+c,GAChBqC,IACHpf,KAAK+c,GAAU,KACfqC,EAAOuI,WAKR,IADA,IAAMlH,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAC3Ckf,EAAUlf,GAAIomB,UAEflH,EAAS/f,OAAS,EAGlBoG,YAAM6gB,oBAlrCUhH,sBAA6B,IAAIiH,WADzCC,0BC/VT,WAAazhB,EAAWC,EAAWyhB,GAClC9nB,KAAKoG,EAAIA,EACTpG,KAAKqG,EAAIA,EACTrG,KAAK8nB,UAAYA,EAQnB,OALCC,gBAAA,SAAK3hB,EAAWC,EAAWyhB,GAC1B9nB,KAAKoG,EAAIA,EACTpG,KAAKqG,EAAIA,EACTrG,KAAK8nB,UAAYA,qBCJlB,aACC9nB,KAAKgoB,MAAQ,EACbhoB,KAAKkD,MAAQ,EACblD,KAAK2G,OAAS,EACd3G,KAAKioB,WAAa,GAElBjoB,KAAKoG,EAAI,EACTpG,KAAKqG,EAAI,EAkDX,OA/CC6hB,kBAAA,WACCloB,KAAKgoB,MAAQ,EACbhoB,KAAKkD,MAAQ,EACblD,KAAK2G,OAAS,EAEd3G,KAAKoG,EAAI,EACTpG,KAAKqG,EAAI,GAGV6hB,iBAAA,SAAMJ,GACL,IAAM1hB,EAAIpG,KAAKoG,EACfpG,KAAKoG,GAAK0hB,EAAUK,QACpB,IAAM9hB,EAAIrG,KAAKqG,EACT2hB,EAAQhoB,KAAKgoB,MACbC,EAAajoB,KAAKioB,WACpBD,EAAQC,EAAWvnB,OACtBunB,EAAYD,GAAQ1hB,IAAKF,EAAGC,EAAGyhB,GAE/BG,EAAWznB,KAAM,IAAIunB,EAAoC3hB,EAAGC,EAAGyhB,IAEhE9nB,KAAKgoB,OAAS,GAGfE,oBAAA,SAASE,GACRpoB,KAAKkD,MAAQyG,KAAKG,IAAK9J,KAAKkD,MAAOlD,KAAKoG,GACxCpG,KAAKoG,EAAI,EACTpG,KAAKqG,GAAK+hB,GAGXF,gBAAA,WACC,GAAI,EAAIloB,KAAKoG,EAAI,CAChB,IAAM4hB,EAAQhoB,KAAKgoB,MACbC,EAAajoB,KAAKioB,WACxB,GAAI,EAAID,EAAQ,CACf,IAAMF,EAAYG,EAAYD,EAAQ,GAGtC,OAFAhoB,KAAKoG,GAAK0hB,EAAUA,UAAUK,QAC9BnoB,KAAKgoB,OAAS,GACP,GAGT,OAAO,GAGRE,gBAAA,SAAKE,GACJpoB,KAAKqoB,QAASD,GACdpoB,KAAK2G,OAAS3G,KAAKqG,qBC7DpB,aACCrG,KAAKsoB,GAAU,GACftoB,KAAKmc,GAAY,EAoDnB,OAjDCoM,iBAAA,SAAMznB,GACLd,KAAKsoB,GAAUxnB,EACfd,KAAKmc,GAAY,GAGlBoM,oBAAA,WACC,OAAOvoB,KAAKmc,GAAYnc,KAAKsoB,GAAQ5nB,QAG5B6nB,0BAAV,SAAyBznB,EAAgB0nB,GAExC,IADA,IAAMC,EAAO3nB,EAAOJ,OACXa,EAAIinB,EAAQjnB,EAAIknB,IAAQlnB,EAAI,CACpC,IAAMsV,EAAO/V,EAAOgW,WAAYvV,GAChC,IAAMvB,KAAK0oB,eAAgB7R,KAAY7W,KAAK2oB,oBAAqB9R,GAChE,OAAOtV,EAGT,OAAOknB,GAGEF,4BAAV,SAA2B1R,GAC1B,OAAS,OAAUA,GAAQA,GAAQ,OAG1B0R,2BAAV,SAA0B1R,GACzB,OAAS,OAAUA,GAAQA,GAAQ,OAG1B0R,gCAAV,SAA+B1R,GAC9B,OAAS,OAAUA,GAAQA,GAAQ,OAGpC0R,iBAAA,WACC,IAAMznB,EAASd,KAAKsoB,GACd3T,EAAW3U,KAAKmc,GAChByM,EAAY5oB,KAAK6oB,cAAe/nB,EAAQ6T,EAAW,GACnDnS,EAAS1B,EAAOuV,UAAW1B,EAAUiU,GAE3C,OADA5oB,KAAKmc,GAAYyM,EACVpmB,GAGD+lB,OAAP,SAAaznB,GAC2B,MAAnCynB,EAAsBO,KACzBP,EAAsBO,GAAY,IAAIP,GAEvC,IAAMjoB,EAAWioB,EAAsBO,GAEvC,OADAxoB,EAASggB,KAAMxf,GACRR,GAxDSioB,KAA0C,uBCE5D,cA+CA,OA5CQQ,UAAP,SACCC,EAAcC,EAAgCC,GAE9C,IAAM1mB,EAASumB,EAAoBI,OAASJ,EAAoBI,QAAU,IAAIjB,EAE9E,GADA1lB,EAAO4mB,QACM,MAATH,EAAgB,CAInB,IAHA,IAAMI,EAAWd,EAAsBpW,KAAM6W,GACvCZ,EAAaa,EAAMK,KAAK3iB,OAEvB0iB,EAASE,WAAY,CAC3B,IAAMzB,EAAYuB,EAASG,OAC3B,GAHe,OAGX1B,EACHtlB,EAAO6lB,QAASD,OACV,CACN,IAAMqB,EAAIR,EAAMnN,IAAKgM,GACrB,GAAS,MAAL2B,EAAY,CACf,IAAMrjB,EAAI5D,EAAO4D,EACjB,GAAqB,MAAjB8iB,GAAyBA,EAAgB9iB,EAAIqjB,EAAEtB,QAAU,CAC5D,IAAMuB,EAAOT,EAAMnN,IAAK,OAUxB,IATY,MAAR4N,IACCR,EAAgB9iB,EAAIsjB,EAAKvB,QACxB3lB,EAAOmnB,OACVnnB,EAAOhC,KAAMkpB,GAGdlnB,EAAOhC,KAAMkpB,IAGRL,EAASE,WACf,GArBW,OAqBPF,EAASG,OAAqB,CACjChnB,EAAO6lB,QAASD,GAChB,YAIF5lB,EAAOhC,KAAMipB,KAKjBjnB,EAAOonB,IAAKxB,GAEb,OAAO5lB,GA5CSumB,SAA2C,wBCS5D,aAAA,MACCjiB,YAAO,IAAIC,aAAc,IAAM,IAAIA,aAAc,IAAM,IAAIC,YAAa,kBACxEC,EAAK/D,MAAQ,EACb+D,EAAKN,OAAS,IA+HhB,OAtI0C7G,OAUzC+pB,mBAAA,SAAQb,EAAcC,EAAgCC,GACrD,IAAMY,EAAe9pB,KAAK0H,UAAW,mBAC/BqiB,EAAW/pB,KAAK0H,UAAW,iBAC3BsiB,EAAchqB,KAAKgI,WAEnBxF,EAASumB,EAAoBkB,QAASjB,EAAMC,EAAOC,GACnDgB,EAAmBvgB,KAAKwgB,KAAM3nB,EAAOwlB,MAAQ,IAAO,EACpDoC,EAAqBF,GAAoB,EAC1CJ,EAAaliB,KAAsBlH,OAAS0pB,IAChDN,EAAaliB,KAAO,IAAIb,aAAcqjB,GACtCL,EAASniB,KAAO,IAAIb,aAAcqjB,IAEnC,IAAMC,EAAuC,EAAnBH,EACrBF,EAAYpiB,KAAqBlH,OAAS2pB,IAC9CL,EAAYpiB,KAAO,IAAIZ,YAAaqjB,IAGrC,IAAM3gB,EAAWogB,EAAaliB,KACxBgB,EAAMmhB,EAASniB,KACfe,EAAUqhB,EAAYpiB,KAE5B,GAAa,MAATqhB,EAAgB,CAGnB,IAFA,IAAMjB,EAAQxlB,EAAOwlB,MACfC,EAAazlB,EAAOylB,WACjB1mB,EAAI,EAAGA,EAAIymB,IAASzmB,EAAI,CAChC,IAAMumB,EAAYG,EAAY1mB,GAC9BvB,KAAKsqB,eACJ5gB,EAAUd,EAAKD,EACfpH,EAAGumB,EAAU1hB,EAAG0hB,EAAUzhB,EAC1ByhB,EAAUA,UAAWmB,EAAM/lB,MAAO+lB,EAAMtiB,QAGjCpF,EAAIymB,EAAb,IAAK,IAAexmB,EAAOkI,EAAShJ,QAAU,EAAGa,EAAIC,IAAQD,EAC5DvB,KAAKuqB,oBAAqB7gB,EAAUd,EAAKD,EAASpH,GAEnDvB,KAAKkD,MAAQV,EAAOU,MACpBlD,KAAK2G,OAASnE,EAAOmE,WACf,CACN,IAASpF,EAAI,EAAGC,EAAOkI,EAAShJ,QAAU,EAAGa,EAAIC,IAAQD,EACxDvB,KAAKuqB,oBAAqB7gB,EAAUd,EAAKD,EAASpH,GAEnDvB,KAAKkD,MAAQ,EACblD,KAAK2G,OAAS,EAGfmjB,EAAaxoB,SACbyoB,EAASzoB,SACT0oB,EAAY1oB,UAGHuoB,2BAAV,SACCngB,EAAwBd,EAAmBD,EAC3C/H,EAAewF,EAAWC,EAC1ByhB,EACA5kB,EAAeyD,GAEf,IAAM6jB,EAAU1C,EAAU1hB,EAAI0hB,EAAU2C,OAAOrkB,EAGzCgC,EAAKxH,GAAS,EACpB8I,EAAUtB,EAAK,GAAMhC,EAAIokB,EACzB9gB,EAAUtB,EAAK,GAAM/B,EAJL,EAKhBqD,EAAUtB,EAAK,GAAMhC,EAAIokB,EAAU1C,EAAU5kB,MAC7CwG,EAAUtB,EAAK,GAAM/B,EANL,EAOhBqD,EAAUtB,EAAK,GAAMhC,EAAIokB,EAAU1C,EAAU5kB,MAC7CwG,EAAUtB,EAAK,GAAM/B,EARL,EAQmByhB,EAAUnhB,OAC7C+C,EAAUtB,EAAK,GAAMhC,EAAIokB,EACzB9gB,EAAUtB,EAAK,GAAM/B,EAVL,EAUmByhB,EAAUnhB,OAE7C,IAAM2B,EAAKwf,EAAU1hB,EAAIlD,EACnBsF,EAAKsf,EAAUzhB,EAAIM,EACnB4B,GAAOuf,EAAU1hB,EAAI0hB,EAAU5kB,OAAUA,EACzCuF,GAAOqf,EAAUzhB,EAAIyhB,EAAUnhB,QAAWA,EAChDiC,EAAKR,EAAK,GAAME,EAChBM,EAAKR,EAAK,GAAMI,EAChBI,EAAKR,EAAK,GAAMG,EAChBK,EAAKR,EAAK,GAAMI,EAChBI,EAAKR,EAAK,GAAMG,EAChBK,EAAKR,EAAK,GAAMK,EAChBG,EAAKR,EAAK,GAAME,EAChBM,EAAKR,EAAK,GAAMK,EAEhB,IAAMC,EAAa,EAAR9H,EACL8pB,EAAK9pB,GAAS,EACpB+H,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,GAGhBb,gCAAV,SACCngB,EAAwBd,EAAmBD,EAC3C/H,GAEA,IAAMwH,EAAKxH,GAAS,EACpB8I,EAAUtB,EAAK,GAAM,EACrBsB,EAAUtB,EAAK,GAAM,EACrBsB,EAAUtB,EAAK,GAAM,EACrBsB,EAAUtB,EAAK,GAAM,EACrBsB,EAAUtB,EAAK,GAAM,EACrBsB,EAAUtB,EAAK,GAAM,EACrBsB,EAAUtB,EAAK,GAAM,EACrBsB,EAAUtB,EAAK,GAAM,EAErBQ,EAAKR,EAAK,GAAM,EAChBQ,EAAKR,EAAK,GAAM,EAChBQ,EAAKR,EAAK,GAAM,EAChBQ,EAAKR,EAAK,GAAM,EAChBQ,EAAKR,EAAK,GAAM,EAChBQ,EAAKR,EAAK,GAAM,EAChBQ,EAAKR,EAAK,GAAM,EAChBQ,EAAKR,EAAK,GAAM,EAEhB,IAAMM,EAAa,EAAR9H,EACL8pB,EAAK9pB,GAAS,EACpB+H,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,EACzB/hB,EAASD,EAAK,GAAMgiB,EAAK,MApIetf,6BC8BzC,WAAaxJ,EAA+Cc,GAC3D1C,KAAK2qB,GAAM,EACX3qB,KAAK4qB,IAAe,EAEpB,IAAMtB,EAAOuB,EAAkBC,KAC9BD,EAAkBC,MAAQxV,EAAQuG,cAAcC,IAAK,SAEtD9b,KAAKmD,EAAUvB,GAAWA,EAAQwB,OAAU,OAC5CpD,KAAK+qB,GAAenpB,GAAWA,EAAQopB,YAAe1B,EAAK2B,iBAC3DjrB,KAAKkrB,GAAatpB,GAAWA,EAAQupB,UAAa7B,EAAK8B,cACvDprB,KAAKqrB,GAAczpB,GAAWA,EAAQ0pB,WAAc,SACpDtrB,KAAKurB,GAAgB3pB,GAAWA,EAAQ4pB,aAAgB,SACxDxrB,KAAKyrB,GAAe7pB,GAAWA,EAAQ8pB,YAAe,SAEtD1rB,KAAK2rB,IAAa,EAClB3rB,KAAK4rB,GAAU,GACf5rB,KAAK6rB,GAAkB,GAEvB7rB,KAAK8rB,GAASlqB,GAAWA,EAAQmqB,MAASzC,EAAK/a,SAAU,GACzDvO,KAAKgsB,GAAgB,EAErBhsB,KAAKisB,IAAcrqB,GAA+B,MAApBA,EAAQsqB,UAAoBtqB,EAAQsqB,SAElElsB,KAAKmsB,GAAYzpB,EA2HnB,OAxHClD,sBAAIqrB,sBAAJ,WACC,OAAO7qB,KAAK2qB,oCAGbnrB,sBAAIqrB,8BAAJ,WACC,OAAO7qB,KAAK4qB,oCAGbprB,sBAAIqrB,0BAAJ,WAEC,OADA7qB,KAAKsB,SACEtB,KAAK4rB,oCAGbpsB,sBAAIqrB,kCAAJ,WACC,OAAO7qB,KAAK6rB,oCAGbrsB,sBAAIqrB,wBAAJ,WACC,OAAO7qB,KAAK8rB,QAGb,SAAUC,GACL/rB,KAAK8rB,KAAUC,IAClB/rB,KAAK8rB,GAAQC,EACb/rB,KAAK0C,6CAIGmoB,qBAAV,WACC7qB,KAAK2qB,IAAO,EACZ3qB,KAAKmsB,MAGN3sB,sBAAIqrB,gCAAJ,WACC,OAAO7qB,KAAKgsB,oCAGbnB,oBAAA,WACC7qB,KAAKsB,SACLtB,KAAK4qB,GAAc5qB,KAAK2qB,GACxB3qB,KAAK6rB,GAAkB7rB,KAAK4rB,GAC5B5rB,KAAKgsB,GAAgBhsB,KAAK8rB,IAG3BtsB,sBAAIqrB,8BAAJ,WACC,OAAO7qB,KAAK+qB,QAGb,SAAgBC,GACXhrB,KAAK+qB,KAAgBC,IACxBhrB,KAAK+qB,GAAcC,EACnBhrB,KAAK0C,6CAIPlD,sBAAIqrB,4BAAJ,WACC,OAAO7qB,KAAKkrB,QAGb,SAAcC,GACTnrB,KAAKkrB,KAAcC,IACtBnrB,KAAKkrB,GAAYC,EACjBnrB,KAAK0C,6CAIPlD,sBAAIqrB,6BAAJ,WACC,OAAO7qB,KAAKqrB,QAGb,SAAeC,GACVtrB,KAAKqrB,KAAeC,IACvBtrB,KAAKqrB,GAAaC,EAClBtrB,KAAK0C,6CAIPlD,sBAAIqrB,+BAAJ,WACC,OAAO7qB,KAAKurB,QAGb,SAAiBC,GACZxrB,KAAKurB,KAAiBC,IACzBxrB,KAAKurB,GAAeC,EACpBxrB,KAAK0C,6CAIPlD,sBAAIqrB,8BAAJ,WACC,OAAO7qB,KAAKyrB,QAGb,SAAgBC,GACX1rB,KAAKyrB,KAAgBC,IACxB1rB,KAAKyrB,GAAcC,EACnB1rB,KAAK0C,6CAIGmoB,mBAAV,WACK7qB,KAAK2rB,KAAc3rB,KAAK2qB,KAC3B3qB,KAAK2rB,GAAY3rB,KAAK2qB,GACtB3qB,KAAK4rB,GAAU5rB,KAAKosB,cAIZvB,sBAAV,WACC,OAAU7qB,KAAKqrB,OAAcrrB,KAAKurB,OAAgBvrB,KAAKyrB,OAAezrB,KAAKkrB,SAAelrB,KAAK+qB,IAGhGvrB,sBAAIqrB,4BAAJ,WACC,OAAO7qB,KAAKisB,QAGb,SAAcC,GACTlsB,KAAKisB,KAAcC,IACtBlsB,KAAKisB,GAAYC,EACjBlsB,KAAK0C,6CAjKUmoB,OAA0B,wBCK3C,WAAa7B,EAAcpnB,GAA3B,MACCkF,YAAO,IAAI+iB,EAAwB,IAAIxe,eAAcghB,UAAQC,qBAE7DrlB,EAAKslB,GAAS,IAAI1B,EAAmBjpB,GAAS,WAC7CqF,EAAKK,GAAW,EAChBL,EAAKulB,IAAmB,EACxBvlB,EAAKwlB,GAAS,KACdxlB,EAAKylB,QAENzlB,EAAK0lB,GAAQ3D,EACb/hB,EAAK2lB,GAAgB,GACrB3lB,EAAKK,GAAW,EAChBL,EAAKulB,IAAmB,EACxBvlB,EAAKwlB,GAAS,KACdxlB,EAAK4lB,GAAwB,EAC7B5lB,EAAKhE,EAAS,EACdgE,EAAKC,EAAU,EACfD,EAAK6lB,GAAsB,EAC3B7lB,EAAKylB,OAsIP,OAvKkC5sB,OAoCvBitB,eAAV,WACC,IAAM7rB,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAM8rB,EAAQhtB,KAAKusB,GACnB,GAAIvsB,KAAKsH,EAAW,CACnBtH,KAAKsH,GAAW,EAEhB,IAAM0hB,EAAOhpB,KAAK2sB,GACZM,EAAejtB,KAAK4sB,GAC1B5sB,KAAK4sB,GAAgB5D,EACrB,IAAMkE,EAASF,EAAME,OACfC,EAAiBH,EAAMG,eACvBhC,EAAW6B,EAAM7B,SACjBY,EAAOiB,EAAMjB,KACbqB,EAAeJ,EAAMI,aAC3BJ,EAAMK,UAEN,IAAMC,EAAUpsB,EAAMqsB,wBAClBvE,IAASiE,GAAgBC,IAAWC,GAAkBpB,IAASqB,IAClEE,EAAQE,IAAKN,EAAQ/B,EAAUY,EAAM/C,GACrCsE,EAAQG,OAAQN,EAAgBC,EAAcH,OAMlDztB,sBAAIutB,wBAAJ,WACC,OAAO/sB,KAAK2sB,QAGb,SAAU3D,GACLhpB,KAAK2sB,KAAU3D,IAClBhpB,KAAK2sB,GAAQ3D,EACbhpB,KAAKsH,GAAW,EAChBtH,KAAKwsB,IAAmB,EACxBxsB,KAAK0sB,uCAIPltB,sBAAIutB,yBAAJ,WAEC,OADA/sB,KAAKsB,SACEqI,KAAKwP,IAAKnZ,KAAKsc,MAAMlW,GAAMpG,KAAKwL,SAAStI,WAGjD,SAAWA,GACVlD,KAAKsB,SACL,IAAMosB,EAAgB1tB,KAAKwL,SAAStI,MACpC,GAAI,KAAQwqB,EAAgB,CAC3B,IAAMC,EAAWzqB,EAAQwqB,EACzB1tB,KAAKsc,MAAMlW,EAAM,GAAKpG,KAAKsc,MAAMlW,GAAKunB,GAAYA,oCAIpDnuB,sBAAIutB,0BAAJ,WAEC,OADA/sB,KAAKsB,SACEqI,KAAKwP,IAAKnZ,KAAKsc,MAAMjW,GAAMrG,KAAKwL,SAAS7E,YAGjD,SAAYA,GACX3G,KAAKsB,SACL,IAAMssB,EAAiB5tB,KAAKwL,SAAS7E,OACrC,GAAI,KAAQinB,EAAiB,CAC5B,IAAMD,EAAWhnB,EAASinB,EAC1B5tB,KAAKsc,MAAMjW,EAAM,GAAKrG,KAAKsc,MAAMjW,GAAKsnB,GAAYA,oCAIpDnuB,sBAAIutB,yBAAJ,WACC,OAAO/sB,KAAKusB,oCAGbQ,mBAAA,WACC/sB,KAAK0sB,KAEL,IAAIzD,EAAQjpB,KAAKysB,GACjB,GAAa,MAATxD,EAAgB,CACnB,IAAM/nB,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAM8rB,EAAQhtB,KAAKusB,GAEN,OADbtD,EAAQ/nB,EAAMqsB,wBAAwBzR,IAAKkR,EAAME,OAAQF,EAAMjB,SAE9D/rB,KAAK6sB,GAAwB5D,EAAM4E,oBACnC7tB,KAAKysB,GAASxD,EACdjpB,KAAK0G,QAAUuiB,EAAMviB,QACrB1G,KAAKwsB,IAAmB,QAGpB,CACN,IAAMsB,EAAiB7E,EAAM4E,oBACzBC,IAAmB9tB,KAAK6sB,KAC3B7sB,KAAK6sB,GAAwBiB,EAC7B9tB,KAAKwsB,IAAmB,GAI1B,IAAMtD,EAAgBlpB,KAAK+tB,GACrBC,EAAmBhuB,KAAKiuB,mBAC1B/E,IAAkB8E,IACrBhuB,KAAK+tB,GAAiBC,EACtBhuB,KAAKwsB,IAAmB,GAGrBxsB,KAAKwsB,KACRxsB,KAAKwsB,IAAmB,EACxBxsB,KAAKwL,SAASlK,OAAQtB,KAAK2sB,GAAO1D,EAAO+E,KAIjCjB,6BAAV,WACC,GAAI/sB,KAAKusB,GAAOL,SAAW,CAC1B,IAAMxK,EAAS1hB,KAAKgB,OACpB,GAAI0gB,aAAkBf,EACrB,OAAOe,EAAOxe,MAAQwe,EAAOzc,QAAQ2c,UAAYF,EAAOzc,QAAQggB,WAAajlB,KAAK8sB,KAMrFC,kCAAA,SAAuB7pB,GACtBlD,KAAK8sB,GAAsB5pB,GAG5B6pB,6BAAA,WACC/sB,KAAKsB,SACLwF,YAAMygB,6BAGPwF,oBAAA,SAASthB,GACRzL,KAAKsB,SACJwF,YAAM4E,kBAAiBD,OArKQE,SZPlC,SAAYwJ,GACXA,mBACAA,uBACAA,qBAHD,CAAYA,IAAAA,OCAZ,SAAYC,GACXA,iBACAA,uBACAA,uBAHD,CAAYA,IAAAA,OCAZ,SAAYC,GACXA,mBACAA,yBACAA,uBAHD,CAAYA,IAAAA,OWGZ,kBACC,WAAarU,GAAb,MACC8F,0BACCG,EAAajG,OAASA,IAczB,OAjB6ClB,OAM5CouB,mBAAA,SAAQziB,GACPzL,KAAK6mB,kBACL/f,YAAMrF,iBAAQgK,IAGfyiB,qBAAA,SAAUthB,EAAa1J,EAAeyD,GACrC3G,KAAKud,QACLvd,KAAKmuB,UAAW,SAAU,GAC1BnuB,KAAKouB,SAAU,EAAG,EAAGlrB,EAAOyD,GAC5B3G,KAAKquB,cAfsCC,0BCyI7C,4DAiOA,OA7NUxuB,OAgBCyuB,iBAAV,SAAgB3sB,GACfkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK2sB,GAAQ,KACb,IAAMhrB,EAAQ3B,KAAK2B,MACnB3B,KAAKwuB,GAhHa,SACnB7sB,EACAC,GAEA,OAAIA,GAAWA,EAAQonB,WAA+BzmB,IAAvBX,EAAQonB,KAAKyF,MACpC7sB,EAAQonB,KAAKyF,MAEd9sB,EAAM+sB,eAyGMC,CAAahtB,EAAOC,GACtC5B,KAAK4uB,GAAqB5uB,KAAK6uB,mBAC/B7uB,KAAK8uB,GAAeltB,GAAWA,EAAQonB,MAAQpnB,EAAQonB,KAAK9mB,MAC5DlC,KAAK+uB,GAAentB,GAAWA,EAAQonB,MAAQpnB,EAAQonB,KAAK5mB,MAC5DpC,KAAKgvB,GA1Ga,SACnBrtB,EAAuBC,EAAqDU,GAE5E,GAAIV,GAAWA,EAAQonB,MAA8B,MAAtBpnB,EAAQonB,KAAKgE,MAAgB,CAC3D,IAAMA,EAAQprB,EAAQonB,KAAKgE,MAQ3B,MAAO,CACNjB,KAR0B,MAAdiB,EAAMjB,KAAeiB,EAAMjB,KAAOpqB,EAAM4M,SAAUjM,GAS9D6oB,SARkC,MAAlB6B,EAAM7B,SAAmB6B,EAAM7B,SAAWxpB,EAAMypB,cAShEJ,WARsC,MAApBgC,EAAMhC,WAAqBgC,EAAMhC,WAAarpB,EAAMspB,iBAStES,WARsC,MAApBsB,EAAMtB,WAAqBsB,EAAMtB,WAAa/pB,EAAMstB,gBAStE3D,UARoC,MAAnB0B,EAAM1B,UAAoB0B,EAAM1B,UAAY3pB,EAAMutB,eASnE1D,YARwC,MAArBwB,EAAMxB,YAAsBwB,EAAMxB,YAAc7pB,EAAMwtB,iBASzEjD,SARkC,MAAlBc,EAAMd,SAAmBc,EAAMd,SAAWvqB,EAAMytB,wBAYlE,MAAO,CACNrD,KAAMpqB,EAAM4M,SAAUjM,GACtB6oB,SAAUxpB,EAAMypB,cAChBJ,WAAYrpB,EAAMspB,iBAClBS,WAAY/pB,EAAMstB,gBAClB3D,UAAW3pB,EAAMutB,eACjB1D,YAAa7pB,EAAMwtB,iBACnBjD,SAAUvqB,EAAMytB,wBA4EEC,CAAa1tB,EAAOC,EAAS5B,KAAKsC,OACpDtC,KAAKsvB,GAzEa,SACnB3tB,EAAuBC,GAEvB,GAAIA,GAAWA,EAAQonB,MAAQpnB,EAAQonB,KAAK5lB,MAAQ,CACnD,IAAMA,EAAQxB,EAAQonB,KAAK5lB,MAS3B,MAAO,CACNmsB,SAToC,MAAlBnsB,EAAMmsB,SACtB1sB,EAAcO,EAAMmsB,UAAana,EAAgBhS,EAAMmsB,UAAansB,EAAMmsB,SAC5E5tB,EAAM6tB,uBAQNC,WANwC,MAApBrsB,EAAMqsB,WACxB5sB,EAAcO,EAAMqsB,YAAeta,EAAkB/R,EAAMqsB,YAAersB,EAAMqsB,WAClF9tB,EAAM+tB,0BAOR,MAAO,CACNH,SAAU5tB,EAAM6tB,uBAChBC,WAAY9tB,EAAM+tB,0BAqDAC,CAAahuB,EAAOC,GACtC5B,KAAK4vB,GAlDiB,SACvBjuB,EACAC,GAEA,OAAIA,GAAWA,EAAQonB,MAAQpnB,EAAQonB,KAAK6G,UACpCjuB,EAAQonB,KAAK6G,UAEdluB,EAAMmuB,mBA2CUC,CAAiBpuB,EAAOC,GAC9C5B,KAAKgwB,GAzCe,SACrBruB,EAAuBC,GAEvB,OAAIA,GAAWA,EAAQonB,MAAgC,MAAxBpnB,EAAQonB,KAAKiH,QACpCruB,EAAQonB,KAAKiH,QAEdtuB,EAAMuuB,gBAmCQC,CAAexuB,EAAOC,GAC1C5B,KAAKowB,GAjIuB,SAC7BzuB,EAAuBC,GAEvB,OAAIA,GAA2B,MAAhBA,EAAQ0B,KACf1B,EAAQ0B,KAET3B,EAAM0uB,wBA2HkBA,CAAuB1uB,EAAOC,GAC5D5B,KAAKswB,GAAgB,KACrBtwB,KAAKuwB,eACLvwB,KAAKwwB,sBAGNhxB,sBAAI+uB,wBAOJ,WACC,OAAOvuB,KAAKwuB,QARb,SAAUxF,GACLhpB,KAAKwuB,KAAexF,IACvBhpB,KAAKwuB,GAAaxF,EAClBhpB,KAAKywB,oDAQGlC,yBAAV,aAIUA,6BAAV,WACC,IAAMmC,EAAY1wB,KAAKwuB,GACvB,QAAkBjsB,IAAdmuB,EAA0B,CAC7B,IAAIhvB,EAAgBgvB,GAMnB,OAAOA,EALP,IAAMluB,EAASkuB,EAAW1wB,KAAKsC,OAC/B,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK2B,MAAMgvB,aAAc3wB,KAAKsC,QAG5BisB,+BAAV,WACC,IAAMqC,EAAY5wB,KAAK4vB,GAAgB5vB,KAAK4uB,GAAoB5uB,MAChE,GAAkB,MAAdA,KAAK2sB,IACR,GAAI,EAAIiE,EAAUlwB,OAAS,CAC1B,IAAMsoB,EAAOhpB,KAAK6wB,WAAYD,GAC9B5wB,KAAK2sB,GAAQ3D,EACbhpB,KAAKwgB,SAAUwI,GACfhpB,KAAK8wB,mBAAoB9H,GACrBhpB,KAAKowB,KACRpH,EAAK1lB,KAAOtD,KAAK+wB,2BAElB/wB,KAAK2d,UACLtd,EAAciB,OAAQtB,YAGvBA,KAAK2sB,GAAM3D,KAAO4H,EAClB5wB,KAAK2d,UACLtd,EAAciB,OAAQtB,OAIduuB,uBAAV,SAAsBqC,GACrB,OAAS5wB,KAAKgwB,GACb,IAAIjD,EAAc6D,EAAW5wB,KAAKgvB,IAClC,IAAIgC,OAAMJ,EAAW5wB,KAAKgvB,KAIlBT,oCAAV,WAMC,OAL0B,MAAtBvuB,KAAKswB,KACRtwB,KAAKswB,GAAgB,IAAIpC,EAAyBluB,MAClDA,KAAKoO,cAAepO,KAAKswB,IACzBtwB,KAAK2d,WAEC3d,KAAKswB,IAGH/B,+BAAV,SAA8BvF,GAC7B,IAAM5lB,EAAQpD,KAAKsvB,GACbrqB,EAAUjF,KAAKyd,GAErB,OAAQra,EAAMqsB,YACd,KAAKta,EAAiB3I,KACrBwc,EAAK5iB,EAAIpG,KAAKixB,UAAWhsB,EAAQ2c,WACjC,MACD,KAAKzM,EAAiBtB,OACrBmV,EAAK5iB,EAAIpG,KAAKixB,UAAyC,IAA5BjxB,KAAKkD,MAAQ8lB,EAAK9lB,QAC7C,MACD,KAAKiS,EAAiBzI,MACrBsc,EAAK5iB,EAAIpG,KAAKixB,UAAWjxB,KAAKkD,MAAQ8lB,EAAK9lB,MAAQ+B,EAAQggB,YAI5D,OAAQ7hB,EAAMmsB,UACd,KAAKna,EAAehJ,IACnB4c,EAAK3iB,EAAIrG,KAAKixB,UAAWhsB,EAAQ6c,UACjC,MACD,KAAK1M,EAAe8b,OACnBlI,EAAK3iB,EAAIrG,KAAKixB,UAA2C,IAA9BjxB,KAAK2G,OAASqiB,EAAKriB,SAC9C,MACD,KAAKyO,EAAe9I,OACnB0c,EAAK3iB,EAAIrG,KAAKixB,UAAWjxB,KAAK2G,OAASqiB,EAAKriB,OAAS1B,EAAQigB,eAKrDqJ,sBAAV,SAAqBE,GACpB,OAAO9kB,KAAKwnB,MAAO1C,IAGVF,yBAAV,SAAwB5sB,EAAcW,GACrC,IAAMJ,EAAQlC,KAAK8uB,GACnB,QAAcvsB,IAAVL,EAAsB,CACzB,IAAIR,EAAgBQ,GAMnB,OAAOA,EALP,IAAMM,EAASN,EAAOI,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOb,EAAM4M,SAAUjM,IAGdisB,yBAAV,SAAwB5sB,EAAcW,GACrC,IAAMF,EAAQpC,KAAK+uB,GACnB,QAAcxsB,IAAVH,EAAsB,CACzB,IAAIV,EAAgBU,GAMnB,OAAOA,EALP,IAAMI,EAASJ,EAAOE,GACtB,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOb,EAAM8M,SAAUnM,IAGdisB,4BAAV,SAA2BvF,GAC1B,IAAMrnB,EAAQ3B,KAAK2B,MACbW,EAAQtC,KAAKsC,MACnB0mB,EAAKgE,MAAMjB,KAAO/rB,KAAKoxB,aAAczvB,EAAOW,GAC5C0mB,EAAK5mB,MAAQpC,KAAKqxB,aAAc1vB,EAAOW,IAG9BisB,4BAAV,WACC,IAAM+C,EAAuBtxB,KAAK6uB,mBAC9B7uB,KAAK4uB,KAAuB0C,IAC/BtxB,KAAK4uB,GAAqB0C,EAC1BtxB,KAAKuwB,eACLvwB,KAAKwwB,uBAIGjC,uBAAV,WACC,IAAMvF,EAAOhpB,KAAK2sB,GACN,MAAR3D,IACHhpB,KAAKywB,kBACLzwB,KAAK8wB,mBAAoB9H,GACzBhpB,KAAKuxB,gBAAiBvI,KAIduF,qBAAV,WACCznB,YAAMse,oBACNplB,KAAKwxB,cAGIjD,wBAAV,SAAuBztB,GACtB,OAAOgG,YAAMqe,sBAAarkB,IACd,MAAVA,GAAkBA,IAAWd,KAAK2sB,IAG3B4B,oBAAV,WACC,MAAO,aAGRA,oBAAA,WAEC,IAAMvF,EAAOhpB,KAAK2sB,GACN,MAAR3D,IACHhpB,KAAK2sB,GAAQ,KACb3D,EAAKrB,WAIN,IAAM8J,EAAezxB,KAAKswB,GACN,MAAhBmB,IACHzxB,KAAKswB,GAAgB,KACrBmB,EAAa9J,WAGd7gB,YAAM6gB,uBA3NEhH,iBCtCV,4DA2eA,OAveU7gB,OAkBC4xB,iBAAV,SAAgB9vB,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ5B,KAAK2xB,GAAS,KACd,IAAMhwB,EAAQ3B,KAAK2B,MACnB3B,KAAK4xB,GAnFc,SACpBjwB,EAAwBC,GAExB,GAAe,MAAXA,GAAoC,MAAjBA,EAAQiwB,OAAwC,MAAvBjwB,EAAQiwB,MAAMzuB,MAAgB,CAC7E,IAAMA,EAAQxB,EAAQiwB,MAAMzuB,MAa5B,MAAO,CACN0uB,KAb6C,MAAd1uB,EAAM0uB,KACnCjvB,EAAcO,EAAM0uB,MAASzc,EAAYjS,EAAM0uB,MAAS1uB,EAAM0uB,KAChEnwB,EAAMowB,oBAYNxC,SAVyD,MAAlBnsB,EAAMmsB,SAC3C1sB,EAAcO,EAAMmsB,UAAana,EAAgBhS,EAAMmsB,UAAansB,EAAMmsB,SAC5E5tB,EAAMqwB,wBASNvC,WAP+D,MAApBrsB,EAAMqsB,WAC/C5sB,EAAcO,EAAMqsB,YAAeta,EAAkB/R,EAAMqsB,YAAersB,EAAMqsB,WAClF9tB,EAAMswB,2BAQR,MAAO,CACNH,KAAMnwB,EAAMowB,oBACZxC,SAAU5tB,EAAMqwB,wBAChBvC,WAAY9tB,EAAMswB,2BAyDCC,CAAcvwB,EAAOC,GACxC5B,KAAKmyB,GAtDe,SACrBxwB,EAAwBC,GAExB,GAAe,MAAXA,GAAoC,MAAjBA,EAAQiwB,OAAyC,MAAxBjwB,EAAQiwB,MAAMO,OAAiB,CAC9E,IAAMA,EAASxwB,EAAQiwB,MAAMO,OAG7B,MAAO,CACN7C,SAHqC,MAAnB6C,EAAO7C,SAAmB6C,EAAO7C,SAAW5tB,EAAM0wB,wBAIpE5C,WAHyC,MAArB2C,EAAO3C,WAAqB2C,EAAO3C,WAAa9tB,EAAM2wB,4BAM5E,MAAO,CACN/C,SAAU5tB,EAAM0wB,wBAChB5C,WAAY9tB,EAAM2wB,4BAwCEC,CAAe5wB,EAAOC,GAC1C5B,KAAKwyB,GArCa,SACnB7wB,EAAwBC,GAExB,GAAe,MAAXA,GAAoC,MAAjBA,EAAQiwB,OAAuC,MAAtBjwB,EAAQiwB,MAAMnjB,KAC7D,OAAO9M,EAAQiwB,MAAMnjB,KAiCH+jB,CAAa9wB,EAAOC,GACtC5B,KAAK0yB,GAAc,IAAIC,YACvB3yB,KAAK4yB,GAAmB,IAAIhL,QAC5B5nB,KAAK6yB,GAAiBjxB,GAAWA,EAAQiwB,OAASjwB,EAAQiwB,MAAMrhB,OAChExQ,KAAK8yB,GAAuB,KAC5B9yB,KAAK+yB,GAAsB,WAC1B9rB,EAAK+rB,kBAIPxzB,sBAAIkyB,yBAAJ,WACC,OAAO1xB,KAAK6yB,QAGb,SAAWI,GACNjzB,KAAK6yB,KAAiBI,IACzBjzB,KAAK6yB,GAAeI,EACpBjzB,KAAK2d,UACLtd,EAAciB,OAAQtB,wCAId0xB,+BAAV,WACC,IAAMuB,EAAcjzB,KAAK6yB,GACzB,QAAoBtwB,IAAhB0wB,EAA4B,CAC/B,IAAIvxB,EAAgBuxB,GAMnB,OAAOA,EALP,IAAMzwB,EAASywB,EAAajzB,KAAKsC,OACjC,QAAeC,IAAXC,EACH,OAAOA,EAMV,OAAOxC,KAAK2B,MAAMuxB,eAAgBlzB,KAAKsC,QAG9BovB,0BAAV,WACC1xB,KAAK2d,UACLtd,EAAciB,OAAQtB,OAGb0xB,0BAAV,SAAyB3N,EAAsBE,GAC9Cnd,YAAMod,wBAAeH,EAAUE,GAE/B,IAAM4N,EAAQ7xB,KAAK2xB,GACN,MAATE,GACH7xB,KAAKmzB,gBAAiBtB,IAIdH,yBAAV,SAAwBG,GACvBA,EAAMhL,kBACN,IAAMI,EAAS4K,EAAMuB,eAAgBpzB,KAAK0yB,IACpC3sB,EAAQ/F,KAAK4yB,GACnB7sB,EAAMO,IAAK2gB,EAAO3hB,KAAM2hB,EAAO1hB,KAC/BssB,EAAMwB,eAAehM,MAAOthB,EAAOA,GACnC,IAAMuC,EAAKvC,EAAMK,EACXoC,EAAKzC,EAAMM,EACjBN,EAAMO,IAAK2gB,EAAOzhB,MAAOyhB,EAAO1hB,KAChCssB,EAAMwB,eAAehM,MAAOthB,EAAOA,GACnC,IAAMwC,EAAKxC,EAAMK,EACXqC,EAAK1C,EAAMM,EACjBN,EAAMO,IAAK2gB,EAAOzhB,MAAOyhB,EAAOxhB,QAChCosB,EAAMwB,eAAehM,MAAOthB,EAAOA,GACnC,IAAM8D,EAAK9D,EAAMK,EACX4D,EAAKjE,EAAMM,EACjBN,EAAMO,IAAK2gB,EAAO3hB,KAAM2hB,EAAOxhB,QAC/BosB,EAAMwB,eAAehM,MAAOthB,EAAOA,GACnC,IAAMgE,EAAKhE,EAAMK,EACX6D,EAAKlE,EAAMM,EAKjB,OAJA4gB,EAAO7gB,EAAIuD,KAAKC,IAAKtB,EAAIC,EAAIsB,EAAIE,GACjCkd,EAAO5gB,EAAIsD,KAAKC,IAAKpB,EAAIC,EAAIuB,EAAIC,GACjCgd,EAAO/jB,MAAQyG,KAAKG,IAAKxB,EAAIC,EAAIsB,EAAIE,GAAOkd,EAAO7gB,EACnD6gB,EAAOtgB,OAASgD,KAAKG,IAAKtB,EAAIC,EAAIuB,EAAIC,GAAOgd,EAAO5gB,EAC7C4gB,GAGEyK,uCAAV,SAAsC1I,EAA2B6I,GAChE,IAAM5K,EAASjnB,KAAKszB,aAAczB,GAC5B0B,EAAatM,EAAO/jB,MACpBswB,EAAcvM,EAAOtgB,OAErB8sB,EAAYzzB,KAAKsvB,GACjBoE,EAAa1zB,KAAK4xB,GAClBQ,EAASpyB,KAAKmyB,GACdltB,EAAUjF,KAAKyd,GAEfkW,EAAmBvB,EAAO3C,WAC1BmE,EAAYL,EAAaI,EAC/B,OAAQD,EAAWjE,YACnB,KAAKta,EAAiB3I,KACrB,OAAQinB,EAAUhE,YAClB,KAAKta,EAAiB3I,KACjBwc,aAAgB+D,GACnB/D,EAAK6K,sBAAuBD,GAE7B/B,EAAMzrB,EAAIpG,KAAKixB,UAAWhsB,EAAQ2c,WAClC,MACD,KAAKzM,EAAiBtB,OACjBmV,aAAgB+D,GACnB/D,EAAK6K,sBAAuBD,GAE7B/B,EAAMzrB,EAAIpG,KAAKixB,UAAqD,IAAxCjxB,KAAKkD,MAAQ8lB,EAAK9lB,MAAQ0wB,IACtD,MACD,KAAKze,EAAiBzI,MACjBsc,aAAgB+D,GACnB/D,EAAK6K,sBAAuB,GAE7BhC,EAAMzrB,EAAIpG,KAAKixB,UAAWjxB,KAAKkD,MAAQ8lB,EAAK9lB,MAAQ+B,EAAQggB,WAAa2O,GAG1E5K,EAAK5iB,EAAIpG,KAAKixB,UAAWY,EAAMzrB,EAAIwtB,GACnC,MACD,KAAKze,EAAiBtB,OAIrB,OAHImV,aAAgB+D,GACnB/D,EAAK6K,sBAAuB,GAErBJ,EAAUhE,YAClB,KAAKta,EAAiB3I,KACrBwc,EAAK5iB,EAAIpG,KAAKixB,UAAWhsB,EAAQ2c,WACjC,MACD,KAAKzM,EAAiBtB,OACrBmV,EAAK5iB,EAAIpG,KAAKixB,UAAyC,IAA5BjxB,KAAKkD,MAAQ8lB,EAAK9lB,QAC7C,MACD,KAAKiS,EAAiBzI,MACrBsc,EAAK5iB,EAAIpG,KAAKixB,UAAWjxB,KAAKkD,MAAQ8lB,EAAK9lB,MAAQ+B,EAAQggB,YAG5D4M,EAAMzrB,EAAIpG,KAAKixB,UAAWjI,EAAK5iB,EAAkC,IAA5B4iB,EAAK9lB,MAAQqwB,IAClD,MACD,KAAKpe,EAAiBzI,MACrB,OAAQ+mB,EAAUhE,YAClB,KAAKta,EAAiB3I,KACjBwc,aAAgB+D,GACnB/D,EAAK6K,sBAAuB,GAE7B7K,EAAK5iB,EAAIpG,KAAKixB,UAAWhsB,EAAQ2c,WACjC,MACD,KAAKzM,EAAiBtB,OACjBmV,aAAgB+D,GACnB/D,EAAK6K,sBAAuBD,GAE7B5K,EAAK5iB,EAAIpG,KAAKixB,UAAqD,IAAxCjxB,KAAKkD,MAAQ8lB,EAAK9lB,MAAQ0wB,IACrD,MACD,KAAKze,EAAiBzI,MACjBsc,aAAgB+D,GACnB/D,EAAK6K,sBAAuBD,GAE7B5K,EAAK5iB,EAAIpG,KAAKixB,UAAWjxB,KAAKkD,MAAQ8lB,EAAK9lB,MAAQ+B,EAAQggB,WAAa2O,GAGzE/B,EAAMzrB,EAAIpG,KAAKixB,UAAWjI,EAAK5iB,EAAI4iB,EAAK9lB,MAAQywB,GAIjD,IAAMG,EAAiB1B,EAAO7C,SACxBwE,EAAYR,EAAaI,EAC/B,OAAQD,EAAWnE,UACnB,KAAKna,EAAehJ,IACnB,OAAQqnB,EAAUlE,UAClB,KAAKna,EAAehJ,IACnBylB,EAAMxrB,EAAIrG,KAAKixB,UAAWhsB,EAAQ6c,UAClC,MACD,KAAK1M,EAAe8b,OACnBW,EAAMxrB,EAAIrG,KAAKixB,UAAuD,IAA1CjxB,KAAK2G,OAASqiB,EAAKriB,OAASotB,IACxD,MACD,KAAK3e,EAAe9I,OACnBulB,EAAMxrB,EAAIrG,KAAKixB,UAAWjxB,KAAK2G,OAASqiB,EAAKriB,OAAS1B,EAAQigB,YAAc6O,GAG7E/K,EAAK3iB,EAAIrG,KAAKixB,UAAWY,EAAMxrB,EAAI0tB,GACnC,MACD,KAAK3e,EAAe8b,OACnB,OAAQuC,EAAUlE,UAClB,KAAKna,EAAehJ,IACnB4c,EAAK3iB,EAAIrG,KAAKixB,UAAWhsB,EAAQ6c,UACjC,MACD,KAAK1M,EAAe8b,OACnBlI,EAAK3iB,EAAIrG,KAAKixB,UAA2C,IAA9BjxB,KAAK2G,OAASqiB,EAAKriB,SAC9C,MACD,KAAKyO,EAAe9I,OACnB0c,EAAK3iB,EAAIrG,KAAKixB,UAAWjxB,KAAK2G,OAASqiB,EAAKriB,OAAS1B,EAAQigB,aAG9D2M,EAAMxrB,EAAIrG,KAAKixB,UAAWjI,EAAK3iB,EAAoC,IAA9B2iB,EAAKriB,OAAS6sB,IACnD,MACD,KAAKpe,EAAe9I,OACnB,OAAQmnB,EAAUlE,UAClB,KAAKna,EAAehJ,IACnB4c,EAAK3iB,EAAIrG,KAAKixB,UAAWhsB,EAAQ6c,UACjC,MACD,KAAK1M,EAAe8b,OACnBlI,EAAK3iB,EAAIrG,KAAKixB,UAAuD,IAA1CjxB,KAAK2G,OAASqiB,EAAKriB,OAASotB,IACvD,MACD,KAAK3e,EAAe9I,OACnB0c,EAAK3iB,EAAIrG,KAAKixB,UAAWjxB,KAAK2G,OAASqiB,EAAKriB,OAAS1B,EAAQigB,YAAc6O,GAG5ElC,EAAMxrB,EAAIrG,KAAKixB,UAAWjI,EAAK3iB,EAAI2iB,EAAKriB,OAASmtB,KAKzCpC,oCAAV,SAAmCG,GAClC,IAAM5K,EAASjnB,KAAKszB,aAAczB,GAClCA,EAAMzrB,EAAIpG,KAAKixB,UAA2C,IAA9BjxB,KAAKkD,MAAQ+jB,EAAO/jB,QAChD2uB,EAAMxrB,EAAIrG,KAAKixB,UAA6C,IAAhCjxB,KAAK2G,OAASsgB,EAAOtgB,UAGxC+qB,uCAAV,SAAsCG,GACrC,IAAMO,EAASpyB,KAAKmyB,GACd/uB,EAAQpD,KAAK4xB,GACb3sB,EAAUjF,KAAKyd,GACfwJ,EAASjnB,KAAKszB,aAAczB,GAC5B0B,EAAatM,EAAO/jB,MACpBswB,EAAcvM,EAAOtgB,OAErBgtB,EAAmBvB,EAAO3C,WAChC,OAAQrsB,EAAMqsB,YACd,KAAKta,EAAiB3I,KACrBqlB,EAAMzrB,EAAIpG,KAAKixB,UAAWhsB,EAAQ2c,UAAY+R,GAC9C,MACD,KAAKxe,EAAiBtB,OACrBge,EAAMzrB,EAAIpG,KAAKixB,UAAyC,IAA5BjxB,KAAKkD,MAAQqwB,IACzC,MACD,KAAKpe,EAAiBzI,MACrBmlB,EAAMzrB,EAAIpG,KAAKixB,UAAWjxB,KAAKkD,MAAQ+B,EAAQggB,WAAa0O,EAAmBJ,GAIhF,IAAMO,EAAiB1B,EAAO7C,SAC9B,OAAQnsB,EAAMmsB,UACd,KAAKna,EAAehJ,IACnBylB,EAAMxrB,EAAIrG,KAAKixB,UAAWhsB,EAAQ6c,SAAWgS,GAC7C,MACD,KAAK1e,EAAe8b,OACnBW,EAAMxrB,EAAIrG,KAAKixB,UAA2C,IAA9BjxB,KAAK2G,OAAS6sB,IAC1C,MACD,KAAKpe,EAAe9I,OACnBulB,EAAMxrB,EAAIrG,KAAKixB,UAAWjxB,KAAK2G,OAAS1B,EAAQigB,YAAc4O,KAKtDpC,sCAAV,SAAqCG,GACpC,IAAMO,EAASpyB,KAAKmyB,GACd/uB,EAAQpD,KAAK4xB,GACb3K,EAASjnB,KAAKszB,aAAczB,GAC5B0B,EAAatM,EAAO/jB,MACpBswB,EAAcvM,EAAOtgB,OAErBgtB,EAAmBvB,EAAO3C,WAChC,OAAQrsB,EAAMqsB,YACd,KAAKta,EAAiB3I,KACrBqlB,EAAMzrB,EAAIpG,KAAKixB,UAAW0C,GAC1B,MACD,KAAKxe,EAAiBtB,OACrBge,EAAMzrB,EAAIpG,KAAKixB,UAAyC,IAA5BjxB,KAAKkD,MAAQqwB,IACzC,MACD,KAAKpe,EAAiBzI,MACrBmlB,EAAMzrB,EAAIpG,KAAKixB,UAAWjxB,KAAKkD,MAAQywB,EAAmBJ,GAI3D,IAAMO,EAAiB1B,EAAO7C,SAC9B,OAAQnsB,EAAMmsB,UACd,KAAKna,EAAehJ,IACnBylB,EAAMxrB,EAAIrG,KAAKixB,UAAW6C,GAC1B,MACD,KAAK1e,EAAe8b,OACnBW,EAAMxrB,EAAIrG,KAAKixB,UAA2C,IAA9BjxB,KAAK2G,OAAS6sB,IAC1C,MACD,KAAKpe,EAAe9I,OACnBulB,EAAMxrB,EAAIrG,KAAKixB,UAAWjxB,KAAK2G,OAASmtB,KAKhCpC,8BAAV,SAA6B/vB,EAAcW,GAC1C,IAAM0xB,EAAYh0B,KAAKwyB,GACvB,GAAiB,MAAbwB,EAAoB,CACvB,IAAM9xB,EAAQ8xB,EAAU9xB,MACxB,QAAcK,IAAVL,EAAsB,CACzB,IAAIR,EAAgBQ,GAMnB,OAAOA,EALP,IAAMM,EAASN,EAAOI,GACtB,QAAeC,IAAXC,EACH,OAAOA,GAOX,OAAOb,EAAMsyB,kBAAmB3xB,IAGvBovB,8BAAV,SAA6B/vB,EAAcW,GAC1C,IAAM0xB,EAAYh0B,KAAKwyB,GACvB,GAAiB,MAAbwB,EAAoB,CACvB,IAAM5xB,EAAQ4xB,EAAU5xB,MACxB,QAAcG,IAAVH,EAAsB,CACzB,IAAIV,EAAgBU,GAMnB,OAAOA,EALP,IAAMI,EAASJ,EAAOE,GACtB,QAAeC,IAAXC,EACH,OAAOA,GAOX,OAAOb,EAAMuyB,kBAAmB5xB,IAGvBovB,4BAAV,SAA2BG,GAC1B,GAAI7xB,KAAKm0B,YAAatC,GAAU,CAC/B,IAAMlwB,EAAQ3B,KAAK2B,MACbW,EAAQtC,KAAKsC,MACbJ,EAAQlC,KAAKi0B,kBAAmBtyB,EAAOW,GAC7C,GAAa,MAATJ,EAAgB,CACf2vB,EAAMnjB,OAASxM,IAClB2vB,EAAMnjB,KAAOxM,GAEd,IAAME,EAAQpC,KAAKk0B,kBAAmBvyB,EAAOW,GACzCuvB,EAAMzvB,QAAUA,IACnByvB,EAAMzvB,MAAQA,MAMRsvB,wBAAV,SAAuB5wB,GACtB,OAAmB,MAAVA,GAAkB,SAAUA,GAG5B4wB,8BAAV,WACC,IAAM0C,EAAyBp0B,KAAKq0B,qBAC9BC,EAAyBt0B,KAAK8yB,GACpC,GAAIsB,IAA2BE,EAAyB,CACvDt0B,KAAK8yB,GAAuBsB,EAE5B,IAAMG,EAAWv0B,KAAK2xB,GACtB,GAAIyC,aAAkC/H,UACrC,GAAIiI,aAAkCjI,UACrCiI,EAAuB1b,IAAK,SAAU5Y,KAAK+yB,IACvCwB,aAAoBC,WACvBD,EAAS7tB,QAAU0tB,EACnBA,EAAuBzjB,GAAI,SAAU3Q,KAAK+yB,SAErC,CACU,MAAZwB,GACHv0B,KAAKy0B,YAAaF,GAGnB,IAAMG,EAAW,IAAIF,SAAQJ,GACzBp0B,KAAKowB,KACRsE,EAASpxB,KAAOtD,KAAK+wB,2BAEtBqD,EAAuBzjB,GAAI,SAAU3Q,KAAK+yB,IAC1C/yB,KAAKwgB,SAAUkU,GACf10B,KAAK2xB,GAAS+C,OAGXJ,aAAkCjI,WACrCiI,EAAuB1b,IAAK,SAAU5Y,KAAK+yB,IAC3B,MAAZwB,IACHv0B,KAAKy0B,YAAaF,GAClBA,EAAS5M,YAEY,MAAZ4M,GACVv0B,KAAKy0B,YAAaF,GAGW,MAA1BH,IACCp0B,KAAKowB,KACRgE,EAAuB9wB,KAAOtD,KAAK+wB,2BAEpC/wB,KAAKwgB,SAAU4T,IAEhBp0B,KAAK2xB,GAASyC,IAKP1C,uBAAV,WACC1xB,KAAKywB,kBACLzwB,KAAK20B,oBAEL,IAAM3L,EAAOhpB,KAAK2sB,GACZkF,EAAQ7xB,KAAK2xB,GACnB,GAAY,MAAR3I,EACH,GAAa,MAAT6I,EAAgB,CAEnB,OADc7xB,KAAK4xB,GACLE,MACd,KAAKzc,EAAWuf,KACf50B,KAAK60B,2BAA4B7L,EAAM6I,GACvC,MACD,KAAKxc,EAAWvB,QACXkV,aAAgB+D,GACnB/D,EAAK6K,sBAAuB,GAE7B7zB,KAAK8wB,mBAAoB9H,GACzBhpB,KAAK80B,2BAA4BjD,GACjC,MACD,KAAKxc,EAAW0f,OACX/L,aAAgB+D,GACnB/D,EAAK6K,sBAAuB,GAE7B7zB,KAAK8wB,mBAAoB9H,GACzBhpB,KAAKg1B,0BAA2BnD,GAGjC7xB,KAAKuxB,gBAAiBvI,GACtBhpB,KAAKmzB,gBAAiBtB,QAElB7I,aAAgB+D,GACnB/D,EAAK6K,sBAAuB,GAE7B7zB,KAAK8wB,mBAAoB9H,GACzBhpB,KAAKuxB,gBAAiBvI,QAEjB,GAAa,MAAT6I,EAAgB,CAE1B,OADc7xB,KAAK4xB,GACLE,MACd,KAAKzc,EAAWuf,KACf50B,KAAKi1B,wBAAyBpD,GAC9B,MACD,KAAKxc,EAAWvB,QACf9T,KAAK80B,2BAA4BjD,GACjC,MACD,KAAKxc,EAAW0f,OACf/0B,KAAKg1B,0BAA2BnD,GAGjC7xB,KAAKmzB,gBAAiBtB,KAIdH,wBAAV,SAAuB5wB,GACtB,OAAOgG,YAAMqe,sBAAarkB,IACd,MAAVA,GAAkBA,IAAWd,KAAK2xB,IAG3BD,oBAAV,WACC,MAAO,cAGRA,oBAAA,WAEC,IAAMG,EAAQ7xB,KAAK2xB,GACnB,GAAa,MAATE,EAAgB,CACnB7xB,KAAK2xB,GAAS,KACd,IAAMuD,EAAsBl1B,KAAK8yB,GAC7BoC,aAA+B7I,YAClC6I,EAAoBtc,IAAK,SAAU5Y,KAAK+yB,GAAqB/yB,MAC7D6xB,EAAMlK,WAKR7gB,YAAM6gB,uBAreE4G,iBCjGV,4DAQA,OAJUzuB,OACCq1B,oBAAV,WACC,MAAO,aAFCzD,iBCaV,4DA2DA,OAvDU5xB,OAGCs1B,iBAAV,SAAgBxzB,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAKq1B,YAAa,EAClBr1B,KAAKs1B,GAnBS,SAAuC1zB,GACtD,OAAoB,MAAXA,GAAoC,MAAjBA,EAAQ6sB,MACnC7sB,EAAQ6sB,MAAQ,KAiBF8G,CAAS3zB,IAGxBpC,sBAAI41B,yBAAJ,WACC,OAAOp1B,KAAKs1B,QAGb,SAAW7G,GACVzuB,KAAKs1B,GAAS7G,mCAGL2G,yBAAV,SAAwBt0B,GACvB,OAASA,GAAUA,EAAO00B,WAAa10B,EAAO00B,UAAUhI,KAG/C4H,yBAAV,WAEC,IADA,IAAIp0B,EAAShB,KAAKgB,OACXA,GAAS,CACf,GAAIhB,KAAKy1B,aAAcz0B,GACtB,OAAOA,EAAOw0B,UAEfx0B,EAASA,EAAOA,OAEjB,OAAO,MAGEo0B,qBAAV,SAAoBxf,GACnB,IAAM4f,EAAYx1B,KAAK01B,eACnBF,GACHA,EAAUhI,IAAKxtB,OAIjBo1B,sBAAA,SAAWxf,GAKV,OAJI5V,KAAK2X,gBAAkB3X,KAAKijB,aAAetN,EAAkBggB,cAAe/f,IAC/E5V,KAAK41B,SAAUhgB,GAGT9O,YAAM+uB,oBAAWjgB,IAGfwf,0BAAV,SAAyBrR,EAAkBE,GAC1Cnd,YAAMod,wBAAeH,EAAUE,GAC/BjkB,KAAKq1B,WAAa7lB,EAAYmI,aAAcoM,IAGnCqR,oBAAV,WACC,MAAO,gBArDCD,iBCpBV,4DA8BA,OA1BUr1B,OACTg2B,uBAAA,WAEC,IADA,IAAI90B,EAAShB,KAAKgB,OACXA,GAAS,CACf,GAAIA,EAAO+0B,WACV,OAAO/0B,EAAO+0B,aAEf/0B,EAASA,EAAOA,OAEjB,OAAO,MAGR80B,yBAAA,WAEC,IADA,IAAI90B,EAAShB,KAAKgB,OACXA,GAAS,CACf,GAAIA,EAAOg1B,aACV,OAAOh1B,EAAOg1B,eAEfh1B,EAASA,EAAOA,OAEjB,OAAO,MAGE80B,oBAAV,WACC,MAAO,gBAxBCV,kBCAV,4DA+FA,OA3FUt1B,OAICm2B,iBAAV,SAAgBr0B,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAKk2B,YAAat0B,GAClB5B,KAAKm2B,WAAYv0B,GACjB5B,KAAKo2B,cAAex0B,IAGXq0B,wBAAV,SAAuBr0B,GAAvB,WACCkW,EAAiBiC,QAAS/Z,MAAM,SAAE4V,GAC7B3O,EAAK0Q,gBACR1Q,EAAK2uB,SAAUhgB,OAKRqgB,uBAAV,SAAsBr0B,GAAtB,WACC5B,KAAK2Q,GAAImH,EAAiBwH,MAAM,WAC/B,IAAM+W,EAAUpvB,EAAK8uB,aACN,MAAXM,GACYpvB,EAAKjG,kBACE2f,GACrB0V,EAAQ/f,KAAMrP,EAAK+uB,oBAMbC,0BAAV,SAAyBr0B,GACxB,IAAMoa,EAAYhc,KAAKigB,GAEvB,GADAjgB,KAAKs2B,GAAkBt2B,KAAK2B,MAAM40B,wBACjB,MAAbva,GAAqB,EAAIA,EAAUtb,OAAS,CAC/C,IAAMgW,EAAWsF,EAAW,GACtBwa,EAAoB7gB,EAAkB7S,SAAU4T,GACtD1W,KAAKy2B,GAAkBz2B,KAAKgwB,GAC3B,IAAIjD,EAAcyJ,EAAmBx2B,KAAKgvB,IAC1C,IAAIgC,OAAMwF,EAAmBx2B,KAAKgvB,IAEnChvB,KAAKoN,iBAAkBpN,KAAKy2B,IAAe,QAE3Cz2B,KAAKy2B,GAAgB,MAIbR,+BAAV,WACC,IAAMjN,EAAOhpB,KAAKy2B,GACN,MAARzN,GACHA,EAAKrU,SAASrO,IACbtG,KAAKixB,UAAWjxB,KAAKkD,MAAQlD,KAAKs2B,GAAkBtN,EAAK9lB,OACzDlD,KAAKixB,UAA2C,IAA9BjxB,KAAK2G,OAASqiB,EAAKriB,WAK9BsvB,4BAAV,SAA2BjN,GAC1BliB,YAAMyqB,0BAAiBvI,GAEvB,IAAM0N,EAAe12B,KAAKy2B,GAC1B,GAAoB,MAAhBC,EAAuB,CAC1B,IAAM/0B,EAAQ3B,KAAK2B,MACbW,EAAQtC,KAAKsC,MACnBo0B,EAAa1J,MAAMjB,KAAOpqB,EAAM4M,SAAUjM,GAC1Co0B,EAAat0B,MAAQT,EAAM8M,SAAUnM,KAI7B2zB,uBAAV,WACCnvB,YAAM0qB,sBACNxxB,KAAK22B,sBAGIV,oBAAV,WACC,MAAO,iBAGEA,qBAAV,SAAoBrgB,GACnB,IAAMghB,EAAY52B,KAAKg2B,eACN,MAAbY,GACHA,EAAUhf,KAAM,SAAU5X,KAAKyuB,MAAOzuB,KAAM42B,GAG7C9vB,YAAM8uB,mBAAUhgB,IAGPqgB,uBAAV,SAAsBrgB,GACrB9O,YAAMqZ,qBAAYvK,GAClB5V,KAAK41B,SAAUhgB,OAzFPkgB,kBCPV,4DAwBA,OApBUh2B,OACC+2B,iBAAV,SAAgBj1B,GACfkF,YAAMwZ,eAAM1e,GACRA,GAAWA,EAAQk1B,OACtB92B,KAAK+2B,WAAW,IAIRF,oBAAV,WACC,MAAO,kBAGEA,qBAAV,SAAoBjhB,GACnB5V,KAAK+2B,WAAa/2B,KAAKyiB,YACvB3b,YAAM8uB,mBAAUhgB,IAGVihB,eAAP,SAA4Bj1B,GAC3B,MAAO,UAAWA,MAlBVq0B,kBCXV,cA2EA,OAtEQe,iBAAP,SAAuBC,GACtBj3B,KAAKk3B,SAAS12B,KAAMy2B,IAGdD,wBAAP,SAA8BC,GAC7Bj3B,KAAKm3B,gBAAkBF,GAGjBD,iBAAP,SAAuBC,GACtBj3B,KAAKo3B,aAAeH,GAGdD,YAAP,SACCK,EACAC,EACA11B,EACA21B,GAEA,IAAK,IAAIh2B,EAAI,EAAGC,EAAO61B,EAAS32B,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMi2B,EAAUH,EAAU91B,GAAKK,EAAS21B,GACxC,GAAe,MAAXC,EACH,OAAOA,EAGT,OAAIF,EACIA,EAAgB11B,EAAS21B,GAE1B,MAGDP,UAAP,SAAuBp1B,EAAuC21B,GAC7D,OAAOv3B,KAAKy3B,UAAWz3B,KAAKk3B,SAAUl3B,KAAKm3B,gBAAiBv1B,EAAS21B,IAG/DP,aAAP,SACCC,EACAj2B,EACA02B,EACAH,GAEA,IAAK,IAAIh2B,EAAI,EAAGC,EAAOk2B,EAAMh3B,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAMma,EAAOgc,EAAOn2B,GACpB,GAAIma,aAAgBic,gBACnB32B,EAAOwf,SAAU9E,OACX,CACN,IAAM8b,EAAUP,EAAQW,QAASlc,EAAM6b,GACvC,GAAe,MAAXC,EAGH,MAAM,IAAI72B,MAAO,wCAAwCk3B,KAAKC,UAAWpc,IAFzE1a,EAAOwf,SAAUgX,MAQdR,WAAP,SACCh2B,EACA02B,EACAH,GAEAv3B,KAAK+3B,WAAY/3B,KAAMgB,EAAQ02B,EAAOH,IAGhCP,UAAP,SAAuBp1B,GACtB,GAAyB,MAArB5B,KAAKo3B,aACR,OAAOp3B,KAAKo3B,aAAcx1B,GAE1B,MAAM,IAAIjB,MAAO,2BAvEFq2B,WAA+B,GAC/BA,kBAA2C,wBCE5D,WACCgB,EACA90B,EAAeyD,EAAgBsxB,EAC/BC,GAEAl4B,KAAKg4B,GAAKA,EACVh4B,KAAKm4B,IAAM,EACX,IAAMC,EAAaF,EAAYE,WAC/Bp4B,KAAKq4B,MAAQ,IAAI1F,YAAW,EAAG,EAAGzvB,EAAQk1B,EAAYzxB,EAASyxB,GAC/Dp4B,KAAK0G,QAAU,IAAI2lB,UAAS6L,EAAa,IAAIvF,YAAW,EAAG,EAAG,EAAG,IAEjE3yB,KAAKkD,MAAQA,EACblD,KAAK2G,OAASA,EACd3G,KAAKi4B,YAAcA,EAkBrB,OAbCK,uBAAA,WACC,IAAMC,EAAoB,EAAIv4B,KAAK0G,QAAQwxB,YAAYE,WACvDp4B,KAAK0G,QAAQ2xB,MAAMjyB,EAAIpG,KAAKq4B,MAAMjyB,EAAImyB,EACtCv4B,KAAK0G,QAAQ2xB,MAAMhyB,EAAIrG,KAAKq4B,MAAMhyB,EAAIkyB,EACtCv4B,KAAK0G,QAAQ2xB,MAAMn1B,MAAQlD,KAAKkD,MAChClD,KAAK0G,QAAQ2xB,MAAM1xB,OAAS3G,KAAK2G,OACjC3G,KAAK0G,QAAQ8xB,YACbx4B,KAAK0G,QAAQkR,KAAM,SAAU5X,OAG9Bs4B,oBAAA,WACCt4B,KAAK0G,QAAQihB,+BCvCf,4DAIA,OAJ2C7nB,OAC1C24B,mBAAA,SAAQpC,QADkCiC,mBCK1C,WAAarP,EAA4BiP,GAAzC,MACCpxB,YAAOmiB,EAAM+O,GAAI/O,EAAM/lB,MAAQg1B,EAAYE,WAAYnP,EAAMtiB,OAASuxB,EAAYE,WAAY,EAAGF,gBACjGjxB,EAAKyxB,OAASzP,EAAMyP,SAUtB,OAf+C54B,OAQ9C64B,mBAAA,SAAQtC,GACP,IAAMqC,EAAS14B,KAAK04B,OACpB,GAAc,MAAVA,EAAiB,CACpB,IAAML,EAAQr4B,KAAKq4B,MACnBhC,EAAQuC,UAAWF,EAAQL,EAAMjyB,EAAGiyB,EAAMhyB,EAAGgyB,EAAMn1B,MAAOm1B,EAAM1xB,aAZpB2xB,mBCE9C,WAAazG,EAAyBqG,GAAtC,MACCpxB,YAAO+qB,EAAMgH,IAAKhH,EAAM3uB,MAAQg1B,EAAYE,WAAYvG,EAAMlrB,OAASuxB,EAAYE,WAAY,EAAGF,gBAClGjxB,EAAK4qB,MAAQA,IAkBf,OAvB2C/xB,OAQ1Cg5B,mBAAA,SAAQzC,GACP,IAAMgC,EAAQr4B,KAAKq4B,MACbjyB,EAAIiyB,EAAMjyB,EACVC,EAAIgyB,EAAMhyB,EACViE,EAAI+tB,EAAMn1B,MACVqH,EAAI8tB,EAAM1xB,OACVkrB,EAAQ7xB,KAAK6xB,MAEnBwE,EAAQuC,UAAW/G,EAAOzrB,EAAGC,EAAGiE,EAAGC,GAEnC8rB,EAAQuC,UAAW/G,EAAO,EAAG,EAAG,EAAGtnB,EAAGnE,EAAI,EAAGC,EAAI,EAAG,EAAGkE,EAAI,GAC3D8rB,EAAQuC,UAAW/G,EAAO,EAAG,EAAGvnB,EAAG,EAAGlE,EAAGC,EAAI,EAAGiE,EAAG,GACnD+rB,EAAQuC,UAAW/G,EAAOvnB,EAAI,EAAG,EAAG,EAAGC,EAAGnE,EAAIkE,EAAGjE,EAAI,EAAG,EAAGkE,EAAI,GAC/D8rB,EAAQuC,UAAW/G,EAAO,EAAGtnB,EAAI,EAAGD,EAAG,EAAGlE,EAAGC,EAAIkE,EAAGD,EAAG,OArBdguB,mBCG1C,WAAaN,EAAYhP,EAAYkP,GAArC,MACCpxB,YAAOkxB,EAAIhP,EAAK9lB,MAAO8lB,EAAKriB,OAAQ,EAAGuxB,gBACvCjxB,EAAK0lB,GAAQ3D,IAOf,OAZ0ClpB,OAQzCi5B,mBAAA,SAAQ1C,GACP,IAAMgC,EAAQr4B,KAAKq4B,MACnBhC,EAAQuC,UAAW54B,KAAK2sB,GAAM+L,OAAQL,EAAMjyB,EAAGiyB,EAAMhyB,EAAGgyB,EAAMn1B,MAAOm1B,EAAM1xB,YAVnC2xB,mBCD1C,4DASA,OAT2Cx4B,OAC1Ck5B,mBAAA,SAAQ3C,GACP,IAAMgC,EAAQr4B,KAAKq4B,MAEnBhC,EAAQ4C,OACR5C,EAAQ6C,UAAY,UACpB7C,EAAQ8C,SAAUd,EAAMjyB,EAAI,EAAGiyB,EAAMhyB,EAAI,EAAGgyB,EAAMn1B,MAAQ,EAAGm1B,EAAM1xB,OAAS,GAC5E0vB,EAAQ+C,cAPiCd,kBCe1C,WAAaF,GACZ,IAAMM,EAAS14B,KAAKq5B,GAAU9hB,SAAS+hB,cAAe,UACtDZ,EAAOx1B,MAAQw1B,EAAO/xB,OAAS,IAE/B,IAAMuxB,EAAcl4B,KAAKu5B,GAAeC,cAAYrnB,KAAMumB,EAAQ,CACjEe,OAAQC,eAAaC,IACrBvB,eAGDp4B,KAAK45B,GAAa,GAClB55B,KAAK65B,GAAc,GACnB75B,KAAK85B,GAAc,CAClBC,MAAO,IAAItB,GACV,QAAS,GAAI,GAAI,EAAGP,GAErB8B,MAAO,IAAIhB,GACV,QAAS,GAAI,GAAI,EAAGd,IAItBl4B,KAAKsH,GAAW,EAwLlB,OArLC2yB,yBAAA,SAAc/2B,EAAe0E,GAK5B,IAJA,IACIxB,EADY,EAEZC,EAFY,EAGZ6zB,EAAe,EACV34B,EAAI,EAAGC,EAAOoG,EAAKlH,OAAQa,EAAIC,IAAQD,EAAI,CACnD,IAAM44B,EAAQvyB,EAAMrG,GAChB2B,EAAQkD,EAAI+zB,EAAM9B,MAAMn1B,MANb,IAOdkD,EAPc,EAQdC,GAAK6zB,EARS,EASdA,EAAe,GAEhBC,EAAM9B,MAAMjyB,EAAQ,EAAJA,EAChB+zB,EAAM9B,MAAMhyB,EAAQ,EAAJA,EAChBD,GAAK+zB,EAAM9B,MAAMn1B,MAbF,EAcfg3B,EAAevwB,KAAKG,IAAKowB,EAAcC,EAAM9B,MAAM1xB,QAKpD,IAFA,IAAMyzB,EAAY/zB,EAAI6zB,EAjBN,EAkBZ13B,EAAS,IACNA,EAAS43B,GACf53B,IAAW,EAEZ,OAAOmH,KAAKC,IA1De,KA0DYpH,IAGxCy3B,yBAAA,SAAc/2B,EAAeyD,EAAgBiB,GAC5C,IAAM8wB,EAAS14B,KAAKq5B,GACpBX,EAAOx1B,MAAQA,EACfw1B,EAAO/xB,OAASA,EAChB,IAAM0vB,EAAUqC,EAAO3C,WAAY,MACnC,GAAe,MAAXM,EACH,IAAK,IAAI90B,EAAI,EAAGC,EAAOoG,EAAKlH,OAAQa,EAAIC,IAAQD,EACjCqG,EAAMrG,GACdE,OAAQ40B,IAKjB4D,wBAAA,SAAaryB,GACZ,IAAK,IAAIrG,EAAI,EAAGC,EAAOoG,EAAKlH,OAAQa,EAAIC,IAAQD,EACjCqG,EAAMrG,GACd84B,cAIRJ,4BAAA,SAAiBryB,GAEhB,IADA,IAAIpF,EAAS,IACJjB,EAAIqG,EAAKlH,OAAS,EAAG,GAAKa,IAAKA,EAGvC,IAFA,IAAM44B,EAAQvyB,EAAMrG,GACdyT,EAAOrL,KAAKG,IAAKqwB,EAAM9B,MAAMn1B,MAAOi3B,EAAM9B,MAAM1xB,QAC/CnE,EAASwS,GACfxS,IAAW,EAGb,OAAOmH,KAAKC,IA1Fe,KA0FYpH,GAAU,IAGlDy3B,oBAAA,SAASryB,GACRA,EAAK0yB,KAAML,EAAaM,iBACxB,IAAK,IAAIh5B,EAAIqG,EAAKlH,OAAS,EAAG,GAAKa,IAAKA,EAEvC,GAAI,EADUqG,EAAMrG,GACN42B,IAEb,YADAvwB,EAAKlH,OAASa,EAAI,GAIpBqG,EAAKlH,OAAS,GAGfu5B,kBAAA,WAEC,IADA,IAAMryB,EAAO5H,KAAK65B,GACTt4B,EAAI,EAAGC,EAAOoG,EAAKlH,OAAQa,EAAIC,IAAQD,EACjCqG,EAAMrG,GACd42B,IAAM,EAGbn4B,KAAKsH,GAAW,GAGjB2yB,gBAAA,WAGC,IAFA,IAAMO,EAAYx6B,KAAK45B,GACjBhyB,EAAO5H,KAAK65B,GACTt4B,EAAI,EAAGC,EAAOoG,EAAKlH,OAAQa,EAAIC,IAAQD,EAAI,CACnD,IAAM44B,EAAQvyB,EAAMrG,GAChB44B,EAAMhC,KAAO,IACTgC,EAAMnC,MAAMh4B,KAAK85B,IACvBK,EAAMxS,iBAEA6S,EAAWL,EAAMnC,IACxBh4B,KAAKsH,GAAW,KAKnB2yB,mBAAA,SAAQQ,GACP,IAAiB,IAAbA,GAAqBz6B,KAAKsH,EAAW,CACxCtH,KAAKsH,GAAW,EAChB,IAAMM,EAAO5H,KAAK65B,GAClB75B,KAAK06B,QAAS9yB,GACd,IAAM+yB,EAAc36B,KAAK46B,gBAAiBhzB,GACpCizB,EAAe76B,KAAK86B,aAAcH,EAAa/yB,GACrD5H,KAAK+6B,aAAcJ,EAAaE,EAAcjzB,GAC9C5H,KAAKu5B,GAAayB,YAAaL,EAAaE,GAC5C76B,KAAKi7B,YAAarzB,KAIpBqyB,gBAAA,SAAKjC,GACJ,IACMmC,EADYn6B,KAAK45B,GACG5B,GAC1B,GAAa,MAATmC,EAEH,OADAA,EAAMhC,KAAO,EACNgC,EAEP,IAAMe,EAAal7B,KAAK85B,GAAa9B,GACrC,OAAkB,MAAdkD,GACHl7B,KAAKsG,IAAK0xB,EAAIkD,GACPA,GAGF,MAGRjB,gBAAA,SAAKjC,EAAYtc,GAChB,IAAMlZ,EAASxC,KAAK45B,GAAY5B,GAKhC,OAJAtc,EAAKyc,KAAO,EACZn4B,KAAK45B,GAAY5B,GAAOtc,EACxB1b,KAAK65B,GAAYr5B,KAAMkb,GACvB1b,KAAKsH,GAAW,EACT9E,GAGRy3B,oBAAA,WACCj6B,KAAKsH,GAAW,GAGjB2yB,8BAAA,WACC,OAAOj6B,KAAK8b,IAAK,SAAWpV,SAG7BuzB,2BAAA,WACC,OAAOj6B,KAAKu5B,IAGbU,oBAAA,SAASjC,GACR,IAAMwC,EAAYx6B,KAAK45B,GACjBO,EAAQK,EAAWxC,GACZ,MAATmC,IACHA,EAAMhC,KAAO,EACTgC,EAAMhC,KAAO,IACTgC,EAAMnC,MAAMh4B,KAAK85B,IACvBK,EAAMxS,iBAEA6S,EAAWxC,GAClBh4B,KAAKsH,GAAW,KAKZ2yB,kBAAkB,SAAExQ,EAAqBlqB,GAC/C,OAAIkqB,EAAE0O,KAAO,EACR54B,EAAE44B,KAAO,EACL,EAEA,EAGJ54B,EAAE44B,KAAO,GACJ,EAIN1O,EAAE4O,MAAM1xB,OAASpH,EAAE84B,MAAM1xB,QACpB,EACEpH,EAAE84B,MAAM1xB,OAAS8iB,EAAE4O,MAAM1xB,OAC5B,EAEA8iB,EAAE4O,MAAMn1B,MAAQ3D,EAAE84B,MAAMn1B,eCtNjC,SAAakD,EAAWC,GACvBrG,KAAKoG,EAAIA,EACTpG,KAAKqG,EAAIA,MCOV,SAAa8hB,EAAiBjlB,EAAeyD,EAAgBw0B,GAC5Dn7B,KAAKm4B,IAAM,EACXn4B,KAAKo7B,KAAO,GACZp7B,KAAKoG,EAAI,EACTpG,KAAKqG,EAAI,EACTrG,KAAKkD,MAAQA,EACblD,KAAK2G,OAASA,EACd3G,KAAKmoB,QAAUA,EACfnoB,KAAKyqB,OAAS,IAAI4Q,GAAiC,EAAG,GACtDr7B,KAAKm7B,SAAWA,MCXjB,SAAajO,EAAgBlY,EAAc9S,EAAe+C,GACzDjF,KAAKg4B,GAAK9K,EACVltB,KAAKgV,KAAOA,EACZhV,KAAKkC,MAAQo5B,QAAMC,WAAYr5B,GAC/BlC,KAAK2G,OAASqO,EAAiB,EAAV/P,EACrB,IAAMu2B,EAAUC,cAAYC,YAAaxO,GACzCltB,KAAK27B,OAASH,EAAQG,OACtB37B,KAAK47B,QAAUJ,EAAQI,SClBZC,GACZ,oGCMK/nB,GAAU,gBAgBf,WAAaoZ,EAAgB/B,EAAkB2Q,EAAmB1D,GACjEp4B,KAAK2qB,GAAMuC,EACXltB,KAAKq5B,GAAU9hB,SAAS+hB,cAAe,UACvCt5B,KAAK+7B,GAAW,KAChB/7B,KAAKg8B,GAAQ,IAAIC,GAAsB/O,EAAQ/B,EAAU2Q,EAAWhoB,IACpE9T,KAAKk8B,GAAc,GACnBl8B,KAAKm8B,GAAU,EACfn8B,KAAKo8B,GAAc,EACnBp8B,KAAKiD,EAAS,EACdjD,KAAKkH,EAAU,EACflH,KAAKq8B,GAAY,EACjBr8B,KAAKs8B,GAAmB,EACxBt8B,KAAKmH,EAAWklB,UAAQla,KAAMnS,KAAKq5B,GAAS,CAC3CI,OAAQC,eAAaC,IACrBvB,aACAmE,UAAWC,cAAYC,UAGxBz8B,KAAKwtB,IAAKqO,IAAkB,GAC5B77B,KAAK08B,GAAM,MAAO18B,KAAKk8B,IAAa,GAsOtC,OAnOC18B,sBAAIm9B,sBAAJ,WACC,OAAO38B,KAAK2qB,oCAGbnrB,sBAAIm9B,wBAAJ,WACC,OAAO38B,KAAKg8B,oCAGbx8B,sBAAIm9B,yBAAJ,WACC,OAAO38B,KAAKiD,mCAGbzD,sBAAIm9B,0BAAJ,WACC,OAAO38B,KAAKkH,mCAGb1H,sBAAIm9B,0BAAJ,WACC,OAAO38B,KAAKq5B,oCAGb75B,sBAAIm9B,8BAAJ,WACC,OAAO38B,KAAKk8B,oCAGb18B,sBAAIm9B,2BAAJ,WACC,OAAO38B,KAAKmH,mCAGHw1B,eAAV,SAAgB7U,EAAmBG,EAAwCkT,GAC1E,GAAkB,OAAdrT,EAAqB,CACxB,IAAMlgB,EAAOqgB,EAAYH,GACzB,GAAY,MAARlgB,EACGA,EAAKuzB,WACO,IAAbvzB,EAAKuwB,MACRn4B,KAAKo8B,IAAe,GAErBx0B,EAAKuwB,KAAO,OAEP,CACN,IAAMhQ,EAAUnoB,KAAK48B,WAAY9U,GAC3B5kB,EAAQyG,KAAKwgB,KAAMrW,GAAUqU,EAAUrU,IACvCnN,EAAS3G,KAAKspB,KAAK3iB,OACzBshB,EAAYH,GAAc,IAAI+U,GAA2B1U,EAASjlB,EAAOyD,IAAWw0B,GACpFn7B,KAAKm8B,IAAW,EAChBn8B,KAAKq8B,IAAa,KAKXM,eAAV,SAAmB7U,EAAmBG,GACrC,GAAkB,OAAdH,EAAqB,CACxB,IAAMlgB,EAAOqgB,EAAYH,GACb,MAARlgB,IACGA,EAAKuzB,UAAY,EAAIvzB,EAAKuwB,MAC/BvwB,EAAKuwB,KAAO,EACK,IAAbvwB,EAAKuwB,MACRn4B,KAAKo8B,IAAe,MAOfO,eAAV,WACC,GAAK38B,KAAKm8B,IAAW,GAAMn8B,KAAKo8B,GAAc,CAC7C,IAAMnU,EAAajoB,KAAKk8B,GACxB,IAAK,IAAMpU,KAAaG,EACnBA,EAAYH,GAAYqQ,KAAO,UAC3BlQ,EAAYH,GAGrB9nB,KAAKm8B,IAAWn8B,KAAKo8B,GACrBp8B,KAAKq8B,IAAa,EAClBr8B,KAAKo8B,GAAc,IAIrBO,gBAAA,SAAKG,EAAiB3B,GAGrB,IAFA,IAAMlT,EAAajoB,KAAKk8B,GAClB7S,EAAWd,EAAsBpW,KAAM2qB,GACtCzT,EAASE,WACfvpB,KAAK08B,GAAMrT,EAASG,OAAQvB,EAAYkT,IAI1CwB,mBAAA,SAAQG,GAGP,IAFA,IAAM7U,EAAajoB,KAAKk8B,GAClB7S,EAAWd,EAAsBpW,KAAM2qB,GACtCzT,EAASE,WACfvpB,KAAK+8B,GAAS1T,EAASG,OAAQvB,IAIjC0U,gBAAA,SAAK7U,GACJ,OAAO9nB,KAAKk8B,GAAapU,IAG1B6U,uBAAA,SAAY77B,GACX,IAAMu1B,EAAUr2B,KAAK+1B,aACrB,OAAe,MAAXM,EACIA,EAAQ2G,YAAal8B,GAASoC,MAE/B,GAGRy5B,uBAAA,WACC,IAAItG,EAAUr2B,KAAK+7B,GACnB,GAAe,MAAX1F,EAAkB,CACrB,IAAMqC,EAAS14B,KAAKq5B,GACpB,GAAc,MAAVX,EAMH,OAAO,KAJP,GAAe,OADfrC,EAAUr2B,KAAK+7B,GAAWrD,EAAO3C,WAAY,KAAM,CAAE3zB,OAAO,KAE3D,OAAO,KAOV,IAAMknB,EAAOtpB,KAAKg8B,GAalB,OAZI3F,EAAQ/M,OAASA,EAAK0O,KACzB3B,EAAQ/M,KAAOA,EAAK0O,GACpB1O,EAAK0O,GAAK3B,EAAQ/M,KAClB+M,EAAQ5C,UAAY,OACpB4C,EAAQ4G,aAAe,aACvB5G,EAAQ6G,UAAY,EACpB7G,EAAQ8G,QAAU,QAClB9G,EAAQ+G,SAAW,QACnB/G,EAAQgH,WAAa,EACrBhH,EAAQ6C,UAAY5P,EAAKpnB,MACzBm0B,EAAQiH,YAAc,WAEhBjH,GAGRsG,mBAAA,WAGC,GAFA38B,KAAKu9B,KAEDv9B,KAAKs8B,GAAmBt8B,KAAKq8B,GAAY,CAC5Cr8B,KAAKs8B,GAAmBt8B,KAAKq8B,GAE7B,IAAM3D,EAAS14B,KAAKq5B,GACpB,GAAc,MAAVX,EAAiB,CACpB,IAAMpP,EAAOtpB,KAAKg8B,GACZwB,EAAalU,EAAK3iB,OAClBshB,EAAajoB,KAAKk8B,GAClBh5B,EAAQlD,KAAKiD,EAASjD,KAAKy9B,WAAY9zB,KAAKwgB,KAAMxgB,KAAK+zB,KAAM19B,KAAKm8B,KAAcqB,GAEhFhT,EAAU1W,GACV6pB,EAAUh0B,KAAKwnB,MAAqD,IAA7CqM,GAAclU,EAAKqS,OAASrS,EAAKsS,UAAkBtS,EAAKqS,QACjFv1B,EAAI,EACJC,EAAI,EACR,IAAK,IAAMwP,KAAOoS,EAEb/kB,GAASkD,GADP0hB,EAAYG,EAAYpS,IACH3S,QAC1BkD,EAAI,EACJC,GAAKm3B,GAGN1V,EAAU1hB,EAAIA,EACd0hB,EAAUzhB,EAAIA,EACdyhB,EAAU2C,OAAOrkB,EAAIA,EAAIokB,EACzB1C,EAAU2C,OAAOpkB,EAAIA,EAAIs3B,EAEzBv3B,GAAK0hB,EAAU5kB,MAEhB,IAAMyD,EAAS3G,KAAKkH,EAAUb,EAAIm3B,EAK5BtF,EAAcl4B,KAAKmH,EAAS+wB,YAC5BE,EAAaF,EAAYE,WACzBwF,EAAYj0B,KAAKwgB,KAAMjnB,EAAQk1B,GAC/ByF,EAAal0B,KAAKwgB,KAAMxjB,EAASyxB,GACvCM,EAAOx1B,MAAQ06B,EACflF,EAAO/xB,OAASk3B,EAChB,IAAMxH,EAAUr2B,KAAK+1B,aACrB,GAAe,MAAXM,EAAkB,CAIrB,IAAK,IAAMxgB,KAHXwgB,EAAQ4C,OACR5C,EAAQ/Z,MAAO8b,EAAYA,GAC3B/B,EAAQyH,UAAW,EAAG,EAAG56B,EAAOyD,GACdshB,EAAa,CAC9B,IAAMH,EAAYG,EAAYpS,GAC9BwgB,EAAQ0H,SAAUloB,EAAKiS,EAAU2C,OAAOrkB,EAAG0hB,EAAU2C,OAAOpkB,GAE7DgwB,EAAQ+C,UAIT,OAFAlB,EAAY8C,YAAa4C,EAAWC,IAE7B,GAGT,OAAO,GAGRlB,wBAAA,WACC,OAAO38B,KAAKq8B,IAGbM,8BAAA,WACC,OAAO38B,KAAKs8B,IAGb98B,sBAAIm9B,0BAAJ,WACC,OAAO38B,KAAKm8B,oCAGbQ,oBAAA,WAEe,MADC38B,KAAKq5B,KAEnBr5B,KAAKq5B,GAAU,MAGhB,IAAMpR,EAAajoB,KAAKk8B,GACxB,IAAK,IAAMpU,KAAaG,SAChBA,EAAYH,IAIrB6U,uBAAA,SAAY3nB,GAEX,IADA,IAAIxS,EAAS,GACNA,EAASwS,GACfxS,IAAW,EAEZ,OAAOA,QC3QHlB,GAAS,SAAE2nB,GAChBA,EAAM3nB,UAGD08B,GAAY,SAAEC,GACnBA,EAAaC,QAAS58B,KAGjBqmB,GAAU,SAAEsB,GACjBA,EAAM3nB,UAGD68B,GAAa,SAAEF,GACpBA,EAAaC,QAASvW,mBAOtB,WAAazmB,GAAb,WACClB,KAAKo+B,GAAW,IAAIC,IACpBr+B,KAAKs+B,GAAcp9B,EAAMuK,SAAS2sB,WAElCl3B,EAAMuK,SAASkF,GAAI,aAAa,WAC/B1J,EAAK3F,YAmDR,OA/CCi9B,gBAAA,SAAKrR,EAAgB/B,EAAkB2Q,EAAmBgB,GACzD,IAAMxP,EAAUttB,KAAKo+B,GACjBI,EAAelR,EAAQxR,IAAKoR,GACZ,MAAhBsR,IACHA,EAAe,IAAIH,IACnB/Q,EAAQhnB,IAAK4mB,EAAQsR,IAEtB,IAAIvV,EAAQuV,EAAa1iB,IAAKggB,GACjB,MAAT7S,IACHA,EAAQ,IAAI0T,GAAkBzP,EAAQ/B,EAAU2Q,EAAW97B,KAAKs+B,IAChEE,EAAal4B,IAAKw1B,EAAW7S,IAE9BA,EAAMuE,IAAKsP,IAGZyB,mBAAA,SAAQrR,EAAgB4O,EAAmBgB,GAC1C,IAAM0B,EAAex+B,KAAKo+B,GAAStiB,IAAKoR,GACxC,GAAoB,MAAhBsR,EAAuB,CAC1B,IAAMvV,EAAQuV,EAAa1iB,IAAKggB,GACnB,MAAT7S,GACHA,EAAMwE,OAAQqP,KAKjByB,gBAAA,SAAKrR,EAAgB4O,GACpB,IACM0C,EADUx+B,KAAKo+B,GACQtiB,IAAKoR,GAClC,GAAoB,MAAhBsR,EACH,OAAO,KAER,IAAMvV,EAAQuV,EAAa1iB,IAAKggB,GAChC,OAAa,MAAT7S,EACI,KAEDA,GAGRsV,mBAAA,WACCv+B,KAAKo+B,GAASF,QAASF,KAGxBO,oBAAA,WACC,IAAMjR,EAAUttB,KAAKo+B,GACrB9Q,EAAQ4Q,QAASC,IACjB7Q,EAAQ/P,4BCKT,aAAA,WACCvd,KAAKy+B,GAAM,KACXz+B,KAAKmH,EAAW,KAChBnH,KAAK0+B,GAAiB,KACtB1+B,KAAK2+B,GAA2Bn3B,IAChCxH,KAAK4+B,GAAyBp3B,IAC9BxH,KAAK6+B,GAAkBr3B,IACvBxH,KAAK8+B,GAAet3B,IACpBxH,KAAK++B,GAAM,KACX/+B,KAAKg/B,GAAO,KAEZ,IAAMtG,EAAS14B,KAAKq5B,GAAU9hB,SAAS+hB,cAAe,UACtDZ,EAAOx1B,MAAQ,GACfw1B,EAAO/xB,OAAS,GAChB3G,KAAKi/B,GAAe,SAAErpB,GACrBA,EAAEiC,kBAEH7X,KAAKk/B,GAAkB,WACtBj4B,EAAKmyB,WAENp5B,KAAKm/B,GAAiB,WACrBl4B,EAAK0gB,WAEN+Q,EAAOjhB,iBAAkB,mBAAoBzX,KAAKi/B,IAAc,GAChEvG,EAAOjhB,iBAAkB,uBAAwBzX,KAAKk/B,IAAiB,GACvEjkB,OAAOxD,iBAAkB,SAAUzX,KAAKm/B,IAAgB,GAwR1D,OArRCC,iBAAA,WACC,IAAM1G,EAAS14B,KAAKq5B,GACpB,GAAc,MAAVX,IAA+B,MAAZ14B,KAAKy+B,IAAez+B,KAAKy+B,GAAIY,iBAAmB,CACtE,IAAMC,EAAiC,CACtCl9B,OAAO,EACPm9B,WAAW,EACXC,OAAO,EACPC,SAAS,EACTC,oBAAoB,GAEfC,EAAK3/B,KAAKy+B,GACf/F,EAAO3C,WAAY,QAASuJ,IAC5B5G,EAAO3C,WAAY,qBAAsBuJ,GAEhC,MAANK,IACHA,EAAGC,WAAW,EAAK,EAAK,EAAK,GAC7B5/B,KAAK6/B,mBACL7/B,KAAK8/B,eACL9/B,KAAK+/B,cACL//B,KAAKmH,EAAW,MAGlB,OAAOnH,MAGRo/B,oBAAA,WACCp/B,KAAKsgB,QAGN8e,sBAAA,WACC,OAAOp/B,KAAKq5B,IAGb+F,sBAAA,SAAWO,EAA2B9oB,EAAcrE,GACnD,IAAMjH,EAAWiH,EAChBmtB,EAAGK,aAAcL,EAAGM,iBACpBN,EAAGK,aAAcL,EAAGO,eAErB,OAAc,MAAV30B,IACHo0B,EAAGQ,aAAc50B,EAAQsL,GACzB8oB,EAAGS,cAAe70B,GACZo0B,EAAGU,mBAAoB90B,EAAQo0B,EAAGW,iBAMlC/0B,GAJLg1B,SAAWA,QAAQC,MAAO,iCAAiCb,EAAGc,iBAAiBl1B,IACxE,OAMV6zB,wBAAA,WACC,IAAMO,EAAK3/B,KAAKy+B,GAChB,GAAU,MAANkB,IAAqC,IAAvBA,EAAGN,gBAA2B,CAC/C,IAAMqB,EAAe1gC,KAAK2gC,UAAWhB,EAnKlB,qNAmKqC,GACxD,GAAoB,MAAhBe,EAAuB,CAC1B,IAAME,EAAiB5gC,KAAK2gC,UAAWhB,EA3JnB,+hDA2JwC,GAC5D,GAAsB,MAAlBiB,EAAyB,CAC5B,IAAMC,EAAgB7gC,KAAK0+B,GAAiBiB,EAAGmB,gBAC/C,GAAqB,MAAjBD,EAIH,OAHAlB,EAAGoB,aAAcF,EAAeH,GAChCf,EAAGoB,aAAcF,EAAeD,GAChCjB,EAAGqB,YAAaH,GACVlB,EAAGsB,oBAAoBJ,EAAelB,EAAGuB,cAO9CvB,EAAGwB,aAAcT,GACjBf,EAAGwB,aAAcP,GAEjBjB,EAAGyB,WAAYP,GACf7gC,KAAK2+B,GAA2BgB,EAAG0B,kBAAmBR,EAAe,mBACrE7gC,KAAK4+B,GAAyBe,EAAG0B,kBAAmBR,EAAe,iBACnE7gC,KAAK6+B,GAAkBc,EAAG2B,mBAAoBT,EAAe,YAC7D7gC,KAAK8+B,GAAea,EAAG2B,mBAAoBT,EAAe,SAC1DlB,EAAGyB,WAAY,MACRP,IAdPN,SAAWA,QAAQC,MAAO,+BAA+Bb,EAAG4B,YAC5D5B,EAAGwB,aAAcT,GACjBf,EAAGwB,aAAcP,GACV,MAcRjB,EAAGwB,aAAcT,GACjBf,EAAGwB,aAAcP,QAGlBjB,EAAGwB,aAAcT,IAIpB,OAAO,MAGRtB,2BAAA,WACC,IAAMO,EAAK3/B,KAAKy+B,GAChB,GAAU,MAANkB,IAAqC,IAAvBA,EAAGN,gBAA2B,CAC/C,IAAMwB,EAAgB7gC,KAAK0+B,GACN,MAAjBmC,IACH7gC,KAAK0+B,GAAiB,KACtBiB,EAAGyB,WAAY,MACfzB,EAAG6B,cAAeX,MAKrBzB,0BAAA,SAAeqC,GACd,IAAM9B,EAAK3/B,KAAKy+B,GACV/F,EAAS14B,KAAKq5B,GACpB,GAAU,MAANsG,IAAqC,IAAvBA,EAAGN,iBAAsC,MAAV3G,EAAiB,CACjE,IAAMx1B,EAAQu+B,EAAcv+B,MACtByD,EAAS86B,EAAc96B,OACzB+xB,EAAOx1B,QAAUA,GAASw1B,EAAO/xB,SAAWA,IAC/C+xB,EAAOx1B,MAAQA,EACfw1B,EAAO/xB,OAASA,EAChBg5B,EAAG+B,SAAU,EAAG,EAAGx+B,EAAOyD,IAG3B,IAAID,EAAU1G,KAAKmH,EAenB,OAde,MAAXT,GACHA,EAAU1G,KAAKmH,EAAWw4B,EAAGgC,gBAC7BhC,EAAGiC,YAAajC,EAAGkC,WAAYn7B,GAC/Bi5B,EAAGmC,WAAYnC,EAAGkC,WAAY,EAAGlC,EAAGoC,KAAMpC,EAAGoC,KAAMpC,EAAGqC,cAAeP,GACrE9B,EAAGsC,cAAetC,EAAGkC,WAAYlC,EAAGuC,eAAgBvC,EAAGwC,eACvDxC,EAAGsC,cAAetC,EAAGkC,WAAYlC,EAAGyC,eAAgBzC,EAAGwC,eACvDxC,EAAGsC,cAAetC,EAAGkC,WAAYlC,EAAG0C,mBAAoB1C,EAAGlD,SAC3DkD,EAAGsC,cAAetC,EAAGkC,WAAYlC,EAAG2C,mBAAoB3C,EAAGlD,SAC3DkD,EAAGiC,YAAajC,EAAGkC,WAAY,QAE/BlC,EAAGiC,YAAajC,EAAGkC,WAAYn7B,GAC/Bi5B,EAAGmC,WAAYnC,EAAGkC,WAAY,EAAGlC,EAAGoC,KAAMpC,EAAGoC,KAAMpC,EAAGqC,cAAeP,GACrE9B,EAAGiC,YAAajC,EAAGkC,WAAY,OAEzBn7B,EAER,OAAO,MAGR04B,2BAAA,WACC,IAAMO,EAAK3/B,KAAKy+B,GACV/3B,EAAU1G,KAAKmH,EACX,MAANw4B,IAAqC,IAAvBA,EAAGN,iBAAuC,MAAX34B,IAChD1G,KAAKmH,EAAW,KAChBw4B,EAAGiC,YAAajC,EAAGkC,WAAY,MAC/BlC,EAAG4C,cAAe77B,KAIpB04B,6BAAA,WACC,IAAMO,EAAK3/B,KAAKy+B,GAChB,GAAU,MAANkB,IAAqC,IAAvBA,EAAGN,gBAA2B,CAC/C,IAAMmD,EAAKxiC,KAAK++B,GAAMY,EAAG8C,eAWzB,OAVA9C,EAAG+C,WAAY/C,EAAGgD,aAAcH,GAShC7C,EAAGiD,WAAYjD,EAAGgD,aAAc,IAAI57B,aAPnB,EACf,EAAK,EACN,EAAM,GACL,GAAM,EACP,GAAO,IAGoD44B,EAAGkD,aACxDL,EAER,OAAO,MAGRpD,gCAAA,WACC,IAAMO,EAAK3/B,KAAKy+B,GACV+D,EAAKxiC,KAAK++B,GACN,MAANY,IAAqC,IAAvBA,EAAGN,iBAAkC,MAANmD,IAChDxiC,KAAK++B,GAAM,KACXY,EAAG+C,WAAY/C,EAAGgD,aAAc,MAChChD,EAAGmD,aAAcN,KAInBpD,yBAAA,WACC,IAAMO,EAAK3/B,KAAKy+B,GAChB,GAAU,MAANkB,IAAqC,IAAvBA,EAAGN,gBAA2B,CAC/C,IAAM0D,EAAM/iC,KAAKg/B,GAAOW,EAAG8C,eAW3B,OAVA9C,EAAG+C,WAAY/C,EAAGgD,aAAcI,GAShCpD,EAAGiD,WAAYjD,EAAGgD,aAAc,IAAI57B,aAPxB,CACX,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,IAGgD44B,EAAGkD,aACnDE,EAER,OAAO,MAGR3D,4BAAA,WACC,IAAMO,EAAK3/B,KAAKy+B,GACVsE,EAAM/iC,KAAKg/B,GACP,MAANW,IAAqC,IAAvBA,EAAGN,iBAAmC,MAAP0D,IAChD/iC,KAAKg/B,GAAO,KACZW,EAAG+C,WAAY/C,EAAGgD,aAAc,MAChChD,EAAGmD,aAAcC,KAInB3D,mBAAA,WACC,IAAMO,EAAK3/B,KAAKy+B,GACV/F,EAAS14B,KAAKq5B,GACdwH,EAAgB7gC,KAAK0+B,GACrB8D,EAAKxiC,KAAK++B,GACVgE,EAAM/iC,KAAKg/B,GACXt4B,EAAU1G,KAAKmH,EACrB,GAAU,MAANw4B,IAAqC,IAAvBA,EAAGN,iBAAsC,MAAV3G,GAC/B,MAAjBmI,GAA+B,MAAN2B,GAAqB,MAAPO,GAA0B,MAAXr8B,EAAkB,CACxEi5B,EAAGpiB,MAAOoiB,EAAGqD,kBAEbrD,EAAGyB,WAAYP,GAEflB,EAAG+C,WAAY/C,EAAGgD,aAAcH,GAChC,IAAMS,EAA0BjjC,KAAK2+B,GACrCgB,EAAGuD,wBAAyBD,GAC5BtD,EAAGwD,oBAAqBF,EAAyB,EAAGtD,EAAGyD,OAAO,EAAO,EAAG,GAExEzD,EAAG+C,WAAY/C,EAAGgD,aAAcI,GAChC,IAAMM,EAAwBrjC,KAAK4+B,GACnCe,EAAGuD,wBAAyBG,GAC5B1D,EAAGwD,oBAAqBE,EAAuB,EAAG1D,EAAGyD,OAAO,EAAO,EAAG,GAEtEzD,EAAG2D,cAAe3D,EAAG4D,UACrB5D,EAAGiC,YAAajC,EAAGkC,WAAYn7B,GAC/Bi5B,EAAG6D,UAAWxjC,KAAK6+B,GAAiB,GACpCc,EAAG8D,UAAWzjC,KAAK8+B,GAAcpG,EAAOx1B,MAAOw1B,EAAO/xB,QAEtDg5B,EAAG+D,WAAY/D,EAAGgE,eAAgB,EAAG,GAErChE,EAAGiC,YAAajC,EAAGkC,WAAY,MAC/BlC,EAAG+C,WAAY/C,EAAGgD,aAAc,MAChChD,EAAGyB,WAAY,QAIjBhC,iBAAA,SAAMwE,GACL,IAAMjE,EAAK3/B,KAAKy+B,GACV/F,EAAS14B,KAAKq5B,GACpB,GAAU,MAANsG,IAAqC,IAAvBA,EAAGN,iBAAsC,MAAV3G,EAAiB,CACjE,IAAMx1B,EAAQw1B,EAAOx1B,MACfyD,EAAS+xB,EAAO/xB,OACtBi9B,EAAW1gC,MAAQA,EACnB0gC,EAAWj9B,OAASA,EACpB,IAAMk9B,EAAcD,EAAW7N,WAAY,MACxB,MAAf8N,GACHA,EAAYjL,UAAWF,EAAQ,EAAG,KAKrC0G,oBAAA,WACCp/B,KAAK8jC,sBACL9jC,KAAK+jC,kBACL/jC,KAAKgkC,iBAEL,IAAMtL,EAAS14B,KAAKq5B,GACN,MAAVX,IACH14B,KAAKq5B,GAAU,KACfX,EAAOuL,oBAAqB,mBAAoBjkC,KAAKi/B,IAAc,GACnEvG,EAAOuL,oBAAqB,uBAAwBjkC,KAAKk/B,IAAiB,GAC1EjkB,OAAOgpB,oBAAqB,SAAUjkC,KAAKm/B,IAAgB,IAG5D,IAAMQ,EAAK3/B,KAAKy+B,GAChB,GAAU,MAANkB,EAAa,CAChB3/B,KAAKy+B,GAAM,KACX,IAAMyF,EAAmBvE,EAAGwE,aAAc,sBAClB,MAApBD,GACHA,EAAiBE,mCC9VpB,WAAapZ,GACZhrB,KAAK2qB,GAAM,cAAcK,EACzBhrB,KAAKqkC,GAAaC,EAAoBC,eAAejkB,OACrDtgB,KAAKq5B,GAAU9hB,SAAS+hB,cAAe,UACvCt5B,KAAKg8B,GAAQ,CACZwI,OAAQF,EAAoBG,aAAczZ,GAC1ChW,KAAM,GACN0vB,QAAQ,GAET1kC,KAAKk8B,GAAc,GACnBl8B,KAAKm8B,GAAU,EACfn8B,KAAKiD,EAAS,EACdjD,KAAKkH,EAAU,EACflH,KAAKsH,GAAW,EA2OlB,OAxOC9H,sBAAI8kC,sBAAJ,WACC,OAAOtkC,KAAK2qB,oCAGbnrB,sBAAI8kC,wBAAJ,WACC,OAAOtkC,KAAKg8B,QAGb,SAAU1S,GACTtpB,KAAKg8B,GAAMwI,OAASlb,EAAKkb,OACzBxkC,KAAKg8B,GAAMhnB,KAAOsU,EAAKtU,KACvBhV,KAAKg8B,GAAM0I,OAASpb,EAAKob,wCAG1BllC,sBAAI8kC,yBAAJ,WACC,OAAOtkC,KAAKiD,mCAGbzD,sBAAI8kC,0BAAJ,WACC,OAAOtkC,KAAKkH,mCAGb1H,sBAAI8kC,0BAAJ,WACC,OAAOtkC,KAAKq5B,oCAGb75B,sBAAI8kC,6BAAJ,WACC,OAAOtkC,KAAKqkC,oCAGb7kC,sBAAI8kC,8BAAJ,WACC,OAAOtkC,KAAKk8B,oCAGboI,kBAAA,WACCtkC,KAAKm8B,GAAU,EACf,IAAMlU,EAAajoB,KAAKk8B,GACxB,IAAK,IAAMpU,KAAaG,EACvBA,EAAYH,GAAYqQ,IAAM,GAIhCmM,gBAAA,WACC,IAAMrc,EAAajoB,KAAKk8B,GACxB,IAAK,IAAMpU,KAAaG,EAAa,CACpC,IAAMrgB,EAAOqgB,EAAYH,GACrBlgB,EAAKuwB,KAAO,IACfvwB,EAAKwzB,MAAQ,EACTxzB,EAAKwzB,MAAQ,WACTnT,EAAYH,GACnB9nB,KAAKsH,GAAY,MAMrBg9B,qBAAA,WACCtkC,KAAKwtB,IAAKqO,IACV77B,KAAK2kC,QAAS,QAGfL,oBAAA,SAASxc,GACR,IAAMG,EAAajoB,KAAKk8B,GACxB,GAAkB,OAAdpU,EAAqB,CACxB,IAAMlgB,EAAOqgB,EAAYH,GACb,MAARlgB,GACCA,EAAKuwB,KAAO,IACfn4B,KAAKm8B,IAAW,GAEjBv0B,EAAKuwB,KAAO,IAEZlQ,EAAYH,GAAc,IAAI+U,GAA2B,EAAG,EAAG,GAAG,GAClE78B,KAAKm8B,IAAW,EAChBn8B,KAAKsH,GAAW,KAKnBg9B,gBAAA,SAAKrc,GACJ,IAAK,IAAI1mB,EAAI,EAAGC,EAAOymB,EAAWvnB,OAAQa,EAAIC,IAAQD,EACrDvB,KAAK2kC,QAAS1c,EAAY1mB,KAI5B+iC,gBAAA,SAAKxc,GACJ,OAAO9nB,KAAKk8B,GAAapU,IAG1Bwc,mBAAA,WACC,GAAItkC,KAAKsH,EAAW,CACnB,IAAMoxB,EAAS14B,KAAKq5B,GACduL,EAAY5kC,KAAKqkC,GACvB,GAAc,MAAV3L,GAA+B,MAAbkM,EAAoB,CACzC,IAAMvO,EAAUqC,EAAO3C,WAAY,MACnC,GAAe,MAAXM,EAAkB,CACrBr2B,KAAKsH,GAAW,EAEhB,IAAMgiB,EAAOtpB,KAAKg8B,GACZ/T,EAAajoB,KAAKk8B,GAClB2I,EAAgBvb,EAAKtU,KAAO,GAC5B9R,EAAQohC,EAAoB7G,WAAY9zB,KAAKwgB,KAAMxgB,KAAK+zB,KAAM19B,KAAKm8B,KAAc0I,GACvF7kC,KAAKiD,EAASC,EACd,IAAMooB,GAAahC,EAAKob,OAAS,UAAY,IAAOpb,EAAKtU,KAAO,MAASsU,EAAKkb,OAE9EnO,EAAQ/M,KAAOgC,EACf+K,EAAQ5C,UAAY,OACpB4C,EAAQ4G,aAAe,SACvB5G,EAAQ6G,UAAY,EACpB7G,EAAQ8G,QAAU,QAClB9G,EAAQ+G,SAAW,QACnB/G,EAAQgH,WAAa,EACrBhH,EAAQ6C,UAAY,UAEpB,IACMyE,EAAYkH,GAAiB,EAC/Bz+B,EAAI,EACJC,EAAI,EACR,IAAK,IAAMyhB,KAAaG,EAAa,CACpC,IAAMrgB,EAAOqgB,EAAYH,GACnBK,EAAUkO,EAAQ2G,YAAalV,GAAY5kB,MAC3C4hC,EAAiBn7B,KAAKwgB,KAPb,EAO6BhC,EAP7B,GAQT4c,EAAkBF,EACpB3hC,GAASkD,EAAI0+B,IAChB1+B,EAAI,EACJC,GAAKw+B,GAGNj9B,EAAKxB,EAAIA,EACTwB,EAAKvB,EAAIA,EACTuB,EAAK1E,MAAQ4hC,EACbl9B,EAAKjB,OAASo+B,EACdn9B,EAAKugB,QAAUA,EACfvgB,EAAK6iB,OAAOrkB,EAAIA,EAnBD,EAoBfwB,EAAK6iB,OAAOpkB,EAAIA,EAAIs3B,EAEpBv3B,GAAK0+B,EAEN,IAAMn+B,EAAS3G,KAAKkH,EAAUb,EAAIw+B,EAgBlC,IAAK,IAAM/c,KAXX4Q,EAAOx1B,MAAQA,EACfw1B,EAAO/xB,OAASA,EAChB0vB,EAAQ/M,KAAOgC,EACf+K,EAAQ5C,UAAY,OACpB4C,EAAQ4G,aAAe,SACvB5G,EAAQ6G,UAAY,EACpB7G,EAAQ8G,QAAU,QAClB9G,EAAQ+G,SAAW,QACnB/G,EAAQgH,WAAa,EACrBhH,EAAQ6C,UAAY,UACpB7C,EAAQyH,UAAW,EAAG,EAAG56B,EAAOyD,GACRshB,EACjBrgB,EAAOqgB,EAAYH,GACzBuO,EAAQ0H,SAAUjW,EAAWlgB,EAAK6iB,OAAOrkB,EAAGwB,EAAK6iB,OAAOpkB,GAQzD,OAJAu+B,EAAUI,cAAetM,GACzBkM,EAAUnjC,SACVmjC,EAAUK,KAAMvM,IAET,IAIV,OAAO,GAGRl5B,sBAAI8kC,0BAAJ,WACC,OAAOtkC,KAAKm8B,oCAGbmI,mBAAA,WACC,MAAO,CACNphC,MAAOlD,KAAKiD,EACZ0D,OAAQ3G,KAAKkH,EACboiB,KAAMtpB,KAAKg8B,GACX/T,WAAYjoB,KAAKk8B,KAInBoI,qBAAA,WACC,OAAOzM,KAAKC,UAAW93B,KAAKklC,WAG7BZ,oBAAA,WAEkB,MADCtkC,KAAKqkC,KAEtBrkC,KAAKqkC,GAAa,MAIL,MADCrkC,KAAKq5B,KAEnBr5B,KAAKq5B,GAAU,MAGhB,IAAMpR,EAAajoB,KAAKk8B,GACxB,IAAK,IAAMpU,KAAaG,SAChBA,EAAYH,IAIdwc,eAAP,SAAqBtZ,GACpB,MAAwB,SAAfA,EACRsZ,EAAoBa,oBACpBna,GAIKsZ,aAAP,SAAmBtvB,GAElB,IADA,IAAIxS,EAAS,GACNA,EAASwS,GACfxS,IAAW,EAEZ,OAAOA,GAGD8hC,eAAP,WAIC,OAHqC,MAAjCA,EAAoBc,YACvBd,EAAoBc,UAAY,IAAIhG,IAE9BkF,EAAoBc,WAGrBd,oBAAP,WAIC,OAH4C,MAAxCA,EAAoBe,mBACvBf,EAAoBe,iBAAoB/vB,EAAQuG,cAAcC,IAAK,SAAkBmP,kBAE/EqZ,EAAoBe,kBAnQXf,YAA4C,KAC5CA,mBAAkC,wBCdnD,aACCtkC,KAAKo+B,GAAW,GAgFlB,OA7ECkH,kBAAA,WACC,IAAMhY,EAAUttB,KAAKo+B,GACrB,IAAK,IAAMoG,KAAUlX,EACNA,EAASkX,GACjBe,SAIRD,gBAAA,WACC,IAAMhY,EAAUttB,KAAKo+B,GACrB,IAAK,IAAMoG,KAAUlX,EAAU,CAC9B,IAAMrE,EAAQqE,EAASkX,GACnB,EAAIvb,EAAMvoB,QACbuoB,EAAMuc,WAEPvc,EAAMW,MACFX,EAAMvoB,QAAU,IACnBuoB,EAAMtB,iBACC2F,EAASkX,MAKnBc,gBAAA,SAAKd,EAAgB1H,GACpB,IAAM7T,EAAQjpB,KAAKo+B,GAAUoG,GAC7B,GAAa,MAATvb,EACHA,EAAMuE,IAAKsP,OACL,CACN,IAAM2I,EAAW,IAAInB,GAAqBE,GAC1CiB,EAASjY,IAAKsP,GACd98B,KAAKo+B,GAAUoG,GAAWiB,IAI5BH,gBAAA,SAAKd,GACJ,IAAMvb,EAAQjpB,KAAKo+B,GAAUoG,GAC7B,OAAa,MAATvb,EACIA,EAED,MAGRqc,mBAAA,SAAQI,GACP,IAAMpY,EAAUttB,KAAKo+B,GACflG,EAAcwN,EAAUC,iBAC9B,IAAK,IAAMnB,KAAUlX,EAAU,CAC9B,IAAMrE,EAAQqE,EAASkX,GACvB,GAAIvb,EAAM3nB,SAAW,CACpB,IAAMskC,EAAU3c,EAAM+O,GAChBtc,EAAOgqB,EAAU5pB,IAAK8pB,GAC5B,GAAY,MAARlqB,EAAe,CAClB,IAAMxY,EAAQ+lB,EAAM/lB,MACdyD,EAASsiB,EAAMtiB,OACfyxB,EAAaF,EAAYE,WAC/B1c,EAAK2c,MAAMn1B,MAAQA,EACnBwY,EAAK2c,MAAM1xB,OAASA,EACpB+U,EAAKxY,MAAQA,EAAQk1B,EACrB1c,EAAK/U,OAASA,EAASyxB,EACvBsN,EAAU/nB,eAEV+nB,EAAUp/B,IACTs/B,EACA,IAAIjN,GAA2B1P,EAAOiP,OAO3CoN,oBAAA,WACC,IAAMhY,EAAUttB,KAAKo+B,GACrB,IAAK,IAAMoG,KAAUlX,EACNA,EAASkX,GACjB7c,UAEP3nB,KAAKo+B,GAAW,uBC/EjB,WAAayH,EAAmDjkC,EAAkBgL,GAAlF,WACC5M,KAAKM,SAAW,KAChBN,KAAK6lC,YAAcA,EACnB7lC,KAAK4B,QAAUA,EAEH,MAARgL,IACCA,EAAK6V,YACRvH,YAAW,WACVjU,EAAK6U,QACH,GAGJlP,EAAK+D,GAAI,UAAU,WAClB1J,EAAK6U,UAYT,OAPCgqB,gBAAA,WACC,IAAIxlC,EAAWN,KAAKM,SAIpB,OAHgB,MAAZA,IACHA,EAAWN,KAAKM,SAAW,IAAKN,KAAgB,YAAGA,KAAK4B,UAElDtB,sBC5BT,cAIA,OAHCylC,mBAAA,SAAQjlC,EAAgBklC,EAAcC,GACrC,OAAQA,EAAKC,WAAa,GAAK,KAAO,yBCFxC,cAIA,OAHCC,mBAAA,SAAQrlC,EAAgBklC,EAAcC,GACrC,OAAQA,EAAKC,WAAa,GAAK,KAAO,yBCFxC,cAIA,OAHCE,mBAAA,SAAQtlC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAKK,+BCFrB,cAIA,OAHCC,mBAAA,SAAQzlC,EAAgBklC,EAAcC,GACrC,MAAO,IAAY,EAATnlC,YCCX,SAAa0lC,GAEXxmC,KAAKwmC,UADW,MAAbA,GACeA,EAAUnwB,UAAU,EAAGmwB,EAAU9lC,QAElC,kBCPpB,4DAIA,OAJiCZ,OAChC2mC,mBAAA,SAAQ3lC,EAAgBklC,EAAcC,GACrC,OAAOnlC,EAAO4lC,cAAc1mC,KAAKwmC,eAFFG,mBCAjC,4DAIA,OAJiC7mC,OAChC8mC,mBAAA,SAAQ9lC,EAAgBklC,EAAcC,GACrC,OAAOnlC,EAAO+lC,QAAQ7mC,KAAKwmC,eAFIG,mBCAjC,4DAkDA,OAlDmC7mC,OAClCgnC,mBAAA,SAAQhmC,EAAgBklC,EAAcC,GACrC,IAAM9sB,EAAMnZ,KAAK+mC,MAAOjmC,EAAQklC,EAAMC,GACtC,OAAI9sB,EAAM,MACFnZ,KAAKgnC,GAASlmC,EAAQ,EAAO,IAC1BqY,EAAM,MACTnZ,KAAKgnC,GAASlmC,EAAQ,KAAO,KAC1BqY,EAAM,MACTnZ,KAAKgnC,GAASlmC,EAAQ,KAAO,KAC1BqY,EAAM,MACTnZ,KAAKgnC,GAASlmC,EAAQ,KAAO,KAC1BqY,EAAM,MACTnZ,KAAKgnC,GAASlmC,EAAQ,KAAO,KAC1BqY,EAAM,KACTnZ,KAAKgnC,GAASlmC,EAAQ,KAAO,KAC1BqY,EAAM,KACTnZ,KAAKgnC,GAASlmC,EAAQ,IAAO,KAC1BqY,EAAM,KACTnZ,KAAKgnC,GAASlmC,EAAQ,IAAO,KAC1BqY,EAAM,EACTnZ,KAAKgnC,GAASlmC,EAAQ,IAAO,KAC1BqY,EAAM,IACTnZ,KAAKgnC,GAASlmC,EAAQ,EAAO,IAC1BqY,EAAM,IACTnZ,KAAKgnC,GAASlmC,EAAQ,KAAO,KAC1BqY,EAAM,IACTnZ,KAAKgnC,GAASlmC,EAAQ,KAAO,KAC1BqY,EAAM,KACTnZ,KAAKgnC,GAASlmC,EAAQ,KAAO,KAC1BqY,EAAM,KACTnZ,KAAKgnC,GAASlmC,EAAQ,MAAO,KAC1BqY,EAAM,KACTnZ,KAAKgnC,GAASlmC,EAAQ,MAAO,KAC1BqY,EAAM,KACTnZ,KAAKgnC,GAASlmC,EAAQ,MAAO,KAC1BqY,EAAM,KACTnZ,KAAKgnC,GAASlmC,EAAQ,MAAO,KAE7Bd,KAAKgnC,GAASlmC,EAAQ,MAAO,MAI5BgmC,kBAAV,SAAgBhmC,EAAgBklC,EAAcC,GAC7C,OAAOt8B,KAAKwP,IAAIrY,IAGPgmC,eAAV,SAAkBhmC,EAAgBmmC,EAAqBC,GAEtD,MAAO,IADOpmC,EAASmmC,GACPJ,QAAQ7mC,KAAKwmC,WAAaU,MAhDTP,mBCAnC,4DAIA,OAJiC7mC,OAChCqnC,mBAAA,SAAQrmC,EAAgBklC,EAAcC,GACrC,OAAOnlC,EAAOsmC,YAAYpnC,KAAKwmC,eAFAG,kBCAjC,cAIA,OAHCU,mBAAA,SAAQvmC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAKC,gCCFrB,cAIA,OAHCoB,mBAAA,SAAQxmC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAKC,WAAa,wBCFlC,cAIA,OAHCqB,mBAAA,SAAQzmC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAKuB,WAAa,uBCFlC,cAIA,OAHCC,mBAAA,SAAQ3mC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAKyB,kCCFrB,cAIA,OAHCC,mBAAA,SAAQ7mC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAK2B,uCCFrB,cAIA,OAHCC,mBAAA,SAAQ/mC,EAAgBklC,EAAcC,GACrC,OAAoB,IAATnlC,EAAgB,2BCF7B,cAIA,OAHCgnC,mBAAA,SAAQhnC,EAAgBklC,EAAcC,GACrC,OAAmB,EAATnlC,aCJCinC,GAAU,SAAEC,EAAatnC,EAAgBmI,GACrD,IAAMo/B,EAAYD,EAAItnC,OACtB,GAAIA,EAASunC,EACZ,OAAOD,EAGR,IADA,IAAI/iC,EAAU,GACL1D,EAAI,EAAGC,EAAOd,EAASunC,EAAW1mC,EAAIC,IAAQD,EACtD0D,GAAW4D,EAEZ,OAAO5D,EAAU+iC,iBCDjB,WAAatnC,EAAgBonB,EAAmB9V,GAC/ChS,KAAKU,OAASA,EACdV,KAAK8nB,UAAYA,EACjB9nB,KAAKgS,KAAOA,EAMd,OAHCk2B,mBAAA,SAAQpnC,EAAgBklC,EAAcC,GACrC,OAAO8B,GAAQ/nC,KAAKgS,KAAKm2B,OAAOrnC,EAAQklC,EAAMC,GAAOjmC,KAAKU,OAAQV,KAAK8nB,+BCVxE,WAAa9V,GACZhS,KAAKgS,KAAOA,EAUd,OAPCo2B,mBAAA,SAAQtnC,EAAgBklC,EAAcC,GACrC,IAAMzjC,EAASxC,KAAKgS,KAAKm2B,OAAOrnC,EAAQklC,EAAMC,GAC9C,OAAI,EAAIzjC,EAAO9B,QAAwB,MAAd8B,EAAO,GACxB,IAAIA,EAAO6T,UAAU,EAAG7T,EAAO9B,YAEhC8B,sBCTR,WAAYwP,GACXhS,KAAKgS,KAAOA,EAUd,OAPCq2B,mBAAA,SAAQvnC,EAAgBklC,EAAcC,GACrC,IAAMzjC,EAASxC,KAAKgS,KAAKm2B,OAAOrnC,EAAQklC,EAAMC,GAC9C,OAAI,EAAIzjC,EAAO9B,QAAwB,MAAd8B,EAAO,GACxB,IAAIA,EAELA,sBCZT,cAIA,OAHC8lC,mBAAA,SAAQxnC,EAAgBklC,EAAcC,GACrC,OAAUt8B,KAAKwnB,MAAe,IAATrwB,2BCFvB,cAIA,OAHCynC,mBAAA,SAAOznC,EAAgBklC,EAAcC,GACpC,OAAUt8B,KAAKwnB,MAAMrwB,2BCOtB,WACC0nC,EAAeC,EAAeC,EAC9BC,EAAeC,EAAen3B,EAAeo3B,GAE7C7oC,KAAKwoC,EAAIA,EACTxoC,KAAKyoC,EAAIA,EACTzoC,KAAK0oC,EAAIA,EACT1oC,KAAK2oC,EAAIA,EACT3oC,KAAK4oC,EAAIA,EACT5oC,KAAKyR,EAAIA,EACTzR,KAAK6oC,GAAKA,EAoBZ,OAjBCC,mBAAA,SAAQhoC,EAAgBklC,EAAcC,GACrC,OAAID,EAAO,IACAhmC,KAAKyR,EAAE02B,OAAOrnC,EAAQklC,EAAMC,OAASjmC,KAAK6oC,GAAGV,OAAOrnC,EAAQklC,EAAMC,GAClED,EAAO,IACPhmC,KAAK4oC,EAAET,OAAOrnC,EAAQklC,EAAMC,OAASjmC,KAAKyR,EAAE02B,OAAOrnC,EAAQklC,EAAMC,GACjED,EAAO,KACPhmC,KAAK2oC,EAAER,OAAOrnC,EAAQklC,EAAMC,OAASjmC,KAAK4oC,EAAET,OAAOrnC,EAAQklC,EAAMC,GACjED,EAAO,MACPhmC,KAAKyoC,EAAEN,OAAOrnC,EAAQklC,EAAMC,OAC5BjmC,KAAK0oC,EAAEP,OAAOrnC,EAAQklC,EAAMC,OAClBjmC,KAAK2oC,EAAER,OAAOrnC,EAAQklC,EAAMC,GACtCD,EAAO,OACPhmC,KAAKyoC,EAAEN,OAAOrnC,EAAQklC,EAAMC,OAASjmC,KAAK0oC,EAAEP,OAAOrnC,EAAQklC,EAAMC,GAEjEjmC,KAAKwoC,EAAEL,OAAOrnC,EAAQklC,EAAMC,OAASjmC,KAAKyoC,EAAEN,OAAOrnC,EAAQklC,EAAMC,uBClC7E,WAAYj0B,GACXhS,KAAKgS,KAAOA,EASd,OAPC+2B,mBAAA,SAAQjoC,EAAgBklC,EAAcC,GACrC,IAAMzjC,EAASxC,KAAKgS,KAAKm2B,OAAOrnC,EAAQklC,EAAMC,GAC9C,OAAI,EAAIzjC,EAAO9B,QAAwB,MAAd8B,EAAO,GACxB,IAAIA,EAELA,uBCVT,4DAIA,OAJmC1C,OACxBkpC,kBAAV,SAAiBloC,EAAgBklC,EAAcC,GAC9C,OAAOt8B,KAAKwP,IAAI6sB,OAFiBc,kBCGlC,WAAYkB,GACXhoC,KAAKgoC,IAAMA,EAMb,OAHCiB,mBAAA,SAAQnoC,EAAgBklC,EAAcC,GACrC,OAAOjmC,KAAKgoC,wBCRd,cAIA,OAHCkB,mBAAA,SAAQpoC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAKkD,mCCFrB,cAIA,OAHCC,mBAAA,SAAQtoC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAKkD,cAAgB,yBCDrC,cAQA,OAPCE,mBAAA,SAAQvoC,EAAgBklC,EAAcC,GACrC,IAAMqD,EAAIrD,EAAKsD,oBAIf,OAHaD,GAAK,EAAI,IAAM,KAChBvB,GAAQ1B,OAAO18B,KAAK6/B,MAAM7/B,KAAKwP,IAAImwB,GAAK,KAAM,EAAG,SACjDvB,GAAQ1B,OAAO18B,KAAK6/B,MAAM7/B,KAAKwP,IAAImwB,GAAK,KAAM,EAAG,yBCN/D,cAIA,OAHCG,mBAAA,SAAQ3oC,EAAgBklC,EAAcC,GACrC,MAAO,GAAGt8B,KAAKwnB,MAAMrwB,uBCFvB,cAIA,OAHC4oC,mBAAA,SAAQ5oC,EAAgBklC,EAAcC,GACrC,OAAOI,OAAOJ,EAAK0D,oBC6BfC,GAAS,sJAOd,WAAazB,GACZ,IAAI0B,EAAgB,EAChBC,GAAiB,EACfn4B,EAAsB,GAE5B,IADAi4B,GAAOG,UAAY,IACL,CACb,IAAMh3B,EAAU62B,GAAO52B,KAAMm1B,GAC7B,GAAe,MAAXp1B,EAwMG,CACF82B,EAAgB1B,EAAOznC,QAC1BiR,EAAMnR,KAAM,IAAIyoC,GAAkBd,EAAO9xB,UAAWwzB,EAAe1B,EAAOznC,UAE3E,MA3MA,IAAME,EAAQmS,EAAQnS,MAClBipC,EAAgBjpC,GACnB+Q,EAAMnR,KAAM,IAAIyoC,GAAkBd,EAAO9xB,UAAWwzB,EAAejpC,KAEpEipC,EAAgBjpC,EAAQmS,EAAS,GAAIrS,OAErC,IAAMspC,EAAMj3B,EAAS,GACfk3B,EAAWl3B,EAAS,GACpByzB,EAAYzzB,EAAS,GAG3B,OAFkBA,EAAS,IAG3B,IAAK,IACJ+2B,GAAiB,EACjBn4B,EAAMnR,KAAM,IAAI0oC,IAChB,MACD,IAAK,KACJY,GAAiB,EACjBn4B,EAAMnR,KACL,IAAI0oC,GACJ,IAAID,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAI1C,KAE7C,MACD,IAAK,MACJuC,GAAiB,EACjBn4B,EAAMnR,KACL,IAAI0oC,GACJ,IAAID,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAI1C,IAC5C,IAAI0B,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAI7D,KAE7C,MACD,IAAK,IACJ0D,GAAiB,EACjBn4B,EAAMnR,KAAMR,KAAKkqC,wBAAyBD,EAAU,IAAIb,KACxD,MACD,IAAK,KACJU,GAAiB,EACjBn4B,EAAMnR,KACLR,KAAKkqC,wBAAyBD,EAAU,IAAIb,IAC5C,IAAIH,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAI1C,KAE7C,MACD,IAAK,MACJ51B,EAAMnR,KACLR,KAAKkqC,wBAAyBD,EAAU,IAAIb,IAC5C,IAAIH,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAI1C,IAC5C,IAAI0B,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAI7D,KAE7C,MACD,IAAK,IACJ0D,GAAiB,EACjBn4B,EAAMnR,KAAMR,KAAKkqC,wBAAyBD,EAAU,IAAI1C,KACxD,MACD,IAAK,KACJuC,GAAiB,EACjBn4B,EAAMnR,KACLR,KAAKkqC,wBAAyBD,EAAU,IAAI1C,IAC5C,IAAI0B,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAI7D,KAE7C,MACD,IAAK,IACJ0D,GAAiB,EACjBn4B,EAAMnR,KAAMR,KAAKkqC,wBAAyBD,EAAU,IAAI7D,KACxD,MACD,IAAK,IACJ0D,GAAiB,EACjBn4B,EAAMnR,KAAMR,KAAKkqC,wBAAyBD,EAAU,IAAI5C,KACxD,MACD,IAAK,KACJyC,GAAiB,EACjBn4B,EAAMnR,KACLR,KAAKkqC,wBAAyBD,EAAU,IAAI5C,IAC5C,IAAI4B,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAIxC,KAE7C,MACD,IAAK,MACJqC,GAAiB,EACjBn4B,EAAMnR,KACLR,KAAKkqC,wBAAyBD,EAAU,IAAI5C,IAC5C,IAAI4B,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAIxC,IAC5C,IAAIwB,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAIP,KAE7C,MACD,IAAK,IACJI,GAAiB,EACjBn4B,EAAMnR,KAAMR,KAAKkqC,wBAAyBD,EAAU,IAAI3C,KACxD,MACD,IAAK,KACJwC,GAAiB,EACjBn4B,EAAMnR,KACLR,KAAKkqC,wBAAyBD,EAAU,IAAI3C,IAC5C,IAAI2B,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAIxC,KAE7C,MACD,IAAK,MACJqC,GAAiB,EACjBn4B,EAAMnR,KACLR,KAAKkqC,wBAAyBD,EAAU,IAAI3C,IAC5C,IAAI2B,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAIxC,IAC5C,IAAIwB,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAIP,KAE7C,MACD,IAAK,IACJI,GAAiB,EACjBn4B,EAAMnR,KAAMR,KAAKkqC,wBAAyBD,EAAU,IAAIxC,KACxD,MACD,IAAK,KACJqC,GAAiB,EACjBn4B,EAAMnR,KACLR,KAAKkqC,wBAAyBD,EAAU,IAAIxC,IAC5C,IAAIwB,GAAkB,KACtBjpC,KAAKkqC,wBAAyBD,EAAU,IAAIP,KAE7C,MACD,IAAK,KACJI,GAAiB,EACjBn4B,EAAMnR,KAAMR,KAAKmqC,wBAAyBF,EAAU,IAAItC,KACxD,MACD,IAAK,IACJmC,GAAiB,EACjBn4B,EAAMnR,KAAM,IAAI2lC,IAChB,MACD,IAAK,IACJ2D,GAAiB,EACjBn4B,EAAMnR,KAAM,IAAIulC,IAChB,MACD,IAAK,IACJ+D,GAAiB,EACjBn4B,EAAMnR,KAAMR,KAAKkqC,wBAAyBD,EAAU,IAAIP,KACxD,MACD,IAAK,MACJI,GAAiB,EACjBn4B,EAAMnR,KAAK,IAAIsoC,GACd,IAAII,GACJlpC,KAAKkqC,wBAAyBD,EAAU,IAAI1C,IAC5CvnC,KAAKkqC,wBAAyBD,EAAU,IAAI7D,IAC5CpmC,KAAKkqC,wBAAyBD,EAAU,IAAI5C,IAC5CrnC,KAAKkqC,wBAAyBD,EAAU,IAAIxC,IAC5CznC,KAAKkqC,wBAAyBD,EAAU,IAAIP,IAC5C1pC,KAAKmqC,wBAAyBF,EAAU,IAAItC,MAE7C,MACD,IAAK,IACJmC,GAAiB,EACjBn4B,EAAMnR,KAAM,IAAI6oC,IAChB,MACD,IAAK,IACJ13B,EAAMnR,KAAM,IAAIyoC,GAAkB,MAClC,MACD,IAAK,IACJt3B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAIrD,GAAaJ,KAClE,MACD,IAAK,IACJ70B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAIxD,GAAaD,KAClE,MACD,IAAK,IACJ70B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAI9C,GAAaX,KAClE,MACD,IAAK,KACJ70B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAIR,KACrD,MACD,IAAK,IACJ93B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAI1D,KACrD,MACD,IAAK,IACJ50B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAIpC,KACrD,MACD,IAAK,IACJl2B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAInC,KACrD,MACD,IAAK,KACJn2B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAI3B,KACrD,MACD,IAAK,KACJ32B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAI1B,KACrD,MACD,IAAK,MACJ52B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAInD,GAAeN,KACpE,MACD,IAAK,MACJ70B,EAAMnR,KAAMR,KAAKoqC,qBAAsBH,EAAU,IAAIjB,GAAexC,KACpE,MACD,QACC70B,EAAMnR,KAAM,IAAIyoC,GAAkBe,KAWrChqC,KAAK8pC,eAAiBA,EACtB9pC,KAAK2R,MAAQA,EACb3R,KAAKimC,KAAO,IAAIoE,KAwDlB,OArDWC,oCAAV,SAAmCL,EAAkBj4B,GACpD,OAAQi4B,GACR,IAAK,IACJ,OAAO,IAAI/B,GAAmB,EAAG,IAAKl2B,GACvC,IAAK,IACJ,OAAOA,EACR,QACC,OAAO,IAAIk2B,GAAmB,EAAG,IAAKl2B,KAI9Bs4B,oCAAV,SAAmCL,EAAkBj4B,GACpD,OAAQi4B,GACR,IAAK,IACJ,OAAO,IAAI/B,GAAmB,EAAG,IAAKl2B,GACvC,IAAK,IACJ,OAAOA,EACR,QACC,OAAO,IAAIk2B,GAAmB,EAAG,IAAKl2B,KAI9Bs4B,iCAAV,SAAgCL,EAAkBj4B,GACjD,OAAQi4B,GACR,IAAK,IACJ,OAAO,IAAIlB,GAAiB/2B,GAC7B,IAAK,IACJ,OAAO,IAAIq2B,GAAgBr2B,GAC5B,IAAK,IACJ,OAAO,IAAIo2B,GAAuBp2B,GACnC,QACC,OAAOA,IAITs4B,mBAAA,SAAQxpC,EAAgBklC,GACvB,IAAMr0B,EAAQ3R,KAAK2R,MACbs0B,EAAOjmC,KAAKimC,KACdjmC,KAAK8pC,gBACR7D,EAAKsE,QAASzpC,GAGf,IADA,IAAI0B,EAAS,GACJjB,EAAI,EAAGC,EAAOmQ,EAAMjR,OAAQa,EAAIC,IAAQD,EAChDiB,GAAUmP,EAAOpQ,GAAI4mC,OAAQrnC,EAAQklC,EAAMC,GAE5C,OAAOzjC,GAGR8nC,uBAAA,WAAA,WACC,OAAO,SAAExpC,EAAgBklC,GACxB,OAAO/+B,EAAKkhC,OAAQrnC,EAAQklC,wBCnT/B,cAIA,OAHQwE,SAAP,SAAerC,GACd,OAAO,IAAImC,GAAqBnC,uBCLlC,cAKA,OAJQsC,QAAP,SAAcC,EAAgBC,EAAgBtgC,GAC7C,IAAMC,EAAIX,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGS,IACpC,OAAOV,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAG8gC,GAAU,EAAIpgC,GAAKqgC,EAASrgC,yBCK9D,WAAakG,EAAgB5O,GAA7B,MACCkF,YAAO,IAAI8jC,oBAHF3jC,KAA8B,KAIvCA,EAAKhE,EAAS,EACdgE,EAAKC,EAAU,EACfD,EAAK4jC,IAAMr6B,EAEXs6B,YAAUC,kBAAkBC,YAAa/jC,EAAKuJ,OAAQvJ,EAAK4jC,IAAKjpC,GAAWA,EAAQqpC,aAE7ErpC,IAAgC,IAArBA,EAAQspC,UACxBjkC,EAAKkkC,SAoCR,OAnDiCrrC,OAmBhCsrC,iBAAA,WAAA,WACC,OAAIprC,KAAKqrC,GACDrrC,KAAKqrC,IAGbrrC,KAAKqrC,GAAQ,IAAIC,SAAQ,SAAEC,GAC1B,IAAM1Z,EAA0B5qB,EAAKuJ,OAErCqhB,EAAM2Z,QAAU,SAAEt0B,GACjB2a,EAAM2Z,QAAU,KACfvkC,EAAawkC,QAAQC,IAAKx0B,IAG5B2a,EAAM8Z,OAAS,WACb1kC,EAAK+d,OAAgB6M,EAAM3uB,MAAO2uB,EAAMlrB,QACzC4kC,KAGD1Z,EAAMgH,IAAM5xB,EAAK4jC,OAGX7qC,KAAKqrC,KAGND,OAAP,SAAa56B,EAAiBo7B,GAE7B,MAAqB,QAAdA,GAEgB,iBAAXp7B,GAAuE,IAAhDA,EAAO3P,QAAQ,8BAE3B,iBAAX2P,GAAkD,IAA3BA,EAAO3P,QAAQ,YAjDnBiqC,YAAUC,mBCF9Bc,GAAe,SAAEhB,GAC7B,MAAO,6BAA6BiB,KAAKjB,gBCMhCkB,UAAUvrC,KAAM4qC,IAQ1B,ICPYY,iBDoBX,WAAa9oC,EAAe+oC,EAAe7Z,GAC1CpyB,KAAKiD,EAASC,EACdlD,KAAKksC,GAASD,EACdjsC,KAAKmsC,GAAU/Z,EAEfpyB,KAAKosC,GAAU,GACfpsC,KAAKqsC,GAAO,GACZrsC,KAAKssC,GAAS,EACdtsC,KAAKusC,GAAS,EACdvsC,KAAKkH,EAAU,EA4EjB,OAzEC1H,sBAAIgtC,yBAAJ,WACC,OAAOxsC,KAAKiD,mCAGbzD,sBAAIgtC,yBAAJ,WACC,OAAOxsC,KAAKksC,oCAGb1sC,sBAAIgtC,0BAAJ,WACC,OAAOxsC,KAAKmsC,oCAGbK,gBAAA,SAAKvvB,EAAc/Z,EAAeyD,EAAgB8lC,GACjD,IAAMC,EAAS1sC,KAAKosC,GACpB,KAAQnvB,KAAQyvB,GAAW,CAE1B,IAAMta,EAASpyB,KAAKmsC,GAChB/lC,EAAIpG,KAAKssC,GACTjmC,EAAIrG,KAAKusC,GACTvsC,KAAKiD,GAAUmD,EAAIlD,GACtBkD,EAAI,EACJC,EAAIrG,KAAKusC,GAASvsC,KAAKkH,EAAUkrB,EACjCpyB,KAAKkH,EAAUP,EACf3G,KAAKusC,GAASlmC,GAEdrG,KAAKkH,EAAUyC,KAAKG,IAAK9J,KAAKkH,EAASP,GAExC3G,KAAKssC,GAASlmC,EAAIlD,EAAQkvB,EAG1Bsa,EAAQzvB,GAAS,IAAI0V,YAAWvsB,EAAGC,EAAGnD,EAAOyD,GAG7C,IAAMslC,EAAQjsC,KAAKksC,GAEnB,OADAlsC,KAAKqsC,IAAQ,2BAA2BjmC,EAAI6lC,MAAS5lC,EAAI4lC,QAAWQ,UAC7D,EAER,OAAO,GAGRjtC,sBAAIgtC,4BAAJ,WACC,OAAOxsC,KAAK2sC,yCAGbH,kBAAA,SAAO5qC,GACN,IAAIgrC,EAAQ5sC,KAAK6sC,GACjB,GAAa,MAATD,GAAkBhrC,GAAWA,EAAQkrC,MAAS,CACjD,IAAM1U,EAAex2B,GAAiC,MAAtBA,EAAQw2B,WACvCx2B,EAAQw2B,WAAcnd,OAAO8xB,kBAAoB,EAE5C7pC,EAAQlD,KAAKiD,EACb0D,EAASgD,KAAKqjC,IAAK,EAAGrjC,KAAKwgB,KAAMxgB,KAAKsjC,IAAKjtC,KAAKusC,GAASvsC,KAAKkH,GAAYyC,KAAKujC,MAC/EtP,EAAY16B,EAAQk1B,EACpByF,EAAal3B,EAASyxB,EACtB6T,EAAQjsC,KAAKksC,GAKbiB,EAAMtB,GAAc,eAJEjO,eACEC,oBACM36B,EAAQ+oC,MAAStlC,EAASslC,0CAE2BjsC,KAAKqsC,aACxF9P,EAAa36B,GAA8B,MAAnBA,EAAQwrC,QAAkBxrC,EAAQwrC,QAAU5Q,cAAYC,QAChFvE,EAAcsB,cAAYrnB,KAAMg7B,EAAK,CAC1C/U,aACAmE,cAEK8Q,EAASrtC,KAAKosC,GAEpB,IAAK,IAAMxtB,KADXguB,EAAQ5sC,KAAK6sC,GAAS,GACHQ,EAClBT,EAAOhuB,GAAS,IAAIyN,UAAS6L,EAAamV,EAAQzuB,IAGpD,OAAOguB,SCvGT,SAAYZ,GACXA,iBACAA,mBACAA,qBACAA,uBAJD,CAAYA,KAAAA,QAOZ,ICfYsB,iBDeZ,cAyEA,OAxEQC,SAAP,SACCzsC,EACAmmB,EACAuD,EAAiBmT,EACjBzU,EAAuBskB,EACvBpqC,GAEA,IAAMF,EAAQpC,EAAOoC,MACfyD,EAAS7F,EAAO6F,OAClBP,EAAI,EACJC,EAAI,EACR,OAAQjD,GACR,KAAK4oC,GAAgBx/B,MACpBpG,EAAI6gB,EAAO3hB,KAAOpC,EAAQsnB,GAClB,GAEHtB,GADJ9iB,EAAI6gB,EAAOzhB,MAAQglB,GACKtnB,IACvBkD,EAAI,GAGNC,EAAIrG,KAAKytC,OAAQxmB,EAAO1hB,IAAKoB,EAAQ6mC,GACrC,MACD,KAAKxB,GAAgB5/B,IACpBhG,EAAIpG,KAAKytC,OAAQxmB,EAAO3hB,KAAMpC,EAAOgmB,IACrC7iB,EAAI4gB,EAAO1hB,IAAMoB,EAASg3B,GAClB,GAEH6P,GADJnnC,EAAI4gB,EAAOxhB,OAASk4B,GACKh3B,IACxBN,EAAI,GAGN,MACD,KAAK2lC,GAAgBt/B,MAEhBwc,GADJ9iB,EAAI6gB,EAAOzhB,MAAQglB,GACKtnB,IACvBkD,EAAI6gB,EAAO3hB,KAAOpC,EAAQsnB,GAClB,IACPpkB,EAAI8iB,EAAgBhmB,GAGtBmD,EAAIrG,KAAKytC,OAAQxmB,EAAO1hB,IAAKoB,EAAQ6mC,GACrC,MACD,KAAKxB,GAAgB1/B,OACpBlG,EAAIpG,KAAKytC,OAAQxmB,EAAO3hB,KAAMpC,EAAOgmB,GAEjCskB,GADJnnC,EAAI4gB,EAAOxhB,OAASk4B,GACKh3B,IACxBN,EAAI4gB,EAAO1hB,IAAMoB,EAASg3B,GAClB,IACPt3B,EAAImnC,EAAiB7mC,GAKxB7F,EAAO6T,SAASrO,IAAKF,EAAGC,IAGlBknC,SAAP,SAAe54B,EAAkBK,EAAc04B,GAC9C,OAAI/4B,EAAW,EACV+4B,EAAe/4B,EAAWK,EACE,IAAvB04B,EAAe14B,GAEhB,EAEE04B,EAAe/4B,EAAWK,EAChC04B,EAAe14B,EACa,IAAvB04B,EAAe14B,GAEhB04B,EAAe14B,EAGjBL,sBE/ET,cAiBA,OAdQg5B,QAAP,SAAc7sC,EAAyBiZ,GAAvC,WACCjZ,EAAO6P,GAAImH,EAAiB0B,MAAM,SAAE5D,GACnC,GAAIA,EAAE9U,SAAWA,EAAS,CACzB,IAAMiF,EAAQkB,EAAKlB,MACnBA,EAAMQ,SAAUqP,EAAEhO,KAAKqR,QACvBnY,EAAO8sC,QAAS7nC,OAAOxD,EAAWwD,GAAO,GACzC,IAAMK,EAAIL,EAAMK,EACVC,EAAIN,EAAMM,GACZD,EAAI,GAAKC,EAAI,GAAKvF,EAAOoC,MAAQkD,GAAKtF,EAAO6F,OAASN,IACzD0T,EAASnE,QAXI+3B,QAAQ,IAAI/lB,aCNxB8N,GAAe,SAAEmY,GACtB,IAAMrY,EAAYje,SAASme,eAC3B,GAAIF,EAAY,CACf,IAAMsY,EAAQv2B,SAASw2B,cACvBD,EAAME,mBAAoBH,GAC1BrY,EAAUyY,kBACVzY,EAAU0Y,SAAUJ,GAErB,OAAOtY,GAGF2Y,GAAkB,SAAEv4B,GACzB,OAAOA,EAAEw4B,eAAkBnzB,OAAemzB,8BA6D1C,aAAA,MACCtnC,mBAEM+mC,EAAUt2B,SAASC,YACzBq2B,EAAQp2B,iBAAkB,QAAQ,SAAE7B,GAC/BA,EAAE9U,SAAW+sC,IAChBj4B,EAAEiC,iBACFjC,EAAEy4B,kBACFpnC,EAAK2Q,KAAM,OAAQu2B,GAAiBv4B,QAItCi4B,EAAQp2B,iBAAkB,OAAO,SAAE7B,GAC9BA,EAAE9U,SAAW+sC,IAChBj4B,EAAEiC,iBACFjC,EAAEy4B,kBACFpnC,EAAK2Q,KAAM,MAAOu2B,GAAiBv4B,QAIrCi4B,EAAQp2B,iBAAkB,SAAS,SAAE7B,GAChCA,EAAE9U,SAAW+sC,IAChBj4B,EAAEiC,iBACFjC,EAAEy4B,kBACFpnC,EAAK2Q,KAAM,QAASu2B,GAAiBv4B,UAmBzC,OA5CmC9V,OA8B3BwuC,OAAP,SAAatlB,GACZ,IAAMulB,EAAYC,UAAUD,UACxBA,GAAaA,EAAUE,UAC1BF,EAAUE,UAAWzlB,GA5CA,SAAE/N,EAAgB+N,GACzC,GAA8B,oBAAnB0lB,eAAiC,CAC3C,IAAMN,EAAiBnzB,EAAemzB,cACtC,QAA6B,IAAlBA,QAAkE,IAA1BA,EAAcO,QAEhE,OADAP,EAAcO,QAAS,OAAQ3lB,IACxB,EAGT,OAAO,EAsCC4lB,CAAiB3zB,OAAQ+N,IA5Fb,SAAEA,GACtB,IAAM6lB,EAAMt3B,SAAS+hB,cAAe,OACpCuV,EAAIC,aAAc,QAAS,wCAC3BD,EAAIE,YAAc,QAClBx3B,SAASC,KAAKw3B,YAAaH,GAC3B,IAAMrZ,EAAYE,GAAcmZ,GAC5BrsC,GAAS,EACb,GAAIgzB,EAAY,CACf,IAAMne,EAAU,SAAEzB,GACjB,GAAIA,EAAE9U,SAAW+tC,EAAM,CACtB,IAAMT,EAAgBD,GAAiBv4B,GACvCw4B,EAAcO,QAAS,aAAc3lB,GACrCxmB,EAAW4rC,EAAca,QAAS,gBAAmBjmB,EACrDpT,EAAEiC,mBAGJN,SAASE,iBAAkB,OAAQJ,GACnC,IACCE,SAAS23B,YAAa,gBAEtB33B,SAAS0sB,oBAAqB,OAAQ5sB,GAEvCme,EAAUyY,kBAGX,OADA12B,SAASC,KAAKid,YAAaoa,GACpBrsC,EAoEE2sC,CAAcnmB,IACfwlB,UAAUY,UAAUvuC,QAAS,QAAW,GAlE3B,SAAEmoB,GACvB,IAAM6lB,EAAMt3B,SAAS+hB,cAAe,OACpCuV,EAAIC,aAAc,QAAS,wCAC3B,IAAMO,EAAO93B,SAAS+hB,cAAe,QACrC+V,EAAKC,UAAYtmB,GACI6lB,EAAIU,aAAeV,EAAIU,aAAa,CAAEC,KAAM,SAAYX,GACxEG,YAAaK,GAClB93B,SAASC,KAAKw3B,YAAaH,GAC3B,IACMrZ,EAAYE,GAAcmZ,GAC5BrZ,IACMje,SAAS23B,YAAa,QAC/B1Z,EAAUyY,mBAEX12B,SAASC,KAAKid,YAAaoa,GAqDtBY,CAAezmB,OAtCcsS,QAAMoU,4BCpExC,WAAax2B,EAAYE,EAAYu2B,EAAYC,GAChD5vC,KAAKkZ,GAAKA,EACVlZ,KAAKoZ,GAAKA,EACVpZ,KAAK2vC,GAAKA,EACV3vC,KAAK4vC,GAAKA,EASZ,OANCC,gBAAA,SAAK32B,EAAYE,EAAYu2B,EAAYC,GACxC5vC,KAAKkZ,GAAKA,EACVlZ,KAAKoZ,GAAKA,EACVpZ,KAAK2vC,GAAKA,EACV3vC,KAAK4vC,GAAKA,sBCjBZ,cAYA,OAXQE,SAAP,SAAezlC,GACd,OAAOA,GAGDylC,UAAP,SAAgBzlC,GACf,OAAOA,GAAM,GAAK,EAAIA,IAAM,EAAIA,GAAKA,GAAM,GAAK,EAAIA,GAAKA,KAGnDylC,cAAP,SAAoBzlC,GACnB,OAAOA,EAAI,GAAM,EAAIA,EAAIA,GAAW,EAAI,EAAIA,GAAMA,EAApB,uBCQ/B,WAAazI,GAAb,MACCkF,0BAEAG,EAAK0jB,GAAM,KACX1jB,EAAKqhB,GAAU,KACfrhB,EAAK8oC,GAAa,EAClB9oC,EAAK+oC,GAAyB,MAAXpuC,GAAuC,MAApBA,EAAQquC,SAAmBruC,EAAQquC,SAAW,IACpFhpC,EAAKipC,GAAmB,EAAIvmC,KAAKG,IAAK,EAAG7C,EAAK+oC,IAC9C/oC,EAAKkpC,IAAW,EAChBlpC,EAAKmpC,GAAuB,MAAXxuC,EAAkBA,EAAQyuC,YAAS9tC,EACpD0E,EAAKqpC,GAAmB,WACvBrpC,EAAKspC,cAENtpC,EAAKupC,GAAwB,MAAX5uC,EAAkBA,EAAQ6uC,aAAUluC,EACtD0E,EAAKypC,GAAsB,MAAX9uC,EAAkBA,EAAQ+uC,WAAQpuC,EAClD0E,EAAK2pC,GAAuB,MAAXhvC,GAAqC,MAAlBA,EAAQivC,OAAiBjvC,EAAQivC,OAASf,GAAkBgB,UAwHlG,OApJoChxC,OA+BnCN,sBAAIuxC,0BAAJ,WACC,OAAO/wC,KAAKsoB,QAGb,SAAYxnB,GACXd,KAAKsoB,GAAUxnB,mCAGhBtB,sBAAIuxC,4BAAJ,WACC,OAAO/wC,KAAKgwC,QAGb,SAAcC,GACbjwC,KAAKgwC,GAAYC,EACjBjwC,KAAKkwC,GAAmB,EAAIvmC,KAAKG,IAAK,EAAGmmC,oCAG1Cc,kBAAA,SAAOC,gBAAAA,MACNhxC,KAAKixC,OACLjxC,KAAK+vC,GAAa1F,KAAK6G,MACvBlxC,KAAKmwC,GAAWa,EAChBhxC,KAAK2qB,GAAM1P,OAAOC,WAAYlb,KAAKswC,GAAkB,GAGrDtwC,KAAKywC,QAASO,GAGd,IAAMf,EAAWjwC,KAAKgwC,GAChBmB,EAAOnxC,KAAKoxC,OAAQJ,EAAUf,EAAW,GAC/CjwC,KAAKqwC,OAAQc,EAAMH,EAAS,IAGnBD,oBAAV,SAAmBM,GAClB,IAAMZ,EAAUzwC,KAAKwwC,GACN,MAAXC,GACHA,EAASY,EAAWrxC,MAErBA,KAAK4X,KAAM,QAASy5B,EAAWrxC,OAGtB+wC,mBAAV,SAAkBI,EAAcE,EAAoBC,GACnD,IAAMjB,EAASrwC,KAAKowC,GACN,MAAVC,GACHA,EAAQc,EAAME,EAAWC,EAAatxC,MAEvCA,KAAK4X,KAAM,OAAQu5B,EAAME,EAAWC,EAAatxC,OAGxC+wC,kBAAV,SAAiBM,GAChB,IAAMV,EAAQ3wC,KAAK0wC,GACN,MAATC,GACHA,EAAOU,EAAWrxC,MAEnBA,KAAK4X,KAAM,MAAOy5B,EAAWrxC,OAG9B+wC,sBAAA,WACC,OAAoB,MAAZ/wC,KAAK2qB,IAGdomB,sBAAA,WACC,OAAO/wC,KAAKmwC,IAGHY,uBAAV,WAEC,GAAU,MADC/wC,KAAK2qB,GACC,CAChB3qB,KAAK2qB,GAAM,KACX,IAAM2mB,EAAcjH,KAAK6G,MAAQlxC,KAAK+vC,GAChCE,EAAWjwC,KAAKgwC,GAChBgB,EAAUhxC,KAAKmwC,GACrB,GAAImB,EAAcrB,EAAW,CAC5BjwC,KAAK2qB,GAAM1P,OAAOC,WAAYlb,KAAKswC,GAAkB,GAGrD,IAAMa,EAAOnxC,KAAKoxC,OAAQJ,EAAUf,EAAWqB,EAAcA,GAC7DtxC,KAAKqwC,OAAQc,EAAMH,EAASM,QAGtBH,EAAOnxC,KAAKoxC,OAAQJ,EAAU,EAAIf,GACxCjwC,KAAKqwC,OAAQc,EAAMH,EAASM,GAG5BtxC,KAAK2wC,MAAOK,KAKLD,mBAAV,SAAkBO,GACjB,OAAOtxC,KAAK4wC,GAASU,EAActxC,KAAKkwC,GAAkBlwC,OAG3D+wC,iBAAA,WACC,IAAM/Y,EAAKh4B,KAAK2qB,GACN,MAANqN,IACHh4B,KAAK2qB,GAAM,KACX1P,OAAOV,aAAcyd,KAIvB+Y,gBAAA,WACC,IAAM/Y,EAAKh4B,KAAK2qB,GAChB,GAAU,MAANqN,EAAa,CAChBh4B,KAAK2qB,GAAM,KACX1P,OAAOV,aAAcyd,GAGrB,IAAMgZ,EAAUhxC,KAAKmwC,GACfmB,EAAcjH,KAAK6G,MAAQlxC,KAAK+vC,GAChCE,EAAWjwC,KAAKgwC,GAChBmB,EAAOnxC,KAAKoxC,OAAQJ,EAAU,EAAIf,GACxCjwC,KAAKqwC,OAAQc,EAAMH,EAASM,GAG5BtxC,KAAK2wC,MAAOK,QAjJqB1V,QAAMoU,4BCyBzC,WAAa9tC,GAAb,WACC5B,KAAKuxC,GAAa,GAClBvxC,KAAKwxC,GAAmB,GACxBxxC,KAAKyxC,GAAgB,EACrBzxC,KAAK0xC,IAAe,EACpB1xC,KAAK2xC,GAAM,EACX3xC,KAAK4xC,GAAM,EACX5xC,KAAK6xC,GAAM,EACX7xC,KAAK8xC,GAAM,EACX9xC,KAAK+xC,GAAa,IAAIhB,GAAe,CACpCV,OAAQ,SAAEhmC,GACTpD,EAAK+qC,OAAQ3nC,IAEdwmC,OAAQf,GAAkBmC,OAC1BhC,SAAU,MAEX,IAAMA,EAAWruC,GAAWA,EAAQquC,SAChCA,GACHjwC,KAAKkyC,GAA2C,MAArBjC,EAASt7B,SAAmBs7B,EAASt7B,SAAW,EAC3E3U,KAAKmyC,GAAqC,MAAlBlC,EAAS3zB,MAAgB2zB,EAAS3zB,MAAQ,IAElEtc,KAAKkyC,GAAoB,EACzBlyC,KAAKmyC,GAAiB,GAEvBnyC,KAAKoyC,GAAUxwC,EAAQ+O,GAAGmK,KAgI5B,OA7HCu3B,oBAAA,WAGC,IADA,IAAMC,EAAYtyC,KAAKuxC,GACdhwC,EAAI+wC,EAAU5xC,OAAQc,EAAO6wC,EAAeE,iBAAkBhxC,EAAIC,IAAQD,EAClF+wC,EAAU9xC,KAAM,IAAIqvC,GAAuB,EAAG,EAAG,EAAG,IAErD7vC,KAAKyxC,GAAgB,EACrBzxC,KAAK0xC,IAAe,EAGpB1xC,KAAK+xC,GAAWd,QAGjBoB,mBAAA,SAAQn5B,EAAYE,EAAYu2B,EAAYC,GAC3C,IAAM4C,EAAWH,EAAeE,iBAE1BE,EAAgBzyC,KAAK0xC,GACrBgB,GAAiBD,EAAgB,GAAKD,EAC5CxyC,KAAK0xC,GAAcgB,EAEnB,IAAMC,EAAkB3yC,KAAKyxC,IACzBiB,EAAgBD,GAAkB,GAAKA,GAAiBA,EAAgBE,KAC3E3yC,KAAKyxC,IAAiBkB,EAAkB,GAAKH,GAG9CxyC,KAAKuxC,GAAYmB,GAAgBpsC,IAAK4S,EAAIE,EAAIu2B,EAAIC,IAGzCyC,kCAAV,SAAiCzC,GAChC,IAAMgD,EAAW5yC,KAAKuxC,GAChBsB,EAAS7yC,KAAKwxC,GACdjM,EAAQvlC,KAAKyxC,GACb7nB,EAAM5pB,KAAK0xC,GACXhxC,EAASkyC,EAASlyC,OAExB,GAAIkpB,EAAM,EAET,OADAipB,EAAOnyC,OAAS,EACTkvC,EACD,GAAIhmB,EAAM2b,EAAQ,CACxB,IAAIuN,EAAQlD,EACZiD,EAAOnyC,OAAS,EAChB,IAAK,IAAIa,EAAIqoB,EAAK,GAAKroB,IAAKA,EAAI,CAC/B,IAAMwxC,EAAUH,EAAUrxC,GAC1B,KAAIuxC,EAAQC,EAAQnD,GATJ,KAaf,OAAOkD,EAHPA,GAASC,EAAQnD,GACjBiD,EAAOryC,KAAMuyC,GAMf,IAASxxC,EAAIb,EAAS,EAAG6kC,GAAShkC,IAAKA,EAAI,CAC1C,IAAMyxC,EAAUJ,EAAUrxC,GAC1B,KAAIuxC,EAAQE,EAAQpD,GAnBJ,KAuBf,OAAOkD,EAHPA,GAASE,EAAQpD,GACjBiD,EAAOryC,KAAMwyC,GAKf,OAAOF,EAIP,IAFIA,EAAQlD,EACZiD,EAAOnyC,OAAS,EACPa,EAAIqoB,EAAK2b,GAAShkC,IAAKA,EAAI,CACnC,IAAM0xC,EAAUL,EAAUrxC,GAC1B,KAAIuxC,EAAQG,EAAQrD,GAhCJ,KAoCf,OAAOkD,EAHPA,GAASG,EAAQrD,GACjBiD,EAAOryC,KAAMyyC,GAKf,OAAOH,GAITT,kBAAA,SAAOa,GACN,IAAMC,EAAMnzC,KAAKozC,sBAAuBF,GAClCL,EAAS7yC,KAAKwxC,GACd6B,EAAeR,EAAOnyC,OAC5B,GAAI,EAAI2yC,EAAe,CAKtB,IAJA,IAAIn6B,EAAK,EACLE,EAAK,EACLu2B,EAAK,EACLC,EAAK,EACAruC,EAAI,EAAGA,EAAI8xC,IAAgB9xC,EAAI,CACvC,IAAM+xC,EAAUT,EAAQtxC,GACxB2X,GAAMo6B,EAAQp6B,GACdE,GAAMk6B,EAAQl6B,GACdu2B,GAAM2D,EAAQ3D,GACdC,GAAM0D,EAAQ1D,GAEf,IAAMtlC,GAAK,EAAI4oC,EAAMC,GAAOE,EAC5Bn6B,GAAM5O,EACN8O,GAAM9O,EACNqlC,EAAK,GAAKA,EAAK0D,GAAgB/oC,EAC/BslC,GAAMtlC,EACNtK,KAAK2xC,GAAMz4B,EACXlZ,KAAK4xC,GAAMx4B,EACXpZ,KAAK6xC,GAAMlC,EACX3vC,KAAK8xC,GAAMlC,EAGX,IAAM2D,EAA8B,GAAzBvzC,KAAKkyC,GAAyBvoC,KAAK+zB,KAAMxkB,EAAKA,EAAKE,EAAKA,GAC7Do6B,EAA2B,IAAtBxzC,KAAKmyC,GAAyBxoC,KAAKwP,IAAKw2B,EAAK,GAClD8D,EAAYzzC,KAAK+xC,GACvB0B,EAAUxD,SAAWtmC,KAAKG,IAAKypC,EAAIC,GACnCC,EAAUrqB,UAIFipB,mBAAV,SAAkBlB,GACjB,IAAM7mC,EAAI,EAAI6mC,EACdnxC,KAAKoyC,GACJpyC,KAAK2xC,GAAMrnC,EACXtK,KAAK4xC,GAAMtnC,EACX,GAAMtK,KAAK6xC,GAAM,GAAMvnC,EACvB6mC,IAIFkB,iBAAA,WACCryC,KAAK+xC,GAAWd,QApKAoB,mBAAmB,QNhBrC,SAAY/E,GACXA,mBACAA,mBACAA,qBACAA,iBAEAA,iBACAA,gBAEAA,4BATD,CAAYA,KAAAA,QOKZ,ICLYoG,iBDKZ,cAeA,OAdQC,OAAP,SAAa/9B,GACZ,IAAMg+B,EAAO,SAAUh+B,EAAIA,EAAEhO,KAAKoT,cAAgBpF,EAClD,OAASg+B,EAAG79B,QAAUu3B,GAAeuG,KAAOvG,GAAejvB,OACxDu1B,EAAGl8B,OAAS41B,GAAewG,IAAMxG,GAAejvB,OAChDu1B,EAAG59B,SAAWs3B,GAAeyG,MAAQzG,GAAejvB,OAGjDs1B,QAAP,SAAc/9B,EAAwBq0B,GACrC,OAAIA,EAAWqD,GAAe0G,MAClBL,EAAgBxhC,KAAMyD,GAAMq0B,GAEhC0J,EAAgBxhC,KAAMyD,KAAQq0B,QEuBlCgK,GAAkB,SACvBryC,EACAwa,GAEA,GAAe,MAAXxa,IAA+B,IAAZA,EACtB,MAAO,CACN+O,GAAI,CACHmK,KAAMsB,IAIR,IAAM6zB,EAAWruC,EAAQquC,SACzB,OAAInsC,EAAcmsC,GACV,CACNA,SAAU,CACTt7B,SAAUs7B,EACV3zB,MAAO2zB,GAERt/B,GAAI,CACHmK,KAAMsB,IAID,CACN6zB,WACAt/B,GAAI,CACHmK,KAAMsB,KAOL83B,GAAY,SAAEtyC,GACnB,IAAMuyC,EAAUvyC,GAAWA,EAAQuyC,QAC7BC,EAAiBT,GAAgBU,MACvC,OAAIF,EACI,CACN/qB,MAAO+qB,EAAQ/qB,OAASgrB,EACxBt5B,KAAMq5B,EAAQr5B,MAAQs5B,GAGjB,CACNhrB,MAAOgrB,EACPt5B,KAAMs5B,kBAyBP,WAAaxyC,GAAb,WACOd,EAASd,KAAKsoB,GAAU1mB,EAAQd,OAChC6P,EAAK/O,EAAQ+O,GACfA,IACH3Q,KAAKwwC,GAAW7/B,EAAGyY,MACnBppB,KAAKoyC,GAAUzhC,EAAGmK,KAClB9a,KAAK0wC,GAAS//B,EAAGiZ,KAElB5pB,KAAKs0C,GAAa1yC,GAAWA,EAAQqoC,UAAaqD,GAAejvB,KACjEre,KAAKu0C,GAAWL,GAAWtyC,GAC3B5B,KAAKw0C,GAAsB,KAC3Bx0C,KAAKy0C,GAAU,IAAI7sB,QACnB5nB,KAAKqc,GAAS,EACdrc,KAAK00C,GAAiB,IAAI9sB,QAC1B5nB,KAAK20C,GAAQ,EAEb,IAAMC,EAAShzC,EAAQgzC,OACT,MAAVA,IAA6B,IAAXA,IAIrB50C,KAAK60C,GAAU,IAAIxC,GAAgB4B,GAAiBW,GAH1B,SAAE17B,EAAYE,EAAYu2B,EAAYwB,GAC/DlqC,EAAK6tC,aAAc57B,EAAIE,EAAIu2B,EAAIwB,QAKjCnxC,KAAK+0C,GAAe,SAAEn/B,GACrB3O,EAAKyY,OAAQ9J,IAGd5V,KAAKg1C,GAAe,SAAEp/B,GACrB3O,EAAKmV,OAAQxG,IAGd5V,KAAKi1C,GAAc,SAAEr/B,GACpB3O,EAAK0pC,MAAO/6B,IAGThU,EAAQsW,OACXlY,KAAKk1C,GAAQ,aACbl1C,KAAKm1C,GAAQ,YACbn1C,KAAKo1C,GAAM,aAEXp1C,KAAKk1C,GAAQp9B,EAAiB0B,KAC9BxZ,KAAKm1C,GAAQr9B,EAAiBgD,KAC9B9a,KAAKo1C,GAAMt9B,EAAiBiB,KAGR,IAAjBnX,EAAQkP,MACXhQ,EAAO6P,GAAI3Q,KAAKk1C,GAAOl1C,KAAK+0C,IA4L/B,OAxLWM,+BAAV,SACCz/B,EAAqB0/B,EACrBv9B,GAEA,IAAM67B,EAAKh+B,EAAEhO,KAAKoT,cACZ/B,EAASrD,EAAEhO,KAAKqR,OACtB,GAAI,YAAa26B,EAAK,CACrB,IAAM57B,EAAU47B,EAAG57B,QACbu9B,EAAgBv9B,EAAQtX,OAC9B,GAAI,EAAI60C,EAAgB,CAKvB,IAHA,IAAMC,EAAQx9B,EAAS,GACnBy9B,EAAUD,EAAMp9B,QAChBs9B,EAAUF,EAAMn9B,QACX9W,EAAI,EAAGC,EAAOwW,EAAQtX,OAAQa,EAAIC,IAAQD,EAElDk0C,IADMv9B,EAAQF,EAASzW,IACN6W,QACjBs9B,GAAWx9B,EAAMG,QAMlB,GAJAo9B,GAAWF,EACXG,GAAWH,EACXx9B,EAAmBI,mBAAoBm9B,EAAQG,EAASC,GAEpD,EAAIH,EAAgB,CAEvB,IAAII,EAAiB,EACrB,IAASp0C,EAAI,EAAGC,EAAOwW,EAAQtX,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAM2W,EACAgB,GADAhB,EAAQF,EAASzW,IACN6W,QAAUq9B,EACrBr8B,EAAKlB,EAAMG,QAAUq9B,EAC3BC,EAAiBhsC,KAAKG,IAAK6rC,EAAgBz8B,EAAKA,EAAKE,EAAKA,GAE3D,OAAOzP,KAAK+zB,KAAMiY,GAElB,OAAO,GAKV,OADAL,EAAO/uC,SAAU0S,GACV,GAGRo8B,mBAAA,SAAQz/B,GACP,IAAM9U,EAASd,KAAKsoB,GACpB,GAAItoB,KAAKu0C,GAASnrB,MAAOxT,EAAG5V,KAAKs0C,GAAWxzC,GAAW,CACtD,IAAMI,EAAQb,EAAcsZ,SAAU7Y,GACtC,GAAII,EAGH,GAFA0U,EAAEy4B,kBAEEvtC,EAAO+hB,cAEV,GADM9K,EAAqB/X,KAAKw0C,GACP,CACxB,IAAMc,EAASt1C,KAAKy0C,GACpBz0C,KAAKqc,GAASrc,KAAK41C,mBAAoBhgC,EAAG0/B,EAAQv9B,QAE7C,CACNjX,EAAO+0C,aAAa,GAGpB,IAAM99B,EAAqB7W,EAAMuK,SAASmO,QAAQC,YAClD7Z,KAAKw0C,GAAsBz8B,EAGrBu9B,EAASt1C,KAAKy0C,GACpBz0C,KAAKqc,GAASrc,KAAK41C,mBAAoBhgC,EAAG0/B,EAAQv9B,GAGlD/X,KAAK20C,GAAQ/+B,EAAEhO,KAAKoT,cAAcQ,UAGlC,IAAMo5B,EAAS50C,KAAK60C,GAChBD,GACHA,EAAOnE,UAIR,IAAMA,EAAUzwC,KAAKwwC,GACN,MAAXC,GACHA,IAID14B,EAAmBpH,GAAI3Q,KAAKm1C,GAAOn1C,KAAKg1C,IACxCj9B,EAAmBpH,GAAI3Q,KAAKo1C,GAAKp1C,KAAKi1C,OAMhCI,mBAAV,SAAkBz/B,GACjB,IAAM9U,EAASd,KAAKsoB,GACpB,GAAIxnB,EAAO+hB,cAAgB7iB,KAAKu0C,GAASz5B,KAAMlF,EAAG5V,KAAKs0C,GAAWxzC,GAAW,CAC5E,IAAMiX,EAAqB/X,KAAKw0C,GAChC,GAAIz8B,EAAqB,CAExB,IAAMu9B,EAASt1C,KAAKy0C,GACdgB,EAAUH,EAAOlvC,EACjBsvC,EAAUJ,EAAOjvC,EACjBsnB,EAAW3tB,KAAK41C,mBAAoBhgC,EAAG0/B,EAAQv9B,GAC/C+9B,EAAW91C,KAAKqc,GACtBrc,KAAKqc,GAASsR,EACd,IAAMooB,EAAU/1C,KAAK20C,GACfqB,EAAUpgC,EAAEhO,KAAKoT,cAAcQ,UACrCxb,KAAK20C,GAAQqB,EAGb,IAAM98B,EAAKo8B,EAAOlvC,EAAIqvC,EAChBr8B,EAAKk8B,EAAOjvC,EAAIqvC,EAChB9F,EAAKoG,EAAUD,EACfpG,EAAO0F,EAASY,QAAUH,EAAWnoB,EAAWmoB,EAAW,EAG3DlB,EAAS50C,KAAK60C,GAChBD,GACHA,EAAOx4B,OAAQlD,EAAIE,EAAIu2B,EAAIC,GAI5B,IAAMxzB,EAASpc,KAAKoyC,GACN,MAAVh2B,IACQ,IAAPlD,GAAmB,IAAPE,GAAmB,IAAPu2B,GAC3BvzB,EAAQlD,EAAIE,EAAIk8B,EAAOlvC,EAAGkvC,EAAOjvC,EAAGspC,OAO/B0F,kBAAV,SAAiBz/B,GAChB,IAAM9U,EAASd,KAAKsoB,GACpB,GAAIxnB,EAAO+hB,aAAe,CACzB,IAAM9K,EAAqB/X,KAAKw0C,GAChC,GAAIz8B,EAAqB,CAExB,IAAMu9B,EAASt1C,KAAKy0C,GACpBz0C,KAAK00C,GAAenuC,SAAU+uC,GAC9Bt1C,KAAKqc,GAASrc,KAAK41C,mBAAoBhgC,EAAG0/B,EAAQv9B,GAGlD,IAAM67B,EAAKh+B,EAAEhO,KAAKoT,cAClB,KAAI,YAAa44B,IAAKA,EAAG57B,QAAQtX,QAAU,EAAW,CACrDI,EAAO+0C,aAAa,GAGpB71C,KAAKw0C,GAAsB,KAC3Bz8B,EAAmBa,IAAK5Y,KAAKm1C,GAAOn1C,KAAKg1C,IACzCj9B,EAAmBa,IAAK5Y,KAAKo1C,GAAKp1C,KAAKi1C,IAGvC,IAAMtE,EAAQ3wC,KAAK0wC,GACN,MAATC,GACHA,IAID,IAAMiE,EAAS50C,KAAK60C,GAChBD,GACHA,EAAOjE,MAAO/6B,EAAEhO,KAAKoT,cAAcQ,UAAYxb,KAAK20C,QAO/CU,yBAAV,SAAwBn8B,EAAYE,EAAYu2B,EAAYwB,GAC3D,IAAM/0B,EAASpc,KAAKoyC,GACpB,GAAc,MAAVh2B,IACQ,IAAPlD,GAAmB,IAAPE,GAAmB,IAAPu2B,GAAW,CACtC,IAAMuG,EAAgBl2C,KAAK00C,GAC3BwB,EAAc5vC,IACb4vC,EAAc9vC,EAAI8S,EAClBg9B,EAAc7vC,EAAI+S,GAEnBgD,EAAQlD,EAAIE,EAAI88B,EAAc9vC,EAAG8vC,EAAc7vC,EAAGspC,KAKrD0F,iBAAA,WACC,IAAMT,EAAS50C,KAAK60C,GAChBD,GACHA,EAAO3D,QA5PQoE,UAAU,wBCpF5B,cA+EA,OA9EQc,YAAP,SACCr1C,EAAes3B,EACf7a,EAAiB64B,GAEjB,IAAM5zC,EAAS6zC,gBAAcl2C,OAAO,CACnC+C,MAAOpC,EAAOoC,MACdyD,OAAQ7F,EAAO6F,OACf41B,UAAWC,cAAYyV,OACvB7Z,eAEKke,EAAS,IAAIC,cAClBh0C,OAAWA,OAAWA,OAAWA,GAChCzB,EAAO6T,SAASvO,GAAItF,EAAO6T,SAAStO,GAEhCnF,EAAQb,EAAcsZ,SAAU7Y,GAItC,OAHII,GACHA,EAAMuK,SAAShK,OAAQX,EAAQ0B,EAAQ+a,EAAO+4B,EAAQF,GAEhD5zC,GAGD2zC,WAAP,SAAiBK,EAA8B/qC,GAC9C,IAAM2sB,EAAaoe,EAAcpe,WAC3BC,EAAQme,EAAcne,MACtBn1B,EAAQyG,KAAK6/B,MAAOnR,EAAMn1B,MAAQk1B,GAClCzxB,EAASgD,KAAK6/B,MAAOnR,EAAM1xB,OAASyxB,GACpCqe,EAAS,IAAIC,WAAY,EAAIxzC,EAAQyD,GAE3C8E,EAAS+qC,cAAc1lC,KAAM0lC,GAC7B,IAAM7W,EAAMl0B,EAAiBk0B,GAW7B,OAVAA,EAAGgX,WACFte,EAAMjyB,EAAIgyB,EACVC,EAAMhyB,EAAI+xB,EACVl1B,EACAyD,EACAg5B,EAAGoC,KACHpC,EAAGqC,cACHyU,GAGM,CACNvzC,QACAyD,SACA0B,MAAOouC,IAIFN,WAAP,SAAiBM,EAA6Bn6B,EAAgBs6B,GAC7D,IAAM1zC,EAAQuzC,EAAOvzC,MACfyD,EAAS8vC,EAAO9vC,OAChB0B,EAAQouC,EAAOpuC,MACfwuC,EAAqB,IAAIvb,QAAMwb,mBAAoB5zC,EAAOyD,EAAQ,GAElEowC,EAAYF,EAAmBxgB,QAAQ2gB,aAAc,EAAG,EAAG9zC,EAAOyD,GASxE,GARIiwC,EACHG,EAAUnvC,KAAKtB,IAAK+B,GAEnB4uC,UAAQC,QAAgBC,gBAAiB9uC,EAAO0uC,EAAUnvC,MAE5DivC,EAAmBxgB,QAAQ+gB,aAAcL,EAAW,EAAG,GAG1C,MAATz6B,GAA2B,IAAVA,EAAc,CAClCu6B,EAAmBxgB,QAAQ/Z,MAAOA,EAAOA,GACzCu6B,EAAmBxgB,QAAQuC,UAAWie,EAAmBne,OAAQ,EAAG,GACpE,IAAM2e,EAAc1tC,KAAK6/B,MAAOtmC,EAAQoZ,GAClCg7B,EAAe3tC,KAAK6/B,MAAO7iC,EAAS2V,GACpCi7B,EAAkBV,EAAmBxgB,QAAQ2gB,aAAc,EAAG,EAAGK,EAAaC,GACpFT,EAAmB7xB,OAAQqyB,EAAaC,GACxCT,EAAmBxgB,QAAQ+gB,aAAcG,EAAiB,EAAG,GAG9D,OAAOV,EAAmBne,QAGpByd,WAAP,SAAiBzd,EAA2ByP,EAAiBqP,GAC5D,OAAO9e,EAAO+e,UAAWtP,EAAQqP,uBClFnC,cA8BA,OA7BQE,cAAP,SAAoBC,EAAkBxK,GACrC,IAAM1jB,EAAIlS,SAAS+hB,cAAe,KAC9B,aAAc7P,GACjBA,EAAEmuB,KAAOzK,EACT1jB,EAAEqlB,aAAc,WAAY6I,GAC5BluB,EAAEuD,MAAM6qB,QAAU,OAClBtgC,SAASC,KAAKw3B,YAAavlB,GAC3BA,EAAEquB,QACF58B,YAAW,WACV3D,SAASC,KAAKid,YAAahL,KACzB,KAEGxO,OAAO88B,KAAM5K,KAClB6K,SAASJ,KAAOzK,IAKZuK,WAAP,SAAiBC,EAAkBM,GAClC,IAAMC,EAAO,IAAIC,KAChB,CAAEF,GACF,CAAEzlC,KAAM,eAELyI,OAAOuzB,UAAU4J,WACpBn9B,OAAOuzB,UAAU4J,WAAYF,EAAMP,GAEnC33C,KAAKq4C,YAAaV,EAAUW,IAAIC,gBAAiBL,wBCqEpD,cA2BA,OA1BQM,UAAP,SAAgB52C,GACf,IAAMd,EAASc,EAAQd,OACjBs3B,EAhDa,SAAEx2B,GACtB,IAAMd,EAASc,EAAQd,OACvB,OAA0B,MAAtBc,EAAQw2B,WACPt0B,EAAclC,EAAQw2B,YAClBx2B,EAAQw2B,WAERzuB,KAAKC,IAAK,EAAGhI,EAAQw2B,WAAWpjB,KAAOrL,KAAKG,IAAKhJ,EAAOoC,MAAOpC,EAAO6F,SAGvEsU,OAAO8xB,kBAAoB,EAuCf0L,CAAc72C,GAC3Bw0C,EArDsB,SAAEx0C,GAC/B,OAAOA,EAAQqa,WAAara,EAAQqa,UAAU3a,OAoDjBo3C,CAAuB92C,GACnD,OAAOu0C,GAAcwC,UAAW73C,EAAQs3B,EAAYx2B,EAAQ2b,MAAO64B,IAG7DoC,SAAP,SAAe52C,GACd,IAAM6J,EA1BW,SAAE7J,GACpB,GAAIA,EAAQ6J,SACX,OAAO7J,EAAQ6J,SACT,GAAI7J,EAAQT,YAClB,OAAOS,EAAQT,YAAYC,eAAeqK,SACpC,GAAI7J,EAAQV,MAClB,OAAOU,EAAQV,MAAMuK,SAErB,IAAMvK,EAAQb,EAAcsZ,SAAU/X,EAAQd,QAC9C,GAAII,EACH,OAAOA,EAAMuK,SAEb,MAAM,IAAI9K,MAAO,4CAcDi4C,CAAYh3C,GAC7B,OAAOu0C,GAAc0C,SAAU74C,KAAK0G,QAAS9E,GAAW6J,IAGlD+sC,SAAP,SAAe52C,GACd,IAAM60C,EAASz2C,KAAKy2C,OAAQ70C,GACtBg1C,EA/C2B,SAAEh1C,GACpC,OAASA,EAAQQ,OAASR,EAAQQ,MAAM02C,eAAiBl3C,EAAQQ,MAAM02C,cAAcC,OA8CpDC,CAA4Bp3C,GACtD0a,EA5CQ,SAAEm6B,EAA6B70C,GAC9C,GAAqB,MAAjBA,EAAQ0a,MAAgB,CAC3B,GAAIxY,EAAclC,EAAQ0a,OACzB,OAAO1a,EAAQ0a,MAEf,IAAMtH,EAAOpT,EAAQ0a,MAAMtH,KAC3B,OAAOrL,KAAKC,IAAK,EAAGoL,EAAOyhC,EAAOvzC,MAAO8R,EAAOyhC,EAAO9vC,SAsC1CsyC,CAASxC,EAAQ70C,GAC/B,OAAOu0C,GAAc+C,SAAUzC,EAAQn6B,EAAOs6B,IAGxC4B,SAAP,SAAe52C,GACd,OAAOu0C,GAAcgD,SAAUn5C,KAAK04B,OAAQ92B,GAAWA,EAAQumC,OAAQvmC,EAAQ41C,UAGzEgB,OAAP,SAAa52C,GACZ81C,GAAmBW,YAAaz2C,EAAQ+1C,SAAU33C,KAAKo5C,OAAQx3C,WJzHjE,SAAY8xC,GACXA,mBACAA,2BACAA,qCACAA,mCAJD,CAAYA,KAAAA,QAWZ,IKIY2F,GAKAC,iBLJX,WAAaC,EAAgBC,GAC5Bx5C,KAAKy5C,GAAS,KACdz5C,KAAK05C,GAAMH,EACXv5C,KAAK25C,GAAUH,EA8EjB,OA3ECI,iBAAA,WACC,IAAMC,EAAQ75C,KAAK85C,mBACN,MAATD,EACHA,EAAM/B,QAEN93C,KAAK+5C,YAIGH,6BAAV,WAAA,WACC,GAAI,eAAgB3+B,QAAyB,MAAfjb,KAAKy5C,GAAiB,CACnD,IAAMO,EAAQh6C,KAAKy5C,GAASliC,SAAS+hB,cAAe,SACpD0gB,EAAMlL,aAAc,OAAQ,QAC5BkL,EAAMlL,aAAc,QAAS,gBAC7BkL,EAAMviC,iBAAkB,UAAU,SAAE7B,GACnC3O,EAAKgzC,cAAeD,GACpBA,EAAMvrB,MAAQ,GACd7Y,EAAEskC,2BACFtkC,EAAEiC,oBAEHN,SAASC,KAAKw3B,YAAagL,GAE5B,OAAOh6C,KAAKy5C,IAGHG,0BAAV,SAAyBC,GAAzB,WACOM,EAAQN,EAAMM,MACpB,GAAa,MAATA,GAAiB,EAAIA,EAAMz5C,OAAS,CACvC,IAAM05C,EAAOD,EAAO,GACdE,EAAa,IAAIC,WAUvB,OATAD,EAAW1O,OAAS,SAAE/1B,GACrB,GAAgB,MAAZA,EAAE9U,OAAiB,CACtB,IAAMA,EAAS8U,EAAE9U,OACjBmG,EAAKszC,OAAQz5C,EAAO0B,UAGtB63C,EAAWG,QAAU,SAAE5kC,GACtB3O,EAAKwzC,SAAU7kC,IAER5V,KAAK05C,IACb,KAAKhG,GAAW9e,KACfylB,EAAWK,WAAYN,GACvB,MACD,KAAK1G,GAAWiH,SACfN,EAAWO,cAAeR,GAC1B,MACD,KAAK1G,GAAWmH,cACfR,EAAWS,mBAAoBV,GAC/B,MACD,KAAK1G,GAAWqH,aACfV,EAAWW,kBAAmBZ,GAC9B,MACD,QACCC,EAAWK,WAAYN,SAIxBp6C,KAAK+5C,YAIGH,mBAAV,SAAkBp3C,GACjB,IAAMg3C,EAASx5C,KAAK25C,GACpBH,EAAO5hC,KAAM,OAAQpV,EAAQg3C,IAGpBI,qBAAV,SAAoBhkC,GACnB,IAAM4jC,EAASx5C,KAAK25C,GACpBH,EAAO5hC,KAAM,QAAShC,EAAG4jC,IAGhBI,qBAAV,WACC,IAAMJ,EAASx5C,KAAK25C,GACpBH,EAAO5hC,KAAM,SAAU4hC,uBM/FzB,cAoEA,OAnEQyB,UAAP,SAAgB/4C,GACf,IAAMkI,GAAa,SAARlI,IAAqB,GAC1Bg5C,GAAa,MAARh5C,IAAqB,EAC1B3C,EAAa,IAAR2C,EAAoB,EAEzB4H,EAAMH,KAAKG,IAAKM,EAAG8wC,EAAG37C,GAEtBmB,EAASoJ,EADHH,KAAKC,IAAKQ,EAAG8wC,EAAG37C,GAExBgL,EAAI,EAgBR,OAfI,EAAI7J,IACH0J,IAAMN,EACTS,EAAI,IAAO2wC,EAAI37C,GAAMmB,EACXw6C,IAAMpxC,EAChBS,EAAI,IAAOhL,EAAI6K,GAAM1J,EAAS,IACpBnB,IAAMuK,IAChBS,EAAI,IAAOH,EAAI8wC,GAAMx6C,EAAS,KAE3B6J,EAAI,IACPA,GAAK,MAMA,CAAEA,EAFG7J,EAASoJ,EAAQ,IACnBA,IAIJmxC,QAAP,SAAc1wC,EAAWkH,EAAW0pC,GACnC,IACMvxC,EAAMuxC,EAAK1pC,EAAI,IAAO0pC,EACtBz6C,EAFMy6C,EAESvxC,EAEjBQ,EAAI,EACJ8wC,EAAI,EACJ37C,EAAI,EA+BR,OA9BIgL,GAAK,IACRH,EARW+wC,EASXD,EAAK3wC,EAAI,GAAM7J,EAASkJ,EACxBrK,EAAIqK,GACMW,GAAK,KACfH,GAAM,IAAMG,GAAK,GAAM7J,EAASkJ,EAChCsxC,EAbWC,EAcX57C,EAAIqK,GACMW,GAAK,KACfH,EAAIR,EACJsxC,EAjBWC,EAkBX57C,GAAMgL,EAAI,KAAO,GAAM7J,EAASkJ,GACtBW,GAAK,KACfH,EAAIR,EACJsxC,GAAM,IAAM3wC,GAAK,GAAM7J,EAASkJ,EAChCrK,EAtBW47C,GAuBD5wC,GAAK,KACfH,GAAMG,EAAI,KAAO,GAAM7J,EAASkJ,EAChCsxC,EAAItxC,EACJrK,EA1BW47C,IA4BX/wC,EA5BW+wC,EA6BXD,EAAItxC,EACJrK,GAAM,IAAMgL,GAAK,GAAM7J,EAASkJ,IAGjCQ,EAAIT,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAKQ,MAInB,IAHb8wC,EAAIvxC,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAKsxC,MAGP,EAFrBvxC,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAKrK,UChErB67C,GAAc,SAAK/yC,EAAYomB,GAI3C,IAHA,IAAI4sB,EAAK,EACLC,EAAKjzC,EAAM3H,OAAS,EAEjB26C,GAAMC,GAAK,CACjB,IAAMC,EAAKF,GAAOC,EAAKD,GAAO,GACxBjyC,EAAKf,EAAOkzC,GAClB,GAAI9sB,EAAQrlB,EACXkyC,EAAKC,EAAK,MACJ,CAAA,KAAInyC,EAAKqlB,GAGf,OAAO8sB,EAFPF,EAAKE,EAAK,GAMZ,OAAQ,GChBIC,GAAc77C,MAAM87C,kBAAc36C,GAC9C,MAAoD,mBAA7CtB,OAAOU,UAAU4C,SAASC,KAAMjC,ICD3B46C,GAAY,SAAE56C,GAC1B,OAAOA,GAAWA,iBCDnB,cAYA,OATQ66C,SAAP,SAAenpC,GACd,IAAMopC,EAAU57C,KAAK67C,GACrB,OAAIrpC,KAAQopC,EACDppC,SAAUopC,EAASppC,IAE7BopC,EAASppC,GAAS,EACRA,SARKmpC,KAAuC,sBCExD,WAAa/5C,GACZ5B,KAAK87C,GAAS,KACd97C,KAAK+7C,GAA4B,MAAXn6C,GAAqC,MAAlBA,EAAQZ,OAChDX,EAAc27C,OAAS,KAwB1B,OApBCx8C,sBAAIy8C,0BAAJ,WACC,OAAOj8C,KAAK87C,oCAGbG,iBAAA,SAAMn7C,GACL,IAAII,EAAQlB,KAAK87C,GACjB,GAAa,MAAT56C,EAAgB,CAEnB,KADAA,EAAQb,EAAcgB,gBAAiBP,IACzB,CACb,IAAMK,EAAcnB,KAAK+7C,GAExB76C,EADGC,EACKA,EAAYE,kBAEZhB,EAAc27C,OAAO36C,kBAG/BrB,KAAK87C,GAAS56C,EAEf,OAAOA,sBC5BT,cAEA,OADQg7C,WAAW,gCCCnB,cA6CA,OA5CQC,SAAP,SAAej6C,GACd,OAAO6lC,GAAS7lC,EAAMY,SAAU,IAAK8T,cAAe,EAAG,MAGjDulC,WAAP,SAAiBtlC,GAChB,IAAMulC,EAAUvlC,EAAKP,OAAOE,cAC5B,GAAuB,IAAnB4lC,EAAQ17C,OAAe,CAC1B,IAAMwB,EAAQm6C,OAAQ,KAAKD,GAC3B,GAAIl6C,GAAUA,EACb,OAAOA,EAGT,OAAO,MAGDi6C,UAAP,SAAgB/xC,EAAW8wC,EAAW37C,GACrC,OAAa,IAAJ6K,GAAa,KAAY,IAAJ8wC,GAAa,IAAW,IAAJ37C,EAAY,IAGxD48C,QAAP,SAAcG,EAAgBC,EAAgBlyC,GAC7C,IAAMmyC,EAAOF,GAAU,GAAM,IACvBG,EAAOH,GAAU,EAAK,IACtBI,EAAqB,KAAL,EAATJ,GAEP7vC,EAAO8vC,GAAU,GAAM,IACvBI,EAAOJ,GAAU,EAAK,IACtBlwC,EAAqB,KAAL,EAATkwC,GAEPK,EAAKjzC,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGS,IAC/BwyC,EAAK,EAAID,EAKf,OAJWjzC,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAM4yC,EAAKK,EAAKpwC,EAAKmwC,KAIzC,KAHHjzC,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAM6yC,EAAKI,EAAKF,EAAKC,KAG5B,IAAW,EAF3BjzC,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAM8yC,EAAKG,EAAKxwC,EAAKuwC,MAKjDT,WAAP,SAAiBj6C,EAAe46C,GAC/B,OAAO98C,KAAK+8C,MAAO76C,EAAO,SAAU46C,IAG9BX,SAAP,SAAej6C,EAAe46C,GAC7B,OAAO98C,KAAK+8C,MAAO76C,EAAO,EAAU46C,uBC7CtC,cAOA,OANQE,SAAP,SAAe96C,EAAeE,GAI7B,MAAO,SAHKF,GAAS,GAAO,UAChBA,GAAS,EAAM,UACP,IAARA,OACkBE,0BCS/B,aACCpC,KAAKi9C,GAAmB,IAAI5e,IAC5Br+B,KAAKk9C,GAAuB,4BAC5Bl9C,KAAKm9C,GAAe,IAAI9e,IACxBr+B,KAAKo9C,GAAmB,SAAEl6C,GACzB,MAAO,2CAA2CA,OAEnDlD,KAAKq9C,GAAY,WAChBh9C,EAAciB,UAyFjB,OArFWg8C,uBAAV,SAAsB74C,EAAgBuQ,EAAcuoC,GACnD,OAAS,EAAIA,EAAK,IAAIA,MAAMA,aAAY94C,EAAS84C,OAAM94C,EAAW,IAGzD64C,uBAAV,SAAsB74C,EAAgBuQ,EAAcvI,GACnD,OAAS,EAAIA,EAAK,IAAIA,MAAMA,aAAYhI,EAASuQ,EAAOvI,QAAMhI,EAASuQ,GAAS,IAGvEsoC,iBAAV,SAAgBr5C,EAAgBQ,EAAgB+4C,GAC/C,IAAMC,EAAa9zC,KAAKG,IAAK,EAAG7F,EAASQ,GACnCuQ,EAA4B,EAAbyoC,EAAiB,EAChCC,EAAmB1oC,EAAgB,EAATvQ,EAC1BnF,EACL,KAAImF,EAASg5C,OAAch5C,EAC3B,KAAIA,EAASuQ,OAAQvQ,EACrB,KAAIA,EAASuQ,QAAQvQ,EAASuQ,EAAOyoC,GACrCz9C,KAAK29C,WAAYl5C,EAAQuQ,EAAMyoC,GAC/B,IAAIh5C,OAAUA,EAASuQ,GACvB,IAAIvQ,OAAUA,EAASg5C,GACvBz9C,KAAK49C,WAAYn5C,EAAQuQ,EAAMyoC,GAC/B,IACD,OAAOz9C,KAAK69C,MAAOH,EAAUF,EAAMl+C,IAG1Bg+C,kBAAV,SAAiBI,EAAkBF,EAAcl+C,GAChD,IAAM84B,EAAcnd,OAAO8xB,kBAAoB,EAIzClC,EAAM,eAHgB6S,EAAWtlB,eACTslB,EAAWtlB,oBACLslB,MAAYA,gDAEtCF,SAAWl+C,oBAErB,OAAO+sB,UAAQla,KAAM05B,GAAchB,GAAO,CACzCzS,gBAIFklB,0BAAA,SAAer5C,GACd,IAAMzB,EAASxC,KAAK89C,KAAM75C,EAAQ,EAAGjE,KAAKk9C,IAE1C,OADA16C,EAAOmO,GAAI,SAAU3Q,KAAKq9C,IACnB76C,GAGR86C,sBAAA,SAAWr5C,EAAgBf,GAC1B,IAAMV,EAASxC,KAAK89C,KAAM75C,EAAQ,GAAMf,EAAOlD,KAAKo9C,GAAkBl6C,IAEtE,OADAV,EAAOmO,GAAI,SAAU3Q,KAAKq9C,IACnB76C,GAGR86C,0BAAA,SAAer5C,GACd,IAAM85C,EAAQ/9C,KAAKi9C,GAEfv2C,EAAUq3C,EAAMjiC,IAAK7X,GAMzB,OALe,MAAXyC,IACHA,EAAU1G,KAAKg+C,cAAe/5C,GAC9B85C,EAAMz3C,IAAKrC,EAAQyC,IAGbA,GAGR42C,sBAAA,SAAWr5C,EAAgBf,GAC1B,IAAM66C,EAAQ/9C,KAAKm9C,GAEfc,EAAgBF,EAAMjiC,IAAK7X,GACV,MAAjBg6C,IACHA,EAAgB,IAAI5f,IACpB0f,EAAMz3C,IAAKrC,EAAQg6C,IAGpB,IAAIv3C,EAAUu3C,EAAcniC,IAAK5Y,GAMjC,OALe,MAAXwD,IACHA,EAAU1G,KAAKk+C,UAAWj6C,EAAQf,GAClC+6C,EAAc33C,IAAKpD,EAAOwD,IAGpBA,GAGD42C,cAAP,WAIC,OAHiC,MAA7BA,EAAiB9nC,WACpB8nC,EAAiB9nC,SAAW,IAAI8nC,GAE1BA,EAAiB9nC,UAvGR8nC,WAAoC,wBCJtD,cAWA,OAVQa,YAAP,SAAkBhR,EAAa/U,EAAoBgmB,GAClD,IAAM13C,EAAU2lB,UAAQla,KAAMg7B,EAAK,CAClC/U,eAEK1xB,EAAQwxB,YAAY3uB,MAGzB60C,EAAQ13C,GAFRA,EAAQoT,KAAM,SAAUskC,SCRdC,GAAe,SAAE5vB,GAC7B,OAAkB,MAATA,EAAgB4X,OAAQ5X,GAAU,kBCW3C,WAAa7sB,GACZ5B,KAAKgwC,GAAyB,MAAXpuC,GAAuC,MAApBA,EAAQquC,SAAmBruC,EAAQquC,SAAW,IACpFjwC,KAAKs+C,GAAW,KAChBt+C,KAAKu+C,GAAc,EACnBv+C,KAAKw+C,GAAY,KA4CnB,OAzCCC,iBAAA,SAAMj1B,EAA8BiR,GAApC,WACOikB,EAAW1+C,KAAKw+C,GACN,MAAZE,GACHnkC,aAAcmkC,GAGf,IAAMnrC,EAAUvT,KAAKs+C,GACrB,GAAI90B,IAASjW,EAAU,CACtB,IAAM08B,EAAWjwC,KAAKgwC,GAChB2O,EAAa3+C,KAAKu+C,GAClBrN,EAAM7G,KAAK6G,MACX0N,EAAaD,EAAa1O,EAAYiB,GAC3B,IAAbzW,GAAqBmkB,GAAa,EACrC5+C,KAAKsB,OAAQ4vC,EAAK1nB,GAElBxpB,KAAKw+C,GAAYvjC,OAAOC,YAAW,WAClCjU,EAAK3F,OAAQ+oC,KAAK6G,MAAO1nB,KACvBo1B,KAKIH,mBAAV,SAAkBvN,EAAa1nB,GAC9B,IAAMjW,EAAUvT,KAAKs+C,GACjB/qC,IAAYiW,IACfxpB,KAAKu+C,GAAcrN,EAEH,OAAZ39B,GACHA,EAAQsrC,OAGT7+C,KAAKs+C,GAAW90B,EACJ,MAARA,GACHA,EAAKs1B,SAKRL,iBAAA,WACCz+C,KAAK8+C,KAAM,0BC7BZ,aALQ9+C,QAAyB,KACzBA,QAAqB,EACrBA,QAA6B,KAC7BA,QAA6B,KAGpCA,KAAK++C,GAAW,YAAaxnC,UAAY,GAAMA,SAAiBynC,aAC/D,CAAE,SAAY,CAAE,aAAc,iBAAkB,uBAqInD,OAjICC,eAAA,SAAIn+C,EAAqBuW,EAA4C6nC,gBAAAA,MAEpE,IADA,IAAMC,EAAQn/C,KAAK++C,GACVx9C,EAAI49C,EAAMz+C,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC5C,IAAMqd,EAAOugC,EAAO59C,GACpBT,EAAO2W,iBAAkBmH,EAAMvH,EAAS6nC,KAI1CD,gBAAA,SAAKn+C,EAAqBuW,EAA4C6nC,gBAAAA,MAErE,IADA,IAAMC,EAAQn/C,KAAK++C,GACVx9C,EAAI49C,EAAMz+C,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC5C,IAAM69C,EAAOD,EAAO59C,GACpBT,EAAOmjC,oBAAqBmb,EAAM/nC,EAAS6nC,KAI7CD,0BAAA,WACC,GAAwB,MAApBj/C,KAAKq/C,GAAsB,CAC9B,IAAM19C,EAAQ2T,EAAQuG,cAAcC,IAAK,SACzC9b,KAAKq/C,GAAc19C,EAAM29C,gBAE1B,OAAOt/C,KAAKq/C,IAGbJ,0BAAA,WAIC,OAHwB,MAApBj/C,KAAKu/C,KACRv/C,KAAKu/C,GAAqC,GAAvBv/C,KAAKs/C,iBAElBt/C,KAAKu/C,IAGbN,sBAAA,SAAWrpC,GACV,IAAI4pC,EAAS,EACTC,EAAS,EA+Bb,GA5BK,WAAY7pC,IAChB6pC,GAAqB,EAAZ7pC,EAAE8pC,QAEP,eAAgB9pC,IACpB6pC,EAAS7pC,EAAE+pC,YAEP,gBAAiB/pC,IACrB6pC,EAAS7pC,EAAEgqC,aAEP,gBAAiBhqC,IACrB4pC,GAA0B,EAAjB5pC,EAAEiqC,aAIP,SAAUjqC,GAAKA,EAAEkqC,OAASlqC,EAAEmqC,kBAChCP,GAAmB,EAAVC,EACTA,EAAS,GAIL,WAAY7pC,IAChB6pC,GAAqB,EAAZ7pC,EAAE6pC,QAEP,WAAY7pC,IAChB4pC,EAAS5pC,EAAE4pC,QAII,IAAXC,GAA2B,IAAXD,EACpB,OAAO,KAIR,IAAIQ,EAAQr2C,KAAKG,IAAKH,KAAKwP,IAAIsmC,GAAS91C,KAAKwP,IAAIqmC,IAK3CtO,EAAM7G,KAAK6G,MACblxC,KAAKigD,GAAa,KAAO/O,IAC5BlxC,KAAKkgD,GAAU,MAEhBlgD,KAAKigD,GAAa/O,EAGlB,IAAMiP,EAA2B,eAAXvqC,EAAEpD,MAAyBwtC,EAAQ,KAAQ,IAC1DhgD,KAAKkgD,IAAWF,EAAQhgD,KAAKkgD,MACnClgD,KAAKkgD,GAAUF,EAGVG,IACJngD,KAAKkgD,IAAW,KAKbC,IAEJH,GAAU,GACVR,GAAU,GACVC,GAAU,IAIX,IAAMW,EAASpgD,KAAKkgD,GACpBF,EAASr2C,KAAK6/B,MAAOwW,EAASI,GAC9BZ,EAAS71C,KAAM,GAAK61C,EAAS,QAAU,QAASA,EAASY,GACzDX,EAAS91C,KAAM,GAAK81C,EAAS,QAAU,QAASA,EAASW,GAGzD,IAAM5Q,EAAO55B,EAAEyqC,WAAa,EAC5B,GAAa,IAAT7Q,EAAa,CAChB,IAAMlzB,EAAmB,IAATkzB,EAAaxvC,KAAKs/C,gBAAkBt/C,KAAKsgD,gBACzDN,GAAS1jC,EACTkjC,GAAUljC,EACVmjC,GAAUnjC,EAGX,MAAO,CACNkzB,OACAwQ,QACAR,SACAC,SACAW,WAIKnB,cAAP,WAIC,OAHqB,MAAjBj/C,KAAKwV,WACRxV,KAAKwV,SAAW,IAAIypC,GAEdj/C,KAAKwV,gBdnJd,SAAY6jC,GACXA,yDACAA,6CAFD,CAAYA,KAAAA,QAKZ,SAAYC,GACXA,mBACAA,iCACAA,+BAHD,CAAYA,KAAAA,QAoBZ,Ie/BYiH,kBf0CX,WAAa3+C,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKu5C,GAAQ5+C,EAAQ6+C,KACrBx5C,EAAKqhB,GAAU1mB,EAAQd,OACvBmG,EAAKstC,GAAW3yC,EAAQuyC,QACxBltC,EAAKy5C,GAAe9+C,EAAQ++C,OAyL9B,OArMU7gD,OAeC8gD,iBAAV,SAAgBh/C,GACXA,EAAQd,SAAWw4C,GAAoBuH,aAC1Cj/C,EAAQU,MAAUV,EAAQU,OAASgC,EAAW+Z,MAAU/Z,EAAWw8C,aAEpEh6C,YAAMwZ,eAAM1e,IAGbpC,sBAAIohD,wBAAJ,WACC,IAAMH,EAAOzgD,KAAKwgD,GAClB,OAAI39C,EAAc49C,IAAkB,MAARA,EACpBA,EAEAA,EAAMzgD,uCAIfR,sBAAIohD,wBAAJ,WAAA,WACKD,EAAO3gD,KAAK+gD,GAChB,GAAY,MAARJ,EAAe,CAClB,IAAMh/C,EAAQ3B,KAAK2B,MACbC,EAAU5B,KAAK0gD,IAAgB/+C,EAAMq/C,iBAC3CL,EAAO3gD,KAAKihD,OAAQr/C,GACpB5B,KAAK+gD,GAAQJ,EACbA,EAAKhwC,GAAI,UAAU,SAClB8d,EACA/S,EACAkb,GAEA3vB,EAAKi6C,aAAczyB,EAAO/S,EAAMkb,MAGlC,OAAO+pB,mCAGEC,mBAAV,SACCh/C,GAEA,OAAIA,aAAmB+1B,gBACf/1B,EAED5B,KAAKmhD,QAASv/C,IAGZg/C,oBAAV,SAAmBh/C,GAClB,OAAOo1B,GAAOmqB,QAASv/C,IAGdg/C,yBAAV,SACCnyB,EACA/S,EACAkb,GAHD,WAKC,OAAQnI,GACR,KAAK4qB,GAAwB+H,wBAC5BphD,KAAK+3C,MAAM,GACX,MACD,KAAKsB,GAAwBgI,kBAC5B,IAAMZ,EAAOzgD,KAAKygD,KACN,MAARA,IACC59C,EAAc49C,GACjBzgD,KAAKshD,KAAMb,GAEXA,EAAKc,MAAK,SAAEC,GACK,MAAZA,GACHv6C,EAAKq6C,KAAME,SASPZ,iBAAV,SAAgBH,GACf,IAAMh3B,EAAIlS,SAAS+hB,cAAe,KAClC7P,EAAEmuB,KAAO6I,EACTnS,GAAcgT,KAAM73B,EAAEmuB,OAGbgJ,wBAAV,SAAuBh/C,GAAvB,WACOmY,EAAU,SAAEnE,GACb3O,EAAK0Q,gBACR1Q,EAAK2uB,SAAUhgB,KAWFhU,GAAWA,EAAQd,UACnBw4C,GAAoBuH,WAClC/oC,EAAiBiC,QAAS/Z,KAAM+Z,GAEhCjC,EAAiBkC,YAAaha,KAAM+Z,GAZjB,SAAEnE,GACrB,GAAI3O,EAAK0Q,eAAiB,CACzB,IAAMgpC,EAAO15C,EAAK05C,KACdA,EAAKc,YACRd,EAAK5I,KAAM9wC,QAYL25C,oBAAV,WACC,MAAO,iBAGEA,qBAAV,SAAoBhrC,GACnB9O,YAAM8uB,mBAAUhgB,GAChB5V,KAAK+3C,KAAM/3C,KAAK0hD,YAAa9rC,KAG9BgrC,iBAAA,SAAMc,GAAN,WACOjB,EAAOzgD,KAAKygD,KACN,MAARA,IACC59C,EAAc49C,GACjBzgD,KAAK82B,MAAO2pB,EAAMiB,GAElBjB,EAAKc,MAAK,SAAEC,GACPA,GACHv6C,EAAK6vB,MAAO0qB,EAAUE,QAOjBd,kBAAV,SAAiBH,EAAciB,GAA/B,WACOvN,EAAUn0C,KAAKu0C,GACrB,GAAIJ,EAAU,CACb,IAAMwN,EAAUxN,EAASn0C,OACT,IAAZ2hD,EACH3hD,KAAKgT,KAAMytC,EAAMiB,IACK,IAAZC,GAGVA,EAAQJ,MAAK,SAAEC,GACVA,GACHv6C,EAAK+L,KAAMytC,EAAMiB,WAKpB1hD,KAAKgT,KAAMytC,EAAMiB,IAITd,iBAAV,SAAgBH,EAAciB,GAC7B,GAAIA,EAAc,CACjB,IAAME,EAAIrqC,SAAS+hB,cAAe,KAClCsoB,EAAEhK,KAAO6I,EACTmB,EAAE9gD,OAAS,SACX8gD,EAAE50B,MAAM6qB,QAAU,OAClB+J,EAAEC,IAAM,sBACRtqC,SAASC,KAAKw3B,YAAa4S,GAC3BA,EAAE9J,QACF58B,YAAW,WACV3D,SAASC,KAAKid,YAAamtB,KACzB,UAEH3mC,OAAO+8B,SAASJ,KAAO6I,GAIfG,wBAAV,SAAuBhrC,GACtB,GAAI5V,KAAKsoB,KAAYgxB,GAAoBuH,WACxC,OAAO,EAEP,IAAMjN,EAAOh+B,aAAaiE,cAAYioC,iBAAmBlsC,EAAEhO,KAAKoT,cAAgBpF,EAChF,OACGg+B,EAAG79B,SAAW69B,EAAG59B,UAAY49B,EAAGl8B,QAAUk8B,EAAGmO,SAC7C,WAAYnO,GAAoB,IAAdA,EAAGoO,QAKhBpB,uBAAV,SAAsBhrC,GACrB9O,YAAMqZ,qBAAYvK,GAClB5V,KAAK41B,SAAUhgB,IAGTgrC,eAAP,SAA4Bh/C,GAC3B,MAAO,SAAUA,MAnMTq0B,IgB1CIgsB,GAAajW,kBCyB1B,WAAapqC,UACZkF,YAAOlF,SAwGT,OA5GU9B,OAOCoiD,iBAAV,SAAgBtgD,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZkW,EAAiBiC,QAAS/Z,MAAM,WAC3BiH,EAAK0Q,gBACR1Q,EAAKk7C,YAIPniD,KAAKoiD,UAAWxgD,GAEhB,IAAM++C,EAAO3gD,KAAKihD,OAAQr/C,GAC1B5B,KAAK+gD,GAAQJ,EACbA,EAAKhwC,GAAI,UAAU,SAAE8d,EAAc/S,EAAwBkb,GAC1D3vB,EAAKi6C,aAAczyB,EAAO/S,EAAMkb,OAIxBsrB,sBAAV,SAAqBtgD,GAArB,WACC5B,KAAK2Q,GAAImH,EAAiBwH,MAAM,WAC3BrY,EAAK0Q,gBACR1Q,EAAK8wC,WAKEmK,mBAAV,SAAkBtgD,GACjB,IAAM++C,EAAO/+C,EAAQ++C,KACrB,OAAIA,aAAgBhpB,gBACZgpB,EAED3gD,KAAKmhD,QAASR,IAGZuB,oBAAV,SAAmBtgD,GAClB,OAAOo1B,GAAOmqB,QAASv/C,IAGxBpC,sBAAI0iD,wBAAJ,WACC,OAAOliD,KAAK+gD,oCAGHmB,oBAAV,WACC,MAAO,iBAGRA,iBAAA,WACC,IAAMvB,EAAO3gD,KAAK+gD,GACdJ,EAAKc,YACRzhD,KAAKu6C,OAAQoG,IAILuB,mBAAV,SAAkBvB,GACjB,IAAMtqB,EAAUr2B,KAAK+1B,aACN,MAAXM,GACHsqB,EAAK5I,KAAM/3C,KAAMA,KAAKg2B,eAAgBK,IAIxC6rB,kBAAA,WACCliD,KAAK+gD,GAAMsB,SAGZH,mBAAA,WACC,IAAMvB,EAAO3gD,KAAK+gD,GACdJ,EAAKc,WACRzhD,KAAKu6C,OAAQoG,GAEbA,EAAK0B,SAIGH,qBAAV,SAAoBtsC,GACnB5V,KAAK+3C,OACLjxC,YAAM8uB,mBAAUhgB,IAGPssC,yBAAV,SAAwBzzB,EAAc/S,EAAwBkb,GAC7D,IAAMpN,EAAOxpB,KAAKg2B,eACN,MAARxM,GACHA,EAAK5R,KAAM,SAAU6W,EAAO/S,EAAMkb,IAI7BsrB,eAAP,SAA4BtgD,GAC3B,MAAO,SAAUA,GAGXsgD,mBAAP,SAAgCtgD,EAAsC21B,GACrE,IAAMopB,EAAO/+C,EAAQ++C,KASrB,OAROA,aAAgBhpB,kBACH,MAAfgpB,EAAKppB,SACRopB,EAAKppB,OAASA,GAEG,MAAdopB,EAAKv9C,QACRu9C,EAAKv9C,MAAQ6+C,GAAWv1C,QAGnB9K,MA1GCk0B,kBCpBT,WAAalpB,GAAb,MACC9F,0BACA8F,EAAKQ,iBAAkBnG,GAAM,GAC7B2F,EAAKwB,cAAenH,KAuBtB,OA3BkDnH,OAOjDwiD,qBAAA,SAAU11C,EAAa1J,EAAeyD,GACrC,IAAMrE,EAAQsK,EAAKtK,MACbU,EAAS4J,EAAK5J,OACdqK,EAAcrK,EAAOsK,SAAUhL,GAC/BsM,EAAc5L,EAAOuL,SAAUjM,GACrC,GAAmB,MAAfsM,EAAsB,CACzB,IAAMC,EAAc7L,EAAOyL,SAAUnM,GAC/BwM,EAAc9L,EAAO+L,SAAUzM,GAC/B2C,EAAU2H,EAAK3H,QACfs9C,EAAkB,GAAT57C,EACf3G,KAAKud,QACLvd,KAAKwiD,UAAWn1C,EAAauB,EAAaC,EAAaC,GACvD9O,KAAKyiD,OAAQx9C,EAAQ2c,UAAW2gC,GAChCviD,KAAK0iD,OAAQx/C,EAAQ+B,EAAQggB,WAAYs9B,GACzCviD,KAAK2O,SAAU,OAEf3O,KAAKud,QACLvd,KAAK2O,SAAU,MAxBgC2f,2BCUlD,4DAmBA,OAfUxuB,OACC6iD,iBAAV,SAAgB/gD,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAKue,aAAc,EACnBve,KAAKq1B,YAAa,EAClBr1B,KAAK0Q,SAAUpM,EAAWkf,aAAa,IAG9Bm/B,2BAAV,WACC,IAAIL,GAA8BtiD,OAGzB2iD,oBAAV,WACC,MAAO,yBAbCvtB,kBCHV,4DAYA,OARUt1B,OACC8iD,oBAAV,WACC,MAAO,sBAGDA,eAAP,SAA4BhhD,GAC3B,MAAO,cAAeA,MANd+gD,mBCHT,WAAa/gD,GAAb,MACCkF,YAAOlF,gBACPqF,EAAK0H,SAAU,EACf1H,EAAKyJ,SAAUpM,EAAWkf,aAAa,KAMzC,OAVU1jB,OAOC+iD,oBAAV,WACC,MAAO,mBARCliC,kBCDV,4DAWA,OARU7gB,OACCgjD,oBAAV,WACC,MAAO,kBAGDA,eAAP,SAA4BlhD,GAC3B,MAAO,UAAWA,MANVihD,ICNGE,GAAe,WAC3B/rB,GAAOgsB,gBAAe,SAAEphD,GACvB,OAAIi1B,GAAeosB,aAAcrhD,GACzB,IAAIi1B,GAAgBj1B,GAErB,QAGRo1B,GAAOgsB,gBAAe,SAAEphD,GACvB,OAAIg/C,GAAcqC,aAAcrhD,GACxB,IAAIg/C,GAAeh/C,GAEpB,QAGRo1B,GAAOgsB,gBAAe,SAAEphD,EAAqC21B,GAC5D,OAAI2qB,GAAce,aAAcrhD,GACxB,IAAIsgD,GAAeA,GAAcgB,iBAAkBthD,EAAS21B,IAE7D,QAGRP,GAAOgsB,gBAAe,SAAEphD,GACvB,OAAIghD,GAAmBK,aAAcrhD,GAC7B,IAAIghD,GAAoBhhD,GAEzB,QAGRo1B,GAAOgsB,gBAAe,SAAEphD,GACvB,OAAIkhD,GAAeG,aAAcrhD,GACzB,IAAIkhD,GAAgBlhD,GAErB,QAGRo1B,GAAOmsB,uBAAsB,SAAEvhD,GAC9B,OAAO,IAAIq0B,GAAer0B,QRtC5B,SAAY2+C,GACXA,2BACAA,+BAFD,CAAYA,KAAAA,QA6BZ,IStCY6C,GTsCNC,GAAiB,SAAE3iC,GACxB,OAAOA,aAAiBC,IAAUD,EAAM/R,SAAW+R,aAAiBmiC,KAG/DS,GAAiB,SAA8B3hD,EAAcC,GAClE,GAAIA,EAAU,CACb,GAAmB,MAAfA,EAAQ2hD,IACX,OAAO3hD,EAAQ2hD,IAEhB,GAAsB,MAAlB3hD,EAAQ4hD,OACX,OAAO5hD,EAAQ4hD,OAGjB,OAAO7hD,EAAM8hD,mBAGRC,GAAW,SAA8B/hD,EAAcC,GAC5D,GAAIA,GAA6B,MAAlBA,EAAQwwB,OAAiB,CACvC,IAAMA,EAASxwB,EAAQwwB,OACvB,GAAItuB,EAAcsuB,GACjB,MAAO,CACN3C,WAAY2C,EACZ7C,SAAU6C,GAGX,IAAMuxB,EAAchiD,EAAMiiD,YAC1B,MAAO,CACNn0B,WAAmC,MAArB2C,EAAO3C,WAAqB2C,EAAO3C,WAAak0B,EAC9Dp0B,SAA+B,MAAnB6C,EAAO7C,SAAmB6C,EAAO7C,SAAWo0B,GAK1D,MAAO,CACNl0B,WAFKk0B,EAAchiD,EAAMiiD,YAGzBr0B,SAAUo0B,IAKPE,GAAc,SAA8BliD,EAAcC,GAC/D,GAAIA,GAAgC,MAArBA,EAAQkiD,UAAoB,CAC1C,IAAMA,EAAYliD,EAAQkiD,UAC1B,OAAIjhD,EAAcihD,GACVvD,GAAkBuD,GAElBA,EAGT,OAAOniD,EAAMoiD,gBAGRC,GAAiB,SAA8BriD,EAAcC,GAClE,OAAIA,GAA6B,MAAlBA,EAAQmC,SAAoBD,EAAclC,EAAQmC,SAAqC,MAAzBnC,EAAQmC,OAAO0pC,OACpF7rC,EAAQmC,OAAO0pC,OAEhB9rC,EAAMsiD,kCAcb,WAAariD,GAAb,MACCkF,YAAOlF,SAEPqF,EAAKyJ,SAAUpM,EAAWkf,aAAa,GAEvC,IAAM7hB,EAAQsF,EAAKtF,aACnBsF,EAAKklC,GAAUuX,GAAU/hD,EAAOC,GAChCqF,EAAKi9C,GAAaL,GAAaliD,EAAOC,GACtCqF,EAAKk9C,GAAgBH,GAAgBriD,EAAOC,GAC5CqF,EAAKm9C,GAAgBd,GAAgB3hD,EAAOC,KA+lB9C,OAhnBU9B,OAoBCukD,2BAAV,WAIC,IAHA,IAAM5jC,EAAWzgB,KAAKygB,SAClBje,EAAS,EACP8hD,EAAetkD,KAAKokD,GACjB7iD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,GAAQ,CAGnD,IAFA,IAAIyd,GAAU,EACV7M,EAAI,EACDA,EAAIkyC,GAAgB/iD,EAAI6Q,EAAI5Q,IAAQ4Q,EAAI,CAC9C,IAAMsO,EAAQD,EAAUlf,EAAI6Q,GAC5B,GAAIixC,GAAgB3iC,GAAU,CAC7B,IAAM6jC,EAAY7jC,EAAMlD,eACxB,GAAU,IAANpL,GAAYmyC,EAAYnwC,EAAiBowC,OAC5C,MAGA,GADAvlC,EAAStV,KAAKG,IAAKmV,EAAQyB,EAAMzB,QAC7BslC,GAAanwC,EAAiBqwC,MAAQ,CACzCryC,GAAK,EACL,YAIF7Q,GAAK,EACL6Q,GAAK,EAGP7Q,GAAK6Q,EACD,GAAK6M,IACRzc,GAAUyc,GAGZ,OAAOzc,GAGE6hD,yBAAV,SAAwBK,EAAkBtyB,GACzC,IAAM3R,EAAWzgB,KAAKygB,SAChB6jC,EAAetkD,KAAKokD,GAC1B,GAAIpkD,KAAKkkD,KAAe3D,GAAiBoE,SAAW,CAGnD,IAFA,IAAIniD,EAASkiD,EACTE,EAAa,EACRrjD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,GAAQ,CAInD,IAHA,IAAImF,EAAS,EACTsY,GAAU,EACV7M,EAAI,EACDA,EAAIkyC,GAAgB/iD,EAAI6Q,EAAI5Q,IAAQ4Q,EAAI,CAC9C,IAAMsO,EAAQD,EAAUlf,EAAI6Q,GAC5B,GAAIixC,GAAgB3iC,GAAU,CAC7B,IAAM6jC,EAAY7jC,EAAMlD,eACxB,GAAU,IAANpL,GAAYmyC,EAAYnwC,EAAiBowC,OAC5C,MAQA,GAJC79C,GAFDsY,EAAStV,KAAKG,IAAKmV,EAAQyB,EAAMzB,SACpB,EACHtV,KAAKG,IAAKnD,EAAQ+Z,EAAM/Z,OAASi+C,GAEjCA,EAENL,EAAYnwC,EAAiBqwC,MAAQ,CACxCryC,GAAK,EACL,YAIF7Q,GAAK,EACL6Q,GAAK,EAGP7Q,GAAK6Q,EACL5P,GAAUmE,EACVi+C,EAAaxyB,EAEd,OAAOzoB,KAAKG,IAAK,EAAGtH,GAIpB,IAFIA,EAASkiD,EACTE,EAAa,EACRrjD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,GAAQ,CACnD,IAAI0B,EAAQ,EAGZ,IAFI+b,GAAU,EACV7M,EAAI,EACDA,EAAIkyC,GAAgB/iD,EAAI6Q,EAAI5Q,IAAQ4Q,EAE1C,GADMsO,EAAQD,EAAUlf,EAAI6Q,GACxBixC,GAAgB3iC,GAAU,CAE7B,GADM6jC,EAAY7jC,EAAMlD,eACd,IAANpL,GAAYmyC,EAAYnwC,EAAiBowC,OAC5C,MAQA,GAJCthD,GAFD+b,EAAStV,KAAKG,IAAKmV,EAAQyB,EAAMzB,SACpB,EACJtV,KAAKG,IAAK5G,EAAOwd,EAAMxd,MAAQ0hD,GAE/BA,EAELL,EAAYnwC,EAAiBqwC,MAAQ,CACxCryC,GAAK,EACL,YAIF7Q,GAAK,EACL6Q,GAAK,EAGP7Q,GAAK6Q,EACL5P,GAAUU,EACV0hD,EAAaxyB,EAEd,OAAOzoB,KAAKG,IAAK,EAAGtH,IAIZ6hD,oBAAV,WACC,IAAM5jC,EAAWzgB,KAAKygB,SAChBxb,EAAUjF,KAAKyd,GACfonC,EAAa5/C,EAAQ6c,SACrBgjC,EAAgB7/C,EAAQigB,YACxB6/B,EAAc9/C,EAAQ2c,UACtBojC,EAAe//C,EAAQggB,WACvBmN,EAASpyB,KAAKmsC,GACdrY,EAAiB1B,EAAO7C,SACxBoE,EAAmBvB,EAAO3C,WAC1Bw1B,EAAcjlD,KAAKklD,iBACnBZ,EAAetkD,KAAKokD,GAEtBe,EAAmB,KACvB,GAAInlD,KAAKmkD,GAAgB,CACxB,IAAMiB,EAAe,GAAM3kC,EAAS/f,QAAU,IACZ,MAA9B2jD,EAAQgB,oBAA8BhB,EAAQgB,mBAAmB3kD,OAAS0kD,KAC7Ef,EAAQgB,mBAAqB,IAAIt+C,aAAcq+C,KAEhDD,EAAmBd,EAAQgB,oBACT,IAAO,EACzBF,EAAkB,IAAO,EACzBA,EAAkBC,EAAe,IAAO,EACxCD,EAAkBC,EAAe,IAAO,EAGzC,GAAIplD,KAAKkkD,KAAe3D,GAAiBoE,SAAW,CACnD,IAAIW,EAAO,EACPj/C,EAAIw+C,EAAa/wB,EACrB,GAAI,EAAImxB,EAAc,CAIrB,IAHA,IAAMM,EAAqB,EAAIN,EACzBP,EAAW1kD,KAAK2G,OAASk+C,EAAaC,EACtCU,EAAYxlD,KAAKylD,aAAcf,EAAU5wB,GACtCvyB,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,GAAQ,CAInD,IAHA,IAAI4E,EAAI2+C,EAAcpxB,EAClBhtB,EAAS,EACTyL,EAAI,EACDA,EAAIkyC,GAAgB/iD,EAAI6Q,EAAI5Q,IAAQ4Q,EAAI,CAC9C,IAAMsO,EAAQD,EAAUlf,EAAI6Q,GAC5B,GAAIixC,GAAgB3iC,GAAU,CAC7B,IAAM6jC,EAAY7jC,EAAMlD,eACxB,GAAU,IAANpL,GAAYmyC,EAAYnwC,EAAiBowC,OAC5C,MASA,GAPA9jC,EAAM/L,SAASrO,IAAKqtB,EAAmBvtB,EAAG0tB,EAAiBztB,GAEvD,IADE4Y,EAASyB,EAAMzB,UAEpByB,EAAM/Z,OAAS6+C,GAAcvmC,EAASsmC,IAEvCn/C,GAAKutB,EAAmBjT,EAAMxd,MAC9ByD,EAASgD,KAAKG,IAAKnD,EAAQ+Z,EAAM/Z,QAC7B49C,EAAYnwC,EAAiBqwC,MAAQ,CAChB,MAApBU,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGA,EAC5B+yC,EAAkBO,EAAI,GAAMJ,GAE7BlzC,GAAK,EACL,MAEwB,MAApB+yC,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGA,EAC5B+yC,EAAkBO,EAAI,GAAMJ,QAKP,MAApBH,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGA,EAAI,EAChC+yC,EAAkBO,EAAI,GAAMJ,GAE7B/jD,GAAK,EACL6Q,GAAK,EAGP/L,GAAKytB,EAAiBntB,EACtBpF,GAAK6Q,EACLkzC,GAAQ,EAGT,GAAwB,MAApBH,EACH,IAAS5jD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAEnD,GADMmf,EAAQD,EAAUlf,GACpB8hD,GAAgB3iC,GAAU,CAC7B,IACMilC,EAAWR,EAAuB,GADlC7J,EAAK,GAAM/5C,GAAK,KAEhBqkD,EAAQT,EAAkB7J,EAAK,GAGjCuK,GAAY,EAChB,MAHMtB,EAAY7jC,EAAMlD,gBAGLpJ,EAAiBowC,QAAU,CAC7C,IAAMnJ,EAAKr7C,KAAK8lD,qBAAsBxK,EAAIsK,EAAOT,GAC3CnlD,KAAK+lD,kBAAmBtlC,EAAU46B,KACvCwK,EAAWV,EAAkB9J,IAI/B,IAAI2K,GAAY,EAChB,KAAOzB,EAAYnwC,EAAiBqwC,OAAS,CAC5C,IAAMlJ,EAAKv7C,KAAKimD,iBAAkB3K,EAAIsK,EAAOT,GACvCnlD,KAAKkmD,mBAAoBzlC,EAAU86B,KACxCyK,EAAWb,EAAkB5J,IAI/B,IAAM4K,EAAUnmD,KAAKomD,YAAa9K,EAAIsK,EAAOT,GAC7CzkC,EAAM3c,OAAOT,KAAOtD,KAAKqmD,mBAAoBR,EAAUF,EAAUK,EAAUG,QAIxE,CACN,IAAS5kD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,GAAQ,CAInD,IAHI4E,EAAI2+C,EAAcpxB,EAClBhtB,EAAS,EACTyL,EAAI,EACDA,EAAIkyC,GAAgB/iD,EAAI6Q,EAAI5Q,IAAQ4Q,EAE1C,GADMsO,EAAQD,EAAUlf,EAAI6Q,GACxBixC,GAAgB3iC,GAAU,CAE7B,GADM6jC,EAAY7jC,EAAMlD,eACd,IAANpL,GAAYmyC,EAAYnwC,EAAiBowC,OAC5C,MASA,GAPA9jC,EAAM/L,SAASrO,IAAKqtB,EAAmBvtB,EAAG0tB,EAAiBztB,GAEvD,IADE4Y,EAASyB,EAAMzB,UAEpByB,EAAM/Z,OAAS,GAEhBP,GAAKutB,EAAmBjT,EAAMxd,MAC9ByD,EAASgD,KAAKG,IAAKnD,EAAQ+Z,EAAM/Z,QAC7B49C,EAAYnwC,EAAiBqwC,MAAQ,CAChB,MAApBU,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGA,EAC5B+yC,EAAkBO,EAAI,GAAMJ,GAE7BlzC,GAAK,EACL,MAEwB,MAApB+yC,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGA,EAC5B+yC,EAAkBO,EAAI,GAAMJ,QAKP,MAApBH,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGA,EAAI,EAChC+yC,EAAkBO,EAAI,GAAMJ,GAE7B/jD,GAAK,EACL6Q,GAAK,EAGP/L,GAAKytB,EAAiBntB,EACtBpF,GAAK6Q,EACLkzC,GAAQ,EAGT,GAAwB,MAApBH,EACH,IAAS5jD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAC7Cmf,EAAQD,EAAUlf,GACpB8hD,GAAgB3iC,KAEbilC,EAAWR,EAAuB,GADlC7J,EAAK,GAAM/5C,GAAK,KAEhBqkD,EAAQT,EAAkB7J,EAAK,GAGjCuK,GAAY,GAFVtB,EAAY7jC,EAAMlD,gBAGLpJ,EAAiBowC,SAC7BnJ,EAAKr7C,KAAK8lD,qBAAsBxK,EAAIsK,EAAOT,GAC3CnlD,KAAK+lD,kBAAmBtlC,EAAU46B,KACvCwK,EAAWV,EAAkB9J,KAI3B2K,GAAY,EACTzB,EAAYnwC,EAAiBqwC,QAC7BlJ,EAAKv7C,KAAKimD,iBAAkB3K,EAAIsK,EAAOT,GACvCnlD,KAAKkmD,mBAAoBzlC,EAAU86B,KACxCyK,EAAWb,EAAkB5J,KAIzB4K,EAAUnmD,KAAKomD,YAAa9K,EAAIsK,EAAOT,GAC7CzkC,EAAM3c,OAAOT,KAAOtD,KAAKqmD,mBAAoBR,EAAUF,EAAUK,EAAUG,SAKzE,CACN,IAAIG,EAAU,EAEd,GADIlgD,EAAI2+C,EAAcpxB,EAClB,EAAIsxB,EAAc,CAIrB,IAHMM,EAAqB,EAAIN,EACzBP,EAAW1kD,KAAKkD,MAAQ6hD,EAAcC,EACtCQ,EAAYxlD,KAAKylD,aAAcf,EAAU/wB,GACtCpyB,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,GAAQ,CAC/C6E,EAAIw+C,EAAa/wB,EAArB,IACI5wB,EAAQ,EAEZ,IADIkP,EAAI,EACDA,EAAIkyC,GAAgB/iD,EAAI6Q,EAAI5Q,IAAQ4Q,EAE1C,GADMsO,EAAQD,EAAUlf,EAAI6Q,GACxBixC,GAAgB3iC,GAAU,CAE7B,GADM6jC,EAAY7jC,EAAMlD,eACd,IAANpL,GAAYmyC,EAAYnwC,EAAiBowC,OAC5C,MASA,GAPA9jC,EAAM/L,SAASrO,IAAKqtB,EAAmBvtB,EAAG0tB,EAAiBztB,GAEvD,IADE4Y,EAASyB,EAAMzB,UAEpByB,EAAMxd,MAAQsiD,GAAcvmC,EAASsmC,IAEtCriD,EAAQyG,KAAKG,IAAK5G,EAAOwd,EAAMxd,OAC/BmD,GAAKytB,EAAiBpT,EAAM/Z,OACxB49C,EAAYnwC,EAAiBqwC,MAAQ,CAChB,MAApBU,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGk0C,EAC5BnB,EAAkBO,EAAI,GAAMtzC,GAE7BA,GAAK,EACL,MAEwB,MAApB+yC,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGk0C,EAC5BnB,EAAkBO,EAAI,GAAMtzC,QAKP,MAApB+yC,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGk0C,EAC5BnB,EAAkBO,EAAI,GAAMtzC,EAAI,GAEjC7Q,GAAK,EACL6Q,GAAK,EAGPhM,GAAKutB,EAAmBzwB,EACxB3B,GAAK6Q,EACLk0C,GAAW,EAGZ,GAAwB,MAApBnB,EACH,IAAS5jD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAEnD,GADMmf,EAAQD,EAAUlf,GACpB8hD,GAAgB3iC,GAAU,CAEvBilC,EAAWR,EAAuB,GADlC7J,EAAK,GAAM/5C,GAAK,KAEhBqkD,EAAQT,EAAkB7J,EAAK,GAFrC,IAKIiL,GAAS,GAFPhC,EAAY7jC,EAAMlD,gBAGLpJ,EAAiBowC,SAC7BnJ,EAAKr7C,KAAKwmD,wBAAyBlL,EAAIqK,EAAUR,GACjDnlD,KAAK+lD,kBAAmBtlC,EAAU46B,KACvCkL,EAAQpB,EAAkB9J,EAAK,KAIjC,IAAIoL,GAAS,EACNlC,EAAYnwC,EAAiBqwC,QAC7BlJ,EAAKv7C,KAAK0mD,oBAAqBpL,EAAIqK,EAAUR,GAC7CnlD,KAAKkmD,mBAAoBzlC,EAAU86B,KACxCkL,EAAQtB,EAAkB5J,EAAK,KAIjC,IAAMoL,EAAO3mD,KAAK4mD,SAAUtL,EAAIqK,EAAUR,GAC1CzkC,EAAM3c,OAAOT,KAAOtD,KAAK6mD,gBAAiBN,EAAOX,EAAOa,EAAOE,QAI5D,CACN,IAASplD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,GAAQ,CAInD,IAHI6E,EAAIw+C,EAAa/wB,EACjB5wB,EAAQ,EACRkP,EAAI,EACDA,EAAIkyC,GAAgB/iD,EAAI6Q,EAAI5Q,IAAQ4Q,EAE1C,GADMsO,EAAQD,EAAUlf,EAAI6Q,GACxBixC,GAAgB3iC,GAAU,CAC7B,IAKOzB,EAJP,GADMslC,EAAY7jC,EAAMlD,eACd,IAANpL,GAAYmyC,EAAYnwC,EAAiBowC,OAC5C,MASA,GAPA9jC,EAAM/L,SAASrO,IAAKqtB,EAAmBvtB,EAAG0tB,EAAiBztB,GAEvD,IADE4Y,EAASyB,EAAMzB,UAEpByB,EAAMxd,MAAQ,GAEfA,EAAQyG,KAAKG,IAAK5G,EAAOwd,EAAMxd,OAC/BmD,GAAKytB,EAAiBpT,EAAM/Z,OACxB49C,EAAYnwC,EAAiBqwC,MAAQ,CAChB,MAApBU,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGk0C,EAC5BnB,EAAkBO,EAAI,GAAMtzC,GAE7BA,GAAK,EACL,MAEwB,MAApB+yC,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGk0C,EAC5BnB,EAAkBO,EAAI,GAAMtzC,OAIzB,CAEL,IAAMszC,EADiB,MAApBP,IAEHA,EAAsB,GADhBO,EAAKnkD,EAAI6Q,EAAI,GAAM,IACGk0C,EAC5BnB,EAAkBO,EAAI,GAAMtzC,EAAI,GAEjC7Q,GAAK,EACL6Q,GAAK,EAGPhM,GAAKutB,EAAmBzwB,EACxB3B,GAAK6Q,EACLk0C,GAAW,EAGZ,GAAwB,MAApBnB,EACH,IAAS5jD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CAGtD,IAAM+5C,EAFD56B,EAAQD,EAAUlf,GACpB8hD,GAAgB3iC,KAEbilC,EAAWR,EAAuB,GADlC7J,EAAK,GAAM/5C,GAAK,KAEhBqkD,EAAQT,EAAkB7J,EAAK,GAGjCiL,GAAS,GAFPhC,EAAY7jC,EAAMlD,gBAGLpJ,EAAiBowC,SAC7BnJ,EAAKr7C,KAAKwmD,wBAAyBlL,EAAIqK,EAAUR,GACjDnlD,KAAK+lD,kBAAmBtlC,EAAU46B,KACvCkL,EAAQpB,EAAkB9J,EAAK,KAI7BoL,GAAS,EACNlC,EAAYnwC,EAAiBqwC,QAC7BlJ,EAAKv7C,KAAK0mD,oBAAqBpL,EAAIqK,EAAUR,GAC7CnlD,KAAKkmD,mBAAoBzlC,EAAU86B,KACxCkL,EAAQtB,EAAkB5J,EAAK,KAI3BoL,EAAO3mD,KAAK4mD,SAAUtL,EAAIqK,EAAUR,GAC1CzkC,EAAM3c,OAAOT,KAAOtD,KAAK6mD,gBAAiBN,EAAOX,EAAOa,EAAOE,MAOpE7/C,YAAM8d,oBAGGy/B,+BAAV,SAA8B5jC,EAA2B7f,GACxD,OAAOZ,KAAK8mD,aAAcrmC,EAAU7f,EAAOwT,EAAiBowC,SAGnDH,8BAAV,SAA6B5jC,EAA2B7f,GACvD,OAAOZ,KAAK8mD,aAAcrmC,EAAU7f,EAAOwT,EAAiBqwC,QAGnDJ,yBAAV,SAAwB5jC,EAA2B7f,EAAe2jD,GACjE,GAAI,GAAK3jD,EAAQ,CAChB,IAAMW,EAAKX,EAAQ,GAAM,EACzB,GAAI,GAAKW,GAAKA,EAAIkf,EAAS/f,OAAS,CACnC,IAAMggB,EAAQD,EAAUlf,GACxB,GAAImf,aAAiBC,EACpB,SAAWD,EAAMlD,eAAiB+mC,IAIrC,OAAO,GAGEF,oCAAV,SAAmC77B,EAAgB89B,EAAiBnB,GACnE,IAAK,IAAI5jD,EAAIinB,EAAS,EAAG,GAAKjnB,EAAGA,GAAK,EACrC,GAAI4jD,EAAkB5jD,KAAQ+kD,EAC7B,OAAO/kD,EAGT,OAAO,GAGE8iD,gCAAV,SAA+B77B,EAAgB89B,EAAiBnB,GAC/D,IAAK,IAAI5jD,EAAIinB,EAAS,EAAGhnB,EAAO2jD,EAAiBzkD,OAAQa,EAAIC,EAAMD,GAAK,EAAI,CAC3E,IAAMykD,EAAWb,EAAkB5jD,GACnC,GAAIykD,IAAaM,EAAU,CAC1B,IAAK,IAAIl0C,EAAI7Q,EAAI,EAAG6Q,EAAI5Q,EAAM4Q,GAAK,EAClC,GAAI+yC,EAAkB/yC,KAAQ4zC,EAC7B,OAAO5zC,EAAI,EAGb,OAAO7Q,GAGT,OAAO4jD,EAAiBzkD,OAAS,GAGxB2jD,qBAAV,SAAoB77B,EAAgB89B,EAAiBnB,GACpD,IAAK,IAAI5jD,EAAIinB,EAAS,EAAGhnB,EAAO2jD,EAAiBzkD,OAAQa,EAAIC,EAAMD,GAAK,EAEvE,GADiB4jD,EAAkB5jD,KAClB+kD,EAChB,OAAOnB,EAAkB5jD,EAAI,EAAI,GAAM,EAGzC,OAAO,GAGE8iD,iCAAV,SAAgC77B,EAAgB88B,EAAcH,GAC7D,IAAK,IAAI5jD,EAAIinB,EAAS,EAAG,GAAKjnB,EAAGA,GAAK,EACrC,GAAI4jD,EAAkB5jD,EAAI,KAAQ+jD,EACjC,OAAO/jD,EAGT,OAAO,GAGE8iD,6BAAV,SAA4B77B,EAAgB88B,EAAcH,GACzD,IAAK,IAAI5jD,EAAIinB,EAAS,EAAGhnB,EAAO2jD,EAAiBzkD,OAAQa,EAAIC,EAAMD,GAAK,EAAI,CAC3E,IAAMklD,EAAQtB,EAAkB5jD,EAAI,GACpC,GAAIklD,IAAUnB,EAAO,CACpB,IAAK,IAAIlzC,EAAI7Q,EAAI,EAAG6Q,EAAI5Q,EAAM4Q,GAAK,EAClC,GAAI+yC,EAAkB/yC,EAAI,KAAQq0C,EACjC,OAAOr0C,EAAI,EAGb,OAAO7Q,GAGT,OAAO4jD,EAAiBzkD,OAAS,GAGxB2jD,wBAAV,SAAuB77B,EAAgB88B,EAAcH,GACpD,IAAK,IAAI5jD,EAAIinB,EAAS,EAAGhnB,EAAO2jD,EAAiBzkD,OAAQa,EAAIC,EAAMD,GAAK,EAEvE,GADc4jD,EAAkB5jD,EAAI,KACtB+jD,EACb,OAAOH,EAAkB5jD,EAAI,EAAI,GAAM,EAGzC,OAAO,GAGE8iD,+BAAV,SAA8BhJ,EAAYC,EAAYC,EAAYwL,GACjE,IAAIvkD,EAASI,EAAYyb,KAazB,OAZIg9B,EAAK,EAAIC,GAAa,IAAPA,IAClB94C,GAAUI,EAAY6H,UAEnB8wC,EAAK,EAAID,GAAa,IAAPA,IAClB94C,GAAUI,EAAYiI,aAEnBwwC,EAAKC,GAAMA,EAAK,IAAMyL,IACzBvkD,GAAUI,EAAY+H,WAEnB4wC,EAAKD,GAAMA,EAAK,IAAMyL,IACzBvkD,GAAUI,EAAYmI,cAEhBnI,EAAYokD,KAAQxkD,GAGlB6hD,4BAAV,SAA2BhJ,EAAYC,EAAYC,EAAYwL,GAC9D,IAAIvkD,EAASI,EAAYyb,KAazB,OAZIg9B,EAAK,EAAIC,GAAa,IAAPA,IAClB94C,GAAUI,EAAY6H,UAEnB8wC,EAAK,EAAID,GAAa,IAAPA,IAClB94C,GAAUI,EAAY+H,WAEnB0wC,EAAKC,GAAMA,EAAK,IAAMyL,IACzBvkD,GAAUI,EAAYiI,aAEnB0wC,EAAKD,GAAMA,EAAK,IAAMyL,IACzBvkD,GAAUI,EAAYmI,cAEhBnI,EAAYokD,KAAQxkD,GAG5B6hD,qBAAA,SAAUziD,GACT,OAAO5B,KAAKwgB,SAAU,IAAIqiC,GAAcjhD,KAG/ByiD,oBAAV,WACC,MAAO,WA7mBDA,qBAA0C,QADxC1jC,kBU1FV,4DAOA,OAJU7gB,OACCmnD,oBAAV,WACC,MAAO,sBAFC5C,mBCIT,WAAaziD,UACZkF,YAAOlF,SAMT,OATU9B,OAMConD,oBAAV,WACC,MAAO,8BAPCD,mBCAV,4DA2BA,OAvBUnnD,OACCqnD,iBAAV,SAAgBvlD,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK2Q,GAAImH,EAAiB0B,MAAM,SAAE5D,GAC7B3O,EAAK0Q,gBACR1Q,EAAK2uB,SAAUhgB,OAKRuxC,yBAAV,WACC,OAAO,MAGEA,oBAAV,WACC,MAAO,6BAGEA,qBAAV,SAAoBvxC,GACnB5V,KAAK4X,KAAM,SAAU5X,MACrB8G,YAAM8uB,mBAAUhgB,OArBRwf,iBCfV,cAwBA,OApBQgyB,iBAAP,SAAuBnwB,GACtBj3B,KAAKk3B,SAAS12B,KAAMy2B,IAGdmwB,wBAAP,SAA8BnwB,GAC7Bj3B,KAAKm3B,gBAAkBF,GAGjBmwB,UAAP,SAAuBxlD,EAAuC21B,GAC7D,OAAOP,GAAOS,UAAWz3B,KAAKk3B,SAAUl3B,KAAKm3B,gBAAiBv1B,EAAS21B,IACtEP,GAAOY,QAASh2B,EAAS21B,IAGpB6vB,WAAP,SACCpmD,EACA02B,EACAH,GAEAP,GAAOe,WAAY/3B,KAAMgB,EAAQ02B,EAAOH,IArBxB6vB,WAA+B,GAC/BA,kBAA2C,yBCkB7D,4DA0HA,OAtHUtnD,OAICunD,iBAAV,SAAgBzlD,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAGZ,IAAMD,EAAQ3B,KAAK2B,MACb2lD,EAAStnD,KAAKunD,SAAU5lD,EAAOC,GACrC5B,KAAKwnD,GAAUF,EACfA,EAAO32C,GAAI,UAAU,WACpB1J,EAAKk7C,YAENniD,KAAKwgB,SAAU8mC,GAGf,IAAM9vC,EAAOxX,KAAKynD,OAAQ9lD,EAAOC,GACjC5B,KAAK0nD,GAAQlwC,EACb,IAAM+f,KAAW31B,GAA6B,MAAlBA,EAAQ21B,SAAiB31B,EAAQ21B,OAC7Dv3B,KAAK2nD,SAAUnwC,EAAM+f,EAAQ51B,EAAOC,GACpC5B,KAAKwgB,SAAUhJ,GAGXxX,KAAKyiB,WACRziB,KAAK4nD,cAEL5nD,KAAK6nD,iBAIGR,qBAAV,SAAoB7vC,EAAiB+f,EAAiB51B,EAAcC,GACpD,MAAXA,GAAoC,MAAjBA,EAAQ81B,OAC9B0vB,GAAqBO,SAAUnwC,EAAM5V,EAAQ81B,MAAOH,IAI5C8vB,qBAAV,SAAoB1lD,EAAcC,GACjC,OAAIA,EACCA,EAAQ0lD,kBAAkB3vB,gBACtB/1B,EAAQ0lD,OAERtnD,KAAK8nD,UAAWnmD,EAAOC,EAAQ0lD,QAGjCtnD,KAAK8nD,UAAWnmD,IAGd0lD,sBAAV,SAAqB1lD,EAAcC,GAClC,OAAO,IAAIulD,GAAkCvlD,IAGpCylD,mBAAV,SAAkB1lD,EAAeC,GAChC,OAAIA,GAAWA,EAAQ4V,KAClB5V,EAAQ4V,gBAAgBmgB,gBACpB/1B,EAAQ4V,KAERxX,KAAK+nD,QAASpmD,EAAOC,EAAQ4V,MAG/BxX,KAAK+nD,QAASpmD,IAGZ0lD,oBAAV,SAAmB1lD,EAAcC,GAChC,OAAO,IAAIslD,GAAyBtlD,IAGrCylD,iBAAA,WACCrnD,KAAK+2B,WAAW,IAGjBswB,kBAAA,WACCrnD,KAAK+2B,WAAW,IAGjBswB,mBAAA,WACCrnD,KAAK+2B,WAAa/2B,KAAKyiB,aAGd4kC,wBAAV,WACC,IAAM7vC,EAAOxX,KAAK0nD,GACdlwC,aAAgBmJ,EACnBnJ,EAAKsnC,OAELtnC,EAAK7I,SAAU,GAIP04C,0BAAV,WACC,IAAM7vC,EAAOxX,KAAK0nD,GACdlwC,aAAgBmJ,EACnBnJ,EAAKqnC,OAELrnC,EAAK7I,SAAU,GAIP04C,0BAAV,SAAyBtjC,EAAsBE,GAC9Cnd,YAAMod,wBAAeH,EAAUE,GAE3BzU,EAAYiT,SAAUsB,GACnBvU,EAAYiT,SAAUwB,IAC3BjkB,KAAK4nD,cAGFp4C,EAAYiT,SAAUwB,IACzBjkB,KAAK6nD,iBAKER,oBAAV,WACC,MAAO,uBAGDA,eAAP,SAA4BzlD,GAC3B,MAAO,WAAYA,MApHXqlD,mBC1BV,4DAQA,OAJUnnD,OACCkoD,oBAAV,WACC,MAAO,mCAFCnxB,mBCJV,4DAQA,OAJU/2B,OACCmoD,oBAAV,WACC,MAAO,kCAFCrH,mBCJV,4DAQA,OAJU9gD,OACCooD,oBAAV,WACC,MAAO,uCAFCtF,mBCJV,4DAOA,OAJU9iD,OACCqoD,oBAAV,WACC,MAAO,mCAFCrF,mBCHV,4DAQA,OAJUhjD,OACCsoD,oBAAV,WACC,MAAO,kCAFCnyB,ICSGoyB,GAAyB,WACrCrxB,GAAOgsB,gBAAe,SAAEphD,GACvB,OAAIylD,GAAoBpE,aAAcrhD,GAC9B,IAAIylD,GAAqBzlD,GAE1B,QAGRwlD,GAAqBpE,gBAAe,SAAEphD,GACrC,OAAIi1B,GAAeosB,aAAcrhD,GACzB,IAAIomD,GAA8BpmD,GAEnC,QAGRwlD,GAAqBpE,gBAAe,SAAEphD,GACrC,OAAIg/C,GAAcqC,aAAcrhD,GACxB,IAAIqmD,GAA6BrmD,GAElC,QAGRwlD,GAAqBpE,gBAAe,SAAEphD,GACrC,OAAIghD,GAAmBK,aAAcrhD,GAC7B,IAAIsmD,GAAkCtmD,GAEvC,QAGRwlD,GAAqBpE,gBAAe,SAAEphD,GACrC,OAAIkhD,GAAeG,aAAcrhD,GACzB,IAAIumD,GAA8BvmD,GAEnC,QAGRwlD,GAAqBjE,uBAAsB,SAAEvhD,GAC5C,OAAO,IAAIwmD,GAA6BxmD,sBClD1C,4DAQA,OAJU9B,OACCwoD,oBAAV,WACC,MAAO,0BAFCzxB,mBCHV,4DAYA,OARU/2B,OACCyoD,yBAAV,WACC,OAAO,MAGEA,oBAAV,WACC,MAAO,yBANC3H,mBCFV,4DAwBA,OApBU9gD,OACC0oD,sBAAV,SAAqB5mD,KAIX4mD,yBAAV,SAAwB/5B,EAAc/S,EAAwBkb,GAC7D9vB,YAAMo6C,uBAAczyB,EAAO/S,EAAMkb,GACjC,IAAMpB,EAAYx1B,KAAK01B,eACnBF,GACHA,EAAUhI,IAAK9R,IAIP8sC,mBAAV,SAAkB7H,GACjBA,EAAK5I,KAAM/3C,KAAMA,OAGRwoD,oBAAV,WACC,MAAO,yBAlBCtG,mBCPV,4DAQA,OAJUpiD,OACC2oD,oBAAV,WACC,MAAO,8BAFC7F,mBCJV,4DAOA,OAJU9iD,OACC4oD,oBAAV,WACC,MAAO,0BAFC5F,mBCHV,4DAQA,OAJUhjD,OACC6oD,oBAAV,WACC,MAAO,yBAFC1yB,kBCFV,cAwBA,OApBQ2yB,iBAAP,SAAuB3xB,GACtBj3B,KAAKk3B,SAAS12B,KAAMy2B,IAGd2xB,wBAAP,SAA8B3xB,GAC7Bj3B,KAAKm3B,gBAAkBF,GAGjB2xB,UAAP,SAAuBhnD,EAAuC21B,GAC7D,OAAOP,GAAOS,UAAWz3B,KAAKk3B,SAAUl3B,KAAKm3B,gBAAiBv1B,EAAS21B,IACtEP,GAAOY,QAASh2B,EAAS21B,IAGpBqxB,WAAP,SACC5nD,EACA02B,EACAH,GAEAP,GAAOe,WAAY/3B,KAAMgB,EAAQ02B,EAAOH,IArBxBqxB,WAA+B,GAC/BA,kBAA2C,UCShDC,GAAoB,WAChCD,GAAYzF,uBAAsB,SAAEvhD,GACnC,OAAO,IAAI+mD,GAAoB/mD,MAGhCgnD,GAAY5F,gBAAe,SAAEphD,GAC5B,OAAIkhD,GAAeG,aAAcrhD,GACzB,IAAI8mD,GAAqB9mD,GAE1B,QAGRgnD,GAAY5F,gBAAe,SAAEphD,GAC5B,OAAIghD,GAAmBK,aAAcrhD,GAC7B,IAAI6mD,GAAyB7mD,GAE9B,QAGRgnD,GAAY5F,gBAAe,SAAEphD,EAAqC21B,GACjE,OAAI2qB,GAAce,aAAcrhD,GACxB,IAAI4mD,GAAoBtG,GAAcgB,iBAAkBthD,EAAS21B,IAElE,QAGRqxB,GAAY5F,gBAAe,SAAEphD,GAC5B,OAAIg/C,GAAcqC,aAAcrhD,GACxB,IAAI2mD,GAAoB3mD,GAEzB,QAGRgnD,GAAY5F,gBAAe,SAAEphD,GAC5B,OAAIi1B,GAAeosB,aAAcrhD,GACzB,IAAI0mD,GAAqB1mD,GAE1B,uBC/CT,cAwBA,OApBQknD,iBAAP,SAAuB7xB,GACtBj3B,KAAKk3B,SAAS12B,KAAMy2B,IAGd6xB,wBAAP,SAA8B7xB,GAC7Bj3B,KAAKm3B,gBAAkBF,GAGjB6xB,UAAP,SAAuBlnD,EAAuC21B,GAC7D,OAAOP,GAAOS,UAAWz3B,KAAKk3B,SAAUl3B,KAAKm3B,gBAAiBv1B,EAAS21B,IACtEqxB,GAAYhxB,QAASh2B,EAAS21B,IAGzBuxB,WAAP,SACC9nD,EACA02B,EACAH,GAEAP,GAAOe,WAAY/3B,KAAMgB,EAAQ02B,EAAOH,IArBxBuxB,WAA+B,GAC/BA,kBAA2C,yBCH7D,4DAcA,OAVUhpD,OACCipD,qBAAV,SAAoBvxC,EAAiB+f,EAAiB51B,EAAcC,GACpD,MAAXA,GAAoC,MAAjBA,EAAQ81B,OAC9BoxB,GAA0BnB,SAAUnwC,EAAM5V,EAAQ81B,MAAOH,IAIjDwxB,oBAAV,WACC,MAAO,+BARC1B,mBCLV,4DAQA,OAJUvnD,OACCkpD,oBAAV,WACC,MAAO,wCAFChB,mBCLV,4DAQA,OAJUloD,OACCmpD,oBAAV,WACC,MAAO,uCAFCrI,mBCJV,4DAQA,OAJU9gD,OACCopD,oBAAV,WACC,MAAO,kCAFChH,mBCFV,4DAYA,OARUpiD,OACCqpD,mBAAV,SAAkBxI,GACjBA,EAAK5I,KAAM/3C,KAAMA,OAGRmpD,oBAAV,WACC,MAAO,uCANCD,mBCLV,4DAQA,OAJUppD,OACCspD,oBAAV,WACC,MAAO,8BAFClB,mBCJV,4DAOA,OAJUpoD,OACCupD,oBAAV,WACC,MAAO,wCAFClB,mBCHV,4DAQA,OAJUroD,OACCwpD,oBAAV,WACC,MAAO,uCAFClB,ICWGmB,GAA8B,WAC1CX,GAAY5F,gBAAe,SAAEphD,GAC5B,OAAIylD,GAAoBpE,aAAcrhD,GAC9B,IAAImnD,GAA0BnnD,GAE/B,QAGRknD,GAA0B9F,gBAAe,SAAEphD,GAC1C,OAAIi1B,GAAeosB,aAAcrhD,GACzB,IAAIonD,GAAmCpnD,GAExC,QAGRknD,GAA0B9F,gBAAe,SAAEphD,GAC1C,OAAIg/C,GAAcqC,aAAcrhD,GACxB,IAAIqnD,GAAkCrnD,GAEvC,QAGRknD,GAA0B9F,gBAAe,SACxCphD,EAAqC21B,GAErC,OAAI2qB,GAAce,aAAcrhD,GACxB,IAAIunD,GAAkCjH,GAAcgB,iBAAkBthD,EAAS21B,IAEhF,QAGRuxB,GAA0B9F,gBAAe,SAAEphD,GAC1C,OAAIghD,GAAmBK,aAAcrhD,GAC7B,IAAIwnD,GAAuCxnD,GAE5C,QAGRknD,GAA0B9F,gBAAe,SAAEphD,GAC1C,OAAIkhD,GAAeG,aAAcrhD,GACzB,IAAIynD,GAAmCznD,GAExC,QAGRknD,GAA0B3F,uBAAsB,SAAEvhD,GACjD,OAAO,IAAI0nD,GAAkC1nD,OC3DlC4nD,GAAkB,WAC9BzG,KACAsF,KACAQ,KACAU,MCDYE,GAAsE,I/BRnF,SAAYrG,GACXA,uBACAA,6BACAA,6CACAA,2BACAA,2CACAA,mBACAA,qBACAA,qBACAA,iBACAA,qBACAA,oBACAA,wCACAA,+BAbD,CAAYA,KAAAA,QgCUL,ICNKsG,GDMCC,GAET,ICRJ,SAAYD,GACXA,mBACAA,uBACAA,iDACAA,iDACAA,2DACAA,wBACAA,wCACAA,wCACAA,yBACAA,yCACAA,yCACAA,mCACAA,mCACAA,0CAdD,CAAYA,KAAAA,QCDZ,ICHYE,iBDGZ,cAiCA,OAhCQC,mBAAP,SAAyB78B,GACxB,IAAM88B,EAAsB98B,EAAQ08B,GAAkBK,oBAAsB,EAAI,EAC1EC,EAAsBh9B,EAAQ08B,GAAkBO,oBAAsB,EAAI,EAC1EC,EAAyBl9B,EAAQ08B,GAAkBS,yBAA2B,EAAI,EACxF,OAAIn9B,EAAQ08B,GAAkBU,eACtBN,EAAoBE,EAAoBE,EAExCJ,EAAoBE,GAItBH,SAAP,SACCnpD,EAAgBu3B,EAAqBjL,EAA0BxqB,GAkB/D,OAhBAA,EAAO8D,IAAK,EAAI5F,EAAQ,GACpBssB,EAAQ08B,GAAkBU,iBACzBp9B,EAAQ08B,GAAkBW,OAC7B7nD,EAAO8D,IAAK2xB,EAAaA,GACfjL,EAAQ08B,GAAkBY,eACpC9nD,EAAO8D,IAAK2xB,EAA2B,GAAdA,GACfjL,EAAQ08B,GAAkBa,eACpC/nD,EAAO8D,IAAK2xB,EAA2B,EAAdA,GACfjL,EAAQ08B,GAAkBc,OACpChoD,EAAO8D,IAAmB,EAAd2xB,EAAiBA,GACnBjL,EAAQ08B,GAAkBe,eACpCjoD,EAAO8D,IAAmB,EAAd2xB,EAA+B,GAAdA,GACnBjL,EAAQ08B,GAAkBgB,gBACpCloD,EAAO8D,IAAmB,EAAd2xB,EAA+B,EAAdA,IAGxBz1B,SClCT,SAAYonD,GACXA,iBACAA,mBACAA,qBACAA,uBAJD,CAAYA,KAAAA,QCOZ,ICPYe,GCGAC,iBFkBX,WAAa5pD,EAA4B2T,EAA6BK,EAAcgY,GACnFhtB,KAAK6qD,GAAU7pD,EACfhB,KAAK2qB,GAAM,EACX3qB,KAAK8qD,GAAU,CAAE,EAAG,EAAG,EAAG,GAC1B9qD,KAAK+qD,GAAY,GACjB/qD,KAAKusB,GAASS,EACdhtB,KAAKgrD,GAAQh2C,EACbhV,KAAKmc,GAAYxH,EAEjB3U,KAAKirD,GAAezjD,IACpBxH,KAAKkrD,GAAsB1jD,IAC3BxH,KAAKmrD,GAAsB3jD,IAC3BxH,KAAKorD,GAAmB5jD,IA8L1B,OA3LW6jD,4BAAV,SAA2Br2C,EAAcL,EAA6B22C,EAAeC,GACpF,GAAI,GAAKv2C,EACR,OAAOA,EAEP,OAAQL,GACR,KAAKi1C,GAAkBx9C,IACvB,KAAKw9C,GAAkBt9C,OACtB,OAAO3C,KAAKwP,IAAKoyC,GAClB,KAAK3B,GAAkBl9C,MACvB,KAAKk9C,GAAkBp9C,KACtB,OAAO7C,KAAKwP,IAAKmyC,GAElB,OAAO,GAICD,mBAAV,WACC,IAAMG,EAAaxrD,KAAK6qD,GAAQ71C,KAC1By2C,EAAcD,EAAWplD,EACzBslD,EAAcF,EAAWnlD,EACzBsO,EAAW3U,KAAKmc,GAChBnH,EAAOhV,KAAKgrD,GAClB,GAAIhrD,KAAKirD,KAAiBj2C,GAAQhV,KAAKkrD,KAAwBO,GAC9DzrD,KAAKmrD,KAAwBO,GAAe1rD,KAAKorD,KAAqBz2C,EAAW,CACjF3U,KAAK2qB,IAAO,EACZ3qB,KAAKirD,GAAej2C,EACpBhV,KAAKkrD,GAAsBO,EAC3BzrD,KAAKmrD,GAAsBO,EAC3B1rD,KAAKorD,GAAmBz2C,EACxB,IAAMg3C,EAAqB,GAAdF,EACPG,EAAqB,GAAdF,EACPG,EAAe7rD,KAAK8rD,gBAAiB92C,EAAML,EAAU82C,EAAaC,GAClEK,EAAS/rD,KAAK8qD,GACpB,OAAQn2C,GACR,KAAKi1C,GAAkBx9C,IACtB2/C,EAAQ,GAAM,EACdA,EAAQ,IAAOH,EACfG,EAAQ,GAAM,EACdA,EAAQ,IAAOH,EAAOC,EACtB,MACD,KAAKjC,GAAkBl9C,MACtBq/C,EAAQ,GAAMJ,EACdI,EAAQ,GAAM,EACdA,EAAQ,GAAMJ,EAAOE,EACrBE,EAAQ,GAAM,EACd,MACD,KAAKnC,GAAkBt9C,OACtBy/C,EAAQ,GAAM,EACdA,EAAQ,GAAMH,EACdG,EAAQ,GAAM,EACdA,EAAQ,GAAMH,EAAOC,EACrB,MACD,KAAKjC,GAAkBp9C,KACtBu/C,EAAQ,IAAOJ,EACfI,EAAQ,GAAM,EACdA,EAAQ,IAAOJ,EAAOE,EACtBE,EAAQ,GAAM,KAMjBvsD,sBAAI6rD,0BAAJ,WACC,OAAO,mCAGR7rD,sBAAI6rD,sBAAJ,WAEC,OADArrD,KAAKsB,SACEtB,KAAK2qB,oCAGbnrB,sBAAI6rD,0BAAJ,WAEC,OADArrD,KAAKsB,SACEtB,KAAK8qD,QAGb,SAAYiB,qCAIZvsD,sBAAI6rD,4BAAJ,WACC,OAAOrrD,KAAK+qD,QAGb,SAAciB,qCAIdxsD,sBAAI6rD,wBAAJ,WACC,OAAOrrD,KAAKgrD,QAGb,SAAUh2C,GACThV,KAAKyiD,YAAQlgD,EAAWyS,OAAMzS,oCAG/B/C,sBAAI6rD,4BAAJ,WACC,OAAOrrD,KAAKmc,QAGb,SAAcxH,GACb3U,KAAKyiD,OAAQ9tC,OAAUpS,OAAWA,oCAGnC/C,sBAAI6rD,yBAAJ,WACC,OAAOrrD,KAAKusB,QAGb,SAAWS,GACVhtB,KAAKyiD,YAAQlgD,OAAWA,EAAWyqB,oCAGpCq+B,iBAAA,SAAM76C,GACL,OAAIA,aAAkB66C,EACdrrD,KAAKyiD,OAAQjyC,EAAOmE,SAAUnE,EAAOwE,KAAMxE,EAAOwc,OAElDhtB,KAAKyiD,YAAQlgD,OAAWA,EAAWiO,EAAOwc,QAInDq+B,gBAAA,SAAKY,EAAsBC,EAAwBC,GAClD,IAAIC,EACAC,EACJ,GAAiB,MAAbJ,EAAoB,CACvB,IAAM3jD,EAAK2jD,EAAW,GACtB,GAAW,IAAP3jD,EAAW,CACd,IAAME,EAAKyjD,EAAW,GACtBG,EAAgB5jD,GAAM,EAAIohD,GAAkBx9C,IAAMw9C,GAAkBt9C,OACpE+/C,EAAU1iD,KAAKwP,IAAK8yC,EAAW,GAAMzjD,QAErC4jD,EAAgB9jD,GAAM,EAAIshD,GAAkBp9C,KAAOo9C,GAAkBl9C,MACrE2/C,EAAU1iD,KAAKwP,IAAK8yC,EAAW,GAAM3jD,GAGvC,OAAOtI,KAAKyiD,OAAQ2J,EAAaC,EAASF,IAGjCd,mBAAV,SAAkB12C,EAA8BK,EAAegY,GAC9D,IAAI3oB,GAAY,EAqBhB,OAnBa,MAAT2oB,GAAiBhtB,KAAKusB,KAAWS,IACpChtB,KAAKusB,GAASS,EACd3oB,GAAY,GAGG,MAAZsQ,GAAoB3U,KAAKmc,KAAcxH,IAC1C3U,KAAKmc,GAAYxH,EACjBtQ,GAAY,GAGD,MAAR2Q,GAAgBhV,KAAKgrD,KAAUh2C,IAClChV,KAAKgrD,GAAQh2C,EACb3Q,GAAY,GAGTA,GACHrE,KAAK6qD,GAAQyB,iBAGPtsD,MAGRqrD,kBAAA,SAAOrqD,GACN,OAAO,IAAIqqD,EAAiBrqD,EAAQhB,KAAKmc,GAAWnc,KAAKgrD,GAAOhrD,KAAKusB,KAGtE8+B,qBAAA,SAAUpvC,GAGT,IAFA,IAAMzZ,EAAkB,GAClBupD,EAAS/rD,KAAK+rD,OACXxqD,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,EAAMD,GAAK,EAAI,CACxD,IAAMwE,EAAQ,IAAI6hB,QAAOmkC,EAAQxqD,EAAI,GAAKwqD,EAAQxqD,EAAI,IACtDiB,EAAOhC,KAAMyb,EAAUoL,MAAOthB,EAAOA,IAEtC,OAAOvD,GAGR6oD,sBAAA,SAAWkB,GACV,OAAOA,EAAQ/+B,IAAK,IAAIxtB,KAAKmc,OAAanc,KAAKgrD,OAAShrD,KAAKusB,SAG9D8+B,wBAAA,SAAamB,EAAoBD,GAChC,GAAI,GAAKC,GAAcA,EAAaD,EAAQzhB,UAAUpqC,OAAS,CAC9D,IAAM+rD,EAAWF,EAAQzhB,UAAW0hB,GAC9BE,EAAS70B,KAAK80B,MAAOF,GAC3BzsD,KAAKyiD,OAAQiK,EAAQ,GAAKA,EAAQ,GAAKA,EAAQ,YC5NlD,SAAY/B,GACXA,mBACAA,2BACAA,6BACAA,iCACAA,mCACAA,iBACAA,wBACAA,mBACAA,sBACAA,kBAVD,CAAYA,KAAAA,QCGZ,SAAYC,GACXA,mBACAA,iBACAA,qBACAA,uBACAA,mBACAA,iCACAA,mCACAA,wCACAA,yCACAA,kBAVD,CAAYA,KAAAA,QCDZ,ICkBYgC,GCTAC,GAoBAC,iBF7BZ,cAoBA,OAnBQC,gBAAwB,EAExBA,aAAqB,SACrBA,aAAqB,GACrBA,eAAuB,QACvBA,oBAA4B,QAC5BA,qBAA6B,SAC7BA,eAAuB,EACvBA,eAAuB,EACvBA,eAAuB,EACvBA,cAAsBnC,GAAiB5D,IACvC+F,aAAqB,GACrBA,cAAsB,OACtBA,YAAoB,GACpBA,SAAiB,GACjBA,SAAiB,IACjBA,SAAiB,IACjBA,SAAiB,IACjBA,kBAA0B,2BGfjC,aACC/sD,KAAK+rD,OAAS,GAiFhB,OA9ECiB,gBAAA,SAAKv+B,EAA0B7tB,GAC9B,IAAMmrD,EAAS/rD,KAAK+rD,OACP,MAATnrD,EACHmrD,EAAOx5C,OAAQ3R,EAAO,EAAG6tB,GAEzBs9B,EAAOvrD,KAAMiuB,IAIfu+B,mBAAA,SAAQjB,GAGP,IAFA,IAAMkB,EAAUlB,EACVmB,EAAeltD,KAAK+rD,OACjBxqD,EAAI,EAAGC,EAAOyrD,EAAQvsD,OAAQa,EAAIC,IAAQD,EAClD2rD,EAAa1sD,KAAMysD,EAAQ1rD,KAI7ByrD,oBAAA,SAASlsD,GAIR,IAHA,IAAMirD,EAAS/rD,KAAK+rD,OAGXxqD,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EAEjD,GADcwqD,EAAQxqD,KACRT,EACb,OAAOS,EAKT,IAASA,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EAEjD,GADcwqD,EAAQxqD,GACZ4rD,SAAUrsD,GACnB,OAAOS,EAIT,OAAQ,GAGTyrD,gBAAA,SAAKpsD,GACJ,IAAM4B,EAASxC,KAAK+rD,OAAQnrD,GAC5B,OAAc,MAAV4B,EACIA,EAED,MAGRwqD,gBAAA,SAAKpsD,EAAe6tB,GACnBzuB,KAAK+rD,OAAQnrD,GAAU6tB,GAGxBu+B,mBAAA,SAAQpsD,GACPZ,KAAK+rD,OAAOx5C,OAAQ3R,EAAO,IAG5BosD,kBAAA,WACChtD,KAAK+rD,OAAOrrD,OAAS,GAGtBssD,iBAAA,WACC,OAAOhtD,KAAK+rD,OAAOrrD,QAGpBssD,iBAAA,SAAMI,EAAgBC,GACrB,IAAMtB,EAAS/rD,KAAK+rD,OACduB,EAAMvB,EAAQsB,GACpBtB,EAAQsB,GAAWtB,EAAQqB,GAC3BrB,EAAQqB,GAAWE,GAGpBN,sBAAA,SAAWT,GAGV,IAFA,IAAM/pD,EAAmB,GACnBupD,EAAS/rD,KAAK+rD,OACXxqD,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EACjDiB,EAAOhC,KAAMurD,EAAQxqD,GAAIgsD,UAAWhB,IAErC,OAAO/pD,SFlET,SAAYoqD,GACXA,mBACAA,6BACAA,mBACAA,qBACAA,uBACAA,wBACAA,sBACAA,kBARD,CAAYA,KAAAA,QCTZ,SAAYC,GACXA,mBACAA,+BACAA,+BACAA,2BACAA,2BACAA,+BACAA,oCACAA,sDACAA,gCACAA,gDACAA,uBACAA,iCACAA,yBACAA,uBACAA,qBACAA,sBACAA,0BAjBD,CAAYA,KAAAA,QAoBZ,SAAYC,GACXA,mBACAA,yBACAA,yBACAA,mBACAA,eACAA,0BACAA,gCAPD,CAAYA,KAAAA,QAUZ,IErCYU,GCDAC,iBH0DX,WAAaC,GACZ,IAAMzxC,EAAYyxC,EAAMzxC,UAClBtH,EAAWsH,EAAUtH,SAC3B3U,KAAKoG,EAAIuO,EAASvO,EAClBpG,KAAKqG,EAAIsO,EAAStO,EAClBrG,KAAKgV,KAAO,IAAI4S,QAAO8lC,EAAM14C,KAAK5O,EAAGsnD,EAAM14C,KAAK3O,GAChDrG,KAAK2tD,SAAW1xC,EAAU0xC,SAC1B3tD,KAAK4tD,QAAU,GACf5tD,KAAK+rB,KAAO2hC,EAAM3hC,KAAK8hC,WACvB7tD,KAAK8tD,OAASJ,EAAMI,OAAOD,WAC3B7tD,KAAKgpB,KAAO0kC,EAAM1kC,KAAK6kC,WACvB7tD,KAAKogB,OAASstC,EAAMttC,OACpBpgB,KAAK+tD,MAAQlB,GAAmBxuC,KAChCre,KAAKguD,QAAUnB,GAAmBxuC,KAClCre,KAAKiuD,OAASzmD,IACdxH,KAAKsC,MAAQwqD,GAAmBzuC,KAChCre,KAAKue,aAAc,EAiKrB,OA9JC2vC,2BAAA,SAAgBR,EAAe93C,GACxB83C,EAAMS,UACJnuD,KAAKsC,MAAQwqD,GAAmBsB,UACtCpuD,KAAKsC,OAASwqD,GAAmBuB,QAAUvB,GAAmBsB,QAC9D/tD,EAAciB,OAAQosD,KAKzBQ,8BAAA,SAAmBR,EAAe93C,GACjC,OAAO,GAGRs4C,0BAAA,SAAeR,EAAe93C,GAC7B83C,EAAMY,SAAU,GAGjBJ,yBAAA,SAAcR,EAAe93C,GAC5B83C,EAAMY,SAAU,GAGjBJ,0BAAA,SAAeR,EAAe93C,GAC7B,IAAM1U,EAAQb,EAAcsZ,SAAU+zC,GAOtC,GANO1tD,KAAKsC,MAAQwqD,GAAmByB,OACtCvuD,KAAKsC,OAASwqD,GAAmBuB,QAAUvB,GAAmByB,KAAOzB,GAAmB78C,QACpF/O,GACHA,EAAMI,UAGJJ,EAAQ,CACX,IAAMolB,EAAkBplB,EAAMgiB,qBAC9BoD,EAAgBnD,WAAYmD,EAAgBC,oBAAqBmnC,IAAS,GAAM,KAIlFQ,wBAAA,SAAaR,EAAe93C,GACpB5V,KAAKsC,MAAQwqD,GAAmB0B,KACtCxuD,KAAKsC,OAASwqD,GAAmBuB,QAAUvB,GAAmB0B,GAC9DxuD,KAAKsC,QAAUwqD,GAAmB78C,QAClC5P,EAAciB,OAAQosD,KAIxBQ,0BAAA,SAAeR,EAAe93C,KAI9Bs4C,sBAAA,SAAWR,EAAe93C,GAIzB,OAHID,EAAkBggB,cAAe/f,IACpC5V,KAAKyuD,cAAef,IAEd,GAGRQ,oBAAA,SAASR,EAAe93C,GAKvB,OAJID,EAAkBggB,cAAe/f,KACpC5V,KAAK0uD,YAAahB,GAClB1tD,KAAK2uD,eAAgBjB,KAEf,GAGRQ,0BAAA,SAAeR,EAAe3pC,EAAsBE,GACnDjkB,KAAKsC,OAASwqD,GAAmBuB,QACjChuD,EAAciB,OAAQosD,IAGvBQ,mBAAA,SAAQR,EAAevc,GACtB,IAAMyd,EAAMlB,EAAMkB,IACZC,EAAmB7uD,KAAKiuD,QAAU9c,GACpCyd,EAAIvqD,WAAcrE,KAAKsC,MAAQwqD,GAAmBuB,SAAYQ,KAC7DA,IACH7uD,KAAKiuD,OAASzmD,KAEfkmD,EAAMoB,yBACN9uD,KAAK+uD,SAAUrB,EAAOvc,GACtBuc,EAAMsB,sBACNhvD,KAAKsC,OAASwqD,GAAmBmC,WACjCL,EAAIvqD,WAAY,IAIR6pD,qBAAV,SAAoBR,EAAevc,GAC9B,EAAInxC,KAAK4tD,QAAQltD,SACpBV,KAAKkvD,eAAgBxB,EAAOvc,GAC5BnxC,KAAKmvD,yBAA0BzB,KAIvBQ,2BAAV,SAA0BR,EAAevc,GACxCnxC,KAAKguD,QAAUnB,GAAmBxuC,KAElC,IADA,IAAMuvC,EAAU5tD,KAAK4tD,QACZrsD,EAAI,EAAGC,EAAOosD,EAAQltD,OAAQa,EAAIC,IAAQD,EAClDqsD,EAASrsD,GAAI6tD,QAAS1B,EAAO1tD,KAAMmxC,IAI3B+c,qCAAV,SAAoCR,GACnC,IAAM5sD,GAAWd,KAAKguD,QAAWhuD,KAAK+tD,MACtC,GAAIjtD,IAAW+rD,GAAmBxuC,KAAO,CAUxC,GATIvd,EAAS+rD,GAAmBwC,aAC/B3B,EAAMzxC,UAAUtH,SAASvO,EAAIpG,KAAKoG,GAE/BtF,EAAS+rD,GAAmByC,aAC/B5B,EAAMzxC,UAAUtH,SAAStO,EAAIrG,KAAKqG,GAE/BvF,EAAS+rD,GAAmB0C,aAC/B7B,EAAM/+C,SAAU,GAEb7N,EAAS+rD,GAAmB2C,WAAa,CAC5C,IAAMzjC,EAAO/rB,KAAK+rB,KAClB2hC,EAAM3hC,KAAKzlB,SACV/D,EACAwpB,EAAK7pB,MACL6pB,EAAK3pB,OAGP,GAAItB,EAAS+rD,GAAmB4C,aAAe,CAC9C,IAAM3B,EAAS9tD,KAAK8tD,OACpBJ,EAAMI,OAAOxnD,SACZ/D,EACAurD,EAAO5rD,MACP4rD,EAAO1rD,OAGT,GAAItB,EAAS+rD,GAAmB6C,WAAa,CAC5C,IAAM1mC,EAAOhpB,KAAKgpB,KAClB0kC,EAAM1kC,KAAK1iB,SACV/D,EACAymB,EAAK9mB,MACL8mB,EAAK5mB,OAGP,GAAItB,EAAS+rD,GAAmB8C,mBAAqB,CACpD,IAAMprD,EAAUvE,KAAKgpB,KAAKzkB,QAC1BmpD,EAAM1kC,KAAKzkB,QAAQ+B,SAClB/D,EACAgC,EAAQrC,MACRqC,EAAQnC,OAGNtB,EAAS+rD,GAAmB+C,SAC/BlC,EAAM14C,KAAK3O,EAAIrG,KAAKgV,KAAK3O,GAEtBvF,EAAS+rD,GAAmBgD,QAC/BnC,EAAM14C,KAAK5O,EAAIpG,KAAKgV,KAAK5O,GAEtBtF,EAAS+rD,GAAmBiD,WAC/BpC,EAAMzxC,UAAU0xC,SAAW3tD,KAAK2tD,UAE7B7sD,EAAS+rD,GAAmBj4B,OAC/B84B,EAAM1kC,KAAKyF,MAAQzuB,KAAKgpB,KAAKyF,OAE1B3tB,EAAS+rD,GAAmBkD,SAC/BrC,EAAMttC,OAASpgB,KAAKogB,8BIpNvB,WAAapf,GAAb,MACC8F,0BACAG,EAAK+oD,kBAAoB,IAAIzZ,SAC7BtvC,EAAK4jD,GAAU7pD,IAoDjB,OA3DyClB,OAU9BmwD,qBAAV,WACEC,YAAUhwD,UAAkBwC,SAASK,KAAM/C,MAC5CA,KAAK6qD,GAAQsF,qBAGJF,uBAAV,WACEC,YAAUhwD,UAAkBkwD,WAAWrtD,KAAM/C,MAC9CA,KAAK6qD,GAAQsF,qBAGdF,8BAAA,WACC,OAAQjwD,KAAaqwD,iBAGtBJ,uBAAA,WACC,OAAQjwD,KAAaswD,UAGtBL,wBAAA,WACC,OAAQjwD,KAAauwD,WAGtBN,uBAAA,WACC,OAAQjwD,KAAawwD,UAGtBP,4BAAA,SAAiBQ,GAChB,IAAMC,EAAc1wD,KAAaqwD,gBAC3BM,EAAc3wD,KAAawwD,SACjC1pD,YAAM+f,0BAAiB4pC,GACvB,IAAMG,EAAc5wD,KAAaqwD,gBAC3BQ,EAAc7wD,KAAawwD,SACjC,GAAIE,IAAeE,EAAa,CAC/B,IAAMv9B,EAAiBrzB,KAAKqzB,eACtB28B,EAAoBhwD,KAAKgwD,kBAC/B38B,EAAey9B,OAAQd,GACnBS,aAA2BR,GAC9BD,EAAkBe,QAASN,EAAgBT,wBAElCW,IAAeE,IACnBx9B,EAAiBrzB,KAAKqzB,eACtB28B,EAAoBhwD,KAAKgwD,kBAC3BS,aAA2BR,IAC9B58B,EAAey9B,OAAQd,GAAoBe,QAASN,EAAgBT,mBACnEhwD,KAAaqwD,iBAAmB,EAChCrwD,KAAaswD,SAAYtwD,KAAaqwD,sBAvDFH,2BCdzC,cAiFA,OAhFQc,oBAAP,SAA0BC,GAGzB,IAFA,IAAMC,EAASD,EAASC,OACpB1uD,EAAS,IAAIyuD,EAASnN,UACjBviD,EAAI,EAAGC,EAAO0vD,EAAOxwD,OAAQ0R,EAAI,EAAG7Q,EAAIC,EAAMD,GAAK,EAAG6Q,GAAK,EAAI,CACvE,IAAMrM,EAAQmrD,EAAQ3vD,GACtBiB,GAAU,IAAIuD,EAAM7D,UAAS6D,EAAM3D,UAAS2D,EAAM4O,SAGnD,OADAnS,EAAU,KAIJwuD,gBAAP,SAAsBlwD,GACrB,IACC,OAAO+2B,KAAK80B,MAAO7rD,GAClB,MAAO8U,GACR,OAAO,OAIFo7C,sBAAP,SAA4BlwD,GAC3B,IAAM4rD,EAAS1sD,KAAKmxD,cAAerwD,GACnC,KAAc,MAAV4rD,GAAkBA,EAAOhsD,OAAS,GAAtC,CAKC,IAFA,IAAMojD,EAAY4I,EAAQ,GACpBwE,EAAoC,GACjC3vD,EAAI,EAAGC,EAAOkrD,EAAOhsD,OAAQa,EAAIC,EAAMD,GAAK,EACpD2vD,EAAO1wD,KAAK,CACX0B,MAAOwqD,EAAQnrD,EAAI,GACnBa,MAAOsqD,EAAQnrD,EAAI,GACnBoT,SAAU+3C,EAAQnrD,EAAI,KAGxB,MAAO,CACN2vD,SACApN,eAKIkN,eAAP,SAAqBC,EAA0C1E,GAC9D,OAAgB,MAAZ0E,GACwB,MAAvBA,EAASG,aACZH,EAASG,WAAapxD,KAAKqxD,kBAAmBJ,IAExC1E,EAAQ/+B,IAAKyjC,EAASG,cAEtB,GAGFJ,qBAAP,SAA2BC,GAK1B,IAJA,IAAMnN,EAAYmN,EAASnN,UACrBoN,EAASD,EAASC,OAEpBI,EAAQ,GACH/vD,EAAI,EAAGC,EAAO0vD,EAAOxwD,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMwE,EAAQmrD,EAAQ3vD,GAChBW,EAAQi6C,GAAQoV,OAAQxrD,EAAM7D,OAC9BE,EAAQ2D,EAAM3D,MAEpBkvD,GAAS,iBADuB,IAAjBvrD,EAAM4O,4BAC8BzS,qBAAwBE,SAG5E,IAAMovD,EAAS1N,EAAYn6C,KAAK8nD,GAAK,IAC/Bv4C,EAAK,GAAMvP,KAAK+nD,IAAKF,GACrBp4C,GAAM,GAAMzP,KAAKgoD,IAAKH,GAa5B,MAXY,6BAA+B1lB,KAC1C,qIAE6C,GAAM5yB,aAAW,GAAMA,aAAW,GAAME,aAAW,GAAMA,QACnGk4C,EACD,4ICIJ,WAAa9+C,GAAb,MACC1L,0BACAG,EAAK+wB,GAAK,GACV/wB,EAAKuL,KAAOA,EACZvL,EAAKgV,UAAYhV,EAAK2qD,eACtB3qD,EAAK4qD,GAAyB,EAC9B5qD,EAAK6qD,IAAwB,EAC7B7qD,EAAK8qD,OAAS,IAAI/E,GAClB/lD,EAAK+qD,IAAW,EAChB/qD,EAAKgrD,GAAsB,EAC3BhrD,EAAKirD,IAAqB,EAC1BjrD,EAAKkrD,IAAgC,EAErClrD,EAAKmrD,GAAqB5qD,IAC1BP,EAAKorD,GAA6B7qD,IAClCP,EAAKqrD,GAA0B9qD,IAE/BP,EAAKmX,GAASnX,EAAKqX,GAAcha,EAAWkf,YAC5Cvc,EAAKsX,aAAc,EAGnBtX,EAAKjG,OAAS,KACdiG,EAAKwZ,SAAW,GAGhBxZ,EAAKsrD,UAAW,EAChBtrD,EAAKrG,MAAQ,EACbqG,EAAKurD,UAAY,IAsuBnB,OA1zByC1yD,OAuF9B2yD,yBAAV,WACC,OAAO,IAAIxC,GAAqBjwD,OAGjCyyD,yBAAA,WACCzyD,KAAKoyD,GAAqB5qD,IAC1BxH,KAAKqyD,GAA6B7qD,IAClCxH,KAAKsyD,GAA0B9qD,IAE/BxH,KAAK0yD,KACL1yD,KAAKssD,kBAGNmG,8BAAA,WACCzyD,KAAK0yD,KACL1yD,KAAK2yD,6BAGIF,eAAV,WACC,GAAoC,IAAhCzyD,KAAK6xD,GAA+B,CACvC,IAAMnwC,EAAS1hB,KAAKgB,OACN,MAAV0gB,GACHA,EAAOkxC,8BAGR5yD,KAAK8xD,IAAwB,GAI/BW,sCAAA,WACCzyD,KAAK6xD,IAA0B,EACK,IAAhC7xD,KAAK6xD,KACR7xD,KAAK8xD,IAAwB,IAI/BW,mCAAA,SAAwBI,GACvB7yD,KAAK6xD,IAA0B,EACK,IAAhC7xD,KAAK6xD,IACJ7xD,KAAK8xD,KACR9xD,KAAK8xD,IAAwB,EACzBe,GACH7yD,KAAKmwD,sBAMTsC,mCAAA,aAIAA,mCAAA,WACCzyD,KAAKiyD,IAAuB,EACK,IAA7BjyD,KAAKiyD,KACRjyD,KAAKkyD,IAAqB,EAC1BlyD,KAAKmyD,IAAgC,IAIvCM,gCAAA,WACCzyD,KAAKiyD,IAAuB,EACK,IAA7BjyD,KAAKiyD,KACJjyD,KAAKmyD,IACRnyD,KAAKmyD,IAAgC,EACrCnyD,KAAKkyD,IAAqB,EAC1BlyD,KAAK2yD,6BACK3yD,KAAKkyD,KACflyD,KAAKkyD,IAAqB,EAC1BlyD,KAAKssD,oBAKRmG,sCAAA,WACC,GAAiC,IAA7BzyD,KAAKiyD,GAA4B,CACpCjyD,KAAKssD,iBAEL,IADA,IAAM7rC,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIoxD,iCAGf3yD,KAAKmyD,IAAgC,GAIvCM,2BAAA,WACC,GAAiC,IAA7BzyD,KAAKiyD,GAA4B,CACpC,IAAMa,EAAW9yD,KAAK8yD,SACN,MAAZA,GACHA,EAASxxD,OAAQtB,WAGlBA,KAAKkyD,IAAqB,GAK5B1yD,sBAAIizD,wBAAJ,WAEC,IADA,IAAIM,EAAe/yD,KACZ+yD,EAAK/xD,kBAAkByxD,GAC7BM,EAAOA,EAAK/xD,OAEb,OAAO+xD,mCAIRvzD,sBAAIizD,2BAAJ,WACC,IAAMzxD,EAAShB,KAAKgB,OACpB,OAAIA,aAAkByxD,EACdzxD,EAAO2N,SAAW3O,KAAKgyD,GAEvBhyD,KAAKgyD,QAId,SAAarjD,GACR3O,KAAKgyD,KAAarjD,IACrB3O,KAAKgyD,GAAWrjD,EAChB3O,KAAK2yD,8DAQPF,oBAAA,WACC,IAAMzxD,EAAShB,KAAKgB,OACN,MAAVA,GACHA,EAAO2c,WAKT80C,mBAAA,SAAQzxD,EAAkCgyD,GACzChzD,KAAKizD,SACLjzD,KAAKgB,OAASA,EACd,IAAMyf,EAAWzf,EAAOyf,SASxB,OARU,MAANuyC,GAAc,GAAKA,GAAMA,EAAKvyC,EAAS/f,OAC1C+f,EAASlO,OAAQygD,EAAI,EAAGhzD,MAExBygB,EAASjgB,KAAMR,MAEhBA,KAAK8yD,cAAWvwD,EAChBvB,EAAO4xD,yBACP5xD,EAAO2c,UACA3d,MAGRyyD,mBAAA,WACC,IAAMzxD,EAAShB,KAAKgB,OACpB,GAAc,MAAVA,EAAiB,CACpBhB,KAAKgB,OAAS,KACdhB,KAAK8yD,cAAWvwD,EAChB,IAAMke,EAAWzf,EAAOyf,SAClB7f,EAAQ6f,EAAS5f,QAASb,MAC5B,GAAKY,IACR6f,EAASlO,OAAQ3R,EAAO,GACxBI,EAAO4xD,yBACP5xD,EAAO2c,WAGT,OAAO3d,MAIRyyD,4BAAA,WACC,IAAMzxD,EAAShB,KAAKgB,OACN,MAAVA,GACHA,EAAO6lB,kBACP7mB,KAAKic,UAAU4K,gBAAgB7lB,EAAOib,YAEtCjc,KAAKic,UAAU4K,gBAAiBqpC,YAAkBgD,WAKpDT,8BAAA,SAAmBlG,GAGlB,IAFA,IAAM9rC,EAAWzgB,KAAKygB,SAChB0yC,EAAqB,GAClB5xD,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAG,CACtD,IAAMmf,EAAQD,EAASlf,GACvB4xD,EAAmB3yD,KAAKkgB,EAAM6sC,UAAUhB,IAEzC,OAAO4G,GAGRV,2BAAA,SAAgBlG,GACf,IAAM16B,EAAQ7xB,KAAK6xB,MACnB,OAAiB,MAATA,EAAgB06B,EAAQ/+B,IAAKqE,EAAMgH,MAAS,GAGrD45B,8BAAA,SAAmBlG,GAClB,OAAOyE,GAAgBoC,aAAcpzD,KAAKixD,SAAU1E,IAGrDkG,sBAAA,SAAWlG,GACV,IAAMtwC,EAAYjc,KAAKic,UACjBtH,EAAWsH,EAAUtH,SACrB0+C,EAAQp3C,EAAUo3C,MAClBr+C,EAAOhV,KAAKgV,KACZ0B,EAAW1W,KAAK0W,SAChB48C,EAA2B,MAAZ58C,EAAmB61C,EAAQ/+B,IAAK9W,IAAc,EAC7DoI,EAAQ9e,KAAK8e,MACby0C,EAAqB,MAATz0C,EAAgBytC,EAAQ/+B,IAAK1O,IAAW,EAC1D,MAAO,CACN9e,KAAKwS,KACL+5C,EAAQ/+B,IAAIxtB,KAAKg4B,IACjBrjB,EAASvO,EACTuO,EAAStO,EACT2O,EAAK5O,EACL4O,EAAK3O,EACL4V,EAAU0xC,SACV1xC,EAAUQ,KAAKrW,EACfpG,KAAK+rB,KAAKwhC,UAAWhB,GACrBvsD,KAAK8tD,OAAOP,UAAWhB,GACvBA,EAAQ/+B,IAAKxtB,KAAKogB,OAAO9J,QACzBtW,KAAKgpB,KAAKukC,UAAWhB,GACrBvsD,KAAK4uD,IAAIrB,UAAWhB,GACpBvsD,KAAKiE,OACLjE,KAAK+D,QACJ,GACA,EACD/D,KAAK+xD,OAAOxE,UAAWhB,GACvBvsD,KAAKwzD,eAAgBjH,GACrBvsD,KAAKqxD,kBAAmB9E,GACxBvsD,KAAKyzD,kBAAmBlH,GACxB8G,EAAMjtD,EACNitD,EAAMhtD,GACJrG,KAAKue,YAAc,EAAI,IAAQve,KAAK0zD,YAAc,EAAI,GACxDJ,EACAC,IAKFd,qBAAA,SAAU1sD,GACT,IAAMK,EAAIL,EAAMK,EACVC,EAAIN,EAAMM,EACV2O,EAAOhV,KAAKgV,KACZ2+C,EAAK,GAAM3+C,EAAK5O,EAChBwtD,EAAK,GAAM5+C,EAAK3O,EAChBgtD,EAAQrzD,KAAKic,UAAUo3C,MACvBn6C,EAAK9S,EAAIitD,EAAMjtD,EACfgT,EAAK/S,EAAIgtD,EAAMhtD,EACfynD,EAAS9tD,KAAK8tD,OACdr8C,EAAIq8C,EAAO5qD,MAAQ4qD,EAAO1qD,MAChC,GAAI,GAAKuwD,GACR,GAAI,GAAKC,GACR,GAAI5zD,KAAK6zD,aAAa36C,GAAKE,GAAKu6C,EAAKliD,GAAImiD,EAAKniD,GAC7C,OAAOzR,UAGR,GAAIA,KAAK6zD,aAAa36C,GAAKE,GAAKu6C,EAAKliD,GAAImiD,EAAKniD,GAC7C,OAAOzR,UAIT,GAAI,GAAK4zD,GACR,GAAI5zD,KAAK6zD,aAAa36C,GAAKE,GAAKu6C,EAAKliD,GAAImiD,EAAKniD,GAC7C,OAAOzR,UAGR,GAAIA,KAAK6zD,aAAa36C,GAAKE,GAAKu6C,EAAKliD,GAAImiD,EAAKniD,GAC7C,OAAOzR,KAKV,OAAOA,KAAK8zD,aAAc1tD,EAAGC,EAAGN,IAC/B/F,KAAK+zD,iBAAkB3tD,EAAGC,EAAGN,IAGrB0sD,yBAAV,SAAwBrsD,EAAWC,EAAW8gB,GAC7C,IAAM6B,EAAOhpB,KAAKgpB,KAElB,GAAiB,MADCA,EAAKC,MACC,CACvB,IAAM+qC,EAAYhrC,EAAKirC,MACvB,GAAiB,MAAbD,EAAoB,CACvB7sC,EAAK7gB,IAAKF,EAAGC,GACbrG,KAAKic,UAAU+zC,kBAAkB3oC,MAAOF,EAAMA,GAC9C,IAAM+sC,EAAK/sC,EAAK/gB,EAAI4tD,EAAW,GACzBG,EAAKhtC,EAAK9gB,EAAI2tD,EAAW,GACzBI,EAAKJ,EAAW,GAAME,EAAKF,EAAW,GAAMG,EAC5CE,EAAKL,EAAW,GAAME,EAAKF,EAAW,GAAMG,EAClD,GAAI,GAAKC,GAAMA,GAAMJ,EAAW,IAAO,GAAKK,GAAMA,GAAML,EAAW,GAClE,OAAOh0D,MAIV,OAAO,MAGEyyD,6BAAV,SAA4BrsD,EAAWC,EAAW8gB,GAEjD,IADA,IAAM1G,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC/C,IAAMmf,EAAQD,EAAUlf,GACxB4lB,EAAK7gB,IAAKF,EAAGC,GACbqa,EAAMmG,kBACNnG,EAAMzE,UAAUoX,eAAe3L,aAAcP,EAAMA,GACnD,IAAMmtC,EAAc5zC,EAAM1H,SAAUmO,GACpC,GAAmB,MAAfmtC,EACH,OAAIt0D,KAAKu0D,SACDv0D,KAEAs0D,EAIV,OAAO,MAGR7B,yBAAA,SAAc1sD,GACb,IAAMK,EAAIL,EAAMK,EACVC,EAAIN,EAAMM,EACV2O,EAAOhV,KAAKgV,KACZ2+C,EAAK,GAAM3+C,EAAK5O,EAChBwtD,EAAK,GAAM5+C,EAAK3O,EAChBgtD,EAAQrzD,KAAKic,UAAUo3C,MACvBn6C,EAAK9S,EAAIitD,EAAMjtD,EACfgT,EAAK/S,EAAIgtD,EAAMhtD,EACfynD,EAAS9tD,KAAK8tD,OACdr8C,EAAIq8C,EAAO5qD,MAAQ4qD,EAAO1qD,MAChC,OAAI,GAAKuwD,EACJ,GAAKC,EACD5zD,KAAKw0D,iBAAiBt7C,GAAKE,GAAKu6C,EAAKliD,GAAImiD,EAAKniD,GAE9CzR,KAAKw0D,iBAAiBt7C,GAAKE,GAAKu6C,EAAKliD,GAAImiD,EAAKniD,GAGlD,GAAKmiD,EACD5zD,KAAKw0D,iBAAiBt7C,GAAKE,GAAKu6C,EAAKliD,GAAImiD,EAAKniD,GAE9CzR,KAAKw0D,iBAAiBt7C,GAAKE,GAAKu6C,EAAKliD,GAAImiD,EAAKniD,IAKxDghD,wBAAA,SAAarsD,EAAWC,EAAWouD,EAAYC,GAC9C,OAAO10D,KAAKw0D,gBAAiBpuD,EAAGC,EAAGouD,EAAIC,IAGxCjC,4BAAA,SAAiBrsD,EAAWC,EAAWouD,EAAYC,GAClD,OAASD,GAAMruD,GAAKA,IAAMquD,IAAOC,GAAMruD,GAAKA,IAAMquD,GAGnDjC,mBAAA,SAAQ1sD,GACP,OAAO,GAIR0sD,qBAAA,SAAU99C,EAAkB5O,EAAc4uD,GAMzC,OALmB,IAAfA,GACH30D,KAAK6mB,kBAEN9gB,EAAMQ,SAAUoO,GAChB3U,KAAKic,UAAU+K,eAAeK,MAAOthB,EAAOA,GACrCA,GAGR0sD,oBAAA,SACC99C,EACAxC,EACApM,EACA4uD,GAUA,OARmB,IAAfA,GACH30D,KAAK6mB,uBAEQtkB,IAAVwD,IACHA,EAAQ,IAAI6hB,SAEb7hB,EAAMQ,SAAUoO,GAChB3U,KAAKic,UAAU+K,eAAeU,aAAc3hB,EAAcA,GACnDA,GAGR0sD,sBAAA,SAAWtrC,EAAawtC,EAAqBnyD,IACzB,IAAfmyD,GACH30D,KAAK6mB,kBAEN,IAAMI,EAASjnB,KAAKknB,QAAYlnB,KAAKknB,SAAW,IAAIyL,YAC9CiiC,EAAU50D,KAAKic,UAAU44C,aAM/B,OALID,IAAY50D,KAAKoyD,KACpBpyD,KAAKoyD,GAAqBwC,EAC1B50D,KAAK80D,GAAY90D,KAAKic,UAAU+K,eAAgBG,EAAMF,IAEvDzkB,EAAO+D,SAAU0gB,GACVzkB,GAGRiwD,8BAAA,SAAmBtrC,EAAawtC,EAAqBnyD,IACjC,IAAfmyD,GACH30D,KAAK6mB,kBAEN,IAAMkuC,EAAiB/0D,KAAKg1D,GAAoBh1D,KAAKg1D,IAAmB,IAAIriC,YACtEsiC,EAAiBj1D,KAAKic,UAAUi5C,oBAMtC,OALID,IAAmBj1D,KAAKqyD,KAC3BryD,KAAKqyD,GAA6B4C,EAClCj1D,KAAK80D,GAAY90D,KAAKic,UAAU+zC,kBAAmB7oC,EAAM4tC,IAE1DvyD,EAAO+D,SAAUwuD,GACVvyD,GAGRiwD,2BAAA,SAAgBtrC,EAAawtC,EAAqBnyD,IAC9B,IAAfmyD,GACH30D,KAAK6mB,kBAEN,IAAMsuC,EAAcn1D,KAAKo1D,GAAiBp1D,KAAKo1D,IAAgB,IAAIziC,YAC7DsiC,EAAiBj1D,KAAKic,UAAUi5C,oBAMtC,OALID,IAAmBj1D,KAAKsyD,KAC3BtyD,KAAKsyD,GAA0B2C,EAC/Bj1D,KAAK80D,GAAY90D,KAAKic,UAAUoX,eAAgBlM,EAAMguC,IAEvD3yD,EAAO+D,SAAU4uD,GACV3yD,GAGEiwD,0BAAV,WACC,OAAOzyD,KAAKgV,MAGHy9C,eAAV,SAAsBx2C,EAAmBkL,EAAa3kB,GACrD,IAAM6wD,EAAQrzD,KAAKic,UAAUo3C,MACvBgC,EAAKhC,EAAMjtD,EACXkvD,EAAKjC,EAAMhtD,EACX2O,EAAOhV,KAAKu1D,gBACZ5B,EAAK,GAAM3+C,EAAK5O,EAChBwtD,EAAK,GAAM5+C,EAAK3O,EAEhBojB,EAAIxN,EAAUwN,EACdlqB,EAAI0c,EAAU1c,EACdsJ,EAAIoT,EAAUpT,EACdvJ,EAAI2c,EAAU3c,EAEhB8G,GAAKutD,EAAK0B,EACVhvD,GAAKutD,EAAK0B,EACRhtD,EAAKmhB,EAAIrjB,EAAIyC,EAAIxC,EACjBmC,EAAKjJ,EAAI6G,EAAI9G,EAAI+G,EAIjBkC,EAAKkhB,GAFXrjB,GAAKutD,EAAK0B,GAESxsD,GADnBxC,GAAKutD,EAAK0B,GAEJ7sD,EAAKlJ,EAAI6G,EAAI9G,EAAI+G,EAIjBwD,EAAK4f,GAFXrjB,GAAKutD,EAAK0B,GAESxsD,GADnBxC,GAAKutD,EAAK0B,GAEJtrD,EAAKzK,EAAI6G,EAAI9G,EAAI+G,EAIjB0D,EAAK0f,GAFXrjB,GAAKutD,EAAK0B,GAESxsD,GADnBxC,GAAKutD,EAAK0B,GAEJrrD,EAAK1K,EAAI6G,EAAI9G,EAAI+G,EAEjBmvD,EAAO7rD,KAAKC,IAAKtB,EAAIC,EAAIsB,EAAIE,GAC7B0rD,EAAO9rD,KAAKC,IAAKpB,EAAIC,EAAIuB,EAAIC,GAC7ByrD,EAAO/rD,KAAKG,IAAKxB,EAAIC,EAAIsB,EAAIE,GAC7B4rD,EAAOhsD,KAAKG,IAAKtB,EAAIC,EAAIuB,EAAIC,GAKnC,OAJAzH,EAAO4D,EAAIovD,EAAOv5C,EAAUi4C,GAC5B1xD,EAAO6D,EAAIovD,EAAOx5C,EAAUk4C,GAC5B3xD,EAAOU,MAAQwyD,EAAOF,EACtBhzD,EAAOmE,OAASgvD,EAAOF,EAChBjzD,GAIRiwD,oBAAA,WAEC,IADA,IAAMhyC,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAC3Ckf,EAAUlf,GAAIomB,UAEflH,EAAS/f,OAAS,GAIT+xD,wBAAV,WACC,IAAMzxD,EAAShB,KAAKgB,OACd8iB,EAAa9jB,KAAKse,GAClByF,EAAa/iB,aAAkByxD,EACpCzyD,KAAKgkB,WAAYF,EAAY9iB,EAAO40D,YACpC9xC,EAEKG,EAAWjkB,KAAKoe,GAClB6F,IAAaF,IAChB/jB,KAAKoe,GAAS2F,EACd/jB,KAAKkkB,cAAeH,EAAUE,KAItBwuC,uBAAV,SAAsB3uC,EAAwBK,GAC7C,OAAOL,EAAcK,EAAc7f,EAAW0L,UAC5CmU,GAAe7f,EAAWsL,QAAUtL,EAAWuL,YAAcvL,EAAWuL,WAAavL,EAAW+Z,OAGzFo0C,0BAAV,SAAyB1uC,EAAkBE,GAC1C,IAAM4xC,EAAU71D,KAAK61D,QACN,MAAXA,GACHA,EAAQ3xC,cAAelkB,KAAM+jB,EAAUE,GAIxC,IADA,IAAMxD,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiB+xC,GACpB/xC,EAAM0D,oBAAqBL,EAAUE,KAK9BwuC,gCAAV,SAA+BjuC,EAAwBC,GACtD,IAAMV,EAAW/jB,KAAKgkB,WAAYhkB,KAAKse,GAAakG,GAC9CP,EAAWjkB,KAAKoe,GAClB6F,IAAaF,IAChB/jB,KAAKoe,GAAS2F,EACd/jB,KAAKkkB,cAAeH,EAAUE,KAIhCwuC,qBAAA,WACC,OAAOzyD,KAAKoe,IAGbq0C,qBAAA,SAAUnwD,EAAmBmhB,GAS5B,OARIjU,EAAYC,GAAIzP,KAAKse,GAAahc,KAAYmhB,IAC7CA,EACHzjB,KAAKse,IAAehc,EAEpBtC,KAAKse,KAAgBhc,EAEtBtC,KAAK+f,eAEC/f,MAGRyyD,qBAAA,SAAUnwD,GACT,OAAOkN,EAAYC,GAAIzP,KAAKoe,GAAQ9b,IAGrCmwD,kBAAA,WAEC,OADAzyD,KAAKqjB,SAAU,EACRrjB,MAGRyyD,iBAAA,WAEC,OADAzyD,KAAKqjB,SAAU,EACRrjB,MAGRR,sBAAIizD,2BAAJ,WACC,OAAOzyD,KAAKujB,SAAUjf,EAAWoL,cAGlC,SAAa2S,GACZriB,KAAK0Q,SAAUpM,EAAWoL,QAAS2S,oCAGpC7iB,sBAAIizD,0BAAJ,WACC,OAAOzyD,KAAKujB,SAAUjf,EAAWwL,aAGlC,SAAY2S,GACXziB,KAAK0Q,SAAUpM,EAAWwL,OAAQ2S,oCAGnCjjB,sBAAIizD,4BAAJ,WACC,OAAOzyD,KAAKujB,SAAUjf,EAAW4L,gBAGlC,SAAcyS,GACb3iB,KAAK0Q,SAAUpM,EAAW4L,UAAWyS,oCAGtCnjB,sBAAIizD,2BAAJ,WACC,OAASzyD,KAAKujB,SAAUjf,EAAW0L,2CAGpCxQ,sBAAIizD,4BAAJ,WACC,OAAOzyD,KAAKujB,SAAUjf,EAAW0L,eAGlC,SAAc4S,GACb5iB,KAAK0Q,SAAUpM,EAAW0L,SAAU4S,oCAGrCpjB,sBAAIizD,4BAAJ,WACC,OAAOzyD,KAAKujB,SAAUjf,EAAWqL,eAGlC,SAAckT,GACb7iB,KAAK0Q,SAAUpM,EAAWqL,SAAUkT,oCAGrCrjB,sBAAIizD,2BAAJ,WACC,OAAOzyD,KAAKujB,SAAUjf,EAAWsL,cAGlC,SAAayT,GACZ,GAAIrjB,KAAKqjB,UAAYA,EAAU,CAC9B,IAAMniB,EAAQb,EAAcsZ,SAAU3Z,MAClCkB,GACHA,EAAMgiB,qBAAqBC,WAAYnjB,KAAMqjB,GAAS,qCAKzD7jB,sBAAIizD,6BAAJ,WACC,OAAOzyD,KAAKujB,SAAUjf,EAAWsL,QAAUtL,EAAWuL,6CAGvDrQ,sBAAIizD,+BAAJ,WACC,OAAOzyD,KAAKujB,SAAUjf,EAAWkf,kBAGlC,SAAiBsyC,GAChB91D,KAAK0Q,SAAUpM,EAAWkf,YAAasyC,oCAGxCt2D,sBAAIizD,2BAAJ,WACC,IAAMoD,EAAU71D,KAAK61D,QACrB,SAAYA,GAAYA,EAAQvzD,MAAQwqD,GAAmBsB,0CAG5D5uD,sBAAIizD,2BAAJ,WACC,IAAMoD,EAAU71D,KAAK61D,QACrB,SAAYA,GAAYA,EAAQvzD,MAAQwqD,GAAmB78C,0CAG5DzQ,sBAAIizD,wBAAJ,WACC,IAAMoD,EAAU71D,KAAK61D,QACrB,SAAYA,GAAYA,EAAQvzD,MAAQwqD,GAAmByB,uCAG5D/uD,sBAAIizD,sBAAJ,WACC,IAAMoD,EAAU71D,KAAK61D,QACrB,SAAYA,GAAYA,EAAQvzD,MAAQwqD,GAAmB0B,qCAG5DhvD,sBAAIizD,4BAAJ,WACC,OAAO,mCAGRA,uBAAA,SAAY78C,GACX,IAAMigD,EAAU71D,KAAK61D,QACrB,OAAe,MAAXA,GACIA,EAAQE,kBAAmB/1D,OAKpCyyD,uBAAA,SAAY78C,GACX,IAAMigD,EAAU71D,KAAK61D,QACrB,GAAe,MAAXA,EACH,OAAOA,EAAQlH,eAAgB3uD,OAIjCyyD,sBAAA,SAAW78C,GACV,IAAMigD,EAAU71D,KAAK61D,QACrB,OAAe,MAAXA,GACIA,EAAQhgC,UAAW71B,KAAM4V,IAKlC68C,oBAAA,SAAS78C,GACR,IAAMigD,EAAU71D,KAAK61D,QACrB,OAAe,MAAXA,GACIA,EAAQG,QAASh2D,KAAM4V,IAMhC68C,mBAAA,SAAQthB,GACP,IAAM0kB,EAAU71D,KAAK61D,QACN,MAAXA,GACHA,EAAQv0D,OAAQtB,KAAMmxC,IAIxBshB,8BAAA,SAAmBthB,GAClBnxC,KAAKsB,OAAQ6vC,GAGb,IADA,IAAM1wB,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAID,OAAQ6vC,IAIxBshB,iBAAA,SAAMjiD,EAAgBylD,GAErB,gBAFqBA,EAAuBrJ,GAAe5F,KAC3DhnD,KAAKg4B,GAAKxnB,EAAOwnB,GACyB,IAArCi+B,EAAOrJ,GAAesJ,WAAmB,CAC7C,IAAMj6C,EAAYjc,KAAKic,UACjBk6C,EAAkB3lD,EAAOyL,UAC/BA,EAAUtH,SAASpO,SAAU4vD,EAAgBxhD,UAC7CsH,EAAU0xC,SAAWwI,EAAgBxI,SACrC1xC,EAAUQ,KAAKlW,SAAU4vD,EAAgB15C,MACzCR,EAAUo3C,MAAM9sD,SAAU4vD,EAAgB9C,OAC1Cp3C,EAAUK,MAAM/V,SAAU4vD,EAAgB75C,OAsB3C,GApBqC,IAAhC25C,EAAOrJ,GAAe74C,OAC1B/T,KAAKgV,KAAKzO,SAAUiK,EAAOwE,MAEU,IAAjCihD,EAAOrJ,GAAewJ,SAC1Bp2D,KAAK+rB,KAAKu1B,KAAM9wC,EAAOub,MACvB/rB,KAAK8tD,OAAOxM,KAAM9wC,EAAOs9C,QACzB9tD,KAAK4uD,IAAItN,KAAM9wC,EAAOo+C,KACtB5uD,KAAKgpB,KAAKs4B,KAAM9wC,EAAOwY,MACvBhpB,KAAKiE,OAASuM,EAAOvM,OACrBjE,KAAK+D,OAASyM,EAAOzM,OACH,MAAd/D,KAAK6xB,QACR7xB,KAAK6xB,MAAQrhB,EAAOqhB,QAGiB,IAAlCokC,EAAOrJ,GAAeyJ,UAC1Br2D,KAAK+xD,OAAOuE,OAAQ9lD,EAAOuhD,OAAOhG,QAClC/rD,KAAKue,YAAc/N,EAAO+N,YAC1Bve,KAAKogB,OAAS5P,EAAO4P,OACrBpgB,KAAK0W,SAAWlG,EAAOkG,UAEe,IAAlCu/C,EAAOrJ,GAAe2J,QAAgB,CAC1C,IAAMC,EAAehmD,EAAO0gD,OAC5B,GAAoB,MAAhBsF,EAAuB,CAC1B,IAAMtF,EAASlxD,KAAKkxD,OACN,MAAVA,EACHA,EAAO5P,KAAMkV,GAEbx2D,KAAKkxD,OAASsF,EAAaC,MAAOz2D,OAOrC,OAHsC,IAAjCi2D,EAAOrJ,GAAe8J,QAC1B12D,KAAK0Q,SAAUF,EAAOolD,YAAY,GAE5B51D,SAxzBgCs7B,QAAMoU,4BCb9C,WAAa1uC,EAA8B21D,EAAiBz0D,EAAeE,GAC1EpC,KAAK6qD,GAAU7pD,EACfhB,KAAK42D,GAAUD,EACf32D,KAAKiC,EAASC,EACdlC,KAAKmC,EAASC,EAqGhB,OAlGC5C,sBAAIq3D,0BAAJ,WACC,OAAO72D,KAAK42D,QAGb,SAAYD,GACP32D,KAAK42D,KAAYD,IACpB32D,KAAK42D,GAAUD,EACf32D,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIq3D,yBAAJ,WACC,OAAO72D,KAAKiC,OAGb,SAAWC,GACNlC,KAAKiC,IAAWC,IACnBlC,KAAKiC,EAASC,EACdlC,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIq3D,yBAAJ,WACC,OAAO72D,KAAKmC,OAGb,SAAWC,GACNpC,KAAKmC,IAAWC,IACnBpC,KAAKmC,EAASC,EACdpC,KAAK6qD,GAAQyB,mDAIfuK,iBAAA,SAAM/1D,GACLd,KAAKsG,IAAKxF,EAAO61D,OAAQ71D,EAAOoB,MAAOpB,EAAOsB,QAG/Cy0D,gBAAA,SAAKF,EAAkBz0D,EAAgBE,GACtC,IAAIiC,GAAY,OAED9B,IAAXo0D,GAAwB32D,KAAK42D,KAAYD,IAC5C32D,KAAK42D,GAAUD,EACftyD,GAAY,QAGC9B,IAAVL,GAAuBlC,KAAKiC,IAAWC,IAC1ClC,KAAKiC,EAASC,EACdmC,GAAY,QAGC9B,IAAVH,GAAuBpC,KAAKmC,IAAWC,IAC1CpC,KAAKmC,EAASC,EACdiC,GAAY,GAGTA,GACHrE,KAAK6qD,GAAQyB,kBAIfuK,kBAAA,WACC,OAAO,IAAIA,EAAgB72D,KAAK6qD,GAAS7qD,KAAK42D,GAAS52D,KAAKiC,EAAQjC,KAAKmC,IAG1E00D,qBAAA,WACC,MAAO,CACNF,OAAQ32D,KAAK42D,GACb10D,MAAOlC,KAAKiC,EACZG,MAAOpC,KAAKmC,IAId00D,sBAAA,SAAWtK,GACV,IAAMuK,EAAc,KAAI92D,KAAK42D,GAAU,EAAI,OAAK52D,KAAKiC,MAAUjC,KAAKmC,MACpE,OAAOoqD,EAAQ/+B,IAAKspC,IAGrBD,wBAAA,SAAa/1D,EAAgByrD,GAC5B,IAAMzhB,EAAYyhB,EAAQzhB,UAC1B,GAAI,GAAKhqC,GAAUA,EAASgqC,EAAUpqC,OAAS,CAC9C,IAAMgsD,EAASH,EAAQwK,MAAMj7C,IAAKhb,GAClC,GAAc,MAAV4rD,EACH1sD,KAAKsG,IACY,IAAhBomD,EAAQ,GACRA,EAAQ,GACRA,EAAQ,QAEH,CACN,IAAMsK,EAAen/B,KAAK80B,MAAO7hB,EAAWhqC,IAC5CyrD,EAAQwK,MAAMzwD,IAAKxF,EAAQk2D,GAC3Bh3D,KAAKsG,IACkB,IAAtB0wD,EAAc,GACdA,EAAc,GACdA,EAAc,0BCjGlB,WACCh2D,EACA21D,EAAiBz0D,EAAeE,EAChCc,EAAeE,EAAe6zD,GAE9Bj3D,KAAK6qD,GAAU7pD,EACfhB,KAAK42D,GAAUD,EACf32D,KAAKiC,EAASC,EACdlC,KAAKmC,EAASC,EACdpC,KAAKiD,EAASC,EACdlD,KAAKmD,EAASC,EACdpD,KAAKk3D,GAAQD,EAqKf,OAlKCz3D,sBAAI23D,0BAAJ,WACC,OAAOn3D,KAAK42D,QAGb,SAAYD,GACP32D,KAAK42D,KAAYD,IACpB32D,KAAK42D,GAAUD,EACf32D,KAAK6qD,GAAQyB,mDAIf9sD,sBAAI23D,yBAAJ,WACC,OAAOn3D,KAAKiC,OAGb,SAAWC,GACNlC,KAAKiC,IAAWC,IACnBlC,KAAKiC,EAASC,EACdlC,KAAK6qD,GAAQyB,mDAIf9sD,sBAAI23D,yBAAJ,WACC,OAAOn3D,KAAKmC,OAGb,SAAWC,GACNpC,KAAKmC,IAAWC,IACnBpC,KAAKmC,EAASC,EACdpC,KAAK6qD,GAAQyB,mDAIf9sD,sBAAI23D,yBAAJ,WACC,OAAOn3D,KAAKiD,OAGb,SAAWC,GACNlD,KAAKiD,IAAWC,IACnBlD,KAAKiD,EAASC,EACdlD,KAAK6qD,GAAQyB,mDAIf9sD,sBAAI23D,yBAAJ,WACC,OAAOn3D,KAAKmD,OAGb,SAAWC,GACNpD,KAAKmD,IAAWC,IACnBpD,KAAKmD,EAASC,EACdpD,KAAK6qD,GAAQyB,mDAIf9sD,sBAAI23D,wBAAJ,WACC,OAAOn3D,KAAKk3D,QAGb,SAAUD,GACLj3D,KAAKk3D,KAAUD,IAClBj3D,KAAKk3D,GAAQD,EACbj3D,KAAK6qD,GAAQyB,mDAIf6K,iBAAA,SAAMr2D,GACDA,GACHd,KAAKsG,IAAKxF,EAAO61D,OAAQ71D,EAAOoB,MAAOpB,EAAOsB,MAAOtB,EAAOoC,MAAOpC,EAAOsC,MAAOtC,EAAOm2D,OAI1FE,gBAAA,SAAKR,EAAkBz0D,EAAgBE,EAAgBc,EAAgBE,EAAgB6zD,GACtF,IAAI5yD,GAAY,OAED9B,IAAXo0D,GAAwB32D,KAAK42D,KAAYD,IAC5C32D,KAAK42D,GAAUD,EACftyD,GAAY,QAGC9B,IAAVL,GAAuBlC,KAAKiC,IAAWC,IAC1ClC,KAAKiC,EAASC,EACdmC,GAAY,QAGC9B,IAAVH,GAAuBpC,KAAKmC,IAAWC,IAC1CpC,KAAKmC,EAASC,EACdiC,GAAY,QAGC9B,IAAVW,GAAuBlD,KAAKiD,IAAWC,IAC1ClD,KAAKiD,EAASC,EACdmB,GAAY,QAGC9B,IAAVa,GAAuBpD,KAAKmD,IAAWC,IAC1CpD,KAAKmD,EAASC,EACdiB,GAAY,QAGA9B,IAAT00D,GAAsBj3D,KAAKk3D,KAAUD,IACxCj3D,KAAKk3D,GAAQD,EACb5yD,GAAY,GAGTA,GACHrE,KAAK6qD,GAAQyB,kBAIf6K,kBAAA,WACC,OAAO,IAAIA,EACVn3D,KAAK6qD,GACL7qD,KAAK42D,GAAS52D,KAAKiC,EAAQjC,KAAKmC,EAChCnC,KAAKiD,EAAQjD,KAAKmD,EAAQnD,KAAKk3D,KAIjCC,qBAAA,WACC,MAAO,CACNR,OAAQ32D,KAAK42D,GACb10D,MAAOlC,KAAKiC,EACZG,MAAOpC,KAAKmC,EACZe,MAAOlD,KAAKiD,EACZG,MAAOpD,KAAKmD,EACZ8zD,KAAMj3D,KAAKk3D,KAIbC,sBAAA,SAAW5K,GACV,IACM6E,EAAa,KADJpxD,KAAK42D,GAAU,EAAI,OACD52D,KAAKiC,MAAUjC,KAAKmC,MAAUnC,KAAKiD,MAAUjD,KAAKmD,MAAUnD,KAAKk3D,OAClG,OAAO3K,EAAQ/+B,IAAK4jC,IAGrB+F,wBAAA,SAAar2D,EAAgByrD,GAC5B,IAAMzhB,EAAYyhB,EAAQzhB,UAC1B,GAAI,GAAKhqC,GAAUA,EAASgqC,EAAUpqC,OAAS,CAC9C,IAAMgsD,EAASH,EAAQ6K,QAAQt7C,IAAKhb,GACpC,GAAc,MAAV4rD,EACH1sD,KAAKsG,IACY,IAAhBomD,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,QAEH,CACN,IAAMsK,EAAen/B,KAAK80B,MAAO7hB,EAAWhqC,IAC5CyrD,EAAQ6K,QAAQ9wD,IAAKxF,EAAQk2D,GAC7Bh3D,KAAKsG,IACkB,IAAtB0wD,EAAc,GACdA,EAAc,GACdA,EAAc,GACdA,EAAc,GACdA,EAAc,GACdA,EAAc,aNrLnB,SAAYxJ,GACXA,6BACAA,+BAFD,CAAYA,KAAAA,QCDZ,SAAYC,GACXA,mBACAA,mBACAA,eACAA,yBAJD,CAAYA,KAAAA,QMGZ,ICGY4J,GAKAC,GCdAC,GCAAC,GCAAC,iBJYX,aACCz3D,KAAK03D,GAAQjK,GAAwBpvC,KACrCre,KAAK23D,GAAQ,EACb33D,KAAK43D,GAAM,EAkNb,OA/MCp4D,sBAAIq4D,wBAAJ,WACC,OAAO73D,KAAK03D,QAGb,SAAUllD,GACT,GAAIxS,KAAK03D,KAAUllD,EAAO,CACzBxS,KAAK03D,GAAQllD,EACb,IAAMkP,EAAS1hB,KAAKgB,OACN,MAAV0gB,IACHA,EAAOrd,WAAY,qCAKtB7E,sBAAIq4D,wBAAJ,WACC,OAAO73D,KAAK23D,QAGb,SAAUxlD,GACT,GAAInS,KAAK23D,KAAUxlD,EAAO,CACzBnS,KAAK23D,GAAQxlD,EACb,IAAM0P,EAAS7hB,KAAKgB,OACN,MAAV6gB,IACHA,EAAOxd,WAAY,qCAKtB7E,sBAAIq4D,sBAAJ,WACC,OAAO73D,KAAK43D,QAGb,SAAQE,GACP,GAAI93D,KAAK43D,KAAQE,EAAK,CACrB93D,KAAK43D,GAAME,EACX,IAAM31C,EAASniB,KAAKgB,OACN,MAAVmhB,IACHA,EAAO9d,WAAY,qCAKtBwzD,gBAAA,SAAK1lD,EAAsB2lD,GAC1B,IAAIt1D,GAAS,EACb,QAAaD,IAAT4P,QAA6B5P,IAAPu1D,EACzB,GAAa,OAAT3lD,GAAwB,OAAP2lD,EAAc,CAClC,IAAMtlD,EAAQxS,KAAK03D,GAAQjK,GAAwBsK,KAAQtK,GAAwBuK,GAC/Eh4D,KAAK03D,KAAUllD,GAAQxS,KAAK23D,KAAUxlD,GAAQnS,KAAK43D,KAAQE,IAC9D93D,KAAK03D,GAAQllD,EACbxS,KAAK23D,GAAQxlD,EACbnS,KAAK43D,GAAME,EACXt1D,GAAS,QAES,OAAT2P,GACJK,GAAQxS,KAAK03D,GAAQjK,GAAwBsK,OAAUtK,GAAwBuK,GACjFh4D,KAAK03D,KAAUllD,GAAQxS,KAAK23D,KAAUxlD,IACzCnS,KAAK03D,GAAQllD,EACbxS,KAAK23D,GAAQxlD,EACb3P,GAAS,IAEO,OAAPs1D,GACJtlD,GAAQxS,KAAK03D,GAAQjK,GAAwBuK,KAAQvK,GAAwBsK,KAC/E/3D,KAAK03D,KAAUllD,GAAQxS,KAAK23D,KAAUxlD,IACzCnS,KAAK03D,GAAQllD,EACbxS,KAAK43D,GAAME,EACXt1D,GAAS,KAGJgQ,EAAOxS,KAAK03D,KAAWjK,GAAwBuK,GAAKvK,GAAwBsK,MAC9E/3D,KAAK03D,KAAUllD,IAClBxS,KAAK03D,GAAQllD,EACbhQ,GAAS,cAGQD,IAAT4P,EACG,OAATA,GACGK,EAAOxS,KAAK03D,GAAQjK,GAAwBsK,KAC9C/3D,KAAK03D,KAAUllD,GAAQxS,KAAK23D,KAAUxlD,IACzCnS,KAAK03D,GAAQllD,EACbxS,KAAK23D,GAAQxlD,EACb3P,GAAS,KAGJgQ,EAAOxS,KAAK03D,IAAUjK,GAAwBsK,KAChD/3D,KAAK03D,KAAUllD,IAClBxS,KAAK03D,GAAQllD,EACbhQ,GAAS,SAGMD,IAAPu1D,IACC,OAAPA,GACGtlD,EAAOxS,KAAK03D,GAAQjK,GAAwBuK,GAC9Ch4D,KAAK03D,KAAUllD,GAAQxS,KAAK43D,KAAQE,IACvC93D,KAAK03D,GAAQllD,EACbxS,KAAK43D,GAAME,EACXt1D,GAAS,KAGJgQ,EAAOxS,KAAK03D,IAAUjK,GAAwBuK,GAChDh4D,KAAK03D,KAAUllD,IAClBxS,KAAK03D,GAAQllD,EACbhQ,GAAS,KAKZ,GAAIA,EAAS,CACZ,IAAM4f,EAASpiB,KAAKgB,OACN,MAAVohB,IACHA,EAAO/d,WAAY,GAIrB,OAAO7B,GAGRq1D,sBAAA,SAAWppC,GACV,IAAMjc,EAAOxS,KAAK03D,GACZvlD,EAAOnS,KAAK23D,GACZG,EAAK93D,KAAK43D,GAChB,OAAQplD,GACR,KAAKi7C,GAAwBwK,QAC5B,OAAQxpC,EAAQtc,IAAS2lD,EAAK3lD,GAC/B,KAAKs7C,GAAwBsK,KAC5B,OAAOtpC,EAAQtc,EAChB,KAAKs7C,GAAwBuK,GAC5B,OAAOF,EAAKrpC,EACb,KAAKg/B,GAAwBpvC,KAC7B,QACC,OAAOoQ,IAITopC,qBAAA,SAAU/2D,GACT,OACCd,KAAK03D,KAAU52D,EAAO0R,MACtBxS,KAAK23D,KAAU72D,EAAOqR,MACtBnS,KAAK43D,KAAQ92D,EAAOg3D,IAItBD,iBAAA,SAAM/2D,GACL,OAAOd,KAAKk4D,GAAOp3D,EAAO0R,KAAM1R,EAAOqR,KAAMrR,EAAOg3D,KAG3CD,eAAV,SAAiBrlD,EAA+BL,EAAc2lD,GAC7D,IAAIzzD,GAAY,EAiBhB,GAfIrE,KAAK03D,KAAUllD,IAClBxS,KAAK03D,GAAQllD,EACbnO,GAAY,GAGTrE,KAAK23D,KAAUxlD,IAClBnS,KAAK23D,GAAQxlD,EACb9N,GAAY,GAGTrE,KAAK43D,KAAQE,IAChB93D,KAAK43D,GAAME,EACXzzD,GAAY,GAGTA,EAAY,CACf,IAAMgiB,EAASrmB,KAAKgB,OACN,MAAVqlB,IACHA,EAAOhiB,WAAY,GAIrB,OAAOrE,MAGR63D,qBAAA,WACC,MAAO,CACNrlD,KAAMxS,KAAKwS,KACXL,KAAMnS,KAAKmS,KACX2lD,GAAI93D,KAAK83D,KAIXD,sBAAA,SAAWtL,GACV,IAAM6E,EAAa,IAAIpxD,KAAK03D,OAAS13D,KAAK23D,OAAS33D,KAAK43D,OACxD,OAAOrL,EAAQ/+B,IAAK4jC,IAGrByG,wBAAA,SAAa/2D,EAAgByrD,GAC5B,IAAMzhB,EAAYyhB,EAAQzhB,UAC1B,GAAI,GAAKhqC,GAAUA,EAASgqC,EAAUpqC,OAAS,CAC9C,IAAMgsD,EAASH,EAAQ4L,OAAOr8C,IAAKhb,GACnC,GAAc,MAAV4rD,EACH1sD,KAAKk4D,GACJxL,EAAQ,GACRA,EAAQ,GACRA,EAAQ,QAEH,CACN,IAAMsK,EAAen/B,KAAK80B,MAAO7hB,EAAWhqC,IAC5CyrD,EAAQ4L,OAAO7xD,IAAKxF,EAAQk2D,GAC5Bh3D,KAAKk4D,GACJlB,EAAc,GACdA,EAAc,GACdA,EAAc,YKrNboB,GAAmB,SAAE3uC,EAAWlqB,GACrC,OAAOkqB,EAAIlqB,iBAoBX,aACCS,KAAKg4B,GAAK,GACVh4B,KAAKq4D,QAAU,GACfr4D,KAAKmoC,OAAS,GACdnoC,KAAK8tC,MAAQ,IAAI+pB,GACjB73D,KAAKs1B,GAAS,EACdt1B,KAAK20C,GAAQ,EACb30C,KAAKs4D,GAAY,EACjBt4D,KAAKu4D,GAAS/K,GAAoBgL,UA0epC,OAveCh5D,sBAAIi5D,0BAAJ,WACC,OAAOz4D,KAAK6qD,QAGb,SAAY7pD,GACPhB,KAAK6qD,KAAY7pD,IACpBhB,KAAK6qD,GAAU7pD,EACfhB,KAAK8tC,MAAM9sC,OAASA,oCAItBxB,sBAAIi5D,yBAAJ,WACC,OAAOz4D,KAAKs1B,QAGb,SAAWojC,GACV,IAAM7oC,EAAY7vB,KAAK6vB,UACN,MAAbA,IACH6oC,EAAW7oC,EAAW6oC,IAGvB,IAAMlmB,EAAWxyC,KAAKs4D,GACtB,GAAI9lB,GAAY,GACf,GAAIxyC,KAAKs1B,KAAWojC,EAAW,CAC9B14D,KAAKs1B,GAASojC,EACd,IAAMh3C,EAAS1hB,KAAKgB,OACN,MAAV0gB,IACHA,EAAOrd,WAAY,QAGf,CACN,IAAI0nD,EAAS/rD,KAAK8qD,GACJ,MAAViB,IACHA,EAAS,GACT/rD,KAAK8qD,GAAUiB,GAIhB/rD,KAAKs1B,GAASojC,EAGd,IAAMC,EAAQ34D,KAAKu4D,GACfI,IAAUnL,GAAoBgL,UACjCzM,EAAOvrD,KAAMk4D,GAEb3M,EAAOjrC,QAAS43C,GAIjB,IAAM1wC,EAAQ+jC,EAAOrrD,OAAS8xC,EAC9B,GAAI,EAAIxqB,EACP,GAAI2wC,IAAUnL,GAAoBgL,UACjC,IAAK,IAAIj3D,EAAI,EAAGA,EAAIymB,IAASzmB,EAC5BwqD,EAAOp1C,aAGRo1C,EAAOrrD,OAAS8xC,EAKlB,IAAM3wB,EAAS7hB,KAAKgB,OACN,MAAV6gB,IACHA,EAAOxd,WAAY,qCAKtB7E,sBAAIi5D,0BAAJ,WACC,OAAOz4D,KAAK8tC,MAAM8qB,UAAW54D,KAAKs1B,qCAGnC91B,sBAAIi5D,0BAAJ,WACC,IAAIj2D,EAASxC,KAAK8qD,GAKlB,OAJc,MAAVtoD,IACHA,EAAS,GACTxC,KAAK8qD,GAAUtoD,GAETA,OAGR,SAAYypD,GACX,GAAI,EAAIA,EAAUvrD,OAAS,CAC1B,IAAM8xC,EAAWxyC,KAAKs4D,GACtB,GAAI9lB,GAAY,EAAI,CACnB,IAAIkmB,EAAWzM,EAAWA,EAAUvrD,OAAS,GAK7C,GAHiB,OADXmvB,EAAY7vB,KAAK6vB,aAEtB6oC,EAAW7oC,EAAW6oC,IAEnB14D,KAAKs1B,KAAWojC,EAAW,CAC9B14D,KAAKs1B,GAASojC,EACd,IAAMv2C,EAASniB,KAAKgB,OACN,MAAVmhB,IACHA,EAAO9d,WAAY,QAGf,CACN,IAAI0nD,EAAS/rD,KAAK8qD,GACJ,MAAViB,IACHA,EAAS,GACT/rD,KAAK8qD,GAAUiB,GAGhB,IACMl8B,EADA8oC,EAAQ34D,KAAKu4D,GAEnB,GAAiB,OADX1oC,EAAY7vB,KAAK6vB,WAMtB,GAHA7vB,KAAKs1B,GAASzF,EAAWo8B,EAAWA,EAAUvrD,OAAS,IAGnDi4D,IAAUnL,GAAoBgL,UACjC,IAAK,IAAIj3D,EAAI,EAAGC,EAAOyqD,EAAUvrD,OAAQa,EAAIC,IAAQD,EACpDwqD,EAAOvrD,KAAMqvB,EAAWo8B,EAAW1qD,UAGpC,IAASA,EAAI,EAAGC,EAAOyqD,EAAUvrD,OAAQa,EAAIC,IAAQD,EACpDwqD,EAAOjrC,QAAS+O,EAAWo8B,EAAW1qD,UAQxC,GAHAvB,KAAKs1B,GAAS22B,EAAWA,EAAUvrD,OAAS,GAGxCi4D,IAAUnL,GAAoBgL,UACjC,IAASj3D,EAAI,EAAGC,EAAOyqD,EAAUvrD,OAAQa,EAAIC,IAAQD,EACpDwqD,EAAOvrD,KAAMyrD,EAAW1qD,SAGzB,IAASA,EAAI,EAAGC,EAAOyqD,EAAUvrD,OAAQa,EAAIC,IAAQD,EACpDwqD,EAAOjrC,QAASmrC,EAAW1qD,IAM9B,IAAMymB,EAAQ+jC,EAAOrrD,OAAS8xC,EAC9B,GAAI,EAAIxqB,EACP,GAAI2wC,IAAUnL,GAAoBgL,UACjC,IAASj3D,EAAI,EAAGA,EAAIymB,IAASzmB,EAC5BwqD,EAAOp1C,aAGRo1C,EAAOrrD,OAAS8xC,EAKlB,IAAMpwB,EAASpiB,KAAKgB,OACN,MAAVohB,IACHA,EAAO/d,WAAY,sCAMvB7E,sBAAIi5D,wBAAJ,WACC,OAAOz4D,KAAK20C,QAGb,SAAUqB,GACT,IAAMxD,EAAWxyC,KAAKs4D,GACtB,GAAI9lB,GAAY,GACf,GAAIxyC,KAAK20C,KAAUqB,EAAU,CAC5Bh2C,KAAK20C,GAAQqB,EACb,IAAM3vB,EAASrmB,KAAKgB,OACN,MAAVqlB,IACHA,EAAOhiB,WAAY,QAGf,CAEN,IAAIw0D,EAAQ74D,KAAK84D,GACJ,MAATD,IACHA,EAAQ,GACR74D,KAAK84D,GAASD,GAIf74D,KAAK20C,GAAQqB,EAGb,IAAM2iB,EAAQ34D,KAAKu4D,GACfI,IAAUnL,GAAoBgL,UACjCK,EAAMr4D,KAAMw1C,GAEZ6iB,EAAM/3C,QAASk1B,GAIhB,IAAMhuB,EAAQ6wC,EAAMn4D,OAAS8xC,EAC7B,GAAI,EAAIxqB,EACP,GAAI2wC,IAAUnL,GAAoBgL,UACjC,IAAK,IAAIj3D,EAAI,EAAGA,EAAIymB,IAASzmB,EAC5Bs3D,EAAMliD,aAGPkiD,EAAMn4D,OAAS8xC,EAKjB,IAAMumB,EAAS/4D,KAAKgB,OACN,MAAV+3D,IACHA,EAAO10D,WAAY,qCAKtB7E,sBAAIi5D,yBAAJ,WACC,IAAIj2D,EAASxC,KAAK84D,GAKlB,OAJc,MAAVt2D,IACHA,EAAS,GACTxC,KAAK84D,GAASt2D,GAERA,OAGR,SAAWw2D,GACV,GAAI,EAAIA,EAASt4D,OAAS,CACzB,IAAM8xC,EAAWxyC,KAAKs4D,GACtB,GAAI9lB,GAAY,EAAI,CACnB,IAAMwD,EAAUgjB,EAAUA,EAASt4D,OAAS,GAC5C,GAAIV,KAAK20C,KAAUqB,EAAU,CAC5Bh2C,KAAK20C,GAAQqB,EACb,IAAMijB,EAASj5D,KAAKgB,OACN,MAAVi4D,IACHA,EAAO50D,WAAY,QAGf,CAEN,IAAIw0D,EAAQ74D,KAAK84D,GACJ,MAATD,IACHA,EAAQ,GACR74D,KAAK84D,GAASD,GAIf74D,KAAK20C,GAAQqkB,EAAUA,EAASt4D,OAAS,GAGzC,IAAMi4D,EAAQ34D,KAAKu4D,GACnB,GAAII,IAAUnL,GAAoBgL,UACjC,IAAK,IAAIj3D,EAAI,EAAGC,EAAOw3D,EAASt4D,OAAQa,EAAIC,IAAQD,EACnDs3D,EAAMr4D,KAAMw4D,EAAUz3D,SAGvB,IAASA,EAAI,EAAGC,EAAOw3D,EAASt4D,OAAQa,EAAIC,IAAQD,EACnDs3D,EAAM/3C,QAASk4C,EAAUz3D,IAK3B,IAAMymB,EAAQ6wC,EAAMn4D,OAAS8xC,EAC7B,GAAI,EAAIxqB,EACP,GAAI2wC,IAAUnL,GAAoBgL,UACjC,IAASj3D,EAAI,EAAGA,EAAIymB,IAASzmB,EAC5Bs3D,EAAMliD,aAGPkiD,EAAMn4D,OAAS8xC,EAKjB,IAAM0mB,EAASl5D,KAAKgB,OACN,MAAVk4D,IACHA,EAAO70D,WAAY,sCAMvB7E,sBAAIi5D,4BAAJ,WACC,OAAOz4D,KAAKs4D,QAGb,SAAc9lB,GACb,GAAIxyC,KAAKs4D,GAAY9lB,EACpBxyC,KAAKs4D,GAAY9lB,OACX,GAAIA,EAAWxyC,KAAKs4D,GAAY,CACtCt4D,KAAKs4D,GAAY9lB,EAEjB,IAAInuC,GAAY,EAGVs0D,EAAQ34D,KAAKu4D,GACbxM,EAAS/rD,KAAK8qD,GACpB,GAAc,MAAViB,GAEC,GADE/jC,EAAQ+jC,EAAOrrD,OAAS8xC,GACd,CACf,GAAImmB,IAAUnL,GAAoBgL,UACjC,IAAK,IAAIj3D,EAAI,EAAGA,EAAIymB,IAASzmB,EAC5BwqD,EAAOp1C,aAGRo1C,EAAOrrD,OAAS8xC,EAEjBnuC,GAAY,EAKd,IAEO2jB,EAFD6wC,EAAQ74D,KAAK84D,GACnB,GAAa,MAATD,GAEC,GADE7wC,EAAQ6wC,EAAMn4D,OAAS8xC,GACb,CACf,GAAImmB,IAAUnL,GAAoBgL,UACjC,IAASj3D,EAAI,EAAGA,EAAIymB,IAASzmB,EAC5Bs3D,EAAMliD,aAGPkiD,EAAMn4D,OAAS8xC,EAEhBnuC,GAAY,EAId,GAAIA,EAAY,CACf,IAAM80D,EAASn5D,KAAKgB,OACN,MAAVm4D,IACHA,EAAO90D,WAAY,sCAMvB7E,sBAAIi5D,yBAAJ,WACC,OAAOz4D,KAAKu4D,QAGb,SAAWI,GACV34D,KAAKu4D,GAASI,mCAGfF,mBAAA,SAAQ73D,GACP,IAAIyD,GAAY,EAGV0nD,EAAS/rD,KAAK8qD,GACN,MAAViB,GACC,GAAKnrD,GAASA,EAAQmrD,EAAOrrD,SAChCqrD,EAAOx5C,OAAQ3R,EAAO,GACtByD,GAAY,GAKd,IAAMw0D,EAAQ74D,KAAK84D,GAQnB,GAPa,MAATD,GACC,GAAKj4D,GAASA,EAAQi4D,EAAMn4D,SAC/Bm4D,EAAMtmD,OAAQ3R,EAAO,GACrByD,GAAY,GAIVA,EAAY,CACf,IAAM+0D,EAASp5D,KAAKgB,OACN,MAAVo4D,IACHA,EAAO/0D,WAAY,KAKtBo0D,sBAAA,SAAW9vD,GACV,IAAItE,GAAY,EAEV0nD,EAAS/rD,KAAK8qD,GACd+N,EAAQ74D,KAAK84D,GACbjmB,EAASlqC,EAAQ0wD,MAAM,GAAG/+B,KAAM89B,IACtC,GAAc,MAAVrM,EACH,GAAa,MAAT8M,EACH,IAAK,IAAIt3D,EAAIsxC,EAAOnyC,OAAS,EAAG,GAAKa,IAAKA,EAErC,IADEX,EAAQiyC,EAAQtxC,MAEjBX,EAAQmrD,EAAOrrD,SAClBqrD,EAAOx5C,OAAQ3R,EAAO,GACtByD,GAAY,GAETzD,EAAQi4D,EAAMn4D,SACjBm4D,EAAMtmD,OAAQ3R,EAAO,GACrByD,GAAY,SAKf,IAAS9C,EAAIsxC,EAAOnyC,OAAS,EAAG,GAAKa,IAAKA,EAErC,IADEX,EAAQiyC,EAAQtxC,KACJX,EAAQmrD,EAAOrrD,SAChCqrD,EAAOx5C,OAAQ3R,EAAO,GACtByD,GAAY,QAKf,GAAa,MAATw0D,EACH,IAASt3D,EAAIsxC,EAAOnyC,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC7C,IAAMX,EACF,IADEA,EAAQiyC,EAAQtxC,KACJX,EAAQi4D,EAAMn4D,SAC/Bm4D,EAAMtmD,OAAQ3R,EAAO,GACrByD,GAAY,GAMhB,GAAIA,EAAY,CACf,IAAMi1D,EAASt5D,KAAKgB,OACN,MAAVs4D,IACHA,EAAOj1D,WAAY,KAKtBo0D,kBAAA,WACC,IAAIp0D,GAAY,EAGV0nD,EAAS/rD,KAAK8qD,GACN,MAAViB,IACHA,EAAOrrD,OAAS,EAChB2D,GAAY,GAIb,IAAMw0D,EAAQ74D,KAAK84D,GAOnB,GANa,MAATD,IACHA,EAAMn4D,OAAS,EACf2D,GAAY,GAITA,EAAY,CACf,IAAMk1D,EAASv5D,KAAKgB,OACN,MAAVu4D,IACHA,EAAOl1D,WAAY,KAUtBo0D,iBAAA,SAAM33D,GASL,OARAd,KAAKg4B,GAAKl3B,EAAOk3B,GACjBh4B,KAAKq4D,QAAUv3D,EAAOu3D,QACtBr4D,KAAKmoC,OAASrnC,EAAOqnC,OACrBnoC,KAAK6vB,UAAY/uB,EAAO+uB,UACxB7vB,KAAK8tC,MAAMwT,KAAMxgD,EAAOgtC,OACxB9tC,KAAKs1B,GAASx0B,EAAO2tB,MACrBzuB,KAAK20C,GAAQ7zC,EAAOqwC,KACpBnxC,KAAKs4D,GAAYx3D,EAAO0xC,SACjBxyC,MAGRy4D,sBAAA,SAAWlM,GACV,IAAMiN,EAAejN,EAAQ/+B,IAAKxtB,KAAKg4B,IACjCyhC,EAAoBlN,EAAQ/+B,IAAKxtB,KAAKq4D,SACtCqB,EAAmBnN,EAAQ/+B,IAAKxtB,KAAKmoC,OAAO7xB,QAC5CqjD,EAAkB35D,KAAK8tC,MAAMyf,UAAWhB,GAC9C,OAAOA,EAAQ/+B,IACd,IAAIgsC,MAAgBC,MAAqBC,MAAoBC,MAAmB35D,KAAKs4D,OAAat4D,KAAKu4D,SAIzGE,wBAAA,SAAa33D,EAAgByrD,GAC5B,IAAMzhB,EAAYyhB,EAAQzhB,UAC1B,GAAI,GAAKhqC,GAAUA,EAASgqC,EAAUpqC,OAAS,CAC9C,IAAIgsD,EAASH,EAAQqN,UAAU99C,IAAKhb,GACtB,MAAV4rD,IACHA,EAAS70B,KAAK80B,MAAO7hB,EAAWhqC,IAChCyrD,EAAQqN,UAAUtzD,IAAKxF,EAAQ4rD,IAEhC1sD,KAAKg4B,GAAK8S,EAAW4hB,EAAQ,KAAS,GACtC1sD,KAAKq4D,QAAUvtB,EAAW4hB,EAAQ,KAAS,GAC3C1sD,KAAKmoC,OAAS2C,EAAW4hB,EAAQ,KAAS,GAC1C1sD,KAAK8tC,MAAM+rB,YAAanN,EAAQ,GAAKH,GACrCvsD,KAAKs4D,GAAY5L,EAAQ,GACzB1sD,KAAKu4D,GAAS7L,EAAQ,GAGvB,OAAO1sD,yBC5fR,aACCA,KAAK8qD,GAAU,GACf9qD,KAAKqE,WAAY,EAqUnB,OAlUC7E,sBAAIs6D,sBAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAI/zB,GAEnB,IAAM+hC,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAU/hC,GAGZ,oCAGRx4B,sBAAIs6D,2BAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAIsM,QAEnB,IAAM0B,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAU1B,QAGZ,oCAGR74D,sBAAIs6D,0BAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAI5jB,OAEnB,IAAM4xB,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAU5xB,OAGZ,oCAGR3oC,sBAAIs6D,yBAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAIje,MAEnB,IAAMisB,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAUjsB,MAGZgsB,EAAcE,6CAGtBx6D,sBAAIs6D,yBAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAIt9B,MAEnB,IAAMsrC,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAUtrC,MAGZ,OAGR,SAAWA,GACV,IAAMs9B,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACdqrD,EAAQ,GAAIt9B,MAAQA,MACd,CACN,IAAMsrC,EAAY/5D,KAAK+5D,UACN,MAAbA,IACHA,EAAUtrC,MAAQA,qCAKrBjvB,sBAAIs6D,0BAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAIkO,OAEnB,IAAMF,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAUE,OAGZ,mCAGRz6D,sBAAIs6D,wBAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAI5a,KAEnB,IAAM4oB,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAU5oB,KAGZ,OAGR,SAAUA,GACT,IAAM4a,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACdqrD,EAAQ,GAAI5a,KAAOA,MACb,CACN,IAAM4oB,EAAY/5D,KAAK+5D,UACN,MAAbA,IACHA,EAAU5oB,KAAOA,qCAKpB3xC,sBAAIs6D,0BAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAIA,OAEnB,IAAMgO,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAUhO,OAGZ+N,EAAcI,iBAGtB,SAAYjO,GACX,IAAMF,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACdqrD,EAAQ,GAAIA,OAASE,MACf,CACN,IAAM8N,EAAY/5D,KAAK+5D,UACN,MAAbA,IACHA,EAAUhO,OAASE,qCAKtBzsD,sBAAIs6D,yBAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAI8M,MAEnB,IAAMkB,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAUlB,MAGZiB,EAAcI,iBAGtB,SAAWlB,GACV,IAAMjN,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACdqrD,EAAQ,GAAI8M,MAAQG,MACd,CACN,IAAMe,EAAY/5D,KAAK+5D,UACN,MAAbA,IACHA,EAAUlB,MAAQG,qCAKrBx5D,sBAAIs6D,4BAAJ,WACC,IAAM/N,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACd,OAAOqrD,EAAQ,GAAIvZ,SAEnB,IAAMunB,EAAY/5D,KAAK+5D,UACvB,OAAiB,MAAbA,EACIA,EAAUvnB,SAGZ,OAGR,SAAcA,GACb,IAAMuZ,EAAS/rD,KAAK8qD,GACpB,GAAI,EAAIiB,EAAOrrD,OACdqrD,EAAQ,GAAIvZ,SAAWA,MACjB,CACN,IAAMunB,EAAY/5D,KAAK+5D,UACN,MAAbA,IACHA,EAAUvnB,SAAWA,qCAKxBsnB,gBAAA,SAAKrrC,EAAuB7tB,GAC3B,IAAMmrD,EAAS/rD,KAAK8qD,GACpBr8B,EAAMztB,OAAShB,UACDuC,IAAV3B,EACHmrD,EAAOvrD,KAAMiuB,GAEbs9B,EAAOx5C,OAAQ3R,EAAO,EAAG6tB,IAI3BqrC,gBAAA,SAAKl5D,EAAe6tB,GACnB,IAAMs9B,EAAS/rD,KAAK8qD,GACpB,GAAI,GAAKlqD,GAASA,EAAQmrD,EAAOrrD,OAAS,CACzC,IAAM8B,EAASupD,EAAQnrD,GAIvB,OAHA6tB,EAAMztB,OAAShB,KACf+rD,EAAQnrD,GAAU6tB,EAClBjsB,EAAOxB,YAASuB,EACTC,EAER,OAAO,MAGRs3D,mBAAA,SAAQl5D,GACP,IAAMmrD,EAAS/rD,KAAK8qD,GAChB,GAAKlqD,GAASA,EAAQmrD,EAAOrrD,SAChCqrD,EAAOx5C,OAAQ3R,EAAO,GAAK,GAAII,YAASuB,IAI1Cu3D,oBAAA,SAASh5D,GAIR,IAHA,IAAMirD,EAAS/rD,KAAK8qD,GAGXvpD,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EAEjD,IADMktB,EAAQs9B,EAAQxqD,MACRT,EACb,OAAOS,EAKT,IAASA,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EAEjD,IADMktB,EAAQs9B,EAAQxqD,IAEfy2B,KAAOl3B,EAAOk3B,IACpBvJ,EAAM4pC,UAAYv3D,EAAOu3D,SACzB5pC,EAAMoB,YAAc/uB,EAAO+uB,WAC3BpB,EAAMqf,MAAMqf,SAAUrsD,EAAOgtC,OAE7B,OAAOvsC,EAKT,IAASA,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMktB,EACN,IADMA,EAAQs9B,EAAQxqD,IACZy2B,KAAOl3B,EAAOk3B,GACvB,OAAOz2B,EAIT,OAAQ,GAGTu4D,gBAAA,SAAKl5D,GACJ,IAAMmrD,EAAS/rD,KAAK8qD,GACpB,OAAI,GAAKlqD,GAASA,EAAQmrD,EAAOrrD,OACzBqrD,EAAQnrD,GAET,MAGRk5D,iBAAA,WACC,OAAO95D,KAAK8qD,GAAQpqD,QAGrBo5D,iBAAA,SAAM1M,EAAgBC,GACrB,IAAMtB,EAAS/rD,KAAK8qD,GACdwC,EAAMvB,EAAQsB,GACpBtB,EAAQsB,GAAWtB,EAAQqB,GAC3BrB,EAAQqB,GAAWE,GAGpBwM,iBAAA,SAAMh5D,GACL,IAAMirD,EAAS/rD,KAAK8qD,GACpBiB,EAAOrrD,OAAS,EAEhB,IAAK,IAAIa,EAAI,EAAGC,EAAOV,EAAOkU,OAAQzT,EAAIC,IAAQD,EAAI,CACrD,IAAMktB,EAAQ3tB,EAAOgb,IAAKva,GAC1B,GAAa,MAATktB,EAAgB,CACnB,IAAMiqC,GAAW,IAAID,IAAqBnX,KAAM7yB,GAChDiqC,EAAS13D,OAAShB,KAClB+rD,EAAOvrD,KAAMk4D,IAIf,OAAO14D,MAGR85D,sBAAA,SAAWvN,GACV,IAAMR,EAAS/rD,KAAK8qD,GACpB,GAAIiB,EAAOrrD,QAAU,EACpB,OAAO6rD,EAAQ/+B,IAAK,MAGpB,IADA,IAAI4jC,EAAa,IAAIrF,EAAQ,GAAIwB,UAAWhB,GACnChrD,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EACjD6vD,GAAc,IAAIrF,EAAQxqD,GAAIgsD,UAAWhB,GAG1C,OADA6E,GAAc,IACP7E,EAAQ/+B,IAAK4jC,IAItB0I,wBAAA,SAAah5D,EAAgByrD,GAC5B,GAAI,GAAKzrD,GAAUA,EAASyrD,EAAQzhB,UAAUpqC,OAAS,CACtD,IAAIs2D,EAAqCzK,EAAQ4N,KAAKr+C,IAAKhb,GACvC,MAAhBk2D,IACHA,EAAen/B,KAAK80B,MAAOJ,EAAQzhB,UAAWhqC,IAC9CyrD,EAAQ4N,KAAK7zD,IAAKxF,EAAQk2D,IAG3B,IAAMjL,EAAS/rD,KAAK8qD,GACpBiB,EAAOrrD,OAAS,EAChB,IAAK,IAAIa,EAAI,EAAGC,EAAOw1D,EAAat2D,OAAQa,EAAIC,IAAQD,EAAI,CAC3D,IAAMX,EAAQo2D,EAAcz1D,GACtBktB,EAAQ,IAAIgqC,GAClBhqC,EAAMztB,OAAShB,KACfyuB,EAAMorC,YAAaj5D,EAAO2rD,GAC1BR,EAAOvrD,KAAMiuB,MA1UTqrC,cAAc,IAAIjC,GAClBiC,cAAc,SLDtB,SAAYzC,GACXA,uBACAA,mBAFD,CAAYA,KAAAA,QAKZ,SAAYC,GACXA,uBACAA,uBAFD,CAAYA,KAAAA,QCdZ,SAAYC,GACXA,mBACAA,uBACAA,qBACAA,mCACAA,qCALD,CAAYA,KAAAA,QCAZ,SAAYC,GACXA,iBACAA,uBACAA,uBACAA,iCACAA,uCALD,CAAYA,KAAAA,QCAZ,SAAYC,GACXA,qCACAA,qCACAA,qCAHD,CAAYA,KAAAA,QGOZ,ICPY2C,iBDYX,WACCp5D,EACAyuB,EAAuCF,GAEvCvvB,KAAK6qD,GAAU7pD,EACfhB,KAAKq6D,GAAc5qC,EACnBzvB,KAAKs6D,GAAY/qC,EA+EnB,OA5EC/vB,sBAAI+6D,8BAAJ,WACC,OAAOv6D,KAAKq6D,QAGb,SAAgB5qC,GACXzvB,KAAKq6D,KAAgB5qC,IACxBzvB,KAAKq6D,GAAc5qC,EACnBzvB,KAAK6qD,GAAQyB,mDAIf9sD,sBAAI+6D,4BAAJ,WACC,OAAOv6D,KAAKs6D,QAGb,SAAc/qC,GACTvvB,KAAKs6D,KAAc/qC,IACtBvvB,KAAKs6D,GAAY/qC,EACjBvvB,KAAK6qD,GAAQyB,mDAIfiO,iBAAA,SAAMz5D,GACDA,GACHd,KAAKsG,IAAKxF,EAAO2uB,WAAY3uB,EAAOyuB,WAItCgrC,gBAAA,SAAK9qC,EAAwCF,GAC5C,IAAIlrB,GAAY,EAEE,MAAdorB,GAAsBzvB,KAAKq6D,KAAgB5qC,IAC9CzvB,KAAKq6D,GAAc5qC,EACnBprB,GAAY,GAGG,MAAZkrB,GAAoBvvB,KAAKs6D,KAAc/qC,IAC1CvvB,KAAKs6D,GAAY/qC,EACjBlrB,GAAY,GAGTA,GACHrE,KAAK6qD,GAAQyB,kBAIfiO,qBAAA,WACC,MAAO,CACN9qC,WAAYzvB,KAAKq6D,GACjB9qC,SAAUvvB,KAAKs6D,KAIjBC,sBAAA,SAAWhO,GACV,OAAOA,EAAQ/+B,IAAK,IAAIxtB,KAAKq6D,OAAer6D,KAAKs6D,SAGlDC,wBAAA,SAAaz5D,EAAgByrD,GAC5B,IAAMzhB,EAAYyhB,EAAQzhB,UAC1B,GAAI,GAAKhqC,GAAUA,EAASgqC,EAAUpqC,OAAS,CAC9C,IAAMgsD,EAASH,EAAQiO,OAAO1+C,IAAKhb,GACnC,GAAc,MAAV4rD,EACH1sD,KAAKsG,IACJomD,EAAQ,GACRA,EAAQ,QAEH,CACN,IAAMsK,EAAen/B,KAAK80B,MAAO7hB,EAAWhqC,IAC5CyrD,EAAQiO,OAAOl0D,IAAKxF,EAAQk2D,GAC5Bh3D,KAAKsG,IACJ0wD,EAAc,GACdA,EAAc,0BElFlB,WAAah2D,EAAoCyuB,EAAoBF,GACpEvvB,KAAK6qD,GAAU7pD,EACfhB,KAAKq6D,GAAc5qC,EACnBzvB,KAAKs6D,GAAY/qC,EA+EnB,OA5EC/vB,sBAAIi7D,8BAAJ,WACC,OAAOz6D,KAAKq6D,QAGb,SAAgB5qC,GACXzvB,KAAKq6D,KAAgB5qC,IACxBzvB,KAAKq6D,GAAc5qC,EACnBzvB,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIi7D,4BAAJ,WACC,OAAOz6D,KAAKs6D,QAGb,SAAc/qC,GACTvvB,KAAKs6D,KAAc/qC,IACtBvvB,KAAKs6D,GAAY/qC,EACjBvvB,KAAK6qD,GAAQyB,mDAIfmO,iBAAA,SAAM35D,GACDA,GACHd,KAAKsG,IAAKxF,EAAO2uB,WAAY3uB,EAAOyuB,WAItCkrC,gBAAA,SAAKhrC,EAAqBF,GACzB,IAAIlrB,GAAY,EAEE,MAAdorB,GAAsBzvB,KAAKq6D,KAAgB5qC,IAC9CzvB,KAAKq6D,GAAc5qC,EACnBprB,GAAY,GAGG,MAAZkrB,GAAoBvvB,KAAKs6D,KAAc/qC,IAC1CvvB,KAAKs6D,GAAY/qC,EACjBlrB,GAAY,GAGTA,GACHrE,KAAK6qD,GAAQyB,kBAIfmO,qBAAA,WACC,MAAO,CACNhrC,WAAYzvB,KAAKq6D,GACjB9qC,SAAUvvB,KAAKs6D,KAIjBG,sBAAA,SAAWlO,GACV,OAAOA,EAAQ/+B,IAAK,IAAIxtB,KAAKq6D,OAAer6D,KAAKs6D,SAGlDG,wBAAA,SAAa35D,EAAgByrD,GAC5B,IAAMzhB,EAAYyhB,EAAQzhB,UAC1B,GAAI,GAAKhqC,GAAUA,EAASgqC,EAAUpqC,OAAS,CAC9C,IAAMgsD,EAASH,EAAQmO,QAAQ5+C,IAAKhb,GACpC,GAAc,MAAV4rD,EACH1sD,KAAKsG,IACJomD,EAAQ,GACRA,EAAQ,QAEH,CACN,IAAMsK,EAAen/B,KAAK80B,MAAO7hB,EAAWhqC,IAC5CyrD,EAAQmO,QAAQp0D,IAAKxF,EAAQk2D,GAC7Bh3D,KAAKsG,IACJ0wD,EAAc,GACdA,EAAc,0BC3ElB,WAAah2D,EAAqC21D,EAAiBz0D,EAAeE,EAAec,GAChGlD,KAAK6qD,GAAU7pD,EACfhB,KAAK42D,GAAUD,EACf32D,KAAKiC,EAASC,EACdlC,KAAKmC,EAASC,EACdpC,KAAKiD,EAASC,EA0HhB,OAvHC1D,sBAAIm7D,0BAAJ,WACC,OAAO36D,KAAK42D,QAGb,SAAYD,GACP32D,KAAK42D,KAAYD,IACpB32D,KAAK42D,GAAUD,EACf32D,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIm7D,yBAAJ,WACC,OAAO36D,KAAKiC,OAGb,SAAWC,GACNlC,KAAKiC,IAAWC,IACnBlC,KAAKiC,EAASC,EACdlC,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIm7D,yBAAJ,WACC,OAAO36D,KAAKmC,OAGb,SAAWC,GACNpC,KAAKmC,IAAWC,IACnBpC,KAAKmC,EAASC,EACdpC,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIm7D,yBAAJ,WACC,OAAO36D,KAAKiD,OAGb,SAAWC,GACNlD,KAAKiD,IAAWC,IACnBlD,KAAKiD,EAASC,EACdlD,KAAK6qD,GAAQyB,mDAIfqO,iBAAA,SAAM75D,GACDA,GACHd,KAAKsG,IAAKxF,EAAO61D,OAAQ71D,EAAOoB,MAAOpB,EAAOsB,MAAOtB,EAAOoC,QAI9Dy3D,gBAAA,SAAKhE,EAAkBz0D,EAAgBE,EAAgBc,GACtD,IAAImB,GAAY,OAED9B,IAAXo0D,GAAwB32D,KAAK42D,KAAYD,IAC5C32D,KAAK42D,GAAUD,EACftyD,GAAY,QAGC9B,IAAVL,GAAuBlC,KAAKiC,IAAWC,IAC1ClC,KAAKiC,EAASC,EACdmC,GAAY,QAGC9B,IAAVH,GAAuBpC,KAAKmC,IAAWC,IAC1CpC,KAAKmC,EAASC,EACdiC,GAAY,QAGC9B,IAAVW,GAAuBlD,KAAKiD,IAAWC,IAC1ClD,KAAKiD,EAASC,EACdmB,GAAY,GAGTA,GACHrE,KAAK6qD,GAAQyB,kBAIfqO,kBAAA,WACC,OAAO,IAAIA,EAAuB36D,KAAK6qD,GAAS7qD,KAAK42D,GAAS52D,KAAKiC,EAAQjC,KAAKmC,EAAQnC,KAAKiD,IAG9F03D,qBAAA,WACC,MAAO,CACNhE,OAAQ32D,KAAK42D,GACb10D,MAAOlC,KAAKiC,EACZG,MAAOpC,KAAKmC,EACZe,MAAOlD,KAAKiD,IAId03D,sBAAA,SAAWpO,GACV,IAAM6E,EAAa,KAAIpxD,KAAK42D,GAAU,EAAI,OAAK52D,KAAKiC,MAAUjC,KAAKmC,MAAUnC,KAAKiD,MAClF,OAAOspD,EAAQ/+B,IAAK4jC,IAGrBuJ,wBAAA,SAAa75D,EAAgByrD,GAC5B,IAAMzhB,EAAYyhB,EAAQzhB,UAC1B,GAAI,GAAKhqC,GAAUA,EAASgqC,EAAUpqC,OAAS,CAC9C,IAAMgsD,EAASH,EAAQqO,aAAa9+C,IAAKhb,GACzC,GAAc,MAAV4rD,EACH1sD,KAAKsG,IACY,IAAhBomD,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,QAEH,CACN,IAAMsK,EAAen/B,KAAK80B,MAAO7hB,EAAWhqC,IAC5CyrD,EAAQqO,aAAat0D,IAAKxF,EAAQk2D,GAClCh3D,KAAKsG,IACkB,IAAtB0wD,EAAc,GACdA,EAAc,GACdA,EAAc,GACdA,EAAc,0BC/FlB,WACCh2D,EACAytB,EAAevsB,EAAeE,EAAeoiC,EAAgBxvB,GAE7DhV,KAAK6qD,GAAU7pD,EACfhB,KAAK42D,IAAU,EACf52D,KAAKs1B,GAAS7G,EACdzuB,KAAKiC,EAASC,EACdlC,KAAKmC,EAASC,EACdpC,KAAK66D,GAAUr2B,EACfxkC,KAAKgrD,GAAQh2C,EACbhV,KAAKgf,GAAUq4C,GAAiByD,OAChC96D,KAAKoD,MAAQ,IAAIm3D,GAAqBv5D,EAAQu2D,GAA0B1jD,OAAQ2jD,GAAwBtmC,QACxGlxB,KAAKyE,OAAS,IAAIg2D,GAAsBz5D,EAAQ,EAAG,GACnDhB,KAAKusB,GAAS+qC,GAAgBwD,OAC9B96D,KAAK+6D,QAAU,IAAIN,GAAsBz5D,EAAQ,EAAG,GACpDhB,KAAKuE,QAAU,IAAIo2D,GAAuB35D,GAAQ,EAAO,SAAU,EAAK,IACxEhB,KAAKkkD,GAAauT,GAAoBuD,cACtCh7D,KAAKiF,QAAU,IAAIw1D,GAAsBz5D,EAAQ,GAAI,IACrDhB,KAAKisB,IAAY,EA6RnB,OA1RCzsB,sBAAIy7D,0BAAJ,WACC,OAAOj7D,KAAK42D,QAGb,SAAYD,GACP32D,KAAK42D,KAAYD,IACpB32D,KAAK42D,GAAUD,EACf32D,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIy7D,yBAAJ,WACC,OAAOj7D,KAAKs1B,QAGb,SAAW7G,GACV,GAAIzuB,KAAKs1B,KAAW7G,EAAQ,CAC3BzuB,KAAKs1B,GAAS7G,EAGd,IAAM/M,EAAS1hB,KAAK6qD,GACdiI,EAAWpxC,EAAOoxC,SACxB,GAAgB,MAAZA,IAAsBA,EAAS7P,aAAcvhC,GAGhD,OAFA1hB,KAAKipB,WAAQ1mB,OACbmf,EAAO/D,UAKR,IAAMsL,EAAQjpB,KAAKipB,MACbhB,EAAagB,GAASA,EAAMhB,WAClC,GAAkB,MAAdA,EAYH,OAFAjoB,KAAKipB,WAAQ1mB,OACbmf,EAAO/D,UAVP,IAAK,IAAIpc,EAAI,EAAGC,EAAOitB,EAAM/tB,OAAQa,EAAIC,IAAQD,EAEhD,KADaktB,EAAOltB,KACL0mB,GAGd,OAFAjoB,KAAKipB,WAAQ1mB,OACbmf,EAAO/D,UAWV+D,EAAO4qC,mDAIT9sD,sBAAIy7D,0BAAJ,WACC,OAAOj7D,KAAK66D,QAGb,SAAYr2B,GACPxkC,KAAK66D,KAAYr2B,IACpBxkC,KAAK66D,GAAUr2B,EACfxkC,KAAK6qD,GAAQltC,4CAIfne,sBAAIy7D,yBAAJ,WACC,OAAOj7D,KAAKiC,OAGb,SAAWC,GACNlC,KAAKiC,IAAWC,IACnBlC,KAAKiC,EAASC,EACdlC,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIy7D,yBAAJ,WACC,OAAOj7D,KAAKmC,OAGb,SAAWC,GACNpC,KAAKmC,IAAWC,IACnBpC,KAAKmC,EAASC,EACdpC,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIy7D,wBAAJ,WACC,OAAOj7D,KAAKgrD,QAGb,SAAUh2C,GACLhV,KAAKgrD,KAAUh2C,IAClBhV,KAAKgrD,GAAQh2C,EACbhV,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIy7D,0BAAJ,WACC,OAAOj7D,KAAKgf,QAGb,SAAYC,GACPjf,KAAKgf,KAAYC,IACpBjf,KAAKgf,GAAUC,EACfjf,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIy7D,yBAAJ,WACC,OAAOj7D,KAAKusB,QAGb,SAAWS,GACNhtB,KAAKusB,KAAWS,IACnBhtB,KAAKusB,GAASS,EACdhtB,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIy7D,6BAAJ,WACC,OAAOj7D,KAAKkkD,QAGb,SAAeJ,GACV9jD,KAAKkkD,KAAeJ,IACvB9jD,KAAKkkD,GAAaJ,EAClB9jD,KAAK6qD,GAAQyB,mDAIf9sD,sBAAIy7D,4BAAJ,WACC,OAAOj7D,KAAKisB,QAGb,SAAcC,GACTlsB,KAAKisB,KAAcC,IACtBlsB,KAAKisB,GAAYC,EACjBlsB,KAAK6qD,GAAQyB,mDAIf2O,iBAAA,SAAMn6D,GAmBL,OAlBIA,IACHd,KAAKsG,IACJxF,EAAO2tB,MACP3tB,EAAOoB,MACPpB,EAAOsB,MACPtB,EAAO0jC,OACP1jC,EAAOkU,KACPlU,EAAOme,OACPne,EAAOksB,MACPlsB,EAAOgjD,UACPhjD,EAAOorB,UAERlsB,KAAKoD,MAAMk+C,KAAMxgD,EAAOsC,OACxBpD,KAAKyE,OAAO68C,KAAMxgD,EAAO2D,QACzBzE,KAAKuE,QAAQ+8C,KAAMxgD,EAAOyD,SAC1BvE,KAAK+6D,QAAQzZ,KAAMxgD,EAAOi6D,SAC1B/6D,KAAKiF,QAAQq8C,KAAMxgD,EAAOmE,UAEpBjF,MAGRi7D,gBAAA,SACCxsC,EAAgBvsB,EAAgBE,EAChCoiC,EAAiBxvB,EAAeiK,EAChC+N,EAAyB82B,EACzB53B,GAEA,IAAIgvC,GAAiB,EACjBC,GAAoB,EAqDxB,OAnDa,MAAT1sC,GAAiBzuB,KAAKs1B,KAAW7G,IACpCzuB,KAAKs1B,GAAS7G,EACdysC,GAAiB,GAGL,MAATh5D,GAAiBlC,KAAKiC,IAAWC,IACpClC,KAAKiC,EAASC,EACdi5D,GAAoB,GAGR,MAAT/4D,GAAiBpC,KAAKmC,IAAWC,IACpCpC,KAAKmC,EAASC,EACd+4D,GAAoB,GAGP,MAAV32B,GAAkBxkC,KAAK66D,KAAYr2B,IACtCxkC,KAAK66D,GAAUr2B,EACf02B,GAAiB,GAGN,MAARlmD,GAAgBhV,KAAKgrD,KAAUh2C,IAClChV,KAAKgrD,GAAQh2C,EACbmmD,GAAoB,GAGP,MAAVl8C,GAAkBjf,KAAKgf,KAAYC,IACtCjf,KAAKgf,GAAUC,EACfk8C,GAAoB,GAGR,MAATnuC,GAAiBhtB,KAAKusB,KAAWS,IACpChtB,KAAKusB,GAASS,EACdmuC,GAAoB,GAGJ,MAAbrX,GAAqB9jD,KAAKkkD,KAAeJ,IAC5C9jD,KAAKkkD,GAAaJ,EAClBqX,GAAoB,GAGL,MAAZjvC,GAAoBlsB,KAAKisB,KAAcC,IAC1ClsB,KAAKisB,GAAYC,EACjBivC,GAAoB,GAGjBD,EACHl7D,KAAK6qD,GAAQltC,UACHw9C,GACVn7D,KAAK6qD,GAAQyB,iBAGPtsD,MAGRi7D,qBAAA,WACC,MAAO,CACNxsC,MAAOzuB,KAAKs1B,GACZpzB,MAAOlC,KAAKiC,EACZG,MAAOpC,KAAKmC,EACZqiC,OAAQxkC,KAAK66D,GACb7lD,KAAMhV,KAAKgrD,GACX/rC,OAAQjf,KAAKgf,GACb5b,MAAOpD,KAAKoD,MAAMyqD,WAClBppD,OAAQzE,KAAKyE,OAAOopD,WACpB7gC,MAAOhtB,KAAKusB,GACZhoB,QAASvE,KAAKuE,QAAQspD,WACtB/J,UAAW9jD,KAAKkkD,GAChB6W,QAAS/6D,KAAK+6D,QAAQlN,WACtB5oD,QAASjF,KAAKiF,QAAQ4oD,WACtB3hC,SAAUlsB,KAAKisB,KAIjBgvC,sBAAA,SAAW1O,GACV,IAAM6O,EAAkBp7D,KAAKoD,MAAMmqD,UAAWhB,GACxC8O,EAAmBr7D,KAAKyE,OAAO8oD,UAAWhB,GAC1C+O,EAAoBt7D,KAAKuE,QAAQgpD,UAAWhB,GAC5CgP,EAAoBv7D,KAAK+6D,QAAQxN,UAAWhB,GAC5CiP,EAAoBx7D,KAAKiF,QAAQsoD,UAAWhB,GAC5C6E,EAAa,IAAI7E,EAAQ/+B,IAAKxtB,KAAKs1B,QAAYt1B,KAAKiC,MAAUjC,KAAKmC,MACrEoqD,EAAQ/+B,IAAKxtB,KAAK66D,QAAa76D,KAAKgrD,OAAShrD,KAAKgf,OAAWo8C,MAC7DC,MAAoBr7D,KAAKusB,OAAU+uC,MAAqBC,MACxDv7D,KAAKkkD,OAAcsX,OAAqBx7D,KAAKisB,GAAY,EAAI,OACjE,OAAOsgC,EAAQ/+B,IAAK4jC,IAGrB6J,wBAAA,SAAan6D,EAAgByrD,GAC5B,IAAMzhB,EAAYyhB,EAAQzhB,UAC1B,GAAI,GAAKhqC,GAAUA,EAASgqC,EAAUpqC,OAAS,CAC9C,IAAIgsD,EAASH,EAAQkP,MAAM3/C,IAAKhb,GAClB,MAAV4rD,IACHA,EAAS70B,KAAK80B,MAAO7hB,EAAWhqC,IAChCyrD,EAAQkP,MAAMn1D,IAAKxF,EAAQ4rD,IAE5B1sD,KAAKsG,IACJwkC,EAAW4hB,EAAQ,KAAS,GAC5BA,EAAQ,GACRA,EAAQ,GACR5hB,EAAW4hB,EAAQ,KAAS,OAC5BA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,IACW,IAAjBA,EAAQ,KAEX1sD,KAAKoD,MAAMy2D,YAAanN,EAAQ,GAAKH,GACrCvsD,KAAKyE,OAAOo1D,YAAanN,EAAQ,GAAKH,GACtCvsD,KAAKuE,QAAQs1D,YAAanN,EAAQ,GAAKH,GACvCvsD,KAAK+6D,QAAQlB,YAAanN,EAAQ,IAAMH,GACxCvsD,KAAKiF,QAAQ40D,YAAanN,EAAQ,IAAMH,yBCtT1C,WAAa/5C,GAAb,MACC1L,YAAO0L,gBACPvL,EAAK+N,KAAO/N,EAAKolD,UACjBplD,EAAK8kB,KAAO9kB,EAAKy0D,UACjBz0D,EAAK6mD,OAAS7mD,EAAK00D,YACnB10D,EAAKjD,EAAU+oD,GAAe6O,OAC9B30D,EAAK8W,GAAU4sC,GAAa3D,IAC5B//C,EAAK2nD,IAAM,IAAIkL,GACf7yD,EAAK+hB,KAAO/hB,EAAK40D,UACjB50D,EAAKmZ,OAAS2sC,GAAegD,SAqF/B,OA3G8CjwD,OAyBnCg8D,oBAAV,WAAA,WACC,OAAO,IAAIC,mBACV,WAAQ90D,EAAK+0D,sBACbz5D,EACAwqD,GAAekP,OACflP,GAAemP,SAIPJ,oBAAV,WACC,OAAO,IAAIjF,GACV72D,MAAM,EACN+sD,GAAeoP,WACfpP,GAAeqP,aAIPN,sBAAV,WACC,OAAO,IAAI3E,GACVn3D,MAAM,EACN+sD,GAAesP,aACftP,GAAeuP,aACfvP,GAAewP,aACfxP,GAAeyP,aACfzP,GAAe0P,cAIPX,oBAAV,WACC,OAAO,IAAIb,GACVj7D,KACA+sD,GAAe2P,WACf3P,GAAesP,aACftP,GAAeuP,aACfvP,GAAe4P,YACf5P,GAAe6P,YAMjBp9D,sBAAIs8D,0BAAJ,WACC,OAAO97D,KAAK+d,QAGb,SAAYha,GACP/D,KAAK+d,KAAYha,IACpB/D,KAAK+d,GAAUha,EACf/D,KAAKssD,mDAIP9sD,sBAAIs8D,0BAAJ,WACC,OAAO97D,KAAKgE,OAGb,SAAYC,GACPjE,KAAKgE,IAAYC,IACpBjE,KAAKgE,EAAUC,EACfjE,KAAKssD,mDAIP9sD,sBAAIs8D,yBAAJ,WACC,OAAO97D,KAAK2xB,QAGb,SAAWE,GACV,GAAI7xB,KAAK2xB,KAAWE,EAAQ,CACd,MAATA,GACH7xB,KAAK2xB,GAASE,EACd7xB,KAAK68D,SAAWhrC,EAAMgH,MAEtB74B,KAAK2xB,QAASpvB,EACdvC,KAAK68D,cAAWt6D,GAEjB,IAAMmf,EAAS1hB,KAAKgB,OACN,MAAV0gB,GACHA,EAAO/D,+CAvGmC80C,mBCX9C,4DA8GA,OA9G6C3yD,OAI5Cg9D,sBAAA,SAAWvQ,GACV,IAAM/pD,EAASsE,YAAMymD,oBAAWhB,GAEhC,OADA/pD,EAAQ,IAAOxC,KAAKkxD,OAAO3D,UAAWhB,GAC/B/pD,GAGEs6D,0BAAV,WACC,IAAMC,EAAY/8D,KAAK+yD,KAAK/xD,OAC5B,OAAiB,MAAb+7D,GAAgD,MAA3BA,EAAUC,cAC3BD,EAAUC,gBAEX,GAGEF,gCAAV,SAA+B5L,GAC9B,IAAMlkC,EAAQkkC,EAAOlkC,MACrB,OAAIA,EAAQ08B,GAAkBK,oBACzB/8B,EAAQ08B,GAAkBO,oBACtBjqD,KAAKg9D,gBAELrzD,KAAKC,IAAK,EAAK5J,KAAKg9D,iBAGxBhwC,EAAQ08B,GAAkBO,oBACtBtgD,KAAKG,IAAK,EAAK9J,KAAKg9D,iBAEpB,GAKAF,iCAAV,SAAgC5L,GAC/B,IAAMpD,EAAS9tD,KAAK8tD,OACpB,OAASA,EAAO6I,OAAS7I,EAAO5qD,MAAQlD,KAAKi9D,oBAAqB/L,GAAW,GAG9E4L,wBAAA,SAAa12D,EAAWC,EAAWouD,EAAYC,GAC9C,IAAMxD,EAASlxD,KAAKkxD,OACdgM,EAA4C,GAAtCl9D,KAAKm9D,qBAAsBjM,GACvC,GAAIlxD,KAAKw0D,gBAAiBpuD,EAAGC,EAAGouD,EAAKyI,EAAKxI,EAAKwI,GAAQ,CACtD,IAAM7jD,EAAY6jD,EAAMA,EAClBE,EAAalM,EAAOxwD,OAC1B,GAAI,GAAK08D,EAAa,CAGrB,IAFA,IAAMC,EAAcnM,EAAOnF,OACrBuR,EAAgBpM,EAAOlF,SACpBzqD,EAAI,EAAGC,EAAO47D,EAAa,EAAGh1D,EAAK,EAAG7G,EAAIC,EAAMD,GAAK,EAAG6G,GAAM,EACtE,GAAIgzC,GAAakiB,EAAe/7D,EAAI,GAAM,EAAI,CAC7C,IAAMg8D,EAAMF,EAAaj1D,EAAK,GACxBo1D,EAAMH,EAAaj1D,EAAK,GACxBq1D,EAAMJ,EAAaj1D,EAAK,GACxBs1D,EAAML,EAAaj1D,EAAK,GAC9B,GAAI,GAAK00D,EAAea,gBAAiBv3D,EAAGC,EAAGk3D,EAAKC,EAAKC,EAAKC,EAAKrkD,GAClE,OAAO,EAIV,GAAI,EAAI+jD,GAAelM,EAAOlkC,MAAQ08B,GAAkBkU,QACnDxiB,GAAakiB,EAAe,GAAM,IAE/BC,EAAMF,EAAkB,GADxBj1D,EAAMg1D,EAAa,GAAM,IAEzBI,EAAMH,EAAaj1D,EAAK,GACxBq1D,EAAMJ,EAAa,GACnBK,EAAML,EAAa,GACrB,GAAKP,EAAea,gBAAiBv3D,EAAGC,EAAGk3D,EAAKC,EAAKC,EAAKC,EAAKrkD,IAClE,OAAO,GAMZ,OAAO,GAGDyjD,kBAAP,SACC12D,EAAWC,EACXk3D,EAAaC,EACbC,EAAaC,EACbG,GAaA,IAAMC,EAAML,EAAMF,EACZQ,EAAML,EAAMF,EACZQ,EAAM53D,EAAIm3D,EACVU,EAAM53D,EAAIm3D,EACV/zC,EAAIq0C,EAAMA,EAAMC,EAAMA,EACtBx+D,EAAIu+D,EAAME,EAAMD,EAAME,EACtBp1D,EAAIm1D,EAAMA,EAAMC,EAAMA,EAC5B,GAAI,KAASx0C,EAAI,CAChB,IAAMy0C,EAAKv0D,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGrK,EAAIkqB,IAEzC,GADUA,EAAIy0C,EAAKA,EAAK,EAAI3+D,EAAI2+D,EAAKr1D,EAC7Bg1D,EACP,OAAOK,EAGT,OAAQ,MA5GmCpC,mBCG5C,WAAannD,EAA6BK,EAAc9R,EAAe8pB,GAAvE,MACClmB,YAAOs8C,GAAW+a,kBAClBl3D,EAAK8kB,KAAK4qC,QAAS,EACnB1vD,EAAK6mD,OAAOxnD,KAAK,OAAM/D,OAAWA,EAAWW,GAC7C+D,EAAKiqD,OAAS,IAAI7F,GAAiBpkD,EAAM0N,EAAUK,EAAMgY,KAY3D,OAnB+BltB,OAU9Bs+D,kBAAA,WACC,IAAMlN,EAASlxD,KAAKkxD,OACpB,OAAO,IAAIkN,EAAWlN,EAAOv8C,SAAUu8C,EAAOl8C,KAAMhV,KAAK8tD,OAAO5qD,MAAOguD,EAAOlkC,OAAQs0B,KAAMthD,OAG7Fo+D,4BAAA,SAAiBh4D,EAAWC,EAAWouD,EAAYC,GAClD,IAAM1/C,EAAOrL,KAAKG,IAAK,EAAG9J,KAAKkxD,OAAOl8C,MACtC,OAAOlO,YAAM0tD,0BAAiBpuD,EAAGC,EAAGouD,EAAKz/C,EAAM0/C,EAAK1/C,OAjBvB8nD,kBC8C9B,WACCuB,EACAC,EAAiBC,EACjBC,EAAgBC,EAChBC,GAEA1+D,KAAKq+D,OAASA,EAEdr+D,KAAK2+D,kBAAoB,EAEzB3+D,KAAK4+D,aAAeN,EACpBt+D,KAAK6+D,YAAcL,EACnBx+D,KAAK8+D,YAAcP,EACnBv+D,KAAK++D,WAAaN,EAElBz+D,KAAKg/D,UAAYx3D,IACjBxH,KAAKi/D,WAAa,EAClBj/D,KAAKk/D,YAAc13D,IACnBxH,KAAKm/D,aAAe,EAEpBn/D,KAAKsrD,MAAQ9jD,IACbxH,KAAKurD,MAAQ/jD,IACbxH,KAAKo/D,eAAiB53D,IACtBxH,KAAKq/D,eAAiB73D,IACtBxH,KAAKs/D,eAAiB93D,IACtBxH,KAAKu/D,eAAiB/3D,IACtBxH,KAAKw/D,WAAah4D,IAClBxH,KAAKi4B,YAAczwB,IACnBxH,KAAKy/D,YAAcj4D,IACnBxH,KAAK0/D,WAAal4D,IAClBxH,KAAKiE,OAASuD,IACdxH,KAAK+D,OAASyD,IAEdxH,KAAK0G,QAAU,KACf1G,KAAK2/D,mBAAqBn4D,IAE1BxH,KAAK0+D,gBAAkBA,EAwNzB,OArNCkB,iBAAA,SAAMlS,GAEL,OADAA,EAAMoF,SAAW9yD,KACVA,MAKR4/D,yBAAA,SAAclS,GACb,OAAO,GAGRkS,sBAAA,WACC,OAAO5/D,KAAKq+D,QAGbuB,4BAAA,WACC,OAAO5/D,KAAK4+D,cAGbgB,2BAAA,WACC,OAAO5/D,KAAK6+D,aAGbe,2BAAA,WACC,OAAO5/D,KAAK8+D,aAGbc,0BAAA,WACC,OAAO5/D,KAAK++D,YAGHa,+BAAV,SAA8BlS,GAE7B,OADAA,EAAM7mC,kBACC6mC,EAAMzxC,UAAU4jD,cAGdD,sBAAV,SAAqBlS,GACpB,OAAOA,EAAMhnD,SAAW2lB,UAAQyzC,OAGvBF,iCAAV,SAAgCl5D,GAC/B,IAAMq5D,EAAar5D,EAInB,OAHuB,MAAnBq5D,EAAWj4D,MACdpB,EAAQ8xB,YAEFunC,EAAW53D,WAGTy3D,yBAAV,SAAwBl5D,GACvB,OAAQA,EAAgBoB,MAGf83D,sBAAV,SAAqB19D,EAAeE,EAAek8D,EAAiBt2C,EAAeg4C,GAOlF,IANA,IAAMC,EAAO3kC,QAAM4kC,sBAAuBh+D,EAAOE,EAAOpC,KAAKq+D,OAAO8B,WAC9D/1D,EAAI61D,EAAM,GACV/kB,EAAI+kB,EAAM,GACV1gE,EAAI0gE,EAAM,GACVx2C,EAAIw2C,EAAM,GAEP1+D,EAAc,EAAV+8D,EAAa98D,EAAOD,EAAY,EAARymB,EAAWzmB,EAAIC,EAAMD,GAAK,EAC9Dy+D,EAAQz+D,EAAI,GAAM6I,EAClB41D,EAAQz+D,EAAI,GAAM25C,EAClB8kB,EAAQz+D,EAAI,GAAMhC,EAClBygE,EAAQz+D,EAAI,GAAMkoB,GAIVm2C,4BAAV,SAA2BvB,EAAsB3Q,EAAemR,GAC/D,IAAM9yC,EAAO2hC,EAAM3hC,KACbq0C,EAAY1S,EAAM/+C,SAAWod,EAAK4qC,OAClCz0D,EAAQ6pB,EAAK7pB,MACbE,EAASg+D,EAAYr0C,EAAK3pB,MAAQ,EACpCF,IAAUlC,KAAKg/D,WAAa58D,IAAUpC,KAAKi/D,YAC9Cj/D,KAAKg/D,UAAY98D,EACjBlC,KAAKi/D,UAAY78D,EACjBi8D,EAAOgC,gBAAgB/+D,SAEvBtB,KAAKsgE,UACJp+D,EAAOE,EACPpC,KAAK4+D,aACLC,EACAR,EAAOkC,cAKAX,8BAAV,SAA6BvB,EAAsB3Q,EAAemR,GACjE,IAAM/Q,EAASJ,EAAMI,OACfsS,EAAY1S,EAAM/+C,SAAWm/C,EAAO6I,QAAU,EAAI7I,EAAO5qD,MACzDhB,EAAQ4rD,EAAO5rD,MACfE,EAASg+D,EAAYtS,EAAO1rD,MAAQ,EACtCF,IAAUlC,KAAKk/D,aAAe98D,IAAUpC,KAAKm/D,cAChDn/D,KAAKk/D,YAAch9D,EACnBlC,KAAKm/D,YAAc/8D,EACnBi8D,EAAOmC,kBAAkBl/D,SAEzBtB,KAAKsgE,UACJp+D,EAAOE,EACPpC,KAAK4+D,aACLC,EACAR,EAAOoC,gBAKAb,qCAAV,SAAoCvB,EAAsB3Q,EAAemR,GACxE7+D,KAAK0gE,gBAAiBrC,EAAQ3Q,EAAOmR,GACrC7+D,KAAK2gE,kBAAmBtC,EAAQ3Q,EAAOmR,IAG9Be,qBAAV,SAAoB5qD,EAAcijB,EAAqBz1B,GACtD,IAAMk8D,EAAkB1+D,KAAK0+D,gBAC7B,GArMmB,KAqMRzmC,EAAc,CACxB,IAAM2oC,EAAO5rD,EAAOijB,EACpB,GAvMkB,KAuMP2oC,EAAO,CACjB,IAAMC,EAAMnC,EAAkBkC,EACxBE,EAAMpC,EAAkB/0D,KAAKG,IAzMlB,KAyM6BkL,GACxC+rD,EAAM,EAAIp3D,KAAKG,IA1MJ,KA0Me,EAAImuB,EAAcjjB,GAClDxS,EAAQ,GAAMu+D,EACdv+D,EAAQ,GAAMq+D,EACdr+D,EAAQ,GAAMs+D,OAERD,EAAMnC,EA/MK,KAgNXoC,EAAMpC,EAAkB/0D,KAAKG,IAhNlB,KAgN6BkL,GACxC+rD,EAAM,EAjNK,KAkNjBv+D,EAAQ,GAAMu+D,EACdv+D,EAAQ,GAAMq+D,EACdr+D,EAAQ,GAAMs+D,MAET,CAEN,IAAME,EAAKtC,EAAkB/0D,KAAKG,IAxNhB,KAwN2BkL,GAC7CxS,EAAQ,GAAM,EACdA,EAAQ,GAAMw+D,EACdx+D,EAAQ,GAAMw+D,EAEf,OAAOx+D,GAGEo9D,uBAAV,SACCvB,EACAC,EAAiBE,EACjByC,EAAaC,EAAaC,EAAaC,EAAaC,EAAaC,GASjE,IAPA,IAAMC,EAAQlD,EAAOkD,MACfC,EAAcnD,EAAOmD,YACrBC,EAAYpD,EAAOoD,UACnBj5C,EAAmB,EAAV81C,EACT98D,EAAOgnB,EAAkB,EAATg2C,EAGbj9D,EAAIinB,EAAQpW,EAFI,EAAVksD,EAEkB5Y,EADR,EAAV4Y,EAC8B/8D,EAAIC,EAAMD,GAAK,EAAG6Q,GAAK,EAAGszC,GAAK,EAAI,CAC/E,IAAMgc,EAAKD,EAAWrvD,EAAI,GACpBuvD,EAAKF,EAAWrvD,EAAI,GAC1BmvD,EAAOhgE,EAAI,GAAM0/D,EAAMS,EACvBH,EAAOhgE,EAAI,GAAM2/D,EAAMS,EACvBH,EAAa9b,EAAI,GAAMyb,EACvBK,EAAa9b,EAAI,GAAM0b,EACvBI,EAAa9b,EAAI,GAAM2b,EACvBG,EAAa9b,EAAI,GAAM4b,IAIf1B,yBAAV,SACCvB,EACAC,EAAiBE,EACjBuC,EAAaF,EAAaC,EAC1BG,EAAaC,EAAaC,EAAaC,EAAaC,EAAaC,GASjE,IAPA,IAAMC,EAAQlD,EAAOkD,MACfC,EAAcnD,EAAOmD,YACrBC,EAAYpD,EAAOoD,UACnBj5C,EAAmB,EAAV81C,EACT98D,EAAOgnB,EAAkB,EAATg2C,EAGbj9D,EAAIinB,EAAQpW,EAFI,EAAVksD,EAEkB5Y,EADR,EAAV4Y,EAC8B/8D,EAAIC,EAAMD,GAAK,EAAG6Q,GAAK,EAAGszC,GAAK,EAAI,CAC/E,IAAMgc,EAAKD,EAAWrvD,EAAI,GACpBuvD,EAAKF,EAAWrvD,EAAI,GAEtB,GADOqvD,EAAWrvD,EAAI,IAEzBmvD,EAAOhgE,EAAI,GAAMw/D,EAAMW,EACvBH,EAAOhgE,EAAI,GAAMw/D,EAAMY,EACvBH,EAAa9b,EAAI,GAAMmb,EACvBW,EAAa9b,EAAI,GAAMmb,EACvBW,EAAa9b,EAAI,GAAMob,EACvBU,EAAa9b,EAAI,GAAMob,IAEvBS,EAAOhgE,EAAI,GAAM0/D,EAAMS,EACvBH,EAAOhgE,EAAI,GAAM2/D,EAAMS,EACvBH,EAAa9b,EAAI,GAAMyb,EACvBK,EAAa9b,EAAI,GAAM0b,EACvBI,EAAa9b,EAAI,GAAM2b,EACvBG,EAAa9b,EAAI,GAAM4b,KAKhB1B,uBAAV,SAAsBrC,EAAaC,EAAaC,EAAaC,GAC5D,IAAMkE,EAAOnE,EAAMF,EACbsE,EAAOnE,EAAMF,EACnB,OAAO7zD,KAAK+zB,KAAMkkC,EAAOA,EAAOC,EAAOA,IAGxCjC,sBAAA,SAAWkC,GACV,IAAMp7D,EAAU1G,KAAK0G,SAAW2lB,UAAQyzC,MAClC5nC,EAAcxxB,EAAQwxB,YAC5B,GAAIA,IAAgB4pC,EAAQ5pC,YAAc,CACzC4pC,EAAQ5pC,YAAcA,EACtB,IAAM4mC,EAAc9+D,KAAK8+D,YACzBgD,EAAQthE,KAAMkG,EAASo4D,wBC1S1B,cAQA,OAPQiD,eAAP,SAAqBrU,EAAelrD,GACnC,IAAM9B,EAASgtD,EAAM1kC,KAAKyF,MAAM/tB,OAC1BsnB,EAAmC,GAA3Bre,KAAKwgB,KAAMzpB,EAAS,IAGlC,OAFA8B,EAAOq8D,YAAc72C,GAAS,EAC9BxlB,EAAOu8D,WAAa/2C,GAAS,EACtBxlB,uBC8BR,WACC67D,EACAC,EAAiBC,EACjByD,EAAiBC,EACjBzD,EAAgBC,EAChBC,GALD,MAOC53D,YAAOu3D,EAAQC,EAASC,EAASC,EAAQC,EAAQC,gBAEjDz3D,EAAKi7D,SAAW16D,IAChBP,EAAKk7D,WAAa,OAClBl7D,EAAKypB,UAAY,GACjBzpB,EAAKm7D,YAAc,KACnBn7D,EAAKo7D,uBAAyB76D,IAC9BP,EAAKq7D,UAAY96D,IACjBP,EAAKs7D,UAAY/6D,IACjBP,EAAKu7D,WAAah7D,IAClBP,EAAKw7D,UAAYj7D,IACjBP,EAAKy7D,oBAAsBl7D,IAC3BP,EAAK07D,kBAAoBn7D,IACzBP,EAAK27D,qBAAuBp7D,IAC5BP,EAAK47D,mBAAqBr7D,IAC1BP,EAAK67D,iBAAmBt7D,IACxBP,EAAK87D,iBAAmBv7D,IACxBP,EAAK+7D,iBAAmBx7D,IACxBP,EAAKg8D,sBAAwBz7D,IAC7BP,EAAKi8D,oBAAsB17D,IAC3BP,EAAKk8D,cAAgB37D,IACrBP,EAAKm8D,sBAAwB57D,IAC7BP,EAAKo8D,oBAAsB77D,IAC3BP,EAAKq8D,cAAe,EACpBr8D,EAAKs8D,gBAAkBvB,EACvB/6D,EAAKu8D,eAAiBvB,IAkkCxB,OA5nCiDniE,OA6DhD2jE,yBAAA,SAAc/V,GACb,QAAI5mD,YAAMm8C,uBAAcyK,IACLqU,GAAoB2B,aAAchW,EAAO1tD,KAAKq+D,OAAOsF,WACpD9E,cAAgB7+D,KAAKujE,iBAKhCE,wBAAV,SAAuBpF,EAAsB3Q,GAC5C,IAAMmR,EAAc7+D,KAAK6+D,YAAc7+D,KAAKujE,gBAC5CvjE,KAAK4jE,yBAA0BvF,EAAQ3Q,EAAOmR,IAGrC4E,wBAAV,SACCI,EACAC,EACAC,EACAzF,EACA0F,EACAC,EACA/gE,EAAeyD,EACf2B,EAAYE,EACZD,EAAYE,EACZoB,EAAYG,EACZD,EAAYE,EACZi6D,EAAaC,EACbC,EAAaC,EACb7hE,GAEA,OAAQqhE,GACR,KAAKtM,GAA0B/qD,KAC9B,OAAQs3D,GACR,KAAKtM,GAAwBprD,IAC5B5J,EAAO4D,EAAIkC,EACR47D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAImC,EACR27D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU2F,GACrB,MACD,KAAKzM,GAAwBtmC,OAC5B1uB,EAAO4D,EAAI,IAAQkC,EAAKyB,GACrBm6D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU,GAAM33D,GAC3BnE,EAAO6D,EAAI,IAAQmC,EAAKyB,GACrBk6D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU,GAAM33D,GAC3B,MACD,KAAK6wD,GAAwBlrD,OAC5B9J,EAAO4D,EAAI2D,EACRm6D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAI4D,EACRk6D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB8M,YAC5B9hE,EAAO4D,EAAIkC,EACR47D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAImC,EACR27D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB+M,eAC5B/hE,EAAO4D,EAAI2D,EACRm6D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAI4D,EACRk6D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU2F,GAGtB,MACD,KAAK1M,GAA0B1jD,OAC9B,OAAQiwD,GACR,KAAKtM,GAAwBprD,IAC5B5J,EAAO4D,EAAI,IAAQkC,EAAKC,GACrB27D,GAAQH,EAAU,GAAM7gE,GACxBkhE,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAI,IAAQmC,EAAKC,GACrB07D,GAAQJ,EAAU,GAAM7gE,GACxBmhE,GAAQ/F,EAAU2F,GACrB,MACD,KAAKzM,GAAwBtmC,OAC5B1uB,EAAO4D,EAAI,IAAQkC,EAAKuB,GACrBq6D,GAAQH,EAAU,GAAM7gE,GACxBkhE,GAAQ9F,EAAU,GAAM33D,GAC3BnE,EAAO6D,EAAI,IAAQmC,EAAKwB,GACrBm6D,GAAQJ,EAAU,GAAM7gE,GACxBmhE,GAAQ/F,EAAU,GAAM33D,GAC3B,MACD,KAAK6wD,GAAwBlrD,OAC5B9J,EAAO4D,EAAI,IAAQ2D,EAAKF,GACrBq6D,GAAQH,EAAU,GAAM7gE,GACxBkhE,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAI,IAAQ4D,EAAKD,GACrBm6D,GAAQJ,EAAU,GAAM7gE,GACxBmhE,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB8M,YAC5B9hE,EAAO4D,EAAI,IAAQkC,EAAKC,GACrB27D,GAAQH,EAAU,GAAM7gE,GACxBkhE,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAI,IAAQmC,EAAKC,GACrB07D,GAAQJ,EAAU,GAAM7gE,GACxBmhE,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB+M,eAC5B/hE,EAAO4D,EAAI,IAAQ2D,EAAKF,GACrBq6D,GAAQH,EAAU,GAAM7gE,GACxBkhE,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAI,IAAQ4D,EAAKD,GACrBm6D,GAAQJ,EAAU,GAAM7gE,GACxBmhE,GAAQ/F,EAAU2F,GAGtB,MACD,KAAK1M,GAA0B7qD,MAC9B,OAAQo3D,GACR,KAAKtM,GAAwBprD,IAC5B5J,EAAO4D,EAAImC,EACR27D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAIoC,EACR07D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU2F,GACrB,MACD,KAAKzM,GAAwBtmC,OAC5B1uB,EAAO4D,EAAI,IAAQmC,EAAKsB,GACrBq6D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU,GAAM33D,GAC3BnE,EAAO6D,EAAI,IAAQoC,EAAKuB,GACrBm6D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU,GAAM33D,GAC3B,MACD,KAAK6wD,GAAwBlrD,OAC5B9J,EAAO4D,EAAIyD,EACRq6D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAI2D,EACRm6D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB8M,YAC5B9hE,EAAO4D,EAAImC,EACR27D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAIoC,EACR07D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB+M,eAC5B/hE,EAAO4D,EAAIyD,EACRq6D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAI2D,EACRm6D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU2F,GAGtB,MACD,KAAK1M,GAA0BiN,aAC9B,OAAQV,GACR,KAAKtM,GAAwBprD,IAC5B5J,EAAO4D,EAAIkC,EACR47D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAImC,EACR27D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU2F,GACrB,MACD,KAAKzM,GAAwBtmC,OAC5B1uB,EAAO4D,EAAI,IAAQkC,EAAKyB,GACrBm6D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU,GAAM33D,GAC3BnE,EAAO6D,EAAI,IAAQmC,EAAKyB,GACrBk6D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU,GAAM33D,GAC3B,MACD,KAAK6wD,GAAwBlrD,OAC5B9J,EAAO4D,EAAI2D,EACRm6D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAI4D,EACRk6D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB8M,YAC5B9hE,EAAO4D,EAAIkC,EACR47D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAImC,EACR27D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB+M,eAC5B/hE,EAAO4D,EAAI2D,EACRm6D,GAAQH,EAAUC,EAAW9gE,GAC7BkhE,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAI4D,EACRk6D,GAAQJ,EAAUC,EAAW9gE,GAC7BmhE,GAAQ/F,EAAU2F,GAGtB,MACD,KAAK1M,GAA0BkN,cAC9B,OAAQX,GACR,KAAKtM,GAAwBprD,IAC5B5J,EAAO4D,EAAImC,EACR27D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAIoC,EACR07D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU2F,GACrB,MACD,KAAKzM,GAAwBtmC,OAC5B1uB,EAAO4D,EAAI,IAAQmC,EAAKsB,GACrBq6D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU,GAAM33D,GAC3BnE,EAAO6D,EAAI,IAAQoC,EAAKuB,GACrBm6D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU,GAAM33D,GAC3B,MACD,KAAK6wD,GAAwBlrD,OAC5B9J,EAAO4D,EAAIyD,EACRq6D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAI2D,EACRm6D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB8M,YAC5B9hE,EAAO4D,EAAImC,EACR27D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU2F,EAAWt9D,GAChCnE,EAAO6D,EAAIoC,EACR07D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU2F,EAAWt9D,GAChC,MACD,KAAK6wD,GAAwB+M,eAC5B/hE,EAAO4D,EAAIyD,EACRq6D,GAAQH,EAAUC,GAClBI,GAAQ9F,EAAU2F,GACrBzhE,EAAO6D,EAAI2D,EACRm6D,GAAQJ,EAAUC,GAClBK,GAAQ/F,EAAU2F,MAOdR,sBAAV,SAAqBvqD,EAAYE,EAAYsrD,EAAcC,EAAcniE,GACxE,IAAMlD,EAAI4Z,EAAKA,EAAKE,EAAKA,EACzB,GA9TmB,KA8TR9Z,EAAI,CACd,IAAM6K,EAAIR,KAAK+zB,KAAMp+B,GACfslE,EAAK,EAAIz6D,EAEf,OADA3H,EAAO8D,IAAK4S,EAAK0rD,EAAIxrD,EAAKwrD,GACnBz6D,EAGP,OADA3H,EAAO8D,IAAKo+D,EAAMC,GACX,GAIClB,uCAAV,SAAsCrgE,GACrC,OAAQA,GACR,KAAKm0D,GAA0B/qD,KAC9B,OAAOgrD,GAAwBlrD,OAChC,KAAKirD,GAA0B1jD,OAC9B,OAAO2jD,GAAwBtmC,OAChC,KAAKqmC,GAA0B7qD,MAC9B,OAAO8qD,GAAwBprD,IAChC,KAAKmrD,GAA0BiN,aAC9B,OAAOhN,GAAwB+M,eAChC,KAAKhN,GAA0BkN,cAC9B,OAAOjN,GAAwB8M,cAIvBb,qCAAV,SAAoCrgE,GACnC,OAAQA,GACR,KAAKo0D,GAAwBprD,IAC5B,OAAOmrD,GAA0B/qD,KAClC,KAAKgrD,GAAwBtmC,OAC5B,OAAOqmC,GAA0B1jD,OAClC,KAAK2jD,GAAwBlrD,OAC5B,OAAOirD,GAA0B7qD,MAClC,KAAK8qD,GAAwB8M,YAC5B,OAAO/M,GAA0BiN,aAClC,KAAKhN,GAAwB+M,eAC5B,OAAOhN,GAA0BkN,gBAIzBhB,sCAAV,SAAqCrgE,GACpC,OAAQA,GACR,KAAKm0D,GAA0B/qD,KAC9B,OAAOgrD,GAAwBprD,IAChC,KAAKmrD,GAA0B1jD,OAC9B,OAAO2jD,GAAwBtmC,OAChC,KAAKqmC,GAA0B7qD,MAC9B,OAAO8qD,GAAwBlrD,OAChC,KAAKirD,GAA0BiN,aAC9B,OAAOhN,GAAwB8M,YAChC,KAAK/M,GAA0BkN,cAC9B,OAAOjN,GAAwB+M,iBAIvBd,oCAAV,SAAmCrgE,GAClC,OAAQA,GACR,KAAKo0D,GAAwBprD,IAC5B,OAAOmrD,GAA0B7qD,MAClC,KAAK8qD,GAAwBtmC,OAC5B,OAAOqmC,GAA0B1jD,OAClC,KAAK2jD,GAAwBlrD,OAC5B,OAAOirD,GAA0B/qD,KAClC,KAAKgrD,GAAwB8M,YAC5B,OAAO/M,GAA0BkN,cAClC,KAAKjN,GAAwB+M,eAC5B,OAAOhN,GAA0BiN,eAIzBf,6BAAV,SAA4BpF,EAAsB3Q,EAAemX,GAChE,IAAM77C,EAAO0kC,EAAM1kC,KACbk5C,EAAWl5C,EAAKhU,KAChBmtD,EAAan5C,EAAKwb,OAClB9T,EAAY1H,EAAKyF,MACjBg0C,EAAYz5C,EAAKgE,MACjB01C,EAAsB15C,EAAK5lB,MAAMqsB,WACjCkzC,EAAoB35C,EAAK5lB,MAAMmsB,SAC/BqzC,EAAuB55C,EAAKvkB,OAAOgrB,WACnCozC,EAAqB75C,EAAKvkB,OAAO8qB,SACjC0zC,EAAwBj6C,EAAK+xC,QAAQtrC,WACrCyzC,EAAsBl6C,EAAK+xC,QAAQxrC,SACnC4zC,EAAgBn6C,EAAK86B,UACrBsf,EAAwBp6C,EAAK/jB,QAAQwqB,WACrC4zC,EAAsBr6C,EAAK/jB,QAAQsqB,SACnC+zC,EAAet6C,EAAKkD,SACpBk2C,EAAcp5C,EAAKtiB,SAAW2lB,UAAQyzC,MACtCuC,EAAyBriE,KAAK8kE,qBAAsB1C,GAEpD2C,EAAiBr0C,IAAc1wB,KAAK0wB,WAAayxC,IAAeniE,KAAKmiE,WACrE6C,EAAqB9C,IAAaliE,KAAKkiE,SACvC+C,EAAsBxC,IAAcziE,KAAKyiE,UACzCyC,EAAsBxC,IAAwB1iE,KAAK0iE,qBACxDC,IAAsB3iE,KAAK2iE,kBACtBwC,EAAuBvC,IAAyB5iE,KAAK4iE,sBAC1DC,IAAuB7iE,KAAK6iE,mBACvBuC,EAAwBnC,IAA0BjjE,KAAKijE,uBAC5DC,IAAwBljE,KAAKkjE,qBAC7BE,IAA0BpjE,KAAKojE,uBAC/BC,IAAwBrjE,KAAKqjE,oBACxBgC,EAA0BlC,IAAkBnjE,KAAKmjE,cACjDmC,EAAsBtlE,KAAKsjE,eAAiBA,EAC5CiC,EAAqBnD,IAAgBpiE,KAAKoiE,aAC/CC,IAA2BriE,KAAKqiE,uBAEjC,GAAI0C,GAAiBC,GAAqBC,GACzCC,GAAsBC,GAAuBC,GAC7CC,GAA0BC,GAAqBC,EAAmB,CAClEvlE,KAAKkiE,SAAWA,EAChBliE,KAAKmiE,WAAaA,EAClBniE,KAAK0wB,UAAYA,EACjB1wB,KAAKyiE,UAAYA,EACjBziE,KAAK0iE,oBAAsBA,EAC3B1iE,KAAK2iE,kBAAoBA,EACzB3iE,KAAK4iE,qBAAuBA,EAC5B5iE,KAAK6iE,mBAAqBA,EAC1B7iE,KAAKijE,sBAAwBA,EAC7BjjE,KAAKkjE,oBAAsBA,EAC3BljE,KAAKmjE,cAAgBA,EACrBnjE,KAAKojE,sBAAwBA,EAC7BpjE,KAAKqjE,oBAAsBA,EAC3BrjE,KAAKsjE,aAAeA,EACpBtjE,KAAKoiE,YAAcA,EACnBpiE,KAAKqiE,uBAAyBA,EAE1B2C,IAEHhlE,KAAKwiE,WAAah7D,KAWnB,IAAMwN,EAAO04C,EAAM14C,KACb2+C,EAAc,GAAT3+C,EAAK5O,EACVwtD,EAAc,GAAT5+C,EAAK3O,EAChBqnD,EAAM7mC,kBACN,IAAMmpC,EAAoBtC,EAAMzxC,UAAU+zC,kBACpC7oC,EAAOk3C,EAAOl3C,KACpBA,EAAK7gB,KAAMqtD,GAAKC,GAChB5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM7e,EAAK6e,EAAK/gB,EACVoC,EAAK2e,EAAK9gB,EAChB8gB,EAAK7gB,KAAMqtD,GAAKC,GAChB5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM5e,EAAK4e,EAAK/gB,EACVqC,EAAK0e,EAAK9gB,EAChB8gB,EAAK7gB,KAAMqtD,GAAKC,GAChB5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAMtd,EAAKsd,EAAK/gB,EACV4D,EAAKmd,EAAK9gB,EACV0D,EAAKzB,GAAMuB,EAAKtB,GAChB0B,EAAKzB,GAAMwB,EAAKvB,GAGhB+8D,EAAKxlE,KAAKylE,WAAYn9D,EAAIE,EAAID,EAAIE,GACxCzI,KAAK44D,UAAW5I,EAAkBvmC,EAAGumC,EAAkBzwD,EAAG,EAAG,EAAG4nB,GAChE,IAAI+8C,EAAM/8C,EAAK/gB,EACX+9D,EAAMh9C,EAAK9gB,EAGTq/D,EAAK1lE,KAAKylE,WAAYn9D,EAAIE,EAAIuB,EAAIE,GACxCjK,KAAK44D,UAAW5I,EAAkBnnD,EAAGmnD,EAAkB1wD,EAAG,EAAG,EAAG6nB,GAWhE,IAVA,IAAIi9C,EAAMj9C,EAAK/gB,EACXi+D,EAAMl9C,EAAK9gB,EAGXnD,EAAQ,EACRyD,EAAS,EACTg/D,EAAa,EACXv9C,EAAaze,KAAKG,IAAK,EAAGo4D,EAAWgB,GACvChmC,EAAY,EACV0oC,GAAsBf,EAAU58C,WAC7B1mB,GAAI,EAAGC,GAAOkvB,EAAUhwB,OAAQa,GAAIC,KAAQD,GAElC,QADZumB,GAAY4I,EAAWnvB,KAGhB,OADNqG,GAAOg+D,GAAqB99C,OAEjCoV,GAAal9B,KAAK6lE,UAAWtkE,GAAGC,GAAMkvB,EAAW9oB,GAAKugB,QAAS86C,GAC/D0C,EAAa/9D,GAAKjB,SAGnBzD,EAAQyG,KAAKG,IAAK5G,EAAOg6B,GACzBA,EAAY,EACZv2B,GAAUyhB,GAIZ,IAAM9L,GAAQ4lD,EAAW2C,EAAUv7C,KAAKtU,KACxC9R,EAAQyG,KAAKG,IAAK5G,EAAOg6B,GAAc5gB,GACvCqpD,GAAcrpD,GACd3V,GAAUu7D,EAGV,IAAI4D,GAAM,EACNC,GAAM,EACNC,GAAmBx+D,IACvB,OAAQ27D,GACR,KAAK1L,GAAoBuD,cAmBxB,GAlBAh7D,KAAKimE,YACJvD,EACAC,EACAC,EACAC,EACAO,EACAC,EACAngE,EAAOyD,EACP2B,EAAIE,EACJD,EAAIE,EACJoB,EAAIG,EACJD,EAAIE,EACJi6D,EAAKC,EACLC,EAAKC,EACLl9C,GAED2+C,GAAM3+C,EAAK/gB,EACX2/D,GAAM5+C,EAAK9gB,EACPi9D,EACH,OAAQZ,GACR,KAAKnL,GAA0B/qD,KAC/B,KAAK+qD,GAA0B1jD,OAC/B,KAAK0jD,GAA0B7qD,MAC9B,OAAQi2D,GACR,KAAKnL,GAAwBprD,IAC7B,KAAKorD,GAAwBtmC,OAC7B,KAAKsmC,GAAwBlrD,OAC5B05D,GAAmBR,EAA6B,EAAxBpC,GAM3B,MACD,KAAK3L,GAAoByO,cA2BxB,GAzBA/+C,EAAK7gB,IAAK89D,EAAKC,GACfD,GAAOF,EACPG,GAAOF,EACPD,EAAM/8C,EAAK/gB,EACX+9D,EAAMh9C,EAAK9gB,EAGXrG,KAAKimE,YACJjmE,KAAKmmE,yBAA0BxD,GAC/B3iE,KAAKomE,2BAA4B1D,GACjCG,EACAD,EACAS,EACAD,EACAlgE,EAAOyD,EACP4B,EAAIE,EACJoB,EAAIG,EACJD,EAAIE,EACJ3B,EAAIE,EACJ07D,EAAKC,EACLC,EAAKC,EACLl9C,GAED2+C,GAAM3+C,EAAK/gB,EACX2/D,GAAM5+C,EAAK9gB,EACPi9D,EACH,OAAQX,GACR,KAAKnL,GAAwBprD,IAC7B,KAAKorD,GAAwBtmC,OAC7B,KAAKsmC,GAAwBlrD,OAC5B,OAAQo2D,GACR,KAAKnL,GAA0B/qD,KAC/B,KAAK+qD,GAA0B1jD,OAC/B,KAAK0jD,GAA0B7qD,MAC9Bs5D,GAAmBN,EAA2B,EAAtBrC,GAM3B,MACD,KAAK5L,GAAoB4O,cA2BxB,GAzBAl/C,EAAK7gB,IAAK89D,EAAKC,GACfD,EAAMF,EACNG,EAAMF,EACND,GAAO/8C,EAAK/gB,EACZ+9D,GAAOh9C,EAAK9gB,EAGZrG,KAAKimE,YACJjmE,KAAKsmE,wBAAyB3D,GAC9B3iE,KAAKumE,0BAA2B7D,GAChCG,EACAD,EACAS,EACAD,EACAlgE,EAAOyD,EACPoD,EAAIE,EACJ3B,EAAIE,EACJD,EAAIE,EACJoB,EAAIG,EACJk6D,EAAKC,EACLC,EAAKC,EACLl9C,GAED2+C,GAAM3+C,EAAK/gB,EACX2/D,GAAM5+C,EAAK9gB,EACPi9D,EACH,OAAQX,GACR,KAAKnL,GAAwBprD,IAC7B,KAAKorD,GAAwBtmC,OAC7B,KAAKsmC,GAAwBlrD,OAC5B,OAAQo2D,GACR,KAAKnL,GAA0B/qD,KAC/B,KAAK+qD,GAA0B1jD,OAC/B,KAAK0jD,GAA0B7qD,MAC9Bs5D,GAAmBN,EAA2B,EAAtBrC,IAU5B,IAAMrP,GAAYhrC,EAAKirC,MAAQjrC,EAAKirC,OAAS,IAAIltD,aAAc,GAC/D,GAAIi/D,GAAmB9iE,EAAQ,CAC9B,IAAMsjE,GAAwC,IAA7BtjE,EAAQ8iE,IACzBhS,GAAW,GAAM8R,GAAM5B,EAAMsC,GAC7BxS,GAAW,GAAM+R,GAAM5B,EAAMqC,GAC7BxS,GAAW,GAAMkQ,EACjBlQ,GAAW,GAAMmQ,EACjBnQ,GAAW,GAAMoQ,EACjBpQ,GAAW,GAAMqQ,EACjBrQ,GAAW,GAAMgS,GACjBhS,GAAW,GAAMrtD,OAEjBqtD,GAAW,GAAM8R,GACjB9R,GAAW,GAAM+R,GACjB/R,GAAW,GAAMkQ,EACjBlQ,GAAW,GAAMmQ,EACjBnQ,GAAW,GAAMoQ,EACjBpQ,GAAW,GAAMqQ,EACjBrQ,GAAW,GAAM9wD,EACjB8wD,GAAW,GAAMrtD,EAIlB,IAAMuD,GAAalK,KAAKymE,aAAcrE,GAChCsE,GAAOx8D,GAAW5B,GAClBq+D,GAAOz8D,GAAW3B,GAClBq+D,GAAO18D,GAAWH,GAClB88D,GAAO38D,GAAW1B,GAClBs+D,GAAO58D,GAAWzB,GAClBs+D,GAAO78D,GAAWD,GAElB+8D,GAAWL,GAAOD,GAClBO,GAAWH,GAAOD,GAClBK,GAAWN,GAAOF,GAClBS,GAAWJ,GAAOF,GAGlBrI,GAASx+D,KAAKujE,gBACdjF,GAAUt+D,KAAK4+D,aAAe5+D,KAAK6+D,YAAcL,GACjD90D,GAAW20D,EAAO30D,SAClBd,GAAMy1D,EAAOz1D,IACnBy1D,EAAOv0C,aAAaxoB,SACpB+8D,EAAOt0C,SAASzoB,SAEhB,IAAM8lE,GAAMh/C,EAAag8C,EACnBiD,GAAMj/C,EAAai8C,EAEnBiD,GAAMhrD,GAAQ4nD,EACdqD,GAAMjrD,GAAQ6nD,EAEdxmC,GAAoC,IAAzBgoC,EAAazD,GACxBsF,GAAM7pC,GAAUymC,EAChBqD,GAAM9pC,GAAU0mC,EAEhBqD,GAAiBjF,IAAcnL,GAAgBwD,OAAS,EAAgB,IAAZ9xC,EAAKhU,KACnE2yD,GAAM7B,GAAM0B,GAAME,GAAeJ,GACjCM,GAAM7B,GAAM0B,GAAMC,GAAeH,GACjCM,GAAM/B,GAAM0B,GAAMtF,EAAWkC,EAC7B0D,GAAM/B,GAAM0B,GAAMvF,EAAWmC,EAC7B0D,GAAMJ,GACNK,GAAMJ,GACNK,GAAMJ,GACNK,GAAMJ,GAEV5qC,EAAY,EAGZ,IAFA,IAAIirC,GAAY,EACVC,GAAkB13C,EAAUhwB,OAClB0H,IAAP7G,GAAI,EAAkB,EAAV+8D,IAAa/8D,GAAI6mE,GAAiB7mE,IAAK,EAAG6G,IAAM,EAAI,CACxE,IAAM0f,GAEClgB,GADP,GAAkB,QADZkgB,GAAY4I,EAAWnvB,KAI5B,GADA4mE,IAAa,EACD,OAFNvgE,GAAOg+D,GAAqB99C,KAEf,CAClB,IAAMK,GAAUnoB,KAAK6lE,UAAWtkE,GAAG6mE,GAAiB13C,EAAW9oB,GAAKugB,QAAS86C,GAE7E,GAAI+C,IADJ9oC,GAAa/U,GAAU7L,IACY,CAClC,IAAMoN,GAAOk8C,GAAqB,OAClC,GAAY,MAARl8C,GAAe,CAClB1pB,KAAKsqB,eACJ5gB,GAAUd,GAAKR,GAAIshB,GAAMm7C,EACzByC,GAAKC,GACLQ,GAAKC,GAAKC,GAAKC,GACflB,GAAQC,GAAQC,GAAQC,GACxBT,GAAMG,IAGP,IAAMwB,GAAcroE,KAAK6lE,UAAWtkE,GAAG6mE,GAAiB13C,EAAWhH,GAAKvB,QAAS86C,GASjF,IANA/lC,IAAcmrC,GAAclgD,IAAW7L,GACvCyrD,IAHMtT,GAAK4T,GAAcf,GAIzBU,IAHMtT,GAAK2T,GAAcd,GAIzBU,IAAYxT,GACZyT,IAAYxT,GAEPnzD,IAAK,EAAG6G,IAAM,EAAG7G,GAAI6mE,GAAiB7mE,IAAK,EAAG6G,IAAM,EAAI,CAC5D,GAAuB,OAAnBsoB,EAAWnvB,IAOR,CACNA,IAAK,EACL6G,IAAM,EACN,MATApI,KAAKuqB,oBACJ7gB,GAAUd,GAAKR,GACf2/D,GAAKC,GAAKC,GAAKC,GACfxB,GAAMG,GAAMD,GAAMG,IAEnBoB,IAAa,QAQfnoE,KAAKuqB,oBACJ7gB,GAAUd,GAAKR,GACf2/D,GAAKC,GAAKC,GAAKC,GACfxB,GAAMG,GAAMD,GAAMG,QAGd,CASN,IAAMtS,GACAC,GATN10D,KAAKsqB,eACJ5gB,GAAUd,GAAKR,GAAIR,GAAMi9D,EACzByC,GAAKC,GACLQ,GAAKC,GAAKC,GAAKC,GACflB,GAAQC,GAAQC,GAAQC,GACxBT,GAAMG,IAKPkB,IAFMtT,GAAKtsC,GAAUm/C,GAGrBU,IAFMtT,GAAKvsC,GAAUo/C,GAGrBU,IAAYxT,GACZyT,IAAYxT,SAGb10D,KAAKuqB,oBACJ7gB,GAAUd,GAAKR,GACf2/D,GAAKC,GAAKC,GAAKC,GACfxB,GAAMG,GAAMD,GAAMG,SAIpB/mE,KAAKuqB,oBACJ7gB,GAAUd,GAAKR,GACf2/D,GAAKC,GAAKC,GAAKC,GACfxB,GAAMG,GAAMD,GAAMG,IAOnBgB,GAJAJ,IAAOP,GAKPY,GAJAJ,IAAOP,GAKPY,GAJAJ,IAAOT,GAKPc,GAJAJ,IAAOT,GAMPrnE,KAAKsoE,oBACJ5+D,GACAw6D,EAAKC,EACLgE,GACA//D,GACAlF,EAAQg6B,EACRimC,EACAT,EACAC,GAEDzlC,EAAY,EACZirC,GAAY,EAed,IAXAnoE,KAAKsoE,oBACJ5+D,GACAw6D,EAAKC,EACLgE,GACU,EAAV7J,GAAgC,EAAlB8J,GACdllE,EAAQg6B,EACRimC,EACAT,EACAC,GAGQphE,GAAc,EAAV+8D,GAAiC,EAAnB5tC,EAAUhwB,OAAYc,GAA4B,GAApB88D,GAAUE,IAAaj9D,GAAIC,GAAMD,IAAK,EAC9FmI,GAAUnI,GAAI,GAAMukE,GACpBp8D,GAAUnI,GAAI,GAAMwkE,GACpBn9D,GAAKrH,GAAI,GAAMmlE,GACf99D,GAAKrH,GAAI,GAAMslE,KAKRpD,sBAAV,SAAqB7iE,EAAeoU,EAAcgU,EAAcb,EAAiB4yC,GAChF,OACCn6D,EAAQ,EAAIoU,GAA8B,OAAtBgU,EAAMpoB,EAAQ,GAClC+I,KAAKG,IAAK,EAAGqe,EAAU4yC,GAAY5yC,GAI3Bs7C,gCAAV,SACC/5D,EAAwBd,EAAmBR,EAC3C2/D,EAAaC,EACbC,EAAaC,EACbxB,EAAcG,EACdD,EAAcG,GAEdr9D,EAAUtB,EAAK,GAAM2/D,EACrBr+D,EAAUtB,EAAK,GAAM4/D,EACrBt+D,EAAUtB,EAAK,GAAM2/D,EACrBr+D,EAAUtB,EAAK,GAAM4/D,EACrBt+D,EAAUtB,EAAK,GAAM6/D,EACrBv+D,EAAUtB,EAAK,GAAM8/D,EACrBx+D,EAAUtB,EAAK,GAAM6/D,EACrBv+D,EAAUtB,EAAK,GAAM8/D,EAErBt/D,EAAKR,EAAK,GAAMs+D,EAChB99D,EAAKR,EAAK,GAAMy+D,EAChBj+D,EAAKR,EAAK,GAAMs+D,EAChB99D,EAAKR,EAAK,GAAMy+D,EAChBj+D,EAAKR,EAAK,GAAMw+D,EAChBh+D,EAAKR,EAAK,GAAM2+D,EAChBn+D,EAAKR,EAAK,GAAMw+D,EAChBh+D,EAAKR,EAAK,GAAM2+D,GAGPtD,2BAAV,SACC/5D,EAAwBd,EAAmBR,EAC3CR,EAAgCqhB,EAChCq+C,EAAaC,EACbQ,EAAaC,EACbC,EAAaC,EACblB,EAAgBC,EAChBC,EAAgBC,EAChBT,EAAcG,GAGd,IAAM0B,EAAc3gE,EAAKxB,EAAIwB,EAAK6iB,OAAOrkB,EACnCoiE,EAAY5gE,EAAK1E,MACjBulE,EAAMF,EAAcjB,EACpBoB,EAAMH,EAAchB,EACpBoB,GAAOJ,EAAcC,GAAalB,EAClCsB,GAAOL,EAAcC,GAAajB,EACxC79D,EAAUtB,EAAK,GAAM2/D,EAAMU,EAC3B/+D,EAAUtB,EAAK,GAAM4/D,EAAMU,EAC3Bh/D,EAAUtB,EAAK,GAAM2/D,EAAMY,EAC3Bj/D,EAAUtB,EAAK,GAAM4/D,EAAMY,EAC3Bl/D,EAAUtB,EAAK,GAAM6/D,EAAMU,EAC3Bj/D,EAAUtB,EAAK,GAAM8/D,EAAMU,EAC3Bl/D,EAAUtB,EAAK,GAAM6/D,EAAMQ,EAC3B/+D,EAAUtB,EAAK,GAAM8/D,EAAMQ,EAG3B,IAAMvH,EAAMv5D,EAAKxB,EAAI6iB,EAAM/lB,MACrBk+D,EAAMx5D,EAAKvB,EAAI4iB,EAAMtiB,OACrB06D,GAAOz5D,EAAKxB,EAAIwB,EAAK1E,OAAS+lB,EAAM/lB,MACpCo+D,GAAO15D,EAAKvB,EAAIuB,EAAKjB,QAAUsiB,EAAMtiB,OAErCkiE,EAAO7B,EAAS7F,EAChB2H,EAAO7B,EAAS9F,EAChB4H,EAAO/B,EAAS3F,EAChB2H,EAAO/B,EAAS5F,EAEhB4H,EAAO/B,EAAS9F,EAChB8H,EAAO/B,EAAS/F,EAChB+H,EAAOjC,EAAS5F,EAChB8H,EAAOjC,EAAS7F,EACtB14D,EAAKR,EAAK,GAAMs+D,EAAOmC,EAAOI,EAC9BrgE,EAAKR,EAAK,GAAMy+D,EAAOiC,EAAOI,EAC9BtgE,EAAKR,EAAK,GAAMs+D,EAAOqC,EAAOE,EAC9BrgE,EAAKR,EAAK,GAAMy+D,EAAOmC,EAAOE,EAC9BtgE,EAAKR,EAAK,GAAMs+D,EAAOqC,EAAOI,EAC9BvgE,EAAKR,EAAK,GAAMy+D,EAAOmC,EAAOI,EAC9BxgE,EAAKR,EAAK,GAAMs+D,EAAOmC,EAAOM,EAC9BvgE,EAAKR,EAAK,GAAMy+D,EAAOiC,EAAOM,GAGrB3F,qBAAV,SAAoB/5D,EAAwB2/D,EAAqBC,EAAmBpwD,EAAYE,GAC/F,IAAK,IAAI7X,EAAI,EAAG6G,EAAKihE,EAAc,EAAIC,EAAW/nE,EAAI+nE,EAAW/nE,GAAK,EAAG6G,GAAM,EAC9EsB,EAAUtB,EAAK,IAAO8Q,EACtBxP,EAAUtB,EAAK,IAAOgR,EACtB1P,EAAUtB,EAAK,IAAO8Q,EACtBxP,EAAUtB,EAAK,IAAOgR,EACtB1P,EAAUtB,EAAK,IAAO8Q,EACtBxP,EAAUtB,EAAK,IAAOgR,EACtB1P,EAAUtB,EAAK,IAAO8Q,EACtBxP,EAAUtB,EAAK,IAAOgR,GAIdqqD,yBAAV,SACC/5D,EAAwB2/D,EAAqBC,EAC7C7kE,EAAgB8kE,EAAYC,GAE5B/kE,GAAU,GACVzE,KAAKypE,SAAU//D,EAAU2/D,EAAaC,EAAW7kE,EAAS8kE,EAAI9kE,EAAS+kE,IAG9D/F,yBAAV,SACC/5D,EAAwB2/D,EAAqBC,EAC7C7kE,EAAgB8kE,EAAYC,GAE5BxpE,KAAKypE,SAAU//D,EAAU2/D,EAAaC,EAAW7kE,EAAS8kE,EAAI9kE,EAAS+kE,IAG9D/F,gCAAV,SACC/5D,EACA6/D,EAAYC,EACZrB,EAAmBkB,EACnB5kE,EACA0+D,EACAT,EACAC,GAEA,GA77BmB,KA67BRl+D,EACV,OAAQ0+D,GACR,KAAK1L,GAAoBuD,cACxB,OAAQ0H,GACR,KAAKnL,GAA0BkN,cAC/B,KAAKlN,GAA0B/qD,KAE9B,MACD,KAAK+qD,GAA0B1jD,OAC9B7T,KAAK0pE,aAAchgE,EAAU2/D,EAAalB,EAAW1jE,EAAQ8kE,EAAIC,GACjE,MACD,KAAKjS,GAA0BiN,aAC/B,KAAKjN,GAA0B7qD,MAC9B1M,KAAK2pE,aAAcjgE,EAAU2/D,EAAalB,EAAW1jE,EAAQ8kE,EAAIC,GAGlE,MACD,KAAK/R,GAAoByO,cACxB,OAAQvD,GACR,KAAKnL,GAAwB+M,eAC7B,KAAK/M,GAAwBprD,IAE5B,MACD,KAAKorD,GAAwBtmC,OAC5BlxB,KAAK0pE,aAAchgE,EAAU2/D,EAAalB,EAAW1jE,EAAQ8kE,EAAIC,GACjE,MACD,KAAKhS,GAAwB8M,YAC7B,KAAK9M,GAAwBlrD,OAC5BtM,KAAK2pE,aAAcjgE,EAAU2/D,EAAalB,EAAW1jE,EAAQ8kE,EAAIC,GAGlE,MACD,KAAK/R,GAAoB4O,cACxB,OAAQ1D,GACR,KAAKnL,GAAwB+M,eAC7B,KAAK/M,GAAwBprD,IAC5BpM,KAAK2pE,aAAcjgE,EAAU2/D,EAAalB,EAAW1jE,EAAQ8kE,EAAIC,GACjE,MACD,KAAKhS,GAAwBtmC,OAC5BlxB,KAAK0pE,aAAchgE,EAAU2/D,EAAalB,EAAW1jE,EAAQ8kE,EAAIC,GACjE,MACD,KAAKhS,GAAwB8M,YAC7B,KAAK9M,GAAwBlrD,WAStBm3D,gCAAV,SAA+BpF,EAAsB3Q,GACpD,IAAM1kC,EAAO0kC,EAAM1kC,KACb9mB,EAAQ8mB,EAAK9mB,MACbE,EAAUsrD,EAAM/+C,SAAWqa,EAAK2tC,OAAS3tC,EAAK5mB,MAAQ,EACxDF,IAAUlC,KAAKsiE,WAAalgE,IAAUpC,KAAKuiE,YAC9CviE,KAAKsiE,UAAYpgE,EACjBlC,KAAKuiE,UAAYngE,EACjBi8D,EAAOgC,gBAAgB/+D,SAEvBtB,KAAKsgE,UACJp+D,EAAOE,EACPpC,KAAK4+D,aAAe5+D,KAAK6+D,YAAc7+D,KAAKujE,gBAC5CvjE,KAAKujE,gBACLlF,EAAOkC,cAKAkD,kCAAV,SAAiCpF,EAAsB3Q,GACtD,IAAM1kC,EAAO0kC,EAAM1kC,KACbzkB,EAAUykB,EAAKzkB,QACfrC,EAAQqC,EAAQrC,MAChBE,EAAUsrD,EAAM/+C,SAAWqa,EAAK2tC,OAASpyD,EAAQnC,MAAQ,EAC3DF,IAAUlC,KAAK+iE,kBAAoB3gE,IAAUpC,KAAKgjE,mBACrDhjE,KAAK+iE,iBAAmB7gE,EACxBlC,KAAKgjE,iBAAmB5gE,EACxBi8D,EAAOmC,kBAAkBl/D,SAEzBtB,KAAKsgE,UACJp+D,EAAOE,EACPpC,KAAK4+D,aAAe5+D,KAAK6+D,YAAc7+D,KAAKujE,gBAC5CvjE,KAAKujE,gBACLlF,EAAOoC,gBAKAgD,2BAAV,SAA0BpF,EAAsB3Q,GAC/C,IAAM1kC,EAAO0kC,EAAM1kC,KACb4gD,EAAc5gD,EAAKzkB,QACnBu+D,EAAoB8G,EAAYjT,OAASiT,EAAY1mE,MAAQ,EAC7Ds/D,EAAax5C,EAAK/J,OACxB,GAAIujD,IAAexiE,KAAKwiE,YAAcM,IAAqB9iE,KAAK8iE,iBAAmB,CAClF9iE,KAAKwiE,WAAaA,EAClBxiE,KAAK8iE,iBAAmBA,EAExBzE,EAAOwL,WAAWvoE,SAClB+8D,EAAOyL,gBAAgBxoE,SACvB,IAAMigE,EAAQlD,EAAOkD,MACfC,EAAcnD,EAAOmD,YACrBhD,EAASx+D,KAAKujE,gBACdjF,EAAUt+D,KAAK4+D,aAAe5+D,KAAK6+D,YAAcL,EAEjDqG,EAAY77C,EAAKC,MACvB,GAAiB,MAAb47C,EAAoB,CAIvB,IAHA,IAAMvoD,EAAQ,KAAQ0M,EAAKhU,KAAO6vD,EAAUv7C,KAAKtU,MAC3CtH,EAAkC,GAAnBo1D,EACf7jD,GAAqBujD,IAAenL,GAAiByD,OAAS,EAAM,KAAzD,KACSt5D,GAAjBD,EAAc,EAAV+8D,GAAiC,EAATE,EAAYj9D,EAAIC,EAAMD,GAAK,EAC/DggE,EAAOhgE,EAAI,GAAM+a,EACjBilD,EAAOhgE,EAAI,GAAMmM,EAElB,IAA0BlM,GAAjBD,EAAc,EAAV+8D,GAAiC,EAATE,EAAYj9D,EAAIC,EAAMD,GAAK,EAC/DigE,EAAajgE,EAAK,GAAM0d,EACxBuiD,EAAajgE,EAAK,GAhjCF,KAijChBigE,EAAajgE,EAAK,GAjjCF,KAkjChBigE,EAAajgE,EAAK,GAljCF,SAojCX,CACN,IAA0BC,GAAjBD,EAAc,EAAV+8D,GAAiC,EAATE,EAAYj9D,EAAIC,EAAMD,GAAK,EAC/DggE,EAAOhgE,EAAI,GAAM,EACjBggE,EAAOhgE,EAAI,GAAM,EAEb,IAAIA,EAAT,IAA0BC,GAAjBD,EAAc,EAAV+8D,GAAiC,EAATE,EAAYj9D,EAAIC,EAAMD,GAAK,EAC/DigE,EAAajgE,EAAK,GA1jCF,KA2jChBigE,EAAajgE,EAAK,GA3jCF,KA4jChBigE,EAAajgE,EAAK,GA5jCF,KA6jChBigE,EAAajgE,EAAK,GA7jCF,QAmkCVkiE,uBAAV,SAAsBpF,EAAsB3Q,GAE3C,GAAI,EADW1tD,KAAKujE,gBACH,CAChB,IAAMsB,EAAYnX,EAAM1kC,KAAKC,MACZ,MAAb47C,IACH7kE,KAAK+pE,iBAAkB1L,EAAQ3Q,EAAOmX,GACtC7kE,KAAKgqE,oBAAqB3L,EAAQ3Q,GAClC1tD,KAAKiqE,sBAAuB5L,EAAQ3Q,GACpC1tD,KAAKkqE,eAAgB7L,EAAQ3Q,MAKhC+V,qBAAA,WACC,IAAMjF,EAASx+D,KAAKujE,gBACpB,GAAI,EAAI/E,EAAS,CAChB,IAAMC,EAASz+D,KAAKwjE,eACdlF,EAAUt+D,KAAK4+D,aAAe5+D,KAAK6+D,YAAcL,EACjDD,EAAUv+D,KAAK8+D,YAAc9+D,KAAK++D,WAAaN,EAC/CJ,EAASr+D,KAAKq+D,OAGpBA,EAAO8L,eAAe7oE,SAEtB,IADA,IAAMmgE,EAAYpD,EAAOoD,UACCjgE,GAAjBD,EAAc,EAAV+8D,GAAiC,EAATE,EAAYj9D,EAAIC,EAAMD,GAAK,EAC/DkgE,EAAWlgE,EAAI,GAAM,EACrBkgE,EAAWlgE,EAAI,GAAM,EACrBkgE,EAAWlgE,EAAI,GAAM,EAItB88D,EAAOr0C,YAAY1oB,SACnB,IAAMqH,EAAU01D,EAAO11D,QACdpH,EAAI,EAAGmH,EAAe,EAAV61D,EAArB,IAAkC/8D,EAAQi9D,GAAU,EAAIl9D,EAAIC,EAAMD,GAAK,EAAGmH,GAAM,EAAI,CACnF,IAAM0J,EAAIksD,GAAY/8D,GAAK,GAC3BoH,EAASD,EAAK,GAAM0J,EAAI,EACxBzJ,EAASD,EAAK,GAAM0J,EAAI,EACxBzJ,EAASD,EAAK,GAAM0J,EAAI,EAExBzJ,EAASD,EAAK,GAAM0J,EAAI,EACxBzJ,EAASD,EAAK,GAAM0J,EAAI,EACxBzJ,EAASD,EAAK,GAAM0J,EAAI,KAK3BqxD,sBAAA,SAAW3B,GAGV,GAFAh7D,YAAMsjE,oBAAWtI,GAEb,EAAI9hE,KAAKujE,gBAAkB,CAC9B,IAAMnB,EAAcpiE,KAAKoiE,aAAe/1C,UAAQyzC,MAC1CuK,EAAkBjI,EAAYlqC,YACpC,GAAImyC,IAAoBvI,EAAQ5pC,YAAc,CAC7C4pC,EAAQ5pC,YAAcmyC,EACtB,IAAMvL,EAAc9+D,KAAK8+D,YAAc9+D,KAAK++D,WAAa/+D,KAAKwjE,eAC9D1B,EAAQthE,KAAM4hE,EAAatD,SAxnCkBc,mBCEhD,WACCvB,EACAC,EAAiBC,EACjByD,EAAiBC,EACjBzD,EAAgBC,EAChBC,GALD,MAOC53D,YAAOu3D,EAAQC,EAASC,EAASyD,EAASC,EAASzD,EAAQC,EAAQC,gBACnEz3D,EAAKqjE,SAAW9iE,IAChBP,EAAKsjE,YAAc7gB,GAAkBrrC,OA+OvC,OA5PuCve,OAgBtC0qE,iBAAA,SAAM9c,GACL5mD,YAAMwZ,eAAMotC,GACZ,IAAM2Q,EAASr+D,KAAKq+D,OACdC,EAAUt+D,KAAK4+D,aACfL,EAAUv+D,KAAK8+D,YAGrBT,EAAO8L,eAAe7oE,SACtB,IAAMmgE,EAAYpD,EAAOoD,UACzBpD,EAAOr0C,YAAY1oB,SACnB,IAAMqH,EAAU01D,EAAO11D,QAGjB8hE,EAAe,EAAVnM,EACXmD,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EAGvB,IAAM/hE,EAAe,EAAV61D,EAcX,OAbA51D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAE9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAG9Bt+D,KAAK0qE,WAGL1qE,KAAKsB,OAAQosD,GACN1tD,MAGRwqE,mBAAA,SAAQ9c,GACP,IAAM2Q,EAASr+D,KAAKq+D,OACpB,GAAI3Q,aAAiB0Q,GAAY,CAChC,IAAMppD,EAAO04C,EAAM14C,KACbs2C,EAAQt2C,EAAK5O,EACbmlD,EAAQv2C,EAAK3O,EACbskE,EAAkBrf,IAAUtrD,KAAKsrD,OAASC,IAAUvrD,KAAKurD,MACzDuC,EAASJ,EAAMI,OACf71B,EAAgB61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC/C0nE,EAAyB3yC,IAAgBj4B,KAAKi4B,YAC9C0mC,EAAmB3+D,KAAK6qE,mBAAoBnd,GAC5Cod,EAAuB9qE,KAAK2+D,mBAAqBA,EACjD2L,EAAW5c,EAAMwD,OAAOl5B,GACxB+yC,EAAsBT,IAAatqE,KAAKsqE,SACxCC,EAAc7c,EAAMwD,OAAOlkC,MAC3Bg+C,EAAyBT,IAAgBvqE,KAAKuqE,YACpD,GAAII,GAAiBG,GAAsBF,GAAwBG,GAAqBC,EAAuB,CAC9GhrE,KAAKsrD,MAAQA,EACbtrD,KAAKurD,MAAQA,EACbvrD,KAAKi4B,YAAcA,EACnBj4B,KAAK2+D,iBAAmBA,EACxB3+D,KAAKsqE,SAAWA,EAChBtqE,KAAKuqE,YAAcA,EACnBlM,EAAOv0C,aAAaxoB,SACpB+8D,EAAOwL,WAAWvoE,SAClB+8D,EAAOyL,gBAAgBxoE,SACvB+8D,EAAOgC,gBAAgB/+D,UAEnBqpE,GAAiBG,KAEpB9qE,KAAKijE,sBAAwBz7D,KAE1BujE,IAEH/qE,KAAK2/D,mBAAqBn4D,KAG3B,IAAM82D,EAAUt+D,KAAK4+D,aACfJ,EAASx+D,KAAK6+D,YAAc7+D,KAAKujE,gBACvCvjE,KAAKirE,iCACJ5M,EACA3Q,EAAMwD,OACNj5B,EACAy1B,EAAMzxC,UAAU+zC,kBAChBsO,EAASE,IAKZx+D,KAAKkrE,YAAa7M,EAAQ3Q,GAC1B1tD,KAAKmrE,YAAa9M,EAAQ3Q,GAC1B1tD,KAAKwxB,WAAY6sC,EAAQ3Q,IAGhB8c,qCAAV,SAAoCnM,EAAsB3Q,EAAemR,GACxE7+D,KAAK2gE,kBAAmBtC,EAAQ3Q,EAAOmR,IAG9B2L,6CAAV,SACCnM,EACAnN,EACAj5B,EACA+3B,EACAsO,EACAE,GAEA,IAAMp2D,EAAe,EAAVk2D,EACLtzD,EAAe,EAAVszD,EACL50D,EAAW20D,EAAO30D,SAClB63D,EAAQlD,EAAOkD,MACfC,EAAcnD,EAAOmD,YACrBjB,EAAalC,EAAOkC,WACpBnD,EAAalM,EAAOxwD,OACpB28D,EAAcnM,EAAOnF,OACrBwe,EAAcrZ,EAAOlkC,MACrBo+C,EAAala,EAAOl8C,KACpBq2D,EAAiBxhB,GAA2ByhB,iBAAkBf,GAG9DpjD,EAAOk3C,EAAOl3C,KACpBA,EAAK7gB,IAAK+2D,EAAa,GAAKA,EAAa,IACzCrN,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAMs2C,EAAMt2C,EAAK/gB,EACXs3D,EAAMv2C,EAAK9gB,EAGX0jC,EAAaqzB,EAAa,GAAM,EACtCj2C,EAAK7gB,IAAK+2D,EAAatzB,EAAY,GAAKszB,EAAatzB,EAAY,IACjEimB,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAIokD,EAAMpkD,EAAK/gB,EACXolE,EAAMrkD,EAAK9gB,EAGX6S,EAAKqyD,EAAM9N,EACXrkD,EAAKoyD,EAAM9N,EACTp+D,EAAIqK,KAAK+zB,KAAMxkB,EAAKA,EAAKE,EAAKA,GAChCjP,EAAI7K,EACR,GAAI,GAAK8rE,GAnKU,KAmKW9rE,EAAI,CACjC,IAAM2sC,EAAQm/B,EAAa9rE,EAG3BisE,EAAM9N,GAFNvkD,GAAM+yB,GAGNu/B,EAAM9N,GAFNtkD,GAAM6yB,GAGN9hC,EAAIihE,EAIL,IAAM7N,EAAME,EAAMvkD,EACZskD,EAAME,EAAMtkD,EACZqyD,EAAMF,EAAMryD,EACZwyD,EAAMF,EAAMpyD,EAGlB1P,EAAUtB,EAAK,GAAMq1D,EACrB/zD,EAAUtB,EAAK,GAAMs1D,EACrBh0D,EAAUtB,EAAK,GAAMq1D,EACrB/zD,EAAUtB,EAAK,GAAMs1D,EACrB6D,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB9J,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB7J,EAAax2D,EAAK,GAAMuyD,EACxBiE,EAAax2D,EAAK,GAAMwyD,EACxBgE,EAAax2D,EAAK,GAAMugE,EACxB/J,EAAax2D,EAAK,GAAMwgE,EACxBhK,EAAax2D,EAAK,GAAMuyD,EACxBiE,EAAax2D,EAAK,GAAMwyD,EACxBgE,EAAax2D,EAAK,GAAMugE,EACxB/J,EAAax2D,EAAK,GAAMwgE,EACxBjL,EAAYv1D,EAAK,GAAM,EACvBu1D,EAAYv1D,EAAK,GAAM,EAEvBtB,EAAUtB,EAAK,GAAMmjE,EACrB7hE,EAAUtB,EAAK,GAAMojE,EACrB9hE,EAAUtB,EAAK,GAAMmjE,EACrB7hE,EAAUtB,EAAK,GAAMojE,EACrBjK,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB9J,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB7J,EAAax2D,EAAM,GAAMyyD,EACzB+D,EAAax2D,EAAM,GAAM0yD,EACzB8D,EAAax2D,EAAK,IAAOygE,EACzBjK,EAAax2D,EAAK,IAAO0gE,EACzBlK,EAAax2D,EAAK,IAAOyyD,EACzB+D,EAAax2D,EAAK,IAAO0yD,EACzB8D,EAAax2D,EAAK,IAAOygE,EACzBjK,EAAax2D,EAAK,IAAO0gE,EACzBnL,EAAYv1D,EAAM,GAAMb,EACxBo2D,EAAYv1D,EAAK,IAAOb,EAGxB0/C,GAA2B8hB,OAAQxhE,EAAG8tB,EAAasyC,EAAapjD,GAGhE,IAFA,IAAMykD,EAAQzkD,EAAK/gB,EACbylE,EAAQ1kD,EAAK9gB,EACV9E,EAAc,EAAV+8D,EAAa98D,EAAOD,EAAa,EAATi9D,EAAYj9D,EAAIC,EAAMD,GAAK,EAC/Dg/D,EAAYh/D,EAAI,GAAMqqE,EACtBrL,EAAYh/D,EAAI,GAAMsqE,EACtBtL,EAAYh/D,EAAI,GAAM4I,GAIxBqgE,wBAAA,SAAanM,EAAsB3Q,GAClC,IAAMhnD,EAAU1G,KAAK24C,UAAW+U,GAC1BiS,EAAqB3/D,KAAK8kE,qBAAsBp+D,GACtD,GAAIA,IAAY1G,KAAK0G,SAAWi5D,IAAuB3/D,KAAK2/D,mBAAqB,CAChF3/D,KAAK0G,QAAUA,EACf1G,KAAK2/D,mBAAqBA,EAE1B,IAAMz1D,EAAalK,KAAKymE,aAAc//D,GAGtC23D,EAAOt0C,SAASzoB,SAChB,IAAMsH,EAAMy1D,EAAOz1D,IAEbkjE,EAAgB,EADN9rE,KAAK4+D,aAGrBh2D,EAAKkjE,EAAM,GAAM5hE,EAAW5B,GAC5BM,EAAKkjE,EAAM,GAAM5hE,EAAW1B,GAC5BI,EAAKkjE,EAAM,GAAM5hE,EAAWH,GAC5BnB,EAAKkjE,EAAM,GAAM5hE,EAAWD,GAE5BrB,EAAKkjE,EAAM,GAAM5hE,EAAW3B,GAC5BK,EAAKkjE,EAAM,GAAM5hE,EAAWzB,GAC5BG,EAAKkjE,EAAM,GAAM5hE,EAAWL,GAC5BjB,EAAKkjE,EAAM,GAAM5hE,EAAWF,QAzPQy5D,kBCNvC,cAsBA,OArBQsI,SAAP,SACC1N,EAAsB3Q,EACtB4Q,EAAiBC,EACjBG,GAEA,IAAMsN,EAASjK,GAAoB2B,aAAchW,EAAO2Q,EAAOsF,WACzD3B,EAAUgK,EAAOnN,YACjBoD,EAAU+J,EAAOjN,WACjBP,EAAS,EAAIwD,EACbvD,EAAS,EAAIwD,EACnB,OAAI3D,EAAUE,EAASH,EAAO4N,gBAAkB1N,EAAUE,EAASJ,EAAO6N,cAClE,IAAI1B,GACVnM,EACAC,EAASC,EACTyD,EAASC,EACTzD,EAAQC,EACRC,GACCp+C,KAAMotC,GAEF,yBClBT,cAgBA,OAfQye,aAAP,SAAmBze,EAAemI,GACjC,OAASA,EAAQ7H,QAAUnB,GAAmB2C,WAAa9B,EAAQmI,GAAU9pC,MAGvEogD,eAAP,SAAqBze,EAAemI,GACnC,OAASA,EAAQ7H,QAAUnB,GAAmB4C,aAAe/B,EAAQmI,GAAU/H,QAGzEqe,aAAP,SAAmBze,EAAemI,GACjC,OAASA,EAAQ7H,QAAUnB,GAAmB6C,WAAahC,EAAQmI,GAAU7sC,MAGvEmjD,oBAAP,SAA0Bze,EAAemI,GACxC,OAASA,EAAQ7H,QAAUnB,GAAmB8C,mBAAqBjC,EAAQmI,GAAU7sC,KAAKzkB,4BCZ3F,WAAawpD,GACZ/tD,KAAK+tD,MAAQA,GAASlB,GAAmBxuC,KA+C3C,OA5CC+tD,yBAAA,SACC16D,EAAoB26D,EAAgCC,GAEpD,GAAI56D,EAAW4E,OAAO5V,QAAU,EAC/B,OAAO2rE,EAGR,IACC,OAAOE,SACN,QAAS,OACT,gCAAgC76D,gCAAwC46D,SAExE,MAAO12D,GACR,OAAOy2D,IAITD,iBAAA,SAAMnvD,EAAcywC,EAAe8e,EAAsBC,QACrClqE,IAAfiqE,EACH9e,EAAM91C,KAAMqF,EAAMywC,QACOnrD,IAAfkqE,EACV/e,EAAM91C,KAAMqF,EAAMywC,EAAO8e,GAEzB9e,EAAM91C,KAAMqF,EAAMywC,EAAO8e,EAAYC,GAGtC,IAAMvrE,EAAQb,EAAcsZ,SAAU+zC,GACtC,GAAIxsD,EAAQ,CACX,IAAMC,EAAcD,EAAMC,YACtB,UAAWA,SACKoB,IAAfiqE,EACHrrE,EAAYusD,MAAM91C,KAAMqF,EAAMywC,QACLnrD,IAAfkqE,EACVtrE,EAAYusD,MAAM91C,KAAMqF,EAAMywC,EAAO8e,GAErCrrE,EAAYusD,MAAM91C,KAAMqF,EAAMywC,EAAO8e,EAAYC,MAMrDL,oBAAA,SAAS1e,EAAemI,EAAwB1kB,UClD3Cu7B,GAAmB,WAAe,OAAA,kBAKvC,WAAaj+C,EAA0Bs/B,GAAvC,MACCjnD,YAAOinD,gBACP9mD,EAAK0lE,UAAY1lE,EAAK2lE,aAAcn+C,EAAMk+C,UAAWD,GAAkB,UAEzE,OAPoD5sE,UAAAssE,mBCEnD,WAAa39C,EAA+Bs/B,GAA5C,MACCjnD,YAAO2nB,EAAOs/B,gBACd9mD,EAAK4lE,SAAWp+C,EAAMo+C,WAyBxB,OA9B8C/sE,OAQ7CgtE,oBAAA,SAASpf,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM07B,EAAW7sE,KAAK6sE,SAChBE,EAAcF,GAAY,EAC1BG,EAAY77B,EAAO47B,EACrBC,EAAUH,GACb7sE,KAAKitE,MAAOvf,EAAOmI,GACnBA,EAAQ5H,OAAS9c,GAAS07B,EAAWG,KAErChtE,KAAKktE,KAAMxf,EAAOmI,GAClBA,EAAQ5H,OAAS9c,GAAS47B,EAAYC,MAK/BF,iBAAV,SAAgBpf,EAAemI,KAIrBiX,kBAAV,SAAiBpf,EAAemI,QA3BasX,mBCG7C,WAAa1+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBugB,aAkCnC,OApCsDttE,OAK3CutE,iBAAV,SAAgB3f,EAAemI,GAC9B,IAAM9pC,EAAOogD,GAAkBmB,WAAY5f,EAAOmI,GAClDnI,EAAM3hC,KAAKzlB,SACV/D,EACA45C,GAAQoxB,SAAUxhD,EAAK7pB,MAAO,IAC9B6pB,EAAK3pB,OAGN,IAAM0rD,EAASqe,GAAkBqB,aAAc9f,EAAOmI,GACtDnI,EAAMI,OAAOxnD,SACZ/D,EACA45C,GAAQoxB,SAAUzf,EAAO5rD,MAAO,IAChC4rD,EAAO1rD,OAGR,IAAM4mB,EAAOmjD,GAAkBsB,WAAY/f,EAAOmI,GAClDnI,EAAM1kC,KAAK1iB,SACV/D,EACA45C,GAAQoxB,SAAUvkD,EAAK9mB,MAAO,IAC9B8mB,EAAK5mB,OAGN,IAAMmC,EAAU4nE,GAAkBuB,kBAAmBhgB,EAAOmI,GAC5DnI,EAAM1kC,KAAKzkB,QAAQ+B,SAClB/D,EACA45C,GAAQoxB,SAAUhpE,EAAQrC,MAAO,IACjCqC,EAAQnC,OAGTyzD,EAAQ7H,SAAWhuD,KAAK+tD,UAlC4B+e,mBCErD,WAAar+C,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmB2C,yBACjCvoD,EAAK/E,MAAQusB,EAAMvsB,MACnB+E,EAAK7E,MAAQqsB,EAAMrsB,QAOrB,OAduDtC,OAU5C6tE,iBAAV,SAAgBjgB,EAAemI,GAC9BnI,EAAM3hC,KAAKzlB,SAAK/D,EAAWvC,KAAKkC,MAAOlC,KAAKoC,OAC5CyzD,EAAQ7H,SAAWhuD,KAAK+tD,UAZ6B+e,mBCItD,WAAar+C,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmB4C,2BACjCxoD,EAAK/E,MAAQusB,EAAMvsB,MACnB+E,EAAK7E,MAAQqsB,EAAMrsB,QAOrB,OAdyDtC,OAU9C8tE,iBAAV,SAAgBlgB,EAAemI,GAC9BnI,EAAMI,OAAOxnD,SAAK/D,EAAWvC,KAAKkC,MAAOlC,KAAKoC,OAC9CyzD,EAAQ7H,SAAWhuD,KAAK+tD,UAZ+B+e,mBCGxD,WAAar+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBugB,aAkCnC,OApCoDttE,OAKzC+tE,iBAAV,SAAgBngB,EAAemI,GAC9B,IAAM9pC,EAAOogD,GAAkBmB,WAAY5f,EAAOmI,GAClDnI,EAAM3hC,KAAKzlB,SACV/D,EACA45C,GAAQ2xB,OAAQ/hD,EAAK7pB,MAAO,IAC5B6pB,EAAK3pB,OAGN,IAAM0rD,EAASqe,GAAkBqB,aAAc9f,EAAOmI,GACtDnI,EAAMI,OAAOxnD,SACZ/D,EACA45C,GAAQ2xB,OAAQhgB,EAAO5rD,MAAO,IAC9B4rD,EAAO1rD,OAGR,IAAM4mB,EAAOmjD,GAAkBsB,WAAY/f,EAAOmI,GAClDnI,EAAM1kC,KAAK1iB,SACV/D,EACA45C,GAAQ2xB,OAAQ9kD,EAAK9mB,MAAO,IAC5B8mB,EAAK5mB,OAGN,IAAMmC,EAAU4nE,GAAkBuB,kBAAmBhgB,EAAOmI,GAC5DnI,EAAM1kC,KAAKzkB,QAAQ+B,SAClB/D,EACA45C,GAAQ2xB,OAAQvpE,EAAQrC,MAAO,IAC/BqC,EAAQnC,OAGTyzD,EAAQ7H,SAAWhuD,KAAK+tD,UAlC0B+e,mBCAnD,WAAar+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBkhB,6BAoBnC,OAtBqDjuE,OAK1CkuE,iBAAV,SAAgBtgB,EAAemI,GAC9B,IAAM9pC,EAAOogD,GAAkBmB,WAAY5f,EAAOmI,GAClDnI,EAAM3hC,KAAKzlB,SACV/D,EACAwpB,EAAK7pB,MACQ,GAAb6pB,EAAK3pB,OAGN,IAAM0rD,EAASqe,GAAkBqB,aAAc9f,EAAOmI,GACtDnI,EAAMI,OAAOxnD,SACZ/D,EACAurD,EAAO5rD,MACQ,GAAf4rD,EAAO1rD,OAGRyzD,EAAQ7H,SAAWhuD,KAAK+tD,UApB2B+e,mBCApD,WAAar+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB0C,kBAYnC,OAdwDzvD,OAK7CmuE,iBAAV,SAAgBvgB,EAAemI,GAC9BnI,EAAM/+C,SAAU,EAChBknD,EAAQ7H,SAAWhuD,KAAK+tD,OAGfkgB,kBAAV,SAAiBvgB,EAAemI,GAC/BnI,EAAM/+C,SAAU,EAChBknD,EAAQ7H,SAAWhuD,KAAK+tD,UAZ8B+e,KrBLxD,SAAY1S,GACXA,+BACAA,2BACAA,uBACAA,yBACAA,+BACAA,mCAND,CAAYA,KAAAA,QsBEZ,ICFY8T,iBDMX,WAAa17D,EAA6Bm6D,GACzC3sE,KAAKwS,KAAOA,EACZxS,KAAK2sE,UAAYA,EAgBnB,OAbCwB,qBAAA,SAAU1/C,GACT,OACCzuB,KAAKwS,OAASic,EAAMjc,MACpBxS,KAAK2sE,YAAcl+C,EAAMk+C,WAI3BwB,oBAAA,WACC,OAAO74D,EAAQuG,cAAcC,IAA6B,qBAAsBsyD,QAASpuE,2BEjB1F,WAAawS,EAA6Bm6D,EAAmB0B,GAA7D,MACCvnE,YAAO0L,EAAMm6D,gBACb1lE,EAAKonE,QAAUA,IAUjB,OAfgFvuE,OAQ/EwuE,qBAAA,SAAU7/C,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiB6/C,GAClBtuE,KAAKquE,UAAY5/C,EAAM4/C,YAZsDF,KDChF,SAAYD,GACXA,6BACAA,qBACAA,6BACAA,mBACAA,+BACAA,mCACAA,iCACAA,qCACAA,mBATD,CAAYA,KAAAA,QEEZ,ICFYK,GASAC,iBDPZ,cAUA,OATQC,aAAP,SAAmB7tE,EAAe8rD,EAAkB5hB,GACnD,GAAI,GAAKlqC,GAASA,EAAQ8rD,EAAOhsD,OAAS,CACzC,IAAMs3B,EAAK00B,EAAQ9rD,GACnB,GAAIkD,EAAck0B,IAAQ,GAAKA,GAAMA,EAAK8S,EAAUpqC,OACnD,OAAOoqC,EAAW9S,GAGpB,MAAO,wBEgBR,WAAaq2C,EAAqC1B,EAAmBE,EAAkB3qE,EAAeE,GAAtG,MACC0E,YAAOonE,GAAsBQ,MAAO/B,EAAW0B,gBAC/CpnE,EAAK4lE,SAAWA,EAChB5lE,EAAK/E,MAAQA,EACb+E,EAAK7E,MAAQA,IA+Cf,OAxD4CtC,OAY3C6uE,qBAAA,SAAUlgD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiBkgD,GAClB3uE,KAAK6sE,WAAap+C,EAAMo+C,UACxB7sE,KAAKkC,QAAUusB,EAAMvsB,OACrBlC,KAAKoC,QAAUqsB,EAAMrsB,OAIvBusE,sBAAA,WACC,OAAQ3uE,KAAKquE,SACb,KAAKjU,GAA2BwU,SAC/B,OAAO,IAAIvB,GAAkCrtE,MAC9C,KAAKo6D,GAA2B5K,WAC/B,OAAO,IAAIme,GAAmC3tE,MAC/C,KAAKo6D,GAA2B3K,aAC/B,OAAO,IAAIme,GAAqC5tE,MACjD,KAAKo6D,GAA2ByU,OAC/B,OAAO,IAAIhB,GAAgC7tE,MAC5C,KAAKo6D,GAA2B0U,QAC/B,OAAO,IAAId,GAAiChuE,MAC7C,KAAKo6D,GAA2B7K,WAC/B,OAAO,IAAI0e,GAAoCjuE,QAIjD2uE,sBAAA,SAAWpiB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WACrC,OAAOpgB,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAWruE,KAAK6sE,aAAY7sE,KAAKkC,UAASlC,KAAKoC,YAI/EusE,cAAP,SACCvd,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACxE,OAAO,IAAI6jC,EACVvd,EAAY,GAAKub,EAAWvb,EAAY,GACxCA,EAAY,GAAKA,EAAY,QArDYkd,KDrB5C,SAAYC,GACXA,mBACAA,uBACAA,yCACAA,mBACAA,mCACAA,iBAND,CAAYA,KAAAA,QASZ,SAAYC,GACXA,yCACAA,qBACAA,qBACAA,mBACAA,+BALD,CAAYA,KAAAA,QEIZ,ICbYS,GDaNC,GAAe,WAAqB,OAAA,qBAOzC,WAAazgD,EAAqCs/B,GAAlD,MACCjnD,YAAO2nB,EAAOs/B,SAEd,OAAQt/B,EAAM3tB,QACd,KAAK0tE,GAAmCpB,MACvCnmE,EAAK/E,MAAQusB,EAAMvsB,MACnB+E,EAAK7E,WAAQG,EACb,MACD,KAAKisE,GAAmCW,MACvCloE,EAAK/E,WAAQK,EACb0E,EAAK7E,MAAQqsB,EAAMrsB,MACnB,MACD,QACC6E,EAAK/E,MAAQusB,EAAMvsB,MACnB+E,EAAK7E,MAAQqsB,EAAMrsB,aAIpB6E,EAAK81C,MAAQ91C,EAAK2lE,aAAcn+C,EAAMsuB,MAAOmyB,GAAc,UAuN7D,OA9OoDpvE,OA0BzCsvE,gBAAV,SACC1hB,EAAemI,EAAwB1kB,EACvCrwC,EACA8L,GAEA,IAAM1K,EAAQlC,KAAKkC,MACbE,EAAQpC,KAAKoC,MACnB,GAAa,MAATF,EACU,MAATE,EAEU,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,IAEhCrwC,EAAOwF,SACN/D,EACA45C,GAAQY,MAAOnwC,EAAK1K,MAAOA,EAAO66C,GAClCtS,GAAUsS,MAAOnwC,EAAKxK,MAAOA,EAAO26C,IAGrCj8C,EAAOwF,SAAK/D,EAAWL,EAAOE,GAIlB,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,IAEhCrwC,EAAOwF,SACN/D,EACA45C,GAAQY,MAAOnwC,EAAK1K,MAAOA,EAAO66C,GAClCnwC,EAAKxK,OAGNtB,EAAOwF,SAAK/D,EAAWL,EAAO0K,EAAKxK,OAGrCyzD,EAAQ7H,SAAWhuD,KAAK+tD,WAClB,GAAa,MAAT3rD,EAAgB,CAC1B,IAAM26C,EACO,OADPA,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,IAEhCrwC,EAAOwF,SACN/D,EACAqK,EAAK1K,MACLuoC,GAAUsS,MAAOnwC,EAAKxK,MAAOA,EAAO26C,IAGrCj8C,EAAOwF,SAAK/D,EAAWqK,EAAK1K,MAAOE,GAEpCyzD,EAAQ7H,SAAWhuD,KAAK+tD,QAIhBqhB,iBAAV,SACC1hB,EAAemI,EAAwB1kB,EACvCplB,EAAkB+hC,EAClBuhB,EAA0BC,GAE1B,IAAMptE,EAAQlC,KAAKkC,MACbE,EAAQpC,KAAKoC,MACnB,GAAa,MAATF,EACU,MAATE,EAEU,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA45C,GAAQY,MAAOsyB,EAASntE,MAAOA,EAAO66C,GACtCtS,GAAUsS,MAAOsyB,EAASjtE,MAAOA,EAAO26C,IAEzC+Q,EAAOxnD,SACN/D,EACA45C,GAAQY,MAAOuyB,EAAWptE,MAAOA,EAAO66C,GACxCtS,GAAUsS,MAAOuyB,EAAWltE,MAAOA,EAAO26C,MAG3ChxB,EAAKzlB,SAAK/D,EAAWL,EAAOE,GAC5B0rD,EAAOxnD,SAAK/D,EAAWL,EAAOE,IAIlB,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA45C,GAAQY,MAAOsyB,EAASntE,MAAOA,EAAO66C,GACtCsyB,EAASjtE,OAEV0rD,EAAOxnD,SACN/D,EACA45C,GAAQY,MAAOuyB,EAAWptE,MAAOA,EAAO66C,GACxCuyB,EAAWltE,SAGZ2pB,EAAKzlB,SAAK/D,EAAWL,EAAOmtE,EAASjtE,OACrC0rD,EAAOxnD,SAAK/D,EAAWL,EAAOotE,EAAWltE,QAG3CyzD,EAAQ7H,SAAWhuD,KAAK+tD,WAClB,GAAa,MAAT3rD,EAAgB,CAC1B,IAAM26C,EACO,OADPA,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA8sE,EAASntE,MACTuoC,GAAUsS,MAAOsyB,EAASjtE,MAAOA,EAAO26C,IAEzC+Q,EAAOxnD,SACN/D,EACA+sE,EAAWptE,MACXuoC,GAAUsS,MAAOuyB,EAAWltE,MAAOA,EAAO26C,MAG3ChxB,EAAKzlB,SAAK/D,EAAW8sE,EAASntE,MAAOE,GACrC0rD,EAAOxnD,SAAK/D,EAAW+sE,EAAWptE,MAAOE,IAE1CyzD,EAAQ7H,SAAWhuD,KAAK+tD,QAIhBqhB,mBAAV,SACC1hB,EAAemI,EAAwB1kB,EACvCplB,EAAkB+hC,EAAsB9kC,EAAkBzkB,EAC1D8qE,EAA0BC,EAA8BC,EAA0BC,GAElF,IAAMttE,EAAQlC,KAAKkC,MACbE,EAAQpC,KAAKoC,MACnB,GAAa,MAATF,EACU,MAATE,EAEU,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA45C,GAAQY,MAAOsyB,EAASntE,MAAOA,EAAO66C,GACtCtS,GAAUsS,MAAOsyB,EAASjtE,MAAOA,EAAO26C,IAEzC+Q,EAAOxnD,SACN/D,EACA45C,GAAQY,MAAOuyB,EAAWptE,MAAOA,EAAO66C,GACxCtS,GAAUsS,MAAOuyB,EAAWltE,MAAOA,EAAO26C,IAE3C/zB,EAAK1iB,SACJ/D,EACA45C,GAAQY,MAAOwyB,EAASrtE,MAAOA,EAAO66C,GACtCtS,GAAUsS,MAAOwyB,EAASntE,MAAOA,EAAO26C,IAEzCx4C,EAAQ+B,SACP/D,EACA45C,GAAQY,MAAOyyB,EAAYttE,MAAOA,EAAO66C,GACzCtS,GAAUsS,MAAOyyB,EAAYptE,MAAOA,EAAO26C,MAG5ChxB,EAAKzlB,SAAK/D,EAAWL,EAAOE,GAC5B0rD,EAAOxnD,SAAK/D,EAAWL,EAAOE,GAC9B4mB,EAAK1iB,SAAK/D,EAAWL,EAAOE,GAC5BmC,EAAQ+B,SAAK/D,EAAWL,EAAOE,IAInB,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA45C,GAAQY,MAAOsyB,EAASntE,MAAOA,EAAO66C,GACtCsyB,EAASjtE,OAEV0rD,EAAOxnD,SACN/D,EACA45C,GAAQY,MAAOuyB,EAAWptE,MAAOA,EAAO66C,GACxCuyB,EAAWltE,OAEZ4mB,EAAK1iB,SACJ/D,EACA45C,GAAQY,MAAOwyB,EAASrtE,MAAOA,EAAO66C,GACtCwyB,EAASntE,OAEVmC,EAAQ+B,SACP/D,EACA45C,GAAQY,MAAOyyB,EAAYttE,MAAOA,EAAO66C,GACzCyyB,EAAYptE,SAGb2pB,EAAKzlB,SAAK/D,EAAWL,EAAOmtE,EAASjtE,OACrC0rD,EAAOxnD,SAAK/D,EAAWL,EAAOotE,EAAWltE,OACzC4mB,EAAK1iB,SAAK/D,EAAWL,EAAOqtE,EAASntE,OACrCmC,EAAQ+B,SAAK/D,EAAWL,EAAOstE,EAAYptE,QAG7CyzD,EAAQ7H,SAAWhuD,KAAK+tD,WAClB,GAAa,MAAT3rD,EAAgB,CAC1B,IAAM26C,EACO,OADPA,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA8sE,EAASntE,MACTuoC,GAAUsS,MAAOsyB,EAASjtE,MAAOA,EAAO26C,IAEzC+Q,EAAOxnD,SACN/D,EACA+sE,EAAWptE,MACXuoC,GAAUsS,MAAOuyB,EAAWltE,MAAOA,EAAO26C,IAE3C/zB,EAAK1iB,SACJ/D,EACA8sE,EAASntE,MACTuoC,GAAUsS,MAAOwyB,EAASntE,MAAOA,EAAO26C,IAEzCx4C,EAAQ+B,SACP/D,EACA+sE,EAAWptE,MACXuoC,GAAUsS,MAAOyyB,EAAYptE,MAAOA,EAAO26C,MAG5ChxB,EAAKzlB,SAAK/D,EAAW8sE,EAASntE,MAAOE,GACrC0rD,EAAOxnD,SAAK/D,EAAW+sE,EAAWptE,MAAOE,GACzC4mB,EAAK1iB,SAAK/D,EAAWgtE,EAASrtE,MAAOE,GACrCmC,EAAQ+B,SAAK/D,EAAWitE,EAAYttE,MAAOE,IAE5CyzD,EAAQ7H,SAAWhuD,KAAK+tD,WA3OyBof,mBERnD,WAAa1+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBugB,aAkBnC,OApBuDttE,OAKtD2vE,oBAAA,SAAS/hB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAK0vE,OACJhiB,EAAOmI,EAAS1kB,EAChBuc,EAAM3hC,KACN2hC,EAAMI,OACNJ,EAAM1kC,KACN0kC,EAAM1kC,KAAKzkB,QACX4nE,GAAkBmB,WAAY5f,EAAOmI,GACrCsW,GAAkBqB,aAAc9f,EAAOmI,GACvCsW,GAAkBsB,WAAY/f,EAAOmI,GACrCsW,GAAkBuB,kBAAmBhgB,EAAOmI,QAhBOuZ,mBCCtD,WAAa3gD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB2C,kBAQnC,OAVwD1vD,OAKvD6vE,oBAAA,SAASjiB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM3hC,KAAMogD,GAAkBmB,WAAY5f,EAAOmI,QAP5BuZ,mBCCvD,WAAa3gD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBkhB,6BAcnC,OAhBiEjuE,OAKhE8vE,oBAAA,SAASliB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAK6vE,KACJniB,EAAOmI,EAAS1kB,EAChBuc,EAAM3hC,KACN2hC,EAAMI,OACNqe,GAAkBmB,WAAY5f,EAAOmI,GACrCsW,GAAkBqB,aAAc9f,EAAOmI,QAZsBuZ,mBCChE,WAAa3gD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB4C,oBAQnC,OAV0D3vD,OAKzDgwE,oBAAA,SAASpiB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAMI,OAAQqe,GAAkBqB,aAAc9f,EAAOmI,QAP9BuZ,mBCCzD,WAAa3gD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB6C,kBAQnC,OAVwD5vD,OAKvDiwE,oBAAA,SAASriB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM1kC,KAAMmjD,GAAkBsB,WAAY/f,EAAOmI,QAP5BuZ,mBCCvD,WAAa3gD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB8C,0BAQnC,OAV+D7vD,OAK9DkwE,oBAAA,SAAStiB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM1kC,KAAKzkB,QAAS4nE,GAAkBuB,kBAAmBhgB,EAAOmI,QAPpCuZ,mBCwB9D,WACCf,EAA2C1B,EAC3C7rE,EAAgBoB,EAAeE,EAAe26C,GAF/C,MAICj2C,YAAOonE,GAAsB+B,aAActD,EAAW0B,gBACtDpnE,EAAKnG,OAASA,EACdmG,EAAK/E,MAAQA,EACb+E,EAAK7E,MAAQA,EACb6E,EAAK81C,MAAQA,IAiDf,OA/DkDj9C,OAiBjDowE,qBAAA,SAAUzhD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiByhD,GAClBlwE,KAAKc,SAAW2tB,EAAM3tB,QACtBd,KAAKkC,QAAUusB,EAAMvsB,OACrBlC,KAAKoC,QAAUqsB,EAAMrsB,OACrBpC,KAAK+8C,QAAUtuB,EAAMsuB,OAIvBmzB,sBAAA,WACC,OAAQlwE,KAAKquE,SACb,KAAKE,GAAiC4B,KACrC,OAAO,IAAIR,GAAoC3vE,MAChD,KAAKuuE,GAAiC6B,OACrC,OAAO,IAAIN,GAAsC9vE,MAClD,KAAKuuE,GAAiC8B,gBACrC,OAAO,IAAIT,GAA6C5vE,MACzD,KAAKuuE,GAAiC35C,KACrC,OAAO,IAAIm7C,GAAoC/vE,MAChD,KAAKuuE,GAAiC+B,aACrC,OAAO,IAAIN,GAA2ChwE,MACvD,KAAKuuE,GAAiCvnB,IACrC,OAAO,IAAIyoB,GAAmCzvE,QAIhDkwE,sBAAA,SAAW3jB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WAC/B4D,EAAUhkB,EAAQ/+B,IAAIxtB,KAAK+8C,OACjC,OAAOwP,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAWruE,KAAKc,WAAUd,KAAKkC,UAASlC,KAAKoC,UAASmuE,QAItFL,cAAP,SACC9e,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAClEiS,EAAQ0xB,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACpE,OAAO,IAAIolC,EACV9e,EAAY,GAAKub,EAAWvb,EAAY,GAAKA,EAAY,GAAKA,EAAY,GAAKrU,OA5DhCuxB,ICb5CkC,GAAoB,WAAqB,OAAA,qBAK9C,WAAa/hD,EAA+Cs/B,GAA5D,MACCjnD,YAAO2nB,EAAOs/B,gBACd9mD,EAAKwpE,WAAaxpE,EAAK2lE,aAAcn+C,EAAMgiD,WAAYD,GAAmB,UAoF5E,OAzF8D1wE,OAQnD4wE,gBAAV,SACChjB,EAAemI,EAAwB1kB,EACvCrwC,EACA8L,GAEA,IAAM6jE,EAAazwE,KAAKywE,WAAY/iB,EAAOvc,GACzB,MAAds/B,IACH3vE,EAAOwF,SACN/D,EACAvC,KAAK2wE,gBAAiB/jE,EAAK1K,MAAOuuE,GAClC7jE,EAAKxK,OAENyzD,EAAQ7H,SAAWhuD,KAAK+tD,QAIhB2iB,iBAAV,SACChjB,EAAemI,EAAwB1kB,EACvCplB,EAAkB+hC,EAClBuhB,EAA0BC,GAE1B,IAAMmB,EAAazwE,KAAKywE,WAAY/iB,EAAOvc,GACzB,MAAds/B,IACH1kD,EAAKzlB,SACJ/D,EACAvC,KAAK2wE,gBAAiBtB,EAASntE,MAAOuuE,GACtCpB,EAASjtE,OAGV0rD,EAAOxnD,SACN/D,EACAvC,KAAK2wE,gBAAiBrB,EAAWptE,MAAOuuE,GACxCnB,EAAWltE,OAGZyzD,EAAQ7H,SAAWhuD,KAAK+tD,QAIhB2iB,mBAAV,SACChjB,EAAemI,EAAwB1kB,EACvCplB,EAAkB+hC,EAAsB9kC,EAAkBzkB,EAC1D8qE,EAA0BC,EAA8BC,EAA0BC,GAElF,IAAMiB,EAAazwE,KAAKywE,WAAY/iB,EAAOvc,GACzB,MAAds/B,IACH1kD,EAAKzlB,SACJ/D,EACAvC,KAAK2wE,gBAAiBtB,EAASntE,MAAOuuE,GACtCpB,EAASjtE,OAGV0rD,EAAOxnD,SACN/D,EACAvC,KAAK2wE,gBAAiBrB,EAAWptE,MAAOuuE,GACxCnB,EAAWltE,OAGZ4mB,EAAK1iB,SACJ/D,EACAvC,KAAK2wE,gBAAiBpB,EAASrtE,MAAOuuE,GACtClB,EAASntE,OAGVmC,EAAQ+B,SACP/D,EACAvC,KAAK2wE,gBAAiBnB,EAAYttE,MAAOuuE,GACzCjB,EAAYptE,OAGbyzD,EAAQ7H,SAAWhuD,KAAK+tD,QAIhB2iB,4BAAV,SAA2BxuE,EAAeuuE,GACzC,OAAI,GAAKA,EACDt0B,GAAQoxB,SAAUrrE,GAAQuuE,GAE1Bt0B,GAAQ2xB,OAAQ5rE,GAAQuuE,OAtF4BtD,mBCN7D,WAAa1+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBugB,aAkBnC,OApBiEttE,OAKhE8wE,oBAAA,SAASljB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAK0vE,OACJhiB,EAAOmI,EAAS1kB,EAChBuc,EAAM3hC,KACN2hC,EAAMI,OACNJ,EAAM1kC,KACN0kC,EAAM1kC,KAAKzkB,QACX4nE,GAAkBmB,WAAY5f,EAAOmI,GACrCsW,GAAkBqB,aAAc9f,EAAOmI,GACvCsW,GAAkBsB,WAAY/f,EAAOmI,GACrCsW,GAAkBuB,kBAAmBhgB,EAAOmI,QAhBiB6a,mBCChE,WAAajiD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB2C,kBAQnC,OAVkE1vD,OAKjE+wE,oBAAA,SAASnjB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM3hC,KAAMogD,GAAkBmB,WAAY5f,EAAOmI,QAPlB6a,mBCCjE,WAAajiD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBkhB,6BAcnC,OAhB2EjuE,OAK1EgxE,oBAAA,SAASpjB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAK6vE,KACJniB,EAAOmI,EAAS1kB,EAChBuc,EAAM3hC,KACN2hC,EAAMI,OACNqe,GAAkBmB,WAAY5f,EAAOmI,GACrCsW,GAAkBqB,aAAc9f,EAAOmI,QAZgC6a,mBCC1E,WAAajiD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB4C,oBAQnC,OAVoE3vD,OAKnEixE,oBAAA,SAASrjB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAMI,OAAQqe,GAAkBqB,aAAc9f,EAAOmI,QAPpB6a,mBCCnE,WAAajiD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB6C,kBAQnC,OAVkE5vD,OAKjEkxE,oBAAA,SAAStjB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM1kC,KAAMmjD,GAAkBsB,WAAY/f,EAAOmI,QAPlB6a,mBCCjE,WAAajiD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB8C,0BAQnC,OAVyE7vD,OAKxEmxE,oBAAA,SAASvjB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM1kC,KAAKzkB,QAAS4nE,GAAkBuB,kBAAmBhgB,EAAOmI,QAP1B6a,mBC0BxE,WACCrC,EAA2C1B,EAAmB8D,GAD/D,MAGC3pE,YAAOonE,GAAsB+B,aAActD,EAAW0B,gBACtDpnE,EAAKwpE,WAAaA,IA+CpB,OAtDS3wE,OAURoxE,qBAAA,SAAUziD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiByiD,GAClBlxE,KAAKywE,aAAehiD,EAAMgiD,YAI5BS,sBAAA,WACC,OAAQlxE,KAAKquE,SACb,KAAKE,GAAiC4B,KACrC,OAAO,IAAIU,GAA8C7wE,MAC1D,KAAKuuE,GAAiC6B,OACrC,OAAO,IAAIW,GAAgD/wE,MAC5D,KAAKuuE,GAAiC8B,gBACrC,OAAO,IAAIS,GAAuD9wE,MACnE,KAAKuuE,GAAiC35C,KACrC,OAAO,IAAIo8C,GAA8ChxE,MAC1D,KAAKuuE,GAAiC+B,aACrC,OAAO,IAAIW,GAAqDjxE,MACjE,KAAKuuE,GAAiCvnB,IACrC,OAAO,IAAI4pB,GAA6C5wE,QAI1DkxE,sBAAA,SAAW3kB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WAC/B7rE,EAAS0tE,GAAmC2C,WAC5CC,EAAe7kB,EAAQ/+B,IAAIxtB,KAAKywE,YACtC,OAAOlkB,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAWvtE,MAAUswE,QAIrDF,cAAP,SACC9f,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAClE2lC,EAAahC,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACzE,OAAO,IAAIomC,EACV9f,EAAY,GAAKub,EAAW8D,OAnDtBnC,ICjBH+C,GAAe,WAAqB,OAAA,MACpCC,GAAe,WAAqB,OAAA,MACpCpC,GAAe,WAAqB,OAAA,qBAOzC,WAAazgD,EAAyCs/B,GAAtD,MACCjnD,YAAO2nB,EAAOs/B,gBACd9mD,EAAK/E,MAAQ+E,EAAK2lE,aAAcn+C,EAAMvsB,MAAOmvE,GAAc,QAC3DpqE,EAAK7E,MAAQ6E,EAAK2lE,aAAcn+C,EAAMrsB,MAAOkvE,GAAc,QAC3DrqE,EAAK81C,MAAQ91C,EAAK2lE,aAAcn+C,EAAMsuB,MAAOmyB,GAAc,UAuN7D,OAhOwDpvE,OAY7CyxE,gBAAV,SACC7jB,EAAemI,EAAwB1kB,EACvCrwC,EACA8L,GAEA,IAAM1K,EAAQlC,KAAKkC,MAAOwrD,EAAOvc,GAC3B/uC,EAAQpC,KAAKoC,MAAOsrD,EAAOvc,GACjC,GAAa,MAATjvC,EACU,MAATE,EAEU,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,IAEhCrwC,EAAOwF,SACN/D,EACA45C,GAAQY,MAAOnwC,EAAK1K,MAAOA,EAAO66C,GAClCtS,GAAUsS,MAAOnwC,EAAKxK,MAAOA,EAAO26C,IAGrCj8C,EAAOwF,SAAK/D,EAAWL,EAAOE,GAIlB,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,IAEhCrwC,EAAOwF,SACN/D,EACA45C,GAAQY,MAAOnwC,EAAK1K,MAAOA,EAAO66C,GAClCnwC,EAAKxK,OAGNtB,EAAOwF,SAAK/D,EAAWL,EAAO0K,EAAKxK,OAGrCyzD,EAAQ7H,SAAWhuD,KAAK+tD,WAClB,GAAa,MAAT3rD,EAAgB,CAC1B,IAAM26C,EACO,OADPA,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,IAEhCrwC,EAAOwF,SACN/D,EACAqK,EAAK1K,MACLuoC,GAAUsS,MAAOnwC,EAAKxK,MAAOA,EAAO26C,IAGrCj8C,EAAOwF,SAAK/D,EAAWqK,EAAK1K,MAAOE,GAEpCyzD,EAAQ7H,SAAWhuD,KAAK+tD,QAIhBwjB,iBAAV,SACC7jB,EAAemI,EAAwB1kB,EACvCplB,EAAkB+hC,EAClBuhB,EAA0BC,GAE1B,IAAMptE,EAAQlC,KAAKkC,MAAOwrD,EAAOvc,GAC3B/uC,EAAQpC,KAAKoC,MAAOsrD,EAAOvc,GACjC,GAAa,MAATjvC,EACU,MAATE,EAEU,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA45C,GAAQY,MAAOsyB,EAASntE,MAAOA,EAAO66C,GACtCtS,GAAUsS,MAAOsyB,EAASjtE,MAAOA,EAAO26C,IAEzC+Q,EAAOxnD,SACN/D,EACA45C,GAAQY,MAAOuyB,EAAWptE,MAAOA,EAAO66C,GACxCtS,GAAUsS,MAAOuyB,EAAWltE,MAAOA,EAAO26C,MAG3ChxB,EAAKzlB,SAAK/D,EAAWL,EAAOE,GAC5B0rD,EAAOxnD,SAAK/D,EAAWL,EAAOE,IAIlB,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA45C,GAAQY,MAAOsyB,EAASntE,MAAOA,EAAO66C,GACtCsyB,EAASjtE,OAEV0rD,EAAOxnD,SACN/D,EACA45C,GAAQY,MAAOuyB,EAAWptE,MAAOA,EAAO66C,GACxCuyB,EAAWltE,SAGZ2pB,EAAKzlB,SAAK/D,EAAWL,EAAOmtE,EAASjtE,OACrC0rD,EAAOxnD,SAAK/D,EAAWL,EAAOotE,EAAWltE,QAG3CyzD,EAAQ7H,SAAWhuD,KAAK+tD,WAClB,GAAa,MAAT3rD,EAAgB,CAC1B,IAAM26C,EACO,OADPA,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA8sE,EAASntE,MACTuoC,GAAUsS,MAAOsyB,EAASjtE,MAAOA,EAAO26C,IAEzC+Q,EAAOxnD,SACN/D,EACA+sE,EAAWptE,MACXuoC,GAAUsS,MAAOuyB,EAAWltE,MAAOA,EAAO26C,MAG3ChxB,EAAKzlB,SAAK/D,EAAW8sE,EAASntE,MAAOE,GACrC0rD,EAAOxnD,SAAK/D,EAAW+sE,EAAWptE,MAAOE,IAE1CyzD,EAAQ7H,SAAWhuD,KAAK+tD,QAIhBwjB,mBAAV,SACC7jB,EAAemI,EAAwB1kB,EACvCplB,EAAkB+hC,EAAsB9kC,EAAkBzkB,EAC1D8qE,EAA0BC,EAA8BC,EAA0BC,GAElF,IAAMttE,EAAQlC,KAAKkC,MAAOwrD,EAAOvc,GAC3B/uC,EAAQpC,KAAKoC,MAAOsrD,EAAOvc,GACjC,GAAa,MAATjvC,EACU,MAATE,EAEU,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA45C,GAAQY,MAAOsyB,EAASntE,MAAOA,EAAO66C,GACtCtS,GAAUsS,MAAOsyB,EAASjtE,MAAOA,EAAO26C,IAEzC+Q,EAAOxnD,SACN/D,EACA45C,GAAQY,MAAOuyB,EAAWptE,MAAOA,EAAO66C,GACxCtS,GAAUsS,MAAOuyB,EAAWltE,MAAOA,EAAO26C,IAE3C/zB,EAAK1iB,SACJ/D,EACA45C,GAAQY,MAAOwyB,EAASrtE,MAAOA,EAAO66C,GACtCtS,GAAUsS,MAAOwyB,EAASntE,MAAOA,EAAO26C,IAEzCx4C,EAAQ+B,SACP/D,EACA45C,GAAQY,MAAOyyB,EAAYttE,MAAOA,EAAO66C,GACzCtS,GAAUsS,MAAOyyB,EAAYptE,MAAOA,EAAO26C,MAG5ChxB,EAAKzlB,SAAK/D,EAAWL,EAAOE,GAC5B0rD,EAAOxnD,SAAK/D,EAAWL,EAAOE,GAC9B4mB,EAAK1iB,SAAK/D,EAAWL,EAAOE,GAC5BmC,EAAQ+B,SAAK/D,EAAWL,EAAOE,IAInB,OADP26C,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA45C,GAAQY,MAAOsyB,EAASntE,MAAOA,EAAO66C,GACtCsyB,EAASjtE,OAEV0rD,EAAOxnD,SACN/D,EACA45C,GAAQY,MAAOuyB,EAAWptE,MAAOA,EAAO66C,GACxCuyB,EAAWltE,OAEZ4mB,EAAK1iB,SACJ/D,EACA45C,GAAQY,MAAOwyB,EAASrtE,MAAOA,EAAO66C,GACtCwyB,EAASntE,OAEVmC,EAAQ+B,SACP/D,EACA45C,GAAQY,MAAOyyB,EAAYttE,MAAOA,EAAO66C,GACzCyyB,EAAYptE,SAGb2pB,EAAKzlB,SAAK/D,EAAWL,EAAOmtE,EAASjtE,OACrC0rD,EAAOxnD,SAAK/D,EAAWL,EAAOotE,EAAWltE,OACzC4mB,EAAK1iB,SAAK/D,EAAWL,EAAOqtE,EAASntE,OACrCmC,EAAQ+B,SAAK/D,EAAWL,EAAOstE,EAAYptE,QAG7CyzD,EAAQ7H,SAAWhuD,KAAK+tD,WAClB,GAAa,MAAT3rD,EAAgB,CAC1B,IAAM26C,EACO,OADPA,EAAQ/8C,KAAK+8C,MAAO2Q,EAAOvc,KAEhCplB,EAAKzlB,SACJ/D,EACA8sE,EAASntE,MACTuoC,GAAUsS,MAAOsyB,EAASjtE,MAAOA,EAAO26C,IAEzC+Q,EAAOxnD,SACN/D,EACA+sE,EAAWptE,MACXuoC,GAAUsS,MAAOuyB,EAAWltE,MAAOA,EAAO26C,IAE3C/zB,EAAK1iB,SACJ/D,EACA8sE,EAASntE,MACTuoC,GAAUsS,MAAOwyB,EAASntE,MAAOA,EAAO26C,IAEzCx4C,EAAQ+B,SACP/D,EACA+sE,EAAWptE,MACXuoC,GAAUsS,MAAOyyB,EAAYptE,MAAOA,EAAO26C,MAG5ChxB,EAAKzlB,SAAK/D,EAAW8sE,EAASntE,MAAOE,GACrC0rD,EAAOxnD,SAAK/D,EAAW+sE,EAAWptE,MAAOE,GACzC4mB,EAAK1iB,SAAK/D,EAAWgtE,EAASrtE,MAAOE,GACrCmC,EAAQ+B,SAAK/D,EAAWitE,EAAYttE,MAAOE,IAE5CyzD,EAAQ7H,SAAWhuD,KAAK+tD,WA7N6Bof,mBCTvD,WAAa1+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBugB,aAkBnC,OApB2DttE,OAK1D0xE,oBAAA,SAAS9jB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAK0vE,OACJhiB,EAAOmI,EAAS1kB,EAChBuc,EAAM3hC,KACN2hC,EAAMI,OACNJ,EAAM1kC,KACN0kC,EAAM1kC,KAAKzkB,QACX4nE,GAAkBmB,WAAY5f,EAAOmI,GACrCsW,GAAkBqB,aAAc9f,EAAOmI,GACvCsW,GAAkBsB,WAAY/f,EAAOmI,GACrCsW,GAAkBuB,kBAAmBhgB,EAAOmI,QAhBW0b,mBCC1D,WAAa9iD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB2C,kBAQnC,OAV4D1vD,OAK3D2xE,oBAAA,SAAS/jB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM3hC,KAAMogD,GAAkBmB,WAAY5f,EAAOmI,QAPxB0b,mBCC3D,WAAa9iD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBkhB,6BAcnC,OAhBqEjuE,OAKpE4xE,oBAAA,SAAShkB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAK6vE,KACJniB,EAAOmI,EAAS1kB,EAChBuc,EAAM3hC,KACN2hC,EAAMI,OACNqe,GAAkBmB,WAAY5f,EAAOmI,GACrCsW,GAAkBqB,aAAc9f,EAAOmI,QAZ0B0b,mBCCpE,WAAa9iD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB4C,oBAQnC,OAV8D3vD,OAK7D6xE,oBAAA,SAASjkB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAMI,OAAQqe,GAAkBqB,aAAc9f,EAAOmI,QAP1B0b,mBCC7D,WAAa9iD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB6C,kBAQnC,OAV4D5vD,OAK3D8xE,oBAAA,SAASlkB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM1kC,KAAMmjD,GAAkBsB,WAAY/f,EAAOmI,QAPxB0b,mBCC3D,WAAa9iD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmB8C,0BAQnC,OAVmE7vD,OAKlE+xE,oBAAA,SAASnkB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,IAC7BnxC,KAAKsG,IAAKonD,EAAOmI,EAAS1kB,EAAMuc,EAAM1kC,KAAKzkB,QAAS4nE,GAAkBuB,kBAAmBhgB,EAAOmI,QAPhC0b,mBCuBlE,WACClD,EAA2C1B,EAC3CzqE,EAAeE,EAAe26C,GAF/B,MAICj2C,YAAOonE,GAAsB+B,aAActD,EAAW0B,gBACtDpnE,EAAK/E,MAAQA,EACb+E,EAAK7E,MAAQA,EACb6E,EAAK81C,MAAQA,IAqDf,OAjEsDj9C,OAerDgyE,qBAAA,SAAUrjD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiBqjD,GAClB9xE,KAAKkC,QAAUusB,EAAMvsB,OACrBlC,KAAKoC,QAAUqsB,EAAMrsB,OACrBpC,KAAK+8C,QAAUtuB,EAAMsuB,OAIvB+0B,sBAAA,WACC,OAAQ9xE,KAAKquE,SACb,KAAKE,GAAiC4B,KACrC,OAAO,IAAIsB,GAAwCzxE,MACpD,KAAKuuE,GAAiC6B,OACrC,OAAO,IAAIuB,GAA0C3xE,MACtD,KAAKuuE,GAAiC8B,gBACrC,OAAO,IAAIqB,GAAiD1xE,MAC7D,KAAKuuE,GAAiC35C,KACrC,OAAO,IAAIg9C,GAAwC5xE,MACpD,KAAKuuE,GAAiC+B,aACrC,OAAO,IAAIuB,GAA+C7xE,MAC3D,KAAKuuE,GAAiCvnB,IACrC,OAAO,IAAIwqB,GAAuCxxE,QAIpD8xE,sBAAA,SAAWvlB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WAC/B7rE,EAAS0tE,GAAmCuD,KAC5CC,EAAUzlB,EAAQ/+B,IAAIxtB,KAAKkC,OAC3B+vE,EAAU1lB,EAAQ/+B,IAAIxtB,KAAKoC,OAC3BmuE,EAAUhkB,EAAQ/+B,IAAIxtB,KAAK+8C,OACjC,OAAOwP,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAWvtE,MAAUkxE,MAAWC,MAAW1B,QAI3EuB,cAAP,SACC1gB,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAClE5oC,EAAQusE,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAC9D1oC,EAAQqsE,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAC9DiS,EAAQ0xB,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACpE,OAAO,IAAIgnC,EACV1gB,EAAY,GAAKub,EAAWzqE,EAAOE,EAAO26C,OA9DSuxB,IClBhD4D,GAAc,WAAqB,OAAA,qBAKxC,WAAazjD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmBkD,qBACjC9oD,EAAKgW,KAAOhW,EAAK2lE,aAAcn+C,EAAMxR,KAAMi1D,GAAa,UAY1D,OAjBqDpyE,OAQpDqyE,oBAAA,SAASzkB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMvyB,EAAO5e,KAAKid,KAAMywC,EAAOvc,GACnB,MAARvyB,IACH8uC,EAAMttC,OAASxB,EACfi3C,EAAQ7H,SAAWhuD,KAAK+tD,YAbyBof,mBCOpD,WAAaR,EAAmB1vD,GAAhC,MACCnW,YAAOonE,GAAsBkE,cAAezF,gBAC5C1lE,EAAKgW,KAAOA,IA+Bd,OApCmDnd,OAQlDuyE,qBAAA,SAAU5jD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiB4jD,GAClBryE,KAAKid,OAASwR,EAAMxR,MAItBo1D,sBAAA,WACC,OAAO,IAAIF,GAAiCnyE,OAG7CqyE,sBAAA,SAAW9lB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WAC/B2F,EAAS/lB,EAAQ/+B,IAAIxtB,KAAKid,MAChC,OAAOsvC,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAeuD,QAI3BD,cAAP,SACCjhB,EACA7E,GAIA,OAAO,IAAI8lB,EAFO5D,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAC3D2jC,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,gBAjClBqjC,ICJ7CoE,GAAgB,WAAc,OAAA,kBAMnC,WAAa9jD,EAAoC0Z,GAAjD,MACCrhC,YAAO2nB,EAAOo+B,GAAmBj4B,mBAEjC3tB,EAAKurE,OAASvrE,EAAK2lE,aAAcn+C,EAAMA,MAAO8jD,GAAe,KAE7DpqC,EAASA,EAAO7xB,OAChBrP,EAAK4oB,UAAc,EAAIsY,EAAOznC,OAAS8pC,GAAiBrqC,OAAQgoC,GAAW,OAU7E,OApByDroC,OAaxD2yE,oBAAA,SAAS/kB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM1iB,EAAQzuB,KAAKwyE,OAAQ9kB,EAAOvc,GAClCuc,EAAM1kC,KAAKyF,MAA4B,MAAlBzuB,KAAK6vB,UAAoB7vB,KAAK6vB,UAAUsY,OAAQ1Z,EAAO,GAAM4X,OAAO5X,GACzFonC,EAAQ7H,SAAWhuD,KAAK+tD,WAjB8Bof,ICJnDuF,GAAc,WAAM,MAAA,mBAKzB,WAAajkD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmBj4B,mBACjC3tB,EAAK+hB,KAAO/hB,EAAK2lE,aAAcn+C,EAAMA,MAAOikD,GAAa,QAS3D,OAduD5yE,OAQtD6yE,oBAAA,SAASjlB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,KAC7Buc,EAAM1kC,KAAKyF,MAAQ4X,OAAOrmC,KAAKgpB,KAAM0kC,EAAOvc,IAC5C0kB,EAAQ7H,SAAWhuD,KAAK+tD,WAX4Bof,K3BRvD,SAAY8B,GACXA,mBACAA,uBAFD,CAAYA,KAAAA,Q4BeZ,ICfY2D,kBDkBX,WAAavE,EAA0C1B,EAAmBl+C,GAA1E,MACC3nB,YAAOonE,GAAsB2E,YAAalG,EAAW0B,gBACrDpnE,EAAKwnB,MAAQA,IAoCf,OAzCiD3uB,OAQhDgzE,qBAAA,SAAUrkD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiBqkD,GAClB9yE,KAAKyuB,QAAUA,EAAMA,OAIvBqkD,sBAAA,SAAWplB,GACV,OAAQ1tD,KAAKquE,SACb,KAAKY,GAAgCr6C,KACpC,OAAO,IAAI+9C,GAAmC3yE,MAC/C,KAAKivE,GAAgC8D,OACpC,OAAO,IAAIN,GAAqCzyE,KAAM0tD,EAAM1kC,KAAKyF,SAInEqkD,sBAAA,SAAWvmB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WAC/BqG,EAAUzmB,EAAQ/+B,IAAIxtB,KAAKyuB,OACjC,OAAO89B,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAW2E,QAI3CF,cAAP,SACC1hB,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAClErc,EAAQggD,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACpE,OAAO,IAAIgoC,EAA6B1hB,EAAY,GAAKub,EAAWl+C,OAvCrB6/C,IET3C4D,GAAc,WAAqB,OAAA,qBAKxC,WAAazjD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmBxuC,mBACjCpX,EAAKgW,KAAOhW,EAAK2lE,aAAcn+C,EAAMxR,KAAMi1D,GAAa,UAW1D,OAhBkDpyE,OAQjDmzE,oBAAA,SAASvlB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMvyB,EAAO5e,KAAKid,KAAMywC,EAAOvc,GACnB,MAARvyB,GACH5e,KAAK4X,KAAMgH,EAAM8uC,QAZ6Byf,mBCOjD,WAAaR,EAAmB1vD,GAAhC,MACCnW,YAAOonE,GAAsBgF,WAAYvG,gBACzC1lE,EAAKgW,KAAOA,IA6Bd,OAlCgDnd,OAQ/CqzE,qBAAA,SAAU1kD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiB0kD,GAClBnzE,KAAKid,OAASwR,EAAMxR,MAItBk2D,sBAAA,WACC,OAAO,IAAIF,GAA8BjzE,OAG1CmzE,sBAAA,SAAW5mB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WAC/B2F,EAAS/lB,EAAQ/+B,IAAIxtB,KAAKid,MAChC,OAAOsvC,EAAQ/+B,IAAK,IAAIxtB,KAAKwS,SAAQu8D,MAAeuD,QAG9Ca,cAAP,SACC/hB,EACA7E,GAIA,OAAO,IAAI4mB,EAFO1E,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAC3D2jC,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,gBA/BrBqjC,kBCgB/C,aAAA,WACCnuE,KAAK65C,MAAQ,KACb75C,KAAK0tD,MAAQ,KACb1tD,KAAKyuB,MAAQ,GAEbzuB,KAAK+F,MAAQ,IAAI6hB,QACjB5nB,KAAKozE,KAAO,IAAIzgD,YAEhB3yB,KAAKqzE,GAAuB,SAAEz9D,GAC7B3O,EAAKqsE,eAAgB19D,IAGtB5V,KAAKuzE,GAAoB,SAAE39D,GAC1B3O,EAAKusE,YAAa59D,IAGnB5V,KAAKyzE,GAAoB,WACxBxsE,EAAKysE,eAGN1zE,KAAK2zE,GAAsB,WAC1B1sE,EAAKgzC,iBAGNj6C,KAAK4zE,GAAqB,SAAEh+D,GAC3B3O,EAAK4sE,aAAcj+D,IAGpB5V,KAAK8zE,GAA4B,KA+PnC,OA5PWC,qBAAV,SAAoB7yE,GAMnB,OALkB,MAAdlB,KAAK65C,OACR34C,EAAMC,YAAY6yE,iBAAiBhlC,YAClChvC,KAAK65C,MAAQ75C,KAAKi0E,eAGbj0E,KAAK65C,OAGHk6B,wBAAV,WACC,IAAMvxE,EAAS+U,SAAS+hB,cAAe,SAEvC,OADA92B,EAAOssC,aAAc,aAAc,SAC5BtsC,GAGEuxE,yBAAV,WACC,MAAO,QAGEA,sBAAV,SAAqBrmB,EAAe7T,EAAyBprB,GAC5DorB,EAAMrnC,KAAOxS,KAAKk0E,eAClBr6B,EAAMprB,MAAQA,EACdorB,EAAMpiC,iBAAkB,UAAWzX,KAAKqzE,IACxCx5B,EAAMpiC,iBAAkB,OAAQzX,KAAKuzE,IACrC15B,EAAMpiC,iBAAkB,SAAUzX,KAAK2zE,IACvC95B,EAAMpiC,iBAAkB,QAASzX,KAAK4zE,IAGtC/5B,EAAM/K,aAAc,QAAS9uC,KAAKm0E,cAAezmB,IAG7CA,EAAM0mB,SACTv6B,EAAM/K,aAAc,WAAY,YAEhC+K,EAAMw6B,gBAAiB,YAIpB3mB,EAAMS,SACTtU,EAAM/K,aAAc,WAAY,YAEhC+K,EAAMw6B,gBAAiB,aAIfN,oCAAV,WACC,MAAO,kCAGEA,gCAAV,WACC,MAAO,yCAGEA,iCAAV,SAAgCrmB,EAAepxC,GAC9C,IAEMg4D,EAFU5mB,EAAM1kC,KAAK/jB,QAEOwqB,WAAanT,EAC/C,MAAO,gBAAiCg4D,YAA4CA,SAG3EP,iCAAV,WACC,MAAO,kBAGEA,kCAAV,SAAiCX,EAAiB98B,GACjD,MAAO,4BACG88B,EAAKhtE,aACNgtE,EAAK/sE,eACH+sE,EAAKlwE,oBACJkwE,EAAKzsE,0BACAysE,EAAKzsE,+BACA2vC,EAAO7sB,MAAK6sB,EAAO/2C,MAAK+2C,EAAOztC,MAAKytC,EAAOh3C,MAAKg3C,EAAO4d,OAAM5d,EAAO6d,SAGjF4f,8BAAV,SAA6BrmB,EAAe0lB,EAAiB92D,GAC5D,IAAM0M,EAAO0kC,EAAM1kC,KACnB,MAAO,gBAAgBsb,GAAoBG,aAAczb,EAAKwb,uBAC/Cxb,EAAKhU,KAAOsH,sBACV0M,EAAK/J,SAAWo4C,GAAiByD,OAAS,SAAW,oBAC1D9xC,EAAK9mB,MAAMY,SAAU,SAGxBixE,gCAAV,SAA+BrmB,EAAe0lB,EAAiB92D,GAC9D,MAAO,cAGEy3D,0BAAV,SAAyBrmB,GACxB,IAAM2F,EAAQ3F,EAAMzxC,UAAUo3C,MACxBr+C,EAAO04C,EAAM14C,KACbs2C,EAAQt2C,EAAK5O,EACbmlD,EAAQv2C,EAAK3O,EACb+sE,EAAOpzE,KAAKozE,KAClBA,EAAKhtE,GAAK,GAAMklD,EAAQ+H,EAAMjtD,EAC9BgtE,EAAK/sE,GAAK,GAAMklD,EAAQ8H,EAAMhtD,EAC9B+sE,EAAKlwE,MAAQooD,EACb8nB,EAAKzsE,OAAS4kD,EAEdmC,EAAM7mC,kBACN,IACMG,EAAiB0mC,EAAMzxC,UAAU+K,eAEvC,OAAOhnB,KAAKu0E,sBAAuBnB,EAAMpsD,GACxChnB,KAAKw0E,oBAAqB9mB,EAAO0lB,EAJpB,GAKbpzE,KAAKy0E,kBAAmB/mB,EAAO0lB,EALlB,GAMbpzE,KAAK00E,0BACL10E,KAAK20E,sBACL30E,KAAK40E,qBAAsBlnB,EARd,GASb1tD,KAAK60E,wBAGGd,2BAAV,SAA0Bn+D,GACzB,GAAID,EAAkBm/D,WAAYl/D,GAAM,CACvC,IAAM83C,EAAQ1tD,KAAK0tD,MACnB,GAAa,MAATA,EAAgB,CACnB1tD,KAAKi6C,gBACLj6C,KAAK6+C,OAEL,IAAM39C,EAAQb,EAAcsZ,SAAU+zC,GACtC,GAAIxsD,EAAQ,CACX,IAAMolB,EAAkBplB,EAAMgiB,qBACxB4gC,EAAYnuC,EAAkBo/D,kBAAmBn/D,GACjDo/D,EAAY1uD,EAAgB2uD,cAAevnB,GAAO,GAAO,EAAO5J,GACrD,MAAbkxB,IACH9zE,EAAMohB,KAAK4yD,QACXt/D,EAAEiC,iBACFyO,EAAgBnD,WAAY6xD,GAAW,GAAM,WAItCr/D,EAAkBw/D,QAASv/D,KACrC5V,KAAKi6C,gBACLj6C,KAAK6+C,SAIGk1B,wBAAV,SAAuBn+D,GACtB5V,KAAKi6C,gBACLj6C,KAAK6+C,QAGIk1B,yBAAV,SAAwBn+D,GACvB,GAAIA,EAAE9U,kBAAkBs0E,iBAAmB,CAC1C,IAAM1nB,EAAQ1tD,KAAK0tD,MACb2nB,EAAUr1E,KAAKq1E,QACR,MAAT3nB,GAA4B,MAAX2nB,GACpBA,EAAS3nB,EAAO93C,EAAE9U,OAAO2tB,SAKlBslD,wBAAV,WACC,IAAMrmB,EAAQ1tD,KAAK0tD,MACnB,GAAa,MAATA,EACH,GAAIA,EAAM/+C,QAAU,CACnB,IAAMkrC,EAAQ75C,KAAK65C,MACN,MAATA,GACHA,EAAM/K,aAAc,QAAS9uC,KAAKm0E,cAAezmB,SAGlD1tD,KAAK6+C,QAKRk1B,oBAAA,SAASrmB,GACR,OAAS1tD,KAAK0tD,QAAUA,GAGzBqmB,iBAAA,SACCuB,EAAkB7mD,EAClB/rB,EAAqB2yE,GAErB,IAAME,EAAWv1E,KAAK0tD,MAItB,GAHgB,MAAZ6nB,GAAoBA,IAAaD,GACpCt1E,KAAK6+C,OAEY,MAAd7+C,KAAK0tD,MAAgB,CACxB1tD,KAAK0tD,MAAQ4nB,EACbt1E,KAAKyuB,MAAQA,EACbzuB,KAAK0C,SAAWA,EAChB1C,KAAKq1E,QAAUA,EAEf,IAAMrsD,EAAOssD,EAAStsD,KACV,MAARA,IACHA,EAAK2tC,QAAS,GAGf,IAAMz1D,EAAQb,EAAcsZ,SAAU27D,GACtC,GAAIp0E,EAAQ,CACX,IAAM24C,EAAQ75C,KAAKw1E,SAAUt0E,GAC7B,GAAI24C,EAAQ,CACX75C,KAAKy1E,UAAWH,EAAUz7B,EAAOprB,GAEjC,IAAMinD,EAAmB11E,KAAKyzE,GACxBhoE,EAAWzL,KAAK8zE,GACN,MAAZroE,GACHA,EAASmN,IAAK,aAAc88D,GAE7B11E,KAAK8zE,GAA4B5yE,EAAMuK,SACvCvK,EAAMuK,SAASkF,GAAI,aAAc+kE,GAEjC77B,EAAM7sB,MAAM6qB,QAAU,GACtBgC,EAAMq7B,QACNr7B,EAAM87B,SAGPz0E,EAAMI,YAKTyyE,iBAAA,WACC,IAAMrmB,EAAQ1tD,KAAK0tD,MACnB,GAAa,MAATA,EAAgB,CACnB1tD,KAAK0tD,MAAQ,KACb1tD,KAAKyuB,MAAQ,GAEb,IAAMzF,EAAO0kC,EAAM1kC,KACP,MAARA,IACHA,EAAK2tC,QAAS,GAGf,IAAM9c,EAAQ75C,KAAK65C,MACN,MAATA,IACHA,EAAM5V,oBAAqB,UAAWjkC,KAAKqzE,IAC3Cx5B,EAAM5V,oBAAqB,OAAQjkC,KAAKuzE,IACxC15B,EAAM5V,oBAAqB,SAAUjkC,KAAK2zE,IAC1C95B,EAAM5V,oBAAqB,QAASjkC,KAAK4zE,IACzC/5B,EAAM7sB,MAAM6qB,QAAU,QAGvB,IAAMpsC,EAAWzL,KAAK8zE,GACN,MAAZroE,IACHzL,KAAK8zE,GAA4B,KACjCroE,EAASmN,IAAK,aAAc5Y,KAAKyzE,KAGlCpzE,EAAciB,OAAQosD,KAIxBqmB,0BAAA,WACC,IAAMrmB,EAAQ1tD,KAAK0tD,MACb7T,EAAQ75C,KAAK65C,MACbn3C,EAAW1C,KAAK0C,SACtB,GAAa,MAATgrD,GAA0B,MAAT7T,GAA6B,MAAZn3C,EAAmB,CACxD,IAAMg2D,EAAW7e,EAAMprB,MACnBzuB,KAAKyuB,QAAUiqC,GAClBh2D,EAAUgrD,EAAOgL,yBC3SpB,oBACC5xD,mBA8BF,OAlCkDhH,OAOjD81E,oBAAA,SAASloB,EAAemI,EAAwB1kB,GAAhD,WACC,IAAMuc,EAAMS,SAAW,CACtB,IAAM0nB,EAAOD,EAA6B3mC,UACtCye,EAAMrqC,QACHwyD,EAAKC,QAASpoB,IACnBxyC,YAAW,WACV26D,EAAK/2B,KAAM4O,EAAOA,EAAM1kC,KAAKyF,OAAO,SAAEsnD,EAAWtnD,GAChDi/B,EAAM1kC,KAAKyF,MAAQA,EACnBxnB,EAAK2Q,KAAM,SAAU81C,EAAOj/B,QAE3B,GAGAonD,EAAKC,QAASpoB,KACjBmoB,EAAK57B,gBACL47B,EAAKh3B,UAMF+2B,UAAP,WAIC,OAHyC,MAArCA,EAA6BhuE,OAChCguE,EAA6BhuE,KAAO,IAAImsE,IAElC6B,EAA6BhuE,MA/B9BguE,OAAgD,QADNxJ,KJLlD,SAAYwG,GACXA,qBADD,CAAYA,KAAAA,QKcZ,ICdYoD,kBDeX,WAAa3H,EAAoC1B,UAChD7lE,YAAOonE,GAAsB+H,KAAMtJ,EAAW0B,SAsBhD,OAxB2CvuE,OAK1Co2E,sBAAA,SAAWxoB,GACV,OAAQ1tD,KAAKquE,SACb,KAAKuE,GAA0BuD,MAC9B,OAAO,IAAIP,KAIbM,sBAAA,SAAW3pB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WACrC,OAAOpgB,EAAQ/+B,IAAK,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,cAGnD6H,cAAP,SACC9kB,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACxE,OAAO,IAAIorC,EAAuB9kB,EAAY,GAAKub,OAtBV2B,IETrC8H,GAAgB,WAAqB,OAAA,qBAK1C,WAAa3nD,EAA8Bs/B,GAA3C,MACCjnD,YAAO2nB,EAAOs/B,gBACd9mD,EAAKnG,OAASmG,EAAK2lE,aAAcn+C,EAAM3tB,OAAQs1E,GAAe,UAEhE,OAP6Ct2E,UAAAqtE,mBCA5C,WAAa1+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBxuC,YAiBnC,OAnBiDve,OAKhDu2E,oBAAA,SAAS3oB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMrwC,EAASd,KAAKc,OAAQ4sD,EAAOvc,GACnC,GAAc,MAAVrwC,EAAiB,CACpB,IAAMI,EAAQb,EAAcsZ,SAAU+zC,GACtC,GAAIxsD,EAAQ,CACX,IAAMC,EAAcD,EAAMC,YACtB,WAAYA,GACfA,EAAYm1E,OAAQx1E,UAbuBy1E,mBCAhD,WAAa9nD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBxuC,YAWnC,OAbiDve,OAKhD02E,oBAAA,SAAS9oB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMrwC,EAASd,KAAKc,OAAQ4sD,EAAOvc,GACrB,MAAVrwC,GACHma,OAAO88B,KAAMj3C,QATgCy1E,mBCChD,WAAa9nD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBxuC,YAWnC,OAbwDve,OAKvD22E,oBAAA,SAAS/oB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMrwC,EAASd,KAAKc,OAAQ4sD,EAAOvc,GACrB,MAAVrwC,IACHma,OAAO+8B,SAASJ,KAAO92C,QAT6By1E,KJLxD,SAAYP,GACXA,mBACAA,mBACAA,mCAHD,CAAYA,KAAAA,QKgBZ,IChBYU,kBDmBX,WAAarI,EAAoC1B,EAAmB7rE,GAApE,MACCgG,YAAOonE,GAAsByI,KAAMhK,EAAW0B,gBAC9CpnE,EAAKnG,OAASA,IAoChB,OAzC2ChB,OAQ1C82E,qBAAA,SAAUnoD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiBmoD,GAClB52E,KAAKc,SAAW2tB,EAAM3tB,QAIxB81E,sBAAA,WACC,OAAQ52E,KAAKquE,SACb,KAAK2H,GAA0Ba,KAC9B,OAAO,IAAIR,GAA6Br2E,MACzC,KAAKg2E,GAA0Bc,KAC9B,OAAO,IAAIN,GAA6Bx2E,MACzC,KAAKg2E,GAA0Be,aAC9B,OAAO,IAAIN,GAAoCz2E,QAIjD42E,sBAAA,SAAWrqB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WAC/BqK,EAAWzqB,EAAQ/+B,IAAIxtB,KAAKc,QAClC,OAAOyrD,EAAQ/+B,IAAK,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAW2I,QAG9DJ,cAAP,SACCxlB,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAClEhqC,EAAS2tE,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACrE,OAAO,IAAI8rC,EAAuBxlB,EAAY,GAAKub,EAAW7rE,OAvCrBwtE,KChB3C,SAAYoI,GACXA,mBACAA,mBAFD,CAAYA,KAAAA,QCMZ,ICNYO,GCAAC,kBFSX,WAAazoD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmB0C,yBACjCtoD,EAAKkwE,WAAe1oD,EAAM4/C,UAAYqI,GAA8BU,OAStE,OAdiDt3E,OAQhDu3E,oBAAA,SAAS3pB,EAAemI,EAAwB1kB,GACxCnxC,KAAK2sE,UAAWjf,EAAOvc,KAC7Buc,EAAM/+C,QAAU3O,KAAKm3E,WACrBthB,EAAQ7H,SAAWhuD,KAAK+tD,WAXsBof,mBGOhD,WAAakB,EAAwC1B,UACpD7lE,YAAOonE,GAAsBoJ,UAAW3K,EAAW0B,SAmBrD,OArB+CvuE,OAK9Cy3E,sBAAA,WACC,OAAO,IAAIF,GAA6Br3E,OAGzCu3E,sBAAA,SAAWhrB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WACrC,OAAOpgB,EAAQ/+B,IAAK,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,cAGnDkJ,cAAP,SACCnmB,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACxE,OAAO,IAAIysC,EAA2BnmB,EAAY,GAAKub,OAnBV2B,ICPzCkJ,GAAgB,WAAc,OAAA,kBAKnC,WAAa/oD,EAAuCs/B,GAApD,MACCjnD,YAAO2nB,EAAOs/B,gBACd9mD,EAAK61C,OAAS71C,EAAK2lE,aAAcn+C,EAAMquB,OAAQ06B,GAAe,OAEhE,OAPsD13E,UAAAqtE,mBCDrD,WAAa1+C,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBwC,kBAUnC,OAZ+DvvD,OAK9D23E,oBAAA,SAAS/pB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM2L,EAAS98C,KAAK88C,OAAQ4Q,EAAOvc,GACnCuc,EAAMzxC,UAAUtH,SAASvO,EAAI02C,EAC7B+Y,EAAQ7H,SAAWhuD,KAAK+tD,WAToC2pB,mBCC9D,WAAajpD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmByC,kBAUnC,OAZ+DxvD,OAK9D63E,oBAAA,SAASjqB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM2L,EAAS98C,KAAK88C,OAAQ4Q,EAAOvc,GACnCuc,EAAMzxC,UAAUtH,SAAStO,EAAIy2C,EAC7B+Y,EAAQ7H,SAAWhuD,KAAK+tD,WAToC2pB,mBCC9D,WAAajpD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBj5C,gBAkBnC,OApBuE9T,OAKtE83E,oBAAA,SAASlqB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM2L,EAAS98C,KAAK88C,OAAQ4Q,EAAOvc,GAE7Bx8B,EADY+4C,EAAMzxC,UACGtH,SACrBkjE,EAA2E,IAArDhiB,EAAQ7H,QAAUnB,GAAmBwC,YAC3DyoB,EAA2E,IAArDjiB,EAAQ7H,QAAUnB,GAAmByC,YAC3DyoB,EAAiBF,EAAmBljE,EAASvO,EAAIyvD,EAAQzvD,EACzD4xE,EAAiBF,EAAmBnjE,EAAStO,EAAIwvD,EAAQxvD,EAC/DqnD,EAAM7mC,kBACN,IAAMwM,EAAiBq6B,EAAMzxC,UAAUoX,eACvC1e,EAASrO,IAAKyxE,EAAe1kD,EAAexqB,EAAIi0C,EAAQk7B,EAAe3kD,EAAe/zB,EAAIw9C,GAC1F+Y,EAAQ7H,SAAWhuD,KAAK+tD,WAjB4C2pB,mBCCtE,WAAajpD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBj5C,gBAkBnC,OApBiE9T,OAKhEm4E,oBAAA,SAASvqB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM2L,EAAS98C,KAAK88C,OAAQ4Q,EAAOvc,GAE7Bx8B,EADY+4C,EAAMzxC,UACGtH,SACrBkjE,EAA2E,IAArDhiB,EAAQ7H,QAAUnB,GAAmBwC,YAC3DyoB,EAA2E,IAArDjiB,EAAQ7H,QAAUnB,GAAmByC,YAC3DyoB,EAAiBF,EAAmBljE,EAASvO,EAAIyvD,EAAQzvD,EACzD4xE,EAAiBF,EAAmBnjE,EAAStO,EAAIwvD,EAAQxvD,EAC/DqnD,EAAM7mC,kBACN,IAAMwM,EAAiBq6B,EAAMzxC,UAAUoX,eACvC1e,EAASrO,IAAKyxE,EAAe1kD,EAAe5J,EAAIqzB,EAAQk7B,EAAe3kD,EAAe9zB,EAAIu9C,GAC1F+Y,EAAQ7H,SAAWhuD,KAAK+tD,WAjBsC2pB,mBCChE,WAAajpD,UACZ3nB,YAAO2nB,EAAOo+B,GAAmBwC,kBAanC,OAf+DvvD,OAK9Do4E,oBAAA,SAASxqB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM2L,EAAS98C,KAAK88C,OAAQ4Q,EAAOvc,GAC7B0mC,EAA2E,IAArDhiB,EAAQ7H,QAAUnB,GAAmBwC,YAC3D16C,EAAW+4C,EAAMzxC,UAAUtH,SAC3BojE,EAAiBF,EAAmBljE,EAASvO,EAAIyvD,EAAQzvD,EAC/DuO,EAASvO,EAAI2xE,EAAej7B,EAC5B+Y,EAAQ7H,SAAWhuD,KAAK+tD,WAZoC2pB,mBCC9D,WAAa3lB,UACZjrD,YAAOirD,EAAQlF,GAAmByC,kBAapC,OAf+DxvD,OAK9Dq4E,oBAAA,SAASzqB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM2L,EAAS98C,KAAK88C,OAAQ4Q,EAAOvc,GAC7B2mC,EAA2E,IAArDjiB,EAAQ7H,QAAUnB,GAAmByC,YAC3D36C,EAAW+4C,EAAMzxC,UAAUtH,SAC3BqjE,EAAiBF,EAAmBnjE,EAAStO,EAAIwvD,EAAQxvD,EAC/DsO,EAAStO,EAAI2xE,EAAel7B,EAC5B+Y,EAAQ7H,SAAWhuD,KAAK+tD,WAZoC2pB,mBCA9D,WAAallE,EAA6Bm6D,EAAmB0B,EAAkB+J,GAA/E,MACCtxE,YAAO0L,EAAMm6D,EAAW0B,gBACxBpnE,EAAKmxE,QAAUA,IAWjB,OAhBUt4E,OAQTu4E,qBAAA,SAAU5pD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiB4pD,GAClBr4E,KAAKo4E,UAAY3pD,EAAM2pD,YAZhB9J,KVFV,SAAY2I,GACXA,+BACAA,+BACAA,+BACAA,+BACAA,iDACAA,qCAND,CAAYA,KAAAA,QCAZ,SAAYC,GACXA,uBACAA,mBACAA,uBAHD,CAAYA,KAAAA,QUuBZ,ICvBYoB,kBD2BX,WAAaF,EAA6CzL,EAAmB7vB,GAA7E,MACCh2C,YAAOonE,GAAsBhY,UAAWyW,EAAWuK,GAA+BqB,KAAMH,gBACxFnxE,EAAK61C,OAASA,IA4ChB,OAjDSh9C,OAQR04E,qBAAA,SAAU/pD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiB+pD,GAClBx4E,KAAK88C,SAAWruB,EAAMquB,QAIxB07B,sBAAA,WACC,OAAQx4E,KAAKo4E,SACb,KAAKnB,GAAmCwB,WACvC,OAAO,IAAIhB,GAA2Cz3E,MACvD,KAAKi3E,GAAmCyB,WACvC,OAAO,IAAIf,GAA2C33E,MACvD,KAAKi3E,GAAmC0B,oBACvC,OAAO,IAAIf,GAAmD53E,MAC/D,KAAKi3E,GAAmC2B,cACvC,OAAO,IAAIX,GAA6Cj4E,MACzD,KAAKi3E,GAAmC4B,WACvC,OAAO,IAAIX,GAA2Cl4E,MACvD,KAAKi3E,GAAmC6B,WACvC,OAAO,IAAIX,GAA2Cn4E,QAIxDw4E,sBAAA,SAAWjsB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAIxtB,KAAK2sE,WAC/BoM,EAAWxsB,EAAQ/+B,IAAIxtB,KAAK88C,QAClC,OAAOyP,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAWruE,KAAKo4E,YAAWW,QAI3DP,cAAP,SACCpnB,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAClEgS,EAAS2xB,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACrE,OAAO,IAAI0tC,EAAgCpnB,EAAY,GAAKub,EAAW7vB,OA/ChEu7B,kBErBT,cA+EA,OA9EQW,YAAP,SAAkBvqD,GACjB,OAAO9kB,KAAKwnB,MAAe,IAAR1C,GAAgB,KAG7BuqD,eAAP,SAAqBhkE,GAEpB,OAAIrL,KAAKwP,IAAKnE,GADI,KAERA,EAAO,GAFC,KAEgB,KAE3BgkE,EAAY/nD,UAAWjc,IAGxBgkE,SAAP,SAAetrB,EAAev7C,EAAa2lD,EAAWmhB,EAAqBC,GAC1ExrB,EAAMoB,yBACN,IAAMn6C,EAAW+4C,EAAMzxC,UAAUtH,SACjC,GAAIskE,EAAa,CAChB,IAAM//D,EAAKvP,KAAKwP,IAAI2+C,EAAG1xD,EAAI+L,EAAK/L,GAC1BgT,EAAKzP,KAAKwP,IAAI2+C,EAAGzxD,EAAI8L,EAAK9L,GAChC,GAAI6yE,EAAW,CACd,IACMlkE,GADAmkE,EAAQxvE,KAAKG,IAAIoP,EAAIE,IACN+/D,EACrBzrB,EAAM14C,KAAK1O,IACV0yE,EAAYI,aAAcpkE,GAC1BgkE,EAAYI,aAAcpkE,IAE3BL,EAASrO,IACR0yE,EAAY/nD,UAAW9e,EAAK/L,GAC5B4yE,EAAY/nD,UAAW9e,EAAK9L,SAG7BqnD,EAAM14C,KAAK1O,IACV0yE,EAAYI,aAAclgE,EAAKA,GAC/B8/D,EAAYI,aAAchgE,EAAKA,IAEhCzE,EAASrO,IACR0yE,EAAY/nD,UAAW9e,EAAK/L,GAC5B4yE,EAAY/nD,UAAW9e,EAAK9L,SAI9B,GAAI6yE,EAAY,CACThgE,EAAK4+C,EAAG1xD,EAAI+L,EAAK/L,EACjBgT,EAAK0+C,EAAGzxD,EAAI8L,EAAK9L,EACjB2O,EAAOrL,KAAKG,IAAIH,KAAKwP,IAAID,GAAKvP,KAAKwP,IAAIC,IAF7C,IAGMvP,EAAKsI,EAAK/L,GAAK8S,EAAK,GAAKlE,GAAQA,GACjChL,EAAKmI,EAAK9L,GAAK+S,EAAK,GAAKpE,GAAQA,GACjCmkE,EAAe,GAAPnkE,EACR5O,EAAIuD,KAAKC,IAAIuI,EAAK/L,EAAGyD,GAAMsvE,EAC3B9yE,EAAIsD,KAAKC,IAAIuI,EAAK9L,EAAG2D,GAAMmvE,EACjCzrB,EAAM14C,KAAK1O,IACV0yE,EAAYI,aAAcpkE,GAC1BgkE,EAAYI,aAAcpkE,IAE3BL,EAASrO,IACR0yE,EAAY/nD,UAAW7qB,GACvB4yE,EAAY/nD,UAAW5qB,QAElB,CACN,IAAMiC,EAAKqB,KAAKC,IAAIuI,EAAK/L,EAAG0xD,EAAG1xD,GACzBoC,EAAKmB,KAAKC,IAAIuI,EAAK9L,EAAGyxD,EAAGzxD,GAGzBnD,EAFKyG,KAAKG,IAAIqI,EAAK/L,EAAG0xD,EAAG1xD,GAEZkC,EACb3B,EAFKgD,KAAKG,IAAIqI,EAAK9L,EAAGyxD,EAAGzxD,GAEXmC,EACd6sD,EAAa,GAARnyD,EACLoyD,EAAc,GAAT3uD,EACX+mD,EAAM14C,KAAK1O,IACV0yE,EAAYI,aAAcl2E,GAC1B81E,EAAYI,aAAczyE,IAE3BgO,EAASrO,IACR0yE,EAAY/nD,UAAW3oB,EAAK+sD,GAC5B2jB,EAAY/nD,UAAWzoB,EAAK8sD,IAI/B5H,EAAMsB,6BDhFR,SAAYspB,GACXA,qCACAA,yCACAA,uCACAA,qCACAA,yCACAA,uCAND,CAAYA,KAAAA,QEOZ,ICPYe,GDONC,GAAsB,WAAc,OAAA,GACpCC,GAAsB,WAAc,OAAA,oBAKzC,WAAa9qD,EAAyCs/B,GAAtD,MACCjnD,YAAO2nB,EAAOs/B,SACd,OAAQt/B,EAAM2pD,SACd,KAAKE,GAAqCkB,cACzCvyE,EAAK+N,KAAO/N,EAAK2lE,aAAcn+C,EAAMquB,OAAQw8B,GAAqB,KAClE,MACD,KAAKhB,GAAqCmB,cACzCxyE,EAAK+N,KAAO/N,EAAK2lE,aAAcn+C,EAAMquB,OAAQy8B,GAAqB,OAClE,MACD,KAAKjB,GAAqCoB,gBACzCzyE,EAAK+N,KAAO/N,EAAK2lE,aAAcn+C,EAAMquB,OAAQw8B,GAAqB,KAClE,MACD,KAAKhB,GAAqCqB,gBACzC1yE,EAAK+N,KAAO/N,EAAK2lE,aAAcn+C,EAAMquB,OAAQy8B,GAAqB,OAClE,MACD,KAAKjB,GAAqCsB,eACzC3yE,EAAK+N,KAAO/N,EAAK2lE,aAAcn+C,EAAMquB,OAAQw8B,GAAqB,KAClE,MACD,KAAKhB,GAAqCuB,eACzC5yE,EAAK+N,KAAO/N,EAAK2lE,aAAcn+C,EAAMquB,OAAQy8B,GAAqB,OAClE,MACD,QACCtyE,EAAK+N,KAAOskE,YAyBf,OAlDwDx5E,OA6B7Cg6E,2BAAV,SACCpsB,EAAemI,EACfkkB,EAAaC,EACbC,EAAiBC,GAEjB,IAAMhhE,IAAQ,GAAM+gE,GAAYF,EAC1B3gE,IAAQ,GAAM8gE,GAAYF,EAChCtsB,EAAM7mC,kBACN,IAAM5K,EAAYyxC,EAAMzxC,UAClBtH,EAAWsH,EAAUtH,SACrB0e,EAAiBpX,EAAUoX,eAC3BwkD,EAA2E,IAArDhiB,EAAQ7H,QAAUnB,GAAmBwC,YAC3DyoB,EAA2E,IAArDjiB,EAAQ7H,QAAUnB,GAAmByC,YAC3DyoB,EAAiBF,EAAmBljE,EAASvO,EAAIyvD,EAAQzvD,EACzD4xE,EAAiBF,EAAmBnjE,EAAStO,EAAIwvD,EAAQxvD,EAC/DwvD,EAAQ7H,SAAWnB,GAAmBj5C,SACtCe,EAASrO,IACRyxE,EAAe7+D,EAAKma,EAAe5J,EAAIrQ,EAAKia,EAAexqB,EAC3DmvE,EAAe9+D,EAAKma,EAAe9zB,EAAI6Z,EAAKia,EAAe/zB,OA/CN6tE,mBEDvD,WAAa1+C,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmB+C,qBACjC3oD,EAAKwjB,OAASgE,EAAMyrD,QACpBjzE,EAAK8mD,OAASlB,GAAmBj5C,WAkBnC,OAxBsE9T,OASrEq6E,oBAAA,SAASzsB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMipC,EAAep6E,KAAKgV,KAAM04C,EAAOvc,GACjCn8B,EAAO04C,EAAM14C,KAEbqlE,EADoE,IAAjDxkB,EAAQ7H,QAAUnB,GAAmB+C,QAC5B56C,EAAK3O,EAAIwvD,EAAQ7gD,KAAK3O,EACxD2O,EAAK3O,EAAI2yE,GAAYI,aAAcgB,GACnCvkB,EAAQ7H,SAAWnB,GAAmB+C,OACtC5vD,KAAKs6E,eACJ5sB,EAAOmI,EACP,EAAGwkB,EAAWrlE,EAAK3O,EACnB,GAAKrG,KAAKyqB,aApBwDqvD,mBCGrE,WAAarrD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmB+C,qBACjC3oD,EAAKwjB,OAASgE,EAAMyrD,QACpBjzE,EAAK8mD,OAASlB,GAAmBj5C,WAkBnC,OAxBsE9T,OASrEy6E,oBAAA,SAAS7sB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMqpC,EAAex6E,KAAKgV,KAAM04C,EAAOvc,GACjCn8B,EAAO04C,EAAM14C,KAEbqlE,EADoE,IAAjDxkB,EAAQ7H,QAAUnB,GAAmB+C,QAC5B56C,EAAK3O,EAAIwvD,EAAQ7gD,KAAK3O,EACxD2O,EAAK3O,EAAI2yE,GAAYI,aAAciB,EAAWG,GAC9C3kB,EAAQ7H,SAAWnB,GAAmB+C,OACtC5vD,KAAKs6E,eACJ5sB,EAAOmI,EACP,EAAGwkB,EAAWrlE,EAAK3O,EACnB,GAAKrG,KAAKyqB,aApBwDqvD,mBCIrE,WAAarrD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmB94C,mBACjC9M,EAAKgzE,QAAUxrD,EAAMwrD,QACrBhzE,EAAKizE,QAAUzrD,EAAMyrD,QACrBjzE,EAAK8mD,OAASlB,GAAmBj5C,WAoBnC,OA5BoE9T,OAWnE26E,oBAAA,SAAS/sB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMipC,EAAepB,GAAYI,aAAcp5E,KAAKgV,KAAM04C,EAAOvc,IAC3Dn8B,EAAO04C,EAAM14C,KACb0lE,EAAkE,IAAhD7kB,EAAQ7H,QAAUnB,GAAmBgD,OACvD8qB,EAAoE,IAAjD9kB,EAAQ7H,QAAUnB,GAAmB+C,QACxDgrB,EAAYF,EAAe1lE,EAAK5O,EAAIyvD,EAAQ7gD,KAAK5O,EACjDi0E,EAAYM,EAAgB3lE,EAAK3O,EAAIwvD,EAAQ7gD,KAAK3O,EACxD2O,EAAK1O,IAAK8zE,EAAcA,GACxBvkB,EAAQ7H,SAAWnB,GAAmB94C,KACtC/T,KAAKs6E,eACJ5sB,EAAOmI,EACP+kB,EAAW5lE,EAAK5O,EAAGi0E,EAAWrlE,EAAK3O,EACnCrG,KAAKi6E,QAASj6E,KAAKk6E,cAxB6CJ,mBCInE,WAAarrD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmB94C,mBACjC9M,EAAKgzE,QAAUxrD,EAAMwrD,QACrBhzE,EAAKizE,QAAUzrD,EAAMyrD,QACrBjzE,EAAK8mD,OAASlB,GAAmBj5C,WAuBnC,OA/BoE9T,OAWnE+6E,oBAAA,SAASntB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMqpC,EAAex6E,KAAKgV,KAAM04C,EAAOvc,GACjCn8B,EAAO04C,EAAM14C,KACb0lE,EAAkE,IAAhD7kB,EAAQ7H,QAAUnB,GAAmBgD,OACvD8qB,EAAoE,IAAjD9kB,EAAQ7H,QAAUnB,GAAmB+C,QACxDgrB,EAAYF,EAAe1lE,EAAK5O,EAAIyvD,EAAQ7gD,KAAK5O,EACjDi0E,EAAYM,EAAgB3lE,EAAK3O,EAAIwvD,EAAQ7gD,KAAK3O,EACxD2O,EAAK1O,IACJ0yE,GAAYI,aAAcwB,EAAWJ,GACrCxB,GAAYI,aAAciB,EAAWG,IAEtC3kB,EAAQ7H,SAAWnB,GAAmB94C,KACtC/T,KAAKs6E,eACJ5sB,EAAOmI,EACP+kB,EAAW5lE,EAAK5O,EAAGi0E,EAAWrlE,EAAK3O,EACnCrG,KAAKi6E,QAASj6E,KAAKk6E,cA3B6CJ,mBCGnE,WAAarrD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmBgD,oBACjC5oD,EAAKwjB,OAASgE,EAAMwrD,QACpBhzE,EAAK8mD,OAASlB,GAAmBj5C,WAkBnC,OAxBqE9T,OASpEg7E,oBAAA,SAASptB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMipC,EAAep6E,KAAKgV,KAAM04C,EAAOvc,GACjCn8B,EAAO04C,EAAM14C,KAEb4lE,EADkE,IAAhD/kB,EAAQ7H,QAAUnB,GAAmBgD,OAC5B76C,EAAK5O,EAAIyvD,EAAQ7gD,KAAK5O,EACvD4O,EAAK5O,EAAI4yE,GAAYI,aAAcgB,GACnCvkB,EAAQ7H,SAAWnB,GAAmBgD,MACtC7vD,KAAKs6E,eACJ5sB,EAAOmI,EACP+kB,EAAW5lE,EAAK5O,EAAG,EACnBpG,KAAKyqB,OAAQ,SApBoDqvD,mBCGpE,WAAarrD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmBgD,oBACjC5oD,EAAKwjB,OAASgE,EAAMwrD,QACpBhzE,EAAK8mD,OAASlB,GAAmBj5C,WAkBnC,OAxBqE9T,OASpEi7E,oBAAA,SAASrtB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAMqpC,EAAex6E,KAAKgV,KAAM04C,EAAOvc,GACjCn8B,EAAO04C,EAAM14C,KAEb4lE,EADkE,IAAhD/kB,EAAQ7H,QAAUnB,GAAmBgD,OAC3B76C,EAAK5O,EAAIyvD,EAAQ7gD,KAAK5O,EACxD4O,EAAK5O,EAAI4yE,GAAYI,aAAcwB,EAAWJ,GAC9C3kB,EAAQ7H,SAAWnB,GAAmBgD,MACtC7vD,KAAKs6E,eACJ5sB,EAAOmI,EACP+kB,EAAW5lE,EAAK5O,EAAG,EACnBpG,KAAKyqB,OAAQ,SApBoDqvD,mBCkCpE,WACC1B,EACAzL,EACAsN,EAAiBC,EACjBp9B,GAJD,MAMCh2C,YAAOonE,GAAsBhY,UAAWyW,EAAWuK,GAA+B8D,OAAQ5C,gBAC1FnxE,EAAKgzE,QAAUA,EACfhzE,EAAKizE,QAAUA,EACfjzE,EAAK61C,OAASA,IAiDhB,OA/DSh9C,OAiBRm7E,qBAAA,SAAUxsD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiBwsD,GAClBj7E,KAAKi6E,UAAYxrD,EAAMwrD,SACvBj6E,KAAKk6E,UAAYzrD,EAAMyrD,SACvBl6E,KAAK88C,SAAWruB,EAAMquB,QAIxBm+B,sBAAA,WACC,OAAQj7E,KAAKo4E,SACb,KAAKE,GAAqCqB,gBACzC,OAAO,IAAIQ,GAAkDn6E,MAC9D,KAAKs4E,GAAqCuB,eACzC,OAAO,IAAIiB,GAAiD96E,MAC7D,KAAKs4E,GAAqCmB,cACzC,OAAO,IAAIgB,GAAgDz6E,MAC5D,KAAKs4E,GAAqCoB,gBACzC,OAAO,IAAIa,GAAkDv6E,MAC9D,KAAKs4E,GAAqCsB,eACzC,OAAO,IAAImB,GAAiD/6E,MAC7D,KAAKs4E,GAAqCkB,cACzC,OAAO,IAAIqB,GAAgD76E,QAI7Di7E,sBAAA,SAAW1uB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAKxtB,KAAK2sE,WAChCoM,EAAWxsB,EAAQ/+B,IAAKxtB,KAAK88C,QACnC,OAAOyP,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAWruE,KAAKo4E,YAAWp4E,KAAKi6E,YAAWj6E,KAAKk6E,YAAWnB,QAI3FkC,cAAP,SACC7pB,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAClEgS,EAAS2xB,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACrE,OAAO,IAAImwC,EACV7pB,EAAY,GAAKub,EACjBvb,EAAY,GAAKA,EAAY,GAAKtU,OA5D5Bu7B,IC7BHb,GAAgB,WAAc,OAAA,kBAOnC,WAAa/oD,EAAyCs/B,GAAtD,MACCjnD,YAAO2nB,EAAOs/B,gBACd9mD,EAAKgzE,QAAUxrD,EAAMwrD,QACrBhzE,EAAKizE,QAAUzrD,EAAMyrD,QACrBjzE,EAAK61C,OAAS71C,EAAK2lE,aAAc,IAAIn+C,EAAMquB,6BAA6B06B,GAAe,OAyBzF,OAlCwD13E,OAY7Co7E,2BAAV,SACCxtB,EAAemI,EACfslB,EAAqBC,EACrBnB,EAAiBC,GAEjB,IAAMQ,EAAkE,IAAhD7kB,EAAQ7H,QAAUnB,GAAmBgD,OACvD8qB,EAAoE,IAAjD9kB,EAAQ7H,QAAUnB,GAAmB+C,QACxD12C,IAAO,GAAM+gE,IAAYS,EAAehtB,EAAM14C,KAAK5O,EAAIyvD,EAAQ7gD,KAAK5O,GACpEgT,IAAO,GAAM8gE,IAAYS,EAAgBjtB,EAAM14C,KAAK3O,EAAIwvD,EAAQ7gD,KAAK3O,GACrEoL,EAAI9H,KAAKgoD,IAAKwpB,GAAgBxxE,KAAKgoD,IAAKypB,GACxCvyE,EAAIc,KAAK+nD,IAAKypB,GAAgBxxE,KAAK+nD,IAAK0pB,GACxCzmE,EAAW+4C,EAAMzxC,UAAUtH,SAC3BkjE,EAA2E,IAArDhiB,EAAQ7H,QAAUnB,GAAmBwC,YAC3DyoB,EAA2E,IAArDjiB,EAAQ7H,QAAUnB,GAAmByC,YAC3DyoB,EAAiBF,EAAmBljE,EAASvO,EAAIyvD,EAAQzvD,EACzD4xE,EAAiBF,EAAmBnjE,EAAStO,EAAIwvD,EAAQxvD,EAC/DwvD,EAAQ7H,SAAWnB,GAAmBj5C,SACtCe,EAASrO,IACRyxE,EAAe7+D,EAAKrQ,EAAIuQ,EAAK3H,EAC7BumE,EAAe9+D,EAAKzH,EAAI2H,EAAKvQ,OA/BwBskE,mBCFvD,WAAa1+C,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmBiD,uBACjC7oD,EAAK8mD,OAASlB,GAAmBj5C,WAkBnC,OArBgE9T,OAM/Du7E,oBAAA,SAAS3tB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM2L,EAAS98C,KAAK88C,OAAQ4Q,EAAOvc,GAC7Bl1B,EAAYyxC,EAAMzxC,UAElBk/D,EADwE,IAAnDtlB,EAAQ7H,QAAUnB,GAAmBiD,UACzB7zC,EAAU0xC,SAAWkI,EAAQlI,SACpE1xC,EAAU0xC,SAAW7Q,EACrB+Y,EAAQ7H,SAAWnB,GAAmBiD,SACtC9vD,KAAKs6E,eACJ5sB,EAAOmI,EACPslB,EAAar+B,EACb98C,KAAKi6E,QAASj6E,KAAKk6E,cAjByCgB,mBCC/D,WAAazsD,GAAb,MACC3nB,YAAO2nB,EAAOo+B,GAAmBiD,uBACjC7oD,EAAK8mD,OAASlB,GAAmBj5C,WAkBnC,OArBgE9T,OAM/Dw7E,oBAAA,SAAS5tB,EAAemI,EAAwB1kB,GAC/C,GAAOnxC,KAAK2sE,UAAWjf,EAAOvc,GAAS,CACtC,IAAM2L,EAAS98C,KAAK88C,OAAQ4Q,EAAOvc,GAC7Bl1B,EAAYyxC,EAAMzxC,UAElBk/D,EADwE,IAAnDtlB,EAAQ7H,QAAUnB,GAAmBiD,UACzB7zC,EAAU0xC,SAAWkI,EAAQlI,SACpE1xC,EAAU0xC,SAAWwtB,EAAcr+B,EACnC+Y,EAAQ7H,SAAWnB,GAAmBiD,SACtC9vD,KAAKs6E,eACJ5sB,EAAOmI,EACPslB,EAAal/D,EAAU0xC,SACvB3tD,KAAKi6E,QAASj6E,KAAKk6E,cAjByCgB,KVLhE,SAAY7B,GACXA,2BACAA,2BAFD,CAAYA,KAAAA,QWkBZ,IClBYkC,kBDwBX,WACCnD,EAA+CzL,EAC/CsN,EAAiBC,EAAiBp9B,GAFnC,MAICh2C,YAAOonE,GAAsBhY,UAAWyW,EAAWuK,GAA+BsE,OAAQpD,gBAC1FnxE,EAAKgzE,QAAUA,EACfhzE,EAAKizE,QAAUA,EACfjzE,EAAK61C,OAASA,IAyChB,OArDSh9C,OAeR27E,qBAAA,SAAUhtD,GACT,OACC3nB,YAAMqmD,mBAAU1+B,IACfA,aAAiBgtD,GAClBz7E,KAAKi6E,UAAYxrD,EAAMwrD,SACvBj6E,KAAKk6E,UAAYzrD,EAAMyrD,SACvBl6E,KAAK88C,SAAWruB,EAAMquB,QAIxB2+B,sBAAA,WACC,OAAQz7E,KAAKo4E,SACb,KAAKiB,GAAqCqC,SACzC,OAAO,IAAIL,GAA4Cr7E,MACxD,KAAKq5E,GAAqCsC,SACzC,OAAO,IAAIL,GAA4Ct7E,QAIzDy7E,sBAAA,SAAWlvB,GACV,IAAMwiB,EAAcxiB,EAAQ/+B,IAAKxtB,KAAK2sE,WAChCoM,EAAWxsB,EAAQ/+B,IAAKxtB,KAAK88C,QACnC,OAAOyP,EAAQ/+B,IACd,IAAIxtB,KAAKwS,SAAQu8D,MAAe/uE,KAAKquE,YAAWruE,KAAKo4E,YAAWp4E,KAAKi6E,YAAWj6E,KAAKk6E,YAAWnB,QAI3F0C,cAAP,SACCrqB,EACA7E,GAEA,IAAMogB,EAAY8B,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WAClEgS,EAAS2xB,GAAmBO,WAAY,EAAG5d,EAAY7E,EAAQzhB,WACrE,OAAO,IAAI2wC,EACVrqB,EAAY,GAAKub,EACjBvb,EAAY,GAAKA,EAAY,GAAKtU,OAlD5Bu7B,kBE0BT,cAyEA,OAxEQuD,eAAP,SAAqBnvB,GACpB,IACC,IAAMC,EAAS70B,KAAK80B,MAAOF,GAC3B,GAAIjR,GAAakR,GAAW,CAC3B,IAAK,IAAInrD,EAAI,EAAGC,EAAOkrD,EAAOhsD,OAAQa,EAAIC,IAAQD,EACjD,IAAMuC,EAAc4oD,EAAQnrD,IAC3B,OAAO,KAGT,GAAI,GAAKmrD,EAAOhsD,OACf,OAAOgsD,EAGT,OAAO,KACN,MAAO92C,GACR,OAAO,OAIFgmE,cAAP,SAAoB5jD,EAAYu0B,GAC/B,IACMwF,EADUxF,EAAQqB,QACD9xC,IAAKkc,GAC5B,GAAc,MAAV+5B,EACH,OAAOA,EAGR,IACMtF,EADYF,EAAQzhB,UACE9S,GAC5B,GAAgB,MAAZy0B,EAAmB,CACtB,IAAM2E,EAAapxD,KAAK67E,aAAcpvB,GACtC,GAAkB,MAAd2E,EACH,OAAQA,EAAY,IACpB,KAAK8c,GAAsBoJ,UAC1B,OAAOC,GAA0B1d,YAAazI,EAAY7E,GAC3D,KAAK2hB,GAAsBQ,MAC1B,OAAOC,GAAuB9U,YAAazI,EAAY7E,GACxD,KAAK2hB,GAAsB+B,aAC1B,OAAQ7e,EAAY,IACnB,KAAKod,GAAmCsN,gBACxC,KAAKtN,GAAmCpB,MACxC,KAAKoB,GAAmCW,MACvC,OAAOe,GAA6BrW,YAAazI,EAAY7E,GAC9D,KAAKiiB,GAAmCuD,KACvC,OAAOD,GAAiCjY,YAAazI,EAAY7E,GAClE,KAAKiiB,GAAmC2C,WACvC,OAAOD,GAAuCrX,YAAazI,EAAY7E,GAE1E,KAAK2hB,GAAsB2E,YAC1B,OAAOC,GAA4BjZ,YAAazI,EAAY7E,GAC7D,KAAK2hB,GAAsBkE,cAC1B,OAAOC,GAA8BxY,YAAazI,EAAY7E,GAC/D,KAAK2hB,GAAsBgF,WAC1B,OAAOC,GAA2BtZ,YAAazI,EAAY7E,GAC5D,KAAK2hB,GAAsByI,KAC1B,OAAOC,GAAsB/c,YAAazI,EAAY7E,GACvD,KAAK2hB,GAAsBhY,UAC1B,OAAQ9E,EAAY,IACpB,KAAK8lB,GAA+BqB,KACnC,OAAOC,GAA+B3e,YAAazI,EAAY7E,GAChE,KAAK2qB,GAA+B8D,OACnC,OAAOC,GAAiCphB,YAAazI,EAAY7E,GAClE,KAAK2qB,GAA+BsE,OACnC,OAAOC,GAAiC5hB,YAAazI,EAAY7E,GAElE,MACD,KAAK2hB,GAAsB+H,KAC1B,OAAOC,GAAsBrc,YAAazI,EAAY7E,IAIzD,OAAO,IAAIgrB,GAA2Bb,GAA8BU,KAAM,wBCxH5E,cA4BA,OAzBQ2E,iBAAP,SAAuBC,GACtB,IAAMC,EAAgBF,EAAoBE,cACpCC,EAAqBD,EAAeD,GAC1C,GAA0B,MAAtBE,EACH,OAAIA,aAA8BC,iBAC1B7wC,QAAQC,QAAS2wC,GAEjBA,EAGR,IAAM15E,EAAS,IAAI8oC,SAA0B,SAAEC,EAAS6wC,GACvD,IAAMC,EAAe9kE,SAAS+hB,cAAe,OAC7C+iD,EAAa1wC,OAAS,WACrBswC,EAAeD,GAAYK,EAC3B9wC,EAAS8wC,IAEVA,EAAa7hC,QAAU6hC,EAAa7wC,QAAU,WAC7C4wC,KAEDC,EAAaxjD,IAAMmjD,KAGpB,OADAC,EAAeD,GAAYx5E,EACpBA,GAxBFu5E,gBAA+F,WCuBtG,SAAajxC,GACZ9qC,KAAK8qC,UAAYA,EACjB9qC,KAAK4tD,QAAU,IAAIvvB,IACnBr+B,KAAK+2D,MAAQ,IAAI14B,IACjBr+B,KAAKo3D,QAAU,IAAI/4B,IACnBr+B,KAAKm6D,KAAO,IAAI97B,IAChBr+B,KAAK45D,UAAY,IAAIv7B,IACrBr+B,KAAKm4D,OAAS,IAAI95B,IAClBr+B,KAAKw6D,OAAS,IAAIn8B,IAClBr+B,KAAK06D,QAAU,IAAIr8B,IACnBr+B,KAAKy7D,MAAQ,IAAIp9B,IACjBr+B,KAAK46D,aAAe,IAAIv8B,IACxBr+B,KAAKs8E,WAAa,IAAIj+C,mBCtBxB,cA6HA,OA5HQk+C,UAAP,SACC7gE,EAA8B6wC,GAE9B,IAAMiwB,EAAoB/yB,GAAqB/tC,EAAM,IACrD,OAAyB,MAArB8gE,EACIA,EAAmB9gE,EAAM6wC,GAE1B,MAGDgwB,cAAP,SACC7gE,EAA8B6wC,EAA+C/pD,GAE7EA,EAAOw1B,GAAKu0B,EAAQzhB,UAAWpvB,EAAM,KAAS,GAC9ClZ,EAAOyZ,UAAUtH,SAASrO,IAAKoV,EAAM,GAAKA,EAAM,IAChDlZ,EAAOyZ,UAAU0xC,SAAWjyC,EAAM,GAClClZ,EAAOyZ,UAAUQ,KAAKnW,IAAKoV,EAAM,GAAKA,EAAM,IAC5ClZ,EAAOyZ,UAAUo3C,MAAM/sD,IAAKoV,EAAM,IAAMA,EAAM,KAC9ClZ,EAAOwS,KAAK1O,IAAK0yE,GAAYI,aAAc19D,EAAM,IAAOs9D,GAAYI,aAAc19D,EAAM,KACxFlZ,EAAOupB,KAAK8tC,YAAan+C,EAAM,GAAK6wC,GACpC/pD,EAAOsrD,OAAO+L,YAAan+C,EAAM,GAAK6wC,GACtC/pD,EAAO4d,OAASmsC,EAAQzhB,UAAWpvB,EAAM,MAAU,GACnDlZ,EAAOwmB,KAAK6wC,YAAan+C,EAAM,IAAM6wC,GACrC/pD,EAAOosD,IAAIiL,YAAan+C,EAAM,IAAM6wC,GACpC/pD,EAAOyB,OAASyX,EAAM,IACtBlZ,EAAOuB,OAAS2X,EAAM,IACtBlZ,EAAO+b,eAAgC,EAAb7C,EAAM,KAChClZ,EAAOkxD,eAAgC,EAAbh4C,EAAM,KAChClZ,EAAOkU,SAAa,GAAKgF,EAAM,IAAO6wC,EAAQzhB,UAAWpvB,EAAM,UAASnZ,EACxEC,EAAOsc,MAAU,GAAKpD,EAAM,IAAO6wC,EAAQzhB,UAAWpvB,EAAM,UAASnZ,EAGrE,IAAIk6E,EAAyC,KACvCtpB,EAAqBz3C,EAAM,IACjC,GAAI,EAAIy3C,EAAmBzyD,OAAS,CAEnC,IADA,IAAMg8E,EAAqB,GAClBn7E,EAAI,EAAGC,EAAO2xD,EAAmBzyD,OAAQa,EAAIC,IAAQD,EAAI,CACjE,IAAMo7E,EAAkBxpB,EAAoB5xD,GACtCq7E,EAAiBL,EAAmBM,QAASF,EAAiBpwB,GAC9C,MAAlBqwB,GACHF,EAAmBl8E,KAAMo8E,GAG3BH,EAAkBnxC,QAAQtB,IAAK0yC,GAAqBn7B,MAAK,SAAE9gC,GAC1Dje,EAAOie,SAAWA,EAClB,IAAK,IAAIlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIP,OAASwB,EAIxB,OAFAA,EAAOowD,yBACPpwD,EAAOmb,UACAnb,KAKT,IAAMs6E,EAAoBphE,EAAM,IAChC,IAASna,EAAI,EAAGC,EAAOs7E,EAAkBp8E,OAAQa,EAAIC,IAAQD,EAC5DiB,EAAOuvD,OAAOvkC,IAAKouD,GAA8B/hB,YAAaijB,EAAmBv7E,GAAKgrD,IAIvF,IAAMwwB,EAAarhE,EAAM,IACzB,GAAI,GAAKqhE,GAAcA,EAAaxwB,EAAQzhB,UAAUpqC,OAAS,CAC9D,IAAMuwD,EAAW1E,EAAQzhB,UAAWiyC,GAChCl6E,EAAcouD,KACjBzuD,EAAOyuD,SAAWD,GAAgBgsB,oBAAqB/rB,IAKzD,IAAIgsB,EAAsC,KACpCC,EAAUxhE,EAAM,IACtB,GAAI,GAAKwhE,GAAWA,EAAU3wB,EAAQzhB,UAAUpqC,OAAS,CACxD,IAAMm8D,EAAWtQ,EAAQzhB,UAAWoyC,GAChCr6E,EAAcg6D,KACjBogB,EAAelB,GAAoBoB,eAAgBtgB,GAAWtb,MAAK,SAAE86B,GAEpE,OADA75E,EAAOqvB,MAAQwqD,EACR75E,MAMV,OAAuB,MAAnBi6E,EACiB,MAAhBQ,EACI3xC,QAAQtB,IAAI,CAAEyyC,EAAiBQ,IAAgB17B,MAAK,WAC1D,OAAO/+C,KAGDi6E,EAGY,MAAhBQ,EACIA,EAEAz6E,GAKH+5E,iBAAP,SAAuBa,EAAuCtyC,GAG7D,IAFA,IAAMyhB,EAAU,IAAI8wB,GAAsCvyC,GACpDwyC,EAA0C,GACvC/7E,EAAI,EAAGC,EAAO47E,EAAY18E,OAAQa,EAAIC,IAAQD,EAAI,CAC1D,IAAM6vD,EAAagsB,EAAa77E,GAC1BmsD,EAAQ6uB,EAAmBM,QAASzrB,EAAY7E,GACtD,GAAa,MAATmB,EAQH,OAPI,EAAI4vB,EAAO58E,QACd4qC,QAAQtB,IAAKszC,GAAS/7B,MAAM,SAAEC,GAC7B,IAAK,IAAIpvC,EAAI,EAAGC,EAAOmvC,EAAS9gD,OAAQ0R,EAAIC,IAAQD,EACnDovC,EAAUpvC,GAAIuV,aAIV,KAGR21D,EAAO98E,KAAMktD,GAEd,OAAI,EAAI4vB,EAAO58E,OACP4qC,QAAQtB,IAAKszC,GAEd,yBC9HT,cASA,OARQC,cAAP,SACC7hE,EAA8B6wC,GAE9B,IAAMmB,EAAQ,IAAI0Q,GAAWxU,GAAkBl9C,MAAO,GAAI,EAAGg9C,GAAkBrrC,MACzE7b,EAAS+5E,GAAmB1iB,YAAan+C,EAAM6wC,EAASmB,GAE9D,OADAA,EAAMwD,OAAO2I,YAAan+C,EAAM,IAAM6wC,GAC/B/pD,QCRIg7E,GAAe,WAC3B7zB,GAAiBvG,GAAW+a,KAAQ4N,GAAmB5rE,OACvDspD,GAAqBrG,GAAW+a,KAAQof,GAAW1jB,4BCJpD,4DAgQA,OAhQ0C/5D,OACzC29E,iBAAA,SAAM/vB,GACL5mD,YAAMwZ,eAAMotC,GACZ,IAAM2Q,EAASr+D,KAAKq+D,OACdC,EAAUt+D,KAAK4+D,aACfL,EAAUv+D,KAAK8+D,YAGrBT,EAAO8L,eAAe7oE,SACtB,IAAMmgE,EAAYpD,EAAOoD,UACnBgJ,EAAe,EAAVnM,EACXmD,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EAEvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EAEvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EAEvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EAEvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EAEvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EAGvBpM,EAAOr0C,YAAY1oB,SACnB,IAAMqH,EAAU01D,EAAO11D,QACjBD,EAAe,EAAV61D,EAqCX,OApCA51D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAE/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAE/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAE/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAG/Bt+D,KAAK0qE,WAEL1qE,KAAKsB,OAAQosD,GACN1tD,MAGRy9E,mBAAA,SAAQ/vB,GACP,IAAM2Q,EAASr+D,KAAKq+D,OACpBr+D,KAAK09E,kBAAmBrf,EAAQ3Q,GAChC1tD,KAAKkrE,YAAa7M,EAAQ3Q,GAC1B1tD,KAAK29E,gBAAiBtf,EAAQ3Q,GAC9B1tD,KAAK49E,cAAevf,EAAQ3Q,GAC5B1tD,KAAKwxB,WAAY6sC,EAAQ3Q,IAGhB+vB,8BAAV,SAA6Bpf,EAAsB3Q,GAClD,IAAM14C,EAAO04C,EAAM14C,KACbs2C,EAAQt2C,EAAK5O,EACbmlD,EAAQv2C,EAAK3O,EACbs4D,EAAmB3+D,KAAK6qE,mBAAoBnd,GAC5Cid,EAAkBrf,IAAUtrD,KAAKsrD,OAASC,IAAUvrD,KAAKurD,MACzDuf,EAAuB9qE,KAAK2+D,mBAAqBA,EACjD7Q,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MACrBy6E,EAAoB79E,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,EACnF,GAAI0yC,GAAiBG,GAAsB+S,EAAkB,CAC5D79E,KAAKsrD,MAAQA,EACbtrD,KAAKurD,MAAQA,EACbvrD,KAAK2+D,iBAAmBA,EAGxB3+D,KAAKi4B,YAAczwB,IAGnBxH,KAAKijE,sBAAwBz7D,IAE7B62D,EAAOv0C,aAAaxoB,SAWpB,IAAMmQ,EAAIguD,EAAcxnC,EAClB07B,EAAa,GAARrI,GAAe,GAAKA,GAAS75C,GAAKA,GACvCmiD,EAAa,GAARrI,GAAe,GAAKA,GAAS95C,GAAKA,GACvCu+C,EAAoBtC,EAAMzxC,UAAU+zC,kBACpC7oC,EAAOnnB,KAAKq+D,OAAOl3C,KACzBA,EAAK7gB,KAAMqtD,GAAKC,GAChB5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM7e,EAAK6e,EAAK/gB,EACVoC,EAAK2e,EAAK9gB,EAChB8gB,EAAK7gB,IAAK,GAAIstD,GACd5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM5e,EAAK4e,EAAK/gB,EACVqC,EAAK0e,EAAK9gB,EACV6S,EAAK3Q,EAAKD,EACV8Q,EAAK3Q,EAAKD,EACVs1E,EAAK9tB,EAAkBkE,GACvB6pB,EAAK/tB,EAAkBmE,GACvB6pB,EAAKF,GAAMA,EAAKv1E,GAChB01E,EAAKF,GAAMA,EAAKt1E,GAChBsB,EAAK+zE,EAAK5kE,EACVjP,EAAK8zE,EAAK3kE,EAGhBpZ,KAAKo/D,eAAiBp/D,KAAKylE,WAAYn9D,EAAIE,EAAID,EAAIE,GACnDzI,KAAKq/D,eAAiBr/D,KAAKylE,WAAYn9D,EAAIE,EAAIuB,EAAIE,GAGnD,IAAMq0D,EAAUt+D,KAAK4+D,aACfl1D,EAAW20D,EAAO30D,SAClBtB,EAAe,EAAVk2D,EACX50D,EAAUtB,EAAM,GAAME,EACtBoB,EAAUtB,EAAM,GAAMI,EACtBkB,EAAUtB,EAAM,GAAMG,EACtBmB,EAAUtB,EAAM,GAAMK,EACtBiB,EAAUtB,EAAM,GAAMG,EAAK2Q,EAC3BxP,EAAUtB,EAAM,GAAMK,EAAK2Q,EAE3B1P,EAAUtB,EAAM,GAAM2B,EACtBL,EAAUtB,EAAM,GAAM6B,EACtBP,EAAUtB,EAAM,GAAM01E,EACtBp0E,EAAUtB,EAAM,GAAM21E,EACtBr0E,EAAUtB,EAAK,IAAO01E,EAAK5kE,EAC3BxP,EAAUtB,EAAK,IAAO21E,EAAK3kE,EAE3B1P,EAAUtB,EAAK,IAAO41E,EAAK9kE,EAC3BxP,EAAUtB,EAAK,IAAO61E,EAAK7kE,EAC3B1P,EAAUtB,EAAK,IAAO41E,EACtBt0E,EAAUtB,EAAK,IAAO61E,EACtBv0E,EAAUtB,EAAK,IAAO41E,EAAK9kE,EAC3BxP,EAAUtB,EAAK,IAAO61E,EAAK7kE,IAInBqkE,4BAAV,SAA2Bpf,EAAsB3Q,GAChD,IAAMI,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MAC3B,GAAIpD,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,EAAc,CAC1Ej4B,KAAKi4B,YAAcA,EACnBj4B,KAAKy/D,YAAcA,EACnBpB,EAAOwL,WAAWvoE,SAClB+8D,EAAOyL,gBAAgBxoE,SAEvB,IAAM6lB,EAAOk3C,EAAO6f,SACpBl+E,KAAKm+E,SAAUn+E,KAAKo/D,eAAgBnnC,EAAa9Q,GACjD,IAAM85C,EAAM95C,EAAM,GACZg6C,EAAMh6C,EAAM,GACZk6C,EAAMl6C,EAAM,GAElBnnB,KAAKm+E,SAAUn+E,KAAKq/D,eAAgBpnC,EAAa9Q,GACjD,IAAM+5C,EAAM/5C,EAAM,GACZi6C,EAAMj6C,EAAM,GACZm6C,EAAMn6C,EAAM,GAEZm3C,EAAUt+D,KAAK4+D,aACfJ,EAASx+D,KAAK6+D,YAAc7+D,KAAKujE,gBACvCvjE,KAAKo+E,WAAY/f,EAAQC,EAASE,EAAQyC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,KAI3Dmc,0BAAV,SAAyBpf,EAAsB3Q,GAC9C,IAAMhnD,EAAU1G,KAAK24C,UAAW+U,GAC1BiS,EAAqB3/D,KAAK8kE,qBAAsBp+D,GACtD,GAAIA,IAAY1G,KAAK0G,SAAWi5D,IAAuB3/D,KAAK2/D,mBAAqB,CAChF3/D,KAAK0G,QAAUA,EACf1G,KAAK2/D,mBAAqBA,EAE1B,IAAMz1D,EAAalK,KAAKymE,aAAc//D,GAChC4B,EAAK4B,EAAW5B,GAChBC,EAAK2B,EAAW3B,GAChBsB,EAAKK,EAAWL,GAChBE,EAAKG,EAAWH,GAChBvB,EAAK0B,EAAW1B,GAChBC,EAAKyB,EAAWzB,GAChBuB,EAAKE,EAAWF,GAChBC,EAAKC,EAAWD,GAGtBo0D,EAAOt0C,SAASzoB,SAChB,IAAMsH,EAAMy1D,EAAOz1D,IAEbkjE,EAAgB,EADN9rE,KAAK4+D,aAErBh2D,EAAKkjE,EAAO,GAAMxjE,EAClBM,EAAKkjE,EAAO,GAAMtjE,EAClBI,EAAKkjE,EAAO,GAAM,IAAQxjE,EAAKC,GAC/BK,EAAKkjE,EAAO,GAAM,IAAQtjE,EAAKC,GAC/BG,EAAKkjE,EAAO,GAAMvjE,EAClBK,EAAKkjE,EAAO,GAAMrjE,EAElBG,EAAKkjE,EAAO,GAAM,IAAQxjE,EAAKyB,GAC/BnB,EAAKkjE,EAAO,GAAM,IAAQtjE,EAAKyB,GAC/BrB,EAAKkjE,EAAO,GAAM,IAAQxjE,EAAKuB,GAC/BjB,EAAKkjE,EAAO,GAAM,IAAQtjE,EAAKwB,GAC/BpB,EAAKkjE,EAAM,IAAO,IAAQvjE,EAAKsB,GAC/BjB,EAAKkjE,EAAM,IAAO,IAAQrjE,EAAKuB,GAE/BpB,EAAKkjE,EAAM,IAAO/hE,EAClBnB,EAAKkjE,EAAM,IAAO7hE,EAClBrB,EAAKkjE,EAAM,IAAO,IAAQ/hE,EAAKF,GAC/BjB,EAAKkjE,EAAM,IAAO,IAAQ7hE,EAAKD,GAC/BpB,EAAKkjE,EAAM,IAAOjiE,EAClBjB,EAAKkjE,EAAM,IAAO9hE,OA7PqBy5D,kBCC1C,cAsBA,OArBQ4a,SAAP,SACChgB,EAAsB3Q,EACtB4Q,EAAiBC,EACjBG,GAEA,IAAMsN,EAASjK,GAAoB2B,aAAchW,EAAO2Q,EAAOsF,WACzD3B,EAAUgK,EAAOnN,YACjBoD,EAAU+J,EAAOjN,WACjBP,EAAS,EAAIwD,EACbvD,EAAS,EAAIwD,EACnB,OAAI3D,EAAUE,EAASH,EAAO4N,gBAAkB1N,EAAUE,EAASJ,EAAO6N,cAClE,IAAIuR,GACVpf,EACAC,EAASC,EACTyD,EAASC,EACTzD,EAAQC,EACRC,GACCp+C,KAAMotC,GAEF,0BCrBR,WAAal7C,uBAAAA,EAAO4wC,GAAWk7B,QAC9Bx3E,YAAO0L,SAwCT,OA1CkC1S,OAKjCy+E,kBAAA,WACC,OAAO,IAAIA,GAAej9B,KAAMthD,OAGjCu+E,wBAAA,SAAan4E,EAAWC,EAAWouD,EAAYC,GAC9C,GAAI5tD,YAAM0tD,0BAAiBpuD,EAAGC,EAAGouD,EAAIC,GAAO,CAC3C,IAAM3oC,EAAO/rB,KAAK+rB,KACZ+hC,EAAS9tD,KAAK8tD,OACpB,GAAI/hC,EAAK4qC,QAKR,IAJM9sD,EAAKzD,EAAIA,IAGTo4E,EAAM9pB,EAAKA,IAFX1qD,EAAK3D,EAAIA,IACTo4E,EAAMhqB,EAAKA,IAEUgqB,EAAMD,EAChC,OAAO,MAEF,CACN,IAAMvmD,EAAc61B,EAAO5qD,MAC3B,GAAI4qD,EAAO6I,QAAU,EAAI1+B,EAAc,CACtC,IAOOwmD,EACAD,EARD30E,EAAKzD,EAAIA,EACT4D,EAAK3D,EAAIA,EACTq4E,EAAK/0E,KAAKG,IAAK,EAAK2qD,EAAKx8B,GACzB0mD,EAAKh1E,KAAKG,IAAK,EAAK4qD,EAAKz8B,GACzB2mD,EAAMF,EAAKA,EACXG,EAAMF,EAAKA,EACjB,GAAIC,EAAMC,GAAOh1E,EAAKg1E,EAAM70E,EAAK40E,GAG5B/0E,GADE20E,EAAM9pB,EAAKA,GACF1qD,GAFTy0E,EAAMhqB,EAAKA,IAEUgqB,EAAMD,EAChC,OAAO,IAMZ,OAAO,MAxCyB1iB,kBCElC,cAUA,OATQgjB,cAAP,SACCpjE,EAA8B6wC,GAE9B,OAAOgwB,GAAmB1iB,YAAan+C,EAAM6wC,EAASuyB,EAAc3+E,WAG9D2+E,SAAP,WACC,OAAO,IAAIP,SCPAQ,GAAkB,WAC9Bp1B,GAAiBvG,GAAWk7B,QAAWD,GAAsBl+E,OAC7DspD,GAAqBrG,GAAWk7B,QAAWQ,GAAcjlB,4BCFzD,WAAawE,EAAsBC,EAAiBC,UACnDz3D,YAAOu3D,EAAQC,EAASC,EAAS,EAAG,EAAG,SAYzC,OAdyCz+D,OAKxCk/E,iBAAA,SAAMtxB,GAGL,OAFA5mD,YAAMwZ,eAAMotC,GACZ1tD,KAAK0G,QAAUgnD,EAAMhnD,SAAW2lB,UAAQyzC,MACjC9/D,MAGRg/E,mBAAA,SAAQtxB,QAXgCkS,kBCDzC,cAUA,OATQqf,SAAP,SACC5gB,EAAsB3Q,EACtB4Q,EAAiBC,GAEjB,OAAO,IAAIygB,GACV3gB,EACAC,EAASC,GACRj+C,KAAMotC,uBCJT,WAAa1sD,GACZhB,KAAK6qD,GAAU7pD,EAqFjB,OAlFCxB,sBAAI0/E,0BAAJ,WACC,IAAMz+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,QAAI,EAAIA,EAAS/f,SACT+f,EAAUA,EAAS/f,OAAS,GAAIqrB,KAAK4qC,YAK9C,SAAYA,GAEX,IADA,IAAMl2C,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIwqB,KAAK4qC,OAASA,mCAI9Bn3D,sBAAI0/E,yBAAJ,WACC,IAAMz+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIqrB,KAAK7pB,MAEtC,cAGR,SAAWA,GAEV,IADA,IAAMue,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIwqB,KAAK7pB,MAAQA,mCAI7B1C,sBAAI0/E,yBAAJ,WACC,IAAMz+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIqrB,KAAK3pB,MAEtC,OAGR,SAAWA,GAEV,IADA,IAAMqe,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIwqB,KAAK3pB,MAAQA,mCAI7B88E,iBAAA,SAAMp+E,GAEL,IADA,IAAM2f,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIwqB,KAAKu1B,KAAMxgD,IAI3Bo+E,gBAAA,SAAKvoB,EAAiBz0D,EAAeE,GAEpC,IADA,IAAMqe,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIwqB,KAAKzlB,IAAKqwD,EAAQz0D,EAAOE,IAIzC88E,kBAAA,WACC,OAAO,IAAIA,EAAuBl/E,KAAK6qD,KAGxCq0B,qBAAA,WACC,IAAMz+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIqrB,KAAK8hC,WAEtC,CACN8I,QAAQ,EACRz0D,MAAO,SACPE,MAAO,IAIT88E,sBAAA,SAAW3yB,GACV,OAAQ,GAGT2yB,wBAAA,SAAap+E,EAAgByrD,wBClF7B,WAAavrD,GACZhB,KAAK6qD,GAAU7pD,EAuIjB,OApICxB,sBAAI2/E,0BAAJ,WACC,IAAM1+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,GAAI,EAAIA,EAAS/f,OAAS,CACzB,IAAMwwD,EAASzwC,EAAUA,EAAS/f,OAAS,GAAIwwD,OAC/C,GAAc,MAAVA,EACH,OAAOA,EAAOxwD,OAGhB,OAAO,mCAGRlB,sBAAI2/E,sBAAJ,WACC,IAAM1+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,GAAI,EAAIA,EAAS/f,OAAS,CACzB,IAAMwwD,EAASzwC,EAAUA,EAAS/f,OAAS,GAAIwwD,OAC/C,GAAc,MAAVA,EACH,OAAOA,EAAOl5B,GAGhB,OAAO,mCAGRx4B,sBAAI2/E,0BAAJ,WACC,IAAM1+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,GAAI,EAAIA,EAAS/f,OAAS,CACzB,IAAMwwD,EAASzwC,EAAUA,EAAS/f,OAAS,GAAIwwD,OAC/C,GAAc,MAAVA,EACH,OAAOA,EAAOnF,OAGhB,MAAO,QAGR,SAAYA,GAEX,IADA,IAAMtrC,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAM2vD,EAASzwC,EAAUlf,GAAI2vD,OACf,MAAVA,IACHA,EAAOnF,OAASA,qCAKnBvsD,sBAAI2/E,4BAAJ,WACC,IAAM1+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,GAAI,EAAIA,EAAS/f,OAAS,CACzB,IAAMwwD,EAASzwC,EAAUA,EAAS/f,OAAS,GAAIwwD,OAC/C,GAAc,MAAVA,EACH,OAAOA,EAAOlF,SAGhB,MAAO,QAGR,SAAcA,GAEb,IADA,IAAMvrC,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAM2vD,EAASzwC,EAAUlf,GAAI2vD,OACf,MAAVA,IACHA,EAAOlF,SAAWA,qCAKrBxsD,sBAAI2/E,yBAAJ,WACC,IAAM1+D,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,GAAI,EAAIA,EAAS/f,OAAS,CACzB,IAAMwwD,EAASzwC,EAAUA,EAAS/f,OAAS,GAAIwwD,OAC/C,GAAc,MAAVA,EACH,OAAOA,EAAOlkC,MAGhB,OAAO08B,GAAkBrrC,UAG1B,SAAW2O,GAEV,IADA,IAAMvM,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAM2vD,EAASzwC,EAAUlf,GAAI2vD,OACf,MAAVA,IACHA,EAAOlkC,MAAQA,qCAKlBmyD,iBAAA,SAAM3uE,GAEL,IADA,IAAMiQ,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAM2vD,EAASzwC,EAAUlf,GAAI2vD,OACf,MAAVA,GACHA,EAAO5P,KAAM9wC,GAGf,OAAOxQ,MAGRm/E,gBAAA,SAAKpzB,EAAmBC,EAAqBh/B,GAE5C,IADA,IAAMvM,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAM2vD,EAASzwC,EAAUlf,GAAI2vD,OACf,MAAVA,GACHA,EAAO5qD,IAAKylD,EAAQC,EAAUh/B,GAGhC,OAAOhtB,MAGRm/E,kBAAA,SAAOn+E,GACN,OAAO,IAAIm+E,EAAmBn+E,IAG/Bm+E,qBAAA,SAAUljE,GAET,IADA,IAAMwE,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAM2vD,EAASzwC,EAAUlf,GAAI2vD,OAC7B,GAAc,MAAVA,EACH,OAAOA,EAAOkuB,SAAUnjE,GAG1B,MAAO,IAGRkjE,sBAAA,SAAW5yB,GAEV,IADA,IAAM9rC,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAM2vD,EAASzwC,EAAUlf,GAAI2vD,OAC7B,GAAc,MAAVA,EACH,OAAOA,EAAO3D,UAAWhB,GAG3B,OAAQ,WCtIT,WACCvsD,KAAKqzB,eAAiB,IAAIkjB,SAC1Bv2C,KAAKgwD,kBAAoB,IAAIzZ,SAC7Bv2C,KAAKq/E,+BAAiC,IAAI9oC,SAC1Cv2C,KAAK2tD,SAAW,EAChB3tD,KAAKgV,KAAO,IAAI4S,uBCRlB,cA4FA,OA3FQ03D,UAAP,SAAgB5xB,GACf,IAAM6xB,EAAS7xB,EAAM6xB,OAAU7xB,EAAM6xB,QAAU,IAAIC,GAGnD9xB,EAAM7mC,kBACN,IAAM7lB,EAAS0sD,EAAM1sD,OACjBA,aAAkByxD,GACrBzxD,EAAOib,UAAU+zC,kBAAkBc,OAAOyuB,EAAOF,gCAAgCI,SAEjFF,EAAOF,+BAA+BK,WAEvChyB,EAAMzxC,UAAU+zC,kBAAkBc,OAAOyuB,EAAOvvB,mBAGhDuvB,EAAO5xB,SAAWD,EAAMzxC,UAAU0xC,SAGlC4xB,EAAOvqE,KAAKzO,SAAUmnD,EAAM14C,MAG5B04C,EAAMiyB,6BAGAL,WAAP,SAAiB5xB,GAChBA,EAAMkyB,wBAAwB,IAGxBN,QAAP,SAAc5xB,EAAezxC,EAAmB4jE,GAC/C,IAAMN,EAAS7xB,EAAM6xB,OACrB,GAAc,MAAVA,EAAiB,CACpB,IAAMO,EAAoBP,EAAOlsD,eAGjC,GAFAksD,EAAOF,+BAA+BvuB,OAAOgvB,GAC3CC,OAAO9jE,GAAW8jE,OAAOR,EAAOvvB,mBAC9B6vB,EACH7/E,KAAKggF,WAAYtyB,EAAOoyB,OAClB,CACN,IAAM9qE,EAAOuqE,EAAOvqE,KACpBhV,KAAKggF,WAAYtyB,EAAOoyB,EAAmB9qE,EAAK5O,EAAG4O,EAAK3O,MAKpDi5E,aAAP,SAAmB5xB,EAAer6B,EAAwB4sD,EAAaC,GACtExyB,EAAMoB,yBAGN,IAAMrlC,EAAI4J,EAAe5J,EACnBlqB,EAAI8zB,EAAe9zB,EACnBsJ,EAAIwqB,EAAexqB,EACnBvJ,EAAI+zB,EAAe/zB,EACnB40D,EAAK7gC,EAAe6gC,GACpBC,EAAK9gC,EAAe8gC,GAGpBl4C,EAAYyxC,EAAMzxC,UAClBkkE,EAAKx2E,KAAKy2E,OAAOv3E,EAAGvJ,GACpB+gF,EAAK12E,KAAKy2E,OAAO7gF,EAAGkqB,GAC1BxN,EAAU0xC,SAAuB,IAAXwyB,EAAKE,GAG3B,IAAM5jE,EAAmB,IAAX4jE,EAAKF,GACnBlkE,EAAUQ,KAAKnW,IAAImW,EAAMA,GASzB,IAAM42C,EAAQp3C,EAAUo3C,MAClBgC,EAAKhC,EAAMjtD,EACXkvD,EAAKjC,EAAMhtD,EAOjB,GANA4V,EAAUtH,SAASrO,IAClB4tD,GAAMzqC,EAAI4rC,EAAKxsD,EAAIysD,GACnBnB,GAAM50D,EAAI81D,EAAK/1D,EAAIg2D,IAIV,MAAN2qB,GAAoB,MAANC,EAAa,CAC9B,IAAMvsB,EAAKhqD,KAAK+zB,KAAMjU,EAAIA,EAAIlqB,EAAIA,GAC5Bq0D,EAAKjqD,KAAK+zB,KAAM70B,EAAIA,EAAIvJ,EAAIA,GAClCouD,EAAM14C,KAAK1O,IACV0yE,GAAYI,aAAc6G,EAAKtsB,GAC/BqlB,GAAYI,aAAc8G,EAAKtsB,IAKjClG,EAAMsB,0CCnFP,WAAatB,EAAeuyB,EAAYC,GACvClgF,KAAK0tD,MAAQA,EAGb1tD,KAAK4M,KAAO,IAAIgb,QAAOq4D,EAAIC,GAG3B,IAAMlrE,EAAO04C,EAAM14C,KACnBhV,KAAKsgF,UAAY,IAAI14D,QAAO5S,EAAK5O,EAAG4O,EAAK3O,GAGzCrG,KAAKic,UAAY,IAAIs6B,SACrBmX,EAAM7mC,kBACN6mC,EAAMzxC,UAAUoX,eAAey9B,OAAQ9wD,KAAKic,WAoC9C,OAjCCskE,yBAAA,SAAc7yB,GACb,OAAO1tD,KAAK0tD,QAAUA,GAGvB6yB,kBAAA,SAAO7yB,EAAe8yB,EAAeC,GACpCzgF,KAAK4M,KAAKtG,IAAKk6E,EAAOC,GAGtB,IAAMzrE,EAAO04C,EAAM14C,KACnBhV,KAAKsgF,UAAU/5E,SAAUyO,GAGzB04C,EAAM7mC,kBACN6mC,EAAMzxC,UAAUoX,eAAey9B,OAAQ9wD,KAAKic,YAG7CskE,mBAAA,SACC7yB,EAAe8yB,EAAeC,EAC9BC,EAAgBC,GAEhB,IAAMhtB,EAAK6sB,EAAQxgF,KAAK4M,KAAKxG,EACvBwtD,EAAK6sB,EAAQzgF,KAAK4M,KAAKvG,EACvBu6E,EAAY5gF,KAAKsgF,UACjBrkE,EAAYskE,EAAsBM,eACxC5kE,EAAUyjE,WACRK,OAAQ//E,KAAKic,WACb6kE,WAAYJ,GAASC,GACrBrkE,MAAOq3C,EAAIC,GACXktB,WAAYJ,GAASC,GACvBjzB,EAAMiyB,4BACNL,GAAiBU,WAAYtyB,EAAOzxC,EAAW2kE,EAAUx6E,EAAGw6E,EAAUv6E,GACtEqnD,EAAMkyB,wBAAwB,IAtDdW,iBAAyB,IAAIhqC,4BCS9C,WAAav1C,EAA+BoF,EAAWC,GAJ7CrG,QAAoB,IAAI4nB,QACxB5nB,QAAkC,IAAI2yB,YACtC3yB,QAA6B,IAAI2yB,YAG1C3yB,KAAK6qD,GAAU7pD,EACfhB,KAAK+gF,GAAW,GAChB/gF,KAAKgrD,GAAQ,IAAIpjC,QAAOxhB,EAAGC,GA0N7B,OAvNC26E,iBAAA,aAIAxhF,sBAAIwhF,qBAAJ,WACC,OAAOhhF,KAAKgrD,GAAM5kD,OAGnB,SAAOA,GACN,IAAM4O,EAAOhV,KAAKgrD,GAClB,GAAIh2C,EAAK5O,IAAMA,EAAI,CAClB,IAAM66E,EAAKjsE,EAAK5O,EAChB4O,EAAK5O,EAAIA,EACTpG,KAAK0C,SAAUu+E,EAAIjsE,EAAK3O,qCAI1B7G,sBAAIwhF,qBAAJ,WACC,OAAOhhF,KAAKgrD,GAAM3kD,OAGnB,SAAOA,GACN,IAAM2O,EAAOhV,KAAKgrD,GAClB,GAAIh2C,EAAK3O,IAAMA,EAAI,CAClB,IAAM66E,EAAKlsE,EAAK3O,EAChB2O,EAAK3O,EAAIA,EACTrG,KAAK0C,SAAUsS,EAAK5O,EAAG86E,qCAIzBF,gBAAA,SAAK56E,EAAwBC,GAC5B,IAAIhC,GAAY,EACV2Q,EAAOhV,KAAKgrD,GACZi2B,EAAKjsE,EAAK5O,EACV86E,EAAKlsE,EAAK3O,EACP,MAALD,GAAa66E,IAAO76E,IACvB/B,GAAY,EACZ2Q,EAAK5O,EAAIA,GAED,MAALC,GAAa66E,IAAO76E,IACvBhC,GAAY,EACZ2Q,EAAK3O,EAAIA,GAENhC,GACHrE,KAAK0C,SAAUu+E,EAAIC,IAIrBF,kBAAA,WACC,IAAMhsE,EAAOhV,KAAKgrD,GAClB,OAAO,IAAIg2B,EAAuBhhF,KAAK6qD,GAAS71C,EAAK5O,EAAG4O,EAAK3O,IAG9D26E,iBAAA,aAIAA,qBAAA,SAAUj7E,GACT,IAAMK,EAAIL,EAAMK,EACVC,EAAIN,EAAMM,EACV2O,EAAOhV,KAAKgrD,GACZi2B,EAAKjsE,EAAK5O,EACV86E,EAAKlsE,EAAK3O,EAMhB,OALI46E,IAAO76E,GAAK86E,IAAO76E,IACtB2O,EAAK5O,EAAIA,EACT4O,EAAK3O,EAAIA,EACTrG,KAAK0C,SAAUu+E,EAAIC,IAEblhF,MAGRghF,mBAAA,SAAQj7E,GACP,OAAO/F,KAAKgrD,GAAM8F,OAAQ/qD,IAG3Bi7E,mBAAA,SAAQj7E,GACP,OAAO/F,KAAKgrD,GAAMvkD,OAAQV,IAG3Bi7E,gBAAA,WACC,IAAMhgF,EAAShB,KAAK6qD,GACpB7pD,EAAO2+E,4BAGP,IAAMvM,EAAOpzE,KAAKmhF,SAAUnhF,KAAKohF,IAG3BpsE,EAAOhV,KAAKgrD,GAClBh2C,EAAK1O,IAAK8sE,EAAKlwE,MAAOkwE,EAAKzsE,QA2B3B3F,EAAO6lB,kBACP,IAAM5K,EAAYjb,EAAOib,UACnB7V,EAAIgtE,EAAKhtE,EAAiB,GAAbgtE,EAAKlwE,MAClBmD,EAAI+sE,EAAK/sE,EAAkB,GAAd+sE,EAAKzsE,OAClBgO,EAAWsH,EAAUtH,SACrB0e,EAAiBpX,EAAUoX,eAC3B5J,EAAI4J,EAAe5J,EACnBlqB,EAAI8zB,EAAe9zB,EACnBsJ,EAAIwqB,EAAexqB,EACnBvJ,EAAI+zB,EAAe/zB,EACnB+zD,EAAQp3C,EAAUo3C,MACxB1+C,EAASrO,IACRqO,EAASvO,GAAKqjB,EAAIrjB,EAAIyC,EAAIxC,IAAMojB,EAAI4pC,EAAMjtD,EAAIyC,EAAIwqD,EAAMhtD,GACxDsO,EAAStO,GAAK9G,EAAI6G,EAAI9G,EAAI+G,IAAM9G,EAAI8zD,EAAMjtD,EAAI9G,EAAI+zD,EAAMhtD,IAEzDgtD,EAAM/sD,IAAKF,EAAGC,GAGdrG,KAAK+tD,MAAO/sD,EAAOyf,SAAUzgB,KAAK+gF,GAAU/rE,GAG5ChU,EAAO4+E,wBAAwB,IAGtBoB,kBAAV,SAAiBvgE,EAAoB4gE,EAAyBrsE,GAC7D,IAAK,IAAIzT,EAAI,EAAGC,EAAOmI,KAAKC,IAAKy3E,EAAQ3gF,OAAQ+f,EAAS/f,QAAUa,EAAIC,IAAQD,EAAI,CACnF,IAAMmf,EAAQD,EAAUlf,GAClBqT,EAASysE,EAAS9/E,GACxB,IAAIqT,EAAOquC,aAAcviC,GAElB,CACN2gE,EAAQ3gF,OAASa,EACjB,MAHAqT,EAAOm5C,MAAOrtC,EAAO1L,EAAK5O,EAAG4O,EAAK3O,GAMhCoa,EAAS/f,OAAS2gF,EAAQ3gF,SAC7B2gF,EAAQ3gF,OAAS+f,EAAS/f,SAI5BsgF,qBAAA,SAAUx+E,GACT,IACMie,EADSzgB,KAAK6qD,GACIpqC,SACxB,GAAIA,EAAS/f,QAAU,EACtB8B,EAAO4D,EAAI,EACX5D,EAAO6D,EAAI,EACX7D,EAAOU,MAAQ,EACfV,EAAOmE,OAAS,MACV,CACN,IAAM26E,EAAYthF,KAAKuhF,GACjBC,EAAWxhF,KAAKyhF,GACtBhhE,EAAU,GAAIihE,eAAgBJ,GAAW,EAAO9+E,GAChD,IAAK,IAAIjB,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACrCkf,EAAUlf,GAClBmgF,eAAgBJ,GAAW,EAAOE,GACxCh/E,EAAOm/E,QAASH,GAGlB,OAAOh/E,GAGEw+E,qBAAV,SAAoBC,EAAYC,GAC/B,IAAMlgF,EAAShB,KAAK6qD,GACd71C,EAAOhV,KAAKgrD,GACZqI,EAAQryD,EAAOib,UAAUo3C,MAC/BrzD,KAAK4hF,GAAW5gF,EAAOyf,SAAUzgB,KAAK+gF,GAAU/rE,EAAK5O,EAAG4O,EAAK3O,EAAGgtD,EAAMjtD,EAAGitD,EAAMhtD,EAAG46E,EAAIC,GACtFlgF,EAAOg7D,gBAGEglB,eAAV,SACCvgE,EACA4gE,EACA1tB,EAAYC,EACZyB,EAAYC,EACZ2rB,EAAYC,GAEZ,IAAK,IAAI3/E,EAAI,EAAGC,EAAOmI,KAAKC,IAAKy3E,EAAQ3gF,OAAQ+f,EAAS/f,QAAUa,EAAIC,IAAQD,EAAI,CACnF,IAAMmf,EAAQD,EAAUlf,GAExB,KADMqT,EAASysE,EAAS9/E,IACb0hD,aAAcviC,GAElB,CACN2gE,EAAQ3gF,OAASa,EACjB,MAHAqT,EAAOtT,OAAQof,EAAOizC,EAAIC,EAAIyB,EAAIC,GAMpC,IAAS/zD,EAAI8/E,EAAQ3gF,OAAQc,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACpE,IACMqT,EADA8L,EAAQD,EAAUlf,IAClBqT,EAAS5U,KAAK6hF,UAAWnhE,EAAOugE,EAAIC,IACnC5/E,OAAQof,EAAOizC,EAAIC,EAAIyB,EAAIC,GAClC+rB,EAAQ7gF,KAAMoU,GAEXysE,EAAQ3gF,SAAW+f,EAAS/f,SAC/B2gF,EAAQ3gF,OAAS+f,EAAS/f,SAIlBsgF,sBAAV,SAAqBtzB,EAAeuzB,EAAYC,GAC/C,OAAOxzB,EAAM94C,QAAU,IAAI2rE,GAAuB7yB,EAAOuzB,EAAIC,wBCpO9D,WAAal7E,EAAgBI,EAAWC,GAAxC,MACCS,YAAOd,OAAIzD,EAAW6D,EAAGC,gBACzBY,EAAK2F,KAAO,IAAIgb,QAAOxhB,EAAGC,KAW5B,OAhB2CvG,OAQ1CgiF,iBAAA,WACC9hF,KAAK4M,KAAKrG,SAAUvG,MACnBA,KAAagG,MAGf87E,gBAAA,gBAb0C/lB,iCCK1C,WAAa/6D,GACZhB,KAAK6qD,GAAU7pD,EAqIjB,OAlICxB,sBAAIuiF,0BAAJ,WACC,IAAMthE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,QACT+f,EAAUA,EAAS/f,OAAS,GAAIotD,OAAO6I,YAKhD,SAAYA,GAEX,IADA,IAAMl2C,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIusD,OAAO6I,OAASA,mCAIhCn3D,sBAAIuiF,yBAAJ,WACC,IAAMthE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIotD,OAAO5rD,MAExC,cAGR,SAAWA,GAEV,IADA,IAAMue,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIusD,OAAO5rD,MAAQA,mCAI/B1C,sBAAIuiF,yBAAJ,WACC,IAAMthE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIotD,OAAO1rD,MAExC,OAGR,SAAWA,GAEV,IADA,IAAMqe,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIusD,OAAO1rD,MAAQA,mCAI/B5C,sBAAIuiF,yBAAJ,WACC,IAAMthE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIotD,OAAO5qD,MAExC,OAGR,SAAWA,GAEV,IADA,IAAMud,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIusD,OAAO5qD,MAAQA,mCAI/B1D,sBAAIuiF,yBAAJ,WACC,IAAMthE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIotD,OAAO1qD,MAExC,OAGR,SAAWA,GAEV,IADA,IAAMqd,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIusD,OAAO1qD,MAAQA,mCAI/B5D,sBAAIuiF,wBAAJ,WACC,IAAMthE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIotD,OAAOmJ,KAExC,OAGR,SAAUA,GAET,IADA,IAAMx2C,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIusD,OAAOmJ,KAAOA,mCAI9B8qB,iBAAA,SAAMjhF,GAEL,IADA,IAAM2f,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIusD,OAAOxM,KAAMxgD,IAI7BihF,gBAAA,SAAKprB,EAAiBz0D,EAAeE,EAAec,EAAe+zD,GAElE,IADA,IAAMx2C,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIusD,OAAOxnD,IAAKqwD,EAAQz0D,EAAOE,EAAOc,EAAO+zD,IAIzD8qB,kBAAA,WACC,OAAO,IAAIA,EAAyB/hF,KAAK6qD,KAG1Ck3B,qBAAA,WACC,IAAMthE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIotD,OAAOD,WAExC,CACN8I,QAAQ,EACRz0D,MAAO,SACPE,MAAO,EACPc,MAAO,EACPE,MAAO,EACP6zD,KAAMrM,GAAiBvsC,OAIzB0jE,sBAAA,SAAWx1B,GACV,OAAQ,GAGTw1B,wBAAA,SAAajhF,EAAgByrD,wBCjI7B,WAAavrD,GACZhB,KAAK6qD,GAAU7pD,EAiEjB,OA9DCxB,sBAAIwiF,8BAAJ,WACC,IAAMvhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK5lB,MAAMqsB,WAE5C8nC,GAA0B1jD,YAGlC,SAAgB4b,GAEf,IADA,IAAMhP,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK5lB,MAAMqsB,WAAaA,mCAIxCjwB,sBAAIwiF,4BAAJ,WACC,IAAMvhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK5lB,MAAMmsB,SAE5CioC,GAAwBtmC,YAGhC,SAAc3B,GAEb,IADA,IAAM9O,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK5lB,MAAMmsB,SAAWA,mCAItCyyD,iBAAA,SAAMlhF,GAEL,IADA,IAAM2f,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK5lB,MAAMk+C,KAAMxgD,IAIjCkhF,gBAAA,SAAKvyD,EAAwCF,GAE5C,IADA,IAAM9O,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK5lB,MAAMkD,IAAKmpB,EAAYF,IAI5CyyD,qBAAA,WACC,IAAMvhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK5lB,MAAMyqD,WAE5C,CACNp+B,WAAY8nC,GAA0B1jD,OACtC0b,SAAUioC,GAAwBtmC,SAIpC8wD,sBAAA,SAAWz1B,GACV,OAAQ,GAGTy1B,wBAAA,SAAalhF,EAAgByrD,wBCjE7B,WAAavrD,GACZhB,KAAK6qD,GAAU7pD,EAiEjB,OA9DCxB,sBAAIyiF,8BAAJ,WACC,IAAMxhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKvkB,OAAOgrB,WAE7C,OAGR,SAAgBA,GAEf,IADA,IAAMhP,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKvkB,OAAOgrB,WAAaA,mCAIzCjwB,sBAAIyiF,4BAAJ,WACC,IAAMxhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKvkB,OAAO8qB,SAE7C,OAGR,SAAcA,GAEb,IADA,IAAM9O,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKvkB,OAAO8qB,SAAWA,mCAIvC0yD,iBAAA,SAAMnhF,GAEL,IADA,IAAM2f,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKvkB,OAAO68C,KAAMxgD,IAIlCmhF,gBAAA,SAAKxyD,EAAoBF,GAExB,IADA,IAAM9O,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKvkB,OAAO6B,IAAKmpB,EAAYF,IAI7C0yD,qBAAA,WACC,IAAMxhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKvkB,OAAOopD,WAE7C,CACNp+B,WAAY,EACZF,SAAU,IAIZ0yD,sBAAA,SAAW11B,GACV,OAAQ,GAGT01B,wBAAA,SAAanhF,EAAgByrD,wBC/D7B,WAAavrD,GACZhB,KAAK6qD,GAAU7pD,EAqGjB,OAlGCxB,sBAAI0iF,0BAAJ,WACC,IAAMzhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,QACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKzkB,QAAQoyD,YAKtD,SAAYA,GAEX,IADA,IAAMl2C,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKzkB,QAAQoyD,OAASA,mCAItCn3D,sBAAI0iF,yBAAJ,WACC,IAAMzhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKzkB,QAAQrC,MAE9C,cAGR,SAAWA,GAEV,IADA,IAAMue,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKzkB,QAAQrC,MAAQA,mCAIrC1C,sBAAI0iF,yBAAJ,WACC,IAAMzhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKzkB,QAAQnC,MAE9C,OAGR,SAAWA,GAEV,IADA,IAAMqe,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKzkB,QAAQnC,MAAQA,mCAIrC5C,sBAAI0iF,yBAAJ,WACC,IAAMzhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKzkB,QAAQrB,MAE9C,OAGR,SAAWA,GAEV,IADA,IAAMud,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKzkB,QAAQrB,MAAQA,mCAIrCg/E,iBAAA,SAAMphF,GAEL,IADA,IAAM2f,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKzkB,QAAQ+8C,KAAMxgD,IAInCohF,gBAAA,SAAKvrB,EAAkBz0D,EAAgBE,EAAgBc,GAEtD,IADA,IAAMud,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKzkB,QAAQ+B,IAAKqwD,EAAQz0D,EAAOE,EAAOc,IAIxDg/E,kBAAA,WACC,OAAO,IAAIA,EAA8BliF,KAAK6qD,KAG/Cq3B,qBAAA,WACC,IAAMzhE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKzkB,QAAQspD,WAE9C,CACN8I,QAAQ,EACRz0D,MAAO,SACPE,MAAO,EACPc,MAAO,IAITg/E,sBAAA,SAAW31B,GACV,OAAQ,GAGT21B,wBAAA,SAAaphF,EAAgByrD,wBCnG7B,WAAavrD,GACZhB,KAAK6qD,GAAU7pD,EAiEjB,OA9DCxB,sBAAI2iF,8BAAJ,WACC,IAAM1hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK/jB,QAAQwqB,WAE9C,OAGR,SAAgBA,GAEf,IADA,IAAMhP,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK/jB,QAAQwqB,WAAaA,mCAI1CjwB,sBAAI2iF,4BAAJ,WACC,IAAM1hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK/jB,QAAQsqB,SAE9C,OAGR,SAAcA,GAEb,IADA,IAAM9O,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK/jB,QAAQsqB,SAAWA,mCAIxC4yD,iBAAA,SAAMrhF,GAEL,IADA,IAAM2f,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK/jB,QAAQq8C,KAAMxgD,IAInCqhF,gBAAA,SAAK1yD,EAAoBF,GAExB,IADA,IAAM9O,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK/jB,QAAQqB,IAAKmpB,EAAYF,IAI9C4yD,qBAAA,WACC,IAAM1hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK/jB,QAAQ4oD,WAE9C,CACNp+B,WAAY,EACZF,SAAU,IAIZ4yD,sBAAA,SAAW51B,GACV,OAAQ,GAGT41B,wBAAA,SAAarhF,EAAgByrD,wBC/D7B,WAAavrD,GACZhB,KAAK6qD,GAAU7pD,EAiEjB,OA9DCxB,sBAAI4iF,8BAAJ,WACC,IAAM3hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK+xC,QAAQtrC,WAE9C,OAGR,SAAgBA,GAEf,IADA,IAAMhP,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK+xC,QAAQtrC,WAAaA,mCAI1CjwB,sBAAI4iF,4BAAJ,WACC,IAAM3hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK+xC,QAAQxrC,SAE9C,OAGR,SAAcA,GAEb,IADA,IAAM9O,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK+xC,QAAQxrC,SAAWA,mCAIxC6yD,iBAAA,SAAMthF,GAEL,IADA,IAAM2f,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK+xC,QAAQzZ,KAAMxgD,IAInCshF,gBAAA,SAAK3yD,EAAoBF,GAExB,IADA,IAAM9O,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK+xC,QAAQz0D,IAAKmpB,EAAYF,IAI9C6yD,qBAAA,WACC,IAAM3hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK+xC,QAAQlN,WAE9C,CACNp+B,WAAY,EACZF,SAAU,IAIZ6yD,sBAAA,SAAW71B,GACV,OAAQ,GAGT61B,wBAAA,SAAathF,EAAgByrD,wBCjD7B,WAAavrD,GACZhB,KAAK6qD,GAAU7pD,EAEfhB,KAAKoD,MAAQ,IAAI4+E,GAA4BhhF,GAC7ChB,KAAKyE,OAAS,IAAIw9E,GAA6BjhF,GAC/ChB,KAAKuE,QAAU,IAAI29E,GAA8BlhF,GACjDhB,KAAK+6D,QAAU,IAAIqnB,GAA8BphF,GACjDhB,KAAKiF,QAAU,IAAIk9E,GAA8BnhF,GA2MnD,OAxMCxB,sBAAI6iF,0BAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,QAAI,EAAIA,EAAS/f,SACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK2tC,YAK9C,SAAYA,GAEX,IADA,IAAMl2C,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK2tC,OAASA,mCAI9Bn3D,sBAAI6iF,yBAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKyF,MAEtC,QAGR,SAAWA,GAEV,IADA,IAAMhO,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKyF,MAAQA,mCAI7BjvB,sBAAI6iF,yBAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK9mB,MAEtC,OAGR,SAAWA,GAEV,IADA,IAAMue,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK9mB,MAAQA,mCAI7B1C,sBAAI6iF,yBAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK5mB,MAEtC,OAGR,SAAWA,GAEV,IADA,IAAMqe,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK5mB,MAAQA,mCAI7B5C,sBAAI6iF,0BAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKwb,OAEtC,YAGR,SAAYA,GAEX,IADA,IAAM/jB,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKwb,OAASA,mCAI9BhlC,sBAAI6iF,wBAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKhU,KAEtC,QAGR,SAAUA,GAET,IADA,IAAMyL,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKhU,KAAOA,mCAI5BxV,sBAAI6iF,0BAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK/J,OAEtCo4C,GAAiByD,YAGzB,SAAY77C,GAEX,IADA,IAAMwB,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK/J,OAASA,mCAI9Bzf,sBAAI6iF,yBAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKgE,MAEtCsqC,GAAgBwD,YAGxB,SAAW9tC,GAEV,IADA,IAAMvM,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKgE,MAAQA,mCAI7BxtB,sBAAI6iF,6BAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK86B,UAEtC,OAGR,SAAeA,GAEd,IADA,IAAMrjC,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK86B,UAAYA,mCAIjCtkD,sBAAI6iF,4BAAJ,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,QACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAKkD,cAK9C,SAAcA,GAEb,IADA,IAAMzL,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKkD,SAAWA,mCAIhCm2D,iBAAA,SAAMvhF,GAEL,IADA,IAAM2f,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAKs4B,KAAMxgD,GAE1B,OAAOd,MAGRqiF,gBAAA,SACC5zD,EAAgBvsB,EAAgBE,EAChCoiC,EAAiBxvB,EAAeiK,EAChC+N,EAAyB82B,GAGzB,IADA,IAAMrjC,EAAWzgB,KAAK6qD,GAAQpqC,SACrBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIynB,KAAK1iB,IAAKmoB,EAAOvsB,EAAOE,EAAOoiC,EAAQxvB,EAAMiK,EAAQ+N,EAAO82B,GAE3E,OAAO9jD,MAGRqiF,qBAAA,WACC,IAAM5hE,EAAWzgB,KAAK6qD,GAAQpqC,SAC9B,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIsoB,KAAK6kC,WAEtC,CACNp/B,MAAO,GACPvsB,MAAO,EACPE,MAAO,EACPoiC,OAAQ,OACRxvB,KAAM,GACNiK,OAAQo4C,GAAiByD,OACzB13D,MAAOpD,KAAKoD,MAAMyqD,WAClBppD,OAAQzE,KAAKyE,OAAOopD,WACpB7gC,MAAOsqC,GAAgBwD,OACvBv2D,QAASvE,KAAKuE,QAAQspD,WACtBkN,QAAS/6D,KAAK+6D,QAAQlN,WACtB/J,UAAW2T,GAAoBuD,cAC/B/1D,QAASjF,KAAKiF,QAAQ4oD,WACtB3hC,UAAU,IAIZm2D,sBAAA,SAAW91B,GACV,OAAQ,GAGT81B,wBAAA,SAAavhF,EAAgByrD,yBCvM7B,WAAa/5C,gBAAAA,EAAO4wC,GAAWk/B,OAA/B,MACCx7E,YAAO0L,gBACPvL,EAAK2nD,IAAM,IAAIkL,GACf7yD,EAAK+N,KAAO/N,EAAKs7E,eACjBt7E,EAAK8kB,KAAO9kB,EAAKu7E,eACjBv7E,EAAK6mD,OAAS7mD,EAAKw7E,iBACnBx7E,EAAK+hB,KAAO/hB,EAAKy7E,eACjBz7E,EAAKiqD,OAASjqD,EAAK07E,mBAyKrB,OAzLiC7iF,OAmBtB8iF,yBAAV,WAAA,WACC,GAAI71B,GAAe81B,aAClB,OAAO,IAAI7B,GACVhhF,KACA+sD,GAAekP,OACflP,GAAemP,QAGhB,IAAM4mB,EAAS,IAAIhB,IAClB,WACC,IAAMl1E,EAAOk2E,EAAOl2E,KACpB3F,EAAKgV,UAAUK,MAAMhW,IACpBw8E,EAAO18E,EAAIwG,EAAKxG,EAChB08E,EAAOz8E,EAAIuG,EAAKvG,KAGlB0mD,GAAekP,OACflP,GAAemP,QAEhB,OAAO4mB,GAICF,yBAAV,WACC,OAAO,IAAI1D,GAAuBl/E,OAGzB4iF,2BAAV,WACC,OAAO,IAAIb,GAAyB/hF,OAG3B4iF,yBAAV,WACC,OAAO,IAAIP,GAAuBriF,OAGzB4iF,2BAAV,WACC,OAAO,IAAIzD,GAAmBn/E,OAGrB4iF,0BAAV,WACC,IAAM5tE,EAAOhV,KAAKgV,KAClB,OAAIA,aAAgB8sE,GACZ9sE,EAAKpI,KAELoI,GAIT4tE,mCAAA,WACC97E,YAAM8rD,kCACN5yD,KAAKgV,KAAK+tE,OAGXvjF,sBAAIojF,0BAAJ,WACC,IAAMniE,EAAWzgB,KAAKygB,SACtB,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIqD,OAEjC4mD,GAAa3D,SAGrB,SAAYjjD,GAEX,IADA,IAAM0c,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIwC,OAASA,mCAIzBvE,sBAAIojF,0BAAJ,WACC,IAAMniE,EAAWzgB,KAAKygB,SACtB,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAI0f,OAEjC,QAGR,SAAYA,GAEX,IADA,IAAMK,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAI6e,OAASA,mCAIzB5gB,sBAAIojF,4BAAJ,WAEC,IADA,IAAMniE,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC/C,IAAM0vD,EAAWxwC,EAAUlf,GAAI0vD,SAC/B,GAAgB,MAAZA,EACH,OAAOA,QAMV,SAAcA,GAEb,IADA,IAAMxwC,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAI0vD,SAAWA,mCAI3BzxD,sBAAIojF,0BAAJ,WACC,IAAMniE,EAAWzgB,KAAKygB,SACtB,OAAI,EAAIA,EAAS/f,OACT+f,EAAUA,EAAS/f,OAAS,GAAIuD,OAEjC,QAGR,SAAYA,GAEX,IADA,IAAMwc,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAI0C,OAASA,mCAIzBzE,sBAAIojF,yBAAJ,WAEC,IADA,IAAMniE,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC/C,IAAMswB,EAAQpR,EAAUlf,GAAIswB,MAC5B,GAAa,MAATA,EACH,OAAOA,QAMV,SAAWA,GAEV,IADA,IAAMpR,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnDkf,EAAUlf,GAAIswB,MAAQA,mCAIxBryB,sBAAIojF,0BAAJ,WAEC,IADA,IAAMniE,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAE3C,GAAc,MADCkf,EAAUlf,GAAI2vD,OAE5B,OAAOlxD,KAAKgjF,QAMf,SAAY9xB,qCAIZ0xB,kBAAA,WAIC,IAHA,IACMpgF,GAAS,IAAIvC,EADCD,KAAKC,cACQqhD,KAAMthD,MACjCygB,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMk1D,EAAQh2C,EAAUlf,GAAIk1D,QAC5BA,EAAMz1D,OAASwB,EACfA,EAAOie,SAASjgB,KAAMi2D,GAIvB,OAFAj0D,EAAOowD,yBACPpwD,EAAOmb,UACAnb,GAGRogF,wBAAA,SAAax8E,EAAWC,EAAWouD,EAAYC,GAC9C,OAAO,MAvLwBjC,kBChBjC,cAaA,OAZQwwB,cAAP,SACCvnE,EAA8B6wC,GAE9B,IAAMmB,EAAQu1B,EAAa9iF,SACrBqC,EAAS+5E,GAAmB1iB,YAAan+C,EAAM6wC,EAASmB,GAE9D,OADAA,EAAM14C,KAAKsL,OACJ9d,GAGDygF,SAAP,WACC,OAAO,IAAIL,SCVAM,GAAiB,WAC7Bv5B,GAAiBvG,GAAWk/B,OAAUrD,GAAqB9+E,OAC3DspD,GAAqBrG,GAAWk/B,OAAUW,GAAappB,2BCAvD,WAAa74D,EAA+BoF,EAAWC,GACtDrG,KAAK6qD,GAAU7pD,EACfhB,KAAKgrD,GAAQ,IAAIpjC,QAAOxhB,EAAGC,GAyF7B,OAtFC88E,iBAAA,aAIA3jF,sBAAI2jF,qBAAJ,WACC,OAAOnjF,KAAKgrD,GAAM5kD,OAGnB,SAAOA,GACN,IAAM4O,EAAOhV,KAAKgrD,GAClB,GAAIh2C,EAAK5O,IAAMA,EAAI,CAClB,IAAM66E,EAAKjsE,EAAK5O,EAChB4O,EAAK5O,EAAIA,EACTpG,KAAK0C,SAAUu+E,EAAIjsE,EAAK3O,qCAI1B7G,sBAAI2jF,qBAAJ,WACC,OAAOnjF,KAAKgrD,GAAM3kD,OAGnB,SAAOA,GACN,IAAM2O,EAAOhV,KAAKgrD,GAClB,GAAIh2C,EAAK3O,IAAMA,EAAI,CAClB,IAAM66E,EAAKlsE,EAAK3O,EAChB2O,EAAK3O,EAAIA,EACTrG,KAAK0C,SAAUsS,EAAK5O,EAAG86E,qCAIzBiC,gBAAA,SAAK/8E,EAAwBC,GAC5B,IAAIhC,GAAY,EACV2Q,EAAOhV,KAAKgrD,GACZi2B,EAAKjsE,EAAK5O,EACV86E,EAAKlsE,EAAK3O,EACP,MAALD,GAAa66E,IAAO76E,IACvB/B,GAAY,EACZ2Q,EAAK5O,EAAIA,GAED,MAALC,GAAa66E,IAAO76E,IACvBhC,GAAY,EACZ2Q,EAAK3O,EAAIA,GAENhC,GACHrE,KAAK0C,SAAUu+E,EAAIC,IAIrBiC,kBAAA,WACC,IAAMnuE,EAAOhV,KAAKgrD,GAClB,OAAO,IAAIm4B,EAAyBnjF,KAAK6qD,GAAS71C,EAAK5O,EAAG4O,EAAK3O,IAGhE88E,iBAAA,aAIAA,qBAAA,SAAUp9E,GACT,IAAMK,EAAIL,EAAMK,EACVC,EAAIN,EAAMM,EACV2O,EAAOhV,KAAKgrD,GACZi2B,EAAKjsE,EAAK5O,EACV86E,EAAKlsE,EAAK3O,EAMhB,OALI46E,IAAO76E,GAAK86E,IAAO76E,IACtB2O,EAAK5O,EAAIA,EACT4O,EAAK3O,EAAIA,EACTrG,KAAK0C,SAAUu+E,EAAIC,IAEblhF,MAGRmjF,mBAAA,SAAQp9E,GACP,OAAO/F,KAAKgrD,GAAM8F,OAAQ/qD,IAG3Bo9E,mBAAA,SAAQp9E,GACP,OAAO/F,KAAKgrD,GAAMvkD,OAAQV,IAG3Bo9E,gBAAA,aAIUA,qBAAV,SAAoBlC,EAAYC,GAC/BlhF,KAAK6qD,GAAQmR,oCC1Fd,WAAaxpD,uBAAAA,EAAmB4wC,GAAWggC,gBAC1Ct8E,YAAO0L,SAcT,OAhByC1S,OAK9BujF,yBAAV,WACC,OAAIt2B,GAAe81B,aACX,IAAIM,GACVnjF,KACA+sD,GAAekP,OACflP,GAAemP,QAGTp1D,YAAMy7E,4BAbyBK,kBCDzC,cAaA,OAZQU,cAAP,SACC5nE,EAA8B6wC,GAE9B,IAAMmB,EAAQ41B,EAAqBnjF,SAC7BqC,EAAS+5E,GAAmB1iB,YAAan+C,EAAM6wC,EAASmB,GAE9D,OADAA,EAAM14C,KAAKsL,OACJ9d,GAGD8gF,SAAP,WACC,OAAO,IAAID,SCVAE,GAAyB,WACrC55B,GAAiBvG,GAAWggC,gBAAmBnE,GAAqB9+E,OACpEspD,GAAqBrG,GAAWggC,gBAAmBE,GAAqBzpB,4BCHxE,WAAarnD,uBAAAA,EAAO4wC,GAAWogC,WAC9B18E,YAAO0L,SAuDT,OAzDqC1S,OAKpC2jF,kBAAA,WACC,OAAO,IAAIA,GAAkBniC,KAAMthD,OAGpCyjF,wBAAA,SAAar9E,EAAWC,EAAWouD,EAAYC,GAC9C,GAAI5tD,YAAM0tD,0BAAiBpuD,EAAGC,EAAGouD,EAAIC,GAAO,CAC3C,IAAM3oC,EAAO/rB,KAAK+rB,KACZ+hC,EAAS9tD,KAAK8tD,OACpB,GAAI/hC,EAAK4qC,OACR,OAAO,EAEP,IAAM1+B,EAAc61B,EAAO5qD,MACrBw8D,EAAa5R,EAAOmJ,KAC1B,GAAInJ,EAAO6I,QAAU,EAAI1+B,GAAeynC,IAAe9U,GAAiBvsC,KAAO,CAC9E,IAAMqgE,EAAK/0E,KAAKG,IAAK,EAAK2qD,EAAKx8B,GACzB0mD,EAAKh1E,KAAKG,IAAK,EAAK4qD,EAAKz8B,GAC/B,IAAMj4B,KAAKw0D,gBAAiBpuD,EAAGC,EAAGq4E,EAAIC,GACrC,OAAIjf,IAAe9U,GAAiB5D,MAG/B5gD,IAAMs4E,EACLr4E,IAAMs4E,EACgD,IAAhDjf,EAAa9U,GAAiB84B,cAC5B/E,GAAMt4E,EAC2C,IAAnDq5D,EAAa9U,GAAiB+4B,gBAEW,IAAzCjkB,EAAa9U,GAAiBp+C,OAE7BkyE,GAAMt4E,EACbC,IAAMs4E,EACiD,IAAjDjf,EAAa9U,GAAiBg5B,eAC5BjF,GAAMt4E,EAC4C,IAApDq5D,EAAa9U,GAAiBi5B,iBAEY,IAA1CnkB,EAAa9U,GAAiBl+C,OAGpCrG,IAAMs4E,EACwC,IAAxCjf,EAAa9U,GAAiBx+C,MAC5BuyE,GAAMt4E,GACmC,IAA3Cq5D,EAAa9U,GAAiBt+C,UAU9C,OAAO,MAvD4BwvD,mBCApC,WAAajqC,EAA0Brf,gBAAAA,EAAO4wC,GAAW0gC,OAAzD,MACCh9E,YAAO0L,gBACM,MAATqf,IACH5qB,EAAK4qB,MAAQA,EACb5qB,EAAK+N,KAAK1O,IAAKurB,EAAM3uB,MAAO2uB,EAAMlrB,SAEnCM,EAAK8kB,KAAK3pB,MAAQ,IAMpB,OAbiCtC,OAUhCikF,kBAAA,WACC,OAAO,IAAIA,EAAa/jF,KAAK6xB,OAAQyvB,KAAMthD,UAXZyjF,kBCGjC,cAgBA,OAfQO,OAAP,SAAahI,GACZ,OAAOD,GAAoBoB,eAAgBnB,GAAUz6B,MAAK,SAAE86B,GAC3D,OAAO,IAAI0H,GAAa1H,OAInB2H,cAAP,SACCtoE,EAA8B6wC,GAE9B,OAAOgwB,GAAmB1iB,YAAan+C,EAAM6wC,EAASy3B,EAAa7jF,WAG7D6jF,SAAP,WACC,OAAO,IAAID,wBCfb,4DAmcA,OAnc6CjkF,OAC5CmkF,iBAAA,SAAMv2B,GACL5mD,YAAMwZ,eAAMotC,GACZ,IAAM2Q,EAASr+D,KAAKq+D,OACdC,EAAUt+D,KAAK4+D,aACfL,EAAUv+D,KAAK8+D,YAGrBT,EAAO8L,eAAe7oE,SACtB,IAAMmgE,EAAYpD,EAAOoD,UACrBgJ,EAAe,EAAVnM,EACTmD,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAEtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAEtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEW,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EAGvBhJ,GAFAgJ,GAAM,IAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAEtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAEtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBpM,EAAOr0C,YAAY1oB,SACnB,IAAMqH,EAAU01D,EAAO11D,QACjBD,EAAe,EAAV61D,EAqCX,OApCA51D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAE/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAE/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAE/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAG/Bt+D,KAAK0qE,WAEL1qE,KAAKsB,OAAQosD,GACN1tD,MAGRikF,mBAAA,SAAQv2B,GACP,IAAM2Q,EAASr+D,KAAKq+D,OACpBr+D,KAAK09E,kBAAmBrf,EAAQ3Q,GAChC1tD,KAAKkrE,YAAa7M,EAAQ3Q,GAC1B1tD,KAAK29E,gBAAiBtf,EAAQ3Q,GAC9B1tD,KAAK49E,cAAevf,EAAQ3Q,GAC5B1tD,KAAKwxB,WAAY6sC,EAAQ3Q,IAGhBu2B,8BAAV,SAA6B5lB,EAAsB3Q,GAClD,IAAM14C,EAAO04C,EAAM14C,KACbs2C,EAAQt2C,EAAK5O,EACbmlD,EAAQv2C,EAAK3O,EACbs4D,EAAmB3+D,KAAK6qE,mBAAoBnd,GAC5Cid,EAAkBrf,IAAUtrD,KAAKsrD,OAASC,IAAUvrD,KAAKurD,MACzDuf,EAAuB9qE,KAAK2+D,mBAAqBA,EACjD7Q,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MACrBy6E,EAAoB79E,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,EACnF,GAAI0yC,GAAiBG,GAAsB+S,EAAkB,CAC5D79E,KAAKsrD,MAAQA,EACbtrD,KAAKurD,MAAQA,EACbvrD,KAAK2+D,iBAAmBA,EAGxB3+D,KAAKi4B,YAAczwB,IAGnBxH,KAAKijE,sBAAwBz7D,IAE7B62D,EAAOv0C,aAAaxoB,SAYpB,IAAMmQ,EAAIguD,EAAcxnC,EAClB07B,EAAa,GAARrI,GAAe,GAAKA,GAAS75C,GAAKA,GACvCmiD,EAAa,GAARrI,GAAe,GAAKA,GAAS95C,GAAKA,GACvCu+C,EAAoBtC,EAAMzxC,UAAU+zC,kBACpC7oC,EAAOnnB,KAAKq+D,OAAOl3C,KACzBA,EAAK7gB,KAAMqtD,GAAKC,GAChB5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM7e,EAAK6e,EAAK/gB,EACVoC,EAAK2e,EAAK9gB,EAChB8gB,EAAK7gB,IAAK,GAAIstD,GACd5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM5e,EAAK4e,EAAK/gB,EACVqC,EAAK0e,EAAK9gB,EACV6S,EAAK3Q,EAAKD,EACV8Q,EAAK3Q,EAAKD,EACVuB,EAAKimD,EAAkBkE,GACvBjqD,EAAK+lD,EAAkBmE,GACvB+vB,EAAMn6E,GAAMA,EAAKxB,GACjB47E,EAAMl6E,GAAMA,EAAKxB,GACjBq1E,EAAK/zE,EAAKmP,EACV6kE,EAAK9zE,EAAKmP,EAGhBpZ,KAAKo/D,eAAiBp/D,KAAKylE,WAAYn9D,EAAIE,EAAID,EAAIE,GACnDzI,KAAKq/D,eAAiBr/D,KAAKylE,WAAYn9D,EAAIE,EAAIs1E,EAAIC,GAGnD,IAAMzf,EAAUt+D,KAAK4+D,aACfl1D,EAAW20D,EAAO30D,SACpBtB,EAAe,EAAVk2D,EACT50D,EAAUtB,EAAK,GAAME,EACrBoB,EAAUtB,EAAK,GAAMI,EACrBkB,EAAUtB,EAAK,GAAMG,EACrBmB,EAAUtB,EAAK,GAAMK,EACrBiB,EAAUtB,EAAK,GAAMG,EAAK2Q,EAC1BxP,EAAUtB,EAAK,GAAMK,EAAK2Q,EAG1B1P,GAFAtB,GAAM,GAES,GAAM2B,EACrBL,EAAUtB,EAAK,GAAM6B,EAGrBP,GAFAtB,GAAM,GAES,GAAM01E,EACrBp0E,EAAUtB,EAAK,GAAM21E,EACrBr0E,EAAUtB,EAAK,GAAM2B,EACrBL,EAAUtB,EAAK,GAAM6B,EACrBP,EAAUtB,EAAK,GAAM2B,EACrBL,EAAUtB,EAAK,GAAM6B,EACrBP,EAAUtB,EAAK,GAAM2B,EAAKmP,EAC1BxP,EAAUtB,EAAK,GAAM6B,EAAKmP,EAG1B1P,GAFAtB,GAAM,GAES,GAAM2B,EACrBL,EAAUtB,EAAK,GAAM6B,EAGrBP,GAFAtB,GAAM,GAES,GAAM87E,EAAMhrE,EAC3BxP,EAAUtB,EAAK,GAAM+7E,EAAM/qE,EAC3B1P,EAAUtB,EAAK,GAAM87E,EACrBx6E,EAAUtB,EAAK,GAAM+7E,EACrBz6E,EAAUtB,EAAK,GAAM87E,EAAMhrE,EAC3BxP,EAAUtB,EAAK,GAAM+7E,EAAM/qE,IAInB6qE,4BAAV,SAA2B5lB,EAAsB3Q,GAChD,IAAMI,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MACrBs8D,EAAa5R,EAAOmJ,KAC1B,GAAIj3D,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,GAAej4B,KAAK0/D,aAAeA,EAAa,CAC5G1/D,KAAKi4B,YAAcA,EACnBj4B,KAAKy/D,YAAcA,EACnBz/D,KAAK0/D,WAAaA,EAClBrB,EAAOwL,WAAWvoE,SAClB+8D,EAAOyL,gBAAgBxoE,SAEvB,IAAM6lB,EAAOk3C,EAAO6f,SACpBl+E,KAAKm+E,SAAUn+E,KAAKo/D,eAAgBnnC,EAAa9Q,GACjD,IAAM85C,EAAM95C,EAAM,GACZg6C,EAAMh6C,EAAM,GACZk6C,EAAMl6C,EAAM,GAElBnnB,KAAKm+E,SAAUn+E,KAAKq/D,eAAgBpnC,EAAa9Q,GACjD,IAAM+5C,EAAM/5C,EAAM,GACZi6C,EAAMj6C,EAAM,GACZm6C,EAAMn6C,EAAM,GAEdi9D,EAAMljB,EACNmjB,EAAMjjB,EACH1B,EAAa9U,GAAiBx+C,MACpCg4E,EAAM,EACNC,EAAM/iB,GAEP,IAAIgjB,EAAMrjB,EACNsjB,EAAMpjB,EACHzB,EAAa9U,GAAiBl+C,QACpC43E,EAAM,EACNC,EAAMljB,GAEP,IAAImjB,EAAMtjB,EACNujB,EAAMrjB,EACH1B,EAAa9U,GAAiBt+C,SACpCk4E,EAAM,EACNC,EAAMnjB,GAEP,IAAIojB,EAAMzjB,EACN0jB,EAAMxjB,EACHzB,EAAa9U,GAAiBp+C,OACpCk4E,EAAM,EACNC,EAAMtjB,GAEP,IAAMR,EAAM,IAAO8jB,EAAMJ,GACnBK,EAAM,IAAOP,EAAMI,GAEnBljB,EAAQlD,EAAOkD,MACfC,EAAcnD,EAAOmD,YACrBlD,EAAUt+D,KAAK4+D,aACjBnvD,EAAe,EAAV6uD,EACLtzD,EAAe,EAAVszD,EAGTiD,EAAO9xD,EAAK,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAM61D,EACxBW,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM61D,EACxBW,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAM45E,EACxBpjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAM45E,EACxBpjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAM45E,EACxBpjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAM45E,EACxBpjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM61D,EACxBW,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAM61D,EACxBW,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EACxB7xD,GAAM,EACNzE,GAAM,IAIEi5E,0BAAV,SAAyB5lB,EAAsB3Q,GAC9C,IAAMhnD,EAAU1G,KAAK24C,UAAW+U,GAC1BiS,EAAqB3/D,KAAK8kE,qBAAsBp+D,GACtD,GAAIA,IAAY1G,KAAK0G,SAAWi5D,IAAuB3/D,KAAK2/D,mBAAqB,CAChF3/D,KAAK0G,QAAUA,EACf1G,KAAK2/D,mBAAqBA,EAE1B,IAAMz1D,EAAalK,KAAKymE,aAAc//D,GAChC4B,EAAK4B,EAAW5B,GAChBC,EAAK2B,EAAW3B,GAChBsB,EAAKK,EAAWL,GAChBE,EAAKG,EAAWH,GAChBvB,EAAK0B,EAAW1B,GAChBC,EAAKyB,EAAWzB,GAChBuB,EAAKE,EAAWF,GAChBC,EAAKC,EAAWD,GAEhB46E,EAAM,IAAQv8E,EAAKuB,GACnBi7E,EAAM,IAAQt8E,EAAKwB,GAGzBq0D,EAAOt0C,SAASzoB,SAChB,IAAMsH,EAAMy1D,EAAOz1D,IAEfkjE,EAAgB,EADJ9rE,KAAK4+D,aAErBh2D,EAAKkjE,EAAM,GAAMxjE,EACjBM,EAAKkjE,EAAM,GAAMtjE,EACjBI,EAAKkjE,EAAM,GAAM,IAAQxjE,EAAKC,GAC9BK,EAAKkjE,EAAM,GAAM,IAAQtjE,EAAKC,GAC9BG,EAAKkjE,EAAM,GAAMvjE,EACjBK,EAAKkjE,EAAM,GAAMrjE,EAGjBG,GAFAkjE,GAAO,GAEI,GAAM+Y,EACjBj8E,EAAKkjE,EAAM,GAAMgZ,EAGjBl8E,GAFAkjE,GAAO,GAEI,GAAM,IAAQxjE,EAAKyB,GAC9BnB,EAAKkjE,EAAM,GAAM,IAAQtjE,EAAKyB,GAC9BrB,EAAKkjE,EAAM,GAAM+Y,EACjBj8E,EAAKkjE,EAAM,GAAMgZ,EACjBl8E,EAAKkjE,EAAM,GAAM+Y,EACjBj8E,EAAKkjE,EAAM,GAAMgZ,EACjBl8E,EAAKkjE,EAAM,GAAM,IAAQvjE,EAAKsB,GAC9BjB,EAAKkjE,EAAM,GAAM,IAAQrjE,EAAKuB,GAG9BpB,GAFAkjE,GAAO,GAEI,GAAM+Y,EACjBj8E,EAAKkjE,EAAM,GAAMgZ,EAGjBl8E,GAFAkjE,GAAO,GAEI,GAAM/hE,EACjBnB,EAAKkjE,EAAM,GAAM7hE,EACjBrB,EAAKkjE,EAAM,GAAM,IAAQ/hE,EAAKF,GAC9BjB,EAAKkjE,EAAM,GAAM,IAAQ7hE,EAAKD,GAC9BpB,EAAKkjE,EAAM,GAAMjiE,EACjBjB,EAAKkjE,EAAM,GAAM9hE,OAhcyBy5D,kBCA7C,cAsBA,OArBQshB,SAAP,SACC1mB,EAAsB3Q,EACtB4Q,EAAiBC,EACjBG,GAEA,IAAMsN,EAASjK,GAAoB2B,aAAchW,EAAO2Q,EAAOsF,WACzD3B,EAAUgK,EAAOnN,YACjBoD,EAAU+J,EAAOjN,WACjBP,EAAS,GAAKwD,EACdvD,EAAS,EAAIwD,EACnB,OAAI3D,EAAUE,EAASH,EAAO4N,gBAAkB1N,EAAUE,EAASJ,EAAO6N,cAClE,IAAI+X,GACV5lB,EACAC,EAASC,EACTyD,EAASC,EACTzD,EAAQC,EACRC,GACCp+C,KAAMotC,GAEF,WCnBIs3B,GAAiB,WAC7Br7B,GAAiBvG,GAAW0gC,OAAUiB,GAAyB5kF,OAC/DspD,GAAqBrG,GAAW0gC,OAAUE,GAAanqB,4BCJxD,4DAmCA,OAnCyC/5D,OACxCmlF,iBAAA,SAAMv3B,GAIL,OAHA5mD,YAAMwZ,eAAMotC,GACZ1tD,KAAK0qE,WACL1qE,KAAKsB,OAAQosD,GACN1tD,MAGRilF,mBAAA,SAAQv3B,GACP,IAAM2Q,EAASr+D,KAAKq+D,OACpBr+D,KAAKklF,kBAAmB7mB,EAAQ3Q,GAChC1tD,KAAKmlF,cAAe9mB,EAAQ3Q,GAC5B1tD,KAAKwxB,WAAY6sC,EAAQ3Q,IAG1Bu3B,8BAAA,SAAmB5mB,EAAsB3Q,GACxC,IAAM14C,EAAO04C,EAAM14C,KACbs2C,EAAQt2C,EAAK5O,EACbmlD,EAAQv2C,EAAK3O,EACbskE,EAAkBrf,IAAUtrD,KAAKsrD,OAASC,IAAUvrD,KAAKurD,MACzDoT,EAAmB3+D,KAAK6qE,mBAAoBnd,GAC5Cod,EAAuB9qE,KAAK2+D,mBAAqBA,GACnDgM,GAAiBG,KACpB9qE,KAAKsrD,MAAQA,EACbtrD,KAAKurD,MAAQA,EACbvrD,KAAK2+D,iBAAmBA,EAGxB3+D,KAAKijE,sBAAwBz7D,MAI/By9E,0BAAA,SAAe5mB,EAAsB3Q,GACpC1tD,KAAK0G,QAAU1G,KAAK24C,UAAW+U,OAjCQ+V,kBCCzC,cAsBA,OArBQ2hB,SAAP,SACC/mB,EAAsB3Q,EACtB4Q,EAAiBC,EACjBG,GAEA,IAAMsN,EAASjK,GAAoB2B,aAAchW,EAAO2Q,EAAOsF,WACzD3B,EAAUgK,EAAOnN,YACjBoD,EAAU+J,EAAOjN,WACjBP,EAASwD,EACTvD,EAASwD,EACf,OAAI3D,EAAUE,EAASH,EAAO4N,gBAAkB1N,EAAUE,EAASJ,EAAO6N,cAClE,IAAI+Y,GACV5mB,EACAC,EAASC,EACTyD,EAASC,EACTzD,EAAQC,EACRC,GACCp+C,KAAMotC,GAEF,0BCrBR,WAAal7C,uBAAAA,EAAmB4wC,GAAWiiC,OAC1Cv+E,YAAO0L,SAMT,OARiC1S,OAKhCwlF,kBAAA,WACC,OAAO,IAAIA,GAAchkC,KAAMthD,UANA87D,kBCEjC,cAMA,OALQypB,cAAP,SACC7pE,EAA8B6wC,GAE9B,OAAOgwB,GAAmB1iB,YAAan+C,EAAM6wC,EAAS,IAAI+4B,UCH/CE,GAAiB,WAC7B77B,GAAiBvG,GAAWiiC,OAAUD,GAAqBjlF,OAC3DspD,GAAqBrG,GAAWiiC,OAAUE,GAAa1rB,4BCSvD,WACCwE,EACAC,EAAiBC,EACjByD,EAAiBC,EACjBzD,EAAgBC,EAChBC,EACAtB,EAAoBqoB,GANrB,MAQC3+E,YAAOu3D,EAAQC,EAASC,EAASyD,EAASC,EAASzD,EAAQC,EAAQC,gBACnEz3D,EAAKy+E,QAAUl+E,IACfP,EAAKm2D,WAAaA,EAClBn2D,EAAKw+E,aAAeA,EACpBx+E,EAAKsjE,YAAc7gB,GAAkBrrC,KACrCpX,EAAKvG,OAAS,IAqiBhB,OAzjBwCZ,OAuBvC6lF,iBAAA,SAAMj4B,GACL5mD,YAAMwZ,eAAMotC,GACZ,IAAM2Q,EAASr+D,KAAKq+D,OACdC,EAAUt+D,KAAK4+D,aACfL,EAAUv+D,KAAK8+D,YACf1B,EAAap9D,KAAKo9D,WAClBqoB,EAAezlF,KAAKylF,aAG1B,GAAI,GAAKroB,EAAa,CACrBiB,EAAO8L,eAAe7oE,SACtB,IAAMmgE,EAAYpD,EAAOoD,UACzBpD,EAAOr0C,YAAY1oB,SACnB,IAAMqH,EAAU01D,EAAO11D,QAEnB8hE,EAAe,EAAVnM,EACL51D,EAAe,EAAV61D,EACLqnB,EAAKtnB,EAGHmnB,IACLhkB,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBA,GAAM,EAEN9hE,EAASD,EAAK,GAAMk9E,EAAK,EACzBj9E,EAASD,EAAK,GAAMk9E,EAAK,EACzBj9E,EAASD,EAAK,GAAMk9E,EAAK,EAEzBj9E,EAASD,EAAK,GAAMk9E,EAAK,EACzBj9E,EAASD,EAAK,GAAMk9E,EAAK,EACzBj9E,EAASD,EAAK,GAAMk9E,EAAK,EACzBA,GAAM,EACNl9E,GAAM,GAIP,IAAK,IAAInH,EAAKkkF,EAAe,EAAI,EAAIjkF,EAAO47D,EAAa77D,EAAGA,EAAIC,IAAQD,EACvEkgE,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAM,GAAM,EAEvBhJ,EAAWgJ,EAAM,GAAM,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBhJ,EAAWgJ,EAAK,IAAO,EACvBA,GAAM,GAEN9hE,EAASD,EAAM,GAAMk9E,EAAK,EAC1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAC1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAE1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAC1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAC1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAE1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAC1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAC1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAE1Bj9E,EAASD,EAAM,GAAMk9E,EAAK,EAC1Bj9E,EAASD,EAAK,IAAOk9E,EAAK,EAC1Bj9E,EAASD,EAAK,IAAOk9E,EAAK,EAC1BA,GAAM,EACNl9E,GAAM,GAIP+4D,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAEtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EASvB,OALAzqE,KAAK0qE,WAGL1qE,KAAKsB,OAAQosD,GAEN1tD,MAGR2lF,mBAAA,SAAQj4B,GACP,IAAM2Q,EAASr+D,KAAKq+D,OACdnN,EAASxD,EAAMwD,OACrB,GAAc,MAAVA,GAAkB,GAAKA,EAAOxwD,OAAS,CAC1C,IAAMglF,EAAUx0B,EAAOl5B,GACjB6tD,EAAmBH,IAAY1lF,KAAK0lF,QACpC53B,EAASJ,EAAMI,OACf71B,EAAgB61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC/C0nE,EAAyB3yC,IAAgBj4B,KAAKi4B,YAC9C0mC,EAAmB3+D,KAAK6qE,mBAAoBnd,GAC5Cod,EAAuB9qE,KAAK2+D,mBAAqBA,EACjD4L,EAAcrZ,EAAOlkC,MACrBg+C,EAAyBT,IAAgBvqE,KAAKuqE,YACpD,GAAIsb,GAAkB/a,GAAsBF,GAAwBI,EAAuB,CAC1FhrE,KAAK0lF,QAAUA,EACf1lF,KAAKi4B,YAAcA,EACnBj4B,KAAK2+D,iBAAmBA,EACxB3+D,KAAKuqE,YAAcA,EACnBlM,EAAOv0C,aAAaxoB,SACpB+8D,EAAOwL,WAAWvoE,SAClB+8D,EAAOyL,gBAAgBxoE,SACvB+8D,EAAOgC,gBAAgB/+D,UAEnBukF,GAAkB/a,KAErB9qE,KAAKijE,sBAAwBz7D,KAE1Bq+E,IAEH7lF,KAAK2/D,mBAAqBn4D,KAG3B,IAAM82D,EAAUt+D,KAAK4+D,aACfJ,EAASx+D,KAAK6+D,YAAc7+D,KAAKujE,gBACvCvjE,KAAKirE,iCACJ5M,EACAnN,EAAQj5B,EAAay1B,EAAMzxC,UAAU+zC,kBACrCsO,EAASE,IAKZx+D,KAAKkrE,YAAa7M,EAAQ3Q,GAC1B1tD,KAAK8lF,aAAcznB,EAAQ3Q,GAC3B1tD,KAAKwxB,WAAY6sC,EAAQ3Q,IAGhBi4B,qCAAV,SAAoCtnB,EAAsB3Q,EAAemR,GACxE7+D,KAAK2gE,kBAAmBtC,EAAQ3Q,EAAOmR,IAGxC8mB,yBAAA,SAAcj4B,GACb,GAAI5mD,YAAMm8C,uBAAcyK,GAAU,CACjC,IAAMwD,EAASxD,EAAMwD,OACrB,OAAIA,EAEFlxD,KAAKo9D,aAAelM,EAAOxwD,QAC3BV,KAAKylF,kBAAsBv0B,EAAOlkC,MAAQ08B,GAAkBkU,QAIxC,IAApB59D,KAAKo9D,aACiB,IAAtBp9D,KAAKylF,aAIR,OAAO,GAGEE,6CAAV,SACCtnB,EACAnN,EACAj5B,EACA+3B,EACAsO,EACAE,GAEA,IAAIp2D,EAAe,EAAVk2D,EACLtzD,EAAe,EAAVszD,EACH50D,EAAW20D,EAAO30D,SAClB63D,EAAQlD,EAAOkD,MACfC,EAAcnD,EAAOmD,YACrBjB,EAAalC,EAAOkC,WACpBnD,EAAalM,EAAOxwD,OACpB28D,EAAcnM,EAAOnF,OACrBuR,EAAgBpM,EAAOlF,SACvBue,EAAcrZ,EAAOlkC,MACrB+4D,EAAwD,IAA5Cxb,EAAc7gB,GAAkBkU,QAC5CyN,EAAiBxhB,GAA2ByhB,iBAAkBf,GAGhEpgE,EAAI,EACJ67E,EAAQ,EACRC,EAAQ,EACRC,EAAO,EACPC,EAAM,EACNC,EAAO,EACPC,EAAS,EACTC,EAAS,EACTjxB,EAAK,EACLC,EAAK,EACLixB,EAAS,EACTC,EAAS,EACTC,GAAO,EACPC,GAAW,EACXC,EAAoB,EAAVroB,EACVsoB,EAAU,EAGRz/D,EAAOk3C,EAAOl3C,KACpBA,EAAK7gB,IAAK+2D,EAAa,GAAKA,EAAa,IACzCrN,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM0/D,EAAU1/D,EAAK/gB,EACf0gF,EAAU3/D,EAAK9gB,EACf0gF,EAAc,GAAK3rC,GAAakiB,EAAe,GAG/CvzB,EAAaqzB,EAAa,GAAM,EACtCj2C,EAAK7gB,IAAK+2D,EAAatzB,EAAY,GAAKszB,EAAatzB,EAAY,IACjEimB,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM6/D,EAAS7/D,EAAK/gB,EACd6gF,EAAS9/D,EAAK9gB,EACd6gF,EAAa,GAAK9rC,GAAakiB,EAAeF,EAAa,GAG7D+pB,EAAWH,EACXI,EAAWH,EACXI,EAAaH,EACb,EAAI9pB,IACPj2C,EAAK7gB,IAAK+2D,EAAa,GAAKA,EAAa,IACzCrN,EAAkB3oC,MAAOF,EAAMA,GAC/BggE,EAAWhgE,EAAK/gB,EAChBghF,EAAWjgE,EAAK9gB,EAChBghF,EAAe,GAAKjsC,GAAakiB,EAAe,IAI7CyoB,GACH1wB,EAAK2xB,EACL1xB,EAAK2xB,EACLV,EAASM,EACTL,EAASM,EACTL,EAAOS,EACPR,EAAWK,IAEXV,EAASQ,GAAWM,EAAWN,GAC/BP,EAASQ,GAAWM,EAAWN,GAC/BzxB,EAAKwxB,EACLvxB,EAAKwxB,EACLP,EAASY,EACTX,EAASY,EACTX,EAAOM,EACPL,EAAWW,EACXpB,GAASjmF,KAAKylE,WAAYpQ,EAAIC,EAAIixB,EAAQC,GAG1C98E,EAAUtB,EAAK,GAAMitD,EACrB3rD,EAAUtB,EAAK,GAAMktD,EACrB5rD,EAAUtB,EAAK,GAAMitD,EACrB3rD,EAAUtB,EAAK,GAAMktD,EACrBiM,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB9J,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB7J,EAAax2D,EAAK,GAAMq7E,EACxB7kB,EAAax2D,EAAK,GAAMs7E,EACxB9kB,EAAax2D,EAAK,GAAMu7E,EACxB/kB,EAAax2D,EAAK,GAAMw7E,EACxBhlB,EAAax2D,EAAK,GAAMq7E,EACxB7kB,EAAax2D,EAAK,GAAMs7E,EACxB9kB,EAAax2D,EAAK,GAAMu7E,EACxB/kB,EAAax2D,EAAK,GAAMw7E,EACxBjmB,EAAYv1D,EAAK,GAAMm7E,EACvB5lB,EAAYv1D,EAAK,GAAMm7E,EACvB/9E,GAAM,EACN4C,GAAM,GAIP,IAAK,IAA4BxJ,EAAO47D,GAA/B77D,EAAMwkF,EAAS,EAAI,GAA4BxkF,EAAIC,IAAQD,EAAI,CAMvE,GALA8kF,EAAShxB,EACTixB,EAAShxB,EACTD,EAAKkxB,EACLjxB,EAAKkxB,EACLC,EAAOC,EACHnlF,IAAM67D,EAAa,EACtBmpB,EAASS,EACTR,EAASS,EACTP,EAAWQ,OACL,GAAU,IAAN3lF,EACVglF,EAASY,EACTX,EAASY,EACTV,EAAWW,OACL,GAAI9lF,EAAI67D,EAAa,EAAI,CAC/B,IAAMkqB,EAAa/lF,EAAI,GAAM,EAC7B4lB,EAAK7gB,IAAK+2D,EAAaiqB,EAAY,GAAKjqB,EAAaiqB,EAAY,IACjEt3B,EAAkB3oC,MAAOF,EAAMA,GAC/Bo/D,EAASp/D,EAAK/gB,EACdogF,EAASr/D,EAAK9gB,EACdqgF,EAAa,GAAKtrC,GAAakiB,EAAe/7D,EAAI,QAElDglF,EAASM,EACTL,EAASM,EACTJ,EAAWK,EAEZf,EAAQ77E,EACRA,EAAI87E,EACJA,GAASjmF,KAAKylE,WAAYpQ,EAAIC,EAAIixB,EAAQC,GAE1C,IAAIe,EAAUhB,EACViB,EAAUhB,EACViB,EAAcb,EAClB,GAAIH,EAAO,CACVJ,EAAShxB,GAAMkxB,EAASlxB,GACxBixB,EAAShxB,GAAMkxB,EAASlxB,GAExB8wB,EAAOz8E,KAAKG,IAAKs8E,EAAMD,GAEvBD,EAAOF,EAAQY,EACf/8B,GAA2B8hB,OAAQua,EAAMjuD,EAAasyC,EAAapjD,GAGnE,IAFA,IAAMykD,EAAQzkD,EAAK/gB,EACbylE,EAAQ1kD,EAAK9gB,EACV+L,EAAIu0E,EAASv0E,EAAIpH,EAAK,EAAGoH,GAAK,EACtCmuD,EAAYnuD,EAAI,GAAMw5D,EACtBrL,EAAYnuD,EAAI,GAAMy5D,EACtBtL,EAAYnuD,EAAI,GAAM8zE,EAEvBS,EAAU37E,EAAK,EACfy8E,EAAcb,EACdA,EAAUz8E,OACAu8E,IACVa,EAAUlyB,GAAMA,EAAKgxB,GACrBmB,EAAUlyB,GAAMA,EAAKgxB,IAItB58E,EAAUtB,EAAK,GAAMitD,EACrB3rD,EAAUtB,EAAK,GAAMktD,EACrB5rD,EAAUtB,EAAK,GAAMitD,EACrB3rD,EAAUtB,EAAK,GAAMktD,EACrBiM,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB9J,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB7J,EAAax2D,EAAK,GAAMq7E,EACxB7kB,EAAax2D,EAAK,GAAMs7E,EACxB9kB,EAAax2D,EAAK,GAAMu8E,EACxB/lB,EAAax2D,EAAK,GAAMw8E,EACxBhmB,EAAax2D,EAAK,GAAMq7E,EACxB7kB,EAAax2D,EAAK,GAAMs7E,EACxB9kB,EAAax2D,EAAK,GAAMu8E,EACxB/lB,EAAax2D,EAAK,GAAMw8E,EACxBtB,EAAO/7E,EAAIs9E,EACXlnB,EAAYv1D,EAAK,GAAMk7E,EACvB3lB,EAAYv1D,EAAK,GAAMk7E,EAEvBl7E,GAAM,EAENtB,GAHAtB,GAAM,GAGS,GAAMitD,EACrB3rD,EAAUtB,EAAK,GAAMktD,EACrB5rD,EAAUtB,EAAK,GAAMitD,EACrB3rD,EAAUtB,EAAK,GAAMktD,EACrBiM,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB9J,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB7J,EAAax2D,EAAK,GAAMq7E,EACxB7kB,EAAax2D,EAAK,GAAMs7E,EACxB9kB,EAAax2D,EAAK,GAAMu8E,EACxB/lB,EAAax2D,EAAK,GAAMw8E,EACxBhmB,EAAax2D,EAAK,GAAMq7E,EACxB7kB,EAAax2D,EAAK,GAAMs7E,EACxB9kB,EAAax2D,EAAK,GAAMu8E,EACxB/lB,EAAax2D,EAAK,GAAMw8E,EACxBrB,EAAMh8E,EAAIy8E,EACVrmB,EAAYv1D,EAAK,GAAMm7E,EACvB5lB,EAAYv1D,EAAK,GAAMm7E,EACvB/9E,GAAM,EACN4C,GAAM,EAyBN,GApBAq7E,EAAShxB,EACTixB,EAAShxB,EACTD,EAAKkxB,EACLjxB,EAAKkxB,EACLC,EAAOC,EACHX,GACHQ,EAASY,EACTX,EAASY,EACTV,EAAWW,IAEXd,EAASlxB,GAAMA,EAAKgxB,GACpBG,EAASlxB,GAAMA,EAAKgxB,GACpBI,GAAW,GAEZV,EAAQ77E,EACRA,EAAI87E,EAEAsB,EAAUhB,EACViB,EAAUhB,EACViB,EAAcb,EACdH,EAAO,CAUV,IATAJ,EAAShxB,GAAMkxB,EAASlxB,GACxBixB,EAAShxB,GAAMkxB,EAASlxB,GAExB8wB,EAAOz8E,KAAKG,IAAKs8E,EAAMD,GAEvBD,EAAOF,EAAQY,EACf/8B,GAA2B8hB,OAAQua,EAAMjuD,EAAasyC,EAAapjD,GAC7DykD,EAAQzkD,EAAK/gB,EACbylE,EAAQ1kD,EAAK9gB,EACV+L,EAAIu0E,EAASv0E,EAAIpH,EAAK,EAAGoH,GAAK,EACtCmuD,EAAYnuD,EAAI,GAAMw5D,EACtBrL,EAAYnuD,EAAI,GAAMy5D,EACtBtL,EAAYnuD,EAAI,GAAM8zE,EAEvBS,EAAU37E,EAAK,EACfy8E,EAAcb,EACdA,EAAUz8E,OACAu8E,IACVa,EAAUlyB,GAAMA,EAAKgxB,GACrBmB,EAAUlyB,GAAMA,EAAKgxB,IA6BtB,GAzBA58E,EAAUtB,EAAK,GAAMitD,EACrB3rD,EAAUtB,EAAK,GAAMktD,EACrB5rD,EAAUtB,EAAK,GAAMitD,EACrB3rD,EAAUtB,EAAK,GAAMktD,EACrBiM,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB9J,EAAOn5D,EAAK,GAAM6vB,EAClBspC,EAAOn5D,EAAK,GAAMijE,EAClB7J,EAAax2D,EAAK,GAAMq7E,EACxB7kB,EAAax2D,EAAK,GAAMs7E,EACxB9kB,EAAax2D,EAAK,GAAMu8E,EACxB/lB,EAAax2D,EAAK,GAAMw8E,EACxBhmB,EAAax2D,EAAK,GAAMq7E,EACxB7kB,EAAax2D,EAAK,GAAMs7E,EACxB9kB,EAAax2D,EAAK,GAAMu8E,EACxB/lB,EAAax2D,EAAK,GAAMw8E,EACxBtB,EAAO/7E,EAAIs9E,EACXrB,EAAOz8E,KAAKG,IAAKs8E,EAAMF,GACvB3lB,EAAYv1D,EAAK,GAAMk7E,EACvB3lB,EAAYv1D,EAAK,GAAMk7E,EACvB99E,GAAM,EACN4C,GAAM,EAGNhL,KAAKU,OAAS0lF,EACVO,EAAU37E,EAIb,GAHA6+C,GAA2B8hB,OAAQua,EAAMjuD,EAAasyC,EAAapjD,GAC7DykD,EAAQzkD,EAAK/gB,EACbylE,EAAQ1kD,EAAK9gB,EACf0/E,EACH,IAAK,IAAIxkF,EAAIolF,EAASplF,EAAIyJ,EAAIzJ,GAAK,EAClCg/D,EAAYh/D,EAAI,GAAMqqE,EACtBrL,EAAYh/D,EAAI,GAAMsqE,EACtBtL,EAAYh/D,EAAI,IAAO,OAGxB,IAASA,EAAIolF,EAASplF,EAAIyJ,EAAIzJ,GAAK,EAClCg/D,EAAYh/D,EAAI,GAAMqqE,EACtBrL,EAAYh/D,EAAI,GAAMsqE,EACtBtL,EAAYh/D,EAAI,GAAM2kF,GAO3BP,yBAAA,SAActnB,EAAsB3Q,GACnC,IAAMhnD,EAAU1G,KAAK24C,UAAW+U,GAC1BiS,EAAqB3/D,KAAK8kE,qBAAsBp+D,GACtD,GAAIA,IAAY1G,KAAK0G,SAAWi5D,IAAuB3/D,KAAK2/D,mBAAqB,CAChF3/D,KAAK0G,QAAUA,EACf1G,KAAK2/D,mBAAqBA,EAE1B,IAAMvC,EAAap9D,KAAKo9D,WACxB,GAAI,GAAKA,EAAa,CACrB,IAAMlzD,EAAalK,KAAKymE,aAAc//D,GAChC4B,EAAK4B,EAAW5B,GAChBC,EAAK2B,EAAW3B,GAChBsB,EAAKK,EAAWL,GAChBE,EAAKG,EAAWH,GAChBvB,EAAK0B,EAAW1B,GAChBC,EAAKyB,EAAWzB,GAChBuB,EAAKE,EAAWF,GAChBC,EAAKC,EAAWD,GAEhB23D,EAAOr5D,EAAKD,EACZu5D,EAAOp5D,EAAKD,EACZk/E,EAAO79E,EAAKE,EACZ49E,EAAO39E,EAAKC,EAGlBo0D,EAAOt0C,SAASzoB,SAChB,IAAMsH,EAAMy1D,EAAOz1D,IACb23D,EAAalC,EAAOkC,WACpBqnB,EAAS5nF,KAAKylF,aACdnnB,EAAUt+D,KAAK4+D,aAEjBkN,EAAgB,EAAVxN,EACNupB,EAAgB,EAAVvpB,EACJwpB,EAAgB,EAAIn+E,KAAKG,IAjhBd,KAihByB9J,KAAKU,QAC3C0J,EAAI,EAGFw9E,IACLx9E,EAAIm2D,EAAYsnB,GAAQC,EACxBl/E,EAAKkjE,EAAM,GAAMxjE,EAAK8B,EAAIw3D,EAC1Bh5D,EAAKkjE,EAAM,GAAMtjE,EAAK4B,EAAIy3D,EAC1Bj5D,EAAKkjE,EAAM,GAAM/hE,EAAKK,EAAIs9E,EAC1B9+E,EAAKkjE,EAAM,GAAM7hE,EAAKG,EAAIu9E,EAC1B7b,GAAO,EACP+b,GAAO,GAIR,IAAK,IAAItmF,EAAKqmF,EAAS,EAAI,EAAIpmF,EAAO47D,EAAa77D,EAAGA,EAAIC,IAAQD,EACjE6I,EAAIm2D,EAAYsnB,GAAQC,EACxBl/E,EAAKkjE,EAAM,GAAMxjE,EAAK8B,EAAIw3D,EAC1Bh5D,EAAKkjE,EAAM,GAAMtjE,EAAK4B,EAAIy3D,EAC1Bj5D,EAAKkjE,EAAM,GAAM/hE,EAAKK,EAAIs9E,EAC1B9+E,EAAKkjE,EAAM,GAAM7hE,EAAKG,EAAIu9E,EAC1B7b,GAAO,EAGP1hE,EAAIm2D,EAFJsnB,GAAO,GAEiBC,EACxBl/E,EAAKkjE,EAAM,GAAMxjE,EAAK8B,EAAIw3D,EAC1Bh5D,EAAKkjE,EAAM,GAAMtjE,EAAK4B,EAAIy3D,EAC1Bj5D,EAAKkjE,EAAM,GAAM/hE,EAAKK,EAAIs9E,EAC1B9+E,EAAKkjE,EAAM,GAAM7hE,EAAKG,EAAIu9E,EAC1B7b,GAAO,EACP+b,GAAO,EAIRz9E,EAAIm2D,EAAYsnB,GAAQC,EACxBl/E,EAAKkjE,EAAM,GAAMxjE,EAAK8B,EAAIw3D,EAC1Bh5D,EAAKkjE,EAAM,GAAMtjE,EAAK4B,EAAIy3D,EAC1Bj5D,EAAKkjE,EAAM,GAAM/hE,EAAKK,EAAIs9E,EAC1B9+E,EAAKkjE,EAAM,GAAM7hE,EAAKG,EAAIu9E,QArjBUlkB,kBCJxC,cAmCA,OAlCQskB,SAAP,SACC1pB,EAAsB3Q,EACtB4Q,EAAiBC,EACjBG,GAEA,IAAMxN,EAASxD,EAAMwD,OACfu0B,IAAiBv0B,GAAuD,IAA7CA,EAAOlkC,MAAQ08B,GAAkBkU,QAC5DR,EAAelM,EAASA,EAAOxwD,OAAS,EACxCsrE,EAASjK,GAAoB2B,aAAchW,EAAO2Q,EAAOsF,WACzD3B,EAAUgK,EAAOnN,YACjBoD,EAAU+J,EAAOjN,WACnBP,EAASwD,EACTvD,EAASwD,EAUb,OATI,GAAK7E,IACJqoB,GACHjnB,GAAuB,EAAbpB,EAAiB,EAC3BqB,GAAuB,EAAbrB,IAEVoB,GAA6B,GAAlBpB,EAAa,GAAS,EAAI,EACrCqB,GAA6B,GAAlBrB,EAAa,GAAS,IAG/BkB,EAAUE,EAASH,EAAO4N,gBAAkB1N,EAAUE,EAASJ,EAAO6N,cAClE,IAAIyZ,GACVtnB,EACAC,EAASC,EACTyD,EAASC,EACTzD,EAAQC,EACRC,EACAtB,EAAYqoB,GACXnlE,KAAMotC,GAEF,yBCtBR,WACC1sD,EACAkwD,EACAlF,EACAh/B,GAGA,IAAM++B,EAAmB,GACrBi8B,EAAO,EACPC,EAAO,EACPC,EAAO,EACPC,EAAO,EACLC,EAAel3B,EAAOxwD,OAC5B,GAAI,GAAK0nF,EAAe,CACvBJ,EAAOC,EAAO/2B,EAAQ,GACtBg3B,EAAOC,EAAOj3B,EAAQ,GACtB,IAAK,IAAI3vD,EAAI,EAAGA,EAAI6mF,EAAc7mF,GAAK,EAAI,CAC1C,IAAM6E,EAAI8qD,EAAQ3vD,GACZ8E,EAAI6qD,EAAQ3vD,EAAI,GACtBymF,EAAOr+E,KAAKC,IAAKo+E,EAAM5hF,GACvB6hF,EAAOt+E,KAAKG,IAAKm+E,EAAM7hF,GACvB8hF,EAAOv+E,KAAKC,IAAKs+E,EAAM7hF,GACvB8hF,EAAOx+E,KAAKG,IAAKq+E,EAAM9hF,IAGzB,IAAMq7D,EAAqB,IAAfumB,EAAOD,GACbrmB,EAAqB,IAAfwmB,EAAOD,GACnB,IAAS3mF,EAAI,EAAGA,EAAI6mF,EAAc7mF,GAAK,EAChC6E,EAAI8qD,EAAQ3vD,EAAI,GAAMmgE,EACtBr7D,EAAI6qD,EAAQ3vD,EAAI,GAAMogE,EAC5B5V,EAAOvrD,KAAM4F,EAAGC,GAEjB,IAAMstD,EAAKs0B,EAAOD,EACZp0B,EAAKu0B,EAAOD,EAGlBloF,KAAK6qD,GAAU7pD,EACfhB,KAAKqoF,QAAc9lF,EACnBvC,KAAKsoF,GAAoBv8B,EAAOrrD,OAChCV,KAAK8qD,GAAUiB,EACf/rD,KAAK+qD,GAAYiB,EAASqN,MAAO,GACjCr5D,KAAKuoF,GAAY,IAAI3gE,QAAO+rC,EAAIC,GAChC5zD,KAAKgV,KAAO,IAAI4S,QAAO+rC,EAAIC,GAC3B5zD,KAAK2U,SAAW,IAAIiT,QAAO85C,EAAIC,GAC/B3hE,KAAK2qB,GAAM,EACX3qB,KAAKusB,GAASS,EA0LhB,OAvLCxtB,sBAAIgpF,0BAAJ,WACC,OAAOxoF,KAAK8qD,GAAQpqD,QAAU,mCAGvB8nF,4BAAR,WACC,IAAMxzE,EAAOhV,KAAKgV,KACZw2C,EAAaxrD,KAAK6qD,GAAQ71C,KAC1ByzE,EAAMj9B,EAAWplD,EACjBsiF,EAAMl9B,EAAWnlD,EAEvB,GADkB,KACFsD,KAAKwP,IAAKsvE,EAAMzzE,EAAK5O,IADnB,KACsCuD,KAAKwP,IAAKuvE,EAAM1zE,EAAK3O,GAAM,CAClF2O,EAAK1O,IAAKmiF,EAAKC,GAEf,IAAMC,EAAW3oF,KAAKuoF,GAChBK,EALW,KAKgBj/E,KAAKwP,IAAKwvE,EAASviF,GAC9CyiF,EANW,KAMgBl/E,KAAKwP,IAAKwvE,EAAStiF,GACpD,GAAIuiF,GAAgBC,EAAe,CAClC,IAAMC,EAAWF,EAAeH,EAAME,EAASviF,EAAI,EAC7C2iF,EAAWF,EAAeH,EAAMC,EAAStiF,EAAI,EAE7C0lD,EAAS/rD,KAAK8qD,GAChBk+B,EAAahpF,KAAKqoF,GACtB,GAAkB,MAAdW,EAAqB,CACxBA,EAAa,GACbhpF,KAAKqoF,GAAcW,EAEnB,IAAK,IAAIznF,EAAI,EAAGC,EAAOxB,KAAKU,QAAU,EAAGa,EAAIC,EAAMD,GAAK,EAAI,CAC3D,IAAM6E,EAAI2lD,EAAQxqD,GACZ8E,EAAI0lD,EAAQxqD,EAAI,GACtBwqD,EAAQxqD,GAAM6E,EAAI0iF,EAClB/8B,EAAQxqD,EAAI,GAAM8E,EAAI0iF,EACtBC,EAAWxoF,KAAM4F,EAAGC,SAGrB,IAAS9E,EAAI,EAAGC,EAAOxB,KAAKU,QAAU,EAAGa,EAAIC,EAAMD,GAAK,EACvDwqD,EAAQxqD,GAAMynF,EAAYznF,GAAMunF,EAChC/8B,EAAQxqD,EAAI,GAAMynF,EAAYznF,EAAI,GAAMwnF,EAG1C/oF,KAAK2qB,IAAO,KAKfnrB,sBAAIgpF,sBAAJ,WAEC,OADAxoF,KAAKipF,kBACEjpF,KAAK2qB,oCAGbnrB,sBAAIgpF,0BAAJ,WAEC,OADAxoF,KAAKipF,kBACEjpF,KAAK8qD,QAGb,SAAYiB,GACX/rD,KAAKsG,IAAKylD,OAAQxpD,OAAWA,oCAG9B/C,sBAAIgpF,4BAAJ,WACC,OAAOxoF,KAAK+qD,QAMb,SAAciB,GACbhsD,KAAKsG,SAAK/D,EAAWypD,OAAUzpD,oCAGhC/C,sBAAIgpF,yBAAJ,WACC,OAAOxoF,KAAKusB,QAGb,SAAWS,GACVhtB,KAAKsG,SAAK/D,OAAWA,EAAWyqB,oCAGjCw7D,iBAAA,SAAMh4E,GACL,OAAOxQ,KAAKsG,IAAKkK,EAAOu7C,OAAQv7C,EAAOw7C,SAAUx7C,EAAOwc,QAGzDw7D,gBAAA,SAAKv8B,EAAsBC,EAAwBC,GAClD,IAAIxsC,GAAU,EACVupE,GAAY,EAGhB,GAAiB,MAAbj9B,EAAoB,CACvB,IAAMF,EAAS/rD,KAAK8qD,GACdq+B,EAAmBnpF,KAAKsoF,GACxBc,EAAkBn9B,EAAUvrD,OAC5B2oF,EAAU1/E,KAAKC,IAAKw/E,EAAiBD,GAG3C,GAFAnpF,KAAKqoF,QAAc9lF,EACnBvC,KAAK2qB,IAAO,EACRohC,IAAWE,EAAY,CAC1B,IAAK,IAAI1qD,EAAI,EAAGA,EAAI8nF,IAAW9nF,EAC9BwqD,EAAQxqD,GAAM0qD,EAAW1qD,GAG1B,IAASA,EAAI8nF,EAAS9nF,EAAI6nF,IAAmB7nF,EAC5CwqD,EAAOvrD,KAAMyrD,EAAW1qD,IAGrB4nF,IAAqBC,GACxBr9B,EAAOrrD,OAAS0oF,EAChBppF,KAAKsoF,GAAoBc,EACzBzpE,GAAU,GAEVupE,GAAY,OAGTC,IAAqBC,GACxBppF,KAAKsoF,GAAoBc,EACzBzpE,GAAU,GAEVupE,GAAY,EAMf,GAAmB,MAAfh9B,EAAsB,CACzB,IAAMF,EAAWhsD,KAAK+qD,GAEtB,GADA/qD,KAAK2qB,IAAO,EACRqhC,IAAaE,EAAc,CAC9B,IAAMo9B,EAAoBp9B,EAAYxrD,OAEtC,IADM2oF,EAAU1/E,KAAKC,IAAKoiD,EAAStrD,OAAQ4oF,GAClC/nF,EAAI,EAAGA,EAAI8nF,IAAW9nF,EAC9ByqD,EAAUzqD,GAAM2qD,EAAa3qD,GAG9B,IAASA,EAAI8nF,EAAS9nF,EAAI+nF,IAAqB/nF,EAC9CyqD,EAASxrD,KAAM0rD,EAAa3qD,IAGzByqD,EAAStrD,SAAW4oF,IACvBt9B,EAAStrD,OAAS4oF,GAGpBJ,GAAY,EAIb,GAAgB,MAAZ/8B,EAAmB,CACtB,IAAMo9B,EAAWvpF,KAAKusB,GAClBg9D,IAAap9B,IAChBnsD,KAAKusB,GAAS4/B,GACTo9B,EAAW7/B,GAAkBkU,UAAazR,EAAWzC,GAAkBkU,QAC3Ej+C,GAAU,EAEVupE,GAAY,GAMf,GAAIvpE,EAAU,CACb,IAAM+B,EAAS1hB,KAAK6qD,GACpBnpC,EAAOoxC,cAAWvwD,EAClBmf,EAAO/D,eACGurE,GACVlpF,KAAK6qD,GAAQyB,iBAGd,OAAOtsD,MAGRwoF,kBAAA,SAAOxnF,GACN,OAAO,IAAIwnF,EAAkBxnF,EAAQhB,KAAK8qD,GAAS9qD,KAAK+qD,GAAW/qD,KAAKusB,KAGzEi8D,qBAAA,SAAUvsE,GAGT,IAFA,IAAMzZ,EAAkB,GAClBupD,EAAS/rD,KAAK+rD,OACXxqD,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,EAAMD,GAAK,EAAI,CACxD,IAAMwE,EAAQ,IAAI6hB,QAAOmkC,EAAQxqD,EAAI,GAAKwqD,EAAQxqD,EAAI,IACtDiB,EAAOhC,KAAMyb,EAAUoL,MAAOthB,EAAOA,IAEtC,OAAOvD,GAGRgmF,sBAAA,SAAWj8B,GACV,OAAOA,EAAQ/+B,IAAK,IAAIqK,KAAKC,UAAU93B,KAAK8qD,QAAYjzB,KAAKC,UAAU93B,KAAK+qD,QAAc/qD,KAAKusB,6BC5OhG,WACCi9D,EACAx9B,EACA9oD,EACA8pB,GAJD,MAMClmB,YAAOs8C,GAAWqmC,mBACdD,aAAwBE,EAC3BziF,EAAKq6C,KAAMkoC,IAEXviF,EAAK8kB,KAAK4qC,QAAS,EACnB1vD,EAAK6mD,OAAOxnD,KAAK,OAAM/D,OAAWA,EAAWW,GAC7C+D,EAAKiqD,OAAS,IAAIs3B,GAAkBvhF,EAAMuiF,EAAcx9B,EAAWh/B,GACnE/lB,EAAKgV,UAAUtH,SAASpO,SAAUU,EAAKiqD,OAAOv8C,UAC9C1N,EAAK+N,KAAKzO,SAAUU,EAAKiqD,OAAOl8C,SAOnC,OA1BgClV,OAuB/B4pF,kBAAA,WACC,OAAO,IAAIA,EAAY1pF,UAxBO88D,kBCEhC,cA0CA,OAzCQ6sB,gBAAP,SAAsB/oF,EAAekqC,GACpC,GAAI,GAAKlqC,GAASA,EAAQkqC,EAAUpqC,OACnC,IACC,OAAOm3B,KAAK80B,MAAO7hB,EAAWlqC,IAAW,GACxC,MAAOgV,IAIV,OAAO,GAGD+zE,cAAP,SACCjuE,EAA8B6wC,GAE9B,IAAMzhB,EAAYyhB,EAAQzhB,UACpB0hB,EAAa9wC,EAAM,IACzB,GAAI,GAAK8wC,GAAcA,EAAa1hB,EAAUpqC,OAAS,CACtD,IAAIgsD,EAASH,EAAQ+vB,WAAWxgE,IAAK0wC,GACvB,MAAVE,IACHA,EAAS70B,KAAK80B,MAAO7hB,EAAW0hB,IAChCD,EAAQ+vB,WAAWh2E,IAAKkmD,EAAYE,IAErC,IAAMgB,EAAQi8B,EAAYxpF,OACzBusD,EAAQ,GACRA,EAAQ,GACRK,GAAewP,aACf7P,EAAQ,IAET,OAAO6vB,GAAmB1iB,YAAan+C,EAAM6wC,EAASmB,GAEvD,OAAO,MAGDi8B,SAAP,SACCz4B,EACAlF,EACA/zB,EACAjL,GAEA,OAAO,IAAI08D,GAAYx4B,EAAQlF,EAAU/zB,EAAajL,SCzC3C48D,GAAgB,WAC5BjgC,GAAiBvG,GAAWqmC,MAAS1B,GAAoB5nF,OACzDspD,GAAqBrG,GAAWqmC,MAASE,GAAY9vB,4BCFrD,WAAawE,EAAsBC,EAAiBC,UACnDz3D,YAAOu3D,EAAQC,EAASC,EAAS,EAAG,EAAG,SAYzC,OAdwCz+D,OAKvC+pF,iBAAA,SAAMn8B,GAGL,OAFA5mD,YAAMwZ,eAAMotC,GACZ1tD,KAAK0G,QAAUgnD,EAAMhnD,SAAW2lB,UAAQyzC,MACjC9/D,MAGR6pF,mBAAA,SAAQn8B,QAX+BkS,kBCDxC,cAUA,OATQkqB,SAAP,SACCzrB,EAAsB3Q,EACtB4Q,EAAiBC,GAEjB,OAAO,IAAIsrB,GACVxrB,EACAC,EAASC,GACRj+C,KAAMotC,wBCRT,WAAal7C,uBAAAA,EAAmB4wC,GAAW2mC,MAC1CjjF,YAAO0L,SAMT,OARgC1S,OAK/BkqF,kBAAA,WACC,OAAO,IAAIA,GAAa1oC,KAAMthD,UANA87D,kBCEhC,cAMA,OALQmuB,cAAP,SACCvuE,EAA8B6wC,GAE9B,OAAOgwB,GAAmB1iB,YAAan+C,EAAM6wC,EAAS,IAAIy9B,UCH/CE,GAAgB,WAC5BvgC,GAAiBvG,GAAW2mC,MAASD,GAAoB3pF,OACzDspD,GAAqBrG,GAAW2mC,MAASE,GAAYpwB,cxDRtD,SAAY0hB,GACXA,mBAEAA,eACAA,2BACAA,qBACAA,uBACAA,4BACAA,oBACAA,sBAEAA,+BACAA,6BACAA,qBACAA,0BACAA,oCACAA,wCAEAA,sBACAA,6BACAA,qBACAA,2BACAA,4BACAA,4CAEAA,iCACAA,wBACAA,wCACAA,oCACAA,4DACAA,0BACAA,kCACAA,uBACAA,sBAjCD,CAAYA,KAAAA,QyDIZ,kBAAA,cA0BA,OAvBQ4O,MAAP,SAAY33E,GACX,OAAOxS,KAAKoqF,SAAU53E,IAAU+oE,GAAiB8O,WAG3CF,WAAP,SAAiBz8B,EAAkC48B,GAClD,GAAa,MAAT58B,EAAgB,CACnB,GAAI1tD,KAAK8b,IAAK4xC,EAAMl7C,MAAS83E,EAC5B,OAAO,EAIR,IADA,IAAM7pE,EAAWitC,EAAMjtC,SACdlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EACnD,GAAIvB,KAAKgZ,SAAUyH,EAAUlf,GAAK+oF,GACjC,OAAO,EAIV,OAAO,GAGDH,MAAP,SAAY33E,EAAkB83E,GAC7BtqF,KAAKoqF,SAAU53E,GAAS83E,GAvBlBH,WAAmD,sBCA3D,cAUA,OATQI,cAAP,SACC7uE,EAA8B6wC,GAE9B,OAAOgwB,GAAmB1iB,YAAan+C,EAAM6wC,EAASg+B,EAAiBpqF,WAGjEoqF,SAAP,WACC,OAAO,IAAI9G,SCLA+G,GAAqB,WACjC7gC,GAAiBvG,GAAWogC,WAAcuB,GAAyB5kF,OACnEspD,GAAqBrG,GAAWogC,WAAc+G,GAAiB1wB,YAC/DswB,GAAmB7jF,IAClB88C,GAAWogC,UACXjI,GAAiB8O,UAAY9O,GAAiB9e,6BCPhD,4DAs2CA,OAt2CoD38D,OACnD2qF,iBAAA,SAAM/8B,GACL5mD,YAAMwZ,eAAMotC,GACZ,IAAM2Q,EAASr+D,KAAKq+D,OACdC,EAAUt+D,KAAK4+D,aACfL,EAAUv+D,KAAK8+D,YAGrBT,EAAOr0C,YAAY1oB,SACnB,IAAMqH,EAAU01D,EAAO11D,QACnBD,EAAe,EAAV61D,EA6GT,OA1GA51D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAI9B31D,GAHAD,GAAM,GAGQ,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAI9B31D,GAHAD,GAAM,GAGQ,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAI9B31D,GAHAD,GAAM,GAGQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAI9B31D,GAHAD,GAAM,GAGQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAG9B31D,GAFAD,GAAM,GAEQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAI9B31D,GAHAD,GAAM,GAGQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAG9B31D,GAFAD,GAAM,GAEQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAI9B31D,GAHAD,GAAM,GAGQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAG9B31D,GAFAD,GAAM,GAEQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAI9B31D,GAHAD,GAAM,GAGQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAG9B31D,GAFAD,GAAM,GAEQ,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAC9B31D,EAASD,EAAK,GAAM41D,EAAU,GAG9Bt+D,KAAK0qE,WAEL1qE,KAAKsB,OAAQosD,GACN1tD,MAGRyqF,mBAAA,SAAQ/8B,GACP,IAAM2Q,EAASr+D,KAAKq+D,OACpBr+D,KAAK0qF,kBAAmBrsB,EAAQ3Q,GAChC1tD,KAAK2qF,oBAAqBtsB,EAAQ3Q,GAClC1tD,KAAKkrE,YAAa7M,EAAQ3Q,GAC1B1tD,KAAK4qF,gBAAiBvsB,EAAQ3Q,GAC9B1tD,KAAK6qF,cAAexsB,EAAQ3Q,GAC5B1tD,KAAKwxB,WAAY6sC,EAAQ3Q,IAMhB+8B,8BAAV,SAA6BpsB,EAAsB3Q,GAClD,IAAM14C,EAAO04C,EAAM14C,KACbs2C,EAAQt2C,EAAK5O,EACbmlD,EAAQv2C,EAAK3O,EACbs4D,EAAmB3+D,KAAK6qE,mBAAoBnd,GAC5CzpD,EAASypD,EAAMzpD,OACf0mE,EACLrf,IAAUtrD,KAAKsrD,OACfC,IAAUvrD,KAAKurD,OACftnD,IAAWjE,KAAKiE,OAEX6mE,EAAuB9qE,KAAK2+D,mBAAqBA,EACjD7Q,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MACrBy6E,EAAoB79E,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,EACnF,GAAI0yC,GAAiBG,GAAsB+S,EAAkB,CAC5D79E,KAAKsrD,MAAQA,EACbtrD,KAAKurD,MAAQA,EACbvrD,KAAK2+D,iBAAmBA,EACxB3+D,KAAKiE,OAASA,EACV0mE,IAEH3qE,KAAK+D,OAASyD,IAGdxH,KAAK2/D,mBAAqBn4D,KAG3BxH,KAAKi4B,YAAczwB,IAGnBxH,KAAKijE,sBAAwBz7D,IAC7B62D,EAAOv0C,aAAaxoB,SAiCpB,IAAMmQ,EAAIguD,EAAcxnC,EAClB07B,EAAa,GAARrI,GAAe,GAAKA,GAAS75C,GAAKA,GACvCmiD,EAAa,GAARrI,GAAe,GAAKA,GAAS95C,GAAKA,GACvCgjD,EAAK9qD,KAAKwP,IAAKw6C,GACfe,EAAK/qD,KAAKwP,IAAKy6C,GACfnqC,EAAIxlB,EAAS0F,KAAKC,IAAK6qD,EAAIC,GAC3ByrB,EAAK12D,EAAIgrC,EACT4rB,EAAK52D,EAAIirC,EAET1E,EAAoBtC,EAAMzxC,UAAU+zC,kBACpC7oC,EAAOk3C,EAAOl3C,KACpBA,EAAK7gB,KAAMqtD,GAAKC,GAChB5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM7e,EAAK6e,EAAK/gB,EACVoC,EAAK2e,EAAK9gB,EAChB8gB,EAAK7gB,IAAK,GAAIstD,GACd5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAMtd,EAAKsd,EAAK/gB,EACV4D,EAAKmd,EAAK9gB,EACVykF,EAAMjhF,EAAKvB,EACXyiF,EAAM/gF,EAAKxB,EACXwiF,EAAO7K,EAAK2K,EACZG,EAAO9K,EAAK4K,EACZxiF,EAAKD,EAAK0iF,EACVviF,EAAKD,EAAKyiF,EACVnN,EAAKj0E,EAAKihF,EACV/M,EAAK/zE,EAAK+gF,EACVhhF,EAAK+zE,EAAKkN,EACV/gF,EAAK8zE,EAAKkN,EACVC,EAAMl7B,EAAkBkE,GACxBi3B,EAAMn7B,EAAkBmE,GACxBi3B,EAAMF,EAAMrhF,EACZwhF,EAAMF,EAAMnhF,EACZshF,EAAOjL,EAAK+K,EACZG,EAAOlL,EAAKgL,EACZrN,EAAKn0E,EAAKyhF,EACVrN,EAAKj0E,EAAKuhF,EACVC,EAAKxN,EAAK8M,EACVW,EAAKxN,EAAK8M,EACVW,EAAKF,EAAKR,EACVW,EAAKF,EAAKR,EACVW,EAAK5N,EAAK8M,EACVe,EAAK5N,EAAK8M,EACVe,EAAKF,EAAKZ,EACVe,EAAKF,EAAKZ,EACV/G,EAAMgH,EAAMJ,EACZ3G,GAAMgH,EAAMJ,EACZiB,GAAMd,EAAMJ,EACZmB,GAAMd,EAAMJ,EACZmB,GAAMhB,EAAME,EACZe,GAAMhB,EAAME,EACZe,GAAMF,GAAMZ,EACZe,GAAMF,GAAMZ,EACZe,GAAMF,GAAMtB,EACZyB,GAAMF,GAAMtB,EACZyB,GAAMF,GAAMtB,EACZyB,GAAMF,GAAMtB,EACZyB,GAAMN,GAAMtB,EACZ6B,GAAMN,GAAMtB,EACZ6B,GAAMF,GAAM1B,EACZ6B,GAAMF,GAAM1B,EACZ6B,GAAMZ,GAAMpB,EACZiC,GAAMZ,GAAMpB,EACZiC,GAAMF,GAAM9B,EACZiC,GAAMF,GAAM9B,EACZiC,GAAMhB,GAAMpB,EACZqC,GAAMhB,GAAMpB,EACZqC,GAAMF,GAAMlC,EACZqC,GAAMF,GAAMlC,EAGlBjrF,KAAKo/D,eAAiBp/D,KAAKylE,WAAYn9D,EAAIE,EAAIqB,EAAIG,GACnDhK,KAAKq/D,eAAiBr/D,KAAKylE,WAAYn9D,EAAIE,EAAI07E,EAAKC,IACpDnkF,KAAKw/D,WAAax/D,KAAKylE,WAAYn9D,EAAIE,EAAID,EAAIE,GAG/C,IAAM61D,GAAUt+D,KAAK4+D,aACfl1D,GAAW20D,EAAO30D,SACpBtB,GAAe,EAAVk2D,GAGT50D,GAAUtB,GAAK,GAAME,EACrBoB,GAAUtB,GAAK,GAAMI,EACrBkB,GAAUtB,GAAK,GAAMG,EACrBmB,GAAUtB,GAAK,GAAMK,EACrBiB,GAAUtB,GAAK,GAAMojF,EACrB9hF,GAAUtB,GAAK,GAAMqjF,EACrB/hF,GAAUtB,GAAK,GAAMsjF,EACrBhiF,GAAUtB,GAAK,GAAMujF,EAIrBjiF,IAHAtB,IAAM,GAGS,GAAM2B,EACrBL,GAAUtB,GAAK,GAAM6B,EACrBP,GAAUtB,GAAK,GAAM01E,EACrBp0E,GAAUtB,GAAK,GAAM21E,EACrBr0E,GAAUtB,GAAK,GAAM0jF,EACrBpiF,GAAUtB,GAAK,GAAM2jF,EACrBriF,GAAUtB,GAAK,GAAMwjF,EACrBliF,GAAUtB,GAAK,GAAMyjF,EAIrBniF,IAHAtB,IAAM,GAGS,GAAMkkF,GACrB5iF,GAAUtB,GAAK,GAAMmkF,GACrB7iF,GAAUtB,GAAK,GAAMokF,GACrB9iF,GAAUtB,GAAK,GAAMqkF,GACrB/iF,GAAUtB,GAAK,GAAM0kF,GACrBpjF,GAAUtB,GAAK,GAAM2kF,GACrBrjF,GAAUtB,GAAK,GAAM4kF,GACrBtjF,GAAUtB,GAAK,GAAM6kF,GAIrBvjF,IAHAtB,IAAM,GAGS,GAAMwkF,GACrBljF,GAAUtB,GAAK,GAAMykF,GACrBnjF,GAAUtB,GAAK,GAAMskF,GACrBhjF,GAAUtB,GAAK,GAAMukF,GACrBjjF,GAAUtB,GAAK,GAAMglF,GACrB1jF,GAAUtB,GAAK,GAAMilF,GACrB3jF,GAAUtB,GAAK,GAAM8kF,GACrBxjF,GAAUtB,GAAK,GAAM+kF,GAIrBzjF,IAHAtB,IAAM,GAGS,GAAMG,EACrBmB,GAAUtB,GAAK,GAAMK,EACrBiB,GAAUtB,GAAK,GAAMyB,EACrBH,GAAUtB,GAAK,GAAM4B,EACrBN,GAAUtB,GAAK,GAAM2B,EACrBL,GAAUtB,GAAK,GAAM6B,EAIrBP,IAHAtB,IAAM,GAGS,GAAMojF,EACrB9hF,GAAUtB,GAAK,GAAMqjF,EACrB/hF,GAAUtB,GAAK,GAAMsjF,EACrBhiF,GAAUtB,GAAK,GAAMujF,EACrBjiF,GAAUtB,GAAK,GAAM41E,EACrBt0E,GAAUtB,GAAK,GAAM61E,EACrBv0E,GAAUtB,GAAK,GAAM0jF,EACrBpiF,GAAUtB,GAAK,GAAM2jF,EACrBriF,GAAUtB,GAAK,GAAMwjF,EACrBliF,GAAUtB,GAAK,GAAMyjF,EAIrBniF,IAHAtB,IAAM,IAGS,GAAM87E,EACrBx6E,GAAUtB,GAAK,GAAM+7E,GACrBz6E,GAAUtB,GAAK,GAAM8iF,EACrBxhF,GAAUtB,GAAK,GAAM+iF,EACrBzhF,GAAUtB,GAAK,GAAM8iF,EACrBxhF,GAAUtB,GAAK,GAAM+iF,EACrBzhF,GAAUtB,GAAK,GAAM4jF,GACrBtiF,GAAUtB,GAAK,GAAM6jF,GAIrBviF,IAHAtB,IAAM,GAGS,GAAMkkF,GACrB5iF,GAAUtB,GAAK,GAAMmkF,GACrB7iF,GAAUtB,GAAK,GAAMokF,GACrB9iF,GAAUtB,GAAK,GAAMqkF,GACrB/iF,GAAUtB,GAAK,GAAMgkF,GACrB1iF,GAAUtB,GAAK,GAAMikF,GACrB3iF,GAAUtB,GAAK,GAAMwkF,GACrBljF,GAAUtB,GAAK,GAAMykF,GACrBnjF,GAAUtB,GAAK,GAAMskF,GACrBhjF,GAAUtB,GAAK,GAAMukF,GAIrBjjF,IAHAtB,IAAM,IAGS,GAAM4kF,GACrBtjF,GAAUtB,GAAK,GAAM6kF,GACrBvjF,GAAUtB,GAAK,GAAM8jF,GACrBxiF,GAAUtB,GAAK,GAAM+jF,GACrBziF,GAAUtB,GAAK,GAAMglF,GACrB1jF,GAAUtB,GAAK,GAAMilF,KAOb5C,gCAAV,SAA+BpsB,EAAsB3Q,GACpD,IAAM3pD,EAAS2pD,EAAM3pD,OACrB,GAAIA,IAAW/D,KAAK+D,OAAS,CAC5B/D,KAAK+D,OAASA,EAGd/D,KAAKi4B,YAAczwB,IAGnB62D,EAAO8L,eAAe7oE,SACtB,IAAMmgE,EAAYpD,EAAOoD,UAErBgJ,EAAe,EADHzqE,KAAK4+D,aAEf0uB,EAAM,EAAIttF,KAAKw/D,WAAax/D,KAAKo/D,eACjCmuB,EAAM,EAAIvtF,KAAKw/D,WAAax/D,KAAKq/D,eAGnCt7D,EAAS4mD,GAAalgD,UACzBg3D,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,IAENhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,GAIH1mE,EAAS4mD,GAAahgD,WACzB82D,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,IAENhJ,EAAWgJ,EAAK,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,GAIH1mE,EAAS4mD,GAAa9/C,aACzB42D,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,IAENhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,GAIH1mE,EAAS4mD,GAAa5/C,cACzB02D,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,IAENhJ,EAAWgJ,EAAK,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,GAIPhJ,EAAWgJ,EAAK,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAItBhJ,GAHAgJ,GAAM,GAGU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAItBhJ,GAHAgJ,GAAM,GAGU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAItBhJ,GAHAgJ,GAAM,GAGU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM8iB,EACtB9rB,EAAWgJ,EAAK,GAAM,EAItBhJ,GAHAgJ,GAAM,GAGU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EAGtBhJ,GAFAgJ,GAAM,GAEU,GAAM6iB,EACtB7rB,EAAWgJ,EAAK,GAAM,EACtBhJ,EAAWgJ,EAAK,GAAM,EACtBA,GAAM,IAIEggB,4BAAV,SAA2BpsB,EAAsB3Q,GAChD,IAAMI,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MACrBs8D,EAAahS,EAAMI,OAAOmJ,KAChC,GAAIj3D,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,GAAeynC,IAAe1/D,KAAK0/D,WAAa,CAC5G1/D,KAAKi4B,YAAcA,EACnBj4B,KAAKy/D,YAAcA,EACnBz/D,KAAK0/D,WAAaA,EAClBrB,EAAOwL,WAAWvoE,SAClB+8D,EAAOyL,gBAAgBxoE,SAEvB,IAAM6lB,EAAOk3C,EAAO6f,SACpBl+E,KAAKm+E,SAAUn+E,KAAKw/D,WAAYvnC,EAAa9Q,GAC7C,IAAM45C,EAAM55C,EAAM,GACZ05C,EAAM15C,EAAM,GACZ25C,EAAM35C,EAAM,GAElBnnB,KAAKm+E,SAAUn+E,KAAKo/D,eAAgBnnC,EAAa9Q,GACjD,IAAM85C,EAAM95C,EAAM,GACZg6C,EAAMh6C,EAAM,GACZk6C,EAAMl6C,EAAM,GAElBnnB,KAAKm+E,SAAUn+E,KAAKq/D,eAAgBpnC,EAAa9Q,GACjD,IAAM+5C,EAAM/5C,EAAM,GACZi6C,EAAMj6C,EAAM,GACZm6C,EAAMn6C,EAAM,GAEZm3C,EAAUt+D,KAAK4+D,aACf2C,EAAQlD,EAAOkD,MACfC,EAAcnD,EAAOmD,YACvB/xD,EAAe,EAAV6uD,EACLtzD,EAAe,EAAVszD,EACHgvB,EAAM,EAAIttF,KAAKw/D,WAAax/D,KAAKo/D,eACjCmuB,EAAM,EAAIvtF,KAAKw/D,WAAax/D,KAAKq/D,eAEnC+kB,EAAMljB,EACNmjB,EAAMjjB,EACNosB,EAAOzsB,EACP0sB,EAAO5sB,EACJnB,EAAa9U,GAAiBx+C,MACpCg4E,EAAM,EACNC,EAAM/iB,EACNksB,EAAO,EACPC,EAAO3sB,GAER,IAAIwjB,EAAMrjB,EACNsjB,EAAMpjB,EACNusB,EAAO3sB,EACP4sB,EAAO9sB,EACJnB,EAAa9U,GAAiBl+C,QACpC43E,EAAM,EACNC,EAAMljB,EACNqsB,EAAO,EACPC,EAAO7sB,GAER,IAAI0jB,EAAMtjB,EACNujB,EAAMrjB,EACNwsB,EAAO7sB,EACP8sB,EAAOhtB,EACJnB,EAAa9U,GAAiBt+C,SACpCk4E,EAAM,EACNC,EAAMnjB,EACNssB,EAAO,EACPC,EAAO/sB,GAER,IAAI4jB,EAAMzjB,EACN0jB,EAAMxjB,EACN2sB,EAAO/sB,EACPgtB,EAAOltB,EACJnB,EAAa9U,GAAiBp+C,OACpCk4E,EAAM,EACNC,EAAMtjB,EACNysB,EAAO,EACPC,EAAOjtB,GAER,IAAMktB,EAAO,IAAOrJ,EAAMJ,GACpB0J,EAAO,IAAO5J,EAAMI,GAGpB1gF,EAAS/D,KAAK+D,OAChBA,EAAS4mD,GAAalgD,UACzB82D,EAAO9xD,EAAK,GAAMq+E,EAClBvsB,EAAO9xD,EAAK,GAAM+9E,EAClBhsB,EAAax2D,EAAK,GAAM+iF,EACxBvsB,EAAax2D,EAAK,GAAMyiF,EACxBjsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM+9E,EAClBhsB,EAAax2D,EAAK,GAAM+iF,EACxBvsB,EAAax2D,EAAK,GAAMyiF,EACxBjsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMq+E,EAClBvsB,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM+iF,EACxBvsB,EAAax2D,EAAK,GAAMyiF,EACxBjsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM+iF,EACxBvsB,EAAax2D,EAAK,GAAMyiF,EACxBjsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EACxBrxD,GAAM,EACNzE,GAAM,IAENu2D,EAAO9xD,EAAK,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi1E,EAAM4I,EACxB/rB,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi1E,EAAM4I,EACxB/rB,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EACxB7xD,GAAM,EACNzE,GAAM,GAIHjH,EAAS4mD,GAAahgD,WACzB42D,EAAO9xD,EAAK,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM+9E,EAClBhsB,EAAax2D,EAAK,GAAM2iF,EACxBnsB,EAAax2D,EAAK,GAAMyiF,EACxBjsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi+E,EAClBnsB,EAAO9xD,EAAK,GAAM+9E,EAClBhsB,EAAax2D,EAAK,GAAM2iF,EACxBnsB,EAAax2D,EAAK,GAAMyiF,EACxBjsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM2iF,EACxBnsB,EAAax2D,EAAK,GAAMyiF,EACxBjsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi+E,EAClBnsB,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM2iF,EACxBnsB,EAAax2D,EAAK,GAAMyiF,EACxBjsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EACxBrxD,GAAM,EACNzE,GAAM,IAENu2D,EAAO9xD,EAAK,GAAM60E,EAAMgJ,EACxB/rB,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAAMgJ,EACxB/rB,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EACxB7xD,GAAM,EACNzE,GAAM,GAIHjH,EAAS4mD,GAAa9/C,aACzB02D,EAAO9xD,EAAK,GAAMq+E,EAClBvsB,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM+iF,EACxBvsB,EAAax2D,EAAK,GAAM6iF,EACxBrsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM+iF,EACxBvsB,EAAax2D,EAAK,GAAM6iF,EACxBrsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMq+E,EAClBvsB,EAAO9xD,EAAK,GAAMm+E,EAClBpsB,EAAax2D,EAAK,GAAM+iF,EACxBvsB,EAAax2D,EAAK,GAAM6iF,EACxBrsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAMm+E,EAClBpsB,EAAax2D,EAAK,GAAM+iF,EACxBvsB,EAAax2D,EAAK,GAAM6iF,EACxBrsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EACxBrxD,GAAM,EACNzE,GAAM,IAENu2D,EAAO9xD,EAAK,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi1E,EAAM4I,EACxB/rB,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi1E,EAAM4I,EACxB/rB,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EACxB7xD,GAAM,EACNzE,GAAM,GAIHjH,EAAS4mD,GAAa5/C,cACzBw2D,EAAO9xD,EAAK,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM2iF,EACxBnsB,EAAax2D,EAAK,GAAM6iF,EACxBrsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi+E,EAClBnsB,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM2iF,EACxBnsB,EAAax2D,EAAK,GAAM6iF,EACxBrsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAMm+E,EAClBpsB,EAAax2D,EAAK,GAAM2iF,EACxBnsB,EAAax2D,EAAK,GAAM6iF,EACxBrsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EAExB91D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi+E,EAClBnsB,EAAO9xD,EAAK,GAAMm+E,EAClBpsB,EAAax2D,EAAK,GAAM2iF,EACxBnsB,EAAax2D,EAAK,GAAM6iF,EACxBrsB,EAAax2D,EAAK,GAAM81D,EACxBU,EAAax2D,EAAK,GAAM81D,EACxBrxD,GAAM,EACNzE,GAAM,IAENu2D,EAAO9xD,EAAK,GAAM60E,EAAMgJ,EACxB/rB,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAAMgJ,EACxB/rB,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EACxB7xD,GAAM,EACNzE,GAAM,GAIPu2D,EAAO9xD,EAAK,GAAMi1E,EAAM4I,EACxB/rB,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAMgjF,EACxBxsB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAAMgJ,EACxB/rB,EAAO9xD,EAAK,GAAM20E,EAClB5iB,EAAax2D,EAAK,GAAMgjF,EACxBxsB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi1E,EAAM4I,EACxB/rB,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAMgjF,EACxBxsB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAAMgJ,EACxB/rB,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM20E,EAAMmJ,EACxB/rB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMq5E,EACxB7iB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMijF,EACxBzsB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMijF,EACxBzsB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMijF,EACxBzsB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM,EAClB+xD,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMijF,EACxBzsB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAMi1E,EAClBnjB,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAMi1E,EAAM4I,EACxB/rB,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAMgjF,EACxBxsB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAAMgJ,EACxB/rB,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAClB/iB,EAAO9xD,EAAK,GAAM+0E,EAAM+I,EACxB/rB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAGNu2D,GAJA9xD,GAAM,GAIM,GAAMi1E,EAAM4I,EACxB/rB,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAM25E,EACxBnjB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM,EAClB8xD,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAMgjF,EACxBxsB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EAExBt2D,GAAM,EAENu2D,GAHA9xD,GAAM,GAGM,GAAM60E,EAAMgJ,EACxB/rB,EAAO9xD,EAAK,GAAM+0E,EAClBhjB,EAAax2D,EAAK,GAAMu5E,EACxB/iB,EAAax2D,EAAK,GAAMy5E,EACxBjjB,EAAax2D,EAAK,GAAMq2D,EACxBG,EAAax2D,EAAK,GAAMs2D,EACxB7xD,GAAM,EACNzE,GAAM,IAIEy/E,0BAAV,SAAyBpsB,EAAsB3Q,GAC9C,IAAMhnD,EAAU1G,KAAK24C,UAAW+U,GAC1BiS,EAAqB3/D,KAAK8kE,qBAAsBp+D,GACtD,GAAIA,IAAY1G,KAAK0G,SAAWi5D,IAAuB3/D,KAAK2/D,mBAAqB,CAChF3/D,KAAK0G,QAAUA,EACf1G,KAAK2/D,mBAAqBA,EAE1B,IAAMz1D,EAAalK,KAAKymE,aAAc//D,GAChC4B,EAAK4B,EAAW5B,GAChBC,EAAK2B,EAAW3B,GAChBsB,EAAKK,EAAWL,GAChBE,EAAKG,EAAWH,GAChBvB,EAAK0B,EAAW1B,GAChBC,EAAKyB,EAAWzB,GAChBuB,EAAKE,EAAWF,GAChBC,EAAKC,EAAWD,GAEhB6zE,EAAK,IAAOx1E,EAAKC,GACjBw1E,EAAK,IAAOv1E,EAAKC,GACjB+iF,EAAK,IAAOzhF,EAAKF,GACjB4hF,EAAK,IAAOxhF,EAAKD,GAEjBkkF,EAAO,GAAMluF,KAAKw/D,WAAax/D,KAAKo/D,eACpC+uB,EAAO,GAAMnuF,KAAKw/D,WAAax/D,KAAKq/D,eACpCvB,EAAMowB,GAAQ3lF,EAAKD,GACnBy1D,EAAMmwB,GAAQzlF,EAAKD,GACnBw1D,EAAMmwB,GAAQpkF,EAAKzB,GACnB21D,EAAMkwB,GAAQlkF,EAAKzB,GAGzB61D,EAAOt0C,SAASzoB,SAChB,IAAMsH,EAAMy1D,EAAOz1D,IAEfkjE,EAAgB,EADJ9rE,KAAK4+D,aAIrBh2D,EAAKkjE,EAAM,GAAMxjE,EACjBM,EAAKkjE,EAAM,GAAMtjE,EACjBI,EAAKkjE,EAAM,GAAMxjE,EAAKw1D,EACtBl1D,EAAKkjE,EAAM,GAAMtjE,EAAKu1D,EACtBn1D,EAAKkjE,EAAM,GAAMxjE,EAAK01D,EACtBp1D,EAAKkjE,EAAM,GAAMtjE,EAAKy1D,EACtBr1D,EAAKkjE,EAAM,GAAMxjE,EAAKw1D,EAAME,EAC5Bp1D,EAAKkjE,EAAM,GAAMtjE,EAAKu1D,EAAME,EAI5Br1D,GAHAkjE,GAAO,GAGI,GAAMvjE,EAAKu1D,EACtBl1D,EAAKkjE,EAAM,GAAMrjE,EAAKs1D,EACtBn1D,EAAKkjE,EAAM,GAAMvjE,EACjBK,EAAKkjE,EAAM,GAAMrjE,EACjBG,EAAKkjE,EAAM,GAAMvjE,EAAKu1D,EAAME,EAC5Bp1D,EAAKkjE,EAAM,GAAMrjE,EAAKs1D,EAAME,EAC5Br1D,EAAKkjE,EAAM,GAAMvjE,EAAKy1D,EACtBp1D,EAAKkjE,EAAM,GAAMrjE,EAAKw1D,EAItBr1D,GAHAkjE,GAAO,GAGI,GAAM/hE,EAAKi0D,EACtBp1D,EAAKkjE,EAAM,GAAM7hE,EAAKg0D,EACtBr1D,EAAKkjE,EAAM,GAAM/hE,EAAK+zD,EAAME,EAC5Bp1D,EAAKkjE,EAAM,GAAM7hE,EAAK8zD,EAAME,EAC5Br1D,EAAKkjE,EAAM,GAAM/hE,EACjBnB,EAAKkjE,EAAM,GAAM7hE,EACjBrB,EAAKkjE,EAAM,GAAM/hE,EAAK+zD,EACtBl1D,EAAKkjE,EAAM,GAAM7hE,EAAK8zD,EAItBn1D,GAHAkjE,GAAO,GAGI,GAAMjiE,EAAKi0D,EAAME,EAC5Bp1D,EAAKkjE,EAAM,GAAM9hE,EAAK+zD,EAAME,EAC5Br1D,EAAKkjE,EAAM,GAAMjiE,EAAKm0D,EACtBp1D,EAAKkjE,EAAM,GAAM9hE,EAAKi0D,EACtBr1D,EAAKkjE,EAAM,GAAMjiE,EAAKi0D,EACtBl1D,EAAKkjE,EAAM,GAAM9hE,EAAK+zD,EACtBn1D,EAAKkjE,EAAM,GAAMjiE,EACjBjB,EAAKkjE,EAAM,GAAM9hE,EAIjBpB,GAHAkjE,GAAO,GAGI,GAAMxjE,EAAKw1D,EACtBl1D,EAAKkjE,EAAM,GAAMtjE,EAAKu1D,EACtBn1D,EAAKkjE,EAAM,GAAMgS,EACjBl1E,EAAKkjE,EAAM,GAAMiS,EACjBn1E,EAAKkjE,EAAM,GAAMvjE,EAAKu1D,EACtBl1D,EAAKkjE,EAAM,GAAMrjE,EAAKs1D,EAItBn1D,GAHAkjE,GAAO,GAGI,GAAMxjE,EAAK01D,EACtBp1D,EAAKkjE,EAAM,GAAMtjE,EAAKy1D,EACtBr1D,EAAKkjE,EAAM,GAAMxjE,EAAK01D,EAAMF,EAC5Bl1D,EAAKkjE,EAAM,GAAMtjE,EAAKy1D,EAAMF,EAC5Bn1D,EAAKkjE,EAAM,GAAMgS,EAAK9f,EACtBp1D,EAAKkjE,EAAM,GAAMiS,EAAK9f,EACtBr1D,EAAKkjE,EAAM,GAAMvjE,EAAKy1D,EAAMF,EAC5Bl1D,EAAKkjE,EAAM,GAAMrjE,EAAKw1D,EAAMF,EAC5Bn1D,EAAKkjE,EAAM,GAAMvjE,EAAKy1D,EACtBp1D,EAAKkjE,EAAM,GAAMrjE,EAAKw1D,EAItB,IAAM4mB,EAAM,IAAOv8E,EAAKuB,GAClBi7E,EAAM,IAAOt8E,EAAKwB,GACxBpB,GALAkjE,GAAO,IAKI,GAAM,IAAOxjE,EAAKyB,GAC7BnB,EAAKkjE,EAAM,GAAM,IAAOtjE,EAAKyB,GAC7BrB,EAAKkjE,EAAM,GAAM+Y,EACjBj8E,EAAKkjE,EAAM,GAAMgZ,EACjBl8E,EAAKkjE,EAAM,GAAM+Y,EACjBj8E,EAAKkjE,EAAM,GAAMgZ,EACjBl8E,EAAKkjE,EAAM,GAAM,IAAOvjE,EAAKsB,GAC7BjB,EAAKkjE,EAAM,GAAM,IAAOrjE,EAAKuB,GAI7BpB,GAHAkjE,GAAO,GAGI,GAAM/hE,EAAKi0D,EACtBp1D,EAAKkjE,EAAM,GAAM7hE,EAAKg0D,EACtBr1D,EAAKkjE,EAAM,GAAM/hE,EAAKi0D,EAAMF,EAC5Bl1D,EAAKkjE,EAAM,GAAM7hE,EAAKg0D,EAAMF,EAC5Bn1D,EAAKkjE,EAAM,GAAM0f,EAAKxtB,EACtBp1D,EAAKkjE,EAAM,GAAM2f,EAAKxtB,EACtBr1D,EAAKkjE,EAAM,GAAMjiE,EAAKm0D,EAAMF,EAC5Bl1D,EAAKkjE,EAAM,GAAM9hE,EAAKi0D,EAAMF,EAC5Bn1D,EAAKkjE,EAAM,GAAMjiE,EAAKm0D,EACtBp1D,EAAKkjE,EAAM,GAAM9hE,EAAKi0D,EAItBr1D,GAHAkjE,GAAO,IAGI,GAAM/hE,EAAK+zD,EACtBl1D,EAAKkjE,EAAM,GAAM7hE,EAAK8zD,EACtBn1D,EAAKkjE,EAAM,GAAM0f,EACjB5iF,EAAKkjE,EAAM,GAAM2f,EACjB7iF,EAAKkjE,EAAM,GAAMjiE,EAAKi0D,EACtBl1D,EAAKkjE,EAAM,GAAM9hE,EAAK+zD,OAn2C2B0F,kBCDpD,cAsBA,OArBQ2qB,SAAP,SACC/vB,EAAsB3Q,EACtB4Q,EAAiBC,EACjBG,GAEA,IAAMsN,EAASjK,GAAoB2B,aAAchW,EAAO2Q,EAAOsF,WACzD3B,EAAUgK,EAAOnN,YACjBoD,EAAU+J,EAAOjN,WACjBP,EAAS,GAAKwD,EACdvD,EAAS,GAAKwD,EACpB,OAAI3D,EAAUE,EAASH,EAAO4N,gBAAkB1N,EAAUE,EAASJ,EAAO6N,cAClE,IAAIue,GACVpsB,EACAC,EAASC,EACTyD,EAASC,EACTzD,EAAQC,EACRC,GACCp+C,KAAMotC,GAEF,0BCnBR,WAAal7C,uBAAAA,EAAO4wC,GAAWirC,mBAC9BvnF,YAAO0L,SAkJT,OApJ4C1S,OAK3CwuF,kBAAA,WACC,OAAO,IAAIA,GAAyBhtC,KAAMthD,OAGnCsuF,eAAR,SAAsBloF,EAAWC,EAAWouD,EAAYC,EAAYtqD,EAAWrG,GAC9E,IAAM4jE,GAAOlT,EAAKrqD,EAClB,GAAIhE,GAAKuhE,EAER,OAAIthE,IADEuhE,GAAOlT,EAAKtqD,IACDrG,EAAS4mD,GAAalgD,UAEhCyO,EAAK9S,EAAIuhE,GAEHzuD,GADNE,EAAK/S,EAAIuhE,GACOxuD,GAAMhP,EAAIA,GAE1BmkF,GAAO75B,EAAKtqD,IACP/D,GAAMtC,EAAS4mD,GAAa9/C,aAEhCqO,EAAK9S,EAAIuhE,GAEHzuD,GADNE,EAAK/S,EAAIkoF,GACOn1E,GAAMhP,EAAIA,GAGxBqqD,GAAMruD,EAIhB,IAEOwhE,EAOC2mB,EAGCr1E,EACAE,EAbHo1E,GAAO/5B,EAAKrqD,EAClB,OAAIokF,GAAOpoF,EAENC,IADEuhE,GAAOlT,EAAKtqD,IACDrG,EAAS4mD,GAAahgD,WAEhCuO,EAAK9S,EAAIooF,GAEHt1E,GADNE,EAAK/S,EAAIuhE,GACOxuD,GAAMhP,EAAIA,GAE1BmkF,GAAO75B,EAAKtqD,IACP/D,GAAMtC,EAAS4mD,GAAa5/C,cAEhCmO,EAAK9S,EAAIooF,GAEHt1E,GADNE,EAAK/S,EAAIkoF,GACOn1E,GAAMhP,EAAIA,EAGzBhE,IAAMquD,GAIPC,GAAMruD,GAAKA,IAAMquD,GAK5B45B,wBAAA,SAAaloF,EAAWC,EAAWouD,EAAYC,GAC9C,GAAI5tD,YAAM0tD,0BAAiBpuD,EAAGC,EAAGouD,EAAIC,GAAO,CAC3C,IAAM3oC,EAAO/rB,KAAK+rB,KACZ+hC,EAAS9tD,KAAK8tD,OACd71B,EAAgB61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EACrD,GAAI6oB,EAAK4qC,QAAU,EAAI1+B,EAAc,CACpC,IAAM7tB,EAAIpK,KAAKiE,OAAS0F,KAAKC,IAAK6qD,EAAIC,GAChC3wD,EAAS/D,KAAK+D,OACd27D,EAAa5R,EAAOmJ,KAC1B,GAAIj3D,KAAKyuF,GAAcroF,EAAGC,EAAGouD,EAAIC,EAAItqD,EAAGrG,GAAW,CAClD,GAAIgoB,EAAK4qC,OACR,OAAO,EAEP,IAAM+nB,EAAK/0E,KAAKG,IAAK,EAAK2qD,EAAKx8B,GACzB0mD,EAAKh1E,KAAKG,IAAK,EAAK4qD,EAAKz8B,GACzBy2D,EAAK/kF,KAAKG,IAAK,EAAKM,EAAI6tB,GAC9B,IAAMj4B,KAAKyuF,GAAcroF,EAAGC,EAAGq4E,EAAIC,EAAI+P,EAAI3qF,GAAW,CACrD,GAAI27D,IAAe9U,GAAiB5D,IACnC,OAAO,EAEP,GAAI5gD,IAAMs4E,EAAKgQ,EAAK,CACnB,IAAMC,EAAyD,IAAzCjvB,EAAa9U,GAAiBp+C,MACpD,OAAInG,IAAMs4E,EAAK+P,MACRE,EAAelvB,EAAa9U,GAAiBx+C,OACjCuiF,KAEPC,GACFlQ,GAAMr4E,IACJsoF,GACHvoF,IAAMs4E,IAIHC,EAAK+P,GAAMroF,MAChBwoF,EAAkBnvB,EAAa9U,GAAiBt+C,UACjCqiF,KAEVE,GACFnQ,GAAMr4E,IACJsoF,GACHvoF,IAAMs4E,GAKPiQ,EAEF,IAAKjQ,EAAKgQ,GAAMtoF,EAAI,CAC1B,IAEOwoF,EAWAC,EAbDC,EAA2D,IAA1CpvB,EAAa9U,GAAiBl+C,OACrD,OAAIrG,IAAMs4E,EAAK+P,MACRE,EAAelvB,EAAa9U,GAAiBx+C,OACjC0iF,KAEPF,GACFlQ,GAAMr4E,IACJyoF,IACFpQ,GAAMt4E,IAIJu4E,EAAK+P,GAAMroF,MAChBwoF,EAAkBnvB,EAAa9U,GAAiBt+C,UACjCwiF,KAEVD,GACFnQ,GAAMr4E,IACJyoF,IACFpQ,GAAMt4E,GAKR0oF,EAGR,OAAIzoF,IAAMs4E,EAAK+P,EACmC,IAAxChvB,EAAa9U,GAAiBx+C,MAC5BuyE,EAAK+P,GAAMroF,GAC8B,IAA3Cq5D,EAAa9U,GAAiBt+C,WAW/C,OAAO,MAlJmCwvD,kBCA5C,cAUA,OATQizB,cAAP,SACCrzE,EAA8B6wC,GAE9B,OAAOgwB,GAAmB1iB,YAAan+C,EAAM6wC,EAASwiC,EAAwB5uF,WAGxE4uF,SAAP,WACC,OAAO,IAAIT,SCLAU,GAA4B,WACxCrlC,GAAiBvG,GAAWirC,mBAAsBD,GAAgCjuF,OAClFspD,GAAqBrG,GAAWirC,mBAAsBU,GAAwBl1B,YAC9EswB,GAAmB7jF,IAClB88C,GAAWirC,kBACX9S,GAAiB8O,UAAY9O,GAAiB9e,YAAc8e,GAAiB0T,+BCT/E,4DAkOA,OAlO4CnvF,OAC3CovF,iBAAA,SAAMxhC,GACL5mD,YAAMwZ,eAAMotC,GACZ,IAAM2Q,EAASr+D,KAAKq+D,OACdC,EAAUt+D,KAAK4+D,aACfL,EAAUv+D,KAAK8+D,YAGrBT,EAAO8L,eAAe7oE,SACtB,IAAMmgE,EAAYpD,EAAOoD,UACnBr5D,EAAe,EAAVk2D,EACXmD,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EAEvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EAEvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EAEvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAGvBi2D,EAAOr0C,YAAY1oB,SACnB,IAAMqH,EAAU01D,EAAO11D,QACjBD,EAAe,EAAV61D,EAiBX,OAhBA51D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAE9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAE9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAC9B31D,EAASD,EAAK,GAAM41D,EAAU,EAG9Bt+D,KAAK0qE,WAEL1qE,KAAKsB,OAAQosD,GACN1tD,MAGRkvF,mBAAA,SAAQxhC,GACP,IAAM2Q,EAASr+D,KAAKq+D,OACpBr+D,KAAKmvF,qBAAsB9wB,EAAQ3Q,GACnC1tD,KAAKkrE,YAAa7M,EAAQ3Q,GAC1B1tD,KAAKovF,mBAAoB/wB,EAAQ3Q,GACjC1tD,KAAKqvF,iBAAkBhxB,EAAQ3Q,GAC/B1tD,KAAKwxB,WAAY6sC,EAAQ3Q,IAGhBwhC,iCAAV,SAAgC7wB,EAAsB3Q,GACrD,IAAM14C,EAAO04C,EAAM14C,KACbs2C,EAAQt2C,EAAK5O,EACbmlD,EAAQv2C,EAAK3O,EACbs4D,EAAmB3+D,KAAK6qE,mBAAoBnd,GAC5Cid,EAAkBrf,IAAUtrD,KAAKsrD,OAASC,IAAUvrD,KAAKurD,MACzDuf,EAAuB9qE,KAAK2+D,mBAAqBA,EACjD7Q,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MACrBy6E,EAAoB79E,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,EACnF,GAAI0yC,GAAiBG,GAAsB+S,EAAkB,CAC5D79E,KAAKsrD,MAAQA,EACbtrD,KAAKurD,MAAQA,EACbvrD,KAAK2+D,iBAAmBA,EACpBgM,IAEH3qE,KAAK2/D,mBAAqBn4D,KAG3BxH,KAAKi4B,YAAczwB,IAGnBxH,KAAKijE,sBAAwBz7D,IAC7B62D,EAAOv0C,aAAaxoB,SAGpB,IAAMmQ,EAAIguD,EAAcxnC,EAClB07B,EAAa,GAARrI,GAAe,GAAKA,GAAS75C,GAAKA,GACvCmiD,EAAa,GAARrI,GAAe,GAAKA,GAAS95C,GAAKA,GAEvC69E,EAAK,EAAI37B,EAAKC,GAAMD,EADfhqD,KAAK+zB,KAAMi2B,EAAKA,EAAK,EAAIC,EAAKA,IAGnC5D,EAAoBtC,EAAMzxC,UAAU+zC,kBACpC7oC,EAAOk3C,EAAOl3C,KACpBA,EAAK7gB,IAAK,GAAIstD,GACd5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM7e,EAAK6e,EAAK/gB,EACVoC,EAAK2e,EAAK9gB,EAChB8gB,EAAK7gB,KAAMqtD,EAAI,GACf3D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM+sC,EAAKlE,EAAkBkE,GACvBC,EAAKnE,EAAkBmE,GACvBj7C,EAAKg7C,EAAK5rD,EACV8Q,EAAK+6C,EAAK3rD,EACVD,EAAK4e,EAAK/gB,EAAI8S,EACdzQ,EAAK0e,EAAK9gB,EAAI+S,EACdvP,EAAKqqD,GAAMA,EAAK/sC,EAAK/gB,GAAK8S,EAC1BlP,EAAKmqD,GAAMA,EAAKhtC,EAAK9gB,GAAK+S,EAChC+N,EAAK7gB,IAAK,EAAGstD,EAAK07B,GAClBt/B,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAMpd,EAAKod,EAAK/gB,EACV6D,EAAKkd,EAAK9gB,EAGVkpF,EAAKr7B,EAAKh7C,EACVs2E,EAAKr7B,EAAK/6C,EAChBpZ,KAAKo/D,eAAiBp/D,KAAKylE,WAAYl9D,EAAIE,EAAI8mF,EAAIC,GACnDxvF,KAAKq/D,eAAiBr/D,KAAKylE,WAAYn9D,EAAIE,EAAI0rD,EAAIC,GACnDn0D,KAAKw/D,WAAax/D,KAAKylE,WAAY8pB,EAAIC,EAAIzlF,EAAIE,GAG/C,IAAMq0D,EAAUt+D,KAAK4+D,aACfl1D,EAAW20D,EAAO30D,SAClBtB,EAAe,EAAVk2D,EACX50D,EAAUtB,EAAM,GAAM2B,EACtBL,EAAUtB,EAAM,GAAM6B,EAEtBP,EAAUtB,EAAM,GAAME,EACtBoB,EAAUtB,EAAM,GAAMI,EACtBkB,EAAUtB,EAAM,GAAMG,EACtBmB,EAAUtB,EAAM,GAAMK,EAEtBiB,EAAUtB,EAAM,GAAMG,EACtBmB,EAAUtB,EAAM,GAAMK,EACtBiB,EAAUtB,EAAM,GAAMyB,EACtBH,EAAUtB,EAAM,GAAM4B,EAEtBN,EAAUtB,EAAK,IAAOyB,EACtBH,EAAUtB,EAAK,IAAO4B,EACtBN,EAAUtB,EAAK,IAAOE,EACtBoB,EAAUtB,EAAK,IAAOI,IAId0mF,+BAAV,SAA8B7wB,EAAsB3Q,GACnD,IAAMI,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MAC3B,GAAIpD,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,EAAc,CAC1Ej4B,KAAKi4B,YAAcA,EACnBj4B,KAAKy/D,YAAcA,EACnBpB,EAAOwL,WAAWvoE,SAClB+8D,EAAOyL,gBAAgBxoE,SAEvB,IAAM6lB,EAAOk3C,EAAO6f,SACpBl+E,KAAKm+E,SAAUn+E,KAAKw/D,WAAYvnC,EAAa9Q,GAC7C,IAAM45C,EAAM55C,EAAM,GACZ05C,EAAM15C,EAAM,GACZ25C,EAAM35C,EAAM,GAEZm3C,EAAUt+D,KAAK4+D,aACfJ,EAASx+D,KAAK6+D,YAAc7+D,KAAKujE,gBACvCvjE,KAAKo+E,WAAY/f,EAAQC,EAASE,EAAQuC,EAAKA,EAAKF,EAAKA,EAAKC,EAAKA,KAI3DouB,6BAAV,SAA4B7wB,EAAsB3Q,GACjD,IAAMhnD,EAAU1G,KAAK24C,UAAW+U,GAC1BiS,EAAqB3/D,KAAK8kE,qBAAsBp+D,GACtD,GAAIA,IAAY1G,KAAK0G,SAAWi5D,IAAuB3/D,KAAK2/D,mBAAqB,CAChF3/D,KAAK0G,QAAUA,EACf1G,KAAK2/D,mBAAqBA,EAE1B,IAAMz1D,EAAalK,KAAKymE,aAAc//D,GAChC4B,EAAK4B,EAAW5B,GAChBC,EAAK2B,EAAW3B,GAChBsB,EAAKK,EAAWL,GAChBE,EAAKG,EAAWH,GAChBvB,EAAK0B,EAAW1B,GAChBC,EAAKyB,EAAWzB,GAChBuB,EAAKE,EAAWF,GAChBC,EAAKC,EAAWD,GAEhB6zE,EAAK,IAAQx1E,EAAKC,GAClBw1E,EAAK,IAAQv1E,EAAKC,GAElBI,EAAI,EAAI,GAAM7I,KAAKw/D,WAAax/D,KAAKq/D,eACrCmsB,EAAK1N,EAAKj1E,GAAMkB,EAAKzB,GACrBmjF,EAAK1N,EAAKl1E,GAAMoB,EAAKzB,GAG3B61D,EAAOt0C,SAASzoB,SAChB,IAAMsH,EAAMy1D,EAAOz1D,IAEbkjE,EAAgB,EADN9rE,KAAK4+D,aAErBh2D,EAAKkjE,EAAO,GAAM0f,EAClB5iF,EAAKkjE,EAAO,GAAM2f,EAElB7iF,EAAKkjE,EAAO,GAAMgS,EAClBl1E,EAAKkjE,EAAO,GAAMiS,EAClBn1E,EAAKkjE,EAAO,GAAMjiE,EAClBjB,EAAKkjE,EAAO,GAAM9hE,EAElBpB,EAAKkjE,EAAO,GAAMjiE,EAClBjB,EAAKkjE,EAAO,GAAM9hE,EAClBpB,EAAKkjE,EAAO,GAAM/hE,EAClBnB,EAAKkjE,EAAO,GAAM7hE,EAElBrB,EAAKkjE,EAAM,IAAO/hE,EAClBnB,EAAKkjE,EAAM,IAAO7hE,EAClBrB,EAAKkjE,EAAM,IAAOgS,EAClBl1E,EAAKkjE,EAAM,IAAOiS,OA/NuBta,kBCC5C,cAsBA,OArBQgsB,SAAP,SACCpxB,EAAsB3Q,EACtB4Q,EAAiBC,EACjBG,GAEA,IAAMsN,EAASjK,GAAoB2B,aAAchW,EAAO2Q,EAAOsF,WACzD3B,EAAUgK,EAAOnN,YACjBoD,EAAU+J,EAAOjN,WACjBP,EAAS,EAAIwD,EACbvD,EAAS,EAAIwD,EACnB,OAAI3D,EAAUE,EAASH,EAAO4N,gBAAkB1N,EAAUE,EAASJ,EAAO6N,cAClE,IAAIgjB,GACV7wB,EACAC,EAASC,EACTyD,EAASC,EACTzD,EAAQC,EACRC,GACCp+C,KAAMotC,GAEF,0BCrBR,WAAal7C,uBAAAA,EAAO4wC,GAAWssC,UAC9B5oF,YAAO0L,SA2CT,OA7CoC1S,OAKnC6vF,kBAAA,WACC,OAAO,IAAIA,GAAiBruC,KAAMthD,OAGzB2vF,eAAV,SAAwBvpF,EAAWC,EAAWojB,EAAWmmE,EAAapR,GAKrE,OAAU/0D,EAAIrjB,EAAIwpF,EAAMvpF,GAAK,IAAMojB,EAAIrjB,EAAIwpF,EAAMvpF,GAAK,GAAKA,GAAKm4E,GAGjEmR,wBAAA,SAAavpF,EAAWC,EAAWouD,EAAYC,GAC9C,GAAI5tD,YAAM0tD,0BAAiBpuD,EAAGC,EAAGouD,EAAIC,GAAO,CAC3C,IAAMjrC,EAAI,EAAIirC,EAAKD,EAEnB,GADaz0D,KAAK+rB,KACT4qC,QACR,GAAI32D,KAAKyuF,GAAcroF,EAAGC,EAAGojB,GAAIirC,GAAKA,GACrC,OAAO,MAEF,CACN,IAAM5G,EAAS9tD,KAAK8tD,OACd71B,EAAc61B,EAAO5qD,MAC3B,GAAI4qD,EAAO6I,QAAU,EAAI1+B,GACpBj4B,KAAKyuF,GAAcroF,EAAGC,EAAGojB,GAAIirC,GAAKA,GAAO,CAC5C,IACMm7B,EAAK,EAAIp7B,EAAKC,GAAMD,EADf9qD,KAAK+zB,KAAM+2B,EAAKA,EAAK,EAAIC,EAAKA,IAGnCiN,EAAKjN,EAAKm7B,EACVD,EAAMjuB,IAAOjN,EAAKiN,GAAMh4D,KAAKG,IAAK,EAAK+lF,EAAK53D,GAAgB43D,EAC5DrR,EAAM9pB,EAAKz8B,EACjB,IAAMj4B,KAAKyuF,GAAcroF,EAAGC,EAAGojB,EAAGmmE,EAAKpR,GACtC,OAAO,IAMZ,OAAO,MA3C2B1iB,kBCEpC,cAUA,OATQg0B,cAAP,SACCp0E,EAA8B6wC,GAE9B,OAAOgwB,GAAmB1iB,YAAan+C,EAAM6wC,EAASujC,EAAgB3vF,WAGhE2vF,SAAP,WACC,OAAO,IAAIH,SCPAI,GAAoB,WAChCpmC,GAAiBvG,GAAWssC,UAAaD,GAAwBtvF,OACjEspD,GAAqBrG,GAAWssC,UAAaI,GAAgBj2B,4BCH9D,4DAwiBA,OAxiBmD/5D,OAClDkwF,iBAAA,SAAMtiC,GACL5mD,YAAMwZ,eAAMotC,GACZ,IAAM2Q,EAASr+D,KAAKq+D,OACdC,EAAUt+D,KAAK4+D,aACfL,EAAUv+D,KAAK8+D,YAGrBT,EAAOr0C,YAAY1oB,SACnB,IAAMqH,EAAU01D,EAAO11D,QACjBD,EAAe,EAAV61D,EAwEX,OArEA51D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAE/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAG/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAM,GAAM41D,EAAU,EAE/B31D,EAASD,EAAM,GAAM41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAG/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,EAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAG/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAG/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAG/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAE/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAC/B31D,EAASD,EAAK,IAAO41D,EAAU,GAG/Bt+D,KAAK0qE,WAEL1qE,KAAKsB,OAAQosD,GACN1tD,MAGRgwF,mBAAA,SAAQtiC,GACP,IAAM2Q,EAASr+D,KAAKq+D,OACpBr+D,KAAKiwF,4BAA6B5xB,EAAQ3Q,GAC1C1tD,KAAKkwF,8BAA+B7xB,EAAQ3Q,GAC5C1tD,KAAKkrE,YAAa7M,EAAQ3Q,GAC1B1tD,KAAKmwF,0BAA2B9xB,EAAQ3Q,GACxC1tD,KAAKowF,wBAAyB/xB,EAAQ3Q,GACtC1tD,KAAKwxB,WAAY6sC,EAAQ3Q,IAGhBsiC,wCAAV,SAAuC3xB,EAAsB3Q,GAC5D,IAAM14C,EAAO04C,EAAM14C,KACbs2C,EAAQt2C,EAAK5O,EACbmlD,EAAQv2C,EAAK3O,EACbs4D,EAAmB3+D,KAAK6qE,mBAAoBnd,GAC5CzpD,EAASypD,EAAMzpD,OACfosF,EAAoBpsF,IAAWjE,KAAKiE,OACpC0mE,EACLrf,IAAUtrD,KAAKsrD,OACfC,IAAUvrD,KAAKurD,MAEVuf,EAAuB9qE,KAAK2+D,mBAAqBA,EACjD7Q,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MACrBy6E,EAAoB79E,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,EACnF,GAAI0yC,GAAiBG,GAAsBulB,GAAmBxS,EAAkB,CAC/E79E,KAAKsrD,MAAQA,EACbtrD,KAAKurD,MAAQA,EACbvrD,KAAK2+D,iBAAmBA,EACxB3+D,KAAKiE,OAASA,EACVosF,IAEHrwF,KAAK+D,OAASyD,MAEXmjE,GAAiB0lB,KAEpBrwF,KAAK2/D,mBAAqBn4D,KAG3BxH,KAAKi4B,YAAczwB,IAGnBxH,KAAKijE,sBAAwBz7D,IAC7B62D,EAAOv0C,aAAaxoB,SAGpB,IAAMmQ,EAAIguD,EAAcxnC,EAClB07B,EAAa,GAARrI,GAAe,GAAKA,GAAS75C,GAAKA,GACvCmiD,EAAa,GAARrI,GAAe,GAAKA,GAAS95C,GAAKA,GACvC6+E,EAAK3mF,KAAK+zB,KAAMi2B,EAAKA,EAAK,EAAIC,EAAKA,GACnC07B,EAAK,EAAI37B,EAAKC,GAAMD,EAAK28B,GACzBjQ,EAAOiP,EAAKrrF,GAAa,EAAI2vD,GAC7B28B,EAAO,IAAQD,EAAKhB,GAAOrrF,IAC3Bk8E,EAAOE,EAAKiQ,GAAS,EAAI38B,GAEzB3D,EAAoBtC,EAAMzxC,UAAU+zC,kBACpC7oC,EAAOk3C,EAAOl3C,KACpBA,EAAK7gB,IAAK,GAAIstD,GACd5D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM5e,EAAK4e,EAAK/gB,EACVqC,EAAK0e,EAAK9gB,EAChB8gB,EAAK7gB,KAAMqtD,EAAI,GACf3D,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM+sC,EAAKlE,EAAkBkE,GACvBC,EAAKnE,EAAkBmE,GACvBj7C,EAAKg7C,EAAK3rD,EACV6Q,EAAK+6C,EAAK1rD,EACVq1E,EAAK32D,EAAK/gB,EAAI8S,EACd6kE,EAAK52D,EAAK9gB,EAAI+S,EACd4kE,EAAK9pB,GAAMA,EAAK/sC,EAAK/gB,GAAK8S,EAC1B+kE,EAAK9pB,GAAMA,EAAKhtC,EAAK9gB,GAAK+S,EAC1Bo3E,EAAO1S,EAAKv1E,EACZkoF,EAAO1S,EAAKt1E,EACZoB,EAAKtB,EAAKgoF,EAAKC,EACfxmF,EAAKvB,EAAK8nF,EAAKE,EACf1mF,EAAK+zE,EAAKuC,EAAKmQ,EACfvmF,EAAK8zE,EAAKsC,EAAKoQ,EACfC,EAAQvQ,GAAMnC,EAAKF,GACnB6S,EAAQxQ,GAAMlC,EAAKF,GACnByN,EAAK1N,EAAK4S,EACVjF,EAAK1N,EAAK4S,EACVjF,EAAK1N,EAAK0S,EACV/E,EAAK1N,EAAK0S,EACVC,EAAOroF,EAAKy1E,EACZ6S,EAAOpoF,EAAKw1E,EACZ6N,EAAK9N,EAAKqC,EAAKuQ,EACf7E,EAAK9N,EAAKoC,EAAKwQ,EACfjF,EAAKrjF,EAAKgoF,EAAKK,EACf/E,EAAKpjF,EAAK8nF,EAAKM,EACrB1pE,EAAK7gB,IAAK,EAAGstD,EAAK07B,GAClBt/B,EAAkB3oC,MAAOF,EAAMA,GAC/B,IAAM7e,EAAK6e,EAAK/gB,EACVoC,EAAK2e,EAAK9gB,EAEV69E,GAAM37E,EAAKtE,GAAWqE,EAAKC,GAC3B47E,GAAM17E,EAAKxE,GAAWuE,EAAKC,GAC3ByiF,GAAMpN,EAAK75E,GAAWqE,EAAKw1E,GAC3BqN,GAAMpN,EAAK95E,GAAWuE,EAAKu1E,GAC3BiO,GAAMhO,EAAK/5E,GAAWqE,EAAK01E,GAC3BiO,GAAMhO,EAAKh6E,GAAWuE,EAAKy1E,GAG3BsR,GAAKr7B,EAAKh7C,EACVs2E,GAAKr7B,EAAK/6C,EAChBpZ,KAAKo/D,eAAiB+gB,EACtBngF,KAAKq/D,eAAiBghB,EACtBrgF,KAAKs/D,eAAiBixB,EACtBvwF,KAAKu/D,eAAiB,EAAI,GAAM+vB,EAAK17B,EACrC5zD,KAAKw/D,WAAax/D,KAAKylE,WAAY8pB,GAAIC,GAAIlnF,EAAIE,GAG/C,IAAM81D,GAAUt+D,KAAK4+D,aACfl1D,GAAW20D,EAAO30D,SAClBtB,GAAe,EAAVk2D,GAGX50D,GAAUtB,GAAM,GAAM87E,GACtBx6E,GAAUtB,GAAM,GAAM+7E,GACtBz6E,GAAUtB,GAAM,GAAMwjF,EACtBliF,GAAUtB,GAAM,GAAMyjF,EACtBniF,GAAUtB,GAAM,GAAMG,EACtBmB,GAAUtB,GAAM,GAAMK,EACtBiB,GAAUtB,GAAM,GAAMyB,EACtBH,GAAUtB,GAAM,GAAM4B,EAGtBN,GAAUtB,GAAM,GAAM8iF,GACtBxhF,GAAUtB,GAAM,GAAM+iF,GACtBzhF,GAAUtB,GAAK,IAAO2B,EACtBL,GAAUtB,GAAK,IAAO6B,EACtBP,GAAUtB,GAAK,IAAO01E,EACtBp0E,GAAUtB,GAAK,IAAO21E,EACtBr0E,GAAUtB,GAAK,IAAOojF,EACtB9hF,GAAUtB,GAAK,IAAOqjF,EAGtB/hF,GAAUtB,GAAK,IAAO4jF,GACtBtiF,GAAUtB,GAAK,IAAO6jF,GACtBviF,GAAUtB,GAAK,IAAOsjF,EACtBhiF,GAAUtB,GAAK,IAAOujF,EACtBjiF,GAAUtB,GAAK,IAAO41E,EACtBt0E,GAAUtB,GAAK,IAAO61E,EACtBv0E,GAAUtB,GAAK,IAAO0jF,EACtBpiF,GAAUtB,GAAK,IAAO2jF,EAGtBriF,GAAUtB,GAAK,IAAOE,EACtBoB,GAAUtB,GAAK,IAAOI,EAEtBkB,GAAUtB,GAAK,IAAO87E,GACtBx6E,GAAUtB,GAAK,IAAO+7E,GAEtBz6E,GAAUtB,GAAK,IAAOyB,EACtBH,GAAUtB,GAAK,IAAO4B,EACtBN,GAAUtB,GAAK,IAAO2B,EACtBL,GAAUtB,GAAK,IAAO6B,EAEtBP,GAAUtB,GAAK,IAAO8iF,GACtBxhF,GAAUtB,GAAK,IAAO+iF,GAEtBzhF,GAAUtB,GAAK,IAAOojF,EACtB9hF,GAAUtB,GAAK,IAAOqjF,EACtB/hF,GAAUtB,GAAK,IAAOsjF,EACtBhiF,GAAUtB,GAAK,IAAOujF,EAEtBjiF,GAAUtB,GAAK,IAAO4jF,GACtBtiF,GAAUtB,GAAK,IAAO6jF,GAEtBviF,GAAUtB,GAAK,IAAO0jF,EACtBpiF,GAAUtB,GAAK,IAAO2jF,EACtBriF,GAAUtB,GAAK,IAAOwjF,EACtBliF,GAAUtB,GAAK,IAAOyjF,IAIdmE,0CAAV,SAAyC3xB,EAAsB3Q,GAC9D,IAAM3pD,EAAS2pD,EAAM3pD,OACrB,GAAIA,IAAW/D,KAAK+D,OAAS,CAC5B/D,KAAK+D,OAASA,EAGd/D,KAAKi4B,YAAczwB,IAEnB62D,EAAO8L,eAAe7oE,SACtB,IAAMmgE,EAAYpD,EAAOoD,UAEnBr5D,EAAe,EADLpI,KAAK4+D,aAEft0D,EAAI,EAAIojD,EAAMzpD,OAGhBF,EAAS4mD,GAAav+C,KACzBq1D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,IAEvBq5D,EAAWr5D,EAAM,GAAMkC,EACvBm3D,EAAWr5D,EAAM,GAAMkC,EACvBm3D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAMkC,EACvBm3D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAM,EACvBq5D,EAAWr5D,EAAM,GAAMkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,GAIpBrE,EAAS4mD,GAAa5/C,cACzB02D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,IAEvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,GAIpBrE,EAAS4mD,GAAa9/C,aACzB42D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,IAEvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,GAIxBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAOkC,EACvBm3D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EAEvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,EACvBq5D,EAAWr5D,EAAK,IAAO,IAIf4nF,sCAAV,SAAqC3xB,EAAsB3Q,GAC1D,IAAMI,EAASJ,EAAMI,OACf71B,EAAe61B,EAAO6I,OAAS7I,EAAO5qD,MAAQ,EAC9Cu8D,EAAc3R,EAAO1qD,MAC3B,GAAIpD,KAAKy/D,cAAgBA,GAAez/D,KAAKi4B,cAAgBA,EAAc,CAC1Ej4B,KAAKi4B,YAAcA,EACnBj4B,KAAKy/D,YAAcA,EACnBpB,EAAOwL,WAAWvoE,SAClB+8D,EAAOyL,gBAAgBxoE,SAEvB,IAAM6lB,EAAOk3C,EAAO6f,SACd4S,EAAM9wF,KAAKw/D,WACjBx/D,KAAKm+E,SAAU2S,EAAK74D,EAAa9Q,GACjC,IAAM45C,EAAM55C,EAAM,GACZ05C,EAAM15C,EAAM,GACZ25C,EAAM35C,EAAM,GAElBnnB,KAAKm+E,SAAUzwB,EAAMzpD,OAAS6sF,EAAK74D,EAAa9Q,GAChD,IAAMm9D,EAAMn9D,EAAM,GACZo9D,EAAMp9D,EAAM,GACZ4pE,EAAM5pE,EAAM,GAEZm3C,EAAUt+D,KAAK4+D,aACfJ,EAASx+D,KAAK6+D,YAAc7+D,KAAKujE,gBACvCvjE,KAAKgxF,aACJ3yB,EACAC,EAASE,EACT8lB,EAAKC,EAAKwM,EACVhwB,EAAKA,EAAKF,EAAKA,EAAKC,EAAKA,KAKlBkvB,oCAAV,SAAmC3xB,EAAsB3Q,GACxD,IAAMhnD,EAAU1G,KAAK24C,UAAW+U,GAC1BiS,EAAqB3/D,KAAK8kE,qBAAsBp+D,GACtD,GAAIA,IAAY1G,KAAK0G,SAAWi5D,IAAuB3/D,KAAK2/D,mBAAqB,CAChF3/D,KAAK0G,QAAUA,EACf1G,KAAK2/D,mBAAqBA,EAE1B,IAAMz1D,EAAalK,KAAKymE,aAAc//D,GAChC4B,EAAK4B,EAAW5B,GAChBC,EAAK2B,EAAW3B,GAChBsB,EAAKK,EAAWL,GAChBE,EAAKG,EAAWH,GAChBvB,EAAK0B,EAAW1B,GAChBC,EAAKyB,EAAWzB,GAChBuB,EAAKE,EAAWF,GAChBC,EAAKC,EAAWD,GAEhB6zE,EAAK,IAAQx1E,EAAKC,GAClBw1E,EAAK,IAAQv1E,EAAKC,GAElBI,EAAI7I,KAAKu/D,eACTisB,EAAK1N,EAAKj1E,GAAMkB,EAAKzB,GACrBmjF,EAAK1N,EAAKl1E,GAAMoB,EAAKzB,GAErBvE,EAASypD,EAAMzpD,OACfk8E,EAAKngF,KAAKo/D,eACVihB,EAAKrgF,KAAKq/D,eACVkxB,EAAKvwF,KAAKs/D,eACVosB,EAAK5N,EAAKyS,GAAMxmF,EAAK+zE,GACrB6N,EAAK5N,EAAKwS,GAAMtmF,EAAK8zE,GACrBC,EAAKF,EAAK75E,GAAUunF,EAAK1N,GACzBG,EAAKF,EAAK95E,GAAUwnF,EAAK1N,GACzB+N,EAAKhO,EAAKyS,GAAM1mF,EAAKi0E,GACrBiO,EAAKhO,EAAKwS,GAAMvmF,EAAK+zE,GAErB6N,EAAK/hF,EAAKw2E,GAAMvC,EAAKj0E,GACrBgiF,EAAK7hF,EAAKq2E,GAAMtC,EAAK/zE,GACrBk6E,EAAMr6E,EAAK5F,GAAUunF,EAAK3hF,GAC1Bs6E,EAAMn6E,EAAK/F,GAAUwnF,EAAKzhF,GAC1BkhF,EAAMrhF,EAAKs2E,GAAMp2E,EAAKF,GACtBshF,EAAMnhF,EAAKm2E,GAAMl2E,EAAKD,GAEtBgiF,EAAMjiF,EAAKo2E,GAAMt2E,EAAKE,GACtBkiF,EAAMhiF,EAAKk2E,GAAMn2E,EAAKC,GACtBqiF,EAAMviF,EAAK9F,GAAUunF,EAAKzhF,GAC1BwiF,EAAMtiF,EAAKhG,GAAUwnF,EAAKxhF,GAC1BuiF,EAAMziF,EAAKs2E,GAAMvC,EAAK/zE,GACtB0iF,EAAMxiF,EAAKo2E,GAAMtC,EAAK9zE,GAG5Bo0D,EAAOt0C,SAASzoB,SAChB,IAAMsH,EAAMy1D,EAAOz1D,IAEfkjE,EAAgB,EADJ9rE,KAAK4+D,aAIrBh2D,EAAKkjE,EAAM,GAAMkS,EACjBp1E,EAAKkjE,EAAM,GAAMmS,EACjBr1E,EAAKkjE,EAAM,GAAM4f,EACjB9iF,EAAKkjE,EAAM,GAAM6f,EACjB/iF,EAAKkjE,EAAM,GAAMgS,EACjBl1E,EAAKkjE,EAAM,GAAMiS,EACjBn1E,EAAKkjE,EAAM,GAAMggB,EACjBljF,EAAKkjE,EAAM,GAAMigB,EAIjBnjF,GAHAkjE,GAAO,GAGI,GAAMoY,EACjBt7E,EAAKkjE,EAAM,GAAMqY,EACjBv7E,EAAKkjE,EAAM,GAAM8f,EACjBhjF,EAAKkjE,EAAM,GAAM+f,EACjBjjF,EAAKkjE,EAAM,GAAMjiE,EACjBjB,EAAKkjE,EAAM,GAAM9hE,EACjBpB,EAAKkjE,EAAM,GAAMof,EACjBtiF,EAAKkjE,EAAM,GAAMqf,EAIjBviF,GAHAkjE,GAAO,GAGI,GAAMwgB,EACjB1jF,EAAKkjE,EAAM,GAAMygB,EACjB3jF,EAAKkjE,EAAM,GAAMkgB,EACjBpjF,EAAKkjE,EAAM,GAAMmgB,EACjBrjF,EAAKkjE,EAAM,GAAM/hE,EACjBnB,EAAKkjE,EAAM,GAAM7hE,EACjBrB,EAAKkjE,EAAM,GAAM0gB,EACjB5jF,EAAKkjE,EAAM,GAAM2gB,EAIjB7jF,GAHAkjE,GAAO,GAGK,GAAM0f,EAClB5iF,EAAKkjE,EAAO,GAAM2f,EAElB7iF,EAAKkjE,EAAO,GAAMkS,EAClBp1E,EAAKkjE,EAAO,GAAMmS,EAElBr1E,EAAKkjE,EAAO,GAAMggB,EAClBljF,EAAKkjE,EAAO,GAAMigB,EAClBnjF,EAAKkjE,EAAO,GAAM8f,EAClBhjF,EAAKkjE,EAAO,GAAM+f,EAElBjjF,EAAKkjE,EAAO,GAAMoY,EAClBt7E,EAAKkjE,EAAO,GAAMqY,EAElBv7E,EAAKkjE,EAAM,IAAOof,EAClBtiF,EAAKkjE,EAAM,IAAOqf,EAClBviF,EAAKkjE,EAAM,IAAOkgB,EAClBpjF,EAAKkjE,EAAM,IAAOmgB,EAElBrjF,EAAKkjE,EAAM,IAAOwgB,EAClB1jF,EAAKkjE,EAAM,IAAOygB,EAElB3jF,EAAKkjE,EAAM,IAAO0gB,EAClB5jF,EAAKkjE,EAAM,IAAO2gB,EAClB7jF,EAAKkjE,EAAM,IAAO4f,EAClB9iF,EAAKkjE,EAAM,IAAO6f,OAriB8BloB,kBCAnD,cAsBA,OArBQwtB,SAAP,SACC5yB,EAAsB3Q,EACtB4Q,EAAiBC,EACjBG,GAEA,IAAMsN,EAASjK,GAAoB2B,aAAchW,EAAO2Q,EAAOsF,WACzD3B,EAAUgK,EAAOnN,YACjBoD,EAAU+J,EAAOjN,WACjBP,EAAS,GAAKwD,EACdvD,EAAS,GAAKwD,EACpB,OAAI3D,EAAUE,EAASH,EAAO4N,gBAAkB1N,EAAUE,EAASJ,EAAO6N,cAClE,IAAI8jB,GACV3xB,EACAC,EAASC,EACTyD,EAASC,EACTzD,EAAQC,EACRC,GACCp+C,KAAMotC,GAEF,0BClBR,WAAal7C,uBAAAA,EAAO4wC,GAAW8tC,kBAC9BpqF,YAAO0L,SAsIT,OAxI2C1S,OAK1CqxF,kBAAA,WACC,OAAO,IAAIA,GAAwB7vC,KAAMthD,OAGhCmxF,eAAV,SAA2B/qF,EAAWC,EAAW+D,EAAWylF,GAE3D,GADa7vF,KAAK+rB,KACT4qC,QACR,GAAIvwD,EAAIA,EAAIC,EAAIA,GAAK+D,EAAIA,EACxB,OAAO,MAEF,CACN,IAAM0jD,EAAS9tD,KAAK8tD,OACd71B,EAAc61B,EAAO5qD,MAC3B,GAAI4qD,EAAO6I,QAAU,EAAI1+B,EAAc,CACtC,IAAM34B,EAAI8G,EAAIA,EAAIC,EAAIA,EACtB,GAAI/G,GAAK8K,EAAIA,EAAI,CAChB,IAAME,EAAIX,KAAKG,IAAK,EAAKM,GAAM,EAAI6tB,EAAc43D,IACjD,GAAIvlF,EAAIA,GAAKhL,EACZ,OAAO,MAOF6xF,2BAAV,SACC/qF,EAAWC,EACXiC,EAAYE,EACZD,EAAYE,EACZoB,EAAYG,EACZD,EAAYE,EACZmnF,EAAaC,EACbxB,EACA5rF,GAEA,IAAMqtF,EAAK/oF,EAAK6oF,GAAQvnF,EAAKtB,GAAOD,EAC9BipF,EAAK9oF,EAAK2oF,GAAQpnF,EAAKvB,GAAOD,EAC9Bu+C,EAAIp9C,KAAK+zB,KAAM4zD,EAAKA,EAAKC,EAAKA,GACpC,GA7CW,KA6CAxqC,EAAI,CACd,IAAMyqC,EAAK,EAAIzqC,EACT0qC,EAAMH,EAAKE,EACXE,EAAMH,EAAKC,EAIXG,GAFKppF,EAAK8oF,GAAQtnF,EAAKxB,GAAOD,GAEnBkpF,EACXI,GAFKnpF,EAAK4oF,GAAQpnF,EAAKxB,GAAOD,GAEnBgpF,EAEXK,EAAMJ,EAAMG,EAAMD,EAAMD,EAC9B,GAxDU,KAwDC/nF,KAAKwP,IAAK04E,GAAQ,CAC5B,IAAMC,EAAO,EAAID,EACXE,EAAK3rF,EAAIkC,EACT0pF,EAAK3rF,EAAImC,EACT0Q,IAAQ04E,EAAMG,EAAKJ,EAAMK,GAAOF,EAChC14E,IAAQs4E,EAAMK,EAAKN,EAAMO,GAAOF,EACtC,GAAI9xF,KAAKiyF,GAAiB/4E,EAAIE,EAAI2tC,EAAG8oC,EAAK5rF,GACzC,OAAO,KAMXktF,wBAAA,SAAa/qF,EAAWC,EAAWouD,EAAYC,GAC9C,GAAI5tD,YAAM0tD,0BAAiBpuD,EAAGC,EAAGouD,EAAIC,GAAO,CAC3C,IAAMjrC,EAAI,EAAIirC,EAAKD,EACnB,GAAIz0D,KAAKyuF,GAAcroF,EAAGC,EAAGojB,GAAIirC,GAAKA,GAAO,CAC5C,IAAMw9B,EAAKvoF,KAAK+zB,KAAM+2B,EAAKA,EAAK,EAAIC,EAAKA,GACnCm7B,EAAK,EAAIp7B,EAAKC,GAAMD,EAAKy9B,GACzBjuF,EAASjE,KAAKiE,OAGduE,EAAKksD,EAAKm7B,EAEVpnF,GAAMisD,EACNopB,GAAMrpB,EACNspB,GAAMrpB,EACNspB,GAAMF,EACNG,GAAMF,EACNmG,EANK,IAMMjgF,EACXkgF,EAAM17E,EAAKxE,GAAWuE,EAAKC,GAC3ByiF,EAAMpN,EAAK75E,GAVN,EAUsB65E,GAC3BqN,EAAMpN,EAAK95E,GAAWuE,EAAKu1E,GAC3BkO,GAAOd,EACPa,GAAOd,EAEPiH,GAAM1oE,EAAIrjB,EAAI+9E,EAAM99E,GAAK,EACzB+rF,GAAM3oE,EAAIrjB,EAAI+9E,EAAM99E,GAAK,EACzBgsF,EAAKhsF,GAAK8kF,EACVpnF,EAAS/D,KAAK+D,OACpB,IAAMouF,IAAQC,GAAOruF,EAAS4mD,GAAav+C,IAAO,CAEjD,IAAMmkF,EAAO,IAAQ2B,EAAKrC,GAAO5rF,IACjC,GAAIjE,KAAKsyF,eAAgBlsF,EAAGC,EAAG69E,EAAKC,EApB1B,EAoBmC17E,EAAIu1E,EAAIC,EAAIH,EAAIC,EAAIwS,EAAIA,EAAIV,EAAI5rF,GAC5E,OAAO,OAEF,IAAMkuF,IAAQE,GAAOtuF,EAAS4mD,GAAa9/C,YAAe,CAEhE,IACMs1E,GADAE,EAAOwP,EAAK5rF,GAAa,EAAIywD,IACjBw9B,GAAS,EAAIz9B,GAC/B,GAAIz0D,KAAKsyF,eAAgBlsF,EAAGC,EAAG2lF,EAAKC,EAAKjO,EAAIC,EAAIH,EAAIC,EA3B3C,EA2BmDt1E,EAAI03E,EAAIE,EAAIwP,EAAI5rF,GAC5E,OAAO,OAEF,IAAMmuF,IAAQC,GAAOtuF,EAAS4mD,GAAa5/C,aAAgB,CAEjE,IAAMs1E,EAEN,GADMF,GADAE,EAAOwP,EAAK5rF,GAAa,EAAIywD,IACjBw9B,GAAS,EAAIz9B,GAC3Bz0D,KAAKsyF,eAAgBlsF,EAAGC,EAAG6kF,EAAKC,EAAKrN,EAAIC,EAlCnC,EAkC2Ct1E,EAAIu1E,EAAIC,EAAIoC,EAAIF,EAAI0P,EAAI5rF,GAC5E,OAAO,MAEF,CAGN,GADajE,KAAK+rB,KACT4qC,OACR,OAAO,EAEP,IAAM7I,EAAS9tD,KAAK8tD,OACd71B,EAAc61B,EAAO5qD,MAC3B,GAAI4qD,EAAO6I,QAAU,EAAI1+B,EAAc,CACtC,IAAM0pC,EAAKjN,EAAKm7B,EACVD,EAAMjuB,IAAOjN,EAAKiN,GAAMh4D,KAAKG,IAAK,EAAK+lF,EAAK53D,GAAgB43D,EAC5DrR,EAAM9pB,EAAKz8B,EACjB,IAAMj4B,KAAKyuF,GAAcroF,EAAGC,EAAGojB,EAAGmmE,EAAKpR,GACtC,OAAO,KAOb,OAAO,MAtIkCmR,kBCD3C,cAUA,OATQ4C,cAAP,SACC72E,EAA8B6wC,GAE9B,OAAOgwB,GAAmB1iB,YAAan+C,EAAM6wC,EAASgmC,EAAuBpyF,WAGvEoyF,SAAP,WACC,OAAO,IAAIpB,SCLAqB,GAA2B,WACvC7oC,GAAiBvG,GAAW8tC,kBAAqBD,GAA+B9wF,OAChFspD,GAAqBrG,GAAW8tC,kBAAqBqB,GAAuB14B,YAC5EswB,GAAmB7jF,IAClB88C,GAAW8tC,iBACX3V,GAAiB8O,UAAY9O,GAAiB0T,gBCAnCwD,GAAe,WAC3BjV,KACAuB,KACAwE,KACAL,KACA8B,KACAQ,KACAoE,KACAM,KACA8E,KACAxE,KACAgI,KACAzC,MCvBY2C,GAAmB,IAAIlmD,GAAqB,IAAK,EAAG,iBCchE,aACCxsC,KAAK2yF,GAAa,GAyBpB,OAtBCC,gBAAA,SAAYpgF,GACX,IAAIlS,EAAWN,KAAK2yF,GAAYngF,GAChC,GAAgB,MAAZlS,EACH,OAAOA,EAEP,IAAMuyF,EAAQD,EAAYE,GAAUtgF,GACpC,GAAa,MAATqgF,EAEH,OADW7yF,KAAK2yF,GAAYngF,GAAS,IAAIqgF,EAGzC,MAAM,IAAIlyF,MAAO,0BAA0B6R,QAK9CogF,qBAAA,WACC,OAAOF,IAGDE,MAAP,SAAmBpgF,EAAcugF,GAChC/yF,KAAK8yF,GAAUtgF,GAASugF,GA3BRH,KAAoB,QCVzBI,GAAiB,WAC7B19E,EAAQ29E,qBAAsBL,oBCI9B,WAAalsF,EAAkBxD,EAAeyD,EAAgB6jB,EAAiBmT,GAA/E,MACC72B,YAAOJ,EAASxD,EAAOyD,EAAQzD,EAAOyD,gBAEtCM,EAAKisF,GAAW1oE,EAChBvjB,EAAKksF,GAAWx1D,EAEhB12B,EAAKsX,aAAc,EACnBtX,EAAKyX,qBAAsB,EAE3BhY,EAAQiK,GAAI,UAAU,WACrB1J,EAAKmsF,uBAcR,OA5BiCtzF,OAkBtBuzF,4BAAV,WACCrzF,KAAK4X,KAAM,SAAU5X,OAGtBqzF,qBAAA,SAAUzmF,EAAa1J,EAAeyD,GACrC3G,KAAKoG,GAAKpG,KAAKszF,UAAYtzF,KAAKkzF,GAChClzF,KAAKqG,GAAKrG,KAAKuzF,UAAYvzF,KAAKmzF,GAChCnzF,KAAKkD,MAAQlD,KAAKszF,UAAYpwF,EAAQlD,KAAKwzF,WAC3CxzF,KAAK2G,OAAS3G,KAAKuzF,UAAY5sF,EAAS3G,KAAKyzF,iBA1BdC,gCCJjC,cAcA,OAbQC,kBAAkB,QAClBA,kBAAkB,GAClBA,oBAAoB,SAEpBA,uBAAuB,SACvBA,uBAAuB,GACvBA,yBAAyB,SAEzBA,gBAAgB,SAChBA,gBAAgB,GAChBA,kBAAkB,SAElBA,mBAAmB,4BCT3B,cA4CA,OA3CCC,2BAAA,WACC,MAAO,2GAGRA,wBAAA,WACC,OAAO,IAGRA,qBAAA,SAAUtxF,GACT,OAAOsxF,EAAgBrlF,SAAUjM,IAGlCsxF,0BAAA,WACC,MAAO,UAGRA,yBAAA,WACC,MAAO,UAGRA,2BAAA,WACC,MAAO,UAGRA,qBAAA,SAAUtxF,GACT,OAAOsxF,EAAgBnlF,SAAUnM,IAGlCsxF,0BAAA,WACC,OAAO,IAGDA,WAAP,SAAiBtxF,GAChB,OAAO,SAGDsxF,WAAP,SAAiBtxF,GAChB,OAAIkN,EAAYoT,WAAYtgB,GACpB,GAEA,QC7BJuxF,GAAY,SACjB77D,EACA/zB,EAAoB6vF,EACpB9+E,EAA+B++E,gBAD/B9vF,kBAAoB6vF,mBACpB9+E,EAAwB,KAAT/Q,gBAAgB8vF,EAAgC,KAAT9vF,GAEtD,IAAM3E,EAAa,EAAT2E,EACVyuF,GAAiBllE,IAAKwK,EAAI14B,EAAGA,EAC5B,wBAEiB04B,iCAAiC14B,eAAcA,mFACXy0F,oDAGrC9vF,WAAeA,UAAc+Q,sCACvB8+E,qBAA0B97D,uBAIlD67D,GAAW,cAAe,EAAG,GAC7BA,GAAW,SAAU,GAAI,GAEzB,mBAAA,4DAwIA,OAxIqC/zF,OACpCk0F,iBAAA,WACC,OAAO,GAGRA,iBAAA,WACC,OAAO,GAGRA,sBAAA,WACC,OAAO,KAGRA,qBAAA,WACC,OAAO,KAGRA,+BAAA,SAAoB1xF,GACnB,OAAO,MAGR0xF,+BAAA,SAAoB1xF,GACnB,OAAO,GAGR0xF,iCAAA,SAAsB/vF,GACrB,OAAOq5C,GAAiBzhC,cAAco4E,cAAehwF,IAGtD+vF,2BAAA,SAAgB1xF,GACf,OAAIkN,EAAYyT,UAAW3gB,GACnBqxF,GAAqBO,gBAErB,MAITF,2BAAA,SAAgB1xF,GACf,OAAO,GAGR0xF,2BAAA,SAAgB1xF,GACf,OAAO,GAGR0xF,2BAAA,SAAgB1xF,GACf,MAAO,IAGR0xF,0BAAA,SAAe1xF,GACd,OAAOlC,EAAYie,MAGpB21E,6BAAA,SAAkB/vF,EAAgBf,GACjC,OAAOo6C,GAAiBzhC,cAAcs4E,UAAWlwF,EAAQf,IAG1D8wF,2BAAA,WACC,OAAO,GAGRA,4BAAA,WACC,OAAO,GAGRA,0BAAA,WACC,OAAO,GAGRA,6BAAA,WACC,OAAO,GAGRA,4BAAA,WACC,OAAO,GAGRA,0BAAA,WACC,OAAOpxF,EAAYyb,MAGpB21E,4BAAA,SAAiB1xF,GAChB,OAAO,MAGR0xF,4BAAA,SAAiB1xF,GAChB,OAAO,GAGR0xF,4BAAA,SAAiB1xF,GAChB,OAAO,GAGR0xF,6BAAA,SAAkB1xF,GACjB,OAAO,GAGR0xF,4BAAA,SAAiB1xF,GAChB,OAAO,GAGR0xF,2BAAA,SAAgB1xF,GACf,OAAOlC,EAAYie,MAGpB21E,yBAAA,WACC,OAAO5/E,EAAiBiK,MAGzB21E,sBAAA,WACC,OAAO,MAGRA,2BAAA,WACC,OAAOnwF,EAAiB4a,MAGzBu1E,qBAAA,WACC,MAAO,IAGRA,sBAAA,WACC,OAAQ,GAGTA,sBAAA,WACC,OAAO,IAAIX,GAAaX,GAAiBtI,SAAShrE,OAAQ,GAAI,GAAI,EAAG,IAGtE40E,0BAAA,WACC,OAAO,IAAIX,GAAaX,GAAiBtI,SAASgK,YAAa,EAAG,EAAG,EAAG,IAGzEJ,sBAAA,WACC,OAAO,SAtI4BJ,IClCxBS,GAAqB,WACjCzB,GAAYtsF,IAAK,QAAS0tF,oBCG3B,4DAgCA,OAhCsCl0F,OACrCw0F,+BAAA,WACC,OAAOX,GAAqBY,kBAG7BD,2BAAA,SAAgBhyF,GACf,OAAO,MAGRgyF,0BAAA,WACC,OAAO1xF,EAAYokD,KAGpBstC,2BAAA,WACC,OAAO,IAGRA,0BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,6BAAA,WACC,OAAO,IAGRA,2BAAA,WACC,OAAOzwF,EAAiB2wF,SA9BYR,ICJzBS,GAAsB,WAClC7B,GAAYtsF,IAAK,SAAUguF,oBCG5B,4DAgCA,OAhCyCx0F,OACxC40F,iCAAA,WACC,OAAOt/E,EAAe8b,QAGvBwjE,mCAAA,WACC,OAAOv/E,EAAiB3I,MAGzBkoF,kCAAA,WACC,OAAO,GAGRA,0BAAA,WACC,OAAO,GAGRA,iCAAA,WACC,OAAO,GAGRA,yBAAA,WACC,MAAO,IAGRA,yBAAA,SAAcpyF,GACb,MAAO,IAGRoyF,6BAAA,WACC,OAAOr2C,OA9BgC21C,mBCCzC,4DAgCA,OAhC0Cl0F,OACzC60F,oCAAA,WACC,OAAOx/E,EAAiB3I,MAGzBmoF,kCAAA,WACC,OAAOv/E,EAAe8b,QAGvByjE,8BAAA,WACC,OAAOt/E,EAAWuf,MAGnB+/D,qCAAA,WACC,OAAO,GAGRA,kCAAA,WACC,OAAO,GAGRA,8BAAA,SAAmBryF,GAClB,OAAOtC,KAAKuO,SAAUjM,IAGvBqyF,8BAAA,SAAmBryF,GAClB,OAAOtC,KAAKyO,SAAUnM,IAGvBqyF,2BAAA,SAAgBryF,GACf,OAAO,SA9BiCoyF,mBCC1C,aAAA,qDACCztF,QAAQ,SACRA,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,MAC5CnmE,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,QAuD7C,OA1D2CttE,OAK1C80F,+BAAA,SAAoBtyF,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KACGkN,EAAYiT,SAAUngB,GACzBqxF,GAAqBO,gBAClB1kF,EAAYkT,UAAWpgB,GAC1BtC,KAAK60F,cACFrlF,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DtC,KAAK80F,cAEL90F,KAAKotE,OAIdwnB,qBAAA,SAAUtyF,GACT,OAAIkN,EAAYoT,WAAYtgB,KAAakN,EAAYiT,SAAUngB,GACvDwE,YAAMyH,mBAAUjM,GAEhB,UAITsyF,2BAAA,SAAgBtyF,GACf,OAAIkN,EAAYoT,WAAYtgB,KAAakN,EAAYiT,SAAUngB,GACvD,SAEA,MAITsyF,sBAAA,WACC,OAAO,IAGRA,qBAAA,WACC,OAAO,KAGRA,mCAAA,WACC,OAAOz/E,EAAiBtB,QAGzB+gF,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,qBAAA,WACC,OAAO,MAxDkCD,mBCP3C,4DAEA,OAFuC70F,UAAA80F,ICC1BG,GAAuB,WACnCnC,GAAYtsF,IAAK,UAAW0uF,oBCE7B,4DAyBA,OAzB8Cl1F,OAC7Cm1F,+BAAA,SAAoB3yF,GACnB,OAAIkN,EAAYiT,SAAUngB,GAClBqxF,GAAqBO,gBAErBP,GAAqBuB,sBAI9BD,+BAAA,SAAoB3yF,GACnB,IAAMkN,EAAYoT,WAAYtgB,GAAU,CACvC,GAAIkN,EAAYiT,SAAUngB,GACzB,OAAO,EACD,GAAIkN,EAAYkT,UAAWpgB,GACjC,OAAmD,EAA5CqxF,GAAqBwB,qBACtB,GAAI3lF,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GACnE,OAAOqxF,GAAqBwB,qBAG9B,OAAO,GAGRF,2BAAA,SAAgB3yF,GACf,OAAO,SAvBqCsyF,ICHjCQ,GAA8B,WAC1CxC,GAAYtsF,IAAK,iBAAkB2uF,KCQpCvC,GAAiBllE,IAAK,uBAAwB,GAAI,GACjD,sMAMDklE,GAAiBllE,IAAK,wBAAyB,GAAI,GAClD,6JAMD,mBAAA,aAAA,qDACUvmB,2BAA2Bk1C,GAAQ2xB,OAAQ6lB,GAAqBuB,qBAAsB,MA0ChG,OA3C4Cp1F,OAG3Cu1F,+BAAA,SAAoB/yF,GACnB,OAAOqxF,GAAqBuB,sBAG7BG,qBAAA,SAAU/yF,GACT,OAAOsxF,GAAgBrlF,SAAUjM,IAGlC+yF,+BAAA,SAAoB/yF,GACnB,OAAMkN,EAAYoT,WAAYtgB,KACzBkN,EAAYyT,UAAW3gB,KAAWkN,EAAY6S,UAAW/f,GAIvD,EAHEqxF,GAAqBwB,sBAM/BE,8BAAA,SAAmB/yF,GAClB,OAAIkN,EAAYoT,WAAYtgB,IAAWkN,EAAYmT,WAAYrgB,KAAakN,EAAYiT,SAAUngB,GAC7FkN,EAAYyT,UAAW3gB,GACnBtC,KAAKs1F,yBAEL3B,GAAqBuB,qBAGtBvB,GAAqBO,iBAI9BmB,qBAAA,WACC,OAAO,GAGRA,2BAAA,SAAgB/yF,GACf,OAAIkN,EAAYiT,SAAUngB,GAClBowF,GAAiBtI,SAASmL,qBAE1B7C,GAAiBtI,SAASoL,0BAxCQP,ICvB/BQ,GAA4B,WACxC7C,GAAYtsF,IAAK,eAAgB+uF,oBCClC,4DAgBA,OAhBiDv1F,OAChD41F,8BAAA,WACC,OAAOrgF,EAAWvB,SAGnB4hF,oCAAA,WACC,OAAOvgF,EAAiBzI,OAGzBgpF,qCAAA,WACC,OAAO,GAGRA,mCAAA,WACC,OAAOvgF,EAAiB3I,SAduB6oF,ICFpCM,GAAiC,WAC7C/C,GAAYtsF,IAAK,oBAAqBovF,KCMvChD,GAAiBllE,IAAK,sBAAuB,GAAI,GAChD,iQAOD,ICPYooE,GDON/lE,GAAY,SAAEgmE,GACnB,MAAO,IAAI15C,GAAQoV,OAAQskC,EAAc3zF,YAAa2zF,EAAczzF,MAAMykC,QAAQ,mBAGnF,4DAmBA,OAnB4C/mC,OAC3Cg2F,8BAAA,SAAmBxzF,GAClB,OAAO,MAGRwzF,2BAAA,SAAgBxzF,GACf,OAAOowF,GAAiBtI,SAAS2L,qBAGlCD,6BAAA,WACC,OAAOjmE,IAGRimE,yBAAA,WACC,MAAO,CACN5zF,MAAO,SACPE,MAAO,OAhBkC4yF,mBEM3C,WAAapzF,GAAb,MACCkF,YAAOlF,SAGP,GAfSqF,KAAmB,EACnBA,KAAmB,EACnBA,KAAuB,EACvBA,KAAsB,EACtBA,KAAwC,KAExCA,KAAuC,KASjC,MAAXrF,GAAoC,MAAjBA,EAAQ+U,MAAgB,CAC9C,IAAMA,EAAQ/U,EAAQ+U,MACtB1P,EAAK+uF,GAAsB,MAAXr/E,EAAMvQ,EAAYuQ,EAAMvQ,EAAI,EAC5Ca,EAAKgvF,GAAsB,MAAXt/E,EAAMtQ,EAAYsQ,EAAMtQ,EAAI,QAE5CY,EAAK+uF,GAAU,EACf/uF,EAAKgvF,GAAU,UAGhBhvF,EAAKivF,GAAoB,WACxBjvF,EAAKkvF,eAGNlvF,EAAKmvF,GAAqB,WACzBnvF,EAAKovF,kBAyGR,OA1IsCv2F,OAqCrCw2F,iBAAA,WACCt2F,KAAKu2F,GAAc,EACnBv2F,KAAKw2F,uBACL1vF,YAAMmqC,iBAGGqlD,8BAAV,SAA6Bx1F,GAC5B,IAAMI,EAAQb,EAAcsZ,SAAU7Y,GACtC,GAAII,EAAQ,CACXlB,KAAK87C,GAAS56C,EACd,IAAMuK,EAAWvK,EAAMuK,SACvBA,EAASkF,GAAI,YAAa3Q,KAAKk2F,IAC/BzqF,EAASkF,GAAI,aAAc3Q,KAAKo2F,MAIxBE,iCAAV,WACC,IAAMp1F,EAAQlB,KAAK87C,GACnB,GAAI56C,EAAQ,CACXlB,KAAK87C,GAAS,KACd,IAAMrwC,EAAWvK,EAAMuK,SACvBA,EAASmN,IAAK,YAAa5Y,KAAKk2F,IAChCzqF,EAASmN,IAAK,aAAc5Y,KAAKo2F,MAIzBE,oBAAV,SAAmBjlD,GAClB,IAAMvwC,EAASd,KAAKy2F,GAAgBz2F,KAAKsoB,GAC3B,MAAVxnB,IACHd,KAAKu2F,GAAc,EACnBv2F,KAAKw2F,uBACLx2F,KAAK02F,kBAAmB51F,GAClBuwC,IACLvwC,EAAO6N,SAAU,GAElB7H,YAAM2pC,kBAASY,KAIPilD,mBAAV,SAAkBnlD,EAAcE,EAAoBC,GAEnD,GAAc,MADCtxC,KAAKy2F,GACC,CACpB,IAAMv1F,EAAQlB,KAAK87C,GACf56C,GACHA,EAAMy1F,iBACN32F,KAAKu2F,GAAcplD,EACnBrqC,YAAMupC,iBAAQc,EAAME,EAAWC,GAC/BpwC,EAAM01F,cACN11F,EAAMO,WAENzB,KAAKu2F,GAAcplD,EACnBrqC,YAAMupC,iBAAQc,EAAME,EAAWC,MAKxBglD,kBAAV,SAAiBjlD,GAChB,IAAMvwC,EAASd,KAAKy2F,GACN,MAAV31F,IACHd,KAAKw2F,uBACDnlD,IACHvwC,EAAO6N,SAAU,GAElB7H,YAAM6pC,gBAAOU,KAILilD,wBAAV,WACC,IAAMx1F,EAASd,KAAKy2F,GACpB,GAAc,MAAV31F,EAAiB,CACpB,IAAM+1F,EAAa72F,KAAKu2F,GAGlB5hF,EAAW7T,EAAOg2F,OAAOniF,SAC/B3U,KAAK+2F,GAAWpiF,EAASvO,EACzBpG,KAAKg3F,GAAWriF,EAAStO,EACzBsO,EAASrO,IACRqO,EAASvO,EAAIpG,KAAKg2F,IAAY,EAAIa,GAClCliF,EAAStO,EAAIrG,KAAKi2F,IAAY,EAAIY,IAInC72F,KAAKi3F,GAAen2F,EAAOsB,MAC3BtB,EAAOsB,MAAQy0F,IAIPP,yBAAV,WACC,IAAMx1F,EAASd,KAAKy2F,GACN,MAAV31F,IAEcA,EAAOg2F,OAAOniF,SACtBrO,IACRtG,KAAK+2F,GACL/2F,KAAKg3F,IAINl2F,EAAOsB,MAAQpC,KAAKi3F,QAvIelmD,KDFtC,SAAY6kD,GACXA,mBACAA,iBACAA,qCAHD,CAAYA,KAAAA,QAyBZ,mBAAA,4DA0HA,OAvHU91F,OAOCo3F,iBAAV,SAAgBt1F,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK2O,SAAU,EACf3O,KAAK0Q,SAAUpM,EAAW6yF,YAAY,GACtCn3F,KAAKo3F,GAAa,KAClBp3F,KAAKq3F,IAAY,EAGjB,IAAM5jD,EAAYzzC,KAAK+xC,GAAenwC,GAAWA,EAAQ6xC,UACxD7xC,EAAQ6xC,UAAY,IAAI6iD,GACzB7iD,EAAU3yC,OAASd,KACnByzC,EAAU9iC,GAAI,OAAO,SAAE0gC,GACtBpqC,EAAKqwF,eAAgBjmD,OAINrxC,KAAKu3F,GAAa31F,GAA8B,MAAnBA,EAAQ41F,QACpD51F,EAAQ41F,QAAUx3F,KAAK2B,MAAM61F,WAEhB5B,GAAe6B,eAC5B9pD,GAAiBtmB,MAAOrnB,MAAM,WAC7BiH,EAAKywF,eAIP13F,KAAK23F,GAAW,IAAI17C,IAGXi7C,2BAAV,SAA0B7lD,GACzB,GAAIA,EAAY,CACf,IAAM3vB,EAAS1hB,KAAKgB,OAChB0gB,GACHA,EAAO+S,YAAaz0B,UAEf,CACN,IAAMkB,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMolB,EAAkBplB,EAAMgiB,qBAC9BljB,KAAKo3F,GAAa9wE,EAAgBhD,aAClC,IAAMs0E,EAAiBtxE,EAAgB2uD,cAAej1E,MAAM,GAAO,GAAM,GACzEsmB,EAAgBnD,WAAYy0E,GAAkB53F,MAAM,GAAM,MAK7Dk3F,iBAAA,WACC,IAAMl3F,KAAKq3F,GAAY,CACtB,IAAMn2F,EAAQlB,KAAK23F,GAASE,KAAM73F,MAClCA,KAAKq3F,IAAY,EACjBn2F,EAAMH,MAAMyf,SAAUxgB,MACtBA,KAAKu6C,WAIG28C,mBAAV,WACCl3F,KAAK4X,KAAM,OAAQ5X,MAGnBA,KAAK+xC,GAAW3oB,SAGjB8tE,qBAAA,WACC,OAAOl3F,KAAKq3F,IAGbH,kBAAA,WACKl3F,KAAKq3F,KACRr3F,KAAKq3F,IAAY,EACjBr3F,KAAK83F,YAIGZ,oBAAV,WAEC,IAAMliB,EAAYh1E,KAAKo3F,GACvB,GAAiB,MAAbpiB,EAAoB,CACvBh1E,KAAKo3F,GAAa,KAClB,IAAMl2F,EAAQb,EAAcsZ,SAAU3Z,MAClCkB,GACHA,EAAMgiB,qBAAqBC,WAAY6xD,GAAW,GAAM,GAK1Dh1E,KAAK+xC,GAAW3oB,OAAO,GAEvBppB,KAAK4X,KAAM,QAAS5X,OAGXk3F,oBAAV,WACC,MAAO,WAGRA,sBAAA,SAAWthF,GAQV,OAPgB5V,KAAKu3F,GACP3B,GAAemC,KACxBpiF,EAAkBqiF,YAAapiF,IAClC5V,KAAK03F,YAIA5wF,YAAM+uB,oBAAWjgB,IAGfshF,sBAAV,WACCl3F,KAAKqiD,SAGI60C,gCAAV,SAA+BnxF,GAC9B,OAAO,MArHC4a,kBE/BV,4DAoDA,OApDuC7gB,OACtCm4F,oBAAA,WACC,OAAOrC,GAAemC,IAAMnC,GAAe6B,eAG5CQ,+BAAA,WACC,OAAOtE,GAAqBY,kBAG7B0D,2BAAA,SAAgB31F,GACf,OAAOqxF,GAAqBuB,sBAG7B+C,2BAAA,WACC,OAAO,IAGRA,0BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,6BAAA,WACC,OAAO,IAGRA,iBAAA,WACC,MAAO,UAGRA,iBAAA,WACC,MAAO,UAGRA,qBAAA,WACC,OAAO,KAGRA,sBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,OAAOj4F,KAAK6zF,aAGboE,2BAAA,WACC,OAAOp0F,EAAiB2wF,SAlDaR,mBCJvC,4DAwBA,OAxB8Cl0F,OAC7Co4F,kBAAA,WACC,MAAO,MAGRA,sBAAA,WACC,MAAO,UAGRA,uBAAA,WACC,MAAO,WAGRA,uBAAA,WACC,MAAO,WAGRA,2BAAA,WACC,MAAO,WAGRA,4BAAA,WACC,MAAO,WAtBqCD,mBCA9C,4DAgBA,OAhB4Cn4F,OAC3Cq4F,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,2BAAA,WACC,MAAO,QAGRA,4BAAA,WACC,MAAO,WAdmCD,ICI5CxF,GAAiBllE,IAAK,oBAAqB,IAAK,IAC/C,miBAcD,IAAM4qE,GAAmB,SAAEl1F,EAAeyD,GACzCzD,GAAgBA,EAKhB,IAHA,IAEIV,EAAS,MACJ61F,EAAU,EAAGA,EAAU1xF,IAAU0xF,EAAU,CACnD,IAAK,IAAI92F,EAAI,EAAGA,EAAI2B,IAAS3B,EAE5BiB,GAAU,YAAY,EAAIjB,WAAS,GAAK82F,EAAU,oCADnC92F,EAAI,GAAM,EALb,UACD,kBAOZ,IAASA,EAAI,EAAGA,EAAI2B,IAAS3B,EAE5BiB,GAAU,YAAY,EAAIjB,WAAS,GAAK82F,EAAU,oCADnC92F,EAAI,GAAM,EATb,UACD,kBAab,OADAiB,EAAU,QAIXkwF,GAAiBllE,IAAK,kCAAmC,IAAK,GAAI4qE,GAAkB,GAAI,IAExF1F,GAAiBllE,IAAK,qBAAsB,IAAK,GAChD,kRASDklE,GAAiBllE,IAAK,oBAAqB,IAAK,GAC/C,qcAcDklE,GAAiBllE,IAAK,4BAA6B,KAAM,KACxD,sGAGDklE,GAAiBllE,IAAK,uBAAwB,KAAM,KACnD,gLAIDklE,GAAiBllE,IAAK,mCAAoC,GAAI,GAAI4qE,GAAkB,EAAG,IAEvF1F,GAAiBllE,IAAK,2BAA4B,GAAI,GACrD,uTAODklE,GAAiBllE,IAAK,mCAAoC,GAAI,GAAI4qE,GAAkB,EAAG,IAEvF1F,GAAiBllE,IAAK,2BAA4B,GAAI,GACrD,uTAODklE,GAAiBllE,IAAK,+BAAgC,KAAM,KAC3D,6JAIDklE,GAAiBllE,IAAK,sBAAuB,KAAM,KAClD,2JAIDklE,GAAiBllE,IAAK,yBAA0B,GAAI,GACnD,2SAKD,mBAAA,4DAgJA,OAhJ4C1tB,OAC3Cw4F,yBAAA,WACC,OAAO,KAGRA,0BAAA,WACC,OAAO,KAGRA,2BAAA,WACC,OAAO5F,GAAiBtI,SAASmO,mBAGlCD,kCAAA,WACC,OAAO5F,GAAiBtI,SAASoO,sBAGlCF,gCAAA,WACC,OAAO,UAGRA,gCAAA,WACC,OAAO,GAGRA,0BAAA,WACC,OAAO,IAGRA,0BAAA,WACC,OAAO,GAGRA,2BAAA,WACC,OAAO5F,GAAiBtI,SAASqO,mBAGlCH,kCAAA,WACC,OAAO5F,GAAiBtI,SAASsO,2BAGlCJ,gCAAA,WACC,OAAO,UAGRA,gCAAA,WACC,OAAOt4F,KAAK24F,uBAGbL,2BAAA,WACC,OAAOt4F,KAAK44F,iBAGbN,2BAAA,WACC,OAAOt4F,KAAK64F,iBAGbP,4BAAA,WACC,OAAO5F,GAAiBtI,SAAS0O,oBAGlCR,wCAAA,WACC,OAAO5F,GAAiBtI,SAAS2O,iCAGlCT,mCAAA,WACC,OAAOt4F,KAAKg5F,yBAGbV,iCAAA,WACC,OAAOt4F,KAAKi5F,uBAGbX,iCAAA,WACC,OAAOt4F,KAAK24F,uBAGbL,4BAAA,WACC,OAAOt4F,KAAK64F,iBAGbP,gCAAA,WACC,OAAOt4F,KAAK44F,iBAGbN,iCAAA,WACC,OAAOt4F,KAAKk5F,uBAGbZ,iCAAA,WACC,OAAOt4F,KAAKm5F,mBAGbb,gCAAA,WACC,OAAO,IAGRA,yCAAA,WACC,OAAO5F,GAAiBtI,SAASgP,kCAGlCd,iCAAA,WACC,OAAO5F,GAAiBtI,SAASiP,0BAGlCf,uBAAA,WACC,MAAO,IAGRA,2BAAA,WACC,OAAOt4F,KAAK64F,iBAGbP,+BAAA,WACC,OAAO,IAGRA,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAOt4F,KAAKs5F,kBAGbhB,yCAAA,WACC,OAAO5F,GAAiBtI,SAASmP,kCAGlCjB,iCAAA,WACC,OAAO5F,GAAiBtI,SAASoP,0BAGlClB,+BAAA,SAAoBh2F,GACnB,OAAO,MAGRg2F,2BAAA,SAAgBh2F,GACf,OAAO,MAGRg2F,2BAAA,WACC,OAAOz0F,EAAiB2wF,SA9IkBR,IChH/ByF,GAA4B,WACxC7G,GAAYtsF,IAAK,eAAgBgyF,KCArBoB,GAA4B,WACxC9G,GAAYtsF,IAAK,eAAgB6xF,IACjCsB,MCFYE,GAA4B,WACxC/G,GAAYtsF,IAAK,eAAgBwvF,IACjC4D,oBCSA,WAAax3F,EAAeE,EAAeuS,EAAkB49C,EAAmB1wD,GAC/E7B,KAAKiC,EAASC,EACdlC,KAAKmC,EAASC,EACdpC,KAAKmc,GAAYxH,EACjB3U,KAAK+B,EAAYF,EACjB7B,KAAK45F,GAAYrnC,EAgEnB,OA7DCsnC,gBAAA,SAAK33F,EAAeE,EAAeuS,EAAkB49C,GAChDvyD,KAAKiC,IAAWC,GAASlC,KAAKmC,IAAWC,GAASpC,KAAKmc,KAAcxH,GAAY3U,KAAK45F,KAAcrnC,IACvGvyD,KAAKiC,EAASC,EACdlC,KAAKmC,EAASC,EACdpC,KAAKmc,GAAYxH,EACjB3U,KAAK45F,GAAYrnC,EACjBvyD,KAAK+B,EAAW/B,QAIlBR,sBAAIq6F,yBAAJ,WACC,OAAO75F,KAAKiC,OAGb,SAAWC,GACNlC,KAAKiC,IAAWC,IACnBlC,KAAKiC,EAASC,EACdlC,KAAK+B,EAAW/B,wCAIlBR,sBAAIq6F,yBAAJ,WACC,OAAO75F,KAAKmC,OAGb,SAAWC,GACNpC,KAAKmC,IAAWC,IACnBpC,KAAKmC,EAASC,EACdpC,KAAK+B,EAAW/B,wCAIlBR,sBAAIq6F,4BAAJ,WACC,OAAO75F,KAAKmc,QAGb,SAAcxH,GACT3U,KAAKmc,KAAcxH,IACtB3U,KAAKmc,GAAYxH,EACjB3U,KAAK+B,EAAW/B,wCAIlBR,sBAAIq6F,4BAAJ,WACC,OAAO75F,KAAK45F,QAGb,SAAcrnC,GACTvyD,KAAK45F,KAAcrnC,IACtBvyD,KAAK45F,GAAYrnC,EACjBvyD,KAAK+B,EAAW/B,wCAIlB65F,qBAAA,WACC,MAAO,CACN33F,MAAOlC,KAAKiC,EACZG,MAAOpC,KAAKmC,EACZwS,SAAU3U,KAAKmc,UC9EZ29E,GAAe,SAAErwE,EAA8BlqB,GACpD,OAAOkqB,EAAE9U,SAAWpV,EAAEoV,yBAgBtB,aAAA,MACC7N,mBAEAG,EAAK8yF,GAAiB,SAAEj5F,GACvBmG,EAAKvE,SAAU5B,IAGhB,IAAM00C,EAAQ,IAAIqkD,GAA2B,SAAU,EAAG,GAAG,EAAO5yF,EAAK8yF,IACnEC,EAAS,IAAIH,GAA2B,QAAU,EAAG,GAAG,EAAM5yF,EAAK8yF,WACzE9yF,EAAK+7E,GAAU,CAAExtC,EAAOwkD,GACxB/yF,EAAKi9C,IAAc,GACnBj9C,EAAK2yF,GAAYI,EACjB/yF,EAAKgzF,GAAa,CAAE,EAAG,EAAG,KAqN5B,OAzO8Cn6F,OAuBnCo6F,qBAAV,SAAoBp5F,GACnB,IAAMq5F,EAAuBr5F,EAAOyxD,UAAYvyD,KAAK45F,KAAc94F,EACnE,GAAIq5F,EAAqB,CACxB,IAAM5nC,EAAWvyD,KAAK45F,GACN,MAAZrnC,IACFA,EAAiBqnC,IAAY,GAE/B55F,KAAK45F,GAAY94F,EAElBd,KAAKgjF,GAAQ1oD,KAAMw/D,IACfK,GACHn6F,KAAK4X,KAAM,kBAAmB5X,KAAK45F,GAAW55F,MAE/CA,KAAK4X,KAAM,SAAU5X,OAGtBR,sBAAI06F,0BAAJ,WACC,OAAOl6F,KAAKgjF,oCAGbxjF,sBAAI06F,6BAAJ,WACC,OAAOl6F,KAAKkkD,QAGb,SAAeJ,GACV9jD,KAAKkkD,KAAeJ,IACvB9jD,KAAKkkD,GAAaJ,EAClB9jD,KAAK4X,KAAM,kBAAmBksC,EAAW9jD,MACzCA,KAAK4X,KAAM,SAAU5X,wCAIvBR,sBAAI06F,4BAAJ,WACC,OAAOl6F,KAAK45F,oCAGbM,iBAAA,WACC,OAAOl6F,KAAKgjF,GAAQtiF,QAGrBw5F,gBAAA,SAAKt5F,GACJ,IAAMswD,EAASlxD,KAAKgjF,GACpB,OAAI,GAAKpiF,GAASA,EAAQswD,EAAOxwD,OACzBwwD,EAAQtwD,GAET,MAGRs5F,kBAAA,SAAOvlF,GAGN,IAFA,IAAMu8C,EAASlxD,KAAKgjF,GAChB19D,EAA6C,KACxC/jB,EAAI,EAAGC,EAAO0vD,EAAOxwD,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMwE,EAAQmrD,EAAQ3vD,GACtB,GAAIoT,GAAY5O,EAAM4O,SAAW,CAChC,GAAgB,MAAZ2Q,EA4BH,OAAOtlB,KAAKwtB,IAAKznB,EAAM7D,MAAO6D,EAAM3D,MAAOuS,GAAU,GA3BrD,IAAM06B,EAAOtpC,EAAM4O,SAAW2Q,EAAS3Q,SACvC,GAAI,KAAQ06B,EAAO,CAClB,IAAM+qD,EAAO9+D,QAAM++D,QAASt0F,EAAM7D,MAAOlC,KAAKi6F,IACxCK,EAAKF,EAAM,GACXG,EAAKH,EAAM,GACXI,EAAKJ,EAAM,GAEXK,EAAOn/D,QAAM++D,QAAS/0E,EAASpjB,MAAOlC,KAAKi6F,IAC3CS,EAAKD,EAAM,GACXE,EAAKF,EAAM,GACX1uF,EAAK0uF,EAAM,GAEXxuD,GAASt3B,EAAW2Q,EAAS3Q,UAAY06B,EACzCjlC,EAAIkwF,EAAKruD,EAAQyuD,GAAM,EAAIzuD,GAC3BiP,EAAIq/C,EAAKtuD,EAAQ0uD,GAAM,EAAI1uD,GAC3B1sC,EAAIi7F,EAAKvuD,EAAQlgC,GAAM,EAAIkgC,GAE3B2uD,EAAM56F,KAAKi6F,GACjBW,EAAK,GAAMxwF,EACXwwF,EAAK,GAAM1/C,EACX0/C,EAAK,GAAMr7F,EAEX,IAAM2C,EAAQo5B,QAAMu/D,QAASD,GACvBx4F,EAAQ2D,EAAM3D,MAAQ6pC,EAAQ3mB,EAASljB,OAAS,EAAI6pC,GAC1D,OAAOjsC,KAAKwtB,IAAKtrB,EAAOE,EAAOuS,GAAU,IAM5C2Q,EAAWvf,EAEZ,OAAgB,MAAZuf,EACItlB,KAAKwtB,IAAKlI,EAASpjB,MAAOojB,EAASljB,MAAOuS,GAAU,GAEpD3U,KAAKwtB,IAAK,SAAU,EAAK7Y,GAAU,IAI5CulF,gBAAA,SAAKh4F,EAAeE,EAAeuS,EAAkB49C,GACpD,IAAM/vD,EAAS,IAAIq3F,GAA2B33F,EAAOE,EAAOuS,EAAU49C,EAAUvyD,KAAK+5F,IAGrF,OAFA/5F,KAAKgjF,GAAQxiF,KAAMgC,GACnBxC,KAAK+5F,GAAgBv3F,GACdA,GAGR03F,mBAAA,SAAQn0F,GACP,IAAMmrD,EAASlxD,KAAKgjF,GACpB,GAAI,EAAI9xB,EAAOxwD,OACd,IAAK,IAAIa,EAAI,EAAGC,EAAO0vD,EAAOxwD,OAAQa,EAAIC,IAAQD,EACjD,GAAI2vD,EAAQ3vD,KAAQwE,EAAQ,CAC3BmrD,EAAO3+C,OAAQhR,EAAG,GAClB,IAAM44F,EAAuBn6F,KAAK45F,KAAc7zF,EAYhD,OAXIo0F,IAEFn6F,KAAK45F,GADFr4F,EAAI,EAAIC,EACM0vD,EAAQ3vD,GAER2vD,EAAQ3vD,EAAI,IAG3B44F,GACHn6F,KAAK4X,KAAM,kBAAmB5X,KAAK45F,GAAW55F,MAE/CA,KAAK4X,KAAM,SAAU5X,OACd,EAIV,OAAO,GAGRk6F,kBAAA,WACC,IAAMY,EAAe96F,KAAKkkD,GAC1BlkD,KAAKkkD,IAAc,GAEnB,IAAMgN,EAASlxD,KAAKgjF,GACd+X,EAAc/6F,KAAK45F,GACnBh5F,EAAUm6F,EAAc7pC,EAAOrwD,QAASk6F,IAAiB,EAK/D,GAJA7pC,EAAOxwD,OAAS,EAChBwwD,EAAO1wD,KAAM,IAAIq5F,GAA2B,SAAU,EAAG,GAAG,EAAO75F,KAAK+5F,KACxE7oC,EAAO1wD,KAAM,IAAIq5F,GAA2B,SAAU,EAAG,GAAG,EAAO75F,KAAK+5F,KAEpE,GAAKn5F,GAASA,EAAQswD,EAAOxwD,QAC1BqF,EAAQmrD,EAAQtwD,IACPg5F,IAAY,EAC3B55F,KAAK45F,GAAY7zF,OACX,GAAI,EAAImrD,EAAOxwD,OAAS,CAC9B,IAAMqF,GAAAA,EAAQmrD,EAAQA,EAAOxwD,OAAS,IACvBk5F,IAAY,EAC3B55F,KAAK45F,GAAY7zF,OAEjB/F,KAAK45F,GAAY,KAEdmB,IAAgB/6F,KAAK45F,IACxB55F,KAAK4X,KAAM,kBAAmB5X,KAAK45F,GAAW55F,MAG3C86F,IAAiB96F,KAAKkkD,IACzBlkD,KAAK4X,KAAM,kBAAmB5X,KAAKkkD,GAAYlkD,MAGhDA,KAAK4X,KAAM,SAAU5X,OAGtBk6F,qBAAA,WAGC,IAFA,IAAMc,EAAa,GACb9pC,EAASlxD,KAAKgjF,GACXzhF,EAAI,EAAGC,EAAO0vD,EAAOxwD,OAAQa,EAAIC,IAAQD,EACjDy5F,EAAWx6F,KAAM0wD,EAAQ3vD,GAAIssD,YAE9B,MAAO,CACNqD,OAAQ8pC,EACRl3C,UAAW9jD,KAAKkkD,KAIlBg2C,uBAAA,SAAYtyF,GACX,IAAMkzF,EAAe96F,KAAKkkD,GAC1BlkD,KAAKkkD,GAAat8C,EAAKk8C,UAEvB,IAAMoN,EAASlxD,KAAKgjF,GACd+X,EAAc/6F,KAAK45F,GACnBh5F,EAAUm6F,EAAc7pC,EAAOrwD,QAASk6F,IAAiB,EAC/D7pC,EAAOxwD,OAAS,EAChB,IAAK,IAAIa,EAAI,EAAGC,EAAOoG,EAAKspD,OAAOxwD,OAAQa,EAAIC,IAAQD,EAAI,CAC1D,IAAM05F,EAAYrzF,EAAKspD,OAAQ3vD,GACzBwE,EAAQ,IAAI8zF,GACjBoB,EAAU/4F,MAAO+4F,EAAU74F,MAAO64F,EAAUtmF,UAC5C,EAAO3U,KAAK+5F,IAEb7oC,EAAO1wD,KAAMuF,GAEdmrD,EAAO52B,KAAMw/D,IAET,GAAKl5F,GAASA,EAAQswD,EAAOxwD,SAC1BqF,EAAQmrD,EAAQtwD,IACPg5F,IAAY,EAC3B55F,KAAK45F,GAAY7zF,GACP,EAAImrD,EAAOxwD,SACfqF,EAAQmrD,EAAQA,EAAOxwD,OAAS,IACvBk5F,IAAY,EAC3B55F,KAAK45F,GAAY7zF,GAEjB/F,KAAK45F,GAAY,KAEdmB,IAAgB/6F,KAAK45F,IACxB55F,KAAK4X,KAAM,kBAAmB5X,KAAK45F,GAAW55F,MAG3C86F,IAAiB96F,KAAKkkD,IACzBlkD,KAAK4X,KAAM,kBAAmB5X,KAAKkkD,GAAYlkD,MAGhDA,KAAK4X,KAAM,SAAU5X,UAvOuBs7B,QAAMoU,cCJpDgjD,GAAiBllE,IAAK,+BAAgC,GAAI,GACzD,iQAOD,IChBY0tE,GDgBNrrE,GAAY,WACjB,MAAO,mBAGR,4DAYA,OAZoD/vB,OACnDq7F,+BAAA,WACC,OAAOzI,GAAiBtI,SAASgR,8BAGlCD,6BAAA,WACC,OAAOtrE,IAGRsrE,yBAAA,WACC,OAAO,IAAIjB,OAVuClF,mBEhBpD,4DAgBA,OAhBoDl1F,OACnDu7F,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,2BAAA,WACC,MAAO,QAGRA,4BAAA,WACC,MAAO,WAd2CnD,mBCIpD,4DA4DA,OA5DoDp4F,OACnDw7F,mCAAA,WACC,OAAO,IAGRA,oCAAA,WACC,OAAO,IAGRA,qCAAA,WACC,OAAO5I,GAAiBtI,SAASmR,qBAGlCD,6CAAA,WACC,OAAO5I,GAAiBtI,SAASoR,8BAGlCF,4CAAA,WACC,OAAO5I,GAAiBtI,SAASqR,6BAGlCH,uCAAA,WACC,OAAO,GAGRA,wCAAA,WACC,OAAO5I,GAAiBtI,SAASsR,wBAGlCJ,oCAAA,WACC,OAAO,GAGRA,mCAAA,WACC,OAAO,IAGRA,oCAAA,WACC,OAAO,GAGRA,mCAAA,WACC,OAAO,IAGRA,+BAAA,WACC,MAAO,IAGRA,+BAAA,SAAoBh5F,GACnB,OAAO,MAGRg5F,2BAAA,SAAgBh5F,GACf,OAAO,MAGRg5F,2BAAA,WACC,OAAOz3F,EAAiB2wF,SA1D0BR,ICJvC2H,GAAoC,WAChD/I,GAAYtsF,IAAK,uBAAwBg1F,IACzC7B,MCFYmC,GAAoC,WAChDhJ,GAAYtsF,IAAK,uBAAwB+0F,IACzCM,MCFYE,GAAoC,WAChDjJ,GAAYtsF,IAAK,uBAAwB60F,IACzCS,qBCDD,aAAA,qDACC30F,QAAQ,SACRA,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,IAC5CnmE,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,MA6B7C,OAhC6CttE,OAK5Cg8F,+BAAA,SAAoBx5F,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KACGkN,EAAYkT,UAAWpgB,IAAWkN,EAAYiT,SAAUngB,GAC3DtC,KAAK60F,cACFrlF,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DtC,KAAK80F,cAEL90F,KAAKotE,OAId0uB,2BAAA,SAAgBx5F,GACf,OAAIkN,EAAYoT,WAAYtgB,GACpB,SAEA,MAITw5F,qBAAA,SAAUx5F,GACT,OAAIkN,EAAYoT,WAAYtgB,GACpBwE,YAAMyH,mBAAUjM,GAEhB,aA7BmCsyF,ICFhCmH,GAA6B,WACzCnJ,GAAYtsF,IAAK,gBAAiBw1F,mBCFnC,cAOA,OANQE,SAAP,SAAe/1D,GAId,OAHU8B,GAAS1B,OAAQJ,EAAKkD,eAAiB,EAAG,SAC1CpB,GAAS1B,OAAQJ,EAAKuB,WAAa,GAAK,EAAG,SAC3CO,GAAS1B,OAAQJ,EAAKK,WAAa,EAAG,WCF5CzW,GAAY,SAAEpB,GACnB,OAAOutE,GAAa7zD,OAAQ1Z,mBAG7B,4DAQA,OAR2C3uB,OAC1Cm8F,6BAAA,WACC,OAAOpsE,IAGRosE,yBAAA,WACC,OAAO,IAAI5xD,SAN8B2qD,mBCJ3C,4DAgBA,OAhB2Cl1F,OAC1Co8F,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,2BAAA,WACC,MAAO,QAGRA,4BAAA,WACC,MAAO,WAdkChE,KVJ3C,SAAYgD,GACXA,mBACAA,mBACAA,qBACAA,yBACAA,yBACAA,kBAND,CAAYA,KAAAA,QWQZ,mBAAA,4DAyDA,OAzD2Cp7F,OAC1Cq8F,2BAAA,WACC,OAAOt4F,EAAiB2wF,MAGzB2H,sBAAA,WACC,OAAO,GAGRA,4BAAA,WACC,MAAO,CACNj5F,MAAO,IACP4b,MAAO,UAITq9E,8BAAA,WACC,MAAO,CACNj5F,MAAO,IACP4b,MAAO,YAITq9E,8BAAA,WACC,MAAO,CACNj5F,MAAO,IACP4b,MAAO,YAITq9E,oBAAA,WACC,OAAOjB,GAAoBkB,MAAQlB,GAAoBmB,SAGxDF,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,0BAAA,WACC,OAAO,MAGRA,kCAAA,WACC,OAAO,GAGRA,0BAAA,WACC,OAAO,MAGRA,kCAAA,WACC,OAAO,MAvDkCnI,ICCrCsI,GAAe,CACpB,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAGKC,GAAuC,CAC5C,KACA,KACA,KACA,KACA,KACA,KACA,MAGKC,GAAwB,SAAEv2D,GAC/B,OAAUq2D,GAAcr2D,EAAKuB,gBAAgBvB,EAAKkD,eAG7CszD,GAAuB,4BAE7B,4DAgCA,OAhC+C38F,OAC9C48F,yBAAA,WACC,OAAOH,IAGRG,wBAAA,WACC,OAAO,GAGRA,8BAAA,WACC,OAAOF,IAGRE,6BAAA,WACC,OAAOD,IAGRC,iCAAA,WACC,MAAO,CACN59E,MAAO,aAIT49E,iCAAA,WACC,MAAO,CACN59E,MAAO,SAIT49E,oBAAA,WACC,OAAOxB,GAAoByB,KAAO71F,YAAMkG,uBA9BKmvF,mBCpC/C,4DAIA,OAJ2Cr8F,OAC1C88F,oBAAA,WACC,OAAO1B,GAAoByB,SAFcD,ICK3ChK,GAAiBllE,IAAK,mBAAoB,GAAI,GAC7C,iFAKD,mBAAA,4DAyBA,OAxBS1tB,OACR+8F,qBAAA,WACC,MAAO,QAGRA,8BAAA,WACC,OAAOxnF,EAAWvB,SAGnB+oF,qCAAA,WACC,OAAO,GAGRA,oCAAA,WACC,OAAO1nF,EAAiB3I,MAGzBqwF,2BAAA,SAAgBv6F,GACf,OAAOowF,GAAiBtI,SAAS0S,kBAGlCD,qBAAA,WACC,OAAO,YAtBA5H,mBCXT,4DAsBA,OAtByDn1F,OAGxDi9F,mCAAA,WACC,OAAO5nF,EAAiBtB,QAGzBkpF,iCAAA,WACC,OAAO,GAGRA,qBAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAO,IAGRA,qBAAA,WACC,OAAO,MApBgD9H,ICIzDvC,GAAiBllE,IAAK,mBAAoB,GAAI,GAC7C,kFAKD,mBAAA,4DAyBA,OAxBS1tB,OACRk9F,qBAAA,WACC,MAAO,QAGRA,8BAAA,WACC,OAAO3nF,EAAWvB,SAGnBkpF,qCAAA,WACC,OAAO,GAGRA,oCAAA,WACC,OAAO7nF,EAAiB3I,MAGzBwwF,2BAAA,SAAgB16F,GACf,OAAOowF,GAAiBtI,SAAS6S,kBAGlCD,qBAAA,WACC,OAAO,YAtBA/H,mBCbT,4DAIA,OAJqCn1F,OACpCo9F,sBAAA,WACC,OAAOl9F,KAAKs/C,oBAFuBo1C,mBCGrC,4DA4BA,OA5BoD50F,OACnDq9F,qBAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAO,IAGRA,iCAAA,WACC,OAAO,GAGRA,mCAAA,WACC,OAAOhoF,EAAiBtB,QAGzBspF,qBAAA,WACC,OAAO,SAGRA,0BAAA,WACC,MAAO,QAGRA,wBAAA,WACC,OAAOxzF,KAAKwnB,MAA6B,KAAtBrqB,YAAMskB,4BA1ByB8xE,mBCApD,4DAwBA,OAxBwDp9F,OACvDs9F,qBAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAO,IAGRA,iCAAA,WACC,OAAO,GAGRA,mCAAA,WACC,OAAOjoF,EAAiBtB,QAGzBupF,qBAAA,WACC,OAAO,SAGRA,0BAAA,WACC,MAAO,WAtB+CF,mBCDxD,4DAgBA,OAhBoDp9F,OACnDu9F,+BAAA,SAAoB/6F,GACnB,OAAO,MAGR+6F,2BAAA,SAAgB/6F,GACf,OAAO,MAGR+6F,qBAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAO,OAd2CrJ,ICFvCsJ,GAA2B,WACvC1K,GAAYtsF,IAAK,cAAe61F,KCMpBoB,GAA+B,WAC3C3K,GAAYtsF,IAAK,4BAA6Bu2F,IAC9CjK,GAAYtsF,IAAK,4BAA6By2F,IAC9CnK,GAAYtsF,IAAK,4BAA6B02F,IAC9CpK,GAAYtsF,IAAK,2BAA4B82F,IAC7CxK,GAAYtsF,IAAK,uBAAwB62F,IACzCvK,GAAYtsF,IAAK,uBAAwB+2F,IACzCzK,GAAYtsF,IAAK,kBAAmBo2F,IACpCY,MCdYE,GAA2B,WACvC5K,GAAYtsF,IAAK,cAAes2F,IAChCW,MCFYE,GAA2B,WACvC7K,GAAYtsF,IAAK,cAAe41F,IAChCsB,MCFYE,GAA2B,WACvC9K,GAAYtsF,IAAK,cAAe21F,IAChCwB,oBCDD,cAyBA,OAxBQE,SAAP,SAAe13D,EAAY3iC,GAC1B,IAAId,EAAS,GAgBb,OAfIc,EAAO43F,GAAoBkB,QAC9B55F,GAAUulC,GAAS1B,OAAQJ,EAAKC,YAAc,EAAG,MAE9C5iC,EAAO43F,GAAoBmB,UAC1B,EAAI75F,EAAO9B,SACd8B,GAAU,KAEXA,GAAUulC,GAAS1B,OAAQJ,EAAKyB,cAAgB,EAAG,MAEhDpkC,EAAO43F,GAAoB0C,UAC1B,EAAIp7F,EAAO9B,SACd8B,GAAU,KAEXA,GAAUulC,GAAS1B,OAAQJ,EAAK0D,cAAgB,EAAG,MAE7CnnC,GAGDm7F,SAAP,SAAe/7F,GACd,OAASA,GAA2B,MAAhBA,EAAQ0B,KAAe1B,EAAQ0B,KACjDgS,EAAQuG,cAAcC,IAAK,eAAqC9O,8BCtBpE,cAcA,OAbQ6wF,SAAP,SAAe53D,EAAY3iC,GAC1B,IAAMw6F,EAAMH,GAAax1D,OAAQlC,EAAM3iC,GACvC,OAAI,EAAIw6F,EAAIp9F,OACDs7F,GAAa7zD,OAAQlC,OAAU63D,EAElC,GAAG9B,GAAa7zD,OAAQlC,IAI1B43D,SAAP,SAAej8F,GACd,OAASA,GAA2B,MAAhBA,EAAQ0B,KAAe1B,EAAQ0B,KACjDgS,EAAQuG,cAAcC,IAAK,mBAA6C9O,gBCdtE6iB,GAAY,SAAEpB,EAAasvE,GAChC,OAAOF,GAAiB11D,OAAQ1Z,EAAOsvE,EAAOC,mCAG/C,4DAQA,OAR+Cl+F,OAC9Cm+F,6BAAA,WACC,OAAOpuE,IAGRouE,yBAAA,WACC,OAAO,IAAI5zD,SANkC2qD,mBCJ/C,4DAgBA,OAhB+Cl1F,OAC9Co+F,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,2BAAA,WACC,MAAO,QAGRA,4BAAA,WACC,MAAO,WAdsChG,ICAlCiG,GAA+B,WAC3CvL,GAAYtsF,IAAK,kBAAmB43F,IACpCX,MCFYa,GAA+B,WAC3CxL,GAAYtsF,IAAK,kBAAmB23F,IACpCE,qBCHD,4DAEA,OAF2Cr+F,UAAAk1F,ICA9BqJ,GAA2B,WACvCzL,GAAYtsF,IAAK,cAAeg4F,oBCEjC,aAAA,qDACCr3F,QAAQ0sF,GAAqBO,gBAC7BjtF,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,IAC5CnmE,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,MA6B7C,OAhC8CttE,OAK7Cy+F,+BAAA,SAAoBj8F,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KACGkN,EAAYkT,UAAWpgB,IAAWkN,EAAYiT,SAAUngB,GAC3DtC,KAAK60F,cACFrlF,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DtC,KAAK80F,cAEL90F,KAAKotE,OAIdmxB,2BAAA,SAAgBj8F,GACf,OAAIkN,EAAYoT,WAAYtgB,GACpB,SAEA,MAITi8F,qBAAA,SAAUj8F,GACT,OAAIkN,EAAYoT,WAAYtgB,GACpBwE,YAAMyH,mBAAUjM,GAEhB,aA7BoCsyF,ICHjC4J,GAA8B,WAC1C5L,GAAYtsF,IAAK,iBAAkBi4F,KCQpC7L,GAAiBllE,IAAK,uBAAwB,GAAI,GACjD,wPAODklE,GAAiBllE,IAAK,wBAAyB,GAAI,GAClD,+LAMD,IC3BYixE,kBD2BZ,aAAA,qDACUx3F,2BAA2Bk1C,GAAQ2xB,OAAQ6lB,GAAqBuB,qBAAsB,MA0ChG,OA3C4Cp1F,OAG3C4+F,+BAAA,SAAoBp8F,GACnB,OAAOqxF,GAAqBuB,sBAG7BwJ,qBAAA,SAAUp8F,GACT,OAAOsxF,GAAgBrlF,SAAUjM,IAGlCo8F,+BAAA,SAAoBp8F,GACnB,OAAMkN,EAAYoT,WAAYtgB,KACzBkN,EAAYyT,UAAW3gB,KAAWkN,EAAY6S,UAAW/f,GAIvD,EAHEqxF,GAAqBwB,sBAM/BuJ,8BAAA,SAAmBp8F,GAClB,OAAIkN,EAAYoT,WAAYtgB,KAAakN,EAAYiT,SAAUngB,GAC1DkN,EAAYyT,UAAW3gB,GACnBtC,KAAKs1F,yBAEL3B,GAAqBuB,qBAGtBvB,GAAqBO,iBAI9BwK,qBAAA,WACC,OAAO,GAGRA,2BAAA,SAAgBp8F,GACf,OAAIkN,EAAYiT,SAAUngB,GAClBowF,GAAiBtI,SAASuU,qBAE1BjM,GAAiBtI,SAASwU,0BAxCQ3J,IExB/B4J,GAA4B,WACxCjM,GAAYtsF,IAAK,eAAgBo4F,oBCClC,4DAgBA,OAhBiD5+F,OAChDg/F,8BAAA,WACC,OAAOzpF,EAAWvB,SAGnBgrF,oCAAA,WACC,OAAO3pF,EAAiBzI,OAGzBoyF,qCAAA,WACC,OAAO,GAGRA,mCAAA,WACC,OAAO3pF,EAAiB3I,SAduBkyF,ICFpCK,GAAiC,WAC7CnM,GAAYtsF,IAAK,oBAAqBw4F,oBCFvC,4DAEA,OAFgDh/F,UAAA80F,ICCnCoK,GAAgC,WAC5CpM,GAAYtsF,IAAK,mBAAoB24F,KCAhCpvE,GAAY,SAAEpB,EAAasvE,GAChC,OAAOJ,GAAax1D,OAAQ1Z,EAAOsvE,EAAOC,mCAG3C,4DAQA,OAR2Cl+F,OAC1Co/F,6BAAA,WACC,OAAOrvE,IAGRqvE,yBAAA,WACC,OAAO,IAAI70D,SAN8B2qD,mBCJ3C,4DAgBA,OAhB2Cl1F,OAC1Cq/F,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,2BAAA,WACC,MAAO,QAGRA,4BAAA,WACC,MAAO,WAdkCjH,ICA9BkH,GAA2B,WACvCxM,GAAYtsF,IAAK,cAAe64F,IAChC7B,MCFY+B,GAA2B,WACvCzM,GAAYtsF,IAAK,cAAe44F,IAChCE,MCUYE,GAA0B,WACtClK,KACAO,KACAF,KACAoG,KACAlC,KACAoC,KACA2B,KACAU,KACAC,KACAG,KACAO,KACAF,KACAG,KACAK,KACAtK,qBCzBD,4DAgBA,OAhBuCj1F,OACtCy/F,+BAAA,WACC,OAAO,UAGRA,2BAAA,SAAgBj9F,GACf,OAAO,MAGRi9F,0BAAA,WACC,OAAO38F,EAAYokD,KAGpBu4C,2BAAA,WACC,OAAO17F,EAAiB2wF,SAdaR,KXNvC,SAAYyK,GACXA,iBACAA,eACAA,qBAHD,CAAYA,KAAAA,QYOZ,ICLYe,GAOAC,kBDFZ,4DAgGA,OAhGgD3/F,OAC/C4/F,+BAAA,SAAoBp9F,GACnB,OAAO,MAGRo9F,2BAAA,SAAgBp9F,GACf,OAAO,MAGRo9F,2BAAA,WACC,OAAO,IAGRA,0BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,6BAAA,WACC,OAAO,IAGRA,+BAAA,WACC,OAAO,GAGRA,8BAAA,WACC,MAAO,MAGRA,iCAAA,WACC,OAAOpyD,GAAeqyD,UAGvBD,sCAAA,WACC,OAAO,GAGRA,qCAAA,WACC,MAA4B,IAArB1/F,KAAKorB,eAGbs0E,wCAAA,WACC,OAAOpyD,GAAejvB,MAGvBqhF,kCAAA,WACC,OAAO,GAGRA,iCAAA,WACC,OAAO,GAGRA,oCAAA,WACC,OAAOpyD,GAAejvB,MAGvBqhF,oCAAA,WACC,OAAO,KAGRA,uBAAA,WACC,MAAO,IAGRA,uBAAA,WACC,OAAO,IAGRA,wBAAA,WACC,OAAOjB,GAAUmB,IAGlBF,4BAAA,WACC,OAAOpyD,GAAejvB,MAGvBqhF,oCAAA,WACC,OAAO,GAGRA,iCAAA,WACC,OAAO,GAGRA,kCAAA,WACC,OAAO,GAGRA,2BAAA,WACC,OAAO77F,EAAiB2wF,SA9FsBR,IEHnC6L,GAAgC,WAC5CjN,GAAYtsF,IAAK,mBAAoBo5F,IACrC9M,GAAYtsF,IAAK,UAAWi5F,oBCH7B,4DAEA,OAFsCz/F,UAAAk0F,KFDtC,SAAYwL,GACXA,iBACAA,uBACAA,mBACAA,qBAJD,CAAYA,KAAAA,QAOZ,SAAYC,GACXA,uBACAA,yBAFD,CAAYA,KAAAA,QGLZ,kBACC,cAuDD,OAnDCjgG,sBAAIsgG,0BAAJ,WACC,OAAO,OAGR,SAAYnpC,qCAIZn3D,sBAAIsgG,yBAAJ,WACC,OAAO,cAGR,SAAW59F,qCAIX1C,sBAAIsgG,yBAAJ,WACC,OAAO,OAGR,SAAW19F,qCAIX09F,iBAAA,SAAMh/F,KAINg/F,gBAAA,SAAKnpC,EAAiBz0D,EAAeE,KAIrC09F,kBAAA,WACC,OAAO,IAAIA,GAGZA,qBAAA,WACC,MAAO,CACNnpC,QAAQ,EACRz0D,MAAO,SACPE,MAAO,IAIT09F,sBAAA,SAAWvzC,GACV,OAAQ,GAGTuzC,wBAAA,SAAah/F,EAAgByrD,wBCpD7B,cAkFD,OA9EC/sD,sBAAIugG,0BAAJ,WACC,OAAO,OAGR,SAAYppC,qCAIZn3D,sBAAIugG,yBAAJ,WACC,OAAO,cAGR,SAAW79F,qCAIX1C,sBAAIugG,yBAAJ,WACC,OAAO,OAGR,SAAW39F,qCAIX5C,sBAAIugG,yBAAJ,WACC,OAAO,OAGR,SAAW78F,qCAIX1D,sBAAIugG,yBAAJ,WACC,OAAO,OAGR,SAAW78F,qCAIX1D,sBAAIugG,wBAAJ,WACC,OAAOn1C,GAAiBvsC,UAGzB,SAAU44C,qCAIV8oC,iBAAA,SAAMj/F,KAINi/F,gBAAA,SAAKppC,EAAkBz0D,EAAgBE,EAAgBc,EAAgB+zD,KAIvE8oC,kBAAA,WACC,OAAO,IAAIA,GAGZA,qBAAA,WACC,MAAO,CACNppC,QAAQ,EACRz0D,MAAO,SACPE,MAAO,EACPc,MAAO,EACPE,MAAO,EACP6zD,KAAMrM,GAAiBvsC,OAIzB0hF,sBAAA,SAAWxzC,GACV,OAAQ,GAGTwzC,wBAAA,SAAaj/F,EAAgByrD,wBC7E7B,cA0CD,OAtCC/sD,sBAAIwgG,8BAAJ,WACC,OAAOzoC,GAA0B1jD,YAGlC,SAAgB4b,qCAIhBjwB,sBAAIwgG,4BAAJ,WACC,OAAOxoC,GAAwBtmC,YAGhC,SAAc3B,qCAIdywE,iBAAA,SAAMl/F,KAINk/F,gBAAA,SAAKvwE,EAAwCF,KAI7CywE,qBAAA,WACC,MAAO,CACNvwE,WAAY8nC,GAA0B1jD,OACtC0b,SAAUioC,GAAwBtmC,SAIpC8uE,sBAAA,SAAWzzC,GACV,OAAQ,GAGTyzC,wBAAA,SAAal/F,EAAgByrD,wBCzC7B,cA0CD,OAtCC/sD,sBAAIygG,8BAAJ,WACC,OAAO,OAGR,SAAgBxwE,qCAIhBjwB,sBAAIygG,4BAAJ,WACC,OAAO,OAGR,SAAc1wE,qCAId0wE,iBAAA,SAAMn/F,KAINm/F,gBAAA,SAAKxwE,EAAqBF,KAI1B0wE,qBAAA,WACC,MAAO,CACNxwE,WAAY,EACZF,SAAU,IAIZ0wE,sBAAA,SAAW1zC,GACV,OAAQ,GAGT0zC,wBAAA,SAAan/F,EAAgByrD,wBCvC7B,cAgED,OA5DC/sD,sBAAI0gG,0BAAJ,WACC,OAAO,OAGR,SAAYvpC,qCAIZn3D,sBAAI0gG,yBAAJ,WACC,OAAO,cAGR,SAAWh+F,qCAIX1C,sBAAI0gG,yBAAJ,WACC,OAAO,OAGR,SAAW99F,qCAIX5C,sBAAI0gG,yBAAJ,WACC,OAAO,OAGR,SAAWh9F,qCAIXg9F,iBAAA,SAAMp/F,KAINo/F,gBAAA,SAAKvpC,EAAkBz0D,EAAgBE,EAAgBc,KAIvDg9F,kBAAA,WACC,OAAO,IAAIA,GAGZA,qBAAA,WACC,MAAO,CACNvpC,QAAQ,EACRz0D,MAAO,SACPE,MAAO,EACPc,MAAO,IAITg9F,sBAAA,SAAW3zC,GACV,OAAQ,GAGT2zC,wBAAA,SAAap/F,EAAgByrD,wBC7D7B,cA0CD,OAtCC/sD,sBAAI2gG,8BAAJ,WACC,OAAO,OAGR,SAAgB1wE,qCAIhBjwB,sBAAI2gG,4BAAJ,WACC,OAAO,OAGR,SAAc5wE,qCAId4wE,iBAAA,SAAMr/F,KAINq/F,gBAAA,SAAK1wE,EAAqBF,KAI1B4wE,qBAAA,WACC,MAAO,CACN1wE,WAAY,EACZF,SAAU,IAIZ4wE,sBAAA,SAAW5zC,GACV,OAAQ,GAGT4zC,wBAAA,SAAar/F,EAAgByrD,wBCvC7B,cA0CD,OAtCC/sD,sBAAI4gG,8BAAJ,WACC,OAAO,OAGR,SAAgB3wE,qCAIhBjwB,sBAAI4gG,4BAAJ,WACC,OAAO,OAGR,SAAc7wE,qCAId6wE,iBAAA,SAAMt/F,KAINs/F,gBAAA,SAAK3wE,EAAqBF,KAI1B6wE,qBAAA,WACC,MAAO,CACN3wE,WAAY,EACZF,SAAU,IAIZ6wE,sBAAA,SAAW7zC,GACV,OAAQ,GAGT6zC,wBAAA,SAAat/F,EAAgByrD,wBC1B7B,aACCvsD,KAAKoD,MAAQ,IAAI48F,GACjBhgG,KAAKyE,OAAS,IAAIw7F,GAClBjgG,KAAKuE,QAAU,IAAI27F,GACnBlgG,KAAK+6D,QAAU,IAAIqlC,GACnBpgG,KAAKiF,QAAU,IAAIk7F,GA0HrB,OAvHC3gG,sBAAI6gG,0BAAJ,WACC,OAAO,OAGR,SAAY1pC,qCAIZn3D,sBAAI6gG,yBAAJ,WACC,MAAO,QAGR,SAAW5xE,qCAIXjvB,sBAAI6gG,yBAAJ,WACC,OAAO,OAGR,SAAWn+F,qCAIX1C,sBAAI6gG,yBAAJ,WACC,OAAO,OAGR,SAAWj+F,qCAIX5C,sBAAI6gG,0BAAJ,WACC,MAAO,YAGR,SAAY77D,qCAIZhlC,sBAAI6gG,wBAAJ,WACC,OAAO,QAGR,SAAUrrF,qCAIVxV,sBAAI6gG,0BAAJ,WACC,OAAOhpC,GAAiByD,YAGzB,SAAY77C,qCAIZzf,sBAAI6gG,yBAAJ,WACC,OAAO/oC,GAAgBwD,YAGxB,SAAW9tC,qCAIXxtB,sBAAI6gG,6BAAJ,WACC,OAAO5oC,GAAoBuD,mBAG5B,SAAelX,qCAIftkD,sBAAI6gG,4BAAJ,WACC,OAAO,OAGR,SAAcn0E,qCAIdm0E,iBAAA,SAAMv/F,GACL,OAAOd,MAGRqgG,gBAAA,SACC5xE,EAAgBvsB,EAAgBE,EAChCoiC,EAAiBxvB,EAAeiK,EAChC+N,EAAyB82B,EACzB53B,GAEA,OAAOlsB,MAGRqgG,qBAAA,WACC,MAAO,CACN5xE,MAAO,GACPvsB,MAAO,EACPE,MAAO,EACPoiC,OAAQ,OACRxvB,KAAM,GACNiK,OAAQo4C,GAAiByD,OACzB13D,MAAOpD,KAAKoD,MAAMyqD,WAClBppD,OAAQzE,KAAKyE,OAAOopD,WACpB7gC,MAAOsqC,GAAgBwD,OACvBv2D,QAASvE,KAAKuE,QAAQspD,WACtBkN,QAAS/6D,KAAK+6D,QAAQlN,WACtB/J,UAAW2T,GAAoBuD,cAC/B/1D,QAASjF,KAAKiF,QAAQ4oD,WACtB3hC,UAAU,IAIZm0E,sBAAA,SAAW9zC,GACV,OAAQ,GAGT8zC,wBAAA,SAAav/F,EAAgByrD,aC1I7B,WACCvsD,KAAK6+D,YAAc,EACnB7+D,KAAK++D,WAAa,MCAnB,SAAar4D,EAAkBo4D,GAC9B9+D,KAAK0G,QAAUA,EACf1G,KAAK8+D,YAAcA,iBCApB,aACC9+D,KAAKY,MAAQ,EACbZ,KAAKk4B,YAAc,KACnBl4B,KAAKsgG,MAAQ,GA4Bf,OAzBCC,kBAAA,WACCvgG,KAAKY,MAAQ,EACbZ,KAAKk4B,YAAc,MAGpBqoE,iBAAA,SAAM75F,EAAkBo4D,GACvB,GAAI9+D,KAAKY,MAAQZ,KAAKsgG,MAAM5/F,OAAS,CACpC,IAAM8/F,EAAOxgG,KAAKsgG,MAAOtgG,KAAKY,OAC9B4/F,EAAK95F,QAAUA,EACf85F,EAAK1hC,YAAcA,OAEnB9+D,KAAKsgG,MAAM9/F,KAAM,IAAIigG,GAAkB/5F,EAASo4D,IAEjD9+D,KAAKY,OAAS,GAGf2/F,gBAAA,WACKvgG,KAAKsgG,MAAM5/F,SAAWV,KAAKY,QAC9BZ,KAAKsgG,MAAM5/F,OAASV,KAAKY,QAI3B2/F,oBAAA,WACCvgG,KAAKsgG,MAAM5/F,OAAS,sBCWrB,WAAaggG,EAAoBj1F,EAAoBF,GACpD,IAAMo1F,EAAwB,EAAbD,EACXE,EAAYD,EAElB3gG,KAAK0J,SAAW,IAAI3C,aAA0B,EAAZ65F,GAClC5gG,KAAKisE,eAAiB20B,EACtB5gG,KAAK6+D,YAAc,EACnB7+D,KAAK8pB,aAAe,IAAI+2E,SAAQ7gG,KAAK0J,UAAU,GAAO,GAEtD1J,KAAKyhE,UAAY,IAAI16D,aAA0B,EAAZ65F,GACnC5gG,KAAKmqE,eAAiB,IAAI02B,SAAQ7gG,KAAKyhE,WAAW,GAAO,GAEzDzhE,KAAKuhE,MAAQ,IAAIx6D,aAA0B,EAAZ65F,GAC/B5gG,KAAK6pE,WAAa,IAAIg3B,SAAQ7gG,KAAKuhE,OAAO,GAAO,GAEjDvhE,KAAKwhE,YAAc,IAAIz6D,aAA0B,EAAZ65F,GACrC5gG,KAAK8pE,gBAAkB,IAAI+2B,SAAQ7gG,KAAKwhE,aAAa,GAAO,GAE5DxhE,KAAKugE,WAAa,IAAIx5D,aAA0B,EAAZ65F,GACpC5gG,KAAKqgE,gBAAkB,IAAIwgC,SAAQ7gG,KAAKugE,YAAY,GAAO,GAE3DvgE,KAAKygE,aAAe,IAAI15D,aAA0B,EAAZ65F,GACtC5gG,KAAKwgE,kBAAoB,IAAIqgC,SAAQ7gG,KAAKygE,cAAc,GAAO,GAE/DzgE,KAAK4I,IAAM,IAAI7B,aAA0B,EAAZ65F,GAC7B5gG,KAAK+pB,SAAW,IAAI82E,SAAQ7gG,KAAK4I,KAAK,GAAO,GAE7C,IAAMk4F,EAAmBF,GAAa,MACtC5gG,KAAK2I,QAAYm4F,EAAiB,IAAI95F,YAAa25F,GAAa,IAAII,YAAaJ,GACjF3gG,KAAKksE,cAAgBw0B,EACrB1gG,KAAK++D,WAAa,EAClB/+D,KAAKgqB,YAAc,IAAI62E,SAAQ7gG,KAAK2I,SAAS,GAAO,GAEpD3I,KAAKyL,SAAWA,EAEhBzL,KAAK8hE,QAAU,IAAIy+B,GAEnBvgG,KAAKmnB,KAAO,IAAIS,QAChB5nB,KAAKmgE,UAAY,IAAIp5D,aAAc,GACnC/G,KAAKk+E,SAAW,IAAIn3E,aAAc,GAClC/G,KAAK2jE,UAAY,IAAIq9B,GAErBhhG,KAAKwL,UAAW,IAAIy1F,YAClBC,SAAUlhG,KAAKgqB,aACfm3E,aAAc,YAAanhG,KAAK8pB,aAAc,GAC9Cq3E,aAAc,YAAanhG,KAAKmqE,eAAgB,GAChDg3B,aAAc,QAASnhG,KAAK6pE,WAAY,GACxCs3B,aAAc,aAAcnhG,KAAK8pE,gBAAiB,GAClDq3B,aAAc,aAAcnhG,KAAKqgE,gBAAiB,GAClD8gC,aAAc,eAAgBnhG,KAAKwgE,kBAAmB,GACtD2gC,aAAc,MAAOnhG,KAAK+pB,SAAU,GAgGxC,OA7FCq3E,mBAAA,SAAQ71F,GACP,IAAME,EAAWzL,KAAKyL,SACrBA,EAASD,SAAiBsF,KAAM9Q,KAAKwL,UAEtC,IAAM80F,EAAQtgG,KAAK8hE,QAAQw+B,MACrBe,EAAYf,EAAM5/F,OACxB,GAAI,EAAI2gG,EAAY,CASnB,IARA,IAAM7uF,EAAO8uF,aAAWC,UAEpBC,EAAQ,KACRC,EAAQnB,EAAO,GACfoB,EAAW,EACXC,EAA+B,EAApBF,EAAM3iC,YACjBN,EAAS,EACT93D,EAAU2lB,UAAQyzC,MACbv+D,EAAI,EAAGC,EAAO6/F,EAAY,EAAG9/F,EAAIC,IAAQD,EACjDigG,EAAQC,EAERC,EAAWC,EAEXnjC,GADAmjC,EAA+B,GAF/BF,EAAQnB,EAAO/+F,EAAI,IAEFu9D,aACG4iC,EACpBh7F,EAAU86F,EAAM96F,SAAW2lB,UAAQyzC,MAC/B,EAAItB,GAAU93D,EAAQ6C,QACzBgC,EAAOq2F,SAASC,QAAUp2F,EAAS/E,QAAQoK,KAAMpK,GACjD+E,EAASD,SAASs2F,KAAMtvF,EAAMgsD,EAAQkjC,IAIxCljC,EAA2B,EAAlBx+D,KAAK++D,WAAiB4iC,EAC/Bj7F,EAAU+6F,EAAM/6F,SAAW2lB,UAAQyzC,MAC/B,EAAItB,GAAU93D,EAAQ6C,QACzBgC,EAAOq2F,SAASC,QAAUp2F,EAAS/E,QAAQoK,KAAMpK,GACjD+E,EAASD,SAASs2F,KAAMtvF,EAAMgsD,EAAQmjC,MAKzCP,yBAAA,SAAc1zC,EAAeoF,EAA0BivC,EAAgBC,GACtE,OACClvC,EAASprD,cAAgB1H,MACzB8yD,EAASmvC,oBAAsBF,GAC/BjvC,EAASovC,mBAAqBF,GAC9BlvC,EAAS7P,aAAcyK,IAIzB0zC,mBAAA,SAAQ/3E,EAAkCq1C,GACzC,IAAMoD,EAAU9hE,KAAK8hE,QACrBA,EAAQv8B,QAKR,IAHA,IAAIw8D,EAAS,EACTC,EAAS,EACTt0C,EAAQrkC,EAASvN,MACL,MAAT4xC,GAEU,OADVoF,EAAWpF,EAAMoF,WACG9yD,KAAKijD,aAAcyK,EAAOoF,EAAUivC,EAAQC,GAFjDt0C,EAAQrkC,EAASG,OAMtCspC,EAASxxD,OAAQosD,GACjBoF,EAASsX,UAAWtI,GAEpBigC,GAAUjvC,EAASqvC,iBACnBH,GAAUlvC,EAASsvC,gBAGpB,KAAgB,MAAT10C,EAAeA,EAAQrkC,EAASG,OAAS,CAC/C,IAKMspC,EALAuvC,EAAU14C,GAAiB+D,EAAMl7C,OAAUm3C,GAAiBvG,GAAWk/B,OAC7E,GAAe,MAAX+f,EACH,MAID,GAAgB,OADVvvC,EAAWuvC,EAASriG,KAAM0tD,EAAOq0C,EAAQC,EAAQtjC,IAEtD,MAGD5L,EAASsX,UAAWtI,GACpBigC,GAAUjvC,EAASqvC,iBACnBH,GAAUlvC,EAASsvC,gBAOpB,OAJAtgC,EAAQl4C,MACR5pB,KAAK6+D,YAAckjC,EACnB/hG,KAAK++D,WAAaijC,EAEX,EAAIlgC,EAAQw+B,MAAM5/F,QAG1B0gG,oBAAA,WACCphG,KAAKwL,SAASmc,UACd3nB,KAAK8hE,QAAQn6C,gBC9LT26E,GAAyB,iBAM9B,aACCtiG,KAAKY,MAAQ,EACbZ,KAAKs9E,OAASglB,GAgBhB,OAbCC,kBAAA,SAAOjlB,GACNt9E,KAAKY,OAAS,EACdZ,KAAKs9E,OAASA,GAGfilB,iBAAA,WACC,IAAM3hG,EAAQZ,KAAKY,MAAQZ,KAAKY,MAAQ,EAClC08E,EAASt9E,KAAKs9E,OACpB,OAAI18E,EAAQ08E,EAAO58E,OACX48E,EAAQ18E,GAET,yBCfR,aACCZ,KAAKwiG,IAAU,EACfxiG,KAAKyiG,GAAS,IAAIF,GAClBviG,KAAK0iG,GAAQ,CAAE1iG,KAAKyiG,IACpBziG,KAAKs+C,GAAW,KAiDlB,OA9CCqkD,kBAAA,SAAOrlB,GAKN,OAJAt9E,KAAKwiG,GAAS,GACExiG,KAAKyiG,GAASziG,KAAK0iG,GAAO,IAClC30C,MAAOuvB,GACft9E,KAAKs+C,GAAW,KACTt+C,KAAKwpB,QAGbm5E,gBAAA,WACC,OAAO3iG,KAAKs+C,IAGbqkD,iBAAA,WACC,IACMj1C,EADQ1tD,KAAKyiG,GACCj5E,OACpB,GAAa,MAATkkC,EAAgB,CACnB1tD,KAAKs+C,GAAWoP,EAChB,IAAMjtC,EAAWitC,EAAMjtC,SACvB,GAAI,EAAIA,EAAS/f,OAGhB,IAFMkiG,EAAa5iG,KAAKwiG,GAASxiG,KAAKwiG,GAAS,IACzC56F,EAAO5H,KAAK0iG,IACIhiG,QACfmiG,EAAWj7F,EAAMg7F,IACd70C,MAAOttC,GAChBzgB,KAAKyiG,GAASI,MACR,CACN,IAAMA,EAAW,IAAIN,GACrB36F,EAAKpH,KAAMqiG,GACXA,EAAS90C,MAAOttC,GAChBzgB,KAAKyiG,GAASI,EAGhB,OAAOn1C,EAEP,IAAMk1C,EAAa5iG,KAAKwiG,GAASxiG,KAAKwiG,GAAS,EACzC56F,EAAO5H,KAAK0iG,GAClB,OAAI,GAAKE,GACR5iG,KAAKyiG,GAAS76F,EAAMg7F,GACpB5iG,KAAKs+C,GAAW,KACTt+C,KAAKwpB,SAEZxpB,KAAKs+C,GAAW,KACT,YChDLpe,GAAgB,gnJAqMhBD,GAAkB,4gDAiDvB,WAAax0B,GAAb,MACC3E,YAAO2E,gBACPxE,EAAK67F,GAAUC,SAAO5wF,KAAM+tB,GAAeD,IAC3Ch5B,EAAK+7F,GAAY,IAAIL,GACrB17F,EAAKg8F,GAAc,IACnBh8F,EAAKi8F,GAAiBj8F,EAAKk8F,iBAAkB13F,KAkM/C,OA7MoC3L,OAczBsjG,6BAAV,SAA4B33F,GAC3B,IAAM4qB,EAAU5qB,EAAS4qB,QACnBimD,EAAajmD,EAAQimD,WAC3B,OAAI,EAAIjmD,EAAQgtE,cAAmB/mB,EAAWgnB,mBACtC,WAED,OAGRF,wBAAA,SACC11C,EACAzkC,EAAqBs6E,EACrBC,EAAyBtrE,GAKzB,IAAM2kC,EAAWnP,EAAMmP,SACvB,GAAgB,MAAZA,EAAmB,CACtB,IAAM4mC,EAAcx6E,EAAMnN,IAAK+gD,GAC/B,GAAmB,MAAf4mC,EACH/1C,EAAMhnD,QAAU+8F,EAAY/8F,YACtB,CACN,IAAMg9F,EAAiB,IAAI5qE,GAAuB40B,EAAM77B,MAAQqG,GAChEw1B,EAAMhnD,QAAUg9F,EAAeh9F,QAC/BuiB,EAAM3iB,IAAKo9F,EAAe1rE,GAAI0rE,SAG/Bh2C,EAAMhnD,QAAU88F,EAIjB,IAAMx6E,EAAO0kC,EAAM1kC,KACb0H,EAAY1H,EAAKyF,MACnB,EAAIiC,EAAUhwB,QACjB6iG,EAAY/1E,IAAKxE,EAAKwb,OAAQ9T,IAIhC0yE,0BAAA,SACC9lB,EACAr0D,EAAqBs6E,EACrBC,EAAyBtrE,GAEzB,IAAK,IAAI32B,EAAI,EAAGC,EAAO87E,EAAO58E,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMmsD,EAAQ4vB,EAAQ/7E,GACtBvB,KAAK2jG,YAAaj2C,EAAOzkC,EAAOs6E,EAAaC,EAAgBtrE,GAE7D,IADA,IAAMzX,EAAWitC,EAAMjtC,SACdrO,EAAI,EAAGC,EAAOoO,EAAS/f,OAAQ0R,EAAIC,IAAQD,EAAI,CACvD,IAAMsO,EAAQD,EAAUrO,GACxBpS,KAAK2jG,YAAajjF,EAAOuI,EAAOs6E,EAAaC,EAAgBtrE,GAC7Dl4B,KAAK4jG,cAAeljF,EAAMD,SAAUwI,EAAOs6E,EAAaC,EAAgBtrE,MAK3EkrE,4BAAA,SACC11C,EACAzkC,EAAqBs6E,EACrBC,GAEA,IAAMx6E,EAAO0kC,EAAM1kC,KACb66E,EAAYN,EAAYznF,IAAKkN,EAAKwb,QACxC,GAAiB,MAAbq/D,EAAoB,CACvB,IAAMJ,EAAcx6E,EAAMnN,IAAK+nF,EAAU7rE,IACtB,MAAfyrE,GACHz6E,EAAKC,MAAQ46E,EACb76E,EAAKtiB,QAAU+8F,EAAY/8F,UAE3BsiB,EAAKC,WAAQ1mB,EACbymB,EAAKtiB,QAAU88F,QAGhBx6E,EAAKC,WAAQ1mB,EACbymB,EAAKtiB,QAAU88F,GAIjBJ,8BAAA,SACC9lB,EACAr0D,EAAqBs6E,EACrBC,GAEA,IAAK,IAAIjiG,EAAI,EAAGC,EAAO87E,EAAO58E,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMmsD,EAAQ4vB,EAAQ/7E,GACtBvB,KAAK8jG,gBAAiBp2C,EAAOzkC,EAAOs6E,EAAaC,GAEjD,IADA,IAAM/iF,EAAWitC,EAAMjtC,SACdrO,EAAI,EAAGC,EAAOoO,EAAS/f,OAAQ0R,EAAIC,IAAQD,EAAI,CACvD,IAAMsO,EAAQD,EAAUrO,GACxBpS,KAAK8jG,gBAAiBpjF,EAAOuI,EAAOs6E,EAAaC,GACjDxjG,KAAK+jG,kBAAmBrjF,EAAMD,SAAUwI,EAAOs6E,EAAaC,MAK/DJ,eAAA,SAASrmC,EAA4BugB,EAAkB39D,GACtD,IAAMlU,EAAWzL,KAAKyL,SAChBF,EAASvL,KAAK8iG,GAEpB,GAAc,MAAVv3F,GAAkB,EAAI+xE,EAAO58E,OAAS,CACzC,IAAM03B,EAAa3sB,EAAS2sB,WACtB4rE,EAAUjnC,EAAUknC,aACpBvlC,EAAkB3B,EAAUmnC,mBAAoB9rE,GAGtD,GAAIzY,EAAU,CAEb,IAAMsJ,EAAQ8zC,EAAUonC,SAAU/rE,GAC5BmrE,EAAcxmC,EAAUqnC,iBAC9Bn7E,EAAMsc,QACNg+D,EAAYh+D,QACZ,IAAMi+D,EAAiBv6E,EAAMo7E,oBACvBnsE,EAA2BjP,EAAM0c,iBACvC3lC,KAAK4jG,cAAetmB,EAAQr0D,EAAOs6E,EAAaC,EAAgBtrE,GAChEqrE,EAAY35E,MACZ25E,EAAYjiG,OAAQ2nB,GACpBjpB,KAAK+jG,kBAAmBzmB,EAAQr0D,EAAOs6E,EAAaC,GACpDv6E,EAAMW,MACNX,EAAMq7E,SAGNtkG,KAAKukG,cAAejnB,EAAQ0mB,EAASv4F,EAAUF,EAAQmzD,GAIxDnzD,EAAOq2F,SAAS4C,WAAaznC,EAAUC,cAAe5kC,GACtD7sB,EAAOq2F,SAASljC,gBAAkBA,EAClCnzD,EAAOq2F,SAAS6C,kBAAoB1nC,EAAU/1C,eAAe09E,SAAS,GACtEj5F,EAASF,OAAOuF,KAAMvF,GAAQ,GAC9BE,EAASnJ,MAAOqiG,aAAarpE,QAAMspE,iBAAiBC,cAAY/pC,QAAQ,IACxE,IAAK,IAAIv5D,EAAI,EAAGC,EAAOwiG,EAAQtjG,OAAQa,EAAIC,IAAQD,EAClDyiG,EAASziG,GAAIE,OAAQ8J,KAKd63F,+BAAV,WACC,IAAM0B,EAAa9kG,KAAKijG,GAClB8B,EAAgB/kG,KAAKkjG,GAC3B,OAAI4B,EAAaC,IAChB/kG,KAAKijG,GAAct5F,KAAKC,IAAKm7F,EAAeD,GAAc,IACnD,IAKC1B,0BAAV,WACC,OAAOpjG,KAAKijG,IAGbG,0BAAA,SACC9lB,EAAkB0mB,EAClBv4F,EAAoBF,EACpBmzD,GAEA,IAAMr1C,EAAWrpB,KAAKgjG,GACtB35E,EAAS0kC,MAAOuvB,GAGhB,IAFA,IAAI0nB,EAAK,EACHC,EAAQjB,EAAQtjG,OACG,MAAlB2oB,EAASvN,OAAiBkpF,EAAKC,IAASD,EAC9C,IAAMhB,EAASgB,GAAK1jG,OAAQ+nB,EAAUq1C,GAAoB,CAIzD1+D,KAAKklG,qBACL,MAIF,GAAIF,EAAKC,EAAQ,CAChB,IAAK,IAAIE,EAAKH,EAAIG,EAAKF,IAASE,EAC/BnB,EAASmB,GAAKx9E,UAEfq8E,EAAQtjG,OAASskG,EAGlB,KAAyB,MAAlB37E,EAASvN,OAAgB,CAC/B,IAAMuiD,EAAS,IAAI+iC,GAAcphG,KAAKolG,gBAAiB35F,EAAUF,GACjE,GAAI8yD,EAAO/8D,OAAQ+nB,EAAUq1C,GAC5BslC,EAAQxjG,KAAM69D,QAKd,GAHAA,EAAO12C,WAGD3nB,KAAKklG,qBAEV,YAxM+BG,iCChOnC,aAAA,MACCv+F,0BAEAG,EAAKwZ,SAAW,GAEhBxZ,EAAKq+F,GAAc,EACnBr+F,EAAKs+F,IAAuB,EAE5Bt+F,EAAKwlB,GAAS,KACdxlB,EAAKu+F,GAAe,IAAIlgE,GAExBr+B,EAAKw+F,GAAc,EACnBx+F,EAAKy+F,GAAgBl+F,IAErBP,EAAK0+F,GAAQ,IAAI/9E,QAEjB3gB,EAAK2+F,GAAW,KAqIlB,OAtKqC9lG,OAoCpC+lG,4BAAA,WACC7lG,KAAKknB,QAAQ3J,SAGdsoF,mCAAA,aAIAA,oBAAA,WACC,OAAO7lG,KAAKslG,IAAe,GAG5BO,oBAAA,WACC,OAAO7lG,KAAKulG,GAAsBvlG,KAAKslG,IAGxCO,mBAAA,SAAQp6F,GACP,GAAKzL,KAAK2O,WAAW3O,KAAKwmB,YAAc,IAAMxmB,KAAK4gB,WAAnD,CAIA,IAAMklF,EAAa9lG,KAAKslG,GAClBS,EAAqB/lG,KAAKulG,GAChCvlG,KAAKulG,GAAsBO,EAE3B,IAAIE,EAAuCH,EAAgBI,eACtC,MAAjBD,IACHA,EAAgBH,EAAgBI,eAAiB,IAAI7C,GAAgB33F,IAEtEA,EAASy6F,MAAMC,kBAAmBH,GAClCA,EAAcI,GAASpmG,KAAMA,KAAKygB,SAAUslF,EAAqBD,KAGlED,0BAAA,SAAe9/F,GACd,OAAO,GAGR8/F,2BAAA,WACC,OAAO7lG,KAAKwlG,IAGbK,qBAAA,SAAUztE,GACT,IAAInP,EAAQjpB,KAAKysB,GAKjB,OAJa,MAATxD,IACHA,EAAQ,IAAIgR,GAAc7B,GAC1Bp4B,KAAKysB,GAASxD,GAERA,GAGR48E,uBAAA,WACC,OAAO7lG,KAAK4lG,IAGbC,0BAAA,SAAeztE,GACdp4B,KAAK6mB,kBACL,IAAM5K,EAAYjc,KAAKic,UACjBoqF,EAAWpqF,EAAkBu0C,SACnC,GAAI61C,IAAYrmG,KAAK0lG,GAAgB,CACpC1lG,KAAK0lG,GAAgBW,EACrB,IAAMr/E,EAAiB/K,EAAU+K,eAC3ByC,EAAIzC,EAAeyC,EACnBlqB,EAAIynB,EAAeznB,EACnB+c,EAAQ3S,KAAK+zB,KAAMjU,EAAIA,EAAIlqB,EAAIA,GACrCS,KAAKylG,GAAc,GAAMrtE,EAAa9b,GAEvC,OAAOtc,KAAKylG,IAGbI,+BAAA,SAAoBztE,GACnB,OAAO,KAAOA,GAGfytE,oBAAA,SAAS5sF,EAAgB5B,GAGxB,IAFA,IAAM8P,EAAOnnB,KAAK2lG,GACZllF,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC/C,IAAMmf,EAAQD,EAAUlf,GACxB,GAAImf,EAAM/R,QAAU,CACnB,IAAM23F,EAAa5lF,EAAMktB,QAAS30B,OAAQ1W,EAAW4kB,GAC/CmtC,EAAc5zC,EAAM1H,SAAUstF,GACpC,GAAmB,MAAfhyC,IACY,MAAXj9C,GAAmBA,EAASi9C,IAC/B,OAAOA,GAMX,OAAO,MAGRuxC,wBAAA,SAAa5sF,EAAgB5B,GAG5B,IAFA,IAAM8P,EAAOnnB,KAAK2lG,GACZllF,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC/C,IAAMmf,EAAQD,EAAUlf,GACxB,GAAImf,EAAM/R,QAAU,CACnB,IAAM23F,EAAa5lF,EAAMktB,QAAS30B,OAAQ1W,EAAW4kB,GACrD,GAAIzG,EAAM6lF,aAAcD,KACR,MAAXjvF,GAAmBA,EAASqJ,IAC/B,OAAOA,GAMX,OAAO,MAGRmlF,oBAAA,WAEC,IAAM7B,EAAUhkG,KAAK4lG,GACrB,GAAe,MAAX5B,EACH,IAAK,IAAIziG,EAAI,EAAGC,EAAOwiG,EAAQtjG,OAAQa,EAAIC,IAAQD,EAClDyiG,EAASziG,GAAIomB,UAGf3nB,KAAK4lG,GAASllG,OAAS,EAGvB,IAAM+f,EAAWzgB,KAAKygB,SACtB,IAASlf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAC3Ckf,EAAUlf,GAAIomB,UAEflH,EAAS/f,OAAS,EAGlBoG,YAAM6gB,oBAnKAk+E,iBAAwC,QADXluE,+BCJrC,cAoKA,OA/JQ6uE,YAAP,SAAkBlpB,GAEjB,IADA,IAAM96E,EAAS,GACNjB,EAAI,EAAGC,EAAO87E,EAAO58E,OAAQa,EAAIC,IAAQD,EACjDiB,EAAOhC,KAAM88E,EAAQ/7E,GAAIX,OAE1B,OAAO4B,GAGDgkG,UAAP,SAAgB94C,GAGf,IAFA,IAAIlrD,EAAS,EACTxB,EAAS0sD,EAAM1sD,OACZA,aAAkByxD,IACxBjwD,GAAU,EACVxB,EAASA,EAAOA,OAEjB,OAAOwB,GAGDgkG,iBAAP,SAAuBhxD,EAAekY,GAGrC,GAFe1tD,KAAKymG,QAASjxD,GACdx1C,KAAKymG,QAAS/4C,GACP,CAErB,IADA,IAAIhsC,EAAS8zB,EAAMx0C,OACZ0gB,aAAkB+wC,IAAa,CACrC,GAAIzyD,KAAK0mG,SAAUh5C,EAAOhsC,GACzB,OAAOA,EAERA,EAASA,EAAO1gB,OAEjB,OAAO0gB,EAGP,IADA,IAAIG,EAAS6rC,EAAM1sD,OACZ6gB,aAAkB4wC,IAAa,CACrC,GAAIzyD,KAAK0mG,SAAUlxD,EAAO3zB,GACzB,OAAOA,EAERA,EAASA,EAAO7gB,OAEjB,OAAO6gB,GAIF2kF,aAAP,SAAmB94C,EAAe1sD,GAEjC,IADA,IAAI2lG,EAAcj5C,EAAM1sD,OACjB2lG,IAAgB3lG,GAAU2lG,aAAuBl0C,IACvD/E,EAAQi5C,EACRA,EAAcA,EAAY3lG,OAE3B,OAAO0sD,GAGD84C,WAAP,SAAiB94C,EAAe5sD,GAE/B,IADA,IAAIE,EAAS0sD,EAAM1sD,OACZA,aAAkByxD,IAAa,CACrC,GAAIzxD,IAAWF,EACd,OAAO,EAERE,EAASA,EAAOA,OAEjB,OAAO,GAGDwlG,aAAP,SAAmB94C,GAElB,IADA,IAAI5sD,EAA0C4sD,EACvC5sD,aAAkB2xD,IAAa,CACrC,GAAI3xD,EAAOyxD,SACV,OAAOzxD,EAERA,EAASA,EAAOE,OAEjB,OAAO,MAGDwlG,gBAAP,SAAsB94C,EAA+B11B,EAAY5U,GAEhE,IADA,IAAM3C,EAAWitC,EAAMjtC,SACdlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACxB,GAAImf,EAAMsX,KAAOA,EAChB,OAAOtX,EAER,IAAoB,IAAhB0C,EAAuB,CAC1B,IAAM5gB,EAASgkG,EAAaI,cAAelmF,EAAOsX,EAAI5U,GACtD,GAAc,MAAV5gB,EACH,OAAOA,GAIV,OAAO,MAGDgkG,kBAAP,SAAwB94C,EAA+Bl7C,EAAkB4Q,GAExE,IADA,IAAM3C,EAAWitC,EAAMjtC,SACdlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACxB,GAAImf,EAAMlO,OAASA,EAClB,OAAOkO,EAER,IAAoB,IAAhB0C,EAAuB,CAC1B,IAAM5gB,EAASgkG,EAAaK,gBAAiBnmF,EAAOlO,EAAM4Q,GAC1D,GAAc,MAAV5gB,EACH,OAAOA,GAIV,OAAO,MAGDgkG,YAAP,SACC94C,EAA+Bo5C,EAAuC1jF,GAGtE,IADA,IAAM3C,EAAWitC,EAAMjtC,SACdlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACxB,GAAIulG,EAASpmF,GACZ,OAAOA,EAER,IAAoB,IAAhB0C,EAAuB,CAC1B,IAAM5gB,EAASgkG,EAAaO,UAAWrmF,EAAOomF,EAAS1jF,GACvD,GAAc,MAAV5gB,EACH,OAAOA,GAIV,OAAO,MAGDgkG,qBAAP,SACC94C,EAA+Bl7C,EAAkB4Q,EAAuB5gB,GAExEA,EAASA,GAAU,GAEnB,IADA,IAAMie,EAAWitC,EAAMjtC,SACdlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,EAAMlO,OAASA,GAClBhQ,EAAOhC,KAAMkgB,IAEM,IAAhB0C,GACHojF,EAAaQ,mBAAoBtmF,EAAOlO,EAAM4Q,EAAa5gB,GAG7D,OAAOA,GAGDgkG,eAAP,SACC94C,EAA+Bo5C,EAAuC1jF,EAAuB5gB,GAE7FA,EAASA,GAAU,GAEnB,IADA,IAAMie,EAAWitC,EAAMjtC,SACdlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBulG,EAASpmF,IACZle,EAAOhC,KAAMkgB,IAEM,IAAhB0C,GACHojF,EAAaS,aAAcvmF,EAAOomF,EAAS1jF,EAAa5gB,GAG1D,OAAOA,GAjKDgkG,mBAAmB,SAAE/8E,EAAWlqB,GACtC,OAAOkqB,EAAE7oB,MAAQrB,EAAEqB,0BCHrB,cA6FA,OA5FQsmG,SAAP,SACClmG,EAAkCs8E,EAAmB6pB,GAMrD,IAJA,IAAM1mF,EAAWzf,EAAOyf,SAClB/f,EAAS+f,EAAS/f,OAGfa,EAAI,EAAGA,EAAIb,IAAUa,GACvBmf,EAAQD,EAAUlf,IACdgxD,SACT7xC,EAAM9f,MAAQF,EAASa,EAEvBmf,EAAM9f,MAAQW,EAQhB,GAHAkf,EAAS6Z,KAAMksE,GAAaY,mBAGS,IAAjCD,EAAwC,CAC3C,IAAS5lG,EAAIb,EAAS,EAAG,GAAKa,IAAKA,EAAI,CAEtC,KADMmf,EAAQD,EAAUlf,IACdgxD,SAKH,CACN,IAAMv9C,EAAOyL,EAAS/f,QAAUa,EAAI,GACpC,GAAI,EAAIyT,EAAO,CACd,IAAMxS,EAASie,EAASlO,OAAQhR,EAAI,EAAGyT,GAMvC,OALc,MAAVsoE,IACHA,EAAO58E,OAAS,GAEjBM,EAAO4xD,yBACP5xD,EAAO2c,UACAnb,EAKP,OAHc,MAAV86E,IACHA,EAAO58E,OAAS,GAEV,KAlBRggB,EAAM9f,OAASF,EACfggB,EAAM1f,OAAS,KACf0f,EAAM6xC,UAAW,EACjB7xC,EAAMoyC,cAAWvwD,EAmBnB,OAAI,EAAIke,EAAS/f,QACV8B,EAASie,EAASlO,OAAQ,EAAGkO,EAAS/f,QAC9B,MAAV48E,IACHA,EAAO58E,OAAS,GAEjBM,EAAO4xD,yBACP5xD,EAAO2c,UACAnb,IAEO,MAAV86E,IACHA,EAAO58E,OAAS,GAEV,MAGR,IAASa,EAAIb,EAAS,EAAG,GAAKa,IAAKA,EAAI,CACtC,IAAMmf,EACN,KADMA,EAAQD,EAAUlf,IACdgxD,SAWT,OANA9xC,EAAS/f,OAASa,EAAI,EACR,MAAV+7E,IACHA,EAAO58E,OAAS,GAEjBM,EAAO4xD,yBACP5xD,EAAO2c,UACA,KAVP+C,EAAM1f,OAAS,KACf0f,EAAM6xC,UAAW,EACjB7xC,EAAMoyC,cAAWvwD,EAuBnB,OAZI,EAAIke,EAAS/f,QAChB+f,EAAS/f,OAAS,EACJ,MAAV48E,IACHA,EAAO58E,OAAS,GAEjBM,EAAO4xD,yBACP5xD,EAAO2c,WAEO,MAAV2/D,IACHA,EAAO58E,OAAS,GAGX,yBC1FT,aACCV,KAAK8qC,UAAY,GACjB9qC,KAAKqnG,gBAAkB,IAAIhpE,IAmB7B,OAhBCipE,gBAAA,SAAK76C,GACJ,IAAM3hB,EAAY9qC,KAAK8qC,UACjBu8D,EAAkBrnG,KAAKqnG,gBACvB7kG,EAAS6kG,EAAgBvrF,IAAK2wC,GACpC,GAAc,MAAVjqD,EACH,OAAOA,EAER,IAAM5B,EAAQkqC,EAAUpqC,OAGxB,OAFAoqC,EAAUtqC,KAAMisD,GAChB46C,EAAgB/gG,IAAKmmD,EAAU7rD,GACxBA,GAGR0mG,sBAAA,WACC,OAAOtnG,KAAK8qC,gBCpBDy8D,GAET,iBCEJ,cA4HA,OA3HCC,wBAAA,WACC,OAAOhI,GAAmBlzF,QAG3Bk7F,uBAAA,WACC,OAAO,IAGRA,oCAAA,SAAyB7yF,GACxB,OAAQA,GACR,KAAK6qF,GAAmBpzF,IAExB,KAAKozF,GAAmBlzF,OACvB,OAAOirD,GAA0B1jD,OAClC,KAAK2rF,GAAmBhzF,KACvB,OAAO+qD,GAA0BiN,aAClC,KAAKg7B,GAAmB9yF,MACvB,OAAO6qD,GAA0BkN,gBAInC+iC,kCAAA,SAAuB7yF,GACtB,OAAQA,GACR,KAAK6qF,GAAmBpzF,IACvB,OAAOorD,GAAwB8M,YAChC,KAAKk7B,GAAmBlzF,OACvB,OAAOkrD,GAAwB+M,eAChC,KAAKi7B,GAAmBhzF,KAExB,KAAKgzF,GAAmB9yF,MACvB,OAAO8qD,GAAwBtmC,SAIjCs2E,sCAAA,WACC,OAAO,IAGRA,oCAAA,WACC,OAAO,IAGRA,8BAAA,WACC,OAAO/vC,GAAoBuD,eAG5BwsC,0BAAA,WACC,OAAO,GAGRA,8BAAA,WACC,OAAO,GAGRA,6BAAA,WACC,OAAO,IAGRA,iCAAA,WACC,OAAO/H,GAAuBgI,SAG/BD,8BAAA,WACC,OAAO99C,GAAkBrrC,MAG1BmpF,4CAAA,SAAiC7yF,GAChC,OAAQA,GACR,KAAK6qF,GAAmBpzF,IAExB,KAAKozF,GAAmBlzF,OACvB,OAAOirD,GAA0B1jD,OAClC,KAAK2rF,GAAmBhzF,KACvB,OAAO+qD,GAA0BiN,aAClC,KAAKg7B,GAAmB9yF,MACvB,OAAO6qD,GAA0BkN,gBAInC+iC,0CAAA,SAA+B7yF,GAC9B,OAAQA,GACR,KAAK6qF,GAAmBpzF,IACvB,OAAOorD,GAAwB8M,YAChC,KAAKk7B,GAAmBlzF,OACvB,OAAOkrD,GAAwB+M,eAChC,KAAKi7B,GAAmBhzF,KAExB,KAAKgzF,GAAmB9yF,MACvB,OAAO8qD,GAAwBtmC,SAIjCs2E,sCAAA,WACC,OAAO/vC,GAAoBuD,eAG5BwsC,mCAAA,WACC,MAAO,kBAGRA,8CAAA,WACC,OAAO,IAGRA,4CAAA,WACC,OAAO,IAGRA,8BAAA,WACC,OAAO,GAGRA,6BAAA,WACC,OAAO,GAGRA,iCAAA,WACC,OAAO/H,GAAuBgI,SAG/BD,8BAAA,WACC,OAAO99C,GAAkBrrC,0BC/H3B,4DAEA,OAF2Cve,UAAA0nG,mBCE3C,4DAYA,OAZ2C1nG,OAC1C4nG,wBAAA,WACC,OAAOlI,GAAmBhzF,MAG3Bk7F,mCAAA,WACC,MAAO,QAGRA,8BAAA,WACC,OAAOjwC,GAAoB4O,kBAVcmhC,kBCF3C,cAmBA,OAlBCG,uBAAA,WACC,OAAO,IAGRA,mBAAA,SAAQl5E,GACP,OAAO9kB,KAAKwP,IAAKsV,GAAU,MAG5Bk5E,wBAAA,SAAarrF,GACZ,OAAI,KAAOA,EACH,GACG,KAAOA,EACV,EACG,KAAOA,EACV,EAED,uBChBT,4DAEA,OAF4Cxc,UAAA4/F,mBCA5C,4DAEA,OAFwC5/F,UAAA8nG,mBCAxC,4DAEA,OAFkD9nG,UAAAy/F,mBCAlD,4DAEA,OAF8Cz/F,UAAA+nG,ICCjCC,GAAwB,WACpClV,GAAYtsF,IAAK,WAAYyhG,IAC7BnV,GAAYtsF,IAAK,iBAAkB0hG,oBCHpC,4DAEA,OAFoDloG,UAAA+nG,mBCCpD,4DAIA,OAJ8C/nG,OAC7CmoG,4BAAA,WACC,OAAO36D,GAAewG,QAFsB8zD,kBCS9C,cAgPA,OA/OCM,oBAAA,SAASz5E,GACR,IAAMjc,EAAOic,EAAMjc,KACnB,GAAIic,aAAiB6/C,GAA4B,CAChD,IAOO9rE,EAPD6rE,EAAU5/C,EAAM4/C,QACtB,GAAI5/C,aAAiB4pD,IAEpB,GAAc,OADR71E,EAASxC,KAAKmoG,gBAAiB31F,EAAM67D,EAAS5/C,EAAM2pD,QAAS3pD,IAElE,OAAOjsB,OAIR,GAAc,OADRA,EAASxC,KAAKooG,gBAAiB51F,EAAM67D,EAAS5/C,IAEnD,OAAOjsB,EAIV,OAAOxC,KAAKqoG,aAAc71F,EAAMic,IAGvBy5E,yBAAV,SAAwB11F,EAA6Bic,GACpD,OAAUzuB,KAAKsoG,YAAa91F,QAAWxS,KAAKuoG,iBAAkB95E,EAAMk+C,YAG3Du7B,4BAAV,SACC11F,EAA6B67D,EAAiB5/C,GAE9C,IAAM+5E,EAAYxoG,KAAKsoG,YAAa91F,GACpC,OAAQA,GACR,KAAK07D,GAAsBoJ,UAC1B,MAAO,GAAGt3E,KAAKyoG,oBAAqBp6B,GACrC,KAAKH,GAAsBQ,MAC1B,OAAU85B,OAAcxoG,KAAK0oG,iBAAkBr6B,GAChD,KAAKH,GAAsB+B,aAC1B,OAAUu4B,OAAcxoG,KAAK2oG,uBAAwBt6B,GACtD,KAAKH,GAAsB+H,KAC1B,OAAUuyB,OAAcxoG,KAAK4oG,gBAAiBv6B,GAE/C,OAAO,MAGE65B,4BAAV,SACC11F,EAA6B67D,EAAiB+J,EAAiB3pD,GAE/D,OAAQjc,GACR,KAAK07D,GAAsBhY,UAC1B,IAAM2yC,EAAe7oG,KAAK8oG,qBAAsBz6B,GAChD,OAAQA,GACR,KAAK6I,GAA+BsE,OACnC,OAAUqtB,OAAiB7oG,KAAK+oG,2BAA4B3wB,GAC7D,KAAKlB,GAA+BqB,KACnC,OAAUswB,OAAiB7oG,KAAKgpG,yBAA0B5wB,GAC3D,KAAKlB,GAA+B8D,OACnC,OAAU6tB,OAAiB7oG,KAAKipG,2BAA4B7wB,IAG9D,OAAO,MAGR8vB,wBAAA,SAAa11F,GACZ,OAAQA,GACR,KAAK07D,GAAsBoJ,UAC1B,MAAO,cACR,KAAKpJ,GAAsBQ,MAC1B,MAAO,QACR,KAAKR,GAAsBhY,UAC1B,MAAO,YACR,KAAKgY,GAAsByI,KAC1B,MAAO,OACR,KAAKzI,GAAsB+B,aAC1B,MAAO,eACR,KAAK/B,GAAsB2E,YAC1B,MAAO,cACR,KAAK3E,GAAsBkE,cAC1B,MAAO,gBACR,KAAKlE,GAAsBgF,WAC1B,MAAO,gBACR,KAAKhF,GAAsB+H,KAC1B,MAAO,QAER,MAAO,WAGRiyB,6BAAA,SAAkBv7B,GAEjB,OADU,GACFA,EAAUjsE,OACVisE,EAAUt2D,UAAW,EAFnB,IAE4B,MAE9Bs2D,GAITu7B,6BAAA,SAAkB11F,GACjB,OAAQA,GACR,KAAK4nD,GAA2B7K,WAC/B,MAAO,aACR,KAAK6K,GAA2BwU,SAC/B,MAAO,WACR,KAAKxU,GAA2ByU,OAC/B,MAAO,SACR,KAAKzU,GAA2B0U,QAC/B,MAAO,UACR,KAAK1U,GAA2B5K,WAC/B,MAAO,OACR,KAAK4K,GAA2B3K,aAC/B,MAAO,SAER,MAAO,WAGRy4C,gCAAA,SAAqB11F,GACpB,OAAQA,GACR,KAAKkkE,GAA8BU,KAClC,MAAO,OACR,KAAKV,GAA8BwyB,KAClC,MAAO,OAER,MAAO,WAGRhB,iCAAA,SAAsB11F,GACrB,OAAQA,GACR,KAAK0kE,GAA+B8D,OACnC,MAAO,SACR,KAAK9D,GAA+BqB,KACnC,MAAO,OACR,KAAKrB,GAA+BsE,OACnC,MAAO,SAER,MAAO,WAGR0sB,uCAAA,SAA4B11F,GAC3B,OAAQA,GACR,KAAK6mE,GAAqCsC,SACzC,MAAO,WACR,KAAKtC,GAAqCqC,SACzC,MAAO,WAER,MAAO,WAGRwsB,qCAAA,SAA0B11F,GACzB,OAAQA,GACR,KAAKykE,GAAmC4B,WACvC,MAAO,aACR,KAAK5B,GAAmC6B,WACvC,MAAO,aACR,KAAK7B,GAAmCwB,WACvC,MAAO,aACR,KAAKxB,GAAmCyB,WACvC,MAAO,aACR,KAAKzB,GAAmC0B,oBACvC,MAAO,qBACR,KAAK1B,GAAmC2B,cACvC,MAAO,eAER,MAAO,WAGRsvB,uCAAA,SAA4B11F,GAC3B,OAAQA,GACR,KAAK8lE,GAAqCmB,cACzC,MAAO,iBACR,KAAKnB,GAAqCkB,cACzC,MAAO,qBACR,KAAKlB,GAAqCqB,gBACzC,MAAO,SACR,KAAKrB,GAAqCoB,gBACzC,MAAO,aACR,KAAKpB,GAAqCuB,eACzC,MAAO,QACR,KAAKvB,GAAqCsB,eACzC,MAAO,YAER,MAAO,WAGRsuB,mCAAA,SAAwB11F,GACvB,OAAQA,GACR,KAAK+7D,GAAiC4B,KACrC,MAAO,OACR,KAAK5B,GAAiC6B,OACrC,MAAO,SACR,KAAK7B,GAAiC8B,gBACrC,MAAO,kBACR,KAAK9B,GAAiC35C,KACrC,MAAO,OACR,KAAK25C,GAAiC+B,aACrC,MAAO,eACR,KAAK/B,GAAiCvnB,IACrC,MAAO,MAER,MAAO,WAGRkhD,qCAAA,SAA0B11F,GACzB,OAAQA,GACR,KAAKg8D,GAAmCsN,gBACvC,MAAO,QACR,KAAKtN,GAAmCpB,MACvC,MAAO,MACR,KAAKoB,GAAmCW,MACvC,MAAO,QACR,KAAKX,GAAmCuD,KACvC,MAAO,gBACR,KAAKvD,GAAmC2C,WACvC,MAAO,aAER,MAAO,WAGR+2B,kCAAA,SAAuB11F,GACtB,OAAQA,GACR,KAAKy8D,GAAgCr6C,KACpC,MAAO,OACR,KAAKq6C,GAAgC8D,OACpC,MAAO,SAER,MAAO,WAGRm1B,4BAAA,SAAiB11F,GAChB,OAAQA,GACR,KAAKwjE,GAA0Ba,KAC9B,MAAO,OACR,KAAKb,GAA0Bc,KAC9B,MAAO,oBACR,KAAKd,GAA0Be,aAC9B,MAAO,kBAER,MAAO,WAGRmxB,4BAAA,SAAiB11F,GAChB,OAAQA,GACR,KAAKogE,GAA0BuD,MAC9B,MAAO,eCvPGgzB,GAAiC,WAC7CvW,GAAYtsF,IAAK,oBAAqB4hG,KCC1BkB,GAA8B,WAC1CxW,GAAYtsF,IAAK,iBAAkB2hG,IACnCrV,GAAYtsF,IAAK,uBAAwB+iG,IACzCF,MCLYG,GAAuB,WACnC1W,GAAYtsF,IAAK,UAAW2xF,KCDhBsR,GAA8B,WAC1C3W,GAAYtsF,IAAK,iBAAkB4xF,oBCApC,4DAYA,OAZ8Cp4F,OAC7C0pG,kBAAA,WACC,MAAO,OAGRA,sBAAA,WACC,MAAO,MAGRA,uBAAA,WACC,MAAO,OAVqCtR,mBCD9C,4DAEA,OAFsCp4F,UAAA60F,mBCEtC,4DAYA,OAZqD70F,OACpD2pG,qBAAA,WACC,MAAO,WAGRA,sBAAA,WACC,OAAO,KAGRA,mCAAA,WACC,OAAOt0F,EAAiBtB,WAV2B61F,ICDxCC,GAA8B,WAC1C/W,GAAYtsF,IAAK,iBAAkBkjG,IACnC5W,GAAYtsF,IAAK,wBAAyBmjG,oBCH3C,4DAIA,OAJoD3pG,OACnD8pG,uBAAA,WACC,MAAO,iDAF2CJ,ICAvCK,GAAoC,WAChDjX,GAAYtsF,IAAK,uBAAwBsjG,oBCD1C,4DAKA,OALqD9pG,OACpDgqG,uBAAA,WACC,MAAO,0FAF4CN,ICAxCO,GAAqC,WACjDnX,GAAYtsF,IAAK,wBAAyBwjG,oBCA3C,4DAoBA,OApBgDhqG,OAC/CkqG,kBAAA,WACC,MAAO,MAGRA,sBAAA,WACC,MAAO,UAGRA,qBAAA,WACC,MAAO,IAGRA,0BAAA,WACC,OAAO,IAGRA,sBAAA,WACC,MAAO,WAlBuC/R,ICDnCgS,GAAgC,WAC5CrX,GAAYtsF,IAAK,mBAAoB0jG,oBCDtC,4DAQA,OAR8ClqG,OAC7CoqG,kBAAA,WACC,MAAO,MAGRA,sBAAA,WACC,OAAO,SANqCV,ICAjCW,GAA8B,WAC1CvX,GAAYtsF,IAAK,iBAAkB4jG,KCE9BE,GAAU,SAAE9nG,GACjB,OAAIkN,EAAYuT,YAAazgB,GACrB,yBACGkN,EAAYwT,SAAU1gB,GACzB,gCAEA,gCAIT,4DAgBA,OAhBiDxC,OAChDuqG,kBAAA,WACC,MAAO,MAGRA,sBAAA,WACC,OAAO,MAGRA,uBAAA,WACC,OAAOD,IAGRC,wBAAA,WACC,OAAO,QAdwCb,mBCdjD,4DAIA,OAJwD1pG,OACvDwqG,sBAAA,WACC,OAAO,OAF+Cb,ICE3Cc,GAAiC,WAC7C3X,GAAYtsF,IAAK,oBAAqB+jG,IACtCzX,GAAYtsF,IAAK,2BAA4BgkG,oBCH9C,4DAIA,OAJ6CxqG,OAC5C0qG,kBAAA,WACC,MAAO,WAFoCR,ICAhCS,GAA6B,WACzC7X,GAAYtsF,IAAK,gBAAiBkkG,oBCDnC,4DAQA,OAR6C1qG,OAC5C4qG,+BAAA,WACC,MAAO,YAGRA,iCAAA,WACC,MAAO,mBANoCzS,mBCI7C,4DAoBA,OApBqCn4F,OACpC6qG,kCAAA,WACC,OAAO,GAGRA,+BAAA,SAAoBroG,GACnB,OAAOqxF,GAAqBY,kBAG7BoW,2BAAA,WACC,OAAO9mG,EAAiB2wF,MAGzBmW,0BAAA,WACC,OAAO,MAGRA,wBAAA,WACC,OAAOlM,GAAUmM,UAlBkB5W,mBCJrC,4DAQA,OARqCl0F,OACpC+qG,+BAAA,SAAoBvoG,GACnB,OAAO,UAGRuoG,2BAAA,SAAgBvoG,GACf,OAAO,MAN4BqoG,mBCErC,4DAgBA,OAhBiD7qG,OAChDgrG,+BAAA,WACC,OAAO,MAGRA,2BAAA,WACC,OAAO,MAGRA,sBAAA,WACC,OAAO,KAGRA,0BAAA,WACC,OAAOloG,EAAYokD,QAd4B6jD,mBCIjD,4DA4CA,OA5CyC/qG,OACxCirG,+BAAA,SAAoBzoG,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KACGkN,EAAYiT,SAAUngB,GACzBqxF,GAAqBO,gBAClB1kF,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DqxF,GAAqBuB,qBAErB,MAIT6V,+BAAA,SAAoBzoG,GACnB,OAAOqxF,GAAqBqX,iBAG7BD,2BAAA,SAAgBzoG,GACf,OAAO,MAGRyoG,sBAAA,WACC,OAAO,IAGRA,qBAAA,WACC,MAAO,WAGRA,mCAAA,WACC,OAAO51F,EAAiB3I,MAGzBu+F,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,0BAAA,WACC,OAAOnoG,EAAYokD,QA1CoB0iD,mBCHzC,4DAgBA,OAhBqD5pG,OACpDmrG,+BAAA,SAAoB3oG,GACnB,OAAOwE,YAAMrE,6BAAoBH,GAASgC,EAAWwL,SAGtDm7F,+BAAA,SAAoB3oG,GACnB,OAAOwE,YAAMnE,6BAAoBL,GAASgC,EAAWwL,SAGtDm7F,qBAAA,SAAU3oG,GACT,OAAOsxF,GAAgBrlF,SAAUjM,IAGlC2oG,0BAAA,WACC,OAAOroG,EAAYyb,SAdgC0sF,ICDxCG,GAA6B,WACzCtY,GAAYtsF,IAAK,gBAAiBokG,IAClC9X,GAAYtsF,IAAK,oBAAqBwkG,IACtClY,GAAYtsF,IAAK,wBAAyB2kG,KCQ9BE,GAA0B,WACtCvP,KACAlC,KACA6P,KACAM,KACAE,KACAJ,KACAlM,KACAU,KACA8L,KACAE,KACAI,KACAE,KACAS,KACA9L,KACAkK,MCtBD5W,GAAiBllE,IAAK,gBAAiB,GAAI,GAC1C,mGAKD,mBAAA,4DAwBA,OAxByC1tB,OACxCsrG,oCAAA,WACC,OAAOj2F,EAAiBzI,OAGzB0+F,8BAAA,WACC,OAAO/1F,EAAWvB,SAGnBs3F,qCAAA,WACC,MAAkC,IAAzBprG,KAAK6F,mBAGfulG,2BAAA,SAAgB9oG,GACf,OAAOowF,GAAiBtI,SAASihB,eAGlCD,yBAAA,WACC,MAAO,IAGRA,yBAAA,SAAc9oG,GACb,MAAO,OAtBgCsyF,mBCVzC,4DA4BA,OA5BuC90F,OACtCwrG,+BAAA,SAAoBhpG,GACnB,OAAO,MAGRgpG,2BAAA,SAAgBhpG,GACf,OAAO,MAGRgpG,sBAAA,WACC,OAAO,GAGRA,2BAAA,WACC,OAAOznG,EAAiB8a,UAGzB2sF,yBAAA,WACC,OAAO/qD,GAAiBoE,UAGzB2mD,4BAAA,WACC,OAAO,GAGRA,4BAAA,WACC,OAAO,MA1B8BtX,mBCAvC,4DAQA,OAR+Cl0F,OAC9CyrG,yBAAA,WACC,OAAOhrD,GAAiBoE,UAGzB4mD,sBAAA,WACC,MAAO,WANsCD,mBCE/C,4DAoCA,OApCqCxrG,OACpC0rG,+BAAA,SAAoBlpG,GACnB,OAAO,UAGRkpG,uBAAA,WACC,OAAO,GAGRA,uBAAA,WACC,OAAO,GAGRA,0BAAA,WACC,OAAO,GAGRA,6BAAA,WACC,OAAO,GAGRA,qBAAA,WACC,OAAO,KAGRA,sBAAA,WACC,OAAO,GAGRA,sBAAA,WACC,OAAOxrG,KAAKyrG,iBAGbD,2BAAA,WACC,OAAO3nG,EAAiB2wF,SAlCW+W,mBCJrC,4DAQA,OARyCzrG,OACxC4rG,2BAAA,WACC,OAAO1rG,KAAK6F,mBAGb6lG,4BAAA,WACC,OAAO,OANgCX,mBCAzC,4DAIA,OAJ6CjrG,OAC5C6rG,kCAAA,WACC,OAAO3rG,KAAK6F,sBAF+B6lG,ICK7ChZ,GAAiBllE,IAAK,8BAA+B,GAAI,GACxD,sGAKDklE,GAAiBllE,IAAK,gCAAiC,GAAI,GAC1D,WAGD,mBAAA,4DAwBA,OAxB8C1tB,OAC7C8rG,+BAAA,SAAoBtpG,GACnB,OAAOwE,YAAMrE,6BAAoBH,GAASgC,EAAWwL,SAGtD87F,qBAAA,SAAUtpG,GACT,OAAOwE,YAAMyH,mBAAUjM,GAASgC,EAAWwL,SAG5C87F,2BAAA,SAAgBtpG,GACf,OAAIkN,EAAYiT,SAAUngB,GAClBowF,GAAiBtI,SAASyhB,4BAE1BnZ,GAAiBtI,SAAS0hB,+BAInCF,8BAAA,WACC,OAAOv2F,EAAW0f,QAGnB62E,qCAAA,WACC,OAAO,MAtBqCD,mBCX9C,4DA0BA,OA1BmD7rG,OAClDisG,+BAAA,SAAoBzpG,GACnB,OAAIkN,EAAYiT,SAAUngB,GAClB,SAED,MAGRypG,+BAAA,SAAoBzpG,GACnB,OAAIkN,EAAYiT,SAAUngB,GAClB,GAED,GAGRypG,sBAAA,WACC,OAAO,GAGRA,qBAAA,WACC,MAAO,WAGRA,0BAAA,WACC,OAAOnpG,EAAYokD,QAxB8BukD,mBCFnD,4DAUA,OAVuDzrG,OAGtDksG,qBAAA,WACC,MAAO,WAGRA,0BAAA,WACC,OAAOppG,EAAYokD,QARkCukD,ICGvD7Y,GAAiBllE,IAAK,qCAAsC,GAAI,GAC/D,6HAKDklE,GAAiBllE,IAAK,qCAAsC,GAAI,GAC/D,6HAKD,mBAAA,4DAwBA,OAxByD1tB,OACxDmsG,2BAAA,WACC,OAAOjsG,KAAK6F,mBAGbomG,4BAAA,WACC,OAAO,IAGRA,2BAAA,SAAgB3pG,GACf,OAAIkN,EAAY08F,WAAY5pG,GACpBowF,GAAiBtI,SAAS+hB,mCAE1BzZ,GAAiBtI,SAASgiB,oCAInCH,8BAAA,WACC,OAAO52F,EAAW0f,QAGnBk3E,qCAAA,WACC,OAAO,MAtBgDlB,mBClBzD,4DAQA,OAR4DjrG,OAC3DusG,2BAAA,WACC,OAAOvlG,YAAMnB,0BAAmB,IAGjC0mG,qCAAA,WACC,OAAOvlG,YAAMwrB,oCAA6B,OANgBs5E,ICO5DlZ,GAAiBllE,IAAK,sBAAuB,GAAI,GAChD,4JAMD,mBAAA,4DAgDA,OAhD6C1tB,OAC5CwsG,2BAAA,SAAgBhqG,GACf,OAAIA,EAAQgC,EAAWw8C,YACf4xC,GAAiBtI,SAASmiB,oBAE3B,MAGRD,8BAAA,SAAmBhqG,GAClB,OAAIA,EAAQgC,EAAWoL,QACf5I,YAAMotB,4BAAmB5xB,GAE1B,GAGRgqG,8BAAA,WACC,OAAOj3F,EAAW0f,QAGnBu3E,oCAAA,WACC,OAAOn3F,EAAiBzI,OAGzB4/F,2BAAA,WACC,MAAO,CACN/0E,QAAQ,EACRwrD,KAAK,EACLrrD,MAAO,CAAC,CACPjJ,MAAO4qB,GAAwB+H,wBAC/Bp4B,KAAM,CACLyF,MAAOzuB,KAAKwsG,2BAEX,CACF/9E,MAAO4qB,GAAwBgI,kBAC/Br4B,KAAM,CACLyF,MAAOzuB,KAAKysG,0BAMhBH,mCAAA,WACC,MAAO,2BAGRA,+BAAA,WACC,MAAO,wBA9CoCX,mBCd7C,4DAIA,OAJ2D7rG,OAC1D4sG,2BAAA,WACC,OAAO5lG,YAAMnB,0BAAmB,OAFyB2mG,ICM3D5Z,GAAiBllE,IAAK,sBAAuB,GAAI,GAChD,mGAKD,mBAAA,4DAgBA,OAhB6C1tB,OAC5C6sG,2BAAA,SAAgBrqG,GACf,OAAOowF,GAAiBtI,SAASwiB,qBAGlCD,8BAAA,WACC,OAAOt3F,EAAW0f,QAGnB43E,oCAAA,WACC,OAAOx3F,EAAiBzI,OAGzBigG,qCAAA,WACC,OAAO,OAdoCjB,mBCZ7C,4DAIA,OAJ2D5rG,OAC1D+sG,2BAAA,WACC,OAAO/lG,YAAMnB,0BAAmB,OAFyBgnG,mBCI3D,4DAwBA,OAxBkD7sG,OACjDgtG,2BAAA,SAAgBxqG,GACf,OAAOqxF,GAAqBuB,sBAG7B4X,2BAAA,SAAgBxqG,GACf,OAAOqxF,GAAqBwB,sBAG7B2X,sBAAA,WACC,OAAO,IAGRA,qBAAA,WACC,MAAO,WAGRA,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,OAtByCpD,mBCHlD,4DAEA,OAFkD5pG,UAAAgtG,mBCDlD,4DAIA,OAJgEhtG,OAC/DitG,2BAAA,WACC,OAAOjmG,YAAMnB,0BAAmB,OAF8BqnG,mBCKhE,4DAwBA,OAxB4CltG,OAC3CmtG,+BAAA,SAAoB3qG,GACnB,OAAO,MAGR2qG,2BAAA,SAAgB3qG,GACf,OAAO,MAGR2qG,qBAAA,WACC,OAAO,GAGRA,sBAAA,WACC,OAAO,GAGRA,yBAAA,WACC,OAAO74F,EAAiBogF,MAGzByY,2BAAA,WACC,OAAOppG,EAAiB8a,aAtBkBq1E,mBCJ5C,4DAEA,OAF8Cl0F,UAAAmtG,mBCD9C,4DAIA,OAJ4DntG,OAC3DotG,2BAAA,WACC,OAAOpmG,YAAMnB,0BAAmB,OAF0BwnG,mBCA5D,4DAIA,OAJ2DrtG,OAC1DstG,2BAAA,WACC,OAAOtmG,YAAMnB,0BAAmB,OAFyBgmG,ICmB9C0B,GAAqB,WACjCza,GAAYtsF,IAAK,QAASklG,IAE1B5Y,GAAYtsF,IAAK,YAAaolG,IAC9B9Y,GAAYtsF,IAAK,iBAAkBslG,IACnChZ,GAAYtsF,IAAK,gBAAiBgmG,IAClC1Z,GAAYtsF,IAAK,gBAAiBqmG,IAClC/Z,GAAYtsF,IAAK,qBAAsB0mG,IACvCpa,GAAYtsF,IAAK,iBAAkB6mG,IACnCva,GAAYtsF,IAAK,gBAAiBqlG,IAElC/Y,GAAYtsF,IAAK,0BAA2B0lG,IAC5CpZ,GAAYtsF,IAAK,4BAA6B2lG,IAC9CrZ,GAAYtsF,IAAK,+BAAgC+lG,IACjDzZ,GAAYtsF,IAAK,8BAA+BomG,IAChD9Z,GAAYtsF,IAAK,8BAA+BumG,IAChDja,GAAYtsF,IAAK,mCAAoCymG,IACrDna,GAAYtsF,IAAK,+BAAgC4mG,IACjDta,GAAYtsF,IAAK,8BAA+B8mG,IAChDxa,GAAYtsF,IAAK,sBAAuBylG,KCpC5BuB,GAAyB,WACrC1a,GAAYtsF,IAAK,YAAa8kG,IAC9BiC,qBCAD,4DAsBA,OAtB2CvtG,OAC1CytG,+BAAA,SAAoBjrG,GACnB,OAAIkN,EAAYiT,SAAUngB,GAClB,SAED,MAGRirG,+BAAA,SAAoBjrG,GACnB,OAAIkN,EAAYiT,SAAUngB,GAClB,GAED,GAGRirG,sBAAA,WACC,OAAO,GAGRA,0BAAA,WACC,OAAO3qG,EAAYokD,QApBsBukD,ICE3C7Y,GAAiBllE,IAAK,qCAAsC,GAAI,GAC/D,6HAKDklE,GAAiBllE,IAAK,qCAAsC,GAAI,GAC/D,6HAKD,ICEYggF,kBDFZ,4DAoCA,OApCiD1tG,OAChD2tG,+BAAA,SAAoBnrG,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KACGkN,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5D,SACGkN,EAAY08F,WAAY5pG,GAC3B,SAEA,MAITmrG,2BAAA,SAAgBnrG,GACf,OAAO,MAGRmrG,sBAAA,WACC,OAAO,IAGRA,qBAAA,WACC,MAAO,WAGRA,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,0BAAA,WACC,OAAO7qG,EAAYokD,QAlC4B0iD,IEhBpCgE,GAA2B,WACvC9a,GAAYtsF,IAAK,oBAAqBmnG,IACtC7a,GAAYtsF,IAAK,cAAeinG,MDgBjC,SAAYC,GACXA,yBACAA,uBAFD,CAAYA,KAAAA,QAmDZ,IEvEYG,kBFuEZ,4DA0fA,OArfU7tG,OA6BC8tG,iBAAV,SAAgBhsG,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ,IAAMD,EAAQ3B,KAAK2B,MACbksG,EAAUjsG,GAAWA,EAAQisG,QAC7BC,EAAkBD,GAAWA,EAAQ52E,SAAYt1B,EAAMosG,oBAC7D/tG,KAAKguG,GAAW,KAChBhuG,KAAKiuG,GAAkBH,EACvB9tG,KAAKkuG,GAAe,KAEpB,IAAMrgE,EAAUjsC,GAAWA,EAAQisC,QAC7BsgE,EAAkBtgE,GAAWA,EAAQ5W,SAAYt1B,EAAMysG,oBAC7DpuG,KAAKquG,GAAW,KAChBruG,KAAKsuG,GAAkBH,EACvBnuG,KAAKuuG,GAAgB1gE,GAAWA,EAAQ7gB,MACxChtB,KAAKwuG,GAAe,KACpBxuG,KAAKyuG,IAAkB,EACvBzuG,KAAK0uG,IAAqB,EAC1B1uG,KAAK2uG,GAAyB,SAAE/4F,GAC/B3O,EAAK2nG,iBAAkBh5F,IAGxB,IAAMgR,EAAShlB,GAAWA,EAAQglB,OAClC5mB,KAAK6uG,GAAU,KACf7uG,KAAK8uG,GAAkBloF,GAAUA,EAAOqQ,SAAYt1B,EAAMotG,mBAC1D/uG,KAAKgvG,GAAepoF,GAAUA,EAAOoG,MACrChtB,KAAKivG,GAAwB,SAAEr5F,GAC9B3O,EAAKioG,gBAAiBt5F,IAGvB,IAAMmR,EAAQnlB,GAAWA,EAAQmlB,MACjC/mB,KAAKmvG,GAAS,KACdnvG,KAAKovG,GAAiBroF,GAASA,EAAMkQ,SAAYt1B,EAAM0tG,kBACvDrvG,KAAKsvG,GAAcvoF,GAASA,EAAMiG,MAClChtB,KAAKuvG,GAAuB,SAAE35F,GAC7B3O,EAAKuoG,eAAgB55F,IAGtB5V,KAAKyvG,IAAa,EAClBzvG,KAAK0vG,GAAY9tG,GAA6B,MAAlBA,EAAQ+zE,OACnC/zE,EAAQ+zE,OAASh0E,EAAMguG,YAExB3vG,KAAK4vG,GAAiB,WACrB3oG,EAAK4oG,YAEN,IAAMp/F,EAAS7O,GAA2B,MAAhBA,EAAQ6O,KAC/B5N,EAAcjB,EAAQ6O,MAAS+8F,GAAkB5rG,EAAQ6O,MAAS7O,EAAQ6O,KAC5E9O,EAAMmuG,UAEP9vG,KAAK+vG,GAAQt/F,EACTA,IAAS+8F,GAAiBwC,QAC7BhwG,KAAKopB,SAIP5pB,sBAAIouG,2BAAJ,WACC,OAAO5tG,KAAKquG,oCAGHT,sBAAV,WAEC,GADA9mG,YAAMud,qBACFrkB,KAAK+vG,KAAUvC,GAAiB59F,QACnC5P,KAAKopB,YACC,CACN,IAAMykB,EAAU7tC,KAAKquG,GACjBxgE,GACHA,EAAQqnC,UAKD04B,qBAAV,WACC9mG,YAAMwd,oBACFtkB,KAAK+vG,KAAUvC,GAAiB59F,UACnC5P,KAAKiwG,gBACLjwG,KAAKkwG,WAIGtC,wBAAV,WACC,OAAI5tG,KAAK+vG,KAAUvC,GAAiB59F,UAC1B5P,KAAK4iB,cAKhBgrF,kBAAA,YACO5tG,KAAKyvG,IAAczvG,KAAKmwG,gBAC7BnwG,KAAKyvG,IAAa,EAClBpvG,EAAciB,OAAQtB,QAIxB4tG,mBAAA,SAAQniG,GACHzL,KAAKyvG,KACRzvG,KAAKyvG,IAAa,EAClBzvG,KAAKowG,QAAS3kG,IAEf3E,YAAMrF,iBAAQgK,GACVzL,KAAKyuG,IACRzuG,KAAKqwG,cAAe5kG,IAIZmiG,oBAAV,SAAmBniG,GAClB,IAAMzL,KAAKyuG,GAAkB,CAC5BzuG,KAAKyuG,IAAkB,EAEvBzuG,KAAKywC,UAEL,IAAMo9D,EAAU7tG,KAAKswG,aACrB,GAAIzC,EAAU,CACb,IAAMjnF,EAAS5mB,KAAKuwG,UAAW1C,GACzBhgE,EAAU7tC,KAAKwwG,WAAY3C,GAC3B9mF,EAAQ/mB,KAAKywG,SAAU5C,GAC7B,GAAIhgE,EAAU,CACb,IAAMzV,EAAa3sB,EAAS2sB,WACtBs4E,EAAc1wG,KAAK2wG,eAAgBv4E,GACnCw4E,EAAc5wG,KAAK6wG,eAAgBH,EAAat4E,GAChDz2B,EAAQ3B,KAAK2B,MACbW,EAAQtC,KAAKsC,MACnBtC,KAAK8wG,gBAAiBjD,EAASvrG,EAAOX,EAAO+uG,EAAaE,GAC1D5wG,KAAK+wG,gBAAiBljE,EAASvrC,EAAOX,EAAO+uG,EAAaE,GACtDhqF,GACH5mB,KAAKgxG,eAAgBpqF,EAAQjlB,GAE1BolB,GACH/mB,KAAKixG,cAAelqF,EAAOplB,GAE5B3B,KAAKkxG,kBAAmBrjE,EAASjnB,EAAQG,GAGzC8mF,EAAQ7gF,MAAM6qB,QAAU,GACpB73C,KAAKijB,aACR4qB,EAAQqnC,QAET24B,EAAQsD,UAAY,EACpBtD,EAAQuD,WAAa,EAIjBpxG,KAAK0uG,IAAsB1uG,KAAK0vG,IAAY,WAAY7hE,GAC3D3yB,WAAYlb,KAAK4vG,GAAgB,OAO5BhC,qBAAV,WACC,GAAI5tG,KAAKyuG,GAAkB,CAC1B,IAAM5gE,EAAU7tC,KAAKquG,GACjBxgE,GAAW7tC,KAAK0uG,IAAsB1uG,KAAK0vG,IAAY,WAAY7hE,IACtE7tC,KAAK0uG,IAAqB,EACzB7gE,EAAgB8nC,YAKVi4B,uBAAV,SAAsBh9E,GACrB,IAAMpuB,EAASsE,YAAM+pB,qBAAYD,GAIjC,OAHI5wB,KAAKyuG,IACRzuG,KAAKywC,UAECjuC,GASEorG,2BAAV,SAA0B8C,EAAwBt4E,GACjD,IAAMg7C,EAAOpzE,KAAKkuG,GAAsC,MAArBluG,KAAKkuG,GAAuBluG,KAAKkuG,GAAe,IAAIv7E,YACvFygD,EAAK7sE,SAAUmqG,GAIf,IAFA,IAAM9wG,EAAI,IAAIgoB,QAAO,EAAG,GACpBrU,EAAUvT,KAAKgB,OACZuS,aAAmBoN,GAAQ,CACjC/gB,EAAE0G,IAAK,EAAG,GACViN,EAAQ89F,SAAUzxG,EAAGA,GAAG,GACxB,IAAIwG,EAAIxG,EAAEwG,EACNC,EAAIzG,EAAEyG,EAEVzG,EAAE0G,IAAKiN,EAAQrQ,MAAOqQ,EAAQ5M,QAC9B4M,EAAQ89F,SAAUzxG,EAAGA,GAAG,GACxB,IAAM0K,EAAI1K,EAAEwG,EAAIA,EACVmE,EAAI3K,EAAEyG,EAAIA,EAEhBD,GAAOA,EAAIgyB,EAAc,GAAMA,EAC/B/xB,GAAOA,EAAI+xB,EAAc,GAAMA,EAE/B,IAAM9vB,EAAK8qE,EAAKhtE,EACVoC,EAAK4qE,EAAK/sE,EACVkC,EAAK6qE,EAAKhtE,EAAIgtE,EAAKlwE,MACnBuF,EAAK2qE,EAAK/sE,EAAI+sE,EAAKzsE,OAEzBysE,EAAKhtE,EAAIuD,KAAKC,IAAKD,KAAKG,IAAKxB,EAAIlC,GAAKA,EAAIkE,GAC1C8oE,EAAK/sE,EAAIsD,KAAKC,IAAKD,KAAKG,IAAKtB,EAAInC,GAAKA,EAAIkE,GAE1C6oE,EAAKlwE,MAAQyG,KAAKC,IAAKD,KAAKG,IAAKvB,EAAInC,GAAKA,EAAIkE,GAAM8oE,EAAKhtE,EACzDgtE,EAAKzsE,OAASgD,KAAKC,IAAKD,KAAKG,IAAKrB,EAAIpC,GAAKA,EAAIkE,GAAM6oE,EAAK/sE,EAE1DkN,EAAUA,EAAQvS,OAEnB,OAAOoyE,GAQEw6B,2BAAV,SAA0Bx1E,GACzB,IAAMg7C,EAAOpzE,KAAKwuG,GAAsC,MAArBxuG,KAAKwuG,GAAuBxuG,KAAKwuG,GAAe,IAAI77E,YAEjF/yB,EAAI,IAAIgoB,QAAO,EAAG,GAcxB,OAbA5nB,KAAKqxG,SAAUzxG,EAAGA,GAAG,GACrBwzE,EAAKhtE,EAAIxG,EAAEwG,EACXgtE,EAAK/sE,EAAIzG,EAAEyG,EAEXzG,EAAE0G,IAAKtG,KAAKkD,MAAOlD,KAAK2G,QACxB3G,KAAKqxG,SAAUzxG,EAAGA,GAAG,GACrBwzE,EAAKlwE,MAAQtD,EAAEwG,EAAIgtE,EAAKhtE,EACxBgtE,EAAKzsE,OAAS/G,EAAEyG,EAAI+sE,EAAK/sE,EAGzB+sE,EAAKhtE,GAAOgtE,EAAKhtE,EAAIgyB,EAAc,GAAMA,EACzCg7C,EAAK/sE,GAAO+sE,EAAK/sE,EAAI+xB,EAAc,GAAMA,EAElCg7C,GAGRw6B,mBAAA,WACC,GAAI5tG,KAAKyuG,GAAkB,CAC1BzuG,KAAKyuG,IAAkB,EAEvBzuG,KAAK+5C,WAEL,IAAM8zD,EAAU7tG,KAAKguG,GACN,MAAXH,IACHA,EAAQ7gF,MAAM6qB,QAAU,QAGzB,IAAMhK,EAAU7tC,KAAKquG,GACN,MAAXxgE,GACH7tC,KAAKsxG,kBAAmBzjE,EAAS7tC,KAAK6uG,GAAS7uG,KAAKmvG,IAErDnvG,KAAK0uG,IAAqB,EAE1B,IAAMxtG,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMohB,EAAOphB,EAAMohB,KACftiB,KAAK+vG,KAAUvC,GAAiB59F,SACnC0S,EAAK4yD,QAGN,IAAMn9D,EAAqB7W,EAAMuK,SAASmO,QAAQC,YAC9C7Z,KAAKuxG,cAAex5F,EAAmBy5F,MAAMv4F,UAAcjZ,KAAKqiB,cACnEriB,KAAKuf,YAAY,GACjB+C,EAAK0K,MAAM5M,OAASpgB,KAAKogB,QAG1Blf,EAAMI,YAKCssG,oBAAV,aAIUA,qBAAV,aAIUA,8BAAV,SACC//D,EAAkBjnB,EAA+BG,GAE7CH,GACHA,EAAOnP,iBAAkB,QAASzX,KAAKivG,IAEpCloF,GACHA,EAAMtP,iBAAkB,QAASzX,KAAKuvG,IAEvC1hE,EAAQp2B,iBAAkB,QAASzX,KAAK2uG,IAAwB,IAGvDf,8BAAV,SACC//D,EAAkBjnB,EAA+BG,GAE7CH,GACHA,EAAOqd,oBAAqB,QAASjkC,KAAKivG,IAEvCloF,GACHA,EAAMkd,oBAAqB,QAASjkC,KAAKuvG,IAE1C1hE,EAAQ5J,oBAAqB,QAASjkC,KAAK2uG,IAAwB,IAG1Df,uBAAV,SAAsBC,GACrB,IAAIrrG,EAASxC,KAAKquG,GAClB,GAAc,MAAV7rG,EAAiB,CACpB,IAAMy0B,EAAUj3B,KAAKsuG,GACjBr3E,IACHz0B,EAASy0B,EAAS42E,GAClB7tG,KAAKquG,GAAW7rG,GAGlB,OAAOA,GAGEorG,uBAAV,WACC,IAAIprG,EAASxC,KAAKguG,GAClB,GAAc,MAAVxrG,EAAiB,CACpB,IAAMy0B,EAAUj3B,KAAKiuG,GACf/sG,EAAQb,EAAcsZ,SAAU3Z,MAClCi3B,GAAW/1B,IACdsB,EAASy0B,EAAS/1B,EAAMuwG,uBACxBzxG,KAAKguG,GAAWxrG,GAGlB,OAAOA,GAGEorG,sBAAV,SAAqBC,GACpB,IAAIrrG,EAASxC,KAAK6uG,GAClB,GAAc,MAAVrsG,EAAiB,CACpB,IAAMy0B,EAAUj3B,KAAK8uG,GACjB73E,IACHz0B,EAASy0B,EAAS42E,GAClB7tG,KAAK6uG,GAAUrsG,GAGjB,OAAOA,GAGEorG,qBAAV,SAAoBC,GACnB,IAAIrrG,EAASxC,KAAKmvG,GAClB,GAAc,MAAV3sG,EAAiB,CACpB,IAAMy0B,EAAUj3B,KAAKovG,GACjBn4E,IACHz0B,EAASy0B,EAAS42E,GAClB7tG,KAAKmvG,GAAS3sG,GAGhB,OAAOA,GAGEorG,4BAAV,SACC9sG,EACAwB,EAAmBX,EACnB+uG,EAAwBE,GAExB,IAAM5jF,EAAQhtB,KAAKuuG,GACnB,OAAIvhF,EACIA,EAAOlsB,EAAQwB,EAAOX,EAAO+uG,EAAaE,GAE1C5wG,KAAK2B,MAAMovG,gBAAiBjwG,EAAQwB,EAAOouG,EAAaE,IAIvDhD,4BAAV,SACC9sG,EACAwB,EAAmBX,EACnB+uG,EAAwBE,GAExB,IAAM5jF,EAAQhtB,KAAK0xG,GACnB,OAAI1kF,EACIA,EAAOlsB,EAAQwB,EAAOX,EAAO+uG,EAAaE,GAE1C5wG,KAAK2B,MAAMmvG,gBAAiBhwG,EAAQwB,EAAOouG,EAAaE,IAIvDhD,2BAAV,SAA0B9sG,EAAwBa,GACjD,IAAMqrB,EAAQhtB,KAAKgvG,GACnB,OAAIhiF,EACIA,EAAOlsB,EAAQa,GAEf3B,KAAK2B,MAAMqvG,eAAgBlwG,IAI1B8sG,0BAAV,SAAyB9sG,EAAwBa,GAChD,IAAMqrB,EAAQhtB,KAAKsvG,GACnB,OAAItiF,EACIA,EAAOlsB,EAAQa,GAEf3B,KAAK2B,MAAMsvG,cAAenwG,IAIzB8sG,4BAAV,SAA2Bh4F,GAC1B,IAAM1U,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMolB,EAAkBplB,EAAMgiB,qBACxB8xD,EAAY1uD,EAAgB2uD,cAAej1E,MAAM,GAAO,GAAO,GACrEkB,EAAMohB,KAAK4yD,QACX5uD,EAAgBnD,WAAY6xD,GAAW,GAAM,GAC7Cp/D,EAAEiC,iBACFjC,EAAEskC,6BAIM0zD,2BAAV,SAA0Bh4F,GACzB,IAAM1U,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMolB,EAAkBplB,EAAMgiB,qBACxB8xD,EAAY1uD,EAAgB2uD,cAAej1E,MAAM,GAAO,GAAO,GACrEkB,EAAMohB,KAAK4yD,QACX5uD,EAAgBnD,WAAY6xD,GAAW,GAAM,GAC7Cp/D,EAAEiC,iBACFjC,EAAEskC,6BAIM0zD,6BAAV,SAA4Bh4F,GACvB5V,KAAK+vG,KAAUvC,GAAiBwC,SAC7BhwG,KAAKijB,aACVjjB,KAAKk1E,UAKE04B,0BAAV,WACC5tG,KAAK2wC,SAGIi9D,kBAAV,aAIAA,gBAAA,WACC5tG,KAAK2wC,QACL3wC,KAAKkwG,UAGNtC,mBAAA,WACC,IAAM//D,EAAU7tC,KAAKquG,GAMrB,OALe,MAAXxgE,GAAmB7tC,KAAKyuG,IAAmBzuG,KAAK0vG,IAAW,WAAY7hE,EACzEA,EAAgB8nC,SAEjB31E,KAAK0uG,IAAqB,EAEpB1uG,MAGE4tG,0BAAV,SAAyBniG,GACxB,GAAIzL,KAAKyuG,GACR,GAAIzuG,KAAK2xG,aAAe,CACvB,IAAM9jE,EAAU7tC,KAAKquG,GACfR,EAAU7tG,KAAKguG,GACrB,GAAIngE,GAAWggE,EAAU,CACxB,IAAMz1E,EAAa3sB,EAAS2sB,WACtBs4E,EAAc1wG,KAAK2wG,eAAgBv4E,GACnCw4E,EAAc5wG,KAAK6wG,eAAgBH,EAAat4E,GAChDz2B,EAAQ3B,KAAK2B,MACbW,EAAQtC,KAAKsC,MACnBtC,KAAK8wG,gBAAiBjD,EAASvrG,EAAOX,EAAO+uG,EAAaE,GAC1D5wG,KAAK+wG,gBAAiBljE,EAASvrC,EAAOX,EAAO+uG,EAAaE,SAG3D5wG,KAAKkwG,UAKEtC,oBAAV,WACC,MAAO,mBAnfCl8E,GG7EJkgF,GAAa,SAAE5wG,GACpB,IAAMwB,EAAS+U,SAAS+hB,cAAe,OAEvC,OADAt4B,EAAOguC,YAAaxsC,GACbA,kBAGR,4DA+HA,OA7HU1C,OACT+xG,8BAAA,WACC,OAAO,MAGRA,4BAAA,SACC/wG,EAAiBwB,EACjBouG,EAAwBE,GAGxB,IAAM5jF,EAAQhtB,KAAK8xG,wBAAyBxvG,EAAOouG,EAAaE,GAC/D5wG,KAAK+xG,sBAAuBzvG,GAC5BtC,KAAKgyG,oBAAqB1vG,GAC1BtC,KAAKiyG,0BAA2B3vG,GAChCtC,KAAKkyG,sBAAuB5vG,GAC5BtC,KAAKmyG,uBAAwB7vG,EAAOouG,GACpC1wG,KAAKoyG,uBAAwB9vG,GAC9BxB,EAAOguC,aAAc,QAAS9hB,GAG1Bxd,EAAYmT,WAAYrgB,GAC3BxB,EAAOguC,aAAc,WAAY,YAEjChuC,EAAOuzE,gBAAiB,YAIrB7kE,EAAYoT,WAAYtgB,GAC3BxB,EAAOguC,aAAc,WAAY,YAEjChuC,EAAOuzE,gBAAiB,aAIhBw9B,sCAAV,SAAqCvvG,GACpC,MAAO,kCAGEuvG,kCAAV,SAAiCvvG,GAChC,MAAO,yCAGEuvG,mCAAV,SAAkCvvG,EAAmBouG,GAKpD,MAAO,YAJY1wG,KAAK4F,sBACH5F,KAAK6F,wBACJ7F,KAAK8F,yBACP9F,KAAK2F,wBAIhBksG,mCAAV,SAAkCvvG,GACjC,MAAO,kBAGEuvG,oCAAV,SACCvvG,EAAmBouG,EAAwBE,GAE3C,MAAO,6BACGF,EAAYtqG,EAAIwqG,EAAYxqG,eAC7BsqG,EAAYrqG,EAAIuqG,EAAYvqG,gBAC1BqqG,EAAYxtG,oBACXwtG,EAAY/pG,0BACP+pG,EAAY/pG,cAGpBkrG,gCAAV,SAA+BvvG,GAC9B,MAAO,gBAAgBtC,KAAKirB,gCACbjrB,KAAKorB,4BACRprB,KAAKuO,SAAUjM,GAAQQ,SAAU,SAGpC+uG,kCAAV,SAAiCvvG,GAChC,MAAO,cAGRuvG,8BAAA,WACC,OAAOD,IAGRC,4BAAA,SACC/wG,EAAyBwB,EACzBouG,EAAwBE,GAExB,IAAM5jF,EAAQ,sGAEbhtB,KAAKqyG,wBAAyB/vG,EAAOouG,EAAaE,GACnD9vG,EAAOguC,aAAc,QAAS9hB,IAGrB6kF,oCAAV,SAAmCvvG,EAAmBouG,EAAwBE,GAC7E,MAAO,4BACGA,EAAYxqG,aACbwqG,EAAYvqG,eACVuqG,EAAY1tG,oBACX0tG,EAAYjqG,0BACP+pG,EAAY/pG,cAG9BkrG,6BAAA,WACC,OAAOD,IAGRC,2BAAA,SAAgB/wG,GAIfA,EAAOguC,aAAc,QAHP,gLAIdhuC,EAAOguC,aAAc,WAAY,MAGlC+iE,4BAAA,WACC,OAAOD,IAGRC,0BAAA,SAAe/wG,GACdd,KAAKgxG,eAAgBlwG,IAGtB+wG,oBAAA,WACC,OAAOrE,GAAiB59F,SAGzBiiG,sBAAA,WACC,OAAO,MA3HCld,ICNG2d,GAAsB,WAClC1f,GAAYtsF,IAAK,SAAUojG,oBCC5B,4DAQA,OARiD5pG,OAChDyyG,yBAAA,WACC,OAAOhyD,GAAiBiyD,YAGzBD,qBAAA,WACC,MAAO,WANwCjH,mBCDjD,4DAIA,OAJ8CxrG,OAC7C2yG,sBAAA,WACC,OAAOzyG,KAAKs/C,oBAFgCizD,ICDjCG,GAA8B,WAC1C9f,GAAYtsF,IAAK,iBAAkBmsG,KCK9BE,GAAmB,WACxB,OAAO,MAGFC,GAAqB,SAAE5pF,GAC5B,OAAOA,GAKFmlF,GAAiB,SAAEntG,GACxB,IAAM6xG,EAAQ7xG,EAAO8xG,uBAFeC,+BAGpC,GAAI,EAAIF,EAAMnyG,OACb,OAAOmyG,EAAO,GAEf,IAAMhlE,EAAUt2B,SAAS+hB,cAAe,SAIxC,OAHAuU,EAAQiB,aAAc,aAAc,SACpCjB,EAAQiB,aAAc,QARcikE,+BASpC/xG,EAAOguC,YAAanB,GACbA,GAGF+jE,GAAa,SAAE5wG,EAAqBgyG,GACzC,IAAMH,EAAQ7xG,EAAO8xG,uBAAwBE,GAC7C,GAAI,EAAIH,EAAMnyG,OACb,OAAOmyG,EAAO,GAEf,IAAMrwG,EAAS+U,SAAS+hB,cAAe,OAGvC,OAFA92B,EAAOssC,aAAc,QAASkkE,GAC9BhyG,EAAOguC,YAAaxsC,GACbA,GAIFsrG,GAAiB,SAAE9sG,GACxB,OAAO4wG,GAAY5wG,EAFiB+xG,gCAM/BE,GAAgB,SAAEjyG,GACvB,OAAO4wG,GAAY5wG,EAFgB+xG,+BAM9BG,GAAe,SAAElyG,GACtB,OAAO4wG,GAAY5wG,EAFe+xG,6CAKnC,aAAA,qDACC9rG,QAAQ,SACRA,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,QAkF7C,OApFsCttE,OAIrCqzG,+BAAA,SAAoB7wG,GACnB,OAAIkN,EAAYoT,WAAYtgB,IAAWkN,EAAYmT,WAAYrgB,GACvD,KACGkN,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DtC,KAAK80F,cAEL90F,KAAKotE,OAId+lC,2BAAA,SAAgB7wG,GACf,OAAO,UAGR6wG,4BAAA,SAAiB7wG,GAChB,OAAIkN,EAAYsT,UAAWxgB,GACnBqxF,GAAqByf,cAEtBtsG,YAAMnC,0BAAiBrC,IAG/B6wG,sBAAA,WACC,OAAOnzG,KAAKs/C,iBAGb6zD,qBAAA,WACC,OAAO,KAGRA,2BAAA,WACC,MAAO,IAGRA,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,sBAAA,WACC,MAAO,QAGRA,gCAAA,WACC,OAAOnzG,KAAK8vB,oBAGbqjF,kCAAA,WACC,OAAOP,IAGRO,gCAAA,WACC,OAAOR,IAGRQ,8BAAA,WACC,OAAOhF,IAGRgF,8BAAA,WACC,OAAOrF,IAGRqF,6BAAA,WACC,OAAOF,IAGRE,4BAAA,WACC,OAAOD,IAGRC,sBAAA,WACC,OAAO,GAGEA,kCAAV,SAAiC7wG,GAChC,MAAO,2BAlF6BuvG,mBCnDtC,4DAwBA,OAxB4C/xG,OAC3CuzG,mCAAA,WACC,OAAOl+F,EAAiBtB,QAGzBw/F,oBAAA,WACC,OAAO,GAGRA,mBAAA,WACC,OAAO,MAGRA,mBAAA,WACC,OAAO,MAGRA,yBAAA,WACC,OAAO,GAGRA,yBAAA,SAAc/wG,GACb,OAAO,MAtBmC6wG,ICFtCP,GAAqB,SAAE5pF,GAC5B,OAAOsqF,SAAUtqF,EAAM,oBAGxB,4DAIA,OAJ6ClpB,OAC5CyzG,kCAAA,WACC,OAAOX,OAFoCS,ICLhCG,GAA6B,WACzC5gB,GAAYtsF,IAAK,gBAAiBitG,oBCCnC,4DAYA,OAZ2CzzG,OAC1C2zG,mCAAA,WACC,OAAOt+F,EAAiBzI,OAGzB+mG,qBAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAOzzG,KAAKs/C,oBAV6B49C,ICF9BwW,GAA2B,WACvC9gB,GAAYtsF,IAAK,cAAemtG,KCA3Bb,GAAqB,SAAE5pF,GAC5B,OAAO5V,WAAY4V,mBAGpB,4DAQA,OAR0ClpB,OACzC6zG,oBAAA,WACC,MAAO,IAGRA,kCAAA,WACC,OAAOf,OANiCS,ICL7BO,GAA0B,WACtChhB,GAAYtsF,IAAK,aAAcqtG,oBCChC,4DAQA,OAR0C7zG,OACzC+zG,yBAAA,WACC,MAAO,IAGRA,yBAAA,SAAcvxG,GACb,MAAO,OANiC6wG,ICF7BW,GAA0B,WACtClhB,GAAYtsF,IAAK,aAAcutG,KCEnBE,GAAyB,WACrCrB,KACAc,KACAE,KACAE,KACAE,MCLYE,GAAuB,WACnCphB,GAAYtsF,IAAK,UAAWglG,IAC5B1Y,GAAYtsF,IAAK,oBAAqBisG,IACtC3f,GAAYtsF,IAAK,eAAgB2mG,IACjCra,GAAYtsF,IAAK,kBAAmBilG,KCLxB0I,GAAqB,WACjCrhB,GAAYtsF,IAAK,qBAAsBwmG,IACvCla,GAAYtsF,IAAK,YAAaykG,IAC9BnY,GAAYtsF,IAAK,QAASukG,oBCD3B,4DAoBA,OApBwC/qG,OACvCo0G,+BAAA,WACC,OAAOvgB,GAAqBY,kBAG7B2f,2BAAA,SAAgB5xG,GACf,OAAO,MAGR4xG,sBAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAO,GAGRA,2BAAA,WACC,OAAOrwG,EAAiB2wF,SAlBc+d,mBCGxC,aAAA,qDACCtrG,QAAQ,SACRA,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,MAC5CnmE,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,QA2C7C,OA9C4CttE,OAK3Cq0G,+BAAA,SAAoB7xG,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KACGkN,EAAYiT,SAAUngB,GACzBqxF,GAAqBO,gBAClB1kF,EAAYkT,UAAWpgB,GAC1BtC,KAAK60F,cACFrlF,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DtC,KAAK80F,cAEL,MAITqf,2BAAA,WACC,OAAO,MAGRA,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,0BAAA,WACC,OAAOvxG,EAAYokD,KAGpBmtD,mCAAA,WACC,OAAOh/F,EAAiB3I,SA5CkBwoF,ICL/Bof,GAAwB,WACpCxhB,GAAYtsF,IAAK,eAAgB6tG,IACjCvhB,GAAYtsF,IAAK,WAAY4tG,IAC7B7G,qBCHD,4DAYA,OAZ0CvtG,OACzCu0G,+BAAA,SAAoB/xG,GACnB,OAAO,UAGR+xG,2BAAA,SAAgB/xG,GACf,OAAO,MAGR+xG,2BAAA,WACC,OAAOxwG,EAAiB2wF,SAVgBmW,mBCD1C,4DAoBA,OApBiD7qG,OAChDw0G,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,0BAAA,WACC,OAAO,IAGRA,6BAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAO,MAlBwC/I,mBCFjD,4DAEA,OAFmDzrG,UAAA8rG,mBCAnD,4DAEA,OAFwD9rG,UAAAisG,mBCAxD,4DAEA,OAFiEjsG,UAAAusG,mBCAjE,4DAEA,OAFgEvsG,UAAA4sG,mBCAhE,4DACA,OADgE5sG,UAAA+sG,mBCAhE,4DAEA,OAFqE/sG,UAAAitG,mBCArE,4DAEA,OAFiEjtG,UAAAotG,mBCAjE,4DAEA,OAFgEptG,UAAAstG,mBCAhE,4DAEA,OAFkDttG,UAAAwsG,mBCAlD,4DACA,OADkDxsG,UAAA6sG,mBCAlD,4DAEA,OAFuD7sG,UAAAktG,mBCAvD,4DAEA,OAFmDltG,UAAAqtG,mBCAnD,4DAEA,OAFkDrtG,UAAA6rG,IC2BrC4I,GAA0B,WACtC3hB,GAAYtsF,IAAK,aAAc+tG,IAC/BzhB,GAAYtsF,IAAK,oBAAqBguG,IAEtC1hB,GAAYtsF,IAAK,sBAAuBkuG,IACxC5hB,GAAYtsF,IAAK,qBAAsBmuG,IACvC7hB,GAAYtsF,IAAK,qBAAsBouG,IACvC9hB,GAAYtsF,IAAK,0BAA2BquG,IAC5C/hB,GAAYtsF,IAAK,sBAAuBsuG,IACxChiB,GAAYtsF,IAAK,qBAAsBuuG,IAEvCjiB,GAAYtsF,IAAK,2BAA4BwuG,IAC7CliB,GAAYtsF,IAAK,oCAAqCyuG,IACtDniB,GAAYtsF,IAAK,mCAAoC0uG,IACrDpiB,GAAYtsF,IAAK,mCAAoC2uG,IACrDriB,GAAYtsF,IAAK,wCAAyC4uG,IAC1DtiB,GAAYtsF,IAAK,oCAAqC6uG,IACtDviB,GAAYtsF,IAAK,mCAAoC8uG,oBCxCtD,4DAgBA,OAhBqCt1G,OACpCu1G,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,MAAO,QAGRA,mCAAA,WACC,OAAOlgG,EAAiBtB,QAGzBwhG,2BAAA,WACC,OAAOxxG,EAAiBwa,SAdW6+E,ICHxBoY,GAAqB,WACjC1iB,GAAYtsF,IAAK,QAAS+uG,oBCC3B,4DAYA,OAZwCv1G,OACvCy1G,qBAAA,WACC,MAAO,QAGRA,2BAAA,SAAgBjzG,GACf,OAAO,MAGRizG,2BAAA,WACC,OAAO1xG,EAAiB2wF,SAVcR,mBCCxC,4DAoBA,OApB0Cl0F,OACzC01G,+BAAA,SAAoBlzG,GACnB,OAAO,GAGRkzG,+BAAA,SAAoBlzG,GACnB,OAAO,GAGRkzG,qBAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAO,IAGRA,2BAAA,WACC,OAAO3xG,EAAiB2wF,SAlBgBR,mBCE1C,aAAA,qDACC/sF,QAAQk1C,GAAQ2xB,OAAQ6lB,GAAqBuB,qBAAsB,OAyCpE,OA1C+Cp1F,OAG9C21G,+BAAA,SAAoBnzG,GACnB,OAAIkN,EAAY6S,UAAW/f,IAAWkN,EAAYqT,WAAYvgB,GACtDqxF,GAAqBO,gBAErBl0F,KAAKotE,OAIdqoC,+BAAA,SAAoBnzG,GACnB,OAAIkN,EAAY6S,UAAW/f,IAAWkN,EAAYqT,WAAYvgB,GACtD,EAEAqxF,GAAqBwB,sBAI9BsgB,2BAAA,SAAgBnzG,GACf,OAAO,MAGRmzG,2BAAA,SAAgBnzG,GACf,OAAO,GAGRmzG,2BAAA,SAAgBnzG,GACf,OAAO,GAGRmzG,qBAAA,WACC,OAAO,IAGRA,sBAAA,WACC,OAAO,IAGRA,2BAAA,WACC,OAAO,OAxCsCzhB,ICJlC0hB,GAA0B,WACtC9iB,GAAYtsF,IAAK,aAAckvG,IAC/B5iB,GAAYtsF,IAAK,kBAAmBmvG,KCDxBE,GAAqB,WACjC/iB,GAAYtsF,IAAK,QAASqkG,IAC1B/X,GAAYtsF,IAAK,WAAYivG,IAC7BG,qBCLD,4DAEA,OAFuC51G,UAAAsrG,ICC1BwK,GAAuB,WACnChjB,GAAYtsF,IAAK,UAAWuvG,IAC5BvI,qBCAD,4DAgBA,OAhBsCxtG,OACrCg2G,+BAAA,WACC,OAAOniB,GAAqBY,kBAG7BuhB,2BAAA,SAAgBxzG,GACf,OAAO,UAGRwzG,sBAAA,WACC,OAAO,GAGRA,2BAAA,WACC,OAAOjyG,EAAiB2wF,SAdY+W,mBCAtC,4DAgBA,OAhB0CzrG,OACzCi2G,qBAAA,WACC,MAAO,QAGRA,0BAAA,WACC,OAAOnzG,EAAYwJ,KAGpB2pG,2BAAA,SAAgBzzG,GACf,OAAO,MAGRyzG,yBAAA,WACC,OAAO,OAdiCpL,kBCG1C,cAoEA,OAjEQqL,qBAAP,SAA2B1zG,GAC1B,OAAIkN,EAAYsT,UAAWxgB,GACnBqxF,GAAqByf,cAClB9wG,EAAQgC,EAAWyL,UACtB4jF,GAAqBO,gBAErBP,GAAqBuB,sBAIvB8gB,qBAAP,SAA2B1zG,GAC1B,OAAMkN,EAAYoT,WAAYtgB,KACzBkN,EAAYkT,UAAWpgB,KAAWkN,EAAYyT,UAAW3gB,GAIvD,EAHEqxF,GAAqBqX,iBAMxBgL,iBAAP,SAAuB1zG,GACtB,OAAO,UAGD0zG,iBAAP,SAAuB1zG,GACtB,MAAO,IAGD0zG,gBAAP,SAAsB1zG,GACrB,OAAOlC,EAAY61G,YAGbD,WAAP,SAAiB1zG,GAChB,OAAOsxF,GAAgBrlF,SAAUjM,IAG3B0zG,WAAP,SAAiB1zG,GAChB,OAAMkN,EAAYoT,WAAYtgB,GAGvB,EAFCsxF,GAAgBnlF,SAAUnM,IAK5B0zG,oBAAP,SAA0B1zG,GACzB,OAAIkN,EAAYoT,WAAYtgB,IAAWkN,EAAYmT,WAAYrgB,KAAakN,EAAYiT,SAAUngB,GAC7FkN,EAAYyT,UAAW3gB,GACnBtC,KAAKs1F,yBAEL3B,GAAqBuB,qBAGtBvB,GAAqBO,iBAIvB8hB,kBAAP,SAAwB1zG,GACvB,OAAQ,GAGF0zG,YAAP,WACC,MAAO,WAGDA,gBAAP,WACC,OAAOpzG,EAAYokD,KAjEJgvD,2BAA2B75D,GAAQ2xB,OAAQ6lB,GAAqBuB,qBAAsB,wBCFvG,4DAwCA,OAxCmDp1F,OAClDo2G,+BAAA,SAAoB5zG,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtD4zG,+BAAA,SAAoB5zG,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtD4zG,2BAAA,SAAgB5zG,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlD4zG,2BAAA,SAAgB5zG,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlD4zG,0BAAA,SAAe5zG,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjD4zG,qBAAA,SAAU5zG,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5C4zG,qBAAA,SAAU5zG,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5C4zG,8BAAA,SAAmB5zG,GAClB,OAAO0zG,GAA0B/hF,kBAAmB3xB,IAGrD4zG,sBAAA,WACC,OAAOF,GAA0B73F,aAGlC+3F,0BAAA,WACC,OAAOF,GAA0B5xG,oBAtCgBixF,mBCAnD,4DAoCA,OApCmDv1F,OAClDq2G,+BAAA,SAAoB7zG,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtD6zG,+BAAA,SAAoB7zG,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtD6zG,2BAAA,SAAgB7zG,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlD6zG,2BAAA,SAAgB7zG,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlD6zG,0BAAA,SAAe7zG,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjD6zG,qBAAA,SAAU7zG,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5C6zG,qBAAA,SAAU7zG,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5C6zG,sBAAA,WACC,OAAOH,GAA0B73F,aAGlCg4F,0BAAA,WACC,OAAOH,GAA0B5xG,oBAlCgB0xF,ICC7CjmE,GAAY,SAAEpB,GACnB,OAAOutE,GAAa7zD,OAAQ1Z,mBAG7B,4DAgDA,OAhDkD3uB,OACjDs2G,+BAAA,SAAoB9zG,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtD8zG,+BAAA,SAAoB9zG,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtD8zG,2BAAA,SAAgB9zG,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlD8zG,2BAAA,SAAgB9zG,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlD8zG,0BAAA,SAAe9zG,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjD8zG,qBAAA,SAAU9zG,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5C8zG,qBAAA,SAAU9zG,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5C8zG,sBAAA,WACC,OAAOJ,GAA0B73F,aAGlCi4F,0BAAA,WACC,OAAOJ,GAA0B5xG,iBAGlCgyG,6BAAA,WACC,OAAOvmF,IAGRumF,yBAAA,SAAc9zG,GACb,OAAO,IAAI+nC,MAGZ+rE,yBAAA,WACC,OAAO,IAAI/rE,SA9CqC2qD,ICJ5CnlE,GAAY,SAAEpB,EAAasvE,GAChC,OAAOF,GAAiB11D,OAAQ1Z,EAAOsvE,EAAOC,mCAG/C,4DAgDA,OAhDsDl+F,OACrDu2G,+BAAA,SAAoB/zG,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtD+zG,+BAAA,SAAoB/zG,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtD+zG,2BAAA,SAAgB/zG,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlD+zG,2BAAA,SAAgB/zG,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlD+zG,0BAAA,SAAe/zG,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjD+zG,qBAAA,SAAU/zG,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5C+zG,qBAAA,SAAU/zG,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5C+zG,sBAAA,WACC,OAAOL,GAA0B73F,aAGlCk4F,0BAAA,WACC,OAAOL,GAA0B5xG,iBAGlCiyG,6BAAA,WACC,OAAOxmF,IAGRwmF,yBAAA,SAAc/zG,GACb,OAAO,IAAI+nC,MAGZgsE,yBAAA,WACC,OAAO,IAAIhsE,SA9CyC2qD,ICLhDnlE,GAAY,SAAEjvB,GACnB,OAAOylC,OAAQgW,OAAQz7C,GAAU,mBAGlC,4DAwDA,OAxDmDd,OAClDw2G,+BAAA,SAAoBh0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDg0G,+BAAA,SAAoBh0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDg0G,2BAAA,SAAgBh0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDg0G,2BAAA,SAAgBh0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDg0G,0BAAA,SAAeh0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDg0G,qBAAA,SAAUh0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Cg0G,qBAAA,SAAUh0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Cg0G,sBAAA,WACC,OAAON,GAA0B73F,aAGlCm4F,0BAAA,WACC,OAAON,GAA0B5xG,iBAGlCkyG,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,6BAAA,WACC,OAAOzmF,IAGRymF,yBAAA,SAAch0G,GACb,OAAO,GAGRg0G,yBAAA,WACC,OAAO,MAtD0C3hB,mBCFnD,4DAqDA,OArD0D70F,OAGzDy2G,mCAAA,WACC,OAAOphG,EAAiBzI,OAGzB6pG,+BAAA,SAAoBj0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDi0G,+BAAA,SAAoBj0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDi0G,2BAAA,SAAgBj0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDi0G,2BAAA,SAAgBj0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDi0G,0BAAA,SAAej0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDi0G,qBAAA,SAAUj0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Ci0G,qBAAA,SAAUj0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Ci0G,sBAAA,WACC,OAAOP,GAA0B73F,aAGlCo4F,0BAAA,WACC,OAAOP,GAA0B5xG,iBAGlCmyG,4BAAA,SAAiBj0G,GAChB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KAEDwE,YAAMnC,0BAAiBrC,IAG/Bi0G,4BAAA,SAAiBj0G,GAChB,OAAO0zG,GAA0BjxG,gBAAiBzC,OAnDMixG,mBCA1D,4DAqDA,OArDuDzzG,OAGtD02G,mCAAA,WACC,OAAOrhG,EAAiBzI,OAGzB8pG,+BAAA,SAAoBl0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDk0G,+BAAA,SAAoBl0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDk0G,2BAAA,SAAgBl0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDk0G,2BAAA,SAAgBl0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDk0G,0BAAA,SAAel0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDk0G,qBAAA,SAAUl0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Ck0G,qBAAA,SAAUl0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Ck0G,sBAAA,WACC,OAAOR,GAA0B73F,aAGlCq4F,0BAAA,WACC,OAAOR,GAA0B5xG,iBAGlCoyG,4BAAA,SAAiBl0G,GAChB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KAEDwE,YAAMnC,0BAAiBrC,IAG/Bk0G,4BAAA,SAAiBl0G,GAChB,OAAO0zG,GAA0BjxG,gBAAiBzC,OAnDGqxG,mBCDvD,4DAiDA,OAjDuD7zG,OAGtD22G,+BAAA,SAAoBn0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDm0G,+BAAA,SAAoBn0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDm0G,2BAAA,SAAgBn0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDm0G,2BAAA,SAAgBn0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDm0G,0BAAA,SAAen0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDm0G,qBAAA,SAAUn0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Cm0G,qBAAA,SAAUn0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Cm0G,sBAAA,WACC,OAAOT,GAA0B73F,aAGlCs4F,0BAAA,WACC,OAAOT,GAA0B5xG,iBAGlCqyG,4BAAA,SAAiBn0G,GAChB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KAEDwE,YAAMnC,0BAAiBrC,IAG/Bm0G,4BAAA,SAAiBn0G,GAChB,OAAO0zG,GAA0BjxG,gBAAiBzC,OA/CGuxG,mBCDvD,4DAsCA,OAtC0D/zG,OAGzD42G,+BAAA,SAAoBp0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDo0G,+BAAA,SAAoBp0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDo0G,2BAAA,SAAgBp0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDo0G,2BAAA,SAAgBp0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDo0G,0BAAA,SAAep0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDo0G,qBAAA,SAAUp0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Co0G,qBAAA,SAAUp0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Co0G,sBAAA,WACC,OAAOV,GAA0B73F,aAGlCu4F,0BAAA,WACC,OAAOV,GAA0B5xG,oBApCuB4wF,mBCA1D,4DAsCA,OAtC2Dl1F,OAG1D62G,+BAAA,SAAoBr0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDq0G,+BAAA,SAAoBr0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDq0G,2BAAA,SAAgBr0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDq0G,2BAAA,SAAgBr0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDq0G,0BAAA,SAAer0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDq0G,qBAAA,SAAUr0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Cq0G,qBAAA,SAAUr0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Cq0G,sBAAA,WACC,OAAOX,GAA0B73F,aAGlCw4F,0BAAA,WACC,OAAOX,GAA0B5xG,oBApCwB4wF,mBCC3D,4DA0CA,OA1CwDl1F,OAGvD82G,+BAAA,SAAoBt0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDs0G,+BAAA,SAAoBt0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDs0G,2BAAA,SAAgBt0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDs0G,2BAAA,SAAgBt0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDs0G,0BAAA,SAAet0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDs0G,qBAAA,SAAUt0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Cs0G,qBAAA,SAAUt0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Cs0G,sBAAA,WACC,OAAOZ,GAA0B73F,aAGlCy4F,0BAAA,WACC,OAAOZ,GAA0B5xG,iBAGlCwyG,2BAAA,SAAgBt0G,GACf,OAAO,SAxC+CuzG,mBCDxD,4DA4CA,OA5CkD/1G,OACjD+2G,+BAAA,SAAoBv0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDu0G,+BAAA,SAAoBv0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDu0G,2BAAA,SAAgBv0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDu0G,2BAAA,SAAgBv0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDu0G,0BAAA,SAAev0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDu0G,qBAAA,SAAUv0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Cu0G,qBAAA,SAAUv0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Cu0G,sBAAA,WACC,OAAOb,GAA0B73F,aAGlC04F,0BAAA,WACC,OAAOb,GAA0B5xG,iBAGlCyyG,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,OA1CyCliB,ICC5C9kE,GAAY,SAAEpB,EAAasvE,GAChC,OAAOJ,GAAax1D,OAAQ1Z,EAAOsvE,EAAOC,mCAG3C,4DAkDA,OAlDkDl+F,OAGjDg3G,+BAAA,SAAoBx0G,GACnB,OAAO0zG,GAA0BvzG,mBAAoBH,IAGtDw0G,+BAAA,SAAoBx0G,GACnB,OAAO0zG,GAA0BrzG,mBAAoBL,IAGtDw0G,2BAAA,SAAgBx0G,GACf,OAAO0zG,GAA0BxyG,eAAgBlB,IAGlDw0G,2BAAA,SAAgBx0G,GACf,OAAO0zG,GAA0BryG,eAAgBrB,IAGlDw0G,0BAAA,SAAex0G,GACd,OAAO0zG,GAA0BpyG,cAAetB,IAGjDw0G,qBAAA,SAAUx0G,GACT,OAAO0zG,GAA0BznG,SAAUjM,IAG5Cw0G,qBAAA,SAAUx0G,GACT,OAAO0zG,GAA0BvnG,SAAUnM,IAG5Cw0G,sBAAA,WACC,OAAOd,GAA0B73F,aAGlC24F,0BAAA,WACC,OAAOd,GAA0B5xG,iBAGlC0yG,6BAAA,WACC,OAAOjnF,IAGRinF,yBAAA,SAAcx0G,GACb,OAAO,IAAI+nC,MAGZysE,yBAAA,WACC,OAAO,IAAIzsE,SAhDqC2qD,mBCPlD,4DAgBA,OAhByCl1F,OACxCi3G,2BAAA,SAAgBz0G,GACf,OAAO,MAGRy0G,0BAAA,WACC,OAAOn0G,EAAYokD,KAGpB+vD,sBAAA,WACC,OAAO,GAGRA,2BAAA,WACC,OAAOlzG,EAAiB2wF,SAde+d,mBCFzC,4DAIA,OAJ6CzyG,OAC5Ck3G,qBAAA,WACC,MAAO,WAFoCD,mBCE7C,4DAYA,OAZiDj3G,OAChDm3G,+BAAA,SAAoB30G,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpB,SACGkN,EAAYiT,SAAUngB,GACzBqxF,GAAqBujB,kBAClB1nG,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DqxF,GAAqBwjB,uBAErB,aATuCH,mBCCjD,aAAA,qDACC/vG,QAAQk1C,GAAQ2xB,OAAQ,SAAU,QAanC,OAdgDhuE,OAG/Cs3G,+BAAA,SAAoB90G,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpBtC,KAAKotE,MACF59D,EAAYiT,SAAUngB,GACzBqxF,GAAqBujB,kBAClB1nG,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DqxF,GAAqBwjB,uBAErBn3G,KAAKotE,UAXiC4pC,mBCChD,aAAA,qDACC/vG,QAAQ,SACRA,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,MAC5CnmE,gBAAgBk1C,GAAQ2xB,OAAQ7mE,EAAKmmE,MAAO,QAuB7C,OA1B4CttE,OAK3Cu3G,+BAAA,SAAoB/0G,GACnB,OAAIkN,EAAYoT,WAAYtgB,GACpB,KACGkN,EAAYiT,SAAUngB,GACzBqxF,GAAqBO,gBAClB1kF,EAAYkT,UAAWpgB,GAC1BtC,KAAK60F,cACFrlF,EAAYyT,UAAW3gB,IAAWkN,EAAY6S,UAAW/f,GAC5DtC,KAAK80F,cAEL90F,KAAKotE,OAIdiqC,qBAAA,WACC,MAAO,QAGRA,sBAAA,WACC,OAAO,OAxBmCN,mBCA5C,4DA4BA,OA5BgDj3G,OAC/Cw3G,mCAAA,WACC,OAAOniG,EAAiBtB,QAGzByjG,0BAAA,WACC,OAAO10G,EAAYokD,KAGpBswD,sBAAA,WACC,MAAO,WAGRA,2BAAA,WACC,OAAO,IAGRA,4BAAA,WACC,OAAO,IAGRA,yBAAA,SAAch1G,GACb,OAAO,MAGRg1G,yBAAA,WACC,OAAO,SA1BuC5iB,ICwBnC6iB,GAAsB,WAClC3kB,GAAYtsF,IAAK,sBAAuB4vG,IACxCtjB,GAAYtsF,IAAK,sBAAuB6vG,IACxCvjB,GAAYtsF,IAAK,qBAAsB8vG,IACvCxjB,GAAYtsF,IAAK,yBAA0B+vG,IAC3CzjB,GAAYtsF,IAAK,sBAAuBgwG,IACxC1jB,GAAYtsF,IAAK,6BAA8BiwG,IAC/C3jB,GAAYtsF,IAAK,0BAA2BkwG,IAC5C5jB,GAAYtsF,IAAK,0BAA2BmwG,IAC5C7jB,GAAYtsF,IAAK,6BAA8BowG,IAC/C9jB,GAAYtsF,IAAK,8BAA+BqwG,IAChD/jB,GAAYtsF,IAAK,2BAA4BswG,IAC7ChkB,GAAYtsF,IAAK,qBAAsBuwG,IACvCjkB,GAAYtsF,IAAK,qBAAsBwwG,IACvClkB,GAAYtsF,IAAK,oBAAqB2wG,IACtCrkB,GAAYtsF,IAAK,mBAAoB8wG,IACrCxkB,GAAYtsF,IAAK,gBAAiB0wG,IAClCpkB,GAAYtsF,IAAK,aAAcyvG,IAC/BnjB,GAAYtsF,IAAK,mBAAoBgxG,IACrC1kB,GAAYtsF,IAAK,eAAgB+wG,IACjCzkB,GAAYtsF,IAAK,YAAaywG,IAC9BnkB,GAAYtsF,IAAK,SAAUwvG,IAC3BrgB,KACAkE,KACA+D,KACAU,KACAoV,KACAI,KACAE,KACA5I,KACAmC,MC3DYmK,GAAqB,WACjC5kB,GAAYtsF,IAAK,QAAS42F,KC0Bdua,GAAoB,WAChCzkB,KACAqB,KACAI,KACA6K,KACAO,KC5BAjN,GAAYtsF,IAAK,SAAUoxG,IAC3B9kB,GAAYtsF,IAAK,cAAeqxG,IAChC/kB,GAAYtsF,IAAK,cAAeohG,IAChC9U,GAAYtsF,IAAK,yBAA0BqhG,ID2B3CyB,KACAtB,KACAqD,KACAmC,KACAI,KErCA9a,GAAYtsF,IAAK,eAAgBurG,IFuCjCS,KACAyB,KACAC,KACAC,KACAG,KACAG,KACAlH,KACAiI,KACAK,KACAha,KACAlC,KACA+D,KACAD,KACAD,KACAsY,KACA2B,KACAC,MGvDYI,GAAU,WACtBpuD,KACAiuD,KACAhlB,qBCCA,aAAA,MACC3rF,0BACAG,EAAK4wG,IAAa,EAClB5wG,EAAK+jD,GAAQ,KAmEf,OA1EkClrD,OAUjCg4G,mBAAA,WAGC,OAFA93G,KAAK63G,IAAe73G,KAAK63G,GACzB73G,KAAK4X,KAAM,SAAU5X,MACdA,KAAK63G,IAGbC,mBAAA,YACyB,IAApB93G,KAAK63G,KACR73G,KAAK63G,IAAa,EAClB73G,KAAK4X,KAAM,SAAU5X,QAIvB83G,oBAAA,YACyB,IAApB93G,KAAK63G,KACR73G,KAAK63G,IAAa,EAClB73G,KAAK4X,KAAM,SAAU5X,QAIvB83G,sBAAA,WACC,OAAO93G,KAAK63G,IAGbr4G,sBAAIs4G,wBAAJ,WACC,OAAO93G,KAAKgrD,QAGb,SAAUh2C,GACLhV,KAAKgrD,KAAUh2C,IAClBhV,KAAKgrD,GAAQh2C,EACbhV,KAAK4X,KAAM,SAAU5C,EAAMhV,wCAI7B83G,iBAAA,SAAMrpF,EAAejsB,GACpB,GAAIxC,KAAK63G,GAAa,CACrB,IAAM7iG,EAAOhV,KAAKgrD,GAClBxoD,EAAO8D,IAAKmoB,EAAO9kB,KAAKwnB,MAAO1C,EAAQzZ,GAASA,KAIlD8iG,kBAAA,WACC93G,KAAK63G,IAAa,EAClB73G,KAAKgrD,GAAQ,GACbhrD,KAAK4X,KAAM,SAAU5X,OAGtB83G,sBAAA,WACC,MAAO,CACL93G,KAAK63G,GAAa,EAAI,EACvB73G,KAAKgrD,KAIP8sD,wBAAA,SAAa1mD,GACY,IAApBA,EAAY,GACfpxD,KAAK22D,SAEL32D,KAAK+3G,UAGN/3G,KAAKgV,KAAOo8C,EAAY,OAxEQ91B,QAAMoU,4BCCvC,aACC1vC,KAAKg4G,SAAWxwG,IAChBxH,KAAKwC,OAAS,EACdxC,KAAKqZ,UAAY,GAmBnB,OAhBC4+F,kBAAA,SAAOxpF,EAAenS,GACrBtc,KAAKg4G,SAAWxwG,IAChBxH,KAAKwC,OAASisB,EACdzuB,KAAKqZ,UAAc,KAASiD,EAAQ,GAAKA,EAAQ,IAGlD27F,gBAAA,SAAKxpF,EAAeypF,GACnB,IAAMC,EAAcxuG,KAAKwP,IAAK++F,EAAUzpF,GACxC,GAAI0pF,GAAen4G,KAAKqZ,UAAY,CACnC,IAAM++F,EAAcp4G,KAAKg4G,UACrBI,GAAgBA,GAAeD,EAAcC,KAChDp4G,KAAKg4G,SAAWG,EAChBn4G,KAAKwC,OAAS01G,W5ErBlB,SAAYvK,GACXA,+BACAA,2BAFD,CAAYA,KAAAA,QAKZ,I6EQY0K,iB7EJX,WAAa7lG,EAA+BmC,GAC3C3U,KAAKwS,KAAOA,EACZxS,KAAK2U,SAAWA,EAMlB,OAHC2jG,sBAAA,WACC,MAAO,CAAEt4G,KAAKwS,KAAMxS,KAAK2U,+B8EP1B,aAAA,MACC7N,0BACAG,EAAK8kD,OAAS,GACd9kD,EAAKsxG,IAAa,EAClBtxG,EAAK4wG,IAAa,IAkIpB,OA3IoC/3G,OAYnC04G,sBAAA,WACC,OAAOx4G,KAAK63G,IAGbW,mBAAA,WAGC,OAFAx4G,KAAK63G,IAAe73G,KAAK63G,GACzB73G,KAAK4X,KAAM,SAAU5X,MACdA,KAAK63G,IAGbW,mBAAA,YACyB,IAApBx4G,KAAK63G,KACR73G,KAAK63G,IAAa,EAClB73G,KAAK4X,KAAM,SAAU5X,QAIvBw4G,oBAAA,YACyB,IAApBx4G,KAAK63G,KACR73G,KAAK63G,IAAa,EAClB73G,KAAK4X,KAAM,SAAU5X,QAIvBw4G,gBAAA,SAAK13G,EAA6BF,GACpB,MAATA,EACHZ,KAAK+rD,OAAOx5C,OAAQ3R,EAAO,EAAGE,GAE9Bd,KAAK+rD,OAAOvrD,KAAMM,GAEnBd,KAAK4X,KAAM,SAAU5X,OAGtBw4G,mBAAA,SAAQ53G,GACP,IAAMmrD,EAAS/rD,KAAK+rD,OAChB,GAAKnrD,GAASA,EAAQmrD,EAAOrrD,SAChCqrD,EAAOx5C,OAAQ3R,EAAO,GACtBZ,KAAK4X,KAAM,SAAU5X,QAIvBw4G,iBAAA,WACC,OAAOx4G,KAAK+rD,OAAOrrD,QAGpB83G,oBAAA,SAAS53G,EAAe6tB,GACvB,IAAMs9B,EAAS/rD,KAAK+rD,OACpB,GAAI,GAAKnrD,GAASA,EAAQmrD,EAAOrrD,OAAS,CACzC,IAAM8B,EAASupD,EAAQnrD,GAGvB,OAFAmrD,EAAQnrD,GAAU6tB,EAClBzuB,KAAK4X,KAAM,SAAU5X,MACdwC,EAER,OAAO,MAGRg2G,iBAAA,SAAMprD,EAAgBC,GACrB,GAAID,IAAWC,EAAS,CACvB,IAAMtB,EAAS/rD,KAAK+rD,OACd0sD,EAAS1sD,EAAQqB,GACvBrB,EAAQqB,GAAWrB,EAAQsB,GAC3BtB,EAAQsB,GAAWorD,IAIrBj5G,sBAAIg5G,2BAAJ,WACC,OAAOx4G,KAAKu4G,QAGb,SAAa5pG,GACR3O,KAAKu4G,KAAe5pG,IACvB3O,KAAKu4G,GAAa5pG,EAClB3O,KAAK4X,KAAM,SAAU5X,wCAIvBw4G,iBAAA,SAAMnjD,EAAYC,EAAYlvD,EAAmBC,GAChD,GAAIrG,KAAK63G,GAER,IADA,IAAM9rD,EAAS/rD,KAAK+rD,OACXxqD,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMktB,EAAQs9B,EAAQxqD,GAClBktB,EAAMjc,OAASm7F,GAAwBhpD,SAC1Cv+C,EAAEE,IAAK+uD,EAAI5mC,EAAM9Z,UAEjBtO,EAAEC,IAAKgvD,EAAI7mC,EAAM9Z,YAMrB6jG,kBAAA,WACCx4G,KAAK63G,IAAa,EAClB73G,KAAKu4G,IAAa,EAClBv4G,KAAK+rD,OAAOrrD,OAAS,EACrBV,KAAK4X,KAAM,SAAU5X,OAGtBw4G,sBAAA,WAGC,IAFA,IAAM17E,EAA+C,GAC/CivB,EAAS/rD,KAAK+rD,OACXxqD,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EACjDu7B,EAAQt8B,KAAMurD,EAAQxqD,GAAIgsD,aAE3B,MAAO,CACLvtD,KAAK63G,GAAa,EAAI,EACtB73G,KAAKu4G,GAAa,EAAI,EACvBz7E,IAIF07E,wBAAA,SAAapnD,GAEZpxD,KAAK63G,GAAmC,IAApBzmD,EAAY,GAGhCpxD,KAAKu4G,GAAmC,IAApBnnD,EAAY,GAGhC,IAAMnE,EAAUmE,EAAY,GACtBrF,EAAS/rD,KAAK+rD,OACpBA,EAAOrrD,OAAS,EAChB,IAAK,IAAIa,EAAI,EAAGC,EAAOyrD,EAAQvsD,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAMiP,EAASy8C,EAAS1rD,GACxBwqD,EAAOvrD,KAAM,IAAI83G,GAAqB9nG,EAAQ,GAAKA,EAAQ,KAE5DxQ,KAAK4X,KAAM,SAAU5X,UAzIas7B,QAAMoU,eDU1C,SAAY2oE,GACXA,mBACAA,2BACAA,+BACAA,6BACAA,iCACAA,mCACAA,iCACAA,qCACAA,mCACAA,2BAVD,CAAYA,KAAAA,QA0BZ,IEzCYK,kBFgEX,WAAa13G,GAAb,MACC8F,0BAEAG,EAAK+7E,GAAU,CACd,IAAIp7D,QACJ,IAAIA,QACJ,IAAIA,QACJ,IAAIA,QACJ,IAAIA,SAGL3gB,EAAK0xG,GAAW,CACf,IAAI/wF,QACJ,IAAIA,SAGL3gB,EAAK2xG,GAAW,CACf,EACA,GAGD3xG,EAAK4xG,GAAa,IAAIjxF,QACtB3gB,EAAK6xG,GAAmB,IAAIb,GAC5BhxG,EAAK8xG,GAAmB,IAAId,GAC5BhxG,EAAK+xG,GAAmB,CACvBhB,SAAU,EACV17F,MAAO,IAAIsL,SAGZ3gB,EAAKgyG,GAAiB,IAAIrxF,QAE1B3gB,EAAKiyG,GAAqB,IAAIvmF,YAC9B1rB,EAAKkyG,GAAY,IAAIvxF,QAGrB3gB,EAAKmyG,KAAO,IAAItB,GAGhB7wG,EAAKnG,OAAS,IAAI03G,GAGlBvxG,EAAK4jD,GAAU7pD,EACfiG,EAAK4wG,IAAa,IA2dpB,OA5hB8B/3G,OAoE7Bu5G,sBAAA,WACC,OAAOr5G,KAAK63G,IAGbwB,mBAAA,WAGC,OAFAr5G,KAAK63G,IAAe73G,KAAK63G,GACzB73G,KAAK4X,KAAM,SAAU5X,MACdA,KAAK63G,IAGbwB,mBAAA,YACyB,IAApBr5G,KAAK63G,KACR73G,KAAK63G,IAAa,EAClB73G,KAAK4X,KAAM,SAAU5X,QAIvBq5G,oBAAA,YACyB,IAApBr5G,KAAK63G,KACR73G,KAAK63G,IAAa,EAClB73G,KAAK4X,KAAM,SAAU5X,QAIbq5G,oBAAV,SAAmBpvE,GAClBA,EAASpjB,kBACT,IAAMwM,EAAiB4W,EAAShuB,UAAUoX,eACpCsgC,EAAK1pB,EAAS/mC,MACd0wD,EAAK3pB,EAAStjC,OAEduqD,EAASlxD,KAAKgjF,GACpB9xB,EAAQ,GAAI5qD,IAAK,EAAG,GACpB4qD,EAAQ,GAAI5qD,IAAKqtD,EAAI,GACrBzC,EAAQ,GAAI5qD,IAAKqtD,EAAIC,GACrB1C,EAAQ,GAAI5qD,IAAK,EAAGstD,GACpB1C,EAAQ,GAAI5qD,IAAU,GAALqtD,EAAe,GAALC,GAE3BvgC,EAAehM,MAAO6pC,EAAQ,GAAKA,EAAQ,IAC3C79B,EAAehM,MAAO6pC,EAAQ,GAAKA,EAAQ,IAC3C79B,EAAehM,MAAO6pC,EAAQ,GAAKA,EAAQ,IAC3C79B,EAAehM,MAAO6pC,EAAQ,GAAKA,EAAQ,IAC3C79B,EAAehM,MAAO6pC,EAAQ,GAAKA,EAAQ,KAG5CmoD,gCAAA,SAAqBpvE,GAChBjqC,KAAK63G,IACR73G,KAAKs5G,QAASrvE,IAINovE,iBAAV,SAAgBtzG,EAAevD,GAC9B,IAAM6yD,EAAKtvD,EAAMK,EACXkvD,EAAKvvD,EAAMM,EACXqyB,EAAS14B,KAAK6qD,GAAQnyB,OACtBtyB,EAAIpG,KAAK84G,GACTzyG,EAAIrG,KAAK+4G,GAGf,GAAc,MAAVrgF,EAAiB,CACpB,IAAMpc,EAAQ3S,KAAKG,IAAK4uB,EAAOpc,MAAMlW,EAAGsyB,EAAOpc,MAAMjW,GACrDD,EAAE2nD,MAAOsH,EAAI/4C,GACbjW,EAAE0nD,MAAOuH,EAAIh5C,GACblW,EAAEE,IAAK+uD,EAAI,GACXjvD,EAAEE,IAAK+uD,EAAI38B,EAAOx1B,OAClBmD,EAAEC,IAAKgvD,EAAI,GACXjvD,EAAEC,IAAKgvD,EAAI58B,EAAO/xB,aAElBP,EAAE2nD,MAAOsH,EAAI,GACbhvD,EAAE0nD,MAAOuH,EAAI,GAad,OATAt1D,KAAKc,OAAOy4G,KAAMlkD,EAAIC,EAAIlvD,EAAGC,GAG7BrG,KAAKo5G,KAAKG,KAAMlkD,EAAIjvD,GACpBpG,KAAKo5G,KAAKG,KAAMjkD,EAAIjvD,GAGpB7D,EAAO4D,EAAMs1C,GAAWt1C,EAAE4xG,UAAaxwG,IAAMpB,EAAE5D,OAC/CA,EAAO6D,EAAMq1C,GAAWr1C,EAAE2xG,UAAaxwG,IAAMnB,EAAE7D,OACxCA,GAGR62G,sBAAA,SAAWtzG,EAAevD,GACzB,IAAM6yD,EAAKtvD,EAAMK,EACXkvD,EAAKvvD,EAAMM,EACjB,GAAIrG,KAAK63G,GAAa,CACrB73G,KAAKu5G,KAAMxzG,EAAOvD,GAClB,IAAM4D,EAAI5D,EAAO4D,EACXC,EAAI7D,EAAO6D,EACjB7D,EAAO8D,IACNo1C,GAAWt1C,GAAMivD,EAAKjvD,EACtBs1C,GAAWr1C,GAAMivD,EAAKjvD,QAGvB7D,EAAO8D,IAAK+uD,EAAIC,GAEjB,OAAO9yD,GAGR62G,iCAAA,SAAsBr5D,EAAex9C,GACpC,IAAM0W,EAAK8mC,EAAM55C,EACXgT,EAAK4mC,EAAM35C,EACbD,EAAIoB,IACJnB,EAAImB,IACR,GAAIxH,KAAK63G,GAGR,IAFA,IAAM2B,EAAgBx5G,KAAKi5G,GACrB/nD,EAASlxD,KAAKgjF,GACXzhF,EAAI,EAAGC,EAAO0vD,EAAOxwD,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMwE,EAAQmrD,EAAQ3vD,GAKtB,GAJAi4G,EAAclzG,IAAKP,EAAMK,EAAI8S,EAAInT,EAAMM,EAAI+S,GAC3CpZ,KAAKu5G,KAAMC,EAAeA,IAGpB99D,GAAW89D,EAAcpzG,GAAM,CACpC,IAAMqzG,EAAQD,EAAcpzG,EAAIL,EAAMK,GAClCs1C,GAAWt1C,IAAOuD,KAAKwP,IAAKsgG,EAAQvgG,GAAOvP,KAAKwP,IAAK/S,EAAI8S,MAC5D9S,EAAIqzG,GAKN,IAAM/9D,GAAW89D,EAAcnzG,GAAM,CACpC,IAAMqzG,EAAQF,EAAcnzG,EAAIN,EAAMM,GAClCq1C,GAAWr1C,IAAOsD,KAAKwP,IAAKugG,EAAQtgG,GAAOzP,KAAKwP,IAAK9S,EAAI+S,MAC5D/S,EAAIqzG,IAOR,OAFAl3G,EAAO4D,EAAMs1C,GAAWt1C,GAAM8S,EAAK9S,EACnC5D,EAAO6D,EAAMq1C,GAAWr1C,GAAM+S,EAAK/S,EAC5B7D,GAGR62G,6BAAA,SAAkBpvE,KAIRovE,gCAAV,WACC,OAAO,GAGEA,qBAAV,SAAoB5qF,GACnB,OAAOA,EAAQ,IAAM9kB,KAAK8nD,IAGjB4nD,qBAAV,SAAoB5qF,GACnB,OAAOA,EAAQ9kB,KAAK8nD,GAAK,KAG1B4nD,8BAAA,SAAmBM,EAAsBC,GACxC,GAAI55G,KAAK63G,GAAa,CACrB,IAAMgC,EAAW75G,KAAK85G,sBAChB1+B,EAAcu+B,EAAeC,EAC7BG,EAAoBpwG,KAAKwnB,MAAOnxB,KAAKg6G,SAAU5+B,IAC/C6+B,EAA4BF,EAAoB,GACtD,OAAIpwG,KAAKwP,IAAK8gG,IAA+BJ,EACrC75G,KAAKk6G,SAAUH,EAAoBE,GAA8BN,EAEpE,GAAKE,GAAYI,EACbj6G,KAAKk6G,SAAUH,GAAqB,GAAKE,IAA+BN,EACrEM,IAA8B,GAAKJ,EACtC75G,KAAKk6G,SAAUH,GAAqB,GAAKE,IAA+BN,EAExEC,EAIV,OAAOA,GAGEP,iCAAV,SAAgCc,EAAYC,EAAY53G,GACvD,IAAM0W,EAAKkhG,EAAGh0G,EAAI+zG,EAAG/zG,EACfgT,EAAKghG,EAAG/zG,EAAI8zG,EAAG9zG,EACf8D,EAAIR,KAAK+zB,KAAMxkB,EAAKA,EAAKE,EAAKA,GACpC,GAtRc,KAsRAjP,EAAI,CACjB,IAAM7K,EAAI,EAAI6K,EACd3H,EAAO4D,EAAI8S,EAAK5Z,EAChBkD,EAAO6D,EAAI+S,EAAK9Z,OAEhBkD,EAAO4D,EAAI,EACX5D,EAAO6D,EAAI,EAEZ,OAAO8D,GAGRkvG,4BAAA,SAAiBpvE,EAA4BowE,GAC5C,GAAIr6G,KAAK63G,GAAa,CACrB73G,KAAKs5G,QAASrvE,GAEd,IAAMinB,EAASlxD,KAAKgjF,GACds3B,EAAUt6G,KAAK24G,GACf4B,EAAUv6G,KAAK44G,GACrB,OAAQyB,GACR,KAAKhC,GAAuB5tG,SAC3B8vG,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7EC,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7E,MACD,KAAKjC,GAAuBoC,WAC3BF,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7E,MACD,KAAKjC,GAAuB1tG,UAC3B4vG,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7EC,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7E,MACD,KAAKjC,GAAuBqC,YAC3BH,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7E,MACD,KAAKjC,GAAuBh6F,KAC3B,MACD,KAAKg6F,GAAuBsC,aAC3BJ,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7E,MACD,KAAKjC,GAAuBxtG,YAC3B0vG,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7EC,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7E,MACD,KAAKjC,GAAuBuC,cAC3BL,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7E,MACD,KAAKjC,GAAuBttG,aAC3BwvG,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,IAC7EC,EAAS,GAAMv6G,KAAKw6G,qBAAsBtpD,EAAQ,GAAKA,EAAQ,GAAKopD,EAAS,OAMtEjB,kCAAV,SACCrB,EACAt3G,EACAoa,EACAglC,EACAt9C,GAEA,GAlVc,KAkVA9B,IACTg7C,GAAWl5C,EAAOw1G,WAAcA,EAAWx1G,EAAOw1G,UAAW,CAChEx1G,EAAOw1G,SAAWA,EAClB,IAAMrqF,EAAW,EAAI7S,EAAOpa,EACxBo/C,EACHt9C,EAAO8Z,MAAMlW,EAAIunB,EAEjBnrB,EAAO8Z,MAAMjW,EAAIsnB,IAMX0rF,+BAAV,SACCp9F,EACAlW,EACA80G,EACAn6G,EACAo/C,EACAt9C,GAEA,IAAM2kB,EAAOnnB,KAAK64G,GAClB58F,EAAUoL,MAAOthB,EAAOohB,GACxB,IAAM+sC,EAAK/sC,EAAK/gB,EACV+tD,EAAKhtC,EAAK9gB,EAChBrG,KAAKu5G,KAAMpyF,EAAMA,GACjB,IAAM/gB,EAAI+gB,EAAK/gB,EACTC,EAAI8gB,EAAK9gB,EAGf,IAAMq1C,GAAWt1C,IAhXH,KAiXFuD,KAAKwP,IAAK0hG,EAAOz0G,GACT,CAClB,IAAM8S,GAAM9S,EAAI8tD,GAAM2mD,EAAOz0G,EACvB4xG,EAAWruG,KAAKwP,IAAKD,GACrB4hG,GAAM10G,EAAIL,EAAMK,GAAKy0G,EAAOz0G,EAClCpG,KAAK+6G,sBAAuB/C,EAAUt3G,EAAQo6G,EAAIh7D,EAAMt9C,GAK1D,IAAMk5C,GAAWr1C,IA3XH,KA4XFsD,KAAKwP,IAAK0hG,EAAOx0G,GACT,CAClB,IAAM+S,GAAM/S,EAAI8tD,GAAM0mD,EAAOx0G,EAEvB20G,GADAhD,EAAWruG,KAAKwP,IAAKC,IACf/S,EAAIN,EAAMM,GAAKw0G,EAAOx0G,GAClCrG,KAAK+6G,sBAAuB/C,EAAUt3G,EAAQs6G,EAAIl7D,EAAMt9C,KAKjD62G,8BAAV,SACCp9F,EACAlW,EACA80G,EACAn6G,EACA8B,GAEAxC,KAAKi7G,mBAAoBh/F,EAAWlW,EAAO80G,EAAQn6G,GAAQ,EAAM8B,IAGxD62G,8BAAV,SACCp9F,EACAlW,EACA80G,EACAn6G,EACA8B,GAEAxC,KAAKi7G,mBAAoBh/F,EAAWlW,EAAO80G,EAAQn6G,GAAQ,EAAO8B,IAGnE62G,+BAAA,SACCp9F,EAAmBlW,EAAcu0G,EACjCC,EAAmB/3G,GAEnB,IAAM2kB,EAAOnnB,KAAK64G,GAClB58F,EAAUoL,MAAOthB,EAAOohB,GACxB,IAAM+sC,EAAK/sC,EAAK/gB,EACV+tD,EAAKhtC,EAAK9gB,EAEhBrG,KAAKu5G,KAAMpyF,EAAMA,GACjB,IAAI/gB,EAAI+gB,EAAK/gB,EACTC,EAAI8gB,EAAK9gB,EACb,GAAIq1C,GAAWt1C,GAAM,CACpB,GAAIs1C,GAAWr1C,GACd,OAEAD,EAAI8tD,OAGDxY,GAAWr1C,KACdA,EAAI8tD,GAeN,IAAM+mD,EAAOZ,EAAS,GAAIl0G,EAAIk0G,EAAS,GAAIj0G,EAAIi0G,EAAS,GAAIl0G,EAAIk0G,EAAS,GAAIj0G,EAC7E,GA9bc,KA8bAsD,KAAKwP,IAAK+hG,GAAS,CAChC,IAAMhiG,EAAK9S,EAAI8tD,EACT96C,EAAK/S,EAAI8tD,EACT6jD,EAAWruG,KAAKwP,IAAKD,EAAKA,EAAKE,EAAKA,GAC1C,GAAIsiC,GAAWl5C,EAAOw1G,WAAcA,EAAWx1G,EAAOw1G,SAAW,CAChEx1G,EAAOw1G,SAAWA,EAClB,IAAMmD,EAAM/0G,EAAIL,EAAMK,EAChBg1G,EAAM/0G,EAAIN,EAAMM,EAChBy0G,IAAQR,EAAS,GAAIj0G,EAAI80G,EAAMb,EAAS,GAAIl0G,EAAIg1G,GAAQF,EACxDF,IAAQV,EAAS,GAAIj0G,EAAI80G,EAAMb,EAAS,GAAIl0G,EAAIg1G,GAAQF,EAC9D14G,EAAO8Z,MAAMhW,IACZ,EAAIw0G,EAAKP,EAAS,GAClB,EAAIS,EAAKT,EAAS,OAMZlB,+BAAV,SACCp9F,EACAo/F,EACAC,EACAC,EACAjB,EACAC,EACA/3G,GAEAxC,KAAKw7G,mBAAoBv/F,EAAWo/F,EAAQf,EAASC,EAAS/3G,GAC9DxC,KAAKy7G,kBAAmBx/F,EAAWs/F,EAAQjB,EAAS,GAAKC,EAAS,GAAK/3G,GACvExC,KAAK07G,kBAAmBz/F,EAAWq/F,EAAQhB,EAAS,GAAKC,EAAS,GAAK/3G,IAGxE62G,2BAAA,SACCp9F,EAAmBo+F,EAAgCsB,EAAoBr/F,GAEvE,GAAItc,KAAK63G,GAAa,CACrB,IAAM3mD,EAASlxD,KAAKgjF,GACds3B,EAAUt6G,KAAK24G,GACf4B,EAAUv6G,KAAK44G,GACfzxF,EAAOnnB,KAAKg5G,GAIlB,OAHA7xF,EAAK6wF,SAAWxwG,IAChB2f,EAAK7K,MAAMhW,IAAKgW,EAAMlW,EAAGkW,EAAMjW,GAEvBg0G,GACR,KAAKhC,GAAuB5tG,SAC3BzK,KAAK47G,mBAAoB3/F,EAAWi1C,EAAQ,GAAKA,EAAQ,GAAKA,EAAQ,GAAKopD,EAASC,EAASpzF,GAC7F,MACD,KAAKkxF,GAAuBoC,WAC3Bz6G,KAAK07G,kBAAmBz/F,EAAWi1C,EAAQ,GAAKopD,EAAS,GAAKC,EAAS,GAAKpzF,GAC5EnnB,KAAK07G,kBAAmBz/F,EAAWi1C,EAAQ,GAAKopD,EAAS,GAAKC,EAAS,GAAKpzF,GAC5E,MACD,KAAKkxF,GAAuB1tG,UAC3B3K,KAAK47G,mBAAoB3/F,EAAWi1C,EAAQ,GAAKA,EAAQ,GAAKA,EAAQ,GAAKopD,EAASC,EAASpzF,GAC7F,MACD,KAAKkxF,GAAuBqC,YAC3B16G,KAAKy7G,kBAAmBx/F,EAAWi1C,EAAQ,GAAKopD,EAAS,GAAKC,EAAS,GAAKpzF,GAC5EnnB,KAAKy7G,kBAAmBx/F,EAAWi1C,EAAQ,GAAKopD,EAAS,GAAKC,EAAS,GAAKpzF,GAC5E,MACD,KAAKkxF,GAAuBh6F,KAC3B,MACD,KAAKg6F,GAAuBsC,aAC3B36G,KAAKy7G,kBAAmBx/F,EAAWi1C,EAAQ,GAAKopD,EAAS,GAAKC,EAAS,GAAKpzF,GAC5EnnB,KAAKy7G,kBAAmBx/F,EAAWi1C,EAAQ,GAAKopD,EAAS,GAAKC,EAAS,GAAKpzF,GAC5E,MACD,KAAKkxF,GAAuBxtG,YAC3B7K,KAAK47G,mBAAoB3/F,EAAWi1C,EAAQ,GAAKA,EAAQ,GAAKA,EAAQ,GAAKopD,EAASC,EAASpzF,GAC7F,MACD,KAAKkxF,GAAuBuC,cAC3B56G,KAAK07G,kBAAmBz/F,EAAWi1C,EAAQ,GAAKopD,EAAS,GAAKC,EAAS,GAAKpzF,GAC5EnnB,KAAK07G,kBAAmBz/F,EAAWi1C,EAAQ,GAAKopD,EAAS,GAAKC,EAAS,GAAKpzF,GAC5E,MACD,KAAKkxF,GAAuBttG,aAC3B/K,KAAK47G,mBAAoB3/F,EAAWi1C,EAAQ,GAAKA,EAAQ,GAAKA,EAAQ,GAAKopD,EAASC,EAASpzF,GAI9F,IAAMu0B,GAAWv0B,EAAK6wF,UAAa,CAElC,GADA17F,EAAM/V,SAAU4gB,EAAK7K,OACjBq/F,EACH,OAAQtB,GACR,KAAKhC,GAAuB5tG,SAC5B,KAAK4tG,GAAuB1tG,UAC5B,KAAK0tG,GAAuBxtG,YAC5B,KAAKwtG,GAAuBttG,aAC3BuR,EAAMlW,EAAIkW,EAAMjW,EAAIsD,KAAKG,IAAKwS,EAAMlW,EAAGkW,EAAMjW,GAC7C,MACD,KAAKgyG,GAAuBoC,WAC5B,KAAKpC,GAAuBuC,cAC3Bt+F,EAAMlW,EAAIkW,EAAMjW,EAChB,MACD,KAAKgyG,GAAuBqC,YAC5B,KAAKrC,GAAuBsC,aAC3Br+F,EAAMjW,EAAIiW,EAAMlW,EAChB,MACD,KAAKiyG,GAAuBh6F,MAI7B,OAAO,GAGT,OAAO,GAGRg7F,kBAAA,WACCr5G,KAAK22D,SACL32D,KAAKc,OAAOitD,QACZ/tD,KAAKo5G,KAAKrrD,SAGXsrD,sBAAA,WACC,MAAO,CACLr5G,KAAK63G,GAAa,EAAI,EACvB73G,KAAKc,OAAOysD,YACZvtD,KAAKo5G,KAAK7rD,cAIZ8rD,wBAAA,SAAajoD,GACY,IAApBA,EAAY,GACfpxD,KAAK22D,SAEL32D,KAAK+3G,UAEN/3G,KAAKc,OAAO+4D,YAAazI,EAAY,IACrCpxD,KAAKo5G,KAAKv/C,YAAazI,EAAY,QA1hBP91B,QAAMoU,6BG7BnC,WAAa9tC,GAAb,MACCkF,0BAEAG,EAAKqhB,GAAU,KACfrhB,EAAKkpC,IAAW,EAChBlpC,EAAKwoG,IAAa,EAClBxoG,EAAKmpC,GAAuB,MAAXxuC,EAAkBA,EAAQyuC,YAAS9tC,EACpD0E,EAAKupC,GAAwB,MAAX5uC,EAAkBA,EAAQ6uC,aAAUluC,EACtD0E,EAAKypC,GAAsB,MAAX9uC,EAAkBA,EAAQ+uC,WAAQpuC,IA+FpD,OA/GqCzC,OAmBpCN,sBAAIq8G,0BAAJ,WACC,OAAO77G,KAAKsoB,QAGb,SAAYxnB,GACXd,KAAKsoB,GAAUxnB,mCAGhBtB,sBAAIq8G,4BAAJ,WACC,OAAO,OAGR,SAAc5rE,qCAId4rE,kBAAA,SAAO7qE,gBAAAA,MACNhxC,KAAKixC,OACLjxC,KAAKyvG,IAAa,EAClBzvG,KAAKmwC,GAAWa,EAGhBhxC,KAAKywC,QAASO,GACRhxC,KAAKyvG,KAKXzvG,KAAKqwC,OAAQW,EAAU,EAAI,EAAGA,EAAS,GACjChxC,KAAKyvG,KAIXzvG,KAAKqwC,OAAQW,EAAU,EAAI,EAAGA,EAAS,GACnChxC,KAAKyvG,IAKTzvG,KAAK2wC,MAAOK,MAGH6qE,oBAAV,SAAmBxqE,GAClB,IAAMZ,EAAUzwC,KAAKwwC,GACN,MAAXC,GACHA,EAASY,EAAWrxC,MAErBA,KAAK4X,KAAM,QAASy5B,EAAWrxC,OAGtB67G,mBAAV,SAAkB1qE,EAAcE,EAAoBC,GACnD,IAAMjB,EAASrwC,KAAKowC,GACN,MAAVC,GACHA,EAAQc,EAAME,EAAWC,EAAatxC,MAEvCA,KAAK4X,KAAM,OAAQu5B,EAAME,EAAWC,EAAatxC,OAGxC67G,kBAAV,SAAiBxqE,GAChB,IAAMV,EAAQ3wC,KAAK0wC,GACN,MAATC,GACHA,EAAOU,EAAWrxC,MAEnBA,KAAK4X,KAAM,MAAOy5B,EAAWrxC,OAG9B67G,sBAAA,WACC,OAAO77G,KAAKyvG,IAGboM,sBAAA,WACC,OAAO77G,KAAKmwC,IAGb0rE,iBAAA,WACC77G,KAAKyvG,IAAa,GAGnBoM,gBAAA,WAEC,GADkB77G,KAAKyvG,GACP,CACfzvG,KAAKyvG,IAAa,EAGlB,IAAMz+D,EAAUhxC,KAAKmwC,GACfgB,EAASH,EAAU,EAAI,EAC7BhxC,KAAKqwC,OAAQc,EAAMH,EAAS,GAG5BhxC,KAAK2wC,MAAOK,QA5GsB1V,QAAMoU,4BCK1C,WAAanqC,EAAaC,EAAeC,EAAgBH,GACxDtF,KAAKsF,KAAOA,EACZtF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQA,EACbxF,KAAKyF,OAASA,EAqDhB,OAlDCq2G,qBAAA,WACC,MAAM,IAAIn7G,MAAO,kBAGlBm7G,qBAAA,SAAUn6G,GACT,MAAM,IAAIhB,MAAO,kBAGlBm7G,mBAAA,WACC,OAAO97G,KAAKsF,MAGbw2G,qBAAA,WACC,OAAO97G,KAAKwF,OAGbs2G,sBAAA,WACC,OAAO97G,KAAKyF,QAGbq2G,oBAAA,WACC,OAAO97G,KAAKsF,MAMbw2G,gBAAA,SAAKv2G,EAAaC,EAAgBC,EAAiBH,GACrC,MAATE,GACHxF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQD,EACbvF,KAAKyF,OAASF,EACdvF,KAAKsF,KAAOC,GACQ,MAAVE,GACVzF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQA,EACbxF,KAAKyF,OAASF,EACdvF,KAAKsF,KAAOE,GACM,MAARF,GACVtF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQA,EACbxF,KAAKyF,OAASA,EACdzF,KAAKsF,KAAOE,IAEZxF,KAAKuF,IAAMA,EACXvF,KAAKwF,MAAQA,EACbxF,KAAKyF,OAASA,EACdzF,KAAKsF,KAAOA,uBCfd,WAAa1D,GAEZ,IAAMmxD,EAAO/yD,KAAK+7G,GAAQn6G,EAAQmxD,KAGlC/yD,KAAK23F,GAAW/1F,EAAQo6G,QAGxB,IAAM/2G,EAAUrD,GAAWA,EAAQqD,QAC/BnB,EAAcmB,GACjBjF,KAAKyd,GAAW,IAAIq+F,GAAqB72G,EAASA,EAASA,EAASA,GAEpEjF,KAAKyd,GADgB,MAAXxY,EACM,IAAI62G,GACnB72G,EAAQM,KAAO,EACfN,EAAQO,OAAS,EACjBP,EAAQQ,QAAU,EAClBR,EAAQK,MAAQ,GAGD,IAAIw2G,GAAqB,EAAG,EAAG,EAAG,GAInD,IAAI54G,EAAQ,IACRyD,EAAS,IACb,GAAI/E,EACH,GAAqB,MAAjBA,EAAQsB,MACXA,EAAQtB,EAAQsB,MAEfyD,EADqB,MAAlB/E,EAAQ+E,OACF/E,EAAQ+E,OAERosD,EAAKkpD,wBAAwBt1G,YAEjC,GAAsB,MAAlB/E,EAAQ+E,OAClBzD,EAAQ6vD,EAAKkpD,wBAAwB/4G,MACrCyD,EAAS/E,EAAQ+E,WACX,CACN,IAAMu1G,EACNh5G,GADMg5G,EAAOnpD,EAAKkpD,yBACL/4G,MACbyD,EAASu1G,EAAKv1G,YAIfzD,GADMg5G,EAAOnpD,EAAKkpD,yBACL/4G,MACbyD,EAASu1G,EAAKv1G,OAIf,IAAM3E,EAAaJ,GAAWA,EAAQI,WAClCsM,EAAkB,EAClB6tG,GAAc,EAClB,GAAkB,MAAdn6G,EAAqB,CACxB,IAAME,EAAQF,EAAWE,MACZ,MAATA,IACHoM,EAAkBpM,EAClBi6G,GAAc,GAKhB,IAAM/jF,EAAax2B,EAAQw2B,WAGrBmH,KAAc39B,GAAgC,MAArBA,EAAQ29B,YAAoB39B,EAAQ29B,UAGnEv/B,KAAKo8G,GAAQ,CACZl5G,QACAyD,SACA01G,WAAW,EACX/tG,kBACA6tG,cACA/jF,aACAmH,aA0IH,OAjIC+8E,2BAAA,WACC,OAAOt8G,KAAK+7G,IAUbO,2BAAA,SAAgBvpD,EAAmBwpD,GAClC,GAAIv8G,KAAK+7G,KAAUhpD,IAClB/yD,KAAK+7G,GAAQhpD,GACgB,IAAzBwpD,GAAiC,CACpC,IAAML,EAAOnpD,EAAKkpD,wBACZO,EAAOx8G,KAAKo8G,GAClBI,EAAKt5G,MAAQg5G,EAAKh5G,MAClBs5G,EAAK71G,OAASu1G,EAAKv1G,OAGrB,OAAO3G,MAMRs8G,qBAAA,WACC,OAAOt8G,KAAKo8G,GAAMl5G,OAQnBo5G,qBAAA,SAAUp5G,GAET,OADAlD,KAAKo8G,GAAMl5G,MAAQA,EACZlD,MAMRs8G,sBAAA,WACC,OAAOt8G,KAAKo8G,GAAMz1G,QAQnB21G,sBAAA,SAAW31G,GAEV,OADA3G,KAAKo8G,GAAMz1G,OAASA,EACb3G,MAORs8G,uBAAA,WACC,OAAOt8G,KAAKyd,IAYb6+F,uBAAA,SAAYh3G,EAAcC,EAAaC,EAAeC,GACrD,IAAMR,EAAUjF,KAAKyd,GAKrB,OAJAxY,EAAQK,KAAOA,EACfL,EAAQM,IAAMA,EACdN,EAAQO,MAAQA,EAChBP,EAAQQ,OAASA,EACVzF,MAMRs8G,+BAAA,WACC,OAAOt8G,KAAKo8G,GAAM9tG,iBAQnBguG,+BAAA,SAAoBp6G,GAEnB,OADAlC,KAAKo8G,GAAM9tG,gBAAkBpM,EACtBlC,MAORs8G,yBAAA,WACC,OAAOt8G,KAAKo8G,GAAM78E,WAQnB+8E,yBAAA,SAAc/8E,GAEb,OADAv/B,KAAKo8G,GAAM78E,UAAYA,EAChBv/B,MAMRs8G,sBAAA,WACC,OAAOt8G,KAAK23F,IAGb2kB,sCAAA,WACC,OAAOt8G,KAAKo8G,SC5PRK,GAAc,SAAE37G,GACrB,OAAmB,MAAVA,GAAmB,aAAcA,GAGrC47G,GAAuB,SAAE57G,GAC9B,OAAmB,MAAVA,GAAkB,aAAcA,GAOpC67G,GAAe,SAAE77G,GACtB,OAAmB,MAAVA,GAAkB,WAAYA,iBAGxC,aACSd,QAA8B,KAmMvC,OAjMC48G,uBAAA,SAAY5nC,EAA8B/xD,EAAoB0yD,GAC7D,GAAI1yD,EAAY,CACf,IAAMqC,EAAWtlB,KAAK68G,GACtB,OAAIv3F,IAAa0vD,GACA,MAAZ1vD,GACHA,EAAS5U,SAAUpM,EAAWsL,SAAS,GAGxC5P,KAAK68G,GAAW7nC,EACC,MAAbA,GAAqBh1E,KAAKy8G,YAAaznC,KAC1CA,EAAUtkE,SAAUpM,EAAWsL,SAAS,GACpC+lE,GAAUgnC,GAAc3nC,IAC3BA,EAAUW,UAGLrwD,GAEA,KAGR,OAAiB,MAAb0vD,GAAqBh1E,KAAK68G,KAAa7nC,GAC1CA,EAAUtkE,SAAUpM,EAAWsL,SAAS,GACpC+lE,GAAUgnC,GAAc3nC,IAC3BA,EAAUW,SAEJX,GAEA,MAKV4nC,uBAAA,WACC,OAAO58G,KAAK68G,IAGbD,gCAAA,SAAqBE,GAEpB,IADA,IAAIvpG,EAA0DupG,EAC5C,MAAXvpG,GAAkB,CACxB,GAAIvT,KAAKy8G,YAAalpG,GACrB,OAAOA,EAEPA,EAAUA,EAAQvS,OAGpB,OAAO,MAGE47G,wBAAV,SAAuB97G,GACtB,OACC27G,GAAa37G,KACXA,EAAOyiB,SAAUjf,EAAW0L,SAAW1L,EAAWkf,cACpD1iB,EAAO6N,SAICiuG,wBAAV,SAAuB97G,GACtB,OACC27G,GAAa37G,IACbA,EAAOyiB,SAAUjf,EAAW6yF,aAC5Br2F,EAAO6N,SAITiuG,0BAAA,SACC97G,EAA2Bi8G,EAAyBC,EAAiCl5D,GAErF,GAAIA,EAAY,CAEf,GAAc,OADRthD,EAASxC,KAAKi9G,kBAAmBn8G,EAAQi8G,EAAgBC,IAE9D,OAAOx6G,EAGR,IAAMkf,EAAS5gB,EAAOE,OACtB,GAAc,MAAV0gB,GAGC,IADE9gB,GADA6f,EAAWiB,EAAOjB,UACD5f,QAASC,IACf,CAEhB,IAAK,IAAIS,EAAIX,EAAQ,EAAGY,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAE3D,GAAa,OADPsxG,EAAQ7yG,KAAKi9G,kBAAmBx8F,EAAUlf,IAAK,GAAM,IAE1D,OAAOsxG,EAGT,GAAI7yG,KAAKk9G,YAAax7F,GACrB,IAASngB,EAAI,EAAGC,EAAOZ,EAAQ,EAAGW,EAAIC,IAAQD,EAE7C,GAAa,OADPsxG,EAAQ7yG,KAAKi9G,kBAAmBx8F,EAAUlf,IAAK,GAAM,IAE1D,OAAOsxG,EAMV,OAAO7yG,KAAKi1E,cAAevzD,GAAQ,GAAO,GAAO,QAG7C,CACN,IAAMlf,EACN,GAAc,OADRA,EAASxC,KAAKm9G,sBAAuBr8G,EAAQi8G,EAAgBC,IAElE,OAAOx6G,EAGR,IAEOie,EACA7f,EAHDihB,EAAS/gB,EAAOE,OACtB,GAAc,MAAV6gB,GAGC,IADEjhB,GADA6f,EAAWoB,EAAOpB,UACD5f,QAASC,IACf,CAEhB,IAASS,EAAIX,EAAQ,EAAG,GAAKW,IAAKA,EAEjC,GAAa,OADPsxG,EAAQ7yG,KAAKm9G,sBAAuB18F,EAAUlf,IAAK,GAAM,IAE9D,OAAOsxG,EAGT,GAAI7yG,KAAKk9G,YAAar7F,GAAW,CAChC,IAAStgB,EAAIkf,EAAS/f,OAAS,EAAGE,GAASW,IAAKA,EAAI,CACnD,IAAMsxG,EACN,GAAa,OADPA,EAAQ7yG,KAAKm9G,sBAAuB18F,EAAUlf,IAAK,GAAM,IAE9D,OAAOsxG,EAGT,OAAOhxF,EAIR,OAAO7hB,KAAKi1E,cAAepzD,GAAQ,GAAM,GAAO,IAInD,OAAO,MAGE+6F,8BAAV,SACC97G,EAA2Bi8G,EAAyBC,GAGpD,GAAID,GACC/8G,KAAKy8G,YAAa37G,GACrB,OAAOA,EAKT,GAAIk8G,GAA0BN,GAAsB57G,IAAYA,EAAO6N,QAEtE,IADA,IAAM8R,EAAW3f,EAAO2f,SACflf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMsxG,EAAQ7yG,KAAKi9G,kBAAmBx8F,EAAUlf,IAAK,GAAM,GAC3D,GAAa,MAATsxG,EACH,OAAOA,EAMV,OAAI7yG,KAAKk9G,YAAap8G,GACdA,EAID,MAGE87G,kCAAV,SACC97G,EAA2Bi8G,EAAyBC,GAGpD,GAAIA,GAA0BN,GAAsB57G,IAAYA,EAAO6N,QAEtE,IADA,IAAM8R,EAAW3f,EAAO2f,SACflf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC/C,IAAMsxG,EAAQ7yG,KAAKm9G,sBAAuB18F,EAAUlf,IAAK,GAAM,GAC/D,GAAa,MAATsxG,EACH,OAAOA,EAMV,OAAIkK,GACC/8G,KAAKy8G,YAAa37G,GACdA,EAKLd,KAAKk9G,YAAap8G,GACdA,EAID,YJvNT,SAAY43G,GACXA,mBAKAA,+BAKAA,qBAXD,CAAYA,KAAAA,QKGZ,ICDY0E,iBDCZ,cAoBA,OAnBCC,oBAAA,WACC,OAAO,GAGRA,iBAAA,WACC,MAAM,IAAI18G,MAAM,4BAGjB08G,iBAAA,WACC,MAAM,IAAI18G,MAAM,4BAGjB08G,oBAAA,aAIAA,oBAAA,WACC,OAAO3E,GAAa4E,WAAa5E,GAAa6E,0BElBhD,cAoBA,OAnBCC,oBAAA,WACC,MAAM,IAAI78G,MAAO,kBAGlB68G,iBAAA,WACC,MAAM,IAAI78G,MAAO,kBAGlB68G,iBAAA,WACC,MAAM,IAAI78G,MAAO,kBAGlB68G,oBAAA,aAIAA,oBAAA,WACC,OAAO9E,GAAa4E,+BClBtB,cAoBA,OAnBCG,oBAAA,WACC,MAAM,IAAI98G,MAAO,kBAGlB88G,iBAAA,WACC,MAAM,IAAI98G,MAAO,kBAGlB88G,iBAAA,WACC,MAAM,IAAI98G,MAAO,kBAGlB88G,oBAAA,aAIAA,oBAAA,WACC,OAAO/E,GAAa4E,iBCbhBI,GAAoB,SAAEC,GAC3B,OAA2D,IAAlDA,EAAQC,UAAYlF,GAAa4E,4BAa1C,aAAA,MACCx2G,0BAEAG,EAAKkV,GAAY,EACjBlV,EAAK42G,GAAQ,GACb52G,EAAK62G,GAAW,GAChB72G,EAAK82G,GAAa,OAkLpB,OA9L+Cj+G,OAe9Ck+G,iBAAA,WACC,IAAMC,EAAOj+G,KAAK69G,GACZK,EAAUl+G,KAAK89G,GAErB,OAAII,EAAQx9G,QAAU,EACjB,EAAIu9G,EAAKv9G,OACLu9G,EAAMA,EAAKv9G,OAAS,GAEpB,KAGDw9G,EAASA,EAAQx9G,OAAS,IAInCs9G,iBAAA,SAAML,GACW39G,KAAK89G,GACbt9G,KAAMm9G,GACd39G,KAAKwpB,QAGNw0F,iBAAA,WAAA,WACC,GAAuB,MAAnBh+G,KAAK+9G,GAAqB,CAC7B,IAAMG,EAAUl+G,KAAK89G,GACrB,GAAI,EAAII,EAAQx9G,OAAS,CACxB,IAAMy9G,EAAUD,EAAQvnG,QACxB,GAAe,MAAXwnG,EACH,GAAIA,aAAmBV,GAAe,CACrC,IAAMQ,EAAOj+G,KAAK69G,GAClB,GAAI79G,KAAKmc,GAAY8hG,EAAKv9G,OAAS,CAClC,IAAM6S,EAAU0qG,EAAMA,EAAKv9G,OAAS,EAAIV,KAAKmc,IAC7Cnc,KAAKmc,IAAa,EAClBnc,KAAK4X,KAAM,SAAU5X,OAEN,KADTwC,EAAS+Q,EAAQ6qG,QAEtBp+G,KAAKq+G,UAAWF,IACK,IAAX37G,EACVxC,KAAKs+G,OAAQH,GAEbn+G,KAAK+9G,GAAav7G,EAAO++C,MAAK,WAC7Bt6C,EAAKo3G,UAAWF,MACd,WACFl3G,EAAKq3G,OAAQH,YAIV,GAAIA,aAAmBX,GACvBS,EAAOj+G,KAAK69G,GACd,EAAI79G,KAAKmc,KACN5I,EAAU0qG,EAAMA,EAAKv9G,OAASV,KAAKmc,IACzCnc,KAAKmc,IAAa,EAClBnc,KAAK4X,KAAM,SAAU5X,OAEN,KADTwC,EAAS+Q,EAAQgrG,QAEtBv+G,KAAKq+G,UAAWF,IACK,IAAX37G,EACVxC,KAAKs+G,OAAQH,GAEbn+G,KAAK+9G,GAAav7G,EAAO++C,MAAK,WAC7Bt6C,EAAKo3G,UAAWF,MACd,WACFl3G,EAAKq3G,OAAQH,WAIV,CACN,IAWM37G,EAXAg8G,EApF2C,IAoFjBL,EApFpBP,UAAYlF,GAAa6E,OAqF/BkB,EAAaf,GAAmBS,GACtC,GAAIK,GAAWC,EAAa,CAC3B,IAAMzpG,EAASwpG,EAAUx+G,KAAK69G,GAAMn9G,OAASV,KAAKmc,GAC9C,EAAInH,IACPhV,KAAKytB,OAAQzY,GACbhV,KAAKmc,GAAY,EACjBnc,KAAK4X,KAAM,SAAU5X,OAEtBA,KAAK06B,WAGS,KADTl4B,EAAS27G,EAAQ/uD,WAEtBpvD,KAAKq+G,UAAWF,IACK,IAAX37G,EACVxC,KAAKs+G,OAAQH,GAEbn+G,KAAK+9G,GAAav7G,EAAO++C,MAAK,WAC7Bt6C,EAAKo3G,UAAWF,MACd,WACFl3G,EAAKq3G,OAAQH,UASVH,oBAAV,WACC,IAAMC,EAAOj+G,KAAK69G,GACZ7oG,EAAOipG,EAAKv9G,OAAS,IAC3B,GAAI,EAAIsU,EACP,IAAK,IAAIzT,EAAI,EAAGA,EAAIyT,IAAQzT,EAC3B08G,EAAM18G,GAAIomB,UACVs2F,EAAKtnG,SAKEqnG,mBAAV,SAAkBhpG,GACjB,IAAMipG,EAAOj+G,KAAK69G,GAClB,GAAI,EAAI7oG,EAAO,CACd,IAAM0pG,EAAQ/0G,KAAKG,IAAK,EAAGm0G,EAAKv9G,OAASsU,GAEzC,GAAI,GADJA,EAAOipG,EAAKv9G,OAASg+G,GACN,CACd,IAAK,IAAIn9G,EAAIm9G,EAAOl9G,EAAOy8G,EAAKv9G,OAAQa,EAAIC,IAAQD,EACnD08G,EAAM18G,GAAIomB,UAIX,OADAs2F,EAAK1rG,OAAQmsG,EAAOT,EAAKv9G,OAASg+G,IAC3B,GAGT,OAAO,GAGEV,sBAAV,SAAqBL,GACpB39G,KAAK+9G,GAAa,KACdL,GAAmBC,IACtB39G,KAAK69G,GAAMr9G,KAAMm9G,GACjB39G,KAAK4X,KAAM,QAAS5X,QACV29G,aAAmBF,IAAgBE,aAAmBH,KAChEx9G,KAAK4X,KAAM,QAAS5X,MAErBA,KAAK4X,KAAM,SAAU5X,MACrBA,KAAKwpB,QAGIw0F,mBAAV,SAAkBL,GACjB39G,KAAK+9G,GAAa,KAClB,IAAMG,EAAUl+G,KAAK89G,GACrBH,EAAQh2F,UACR,IAAK,IAAIpmB,EAAI,EAAGC,EAAO08G,EAAQx9G,OAAQa,EAAIC,IAAQD,EAClD28G,EAAS38G,GAAIomB,UAEdu2F,EAAQx9G,OAAS,EACjBV,KAAK4X,KAAM,SAAU5X,OAGtBg+G,iBAAA,WACC,OAAOh+G,KAAK69G,GAAMn9G,QAGnBs9G,kBAAA,WACCh+G,KAAKQ,KAAM,IAAI68G,KAGhBW,iBAAA,WACKh+G,KAAK2+G,eACR3+G,KAAK89G,GAASt9G,KAAM,IAAIg9G,IACxBx9G,KAAKwpB,SAIPw0F,iBAAA,WACKh+G,KAAK4+G,eACR5+G,KAAK89G,GAASt9G,KAAM,IAAIi9G,IACxBz9G,KAAKwpB,SAIPw0F,uBAAA,WACC,OAAS,EAAIh+G,KAAKmc,IAAgC,MAAnBnc,KAAK+9G,IAGrCC,uBAAA,WACC,OAASh+G,KAAKmc,GAAYnc,KAAK69G,GAAMn9G,QAA6B,MAAnBV,KAAK+9G,OA5LPziF,QAAMoU,6BCXrD,4DA2DA,OA3DyC5vC,OACxC++G,iBAAA,SAAMhxE,EAAsB9sC,EAAkBulB,GAA9C,WACCunB,EAAQp2B,iBAAkB,WAAW,SAAE7B,GACtC3O,EAAK2Q,KAAM,UAAWhC,GAEtB,IAAMyN,EAAUiD,EAAgBhD,aAChC,GAAe,MAAXD,EAEH,IADA,IAAI9P,EAAmD8P,EACrC,MAAX9P,GAAkB,CACxB,GAAItM,EAAK63G,aAAcvrG,IAClBA,EAAQsiB,UAAWjgB,GACtB,OAGFrC,EAAUA,EAAQvS,OAIpB,GAAI2U,EAAkBm/D,WAAYl/D,GAAM,CACvC,IAAMkuC,EAAYnuC,EAAkBo/D,kBAAmBn/D,GACjD4T,EAAoB,MAAXnG,EACdiD,EAAgB2uD,cACf5xD,GAAS,EAAOA,EAAQE,SAAUjf,EAAW6yF,aAAgBrzC,EAAWA,GAEzEx9B,EAAgB2uD,cAAel0E,GAAO,GAAO,EAAM+iD,GAExC,MAARt6B,IACHlD,EAAgBnD,WAAYqG,GAAM,GAAM,GACxC5T,EAAEiC,iBACFjC,EAAEskC,gCAKLrM,EAAQp2B,iBAAkB,SAAS,SAAE7B,GACpC3O,EAAK2Q,KAAM,QAAShC,GAEpB,IAAMyN,EAAUiD,EAAgBhD,aAChC,GAAe,MAAXD,EAEH,IADA,IAAI9P,EAAmD8P,EACrC,MAAX9P,GAAkB,CACxB,GAAItM,EAAK83G,WAAYxrG,IAChBA,EAAQyiD,QAASpgD,GACpB,OAGFrC,EAAUA,EAAQvS,YAMZ69G,yBAAV,SAAwB/9G,GACvB,MAAO,cAAeA,GAGb+9G,uBAAV,SAAsB/9G,GACrB,MAAO,YAAaA,MAzDmBw6B,QAAMoU,4BCC/C,cAgDA,OA1CQsvE,wBAAP,WAIC,OAHqB,MAAjBh/G,KAAKi/G,WACRj/G,KAAKi/G,SAAW,IAAIJ,IAEd7+G,KAAKi/G,UAGND,wBAAP,SAA8B1+G,GAC7B,IAAMkC,EAASxC,KAAKi/G,SAEpB,OADAj/G,KAAKi/G,SAAW3+G,EACTkC,GAIDw8G,uBAAP,WAIC,OAHoB,MAAhBh/G,KAAKk/G,UACRl/G,KAAKk/G,QAAU,IAAIlB,IAEbh+G,KAAKk/G,SAGNF,uBAAP,SAA6B1+G,GAC5B,IAAMkC,EAASxC,KAAKk/G,QAEpB,OADAl/G,KAAKk/G,QAAU5+G,EACRkC,GAIDw8G,wBAAP,WACC,GAAqB,MAAjBh/G,KAAKm/G,SACR,MAAM,IAAIx+G,MAAO,iBAElB,OAAOX,KAAKm/G,UAGNH,wBAAP,SACC1+G,GAEA,IAAMkC,EAASxC,KAAKm/G,SAEpB,OADAn/G,KAAKm/G,SAAW7+G,EACTkC,QCnCH48G,GAAiB,SAAEt+G,GACxB,OAAiB,MAAVA,GAAuC,MAArBA,EAAOu+G,YAO3BC,GAAc,SAAEx+G,GACrB,OAAiB,MAAVA,GAAoC,MAAlBA,EAAOy+G,wBAiBhC,WAAap+G,EAA+BS,GAA5C,MACCkF,YAAOlF,EAAQ49G,mCAbNv4G,KAA2B,KAO3BA,KAAiD,KAQ1DA,EAAK9F,YAAcA,EACnB,IAAMs+G,EAAWx4G,EAAKlG,MACtB0+G,EAASv+G,MAAQ+F,EACjBw4G,EAASt+G,YAAcA,EAEvB8F,EAAK0V,GAAW/a,EAChBqF,EAAKy4G,IAAmB,EACxBz4G,EAAK04G,GAAc,EACnB14G,EAAK24G,GAAe,EACpB34G,EAAKsxG,IAAa,EAElBtxG,EAAK44G,GAAe,WACG,MAAlB54G,EAAK64G,IACR74G,EAAKxF,UAKP,IAAMs+G,EAAcn+G,EAAQoyE,iBACtBgsC,EAAmBzoG,SAAS+hB,cAAe,OACjD0mF,EAAiBlxE,aAAc,QAC9B,kGAGD7nC,EAAKg5G,GAAoBD,EACzB,IAAMv/F,EAAWs/F,EAAYt/F,SAC7B,GAAI7e,EAAQs+G,YAAc,CACzB,GAAI,GAAKz/F,EAAS/f,OAAS,CAC1B,IAAMy/G,EAAa1/F,EAAU,GAC7Bs/F,EAAYK,aAAcn5G,EAAKqb,KAAM69F,GACrCJ,EAAYK,aAAcJ,EAAkBG,QAE5CJ,EAAY/wE,YAAa/nC,EAAKqb,MAC9By9F,EAAY/wE,YAAagxE,GAG1B,IAAMK,EAAsBZ,EAASv+F,iBACrCu+F,EAASv+F,iBAAmB,WAC3Bja,EAAKq5G,mBACLD,EAAoBt9G,KAAM08G,SAG3B,GAAI,EAAIh/F,EAAS/f,OAAS,CACzB,IAAM6/G,EAAa9/F,EAAU,GAC7Bs/F,EAAYK,aAAcn5G,EAAKqb,KAAMi+F,GACrCR,EAAYK,aAAcJ,EAAkBO,QAE5CR,EAAY/wE,YAAa/nC,EAAKqb,MAC9By9F,EAAY/wE,YAAagxE,GAG3B,IAAMQ,EAAmBT,EAAY/yF,MACjC+yF,IAAgBxoG,SAASC,MAEK,WADAyD,OAAOwlG,iBAAkBV,GAAcprG,WAEvE6rG,EAAiB7rG,SAAW,YAG9B6rG,EAAiBpuF,OAAS,IAC1BouF,EAAiBv7G,QAAU,IAC3Bu7G,EAAiBE,SAAW,SAC5B,IAAMC,EAAY15G,EAAKqb,KAAK0K,MAC5B2zF,EAAUhsG,SAAW,WACrBgsG,EAAUp7G,IAAM,IAChBo7G,EAAUr7G,KAAO,IACjBq7G,EAAUz9G,MAAQ,OAClBy9G,EAAUh6G,OAAS,OACnBg6G,EAAU9oE,QAAU,QACpB8oE,EAAUp8G,QAAU,OAGpB,IAAIq8G,GAAW,EACTt6F,EAAkBrf,EAAKic,qBACvB29F,EAAc,WACbD,GACLt6F,EAAgBnD,WAAY,MAAM,GAAM,IAG1C48F,EAAYtoG,iBAAkB,SAAS,SAAE7B,GACxCgrG,GAAW,KACT,GACHb,EAAYtoG,iBAAkB,QAAQ,SAAE7B,GACvCgrG,GAAW,EACX1lG,WAAY2lG,EAAa,MACvB,GACH55G,EAAKqb,KAAKwsB,aAAc,WAAY,KAEpCkwE,GAAa8B,wBAAwBxgG,KAAMrZ,EAAKqb,KAAMrb,EAAKlG,MAAOulB,GAElE,IAAMvO,EAAqD9Q,EAAKwE,SAASmO,QAAQC,YACjF9B,EAAmBpH,GAAImH,EAAiB0B,MAAM,SAAE5D,GAC/B,MAAZA,EAAE9U,QACLwlB,EAAgBnD,WAAY,MAAM,GAAM,MAK1C,IAAM1B,EAAW,WAChB,IAAMy6F,EAAOt6G,EAAQoyE,iBAAiBioC,wBACtCh1G,EAAKwE,SAASuZ,OAAQk3F,EAAKh5G,MAAOg5G,EAAKv1G,QACvCM,EAAKgb,eAAgBi6F,EAAKh5G,MAAOg5G,EAAKv1G,OAAQ/E,EAAQm/G,cACtD95G,EAAK3F,UAEN2Z,OAAOxD,iBAAkB,SAAUgK,GACnCxG,OAAOxD,iBAAkB,oBAAqBgK,GAG9C,IAAMu/F,EAAc,IAAIp5F,QAClBq5F,EAAiBhiE,GAAepjC,qBACtColG,EAAetwG,GAAI1J,EAAKqb,MAAM,SAAE1M,GAC/B,IAAMsrG,EAAatrG,EACnBkC,EAAiBu5F,SAAU6P,EAAYnpG,EAAoBipG,GAC3D,IAAIztG,EAAUwE,EAAmBopG,QAASH,GACpC76F,EAAS86F,EAAeroD,UAAWhjD,GACzC,GAAc,MAAVuQ,EACH,KAAkB,MAAX5S,GAAkB,CACxB,GAAI+rG,GAAa/rG,IACZA,EAAQgsG,QAAS2B,EAAY/6F,EAAQ66F,GAAgB,CACxDE,EAAWrpG,iBACX,MAGFtE,EAAUA,EAAQvS,WAMrB8W,EAAiBunG,WAAYp4G,EAAKqb,MAAM,SAAE1M,GACzC,IAAMyN,EAAUiD,EAAgBhD,aAChC,GAAe,MAAXD,EAEH,IADA,IAAI9P,EAAmD8P,IACrC,MAAX9P,GACF6rG,GAAgB7rG,IACfA,EAAQ8rG,WAAYzpG,EAAGmC,KAI5BxE,EAAUA,EAAQvS,UAMrBiG,EAAKlG,MAAMwd,aAAc,IAiI3B,OAlSuCze,OAoKtCshH,2BAAA,WACCphH,KAAK0/G,IAAmB,GAGzB0B,wBAAA,WACCphH,KAAK0/G,IAAmB,GAGzB0B,mBAAA,WACKphH,KAAK0/G,IAAsC,MAAlB1/G,KAAK8/G,KACjC9/G,KAAK8/G,GAAYuB,sBAAuBrhH,KAAK6/G,MAIrCuB,6BAAV,WACKphH,KAAK2c,GAASujG,cACb,EAAIlgH,KAAKe,MAAM0f,SAAS/f,OACrBV,KAAKu4G,KACVv4G,KAAKu4G,IAAa,EAClBv4G,KAAKsiB,KAAK0K,MAAM6qB,QAAU,SAGvB73C,KAAKu4G,KACRv4G,KAAKu4G,IAAa,EAClBv4G,KAAKsiB,KAAK0K,MAAM6qB,QAAU,UAM9BupE,mBAAA,WACCphH,KAAK2kB,QACL3kB,KAAKqlB,SAWLrlB,KAAK8/G,GAAY,KAGjBh5G,YAAMrF,mBAGPjC,sBAAI4hH,yBAAJ,WACC,OAAOphH,KAAKshH,OAAOp+G,uCAGpB1D,sBAAI4hH,0BAAJ,WACC,OAAOphH,KAAKshH,OAAO36G,wCAGpBnH,sBAAI4hH,2BAAJ,WACC,OAAOphH,KAAK2c,GAASokG,8CAGZK,2BAAV,SAA0Bl+G,EAAeyD,EAAgB1B,GAExD,IADA,IAAMwb,EAAWzgB,KAAKe,MAAM0f,SACnBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,GACpBD,EAAMgF,eAAgBxiB,EAAOyD,EAAQ1B,KAKxCm8G,kBAAA,WAEC,IADA,IAAM3gG,EAAWzgB,KAAKe,MAAM0f,SACnB8gG,EAAS,EAAGC,EAAQxhH,KAAK2/G,GAAa4B,EAASC,IAASD,EAAS,CAEzE,IADA,IAAIE,GAAkB,EACblgH,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,IACpBD,EAAMiE,QACN88F,EAAkBA,GAAmB/gG,EAAM+gG,mBAK7C,IAAMA,EACL,QAKHL,mBAAA,WAEC,IADA,IAAM3gG,EAAWzgB,KAAKe,MAAM0f,SACnB8gG,EAAS,EAAGC,EAAQxhH,KAAK2/G,GAAa4B,EAASC,IAASD,EAAS,CAEzE,IADA,IAAI5hG,GAAU,EACLpe,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,IACpBD,EAAM2E,SACN1F,EAAUA,GAAWe,EAAMf,WAAae,EAAMd,YAKhD,IAAMD,EACL,QAKHyhG,+BAAA,WAIC,OAHmB,MAAfphH,KAAK0hH,KACR1hH,KAAK0hH,GAAS,IAAI9E,IAEZ58G,KAAK0hH,IAGbN,gCAAA,WACC,OAAOphH,KAAKigH,IAGbmB,kCAAA,WAIC,OAHgC,MAA5BphH,KAAK2hH,KACR3hH,KAAK2hH,GAAsB,IAAIpjF,GAAoBv+B,OAE7CA,KAAK2hH,OAhSyBC,6BCuCtC,WAAahgH,GACZvB,EAAcmtB,IAAKxtB,MAGnBA,KAAK+7G,GAAQ/7G,KAAK6hH,cAAejgH,GAGjC,IAAMw2B,EAAex2B,GAAiC,MAAtBA,EAAQw2B,WACvCx2B,EAAQw2B,WAAcnd,OAAO8xB,kBAAoB,EAElD/sC,KAAKs+B,GAAclG,SAGX0pF,WAAiBC,UAAUC,cAGnChiH,KAAK2c,GAAW/a,EAGhB,IAAMgL,EAAO5M,KAAKsU,GAAQtU,KAAKiiH,aAAcrgH,GAG7C5B,KAAKkiH,MAAyBtgH,IAAWA,EAAQo6G,SAC3Ch8G,KAAKkiH,KACVliH,KAAK23F,GAAW/qF,GA+HnB,OA3HCpN,sBAAI2iH,yBAAJ,WACC,OAAOniH,KAAKsU,GAAMvT,uCAGnBohH,2BAAA,WACC,OAAOniH,KAAK+7G,IAGboG,0BAAA,WACC,OAAOniH,KAAKs+B,IAGH6jF,0BAAV,SAAyBvgH,GACxB,IAAMmxD,EAAOnxD,GAAWA,EAAQmxD,KAChC,GAAY,MAARA,EAAe,CAClB,IAAIlwD,EAAckwD,GAMjB,OAAOA,EALP,IAAM8/C,EAAQt7F,SAAS6qG,cAA4BrvD,GACnD,GAAI8/C,EACH,OAAOA,EAMV,OAAOt7F,SAASC,MAGP2qG,+BAAV,SAA8BvgH,GAC7B,IAAMmxD,EAAO/yD,KAAK+7G,GACZ3jF,EAAap4B,KAAKs+B,GACxB,OACQ,IAAIg+E,GADR16G,EACiC,CACnCmxD,OACA9tD,QAASrD,EAAQqD,QACjB/B,MAAOtB,EAAQsB,MACfyD,OAAQ/E,EAAQ+E,OAChB3E,WAAYJ,EAAQI,WACpBo2B,aACAmH,UAAW39B,EAAQ29B,UACnBy8E,SAAS,GAGyB,CACnCjpD,OACA36B,aACA4jF,SAAS,KAIDmG,yBAAV,SAAwBvgH,GACvB,OAAO,IAAIw/G,GAAmBphH,KAAMA,KAAKqiH,mBAAoBzgH,KAG9DugH,yBAAA,WACC,OAAQniH,KAAKsU,IAGJ6tG,kCAAV,SAAiCvgH,GAChC,IAAMmxD,EAAO/yD,KAAK+7G,GACZ3jF,EAAap4B,KAAKs+B,GACxB,OACQ,IAAIg+E,GADR16G,EACiC,CACnCmxD,OACA9tD,QAASrD,EAAQqD,QACjB/B,MAAOtB,EAAQsB,MACfyD,OAAQ/E,EAAQ+E,OAChB3E,WAAY,CACXE,MAAO,MAERk2B,aACAmH,UAAW39B,EAAQ29B,UACnBy8E,SAAS,GAGyB,CACnCjpD,OACA36B,aACA4jF,SAAS,KAIDmG,4BAAV,SAA2BvgH,GAC1B,OAAO,IAAIw/G,GAAmBphH,KAAMA,KAAKsiH,sBAAuB1gH,KAGjEugH,4BAAA,WACC,OAAIniH,KAAKkiH,IACa,MAAjBliH,KAAK23F,KACR33F,KAAK23F,GAAW33F,KAAKuiH,gBAAiBviH,KAAK2c,KAErC3c,KAAK23F,IAEL33F,KAAKsU,IAId6tG,mBAAA,WACC,IAAIniH,KAAKkiH,GASR,OAAOliH,KAAKsU,GAAMhT,SARLtB,KAAKsU,GACbhT,SAEL,IAAM06G,EAAUh8G,KAAK23F,GACjBqkB,GACHA,EAAQ16G,UAOX6gH,mBAAA,WACC,IAAIniH,KAAKkiH,GASR,OAAOliH,KAAKsU,GAAM7S,SARLzB,KAAKsU,GACb7S,SAEL,IAAMu6G,EAAUh8G,KAAK23F,GACjBqkB,GACHA,EAAQv6G,8BC3MZ,4DAWA,OARU3B,OACC0iH,iBAAV,SAAgB5gH,GACfkF,YAAMwZ,eAAM1e,IAGH4gH,oBAAV,WACC,MAAO,aANC7hG,kBCiBV,4DAoIA,OAhIU7gB,OAKC2iH,iBAAV,SAAgB7gH,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAKq1B,YAAa,EAClBr1B,KAAK0iH,GAtBU,SAChB/gH,EAAyBC,GAEzB,OAAe,MAAXA,GAAqC,MAAlBA,EAAQugD,OACvBvgD,EAAQugD,OAETxgD,EAAMghH,WAgBKA,CAAU3iH,KAAK2B,MAAOC,GACvC5B,KAAK4iH,GAAmB,WACvB37G,EAAK47G,YAAY,GACjB,IAAM/hH,EAASmG,EAAK67G,GACN,MAAVhiH,GACHA,EAAO8X,IAAKd,EAAiBiB,GAAI9R,EAAK27G,KAGxC5iH,KAAK8iH,GAAyB,KAC9B9iH,KAAK+iH,oBAGU,MAAXnhH,GAAoC,MAAjBA,EAAQohH,OAC9BphH,EAAQohH,MAAMx1F,IAAKxtB,OAIXyiH,uBAAV,SAAsB7sG,GACrB9O,YAAMqZ,qBAAYvK,GAClB5V,KAAK+Z,WAGN0oG,qBAAA,WACC,OAAOziH,KAAK0iH,IAGHD,8BAAV,WAAA,WACC3qG,EAAiBiC,QAAS/Z,MAAM,WAC/BiH,EAAK8S,aAGA/Z,KAAK2iH,YACV3iH,KAAK2Q,GAAImH,EAAiB0B,MAAM,WAC/BvS,EAAK47G,YAAY,GACjB,IAAM3hH,EAAQb,EAAcsZ,SAAU1S,GAClC/F,IACY+F,EAAK67G,GAAyB5hH,EAAMH,OAC5C4P,GAAImH,EAAiBiB,GAAI9R,EAAK27G,QAM/BH,0BAAV,SAAyB1+F,EAAkBE,GAC1Cnd,YAAMod,wBAAeH,EAAUE,GAC/BjkB,KAAKq1B,WAAa7lB,EAAYmI,aAAcoM,IAGnC0+F,oBAAV,WACC,MAAO,WAGRA,oBAAA,WACKziH,KAAK2X,iBACJ3X,KAAK2iH,YACR3iH,KAAKijH,gBACLjjH,KAAKkjH,eAELljH,KAAK4X,KAAM,SAAU5X,QAKdyiH,0BAAV,WACCziH,KAAK+2B,WAAa/2B,KAAKyiB,aAGdggG,wBAAV,WACCziH,KAAK4X,KAAM5X,KAAKyiB,WAAa,SAAW,WAAYziB,OAG3CyiH,8BAAV,WACKziH,KAAK2X,iBACJ3X,KAAK2iH,WACR3iH,KAAKijH,gBAELjjH,KAAK6iH,YAAY,KAKVJ,4BAAV,WACKziH,KAAK2X,iBACJ3X,KAAK2iH,WACR3iH,KAAKkjH,eAEDljH,KAAK0iB,aACR1iB,KAAK4X,KAAM,SAAU5X,MAEtBA,KAAK6iH,YAAY,MAKpBJ,sBAAA,SAAW7sG,GAKV,OAJID,EAAkBggB,cAAe/f,IACpC5V,KAAKmjH,oBAGCr8G,YAAM+uB,oBAAWjgB,IAGzB6sG,oBAAA,SAAS7sG,GAKR,OAJID,EAAkBggB,cAAe/f,IACpC5V,KAAKojH,kBAGCt8G,YAAMkvD,kBAASpgD,IAGvB6sG,oBAAA,WAEC,IAAM7gH,EAAU5B,KAAK2c,GACN,MAAX/a,GAAoC,MAAjBA,EAAQohH,OAC9BphH,EAAQohH,MAAMv1F,OAAQztB,MAGvB8G,YAAM6gB,uBA9HE+J,kBCrBV,4DAQA,OAJU5xB,OACCujH,oBAAV,WACC,MAAO,cAFCZ,mBCJV,4DAQA,OAJU3iH,OACCwjH,oBAAV,WACC,MAAO,qBAFCD,mBCJV,4DAQA,OAJUvjH,OACCyjH,oBAAV,WACC,MAAO,mBAFCd,mBCJV,4DAQA,OAJU3iH,OACC0jH,oBAAV,WACC,MAAO,wBAFCD,mBCfV,4DAIA,OAJoCzjH,OACzB2jH,oBAAV,WACC,MAAO,qBAF2BJ,mBCQpC,4DAOA,OAJUvjH,OACC4jH,oBAAV,WACC,MAAO,wBAFCr/D,mBCWV,aAAA,qDAIWp9C,KAAiC,KACjCA,KAAgC,KAChCA,KAA+B,OA4J1C,OA/JUnH,OAQC6jH,iBAAV,SAAgB/hH,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ,IAAMD,EAAQ3B,KAAK2B,MACbiT,EAAS,IAAIqyC,GAAgB,CAClCjmD,OAAQhB,KACRoG,EAAGzE,EAAMiiH,aACTv9G,EAAG1E,EAAMkiH,aACT3gH,MAAOvB,EAAMmiH,iBACbn9G,OAAQhF,EAAMoiH,oBAGf/jH,KAAKgkH,OAAQpvG,EAAQhT,GAGrB,IAAMqiH,EAAOriH,GAAWA,EAAQqiH,IAAMtiH,EAAMuiH,QACtChU,EAAWtuG,GAAWA,EAAQsuG,QAAUvuG,EAAMwiH,YACpD,GAAU,MAANF,GAAwB,MAAV/T,EAAiB,CAClC,IAAMkU,EAAe,IAAIV,GAAkB,CAC1C1iH,OAAQ4T,EACR1R,MAAO,UAAWyD,OAAQ,OAC1B1B,QAAS,CACRM,IAAKvF,KAAKiF,QAAQ6c,YAGpB9hB,KAAKqkH,GAAgBD,EACrB,IAAIvhE,GAAa,CAChB7hD,OAAQojH,EACRnlG,OAAQ,IAEC,MAANglG,GAAwB,MAAV/T,GACjBlwG,KAAKskH,GAAgB,IAAIb,GAAe,CACvCziH,OAAQojH,EACRp7F,KAAM,CACLyF,MAAOyhF,GAERv/F,GAAI,CACH4zG,OAAQ,WACPt9G,EAAK8yC,eAIR/5C,KAAKwkH,GAAY,IAAInB,GAAQ,CAC5BriH,OAAQojH,EACRp7F,KAAM,CACLyF,MAAOw1F,GAERtzG,GAAI,CACH4zG,OAAQ,WACPt9G,EAAKw9G,YAIQ,MAANR,EACVjkH,KAAKwkH,GAAY,IAAIf,GAAe,CACnCziH,OAAQojH,EACRp7F,KAAM,CACLyF,MAAOw1F,GAERtzG,GAAI,CACH4zG,OAAQ,WACPt9G,EAAKw9G,WAIY,MAAVvU,IACVlwG,KAAKskH,GAAgB,IAAIb,GAAe,CACvCziH,OAAQojH,EACRp7F,KAAM,CACLyF,MAAOyhF,GAERv/F,GAAI,CACH4zG,OAAQ,WACPt9G,EAAK8yC,gBAKT,IAAI8I,GAAa,CAChB7hD,OAAQojH,EACRnlG,OAAQ,MAKD0kG,mBAAV,SAAkB/uG,EAAyBhT,KAI3C+hH,iBAAA,WAEC,OADA78G,YAAMixC,gBACC/3C,KAAK0kH,IAGHf,mBAAV,WAAA,WACC78G,YAAMyzC,kBAEe,MAAjBv6C,KAAK0kH,KACR1kH,KAAK0kH,GAAW,IAAIp5E,SAAQ,SAAEC,EAAS6wC,GACtCn1E,EAAK09G,GAAWp5E,EAChBtkC,EAAK29G,GAAUxoC,OAKRunC,oBAAV,WACC78G,YAAMgxF,mBAEN,IAAM1b,EAASp8E,KAAK4kH,GACpB5kH,KAAK0kH,GAAW,KAChB1kH,KAAK2kH,GAAW,KAChB3kH,KAAK4kH,GAAU,KAED,MAAVxoC,GACHA,KAIQunC,iBAAV,WACC,IAAMp4E,EAAUvrC,KAAK2kH,GACrB3kH,KAAK0kH,GAAW,KAChB1kH,KAAK2kH,GAAW,KAChB3kH,KAAK4kH,GAAU,KAEf5kH,KAAKqiD,QAEU,MAAX9W,GACHA,IAGDvrC,KAAK4X,KAAM,KAAM5X,OAGR2jH,qBAAV,WACC,IAAMvnC,EAASp8E,KAAK4kH,GACpB5kH,KAAK0kH,GAAW,KAChB1kH,KAAK2kH,GAAW,KAChB3kH,KAAK4kH,GAAU,KAEf5kH,KAAKqiD,QAES,MAAV+5B,GACHA,IAGDp8E,KAAK4X,KAAM,SAAU5X,OAGZ2jH,oBAAV,WACC,MAAO,qBA7JCzsB,mBCTV,4DA4JA,OAxJUp3F,OAYC+kH,iBAAV,SAAgBjjH,GAAhB,WACC5B,KAAK8kH,GAA2B,KAChC9kH,KAAK+kH,GAAsBnjH,GAAWA,EAAQojH,SAAWpjH,EAAQojH,QAAQC,WACxEjlH,KAAK2B,MAAMujH,sBAEZp+G,YAAMwZ,eAAM1e,GAEZ5B,KAAKmlH,GAAiBvjH,GAAWA,EAAQwjH,aAAiB,GAE1DplH,KAAKqlH,GAAsBzjH,GAAWA,EAAQojH,SAAWpjH,EAAQojH,QAAQn1F,WACxE7vB,KAAK2B,MAAM2jH,sBACZtlH,KAAKulH,GAAwB3jH,GAAWA,EAAQojH,SAAWpjH,EAAQojH,QAAQQ,aAC1ExlH,KAAK2B,MAAM8jH,wBAEZzlH,KAAKqzE,GAAuB,SAAEz9D,GAC7B3O,EAAKqsE,eAAgB19D,IAEtB5V,KAAK2zE,GAAsB,WAC1B1sE,EAAKgzC,iBAENj6C,KAAK4zE,GAAqB,SAAEh+D,GAC3B3O,EAAK4sE,aAAcj+D,KAIrBpW,sBAAIqlH,yBAAJ,WACC,OAAO7kH,KAAK4uB,QAGb,SAAWH,GACVzuB,KAAKgpB,KAAOyF,mCAGHo2F,yBAAV,WACC/9G,YAAMypB,wBACNvwB,KAAK0lH,YAGNb,qBAAA,WACC,IAAMriH,EAASxC,KAAK+kH,GAAmB/kH,KAAK4uB,GAAoB5uB,MAQhE,OAPIA,KAAK8kH,KAA6BtiH,IACrCxC,KAAK8kH,GAA2BtiH,EAChCxC,KAAK2lH,WAAsB,MAAVnjH,GACbxC,KAAKqiB,aACRriB,KAAKwf,cAGAhd,GAGEqiH,uBAAV,WACC,IAAMe,EAA0B5lH,KAAK8kH,GACrC,GAAIjiH,EAAc+iH,GAA4B,CAC7C,IAAM1kH,EAAQb,EAAcsZ,SAAU3Z,MAClCkB,IACHA,EAAMohB,KAAKxD,MAAQ8mG,QAGpB9+G,YAAM0Y,uBAIEqlG,oBAAV,WACC/9G,YAAM2pC,mBAEN,IAAMznB,EAAOhpB,KAAK2sB,GACN,MAAR3D,IACHA,EAAKra,SAAU,IAIPk2G,qBAAV,WACC/9G,YAAMizC,oBAEN,IAAM/wB,EAAOhpB,KAAK2sB,GACN,MAAR3D,IACHA,EAAKra,SAAU,IAIPk2G,kBAAV,WACC/9G,YAAM6pC,iBACN3wC,KAAKi6C,iBAGI4qE,8BAAV,SACCh3E,EAA2BjnB,EAA+BG,GAE1DjgB,YAAMoqG,4BAAmBrjE,EAASjnB,EAAQG,GAC1C8mB,EAAQr7B,KAAOxS,KAAKk0E,eACpBrmC,EAAQpf,MAAQzuB,KAAKqlH,GAAmBrlH,KAAK4uB,GAAoB5uB,MACjE6tC,EAAQp2B,iBAAkB,UAAWzX,KAAKqzE,IAC1CxlC,EAAQp2B,iBAAkB,SAAUzX,KAAK2zE,IACzC9lC,EAAQp2B,iBAAkB,QAASzX,KAAK4zE,KAG/BixC,8BAAV,SACCh3E,EAA2BjnB,EAA+BG,GAE1DjgB,YAAMwqG,4BAAmBzjE,EAASjnB,EAAQG,GAC1C8mB,EAAQ5J,oBAAqB,UAAWjkC,KAAKqzE,IAC7CxlC,EAAQ5J,oBAAqB,SAAUjkC,KAAK2zE,IAC5C9lC,EAAQ5J,oBAAqB,QAASjkC,KAAK4zE,KAGlCixC,2BAAV,SAA0BjvG,GACrBD,EAAkBw/D,QAASv/D,IAC9B5V,KAAK4pB,MACL5pB,KAAK4X,KAAM,QAAS5X,OACV2V,EAAkBqiF,YAAapiF,IACzC5V,KAAKkwG,UAIG2U,0BAAV,WACC,GAAI7kH,KAAKyuG,GAAkB,CAC1B,IAAM5gE,EAAU7tC,KAAKquG,GACrB,GAAe,MAAXxgE,EAAkB,CACrB,IAAM6qB,EAAW14D,KAAKu1B,QAASsY,EAAQpf,OACjCo3F,EAAW7lH,KAAK4uB,GAClBi3F,IAAantD,IAChB14D,KAAKgpB,KAAO0vC,EACZ14D,KAAK4X,KAAM,SAAU8gD,EAAUmtD,EAAU7lH,UAMnC6kH,yBAAV,SAAwBjvG,GACnBA,EAAE9U,kBAAkBs0E,kBACvBp1E,KAAK4X,KAAM,QAAS5X,KAAKu1B,QAAS3f,EAAE9U,OAAO2tB,OAASzuB,OAI5C6kH,oBAAV,WACC,MAAO,aAnJCjX,mBC6BV,4DA8HA,OA3HU9tG,OAKCgmH,iBAAV,SAAgBlkH,GACfkF,YAAMwZ,eAAM1e,GACZ,IAAMD,EAAQ3B,KAAK2B,MACnB3B,KAAK+lH,GAtCQ,SACdpkH,EAAcC,GAEd,OAAe,MAAXA,EACsB,MAAhBA,EAAQokC,KAAepkC,EAAQokC,KAAOrkC,EAAMqkH,UAE/C,KAgCOC,CAAQtkH,EAAOC,GAC5B5B,KAAKkmH,GA9BO,SACbvkH,EAAcC,GAEd,OAAe,MAAXA,EACqB,MAAfA,EAAQgI,IAAchI,EAAQgI,IAAMjI,EAAMwkH,SAE7C,KAwBMC,CAAOzkH,EAAOC,GAC1B5B,KAAKqmH,GAtBO,SACb1kH,EAAcC,GAEd,OAAe,MAAXA,EACqB,MAAfA,EAAQkI,IAAclI,EAAQkI,IAAMnI,EAAM2kH,SAE7C,KAgBMC,CAAO5kH,EAAOC,IAG3BpC,sBAAIsmH,wBAAJ,WACC,OAAO9lH,KAAK+lH,QAGb,SAAU//E,GACLhmC,KAAK+lH,KAAU//E,IAClBhmC,KAAK+lH,GAAQ//E,EACbhmC,KAAKwmH,oDAIPhnH,sBAAIsmH,uBAAJ,WACC,OAAO9lH,KAAKkmH,QAGb,SAASt8G,GACJ5J,KAAKkmH,KAASt8G,IACjB5J,KAAKkmH,GAAOt8G,EACZ5J,KAAKymH,mDAIPjnH,sBAAIsmH,uBAAJ,WACC,OAAO9lH,KAAKqmH,QAGb,SAASv8G,GACJ9J,KAAKqmH,KAASv8G,IACjB9J,KAAKqmH,GAAOv8G,EACZ9J,KAAK0mH,mDAIGZ,oBAAV,SAAmBa,GAClB,IAAMnkH,EAASxC,KAAKulH,GAAqBoB,EAAe3mH,MACxD,OAAIwC,GAAWA,EACG,MAAbxC,KAAKkmH,IAAgB1jH,EAASxC,KAAKkmH,GAC/BlmH,KAAKkmH,GAEI,MAAblmH,KAAKqmH,IAAgBrmH,KAAKqmH,GAAO7jH,EAC7BxC,KAAKqmH,GAEN7jH,EAEDxC,KAAKyuB,OAGHq3F,4BAAV,WACC,GAAI9lH,KAAKyuG,GAAkB,CAC1B,IAAM5gE,EAAU7tC,KAAKquG,GACjBxgE,GACH7tC,KAAK4mH,cAAe/4E,KAKbi4E,2BAAV,WACC,GAAI9lH,KAAKyuG,GAAkB,CAC1B,IAAM5gE,EAAU7tC,KAAKquG,GACjBxgE,GACH7tC,KAAK6mH,aAAch5E,KAKZi4E,2BAAV,WACC,GAAI9lH,KAAKyuG,GAAkB,CAC1B,IAAM5gE,EAAU7tC,KAAKquG,GACjBxgE,GACH7tC,KAAK8mH,aAAcj5E,KAKZi4E,0BAAV,SAAyBjsE,GACN,MAAd75C,KAAK+lH,GACRlsE,EAAM7T,KAAOK,OAAQrmC,KAAK+lH,IAE1BlsE,EAAMw6B,gBAAiB,SAIfyxC,yBAAV,SAAwBjsE,GACN,MAAb75C,KAAKkmH,GACRrsE,EAAMjwC,IAAM,GAAG5J,KAAKkmH,GAEpBrsE,EAAMw6B,gBAAiB,QAIfyxC,yBAAV,SAAwBjsE,GACN,MAAb75C,KAAKqmH,GACRxsE,EAAM/vC,IAAM,GAAG9J,KAAKqmH,GAEpBxsE,EAAMw6B,gBAAiB,QAIfyxC,8BAAV,SACCj4E,EAA2BjnB,EAA+BG,GAE1DjgB,YAAMoqG,4BAAmBrjE,EAASjnB,EAAQG,GAC1C/mB,KAAK4mH,cAAe/4E,GACpB7tC,KAAK6mH,aAAch5E,GACnB7tC,KAAK8mH,aAAcj5E,IAGVi4E,yBAAV,WACC,MAAO,aAzHCjB,mBC1CV,4DAOA,OAJU/kH,OACCinH,oBAAV,WACC,MAAO,iBAFCjB,mBCDV,4DAaA,OATUhmH,OACCknH,iBAAV,SAAgBplH,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAK0Q,SAAUpM,EAAWkf,aAAa,IAG9BwjG,oBAAV,WACC,MAAO,YAPCz4F,kBCLV,4DAQA,OAJUzuB,OACCmnH,oBAAV,WACC,MAAO,kBAFCD,mBCmBT,WAAaplH,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKuZ,SAAUvZ,EAAKigH,GAAS,IAAID,GAAwB,MAAXrlH,EAAkBA,EAAQulH,WAAQ5kH,IAChF0E,EAAKuZ,SAAUvZ,EAAKwyC,GAASxyC,EAAKgtE,YAAwB,MAAXryE,EAAkBA,EAAQi4C,WAAQt3C,IAClE,MAAXX,GAAoC,MAAjBA,EAAQwlH,OAC9BngH,EAAKuZ,SAAU,IAAIqiC,GAAcjhD,EAAQwlH,UAiB5C,OA1BUtnH,OAaTN,sBAAI6nH,yBAAJ,WACC,OAAOrnH,KAAKy5C,oCAGbj6C,sBAAI6nH,yBAAJ,WACC,OAAOrnH,KAAKknH,oCAKHG,oBAAV,WACC,MAAO,qBAxBC3D,mBCzBV,4DAOA,OAJU5jH,OACCwnH,wBAAV,SAAuB1lH,GACtB,OAAO,IAAImlH,GAAYnlH,OAFfylH,mBCSV,4DAeA,OAZUvnH,OACCynH,oBAAV,SAAmBZ,GAClB,OAAO3mH,KAAKulH,GAAqBoB,EAAe3mH,OAGvCunH,yBAAV,WACC,MAAO,QAGEA,oBAAV,WACC,MAAO,iBAVC1C,mBCfV,4DAOA,OAJU/kH,OACC0nH,wBAAV,SAAuB5lH,GACtB,OAAO,IAAI2lH,GAAY3lH,OAFfylH,kBCHT,WACCxxB,EACA4xB,EACAC,GAEA1nH,KAAK2nH,GAAiB9xB,EACtB71F,KAAK4nH,GAAiBH,EACtBznH,KAAK6nH,GAAiBH,EA4BxB,OAzBCloH,sBAAIsoH,yBAAJ,WACC,OAAO9nH,KAAK2nH,GAAezlH,WAG5B,SAAWA,GACV,GAAIlC,KAAK2nH,GAAezlH,QAAUA,EAAQ,CACzC,IAAML,EAAW7B,KAAK4nH,GACN,MAAZ/lH,GACHA,EAAUK,qCAKb1C,sBAAIsoH,yBAAJ,WACC,OAAO9nH,KAAK2nH,GAAevlH,WAG5B,SAAWA,GACV,GAAIpC,KAAK2nH,GAAevlH,QAAUA,EAAQ,CACzC,IAAMP,EAAW7B,KAAK6nH,GACN,MAAZhmH,GACHA,EAAUO,yDC/Bb,WAAa2lH,EAA2Bv1E,GAAxC,MACC1rC,0BAEAG,EAAK+gH,GAAWD,EAChB9gH,EAAKqxD,GAAY9lB,IA8DnB,OAtEwC1yC,OAWvCmoH,gBAAA,SAAKrnH,GACJ,IAAMmnH,EAAU/nH,KAAKgoH,GACrB,OAAI,GAAKpnH,GAASA,EAAQmnH,EAAQrnH,OAC1BqnH,EAASA,EAAQrnH,OAAS,EAAIE,GAE/B,MAGRqnH,gBAAA,SAAKrnH,EAAei1F,GACnB,IAAMkyB,EAAU/nH,KAAKgoH,GACrB,GAAI,GAAKpnH,GAASA,EAAQmnH,EAAQrnH,OAAS,CAC1C,IAAM8B,EAASulH,EAASA,EAAQrnH,OAAS,EAAIE,GAM7C,OALAmnH,EAASA,EAAQrnH,OAAS,EAAIE,GAAU,CACvCsB,MAAO2zF,EAAc3zF,MACrBE,MAAOyzF,EAAczzF,OAEtBpC,KAAK4X,KAAM,SAAU5X,MACdwC,EAER,OAAO,MAGRylH,qBAAA,SAAUpyB,GAET,IADA,IAAMkyB,EAAU/nH,KAAKgoH,GACZzmH,EAAI,EAAGC,EAAOumH,EAAQrnH,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAM2mH,EAASH,EAASxmH,GACxB,GAAI2mH,EAAOhmH,QAAU2zF,EAAc3zF,OAASgmH,EAAO9lH,QAAUyzF,EAAczzF,MAC1E,OAAO,EAGT,OAAO,GAGR6lH,gBAAA,SAAKpyB,GACJ,IAAMkyB,EAAU/nH,KAAKgoH,GASrB,OARAD,EAAQvnH,KAAK,CACZ0B,MAAO2zF,EAAc3zF,MACrBE,MAAOyzF,EAAczzF,QAElBpC,KAAKs4D,GAAYyvD,EAAQrnH,QAC5BqnH,EAAQpxG,QAET3W,KAAK4X,KAAM,SAAU5X,MACdA,MAGRioH,gBAAA,WACC,IACMzlH,EADUxC,KAAKgoH,GACErxG,QACvB,OAAc,MAAVnU,GACHxC,KAAK4X,KAAM,SAAU5X,MACdwC,GAED,MAGRylH,iBAAA,WACC,OAAOjoH,KAAKgoH,GAAStnH,WApEiB46B,QAAMoU,6BCsD9C,4DAonBA,OAjnBU5vC,OAsCTN,sBAAI2oH,2BAAJ,WACC,OAAOnoH,KAAKooH,oCAGb5oH,sBAAI2oH,uBAAJ,WACC,OAAOnoH,KAAKqoH,oCAGb7oH,sBAAI2oH,0BAAJ,WACC,OAAOnoH,KAAKsoH,oCAGHH,iBAAV,SAAgBvmH,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK0Q,SAAUpM,EAAWkf,aAAa,GAEvCxjB,KAAKsU,GAAQ,SACbtU,KAAKuoH,GAAO,CAAErmH,MAAO,SAAUE,MAAO,GACtCpC,KAAKqoH,GAAa,IAAIP,GAAsB9nH,KAAKuoH,IAAM,SAAErmH,GACxD+E,EAAKuhH,YAAatmH,MAChB,SAAEE,GACJ6E,EAAKwhH,YAAarmH,MAEnBpC,KAAKs+C,GAAW,CAAEp8C,MAAO,SAAUE,MAAO,GAC1CpC,KAAKooH,GAAiB,IAAIN,GAAsB9nH,KAAKs+C,IAAU,SAAEp8C,GAChE+E,EAAKyhH,gBAAiBxmH,MACpB,SAAEE,GACJ6E,EAAK0hH,gBAAiBvmH,MAGvB,IAAMT,EAAQ3B,KAAK2B,MACbsD,EAAUjF,KAAKyd,GACfonC,EAAa5/C,EAAQ6c,SACrBkjC,EAAe//C,EAAQggB,WACvB6/B,EAAgB7/C,EAAQigB,YACxB6/B,EAAc9/C,EAAQ2c,UAC5B5hB,KAAK4oH,GAAgB,IAAIhhG,QAGzB,IAAMihG,EAAYlnH,EAAMmnH,eAClBC,EAAapnH,EAAMqnH,gBACnBC,EAAiBjpH,KAAKkpH,GAAkB,IAAI10F,SAAQnI,UAAQyzC,OAClEmpD,EAAe7iH,EAAI2+C,EACnBkkE,EAAe5iH,EAAIw+C,EACnBokE,EAAe/lH,MAAQ2lH,EACvBI,EAAetiH,OAASoiH,EACxBE,EAAe1qG,aAAc,EAC7Bve,KAAKwgB,SAAUyoG,GAEf,IAAME,EAAanpH,KAAKopH,GAAc,IAAI50F,SAAQ7yB,EAAM0nH,kBACxDF,EAAW/iH,EAAI2+C,EACfokE,EAAW9iH,EAAIw+C,EACfskE,EAAWz6G,KAAO1O,KAAKsU,GACvB60G,EAAW5qG,aAAc,EACzBve,KAAKwgB,SAAU2oG,GAGfnpH,KAAKspH,GAAmB,SAAE1zG,GACzB3O,EAAKsiH,WAAY3zG,IAElB5V,KAAKwpH,GAAiB,SAAE5zG,GACvB3O,EAAKwiH,SAAU7zG,IAEhBqzG,EAAet4G,GAAImH,EAAiB0B,MAAM,SAAE5D,GAC3C3O,EAAKyiH,WAAY9zG,MAIlB,IAAM+zG,EAAa3pH,KAAK4pH,GAAc,IAAIp1F,SAAQ7yB,EAAMgkC,kBACxDgkF,EAAWvjH,EAAI2+C,EACf4kE,EAAWtjH,EAAI4iH,EAAe5iH,EAAI4iH,EAAetiH,OAAShF,EAAMk3F,gBAChE8wB,EAAWprG,aAAc,EACzBve,KAAKwgB,SAAUmpG,GAGf3pH,KAAK6pH,GAAmB,SAAEj0G,GACzB3O,EAAK6iH,WAAYl0G,IAElB5V,KAAK+pH,GAAiB,SAAEn0G,GACvB3O,EAAK+iH,SAAUp0G,IAEhB+zG,EAAWh5G,GAAImH,EAAiB0B,MAAM,SAAE5D,GACvC3O,EAAKgjH,WAAYr0G,MAIlB,IAAMs0G,EAA0BlqH,KAAKmqH,GACpC,IAAI31F,SAAQ7yB,EAAMyoH,+BACnBF,EAAwB9jH,EAAInB,EAAQ2c,UACpCsoG,EAAwB7jH,EAAIsjH,EAAWtjH,EAAI1E,EAAMi3F,gBAAkBj3F,EAAMk3F,gBACzEqxB,EAAwB3rG,aAAc,EACtCve,KAAKwgB,SAAU0pG,GAEf,IAAMG,EAAc,IAAI71F,SAAQ7yB,EAAM2oH,mBACtCD,EAAY37G,KAAO1O,KAAKuoH,GAAKrmH,MAC7BmoH,EAAY9rG,aAAc,EAC1B2rG,EAAwB1pG,SAAU6pG,GAGlCrqH,KAAKuqH,GAAoB,SAAE30G,GAC1B3O,EAAKujH,YAAa50G,IAEnB5V,KAAKyqH,GAAkB,SAAE70G,GACxB3O,EAAKyjH,UAAW90G,IAEjBy0G,EAAY15G,GAAImH,EAAiB0B,MAAM,SAAE5D,GACxC3O,EAAK0jH,YAAa/0G,MAInB,IAAMg1G,EAAoB5qH,KAAK6qH,GAAqB,IAAIr2F,SAAQ7yB,EAAMmpH,yBACtEF,EAAkBxkH,EAAI2+C,EACtB6lE,EAAkBvkH,EAAIw+C,EACtB+lE,EAAkBvQ,OAAOj0G,EAAI,GAC7BwkH,EAAkBvQ,OAAOh0G,EAAI,GAC7BukH,EAAkBl8G,KAAO/M,EAAMopH,sBAC/BH,EAAkBxoH,MAAQT,EAAMg3F,sBAChCiyB,EAAkBrsG,aAAc,EAChCve,KAAKwgB,SAAUoqG,GAEf,IAAMI,EAAqBhrH,KAAKirH,GAAsB,IAAIz2F,SAAQ7yB,EAAMupH,0BACxEF,EAAmB5kH,EAAIyiH,EACvBmC,EAAmB3kH,EAAqC,GAAjC6jH,EAAwBvjH,OAC/CqkH,EAAmBt8G,KAAO/M,EAAMwpH,uBAChCH,EAAmB5oH,MAAQT,EAAMypH,uBACjCJ,EAAmB3Q,OAAO/zG,IAAK,GAAK,IACpC0kH,EAAmBzsG,aAAc,EACjC2rG,EAAwB1pG,SAAUwqG,GAElC,IAAMK,EAAoBrrH,KAAKsrH,GAAqB,IAAI92F,SAAQ7yB,EAAMq3F,yBACtEqyB,EAAkBjlH,EAAI,EACtBilH,EAAkBhlH,EAAwB,GAApBsjH,EAAWhjH,OACjC0kH,EAAkB38G,KAAO/M,EAAMs3F,sBAC/BoyB,EAAkBjpH,MAAQT,EAAM4pH,sBAChCF,EAAkBhR,OAAO/zG,IAAK,GAAK,IACnC+kH,EAAkB9sG,aAAc,EAChCorG,EAAWnpG,SAAU6qG,GAGrBrrH,KAAKwrH,GAAsB,GAC3B,IAAMC,EAAqBzrH,KAAKwrH,GAC1BE,EAAmB/pH,EAAMgqH,sBACzBC,EAAmBjqH,EAAMu3F,sBACzB2yB,EAAoBlqH,EAAMmqH,uBAC1BC,EAA0C,GAAnBH,EACvBI,EAA4C,GAApBH,EACxBI,EAAoBtqH,EAAMuqH,uBAC1BC,EAAejC,EAAwB7jH,EAAI1E,EAAMyqH,iBAAmBzqH,EAAMw3F,kBAC1EkzB,EAA4B1qH,EAAM2qH,+BACN,MAA9BnE,EAAaoE,gBAChBpE,EAAaoE,cAAgB,IAAItE,GAChCtmH,EAAM6qH,aAAanzD,MAAO,GAC1BqyD,IAGF,IAAMxD,EAASloH,KAAKsoH,GAAUH,EAAaoE,cAC3CrE,EAAOv3G,GAAI,UAAU,WACpB1J,EAAKwlH,oBAYN,IAVA,IAAMC,EAAgB,SAAE92G,GACvB,IAAM+2G,EAAqB/2G,EAAEg3G,cAC7B,GAAID,aAA8B9kG,YAAY,CAC7C,IAAMglG,EAASF,EAAmBlsG,SAAU,GACxCosG,aAAkBr4F,WACrBvtB,EAAKuhH,YAAaqE,EAAOn+G,MACzBzH,EAAKwhH,YAAaoE,EAAOzqH,UAInBb,EAAI,EAAGA,EAAImqH,IAAoBnqH,EAAI,CAC3C,IAAM6E,EAAI2+C,EAAcxjD,GAAKqqH,EAAmBK,GAE1CU,EAAqB,IAAIn4F,SAAQ63F,GACvCM,EAAmBvmH,EAAIA,EAAI2lH,EAC3BY,EAAmBtmH,EAAI8lH,EAAeH,EACtCW,EAAmBtS,OAAOj0G,EAAI,GAC9BumH,EAAmBtS,OAAOh0G,EAAI,GAC9BsmH,EAAmBt3F,YAAa,EAChCs3F,EAAmBpuG,aAAc,EACjCzG,EAAiBiC,QAAS4yG,EAAoBD,GAC9C1sH,KAAKwgB,SAAUmsG,GAEf,IAAME,EAAS,IAAIr4F,SAAQnI,UAAQyzC,OAC7BgtD,EAAsB5E,EAAOpsG,IAAKva,GACb,MAAvBurH,GACHD,EAAOn+G,KAAOo+G,EAAoB5qH,MAClC2qH,EAAOzqH,MAAQ0qH,EAAoB1qH,QAEnCyqH,EAAOn+G,KAAO,SACdm+G,EAAOzqH,MAAQ,GAEhByqH,EAAO3pH,MAAQ0oH,EACfiB,EAAOlmH,OAASklH,EAChBgB,EAAOxS,OAAOj0G,EAAI,GAClBymH,EAAOxS,OAAOh0G,EAAI,GAClBwmH,EAAOtuG,aAAc,EACrBouG,EAAmBnsG,SAAUqsG,GAC7BpB,EAAmBjrH,KAAMqsH,GAI1B,IAAME,EAAcprH,EAAMqrH,iBACpBC,EAASd,EAAeN,EAAoBkB,EAC5CG,EAAyB,GAAZrE,EACbsE,EAAqBntH,KAAKotH,GAAsB,IAAI5F,GAAmB,CAC5ExmH,OAAQhB,KACRoG,EAAG2+C,EACH1+C,EAAG4mH,EACH/pH,MAAOgqH,EACP/F,MAAO,CACNjkH,MAAOvB,EAAM0rH,qBACbrkG,KAAM,CACLyF,MAAO,MAGTorB,MAAO,CACN56B,OAAQ,EACR+J,KAAM,CACLyF,MAAO,UAER9d,GAAI,CACHkpC,MAAO,SAAEhjC,GACR,IAAM3U,EAAQi6C,GAAQmxE,SAAUz2G,GACnB,MAAT3U,GACH+E,EAAKuhH,YAAatmH,QAOjBqrH,EAAqBvtH,KAAKwtH,GAAsB,IAAIlG,GAAmB,CAC5EtmH,OAAQhB,KACRoG,EAAG2+C,EACH1+C,EAAG4mH,EAASE,EAAmBxmH,OAASomH,EACxC7pH,MAAOgqH,EACP/F,MAAO,CACNjkH,MAAOvB,EAAM0rH,qBACbrkG,KAAM,CACLyF,MAAO,MAGTorB,MAAO,CACN56B,OAAQ,EACR+J,KAAM,CACLyF,MAAO,GAER7kB,IAAK,EACLE,IAAK,EACL6G,GAAI,CACHkpC,MAAO,SAAEprB,GACRxnB,EAAKwhH,YAAah6F,QAOhBg/F,EAAc9rH,EAAM23F,iBACpBo0B,EAAe/rH,EAAMgsH,kBACrBC,EAAU7oE,EAA0B,IAAZ8jE,EAAmB4E,EAC3CI,EAAUZ,EAAgG,IAAtFE,EAAmBxmH,OAASomH,EAAcQ,EAAmB5mH,OAAS+mH,GAE1FI,EAAkC9tH,KAAK+tH,GAC5C,IAAIv5F,SAAQ7yB,EAAMqsH,gCACnBF,EAAgC1nH,EAAIwnH,EACpCE,EAAgCznH,EAAIwnH,EACpCC,EAAgC5qH,MAAQuqH,EACxCK,EAAgCnnH,OAAS+mH,EACzCI,EAAgCvvG,aAAc,EAC9Cve,KAAKwgB,SAAUstG,GAEf,IAAMv6G,EAAUvT,KAAKs+C,GACf2vE,EAAsBjuH,KAAKkuH,GAAuB,IAAI15F,SAAQnI,UAAQyzC,OAC5EmuD,EAAoB7nH,EAAIwnH,EACxBK,EAAoB5nH,EAAIwnH,EACxBI,EAAoBv/G,KAAO6E,EAAQrR,MACnC+rH,EAAoB7rH,MAAQmR,EAAQnR,MACpC6rH,EAAoB/qH,MAAQuqH,EAC5BQ,EAAoBtnH,OAAS+mH,EAC7BO,EAAoB1vG,aAAc,EAClC0vG,EAAoB54F,YAAa,EACjCvd,EAAiBiC,QAASk0G,GAAqB,WAC9ChnH,EAAKuhH,YAAaj1G,EAAQrR,OAC1B+E,EAAKwhH,YAAal1G,EAAQnR,UAE3BpC,KAAKwgB,SAAUytG,GAEf,IAAME,EAA8BnuH,KAAKouH,GACxC,IAAI55F,SAAQ7yB,EAAMqsH,gCACnBG,EAA4B/nH,EAAIwnH,EAAUH,EAC1CU,EAA4B9nH,EAAIwnH,EAChCM,EAA4BjrH,MAAQuqH,EACpCU,EAA4BxnH,OAAS+mH,EACrCS,EAA4B5vG,aAAc,EAC1Cve,KAAKwgB,SAAU2tG,GAEf,IAAME,EAAkBruH,KAAKsuH,GAAmB,IAAI95F,SAAQnI,UAAQyzC,OACpEuuD,EAAgBjoH,EAAIwnH,EAAUH,EAC9BY,EAAgBhoH,EAAIwnH,EACpBQ,EAAgB3/G,KAAO1O,KAAKuoH,GAAKrmH,MACjCmsH,EAAgBjsH,MAAQpC,KAAKuoH,GAAKnmH,MAClCisH,EAAgBnrH,MAAQuqH,EACxBY,EAAgB1nH,OAAS+mH,EACzBW,EAAgB9vG,aAAc,EAC9Bve,KAAKwgB,SAAU6tG,GAGA,MAAXzsH,GAAoC,MAAjBA,EAAQsB,QAC9BlD,KAAKkD,MAAQ6hD,EAAc8jE,EAAY7jE,GAIzB,MAAXpjD,GAAqC,MAAlBA,EAAQ+E,SAC9B3G,KAAK2G,OAASsmH,EAASE,EAAmBxmH,OAASomH,EAAcQ,EAAmB5mH,OAASm+C,IAIrFqjE,uBAAV,SAAsBvyG,GACrB5V,KAAKuuH,WAAY34G,EAAEhO,KAAKqR,QAExB,IAAM/X,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMH,EAAQG,EAAMH,MACpBA,EAAM4P,GAAImH,EAAiBgD,KAAM9a,KAAKspH,IACtCvoH,EAAM4P,GAAImH,EAAiBiB,GAAI/Y,KAAKwpH,MAI5BrB,uBAAV,SAAsBvyG,GACrB5V,KAAKuuH,WAAY34G,EAAEhO,KAAKqR,SAGfkvG,qBAAV,SAAoBvyG,GACnB,IAAM1U,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMH,EAAQG,EAAMH,MACpBA,EAAM6X,IAAKd,EAAiBgD,KAAM9a,KAAKspH,IACvCvoH,EAAM6X,IAAKd,EAAiBiB,GAAI/Y,KAAKwpH,MAI7BrB,sBAAV,SAAqB5oH,EAAWs9C,EAAYD,EAAYjmC,GACvD,OAAOhN,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAU,IAALizC,EAAWD,GAAQr9C,GAAKoX,EAAU,QAAaA,GAGzEwxG,wBAAV,SAAuBv7G,EAAcsnD,EAAYC,EAAYjxD,EAAeyD,GAC3E,IAAM6nH,EAAa,GAARtrH,EACLurH,EAAK9kH,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAKsqD,EAAKs6D,IAAQ,EAAIr6D,EAAKxtD,GAAW6nH,GAAMtrH,IACxEwrH,EAAK/kH,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGuqD,EAAKxtD,IACpCi2C,EAAKjzC,KAAKwP,IAAK,GAAMu1G,EAAMD,GAC3B5xE,EAAK,EAAID,EAAK8xE,EAIpB,OAHU1uH,KAAK2uH,UAAW/hH,EAAMiwC,EAAID,EAAI,IAC9B58C,KAAK2uH,UAAW/hH,EAAMiwC,EAAID,EAAI,GAC9B58C,KAAK2uH,UAAW/hH,EAAMiwC,EAAID,EAAI,IAI/BurE,uBAAV,SAAsBlvG,GACrB,IAAMlT,EAAQ/F,KAAK4oH,GACb3jH,EAAUjF,KAAKyd,GACfsnC,EAAc9/C,EAAQ2c,UACtBijC,EAAa5/C,EAAQ6c,SACrBngB,EAAQ3B,KAAK2B,MACbknH,EAAYlnH,EAAMmnH,eAClBC,EAAapnH,EAAMqnH,gBACzBhpH,KAAK4tC,QAAS30B,OAAQ1W,EAAWwD,GACjC,IAAMK,EAAIuD,KAAKG,IAAK,EAAGH,KAAKC,IAAKi/G,EAAW9iH,EAAMK,EAAI2+C,IAChD1+C,EAAIsD,KAAKG,IAAK,EAAGH,KAAKC,IAAKm/G,EAAYhjH,EAAMM,EAAIw+C,IAC7B7kD,KAAK6qH,GACbl2G,SAASrO,IAAKy+C,EAAc3+C,EAAGy+C,EAAax+C,GAC9DrG,KAAK4uH,WAAY5uH,KAAK6uH,YACrB7uH,KAAKsU,GAAOlO,EAAGC,EAAGwiH,EAAWE,KAGrBZ,4BAAV,SAA2BjmH,GAC1BlC,KAAKkuH,GAAqBx/G,KAAO1O,KAAKs+C,GAASp8C,MAAQA,GAG9CimH,4BAAV,SAA2B/lH,GAC1BpC,KAAKkuH,GAAqB9rH,MAAQpC,KAAKs+C,GAASl8C,MAAQA,GAG/C+lH,wBAAV,SAAuBjmH,GACtB,IAAMP,EAAQ3B,KAAK2B,MACbknH,EAAYlnH,EAAMmnH,eAClBC,EAAapnH,EAAMqnH,gBACnB/jH,EAAUjF,KAAKyd,GAGfqxG,EAAM7zE,GAAQ8zE,QAAS7sH,GAC7BlC,KAAKopH,GAAY16G,KAAO1O,KAAKsU,GAAQ2mC,GAAQ+zE,MAAOF,EAAK,GAAK,IAAK,KAGzC9uH,KAAKsrH,GACbllH,EAAIuD,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGklH,EAAK,GAAM,MAAUjG,EAGrE,IAAMoG,EAAKtlH,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGklH,EAAK,GAAM,MAC1CI,EAAKvlH,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAG,EAAIklH,EAAK,GAAM,MAC9ClE,EAAoB5qH,KAAK6qH,GAC/BD,EAAkBl8G,KAAQwgH,EAAK,IAAOvtH,EAAMopH,sBAAwB,SACpEH,EAAkBj2G,SAASrO,IAC1BrB,EAAQ2c,UAAYqtG,EAAKpG,EACzB5jH,EAAQ6c,SAAWotG,EAAKnG,GAIzB/oH,KAAK4uH,WAAY1sH,IAGRimH,uBAAV,SAAsBjmH,GACrB,IAAMhB,EAAQb,EAAcsZ,SAAU3Z,MAClCkB,GACHA,EAAMy1F,iBAEP32F,KAAKsuH,GAAiB5/G,KAAO1O,KAAKuoH,GAAKrmH,MAAQA,EAC/ClC,KAAKotH,GAAoBvzE,MAAMprB,MAAQ0tB,GAAQoV,OAAQrvD,GACvDlC,KAAK4X,KAAM,iBAAkB1V,EAAOlC,MAChCkB,IACHA,EAAM01F,cACN11F,EAAMI,WAIE6mH,uBAAV,SAAsBvyG,GACrB5V,KAAKmvH,WAAYv5G,EAAEhO,KAAKqR,QAExB,IAAM/X,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMH,EAAQG,EAAMH,MACpBA,EAAM4P,GAAImH,EAAiBgD,KAAM9a,KAAK6pH,IACtC9oH,EAAM4P,GAAImH,EAAiBiB,GAAI/Y,KAAK+pH,MAI5B5B,uBAAV,SAAsBvyG,GACrB5V,KAAKmvH,WAAYv5G,EAAEhO,KAAKqR,SAGfkvG,qBAAV,SAAoBvyG,GACnB,IAAM1U,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMH,EAAQG,EAAMH,MACpBA,EAAM6X,IAAKd,EAAiBgD,KAAM9a,KAAK6pH,IACvC9oH,EAAM6X,IAAKd,EAAiBiB,GAAI/Y,KAAK+pH,MAI7B5B,sBAAV,SAAqB99G,EAAWsM,GAC/B,OAAOhN,KAAKG,IAAK,EAAGH,KAAKC,IAAK,IAAS,EAAJS,EAAQ,OAAWsM,GAG7CwxG,wBAAV,SAAuB99G,GACtB,OAAIA,GAAK,KACD,SAAWrK,KAAKovH,UAAW/kH,EAAG,GAC3BA,GAAK,MACfA,EAAI,KAAQA,EACL,MAAWrK,KAAKovH,UAAW/kH,EAAG,KAC3BA,GAAK,IACfA,GAAK,KACE,MAAWrK,KAAKovH,UAAW/kH,EAAG,IAC3BA,EAAI,MACdA,EAAI,KAAQA,EACL,IAAWrK,KAAKovH,UAAW/kH,EAAG,IAC3BA,EAAI,MACdA,GAAK,KACE,IAAWrK,KAAKovH,UAAW/kH,EAAG,MAErCA,EAAI,KAAQA,EACL,SAAWrK,KAAKovH,UAAW/kH,EAAG,KAI7B89G,uBAAV,SAAsBlvG,GACrB,IAAMlT,EAAQ/F,KAAK4oH,GACb3jH,EAAUjF,KAAKyd,GAEforG,EADQ7oH,KAAK2B,MACKmnH,eACxB9oH,KAAK4tC,QAAS30B,OAAQ1W,EAAWwD,GACjC,IAAMK,EAAIuD,KAAKG,IAAK,EAAGH,KAAKC,IAAKi/G,EAAW9iH,EAAMK,EAAInB,EAAQ2c,YACpC5hB,KAAKsrH,GACbllH,EAAIA,EACtBpG,KAAKqvH,YAAarvH,KAAKsvH,YAAalpH,EAAIyiH,KAG/BV,yBAAV,SAAwB59G,GACvB,IACMs+G,EADQ7oH,KAAK2B,MACKmnH,eACE9oH,KAAKsrH,GACbllH,EAAIuD,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGW,EAAI,MAAUs+G,EAC9D7oH,KAAKqvH,YAAap0E,GAAQ+zE,MAAOzkH,EAAG,IAAK,OAGhC49G,wBAAV,SAAuBjmH,GACtBlC,KAAKopH,GAAY16G,KAAO1O,KAAKsU,GAAQpS,EAErC,IAAM0oH,EAAoB5qH,KAAK6qH,GACzBlpH,EAAQ3B,KAAK2B,MACbknH,EAAYlnH,EAAMmnH,eAClBC,EAAapnH,EAAMqnH,gBACnB/jH,EAAUjF,KAAKyd,GACrBzd,KAAK4uH,WAAY5uH,KAAK6uH,YACrB7uH,KAAKsU,GACLs2G,EAAkBxkH,EAAInB,EAAQ2c,UAC9BgpG,EAAkBvkH,EAAIpB,EAAQ6c,SAC9B+mG,EACAE,KAIQZ,wBAAV,SAAuBvyG,GACtB5V,KAAKuvH,YAAa35G,EAAEhO,KAAKqR,QAEzB,IAAM/X,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMH,EAAQG,EAAMH,MACpBA,EAAM4P,GAAImH,EAAiBgD,KAAM9a,KAAKuqH,IACtCxpH,EAAM4P,GAAImH,EAAiBiB,GAAI/Y,KAAKyqH,MAI5BtC,wBAAV,SAAuBvyG,GACtB5V,KAAKuvH,YAAa35G,EAAEhO,KAAKqR,SAGhBkvG,sBAAV,SAAqBvyG,GACpB,IAAM1U,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMH,EAAQG,EAAMH,MACpBA,EAAM6X,IAAKd,EAAiBgD,KAAM9a,KAAKuqH,IACvCxpH,EAAM6X,IAAKd,EAAiBiB,GAAI/Y,KAAKyqH,MAI7BtC,wBAAV,SAAuBlvG,GACtB,IAAMlT,EAAQ/F,KAAK4oH,GACb3jH,EAAUjF,KAAKyd,GAEforG,EADQ7oH,KAAK2B,MACKmnH,eACxB9oH,KAAK4tC,QAAS30B,OAAQ1W,EAAWwD,GACjC,IAAMK,EAAIuD,KAAKG,IAAK,EAAGH,KAAKC,IAAKi/G,EAAW9iH,EAAMK,EAAInB,EAAQ2c,YAC9D5hB,KAAKirH,GAAoB7kH,EAAIA,EAC7BpG,KAAKwvH,WAAYppH,EAAIyiH,IAGZV,wBAAV,SAAuB/lH,GACtB,IACMymH,EADQ7oH,KAAK2B,MACKmnH,eACxB9oH,KAAKirH,GAAoB7kH,EAAIuD,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGxH,IAAYymH,EACnE7oH,KAAKwvH,WAAYptH,IAGR+lH,uBAAV,SAAsB/lH,GACrB,IAAMlB,EAAQb,EAAcsZ,SAAU3Z,MAClCkB,GACHA,EAAMy1F,iBAEP32F,KAAKsuH,GAAiBlsH,MAAQpC,KAAKuoH,GAAKnmH,MAAQA,EAChDpC,KAAKwtH,GAAoB3zE,MAAMprB,MAAQ4tB,OAAQj6C,EAAMykC,QAAS,IAC9D7mC,KAAK4X,KAAM,iBAAkBxV,EAAOpC,MAChCkB,IACHA,EAAM01F,cACN11F,EAAMI,WAIE6mH,2BAAV,WAGC,IAFA,IAAMsH,EAAUzvH,KAAKwrH,GACftD,EAASloH,KAAKsoH,GACX/mH,EAAI,EAAGC,EAAOiuH,EAAQ/uH,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAMsrH,EAAS4C,EAASluH,GAClBs0F,EAAgBqyB,EAAOpsG,IAAKva,GACb,MAAjBs0F,GACHg3B,EAAOn+G,KAAOmnF,EAAc3zF,MAC5B2qH,EAAOzqH,MAAQyzF,EAAczzF,QAE7ByqH,EAAOn+G,KAAO,SACdm+G,EAAOzqH,MAAQ,KAKR+lH,oBAAV,WACC,MAAO,gBA9mBSA,gBAA2C,QADnDxnG,kBCRT,WACC+uG,EACAhmH,EAAwBd,EAAmBo3D,EAAsBr3D,EACjEwO,EAAc3L,EAAoBD,GAHnC,MAKCzE,YAAO0E,EAAUD,gBAEjBtE,EAAKsX,aAAc,EACnBtX,EAAKyX,qBAAsB,EAC3BzX,EAAKmZ,OAAS,UAEdnZ,EAAK0oH,GAAkBD,EACvBzoH,EAAKU,EAAY+B,EACjBzC,EAAKa,KAAOc,EACZ3B,EAAK2oH,GAAU5vD,EACf/4D,EAAKgB,EAAWU,EAChB1B,EAAK4oH,IAAiB,EACtB5oH,EAAKgzF,GAAa,CAAE,EAAG,EAAG,GAC1BhzF,EAAKs6E,GAAa,IAAI35D,QACtB3gB,EAAK6oH,GAAS34G,EAEd5L,EAAOq2F,SAASmuB,SAASp/G,GAAI,UAAU,WACtC1J,EAAK3F,SACLjB,EAAciB,OAAQ2F,MAEvBA,EAAK3F,WAoOP,OA1QkDxB,OAyCjDkwH,yBAAA,SAAcpvH,GACb,IAAMuW,EAAQnX,KAAK8vH,GACnB,OAAI,GAAKlvH,GAASA,EAAQuW,EAAMzW,OACxByW,EAAOvW,GAAQwyE,KAEhB,MAGR48C,yBAAA,SAAcpvH,EAAewF,EAAWC,EAAWnD,EAAeyD,GACjE,IAAMwQ,EAAQnX,KAAK8vH,GACnB,GAAI,GAAKlvH,GAASA,EAAQuW,EAAMzW,OAAS,CACxC,IAAM0yE,EAAOj8D,EAAOvW,GAAQwyE,KAC5BA,EAAKhtE,EAAIA,EACTgtE,EAAK/sE,EAAIA,EACT+sE,EAAKlwE,MAAQA,EACbkwE,EAAKzsE,OAASA,IAIhBqpH,oBAAA,SAASpvH,GACR,IAAMuW,EAAQnX,KAAK8vH,GACnB,OAAI,GAAKlvH,GAASA,EAAQuW,EAAMzW,OACxByW,EAAOvW,GAAQgH,KAEhB,MAGRooH,oBAAA,SAASpvH,EAAegH,GACvB,IAAMuP,EAAQnX,KAAK8vH,GACf,GAAKlvH,GAASA,EAAQuW,EAAMzW,SAC/ByW,EAAOvW,GAAQgH,KAAOA,IAIxBooH,4BAAA,WACC,OAAOhwH,KAAK6vH,IAGLG,sBAAR,SAAmBvlD,EAAYzK,EAAsB46B,EAAex4F,GACnE49D,EAAQyK,EAAK,GAAMmwB,EAAK,GACxB56B,EAAQyK,EAAK,GAAMmwB,EAAK,GACxB56B,EAAQyK,EAAK,GAAMmwB,EAAK,GACxB56B,EAAQyK,EAAK,GAAMroE,EACnB49D,EAAQyK,EAAK,GAAMmwB,EAAK,GACxB56B,EAAQyK,EAAK,GAAMmwB,EAAK,GACxB56B,EAAQyK,EAAK,GAAMmwB,EAAK,GACxB56B,EAAQyK,EAAK,GAAMroE,GAGZ4tH,yBAAR,SAAsBvlD,EAAYzK,EAAsB99D,EAAeE,GACtE,IAAMw4F,EAAMt/D,QAAM++D,QAASn4F,EAAOlC,KAAKi6F,IACvCj6F,KAAKiwH,UAAWxlD,EAAIzK,EAAQ46B,EAAKx4F,IAG1B4tH,2BAAR,SAAwBvlD,EAAYzK,GACnC,IAAM46B,EAAM56F,KAAKi6F,GACjBW,EAAK,GAAM,EACXA,EAAK,GAAM,EACXA,EAAK,GAAM,EACX56F,KAAKiwH,UAAWxlD,EAAIzK,EAAQ46B,EAAK,IAG1Bo1B,2BAAR,SAAwBvlD,EAAY7iE,EAAoChH,EAAeo/D,GACtF,IAAMj6D,EAAQ6B,EAAKspD,OAAQtwD,GACd,MAATmF,EACH/F,KAAKkwH,aAAczlD,EAAIzK,EAAQj6D,EAAM7D,MAAO6D,EAAM3D,OAElDpC,KAAKmwH,eAAgB1lD,EAAIzK,IAIjBgwD,wBAAV,SAAuB5nH,EAAYsB,EAAwBiL,EAAkBy+D,GAC5E,IAAM/sE,EAAI+sE,EAAK/sE,EAAI+sE,EAAKzsE,OAASgO,EACjCjL,EAAUtB,EAAK,GAAMgrE,EAAKhtE,EAC1BsD,EAAUtB,EAAK,GAAM/B,EACrBqD,EAAUtB,EAAK,GAAMgrE,EAAKhtE,EAAIgtE,EAAKlwE,MACnCwG,EAAUtB,EAAK,GAAM/B,GAGZ2pH,mBAAV,SAAkB5nH,EAAYQ,EAAmB+L,EAAkBzK,GAClE,IAAM5B,EAAK4B,EAAW5B,IAAM4B,EAAWH,GAAKG,EAAW5B,IAAMqM,EACvDnM,EAAK0B,EAAW1B,IAAM0B,EAAWD,GAAKC,EAAW1B,IAAMmM,EACvDpM,EAAK2B,EAAW3B,IAAM2B,EAAWL,GAAKK,EAAW3B,IAAMoM,EACvDlM,EAAKyB,EAAWzB,IAAMyB,EAAWF,GAAKE,EAAWzB,IAAMkM,EAC7D/L,EAAKR,EAAK,GAAME,EAChBM,EAAKR,EAAK,GAAMI,EAChBI,EAAKR,EAAK,GAAMG,EAChBK,EAAKR,EAAK,GAAMK,GAGTunH,uBAAR,SAAoBtnH,EAAYN,EAAY4M,EAAcrM,GACzD,IAAK,IAAIpH,EAAI,EAAGA,EAAIyT,IAAQzT,EAC3BoH,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EAEzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EACzBO,EAASD,EAAK,GAAMN,EAAK,EAEzBM,GAAM,EACNN,GAAM,EAEP,OAAOO,GAGEqnH,6BAAV,WACC,IAAM58C,EAAOpzE,KAAK8vH,GAAQ,GAAI18C,KACxBnsD,EAASjnB,KAAKknB,QACdC,EAAOnnB,KAAKuhF,GAClBp6D,EAAK7gB,IAAK8sE,EAAKhtE,EAAGgtE,EAAK/sE,GACvB4gB,EAAOK,SAAUH,GACjBA,EAAK7gB,IAAK8sE,EAAKhtE,EAAIgtE,EAAKlwE,MAAOkwE,EAAK/sE,EAAI+sE,EAAKzsE,QAC7CsgB,EAAOK,SAAUH,IAGlB6oG,mBAAA,WACC,IAAMtmH,EAAW1J,KAAK2H,EAChBiB,EAAM5I,KAAK8H,KACXk4D,EAAShgE,KAAK4vH,GACdjnH,EAAU3I,KAAKiI,EAEfvB,EAAU1G,KAAKuL,OAAOq2F,SAASmuB,SACjB,MAAhBrpH,EAAQoB,MACXpB,EAAQ8xB,YAUT,IARA,IAAMtuB,EAAyBxD,EAAQoB,KAEnCM,EAAK,EACL8mH,EAAK,EACLzkD,EAAK,EACL/hE,EAAK,EAEHyO,EAAQnX,KAAK8vH,GACVvuH,EAAI,EAAGC,EAAO2V,EAAMzW,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAMqG,EAAOuP,EAAO5V,GAAIqG,KAClBwrE,EAAOj8D,EAAO5V,GAAI6xE,KACxB,GAAY,MAARxrE,EACH5H,KAAKowH,YAAahoH,EAAIsB,EAAU,EAAG0pE,GACnCpzE,KAAKqwH,OAAQjoH,EAAIQ,EAAK,EAAGsB,GACzBlK,KAAKmwH,eAAgB1lD,EAAIzK,GACzBhgE,KAAKowH,YAAahoH,EAAK,EAAGsB,EAAU,EAAG0pE,GACvCpzE,KAAKqwH,OAAQjoH,EAAIQ,EAAK,EAAGsB,GACzBlK,KAAKmwH,eAAgB1lD,EAAK,EAAGzK,GAC7BhgE,KAAKswH,WAAY5nH,EAAIwmH,EAAI,EAAGvmH,GAC5BP,GAAM,EACNqiE,GAAM,GACNykD,GAAM,EACNxmH,GAAM,MACA,CACN1I,KAAKowH,YAAahoH,EAAIsB,EAAU,EAAG0pE,GACnCpzE,KAAKqwH,OAAQjoH,EAAIQ,EAAK,EAAGsB,GACzBlK,KAAKuwH,eAAgB9lD,EAAI7iE,EAAM,EAAGo4D,GAClC53D,GAAM,EACNqiE,GAAM,EAEN,IADA,IAAM+lD,EAAY5oH,EAAKspD,OAAOxwD,OACrB0R,EAAI,EAAGC,EAAO1I,KAAKC,IAAK4mH,EAAWxwH,KAAK2vH,IAAmBv9G,EAAIC,IAAQD,EAAI,CACnF,IAAMrM,EAAQ6B,EAAKspD,OAAQ9+C,GAC3BpS,KAAKowH,YAAahoH,EAAIsB,EAAU3D,EAAM4O,SAAUy+D,GAChDpzE,KAAKqwH,OAAQjoH,EAAIQ,EAAK7C,EAAM4O,SAAUzK,GACtClK,KAAKkwH,aAAczlD,EAAIzK,EAAQj6D,EAAM7D,MAAO6D,EAAM3D,OAClDgG,GAAM,EACNqiE,GAAM,EAEPzqE,KAAKowH,YAAahoH,EAAIsB,EAAU,EAAG0pE,GACnCpzE,KAAKqwH,OAAQjoH,EAAIQ,EAAK,EAAGsB,GACzBlK,KAAKuwH,eAAgB9lD,EAAI7iE,EAAM4oH,EAAY,EAAGxwD,GAC9C53D,GAAM,EACNqiE,GAAM,EAENzqE,KAAKswH,WAAY5nH,EAAIwmH,EAAIsB,EAAY,EAAG7nH,GACxCD,GAAwB,GAAjB8nH,EAAY,GACnBtB,GAAwB,GAAjBsB,EAAY,IAIrBxwH,KAAKgV,KAAOtM,EAEZ,IAAM8C,EAAWxL,KAAKwL,SACtBA,EAAS9D,UAAW,aAAcpG,SAClCkK,EAAS9D,UAAW,OAAQpG,SAC5BkK,EAAS9D,UAAW,UAAWpG,SAC/BkK,EAASxD,WAAW1G,UAGrB0uH,0BAAA,SAAejqH,GAGd,IAFA,IAAM0qH,EAAQzwH,KAAK4tC,QAAS7nC,OAAOxD,EAAWvC,KAAKuhF,IAC7CpqE,EAAQnX,KAAK8vH,GACVvuH,EAAI,EAAGC,EAAO2V,EAAMzW,OAAQa,EAAIC,IAAQD,EAEhD,GADa4V,EAAO5V,GAAI6xE,KACfp6D,SAAUy3G,EAAMrqH,EAAGqqH,EAAMpqH,GAEjC,OADArG,KAAK6vH,GAAgBtuH,GACd,EAGT,OAAO,GAGDyuH,OAAP,SAAah7G,EAAc06G,EAAwBhpH,gBAAAA,EAAmB2lB,UAAQyzC,OAO7E,IANA,IAAMp2D,EAAW,IAAI3C,aAAciO,GAAS06G,EAAiB,GAAM,EAAI,GACjE9mH,EAAM,IAAI7B,aAAciO,GAAS06G,EAAiB,GAAM,EAAI,GAC5D1vD,EAAS,IAAIj5D,aAAciO,GAAS06G,EAAiB,GAAM,EAAI,GAC/D/mH,EAAU,IAAI3B,YAAagO,GAAS06G,EAAiB,GAAM,GAE3Dv4G,EAAe,GACZ5V,EAAI,EAAGA,EAAIyT,IAAQzT,EAC3B4V,EAAM3W,KAAK,CACVoH,KAAM,KACNwrE,KAAM,IAAIzgD,cAWZ,OAAO,IAAIq9F,EACVN,EACAhmH,EAAUd,EAAKo3D,EAAQr3D,EACvBwO,GAVgB,IAAI8pF,YACnBC,SAAU,IAAIL,SAAQl4F,GAAS,GAAO,IACtCw4F,aAAc,YAAa,IAAIN,SAAQn3F,GAAU,GAAO,GAAS,GACjEy3F,aAAc,MAAO,IAAIN,SAAQj4F,GAAK,GAAO,GAAS,GACtDu4F,aAAc,SAAU,IAAIN,SAAQ7gC,GAAQ,GAAO,GAAS,GAC/C+iC,SAAO5wF,KArSF,oYAmBE,qYAkRsC,CAAE49G,SAAUrpH,SAlQxBiF,QCpC5C+kH,GAAU,SAAEjnG,EAAiClqB,GAClD,GAAIkqB,EAAEq6B,YAAcvkD,EAAEukD,UACrB,OAAO,EAGR,IAAM6sE,EAAKlnG,EAAEynC,OACP0/D,EAAKrxH,EAAE2xD,OACb,GAAIy/D,EAAGjwH,SAAWkwH,EAAGlwH,OACpB,OAAO,EAGR,IAAK,IAAI0R,EAAI,EAAGC,EAAOs+G,EAAGjwH,OAAQ0R,EAAIC,IAAQD,EAAI,CACjD,IAAMy+G,EAAMF,EAAIv+G,GACV0+G,EAAMF,EAAIx+G,GAChB,GAAIy+G,EAAI3uH,QAAU4uH,EAAI5uH,OAAS2uH,EAAIzuH,QAAU0uH,EAAI1uH,OAASyuH,EAAIl8G,WAAam8G,EAAIn8G,SAC9E,OAAO,EAIT,OAAO,kBAOP,WAAaozG,EAAyCv1E,GAAtD,MACC1rC,0BAEAG,EAAK+gH,GAAWD,EAChB9gH,EAAKqxD,GAAY9lB,IA2DnB,OAnEgD1yC,OAW/CixH,wBAAA,WACC,OAAO/wH,KAAKs4D,IAGby4D,gBAAA,SAAKnwH,GACJ,IAAMmnH,EAAU/nH,KAAKgoH,GACrB,OAAI,GAAKpnH,GAASA,EAAQmnH,EAAQrnH,OAC1BqnH,EAASA,EAAQrnH,OAAS,EAAIE,GAE/B,MAGRmwH,gBAAA,SAAKnwH,EAAeswD,GACnB,IAAM62D,EAAU/nH,KAAKgoH,GACrB,GAAI,GAAKpnH,GAASA,EAAQmnH,EAAQrnH,OAAS,CAC1C,IAAM8B,EAASulH,EAASA,EAAQrnH,OAAS,EAAIE,GAG7C,OAFAmnH,EAASA,EAAQrnH,OAAS,EAAIE,GAAUswD,EACxClxD,KAAK4X,KAAM,SAAU5X,MACdwC,EAER,OAAO,MAGRuuH,qBAAA,SAAU7/D,GAET,IADA,IAAM62D,EAAU/nH,KAAKgoH,GACZzmH,EAAI,EAAGC,EAAOumH,EAAQrnH,OAAQa,EAAIC,IAAQD,EAClD,GAAImvH,GAAS3I,EAASxmH,GAAK2vD,GAC1B,OAAO,EAGT,OAAO,GAGR6/D,gBAAA,SAAK7/D,GACJ,IAAM62D,EAAU/nH,KAAKgoH,GAMrB,OALAD,EAAQvnH,KAAM0wD,GACVlxD,KAAKs4D,GAAYyvD,EAAQrnH,QAC5BqnH,EAAQpxG,QAET3W,KAAK4X,KAAM,SAAU5X,MACdA,MAGR+wH,gBAAA,WACC,IACMvuH,EADUxC,KAAKgoH,GACErxG,QACvB,OAAc,MAAVnU,GACHxC,KAAK4X,KAAM,SAAU5X,MACdwC,GAED,MAGRuuH,iBAAA,WACC,OAAO/wH,KAAKgoH,GAAStnH,WAjEyB46B,QAAMoU,6BCctD,4DA2UA,OAxUU5vC,OAeCkxH,iBAAV,SAAgBpvH,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK0Q,SAAUpM,EAAWkf,aAAa,GAEvC,IAAM7hB,EAAQ3B,KAAK2B,MACbsD,EAAUjF,KAAKyd,GACfonC,EAAa5/C,EAAQ6c,SACrBkjC,EAAe//C,EAAQggB,WACvB6/B,EAAgB7/C,EAAQigB,YACxB6/B,EAAc9/C,EAAQ2c,UAC5B5hB,KAAK2lG,GAAQ,IAAI/9E,QAGjB,IAAMqpG,EAAsBtvH,EAAMuvH,yBAC5BC,EAAuBxvH,EAAMyvH,0BAC7BC,EAASrxH,KAAKsxH,GAAU,IAAInJ,GAAa,CAC9C/hH,EAAG2+C,EAAcksE,EAAsBE,EACvC9qH,EAAGw+C,IAEJwsE,EAAO1gH,GAAI,kBAAkB,SAAEzO,GAC9B+E,EAAKsqH,oBAAqBrvH,MAE3BmvH,EAAO1gH,GAAI,kBAAkB,SAAEvO,GAC9B6E,EAAKuqH,oBAAqBpvH,MAE3BpC,KAAKwgB,SAAU6wG,GAGf,IAAM/uG,EAAOtiB,KAAKyxH,GAAQzB,GAA6B79G,KAAM,GAAI,IACjEmQ,EAAKovG,aAAc,EAAG3sE,EAAaF,EAAYosE,EAAqBI,EAAO1qH,QAC3E3G,KAAKwgB,SAAU8B,GACfA,EAAK3R,GAAImH,EAAiB0B,MAAM,SAAE5D,GACF,IAA3B0M,EAAKqvG,mBACR1qH,EAAK2qH,WAAYh8G,MAKnB5V,KAAK6xH,GAAqB,SAAEj8G,GAC3B3O,EAAK6qH,aAAcl8G,IAEpB5V,KAAK+xH,GAAqB,SAAEn8G,GAC3B3O,EAAK+qH,aAAcp8G,IAEpB5V,KAAKiyH,GAAmB,SAAEr8G,GACzB3O,EAAKirH,WAAYt8G,IAElB5V,KAAKmyH,GAAW,GAGhB,IAAMC,EAAkBf,EAAO1vH,MAAM0rH,qBAC/BH,EAA2C,GAA9BmE,EAAO1vH,MAAMmnH,eAE1BuJ,EAAuB1wH,EAAM2wH,6BAC7BC,EAAwB5wH,EAAM6wH,8BAC9BC,EAAYpB,EAAOjrH,EAAIirH,EAAOnuH,MAAQmvH,EACtCK,EAAiB,IAAI3L,GAAW,CACrC/lH,OAAQhB,KACRoG,EAAGqsH,EAAYL,EANI,EAOnB/rH,EAAGw+C,EACH3hD,MAAOgqH,EAAakF,EARD,EASnBpsF,KAAM,EACNnU,MAAO,CACNrhB,OAAQ+hH,EACRnvH,MAAO,CACN0uB,KAAMzc,EAAW0f,QAElB3C,OAAQ,CACP3C,YAAa8iG,EAAsBrvH,MAhBlB,IAmBnByN,GAAI,CACHgiH,OAAQ,SAAElkG,GACRxnB,EAAKy7F,GAAcx+C,GAAaz1B,MAM9BmkG,EAAejxH,EAAMkxH,0BACrBC,EAAcnxH,EAAMoxH,yBACpBC,EAAerxH,EAAMsxH,0BACrBC,EAAuBJ,EAAcE,EACrC1qH,EAAKmqH,EACLjqH,EAAKkqH,EAAersH,EAAIqsH,EAAe/rH,OAAS0rH,EACJ,MAA9CrB,EAAqBmC,wBACxBnC,EAAqBmC,sBAAwB,IAAIpC,GAChDpvH,EAAMyxH,qBACNzxH,EAAM0xH,2BAGRrzH,KAAKsoH,GAAU0I,EAAqBmC,sBAEpC,IADA,IAAMjL,EAASloH,KAAKsoH,GACX/mH,EAAI,EAAGC,EAAO0mH,EAAOoL,cAAe/xH,EAAIC,IAAQD,EAAI,CAC5D,IACM6E,EAAIkC,EADC/G,EAAIqxH,EACKM,EAEd7sH,EAAImC,GADEjH,EAAIqxH,EAAgB,GACZM,EACpB5wG,EAAKovG,aAAc,EAAInwH,EAAG6E,EAAGC,EAAGysH,EAAaA,GAE9C5K,EAAOv3G,GAAI,UAAU,WACpB1J,EAAKssH,oBAENz7G,EAAiBiC,QAASuI,GAAM,SAAE1M,GACjC,IAAM49G,EAAelxG,EAAKqvG,kBACtB,GAAK6B,GACRvsH,EAAKylH,cAAepqG,EAAK2sB,QAASukF,OAKpC,IAAM5rH,EAAO5H,KAAK0iG,GAAQ,IAAIxI,GAC9BtyF,EAAK+I,GAAI,UAAU,WAClB1J,EAAKwsH,gBACLnxG,EAAKhhB,YAENsG,EAAK+I,GAAI,mBAAmB,SAAE5K,GAC7BkB,EAAKysH,eAAgB3tH,MAEtB6B,EAAK+I,GAAI,mBAAmB,SAAE8d,GAC7BikG,EAAejkG,MAAQA,KAExBnM,EAAKqsB,QAAS,EAAG/mC,GACjB0a,EAAKhhB,SACLoxH,EAAejkG,MAAQ7mB,EAAKk8C,UAC5B9jD,KAAKyzH,gBACL,IAAMlhE,EAAW3qD,EAAK2qD,SACN,MAAZA,GACHvyD,KAAK0zH,eAAgBnhE,GAIP,MAAX3wD,GAAoC,MAAjBA,EAAQsB,QAC9BlD,KAAKkD,MAAQ6hD,EAAcksE,EAAsBE,EAChDE,EAAOnuH,MAAQmvH,GAAwBO,EAAe,GAAKI,EAC3DJ,EAAeE,EAAc9tE,GAIhB,MAAXpjD,GAAqC,MAAlBA,EAAQ+E,SAC9B3G,KAAK2G,OAASk+C,EAAawsE,EAAO1qH,OAASm+C,IAI7CtlD,sBAAIwxH,wBAAJ,WACC,OAAOhxH,KAAK0iG,oCAGbljG,sBAAIwxH,0BAAJ,WACC,OAAOhxH,KAAKsoH,oCAGH0I,0BAAV,SAAyB2C,GACxB,IAAM/rH,EAAO5H,KAAK0iG,GACA,MAAdixB,EACH/rH,EAAKgsH,WAAYD,GAEjB/rH,EAAKmmD,SAIGijE,2BAAV,WAGC,IAFA,IAAM9I,EAASloH,KAAKsoH,GACdhmG,EAAOtiB,KAAKyxH,GACTlwH,EAAI,EAAGC,EAAO0mH,EAAOlzG,OAAQzT,EAAIC,IAAQD,EACjD+gB,EAAKqsB,QAAS,EAAIptC,EAAG2mH,EAAOpsG,IAAKva,IAElC+gB,EAAKhhB,SACLjB,EAAciB,OAAQtB,OAGbgxH,6BAAV,SAA4Bp7G,GAC3B,IAAM66G,EAAQzwH,KAAK4tC,QAASh4B,EAAEhO,KAAKqR,YAAQ1W,EAAWvC,KAAK2lG,IAC3D,OAAOh8F,KAAKG,IAAK,EAAGH,KAAKC,IAAK,GAAI6mH,EAAMpqH,EAAIrG,KAAKiF,QAAQ6c,UAAY9hB,KAAKsxH,GAAQ3qH,UAGzEqqH,uBAAV,SAAsBp7G,GACrB5V,KAAK0iG,GAAMmxB,MAAO7zH,KAAK8zH,iBAAkBl+G,IACzC5V,KAAK+zH,qBAGI/C,yBAAV,SAAwBp7G,GACvB,IAAM9U,EAAS8U,EAAE9U,OACjB,GAAIA,aAAkB0zB,SAAS,CAC9B,IAAM5sB,EAAO5H,KAAK0iG,GACZ9hG,EAAQZ,KAAKmyH,GAAStxH,QAASC,GACjC,GAAKF,GAASA,EAAQgH,EAAKspD,OAAOxwD,SACrCkH,EAAKspD,OAAQtwD,GAAQ2xD,UAAW,EAChCvyD,KAAK+zH,uBAKE/C,2BAAV,SAA0BjrH,GACzB,IAAMsrH,EAASrxH,KAAKsxH,GACpBD,EAAO99G,QAAQrR,MAAQ6D,EAAM7D,MAC7BmvH,EAAO99G,QAAQnR,MAAQ2D,EAAM3D,MAC7BivH,EAAO2C,IAAI9xH,MAAQ6D,EAAM7D,MACzBmvH,EAAO2C,IAAI5xH,MAAQ2D,EAAM3D,OAGhB4uH,gCAAV,SAA+B9uH,GAC9B,IAAMgvD,EAASlxD,KAAK0iG,GACpB,GAAc,MAAVxxC,EAAiB,CACpB,IAAMqB,EAAWrB,EAAOqB,SACR,MAAZA,IACHA,EAASrwD,MAAQA,KAKV8uH,gCAAV,SAA+B5uH,GAC9B,IAAM8uD,EAASlxD,KAAK0iG,GACpB,GAAc,MAAVxxC,EAAiB,CACpB,IAAMqB,EAAWrB,EAAOqB,SACR,MAAZA,IACHA,EAASnwD,MAAQA,KAKV4uH,8BAAV,WACC,IAAM9vH,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMH,EAAQG,EAAMH,MACpBA,EAAM4P,GAAImH,EAAiBgD,KAAM9a,KAAK+xH,IACtChxH,EAAM4P,GAAImH,EAAiBiB,GAAI/Y,KAAKiyH,MAI5BjB,yBAAV,SAAwBp7G,GACvB,IAAMs7C,EAASlxD,KAAK0iG,GACpB,GAAc,MAAVxxC,EAAiB,CACpB,IAAMqB,EAAWrB,EAAOqB,SACR,MAAZA,IACHA,EAAS59C,SAAW3U,KAAK8zH,iBAAkBl+G,MAKpCo7G,uBAAV,SAAsBp7G,GACrB,IAAM1U,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMH,EAAQG,EAAMH,MACpBA,EAAM6X,IAAKd,EAAiBgD,KAAM9a,KAAK+xH,IACvChxH,EAAM6X,IAAKd,EAAiBiB,GAAI/Y,KAAKiyH,MAI7BjB,0BAAV,WAWC,IAVA,IAAMrvH,EAAQ3B,KAAK2B,MACbsyH,EAAgBtyH,EAAMuyH,2BACtBC,EAAwBxyH,EAAMyyH,mCAC9BnD,EAAsBtvH,EAAMuvH,yBAE5BtpH,EAAO5H,KAAK0iG,GACZ8tB,EAAY5oH,EAAKspD,OAAOxwD,OAExB2zH,EAAUr0H,KAAKmyH,GACfmC,EAAaD,EAAQ3zH,OAClBa,EAAI+yH,EAAY/yH,EAAIivH,IAAajvH,EAAI,CAC7C,IAAMgzH,EAAY,IAAI//F,SAAQy/F,GAC9BM,EAAUla,OAAO/zG,IAAK,GAAK,IAC3BiuH,EAAUn0G,OAAS,UACnBm0G,EAAUh2G,aAAc,EACxBg2G,EAAU5jH,GAAImH,EAAiB0B,KAAMxZ,KAAK6xH,IAC1CwC,EAAQ7zH,KAAM+zH,GACdv0H,KAAKwgB,SAAU+zG,GAGhB,IAAShzH,EAAI+yH,EAAa,EAAG9D,GAAajvH,IAAKA,EAAI,CAClD,IAAMizH,EAAYH,EAAS9yH,GAC3BizH,EAAU57G,IAAKd,EAAiB0B,KAAMxZ,KAAK6xH,IAC3C2C,EAAU7sG,UAEX0sG,EAAQ3zH,OAAS8vH,EAEjB,IAAMnqH,EAAIrG,KAAKiF,QAAQ6c,SACjBtc,EAAQxF,KAAKiF,QAAQ2c,UAAYqvG,EACjCtqH,EAAS3G,KAAKsxH,GAAQ3qH,OAC5B,IAASpF,EAAI,EAAGA,EAAIivH,IAAajvH,EAAI,CACpC,IAAMwE,EAAQ6B,EAAKspD,OAAQ3vD,GACrB84G,EAASga,EAAS9yH,GACxB84G,EAAO3rG,KAAO3I,EAAM7D,MACpBm4G,EAAO1lG,SAASrO,IACfd,EACAa,EAAIM,EAASZ,EAAM4O,UAEpB0lG,EAAO3zG,QAAWX,EAAMwsD,SAAW4hE,EAAwBF,EAG5D5zH,EAAciB,OAAQtB,OAGvBgxH,sBAAA,SAAWp7G,GACV,GAAID,EAAkB8+G,YAAa7+G,GAAM,CACxC,IAAMs7C,EAASlxD,KAAK0iG,GACpB,GAAc,MAAVxxC,EAAiB,CACpB,IAAMqB,EAAWrB,EAAOqB,SACxB,GAAgB,MAAZA,EAGH,OAFArB,EAAOzjC,OAAQ8kC,GACfzrD,YAAM+uB,oBAAWjgB,IACV,GAIV,OAAO9O,YAAM+uB,oBAAWjgB,IAGfo7G,oBAAV,WACC,MAAO,wBArUSA,wBAA2D,QADnErwG,kBC1BV,4DA0CA,OAvCU7gB,OAGC40H,mBAAV,SAAkB9/G,EAAyBhT,GAC1CkF,YAAMk9G,iBAAQpvG,EAAQhT,GAEtB,IAAMyvH,EAAS,IAAIL,GAAsBpvH,GAAWA,EAAQyvH,QAC5DrxH,KAAKsxH,GAAUD,EACfz8G,EAAO4L,SAAU6wG,GAEjBrxH,KAAK2Q,GAAI,MAAM,WACd,IAAM/I,EAAOypH,EAAOzpH,KACdsgH,EAASmJ,EAAOnJ,OAChBA,EAAOlvG,SAAUpR,IACtBsgH,EAAO16F,IAAK5lB,EAAKimD,gBAKpBruD,sBAAIk1H,wBAAJ,WACC,OAAO10H,KAAKsxH,GAAQ1pH,sCAGrBpI,sBAAIk1H,0BAAJ,WACC,OAAO10H,KAAKsxH,GAAQpJ,wCAGrB1oH,sBAAIk1H,0BAAJ,WACC,OAAO10H,KAAKsxH,oCAGboD,sBAAA,SAAW9+G,GAEV,OADA5V,KAAKsxH,GAAQz7F,UAAWjgB,GACjB9O,YAAM+uB,oBAAWjgB,IAGf8+G,oBAAV,WACC,MAAO,2BArCC/Q,mBCEV,4DAmEA,OAhEU7jH,OAMC60H,iBAAV,SAAgB/yH,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ,IAAMgG,EAAO5H,KAAK4uB,GAGlB,GAFA5uB,KAAK40H,GAAiBhzH,GAAWA,EAAQizH,OAE1B,MAAXjzH,GAAoC,MAAjBA,EAAQiwB,YAA0CtvB,IAAzBX,EAAQiwB,MAAMrhB,OAAuB,CACpF,IAAM9J,EAAU1G,KAAK2B,MAAMmzH,qBAC3B,GAAIpuH,aAAmB2lB,UAAU,CAChC,IAAM/J,EAAOtiB,KAAKyxH,GAAQzB,GAA6B79G,KAAM,EAAG,GAAIzL,GACpE4b,EAAKovG,aAAc,EAAG,EAAG,EAAGhrH,EAAQxD,MAAOwD,EAAQC,QACnD2b,EAAKqsB,QAAS,EAAG/mC,GACjB0a,EAAKhhB,SACLtB,KAAK6xB,MAAQvP,GAIftiB,KAAK2Q,GAAI,UAAU,WAClB,IAAMkkH,EAAS5tH,EAAK4tH,OACpBA,EAAOjtH,KAAKgsH,WAAYhsH,GACxBitH,EAAO98E,OAAOwJ,MAAK,WAClB35C,EAAKgsH,WAAYiB,EAAOjtH,MACxB,IAAM0a,EAAOrb,EAAKwqH,GACN,MAARnvG,GACHA,EAAKhhB,SAEN2F,EAAKspB,eACLtpB,EAAKupB,qBACLnwB,EAAciB,OAAQ2F,GACtBA,EAAK2Q,KAAM,SAAU3Q,UAKxBzH,sBAAIm1H,0BAAJ,WACC,IAAIE,EAAS70H,KAAK+0H,GAalB,OAZc,MAAVF,IAEkB,MADC70H,KAAK40H,GAE1BC,EAAS,IAAIH,GAAsB10H,KAAK40H,KAEL,MAA/BD,EAAqBK,SACxBL,EAAqBK,OAAS,IAAIN,IAEnCG,EAASF,EAAqBK,QAE/Bh1H,KAAK+0H,GAAUF,GAETA,mCAGRr1H,sBAAIm1H,yBAAJ,WACC,OAAO30H,KAAK4uB,oCAGH+lG,oBAAV,WACC,MAAO,2BA9DCtR,mBCRV,4DAwCA,OArCUvjH,OAGCm1H,mBAAV,SAAkBrgH,EAAyBhT,GAC1CkF,YAAMk9G,iBAAQpvG,EAAQhT,GAEtB,IAAMyvH,EAAS,IAAIlJ,GAAcvmH,GAAWA,EAAQyvH,QACpDrxH,KAAKsxH,GAAUD,EACfz8G,EAAO4L,SAAU6wG,GAEjBrxH,KAAK2Q,GAAI,MAAM,WACd,IAAMu3G,EAASmJ,EAAOnJ,OAChBA,EAAOlvG,SAAUq4G,EAAO2C,MAC7B9L,EAAO16F,IAAK6jG,EAAO2C,SAKtBx0H,sBAAIy1H,2BAAJ,WACC,OAAOj1H,KAAKsxH,GAAQ/9G,yCAGrB/T,sBAAIy1H,uBAAJ,WACC,OAAOj1H,KAAKsxH,GAAQ0C,qCAGrBx0H,sBAAIy1H,0BAAJ,WACC,OAAOj1H,KAAKsxH,GAAQpJ,wCAGrB1oH,sBAAIy1H,0BAAJ,WACC,OAAOj1H,KAAKsxH,oCAGH2D,oBAAV,WACC,MAAO,mBAnCCtR,mBCAV,4DAkFA,OA/EU7jH,OAMCo1H,iBAAV,SAAgBtzH,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ,IAAMi0F,EAAgB71F,KAAK4uB,GAC3B5uB,KAAK40H,GAAiBhzH,GAAWA,EAAQizH,OACzC70H,KAAKs1B,GAAS,IAAIwyF,GAAsBjyB,GAAe,SAAE3zF,GACxD2zF,EAAc3zF,MAAQA,EACtB+E,EAAKwgH,mBACH,SAAErlH,GACJyzF,EAAczzF,MAAQA,EACtB6E,EAAKkuH,wBAGNn1H,KAAK2Q,GAAI,UAAU,WAClB,IAAMkkH,EAAS5tH,EAAK4tH,OACpBA,EAAOthH,QAAQrR,MAAQ2zF,EAAc3zF,MACrC2yH,EAAOthH,QAAQnR,MAAQyzF,EAAczzF,MACrCyyH,EAAOb,IAAI9xH,MAAQ2zF,EAAc3zF,MACjC2yH,EAAOb,IAAI5xH,MAAQyzF,EAAczzF,MACjCyyH,EAAO98E,OAAOwJ,MAAK,WAClB,IAAM6zE,EAAYP,EAAOb,IACnBqB,EAAgBR,EAAOthH,QAC7BtM,EAAK2Q,KAAM,SAAUw9G,EAAWC,EAAepuH,GAC/C4uF,EAAc3zF,MAAQkzH,EAAUlzH,MAChC2zF,EAAczzF,MAAQgzH,EAAUhzH,MAChC6E,EAAKwgH,gBACLxgH,EAAK2Q,KAAM,SAAU3Q,UAKdiuH,8BAAV,SAA6BvzH,EAAcW,GAC1C,OAAOtC,KAAK4uB,GAAmB1sB,OAGtBgzH,0BAAV,WACC,IAAMrjG,EAAQ7xB,KAAK2xB,GACf3xB,KAAKm0B,YAAatC,KACrBA,EAAMnjB,KAAO1O,KAAK4uB,GAAmB1sB,MACrC7B,EAAciB,OAAQtB,OAEvBA,KAAKm1H,sBAGID,+BAAV,WACCl1H,KAAKuwB,eACLvwB,KAAKwwB,sBAGNhxB,sBAAI01H,0BAAJ,WACC,IAAIL,EAAS70H,KAAK+0H,GAalB,OAZc,MAAVF,IAEkB,MADC70H,KAAK40H,GAE1BC,EAAS,IAAII,GAAcj1H,KAAK40H,KAEL,MAAvBM,EAAaF,SAChBE,EAAaF,OAAS,IAAIC,IAE3BJ,EAASK,EAAaF,QAEvBh1H,KAAK+0H,GAAUF,GAETA,mCAGRr1H,sBAAI01H,yBAAJ,WACC,OAAOl1H,KAAKs1B,oCAGH4/F,oBAAV,WACC,MAAO,mBA7EC7R,mBCpBV,4DAIA,OAJmCvjH,OACxBw1H,oBAAV,WACC,MAAO,oBAF0BjS,mBCWnC,4DAQA,OAJUvjH,OACCy1H,oBAAV,WACC,MAAO,gCAFCjS,mBCJV,4DAkBA,OAdUxjH,OACC01H,0BAAV,WACOx1H,KAAKyiB,YACVziB,KAAK+2B,WAAW,IAIRy+F,wBAAV,WACCx1H,KAAK4X,KAAM5X,KAAKyiB,WAAa,SAAW,WAAYziB,OAG3Cw1H,oBAAV,WACC,MAAO,gCAZClS,mBCJV,4DAQA,OAJUxjH,OACC21H,oBAAV,WACC,MAAO,gCAFCnS,mBCJV,4DAQA,OAJUxjH,OACC41H,oBAAV,WACC,MAAO,2BAFC1O,mBCJV,4DAQA,OAJUlnH,OACC61H,oBAAV,WACC,MAAO,+BAFC3O,mBCAT,WAAaplH,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKyJ,SAAUpM,EAAWkf,aAAa,GACvCvc,EAAK2Z,YAAa,IAMpB,OAVU9gB,OAOC81H,oBAAV,WACC,MAAO,2BARCj1G,kBCLV,4DAOA,OAJU7gB,OACC+1H,oBAAV,WACC,MAAO,oBAFC/P,kBCFT,WAAalkH,EAA8Cc,GAC1D1C,KAAK81H,GAAUl0H,QAA4BW,IAAjBX,EAAQqkC,KAAqBrkC,EAAQqkC,KAAO,KACtEjmC,KAAK+1H,MAAen0H,QAAiCW,IAAtBX,EAAQo0H,YAA0Bp0H,EAAQo0H,UACzEh2H,KAAKmsB,GAAYzpB,EAwBnB,OArBClD,sBAAIy2H,wBAAJ,WACC,OAAOj2H,KAAK81H,QAGb,SAAU7vF,GACLjmC,KAAK81H,KAAU7vF,IAClBjmC,KAAK81H,GAAQ7vF,EACbjmC,KAAKmsB,uCAIP3sB,sBAAIy2H,6BAAJ,WACC,OAAOj2H,KAAK+1H,QAGb,SAAeC,GACVh2H,KAAK+1H,KAAeC,IACvBh2H,KAAK+1H,GAAaC,EAClBh2H,KAAKmsB,0DCtBP,WAAanrB,GACZhB,KAAK6qD,GAAU7pD,EA8EjB,OA3ECk1H,gBAAA,SAAKjwF,GACJ,IAAMjlC,EAAShB,KAAK6qD,GACdsrE,EAAQn1H,EAAOm1H,MACfC,EAAYD,EAAMlwF,KAClBowF,EAAWr1H,EAAOq1H,SACxB,GAAiB,MAAbD,EAAoB,CACvB,IAAM9yH,EAAOtC,EAAOsC,KACpB,GAAIA,EAAO43F,GAAoByB,KAAO,CACrC,GAAIy5B,EAAUjtF,cAAgBlD,EAAKkD,cAClC,OAAOktF,EAASC,KAAK1sH,IAEtB,GAAIwsH,EAAU5uF,WAAavB,EAAKuB,WAC/B,OAAO6uF,EAASC,KAAK1sH,IAEtB,GAAIwsH,EAAU9vF,UAAYL,EAAKK,UAC9B,OAAO+vF,EAASC,KAAK1sH,IAGvB,IAAM2sH,EAAiBH,EAAUlwF,WACjC,OAAIiwF,EAAMH,UACFO,EAEHjzH,EAAO43F,GAAoB0C,SAC1Bw4B,EAAUzsF,aAAe0sF,EAASr8B,OAAOlwF,IACrCysH,EAGLjzH,EAAO43F,GAAoBmB,SAC1B+5B,EAAU1uF,aAAe2uF,EAASG,OAAO1sH,IACrCysH,EAGFA,EAAiB,EAG1B,OAAOF,EAASC,KAAK1sH,KAGtBssH,gBAAA,SAAKjwF,GACJ,IAAMjlC,EAAShB,KAAK6qD,GACd4rE,EAAQz1H,EAAOy1H,MACfC,EAAYD,EAAMxwF,KAClBowF,EAAWr1H,EAAOq1H,SACxB,GAAiB,MAAbK,EAAoB,CACvB,IAAMpzH,EAAOtC,EAAOsC,KACpB,GAAIA,EAAO43F,GAAoByB,KAAO,CACrC,GAAI12D,EAAKkD,cAAgButF,EAAUvtF,cAClC,OAAOktF,EAASC,KAAKxsH,IAEtB,GAAIm8B,EAAKuB,WAAakvF,EAAUlvF,WAC/B,OAAO6uF,EAASC,KAAKxsH,IAEtB,GAAIm8B,EAAKK,UAAYowF,EAAUpwF,UAC9B,OAAO+vF,EAASC,KAAKxsH,IAGvB,IAAM6sH,EAAiBD,EAAUxwF,WACjC,OAAIuwF,EAAMT,UACFW,EAEHrzH,EAAO43F,GAAoB0C,SAC1By4B,EAASr8B,OAAOpwF,IAAM8sH,EAAU/sF,aAC5BgtF,EAGLrzH,EAAO43F,GAAoBmB,SAC1Bg6B,EAASG,OAAO5sH,IAAM8sH,EAAUhvF,aAC5BivF,EAGFA,EAAiB,EAG1B,OAAON,EAASC,KAAKxsH,wBC7EtB,WAAa9I,GACZhB,KAAK6qD,GAAU7pD,EA8EjB,OA3EC41H,gBAAA,SAAK3wF,GACJ,IAAMjlC,EAAShB,KAAK6qD,GACdsrE,EAAQn1H,EAAOm1H,MACfC,EAAYD,EAAMlwF,KAClBowF,EAAWr1H,EAAOq1H,SACxB,GAAiB,MAAbD,EAAoB,CACvB,IAAM9yH,EAAOtC,EAAOsC,KACpB,GAAIA,EAAO43F,GAAoByB,KAAO,CACrC,GAAIy5B,EAAUjtF,cAAgBlD,EAAKkD,cAClC,OAAOktF,EAASG,OAAO5sH,IAExB,GAAIwsH,EAAU5uF,WAAavB,EAAKuB,WAC/B,OAAO6uF,EAASG,OAAO5sH,IAExB,GAAIwsH,EAAU9vF,UAAYL,EAAKK,UAC9B,OAAO+vF,EAASG,OAAO5sH,IAGzB,GAAItG,EAAO43F,GAAoBkB,OAC1Bg6B,EAAUlwF,WAAaD,EAAKC,WAC/B,OAAOmwF,EAASG,OAAO5sH,IAGzB,IAAMitH,EAAmBT,EAAU1uF,aACnC,OAAIyuF,EAAMH,UACFa,EAEHvzH,EAAO43F,GAAoB0C,SAC1Bw4B,EAAUzsF,aAAe0sF,EAASr8B,OAAOlwF,IACrC+sH,EAGFA,EAAmB,EAG5B,OAAOR,EAASG,OAAO5sH,KAGxBgtH,gBAAA,SAAK3wF,GACJ,IAAMjlC,EAAShB,KAAK6qD,GACd4rE,EAAQz1H,EAAOy1H,MACfC,EAAYD,EAAMxwF,KAClBowF,EAAWr1H,EAAOq1H,SACxB,GAAiB,MAAbK,EAAoB,CACvB,IAAMpzH,EAAOtC,EAAOsC,KACpB,GAAIA,EAAO43F,GAAoByB,KAAO,CACrC,GAAI12D,EAAKkD,cAAgButF,EAAUvtF,cAClC,OAAOktF,EAASG,OAAO1sH,IAExB,GAAIm8B,EAAKuB,WAAakvF,EAAUlvF,WAC/B,OAAO6uF,EAASG,OAAO1sH,IAExB,GAAIm8B,EAAKK,UAAYowF,EAAUpwF,UAC9B,OAAO+vF,EAASG,OAAO1sH,IAGzB,GAAIxG,EAAO43F,GAAoBkB,OAC1Bn2D,EAAKC,WAAawwF,EAAUxwF,WAC/B,OAAOmwF,EAASG,OAAO1sH,IAGzB,IAAMgtH,EAAmBJ,EAAUhvF,aACnC,OAAI+uF,EAAMT,UACFc,EAEHxzH,EAAO43F,GAAoB0C,SAC1By4B,EAASr8B,OAAOpwF,IAAM8sH,EAAU/sF,aAC5BmtF,EAGFA,EAAmB,EAG5B,OAAOT,EAASG,OAAO1sH,wBC7ExB,WAAa9I,GACZhB,KAAK6qD,GAAU7pD,EAoEjB,OAjEC+1H,gBAAA,SAAK9wF,GACJ,IAAMjlC,EAAShB,KAAK6qD,GACdsrE,EAAQn1H,EAAOm1H,MACfC,EAAYD,EAAMlwF,KAClBowF,EAAWr1H,EAAOq1H,SACxB,GAAiB,MAAbD,EAAoB,CACvB,IAAM9yH,EAAOtC,EAAOsC,KACpB,GAAIA,EAAO43F,GAAoByB,KAAO,CACrC,GAAIy5B,EAAUjtF,cAAgBlD,EAAKkD,cAClC,OAAOktF,EAASr8B,OAAOpwF,IAExB,GAAIwsH,EAAU5uF,WAAavB,EAAKuB,WAC/B,OAAO6uF,EAASr8B,OAAOpwF,IAExB,GAAIwsH,EAAU9vF,UAAYL,EAAKK,UAC9B,OAAO+vF,EAASr8B,OAAOpwF,IAGzB,OAAItG,EAAO43F,GAAoBkB,OAC1Bg6B,EAAUlwF,WAAaD,EAAKC,WACxBmwF,EAASr8B,OAAOpwF,IAGrBtG,EAAO43F,GAAoBmB,SAC1B+5B,EAAU1uF,aAAezB,EAAKyB,aAC1B2uF,EAASr8B,OAAOpwF,IAGlBwsH,EAAUzsF,cAAiBwsF,EAAMH,UAAY,EAAI,GAEzD,OAAOK,EAASr8B,OAAOpwF,KAGxBmtH,gBAAA,SAAK9wF,GACJ,IAAMjlC,EAAShB,KAAK6qD,GACd4rE,EAAQz1H,EAAOy1H,MACfC,EAAYD,EAAMxwF,KAClBowF,EAAWr1H,EAAOq1H,SACxB,GAAiB,MAAbK,EAAoB,CACvB,IAAMpzH,EAAOtC,EAAOsC,KACpB,GAAIA,EAAO43F,GAAoByB,KAAO,CACrC,GAAI12D,EAAKkD,cAAgButF,EAAUvtF,cAClC,OAAOktF,EAASr8B,OAAOlwF,IAExB,GAAIm8B,EAAKuB,WAAakvF,EAAUlvF,WAC/B,OAAO6uF,EAASr8B,OAAOlwF,IAExB,GAAIm8B,EAAKK,UAAYowF,EAAUpwF,UAC9B,OAAO+vF,EAASr8B,OAAOlwF,IAGzB,OAAIxG,EAAO43F,GAAoBkB,OAC1Bn2D,EAAKC,WAAawwF,EAAUxwF,WACxBmwF,EAASr8B,OAAOlwF,IAGrBxG,EAAO43F,GAAoBmB,SAC1Bp2D,EAAKyB,aAAegvF,EAAUhvF,aAC1B2uF,EAASr8B,OAAOlwF,IAGlB4sH,EAAU/sF,cAAiB8sF,EAAMT,UAAY,EAAI,GAEzD,OAAOK,EAASr8B,OAAOlwF,wBC5DxB,WAAalI,EAA+Cc,GAC3D1C,KAAKq2H,SAAWr2H,KAAKg3H,cACrBh3H,KAAKm2H,MAAQ,IAAIF,GAAkBr0H,GAAWA,EAAQu0H,MAAOzzH,GAC7D1C,KAAKy2H,MAAQ,IAAIR,GAAkBr0H,GAAWA,EAAQ60H,MAAO/zH,GAC7D1C,KAAKsD,KAAO43F,GAAoBl0C,IAChChnD,KAAKi3H,MAAQ,IAAIf,GAAuBl2H,MACxCA,KAAKk3H,QAAU,IAAIN,GAAyB52H,MAC5CA,KAAKm3H,QAAU,IAAIJ,GAAyB/2H,MA8I9C,OA3ICo3H,wBAAA,WACC,MAAO,CACNp9B,OAAQ,CACPpwF,IAAK,EACLE,IAAK,IAGN0sH,OAAQ,CACP5sH,IAAK,EACLE,IAAK,IAGNwsH,KAAM,CACL1sH,IAAK,EACLE,IAAK,MAKRstH,mBAAA,SAAQnxF,GACP,IAAMzjC,EAASxC,KAAKq3H,KAAMpxF,GAC1B,GAAIzjC,EAAS,EAAI,CAChB,IAAM2zH,EAAQn2H,KAAKm2H,MACbC,EAAYD,EAAMlwF,KACxB,GAAImwF,EAcH,OAbAnwF,EAAKsE,QAAS6rF,EAAUkB,WAClBnB,EAAMH,aACL1yH,EAAOtD,KAAKsD,MACP43F,GAAoB0C,QAC9B33D,EAAKsxF,WAAYnB,EAAUzsF,aAAe,GAChCrmC,EAAO43F,GAAoBmB,QACrCp2D,EAAKuxF,WAAYpB,EAAU1uF,aAAe,GAChCpkC,EAAO43F,GAAoBkB,MACrCn2D,EAAKwxF,SAAUrB,EAAUlwF,WAAa,GAC5B5iC,EAAO43F,GAAoByB,MACrC12D,EAAKyxF,QAAStB,EAAU9vF,UAAY,KAG/B,OAEF,GAAI,EAAI9jC,EAAS,CACvB,IAKQc,EALFmzH,EAAQz2H,KAAKy2H,MACbC,EAAYD,EAAMxwF,KACxB,GAAIywF,EAcH,OAbAzwF,EAAKsE,QAASmsF,EAAUY,WAClBb,EAAMT,aACL1yH,EAAOtD,KAAKsD,MACP43F,GAAoB0C,QAC9B33D,EAAKsxF,WAAYb,EAAU/sF,aAAe,GAChCrmC,EAAO43F,GAAoBmB,QACrCp2D,EAAKuxF,WAAYd,EAAUhvF,aAAe,GAChCpkC,EAAO43F,GAAoBkB,MACrCn2D,EAAKwxF,SAAUf,EAAUxwF,WAAa,GAC5B5iC,EAAO43F,GAAoByB,MACrC12D,EAAKyxF,QAAShB,EAAUpwF,UAAY,KAG/B,EAGT,OAAO,GAGR8wF,oBAAA,SAAS3tG,EAASlqB,GACjB,IAAM+D,EAAOtD,KAAKsD,KAClB,GAAIA,EAAO43F,GAAoByB,KAAO,CACrC,IAMMg7B,EACAC,EAKAC,EACAC,EAbApjE,EAAKjrC,EAAE0f,cACP+2C,EAAK3gF,EAAE4pC,cACb,GAAIurB,IAAOwrB,EACV,OAASxrB,EAAKwrB,GAAM,EAAI,EAKzB,IAFMy3C,EAAKluG,EAAE+d,eACPowF,EAAKr4H,EAAEioC,YAEZ,OAASmwF,EAAKC,GAAM,EAAI,EAKzB,IAFMC,EAAKpuG,EAAE6c,cACPwxF,EAAKv4H,EAAE+mC,WAEZ,OAASuxF,EAAKC,GAAM,EAAI,EAG1B,GAAIx0H,EAAO43F,GAAoBkB,MAAQ,CACtC,IAAM27B,EAAKtuG,EAAEyc,WACP8xF,EAAKz4H,EAAE2mC,WACb,GAAI6xF,IAAOC,EACV,OAASD,EAAKC,GAAM,EAAI,EAG1B,OAAI10H,EAAO43F,GAAoBmB,UACxBs7B,EAAKluG,EAAEie,iBACPkwF,EAAKr4H,EAAEmoC,cAEHiwF,EAAKC,GAAM,EAAI,EAGtBt0H,EAAO43F,GAAoB0C,UACxBi6B,EAAKpuG,EAAEkgB,iBACPmuF,EAAKv4H,EAAEoqC,cAEHkuF,EAAKC,GAAM,EAAI,EAGnB,GAGRV,iBAAA,SAAMnxF,GAEL,IAAMkwF,EAAQn2H,KAAKm2H,MACbC,EAAYD,EAAMlwF,KACxB,GAAiB,MAAbmwF,EAAoB,CACvB,IAAM5zH,EAASxC,KAAKi4H,QAAS7B,EAAWnwF,GACxC,OAAIkwF,EAAMH,UACAxzH,GAAU,EAAI,GAAK,EAEnBA,EAAS,EAAI,GAAK,EAK7B,IAAMi0H,EAAQz2H,KAAKy2H,MACbC,EAAYD,EAAMxwF,KACxB,OAAiB,MAAbywF,GACGl0H,EAASxC,KAAKi4H,QAAShyF,EAAMywF,GAC/BD,EAAMT,UACAxzH,GAAU,EAAI,EAAI,EAElBA,EAAS,EAAI,EAAI,GAIrB,GAGR40H,qBAAA,SAAUnxF,GACT,OAA6B,IAAtBjmC,KAAKq3H,KAAMpxF,SCvIdiyF,GAAiB,SACtBt2H,EACAqkC,EACA+vF,GAEA,OAAIp0H,EACI,CACNqkC,UAAyB1jC,IAAjBX,EAAQqkC,KAAqBrkC,EAAQqkC,KAAOA,EACpD+vF,eAAmCzzH,IAAtBX,EAAQo0H,UAA0Bp0H,EAAQo0H,UAAYA,GAG9D,CACN/vF,OACA+vF,6BA6CD,WAAap0H,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKkxH,iBAkQP,OA5QUr4H,OAaCs4H,iBAAV,SAAgBx2H,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK0Q,SAAUpM,EAAWkf,aAAa,GAEvC,IAAM7hB,EAAQ3B,KAAK2B,MACnB3B,KAAKq4H,GAAe,IAAIhuF,KACxB,IAAMiuF,EAAkBt4H,KAAKq4H,GAAaf,UAC1Ct3H,KAAKu4H,GAAW,IAAIluF,KAAMiuF,GAC1Bt4H,KAAKw4H,GAAc,IAAIpB,GAvDD,SACvBz1H,EACAC,GAEA,OAAIA,EACI,CACNu0H,MAAO+B,GACNt2H,EAAQu0H,MACRx0H,EAAM82H,gBACN92H,EAAM+2H,yBAEPjC,MAAOyB,GACNt2H,EAAQ60H,MACR90H,EAAMg3H,gBACNh3H,EAAMi3H,0BAIF,CACNzC,MAAO,CACNlwF,KAAMtkC,EAAM82H,gBACZzC,UAAWr0H,EAAM+2H,yBAElBjC,MAAO,CACNxwF,KAAMtkC,EAAMg3H,gBACZ3C,UAAWr0H,EAAMi3H,0BA+BjBC,CAAiBl3H,EAAOC,GAAWA,EAAQqlB,SAC3C,WAAchgB,EAAKkxH,kBAEpB,IAAM/lG,EAAWxwB,GAA6B,MAAlBA,EAAQwwB,OACnCxwB,EAAQwwB,OAASzwB,EAAMiiD,YACxB,IAAIqD,GAAgB,CACnBjmD,OAAQhB,KACRoG,EAAG,UAAWC,EAAG,UACjBnD,MAAO,OAAQyD,OAAQ,OACvByrB,SACA3R,SAAUzgB,KAAK84H,YAAan3H,EAAOC,EAASwwB,MAI9C5yB,sBAAI44H,2BAAJ,WACC,OAAOp4H,KAAKq4H,QAGb,SAAaU,GACR/4H,KAAKq4H,GAAaf,YAAcyB,EAAYzB,YAC/Ct3H,KAAKq4H,GAAeU,oCAItBv5H,sBAAI44H,uBAAJ,WACC,OAAOp4H,KAAKu4H,QAGb,SAASS,GACJh5H,KAAKu4H,GAASjB,YAAc0B,EAAQ1B,YACvCt3H,KAAKu4H,GAAWS,EAChBh5H,KAAKm4H,iDAIP34H,sBAAI44H,0BAAJ,WACC,OAAOp4H,KAAKw4H,oCAGbJ,qBAAA,WACC,OAA2B,MAApBp4H,KAAKi5H,IAGbb,uBAAA,WACC,OAA6B,MAAtBp4H,KAAKk5H,IAGbd,uBAAA,WACC,OAA6B,MAAtBp4H,KAAKm5H,IAGbf,kBAAA,WACC,IAAMgB,EAAcp5H,KAAKq4H,GAAaf,UACtCt3H,KAAKu4H,GAAShuF,QAAS6uF,GACvBp5H,KAAKq5H,WAGIjB,oBAAV,WACCp4H,KAAKm4H,gBAGIC,yBAAV,WACC,IAAMY,EAAUh5H,KAAKu4H,GACfe,EAAat5H,KAAKw4H,GACxBc,EAAW7rF,OAAQztC,KAAKu4H,IAExB,IAAMgB,EAAav5H,KAAKi5H,GACxB,GAAIM,EAAa,CAChB,IAAMtC,EAAQqC,EAAWrC,MACzBsC,EAAW9qG,MAAQuqG,EAAQ9yF,WAC3BqzF,EAAW3vH,IAAMqtH,EAAMrtH,IAAKovH,GAC5BO,EAAWzvH,IAAMmtH,EAAMntH,IAAKkvH,GAG7B,IAAMQ,EAAex5H,KAAKk5H,GAC1B,GAAIM,EAAe,CAClB,IAAMtC,EAAUoC,EAAWpC,QAC3BsC,EAAa/qG,MAAQuqG,EAAQtxF,aAC7B8xF,EAAa5vH,IAAMstH,EAAQttH,IAAKovH,GAChCQ,EAAa1vH,IAAMotH,EAAQptH,IAAKkvH,GAGjC,IAAMS,EAAez5H,KAAKm5H,GAC1B,GAAIM,EAAe,CAClB,IAAMtC,EAAUmC,EAAWnC,QAC3BsC,EAAahrG,MAAQuqG,EAAQrvF,aAC7B8vF,EAAa7vH,IAAMutH,EAAQvtH,IAAKovH,GAChCS,EAAa3vH,IAAMqtH,EAAQrtH,IAAKkvH,KAIxBZ,wBAAV,SAAuBz2H,EAAcC,EAA8BwwB,GAClE,IAAM9uB,EAAU1B,GAA2B,MAAhBA,EAAQ0B,KAAgB1B,EAAQ0B,KAAO3B,EAAMqL,UAKxE,OAJAhN,KAAKw4H,GAAYl1H,KAAOA,EACxBtD,KAAKi5H,GAAiB31H,EAAO43F,GAAoBkB,MAASp8F,KAAK05H,cAAe/3H,EAAOC,GAAY,KACjG5B,KAAKk5H,GAAmB51H,EAAO43F,GAAoBmB,QAAWr8F,KAAK25H,gBAAiBh4H,EAAOC,GAAY,KACvG5B,KAAKm5H,GAAmB71H,EAAO43F,GAAoB0C,QAAW59F,KAAK45H,gBAAiBj4H,EAAOC,GAAY,KAChG,CACN5B,KAAK65H,cACJ75H,KAAKi5H,GACLj5H,KAAKk5H,GACLl5H,KAAKm5H,GACL/mG,KAKOgmG,0BAAV,SACCnB,EACAC,EACAC,EACA/kG,GAEA,IAAM3R,EAAWzgB,KAAK85H,sBAAuB7C,EAAOC,EAASC,GAC7D,OAAI,EAAI12G,EAAS/f,OACT,IAAIgjH,GAAkB,CAC5BxgH,MAAOlD,KAAK+5H,qBACZpzH,OAAQ3G,KAAKg6H,sBACb5nG,SACA3R,aAGK,MAGE23G,+BAAV,WACC,MAAO,QAGEA,gCAAV,WACC,MAAO,QAGEA,kCAAV,SACCnB,EACAC,EACAC,GAEA,IAAM30H,EAAS,GAgBf,OAfa,MAATy0H,GACHz0H,EAAOhC,KAAMy2H,GAEC,MAAXC,IACC,EAAI10H,EAAO9B,QACd8B,EAAOhC,KAAMR,KAAKi6H,sBAEnBz3H,EAAOhC,KAAM02H,IAEC,MAAXC,IACC,EAAI30H,EAAO9B,QACd8B,EAAOhC,KAAMR,KAAKk6H,sBAEnB13H,EAAOhC,KAAM22H,IAEP30H,GAGE41H,+BAAV,WACC,OAAO,IAAIpR,GAAM,CAChB9jH,MAAO,OACP8lB,KAAM,CACLyF,MAAOzuB,KAAKm6H,yBAKf/B,+BAAA,WACC,MAAO,KAGEA,+BAAV,WACC,OAAO,IAAIpR,GAAM,CAChB9jH,MAAO,OACP8lB,KAAM,CACLyF,MAAOzuB,KAAKo6H,yBAKfhC,+BAAA,WACC,MAAO,KAGEA,+BAAV,SAA8Bz2H,EAAcC,EAA+BkI,GAU1E,OAToB,MAAhBlI,EAAQokC,OACXpkC,EAAQokC,KAAO,GAEG,MAAfpkC,EAAQgI,MACXhI,EAAQgI,IAAM,GAEI,MAAfhI,EAAQkI,MACXlI,EAAQkI,IAAMA,GAERlI,GAGEw2H,0BAAV,SAAyBz2H,EAAcC,GAAvC,WACOy4H,EAAiBz4H,GAAWA,EAAQq1H,OAAWt1H,EAAM24H,kBACrDxwH,EAAM9J,KAAKw4H,GAAYnC,SAASC,KAAKxsH,IACrC+vC,EAAQ,IAAIg8E,GAAe71H,KAAKu6H,mBAAoB54H,EAAO04H,EAAcvwH,IAI/E,OAHA+vC,EAAMlpC,GAAI,UAAU,SAAE8d,GACrBxnB,EAAKuzH,eAAgB/rG,MAEforB,GAGEu+E,2BAAV,SAA0B3pG,GACTzuB,KAAKu4H,GACbd,SAAUhpG,GAClBzuB,KAAKm4H,gBAGIC,4BAAV,SAA2Bz2H,EAAcC,GAAzC,WACOy4H,EAAiBz4H,GAAWA,EAAQs1H,SAAav1H,EAAM84H,oBACvD3wH,EAAM9J,KAAKw4H,GAAYnC,SAASG,OAAO1sH,IACvC+vC,EAAQ,IAAIg8E,GAAe71H,KAAKu6H,mBAAoB54H,EAAO04H,EAAcvwH,IAI/E,OAHA+vC,EAAMlpC,GAAI,UAAU,SAAE8d,GACrBxnB,EAAKyzH,iBAAkBjsG,MAEjBorB,GAGEu+E,6BAAV,SAA4B3pG,GACXzuB,KAAKu4H,GACbf,WAAY/oG,GACpBzuB,KAAKm4H,gBAGIC,4BAAV,SAA2Bz2H,EAAcC,GAAzC,WACOy4H,EAAiBz4H,GAAWA,EAAQu1H,SAAax1H,EAAMg5H,oBACvD7wH,EAAM9J,KAAKw4H,GAAYnC,SAASr8B,OAAOlwF,IACvC+vC,EAAQ,IAAIg8E,GAAe71H,KAAKu6H,mBAAoB54H,EAAO04H,EAAcvwH,IAI/E,OAHA+vC,EAAMlpC,GAAI,UAAU,SAAE8d,GACrBxnB,EAAK2zH,iBAAkBnsG,MAEjBorB,GAGEu+E,6BAAV,SAA4B3pG,GAC3BzuB,KAAKu4H,GAAShB,WAAY9oG,IAGjB2pG,oBAAV,WACC,MAAO,kBA1QCz3G,kBCvCV,4DAwPA,OArPU7gB,OAOC+6H,iBAAV,SAAgBj5H,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAK86H,GAAY,IAAIzwF,KAAMrqC,KAAKq4H,GAAaf,YAGpCuD,wBAAV,SAAuBl5H,EAAcC,EAA8BwwB,GAClEpyB,KAAK+6H,GAAe/6H,KAAKg7H,eAAgBr5H,EAAOC,GAChD5B,KAAKi7H,GAAmBr5H,GAAWA,EAAQqkC,MAAQrkC,EAAQqkC,KAAKi1F,WAC/Dv5H,EAAMw5H,mBACPn7H,KAAKknH,GAASlnH,KAAKo7H,WACnBp7H,KAAKq7H,GAAoBz5H,GAAWA,EAAQulH,OAASvlH,EAAQulH,MAAMt3F,WAClEluB,EAAM25H,oBACP,IAAM94H,EAASsE,YAAMgyH,sBAAan3H,EAAOC,EAASwwB,GAsBlD,OArBA5vB,EAAOse,QACN,IAAI4iG,GAAkB,CACrBxgH,MAAO,OAAQyD,OAAQ,OACvB8Z,SAAU,CACTzgB,KAAKu7H,cAAe55H,EAAOC,GAC3B5B,KAAKknH,GACLlnH,KAAKw7H,cAAe75H,EAAOC,MAG7B,IAAI8hH,GAAkB,CACrBxgH,MAAO,OAAQyD,OAAQ,OACvByrB,SACA3R,SAAUzgB,KAAKy7H,cAAe95H,EAAOC,KAEtC,IAAIqlD,GAAgB,CACnB/jD,MAAO,OAAQyD,OAAQ,OACvByrB,SACAoxB,OAAQ,EACR/iC,SAAUzgB,KAAK+6H,MAGVv4H,GAGRhD,sBAAIq7H,wBAAJ,WACC,OAAO76H,KAAK86H,QAGb,SAAUY,GACL17H,KAAK86H,GAAUxD,YAAcoE,EAASpE,YACzCt3H,KAAK86H,GAAYY,EACjB17H,KAAK27H,kDAIGd,oBAAV,WACC76H,KAAK86H,GAAUvwF,QAASvqC,KAAKq4H,GAAaf,WAC1CxwH,YAAMuyH,oBAGPwB,iBAAA,WACC,IAAM1zG,EAAOnnB,KAAK86H,GAClB3zG,EAAKy0G,YAAaz0G,EAAKgiB,cAAehiB,EAAKqgB,WAAa,EAAG,GAC3DrgB,EAAKswG,SAAU,EAAG,EAAG,EAAG,GACxBz3H,KAAK27H,iBAGNd,iBAAA,WACC,IAAM1zG,EAAOnnB,KAAK86H,GAClB3zG,EAAKy0G,YAAaz0G,EAAKgiB,cAAehiB,EAAKqgB,WAAa,EAAG,GAC3DrgB,EAAKswG,SAAU,EAAG,EAAG,EAAG,GACxBz3H,KAAK27H,iBAGNd,yBAAA,WACC76H,KAAKw4H,GAAY/qF,OAAQztC,KAAK86H,IAC9Bh0H,YAAMqxH,wBACNn4H,KAAK27H,iBAGId,0BAAV,WACC,IAAMgB,EAAU77H,KAAK+6H,GACf9zG,EAASjnB,KAAKw4H,GACdkD,EAAW17H,KAAK86H,GAChB9B,EAAUh5H,KAAKu4H,GAEfjrE,EAAM,IAAIjjB,KAAMqxF,EAASpE,WAC/BhqE,EAAIoqE,QAAS,GACbpqE,EAAImqE,SAAU,EAAG,EAAG,EAAG,GAKvB,IAFA,IAAM91H,EAAQ3B,KAAK2B,MACbm6H,GAAexuE,EAAIyuE,SAAWp6H,EAAMq6H,cAAgB,GAAM,EACvDz6H,EAAI,EAAGA,EAAIu6H,IAAcv6H,EACjCs6H,EAASt6H,GAAIu9C,OAEd,IAASv9C,EAAIu6H,EAAYv6H,EAAI,IAAKA,EACjCs6H,EAASt6H,GAAIs9C,OAId,IAAMo9E,EAAgBj8H,KAAKi7H,GAC3B3tE,EAAIsuE,YAAatuE,EAAInkB,cAAemkB,EAAI9lB,WAAa,EAAG,GACxD,IAAM00F,EAAY5uE,EAAIhnB,UAChB61F,EAAgBnD,EAAQ7vF,gBAAkBmkB,EAAInkB,eACnD6vF,EAAQxxF,aAAe8lB,EAAI9lB,WAAawxF,EAAQ1yF,UAAY,EAC7D,IAAS/kC,EAAI,EAAGA,EAAI26H,IAAa36H,EAChC+rD,EAAIoqE,QAASn2H,EAAI,IAEXygD,EAAS65E,EAASt6H,EAAI,IACrBw1B,UAAWolG,IAAgB56H,EAAI,GACtCygD,EAAOo6E,aAAen1G,EAAOjO,SAAUs0C,IACvCtL,EAAOlD,OAEPm9E,EAAe3uE,EAAKtL,GAErB,IAASzgD,EAAI26H,EAAW36H,EAAI,KAAMA,EAAI,CACrC,IAAMygD,GAAAA,EAAS65E,EAASt6H,EAAI,IACrBw1B,WAAW,GAClBirB,EAAOnD,OAIR7+C,KAAKknH,GAAOl+F,KAAOhpB,KAAKq7H,GAAiBK,IAGhCb,+BAAV,SAA8Bl5H,EAAcC,EAA+BkI,GAI1E,OAHsB,MAAlBlI,EAAQqd,SACXrd,EAAQqd,OAAS,GAEXnY,YAAMyzH,6BAAoB54H,EAAOC,EAASkI,IAGxC+wH,+BAAV,WACC,MAAO,QAGEA,qBAAV,WACC,OAAO,IAAInF,GAAqB,CAC/Bz2G,OAAQ,EACRha,QAAS,EACT+jB,KAAM,CACL5lB,MAAO,CACNqsB,WAAY,UAEbhB,MAAO,OAKAosG,0BAAV,SAAyBl5H,EAAcC,GAAvC,WACOy6H,EAAkBz6H,QAA4BW,IAAjBX,EAAQ06H,KAC1C16H,EAAQ06H,KAAO36H,EAAM46H,uBACtB,GAAqB,MAAjBF,EAAwB,CAC3B,IAAMr6E,EAAS,IAAIuzE,GAA2B8G,GAI9C,OAHAr6E,EAAOrxC,GAAI,UAAU,WACpB1J,EAAKq1H,UAECt6E,EAER,OAAO,MAGE64E,0BAAV,SAAyBl5H,EAAcC,GAAvC,WACOy6H,EAAkBz6H,QAA4BW,IAAjBX,EAAQ4nB,KAC1C5nB,EAAQ4nB,KAAO7nB,EAAM66H,uBACtB,GAAqB,MAAjBH,EAAwB,CAC3B,IAAMr6E,EAAS,IAAIyzE,GAA2B4G,GAI9C,OAHAr6E,EAAOrxC,GAAI,UAAU,WACpB1J,EAAKuiB,UAECw4B,EAER,OAAO,MAGE64E,0BAAV,SAAyBl5H,EAAcC,GAItC,IAHA,IAAM66H,EAAa96H,EAAM+6H,eACnBC,EAAWh7H,EAAMq6H,cACjBx5H,EAAqC,GAClCjB,EAAI,EAAGA,EAAI,IAAKA,EAAI,CAC5B,IAAM4lH,EAAQsV,GAAaE,EAAWp7H,GAAK,GAC3CiB,EAAOhC,KACNR,KAAK48H,aAAcj7H,EAAOC,EAASulH,IAGrC,OAAO3kH,GAGEq4H,yBAAV,SAAwBl5H,EAAcC,EAA8BulH,GACnE,OAAO,IAAIwO,GAAyB,CACnC3sG,KAAM,CACLyF,MAAO04F,MAKA0T,2BAAV,SACCl5H,EAAcC,GAGd,IADA,IAAMY,EAAkE,GAC/DjB,EAAI,EAAGA,EAAI,IAAKA,EACxBiB,EAAOhC,KACNR,KAAK68H,SAAUl7H,EAAOC,IAGxB,IAASL,EAAI,EAAGA,GAAK,KAAMA,EAC1BiB,EAAOhC,KACNR,KAAK88H,cAAen7H,EAAOC,EAASL,IAGtC,OAAOiB,GAGEq4H,qBAAV,SAAoBl5H,EAAcC,GACjC,OAAO,IAAIg0H,IAGFiF,0BAAV,SAAyBl5H,EAAcC,EAA8BqkC,GAArE,WACC,OAAO,IAAIuvF,GAA0B,CACpCxsG,KAAM,CACLyF,MAAO4X,OAAQJ,IAEhBt1B,GAAI,CACH4zG,OAAQ,WACPt9G,EAAK81H,oBAAqB92F,QAMpB40F,gCAAV,SAA+B50F,GAC9B,IAAM+yF,EAAUh5H,KAAKu4H,GACrB,GAAIS,EAAQ1yF,YAAcL,EAAO,CAChC,IAAMy1F,EAAW17H,KAAK86H,GACtB9B,EAAQ4C,YAAaF,EAASvyF,eAC9B6vF,EAAQgE,SAAUtB,EAASl0F,YAC3BwxF,EAAQtB,QAASzxF,GACjBjmC,KAAKm4H,iBAIG0C,oBAAV,WACC,MAAO,sBAnPCzC,mBCnCV,4DAOA,OAJUt4H,OACCm9H,oBAAV,WACC,MAAO,kBAFCpC,mBCDV,4DA6CA,OA1CU/6H,OAGCo9H,mBAAV,SAAkBtoH,EAAyBhT,GAC1CkF,YAAMk9G,iBAAQpvG,EAAQhT,GAEtB,IAAMyvH,EAAS,IAAI4L,GAAar7H,GAAWA,EAAQyvH,QACnDrxH,KAAKsxH,GAAUD,EACfz8G,EAAO4L,SAAU6wG,IAGlB7xH,sBAAI09H,2BAAJ,WACC,OAAOl9H,KAAKsxH,GAAQ/9G,aAGrB,SAAawlH,GACZ/4H,KAAKsxH,GAAQ/9G,QAAUwlH,mCAGxBv5H,sBAAI09H,uBAAJ,WACC,OAAOl9H,KAAKsxH,GAAQ0C,SAGrB,SAASgF,GACRh5H,KAAKsxH,GAAQ0C,IAAMgF,mCAGpBx5H,sBAAI09H,wBAAJ,WACC,OAAOl9H,KAAKsxH,GAAQ0C,SAGrB,SAAU0H,GACT17H,KAAKsxH,GAAQ6L,KAAOzB,mCAGrBl8H,sBAAI09H,0BAAJ,WACC,OAAOl9H,KAAKsxH,oCAGH4L,oBAAV,WACC,MAAO,kBAxCCvZ,kBCfV,cAQA,OANQyZ,cAAP,WAIC,OAH6B,MAAzBA,EAAa5nH,WAChB4nH,EAAa5nH,SAAW,IAAI0nH,IAEtBE,EAAa5nH,8BCStB,4DAuDA,OApDU1V,OAICu9H,iBAAV,SAAgBz7H,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK40H,GAAiBhzH,GAAWA,EAAQizH,OAEzC70H,KAAK2Q,GAAI,UAAU,WAClB,IAAMyoH,EAAcnyH,EAAK2nB,GAAmB0oG,UACtCzC,EAAS5tH,EAAK4tH,OACpBA,EAAOthH,QAAU,IAAI82B,KAAM+uF,GAC3BvE,EAAOb,IAAM,IAAI3pF,KAAM+uF,GACvBvE,EAAOsI,KAAO,IAAI9yF,KAAM+uF,GACxBvE,EAAO98E,OAAOwJ,MAAK,WAClB,IAAMy3E,EAAUnE,EAAOb,IACjB+E,EAAclE,EAAOthH,QAC3BtM,EAAK2Q,KAAM,SAAUohH,EAASD,EAAa9xH,GAC3CA,EAAK+hB,KAAO,IAAIqhB,KAAM2uF,EAAQ1B,WAC9BrwH,EAAK2Q,KAAM,SAAU3Q,UAKxBzH,sBAAI69H,0BAAJ,WACC,IAAIxI,EAAS70H,KAAK+0H,GAUlB,OATc,MAAVF,IAGFA,EADoB,MADC70H,KAAK40H,GAEjB,IAAIsI,GAAal9H,KAAK40H,IAEtBwI,GAAavhH,cAEvB7b,KAAK+0H,GAAUF,GAETA,mCAGRr1H,sBAAI69H,yBAAJ,WACC,OAAOr9H,KAAK4uB,QAGb,SAAWH,GACNzuB,KAAK4uB,GAAmB0oG,YAAc7oG,EAAM6oG,YAC/Ct3H,KAAKgpB,KAAOyF,oCAIJ4uG,oBAAV,WACC,MAAO,kBAlDCha,mBCNV,4DA6CA,OA1CUvjH,OAGCw9H,mBAAV,SAAkB1oH,EAAyBhT,GAC1CkF,YAAMk9G,iBAAQpvG,EAAQhT,GAEtB,IAAMyvH,EAAS,IAAIwJ,GAAiBj5H,GAAWA,EAAQyvH,QACvDrxH,KAAKsxH,GAAUD,EACfz8G,EAAO4L,SAAU6wG,IAGlB7xH,sBAAI89H,2BAAJ,WACC,OAAOt9H,KAAKsxH,GAAQ/9G,aAGrB,SAAawlH,GACZ/4H,KAAKsxH,GAAQ/9G,QAAUwlH,mCAGxBv5H,sBAAI89H,uBAAJ,WACC,OAAOt9H,KAAKsxH,GAAQ0C,SAGrB,SAASgF,GACRh5H,KAAKsxH,GAAQ0C,IAAMgF,mCAGpBx5H,sBAAI89H,wBAAJ,WACC,OAAOt9H,KAAKsxH,GAAQ0C,SAGrB,SAAU0H,GACT17H,KAAKsxH,GAAQ6L,KAAOzB,mCAGrBl8H,sBAAI89H,0BAAJ,WACC,OAAOt9H,KAAKsxH,oCAGHgM,oBAAV,WACC,MAAO,sBAxCC3Z,kBCfV,cAQA,OANQ4Z,cAAP,WAIC,OAHiC,MAA7BA,EAAiB/nH,WACpB+nH,EAAiB/nH,SAAW,IAAI8nH,IAE1BC,EAAiB/nH,8BCW1B,4DA6DA,OA1DU1V,OAKC09H,iBAAV,SAAgB57H,GAAhB,WACC5B,KAAK40H,GAAiBhzH,GAAWA,EAAQizH,OACzC70H,KAAKy9H,GAAgB5/B,GAAiB6/B,OAAQ97H,GAAWA,EAAQizH,QAAUjzH,EAAQizH,OAAOxD,QAE1FvqH,YAAMwZ,eAAM1e,GAEZ5B,KAAK2Q,GAAI,UAAU,WAClB,IAAMyoH,EAAcnyH,EAAK2nB,GAAmB0oG,UACtCzC,EAAS5tH,EAAK4tH,OACpBA,EAAOthH,QAAU,IAAI82B,KAAM+uF,GAC3BvE,EAAOb,IAAM,IAAI3pF,KAAM+uF,GACvBvE,EAAOsI,KAAO,IAAI9yF,KAAM+uF,GACxBvE,EAAO98E,OAAOwJ,MAAK,WAClB,IAAMy3E,EAAUnE,EAAOb,IACjB+E,EAAclE,EAAOthH,QAC3BtM,EAAK2Q,KAAM,SAAUohH,EAASD,EAAa9xH,GAC3CA,EAAK+hB,KAAO,IAAIqhB,KAAM2uF,EAAQ1B,WAC9BrwH,EAAK2Q,KAAM,SAAU3Q,UAKxBu2H,4BAAA,WACC,OAAOx9H,KAAKy9H,IAGbj+H,sBAAIg+H,0BAAJ,WACC,IAAI3I,EAAS70H,KAAK+0H,GAUlB,OATc,MAAVF,IAGFA,EADoB,MADC70H,KAAK40H,GAEjB,IAAI0I,GAAiBt9H,KAAK40H,IAE1B2I,GAAiB1hH,cAE3B7b,KAAK+0H,GAAUF,GAETA,mCAGRr1H,sBAAIg+H,yBAAJ,WACC,OAAOx9H,KAAK4uB,QAGb,SAAWH,GACNzuB,KAAK4uB,GAAmB0oG,YAAc7oG,EAAM6oG,YAC/Ct3H,KAAKgpB,KAAOyF,oCAIJ+uG,oBAAV,WACC,MAAO,sBAxDCna,IClBIsa,GAAgBjqF,kBAc9B,4DA+CA,OA3CU5zC,OAIC89H,iBAAV,SAAgBh8H,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAKu0C,GAAwB,MAAX3yC,GAAsC,MAAnBA,EAAQuyC,QAAkBvyC,EAAQuyC,aAAU5xC,EACjF,IAAMg3C,EAAiC,MAAX33C,GAAiC,MAAdA,EAAQ23C,GACpD12C,EAAcjB,EAAQ23C,IAAOokF,GAAe/7H,EAAQ23C,IAAO33C,EAAQ23C,GACrEokF,GAAc/oG,KAET0hD,EAAS,IAAI18B,GAAgBL,EAAIv5C,MACvCA,KAAK69H,GAAUvnD,EACft2E,KAAK2Q,GAAI,UAAU,WAClB,IAAMnO,EAASyE,EAAK62H,aACL,IAAXt7H,EACH8zE,EAAOv+B,QACc,IAAXv1C,GAGVA,EAAO++C,MAAK,WACX+0B,EAAOv+B,cAMX6lF,sBAAA,WACC,IAAMzpF,EAAUn0C,KAAKu0C,GACrB,OAAe,MAAXJ,GACIA,KAKTypF,iBAAA,WACC59H,KAAK69H,GAAQ9lF,QAGJ6lF,oBAAV,WACC,MAAO,kBAzCCva,mBCLT,WAAazhH,GAAb,MACCkF,mBAWA,GATAG,EAAK82H,GAAW,GAChB92H,EAAK+2H,GAAU,KACf/2H,EAAKg3H,GAAW35H,EAAW+Z,KAC3BpX,EAAKi3H,GAAY55H,EAAW+Z,KAC5BpX,EAAKk3H,GAAiB,SAAEn8E,GACvB/6C,EAAKm3H,SAAUp8E,IAID,MAAXpgD,EAAkB,CACrB,IAAM+O,EAAK/O,EAAQ+O,GACnB,GAAU,MAANA,EACH,IAAK,IAAMiO,KAAQjO,EAClB1J,EAAK0J,GAAIiO,EAAMjO,EAAIiO,WAMtB3X,EAAK2Q,KAAM,OAAQ3Q,KAmIrB,OAhKkCnH,OAgCjCu+H,gBAAA,SAAKr8E,GACYhiD,KAAK+9H,GACCl9H,QAASmhD,GACnB,IACXhiD,KAAK+9H,GAASv9H,KAAMwhD,GACpBA,EAAOtxC,SAAU1Q,KAAKi+H,IAAU,GAChCj8E,EAAOtxC,SAAU1Q,KAAKk+H,IAAW,GACjCl8E,EAAOrxC,GAAI,SAAU3Q,KAAKm+H,IACtBn8E,EAAOv/B,YACVziB,KAAKo+H,SAAUp8E,KAKlBxiD,sBAAI6+H,0BAAJ,WACC,OAAOr+H,KAAKg+H,oCAGHK,qBAAV,SAAoB9Z,GACnB,GAAIA,EAAO5B,WAAa,CACvB3iH,KAAKg+H,GAAUzZ,EAEf,IADA,IAAMsX,EAAU77H,KAAK+9H,GACZx8H,EAAI,EAAGC,EAAOq6H,EAAQn7H,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAMygD,EAAS65E,EAASt6H,GACpBygD,IAAWuiE,GAAUviE,EAAO2gE,YAAc3gE,EAAOv/B,YACpDu/B,EAAOjoC,aAMXskH,mBAAA,SAAQr8E,GACP,IAAM65E,EAAU77H,KAAK+9H,GACfn9H,EAAQi7H,EAAQh7H,QAASmhD,GAC3B,GAAKphD,IACRi7H,EAAQtpH,OAAQ3R,EAAO,GACvBohD,EAAOppC,IAAK,SAAU5Y,KAAKm+H,MAI7BE,qBAAA,SAAUr8E,GAGT,OAAS,GAFOhiD,KAAK+9H,GACCl9H,QAASmhD,IAIhCq8E,uBAAA,SAAYh8G,GACX,OAAOriB,KAAK0Q,SAAUpM,EAAWoL,QAAS2S,IAG3Cg8G,sBAAA,SAAW57G,GACV,OAAOziB,KAAK0Q,SAAUpM,EAAWwL,OAAQ2S,IAG1C47G,wBAAA,SAAa17G,GACZ,OAAO3iB,KAAK0Q,SAAUpM,EAAW4L,UAAWyS,IAG7C07G,wBAAA,SAAaz7G,GACZ,OAAO5iB,KAAK0Q,SAAUpM,EAAW0L,SAAU4S,IAG5Cy7G,wBAAA,SAAax7G,GACZ,OAAO7iB,KAAK0Q,SAAUpM,EAAWqL,SAAUkT,IAG5Cw7G,sBAAA,WACC,OAAOr+H,KAAKujB,SAAUjf,EAAWoL,UAGlC2uH,qBAAA,WACC,OAAOr+H,KAAKujB,SAAUjf,EAAWwL,SAGlCuuH,uBAAA,WACC,OAAOr+H,KAAKujB,SAAUjf,EAAW4L,YAGlCmuH,uBAAA,WACC,OAAOr+H,KAAKujB,SAAUjf,EAAW0L,WAGlCquH,uBAAA,WACC,OAAOr+H,KAAKujB,SAAUjf,EAAWqL,WAGlC0uH,sBAAA,WACC,OAAOr+H,KAAKujB,SAAUjf,EAAWsL,UAGlCyuH,0BAAA,WACC,OAAOr+H,KAAKujB,SAAUjf,EAAWkf,cAGlC66G,qBAAA,SAAU/7H,EAAmBmhB,GACxBA,GACHzjB,KAAKi+H,IAAY37H,EACjBtC,KAAKk+H,KAAc57H,IAEnBtC,KAAKk+H,IAAa57H,EAClBtC,KAAKi+H,KAAa37H,GAInB,IADA,IAAMu5H,EAAU77H,KAAK+9H,GACZx8H,EAAI,EAAGC,EAAOq6H,EAAQn7H,OAAQa,EAAIC,IAAQD,EACnCs6H,EAASt6H,GACjBmP,SAAUpO,EAAOmhB,GAEzB,OAAOzjB,MAGRq+H,qBAAA,SAAU/7H,GAET,IADA,IAAMu5H,EAAU77H,KAAK+9H,GACZx8H,EAAI,EAAGC,EAAOq6H,EAAQn7H,OAAQa,EAAIC,IAAQD,EAClD,GAAIs6H,EAASt6H,GAAIgiB,SAAUjhB,GAC1B,OAAO,EAGT,OAAO,GAGR+7H,kBAAA,WACCr+H,KAAK+9H,GAASr9H,OAAS,GAGxB29H,oBAAA,WACCr+H,KAAKud,YA9J2B+d,QAAMoU,6BCGxC,4DAQA,OAJU5vC,OACCw+H,oBAAV,WACC,MAAO,mBAFC7b,mBCJV,4DAQA,OAJU3iH,OACCy+H,oBAAV,WACC,MAAO,wBAFCD,mBCRT,WAAa18H,GAAb,MACCkF,YAAOlF,SAED48H,EAAoBxf,GAAayf,8BACvCx3H,EAAKyJ,SAAUpM,EAAW0L,UAAYwuH,EAAkB7f,cACxD6f,EAAkB7tH,GAAI,UAAU,WAC/B1J,EAAKyJ,SAAUpM,EAAW0L,UAAYwuH,EAAkB7f,iBAGzD13G,EAAK0J,GAAI,UAAU,WAClB6tH,EAAkBjgB,YAGrB,OAdUz+G,UAAAujH,mBCNV,4DAIA,OAJsCvjH,OAC3B4+H,oBAAV,WACC,MAAO,uBAF6Brb,mBCYtC,4DAqCA,OAlCUvjH,OAGC6+H,mBAAV,SAAkB/pH,EAAyBhT,GAC1CkF,YAAMk9G,iBAAQpvG,EAAQhT,GAEtB,IAAMyvH,EAAS,IAAI+G,GAAax2H,GAAWA,EAAQyvH,QACnDrxH,KAAKsxH,GAAUD,EACfz8G,EAAO4L,SAAU6wG,IAGlB7xH,sBAAIm/H,2BAAJ,WACC,OAAO3+H,KAAKsxH,GAAQ/9G,aAGrB,SAAawlH,GACZ/4H,KAAKsxH,GAAQ/9G,QAAUwlH,mCAGxBv5H,sBAAIm/H,uBAAJ,WACC,OAAO3+H,KAAKsxH,GAAQ0C,SAGrB,SAASgF,GACRh5H,KAAKsxH,GAAQ0C,IAAMgF,mCAGpBx5H,sBAAIm/H,0BAAJ,WACC,OAAO3+H,KAAKsxH,oCAGHqN,oBAAV,WACC,MAAO,kBAhCChb,kBCfV,cAQA,OANQib,cAAP,WAIC,OAH6B,MAAzBA,EAAappH,WAChBopH,EAAappH,SAAW,IAAImpH,IAEtBC,EAAappH,8BCWtB,4DA4DA,OAzDU1V,OAKC++H,iBAAV,SAAgBj9H,GAAhB,WACC5B,KAAK40H,GAAiBhzH,GAAWA,EAAQizH,OACzC70H,KAAKy9H,GAAgB9/B,GAAa+/B,OAAQ97H,GAAWA,EAAQizH,QAAUjzH,EAAQizH,OAAOxD,QAEtFvqH,YAAMwZ,eAAM1e,GAEZ5B,KAAK2Q,GAAI,UAAU,WAClB,IAAMyoH,EAAcnyH,EAAK2nB,GAAmB0oG,UACtCzC,EAAS5tH,EAAK4tH,OACpBA,EAAOthH,QAAU,IAAI82B,KAAM+uF,GAC3BvE,EAAOb,IAAM,IAAI3pF,KAAM+uF,GACvBvE,EAAO98E,OAAOwJ,MAAK,WAClB,IAAMy3E,EAAUnE,EAAOb,IACjB+E,EAAclE,EAAOthH,QAC3BtM,EAAK2Q,KAAM,SAAUohH,EAASD,EAAa9xH,GAC3CA,EAAK+hB,KAAO,IAAIqhB,KAAM2uF,EAAQ1B,WAC9BrwH,EAAK2Q,KAAM,SAAU3Q,UAKxB43H,4BAAA,WACC,OAAO7+H,KAAKy9H,IAGbj+H,sBAAIq/H,0BAAJ,WACC,IAAIhK,EAAS70H,KAAK+0H,GAUlB,OATc,MAAVF,IAGFA,EADoB,MADC70H,KAAK40H,GAEjB,IAAI+J,GAAa3+H,KAAK40H,IAEtBgK,GAAa/iH,cAEvB7b,KAAK+0H,GAAUF,GAETA,mCAGRr1H,sBAAIq/H,yBAAJ,WACC,OAAO7+H,KAAK4uB,QAGb,SAAWH,GACNzuB,KAAK4uB,GAAmB0oG,YAAc7oG,EAAM6oG,YAC/Ct3H,KAAKgpB,KAAOyF,oCAIJowG,oBAAV,WACC,MAAO,kBAvDCxb,mBCbT,WAAazhH,GAAb,MACCkF,YAAOlF,SAED48H,EAAoBxf,GAAayf,8BACvCx3H,EAAKyJ,SAAUpM,EAAW0L,UAAYwuH,EAAkB5f,cACxD4f,EAAkB7tH,GAAI,UAAU,WAC/B1J,EAAKyJ,SAAUpM,EAAW0L,UAAYwuH,EAAkB5f,iBAGzD33G,EAAK0J,GAAI,UAAU,WAClB6tH,EAAkBpgB,YAGrB,OAdUt+G,UAAAujH,mBCHT,WAAariH,GAAb,MACC8F,0BACCG,EAAajG,OAASA,IAoDzB,OAvDuClB,OAMtCg/H,mBAAA,SAAQrzH,GACPzL,KAAK6mB,kBACL/f,YAAMrF,iBAAQgK,IAGfqzH,qBAAA,SAAUlyH,EAAa1J,EAAeyD,GACrC,IAEM5C,EAAS6I,EAAK7I,OACd8I,EAAelD,KAAKG,IAAK,EAAG/F,EAAO+I,YAAc,IACjDjG,EAAa9C,EAAOiJ,UACpBuwC,EAAO12C,EAAajE,EAAY6H,SAAW,EAAIoC,EAC/CkyH,EAAOl4H,EAAajE,EAAY+H,UAAY,EAAIkC,EAChDN,EAAO1F,EAAajE,EAAYiI,YAAc,EAAIgC,EAClDJ,EAAO5F,EAAajE,EAAYmI,aAAe,EAAI8B,EACzD7M,KAAKud,QACLvd,KAAKmuB,UAAW,SAAU,GAC1BnuB,KAAKwiD,UAAW,EAAG,EAAG,EAAG,GAAG,GACxBjF,GAAM,GAAKwhF,GAAM,GAAKxyH,GAAM,GAAKE,GAAM,GAC1CzM,KAAKyiD,OAbI,EACA,GAaTziD,KAAK0iD,OAdI,EAcQx/C,EAbR,GAcTlD,KAAK0iD,OAfI,EAeQx/C,EAdR,EAcmByD,GAC5B3G,KAAK0iD,OAhBI,EACA,EAeW/7C,GACpB3G,KAAK0iD,OAjBI,EACA,KAkBT1iD,KAAKyiD,OAnBI,EAmBQlF,EAlBR,GAmBL,EAAIwhF,EACP/+H,KAAKg/H,MArBG,EAqBQ97H,EApBR,EADA,EAqBsBA,EApBtB,EAoBiCyD,EAAQo4H,GAEjD/+H,KAAK0iD,OAvBG,EAuBSx/C,EAtBT,GAwBL,EAAIuJ,EACPzM,KAAKg/H,MA1BG,EA0BQ97H,EAzBR,EAyBmByD,EA1BnB,EACA,EAyBkCA,EAAQ8F,GAElDzM,KAAK0iD,OA5BG,EA4BSx/C,EA3BT,EA2BoByD,GAEzB,EAAI4F,EACPvM,KAAKg/H,MA/BG,EACA,EA8BWr4H,EA/BX,EACA,EA8ByB4F,GAEjCvM,KAAK0iD,OAjCG,EACA,EAgCY/7C,GAEjB,EAAI42C,EACPv9C,KAAKg/H,MApCG,EACA,EADA,EAoCc97H,EAnCd,EAmCwBq6C,GAEhCv9C,KAAK0iD,OAtCG,EACA,IAwCV1iD,KAAKquB,cArDgCC,0BCiBtC,WACCttB,EACAi+H,EACAt9H,EACAC,GAJD,WAMC5B,KAAK6qD,GAAU7pD,EACfhB,KAAKk/H,GAAWD,EAEhB,IAAME,EAAOv9H,GAAWA,EAAQu9H,KAC1B3vF,EAAS2vF,GAAqB,MAAbA,EAAK3vF,KACzB3sC,EAAcs8H,EAAK3vF,MAASivD,GAAW0gC,EAAK3vF,MAAS2vF,EAAK3vF,KAC5D7tC,EAAMy9H,cAEDn1F,EAAak1F,GAAyB,MAAjBA,EAAKl1F,SAC7BpnC,EAAcs8H,EAAKl1F,UAAaqD,GAAgB6xF,EAAKl1F,UAAak1F,EAAKl1F,SACzEtoC,EAAM09H,kBAEDpvF,EAAakvF,GAAyB,MAAjBA,EAAKlvF,SAC/BkvF,EAAKlvF,SAAW,CACft7B,SAAUhT,EAAM29H,0BAChBhjH,MAAO3a,EAAM49H,wBAGTzuH,EAAQ0+B,IAASivD,GAAUmM,MACjC5qG,KAAKw/H,GAAQ1uH,EACT0+B,IAASivD,GAAUmB,IAAMpwD,IAASivD,GAAUmM,QAC/C5qG,KAAKy/H,GAAY,IAAIpqF,GAAS,CAC7Bv0C,OAAQE,EACRkX,MAAOpH,EACPm5B,WACAkK,QAASgrF,GAAQA,EAAKhrF,QACtBS,OAAQ,CACP3E,YAEDn/B,OACAH,GAAI,CACHyY,MAAO,WACNniB,EAAKi4H,GAASjuF,QAEfn2B,KAAM,SAAE5B,EAAYE,EAAYhT,EAAWC,EAAWspC,GACrD,IAAMjX,EAAS13B,EAAO03B,OACtB,GAAc,MAAVA,EAAiB,CAEpB,IAAMod,EAAWpd,EAAOpc,MAAMjW,EACxBsnB,EAAWsxG,EAAQS,kBAAmB5pF,EAAWnG,GACjDgwF,EAAahyG,EAAWmoB,EAGxB4rB,EAAKt7D,EAAI8S,EACTyoD,EAAKt7D,EAAI+S,EACTzE,EAAW+jB,EAAO/jB,SAClBqR,GAAQrR,EAASvO,EAAIs7D,GAAMi+D,EAAav5H,EACxC6f,GAAQtR,EAAStO,EAAIs7D,GAAMg+D,EAAat5H,EAG9CqyB,EAAOpc,MAAMhW,IAAKqnB,EAAUA,GAC5B+K,EAAO/jB,SAASrO,IAAK0f,EAAMC,SAuBlC,OAfC25G,iBAAA,WACC,IAAMC,EAAW7/H,KAAKy/H,GACN,MAAZI,GACHA,EAAS5uF,QAIX2uF,mBAAA,SAAQhqH,GACP,IAAM5V,KAAKw/H,GAAQ,CAClB,IAAMK,EAAW7/H,KAAKy/H,GAClBI,GACHA,EAASngH,OAAQ9J,wBC/EpB,WAAa5U,EAA4Ci+H,EAAsChvF,GAA/F,WACCjwC,KAAK6qD,GAAU7pD,EACfhB,KAAK8/H,GAAY,EACjB9/H,KAAK+/H,GAAS,EACd//H,KAAKggI,GAAQ,EACbhgI,KAAKigI,GAAY,EACjBjgI,KAAKkgI,GAAQ,EACblgI,KAAKmgI,GAAQ,EACbngI,KAAK+xC,GAAa,IAAIhB,GAAe,CACpCV,OAAQ,SAAEc,GACTlqC,EAAKopC,OAAQc,IAEdlB,aAEDjwC,KAAKk/H,GAAWD,EAChBj/H,KAAKgwC,GAAYC,EA+CnB,OA5CWmwF,mBAAV,SAAkBjvF,GACjB,IAAM0L,EAAK,EAAI1L,EACTyL,EAAKzL,EAEL70B,EAAQtc,KAAKigI,GAAYpjF,EAAK78C,KAAK8/H,GAAYljF,EAC/Cx2C,EAAIpG,KAAKkgI,GAAQrjF,EAAK78C,KAAK+/H,GAAQnjF,EACnCv2C,EAAIrG,KAAKmgI,GAAQtjF,EAAK78C,KAAKggI,GAAQpjF,EAEnClkB,EAAS14B,KAAK6qD,GAAQnyB,OACd,MAAVA,IACHA,EAAOpc,MAAMhW,IAAKgW,EAAOA,GACzBoc,EAAO/jB,SAASrO,IAAKF,EAAGC,KAI1B+5H,kBAAA,SAAO1nG,EAAgB1S,EAAcC,EAAc0H,EAAkBsiB,EAAmBgB,GAOvF,IANa,IAATA,GACHjxC,KAAKk/H,GAASjuF,OAEC,MAAZhB,IACHA,EAAWjwC,KAAKgwC,IAEbC,GAAY,EACfvX,EAAOpc,MAAMhW,IAAKqnB,EAAUA,GAC5B+K,EAAO/jB,SAASrO,IAAK0f,EAAMC,OACrB,CACN,IAAMtR,EAAW+jB,EAAO/jB,SAClB2H,EAAQoc,EAAOpc,MACrBtc,KAAKkgI,GAAQvrH,EAASvO,EACtBpG,KAAKmgI,GAAQxrH,EAAStO,EACtBrG,KAAKigI,GAAY3jH,EAAMjW,EAEvBrG,KAAK+/H,GAAQ/5G,EACbhmB,KAAKggI,GAAQ/5G,EACbjmB,KAAK8/H,GAAYnyG,EAEjB3tB,KAAK+xC,GAAW9B,SAAWA,EAC3BjwC,KAAK+xC,GAAW3oB,UAIlBg3G,iBAAA,WACCpgI,KAAK+xC,GAAWd,2BC7BjB,WAAajwC,EAA4CW,EAAcC,GACtE5B,KAAK6qD,GAAU7pD,EAGf,IAAMq/H,EAAOz+H,GAAWA,EAAQy+H,KAChCrgI,KAAKsgI,GAAa,IAAI14G,QACtB5nB,KAAKugI,GAAWF,GAAoB,MAAZA,EAAKz2H,IAAcy2H,EAAKz2H,IAAMjI,EAAM6+H,aAC5DxgI,KAAKygI,GAAWJ,GAAoB,MAAZA,EAAKv2H,IAAcu2H,EAAKv2H,IAAMnI,EAAM++H,aAG5D,IAAMC,EAAYN,GAAQA,EAAKO,MAC/B5gI,KAAK6gI,GAAwBF,GAAiC,MAApBA,EAAUhqE,OACnDgqE,EAAUhqE,OAASh1D,EAAMm/H,qBAE1B9gI,KAAK+gI,GAAoBJ,GAAgC,MAAnBA,EAAUK,MAC/CL,EAAUK,MAAQr/H,EAAMs/H,oBAEzBjhI,KAAKkhI,GAAuBP,GAAmC,MAAtBA,EAAU12F,SAChDpnC,EAAc89H,EAAU12F,UACzBqD,GAAgBqzF,EAAU12F,UAAa02F,EAAU12F,SAElDtoC,EAAMw/H,uBAEPnhI,KAAKohI,GAAqBT,GAAaA,EAAUxsF,SAAYR,GAAgBU,MAG7E,IAAMgtF,EAAehB,GAAQA,EAAKiB,SAClCthI,KAAKuhI,GAA2BF,GAAuC,MAAvBA,EAAa1qE,OAC5D0qE,EAAa1qE,OAASh1D,EAAM6/H,wBAE7BxhI,KAAKyhI,GAAuBJ,GAAuC,MAAvBA,EAAavkF,OACxDukF,EAAavkF,OAASn7C,EAAM+/H,uBAE7B1hI,KAAK2hI,GAA0BN,GAAyC,MAAzBA,EAAap3F,SACzDpnC,EAAcw+H,EAAap3F,UAC5BqD,GAAgB+zF,EAAap3F,UAAao3F,EAAap3F,SAExDtoC,EAAMigI,0BAEP5hI,KAAK6hI,GAAyBR,GAAgBA,EAAaltF,SAAaR,GAAgBU,MACxFr0C,KAAK8hI,GAA0BT,GAAyC,MAAzBA,EAAapxF,SAC3DoxF,EAAapxF,SAAWtuC,EAAMogI,0BAI/B,IAAMC,EAAmBpgI,GAAWA,EAAQqgI,aAAergI,EAAQqgI,YAAYrB,MAC/E5gI,KAAKkiI,GAA+BF,GAA+C,MAA3BA,EAAiBrrE,OACxEqrE,EAAiBrrE,OAASh1D,EAAMwgI,4BAEjCniI,KAAKoiI,GAA2BJ,GAA8C,MAA1BA,EAAiBhB,MACpEgB,EAAiBhB,MAAQr/H,EAAM0gI,2BAEhCriI,KAAKsiI,GAA8BN,GAAiD,MAA7BA,EAAiB/3F,SACrEpnC,EAAcm/H,EAAiB/3F,UAChCqD,GAAgB00F,EAAiB/3F,UAAa+3F,EAAiB/3F,SAEhEtoC,EAAM4gI,8BAEPviI,KAAKwiI,GAA6BR,GAAoBA,EAAiB7tF,SAAaR,GAAgBU,MAGpGr0C,KAAKyiI,GAAQ,IAAI7C,GAAkD5+H,EAAQhB,KAAM2B,EAAOC,GAGxF5B,KAAKkc,GAAa,IAAIkkH,GAA+Bp/H,EAAQhB,KAAMA,KAAK8hI,IAkM1E,OA/LCtiI,sBAAIkjI,wBAAJ,WACC,OAAO1iI,KAAKyiI,oCAGbC,iBAAA,WACC1iI,KAAKyiI,GAAMxxF,OACXjxC,KAAKkc,GAAW+0B,QAGjByxF,kBAAA,SAAOzyF,EAAmBgB,GACzB,IAAMjwC,EAAShB,KAAK6qD,GACdnyB,EAAS13B,EAAO03B,OACtB,GAAc,MAAVA,EAAiB,CACpB,IAAMiqG,EAA6C,IAA/B3hI,EAAOkC,MAAQw1B,EAAOx1B,OACpC0/H,EAA+C,IAAjC5hI,EAAO2F,OAAS+xB,EAAO/xB,QAC3C3G,KAAKkc,GAAWkN,MAAOsP,EAAQiqG,EAAYC,EAAY,EAAG3yF,EAAUgB,KAItEyxF,gBAAA,SAAKzyF,EAAmBgB,GACvB,IAAMjwC,EAAShB,KAAK6qD,GACdnyB,EAAS13B,EAAO03B,OACtB,GAAc,MAAVA,EAAiB,CACpB,IAAMzzB,EAAUjE,EAAOiE,QACjB/B,EAAQlC,EAAOkC,MACfyD,EAAS3F,EAAO2F,OAChBg0B,EAAcjC,EAAOx1B,MACrB23B,EAAenC,EAAO/xB,OACtBk8H,GAAgB3/H,EAAQ+B,EAAQ2c,UAAY3c,EAAQggB,YAAc0V,EAClEmoG,GAAgBn8H,EAAS1B,EAAQ6c,SAAW7c,EAAQigB,aAAe2V,EACnEkoG,EAAiB/iI,KAAK0/H,kBAAmB/1H,KAAKC,IAAKi5H,EAAcC,IAGjEH,EAAwC,IAA1Bz/H,EAFGy3B,EAAcooG,GAG/BH,EAA0C,IAA5Bj8H,EAFIk0B,EAAekoG,GAGvC/iI,KAAKkc,GAAWkN,MAAOsP,EAAQiqG,EAAYC,EAAYG,EAAgB9yF,EAAUgB,KAInFyxF,mBAAA,SAAQzyF,EAAmBgB,GAC1BjxC,KAAKqgI,KAAMrgI,KAAKsc,MAAQtc,KAAKyhI,GAAoBxxF,EAAUgB,IAG5DyxF,oBAAA,SAASzyF,EAAmBgB,GAC3BjxC,KAAKqgI,KAAMrgI,KAAKsc,MAAQtc,KAAKyhI,GAAoBxxF,EAAUgB,IAS5DyxF,mBAAA,SAAQt8H,EAAWC,EAAWiW,EAAe2zB,EAAmBgB,GAC/D,IACMvY,EADS14B,KAAK6qD,GACEnyB,OACtB,GAAc,MAAVA,EAAiB,CAEpB,IAAMsqG,EAAiBtqG,EAAOpc,MAAMjW,EAC9B08H,EAAiB/iI,KAAK0/H,kBAAmBpjH,GACzC2mH,EAAmBF,EAAiBC,EAGpCL,GAAcjqG,EAAOtyB,EAAIA,GAAK68H,EAAmB78H,EACjDw8H,GAAclqG,EAAOryB,EAAIA,GAAK48H,EAAmB58H,EAGvDrG,KAAKkc,GAAWkN,MAAOsP,EAAQiqG,EAAYC,EAAYG,EAAgB9yF,EAAUgB,KAInFyxF,yBAAA,SAAct8H,EAAWC,EAAWiW,EAAe2zB,EAAmBgB,GACrE,IAAMw/E,EAAQzwH,KAAKsgI,GACnB7P,EAAMnqH,IAAKF,EAAGC,GACdrG,KAAK4tC,QAAS6iF,EAAOA,GACrBzwH,KAAKkjI,OAAQzS,EAAMrqH,EAAGqqH,EAAMpqH,EAAGiW,EAAO2zB,EAAUgB,IAGjDyxF,iBAAA,SAAMpmH,EAAe2zB,EAAmBgB,GACvC,IAAMjwC,EAAShB,KAAK6qD,GACpB7qD,KAAKkjI,OAAuB,GAAfliI,EAAOkC,MAA6B,GAAhBlC,EAAO2F,OAAc2V,EAAO2zB,EAAUgB,IAGxEzxC,sBAAIkjI,yBAAJ,WACC,IACMhqG,EADS14B,KAAK6qD,GACEnyB,OACtB,OAAc,MAAVA,EACIA,EAAOpc,MAAMjW,EAEb,OAIT,SAAWiW,GACV,IACMoc,EADS14B,KAAK6qD,GACEnyB,OACtB,GAAc,MAAVA,EAAiB,CACpB,IAAM/K,EAAW3tB,KAAK0/H,kBAAmBpjH,GACzCoc,EAAOpc,MAAMhW,IAAKqnB,EAAUA,qCAI9B+0G,mBAAA,SAAQt8H,EAAWC,EAAW4pC,EAAmBgB,GAChD,IACMvY,EADS14B,KAAK6qD,GACEnyB,OACR,MAAVA,GACH14B,KAAKkc,GAAWkN,MAAOsP,EAAQtyB,EAAGC,EAAGqyB,EAAOpc,MAAMjW,EAAG4pC,EAAUgB,IAIjEzxC,sBAAIkjI,4BAAJ,WACC,IACMhqG,EADS14B,KAAK6qD,GACEnyB,OACtB,OAAc,MAAVA,EACIA,EAAO/jB,SAER,IAAIiT,QAAO,EAAG,QAGtB,SAAcjT,GACb,IACM+jB,EADS14B,KAAK6qD,GACEnyB,OACR,MAAVA,GACHA,EAAO/jB,SAASrO,IAAKqO,EAASvO,EAAGuO,EAAStO,oCAI5Cq8H,sBAAA,SAAW18G,EAAcC,EAAc0H,EAAkBsiB,EAAmBgB,GAC3E,IAAMvY,EAAS14B,KAAK6qD,GAAQnyB,OACd,MAAVA,GACH14B,KAAKkc,GAAWkN,MAAOsP,EAAQ1S,EAAMC,EAAM0H,EAAUsiB,EAAUgB,IAIjEyxF,oBAAA,SAASzpH,EAAgBw3G,EAAe97D,GACvC,OAAO30D,KAAK6qD,GAAQjd,QAAS30B,OAAQ1W,EAAWkuH,EAAO97D,IAGxD+tE,qBAAA,SAAUjS,EAAex3G,EAAgB07C,GACxC,OAAO30D,KAAK6qD,GAAQwmD,SAAUof,EAAOx3G,EAAQ07C,IAG9C+tE,8BAAA,SAAmBpmH,GAClB,OAAO3S,KAAKC,IAAK5J,KAAKygI,GAAU92H,KAAKG,IAAK9J,KAAKugI,GAAUjkH,KAG1DomH,oBAAA,SAAS9sH,EAAeuQ,EAA8BlN,GACrD,GAAIjZ,KAAK6gI,IACR7gI,KAAKohI,GAAmBxrH,EAAG5V,KAAKkhI,GAAoBlhI,KAAK6qD,KACnC,IAAlB1kC,EAAOs5B,OAAe,CACzB,IAAMuhF,EAAQ76G,EAAOi6B,OAASpgD,KAAK+gI,GAC7BzkH,EAAQtc,KAAKsc,OAAU,EAAI6J,EAAOs5B,OAASuhF,GAEjD,OADAhhI,KAAKmjI,aAAclqH,EAAO7S,EAAG6S,EAAO5S,EAAGiW,EAAO,IACvC,EAIT,GAAItc,KAAKkiI,IACRliI,KAAKwiI,GAA0B5sH,EAAG5V,KAAKsiI,GAA2BtiI,KAAK6qD,IAAY,CACnF,IACMnyB,EADS14B,KAAK6qD,GACEnyB,OACtB,GAAc,MAAVA,EAOH,OANA14B,KAAKixC,OACC+vF,EAAQ76G,EAAOi6B,OAASpgD,KAAKoiI,GACnC1pG,EAAO/jB,SAASrO,IACfoyB,EAAOtyB,EAAI+f,EAAOq5B,OAASwhF,EAC3BtoG,EAAOryB,EAAI8f,EAAOs5B,OAASuhF,IAErB,EAIT,OAAO,GAGR0B,mBAAA,SAAQ9sH,GACP5V,KAAKyiI,GAAM/iH,OAAQ9J,IAGpB8sH,uBAAA,SAAY9sH,EAA4BmC,GACvC,GAAI/X,KAAKuhI,IACRvhI,KAAK6hI,GAAsBjsH,EAAG5V,KAAK2hI,GAAuB3hI,KAAK6qD,IAAY,CAC3E,IAAMpxC,EAASzZ,KAAKsgI,GACpBxoH,EAAiBu5F,SAAUz7F,EAAGmC,EAAoB0B,GAClD,IAAM6C,EAAQtc,KAAKsc,MAAQtc,KAAKyhI,GAEhC,OADAzhI,KAAKmjI,aAAc1pH,EAAOrT,EAAGqT,EAAOpT,EAAGiW,EAAOtc,KAAK8hI,KAC5C,EAGR,OAAO,uBC3NT,4DA2GA,OAvGUhiI,OAKCsjI,iBAAV,SAAgBxhI,GACfkF,YAAMwZ,eAAM1e,GAEZ5B,KAAKq5B,GAAU,KACf,IAAM13B,EAAQ3B,KAAK2B,MACnB3B,KAAKyxH,GAAQ,IAAIiR,GAAsB1iI,KAAM2B,EAAOC,GAGpD5B,KAAK04B,OAAW92B,GAAWA,EAAQ82B,OAAS92B,EAAQ82B,OAAS,KA3BjC,SAG3B/2B,EAAcC,GAChB,OAAIA,GAA2B,MAAhBA,EAAQ0B,KACf1B,EAAQ0B,KAET3B,EAAM0uB,wBAuBRA,CAAuB1uB,EAAOC,KACjC5B,KAAKsD,KAAOtD,KAAK+wB,4BAITqyG,oBAAV,WACC,MAAO,oBAGRA,qBAAA,SAAUrhH,EAAkBC,EAAmBZ,EAAkBC,GAChEva,YAAM2a,mBAAUM,EAAUC,EAAWZ,EAAUC,GAC/CrhB,KAAKqjI,kBAAmBthH,EAAUC,EAAWZ,EAAUC,IAGxD7hB,sBAAI4jI,0BAAJ,WACC,OAAOpjI,KAAKq5B,QAGb,SAAYX,GACX,IAAMpT,EAAWtlB,KAAKq5B,GACN,MAAZ/T,IACHtlB,KAAKq5B,GAAU,KACfr5B,KAAKy0B,YAAanP,GAClBtlB,KAAK4X,KAAM,QAAS0N,EAAUtlB,MAC9BslB,EAASqC,WAGV3nB,KAAKq5B,GAAUX,EACD,MAAVA,GACH14B,KAAKwgB,SAAUkY,GACf14B,KAAKyxH,GAAM1jE,MAAO,GAClB/tD,KAAK4X,KAAM,MAAO8gB,EAAQ14B,OAE1BK,EAAciB,OAAQtB,uCAIdojI,oCAAV,WAMC,OAL0B,MAAtBpjI,KAAKswB,KACRtwB,KAAKswB,GAAgB,IAAIwuG,GAAmB9+H,MAC5CA,KAAKoO,cAAepO,KAAKswB,IACzBtwB,KAAK2d,WAEC3d,KAAKswB,IAGH8yG,8BAAV,SAA6BrhH,EAAkBC,EAAmBZ,EAAkBC,GACnF,IAAMqX,EAAS14B,KAAKq5B,GACpB,GAAc,MAAVX,EAAiB,CACpB,IAAM4qG,EAAU5qG,EAAOtyB,EAA4B,IAAvB2b,EAAWX,GACjCmiH,EAAU7qG,EAAOryB,EAA8B,IAAzB2b,EAAYX,GACxCqX,EAAO/jB,SAASrO,IAAKg9H,EAASC,KAIhC/jI,sBAAI4jI,wBAAJ,WACC,OAAOpjI,KAAKyxH,oCAGb2R,oBAAA,SAASxtH,EAAeuQ,EAA8BlN,GACrD,IAAMuqH,EAAUxjI,KAAKyxH,GAAMlS,QAAS3pG,EAAGuQ,EAAQlN,GACzCwqH,EAAU38H,YAAMy4G,kBAAS3pG,EAAGuQ,EAAQlN,GAC1C,OAAOuqH,GAAWC,GAGnBL,uBAAA,SAAYxtH,EAA4BmC,GACvC,IAAMyrH,EAAUxjI,KAAKyxH,GAAMpS,WAAYzpG,EAAGmC,GACpC0rH,EAAU38H,YAAMu4G,qBAAYzpG,EAAGmC,GACrC,OAAOyrH,GAAWC,GAGTL,mBAAV,SAAkBxtH,GACjB5V,KAAKyxH,GAAM/xG,OAAQ9J,GACnB9O,YAAM4Y,iBAAQ9J,IAGfwtH,oBAAA,WAEC,IAAM3xG,EAAezxB,KAAKswB,GACN,MAAhBmB,IACHzxB,KAAKswB,GAAgB,KACrBmB,EAAa9J,WAEd3nB,KAAKsD,KAAO,KAEZwD,YAAM6gB,uBArGEhH,kBChFV,4DAOA,OAJU7gB,OACC4jI,oBAAV,WACC,MAAO,cAFC/iH,iBCoGT,WAAahf,EAA4BC,GACxC5B,KAAK2jI,GAAqB/hI,GAAiC,MAAtBA,EAAQ8R,WAAqB9R,EAAQ8R,WAAa,EACvF1T,KAAKmc,GAAYnc,KAAK4jI,WAAYjiI,EAAOC,GACzC5B,KAAK6jI,GAAQ7jI,KAAK8jI,gBAAiBniI,EAAOC,GAC1C5B,KAAKknH,GAASlnH,KAAKouE,QAASzsE,EAAOC,GACnC5B,KAAKyd,GAAa7b,GAA8B,MAAnBA,EAAQqD,QAAkBrD,EAAQqD,QAAUtD,EAAMo/G,aAuXjF,OApXCvhH,sBAAIukI,mCAAJ,WACC,OAAO/jI,KAAK2jI,oCAGbnkI,sBAAIukI,2BAAJ,WACC,OAAO/jI,KAAKyd,oCAGbje,sBAAIukI,4BAAJ,WACC,OAAO/jI,KAAKmc,oCAGb3c,sBAAIukI,wBAAJ,WACC,OAAO/jI,KAAK6jI,oCAGbrkI,sBAAIukI,yBAAJ,WACC,OAAO/jI,KAAKknH,oCAGH6c,uBAAV,SACCpiI,EACAC,GAEA,IAAM+S,EAAW/S,GAAWA,EAAQ+S,SACpC,OAAI9R,EAAc8R,GACV6qF,GAAoB7qF,GACL,MAAZA,EACHA,EAEDhT,EAAMqiI,eAGJD,4BAAV,SACCpiI,EACAC,GAEA,IAAMqiI,EAAOriI,GAAWA,EAAQqiI,KAChC,MAAO,CACNttE,OAAUstE,GAAuB,MAAfA,EAAKttE,OAAiBstE,EAAKttE,OAASh1D,EAAMuiI,gBAC5DC,MAAOnkI,KAAKokI,YAAaziI,EAAOsiI,GAChCI,MAAOrkI,KAAKskI,YAAa3iI,EAAOsiI,KAIxBF,wBAAV,SACCpiI,EACAC,GAEA,IAAMuiI,EAAoDviI,GAAWA,EAAQuiI,MACvExvH,EAAawvH,GAA2B,MAAlBA,EAAMxvH,SAAmBwvH,EAAMxvH,SACxD/S,GAA+B,MAApBA,EAAQ+S,SAAmB/S,EAAQ+S,SAAWhT,EAAM4iI,uBAE5Dv3G,EAAUm3G,GAAwB,MAAfA,EAAMn3G,MAAgBm3G,EAAMn3G,MAClDprB,GAA4B,MAAjBA,EAAQorB,MAAgBprB,EAAQorB,MAAQrrB,EAAM6iI,oBAE5D,MAAO,CACNx8G,MAASm8G,GAAwB,MAAfA,EAAMn8G,MAAgBm8G,EAAMn8G,MAAQrmB,EAAM8iI,oBAC5DzvH,KAAQmvH,GAAuB,MAAdA,EAAMnvH,KAAemvH,EAAMnvH,KAAOrT,EAAM+iI,mBACzD/vH,SAAU3U,KAAK2kI,eAAgBhwH,GAC/BqY,MAASnqB,EAAcmqB,GAAU08B,GAAmB18B,GAAUA,EAC9D8gC,OAAQ9tD,KAAK4kI,aAAcjjI,EAAOwiI,GAASA,EAAMr2E,OAAQlsD,GAAWA,EAAQksD,QAC5E9kC,KAAMhpB,KAAK6kI,gBAAiBljI,EAAOwiI,GAASA,EAAMn7G,MAClD6G,UAAW7vB,KAAK8kI,qBAAsBnjI,EAAOwiI,GAC7C7mD,YAAQ/6E,IAIAwhI,2BAAV,SACCgB,GAEA,IAAMpwH,EAAW3U,KAAKmc,GACtB,GAAI4oH,IAAiBtlC,GAAuBgI,SAA4B,YAAjBs9B,EACtD,OAAQpwH,GACR,KAAK6qF,GAAmBpzF,IACvB,OAAOw9C,GAAkBt9C,OAC1B,KAAKkzF,GAAmBlzF,OACvB,OAAOs9C,GAAkBx9C,IAC1B,KAAKozF,GAAmBhzF,KACvB,OAAOo9C,GAAkBl9C,MAC1B,KAAK8yF,GAAmB9yF,MACvB,OAAOk9C,GAAkBp9C,KAC1B,QACC,OAAOo9C,GAAkBx9C,SAG1B,OAAQuI,GACR,KAAK6qF,GAAmBpzF,IACvB,OAAOw9C,GAAkBx9C,IAC1B,KAAKozF,GAAmBlzF,OACvB,OAAOs9C,GAAkBt9C,OAC1B,KAAKkzF,GAAmBhzF,KACvB,OAAOo9C,GAAkBp9C,KAC1B,KAAKgzF,GAAmB9yF,MACvB,OAAOk9C,GAAkBl9C,MAC1B,QACC,OAAOk9C,GAAkBx9C,MAKlB23H,wBAAV,SACCpiI,EACAC,GAEA,IAAMyiI,EAAoDziI,GAAWA,EAAQuiI,MACvExvH,EAAa0vH,GAA2B,MAAlBA,EAAM1vH,SAAmB0vH,EAAM1vH,SACxD/S,GAA+B,MAApBA,EAAQ+S,SAAmB/S,EAAQ+S,SAAWhT,EAAMqjI,uBAE5Dh4G,EAAUq3G,GAAwB,MAAfA,EAAMr3G,MAAgBq3G,EAAMr3G,MAClDprB,GAA4B,MAAjBA,EAAQorB,MAAgBprB,EAAQorB,MAAQrrB,EAAMsjI,oBAE5D,MAAO,CACNj9G,MAASq8G,GAAwB,MAAfA,EAAMr8G,MAAgBq8G,EAAMr8G,MAAQrmB,EAAMujI,oBAC5DlwH,KAAQqvH,GAAuB,MAAdA,EAAMrvH,KAAeqvH,EAAMrvH,KAAOrT,EAAMwjI,mBACzDxwH,SAAU3U,KAAK2kI,eAAgBhwH,GAC/BqY,MAASnqB,EAAcmqB,GAAU08B,GAAmB18B,GAAUA,EAC9D8gC,OAAQ9tD,KAAK4kI,aAAcjjI,EAAO0iI,GAASA,EAAMv2E,OAAQlsD,GAAWA,EAAQksD,QAC5EwvB,YAAQ/6E,IAIAwhI,yBAAV,SACCpiI,EACAyjI,EACAC,GAEA,OAAID,EACCC,EACI,CACN1uE,OAA6B,MAAnByuE,EAASzuE,OAAiByuE,EAASzuE,OAAS0uE,EAAS1uE,OAC/Dz0D,MAA2B,MAAlBkjI,EAASljI,MAAgBkjI,EAASljI,MAAQmjI,EAASnjI,MAC5DE,MAA2B,MAAlBgjI,EAAShjI,MAAgBgjI,EAAShjI,MAAQijI,EAASjjI,MAC5Dc,MAA2B,MAAlBkiI,EAASliI,MAAgBkiI,EAASliI,MAAQmiI,EAASniI,MAC5DE,MAA2B,MAAlBgiI,EAAShiI,MAAgBgiI,EAAShiI,MAAQiiI,EAASjiI,MAC5D6zD,KAAyB,MAAjBmuE,EAASnuE,KAAemuE,EAASnuE,KAAOouE,EAASpuE,MAGnD,CACNN,OAAQyuE,EAASzuE,OACjBz0D,MAAOkjI,EAASljI,MAChBE,MAAOgjI,EAAShjI,MAChBc,MAAOkiI,EAASliI,MAChBE,MAAOgiI,EAAShiI,MAChB6zD,KAAMmuE,EAASnuE,MAGPouE,EACH,CACN1uE,OAAQ0uE,EAAS1uE,OACjBz0D,MAAOmjI,EAASnjI,MAChBE,MAAOijI,EAASjjI,MAChBc,MAAOmiI,EAASniI,MAChBE,MAAOiiI,EAASjiI,MAChB6zD,KAAMouE,EAASpuE,WAPV,GAYE8sE,iCAAV,SACCpiI,EACAC,GAEA,IAAMumC,EAAWvmC,GAAWA,EAAQonB,MAAQpnB,EAAQonB,KAAKyF,MACzD,OAAO+b,GAAiBrqC,OAAkB,MAAVgoC,EAC/BA,EAASxmC,EAAM2jI,2BAIPvB,4BAAV,SACCpiI,EACAC,GAGA,MAAO,CACN6sB,OAFD7sB,EAAUA,GAAW,IAEL6sB,MACfvsB,MAAON,EAAQM,MACfE,MAAOR,EAAQQ,MACfoiC,OAAQ5iC,EAAQ4iC,OAChBxvB,KAAMpT,EAAQoT,KACdiK,OAAQrd,EAAQqd,OAChB7b,MAAOpD,KAAKulI,qBAAsB5jI,EAAOC,EAAQwB,OACjDqB,OAAQzE,KAAKwlI,sBAAuB7jI,EAAOC,EAAQ6C,QACnDuoB,MAAOprB,EAAQorB,MACfzoB,QAASvE,KAAKylI,uBAAwB9jI,EAAOC,EAAQ2C,SACrDw2D,QAAS/6D,KAAK0lI,uBAAwB/jI,EAAOC,EAAQm5D,SACrDjX,UAAW9jD,KAAK2lI,yBAA0BhkI,EAAOC,EAAQkiD,WACzD7+C,QAASjF,KAAK4lI,uBAAwBjkI,EAAOC,EAAQqD,SACrDinB,SAAUtqB,EAAQsqB,WAIV63G,mCAAV,SACCpiI,EACAC,GAEA,GAAIA,EACH,MAAO,CACN+0D,OAAQ/0D,EAAQ+0D,OAChBz0D,MAAON,EAAQM,MACfE,MAAOR,EAAQQ,MACfc,MAAOtB,EAAQsB,QAKR6gI,iCAAV,SACCpiI,EACAC,GAEA,IAAM+S,EAAW3U,KAAKmc,GACtB,OAAIva,EACI,CACN6tB,WAAoC,MAAtB7tB,EAAQ6tB,WAAqB7tB,EAAQ6tB,WAAa9tB,EAAMkkI,gCAAiClxH,GACvG4a,SAAgC,MAApB3tB,EAAQ2tB,SAAmB3tB,EAAQ2tB,SAAW5tB,EAAMmkI,8BAA+BnxH,IAG1F,CACN8a,WAAY9tB,EAAMkkI,gCAAiClxH,GACnD4a,SAAU5tB,EAAMmkI,8BAA+BnxH,KAIvCovH,kCAAV,SACCpiI,EACAC,GAEA,GAAIA,EACH,MAAO,CACN6tB,WAAY7tB,EAAQ6tB,WACpBF,SAAU3tB,EAAQ2tB,WAKXw0G,mCAAV,SACCpiI,EACAC,GAEA,GAAIA,EACH,MAAO,CACN6tB,WAAY7tB,EAAQ6tB,WACpBF,SAAU3tB,EAAQ2tB,WAKXw0G,mCAAV,SACCpiI,EACAC,GAEA,MAAO,CACN6tB,WAAc7tB,GAAiC,MAAtBA,EAAQ6tB,WAChC7tB,EAAQ6tB,WAAa9tB,EAAMokI,oCAE5Bx2G,SAAY3tB,GAA+B,MAApBA,EAAQ2tB,SAC9B3tB,EAAQ2tB,SAAW5tB,EAAMqkI,oCAKlBjC,qCAAV,SACCpiI,EACAC,GAEA,OAAoB,MAAXA,EAAkBA,EAAUD,EAAMskI,6BAGlClC,oBAAV,SACCpiI,EACAC,GAEA,IAAMulH,EAAQvlH,GAAWA,EAAQulH,MACjC,GAAIA,EACH,MAAO,CACN14F,MAAO04F,EAAM14F,MACbvsB,MAAOilH,EAAMjlH,MACbE,MAAO+kH,EAAM/kH,MACboiC,OAAQ2iF,EAAM3iF,OACdxvB,KAAMmyG,EAAMnyG,KACZiK,OAAQkoG,EAAMloG,OACd7b,MAAOpD,KAAKkmI,aAAcvkI,EAAOwlH,EAAM/jH,OACvCqB,OAAQzE,KAAKmmI,cAAexkI,EAAOwlH,EAAM1iH,QACzCuoB,MAAOm6F,EAAMn6F,MACbzoB,QAASvE,KAAKomI,eAAgBzkI,EAAOwlH,EAAM5iH,SAC3Cw2D,QAAS/6D,KAAKqmI,eAAgB1kI,EAAOwlH,EAAMpsD,SAC3CjX,UAAW9jD,KAAKsmI,iBAAkB3kI,EAAOwlH,EAAMrjE,WAC/C7+C,QAASjF,KAAKumI,eAAgB5kI,EAAOwlH,EAAMliH,SAC3CinB,SAAUi7F,EAAMj7F,WAKT63G,2BAAV,SACCpiI,EACAC,GAEA,GAAIA,EACH,MAAO,CACN+0D,OAAQ/0D,EAAQ+0D,OAChBz0D,MAAON,EAAQM,MACfE,MAAOR,EAAQQ,MACfc,MAAOtB,EAAQsB,QAKR6gI,yBAAV,SACCpiI,EACAC,GAEA,IAAM+S,EAAW3U,KAAKmc,GACtB,OAAIva,EACI,CACN6tB,WAAoC,MAAtB7tB,EAAQ6tB,WACrB7tB,EAAQ6tB,WAAa9tB,EAAM6kI,wBAAyB7xH,GAErD4a,SAAgC,MAApB3tB,EAAQ2tB,SACnB3tB,EAAQ2tB,SAAW5tB,EAAM8kI,sBAAuB9xH,IAI5C,CACN8a,WAAY9tB,EAAM6kI,wBAAyB7xH,GAC3C4a,SAAU5tB,EAAM8kI,sBAAuB9xH,KAI/BovH,0BAAV,SACCpiI,EACAC,GAEA,GAAIA,EACH,MAAO,CACN6tB,WAAY7tB,EAAQ6tB,WACpBF,SAAU3tB,EAAQ2tB,WAKXw0G,2BAAV,SACCpiI,EACAC,GAEA,GAAIA,EACH,MAAO,CACN6tB,WAAY7tB,EAAQ6tB,WACpBF,SAAU3tB,EAAQ2tB,WAKXw0G,2BAAV,SACCpiI,EACAC,GAEA,MAAO,CACN6tB,WAAc7tB,GAAiC,MAAtBA,EAAQ6tB,WAChC7tB,EAAQ6tB,WAAa9tB,EAAM+kI,4BAE5Bn3G,SAAY3tB,GAA+B,MAApBA,EAAQ2tB,SAC9B3tB,EAAQ2tB,SAAW5tB,EAAMglI,4BAKlB5C,6BAAV,SACCpiI,EACAC,GAEA,OAAoB,MAAXA,EAAkBA,EAAUD,EAAMilI,wCC/c5C,WAAahlI,GACZ,IAAMD,EAAUC,GAAWA,EAAQD,OAAW3B,KAAKkd,kBACnDld,KAAK8B,EAASH,EACd3B,KAAKwiG,GAAS,EAEd,IAAMqkC,EAAS,IAAI9C,GAA4BpiI,EAAOC,GACtD5B,KAAK2jI,GAAmBkD,EAAOC,gBAC/B9mI,KAAKyd,GAAWopH,EAAO5hI,QACvBjF,KAAKmc,GAAY0qH,EAAOlyH,SACxB,IAAMsvH,EAAO4C,EAAO5C,KACpBjkI,KAAK6jI,GAAQI,EACbjkI,KAAKknH,GAAS2f,EAAO1f,MACrBnnH,KAAK+mI,GAAc,IAAIC,aAAiC,EAAnB/C,EAAKE,MAAMn8G,OAChDhoB,KAAKinI,GAAc,IAAID,cAAe/C,EAAKE,MAAMn8G,MAAQ,GAAKi8G,EAAKI,MAAMr8G,MAAQ,GA6UnF,OA1UCxoB,sBAAI0nI,4BAAJ,WACC,OAAOlnI,KAAKmc,oCAGH+qH,sBAAV,WACC,IAAMvyH,EAAW3U,KAAKmc,GAChB4gD,EAAY/8D,KAAKmnI,GACjBC,EAAMpnI,KAAKqnI,GACjB,GAAItqE,GAAaqqE,EAAM,CACtB,IAAME,EAAevqE,EAAUwqE,SAASvyH,KAClCwyH,EAAgBF,EAAalhI,EAC7BqhI,EAAgBH,EAAajhI,EAC7BpB,EAAUjF,KAAKyd,GAAWzd,KAAKwiG,GAErC,OADA4kC,EAAIt4E,yBACIn6C,GACR,KAAK6qF,GAAmBpzF,IACvBg7H,EAAInrH,UAAUtH,SAASrO,IAAqB,GAAhBkhI,EAAqB,EAAIviI,GACrDmiI,EAAIpyH,KAAK1O,IAAKkhI,EAAe,GAC7B,MACD,KAAKhoC,GAAmBlzF,OACvB86H,EAAInrH,UAAUtH,SAASrO,IAAqB,GAAhBkhI,EAAqBC,EAAgBxiI,GACjEmiI,EAAIpyH,KAAK1O,IAAKkhI,EAAe,GAC7B,MACD,KAAKhoC,GAAmBhzF,KACvB46H,EAAInrH,UAAUtH,SAASrO,IAAK,EAAIrB,EAAyB,GAAhBwiI,GACzCL,EAAIpyH,KAAK1O,IAAK,EAAGmhI,GACjB,MACD,KAAKjoC,GAAmB9yF,MACvB06H,EAAInrH,UAAUtH,SAASrO,IAAKkhI,EAAgBviI,EAAyB,GAAhBwiI,GACrDL,EAAIpyH,KAAK1O,IAAK,EAAGmhI,GAGlBL,EAAIp4E,wBAINk4E,yBAAA,SACCxzH,EACAg0H,EAA0BC,EAC1BC,GAEA,IAAM3D,EAAOjkI,KAAK6jI,GACZgE,EAAa5D,EAAKE,MAAMn8G,MACxB8/G,EAAiB7D,EAAKE,MAAMt0G,UAC5Bk4G,EAAqB9D,EAAKI,MAAMr8G,MAChCggH,GAAcH,EAAa,GAAKE,EAChCE,EAAajoI,KAAK+mI,GAClBmB,EAAaloI,KAAKinI,GACxBvzH,EAAWy0H,MAAON,EAAYE,EAAoBC,EAAYC,EAAYC,GAE1E,IAAK,IAAI3mI,EAAI,EAAGA,EAAIsmI,IAActmI,EAAI,CACrC,IAAM6mI,EAAaV,EAAanmI,GAC1B8mI,EAAiB,EAAJ9mI,EACb+mI,EAAoBL,EAAYI,EAAa,GAC7CE,EAA6BN,EAAYI,EAAa,GACtDG,EAAgBP,EAAYI,EAAa,GACzC3sF,GAAW4sF,GAOhBF,EAAWz5H,SAAU,GANrBy5H,EAAWt5E,yBACXs5E,EAAWz5H,SAAU,EACrBy5H,EAAWnsH,UAAUtH,SAASrO,IAAKiiI,EAA4BX,GAC/DQ,EAAWp/G,KAAKyF,MAAQq5G,EAAe3/F,OAAQmgG,EAAmBE,GAClEJ,EAAWp5E,uBAMb,IAASztD,EAAI,EAAGA,EAAIymI,IAAczmI,EAAI,CACrC,IAAMknI,EAAad,EAAapmI,GAC1BmnI,EAAiB,EAAJnnI,EACbonI,EAAoBT,EAAYQ,EAAa,GAC7CE,EAA6BV,EAAYQ,EAAa,GACtDhtF,GAAWitF,GAMhBF,EAAW95H,SAAU,GALrB85H,EAAW35E,yBACX25E,EAAW95H,SAAU,EACrB85H,EAAWxsH,UAAUtH,SAASrO,IAAKsiI,EAA4BhB,GAC/Da,EAAWz5E,yBAOdk4E,yBAAA,SACCxzH,EACAg0H,EAA0BC,EAC1BkB,GAEA,IAAM5E,EAAOjkI,KAAK6jI,GACZgE,EAAa5D,EAAKE,MAAMn8G,MACxB8/G,EAAiB7D,EAAKE,MAAMt0G,UAC5Bk4G,EAAqB9D,EAAKI,MAAMr8G,MAChCggH,GAAcH,EAAa,GAAKE,EAChCE,EAAajoI,KAAK+mI,GAClBmB,EAAaloI,KAAKinI,GACxBvzH,EAAWy0H,MAAON,EAAYE,EAAoBC,EAAYC,EAAYC,GAE1E,IAAK,IAAI3mI,EAAI,EAAGA,EAAIsmI,IAActmI,EAAI,CACrC,IAAM6mI,EAAaV,EAAanmI,GAC1B8mI,EAAiB,EAAJ9mI,EACb+mI,EAAoBL,EAAYI,EAAa,GAC7CE,EAA6BN,EAAYI,EAAa,GACtDG,EAAgBP,EAAYI,EAAa,GACzC3sF,GAAW4sF,GAOhBF,EAAWz5H,SAAU,GANrBy5H,EAAWt5E,yBACXs5E,EAAWz5H,SAAU,EACrBy5H,EAAWnsH,UAAUtH,SAASrO,IAAKuiI,EAAgBN,GACnDH,EAAWp/G,KAAKyF,MAAQq5G,EAAe3/F,OAAQmgG,EAAmBE,GAClEJ,EAAWp5E,uBAMb,IAASztD,EAAI,EAAGA,EAAIymI,IAAczmI,EAAI,CACrC,IAAMknI,EAAad,EAAapmI,GAC1BmnI,EAAiB,EAAJnnI,EACbonI,EAAoBT,EAAYQ,EAAa,GAC7CE,EAA6BV,EAAYQ,EAAa,GACtDhtF,GAAWitF,GAMhBF,EAAW95H,SAAU,GALrB85H,EAAW35E,yBACX25E,EAAW95H,SAAU,EACrB85H,EAAWxsH,UAAUtH,SAASrO,IAAKuiI,EAAgBD,GACnDH,EAAWz5E,yBAOJk4E,wBAAV,WACC,IAAMjD,EAAOjkI,KAAK6jI,GACZ6D,EAAczD,EAAKE,MAAM7mD,OACzBqqD,EAAc1D,EAAKI,MAAM/mD,OACzBvgB,EAAY/8D,KAAKmnI,GACvB,GAAIO,GAAeC,GAAe5qE,EAAY,CAC7C,IAAMwqE,EAAWxqE,EAAUwqE,SACrBT,EAAkB9mI,KAAK2jI,GACzBjwH,SACEzO,EAAUjF,KAAKyd,GAAWzd,KAAKwiG,GACrC,OAAQxiG,KAAKmc,IACb,KAAKqjF,GAAmBpzF,KACvBsH,EAAa6zH,EAAS7zH,WAAWtN,EAAE0V,IAAKgrH,KAEvC9mI,KAAK8oI,aACJp1H,EACAg0H,EAAaC,EACb,EAAI1iI,GAGN,MACD,KAAKu6F,GAAmBlzF,QACvBoH,EAAa6zH,EAAS7zH,WAAWtN,EAAE0V,IAAKgrH,KAEvC9mI,KAAK8oI,aACJp1H,EACAg0H,EAAaC,EACbJ,EAASvyH,KAAK3O,EAAIpB,GAGpB,MACD,KAAKu6F,GAAmBhzF,MACvBkH,EAAa6zH,EAAS7zH,WAAWrN,EAAEyV,IAAKgrH,KAEvC9mI,KAAK+oI,aACJr1H,EACAg0H,EAAaC,EACb,EAAI1iI,GAGN,MACD,KAAKu6F,GAAmB9yF,OACvBgH,EAAa6zH,EAAS7zH,WAAWrN,EAAEyV,IAAKgrH,KAEvC9mI,KAAK+oI,aACJr1H,EACAg0H,EAAaC,EACbJ,EAASvyH,KAAK5O,EAAInB,MAQvBiiI,iBAAA,SAAMnqE,EAAgCn8D,GACrCZ,KAAKmnI,GAAapqE,EAClB/8D,KAAKwiG,GAAS5hG,EACd,IAAMooI,EAAqBjsE,EAAUA,UAGjCqqE,EAAMpnI,KAAKqnI,GACf,IAAMD,EAAM,CACX,IAAMzyH,EAAW3U,KAAKmc,GAChB8sH,EAAgBt0H,IAAa6qF,GAAmBhzF,MAAQmI,IAAa6qF,GAAmB9yF,MAC7Fk9C,GAAkBx9C,IAAMw9C,GAAkBp9C,MAE3C46H,EAAM,IAAIhpE,GAAW6qE,GAAc,EAAGl8E,GAAewP,aAAc7S,GAAkBrrC,OACjF2K,KAAKs4B,KAAMthD,KAAKknH,IACpBlnH,KAAKqnI,GAAOD,EAEbA,EAAI8B,OAAQnsE,EAAUA,WAGtB,IAAMknE,EAAOjkI,KAAK6jI,GACZsF,EAAYlF,EAAKE,MACnBiF,EAAkBD,EAAU7rD,OAChC,IAAM8rD,GAAmBnF,EAAKttE,OAAS,CACtCyyE,EAAkB,GAClBD,EAAU7rD,OAAS8rD,EAKnB,IAJA,IAAMC,EAAiBF,EAAUnhH,MAC3BshH,EAAgBH,EAAUn0H,KAC1Bu0H,EAAoBJ,EAAUx0H,SAC9B60H,EAAiBL,EAAUn8G,MACxBzrB,EAAI,EAAGA,EAAI8nI,IAAkB9nI,EAAI,CACzC,IAAMkoI,EAAiB,IAAIrrE,GAC1BmrE,EACAD,EACAv8E,GAAewP,aACfitE,GAEDC,EAAe37E,OAAOxM,KAAM6nF,EAAUr7E,QACtC27E,EAAezgH,KAAKs4B,KAAM6nF,EAAUngH,MACpCygH,EAAez0H,KAAK1O,IAAK,EAAG,GAC5B8iI,EAAgB5oI,KAAMipI,IAGxB,GAAIL,EACE,CAAI7nI,EAAI,EAAb,IAAK,IAAWC,EAAO4nI,EAAgB1oI,OAAQa,EAAIC,IAAQD,EAC1D6nI,EAAiB7nI,GAAI2nI,OAAQF,GAK/B,IAAMU,EAAYzF,EAAKI,MACnBsF,EAAkBD,EAAUpsD,OAChC,IAAMqsD,GAAmB1F,EAAKttE,OAAS,CACtCgzE,EAAkB,GAClBD,EAAUpsD,OAASqsD,EACnB,IAAMC,EAAiBF,EAAU1hH,MAC3B6hH,EAAgBH,EAAU10H,KAC1B80H,EAAoBJ,EAAU/0H,SAC9Bo1H,EAAiBL,EAAU18G,MACjC,IAASzrB,EAAI,EAAGC,GAAS2nI,EAAUnhH,MAAQ,GAAM4hH,EAAgBroI,EAAIC,IAAQD,EAAI,CAChF,IAAMyoI,EAAiB,IAAI5rE,GAC1B0rE,EACAD,EACA98E,GAAewP,aACfwtE,GAEDC,EAAel8E,OAAOxM,KAAMooF,EAAU57E,QACtCk8E,EAAeh1H,KAAK1O,IAAK,EAAG,GAC5BqjI,EAAgBnpI,KAAMwpI,IAGxB,GAAIL,EACH,IAASpoI,EAAI,EAAGC,EAAOmoI,EAAgBjpI,OAAQa,EAAIC,IAAQD,EAC1DooI,EAAiBpoI,GAAI2nI,OAAQF,IAKhC9B,mBAAA,WAEC,IAAME,EAAMpnI,KAAKqnI,GACbD,GACHA,EAAIn0E,SAIL,IAAMgxE,EAAOjkI,KAAK6jI,GACZuF,EAAkBnF,EAAKE,MAAM7mD,OACnC,GAAI8rD,EACH,IAAK,IAAI7nI,EAAI,EAAGC,EAAO4nI,EAAgB1oI,OAAQa,EAAIC,IAAQD,EAC1D6nI,EAAiB7nI,GAAI0xD,SAKvB,IAAM02E,EAAkB1F,EAAKI,MAAM/mD,OACnC,GAAIqsD,EACH,IAASpoI,EAAI,EAAGC,EAAOmoI,EAAgBjpI,OAAQa,EAAIC,IAAQD,EAC1DooI,EAAiBpoI,GAAI0xD,SAKvBjzD,KAAKmnI,QAAa5kI,GAGnB2kI,mBAAA,WACClnI,KAAKiqI,YACLjqI,KAAKkqI,eAGNhD,oBAAA,WAEC,IAAME,EAAMpnI,KAAKqnI,GACbD,GACHA,EAAIz/G,UAIL,IAAMs8G,EAAOjkI,KAAK6jI,GACZuF,EAAkBnF,EAAKE,MAAM7mD,OACnC,GAAI8rD,EACH,IAAK,IAAI7nI,EAAI,EAAGC,EAAO4nI,EAAgB1oI,OAAQa,EAAIC,IAAQD,EAC1D6nI,EAAiB7nI,GAAIomB,UAKvB,IAAMgiH,EAAkB1F,EAAKI,MAAM/mD,OACnC,GAAIqsD,EACH,IAASpoI,EAAI,EAAGC,EAAOmoI,EAAgBjpI,OAAQa,EAAIC,IAAQD,EAC1DooI,EAAiBpoI,GAAIomB,UAKvB3nB,KAAKmnI,QAAa5kI,GAGT2kI,4BAAV,WACC,OAAO5xH,EAAQuG,cAAcC,IAAK9b,KAAKkiB,YAG9BglH,oBAAV,WACC,MAAO,qCCzWR,WAAaK,EAA0B3lI,GACtC5B,KAAKmqI,GAAY5C,EACjBvnI,KAAKmnI,GAAa,IAAIthC,GAEtB7lG,KAAKoqI,GAAQ,IAAI/rG,IACjB,IAAMtd,EAAOnf,GAAWA,EAAQmf,KAChC,GAAIA,EACH,IAAK,IAAIxf,EAAI,EAAGC,EAAOuf,EAAKrgB,OAAQa,EAAIC,IAAQD,EAC/CvB,KAAKwtB,IAAKzM,EAAMxf,IAkHpB,OA7GC/B,sBAAI6qI,6BAAJ,WACC,OAAOrqI,KAAKmnI,oCAGb3nI,sBAAI6qI,4BAAJ,WACC,OAAOrqI,KAAKmqI,oCAGbE,gBAAA,SAAKvqF,GACJ,IAAM/+B,EAAO/gB,KAAKoqI,GACdE,EAAOvpH,EAAKjF,IAAKgkC,EAAKnrC,UACd,MAAR21H,IACHA,EAAO,GACPvpH,EAAKza,IAAKw5C,EAAKnrC,SAAU21H,IAE1BA,EAAK9pI,KAAMs/C,GACXA,EAAKhvC,KAAM9Q,KAAMsqI,EAAK5pI,OAAS,IAGhC2pI,gBAAA,SAAK11H,EAA8B/T,GAClC,IACM0pI,EADOtqI,KAAKoqI,GACAtuH,IAAKnH,GACvB,OAAI21H,GACC,GAAK1pI,GAASA,EAAQ0pI,EAAK5pI,OACvB4pI,EAAM1pI,GAGR,MAGRypI,oBAAA,SAASvqF,GACR,IACMwqF,EADOtqI,KAAKoqI,GACAtuH,IAAKgkC,EAAKnrC,UAC5B,OAAI21H,EACIA,EAAKzpI,QAASi/C,IAEd,GAKTuqF,mBAAA,SAAQE,EAAiDC,GACxD,IAAMzpH,EAAO/gB,KAAKoqI,GAClB,GAAItmI,EAAcymI,GAAmB,CACpC,IAAM51H,EAA+B41H,EAC/B3pI,EAAQ4pI,EAEd,IADMF,EAAOvpH,EAAKjF,IAAKnH,KAElB,GAAK/T,GAASA,EAAQ0pI,EAAK5pI,OAAS,CACvC,IAAM+pI,EAAUH,EAAK/3H,OAAQ3R,EAAO,GAAK,GAGzC,OAFA6pI,EAAQC,SACRD,EAAQ9iH,UACD8iH,OAGH,CACN,IAEMH,EAFAxqF,EAAOyqF,EAGb,GAFM51H,EAA+BmrC,EAAKnrC,UACpC21H,EAAOvpH,EAAKjF,IAAKnH,KAGlB,IADE/T,EAAQ0pI,EAAKzpI,QAAS0pI,IAK3B,OAHAD,EAAK/3H,OAAQ3R,EAAO,GACpBk/C,EAAK4qF,SACL5qF,EAAKn4B,UACEm4B,EAIV,OAAO,MAGRuqF,kBAAA,SAAO11H,GACN,IACM21H,EADOtqI,KAAKoqI,GACAtuH,IAAKnH,GACvB,GAAI21H,EAAO,CACV,IAAK,IAAI/oI,EAAI,EAAGC,EAAO8oI,EAAK5pI,OAAQa,EAAIC,IAAQD,EAC/C+oI,EAAM/oI,GAAIomB,UAEX2iH,EAAK5pI,OAAS,EAEf,OAAOV,MAGRqqI,iBAAA,SAAM11H,GACL,IACM21H,EADOtqI,KAAKoqI,GACAtuH,IAAKnH,GACvB,OAAI21H,EACIA,EAAK5pI,OAEN,GAGR2pI,mBAAA,WACCrqI,KAAKoqI,GAAMlsG,SAAQ,SAAEosG,GACpB,IAAK,IAAI/oI,EAAI,EAAGC,EAAO8oI,EAAK5pI,OAAQa,EAAIC,IAAQD,EAC/C+oI,EAAM/oI,GAAID,aAKb+oI,oBAAA,WACCrqI,KAAKoqI,GAAMlsG,SAAQ,SAAEosG,GACpB,IAAK,IAAI/oI,EAAI,EAAGC,EAAO8oI,EAAK5pI,OAAQa,EAAIC,IAAQD,EAC/C+oI,EAAM/oI,GAAIomB,UAEX2iH,EAAK5pI,OAAS,0BChIjB,4DAIA,OAJiCZ,OACtB6qI,oBAAV,WACC,MAAO,kBAFwBzD,mBCAjC,4DAIA,OAJiCpnI,OACtB8qI,oBAAV,WACC,MAAO,kBAFwB1D,ICA3B2D,GAAqB,CAC1B,QACA,SACA,SACA,SAGKC,GAAqB,CAC1BD,GAAoB,GACpB1uF,GAAQoxB,SAAUs9D,GAAoB,GAAK,IAE3CA,GAAoB,GACpB1uF,GAAQoxB,SAAUs9D,GAAoB,GAAK,IAE3CA,GAAoB,GACpB1uF,GAAQoxB,SAAUs9D,GAAoB,GAAK,IAE3CA,GAAoB,GACpB1uF,GAAQoxB,SAAUs9D,GAAoB,GAAK,KAO/BE,GAAkB,SAAEnqI,GAChC,OAAOkqI,GAAoBlqI,EAAQkqI,GAAmBpqI,U/E1BvD,SAAY08G,GACXA,aACAA,aAFD,CAAYA,KAAAA,QgFGZ,ICCY4tB,iBDIX,WAAajuE,EAAsCjZ,GAClD9jD,KAAKmnI,GAAapqE,EAClB/8D,KAAKkkD,GAAaJ,EAClB9jD,KAAKoqI,GAAQ,GA+Ef,OA5EC5qI,sBAAIyrI,6BAAJ,WACC,OAAOjrI,KAAKmnI,oCAGb8D,gBAAA,SAAKv3H,EAA8B9S,GAClC,IAAMmgB,EAAO/gB,KAAKoqI,GASlB,OARa,MAATxpI,EACHmgB,EAAKvgB,KAAMkT,GACD,GAAK9S,GAASA,EAAQmgB,EAAKrgB,OACrCqgB,EAAKxO,OAAQ3R,EAAO,EAAG8S,GAEvBqN,EAAKvgB,KAAMkT,GAEZA,EAAW5C,KAAM9Q,KAAMA,KAAKkkD,IACrBlkD,MAGRirI,gBAAA,SAAKrqI,GACJ,IAAMmgB,EAAO/gB,KAAKoqI,GAClB,OAAI,GAAKxpI,GAASA,EAAQmgB,EAAKrgB,OACvBqgB,EAAMngB,GAEP,MAGRqqI,oBAAA,SAASv3H,GACR,OAAO1T,KAAKoqI,GAAMvpI,QAAS6S,IAK5Bu3H,mBAAA,SAAQC,GACP,IAAMnqH,EAAO/gB,KAAKoqI,GAClB,GAAItmI,EAAconI,IAEjB,GAAI,IADEtqI,EAAQsqI,IACItqI,EAAQmgB,EAAKrgB,OAAS,CACvC,IAAM+pI,EAAU1pH,EAAKxO,OAAQ3R,EAAO,GAAK,GAEzC,OADA6pI,EAAQC,SACDD,OAEF,CACN,IACM7pI,EADA8S,EAAaw3H,EAEnB,GAAI,IADEtqI,EAAQmgB,EAAKlgB,QAAS6S,IAI3B,OAFAqN,EAAKxO,OAAQ3R,EAAO,GACpB8S,EAAWg3H,SACJh3H,EAGT,OAAO,MAGRu3H,kBAAA,WAEC,IADA,IAAMlqH,EAAO/gB,KAAKoqI,GACT7oI,EAAI,EAAGC,EAAOuf,EAAKrgB,OAAQa,EAAIC,IAAQD,EAC/Cwf,EAAMxf,GAAImpI,SAGX,OADA3pH,EAAKrgB,OAAS,EACPV,MAGRirI,oBAAA,WACC,OAAOjrI,KAAKud,SAGb0tH,iBAAA,WACC,OAAOjrI,KAAKoqI,GAAM1pI,QAGnBuqI,gBAAA,WAEC,IADA,IAAMlqH,EAAO/gB,KAAKoqI,GACT7oI,EAAI,EAAGC,EAAOuf,EAAKrgB,OAAQa,EAAIC,IAAQD,EAC/Cwf,EAAMxf,GAAIwhF,MAEX,OAAO/iF,yBE9ER,WAAaunI,EAA0B3lI,GACtC5B,KAAKmqI,GAAY5C,EACjB,IAAMnhI,EAAIpG,KAAKmrI,GAAK,IAAIF,GAAkCjrI,KAAMo9G,GAA0BguB,GACpF/kI,EAAIrG,KAAKqrI,GAAK,IAAIJ,GAAkCjrI,KAAMo9G,GAA0B50E,GAC1F,GAAI5mC,EAAU,CACb,IAAM0pI,EAAM1pI,EAAQwE,EACpB,GAAIklI,EACH,GAAI9vF,GAAa8vF,GAChB,IAAK,IAAI/pI,EAAI,EAAGC,EAAO8pI,EAAI5qI,OAAQa,EAAIC,IAAQD,EAC9C6E,EAAEonB,IAAK89G,EAAK/pI,SAGb6E,EAAEonB,IAAK89G,GAGT,IAAMC,EAAM3pI,EAAQyE,EACpB,GAAIklI,EACH,GAAI/vF,GAAa+vF,GAChB,IAAShqI,EAAI,EAAGC,EAAO+pI,EAAI7qI,OAAQa,EAAIC,IAAQD,EAC9C8E,EAAEmnB,IAAK+9G,EAAKhqI,SAGb8E,EAAEmnB,IAAK+9G,IAuBZ,OAjBC/rI,sBAAIgsI,qBAAJ,WACC,OAAOxrI,KAAKmrI,oCAGb3rI,sBAAIgsI,qBAAJ,WACC,OAAOxrI,KAAKqrI,oCAGb7rI,sBAAIgsI,4BAAJ,WACC,OAAOxrI,KAAKmqI,oCAGbqB,gBAAA,WAGC,OAFAxrI,KAAKmrI,GAAGpoD,MACR/iF,KAAKqrI,GAAGtoD,MACD/iF,yBChDR,WAAamS,EAAc2lD,EAAYp1D,GACtC1C,KAAK23D,GAAQxlD,EACbnS,KAAK43D,GAAME,EACX93D,KAAKmsB,GAAYzpB,EAqCnB,OAlCClD,sBAAIisI,wBAAJ,WACC,OAAOzrI,KAAK23D,QAGb,SAAUxlD,GACTnS,KAAKsG,IAAK6L,OAAM5P,oCAGjB/C,sBAAIisI,sBAAJ,WACC,OAAOzrI,KAAK43D,QAGb,SAAQE,GACP93D,KAAKsG,SAAK/D,EAAWu1D,oCAGtB2zE,gBAAA,SAAKt5H,EAAe2lD,GACnB,IAAIzzD,GAAY,EAehB,OAbY,MAAR8N,GAAgBnS,KAAK23D,KAAUxlD,IAClCnS,KAAK23D,GAAQxlD,EACb9N,GAAY,GAGH,MAANyzD,GAAc93D,KAAK43D,KAAQE,IAC9B93D,KAAK43D,GAAME,EACXzzD,GAAY,GAGTA,GACHrE,KAAKmsB,KAECnsB,yBCHR,WAAa4B,GAAb,WACOD,EAAUC,GAAWA,EAAQD,OAAW3B,KAAKkd,kBACnDld,KAAK8B,EAASH,EACd3B,KAAK2qB,GAAM,EACX3qB,KAAKyd,GAAa7b,GAA8B,MAAnBA,EAAQqD,QAAkBrD,EAAQqD,QAAUtD,EAAMo/G,aAC/E/gH,KAAKkkD,GAAak5D,GAA0BguB,EAC5C,IAAMM,EAAe9pI,GAAWA,EAAQ+pI,QAAiC,MAAvB/pI,EAAQ+pI,OAAOx5H,KAAevQ,EAAQ+pI,OAAOx5H,KAAO,EAChGy5H,EAAahqI,GAAWA,EAAQ+pI,QAA+B,MAArB/pI,EAAQ+pI,OAAO7zE,GAAal2D,EAAQ+pI,OAAO7zE,GAAK,EAChG93D,KAAK6rI,GAAU,IAAIJ,GAA4BC,EAAYE,GAAU,WACpE3kI,EAAK6kI,oBAEN,IAAMC,EAAcnqI,GAAWA,EAAQksC,OAA+B,MAAtBlsC,EAAQksC,MAAM37B,KAAevQ,EAAQksC,MAAM37B,KAAO,EAC5F65H,EAAYpqI,GAAWA,EAAQksC,OAA6B,MAApBlsC,EAAQksC,MAAMgqB,GAAal2D,EAAQksC,MAAMgqB,GAAK,EAC5F93D,KAAKisI,GAAS,IAAIR,GAA4BM,EAAWC,GAAS,WACjE/kI,EAAK6kI,oBAEN9rI,KAAK8rI,iBAkOP,OA/NWI,4BAAV,WACC,OAAO52H,EAAQuG,cAAcC,IAAK9b,KAAKkiB,YAG9BgqH,oBAAV,WACC,MAAO,0BAGRA,iBAAA,SAAMnvE,EAAyCjZ,GAC9C9jD,KAAKmnI,GAAapqE,EAClB/8D,KAAKkkD,GAAaJ,GAGnBooF,mBAAA,WACClsI,KAAKmnI,QAAa5kI,GAGnB2pI,gBAAA,WACC,IAAMnvE,EAAY/8D,KAAKmnI,GACvB,GAAIpqE,EAAY,CACf,IAAMwqE,EAAWxqE,EAAUA,UAAUwqE,SAC/BtiI,EAAUjF,KAAKyd,GACrB,OAAQzd,KAAKkkD,IACb,KAAKk5D,GAA0BguB,EAC9B,IAAMO,EAASpE,EAAS4E,OAAOR,OACzBD,EAAaC,EAAOx5H,KACpBy5H,EAAWD,EAAO7zE,GACxB,IAAOpc,GAAWgwF,KAAgBhwF,GAAWkwF,GAAc,CAC1D5rI,KAAK6rI,GAAQvlI,IAAKolI,EAAYE,GAC9B,IAAIQ,EAAYnnI,GACZonI,EAAU9E,EAASvyH,KAAK5O,EAAInB,GAClBmnI,IAEbC,EADAD,EAA8B,GAAlB7E,EAASvyH,KAAK5O,GAG3BpG,KAAKisI,GAAO3lI,IAAK8lI,EAAWC,GAE7B,MACD,KAAKjvB,GAA0B50E,EAC9B,IAMK6jG,EANCv+F,EAAQy5F,EAAS4E,OAAOr+F,MACxBi+F,EAAYj+F,EAAM37B,KAClB65H,EAAUl+F,EAAMgqB,GACfpc,GAAWqwF,IAAerwF,GAAWswF,KAC3ChsI,KAAK6rI,GAAQvlI,IAAKylI,EAAWC,IACzBI,EAAY7E,EAASvyH,KAAK3O,EAAIpB,IAC9BonI,EAAUpnI,KAGbonI,EADAD,EAA8B,GAAlB7E,EAASvyH,KAAK3O,GAG3BrG,KAAKisI,GAAO3lI,IAAK8lI,EAAWC,OAOtBH,2BAAV,WACClsI,KAAK2qB,IAAO,EACZ,IAAMghH,EAAS3rI,KAAK6rI,GACd/9F,EAAQ9tC,KAAKisI,GACbK,EAAaX,EAAO7zE,GAAK6zE,EAAOx5H,KAChCo6H,EAAYz+F,EAAMgqB,GAAKhqB,EAAM37B,KAC7BxQ,EAAQ3B,KAAK8B,EACnB9B,KAAKksC,GAAWvqC,EAAM6qI,OAAQF,GAAe,EAAIC,EAAYD,EAC7DtsI,KAAKwE,EAAUspC,EAAM37B,KAAOnS,KAAKksC,GAASy/F,EAAOx5H,KACjDnS,KAAKysI,GAAY9qI,EAAM6qI,OAAQD,GAAc,EAAID,EAAaC,EAC9DvsI,KAAK0sI,GAAWf,EAAOx5H,KAAOnS,KAAKysI,GAAU3+F,EAAM37B,MAGpD3S,sBAAI0sI,sBAAJ,WACC,OAAOlsI,KAAK2qB,oCAGbnrB,sBAAI0sI,0BAAJ,WACC,OAAOlsI,KAAK6rI,oCAGbrsI,sBAAI0sI,yBAAJ,WACC,OAAOlsI,KAAKisI,oCAGbC,gBAAA,SAAKz9G,GACJ,OAAOzuB,KAAKwE,EAAUxE,KAAKksC,GAASzd,GAGrCy9G,kBAAA,SAAOz9G,GACN,OAAOzuB,KAAK0sI,GAAW1sI,KAAKysI,GAAUh+G,GAG7By9G,0BAAV,SAAyBlkH,GACxB,GAAI,EAAIA,EAAQ,CACf,IAAM2jH,EAAS3rI,KAAK6rI,GACdx8F,EAAO1lC,KAAKwP,IAAKwyH,EAAO7zE,GAAK6zE,EAAOx5H,MAAS6V,EAC7C2kH,EAAQhjI,KAAK6/B,MAAO7/B,KAAKsjC,IAAKoC,GAAS1lC,KAAKijI,MAC5ChgI,EAAOjD,KAAKqjC,IAAK,GAAI2/F,GAC3B,OAAO3sI,KAAK8B,EAAO+qI,YAAax9F,EAAOziC,GAASA,EAEjD,OAAQ,GAGCs/H,0BAAV,SAAyBlmG,EAAcgiG,GACtC,OAAI,GAAKhiG,EACDA,GAASgiG,EAAa,IAErB,GAIAkE,mCAAV,SACClmG,EAAche,EAAe8kH,EAC7BC,EAAkBC,EAClBC,EAAiBzqI,GAEjB,IAAK,IAAIjB,EAAI,EAAGA,EAAIymB,EAAOzmB,GAAK,EAAI,CACnC,IAAM2rI,EAAgBJ,GAAiBvrI,EAAI,GAAKykC,EAC5C+mG,GAAYG,GAAiBA,GAAiBF,IACjDxqI,EAAQyqI,KAAcC,KAKfhB,wBAAV,WACC,IAAMnvE,EAAY/8D,KAAKmnI,GACvB,GAAIpqE,EAAY,CACf,IAAMuqE,EAAevqE,EAAUA,UAAUwqE,SAASvyH,KAClD,OAAQhV,KAAKkkD,IACb,KAAKk5D,GAA0BguB,EAC9B,OAAO9D,EAAalhI,EACrB,KAAKg3G,GAA0B50E,EAC9B,OAAO8+F,EAAajhI,GAGtB,OAAO,GAGR6lI,kBAAA,SACCrE,EACAE,EACAC,EACAmF,EACAC,GAEA,KAAIvF,GAAc,GAAlB,CAIA,IAAM8D,EAAS3rI,KAAK6rI,GACdwB,EAAY1jI,KAAKC,IAAK+hI,EAAOx5H,KAAMw5H,EAAO7zE,IAC1Cw1E,EAAY3jI,KAAKG,IAAK6hI,EAAOx5H,KAAMw5H,EAAO7zE,IAE1Cy1E,EAAYvtI,KAAKwtI,cAAe3F,GACtC,GAAI0F,GAAa,EAAjB,CACCJ,EAAa,GAAME,EACnBF,EAAa,GAAMntI,KAAKytI,IAAKJ,GAC7BF,EAAa,GAAM,EACnB,IAAK,IAAI5rI,EAAI,EAAGA,EAAIsmI,IAActmI,EAEjC4rI,EAA4B,GADtBO,EAAmB,EAAJnsI,IACaiG,IAClC2lI,EAAaO,EAAe,GAAMlmI,IAClC2lI,EAAaO,EAAe,GAAMlmI,IAEnC,IAASjG,EAAI,EAAGA,EAAIymI,IAAczmI,EAEjC6rI,EAA4B,GADtBO,EAAmB,EAAJpsI,IACaiG,IAClC4lI,EAAaO,EAAe,GAAMnmI,IAClC4lI,EAAaO,EAAe,GAAMnmI,QAdpC,CAoBA,IACMwlI,EAAWhtI,KAAK4tI,cAGhBC,EAAelkI,KAAK6/B,MAAO6jG,EAAYE,GAAc,EACrDO,EAAankI,KAAKwgB,KAAMmjH,EAAYC,GAAc,EAGlDQ,EAAY/tI,KAAKguI,cAAeT,EAAWxF,GAC7CkG,EAAS,EACTC,EAAS,EACb,IAAS3sI,EAAIssI,EAActsI,GAAKusI,IAAcvsI,EAAI,CACjD,IAAMurI,EAAgBvrI,EAAIgsI,EAC1B,GAAIU,EAASpG,EAAa,CACzB,IAAMsG,EAAyBnuI,KAAKytI,IAAKX,GAd1B,GAeCqB,GAA0BA,GAA0BnB,IAEnEG,EAA4B,GADtBO,EAAwB,EAATO,IACanB,EAClCK,EAAaO,EAAe,GAAMS,EAClChB,EAAaO,EAAe,GAAMH,EAClCU,GAAU,GAIZ,IAAK,IAAI77H,EAAI,EAAGA,EAAI21H,EAAoB31H,GAAK,EAC5C,GAAI87H,EAASlG,EAAa,CACzB,IAAMkF,EAAgBJ,GAAiB16H,EAAI,GAAK27H,EAC1CK,EAAyBpuI,KAAKytI,IAAKP,GA3B3B,GA4BEkB,GAA0BA,GAA0BpB,IAEnEI,EAA4B,GADtBO,EAAwB,EAATO,IACahB,EAClCE,EAAaO,EAAe,GAAMS,EAClChB,EAAaO,EAAe,GAAMI,EAClCG,GAAU,IAKd,IAAS3sI,EAAI0sI,EAAQ1sI,EAAIsmI,IAActmI,EAAI,CAC1C,IAAMmsI,EACNP,EAA4B,GADtBO,EAAmB,EAAJnsI,IACaiG,IAClC2lI,EAAaO,EAAe,GAAMlmI,IAClC2lI,EAAaO,EAAe,GAAMlmI,IAEnC,IAASjG,EAAI2sI,EAAQ3sI,EAAIymI,IAAczmI,EAAI,CAC1C,IAAMosI,EACNP,EAA4B,GADtBO,EAAmB,EAAJpsI,IACaiG,IAClC4lI,EAAaO,EAAe,GAAMnmI,IAClC4lI,EAAaO,EAAe,GAAMnmI,2BClRpC,WAAa2K,EAAc2lD,GAC1B93D,KAAKmS,KAAOA,EACZnS,KAAK83D,GAAKA,EAkCZ,OA/BCu2E,gBAAA,SAAKl8H,EAAe2lD,GAOnB,OANY,MAAR3lD,IACHnS,KAAKmS,KAAOA,GAEH,MAAN2lD,IACH93D,KAAK83D,GAAKA,GAEJ93D,MAGRquI,kBAAA,WAGC,OAFAruI,KAAKmS,KAAO3K,IACZxH,KAAK83D,GAAKtwD,IACHxH,MAGRquI,gBAAA,SAAKl8H,EAAc2lD,GAalB,OAZMpc,GAAWvpC,KAChBnS,KAAKmS,KAASupC,GAAW17C,KAAKmS,MAC7BA,EAAOxI,KAAKC,IAAK5J,KAAKmS,KAAMA,IAIxBupC,GAAWoc,KAChB93D,KAAK83D,GAAOpc,GAAW17C,KAAK83D,IAC3BA,EAAKnuD,KAAKG,IAAK9J,KAAK83D,GAAIA,IAInB93D,yBC3BR,WAAa4B,GACZ5B,KAAKkD,MAAQlD,KAAKsuI,SAAU1sI,GAAWA,EAAQsB,MAAO6pD,GAAewP,cACrEv8D,KAAKkC,MAAQlC,KAAKsuI,SAAU1sI,GAAWA,EAAQM,MAAO6oI,IACtD/qI,KAAKoC,MAAQpC,KAAKsuI,SAAU1sI,GAAWA,EAAQQ,MAAO2qD,GAAeuP,cACrEt8D,KAAKgtB,MAAQhtB,KAAKsuI,SAAU1sI,GAAWA,EAAQorB,MAAO08B,GAAkBrrC,MAqB1E,OAlBWkwH,qBAAV,SACC9/G,EACA49C,GAEA,OAAI7wB,GAAa/sB,GACT,SAAE7tB,GAAmB,OAAA6tB,EAAO7tB,EAAQ6tB,EAAM/tB,SACvCgB,EAAgB+sB,GACnBA,EACY,MAATA,EACH,WAAM,OAAAA,GACH+sB,GAAa6wB,GAChB,SAAEzrE,GAAmB,OAAAyrE,EAAKzrE,EAAQyrE,EAAI3rE,SACnCgB,EAAgB2qE,GACnBA,EAEA,WAAM,OAAAA,uBCpBf,WAAak7D,EAA0B3lI,GACtC5B,KAAKmqI,GAAY5C,EACjBvnI,KAAK6rI,GAAU,IAAIwC,GAAkB7mI,IAAKA,KAC1CxH,KAAKisI,GAAS,IAAIoC,GAAkB7mI,IAAKA,KACzCxH,KAAKwuI,GAAU,IAAID,GAAwB3sI,GAAWA,EAAQksD,QAE9D9tD,KAAKoqI,GAAQ,GACb,IAAMrpH,EAAOnf,GAAWA,EAAQmf,KAChC,GAAIA,EAAO,CACV,IAAM0tH,EAAa1tH,EAAKrgB,OACxB,GAAI,EAAI+tI,EAAa,CACpB,IAAK,IAAIltI,EAAI,EAAGA,EAAIktI,IAAcltI,EACjCvB,KAAKwtB,IAAKzM,EAAMxf,IAEjBvB,KAAKsB,WAyGT,OApGC9B,sBAAIkvI,4BAAJ,WACC,OAAO1uI,KAAKmqI,oCAGb3qI,sBAAIkvI,0BAAJ,WACC,OAAO1uI,KAAKwuI,oCAGbE,mBAAA,WAEC,IADA,IAAM3tH,EAAO/gB,KAAKoqI,GACT7oI,EAAI,EAAGC,EAAOuf,EAAKrgB,OAAQa,EAAIC,IAAQD,EAC/Cwf,EAAMxf,GAAID,UAIZotI,gBAAA,SAAKvC,GACJ,IAAMprH,EAAO/gB,KAAKoqI,GAClB+B,EAAOr7H,KAAM9Q,KAAM+gB,EAAKrgB,QACxBqgB,EAAKvgB,KAAM2rI,IAGZuC,gBAAA,SAAK9tI,GACJ,IAAMmgB,EAAO/gB,KAAKoqI,GAClB,OAAI,GAAKxpI,GAASA,EAAQmgB,EAAKrgB,OACvBqgB,EAAMngB,GAEP,MAGR8tI,oBAAA,SAASvC,GACR,OAAOnsI,KAAKoqI,GAAMvpI,QAASsrI,IAK5BuC,mBAAA,SAAQC,GACP,IAAM5tH,EAAO/gB,KAAKoqI,GAClB,GAAItmI,EAAc6qI,IAEjB,GAAI,IADE/tI,EAAQ+tI,IACI/tI,EAAQmgB,EAAKrgB,OAAS,CACvC,IAAM+pI,EAAU1pH,EAAKxO,OAAQ3R,EAAO,GAAK,GAGzC,OAFA6pI,EAAQC,SACRD,EAAQ9iH,UACD8iH,OAEF,CACN,IACM7pI,EADAurI,EAASwC,EAEf,GAAI,IADE/tI,EAAQmgB,EAAKlgB,QAASsrI,IAK3B,OAHAprH,EAAKxO,OAAQ3R,EAAO,GACpBurI,EAAOzB,SACPyB,EAAOxkH,UACAwkH,EAGT,OAAO,MAGRuC,kBAAA,WAEC,IADA,IAAM3tH,EAAO/gB,KAAKoqI,GACT7oI,EAAI,EAAGC,EAAOuf,EAAKrgB,OAAQa,EAAIC,IAAQD,EAC/Cwf,EAAMxf,GAAIomB,UAGX,OADA5G,EAAKrgB,OAAS,EACPV,MAGR0uI,iBAAA,WACC,OAAO1uI,KAAKoqI,GAAM1pI,QAGnBguI,oBAAA,WACC1uI,KAAKud,SAGN/d,sBAAIkvI,0BAAJ,WACC,IAAMlsI,EAASxC,KAAK6rI,GACpBrpI,EAAO+a,QAGP,IADA,IAAMwD,EAAO/gB,KAAKoqI,GACT7oI,EAAI,EAAGC,EAAOuf,EAAKrgB,OAAQa,EAAIC,IAAQD,EAAI,CACnD,IAAMoqI,EAAS5qH,EAAMxf,GAAIoqI,OACzBnpI,EAAOgrB,IAAKm+G,EAAOx5H,KAAMw5H,EAAO7zE,IAGjC,OAAOt1D,mCAGRhD,sBAAIkvI,yBAAJ,WACC,IAAMlsI,EAASxC,KAAKisI,GACpBzpI,EAAO+a,QAGP,IADA,IAAMwD,EAAO/gB,KAAKoqI,GACT7oI,EAAI,EAAGC,EAAOuf,EAAKrgB,OAAQa,EAAIC,IAAQD,EAAI,CACnD,IAAMusC,EAAQ/sB,EAAMxf,GAAIusC,MACxBtrC,EAAOgrB,IAAKsgB,EAAM37B,KAAM27B,EAAMgqB,IAG/B,OAAOt1D,sDCpHR,WAAaZ,GACZ5B,KAAKgrD,GAAQ,IAAIpjC,QAChBhmB,GAA4B,MAAjBA,EAAQsB,MAAgBtB,EAAQsB,MAAQ,IACnDtB,GAA6B,MAAlBA,EAAQ+E,OAAiB/E,EAAQ+E,OAAS,KAEtD3G,KAAKmnI,GAAa,IAAIthC,GACtB7lG,KAAK4uI,GAAc,IAAIpD,GAA+BxrI,KAAM4B,GAAWA,EAAQ8R,YAC/E1T,KAAK6uI,GAAU,IAAIH,GAA2B1uI,KAAM4B,GAAWA,EAAQuqI,QACvEnsI,KAAK8uI,GAAQ,IAAIzE,GAAyBrqI,KAAM4B,GAAWA,EAAQk+C,MA2BrE,OAxBCtgD,sBAAIuvI,8BAAJ,WACC,OAAO/uI,KAAK4uI,oCAGbpvI,sBAAIuvI,0BAAJ,WACC,OAAO/uI,KAAK6uI,oCAGbrvI,sBAAIuvI,6BAAJ,WACC,OAAO/uI,KAAKmnI,oCAGb3nI,sBAAIuvI,wBAAJ,WACC,OAAO/uI,KAAKgrD,oCAGbxrD,sBAAIuvI,wBAAJ,WACC,OAAO/uI,KAAK8uI,oCAGbC,oBAAA,WACC/uI,KAAKmnI,GAAWx/G,UAChB3nB,KAAK6uI,GAAQlnH,iBP5Cf,SAAYqjH,GACXA,mBACAA,uBACAA,qBACAA,mBAJD,CAAYA,KAAAA,QQcZ,ICjBYgE,iBDqCX,WAAaptI,GACZ,IAAM8R,EAAa9R,GAAWA,EAAQ8R,WACtC1T,KAAKivI,GAAsBv7H,GAA8B,MAAhBA,EAAWtN,EAAYsN,EAAWtN,EAAI,EAC/EpG,KAAKkvI,GAAsBx7H,GAA8B,MAAhBA,EAAWrN,EAAYqN,EAAWrN,EAAI,EAE/ErG,KAAKgjF,GAAWphF,GAAWA,EAAQsvD,QAAW,GAC9ClxD,KAAKmvI,GAAW,EAChBnvI,KAAKovI,GAAkB5nI,IAEvBxH,KAAKqvI,GAAwB7nI,IAC7BxH,KAAKsvI,GAAwB9nI,IAE7BxH,KAAK6rI,GAAU,IAAIwC,GAAkB7mI,IAAKA,KAC1CxH,KAAKisI,GAAS,IAAIoC,GAAkB7mI,IAAKA,KACzCxH,KAAKuvI,GAAiB/nI,IAEtBxH,KAAK2c,GAAW/a,EAuLlB,OApLW4tI,qBAAV,SAAoBzyE,EAAkCn8D,GACrD,IAAMgB,EAAU5B,KAAK2c,GACfmxC,EAASlsD,GAAWA,EAAQksD,OAC5B2hF,EAAkB1yE,EAAUjP,OAClC,GAAIA,EAAS,CACZ,IAAM9gC,EAA0B,MAAhB8gC,EAAO9gC,MAAgB8gC,EAAO9gC,MAAQyiH,EAAgBziH,MAAOpsB,GAC7E,MAAO,CACNsC,MAAyB,MAAhB4qD,EAAO5qD,MAAgB4qD,EAAO5qD,MAAQusI,EAAgBvsI,MAAOtC,GACtEsB,MAAyB,MAAhB4rD,EAAO5rD,MAAgB4rD,EAAO5rD,MAAQutI,EAAgBvtI,MAAOtB,GACtEwB,MAAyB,MAAhB0rD,EAAO1rD,MAAgB0rD,EAAO1rD,MAAQqtI,EAAgBrtI,MAAOxB,GACtEosB,MAASnqB,EAAcmqB,GAAU08B,GAAmB18B,GAAUA,GAI/D,OADMA,EAAQyiH,EAAgBziH,MAAOpsB,GAC9B,CACNsC,MAAOusI,EAAgBvsI,MAAOtC,GAC9BsB,MAAOutI,EAAgBvtI,MAAOtB,GAC9BwB,MAAOqtI,EAAgBrtI,MAAOxB,GAC9BosB,MAASnqB,EAAcmqB,GAAU08B,GAAmB18B,GAAUA,IAKjEwiH,iBAAA,SAAMzyE,EAAkCn8D,GACvC,IAAI8uI,EAAO1vI,KAAK2vI,GAChB,IAAMD,EAAO,CACZ,IAAM5hF,EAAS9tD,KAAK4vI,SAAU7yE,EAAWn8D,IACzC8uI,EAAO1vI,KAAK2vI,GAAQ,IAAIjmD,GAAW,GAAI,GAAI57B,EAAO5qD,MAAO4qD,EAAO9gC,QAC3D8gC,OAAO5rD,MAAQ4rD,EAAO5rD,MAC3BwtI,EAAK5hF,OAAO1rD,MAAQ0rD,EAAO1rD,MAE5BpC,KAAKmnI,GAAapqE,EAClB2yE,EAAKxG,OAAQnsE,EAAUwqE,SAASxqE,UAAWn8D,GAC3CZ,KAAKovI,GAAkB5nI,IACvBxH,KAAKqvI,GAAwB7nI,IAC7BxH,KAAKsvI,GAAwB9nI,KAG9BgoI,mBAAA,WACC,IAAME,EAAO1vI,KAAK2vI,GACdD,GACHA,EAAKz8E,SAENjzD,KAAKmnI,QAAa5kI,GAGnB/C,sBAAIgwI,0BAAJ,WACC,OAAOxvI,KAAKgjF,QAGb,SAAY9xB,GACXlxD,KAAKgjF,GAAU9xB,EACflxD,KAAKmvI,IAAY,mCAGlBK,oBAAA,WACCxvI,KAAKmvI,IAAY,GAGlBK,mBAAA,WACC,IAAME,EAAO1vI,KAAK2vI,GACZ5yE,EAAY/8D,KAAKmnI,GACvB,GAAIuI,GAAQ3yE,EAAY,CACvB,IACMrpD,EADWqpD,EAAUwqE,SACC7zH,WACtBm8H,EAAcn8H,EAAWtN,EAAE0V,IAAK9b,KAAKivI,IACrCa,EAAcp8H,EAAWrN,EAAEyV,IAAK9b,KAAKkvI,IAC3C,GAAIW,GAAeC,EAAc,CAChC,IAAMC,EAAgBF,EAAY73G,GAC5Bg4G,EAAgBF,EAAY93G,GAE5B0tD,EAAU1lF,KAAKmvI,GACftpD,EAAmBH,IAAY1lF,KAAKovI,GACpCa,EAAyBF,IAAkB/vI,KAAKqvI,GAChDa,EAAyBF,IAAkBhwI,KAAKsvI,IAClDzpD,GAAkBoqD,GAAwBC,KAC7ClwI,KAAKovI,GAAkB1pD,EACvB1lF,KAAKqvI,GAAwBU,EAC7B/vI,KAAKsvI,GAAwBU,EAC7BhwI,KAAKmwI,WAAYT,EAAMG,EAAaC,OAM9BN,uBAAV,SACCE,EACAU,EACAC,GASA,IAPA,IAAMtkF,EAAS2jF,EAAKx+E,OAAOnF,OACrBC,EAAW0jF,EAAKx+E,OAAOlF,SACvBskF,EAAevkF,EAAOrrD,OACtB6vI,EAAiBvkF,EAAStrD,OAC5B8vI,EAAU,EACVC,EAAY,EACVv/E,EAASlxD,KAAKgjF,GACXzhF,EAAI,EAAGC,EAAO0vD,EAAOxwD,OAAQa,EAAIC,EAAMD,GAAK,EAAI,CACxD,IAAMmvI,EAAOx/E,EAAQ3vD,GACfovI,EAAOz/E,EAAQ3vD,EAAI,GACzB,GAAY,MAARmvI,GAAwB,MAARC,EAAe,CAClC,IAAMvqI,EAAIgqI,EAAY3C,IAAKiD,GACrBrqI,EAAIgqI,EAAY5C,IAAKkD,GACvBH,EAAUF,GACbvkF,EAAQykF,GAAYpqI,EACpB2lD,EAAQykF,EAAU,GAAMnqI,GAExB0lD,EAAOvrD,KAAM4F,EAAGC,GAEjBmqI,GAAW,MACL,CACN,IAAMI,GAAWrvI,GAAK,GAAKkvI,EACvBA,EAAYF,EACfvkF,EAAUykF,GAAcG,EAExB5kF,EAASxrD,KAAMowI,GAEhBH,GAAa,GAGX1kF,EAAOrrD,SAAW8vI,IACrBzkF,EAAOrrD,OAAS8vI,GAEbxkF,EAAStrD,SAAW+vI,IACvBzkF,EAAStrD,OAAS+vI,GAEnBf,EAAKx+E,OAAO5qD,IAAKylD,EAAQC,GACzB3rD,EAAciB,OAAQouI,IAGvBlwI,sBAAIgwI,0BAAJ,WAEC,OADAxvI,KAAK6wI,eACE7wI,KAAK6rI,oCAGbrsI,sBAAIgwI,yBAAJ,WAEC,OADAxvI,KAAK6wI,eACE7wI,KAAKisI,oCAGHuD,yBAAV,WACC,IAAM9pD,EAAU1lF,KAAKmvI,GACrB,GAAInvI,KAAKuvI,KAAmB7pD,EAAU,CACrC1lF,KAAKuvI,GAAiB7pD,EAEtB,IAAMx0B,EAASlxD,KAAKgjF,GACd2oD,EAAS3rI,KAAK6rI,GACd/9F,EAAQ9tC,KAAKisI,GAGnB,GAFAN,EAAOpuH,QACPuwB,EAAMvwB,QACQ,MAAV2zC,EACH,IAAK,IAAI3vD,EAAI,EAAGC,EAAO0vD,EAAOxwD,OAAQa,EAAIC,EAAMD,GAAK,EAAI,CACxD,IAAMmvI,EAAOx/E,EAAQ3vD,GACT,MAARmvI,GACH/E,EAAOn+G,IAAKkjH,EAAMA,GAEnB,IAAMC,EAAOz/E,EAAQ3vD,EAAI,GACb,MAARovI,GACH7iG,EAAMtgB,IAAKmjH,EAAMA,MAOtBnB,oBAAA,WACC,IAAME,EAAO1vI,KAAK2vI,GACdD,IACH1vI,KAAK2vI,QAAQptI,EACbmtI,EAAKz8E,SACLy8E,EAAK/nH,WAGN3nB,KAAKmnI,QAAa5kI,EAClBvC,KAAKgjF,GAAQtiF,OAAS,EACtBV,KAAKmvI,GAAW,EAChBnvI,KAAKovI,GAAkB5nI,IACvBxH,KAAKqvI,GAAwB7nI,IAC7BxH,KAAKsvI,GAAwB9nI,yBElO/B,4DA6BA,OA1BU1H,OAGCgxI,iBAAV,SAAgBlvI,GACfkF,YAAMwZ,eAAM1e,GAEZ,IAAM2lI,EAAW,IAAIwH,GAAoBntI,GAAWA,EAAQ2lI,UAC5DvnI,KAAKmqI,GAAY5C,EACjBvnI,KAAKwgB,SAAU+mH,EAASxqE,WACxB/8D,KAAKwgB,SAAU+mH,EAASznF,KAAKid,YAG9Bv9D,sBAAIsxI,4BAAJ,WACC,OAAO9wI,KAAKmqI,oCAGH2G,oBAAV,WACC,MAAO,UAGRA,oBAAA,WACO9wI,KAAK+wI,aACV/wI,KAAKmqI,GAAUxiH,UACf7gB,YAAM6gB,wBAvBChH,iBCXV,cAkBA,OAfCqwH,iBAAA,WACC,MAAM,IAAIrwI,MAAM,4BAGjBqwI,iBAAA,WACC,MAAM,IAAIrwI,MAAM,4BAGjBqwI,oBAAA,aAIAA,oBAAA,WACC,OAAOt4B,GAAa4E,WAAa5E,GAAa6E,0BCfhD,cAoBA,OAnBC0zB,oBAAA,WACC,OAAOjyB,GAAakyB,wBAAwBC,UAG7CF,iBAAA,WACC,MAAM,IAAItwI,MAAM,4BAGjBswI,iBAAA,WACC,MAAM,IAAItwI,MAAM,4BAGjBswI,oBAAA,aAIAA,oBAAA,WACC,OAAOv4B,GAAa4E,WAAa5E,GAAa6E,0BCf/C,WAAatgG,GACZjd,KAAKgd,GAAQC,EAsBf,OAnBCm0H,oBAAA,WACC,OAAOpyB,GAAakyB,wBAAwBG,OAAQrxI,KAAKgd,KAG1Do0H,iBAAA,WACC,OAAO,GAGRA,iBAAA,WACC,OAAO,GAGRA,oBAAA,aAIAA,oBAAA,WACC,OAAO14B,GAAa4E,+BCxBtB,cAoBA,OAnBCg0B,oBAAA,WACC,OAAOtyB,GAAakyB,wBAAwBj4G,QAG7Cq4G,iBAAA,WACC,OAAO,GAGRA,iBAAA,WACC,OAAO,GAGRA,oBAAA,aAIAA,oBAAA,WACC,OAAO54B,GAAa4E,gCCXtB,4DAaA,OAb8Bx9G,OACnByxI,iBAAV,SAAgB3vI,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAK0Q,SAAUpM,EAAWkf,aAAa,IAG9B+tH,2BAAV,aAIUA,oBAAV,WACC,MAAO,eAXqB5wH,kBCR9B,4DAuBA,OAvBwD7gB,OACvDN,sBAAIgyI,uBAAJ,WACC,OAAOxxI,KAAKoG,OAGb,SAASqrI,GACRzxI,KAAKoG,EAAIqrI,mCAGVjyI,sBAAIgyI,uBAAJ,WACC,OAAOxxI,KAAKqG,OAGb,SAASqrI,GACR1xI,KAAKqG,EAAIqrI,mCAGVF,qBAAA,WACC,MAAO,CACNC,IAAKzxI,KAAKoG,EACVsrI,IAAK1xI,KAAKqG,OApB2C01D,iCCSvD,WACC/1D,EACA2rI,EACAC,EACAC,EACAC,EACAC,GAEA/xI,KAAKgyI,GAAMhsI,GACa,IAApB2rI,IAAgD,IAApBA,GAC/B3xI,KAAK42D,GAAU+6E,EACf3xI,KAAK23D,GAAQ,IAAI65E,GAAoCxrI,EAAI,KAAM4rI,EAAMC,GACrE7xI,KAAK43D,GAAM,IAAI45E,GAAoCxrI,EAAI,KAAM8rI,EAAMC,IACtC,MAAnBJ,GACV3xI,KAAK42D,GAAU+6E,EAAgBh7E,OAC/B32D,KAAK23D,GAAQ,IAAI65E,GAAoCxrI,EAAI,KAAM2rI,EAAgBx/H,KAAKs/H,IAAKE,EAAgBx/H,KAAKu/H,KAC9G1xI,KAAK43D,GAAM,IAAI45E,GAAoCxrI,EAAI,KAAM2rI,EAAgB75E,GAAG25E,IAAKE,EAAgB75E,GAAG45E,OAExG1xI,KAAK42D,IAAU,EACf52D,KAAK23D,GAAQ,IAAI65E,GAAoCxrI,EAAI,MAAO,IAAK,mBACrEhG,KAAK43D,GAAM,IAAI45E,GAAoCxrI,EAAI,KAAM,KAAO,oBA8BvE,OA1BCxG,sBAAIyyI,0BAAJ,WACC,OAAOjyI,KAAK42D,QAGb,SAAYD,GACP32D,KAAK42D,KAAYD,IACpB32D,KAAK42D,GAAUD,EACf32D,KAAKgyI,uCAIPxyI,sBAAIyyI,wBAAJ,WACC,OAAOjyI,KAAK23D,oCAGbn4D,sBAAIyyI,sBAAJ,WACC,OAAOjyI,KAAK43D,oCAGbq6E,sBAAA,WACC,MAAO,CACNt7E,OAAQ32D,KAAK42D,GACbzkD,KAAMnS,KAAK23D,GAAM9J,WACjBiK,GAAI93D,KAAK43D,GAAI/J,gCCzCf,WAAan1B,EAAsC92B,GAAnD,WACC5B,KAAKq5B,GAAUX,EACf14B,KAAKkyI,GAAWtwI,GAAWA,EAAQuwI,QACnCnyI,KAAK67C,GAAW,IAAIo2F,IAA8B,WACjDhrI,EAAKmrI,oBACHxwI,GAAWA,EAAQg6C,SAqDxB,OAlDCy2F,iBAAA,WACCryI,KAAKoyI,mBAGIC,4BAAV,WACC,IAAMF,EAAUnyI,KAAKkyI,GACrB,GAAIC,EAAU,CACb,IASOG,EATD12F,EAAU57C,KAAK67C,GACjBD,EAAQ+a,QACL27E,EAAUtyI,KAAKuyI,IAEpBD,EAAQ12F,QAAUA,EAElB57C,KAAKuyI,GAAWJ,EAASnyI,KAAKq5B,IAAU0pD,OAGnCuvD,EAAUtyI,KAAKuyI,MAEpBvyI,KAAKuyI,QAAWhwI,EAChB+vI,EAAQ3qH,aAMZnoB,sBAAI6yI,2BAAJ,WACC,OAAOryI,KAAKuyI,oCAGb/yI,sBAAI6yI,2BAAJ,WACC,OAAOryI,KAAKkyI,oCAGb1yI,sBAAI6yI,2BAAJ,WACC,OAAOryI,KAAK67C,oCAGbw2F,sBAAA,WACC,MAAO,CACNz2F,QAAS57C,KAAK67C,GAAS0R,cAIzB8kF,oBAAA,WACC,IAAMC,EAAUtyI,KAAKuyI,GACN,MAAXD,IACHtyI,KAAKuyI,QAAWhwI,EAChB+vI,EAAQ3qH,gCClEV,WAAa1K,GAAb,MACCnW,0BACAG,EAAKgW,KAAOA,EACZhW,EAAKsX,aAAc,EACnBtX,EAAKurD,UAAY,IA6BnB,OApCmC1yD,OAUlC0yI,oBAAA,WACC,IAAMxyI,KAAK+wI,WAAa,CAEvB,IADA,IAAMtwH,EAAWzgB,KAAKygB,SACblf,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAC3Ckf,EAAUlf,GAAIomB,UAEflH,EAAS/f,OAAS,EAClBoG,YAAM6gB,qBAIR6qH,sBAAA,SACCtxI,EAAeqrD,EAA6C70B,GAG5D,IADA,IAAMjX,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IACMma,EADQ+E,EAAUlf,GACLgsD,UAAWhB,GAC9B7wC,EAAM,IAAOxa,EACbw2B,EAAMl3B,KAAMkb,GAGb,MAAO,CACN1b,KAAKid,MAAQ,QAjCmB4oF,mBCMlC,aAAA,MACC/+F,0BACAG,EAAK+2H,GAAU,KACf/2H,EAAKsX,aAAc,EACnBtX,EAAKyX,qBAAsB,IA+I7B,OAvJ4C5e,OAW3CN,sBAAIizI,0BAAJ,WACC,OAAOzyI,KAAKg+H,QAGb,SAAY98H,GACPlB,KAAKg+H,KAAY98H,IAAmB,MAATA,GAAiB,GAAKlB,KAAKygB,SAAS5f,QAASK,MAC3ElB,KAAKg+H,GAAU98H,EACflB,KAAK4X,KAAM,SAAU5X,wCAIvByyI,mBAAA,SAAQx1H,EAAcy1H,GACrB,IAAMlwI,EAAS,IAAIgwI,GAAev1H,GAElC,OADAjd,KAAKkpI,OAAQ1mI,EAAQkwI,GACdlwI,GASRiwI,mBAAA,SAAQvxI,EAAsBwxI,GAC7B1yI,KAAKwgB,SAAUtf,IACE,IAAbwxI,IACH1yI,KAAKg+H,GAAU98H,GAEhBlB,KAAK4X,KAAM,SAAU5X,MACrBK,EAAciB,OAAQtB,OAGvByyI,qBAAA,SAAUvxI,EAAsBN,EAAe8xI,GAC9C1yI,KAAK2yI,WAAYzxI,EAAON,IACP,IAAb8xI,IACH1yI,KAAKg+H,GAAU98H,GAEhBlB,KAAK4X,KAAM,SAAU5X,MACrBK,EAAciB,OAAQtB,OASvByyI,mBAAA,SAAQvxI,EAAsBqjH,GAC7B,IAAM9jG,EAAWzgB,KAAKygB,SAChB7f,EAAQ6f,EAAS5f,QAASK,GAC5B,GAAKN,IACRZ,KAAKg+H,GAAUzZ,EAEf9jG,EAASlO,OAAQ3R,EAAO,GACvBM,EAAcF,YAASuB,EAExBvC,KAAK4X,KAAM,SAAU5X,MACrBK,EAAciB,OAAQtB,QAWxByyI,mBAAA,SAAQvxI,EAAsB0xI,GAC7B,IAAMnyH,EAAWzgB,KAAKygB,SAChB7f,EAAQ6f,EAAS5f,QAASK,GAsBhC,OArBI,GAAKN,IACR6f,EAASlO,OAAQ3R,EAAO,GACvBM,EAAcF,YAASuB,EAEpBvC,KAAKg+H,KAAY98H,KACC,IAAjB0xI,EACChyI,EAAQ6f,EAAS/f,OACpBV,KAAKg+H,GAAUv9G,EAAU7f,GACf,EAAI6f,EAAS/f,OACvBV,KAAKg+H,GAAUv9G,EAAU7f,EAAQ,GAEjCZ,KAAKg+H,GAAU,KAGhBh+H,KAAKg+H,GAAU,MAIjBh+H,KAAK4X,KAAM,SAAU5X,MACrBK,EAAciB,OAAQtB,OAEhBY,GAGR6xI,gBAAA,SAAK7xI,GACJ,IAAM8f,EAAQ1gB,KAAKygB,SAAU7f,GAC7B,OAAa,MAAT8f,EACIA,EAED,MAGR+xH,kBAAA,WACC,IAAMhyH,EAAWzgB,KAAKygB,SACtB,GAAI,EAAIA,EAAS/f,OAAS,CACzB,IAAK,IAAIa,EAAIkf,EAAS/f,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC/C,IAAMmf,EAAQD,EAAUlf,GACvBmf,EAAc1f,OAAS,KACxB0f,EAAMiH,UAEPlH,EAAS/f,OAAS,EAElBV,KAAK4X,KAAM,SAAU5X,MACrBK,EAAciB,OAAQtB,QAIxByyI,oBAAA,WACOzyI,KAAK+wI,aACV/wI,KAAKud,QACLzW,YAAM6gB,qBAIR8qH,iBAAA,WACC,OAAOzyI,KAAKygB,SAAS/f,QAGtB+xI,sBAAA,SACClmF,EAA6C70B,GAI7C,IAFA,IAAMl1B,EAAoC,GACpCie,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACxBiB,EAAOhC,KAAMkgB,EAAM6sC,UAAWhsD,EAAGgrD,EAAS70B,IAE3C,OAAOl1B,MArJmCqlB,4BCiB3C,WAAajmB,GAAb,MACCkF,YAAOlF,SAEDV,EAAQ,IAAIuxI,UAClBxrI,EAAK60C,GAAS56C,EACd+F,EAAKuZ,SAAUtf,IAEF+F,EAAK4rI,GAAQ,IAAIR,GAAoBprI,EAAMrF,GAAWA,EAAQkxI,OACtExyH,SAsCP,OAlDUxgB,OAeTN,sBAAIuzI,wBAAJ,WACC,OAAO/yI,KAAK6yI,oCAGbrzI,sBAAIuzI,yBAAJ,WACC,OAAO/yI,KAAK87C,oCAGbi3F,uBAAA,SAAYz1D,KAIZy1D,oBAAA,WACO/yI,KAAK+wI,aACV/wI,KAAK6yI,GAAMlrH,UACX3nB,KAAK87C,GAAOn0B,UACZ7gB,YAAM6gB,qBAIRorH,oBAAA,SAAS95H,EAAgB5B,GAExB,IADA,IAAM27H,EAAShzI,KAAK87C,GAAOr7B,SAClBlf,EAAIyxI,EAAOtyI,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC7C,IACMmsD,EADQslF,EAAQzxI,GACF4/G,QAASloG,EAAQ5B,GACrC,GAAa,MAATq2C,EACH,OAAOA,EAGT,OAAO,MAGEqlF,oBAAV,WACC,MAAO,yBAhDCrP,mBCMT,WAAa9hI,GAAb,MACCkF,YAAOlF,SAEPqF,EAAKmY,OAASnY,EAAKtF,MAAM8pG,gBAEzB,IAAMwnC,EAAkB,IAAI3kH,WAC5B2kH,EAAgBtkI,SAAU,EAC1B1H,EAAK0rI,WAAYM,EAAiBhsI,EAAKwZ,SAAS/f,OAAS,GACzDuG,EAAKisI,GAAmBD,EAExB,IAAME,EAAUvxI,EAAQuxI,eACxBA,EAAQryI,OAAO6P,GAAI,UAAU,WAC5B1J,EAAK0W,UACLtd,EAAciB,OAAQ2F,MAEvBA,EAAKmsI,GAAWD,IA0DlB,OA7EUrzI,OAsBTuzI,sBAAA,SAAWr7G,GACV,IAAMu0B,EAAU,IAAI+6C,GACd5vE,EAAkC,GAClC11B,EAAahC,KAAKgC,WACxB,MAAO,CACNsxI,QC9CsC,ED+CtCt7G,KACA/a,KAAMjd,KAAKid,KACX/Z,MAAOlD,KAAKkD,MACZyD,OAAQ3G,KAAK2G,OACb3E,WAAY,CACXE,MAAOF,EAAWuM,SAAU,GAC5BnM,MAAOJ,EAAWyM,SAAU,IAE7BqkI,KAAM9yI,KAAK6yI,GAAMtlF,YACjBziB,UAAWyhB,EAAQgB,YACnBylF,OAAQhzI,KAAK87C,GAAOyR,UAAWhB,EAAS70B,GACxCA,QACA6hF,KAAMv5G,KAAKozI,GAAS7lF,cAItB8lF,qBAAA,WACCvsI,YAAMse,oBAEN,IAAM6tH,EAAkBjzI,KAAKkzI,GACvBpyI,EAASd,KAAKozI,GAAStyI,OAC7B,GAAIA,EAAO6N,QAAU,CACpB,IAGMzL,EAAQlD,KAAKkD,MAAQ,GACrByD,EAAS3G,KAAK2G,OAAS,GACvBolD,EAASjrD,EAAOirD,OACtBknF,EAAgB11H,QAChB01H,EAAgBzwF,UAAW,EAAG,EAAG,EAAG,GACpCywF,EAAgB9kH,UARI,QAEA,IAOpB,IAAK,IAAI5sB,EAAI,EAAGC,EAAOuqD,EAAOrrD,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMktB,EAAQs9B,EAAQxqD,GAClBktB,EAAMjc,OAASm7F,GAAwBhpD,SAC1CsuF,EAAgB7kH,SAAUK,EAAM9Z,SAAU,EAXxB,EAWwChO,GAE1DssI,EAAgB7kH,SAAU,EAAGK,EAAM9Z,SAAUzR,EAb3B,GAgBpB+vI,EAAgB5kH,UAChB4kH,EAAgBtkI,SAAU,OAE1BskI,EAAgBtkI,SAAU,GAIlB0kI,oBAAV,WACC,MAAO,2BA3ECN,mBEYT,WAAanxI,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKkzD,KAAO,GACZlzD,EAAKssI,aAAe,GACpBtsI,EAAKusI,YAAc,GACnBvsI,EAAKwsI,IAAM,GACXxsI,EAAKysI,GAAa,IAAI9rH,QACtB3gB,EAAK0sI,GAAc,IAAI/rH,QACvB3gB,EAAK2sI,GAAiB,OAqTxB,OAvUU9zI,OAqBT+zI,uBAAA,WAQC,IAPA,IAAM1iG,EAAO9G,KAAK6G,MACZipB,EAAOn6D,KAAKm6D,KACZo5E,EAAevzI,KAAKuzI,aACpBC,EAAcxzI,KAAKwzI,YACnBC,EAAMzzI,KAAKyzI,IACXT,EAAShzI,KAAK87C,GAAOr7B,SAElBlf,EAAI,EAAGC,EAAOwxI,EAAOtyI,OAAQa,EAAIC,IAAQD,EACjDvB,KAAK8zI,iBAAkBd,EAAQzxI,GAAIkf,SAAU05C,EAAMo5E,EAAcC,EAAaC,GAG/E,IAASlyI,EAAI,EAAGC,EAAOwxI,EAAOtyI,OAAQa,EAAIC,IAAQD,EACjDvB,KAAK+zI,aAAcf,EAAQzxI,GAAIkf,SAAU0wB,GAG1CnxC,KAAKg0I,mBAGIH,4BAAV,WACC,IAAM3yI,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAIkB,EAAQ,CACX,IAAMolB,EAAkBplB,EAAMgiB,qBACxB8xD,EAAY1uD,EAAgB2uD,cAAej1E,MAAM,GAAO,GAAM,GAChEg1E,GACH1uD,EAAgBnD,WAAY6xD,GAAW,GAAM,KAKtC6+D,6BAAV,SACCv2D,EAAkBnjB,EAClBo5E,EAAwBC,EACxBC,GAEA,mBAASlyI,EAAOC,GAKf,IAJA,IAAMksD,EAAQ4vB,EAAQ/7E,GAGhBqtD,EAAMlB,EAAMkB,IACTx8C,EAAI,EAAGC,EAAOu8C,EAAI55C,OAAQ5C,EAAIC,IAAQD,EAAI,CAClD,IAAMqc,EAAQmgC,EAAI9yC,IAAK1J,GACvB,GAAIqc,EAAQ,CACX,IAAMukD,EAAUvkD,EAAMuJ,GACtB,GAAI,EAAIg7C,EAAQtyE,OAAS,CACxB,IAAIqrD,EAASoO,EAAM6Y,GACL,MAAVjnB,IACHA,EAAS,GACToO,EAAM6Y,GAAYjnB,GAEnBA,EAAOvrD,KAAMiuB,KAMhB,IAAMwlH,EAAUvmF,EAAM11B,GACtB,GAAI,EAAIi8G,EAAQvzI,OAAS,CACxB,IAAMk7C,EAAgC63F,EAAKQ,GAC5B,MAAXr4F,EACH63F,EAAKQ,GAAY,CAAEvmF,GAEnB9R,EAAQp7C,KAAMktD,GAKhB,IAAMmI,EAAUnI,EAAMmI,SAClBnI,EAAMnvC,aAAgB,EAAImvC,EAAMttC,OAAO1f,QAAYm1D,GAAWA,EAAQt3C,cACzEg1H,EAAa/yI,KAAMktD,GAIhBmI,GAAW,EAAIA,EAAQjI,QAAQltD,QAClC8yI,EAAYhzI,KAAMktD,GAInB,IAAMh3C,EAAWg3C,EAAMh3C,SACP,MAAZA,GACHf,EAAkBhF,KAAU+F,GAAU,SAAEd,GACvC83C,EAAMvtC,WAAYvK,MAKpB,IAAM6K,EAAWitC,EAAMjtC,SACnB,EAAIA,EAAS/f,QAChBwzI,EAAKJ,iBAAkBrzH,EAAU05C,EAAMo5E,EAAcC,EAAaC,WArD3DlyI,EAAI,EAAGC,EAAO87E,EAAO58E,OAAQa,EAAIC,IAAQD,IAAzCA,IA0DAsyI,yBAAV,SAAwBv2D,EAAkBnsC,GACzC,IAAK,IAAI5vC,EAAI,EAAGC,EAAO87E,EAAO58E,OAAQa,EAAIC,IAAQD,EACjD+7E,EAAQ/7E,GAAID,OAAQ6vC,IAItB0iG,wBAAA,SAAaj+H,GAKZ,IAJA,IAAMqD,EAASrD,EAAEhO,KAAKqR,OAChBw3G,EAAQzwH,KAAK0zI,GACbH,EAAevzI,KAAKuzI,aACtB1gC,EAAuB,KAClBtxG,EAAIgyI,EAAa7yI,OAAS,EAAG,GAAKa,IAAKA,EAAI,CACnD,IAAMgd,EAAcg1H,EAAchyI,GAClC,GAAIgd,EAAY5P,UACf4P,EAAYqvB,QAAS30B,OAAQ1W,EAAWkuH,GACpClyG,EAAYvF,SAAUy3G,IAAU,CACnC5d,EAAQt0F,EACR,OAKH,IAAMrd,EAAQb,EAAcsZ,SAAU3Z,MACtC,GAAI6yG,EAAQ,CAQX,GAPI,EAAIA,EAAMzyF,OAAO1f,QAChBQ,GAASA,EAAMohB,KAAK0K,MAAM5M,SAAWyyF,EAAMzyF,SAC9Clf,EAAMohB,KAAK0K,MAAM5M,OAASyyF,EAAMzyF,QAK9ByyF,KADEshC,EAAgBn0I,KAAK4zI,KAEpB/9E,EAAUs+E,EAAct+E,UAE7BA,EAAQu+E,cAAeD,EAAev+H,OAEjC,CAIN,GAHA5V,KAAK4zI,GAAiB/gC,EAGlBshC,EAAgB,CACnB,IAAME,EAAkBF,EAAct+E,QAClCw+E,GACHA,EAAgBC,aAAcH,EAAev+H,GAK9C,IADA,IAAI2+H,EAAiBJ,EAAcnzI,OAC3BuzI,aAA0B9hF,IAAe8hF,IAAmB1hC,IAC7D2hC,EAAgBL,EAAct+E,UAEnC2+E,EAAcF,aAAcC,EAAgB3+H,GAE7C2+H,EAAiBA,EAAevzI,QAK5B60D,EAAUg9C,EAAMh9C,UAErBA,EAAQ4+E,cAAe5hC,EAAOj9F,GAE3B1U,IACHA,EAAMohB,KAAKxD,MAAU+zF,EAAM/zF,OAAS,IAKrC,IADA,IAAI4C,EAASmxF,EAAM7xG,OACZ0gB,aAAkB+wC,KAClB+hF,EAAgB9yH,EAAOm0C,UAE5B2+E,EAAcC,cAAe/yH,EAAQ9L,GAEtC8L,EAASA,EAAO1gB,OAIlB,OAAO,EAEHE,GAAqC,SAA5BA,EAAMohB,KAAK0K,MAAM5M,SAC7Blf,EAAMohB,KAAK0K,MAAM5M,OAAS,QAI3B,IAGOy1C,EAHDs+E,EAAgBn0I,KAAK4zI,GAE3B,GADA5zI,KAAK4zI,GAAiB,KAClBO,EAQH,KAPMt+E,EAAUs+E,EAAct+E,UAE7BA,EAAQy+E,aAAcH,EAAev+H,GAIlC2+H,EAAiBJ,EAAcnzI,OAC5BuzI,aAA0B9hF,IAAa,CAC7C,IAAM+hF,GAAAA,EAAgBD,EAAe1+E,UAEpC2+E,EAAcF,aAAcC,EAAgB3+H,GAE7C2+H,EAAiBA,EAAevzI,OASlC,OAJIE,IACHA,EAAMohB,KAAKxD,MAAQ,KAGb,GAIT+0H,wBAAA,SAAaj+H,GAIZ,IAHA,IAAM29H,EAAevzI,KAAKuzI,aACpBt6H,EAASrD,EAAEhO,KAAKqR,OAChBw3G,EAAQzwH,KAAK0zI,GACVnyI,EAAIgyI,EAAa7yI,OAAS,EAAG,GAAKa,IAAKA,EAAI,CACnD,IAAMgd,EAAcg1H,EAAchyI,GAClC,GAAIgd,EAAY5P,UACf4P,EAAYqvB,QAAS30B,OAAQ1W,EAAWkuH,GACpClyG,EAAYvF,SAAUy3G,IAAU,CACnC,IAAM56D,EAAUt3C,EAAYs3C,QAI5B,OAHIA,GACHA,EAAQpH,cAAelwC,EAAa3I,IAE9B,GAIV,OAAO,GAGRi+H,sBAAA,SAAWj+H,GAIV,IAHA,IAAM29H,EAAevzI,KAAKuzI,aACpBt6H,EAASrD,EAAEhO,KAAKqR,OAChBw3G,EAAQzwH,KAAK0zI,GACVnyI,EAAIgyI,EAAa7yI,OAAS,EAAG,GAAKa,IAAKA,EAAI,CACnD,IAAMgd,EAAcg1H,EAAchyI,GAClC,GAAIgd,EAAY5P,UACf4P,EAAYqvB,QAAS30B,OAAQ1W,EAAWkuH,GACpClyG,EAAYvF,SAAUy3G,IAAU,CACnC,IAAM56D,EAAUt3C,EAAYs3C,QAI5B,OAHIA,GACHA,EAAQnH,YAAanwC,EAAa3I,IAE5B,GAIV,OAAO,GAGRi+H,yBAAA,SAAcj+H,GAIb,IAHA,IAAM29H,EAAevzI,KAAKuzI,aACpBt6H,EAASrD,EAAEhO,KAAKqR,OAChBw3G,EAAQzwH,KAAK0zI,GACVnyI,EAAIgyI,EAAa7yI,OAAS,EAAG,GAAKa,IAAKA,EAAI,CACnD,IAAMgd,EAAcg1H,EAAchyI,GAClC,GAAIgd,EAAY5P,UACf4P,EAAYqvB,QAAS30B,OAAQ1W,EAAWkuH,GACpClyG,EAAYvF,SAAUy3G,IAAU,CAEnC,IADA,IAAI3vH,EAAiByd,IACP,CACb,IAAMs3C,EAAU/0D,EAAO+0D,QACnBA,GACHA,EAAQlH,eAAgB7tD,EAAQ8U,GAEjC,IAAMiM,EAAS/gB,EAAOE,OACtB,KAAI6gB,aAAkB4wC,IAGrB,MAFA3xD,EAAS+gB,EAKX,OAAO,GAIV,OAAO,GAGRgyH,4BAAA,SAAiBj+H,EAA4BmC,GAI5C,IAHA,IAAMw7H,EAAevzI,KAAKuzI,aACpBt6H,EAASnB,EAAiBu5F,SAAUz7F,EAAGmC,EAAoB/X,KAAK2zI,IAChEljB,EAAQzwH,KAAK0zI,GACVnyI,EAAIgyI,EAAa7yI,OAAS,EAAG,GAAKa,IAAKA,EAAI,CACnD,IAAMgd,EAAcg1H,EAAchyI,GAClC,GAAIgd,EAAY5P,UACf4P,EAAYqvB,QAAS30B,OAAQ1W,EAAWkuH,GACpClyG,EAAYvF,SAAUy3G,IAAU,CAEnC,IADA,IAAI3vH,EAAiByd,IACP,CACb,IAAMs3C,EAAU/0D,EAAO+0D,QACnBA,GACHA,EAAQE,kBAAmBj1D,EAAQ8U,GAEpC,IAAMuM,EAASrhB,EAAOE,OACtB,KAAImhB,aAAkBswC,IAGrB,MAFA3xD,EAASqhB,EAKX,OAAO,GAIV,OAAO,GAGE0xH,oBAAV,WACC,MAAO,qBArUCd,kBCfV,cAgEA,OA/DQ2B,eAAP,SAAqBC,GACpB,IAAMnyI,EAA6Bq1B,KAAK80B,MAAOgoF,EAAO/sI,MAEtD,OADApF,EAAOw1B,GAAK28G,EAAO38G,GACZx1B,GAGDkyI,WAAP,SACCtjF,EACA2L,GAIA,IADA,IAAM63E,EAAWxjF,EAAW4hF,OACnBzxI,EAAI,EAAGC,EAAOozI,EAASl0I,OAAQa,EAAIC,IAAQD,EACnDw7D,EAAU58D,OAAQy0I,EAAUrzI,GAAK,IAAO,IAIrC,EAAIw7D,EAAU/nD,SACjB+nD,EAAUwnD,OAASxnD,EAAUt8C,SAAU,IAIxC,IAAMo0H,EAAczjF,EAAWtmB,UACzBgqG,EAAU1jF,EAAW15B,MACrBq9G,EAAgBx4D,GAAmBy4D,eAAgBF,EAASD,GAClE,OAAqB,MAAjBE,EACIA,EAAcxzF,MAAK,SAAE+7B,GAE3B,IADA,IAAM01D,EAASj2E,EAAUt8C,SAChBlf,EAAI,EAAGC,EAAO87E,EAAO58E,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAM0zI,EAASH,EAASvzI,GAClBmsD,EAAQ4vB,EAAQ/7E,GAChBL,EAAQ8xI,EAAQiC,EAAQ,KACjB,MAAT/zI,GACHwsD,EAAMw7E,OAAQhoI,GAGhB,OAAOo8E,KAGDhyC,QAAQC,QAAQ,KAIlBmpG,kBAAP,SACCtjF,EACA14B,EACAw8G,GAEA,IAAMlzI,EAAaovD,EAAWpvD,WACxBsM,EAAoBtM,GAAkC,MAApBA,EAAWE,MAAgBF,EAAWE,MAAQ,SAChFsM,EAAoBxM,GAAkC,MAApBA,EAAWI,MAAgBJ,EAAWI,MAAQ,EACtF,GAAI2qD,GAAe81B,aAClBnqD,EAAO12B,WAAWE,MAAQoM,EAC1BoqB,EAAO12B,WAAWI,MAAQoM,MACpB,CACN0mI,EAAgBlzI,WAAWE,MAAQoM,EACnC,IAAMpN,EAAQb,EAAcsZ,SAAUu7H,GAClCh0I,IACHA,EAAMuK,SAAS6C,gBAAkBA,GAElC4mI,EAAgBlzI,WAAWI,MAAQoM,wBCzCrC,WAAa5M,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKkuI,GAAc,KACnBluI,EAAKmuI,GAAexzI,GAAWA,EAAQkxI,OAyDzC,OAhEUhzI,OAUTu1I,gBAAA,SAAKjkF,GACJ,IAAMkkF,EAAgBt1I,KAAKm1I,GACvBG,IAAkBlkF,IACjBkkF,IACHt1I,KAAKm1I,GAAc,KACnBn1I,KAAKu1I,WAGNv1I,KAAKm1I,GAAc/jF,EACfA,GACHpxD,KAAKw1I,MAAOpkF,KAKLikF,kBAAV,SAAiBjkF,GAAjB,WACO14B,EAAS14B,KAAKy1I,UAAWrkF,GAC/BsjF,GAAUgB,SAAUtkF,EAAY14B,EAAOx3B,OAAQqgD,MAAK,SAAE+7B,GACrDr2E,EAAK0uI,WAAYr4D,GACjB5kD,EAAOi9G,WAAYr4D,GACnBj9E,EAAciB,OAAQ2F,MAEvBytI,GAAUkB,gBAAiBxkF,EAAY14B,EAAQ14B,MAC/CA,KAAK04B,OAASA,GAGL28G,uBAAV,SAAsB/3D,KAMZ+3D,oBAAV,WAEe,MADCr1I,KAAK04B,SAEnB14B,KAAK04B,OAAS,OAIhB28G,gBAAA,WACC,OAAOr1I,KAAKm1I,IAGb31I,sBAAI61I,yBAAJ,WACC,IAAM38G,EAAS14B,KAAK04B,OACpB,OAAc,MAAVA,EACIA,EAAOx3B,MAAMqjH,OAEd,sCAGE8wB,oBAAV,WACC,MAAO,mBA9DCjS,mBCQT,WAAaxhI,GAAb,MACCkF,YAAOlF,gBALEqF,MAAsB,EAM/BA,EAAK4uI,GAAcj0I,EAAQk0I,WAC3B7uI,EAAK8uI,IAAa,EAED/2B,GAAayf,uBACrB9tH,GAAI,SAAS,YACG,IAApB1J,EAAK8uI,KACR9uI,EAAK8uI,IAAa,EAClB9uI,EAAK2Q,KAAM,SAAU3Q,OAIvBA,EAAKksI,QAAU,IAAI95B,GAAUpyG,KAyK/B,OA3LUnH,OAqBCk2I,sBAAV,SAAqB5kF,GACpB,OAAO,IAAIiiF,GAAqB,CAC/Bp2H,KAAMm0C,EAAWn0C,KACjB/Z,MAAOkuD,EAAWluD,MAClByD,OAAQyqD,EAAWzqD,OACnBwsI,QAASnzI,KAAKmzI,QACdL,KAAM,CACLX,QAASnyI,KAAKo1I,GACdx5F,QAASwV,EAAW0hF,MAAQ1hF,EAAW0hF,KAAKl3F,YAK/Co6F,sBAAA,WACC,IAAMt9G,EAAS14B,KAAK04B,OACd04B,EAAapxD,KAAKm1I,GACxB,OAAc,MAAVz8G,GAAgC,MAAd04B,EACd14B,EAAO60B,UAAW6D,EAAWp5B,IAE9B,MAGRg+G,iBAAA,WAAA,WACO5kF,EAAapxD,KAAKutD,YACxB,OAAkB,MAAd6D,GACIpxD,KAAK81I,WAAW78G,KAAK,CAC3Bq6G,QAASliF,EAAWkiF,QACpBt7G,GAAIo5B,EAAWp5B,GACf/a,KAAMm0C,EAAWn0C,KACjBrV,KAAMiwB,KAAKC,UAAWs5B,KAEtB7P,MAAK,SAAE00F,GACPhvI,EAAK8uI,IAAa,EAClB3kF,EAAWp5B,GAAKi+G,EAChBhvI,EAAKkuI,GAAc/jF,EACnBnqD,EAAK2Q,KAAM,SAAU3Q,GACrBA,EAAK2Q,KAAM,UAAW,OAAQ3Q,MAC5B,SAAEivI,GACJjvI,EAAK2Q,KAAM,OAAQ,OAAQ3Q,OAM9B+uI,mBAAA,SAAQ/4H,GAAR,WACOm0C,EAAapxD,KAAKutD,YACxB,OAAkB,MAAd6D,IACHA,EAAWp5B,QAAKz1B,EAChB6uD,EAAWn0C,KAAOA,EACXjd,KAAK81I,WAAW78G,KAAK,CAC3Bq6G,QAASliF,EAAWkiF,QACpBt7G,GAAIo5B,EAAWp5B,GACf/a,KAAMm0C,EAAWn0C,KACjBrV,KAAMiwB,KAAKC,UAAWs5B,KAEtB7P,MAAK,SAAE00F,GACPhvI,EAAK8uI,IAAa,EAClB3kF,EAAWp5B,GAAKi+G,EAChBhvI,EAAKkuI,GAAc/jF,EACnB,IAAM14B,EAASzxB,EAAKyxB,OACN,MAAVA,IACHA,EAAOzb,KAAOA,GAEfhW,EAAK2Q,KAAM,SAAU3Q,GACrBA,EAAK2Q,KAAM,UAAW,UAAW3Q,MAC/B,SAAEivI,GACJjvI,EAAK2Q,KAAM,OAAQ,UAAW3Q,QAMjC+uI,mBAAA,WAAA,WACO5kF,EAAapxD,KAAKm1I,GACxB,OAAkB,MAAd/jF,IACkB,MAAjBA,EAAWp5B,GACPh4B,KAAK81I,WAAW3E,OAAQ//E,EAAWp5B,IACzCupB,MAAK,WACLt6C,EAAKX,IAAK,MACVW,EAAK2Q,KAAM,UAAW,SAAU3Q,MAC9B,SAAEivI,GACJjvI,EAAK2Q,KAAM,OAAQ,SAAU3Q,OAG9BjH,KAAKsG,IAAK,MACVtG,KAAK4X,KAAM,UAAW,SAAU5X,OAE1B,KAKTg2I,mBAAA,SAAQ/4H,EAAc/Z,EAAeyD,GAYpC,OAXA3G,KAAKsG,IAAI,CACRgtI,QJ5IsC,EI6ItCt7G,QAAIz1B,EACJ0a,OACA/Z,QACAyD,SACAmkC,UAAW,GACXkoG,OAAQ,CAAC,CAAE,kBACXt7G,MAAO,GACP6hF,UAAMh3G,KAEA,GAGEyzI,kBAAV,SAAiB5kF,GAChBtqD,YAAM0uI,gBAAOpkF,GACb,IAAMmoD,EAAOnoD,EAAWmoD,KAClB45B,EAAUnzI,KAAKmzI,QACT,MAAR55B,EACH45B,EAAQt5E,YAAa0/C,GAErB45B,EAAQplF,QAET/tD,KAAK+1I,IAAa,EAClB/1I,KAAK4X,KAAM,SAAU5X,OAGZg2I,oBAAV,WACClvI,YAAMyuI,mBACNv1I,KAAK+1I,IAAa,EAClB/1I,KAAK4X,KAAM,SAAU5X,OAGtBg2I,iBAAA,SAAMh+G,GAAN,WACC,OAAOh4B,KAAK61I,GAAY/5H,IAAKkc,GAAKupB,MAAK,SAAEozF,GACxC1tI,EAAKX,IAAKouI,GAAU74D,aAAc84D,IAClC1tI,EAAK2Q,KAAM,UAAW,OAAQ3Q,MAC5B,SAAEivI,GACJjvI,EAAK2Q,KAAM,OAAQ,OAAQ3Q,OAI7B+uI,kBAAA,WACCh2I,KAAKsG,IAAK,OAGX0vI,sBAAA,WACC,OAAOh2I,KAAK+1I,IAAc/1I,KAAKm2I,SAGhCH,kBAAA,WACC,IAAM5kF,EAAapxD,KAAKm1I,GACxB,OAAkB,MAAd/jF,GACqB,MAAjBA,EAAWp5B,IAKpBg+G,oBAAA,WACC,IAAM5kF,EAAapxD,KAAKm1I,GACxB,OAAkB,MAAd/jF,EACIA,EAAWn0C,KAEZ,MAGRzd,sBAAIw2I,8BAAJ,WACC,OAAOh2I,KAAK61I,oCAGHG,oBAAV,WACC,MAAO,qBAzLCX,mBCJT,WAAae,GAAb,MACCtvI,0BACAG,EAAKovI,GAAWD,EAChBnvI,EAAKqvI,GAAe,WACnBj2I,EAAciB,OAAQ80I,MAuEzB,OA/EmCt2I,OAYlCy2I,mBAAA,WACC,IACM79G,EADU14B,KAAKq2I,GACE39G,OACvB,GAAIA,EAAS,CACZ,IAAM86G,EAAc96G,EAAO86G,YAC3B,GAAI,EAAIA,EAAY9yI,OAAS,CAG5B,IAFA,IAAIutD,GAAU,EACR9c,EAAO9G,KAAK6G,MACT3vC,EAAI,EAAGC,EAAOgyI,EAAY9yI,OAAQa,EAAIC,IAAQD,EAAI,CAC1D,IAAMi1I,EAAahD,EAAajyI,GAChCi1I,EAAWl1I,OAAQ6vC,GACnB,IAAM0kB,EAAU2gF,EAAW3gF,QAC3B,GAAIA,GAAW1kB,EAAO0kB,EAAQ5H,OAAS,CACtC,IAAMwoF,EAAgB5gF,EAAQ5H,OAC1B9c,EAAOslG,IACVxoF,EAAWA,EAAS,EAAIwoF,EAAgB9sI,KAAKC,IAAKqkD,EAAQwoF,KAIzD,GAAKxoF,GACR/yC,WAAYlb,KAAKs2I,GAAcroF,EAAS5jB,KAAK6G,UAMjDqlG,gBAAA,SAAKv+G,GACJ,IAAMU,EAAS14B,KAAKq2I,GAAS39G,OACvB4kD,EAAW5kD,GAAUA,EAAO+6G,IAAKz7G,GACvC,OAASslD,GAAU,EAAIA,EAAO58E,OAAS48E,EAAQ,GAAM,MAGtDi5D,mBAAA,SAAQv+G,GACP,IAAMU,EAAS14B,KAAKq2I,GAAS39G,OAC7B,OAASA,GAAUA,EAAO+6G,IAAKz7G,IAAU,IAG1Cu+G,iBAAA,SAAM10I,EAAiDmvC,gBAAAA,MACtD,IAAMtY,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMs6G,EAASt6G,EAAOx3B,MAAMuf,SAC5B,GAAMuwB,GAYL,IAASzvC,EAAIyxI,EAAOtyI,OAAS,EAAG,GAAKa,IAAKA,EAGzC,IAAS6Q,GADHqO,EADQuyH,EAAQzxI,GACCkf,UACD/f,OAAS,EAAG,GAAK0R,IAAKA,EAE3C,IAA0B,IAAtBvQ,EADE6e,EAAQD,EAAUrO,IAEvB,OAAOsO,OAjBV,IAAK,IAAInf,EAAI,EAAGC,EAAOwxI,EAAOtyI,OAAQa,EAAIC,IAAQD,EAGjD,IAFA,IACMkf,EACGrO,EAAI,EAAGC,GADVoO,EADQuyH,EAAQzxI,GACCkf,UACS/f,OAAQ0R,EAAIC,IAAQD,EAAI,CACvD,IAAMsO,EACN,IAA0B,IAAtB7e,EADE6e,EAAQD,EAAUrO,IAEvB,OAAOsO,GAiBZ,OAAO,SA7E0B4a,QAAMoU,4BCVxC,WAAa0mG,GACZp2I,KAAKq2I,GAAWD,EA+KlB,OA5KCM,mBAAA,aAIAA,mBAAA,WACC,IAAMh+G,EAAS14B,KAAKq2I,GAAS39G,OAC7B,OAAc,MAAVA,EACIl5B,OAAO+W,KAAMmiB,EAAOyhC,MAErB,IAGRu8E,iBAAA,SAAM70I,GACL,IAAM62B,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMyhC,EAAOzhC,EAAOyhC,KACpB,IAAK,IAAMniC,KAAMmiC,EAChB,IAAuB,IAAnBt4D,EAAUm2B,GACb,OAAOA,EAIV,OAAO,MAGR0+G,gBAAA,SAAK1+G,EAAYvJ,EAAgB0iB,EAAeh/B,EAAsB2lD,GACrE,IAAMp/B,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMkhC,EAAYlhC,EAAOyhC,KAAMniC,GAC/B,GAAiB,MAAb4hC,EACH,IAAK,IAAIr4D,EAAI,EAAGC,EAAOo4D,EAAUl5D,OAAQa,EAAIC,IAAQD,EAAI,CACxD,IAAMo1I,EAAW/8E,EAAWr4D,GACdo1I,EAAS7oG,MAGjBxnC,IAAK6L,EAAM2lD,QAGJv1D,IAAT4uC,IACHwlG,EAASxlG,KAAOA,GAIjBwlG,EAASloH,MAAQA,KAMrBioH,kBAAA,SAAO1+G,GACN,IAAMU,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMkhC,EAAYlhC,EAAOyhC,KAAMniC,GAC/B,GAAiB,MAAb4hC,EACH,IAAK,IAAIr4D,EAAI,EAAGC,EAAOo4D,EAAUl5D,OAAQa,EAAIC,IAAQD,EACpDq4D,EAAWr4D,GAAIgc,UAMnBm5H,mBAAA,SAAQ1+G,EAAY+zB,EAAmB8M,EAAkB1mD,EAAsB2lD,GAC9E,IAAMp/B,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMkhC,EAAYlhC,EAAOyhC,KAAMniC,GAC/B,GAAiB,MAAb4hC,EACH,IAAK,IAAIr4D,EAAI,EAAGC,EAAOo4D,EAAUl5D,OAAQa,EAAIC,IAAQD,EAAI,CACxD,IAAMo1I,EAAW/8E,EAAWr4D,GACdo1I,EAAS7oG,MAGjBxnC,IAAK6L,EAAM2lD,QAGHv1D,IAAVs2D,IACH89E,EAAS99E,MAAQA,GAIlB89E,EAAS5qF,OAASA,KAMtB2qF,qBAAA,SAAU1+G,EAAYvJ,EAAgB0iB,GACrC,IAAMzY,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMkhC,EAAYlhC,EAAOyhC,KAAMniC,GAC/B,GAAiB,MAAb4hC,EACH,IAAK,IAAIr4D,EAAI,EAAGC,EAAOo4D,EAAUl5D,OAAQa,EAAIC,IAAQD,EAAI,CACxD,IAAMo1I,EAAW/8E,EAAWr4D,QAEfgB,IAAT4uC,IACHwlG,EAASxlG,KAAOA,GAGjBwlG,EAASloH,MAAQA,KAMrBioH,sBAAA,SAAW1+G,EAAY+zB,EAAmB8M,GACzC,IAAMngC,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMkhC,EAAYlhC,EAAOyhC,KAAMniC,GAC/B,GAAiB,MAAb4hC,EACH,IAAK,IAAIr4D,EAAI,EAAGC,EAAOo4D,EAAUl5D,OAAQa,EAAIC,IAAQD,EAAI,CACxD,IAAMo1I,EAAW/8E,EAAWr4D,QAEdgB,IAAVs2D,IACH89E,EAAS99E,MAAQA,GAGlB89E,EAAS5qF,OAASA,KAMtB2qF,oBAAA,SAAS1+G,EAAYmZ,GACpB,IAAMzY,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMkhC,EAAYlhC,EAAOyhC,KAAMniC,GAC/B,GAAiB,MAAb4hC,EACH,IAAK,IAAIr4D,EAAI,EAAGC,EAAOo4D,EAAUl5D,OAAQa,EAAIC,IAAQD,EACpDq4D,EAAWr4D,GAAI4vC,KAAOA,IAM1BulG,qBAAA,SAAU1+G,EAAY6gC,GACrB,IAAMngC,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMkhC,EAAYlhC,EAAOyhC,KAAMniC,GAC/B,GAAiB,MAAb4hC,EACH,IAAK,IAAIr4D,EAAI,EAAGC,EAAOo4D,EAAUl5D,OAAQa,EAAIC,IAAQD,EACpDq4D,EAAWr4D,GAAIs3D,MAAQA,IAM3B69E,qBAAA,SAAU1+G,EAAY7lB,EAAsB2lD,GAC3C,IAAMp/B,EAAS14B,KAAKq2I,GAAS39G,OAC7B,GAAc,MAAVA,EAAiB,CACpB,IAAMkhC,EAAYlhC,EAAOyhC,KAAMniC,GAC/B,GAAiB,MAAb4hC,EACH,IAAK,IAAIr4D,EAAI,EAAGC,EAAOo4D,EAAUl5D,OAAQa,EAAIC,IAAQD,EAAI,CACxD,IAAMusC,EAAQ8rB,EAAWr4D,GAAIusC,WAChBvrC,IAAT4P,IACU,OAATA,GACH27B,EAAMt7B,MAAQi7C,GAAwBsK,KACtCjqB,EAAM37B,KAAOA,GAEb27B,EAAMt7B,OAASi7C,GAAwBsK,WAG9Bx1D,IAAPu1D,IACQ,OAAPA,GACHhqB,EAAMt7B,MAAQi7C,GAAwBuK,GACtClqB,EAAMgqB,GAAKA,GAEXhqB,EAAMt7B,OAASi7C,GAAwBuK,2BCnJ7C,WAAap2D,GAAb,MACCkF,YAAOlF,gBAGPqF,EAAK0J,GAAImH,EAAiBgD,MAAM,SAAElF,GACjC,GAAIkC,EAAiBkB,SAAU/R,EAAM2O,EAAE9U,QAAW,CACjD,IAAM43B,EAASzxB,EAAKyxB,OAChBA,GACHA,EAAOk+G,YAAahhI,OAMvB3O,EAAK0J,GAAImH,EAAiBiB,IAAI,SAAEnD,GAC/B,GAAIkC,EAAiBkB,SAAU/R,EAAM2O,EAAE9U,QAAW,CACjD,IAAM43B,EAASzxB,EAAKyxB,OAChBA,GACHA,EAAOm+G,UAAWjhI,OAMrB3O,EAAK0J,GAAI,SAAS,SAAEiF,GACnB,GAAIkC,EAAiBkB,SAAU/R,EAAM2O,EAAE9U,QAAW,CACjD,IAAM43B,EAASzxB,EAAKyxB,OAChBA,GACHA,EAAOo+G,aAAclhI,OAMxB3O,EAAK2nD,IAAM,IAAI8nF,GAAazvI,GAC5BA,EAAKymD,MAAQ,IAAI6oF,GAAetvI,KA0IlC,OAjLUnH,OA0CCi3I,uBAAV,SAAsBz5D,GAKrB,IAJA,IAAM05D,EAAoE,GACpEC,EAAyD,GACzDC,EAAyD,IAAI74G,IAE1D98B,EAAI,EAAGC,EAAO87E,EAAO58E,OAAQa,EAAIC,IAAQD,EAAI,CAOrD,IANA,IAAMmsD,EAAQ4vB,EAAQ/7E,GAChB41I,EAAqB5vC,GAAgB75C,EAAMl7C,OAAU07C,GACrD2H,EAAUnI,EAAMmI,QAAU,MAA0BnI,GAGpDkB,EAAMlB,EAAMkB,IACTx8C,EAAI,EAAGC,EAAOu8C,EAAI55C,OAAQ5C,EAAIC,IAAQD,EAE9C,GADMqc,EAAQmgC,EAAI9yC,IAAK1J,GACX,CAEX,IAAMglI,EAAY3oH,EAAM0Z,OAClBkvG,EAAa5oH,EAAM4pC,QACzB,GAAI++E,KAAaJ,EAChBvoH,EAAMoB,UAAYmnH,EAAcI,QAC1B,GAAI,EAAIA,EAAU12I,OACxB,IACC,IAAMmvB,EAAY08C,SACjB,QACA,gBACY6qE,oCAGC,EAAIC,EAAW32I,OAAS22I,EAAa,mCAMnDL,EAAcI,GAAcvnH,EAC5BpB,EAAMoB,UAAYA,EACjB,MAAOja,IAMV,GAAIyhI,KAAcJ,EACjBxoH,EAAMA,MAAQwoH,EAAYI,QACpB,GAAI,EAAIA,EAAW32I,OACzB,IACC+tB,EAAMA,MAAQwoH,EAAYI,GAAgB9qE,SACzC,gBACY8qE,kCAKZ,MAAOzhI,KAQZ,IAAMm2C,EAAS2B,EAAMqE,OAAOhG,OACtB6B,EAAUiI,EAAQjI,QACxB,IAASx7C,EAAI,EAAGC,EAAO05C,EAAOrrD,OAAQ0R,EAAIC,IAAQD,EAAI,CACrD,IAAMqc,EAAQs9B,EAAQ35C,GAClB2/C,EAAiDmlF,EAAUp7H,IAAK2S,GACtD,MAAVsjC,EAEW,OADdA,EAAStjC,EAAM6oH,UAAW5pF,MAErBqE,aAAkBwkB,IACjB7oB,EAAMttC,OAAO1f,QAAU,IAC1BgtD,EAAMttC,OAAS,WAIjB82H,EAAU5wI,IAAKmoB,EAAOsjC,GACtBnE,EAAQptD,KAAMuxD,GACd8D,EAAQ9H,OAASgE,EAAOhE,QAGzBH,EAAQptD,KAAMuxD,GACd8D,EAAQ9H,OAASgE,EAAOhE,OAK1B,IAAMttC,EAAWitC,EAAMjtC,SACnB,EAAIA,EAAS/f,QAChBV,KAAK21I,WAAYl1H,KAKVs2H,sBAAV,SAAqB3lF,GACpB,OAAO,IAAIyiF,GAAe,CACzB52H,KAAMm0C,EAAWn0C,KACjB/Z,MAAOkuD,EAAWluD,MAClByD,OAAQyqD,EAAWzqD,OACnB3E,WAAY,CACXE,MAAO,MAERc,OAAQ,CACPd,MAAO,MAER4wI,KAAM,CACLX,QAASnyI,KAAKo1I,GACdx5F,QAASwV,EAAW0hF,MAAQ1hF,EAAW0hF,KAAKl3F,YAKrCm7F,mBAAV,SAAkBnhI,GACjB,IAAM8iB,EAAS14B,KAAK04B,OAChBA,GAAUA,EAAO6+G,YAAa3hI,IAGlC9O,YAAM4Y,iBAAQ9J,IAGfmhI,uBAAA,SAAYnhI,EAA4BmC,GACvC,IAAM2gB,EAAS14B,KAAK04B,OACpB,SAAIA,IAAUA,EAAO8+G,gBAAiB5hI,EAAGmC,KAGlCjR,YAAMu4G,qBAAYzpG,EAAGmC,IAG7Bg/H,mBAAA,SAAQtrI,GACPzL,KAAK0tD,MAAMpsD,SACXwF,YAAMrF,iBAAQgK,IAGLsrI,oBAAV,WACC,MAAO,eA/KC1B,mBCRT,WAAazzI,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKyJ,SAAUpM,EAAWkf,aAAa,KAMzC,OATU1jB,OAMC23I,oBAAV,WACC,MAAO,4BAPCtiH,kBCAV,4DAiEA,OA9DUr1B,OAGC43I,mBAAV,SAAkB9iI,EAAyBhT,GAC1CkF,YAAMk9G,iBAAQpvG,EAAQhT,GACtB,IAAMwoG,EAAUpqG,KAAK23I,UAAW33I,KAAK2B,MAAOC,GAC5C5B,KAAK43I,GAAWxtC,EAChBx1F,EAAO4L,SAAU4pF,IAGRstC,sBAAV,SAAqB/1I,EAA4BC,GAChD,GAAIA,GAA8B,MAAnBA,EAAQwoG,QAAkB,CACxC,IAAMA,EAAUxoG,EAAQwoG,QACxB,OAAIvnG,EAAcunG,IAAa1oG,EAAgB0oG,GACvCpqG,KAAK63I,WACX73I,KAAK83I,iBAAkB1tC,IAEdA,aAAmBzpF,EACtBypF,EAEApqG,KAAK63I,WACX73I,KAAK+3I,uBAAwB3tC,EAASzoG,EAAMq2I,eAI/C,OAAOh4I,KAAK63I,WACX73I,KAAK83I,iBAAkBn2I,EAAMq2I,gBAIrBN,mCAAV,SACC91I,EACAwoG,GAQA,OANoB,MAAhBxoG,EAAQonB,OACXpnB,EAAQonB,KAAO,SAEWzmB,IAAvBX,EAAQonB,KAAKyF,QAChB7sB,EAAQonB,KAAKyF,MAAQ27E,GAEfxoG,GAGE81I,6BAAV,SAA4BttC,GAC3B,MAAO,CACNphF,KAAM,CACLyF,MAAO27E,KAKAstC,uBAAV,SAAsB91I,GACrB,OAAO,IAAI61I,GAAuB71I,IAGnCpC,sBAAIk4I,2BAAJ,WACC,OAAO13I,KAAK43I,oCAGHF,oBAAV,WACC,MAAO,qBA5DC/zB,mBCTV,4DAOA,OAJU7jH,OACCm4I,oBAAV,WACC,MAAO,2BAFCP,mBCHV,4DAOA,OAJU53I,OACCo4I,oBAAV,WACC,MAAO,4BAFCR,mBCYT,WAAa91I,GAAb,MACCkF,YAAOlF,SAEDD,EAAQsF,EAAKtF,MAEbiT,EAAS,IAAIqyC,GAAgB,CAClCjmD,OAAQiG,EACRb,EAAG,UAAWC,EAAG,UACjBnD,MAAO,UAAWyD,OAAQ,gBAI3BM,EAAKwyC,GAAS,IAAI+tE,GAAmB,CACpCxmH,OAAQ4T,EACR1R,MAAO,UAAWyD,OAAQ,OAC1BkzC,MAAO,CACN56B,OAAQ,EACRtO,GAAI,CACHwnI,MAAO,WACNlxI,EAAKo7C,QACLp7C,EAAKw9G,UAIR0C,MAAO,CACNjkH,MAAOvB,EAAMy2I,gBACbpvH,KAAM,CACLyF,MAAoB,MAAX7sB,GAAoC,MAAjBA,EAAQulH,MACnCvlH,EAAQulH,MAAQxlH,EAAM02I,aAIzBjxB,MAAO,CACNlkH,MAAOvB,EAAMy2I,mBAKf,IAAI10B,GAAkB,CACrB1iH,OAAQ4T,EACR1R,MAAO,UAAWyD,OAAQ,OAC1B1B,QAAS,CACRM,IAAK0B,EAAKhC,QAAQigB,aAEnBzE,SAAU,CACT,IAAIoiC,GAAa,CAChB5jC,OAAQ,IAET,IAAIwkG,GAAe,CAClBz6F,KAAM,CACLyF,MAAoB,MAAX7sB,GAAiC,MAAdA,EAAQqiH,GACnCriH,EAAQqiH,GAAKtiH,EAAMuiH,SAGrBvzG,GAAI,CACH4zG,OAAQ,WACPt9G,EAAKo7C,QACLp7C,EAAKw9G,WAIR,IAAIpB,GAAQ,CACXr6F,KAAM,CACLyF,MAAoB,MAAX7sB,GAAqC,MAAlBA,EAAQsuG,OACnCtuG,EAAQsuG,OAASvuG,EAAMwiH,aAGzBxzG,GAAI,CACH4zG,OAAQ,WACPt9G,EAAKo7C,QACLp7C,EAAK8yC,eAIR,IAAI8I,GAAa,CAChB5jC,OAAQ,SAqBb,OAnGUnf,OAoFTN,sBAAI84I,yBAAJ,WACC,OAAOt4I,KAAKy5C,GAAOI,uCAGVy+F,iBAAV,WACCt4I,KAAK4X,KAAM,KAAM5X,KAAKy5C,GAAOI,MAAMprB,MAAOzuB,OAGjCs4I,qBAAV,WACCt4I,KAAK4X,KAAM,SAAU5X,OAGZs4I,oBAAV,WACC,MAAO,uBAjGCphD,mBCdV,4DAOA,OAJUp3F,OACCy4I,oBAAV,WACC,MAAO,qBAFCb,mBCTV,4DAQA,OAJU53I,OACC04I,oBAAV,WACC,MAAO,+BAFCf,mBCcT,WAAa71I,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKwxI,IAAU,EACfxxI,EAAK8oC,GAAc,EACnB9oC,EAAKyxI,GAAc92I,GAA+B,MAApBA,EAAQirE,SAAmBjrE,EAAQirE,SAAW5lE,EAAKtF,MAAMg3I,gBAwFzF,OAlGU74I,OAaC84I,uBAAV,SAAsBh3I,GACrB,OAAO,IAAI42I,GAA0B52I,IAG5Bg3I,mBAAV,WACC54I,KAAKy4I,IAAU,EACfz4I,KAAK+vC,GAAa1F,KAAK6G,MACvB,IAAM2nG,EAAY74I,KAAK84I,GACN,MAAbD,GACHt+H,aAAcs+H,GAEf74I,KAAK43I,GAASmB,UAAWz0I,EAAW+Z,KAAM/Z,EAAW8L,UAAY9L,EAAW+L,QAC5E,IAAM+zG,EAAepkH,KAAKqkH,GACN,MAAhBD,GACHA,EAAagY,aAAa,GAE3Bt1H,YAAMyzC,mBAGGq+F,mBAAV,WACC,IAAMx0B,EAAepkH,KAAKqkH,GACN,MAAhBD,EACHA,EAAagY,aAAa,GAE1Bp8H,KAAKqiD,SAIGu2F,uBAAV,SAAsBxuC,GACN,MAAXA,IACHpqG,KAAK43I,GAAS5uH,KAAOohF,GAEtBpqG,KAAK43I,GAASmB,UAAWz0I,EAAW8L,UAAW9L,EAAW+L,QAC1DrQ,KAAKg5I,UAGIJ,uBAAV,SAAsBxuC,GACN,MAAXA,IACHpqG,KAAK43I,GAAS5uH,KAAOohF,GAEtBpqG,KAAK43I,GAASmB,UAAWz0I,EAAW+L,OAAQ/L,EAAW8L,WACvDpQ,KAAKg5I,UAGNJ,oBAAA,SAASxuC,GAAT,WACC,IAAMpqG,KAAKy4I,GAAU,CACpBz4I,KAAKy4I,IAAU,EACf,IAAMnnG,EAAcjH,KAAK6G,MAAQlxC,KAAK+vC,GAChCkpG,EAAQj5I,KAAK04I,GAAYpnG,EAC3B,EAAI2nG,EACPj5I,KAAK84I,GAAa79H,OAAOC,YAAW,WACnCjU,EAAK6xI,QAAav2I,EAClB0E,EAAKiyI,WAAY9uC,KACf6uC,GAEHj5I,KAAKk5I,WAAY9uC,KAKpBwuC,mBAAA,SAAQxuC,GAAR,WACC,IAAMpqG,KAAKy4I,GAAU,CACpBz4I,KAAKy4I,IAAU,EACf,IAAMnnG,EAAcjH,KAAK6G,MAAQlxC,KAAK+vC,GAChCkpG,EAAQj5I,KAAK04I,GAAYpnG,EAC3B,EAAI2nG,EACPj5I,KAAK84I,GAAa79H,OAAOC,YAAW,WACnCjU,EAAK6xI,QAAav2I,EAClB0E,EAAKkyI,WAAY/uC,KACf6uC,GAEHj5I,KAAKm5I,WAAY/uC,KAKVwuC,sBAAV,WACK54I,KAAKy4I,IACR3xI,YAAM4wF,sBAIEkhD,oBAAV,WACC,MAAO,wBAhGClB,mBCJV,4DAsBA,OAnBU53I,OACCs5I,mBAAV,WACC,IAAMn8H,EAAO+hG,GAAakyB,wBAAwBmI,UACtC,MAARp8H,IACHjd,KAAKy5C,GAAOI,MAAMprB,MAAQxR,GAE3BnW,YAAMyzC,mBAGG6+F,iBAAV,WACCtyI,YAAM29G,gBAEN,IAAMxnG,EAAOjd,KAAKy5C,GAAOI,MAAMprB,MAC/BuwF,GAAayf,uBAAuBj+H,KAAM,IAAI4wI,GAAgBn0H,KAGrDm8H,oBAAV,WACC,MAAO,oBAjBCd,mBCFV,4DAQA,OAJUx4I,OACCw5I,oBAAV,WACC,MAAO,4BAFClkH,I/BdV,SAAY45G,GACXA,mBACAA,uBACAA,2BAHD,CAAYA,KAAAA,QAWZ,mBAMC,WAAauK,EAAoB33I,GAAjC,MACCkF,mBAEAG,EAAKuyI,GAAWD,EAChBtyI,EAAKK,GAAW,EAChBL,EAAKgB,EAAW,GAChBhB,EAAKwyI,GAAU73I,GAA2B,MAAhBA,EAAQ4tC,KAAe5tC,EAAQ4tC,KAAOw/F,GAAmB0K,OAGnF,IAAM/oI,EAAK/O,GAAWA,EAAQ+O,GAC9B,GAAIA,EACH,IAAK,IAAMiO,KAAQjO,EAClB1J,EAAK0J,GAAIiO,EAAMjO,EAAIiO,aA4JvB,OA9KoC9e,OAuBnC65I,oBAAA,WACC35I,KAAKsH,GAAW,GAGjBqyI,mBAAA,WACC,GAAI35I,KAAKsH,EAAW,CACnBtH,KAAKsH,GAAW,EAChB,IAAMqB,EAAU3I,KAAKiI,EACrBU,EAAQjI,OAAS,EAGjB,IAFA,IACM+f,EADUzgB,KAAKw5I,GACI/4H,SAChBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,GAChBD,EAAM+B,YACT9Z,EAAQnI,KAAMe,MAOnBo4I,iBAAA,WAEC,OADA35I,KAAKsB,SACEtB,KAAKiI,EAASvH,QAGtBi5I,oBAAA,WACC,OAAO35I,KAAKgV,QAAU,GAGvB2kI,kBAAA,WACC,OAAO35I,KAAK8b,IAAK,IAGlB69H,gBAAA,SAAQ/4I,GACPZ,KAAKsB,SACL,IAAMqH,EAAU3I,KAAKiI,EACrB,GAAI,GAAKrH,GAASA,EAAQ+H,EAAQjI,OAAS,CAC1C,IACMggB,EADU1gB,KAAKw5I,GACC/4H,SAAU9X,EAAS/H,IACzC,GAAa,MAAT8f,EACH,OAAOA,EAGT,OAAO,MAGRi5H,qBAAA,SAAU/4I,GACTZ,KAAKsB,SACL,IAAMqH,EAAU3I,KAAKiI,EACrB,OAAI,GAAKrH,GAASA,EAAQ+H,EAAQjI,OAC1BiI,EAAS/H,GAEV,MAGR+4I,kBAAA,WACC35I,KAAKsB,SACL,IAAMqH,EAAU3I,KAAKiI,EACrB,GAAI,EAAIU,EAAQjI,OAAS,CAGxB,IAFA,IACM+f,EADUzgB,KAAKw5I,GACI/4H,SAChBlf,EAAI,EAAGC,EAAOmH,EAAQjI,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAMmf,EAAQD,EAAU9X,EAASpH,IAC7Bmf,aAAiBC,GACpBD,EAAMqW,WAAW,GAGnBpuB,EAAQjI,OAAS,EACjBV,KAAK4X,KAAM,SAAU5X,QAIvB25I,gBAAA,SAAgC74I,GAC/B,IAAM0uC,EAAOxvC,KAAKy5I,GACZF,EAAUv5I,KAAKw5I,GACrB,GAAIhqG,IAASw/F,GAAmB0K,QAC/B,IAAM54I,EAAO2hB,WAAa,CACzBziB,KAAKsB,SAKL,IAFA,IAAMqH,EAAU3I,KAAKiI,EACfwY,EAAW84H,EAAQ94H,SAChBlf,EAAI,EAAGC,EAAOmH,EAAQjI,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAMmf,EAAQD,EAAU9X,EAASpH,IAC7Bmf,aAAiBC,GACpBD,EAAMqW,WAAW,GAGnBpuB,EAAQjI,OAAS,EAGjBiI,EAAQnI,KAAM+4I,EAAQK,cAAe94I,IACrCA,EAAOi2B,WAAW,GAGlB/2B,KAAK4X,KAAM,SAAU5X,YAEhB,GAAIwvC,IAASw/F,GAAmB6K,WAChC/4I,EAAO2hB,WACZ,GAAIziB,KAAKsH,EACRxG,EAAOi2B,WAAW,GAClB/2B,KAAK4X,KAAM,SAAU5X,UACf,CAEA2I,EAAU3I,KAAKiI,EAArB,IACM6xI,EAAcP,EAAQK,cAAe94I,GAC3C,IAASS,EAAI,EAAGC,EAAOmH,EAAQjI,OAAQa,EAAIC,IAAQD,EAAI,CACtD,IAAMX,EAAQ+H,EAASpH,GACvB,GAAIu4I,IAAgBl5I,EAEnB,YADAE,EAAOi2B,WAAW,GAEZ,GAAI+iH,EAAcl5I,EAIxB,OAHA+H,EAAQ4J,OAAQhR,EAAG,EAAGu4I,GACtBh5I,EAAOi2B,WAAW,QAClB/2B,KAAK4X,KAAM,SAAU5X,MAMvB2I,EAAQnI,KAAMs5I,GACdh5I,EAAOi2B,WAAW,GAClB/2B,KAAK4X,KAAM,SAAU5X,QAMzB25I,mBAAA,SAAmC74I,GAClC,IAAMA,EAAO2hB,WACZ,GAAIziB,KAAKsH,EACRxG,EAAOi2B,WAAW,GAClB/2B,KAAK4X,KAAM,SAAU5X,WAKrB,IAHA,IAAM2I,EAAU3I,KAAKiI,EAEf6xI,EADU95I,KAAKw5I,GACOI,cAAe94I,GAClCS,EAAI,EAAGC,EAAOmH,EAAQjI,OAAQa,EAAIC,IAAQD,EAElD,GAAIu4I,IADUnxI,EAASpH,GAKtB,OAHAoH,EAAQ4J,OAAQhR,EAAG,GACnBT,EAAOi2B,WAAW,QAClB/2B,KAAK4X,KAAM,SAAU5X,UAvKSs7B,QAAMoU,6BgCF1C,4DA4DA,OA5DyC5vC,OAK9Bi6I,iBAAV,SAAgBn4I,GACfkF,YAAMwZ,eAAM1e,GAEZ5B,KAAKg6I,GAAS,EACdh6I,KAAKi6I,GAAO,EACZ,IAAMC,EAAQl6I,KAAKm6I,GAASn6I,KAAKo6I,YAAwB,MAAXx4I,EAAkBA,EAAQs4I,WAAQ33I,GAChFvC,KAAKwgB,SAAU05H,GACfl6I,KAAK0Q,SAAUpM,EAAWkf,aAAa,IAGxChkB,sBAAIu6I,yBAAJ,WACC,OAAO/5I,KAAKm6I,oCAKHJ,oBAAV,WACC,MAAO,cAGRA,sBAAA,SAAW3wH,EAAeQ,EAAa5U,GAClCA,EAAO,GACVoU,EAAQ,EACRQ,EAAM,IAENR,EAAQzf,KAAKG,IAAK,EAAGH,KAAKC,IAAK,EAAGwf,EAAQpU,IAC1C4U,EAAMjgB,KAAKG,IAAKsf,EAAOzf,KAAKC,IAAK,EAAGggB,EAAM5U,KAEvChV,KAAKg6I,KAAW5wH,GAASppB,KAAKi6I,KAASrwH,IAC1C5pB,KAAKg6I,GAAS5wH,EACdppB,KAAKi6I,GAAOrwH,EACZ5pB,KAAK8rI,mBAIPiO,4BAAA,WACC,OAAO,EAAI/5I,KAAKg6I,IAAUh6I,KAAKi6I,GAAO,GAGvCF,qBAAA,SAAUh4H,EAAkBC,EAAmBZ,EAAkBC,GAChEva,YAAM2a,mBAAUM,EAAUC,EAAWZ,EAAUC,GAC/CrhB,KAAK8rI,kBAGNiO,2BAAA,aAIAA,2BAAA,WACC,OAAO/5I,KAAKg6I,IAGbD,yBAAA,WACC,OAAO/5I,KAAKi6I,OA1D2Bt5H,kBCCzC,4DAgCA,OAhC8C7gB,OAGnCu6I,iBAAV,SAAgBz4I,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ5B,KAAK0Q,SAAUpM,EAAWkf,aAAa,GAEvC,IAAM7O,EAAW,IAAIiT,QACrB5nB,KAAKy/H,GAAY,IAAIpqF,GAAS,CAC7Bv0C,OAAQd,KACR40C,QAAQ,EACRjkC,GAAI,CACHyY,MAAO,WACNzU,EAASpO,SAAUU,EAAK0N,WAEzBmG,KAAM,SAAE5B,EAAYE,GACnBzE,EAASrO,IAAKqO,EAASvO,EAAI8S,EAAIvE,EAAStO,EAAI+S,GAC5CnS,EAAKqzI,WAAY3lI,EAASvO,EAAGuO,EAAStO,QAM1Cg0I,2BAAA,WACC,OAAOr6I,KAAK2B,MAAM44I,kBAGTF,oBAAV,WACC,MAAO,sBA5BqC15H,kBCR7C,WAAa/T,GAAb,MACC9F,0BACA8F,EAAKQ,iBAAkBnG,GAAM,GAC7B2F,EAAKwB,cAAenH,KAsBtB,OA1ByDnH,OAOxD06I,qBAAA,SAAU5tI,EAAa1J,EAAeyD,GACrC,IAAMrE,EAAQsK,EAAKtK,MAEnBtC,KAAKud,QAEL,IAAMvb,EAAa4K,EAAK5K,WAClBsM,EAAkBtM,EAAWuM,SAAUjM,GACvCkM,EAAkBxM,EAAWyM,SAAUnM,GACtB,MAAnBgM,GAEHtO,KAAKmuB,UAAW7f,EAAiBE,GACjCxO,KAAKwiD,UAAW,EAAG,EAAG,EAAG,GACzBxiD,KAAKouB,SAAU,EAAY,GAATznB,EAHL,EAG0BzD,EAAO8R,GAC9ChV,KAAKquB,UACLruB,KAAK2O,SAAU,GAEf3O,KAAK2O,SAAU,MAvBuC2f,2BCDzD,4DAQA,OAR+CxuB,OACpC26I,uBAAV,SAAsBvhI,EAAYE,GACjCpZ,KAAK4X,KAAM,aAAcsB,EAAIlZ,OAGpBy6I,2BAAV,WACC,IAAID,GAAqCx6I,UANIq6I,mBCI/C,4DAgDA,OAhD0Cv6I,OAC/B46I,iBAAV,SAAgB94I,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK2Q,GAAImH,EAAiB0B,MAAM,SAAE5D,GACjC,GAAIA,EAAE9U,SAAWmG,EAAO,CACvB,IAAM/D,EAAQ+D,EAAK/D,MACnB,GAAI,EAAIA,EAAQ,CACf,IAAM8R,EAAO/N,EAAKgzI,GAAOhzI,EAAK+yI,GACxBrlI,EAAWiB,EAAEhO,KAAK+yI,iBAAkB1zI,GACpC2zI,EAAWjxI,KAAKC,IAAK,EAAIoL,EAAMrL,KAAKG,IAAK,EAAG6K,EAASvO,EAAIlD,EAAe,GAAP8R,IACnE/N,EAAK+yI,KAAWY,GACnB3zI,EAAK2Q,KAAM,aAAcgjI,EAAU3zI,QAMvCjH,KAAKm6I,GAAOxpI,GAAI,cAAc,SAAEvK,GAC/B,IAAMlD,EAAQ+D,EAAK/D,MACnB,GAAI,EAAIA,EAAQ,CACf,IAAM8R,EAAO/N,EAAKgzI,GAAOhzI,EAAK+yI,GACxBY,EAAWjxI,KAAKC,IAAK,EAAIoL,EAAMrL,KAAKG,IAAK,EAAG1D,EAAIlD,IAClD+D,EAAK+yI,KAAWY,GACnB3zI,EAAK2Q,KAAM,aAAcgjI,EAAU3zI,QAM7ByzI,wBAAV,SAAuB94I,GACtB,OAAO,IAAI64I,GAA2B74I,IAGvC84I,2BAAA,WACC,IAAMR,EAAQl6I,KAAKm6I,GACbj3I,EAAQlD,KAAKkD,MACbyD,EAAS3G,KAAK2G,OACdk0I,EAAmBlxI,KAAKC,IAAa,GAAR1G,EAAag3I,EAAMK,kBAChDnzB,EAAQlkH,EAAQ23I,EAChBC,EAAW1zB,EAAQpnH,KAAKg6I,GACxBe,EAAU3zB,EAAQpnH,KAAKi6I,GAAOY,EAAmBC,EAEvDZ,EAAMvlI,SAASrO,IAAKw0I,EAAU,GAC9BZ,EAAMl1H,OAAQ+1H,EAASp0I,GAEvBG,YAAMglI,8BA9CkCiO,mBCHzC,WAAantI,GAAb,MACC9F,0BACA8F,EAAKQ,iBAAkBnG,GAAM,GAC7B2F,EAAKwB,cAAenH,KAsBtB,OA1BuDnH,OAOtDk7I,qBAAA,SAAUpuI,EAAa1J,EAAeyD,GACrC,IAAMrE,EAAQsK,EAAKtK,MAEnBtC,KAAKud,QAEL,IAAMvb,EAAa4K,EAAK5K,WAClBsM,EAAkBtM,EAAWuM,SAAUjM,GACvCkM,EAAkBxM,EAAWyM,SAAUnM,GACtB,MAAnBgM,GAEHtO,KAAKmuB,UAAW7f,EAAiBE,GACjCxO,KAAKwiD,UAAW,EAAG,EAAG,EAAG,GACzBxiD,KAAKouB,SAAkB,GAARlrB,EAHF,EAGsB,EAAG8R,EAAUrO,GAChD3G,KAAKquB,UACLruB,KAAK2O,SAAU,GAEf3O,KAAK2O,SAAU,MAvBqC2f,2BCAvD,4DAQA,OAR6CxuB,OAClCm7I,uBAAV,SAAsB/hI,EAAYE,GACjCpZ,KAAK4X,KAAM,aAAcwB,EAAIpZ,OAGpBi7I,2BAAV,WACC,IAAID,GAAmCh7I,UANIq6I,mBCI7C,4DAiDA,OAjDwCv6I,OAC7Bo7I,iBAAV,SAAgBt5I,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK2Q,GAAImH,EAAiB0B,MAAM,SAAE5D,GACjC,GAAIA,EAAE9U,SAAWmG,EAAO,CACvB,IAAMN,EAASM,EAAKN,OACpB,GAAI,EAAIA,EAAS,CAChB,IAAMqO,EAAO/N,EAAKgzI,GAAOhzI,EAAK+yI,GACxBrlI,EAAWiB,EAAEhO,KAAK+yI,iBAAkB1zI,GACpC2zI,EAAWjxI,KAAKC,IAAK,EAAIoL,EAAMrL,KAAKG,IAAK,EAAG6K,EAAStO,EAAIM,EAAgB,GAAPqO,IACpE/N,EAAK+yI,KAAWY,GACnB3zI,EAAK2Q,KAAM,aAAcgjI,EAAU3zI,GAGrC2O,EAAEy4B,sBAIJruC,KAAKm6I,GAAOxpI,GAAI,cAAc,SAAEtK,GAC/B,IAAMM,EAASM,EAAKN,OACpB,GAAI,EAAIA,EAAS,CAChB,IAAMqO,EAAO/N,EAAKgzI,GAAOhzI,EAAK+yI,GACxBY,EAAWjxI,KAAKC,IAAK,EAAIoL,EAAMrL,KAAKG,IAAK,EAAGzD,EAAIM,IAClDM,EAAK+yI,KAAWY,GACnB3zI,EAAK2Q,KAAM,aAAcgjI,EAAU3zI,QAM7Bi0I,wBAAV,SAAuBt5I,GACtB,OAAO,IAAIq5I,GAAyBr5I,IAGrCs5I,2BAAA,WACC,IAAMhB,EAAQl6I,KAAKm6I,GACbj3I,EAAQlD,KAAKkD,MACbyD,EAAS3G,KAAK2G,OACdk0I,EAAmBlxI,KAAKC,IAAc,GAATjD,EAAcuzI,EAAMK,kBACjDnzB,EAAQzgH,EAASk0I,EACjBC,EAAW1zB,EAAQpnH,KAAKg6I,GACxBe,EAAU3zB,EAAQpnH,KAAKi6I,GAAOY,EAAmBC,EAEvDZ,EAAMvlI,SAASrO,IAAK,EAAGw0I,GACvBZ,EAAMl1H,OAAQ9hB,EAAO63I,GAErBj0I,YAAMglI,8BA/CgCiO,mBC+CxC,4DAkUA,OA9TUj6I,OAQCq7I,iBAAV,SAAgBv5I,GACfkF,YAAMwZ,eAAM1e,GAEZ5B,KAAKswB,GAAgB,KAGrB,IAAM3uB,EAAQ3B,KAAK2B,MACb43I,EAAUv5I,KAAKw5I,GAAWx5I,KAAKo7I,UAAWx5I,IAtCpB,SAG3BD,EAAcC,GAChB,OAAIA,GAA2B,MAAhBA,EAAQ0B,KACf1B,EAAQ0B,KAET3B,EAAM0uB,yBAgCRA,CAAuB1uB,EAAOC,KACjC5B,KAAKsD,KAAOtD,KAAK+wB,2BAElB/wB,KAAKwgB,SAAU+4H,GAGfv5I,KAAKq7I,cAAe9B,EAAS53I,EAAOC,GAGpC5B,KAAKs7I,SAAU/B,EAAS53I,EAAOC,IAGtBu5I,qBAAV,SAAoB5B,EAAgB53I,EAAcC,GAAlD,WACO25I,EAAa35I,GAAWA,EAAQu9H,MAA6B,MAArBv9H,EAAQu9H,KAAK3vF,KACxD3sC,EAAcjB,EAAQu9H,KAAK3vF,MAASivD,GAAW78F,EAAQu9H,KAAK3vF,MAAS5tC,EAAQu9H,KAAK3vF,KACpF7tC,EAAMy9H,cAKP,GAAImc,IAAa98C,GAAUmB,IAAM27C,IAAa98C,GAAUmM,MAAQ,CAC/D,IAAM4wC,EAAW,IAAI5zH,QACrB5nB,KAAKy/H,GAAY,IAAIpqF,GAAS,CAC7Bv0C,OAAQd,KACRkY,MAAOqjI,IAAa98C,GAAUmM,MAC9Bj6F,GAAI,CACHyY,MAAO,WACNoyH,EAASj1I,SAAUgzI,EAAQ5kI,WAE5BmG,KAAM,SAAE5B,EAAYE,GACnBoiI,EAASl1I,IAAKk1I,EAASp1I,EAAI8S,EAAIsiI,EAASn1I,EAAI+S,GAC5CmgI,EAAQ5kI,SAASrO,IAChBW,EAAKw0I,WAAYlC,EAASiC,EAASp1I,GACnCa,EAAKy0I,WAAYnC,EAASiC,EAASn1I,UAQ/B80I,0BAAV,SAAyB5B,EAAgBnwH,GACxC,IAAMy2G,EAAW7/H,KAAKy/H,GACN,MAAZI,GACHA,EAAS5uF,OAEVsoG,EAAQnzI,GAAMmzI,EAAQr2I,MAAQkmB,GAGrB+xH,0BAAV,SAAyB5B,EAAgBnwH,GACxC,IAAMy2G,EAAW7/H,KAAKy/H,GACN,MAAZI,GACHA,EAAS5uF,OAEVsoG,EAAQlzI,GAAMkzI,EAAQ5yI,OAASyiB,GAGtB+xH,0BAAV,SAAyB5B,EAAgB53I,EAAcC,GAAvD,WAEO+5I,EAAc37I,KAAK47I,GAAe,IAAIV,GAxFjB,SAAEt5I,GAC9B,OAAOA,GAAWA,EAAQwlI,KAAOxlI,EAAQwlI,IAAI73G,SAuFoBssH,CAAsBj6I,IACtF+5I,EAAYhrI,GAAI,cAAc,SAAEyY,GAC/BniB,EAAK60I,cAAevC,EAASnwH,MAE9BppB,KAAKwgB,SAAUm7H,GAGf,IAAMI,EAAgB/7I,KAAKg8I,GAAiB,IAAItB,GA3FnB,SAAE94I,GAChC,OAAOA,GAAWA,EAAQwlI,KAAOxlI,EAAQwlI,IAAI33G,WA0F0BwsH,CAAwBr6I,IAC9Fm6I,EAAcprI,GAAI,cAAc,SAAEyY,GACjCniB,EAAKi1I,cAAe3C,EAASnwH,MAE9BppB,KAAKwgB,SAAUu7H,GAGfxC,EAAQ5oI,GAAI,QAAQ,WACnB1J,EAAKk1I,sBAEN5C,EAAQ5oI,GAAI,UAAU,WACrB1J,EAAKk1I,sBAENn8I,KAAKo8I,mBAGIjB,oBAAV,WACC,MAAO,SAGR37I,sBAAI27I,2BAAJ,WACC,OAAOn7I,KAAKw5I,oCAGH2B,sBAAV,SAAqBv5I,GACpB,GAAIA,GAAWA,EAAQ23I,QAAU,CAChC,IAAMA,EAAU33I,EAAQ23I,QACxB,OAAIA,aAAmB54H,EACf44H,EAEAv5I,KAAKq8I,WAAY9C,GAG1B,OAAOv5I,KAAKq8I,cAGHlB,uBAAV,SAAsBv5I,GACrB,OAAO,IAAI2vI,GAAU3vI,IAGZu5I,oCAAV,WAMC,OAL0B,MAAtBn7I,KAAKswB,KACRtwB,KAAKswB,GAAgB,IAAIwuG,GAAmB9+H,MAC5CA,KAAKoO,cAAepO,KAAKswB,IACzBtwB,KAAK2d,WAEC3d,KAAKswB,IAGb6qH,oBAAA,SAASvlI,EAAeuQ,EAA8BlN,GACrD,IAAMsgI,EAAUv5I,KAAKw5I,GACfpzI,EAAIpG,KAAKs8I,iBAAkB/C,EAASpzH,EAAOq5B,OAASr5B,EAAOi6B,QAC3D/5C,EAAIrG,KAAKu8I,iBAAkBhD,EAASpzH,EAAOs5B,OAASt5B,EAAOi6B,QACjE,GAAIm5F,EAAQnzI,IAAMA,GAAKmzI,EAAQlzI,IAAMA,EAAI,CACxC,IAAMw5H,EAAW7/H,KAAKy/H,GAKtB,OAJgB,MAAZI,GACHA,EAAS5uF,OAEVsoG,EAAQ5kI,SAASrO,IAAKF,EAAGC,IAClB,EAER,OAAO,GAGE80I,6BAAV,SAA4B5B,EAAgBv5F,GAC3C,GAAI,EAAIA,GAASA,EAAQ,EAAI,CAC5B,IAAMghF,EAAQhhI,KAAK2B,MAAM66I,gBACzB,OAAOx8I,KAAKy7I,WAAYlC,EAASA,EAAQnzI,EAAI45C,EAAQghF,GAEtD,OAAOuY,EAAQnzI,GAGN+0I,6BAAV,SAA4B5B,EAAgBv5F,GAC3C,GAAI,EAAIA,GAASA,EAAQ,EAAI,CAC5B,IAAMghF,EAAQhhI,KAAK2B,MAAM66I,gBACzB,OAAOx8I,KAAK07I,WAAYnC,EAASA,EAAQlzI,EAAI25C,EAAQghF,GAEtD,OAAOuY,EAAQlzI,GAGN80I,uBAAV,SAAsB5B,EAAgBnzI,GACrC,OAAOuD,KAAKC,IAAK,EAAGD,KAAKG,IAAK9J,KAAKkD,MAAQq2I,EAAQr2I,MAAOkD,KAGjD+0I,uBAAV,SAAsB5B,EAAgBlzI,GACrC,OAAOsD,KAAKC,IAAK,EAAGD,KAAKG,IAAK9J,KAAK2G,OAAS4yI,EAAQ5yI,OAAQN,KAGnD80I,wBAAV,SAAuBr6I,GACtB,OAAOgG,YAAMqe,sBAAarkB,MAAgBA,aAAkBi5I,KAG7DoB,qBAAA,SAAUp5H,EAAkBC,EAAmBZ,EAAkBC,GAChEva,YAAM2a,mBAAUM,EAAUC,EAAWZ,EAAUC,GAC/CrhB,KAAKo8I,mBAGIjB,6BAAV,WACCn7I,KAAKo8I,mBAGIjB,4BAAV,WACC,IAAMQ,EAAc37I,KAAK47I,GACnBG,EAAgB/7I,KAAKg8I,GACR,MAAfL,GAAwC,MAAjBI,IAC1B/7I,KAAKy8I,uBAAwBd,EAAaI,GAC1C/7I,KAAK08I,4BAA6Bf,EAAaI,GAC/C/7I,KAAK28I,yBAA0BhB,EAAaI,KAIpCZ,qCAAV,SAAoCQ,EAAiCI,GACpE,IAAM74I,EAAQlD,KAAKkD,MACbyD,EAAS3G,KAAK2G,OAEdi2I,EAAmBjB,EAAYz4I,MACrCy4I,EAAYhnI,SAASrO,IAAKpD,EAAQ05I,EAAqC,GAAnBA,GACpDjB,EAAYh1I,OAASA,EAASi2I,EAE9B,IAAMC,EAAsBd,EAAcp1I,OAC1Co1I,EAAcpnI,SAASrO,IAA2B,GAAtBu2I,EAA2Bl2I,EAASk2I,GAChEd,EAAc74I,MAAQA,EAAQ25I,GAGrB1B,mCAAV,SAAkCQ,EAAiCI,GAClE,IAAMxC,EAAUv5I,KAAKw5I,GACfpzI,GAAKmzI,EAAQnzI,EACbC,GAAKkzI,EAAQlzI,EACnB01I,EAAce,UAAW12I,EAAGA,EAAIpG,KAAKkD,MAAOq2I,EAAQr2I,OACpDy4I,EAAYmB,UAAWz2I,EAAGA,EAAIrG,KAAK2G,OAAQ4yI,EAAQ5yI,SAG1Cw0I,wCAAV,SAAuCQ,EAAiCI,GACvE,IAAMgB,EAAsB/8I,KAAKg9I,0BAA2BjB,GACtDkB,EAAoBj9I,KAAKg9I,0BAA2BrB,GAC1D,GAAIoB,GAAuBE,EAAoB,CAE9C,IAQQ1D,EARF9nH,EAAezxB,KAAKswB,GACN,MAAhBmB,IACCsqH,EAAcptI,SAAWgtI,EAAYhtI,SAClC4qI,EAAUv5I,KAAKw5I,IACTl2I,OAASmuB,IACpB8nH,EAAQj2I,KAAOmuB,IAGV8nH,EAAUv5I,KAAKw5I,IACTl2I,OACXi2I,EAAQj2I,KAAO,OAMlBjD,EAAciB,OAAQtB,QAIdm7I,sCAAV,SAAqC/T,GACpC,IAAM8V,EAAkB9V,EAAI8V,kBAC5B,OAAI9V,EAAIz4H,UAAYuuI,IACnB9V,EAAIz4H,QAAUuuI,GACP,IAKC/B,2BAAV,SAA0B93H,GACzB,IAAM8D,EAAOg0H,EAAMgC,gBACb5D,EAAUv5I,KAAKu5I,QACf6D,EAAW7D,EAAQnzI,EACnBi3I,EAAW9D,EAAQlzI,EACnBi3I,EAAe/D,EAAQr2I,MACvBq6I,EAAgBhE,EAAQ5yI,OAE9BwgB,EAAK7gB,IAAK,EAAG,GACb+c,EAAQguF,SAAUlqF,EAAMA,GAAM,GAC9BoyH,EAAQ3rG,QAASzmB,OAAM5kB,EAAW4kB,GAAM,GACxC,IAAM7e,EAAK80I,EAAWzzI,KAAKC,IAAK0zI,EAAc3zI,KAAKG,IAAK,EAAGqd,EAAK/gB,IAC1DoC,EAAK60I,EAAW1zI,KAAKC,IAAK2zI,EAAe5zI,KAAKG,IAAK,EAAGqd,EAAK9gB,IAEjE8gB,EAAK7gB,IAAK+c,EAAQngB,MAAOmgB,EAAQ1c,QACjC0c,EAAQguF,SAAUlqF,EAAMA,GAAM,GAC9BoyH,EAAQ3rG,QAASzmB,OAAM5kB,EAAW4kB,GAAM,GACxC,IAAM5e,EAAK60I,EAAWzzI,KAAKC,IAAK0zI,EAAc3zI,KAAKG,IAAK,EAAGqd,EAAK/gB,IAC1DqC,EAAK40I,EAAW1zI,KAAKC,IAAK2zI,EAAe5zI,KAAKG,IAAK,EAAGqd,EAAK9gB,IAE3DnD,EAAQlD,KAAKkD,MACf8iB,EAAsB,KACtB1d,EAAK,EACJC,GAAMrF,IACT8iB,EAAOrc,KAAKG,IAAK5G,EAAQo6I,EAAc3zI,KAAKC,IAAK,EAAGwzI,GAAY,EAAI90I,MAGjEpF,EAAQqF,IACXyd,EAAOrc,KAAKG,IAAK5G,EAAQo6I,EAAc3zI,KAAKC,IAAK,EAAGwzI,GAAY70I,EAAKrF,MAIvE,IAAMyD,EAAS3G,KAAK2G,OAChBsf,EAAsB,KACtBzd,EAAK,EACJC,GAAM9B,IACTsf,EAAOtc,KAAKG,IAAKnD,EAAS42I,EAAe5zI,KAAKC,IAAK,EAAGyzI,GAAY,EAAI70I,MAGnE7B,EAAS8B,IACZwd,EAAOtc,KAAKG,IAAKnD,EAAS42I,EAAe5zI,KAAKC,IAAK,EAAGyzI,GAAY50I,EAAK9B,MAI7D,MAARqf,EACS,MAARC,EACHszH,EAAQ5kI,SAASrO,IAAK0f,EAAMC,GAE5BszH,EAAQ5kI,SAASvO,EAAI4f,EAGV,MAARC,IACHszH,EAAQ5kI,SAAStO,EAAI4f,GAIvBnf,YAAMyd,yBAAgBlB,IAGvB83H,oBAAA,WAEC,IAAM1pH,EAAezxB,KAAKswB,GACN,MAAhBmB,IACHzxB,KAAKswB,GAAgB,KACrBmB,EAAa9J,WAEd3nB,KAAKsD,KAAO,KAEZwD,YAAM6gB,oBA3TUwzH,kBAAkB,IAAIvzH,WAD9BjH,kBCvCV,4DAiGA,OA7FU7gB,OAGC09I,iBAAV,SAAgB57I,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ,IAAM4zB,EAAY5zB,GAAWA,EAAQ4zB,UACrCx1B,KAAKy9I,GAAejoH,aAAqBmkH,GACxCnkH,EAAYx1B,KAAK09I,aAAcloH,GAGhC1d,EAAiBiC,QAAS/Z,MAAM,SAAE4V,GACjC,IAAM8K,EAA8BzZ,EAAK02I,SAAU/nI,EAAE9U,QACjD4f,aAAiBC,GAASD,EAAM/I,gBACnC1Q,EAAKuuB,UAAUhI,IAAK9M,OAKb88H,yBAAV,SAAwB57I,GACvB,OAAO,IAAI+3I,GAAgB35I,KAAKw5I,GAAU53I,IAGjC47I,4BAAV,WACC,IAAMhoH,EAAYx1B,KAAKy9I,GACN,MAAbjoH,GACHA,EAAU7X,UAEX7W,YAAM0b,4BAGPhjB,sBAAIg+I,6BAAJ,WACC,OAAOx9I,KAAKy9I,oCAGHD,qBAAV,SAAoB18I,GAGnB,IAFA,IAAMy4I,EAAUv5I,KAAKu5I,QACjBhmI,EAAUzS,EACI,MAAXyS,GAAkB,CACxB,GAAIA,EAAQvS,SAAWu4I,EACtB,OAAOhmI,EAERA,EAAUA,EAAQvS,OAEnB,OAAO,MAGRw8I,oBAAA,WACC12I,YAAM8d,mBACN5kB,KAAK49I,sBACL59I,KAAK69I,yBAGIL,gCAAV,WAIC,IAHA,IAAMjE,EAAUv5I,KAAKu5I,QACf7hH,EAAQ6hH,EAAQ94H,SAClBpa,EAAI,EACC9E,EAAI,EAAGC,EAAOk2B,EAAMh3B,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAMma,EAAOgc,EAAOn2B,GAChBma,aAAgBiF,IACnBjF,EAAKrV,EAAIA,EACTA,GAAKqV,EAAK/U,QAGZ,IAAMm3I,EAAcn0I,KAAKC,IAAK,GAAIvD,EAAIrG,KAAK2G,QACvC4yI,EAAQlzI,EAAIy3I,IACfvE,EAAQlzI,EAAIy3I,GAEbvE,EAAQ5yI,OAASN,GAGRm3I,kCAAV,WAKC,IAJA,IAAMjE,EAAUv5I,KAAKu5I,QACf7hH,EAAQ6hH,EAAQ94H,SAChBtO,GAAQonI,EAAQlzI,EAChByxD,EAAK3lD,EAAOnS,KAAK2G,OACdpF,EAAI,EAAGC,EAAOk2B,EAAMh3B,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAMma,EAAOgc,EAAOn2B,GACpB,GAAIma,aAAgBiF,EAAQ,CAC3B,IAAMo9H,EAAQriI,EAAKrV,EACnBqV,EAAK/M,QAAYwD,GAAQ4rI,EAAQriI,EAAK/U,QAAUo3I,GAASjmF,KAKlD0lF,6BAAV,WACC12I,YAAMq1I,4BACNn8I,KAAK69I,yBAGIL,oBAAV,WACC,MAAO,YA3FCrC,mBCFT,WAAav5I,GAAb,MACCkF,YAAOlF,gBACPqF,EAAKyJ,SAAUpM,EAAWkf,aAAa,KAMzC,OATU1jB,OAMCk+I,oBAAV,WACC,MAAO,wBAPCR,mBCPV,4DAaA,OATU19I,OACCm+I,iBAAV,SAAgBr8I,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAK2O,SAAU,GAGNsvI,oBAAV,WACC,MAAO,YAPCj3B,IC4BJk3B,GAAmB,CACxB9vE,QAAS,SAAEttE,GACV,OAAI+B,EAAc/B,GACVA,EACGgD,EAAchD,GACjBulC,OAAQvlC,GACL,SAAUA,EACbA,EAAOmc,KACJ,UAAWnc,EACdA,EAAOqmH,MACJ,OAAQrmH,EACXA,EAAOk3B,GAEP,KAKJmmH,GAAY,SAAiBv8I,GAClC,OAA8B,MAArBA,EAAQw8I,UAAoBx8I,EAAQw8I,UAAUhwE,QAAU,OAAU8vE,GAAiB9vE,SAGvFiwE,GAAgB,SAAEz8I,EAAmCZ,EAAegoB,GACzE,OAAe,MAAXpnB,GACmB,MAAlBA,EAAQZ,SACXY,EAAQZ,OAASA,GAEE,MAAhBY,EAAQonB,KACXpnB,EAAQonB,KAAO,CACdyF,MAAOzF,GAEwB,MAAtBpnB,EAAQonB,KAAKyF,QACvB7sB,EAAQonB,KAAKyF,MAAQzF,GAEfpnB,GAED,CACNZ,SACAgoB,KAAM,CACLyF,MAAOzF,KAKJs1H,GAAuB,SAC5B38I,EAA2BC,EAAoCZ,GAE/D,OAAOq9I,GACNz8I,EAAQ28I,MAAQ38I,EAAQ28I,KAAKC,QAC7Bx9I,EACAW,EAAM88I,uBAIFC,GAAyB,SAC9B/8I,EAA2BC,EAAoCZ,GAE/D,OAAOq9I,GACNz8I,EAAQ28I,MAAQ38I,EAAQ28I,KAAKI,UAC7B39I,EACAW,EAAMi9I,wCAgBP,WAAah9I,GAAb,MACCkF,YAAOlF,SAEPqF,EAAKquB,GAAS,KACd,IAAM3zB,EAAQsF,EAAKtF,MACbm0I,EAAa7uI,EAAK4uI,GAAcj0I,EAAQk0I,WACxC1nE,EAAU+vE,GAAWv8I,GAErBgT,EAAS,IAAIqyC,GAAgB,CAClCjmD,OAAQiG,EACRb,EAAG,UAAWC,EAAG,UACjBnD,MAAO,UAAWyD,OAAQ,SAI3BM,EAAKwyC,GAAS,IAAI8tE,GAAW,CAC5BvmH,OAAQ4T,EACR1R,MAAO,YAIR,IAAM6d,EAAO9Z,EAAKmjI,GAAQ,IAAI4T,GAAkB,CAC/Ch9I,OAAQ4T,EACR1R,MAAO,UACPsyB,UAAW,CACV7kB,GAAI,CACHgiH,OAAQ,SAAEn9F,GACT,IAAM9Z,EAAwC8Z,EAAUggB,QACxD,GAAY,MAAR95B,EAAe,CAClB,IAAM+S,EAAQxnB,EAAKquB,GAAS5Z,EAAK+S,MACjCxnB,EAAK2Q,KAAM,SAAU6W,EAAOxnB,GAC5BA,EAAKo7C,cAQJw8F,EAAc,IAAIZ,GAAOK,GAAsB38I,EAAOC,EAASmf,IACrE9Z,EAAK63I,GAAeD,EAGpB,IAAME,EAAgB,IAAId,GAAOS,GAAwB/8I,EAAOC,EAASmf,IACzE9Z,EAAK+3I,GAAiBD,EAGtB93I,EAAKwyC,GAAO9oC,GAAI,SAAS,SAAE8d,GAC1BqnH,EAAWmJ,OAAO9+I,OAAO,CAAEsuB,OAG5BqnH,EAAWmJ,OAAOtuI,GAAI,WAAW,SAAEiF,EAAYspI,GAQ9C,IAPA,IAAM3F,EAAUx4H,EAAKw4H,QACf94H,EAAW84H,EAAQ94H,SAGnB0+H,EAAiB1+H,EAAS/f,OAC1B0+I,EAAsBF,EAAcx+I,OACpC2+I,EAAY11I,KAAKC,IAAKu1I,EAAgBC,GACnC79I,EAAI,EAAGC,EAAO69I,EAAW99I,EAAIC,IAAQD,EAAI,CACjD,IAAMmf,EAAQD,EAAUlf,GAClB+9I,EAAeJ,EAAe39I,GACpC,GAAImf,aAAiB0U,EACpB1U,EAAMsI,KAAOolD,EAASkxE,GACtB5+H,EAAM+N,MAAQ6wH,MACR,CACN/F,EAAQgG,cAAeh+I,GACvBmf,EAAMiH,UACN,IAAM63H,EAAWv4I,EAAK2wB,QAAS0nH,EAAclxE,EAASkxE,IACtD/F,EAAQ5G,WAAY6M,EAAUj+I,IAKhC,IAASA,EAAI89I,EAAW79I,EAAO49I,EAAqB79I,EAAIC,IAAQD,EACzD+9I,EAAeJ,EAAe39I,GAC9Bi+I,EAAWv4I,EAAK2wB,QAAS0nH,EAAclxE,EAASkxE,IACtD/F,EAAQ/4H,SAAUg/H,GAInB,IAASj+I,EAAI49I,EAAiB,EAAGE,GAAa99I,IAAKA,EAClDkf,EAAUlf,GAAIomB,aAKhB,IAAM83H,EAAa,IAAIhhG,UACvBq3F,EAAWmJ,OAAOtuI,GAAI,UAAU,WAC/B,GAAImlI,EAAWmJ,OAAOS,SAAW,CAChC,IAAMl9I,EAASszI,EAAWmJ,OAAOU,YACnB,MAAVn9I,GAAkB,EAAIA,EAAO9B,OAChC++I,EAAW5gG,OAEX4gG,EAAW3gG,KAAM+/F,QAGlBY,EAAW3gG,KAAMigG,QAuCrB,OAhJUj/I,OA8GC8/I,oBAAV,SAAmBN,EAA6Bn4B,GAC/C,OAAO,IAAImyB,GAAqC,CAC/C7qH,MAAO6wH,EACPt2H,KAAM,CACLyF,MAAO04F,MAKV3nH,sBAAIogJ,yBAAJ,WACC,OAAO5/I,KAAKs1B,oCAGHsqH,oBAAV,WACC,MAAO,iBAGEA,mBAAV,WACC94I,YAAMyzC,kBACNv6C,KAAKoqI,GAAM50G,UAAUjY,QACrBvd,KAAK61I,GAAYoJ,OAAO9+I,OAAO,CAAEH,KAAKy5C,GAAOhrB,SAGpCmxH,oBAAV,WACC94I,YAAMgxF,oBAGP8nD,oBAAA,WACC5/I,KAAKy5C,GAAO9xB,UACZ3nB,KAAK8+I,GAAan3H,UAClB3nB,KAAKg/I,GAAer3H,UACpB3nB,KAAKoqI,GAAMziH,UACX7gB,YAAM6gB,uBA9IEuvE,kBC/FT,WAAa2oD,GACZ7/I,KAAK8/I,GAASD,EACd7/I,KAAK+/I,GAAc,GAiCrB,OA9BWC,oBAAV,SAAmBl/I,GAClB,OAAOd,KAAK+/I,GAAYl/I,QAASC,IAGxBk/I,kBAAV,SAAiBp/I,GAGhB,IAFA,IAAMq/I,EAAajgJ,KAAK+/I,GAClBG,EAAOv2I,KAAKG,IAAK,EAAGlJ,GACjBW,EAAI0+I,EAAWv/I,OAAS,EAAGw/I,GAAQ3+I,IAAKA,EAChD0+I,EAAY1+I,GAAI8gD,SAIlB29F,gBAAA,SAAKppH,GACJ52B,KAAK+/I,GAAYv/I,KAAMo2B,IAGxBopH,iBAAA,SAAMppH,GACL52B,KAAKqiD,MAAOriD,KAAKa,QAAS+1B,GAAc,IAGzCopH,mBAAA,SAAQppH,GACP,IAAMh2B,EAAQZ,KAAKa,QAAS+1B,GACxB,GAAKh2B,IACRZ,KAAKqiD,MAAOzhD,EAAQ,GACpBZ,KAAK+/I,GAAYxtI,OAAQ3R,EAAO,GAClB,IAAVA,GACHZ,KAAK8/I,GAAO5qE,8BCjBhB,4DA8MA,OA1MUp1E,OAUCqgJ,iBAAV,SAAgBv+I,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAKk2F,GAAoB,WACxBjvF,EAAKkvF,eAGS,MAAXv0F,GACH5B,KAAKmD,EAA4B,MAAjBvB,EAAQwB,MACrBP,EAAcjB,EAAQwB,OAAU6+C,GAAYrgD,EAAQwB,OAAUxB,EAAQwB,MACxE6+C,GAAW31C,OAEZtM,KAAKogJ,GAAwB,MAAfx+I,EAAQmhF,KAAcnhF,EAAQmhF,IAC5C/iF,KAAKqgJ,GAA8B,MAAlBz+I,EAAQ21B,QAAiB31B,EAAQ21B,SAElDv3B,KAAKmD,EAAS8+C,GAAW31C,OACzBtM,KAAKogJ,IAAO,EACZpgJ,KAAKqgJ,IAAU,GAEhBrgJ,KAAKsgJ,IAAO,EACZtgJ,KAAK8/I,GAAS,KACd9/I,KAAK2O,SAAU,EACf3O,KAAK+7B,GAAW,KAChB/7B,KAAK0Q,SAAUpM,EAAW6yF,YAAY,GAGtCxpD,GAAiBtmB,MAAOrnB,MAAM,WAC7BiH,EAAKo7C,WAGNriD,KAAK2Q,GAAI,UAAU,WAClB1J,EAAKo7C,WAIFzgD,GAAWA,EAAQ81B,OACtBV,GAAO2wB,SAAU3nD,KAAM4B,EAAQ81B,MAAO13B,KAAKqgJ,IAI5CrgJ,KAAK23F,GAAW,IAAI17C,GAAar6C,IAGlCu+I,qBAAA,SAAU1xH,GAET,IADA,IAAMhO,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACxB,GAAImf,aAAiBoV,GAAapV,EAAM+N,QAAUA,EACjD,OAAO/N,EAGT,OAAO,MAGEy/H,oBAAV,WACC,MAAO,SAGRA,uBAAA,WACC,OAAOngJ,KAAK+7B,IAGbokH,yBAAA,WACC,OAAOngJ,MAGRmgJ,iBAAA,SAAMN,EAAwBjpH,EAA8BP,GAC3D,GAAIr2B,KAAKyhD,WAAa,CACrB,IAAMvgD,EAAQlB,KAAK23F,GAASE,KAAM73F,MAClCA,KAAK8/I,GAASD,EAId,IADA,IAAMp/H,EAAWzgB,KAAKygB,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBC,GACpBD,EAAMhQ,SAAUpM,EAAWsL,QAAUtL,EAAWoL,SAAS,GAK3D,IAAMjE,EAAWvK,EAAMuK,SACjB80I,EAAmBvgJ,KAAKk2F,GAM9B,GALIl2F,KAAKqgJ,GACR50I,EAASkF,GAAI,YAAa4vI,GAE1B90I,EAASqO,KAAM,YAAaymI,GAEzBvgJ,KAAKogJ,GAAO,CACf,IAAMn5H,EAAS44H,EAAMW,YACP,MAAVv5H,IACHjnB,KAAKkD,MAAQ+jB,EAAO/jB,OAKtBlD,KAAKsgJ,GAAmB,MAAXjqH,EACbA,EAAUA,GAAW,IAAI2pH,GAAcH,GACtB,MAAbjpH,GACHP,EAAQ/f,KAAMsgB,GAEfP,EAAQ7I,IAAKxtB,MACbA,KAAK+7B,GAAW1F,EAGhBn1B,EAAMH,MAAMyf,SAAUxgB,MAGtBA,KAAKk1E,QAGLpuE,YAAMg4C,gBAGN9+C,KAAK4X,KAAM,OAAQ5X,MAEpB,OAAOA,MAGEmgJ,wBAAV,WACC,IAAMN,EAAQ7/I,KAAK8/I,GACnB,GAAID,EAAQ,CACX,IAAM54H,EAAS44H,EAAMW,YACrB,GAAIv5H,EAAS,CACRjnB,KAAKogJ,KACRpgJ,KAAKkD,MAAQ+jB,EAAO/jB,OAErB,IAAMhC,EAAQlB,KAAK23F,GAAS8oD,OAC5B,GAAIv/I,EAAQ,CACX,IAAMS,EAAQ3B,KAAK2B,MACnB4rC,GAAW27F,OACVlpI,KACAinB,EACAtlB,EAAM++I,aAAc/+I,EAAMg/I,aAC1Bz/I,EAAMgC,MAAOhC,EAAMyF,OACnB3G,KAAKmD,OAOVg9I,kBAAA,WACC,GAAIngJ,KAAK81E,UAAY,CACpB,IAAMz/C,EAAUr2B,KAAK+7B,GACjB1F,GACHA,EAAQ5I,OAAQztB,MAGjB,IAAM0hB,EAAS1hB,KAAKgB,OAChB0gB,GACHA,EAAO+S,YAAaz0B,MAGrB,IAAMkB,EAAQlB,KAAK23F,GAAS8oD,OACxBv/I,GACHA,EAAMuK,SAASmN,IAAK,YAAa5Y,KAAKk2F,IAGvCl2F,KAAK8/I,GAAS,KAEdh5I,YAAM+3C,gBAEN7+C,KAAK4X,KAAM,QAAS5X,MAErB,OAAOA,MAGRmgJ,sBAAA,SAAWvqI,GACV,GAAID,EAAkBirI,aAAchrI,IAAOD,EAAkBkrI,eAAgBjrI,GAAM,CAClF,IAAM1U,EAAQlB,KAAK23F,GAAS8oD,OAC5B,GAAIv/I,EAAQ,CACX,IAAMolB,EAAkBplB,EAAMgiB,qBACxBG,EAAUiD,EAAgBhD,aAChC,GAAe,MAAXD,EAAkB,CACrB,IAAMygC,EAAYnuC,EAAkBkrI,eAAgBjrI,GAC9C4T,EAAOlD,EAAgB2uD,cAC5B5xD,GAAS,EAAOA,EAAQE,SAAUjf,EAAW6yF,aAAgBrzC,EAAWA,GAE7D,MAARt6B,GACHlD,EAAgBnD,WAAYqG,GAAM,GAAM,KAM5C,OAAO1iB,YAAM+uB,oBAAWjgB,IAGfuqI,gCAAV,SAA+Bp6I,GAC9B,OAAS/F,KAAKsgJ,OAxMNr5F,IA4MVjwB,GAAO8pH,gBAAgB,SAAEl/I,GAAiC,OAAA,IAAIu+I,GAAYv+I,MC9N1E,ICXYm/I,kBDkBX,WAAan/I,GAAb,MACCkF,YAAOlF,gBAEPqF,EAAK0J,GAAI,UAAU,WAClB1J,EAAKmiB,aAuCR,OA9CUtpB,OAWCkhJ,iBAAV,SAAgBp/I,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAK+gD,GAAQ/gD,KAAKihD,OAAQjhD,KAAK2B,MAAOC,IAG7Bo/I,mBAAV,SAAkBr/I,EAAcC,GAC/B,IAAM++C,EAAO/+C,GAAWA,EAAQ++C,KAChC,OAASA,aAAgBw/F,GAAQx/F,EAChC,IAAIw/F,GAAcngJ,KAAKihJ,cAAet/I,EAAOg/C,KAIrCqgG,0BAAV,SAAyBr/I,EAAcC,GAKtC,OAHmB,OADnBA,EAAUA,GAAW,IACTmhF,MACXnhF,EAAQmhF,KAAM,GAERnhF,GAGRpC,sBAAIwhJ,wBAAJ,WACC,OAAOhhJ,KAAK+gD,oCAGHigG,oBAAV,WACC,MAAO,aAGRA,kBAAA,WACChhJ,KAAK+gD,GAAMhJ,KAAM/3C,OAGlBghJ,kBAAA,WACChhJ,KAAK+gD,GAAMsB,YA5CHogE,mBEFT,WAAa7gH,GAAb,MACCkF,YAAOlF,gBAEPqF,EAAK0J,GAAImH,EAAiB0B,MAAM,WAC3BvS,EAAK0Q,gBACR1Q,EAAK2uB,gBAoBT,OA1BU91B,OAWCohJ,qBAAV,WACClhJ,KAAK4X,KAAM,SAAU5X,OAGtBkhJ,sBAAA,SAAWtrI,GAKV,OAJI5V,KAAK2X,gBAAkB3X,KAAKijB,aAAetN,EAAkBggB,cAAe/f,IAC/E5V,KAAK41B,WAGC9uB,YAAM+uB,oBAAWjgB,IAGfsrI,oBAAV,WACC,MAAO,wBAxBC/rH,kBCDV,4DAkGA,OA/FUr1B,OAICqhJ,iBAAV,SAAgBv/I,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAGZ,IAAMD,EAAQ3B,KAAK2B,MACb2lD,EAAStnD,KAAKunD,SAAU5lD,EAAOC,GACrC5B,KAAKwnD,GAAUF,EACfA,EAAO32C,GAAI,UAAU,WACpB1J,EAAKk7C,YAENniD,KAAKwgB,SAAU8mC,GAGf,IAAM9vC,EAAOxX,KAAKynD,OAAQ9lD,EAAOC,GACjC5B,KAAK0nD,GAAQlwC,EACbxX,KAAKwgB,SAAUhJ,GAGXxX,KAAKyiB,WACRziB,KAAK4nD,cAEL5nD,KAAK6nD,iBAIGs5F,qBAAV,SAAoBx/I,EAAcC,GACjC,OAAIA,GAAWA,EAAQ0lD,OAClB1lD,EAAQ0lD,kBAAkB3vB,gBACtB/1B,EAAQ0lD,OAERtnD,KAAK8nD,UAAWnmD,EAAOC,EAAQ0lD,QAGjCtnD,KAAK8nD,UAAWnmD,IAGdw/I,sBAAV,SAAqBx/I,EAAcC,GAClC,OAAO,IAAIs/I,GAAmBt/I,IAGrBu/I,mBAAV,SAAkBx/I,EAAeC,GAChC,OAAOA,EAAQ4V,MAGhB2pI,iBAAA,WACCnhJ,KAAK+2B,WAAW,IAGjBoqH,kBAAA,WACCnhJ,KAAK+2B,WAAW,IAGjBoqH,mBAAA,WACCnhJ,KAAK+2B,WAAa/2B,KAAKyiB,aAGd0+H,wBAAV,WACC,IAAM3pI,EAAOxX,KAAK0nD,GACdlwC,aAAgBmJ,EACnBnJ,EAAKsnC,OAELtnC,EAAK7I,SAAU,GAIPwyI,0BAAV,WACC,IAAM3pI,EAAOxX,KAAK0nD,GACdlwC,aAAgBmJ,EACnBnJ,EAAKqnC,OAELrnC,EAAK7I,SAAU,GAIPwyI,0BAAV,SAAyBp9H,EAAsBE,GAC9Cnd,YAAMod,wBAAeH,EAAUE,GAE3BzU,EAAYiT,SAAUsB,GACnBvU,EAAYiT,SAAUwB,IAC3BjkB,KAAK4nD,cAGFp4C,EAAYiT,SAAUwB,IACzBjkB,KAAK6nD,iBAKEs5F,oBAAV,WACC,MAAO,kBA7FCl6F,mBCdV,4DAOA,OAJUnnD,OACCshJ,wBAAV,SAAuBx/I,GACtB,OAAO,IAAIi0H,GAAej0H,OAFlBylH,kBCJT,WAAag6B,gBAAAA,OACZrhJ,KAAKshJ,GAAYD,EAuInB,OApICE,wBAAA,WACC,OAAOvhJ,KAAKshJ,IAcbC,2BAAA,SAAgBC,EAAmBC,GAClC,IAAMC,EAAIH,EAAuBI,mBAGjC,OAFAF,EAAOr7I,EAAIo7I,EAAOp7I,EAAIs7I,EAAI,IAC1BD,EAAOp7I,EAAIsD,KAAKsjC,IAAKtjC,KAAKi4I,KAAO,GAAKJ,EAAOn7I,GAAMsD,KAAK8nD,GAAK,MAAUiwF,EAAI/3I,KAAK8nD,GACzEgwF,GASRF,2BAAA,SAAgBE,EAAmBD,GAClC,IAAME,EAAIH,EAAuBI,mBAGjC,OAFAH,EAAOp7I,EAAIq7I,EAAOr7I,EAAIs7I,EAAI,IAC1BF,EAAOn7I,EAAsD,IAAlDsD,KAAKk4I,KAAMl4I,KAAKm4I,IAAKL,EAAOp7I,EAAIsD,KAAK8nD,GAAKiwF,IAAc/3I,KAAK8nD,GAAK,GACtE+vF,GAQRD,2BAAA,SAAgB9qG,EAAmBsrG,EAAYV,EAAkBI,GAChE,IAAMO,EAAIhiJ,KAAKy4C,aAAcspG,EAAIV,GAC3BK,EAAIH,EAAuBI,mBAGjC,OAFAF,EAAOr7I,EAAIqwC,EAAOrwC,EAAI47I,EAAIN,EAC1BD,EAAOp7I,EAAIq7I,EAAIjrG,EAAOpwC,EAAI27I,EACnBP,GAQRF,2BAAA,SAAgBE,EAAmBM,EAAYV,EAAkB5qG,GAChE,IAAMurG,EAAIhiJ,KAAKy4C,aAAcspG,EAAIV,GAC3BK,EAAIH,EAAuBI,mBAGjC,OAFAlrG,EAAOrwC,GAAMq7I,EAAOr7I,EAAIs7I,GAAMM,EAC9BvrG,EAAOpwC,GAAMq7I,EAAID,EAAOp7I,GAAM27I,EACvBvrG,GAQR8qG,yBAAA,SAAc9qG,EAAmB4qG,EAAkBvO,GAGlD,OAFAA,EAAK1sI,EAAIuD,KAAKwgB,KAAMssB,EAAOrwC,EAAIi7I,GAAa,EAC5CvO,EAAKzsI,EAAIsD,KAAKwgB,KAAMssB,EAAOpwC,EAAIg7I,GAAa,EACrCvO,GAORyO,yBAAA,SAAcE,EAAmBM,EAAYjP,GAC5C,IAAM4O,EAAIH,EAAuBI,mBAC3BM,EAAI,GAAKF,EAGf,OAFAjP,EAAK1sI,EAAIuD,KAAKwgB,KAAM,IAAQs3H,EAAOr7I,EAAIs7I,EAAI,GAAMO,GAAM,EACvDnP,EAAKzsI,EAAIsD,KAAKwgB,KAAM,IAAQ,EAAIs3H,EAAOp7I,EAAIq7I,GAAMO,GAAM,EAChDnP,GAGRyO,yBAAA,SAAcC,EAAmBO,EAAYjP,GAC5C,OAAO9yI,KAAKkiJ,aAAcliJ,KAAKmiJ,eAAgBX,EAAQ1O,GAAQiP,EAAIjP,IAGpEyO,2BAAA,SAAgBC,EAAmBO,EAAYV,EAAkB5qG,GAChE,OAAOz2C,KAAKoiJ,eAAgBpiJ,KAAKmiJ,eAAgBX,EAAQ/qG,GAAUsrG,EAAIV,EAAU5qG,IAGlF8qG,2BAAA,SAAgB9qG,EAAmBsrG,EAAYV,EAAkBG,GAChE,OAAOxhJ,KAAKqiJ,eAAgBriJ,KAAKsiJ,eAAgB7rG,EAAQsrG,EAAIV,EAAUG,GAAUA,IAMlFD,yBAAA,SAAczO,EAAiBuO,EAAkB5qG,GAGhD,OAFAA,EAAOrwC,EAAI0sI,EAAK1sI,EAAIi7I,EACpB5qG,EAAOpwC,EAAIysI,EAAKzsI,EAAIg7I,EACb5qG,GAOR8qG,yBAAA,SAAczO,EAAiBiP,EAAYN,GAC1C,IAAMO,EAAIhiJ,KAAKuiJ,kBAAmBR,GAC5BL,EAAIH,EAAuBI,mBAGjC,OAFAF,EAAOr7I,EAAI0sI,EAAK1sI,EAAI47I,EAAIN,EACxBD,EAAOp7I,EAAIq7I,EAAI5O,EAAKzsI,EAAI27I,EACjBP,GAGEF,8BAAV,SAA6BQ,GAC5B,OAAS,EAAIR,EAAuBI,oBAAyB,GAAKI,IAGzDR,yBAAV,SAAwBQ,EAAYV,GACnC,OAAS,EAAIE,EAAuBI,oBAAyBN,GAAYU,IAG1ER,wBAAA,SAAaQ,GACZ,OAAQ,GAAKA,GAGdR,uBAAA,SAAYQ,EAAY7tF,EAAYC,GACnC,OAAQD,GAAM6tF,GAAM5tF,GAzIJotF,qBAAuC,QAAV53I,KAAK8nD,sBCApD,cASA,OANCjyD,sBAAWgjJ,iBAAX,WAIC,OAHqB,MAAjBxiJ,KAAKyiJ,KACRziJ,KAAKyiJ,GAAW,IAAIlB,IAEdvhJ,KAAKyiJ,uDCFb,WACCzhJ,EACAkzD,EAAYC,EACZkB,EAAYC,EACZh5C,GAEAtc,KAAKk0D,GAAKA,EACVl0D,KAAKm0D,GAAKA,EACV,IAAM04D,EAAS,IAAIr4F,SAAQnI,UAAQC,OAClCugG,EAAe7rH,OAASA,EACzB6rH,EAAOl4G,SAASrO,IAAK+uD,EAAIC,GACzBu3D,EAAOvwG,MAAMhW,IAAKgW,EAAOA,GACzBtc,KAAK0iJ,GAAU71B,EA6CjB,OA1CC81B,iBAAA,SAAMx1G,EAAay1G,GAClB,IAAMl8I,EAAU2lB,UAAQla,KAAMg7B,EAAK,CAAE/U,WAAY,IACjDp4B,KAAK0iJ,GAAQh8I,QAAUA,EACnBA,EAAQ6C,MACXq5I,IAEAl8I,EAAQiK,GAAI,SAAUiyI,IAIxBD,sBAAA,SAAWttF,EAAYC,EAAYh5C,GAClC,IAAMuwG,EAAS7sH,KAAK0iJ,GACpB71B,EAAOl4G,SAASrO,IAAK+uD,EAAIC,GACzBu3D,EAAOvwG,MAAMhW,IAAKgW,EAAOA,IAG1B9c,sBAAImjJ,0BAAJ,WACC,OAAO3iJ,KAAK0iJ,GAAQh8I,QAAQ6C,uCAG7Bo5I,mBAAA,SAAQl3I,GACP,IAAMohH,EAAS7sH,KAAK0iJ,GACpB71B,EAAOhmG,kBACPgmG,EAAOprH,OAAQgK,IAGhBk3I,oBAAA,WACC,IAAM91B,EAAS7sH,KAAK0iJ,GACdh8I,EAAUmmH,EAAOnmH,QACjB+lD,EAAW/lD,EAAQwxB,YAAYu0B,SACjC56B,EAAiC,KACjC46B,aAAoB3hB,YAAUC,mBAC7B0hB,EAASj8C,kBAAkB2rE,mBAC9BtqD,EAAQ46B,EAASj8C,QAGnB9J,EAAQihB,SAAS,GACjBklG,EAAOllG,UACHkK,IACHA,EAAMgH,IAAM,wBCvBd,WACC73B,EACA8gE,EACAigF,EACAnmG,EACAloC,EACAkvI,GAND,WAQC5iJ,KAAK6qD,GAAU7pD,EACfhB,KAAK6iJ,GAAW/gF,EAChB9hE,KAAK8iJ,GAAYF,EACjB5iJ,KAAK+iJ,IAAoB,EACzB/iJ,KAAKgjJ,IAAqB,EAC1BhjJ,KAAKijJ,GAAiB,WACrBh8I,EAAK27I,YAEN5iJ,KAAKkjJ,GAAMnB,EACX/hJ,KAAKmjJ,MAAQ37I,IACbxH,KAAKojJ,MAAQ57I,IACbxH,KAAKqjJ,MAAQ77I,IACbxH,KAAKsjJ,MAAQ97I,IACbxH,KAAKujJ,GAAS,IAAIllH,IAClBr+B,KAAKwjJ,GAAmB,SAAE1Q,GACzB7rI,EAAKw8I,WAAY3Q,IAElB9yI,KAAK0jJ,GAASl8I,IACdxH,KAAK2jJ,GAASn8I,IACdxH,KAAK4jJ,GAASp8I,IACdxH,KAAK6jJ,GAASr8I,IACdxH,KAAK8jJ,GAAmB,SAAEhR,EAAgBiR,EAAkBC,GAC3D/8I,EAAKg9I,WAAYnR,EAAMiR,EAAUC,IAElChkJ,KAAKkkJ,GAAoB,SAAEpR,GAC1B7rI,EAAKk9I,YAAarR,IAEnB9yI,KAAKokJ,GAA6B,SAAEtR,GAC7BA,EAAKuR,SACVp9I,EAAKq9I,IAAY,IAGnBtkJ,KAAKukJ,GAAa7wI,EAAW8wI,YAAazC,GAC1C/hJ,KAAKykJ,GAAqB,EAAIzkJ,KAAKukJ,GACnCvkJ,KAAK0kJ,GAAa9oG,EAAQt/B,MAAQtc,KAAKykJ,GACvCzkJ,KAAKshJ,GAAY5tI,EAAWixI,cAAgB/oG,EAAQt/B,MACpDtc,KAAK67C,GAAWD,EAChB57C,KAAK4uI,GAAcl7H,EACnB1T,KAAKskJ,IAAY,EAiQnB,OA9PWM,oBAAV,SAAmB1wF,EAAYC,EAAYkB,EAAYC,EAAYh5C,GAClE,OAAO,IAAIqmI,GAAU3iJ,KAAK6qD,GAASqJ,EAAIC,EAAIkB,EAAIC,EAAIh5C,IAG1CsoI,uBAAV,SAAsB9R,GACrBA,EAAKrxI,OAAQzB,KAAK6kJ,KAGnBrlJ,sBAAIolJ,sBAAJ,WACC,OAAO5kJ,KAAKkjJ,oCAGb0B,mBAAA,SAAQn5I,GACPzL,KAAK6kJ,GAAYp5I,EACjBzL,KAAKujJ,GAAOrlH,QAASl+B,KAAKwjJ,KAG3BoB,iBAAA,SAAMhT,EAAcC,EAAcC,EAAcC,GAC/C,IAAM+S,EAAU9kJ,KAAKmjJ,MACf4B,EAAU/kJ,KAAKojJ,MACf4B,EAAUhlJ,KAAKqjJ,MACf4B,EAAUjlJ,KAAKsjJ,MACrB,GAAIwB,IAAYlT,GAAQmT,IAAYlT,GAAQmT,IAAYlT,GAAQmT,IAAYlT,EAAO,CAClF/xI,KAAKmjJ,MAAQvR,EACb5xI,KAAKojJ,MAAQvR,EACb7xI,KAAKqjJ,MAAQvR,EACb9xI,KAAKsjJ,MAAQvR,EAEb,IAAMgQ,EAAK/hJ,KAAKkjJ,GACVxvI,EAAa1T,KAAK4uI,GAElBznH,EAAOy9H,EAAcM,KAC3B/9H,EAAK7gB,IAAKsrI,EAAMC,GAChBn+H,EAAWyxI,aAAch+H,EAAM46H,EAAI56H,GACnC,IAAM2+C,EAAM3+C,EAAK/gB,EACX2/D,EAAM5+C,EAAK9gB,EAEjB8gB,EAAK7gB,IAAKwrI,EAAMC,GAChBr+H,EAAWyxI,aAAch+H,EAAM46H,EAAI56H,GACnC,IAAMi+H,EAAMj+H,EAAK/gB,EACXi/I,EAAMl+H,EAAK9gB,EAEXi/I,EAAYtlJ,KAAKukJ,GACnBgB,EAAQ57I,KAAKG,IAAK,EAAGg8D,GACrB0/E,EAAQ77I,KAAKC,IAAK07I,EAAY,EAAGF,GACjCK,EAAQ97I,KAAKG,IAAK,EAAGi8D,GACrB2/E,EAAQ/7I,KAAKC,IAAK07I,EAAY,EAAGD,GAC/BM,EAASJ,EAAQvlJ,KAAK0jJ,GACtBkC,EAASJ,EAAQxlJ,KAAK2jJ,GACtBkC,EAASJ,EAAQzlJ,KAAK4jJ,GACtBkC,EAASJ,EAAQ1lJ,KAAK6jJ,GAEtBkC,EAAiBJ,GAAWA,GAAUA,EAAS,GAAK,EAAIA,EACxDK,EAAiBJ,GAAWA,GAAU,EAAIA,GAAUA,GAAU,EAC9DK,EAAiBJ,GAAWA,GAAUA,EAAS,GAAK,EAAIA,EACxDK,EAAiBJ,GAAWA,GAAU,EAAIA,GAAUA,GAAU,EACpE,GAAIC,GAAkBC,GAAkBC,GAAkBC,EAAiB,CACtEH,EACH/lJ,KAAK0jJ,GAAS6B,EAEdA,EAAQvlJ,KAAK0jJ,GAEVsC,EACHhmJ,KAAK2jJ,GAAS6B,EAEdA,EAAQxlJ,KAAK2jJ,GAEVsC,EACHjmJ,KAAK4jJ,GAAS6B,EAEdA,EAAQzlJ,KAAK4jJ,GAEVsC,EACHlmJ,KAAK6jJ,GAAS6B,EAEdA,EAAQ1lJ,KAAK6jJ,GAGA7jJ,KAAKujJ,GACbrlH,QAASl+B,KAAK8jJ,IAEpB,IAAMqC,EAAOZ,EAAQC,GAAU,EACzBY,EAAOX,EAAQC,GAAU,EACzBW,EAAM18I,KAAKG,IAAKq8I,EAAMZ,EAAOC,EAAQW,GACrCG,EAAM38I,KAAKG,IAAKs8I,EAAMX,EAAOC,EAAQU,GACrCG,EAAK58I,KAAKG,IAAKu8I,EAAKC,GAE1BtmJ,KAAKwmJ,SAAUr/H,GACf,IAAMqD,EAAUrD,EAAK/gB,EACfu3B,EAAUxW,EAAK9gB,EAErBrG,KAAK+iJ,IAAoB,EACzB/iJ,KAAKgjJ,IAAqB,EAC1BhjJ,KAAKymJ,SAAU1E,EAAIoE,EAAKC,EAAK57H,EAASmT,EAASxW,GAC/C,IAAK,IAAIu/H,EAAK,EAAGA,GAAMH,IAAMG,EAAK,CACjC,IAAMC,EAAMR,EAAMO,EACdnB,GAASoB,GACZ3mJ,KAAK4mJ,WAAY7E,EAAI4E,EAAKP,EAAKM,EAAIjB,EAAOC,EAAOl7H,EAASmT,EAASxW,GAEpE,IAAM0/H,EAAMV,EAAMO,EACdG,GAAOrB,GACVxlJ,KAAK4mJ,WAAY7E,EAAI8E,EAAKT,EAAKM,EAAIjB,EAAOC,EAAOl7H,EAASmT,EAASxW,GAEpE,IAAM2/H,EAAMV,EAAMM,EACdjB,GAASqB,GACZ9mJ,KAAK+mJ,WAAYhF,EAAIoE,EAAKO,EAAK,EAAGnB,EAAOC,EAAOsB,EAAKt8H,EAASmT,EAASxW,GAExE,IAAM6/H,EAAMZ,EAAMM,EACdM,GAAOtB,GACV1lJ,KAAK+mJ,WAAYhF,EAAIoE,EAAKO,EAAK,EAAGnB,EAAOC,EAAOwB,EAAKx8H,EAASmT,EAASxW,GAGzEnnB,KAAKgjJ,IAAqB,EACtBhjJ,KAAK+iJ,IACR/iJ,KAAK4iJ,cAMCgC,uBAAV,SACC7C,EACAoE,EAAaE,EAAad,EAAeC,EACzCrxF,EACA8sB,EAAYC,EACZ/5D,GAEAnnB,KAAKymJ,SAAU1E,EAAIoE,EAAKhyF,EAAI8sB,EAAIC,EAAI/5D,GACpC,IAAK,IAAI5lB,EAAI,EAAGA,GAAK8kJ,IAAO9kJ,EAAI,CAC/B,IAAMolJ,EAAMR,EAAM5kJ,EACdgkJ,GAASoB,GACZ3mJ,KAAKymJ,SAAU1E,EAAI4E,EAAKxyF,EAAI8sB,EAAIC,EAAI/5D,GAErC,IAAM0/H,EAAMV,EAAM5kJ,EACdslJ,GAAOrB,GACVxlJ,KAAKymJ,SAAU1E,EAAI8E,EAAK1yF,EAAI8sB,EAAIC,EAAI/5D,KAK7By9H,uBAAV,SACC7C,EAAY7tF,EACZkyF,EAAaE,EAAab,EAAeC,EACzCzkE,EAAYC,EACZ/5D,GAEAnnB,KAAKymJ,SAAU1E,EAAI7tF,EAAIkyF,EAAKnlE,EAAIC,EAAI/5D,GACpC,IAAK,IAAI5lB,EAAI,EAAGA,GAAK+kJ,IAAO/kJ,EAAI,CAC/B,IAAMulJ,EAAMV,EAAM7kJ,EACdkkJ,GAASqB,GACZ9mJ,KAAKymJ,SAAU1E,EAAI7tF,EAAI4yF,EAAK7lE,EAAIC,EAAI/5D,GAErC,IAAM6/H,EAAMZ,EAAM7kJ,EACdylJ,GAAOtB,GACV1lJ,KAAKymJ,SAAU1E,EAAI7tF,EAAI8yF,EAAK/lE,EAAIC,EAAI/5D,KAK7By9H,qBAAV,SAAoB7C,EAAY7tF,EAAYC,EAAY8sB,EAAYC,EAAY/5D,GAC/E,IACM48H,EADa/jJ,KAAK4uI,GACIqY,WAAYlF,EAAI7tF,EAAIC,GAC1C6vF,EAAQhkJ,KAAKujJ,GACfzQ,EAAOkR,EAAMloI,IAAKioI,GACV,MAARjR,IACH9yI,KAAKknJ,eAAgBhzF,EAAIC,EAAI8sB,EAAIC,EAAI/5D,GACrC2rH,EAAO9yI,KAAKmnJ,QAASjzF,EAAIC,EAAIhtC,EAAK/gB,EAAG+gB,EAAK9gB,EAAGrG,KAAK0kJ,IAClDV,EAAM19I,IAAKy9I,EAAUjR,GACrBA,EAAK3nG,KAAMnrC,KAAK6iJ,GAAUd,EAAI7tF,EAAIC,GAAMn0D,KAAKijJ,IAC7CjjJ,KAAKskJ,IAAY,IAITM,2BAAV,SAA0B1wF,EAAYC,EAAY8sB,EAAYC,EAAY1+E,GACzE,IAAM6+I,EAAWrhJ,KAAKshJ,GAChB8F,EAAoBpnJ,KAAKykJ,GAI/B,OAHAjiJ,EAAO8D,IAAK4tD,EAAIC,GAChBn0D,KAAK4uI,GAAYyY,aAAc7kJ,EAAQ6+I,EAAU7+I,GACjDA,EAAO8D,IAAK9D,EAAO4D,EAAIghJ,EAAoBnmE,EAAIz+E,EAAO6D,EAAI+gJ,EAAoBlmE,GACvE1+E,GAGEoiJ,qBAAV,SAAoBpiJ,GACnB,IAAMxB,EAAShB,KAAK6qD,GACdjP,EAAU57C,KAAK67C,GACfwlG,EAAWrhJ,KAAKshJ,GAKtB,OAJA9+I,EAAO8D,KACLs1C,EAAQx1C,EAAIi7I,EAA0B,GAAfrgJ,EAAOkC,OAC9B04C,EAAQv1C,EAAIg7I,EAA2B,GAAhBrgJ,EAAO2F,QAEzBnE,GAGEoiJ,uBAAV,SAAsB9R,EAAgBiR,EAAkBC,GACvD,IAAM9vF,EAAK4+E,EAAK5+E,GACVC,EAAK2+E,EAAK3+E,IACZD,EAAKl0D,KAAK0jJ,IAAU1jJ,KAAK2jJ,GAASzvF,GAAMC,EAAKn0D,KAAK4jJ,IAAU5jJ,KAAK6jJ,GAAS1vF,KAC7E6vF,EAAM7S,OAAQ4S,GACdjR,EAAKnrH,YAIPi9H,oBAAA,WACC,IAAMZ,EAAQhkJ,KAAKujJ,GACnBS,EAAM9lH,QAASl+B,KAAKkkJ,IACpBF,EAAMzmI,SAGGqnI,wBAAV,SAAuB9R,GACtBA,EAAKnrH,WAGIi9H,+BAAV,WACC5kJ,KAAKskJ,IAAY,EACjBtkJ,KAAKujJ,GAAOrlH,QAASl+B,KAAKokJ,KAGjBQ,qBAAV,WACK5kJ,KAAKgjJ,GACRhjJ,KAAK8iJ,KAEL9iJ,KAAK+iJ,IAAoB,GAI3BvjJ,sBAAIolJ,0BAAJ,WAIC,OAHM5kJ,KAAKskJ,IACVtkJ,KAAKsnJ,qBAECtnJ,KAAKskJ,oCAGb9kJ,sBAAIolJ,2BAAJ,WACC,OAAO5kJ,KAAK67C,QAGb,SAAaD,GAAb,WACOloC,EAAa1T,KAAK4uI,GAClB2Y,EAAY3rG,EAAQt/B,MAAQtc,KAAKykJ,GACjCpD,EAAW3tI,EAAWixI,cAAgB/oG,EAAQt/B,MACpDtc,KAAK0kJ,GAAa6C,EAClBvnJ,KAAKshJ,GAAYD,EACjBrhJ,KAAK67C,GAAWD,EAEhB,IAAMz0B,EAAOy9H,EAAcM,KAC3BllJ,KAAKwmJ,SAAUr/H,GACf,IAAMqD,EAAUrD,EAAK/gB,EACfu3B,EAAUxW,EAAK9gB,EAErBrG,KAAKujJ,GAAOrlH,SAAQ,SAAE40G,GACrB7rI,EAAKigJ,eAAgBpU,EAAK5+E,GAAI4+E,EAAK3+E,GAAI3pC,EAASmT,EAASxW,GACzD2rH,EAAK72H,UAAWkL,EAAK/gB,EAAG+gB,EAAK9gB,EAAGkhJ,uCA3UjB3C,OAAc,IAAIh9H,4BCqBnC,WAAahmB,GAAb,MACCkF,mBACM4xB,EAASzxB,EAAKoyB,GAAUz3B,EAAQ82B,OACtCzxB,EAAK47I,GAAWjhJ,EAAQkgE,QACxB,IAAM0lF,EAAgBvgJ,EAAK40C,GAAWj6C,EAAQg6C,QACxCloC,EAAazM,EAAK2nI,GAAchtI,EAAQ8R,WAC9CzM,EAAKwgJ,GAAmBxgJ,EAAKygJ,UAAWhvH,EAAQ8uH,EAAe9zI,GAC/DzM,EAAK0gJ,GAAKngJ,IACVP,EAAKi8I,GAAM17I,IACXP,EAAK2gJ,GAAQhmJ,EAAQimJ,MAAMj+I,IAC3B3C,EAAK6gJ,GAAQlmJ,EAAQimJ,MAAM/9I,IAC3B7C,EAAK8gJ,GAAU,GACf9gJ,EAAKg8I,GAAiB,WACrBh8I,EAAK27I,YAEN37I,EAAK+gJ,GAAY,WAChB/gJ,EAAKghJ,QAAmB1lJ,EACxB0E,EAAK87E,OAEN97E,EAAKihJ,GAAetmJ,EAAQimJ,MAAMM,SAClC,IAAMC,EAAoBnhJ,EAAKohJ,GAAqB,WACnDphJ,EAAKqhJ,uBAEN5vH,EAAO/nB,GAAI,QAASy3I,GACpB1vH,EAAO/nB,GAAI,OAAQy3I,GACnB1vH,EAAOtrB,iBAAkBnG,GAAM,KAgQjC,OA5SyCnH,OA+CxCN,sBAAI+oJ,8BAAJ,WACC,OAAOvoJ,KAAK4uI,oCAGH2Z,yBAAV,WAC8B,MAAzBvoJ,KAAKioJ,KACRjoJ,KAAKioJ,GAAmBhtI,OAAOC,WAAYlb,KAAKgoJ,GAAWhoJ,KAAKkoJ,MAIxDK,sBAAV,SAAqB7vH,EAAekjB,EAA0BloC,GAC7D,IAAMyT,EAAOohI,EAAoBC,YAC3BnH,EAAW3tI,EAAWixI,cAE5Bx9H,EAAK7gB,IAAKs1C,EAAQzpC,KAAKs/H,IAAK71F,EAAQzpC,KAAKu/H,KACzCh+H,EAAW+0I,eAAgBthI,EAAM,EAAGk6H,EAAUl6H,GAC9C,IAAM7e,EAAK6e,EAAK/gB,EACVoC,EAAK2e,EAAK9gB,EAEhB8gB,EAAK7gB,IAAKs1C,EAAQkc,GAAG25E,IAAK71F,EAAQkc,GAAG45E,KACrCh+H,EAAW+0I,eAAgBthI,EAAM,EAAGk6H,EAAUl6H,GAC9C,IAAM5e,EAAK4e,EAAK/gB,EACVqC,EAAK0e,EAAK9gB,EAEV6S,EAAKvP,KAAKwP,IAAI5Q,EAAKD,GACnB8Q,EAAKzP,KAAKwP,IAAI1Q,EAAKD,GAErB8T,EAAQ,EAYZ,OAba,KAEFpD,EAEToD,EAJW,KAGDlD,EACFzP,KAAKG,IAAK4uB,EAAOx1B,MAAQgW,EAAIwf,EAAO/xB,OAASyS,GAE7Csf,EAAOx1B,MAAQgW,EANZ,KASDE,IACVkD,EAAQoc,EAAO/xB,OAASyS,GAGnB,CACNkD,QACAlW,EAAG,IAAOmC,EAAKD,GAAM+4I,EACrBh7I,EAAG,IAAOoC,EAAKD,GAAM64I,IAIvB7hJ,sBAAI+oJ,2BAAJ,WACC,OAAOvoJ,KAAK67C,QAGb,SAAaD,GACZ,IAAM8sG,EAAa1oJ,KAAKynJ,GAClBkB,EAAa3oJ,KAAK0nJ,UAAW1nJ,KAAKq5B,GAASuiB,EAAS57C,KAAK4uI,IAE/D,GADkB,KAELjlI,KAAKwP,IAAIuvI,EAAWpsI,MAAQqsI,EAAWrsI,QAFlC,KAGL3S,KAAKwP,IAAIuvI,EAAWtiJ,EAAIuiJ,EAAWviJ,IAH9B,KAILuD,KAAKwP,IAAIuvI,EAAWriJ,EAAIsiJ,EAAWtiJ,GAC9C,CACDrG,KAAKynJ,GAAmBkB,EAGxB,IADA,IAAMC,EAAS5oJ,KAAK+nJ,GACXxmJ,EAAI,EAAGC,EAAOonJ,EAAOloJ,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMsmJ,EAAQe,EAAQrnJ,GAClBsmJ,IACHA,EAAMjsG,QAAU+sG,GAGlBtoJ,EAAciB,OAAQtB,KAAKq5B,IAE3Br5B,KAAKqoJ,uCAIGE,qBAAV,SAAoBxG,GACnB,OAAO,IAAI6C,GACV5kJ,KAAKq5B,GACLr5B,KAAK6iJ,GACLd,EACA/hJ,KAAKynJ,GACLznJ,KAAK4uI,GACL5uI,KAAKijJ,KAIPsF,mBAAA,SAAQ98I,GAGP,IAFA,IAAMs2I,EAAK/hJ,KAAKkjJ,GACV0F,EAAS5oJ,KAAK+nJ,GACXxmJ,EAAI,EAAGA,EAAIwgJ,IAAMxgJ,EAEZ,OADPsmJ,EAAQe,EAAQrnJ,KAErBsmJ,EAAMpmJ,OAAQgK,GAIhB,IAASlK,EAAIqnJ,EAAOloJ,OAAS,EAAGqhJ,EAAKxgJ,IAAKA,EAAI,CAC7C,IAAMsmJ,EACO,OADPA,EAAQe,EAAQrnJ,KAErBsmJ,EAAMpmJ,OAAQgK,GAIhB,IAAMo9I,EAAUD,EAAQ7G,GACT,MAAX8G,GACHA,EAAQpnJ,OAAQgK,IAIR88I,oBAAV,SAAmBxG,GAClB,OAAOp4I,KAAKC,IAAK5J,KAAK8nJ,GAAOn+I,KAAKG,IAAK9J,KAAK4nJ,GAAOj+I,KAAK6/B,MAAOu4G,MAGhEwG,4BAAA,aAIUA,gBAAV,SAAejsI,GACd,OAAO3S,KAAKsjC,IAAKjtC,KAAKynJ,GAAiBnrI,MAAQA,GAAU3S,KAAKsjC,IAAK,IAGpEs7G,iBAAA,SAAMjsI,EAAes1H,EAAcC,EAAcC,EAAcC,GAC9D,IAAM6W,EAAS5oJ,KAAK+nJ,GACdz+G,EAAItpC,KAAK8oJ,IAAKxsI,GACpB,GAAItc,KAAK2nJ,KAAOr+G,EAAI,CACnBtpC,KAAK2nJ,GAAKr+G,EAEV,IAAMy4G,EAAK/hJ,KAAK+oJ,QAASz/G,GACzB,GAAItpC,KAAKkjJ,KAAQnB,EAAK,CACrB/hJ,KAAKkjJ,GAAMnB,EAEX,IAAIiH,EAAWJ,EAAQ7G,GACP,MAAZiH,IACHA,EAAWhpJ,KAAKgpJ,SAAUjH,GAC1B6G,EAAQ7G,GAAOiH,IAKlB,IAAMnB,EAAQe,EAAQ5oJ,KAAKkjJ,IAK3B,OAJa,MAAT2E,GACHA,EAAM/sI,KAAM82H,EAAMC,EAAMC,EAAMC,GAGxB/xI,MAGRuoJ,gBAAA,WACC,IAAM7vH,EAAS14B,KAAKq5B,GACpB,GAAc,MAAVX,EAAiB,CACpB,IAAMqkC,EAAYrkC,EAAO13B,OACzB,GAAiB,MAAb+7D,EAAoB,CACvB,IAAMzgD,EAAQoc,EAAOpc,MACfwsE,EAASxsE,EAAMlW,EACf2iF,EAASzsE,EAAMjW,EACfD,EAAIsyB,EAAOtyB,EACXC,EAAIqyB,EAAOryB,EACXqN,EAAa1T,KAAK4uI,GAClBhzF,EAAU57C,KAAKynJ,GACfpG,EAAW3tI,EAAWixI,cAAgB/oG,EAAQt/B,MAC9ChU,EAAKszC,EAAQx1C,EAAIi7I,GAAYj7I,EAAI0iF,EAAS,GAAMpwD,EAAOx1B,OACvDqF,EAAKD,EAAKy0D,EAAU75D,MAAQ4lF,EAC5BtgF,EAAKozC,EAAQv1C,EAAIg7I,GAAYh7I,EAAI0iF,EAAS,GAAMrwD,EAAO/xB,QACvD8B,EAAKD,EAAKu0D,EAAUp2D,OAASoiF,EAE7B5hE,EAAOohI,EAAoBC,YACjCrhI,EAAK7gB,IAAKgC,EAAIE,GACdkL,EAAWu1I,eAAgB9hI,EAAM,EAAGk6H,EAAUl6H,GAC9C,IAAMyqH,EAAOzqH,EAAK/gB,EACZyrI,EAAO1qH,EAAK9gB,EAElB8gB,EAAK7gB,IAAKiC,EAAIE,GACdiL,EAAWu1I,eAAgB9hI,EAAM,EAAGk6H,EAAUl6H,GAC9C,IAAM2qH,EAAO3qH,EAAK/gB,EACZ2rI,EAAO5qH,EAAK9gB,EAElBrG,KAAK8a,KAAMguE,EAAQ8oD,EAAMC,EAAMC,EAAMC,IAIvC,OAAO/xI,MAGEuoJ,gCAAV,SAA+BxG,EAAY6G,GAC1C,IAAK,IAAIrnJ,EAAI,EAAGA,EAAIwgJ,IAAMxgJ,EAAI,CAC7B,IAAMsmJ,EAAQe,EAAQrnJ,GAClBsmJ,IACHA,EAAMlgI,UACNihI,EAAQrnJ,QAAMgB,KAKPgmJ,+BAAV,SAA8BxG,EAAY6G,GACzC,IAAK,IAAIrnJ,EAAIwgJ,EAAK,EAAGvgJ,EAAOonJ,EAAOloJ,OAAQa,EAAIC,IAAQD,EAAI,CAC1D,IAAMsmJ,EAAQe,EAAQrnJ,GAClBsmJ,IACHA,EAAMlgI,UACNihI,EAAQrnJ,QAAMgB,KAKPgmJ,oBAAV,WACC,IAAMxG,EAAK/hJ,KAAKkjJ,GACV0F,EAAS5oJ,KAAK+nJ,GACdc,EAAUD,EAAQ7G,GACxB,GAAI8G,GAAWA,EAAQxE,OAGtB,OAFArkJ,KAAKkpJ,oBAAqBnH,EAAI6G,QAC9B5oJ,KAAKmpJ,mBAAoBpH,EAAI6G,GAI9B,IAAK,IAAIrnJ,EAAIwgJ,EAAK,EAAGvgJ,EAAOonJ,EAAOloJ,OAAQa,EAAIC,IAAQD,EAEtD,IADMsmJ,EAAQe,EAAQrnJ,KACTsmJ,EAAMxD,OAGlB,OAFArkJ,KAAKkpJ,oBAAqBnH,EAAI6G,QAC9B5oJ,KAAKmpJ,mBAAoB5nJ,EAAGqnJ,GAK9B,IAASrnJ,EAAIwgJ,EAAK,EAAG,GAAKxgJ,IAAKA,EAAI,CAClC,IAAMsmJ,EACN,IADMA,EAAQe,EAAQrnJ,KACTsmJ,EAAMxD,OAElB,YADArkJ,KAAKkpJ,oBAAqB3nJ,EAAGqnJ,KAMtBL,qBAAV,WACCvoJ,KAAK06B,UACLr6B,EAAciB,OAAQtB,KAAKq5B,KAG5BkvH,oBAAA,WAEC,IADA,IAAMK,EAAS5oJ,KAAK+nJ,GACXxmJ,EAAI,EAAGC,EAAOonJ,EAAOloJ,OAAQa,EAAIC,IAAQD,EAAI,CACrD,IAAMsmJ,EAAQe,EAAQrnJ,GAClBsmJ,IACHA,EAAMlgI,UACNihI,EAAQrnJ,QAAMgB,GAIhB,IAAMm2B,EAAS14B,KAAKq5B,GACd+uH,EAAoBpoJ,KAAKqoJ,GAK/B,OAJA3vH,EAAO9f,IAAK,QAASwvI,GACrB1vH,EAAO9f,IAAK,OAAQwvI,GACpB1vH,EAAOlT,iBAAkBxlB,MAAM,GAExBA,MAzSSuoJ,cAAqB,IAAI3gI,WADF0T,QAAMoU,cCWlC05G,GAA8C,SAAErH,EAAY7tF,EAAYC,GACpF,MAAO,mCAAmC4tF,MAAM7tF,MAAMC,wBAcvD,cA+BA,OA1BQk1F,iBAAP,SAAuBznJ,GACtB,IAAMimJ,EAAQjmJ,EAAQimJ,MACtB,OAAIA,EACI,CACNj+I,IAAoB,MAAbi+I,EAAMj+I,IAAci+I,EAAMj+I,IAAM5J,KAAKspJ,IAC5Cx/I,IAAoB,MAAb+9I,EAAM/9I,IAAc+9I,EAAM/9I,IAAM9J,KAAKupJ,IAC5CpB,SAA8B,MAAlBN,EAAMM,SAAmBN,EAAMM,SAAWnoJ,KAAKwpJ,UAGrD,CACN5/I,IAAK5J,KAAKspJ,IACVx/I,IAAK9J,KAAKupJ,IACVpB,SAAUnoJ,KAAKwpJ,WAKXH,OAAP,SAAaznJ,GACZ,OAAO,IAAI2mJ,GAAoB,CAC9B7vH,OAAQ92B,EAAQ82B,OAChBopC,QAASlgE,EAAQkgE,SAAWsnF,GAC5BxtG,QAASh6C,EAAQ82B,OAAOo6G,KAAKl3F,QAC7BloC,WAAY9R,EAAQ8R,YAAc8uI,GAAgBiH,QAClD5B,MAAO7nJ,KAAK0pJ,eAAgB9nJ,MA3BvBynJ,MAAc,EACdA,MAAc,GACdA,WAAmB,wBCxB3B,4DAuDA,OAnDUvpJ,OAGC6pJ,iBAAV,SAAgB/nJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK+gD,GAAQ/gD,KAAKihD,OAAQjhD,KAAK2B,MAAOC,GACtC5B,KAAK+gD,GAAMpwC,GAAI,UAAU,SAAE8d,EAAc/S,EAAwBilC,GAChE15C,EAAK2uB,SAAUnH,EAAO/S,EAAMilC,OAIpBgpG,mBAAV,SAAkBhoJ,EAAcC,GAC/B,IAAM++C,EAAO/+C,GAAWA,EAAQ++C,KAChC,OAAIA,aAAgBw/F,GACZx/F,EAEA,IAAIw/F,GAAOngJ,KAAKihJ,cAAet/I,EAAOg/C,KAIrCgpG,oBAAV,SAAmBhoJ,EAAcC,GAChC,OAAO,IAAIu+I,GAAcngJ,KAAKihJ,cAAet/I,EAAOC,KAG3C+nJ,0BAAV,SAAyBhoJ,EAAcC,GAKtC,OAHmB,OADnBA,EAAUA,GAAW,IACTmhF,MACXnhF,EAAQmhF,KAAM,GAERnhF,GAGR+nJ,kBAAA,WACC3pJ,KAAK+gD,GAAMsB,SAGZ7iD,sBAAImqJ,wBAAJ,WACC,OAAO3pJ,KAAK+gD,oCAGH4oG,qBAAV,SAAoBl7H,EAAc/S,EAAwBilC,GACzD,IAAM3/C,EAAShB,KAAKgB,OACN,MAAVA,GACHA,EAAO4W,KAAM,SAAU6W,EAAO/S,EAAMilC,IAI5BgpG,oBAAV,WACC,MAAO,mBAjDCtmC,mBCbT,WAAaviH,GAAb,MACCgG,0BACAG,EAAK2Z,YAAa,EAClB3Z,EAAKsX,aAAc,EAEnBtX,EAAK0J,GAAImH,EAAiB0B,MAAM,SAAE5D,GAC7BA,EAAE9U,SAAWmG,GAChBnG,EAAOuhD,WAGTp7C,EAAK0J,GAAImH,EAAiBgD,MAAM,SAAElF,GACjC,GAAIA,EAAE9U,SAAWmG,EAEhB,IADA,IAAMwZ,EAAW3f,EAAO2f,SACflf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiBipI,IACpBjpI,EAAMnB,WAAYmB,EAAM6wF,cAAe37F,EAAEhO,KAAKqR,eAUpD,OA3BqCnZ,OAwBpC8pJ,0BAAA,SAAe3wI,GACd,OAAO,MAzB4B4O,4BCgBrC,4DAsGA,OAlGU/nB,OAKC+pJ,iBAAV,SAAgBjoJ,GAAhB,WAKC,GAJAkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK0Q,SAAUpM,EAAW6yF,YAAY,GAEvB,MAAXv1F,GAAoC,MAAjBA,EAAQ81B,MAAgB,CAC9C,IAAMA,EAAQ91B,EAAQ81B,MACtBiW,GAAiBtmB,MAAOrnB,MAAM,WAC7BiH,EAAKo7C,WAKN,IAHA,IAAMynG,EAAyB,SAAE/lI,EAAsBE,EAAsBvI,GAC5EzU,EAAK8iJ,kBAAmBhmI,EAAUE,EAAUvI,IAEpCna,EAAI,EAAGC,EAAOk2B,EAAMh3B,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAMyoJ,EAAoBtyH,EAAOn2B,GAC3Bma,EAASsuI,aAA6BryH,gBAC3CqyH,EAAoB,IAAIL,GAAqBK,GAE1CtuI,aAAgBiuI,IACnBjuI,EAAK/K,GAAI,cAAem5I,GAEzB9pJ,KAAKwgB,SAAU9E,IAIjB1b,KAAK2Q,GAAI,UAAU,WAClB1J,EAAKo7C,WAGNriD,KAAK+7B,GAAW,KAChB/7B,KAAKiqJ,GAAW,IAAIL,GAAiB5pJ,MACrCA,KAAK23F,GAAW,IAAI17C,GAAar6C,IAGxBioJ,8BAAV,SAA6B9lI,EAAsBE,EAAsBvI,GACxE,IAAM2a,EAAUr2B,KAAK+7B,GACrB,GAAe,MAAX1F,EACG7mB,EAAYoT,WAAYmB,IACzBvU,EAAYkT,UAAWqB,IACtBrI,EAAKilC,KAAKc,aACb/lC,EAAKmnG,YAAY,GACjB7iH,KAAK+3C,KAAMr8B,SAKd,IAAMlM,EAAYoT,WAAYmB,IACzBvU,EAAY6S,UAAW0B,KAAgBvU,EAAY6S,UAAW4B,GAAa,CAC9E,IAAM08B,EAAOjlC,EAAKilC,KACdA,EAAKc,YACRd,EAAK5I,KAAMr8B,EAAM1b,KAAMq2B,KAO5BwzH,uBAAA,WACC,OAAO7pJ,KAAK+7B,IAGb8tH,yBAAA,WACC,OAAO7pJ,MAGR6pJ,iBAAA,SAAMnuI,GACL,IAAI2a,EAAUr2B,KAAK+7B,GACJ,MAAX1F,IACWr2B,KAAK23F,GAASE,KAAM73F,MAC5Be,MAAMyf,SAAUxgB,KAAKiqJ,KAC3B5zH,EAAUr2B,KAAK+7B,GAAW,IAAIikH,GAAchgJ,OACpCsW,KAAMoF,GACd2a,EAAQ7I,IAAKxtB,MACb0b,EAAKilC,KAAK5I,KAAMr8B,EAAM1b,KAAMq2B,KAI9BwzH,kBAAA,WACC,IAAMxzH,EAAUr2B,KAAK+7B,GACrB,GAAe,MAAX1F,EAAkB,CACrBr2B,KAAK+7B,GAAW,KAChB1F,EAAQ5I,OAAQztB,MAChB,IAAMkqJ,EAAUlqJ,KAAKiqJ,GACfvoI,EAASwoI,EAAQlpJ,OACnB0gB,GACHA,EAAO+S,YAAay1H,KAKbL,oBAAV,WACC,MAAO,eAhGCnmC,mBCXV,4DAgBA,OAbU5jH,OACCqqJ,iBAAV,SAAgBvoJ,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAK0Q,SAAUpM,EAAWkf,aAAa,IAG9B2mI,2BAAV,aAIUA,oBAAV,WACC,MAAO,wBAXCzmC,KbVV,SAAYq9B,GACXA,mBACAA,uBACAA,iCACAA,yBAJD,CAAYA,KAAAA,QAaZ,IcFYqJ,GdENC,GAAgB,WAAM,OAAA,kBAS3B,WAAa9Q,EAAoB33I,GAAjC,MACCkF,mBAEAG,EAAKuyI,GAAWD,EAChBtyI,EAAKqjJ,GAAQ,KACbrjJ,EAAKK,GAAW,EAChBL,EAAKwyI,GAAU73I,GAA2B,MAAhBA,EAAQ4tC,KAChC3sC,EAAcjB,EAAQ4tC,MAASuxG,GAAyBn/I,EAAQ4tC,MAAS5tC,EAAQ4tC,KAClFuxG,GAAwB0I,QAEzBxiJ,EAAKsjJ,GAAY3oJ,GAAWA,EAAQ4oJ,QAAYvjJ,EAAKwjJ,mBAGrD,IAAM95I,EAAK/O,GAAWA,EAAQ+O,GAC9B,GAAIA,EACH,IAAK,IAAMiO,KAAQjO,EAClB1J,EAAK0J,GAAIiO,EAAMjO,EAAIiO,aAqGvB,OA5HyC9e,OA4BxC4qJ,oBAAA,WACC1qJ,KAAKsH,GAAW,GAGjBojJ,mBAAA,WACK1qJ,KAAKsH,IACRtH,KAAKsH,GAAW,EAChBtH,KAAK0sB,GAAS1sB,KAAKw5I,MAIXkR,oBAAV,SAAmBhqI,GAClB,OAAOA,GAASA,EAAMigC,gBAAgBw/F,IAG7BuK,eAAV,SAAmB33F,GAElB,IADA,IAAMtyC,EAAWsyC,EAAKtyC,SACblf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACpBmf,aAAiB0U,GAChB1U,EAAM+B,YACTziB,KAAK2qJ,GAAMjqI,GAAO,GAIhBA,aAAiBmH,aACpB7nB,KAAK0sB,GAAShM,GAGX1gB,KAAK4qJ,QAASlqI,IACjB1gB,KAAK0sB,GAAShM,EAAMigC,QAKvB+pG,gBAAA,SAAKhvI,GACJ1b,KAAKsB,SACLtB,KAAK2qJ,GAAMjvI,GAAM,IAGlBgvI,gBAAA,SAAKhvI,GACJ1b,KAAKsB,SACLtB,KAAK2qJ,GAAMjvI,GAAM,IAGlBgvI,gBAAA,WAEC,OADA1qJ,KAAKsB,SACEtB,KAAKsqJ,IAGbI,iBAAA,WACC,OAAS1qJ,KAAKsqJ,GAAQ,EAAI,GAG3BI,oBAAA,WACC,OAAqB,MAAd1qJ,KAAKsqJ,IAGbI,mBAAA,SAAQhvI,GACP1b,KAAKsB,SACDtB,KAAKsqJ,KAAU5uI,GAClB1b,KAAK2qJ,GAAM,MAAM,IAInBD,kBAAA,WACC1qJ,KAAKsB,SACLtB,KAAK2qJ,GAAM,MAAM,IAGRD,6BAAV,WACC,OAAOL,IAGEK,eAAV,SAAgBhvI,EAAoB9D,GACnC,IAAMizI,EAAU7qJ,KAAKsqJ,GACf96G,EAAOxvC,KAAKy5I,GACdjqG,IAASuxG,GAAwB1iI,MAAQre,KAAKuqJ,GAAS7uI,IAAUmvI,IAAYnvI,IAChF1b,KAAK0Q,SAAUm6I,EAASr7G,GAAM,GAC9BxvC,KAAKsqJ,GAAQ5uI,EACb1b,KAAK0Q,SAAUgL,EAAM8zB,GAAM,GACvB53B,GACH5X,KAAK4X,KAAM,SAAU5X,QAKd0qJ,qBAAV,SAAoBhvI,EAAoB8zB,EAA+B/rB,GAClE/H,IACC8zB,IAASuxG,GAAwBrH,OACpCh+H,EAAKhL,SAAUpM,EAAWwL,OAAQ2T,GAElC/H,EAAKhL,SAAUpM,EAAWwL,OAASxL,EAAW4L,UAAWuT,QAxHpB6X,QAAMoU,6BeC/C,4DAsEA,OAjEU5vC,OAICgrJ,iBAAV,SAAgBlpJ,GACfkF,YAAMwZ,eAAM1e,GAEZ,IAAMy0B,EAAU,IAAI2pH,GAAchgJ,MAClCA,KAAK+7B,GAAW1F,EAChBA,EAAQ7I,IAAKxtB,MAEb,IAAM03B,EAAQ91B,GAAWA,EAAQ81B,MACjC,GAAa,MAATA,EAAgB,CACnB,IAAMH,KAAW31B,GAA6B,MAAlBA,EAAQ21B,SAAiB31B,EAAQ21B,OAC7Dv3B,KAAK2nD,SAAUjwB,EAAOH,GAGvB,IAAM/B,EAAY5zB,GAAWA,EAAQ4zB,UACrCx1B,KAAKy9I,GAAejoH,aAAqBk1H,GACxCl1H,EAAYx1B,KAAK09I,aAAcloH,IAGvBs1H,yBAAV,SAAwBlpJ,GACvB,OAAO,IAAI8oJ,GAAqB1qJ,KAAKw5I,GAAU53I,IAGtCkpJ,4BAAV,WACC,IAAMt1H,EAAYx1B,KAAKy9I,GACN,MAAbjoH,GACHA,EAAU7X,UAEX7W,YAAM0b,4BAGGsoI,qBAAV,SAAoBpzH,EAA4DH,GAC/EqxB,GAAYjB,SAAU3nD,KAAKu5I,QAAS7hH,EAAOH,IAGlCuzH,uBAAV,SAAsBlpJ,GACrB,OAAO,IAAIuoJ,GAAmBvoJ,IAG/BpC,sBAAIsrJ,6BAAJ,WACC,OAAO9qJ,KAAKy9I,oCAGbqN,uBAAA,WACC,OAAO9qJ,KAAK+7B,IAGb+uH,yBAAA,WACC,OAAO9qJ,MAGR8qJ,iBAAA,aAIAA,kBAAA,aAIUA,oBAAV,WACC,MAAO,iBA/DC3P,mBClBV,4DAKA,OAFUr7I,UAAA6gB,kBCHV,4DAKA,OAFU7gB,UAAA6gB,kBCHV,4DAKA,OAFU7gB,UAAA6gB,kBCHV,4DAKA,OAFU7gB,UAAA6gB,kBCYT,WAAa/e,UACZkF,YAAOlF,SAyFT,OA/FU9B,OASCirJ,iBAAV,SAAgBnpJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAKs1B,GAAS,KAEdt1B,KAAKgrJ,GAAmB,SAAEv8H,EAAc/N,GACvCzZ,EAAKgkJ,WAAYx8H,EAAO/N,GAAO,IAEhC1gB,KAAKkrJ,GAAiB,WACrBjkJ,EAAKkkJ,YAIS,MAAXvpJ,QAAqCW,IAAlBX,EAAQ6sB,QAC9BzuB,KAAKyuB,MAAQ7sB,EAAQ6sB,QAIbs8H,uBAAV,SAAsBryF,EAAwBh9C,EAA+B9D,GAC5E,GAAI5X,KAAKs1B,KAAWojC,EAAW,CAE9B,IAAMmtD,EAAW7lH,KAAKs1B,GAItB,GAHAt1B,KAAKs1B,GAASojC,EAGF,MAARh9C,EACH1b,KAAKgpB,KAAOtN,EAAKsN,MAAQ,OACnB,CACN,IAAMpnB,EAAU5B,KAAK2c,GACrB3c,KAAKgpB,KAASpnB,GAAWA,EAAQonB,MAAQpnB,EAAQonB,KAAKyF,OAAWzuB,KAAK2B,MAAM+sB,eAIzE9W,GACH5X,KAAK4X,KAAM,SAAU8gD,EAAUmtD,EAAUnqG,EAAM1b,QAKxC+qJ,qBAAV,WACC,IAAMpqG,EAAO3gD,KAAK+gD,GAClBJ,EAAK/nC,IAAK,SAAU5Y,KAAKgrJ,IACzBrqG,EAAK/nC,IAAK,QAAS5Y,KAAKkrJ,KAGzBH,kBAAA,WACC,IAAMpqG,EAAO3gD,KAAK+gD,GAClBJ,EAAKhwC,GAAI,SAAU3Q,KAAKgrJ,IACxBrqG,EAAKhwC,GAAI,QAAS3Q,KAAKkrJ,IACvBpkJ,YAAMsiB,kBAGG2hI,yBAAV,SAAwBpqG,EAAoBlyB,GAE3C,IADA,IAAMhO,EAAWzgB,KAAK+gD,GAAMtgC,SACnBlf,EAAI,EAAGC,EAAOif,EAAS/f,OAAQa,EAAIC,IAAQD,EAAI,CACvD,IAAMmf,EAAQD,EAAUlf,GACxB,GAAImf,aAAiBwhC,GAAgB,CACpC,IAAM1/C,EAASxC,KAAKorJ,aAAc1qI,EAAMigC,KAAMlyB,GAC9C,GAAc,MAAVjsB,EACH,OAAOA,OAEF,GAAIke,aAAiBoV,GACvBpV,EAAM+N,QAAUA,EACnB,OAAO/N,EAIV,OAAO,MAGRlhB,sBAAIurJ,yBAAJ,WACC,OAAO/qJ,KAAKs1B,QAGb,SAAW7G,GACV,IAAM/S,EAAO1b,KAAKorJ,aAAcprJ,KAAK+gD,GAAOtyB,GAChC,MAAR/S,EACH1b,KAAKirJ,WAAYx8H,EAAO/S,GAAM,GAE9B1b,KAAKirJ,WAAY,KAAM,MAAM,oCAIrBF,oBAAV,WACC,MAAO,cA7FC/J,mBCVV,4DAKA,OAFUlhJ,UAAA6gB,kBCHV,4DAKA,OAFU7gB,UAAA6gB,kBCST,WAAa/e,UACZkF,YAAOlF,SA4BT,OAjCU9B,OAQCurJ,iBAAV,SAAgBzpJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ5B,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAElC5H,KAAK2Q,GAAI,UAAU,WAClB1J,EAAK2Q,KAAM,cAAc,GAAM,EAAO3Q,EAAKqkJ,GAAcrkJ,EAAKskJ,OAG/DvrJ,KAAK2Q,GAAI,YAAY,WACpB1J,EAAK2Q,KAAM,cAAc,GAAO,EAAM3Q,EAAKqkJ,GAAcrkJ,EAAKskJ,QAIhEF,gBAAA,SAAK58H,GACJzuB,KAAK+2B,YAActI,IAGpB48H,kBAAA,aAIUA,oBAAV,WACC,MAAO,0BA/BC9nC,ICDJ9sD,GAAQ,SAAEhoC,GACf,MAAO,CACNvsB,MAAOusB,EAAMvsB,MACbE,MAAOqsB,EAAMrsB,uBAoBd,WAAaR,UACZkF,YAAOlF,SAkDT,OAvDU9B,OAQC0rJ,iBAAV,SAAgB5pJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ5B,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAElC5H,KAAK2Q,GAAI,UAAU,SAAE+nD,EAA0BmtD,GAC9C5+G,EAAK2Q,KAAM,aAAc6+C,GAAOiC,GAAYjC,GAAOovD,GAAY5+G,EAAKqkJ,GAAcrkJ,EAAKskJ,QAIzFC,gBAAA,SAAK9yF,GACJ,IAAMjqC,EAAQzuB,KAAKs1B,GACnB,GAAIxxB,EAAc40D,GACjBjqC,EAAMvsB,MAAQw2D,EACdjqC,EAAMrsB,MAAQ,OACR,GAAIS,EAAc61D,GAAa,CACrC,IAAMhM,EAASrQ,OAAQqc,GAEtBjqC,EAAMvsB,MADHwqD,GAAWA,EACAA,EAEA,SAEfj+B,EAAMrsB,MAAQ,OACQ,MAAZs2D,GA3CI,SAAEjqC,GAClB,MAAS,UAAWA,EA2Cdg9H,CAAU/yF,GACbjqC,EAAMvsB,MAAQm6C,OAAQqc,EAASx2D,OAE/BusB,EAAMvsB,MAAQ,SA3CD,SAAEusB,GAClB,MAAS,UAAWA,EA4Cdi9H,CAAUhzF,GACbjqC,EAAMrsB,MAAQi6C,OAAQqc,EAASt2D,OAE/BqsB,EAAMrsB,MAAQ,IAGfqsB,EAAMvsB,MAAQ,SACdusB,EAAMrsB,MAAQ,IAIhBopJ,kBAAA,aAIUA,oBAAV,WACC,MAAO,0BArDCt2B,mBCXT,WAAatzH,UACZkF,YAAOlF,SAqBT,OA1BU9B,OAQC6rJ,iBAAV,SAAgB/pJ,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAClC5H,KAAK0Q,SAAUpM,EAAWkf,aAAa,IAGxCmoI,gBAAA,SAAKl9H,EAAgBm9H,GACpB5rJ,KAAKgpB,KAAO4iI,GAGbD,kBAAA,aAIUA,oBAAV,WACC,MAAO,0BAxBCj6H,kBCCT,WAAa9vB,UACZkF,YAAOlF,SAuBT,OA5BU9B,OAQC+rJ,iBAAV,SAAgBjqJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ5B,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAClC5H,KAAK2Q,GAAI,UAAU,SAAEm7I,EAAuBC,GAC3C9kJ,EAAK2Q,KAAM,aAAck0I,EAAcC,EAAc9kJ,EAAKqkJ,GAAcrkJ,EAAKskJ,QAI/EM,gBAAA,SAAKp9H,GACJzuB,KAAKgpB,KAAOqzB,OAAQ5tB,IAGrBo9H,kBAAA,aAIUA,oBAAV,WACC,MAAO,iCA1BCh2B,mBCIT,WAAaj0H,UACZkF,YAAOlF,SAuBT,OA5BU9B,OAQCksJ,iBAAV,SAAgBpqJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ5B,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAClC5H,KAAK2Q,GAAI,UAAU,SAAEm7I,EAAuBC,GAC3C9kJ,EAAK2Q,KAAM,aAAck0I,EAAcC,EAAc9kJ,EAAKqkJ,GAAcrkJ,EAAKskJ,QAI/ES,gBAAA,SAAKv9H,GACJzuB,KAAKgpB,KAAOqzB,OAAQ5tB,IAGrBu9H,kBAAA,aAIUA,oBAAV,WACC,MAAO,8BA1BCjlC,mBCIT,WAAanlH,UACZkF,YAAOlF,SAuBT,OA5BU9B,OAQCmsJ,iBAAV,SAAgBrqJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ5B,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAClC5H,KAAK2Q,GAAI,UAAU,SAAEm7I,EAAuBC,GAC3C9kJ,EAAK2Q,KAAM,aAAck0I,EAAcC,EAAc9kJ,EAAKqkJ,GAAcrkJ,EAAKskJ,QAI/EU,gBAAA,SAAKx9H,GACJzuB,KAAKgpB,KAAOqd,OAAQ5X,IAGrBw9H,kBAAA,aAIUA,oBAAV,WACC,MAAO,8BA1BC1kC,mBCQT,WAAa3lH,UACZkF,YAAOlF,SA0DT,OA/DU9B,OAQCosJ,iBAAV,SAAgBtqJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ,IAAM4hD,EAAS5hD,EAAQ4hD,OACvBxjD,KAAKsrJ,GAAe9nG,EAAO5iD,MAC3BZ,KAAKurJ,GAAc/nG,EAAO57C,KAC1B,IAAMukJ,EAAY3oG,EAAO57C,KAAKukJ,UACxBt3B,EAASs3B,EAAUt3B,OACzB,GAAc,MAAVA,EAAiB,CACpB,IAAMu3B,EAASD,EAAUE,OACnBC,EAAgB,SAAE/5F,GACvB,IAAMmG,EAAW0zF,EAAQ75F,GACnBszD,EAAW5+G,EAAK+hB,KAClB0vC,IAAamtD,IAChB5+G,EAAK+hB,KAAO0vC,EACZzxD,EAAK2Q,KAAM,aAAc8gD,EAAUmtD,EAAU5+G,EAAKqkJ,GAAcrkJ,EAAKskJ,MAGjEgB,EAAe,WACpB13B,EAAOj8G,IAAK,SAAU0zI,GACtBz3B,EAAOj8G,IAAK,QAAS2zI,IAEtBvsJ,KAAK2Q,GAAI,UAAU,WAClBkkH,EAAOlkH,GAAI,SAAU27I,GACrBz3B,EAAOlkH,GAAI,QAAS47I,GACpB13B,EAAO98E,YAKVv4C,sBAAI0sJ,yBAAJ,WACC,OAAOlsJ,KAAKgpB,UAGb,SAAWyF,GACVzuB,KAAKgpB,KAAOyF,mCAGby9H,gBAAA,SAAKz9H,EAAgBm9H,EAAkBY,EAAqB/xH,GACvDA,GACHz6B,KAAKwuB,GAAaC,EAClBzuB,KAAK4uB,GAAqBH,EAC1BzuB,KAAKuwB,eACLvwB,KAAKwwB,sBAELxwB,KAAKgpB,KAAOyF,GAIdy9H,kBAAA,aAIUA,oBAAV,WACC,MAAO,iCA7DC7oC,mBCIT,WAAazhH,UACZkF,YAAOlF,SAoDT,OAzDU9B,OAQC2sJ,iBAAV,SAAgB7qJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ,IAAM4hD,EAAS5hD,EAAQ4hD,OACvBxjD,KAAKsrJ,GAAe9nG,EAAO5iD,MAC3BZ,KAAKurJ,GAAc/nG,EAAO57C,KAC1B,IAAMukJ,EAAY3oG,EAAO57C,KAAKukJ,UACxBO,EAAUP,EAAUO,QAC1B,GAAe,MAAXA,EAAkB,CACrB,IAAMN,EAASD,EAAUE,OACnBC,EAAgB,SAAE/5F,GACvB,IAAMmG,EAAW0zF,EAAQ75F,GACnBszD,EAAW5+G,EAAK+hB,KAClB0vC,IAAamtD,IAChB5+G,EAAK+hB,KAAO0vC,EACZzxD,EAAK2Q,KAAM,aAAc8gD,EAAUmtD,EAAU5+G,EAAKqkJ,GAAcrkJ,EAAKskJ,MAGvEvrJ,KAAK2Q,GAAI,UAAU,WAClB+7I,IAAUnrG,KAAM+qG,QAKnB9sJ,sBAAIitJ,yBAAJ,WACC,OAAOzsJ,KAAK4uB,QAGb,SAAWH,GACVzuB,KAAKgpB,KAAOyF,mCAGbg+H,gBAAA,SAAKh+H,EAAgBm9H,EAAkBY,EAAqB/xH,GACvDA,GACHz6B,KAAKwuB,GAAaC,EAClBzuB,KAAK4uB,GAAqBH,EAC1BzuB,KAAKuwB,eACLvwB,KAAKwwB,sBAELxwB,KAAKgpB,KAAOyF,GAIdg+H,kBAAA,aAIUA,oBAAV,WACC,MAAO,kCAvDCppC,mBCGT,WAAazhH,UACZkF,YAAOlF,SA4BT,OAjCU9B,OAQC6sJ,iBAAV,SAAgB/qJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GACZ,IAAM4hD,EAAS5hD,EAAQ4hD,OACvBxjD,KAAKsrJ,GAAe9nG,EAAO5iD,MAC3BZ,KAAKurJ,GAAc/nG,EAAO57C,KAC1B,IACMykJ,EADY7oG,EAAO57C,KAAKukJ,UACLE,OACzBrsJ,KAAK2Q,GAAI,UAAU,SAAEi8I,EAA2B7xD,GAC/C,IAAMriC,EAAW2zF,EAAQO,GACnB/mC,EAAWwmC,EAAQtxD,GACzB9zF,EAAK2Q,KAAM,aAAc8gD,EAAUmtD,EAAU5+G,EAAKqkJ,GAAcrkJ,EAAKskJ,QAIvEoB,gBAAA,SAAKl+H,GACJzuB,KAAKyuB,MAAQA,GAGdk+H,kBAAA,aAIUA,oBAAV,WACC,MAAO,+BA/BC5B,mBCCT,WAAanpJ,UACZkF,YAAOlF,SAqBT,OA1BU9B,OAQC+sJ,iBAAV,SAAgBjrJ,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAClC5H,KAAK0Q,SAAUpM,EAAWkf,aAAa,IAGxCqpI,gBAAA,SAAKp+H,GACJzuB,KAAKgpB,KAAOyF,GAGbo+H,kBAAA,aAIUA,oBAAV,WACC,MAAO,yBAxBCn7H,GCIJo7H,GAAsB,SAAErjI,EAAWlqB,GACxC,OAAOkqB,EAAIlqB,iBASX,WAAayB,EAAqC0B,GACjD1C,KAAK6qD,GAAU7pD,EACfhB,KAAKmsB,GAAYzpB,EAmInB,OAhICqqJ,kBAAA,WACC,IAAMC,EAAchtJ,KAAKgtJ,cACnBC,EAAcjtJ,KAAKktJ,GACzB,GAAmB,MAAfF,EACH,GAAmB,MAAfC,GACH,GAAID,EAAYtsJ,SAAWusJ,EAAYvsJ,OACtCV,KAAKmtJ,YAAaH,QAElB,IAAK,IAAIzrJ,EAAI,EAAGC,EAAOwrJ,EAAYtsJ,OAAQa,EAAIC,IAAQD,EACtD,GAAIyrJ,EAAazrJ,KAAQ0rJ,EAAa1rJ,GAAM,CAC3CvB,KAAKmtJ,YAAaH,GAClB,YAKHhtJ,KAAKmtJ,YAAaH,QAEM,MAAfC,GACVjtJ,KAAKmtJ,eAIGJ,wBAAV,SAAuBK,GACtBptJ,KAAKktJ,GAAYE,EACjBptJ,KAAKmsB,MAGN4gI,oBAAA,WACuB,MAAlB/sJ,KAAKktJ,IACRltJ,KAAKmtJ,eAIPJ,sBAAA,WACC,OAAyB,MAAlB/sJ,KAAKktJ,IAGHH,wBAAV,WACC,IAAMvC,EAASxqJ,KAAKuqJ,GACpB,GAAc,MAAVC,EAAiB,CACpB,IAAM6C,EAAOrtJ,KAAK6qD,GAAQwiG,KACpBC,EAAaD,EAAK3sJ,OAClB0sJ,EAAqB,GAC3B,GAAI1rJ,EAAgB8oJ,GACnB,IAAK,IAAIjpJ,EAAI,EAAGA,EAAI+rJ,IAAc/rJ,EAE7BipJ,EADEjnG,EAAM8pG,EAAM9rJ,GACDA,EAAG8rJ,IACnBD,EAAS5sJ,KAAMe,QAIjB,IAASA,EAAI,EAAGA,EAAI+rJ,IAAc/rJ,EAAI,CACrC,IAAMgiD,EAAM8pG,EAAM9rJ,GACdipJ,EAAOnzB,KAAM9zE,EAAKhiD,EAAG8rJ,IACxBD,EAAS5sJ,KAAMe,GAIlB,OAAO6rJ,IAMTL,gBAAA,WACC,OAAO/sJ,KAAKuqJ,IAGbwC,gBAAA,SAAKvC,GACAxqJ,KAAKuqJ,KAAYC,IACpBxqJ,KAAKuqJ,GAAUC,IAIjBuC,gBAAA,SAAKnB,EAAkB5jI,GACtB,IAAMolI,EAAWptJ,KAAKktJ,GACtB,GAAgB,MAAZE,EAAmB,CACtB,IAAK,IAAI7rJ,EAAI,EAAGA,EAAIymB,IAASzmB,EAC5B6rJ,EAAS5sJ,KAAMorJ,EAAWrqJ,GAE3B6rJ,EAAS9yH,KAAMwyH,IACf9sJ,KAAKmsB,OAIP4gI,kBAAA,SAAOnB,EAAkB9uG,EAAgBtvB,GACxC,IAAM4/H,EAAWptJ,KAAKktJ,GACtB,GAAgB,MAAZE,EAAmB,CACtB,IAAK,IAAI7rJ,EAAI6rJ,EAAS1sJ,OAAS,EAAG,GAAKa,IAAKA,EAAI,CAC/C,IAAMgsJ,EAAmBH,EAAU7rJ,GACnC,KAAIqqJ,GAAY2B,GAGf,MAFAH,EAAU7rJ,GAAMgsJ,EAAmBzwG,EAKjCtvB,GACHxtB,KAAKwtB,IAAKo+H,EAAU9uG,GAErB98C,KAAKmsB,OAIP4gI,kBAAA,WACC,IAAMK,EAAWptJ,KAAKktJ,GACN,MAAZE,GAAoB,EAAIA,EAAS1sJ,SACpC0sJ,EAAS1sJ,OAAS,EAClBV,KAAKmsB,OAIP4gI,mBAAA,SAAQnB,GACP,IAAMwB,EAAWptJ,KAAKktJ,GACtB,GAAgB,MAAZE,EAAmB,CACtB,IAAMxsJ,EAAQw6C,GAAagyG,EAAUxB,GACrC,GAAI,GAAKhrJ,EAGR,OAFAwsJ,EAAS76I,OAAQ3R,EAAO,GACxBZ,KAAKmsB,MACE,EAGT,OAAO,GAGR3sB,sBAAIutJ,2BAAJ,WACC,OAAO/sJ,KAAKktJ,wDCpIb,WAAatrJ,UACZkF,YAAOlF,SAkET,OAzEU9B,OAUC0tJ,iBAAV,SAAgB5rJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ5B,KAAK40H,GAAiBhzH,EAAQizH,OAC9B70H,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAElC5H,KAAK2Q,GAAI,UAAU,WAClB,IAAMyoH,EAAcnyH,EAAK2nB,GAAmB0oG,UACtCzC,EAAS5tH,EAAK4tH,OACpBA,EAAOthH,QAAU,IAAI82B,KAAM+uF,GAC3BvE,EAAOb,IAAM,IAAI3pF,KAAM+uF,GACvBvE,EAAOsI,KAAO,IAAI9yF,KAAM+uF,GACxBvE,EAAO98E,OAAOwJ,MAAK,WAClB,IAAM6zE,EAAYP,EAAOb,IACnBqB,EAAgBR,EAAOthH,QAC7BtM,EAAK+hB,KAAO,IAAIqhB,KAAM+qF,EAAUkC,WAChCrwH,EAAK2Q,KAAM,aAAcw9G,EAAWC,EAAepuH,EAAKqkJ,GAAcrkJ,EAAKskJ,WAK9E/rJ,sBAAIguJ,0BAAJ,WACC,IAAI34B,EAAS70H,KAAK+0H,GAUlB,OATc,MAAVF,IAGFA,EADoB,MADC70H,KAAK40H,GAEjB,IAAIsI,GAAal9H,KAAK40H,IAEtBwI,GAAavhH,cAEvB7b,KAAK+0H,GAAUF,GAETA,mCAGR24B,gBAAA,SAAK/+H,EAAgBm9H,EAAkBY,EAAqB/xH,GAC3D,GAAIhM,aAAiB4b,KAChB5P,GACHz6B,KAAKwuB,GAAaC,EAClBzuB,KAAK4uB,GAAqBH,EAC1BzuB,KAAKuwB,eACLvwB,KAAKwwB,sBAELxwB,KAAKgpB,KAAOyF,OAEP,GAAI3qB,EAAc2qB,GAAU,CAClC,IAAMg/H,EAAoBztJ,KAAK4uB,GAC3B6+H,EAAkBn2B,YAAc7oG,IACnCg/H,EAAkBljH,QAAS9b,GAC3BzuB,KAAKuwB,eACLvwB,KAAKwwB,wBAKRg9H,kBAAA,aAIUA,oBAAV,WACC,MAAO,yBAvECnqC,mBCUT,WAAazhH,UACZkF,YAAOlF,SAuET,OAhFU9B,OAYC4tJ,iBAAV,SAAgB9rJ,GAAhB,WACC5B,KAAK40H,GAAiBhzH,EAAQizH,OAC9B70H,KAAKy9H,GAAgB5/B,GAAiB6/B,OAAQ97H,GAAWA,EAAQizH,QAAUjzH,EAAQizH,OAAOxD,QAC1FrxH,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAElCd,YAAMwZ,eAAM1e,GAEZ5B,KAAK2Q,GAAI,UAAU,WAClB,IAAMyoH,EAAcnyH,EAAK2nB,GAAmB0oG,UACtCzC,EAAS5tH,EAAK4tH,OACpBA,EAAOthH,QAAU,IAAI82B,KAAM+uF,GAC3BvE,EAAOb,IAAM,IAAI3pF,KAAM+uF,GACvBvE,EAAOsI,KAAO,IAAI9yF,KAAM+uF,GACxBvE,EAAO98E,OAAOwJ,MAAK,WAClB,IAAM6zE,EAAYP,EAAOb,IACnBqB,EAAgBR,EAAOthH,QAC7BtM,EAAK+hB,KAAO,IAAIqhB,KAAM+qF,EAAUkC,WAChCrwH,EAAK2Q,KAAM,aAAcw9G,EAAWC,EAAepuH,EAAKqkJ,GAAcrkJ,EAAKskJ,WAK9EmC,4BAAA,WACC,OAAO1tJ,KAAKy9H,IAGbj+H,sBAAIkuJ,0BAAJ,WACC,IAAI74B,EAAS70H,KAAK+0H,GAUlB,OATc,MAAVF,IAGFA,EADoB,MADC70H,KAAK40H,GAEjB,IAAI0I,GAAiBt9H,KAAK40H,IAE1B2I,GAAiB1hH,cAE3B7b,KAAK+0H,GAAUF,GAETA,mCAGR64B,gBAAA,SAAKj/H,EAAgBm9H,EAAkBY,EAAqB/xH,GAC3D,GAAIhM,aAAiB4b,KAChB5P,GACHz6B,KAAKwuB,GAAaC,EAClBzuB,KAAK4uB,GAAqBH,EAC1BzuB,KAAKuwB,eACLvwB,KAAKwwB,sBAELxwB,KAAKgpB,KAAOyF,OAEP,GAAI3qB,EAAc2qB,GAAU,CAClC,IAAMg/H,EAAoBztJ,KAAK4uB,GAC3B6+H,EAAkBn2B,YAAc7oG,IACnCg/H,EAAkBljH,QAAS9b,GAC3BzuB,KAAKuwB,eACLvwB,KAAKwwB,wBAKRk9H,kBAAA,aAIUA,oBAAV,WACC,MAAO,6BA9ECrqC,mBCOT,WAAazhH,UACZkF,YAAOlF,SAyET,OAlFU9B,OAYC6tJ,iBAAV,SAAgB/rJ,GAAhB,WACC5B,KAAK40H,GAAiBhzH,EAAQizH,OAC9B70H,KAAKy9H,GAAgB9/B,GAAa+/B,OAAQ97H,EAAQizH,QAAUjzH,EAAQizH,OAAOxD,QAC3ErxH,KAAKsrJ,GAAe1pJ,EAAQ4hD,OAAO5iD,MACnCZ,KAAKurJ,GAAc3pJ,EAAQ4hD,OAAO57C,KAElCd,YAAMwZ,eAAM1e,GAEZ5B,KAAK2Q,GAAI,UAAU,WAClB,IAAMyoH,EAAcnyH,EAAK2nB,GAAmB0oG,UACtCzC,EAAS5tH,EAAK4tH,OACpBA,EAAOthH,QAAU,IAAI82B,KAAM+uF,GAC3BvE,EAAOb,IAAM,IAAI3pF,KAAM+uF,GACvBvE,EAAO98E,OAAOwJ,MAAK,WAClB,IAAM6zE,EAAYP,EAAOb,IACnBqB,EAAgBR,EAAOthH,QAC7BtM,EAAK+hB,KAAO,IAAIqhB,KAAM+qF,EAAUkC,WAChCrwH,EAAK2Q,KAAM,aAAcw9G,EAAWC,EAAepuH,EAAKqkJ,GAAcrkJ,EAAKskJ,WAK9EoC,4BAAA,WACC,OAAO3tJ,KAAKy9H,IAGbj+H,sBAAImuJ,0BAAJ,WACC,IAAI94B,EAAS70H,KAAK+0H,GAalB,OAZc,MAAVF,IAEkB,MADC70H,KAAK40H,GAE1BC,EAAS,IAAI8J,GAAa3+H,KAAK40H,KAEE,MAA7B+4B,EAAmB34B,SACtB24B,EAAmB34B,OAAS,IAAI2J,IAEjC9J,EAAS84B,EAAmB34B,QAE7Bh1H,KAAK+0H,GAAUF,GAETA,mCAGR84B,gBAAA,SAAKl/H,EAAgBm9H,EAAkBY,EAAqB/xH,GAC3D,GAAIhM,aAAiB4b,KAChB5P,GACHz6B,KAAKwuB,GAAaC,EAClBzuB,KAAK4uB,GAAqBH,EAC1BzuB,KAAKuwB,eACLvwB,KAAKwwB,sBAELxwB,KAAKgpB,KAAOyF,OAEP,GAAI3qB,EAAc2qB,GAAU,CAClC,IAAMg/H,EAAoBztJ,KAAK4uB,GAC3B6+H,EAAkBn2B,YAAc7oG,IACnCg/H,EAAkBljH,QAAS9b,GAC3BzuB,KAAKuwB,eACLvwB,KAAKwwB,wBAKRm9H,kBAAA,aAIUA,oBAAV,WACC,MAAO,yBAhFCtqC,KtBRV,SAAY+mC,GACXA,qBACAA,mBACAA,yBACAA,mBACAA,qBACAA,qBACAA,uBACAA,uBACAA,mBACAA,2BACAA,oBAXD,CAAYA,KAAAA,QuBLZ,ICXYwD,kBDkBX,WAAahsJ,UACZkF,YAAOlF,SAuBT,OA3BU9B,OAOC+tJ,iBAAV,SAAgBjsJ,GACfkF,YAAMwZ,eAAM1e,GAIZ,IADA,IAAMksJ,EAAU9tJ,KAAK+tJ,GAAWnsJ,EAAQksJ,SAAW,GAC1CvsJ,EAAI,EAAGC,EAAOssJ,EAAQptJ,OAAQa,EAAIC,IAAQD,EAClDvB,KAAKwgB,SAAUxgB,KAAKguJ,QAASF,EAASvsJ,GAAKA,EAAGusJ,EAASlsJ,KAW/CisJ,oBAAV,WACC,MAAO,gBAzBCnqC,IEcJuqC,GAAa,SAAEntJ,GACpB,OAAkB,MAAVA,GAAkB,QAASA,kBAgBnC,WAAac,GAAb,MACCkF,YAAOlF,gBAJEqF,UAAwB1E,IAkNnC,OAnNUzC,OAQCouJ,iBAAV,SAAgBtsJ,GAAhB,WACC5B,KAAKmuJ,GAAqB,SACzBrC,EAAuBC,EACvBS,EAAqBhpG,GAErB,IAAMD,EAAMt8C,EAAKmnJ,GACN,MAAP7qG,IACHC,EAAO6qG,OAAQ9qG,EAAKipG,EAAaV,GACjC7kJ,EAAK2Q,KAAM,SAAUk0I,EAAcC,EAAcS,EAAavlJ,KAGhEH,YAAMwZ,eAAM1e,IAGHssJ,oBAAV,SACC1qG,EACAgpG,EACAsB,EACAlsJ,GAEA,IAMO0sJ,EANDC,EAAcvuJ,KAAKwuJ,cAAehrG,EAAQgpG,EAAa5qJ,GAC7D,OAAI4hD,EAAOirG,WACJH,EAAOtuJ,KAAK0uJ,gBAAiBlrG,EAAQgpG,EAAa+B,IACnD59I,GAAI,aAAc3Q,KAAKmuJ,IACrBG,KAEDA,EAAOtuJ,KAAK2uJ,iBAAkBnrG,EAAQgpG,EAAa+B,IACpDK,aAAa,GACXN,IAICJ,4BAAV,SACC1qG,EACAgpG,EACA5qJ,GAEA,OAAQ4hD,EAAOhxC,MACf,KAAK43I,GAAiByE,MACrB,OAAO,IAAIlD,GAAqB/pJ,GACjC,KAAKwoJ,GAAiBx1H,KACrB,OAAO,IAAIq3H,GAAyBrqJ,GACrC,KAAKwoJ,GAAiB0E,QACrB,OAAO,IAAIjD,GAA4BjqJ,GACxC,KAAKwoJ,GAAiB2E,KACrB,OAAO,IAAI/C,GAAyBpqJ,GACrC,KAAKwoJ,GAAiB4E,MACrB,OAAO,IAAI3D,GAAqBzpJ,GACjC,KAAKwoJ,GAAiBh9E,MACrB,OAAO,IAAIo+E,GAAqB5pJ,GACjC,KAAKwoJ,GAAiB6E,OACrB,OAAO,IAAIpC,GAAoBjrJ,GAChC,KAAKwoJ,GAAiB8E,OACrB,IAAM/C,EAAY3oG,EAAO2oG,UACzB,OAAsB,MAAlBA,EAAUxrG,KACN,IAAIgsG,GAA0B/qJ,GACP,MAApBuqJ,EAAUt3B,OACb,IAAIq3B,GAA4BtqJ,GACR,MAArBuqJ,EAAUO,QACb,IAAID,GAA6B7qJ,GAEjC,IAAIirJ,GAAoBjrJ,GAEjC,KAAKwoJ,GAAiBztD,KACrB,OAAO,IAAI6wD,GAAoB5rJ,GAChC,KAAKwoJ,GAAiB+E,SACrB,OAAO,IAAIzB,GAAwB9rJ,GACpC,KAAKwoJ,GAAiBgF,KACrB,OAAO,IAAIzB,GAAoB/rJ,GAChC,QACC,OAAO,IAAIirJ,GAAoBjrJ,KAGvBssJ,6BAAV,SACC1qG,EACAgpG,EACA5qJ,GAEA,OAAQ4hD,EAAOhxC,MACf,KAAK43I,GAAiByE,MACrB,OAAO,IAAIlD,GAAqB/pJ,GACjC,KAAKwoJ,GAAiBx1H,KAEtB,KAAKw1H,GAAiB0E,QAEtB,KAAK1E,GAAiB2E,KACrB,OAAO,IAAIlC,GAAoBjrJ,GAChC,KAAKwoJ,GAAiB4E,MACrB,OAAO,IAAI3D,GAAqBzpJ,GACjC,KAAKwoJ,GAAiBh9E,MACrB,OAAO,IAAIo+E,GAAqB5pJ,GACjC,KAAKwoJ,GAAiB6E,OACrB,OAAO,IAAIpC,GAAoBjrJ,GAChC,KAAKwoJ,GAAiB8E,OACrB,IAAM/C,EAAY3oG,EAAO2oG,UACzB,OAAsB,MAAlBA,EAAUxrG,KACN,IAAIgsG,GAA0B/qJ,GACP,MAApBuqJ,EAAUt3B,OACb,IAAIq3B,GAA4BtqJ,GACR,MAArBuqJ,EAAUO,QACb,IAAID,GAA6B7qJ,GAEjC,IAAIirJ,GAAoBjrJ,GAEjC,KAAKwoJ,GAAiBztD,KACrB,OAAO,IAAI6wD,GAAoB5rJ,GAChC,KAAKwoJ,GAAiB+E,SACrB,OAAO,IAAIzB,GAAwB9rJ,GACpC,KAAKwoJ,GAAiBgF,KACrB,OAAO,IAAIzB,GAAoB/rJ,GAChC,QACC,OAAO,IAAIirJ,GAAoBjrJ,KAIvBssJ,0BAAV,SACC1qG,EACAgpG,EACA5qJ,GAEA,IAAIY,EAAUghD,EAAOhsC,MAAQ5V,EAAQ0sJ,KACrC,GAAc,MAAV9rJ,EAAiB,CACpBA,EAAOyc,OAASukC,EAAOvkC,OACvBzc,EAAOU,MAAQsgD,EAAOtgD,MACtB,IAAM8lB,EAAOxmB,EAAOwmB,KAAOxmB,EAAOwmB,MAAQ,IAC5BA,EAAK5lB,MAAQ4lB,EAAK5lB,OAAS,IACnCqsB,WAAa+zB,EAAOpgD,MAC1B4lB,EAAK6G,UAAY2zB,EAAO3zB,UACxBrtB,EAAOghD,OAAS,CACf5iD,MAAO4rJ,EACP5kJ,KAAM47C,GAEHA,EAAO2oG,UAAUxrG,OACpBn+C,EAAOm+C,KAAO6C,EAAO2oG,UAAUxrG,WAGhCn+C,EAAS,CACRyc,OAAQukC,EAAOvkC,OACf/b,MAAOsgD,EAAOtgD,MACd8lB,KAAM,CACL6G,UAAW2zB,EAAO3zB,UAClBzsB,MAAO,CACNqsB,WAAY+zB,EAAOpgD,QAGrBogD,OAAQ,CACP5iD,MAAO4rJ,EACP5kJ,KAAM47C,GAEP7C,KAAM6C,EAAO2oG,UAAUxrG,MAIzB,GAAI6C,EAAOirG,SAAW,CACrB,IAAMzpC,EAAUxiH,EAAQwiH,QAAUxiH,EAAQwiH,SAAW,GACrDA,EAAQn1F,UAAYm1F,EAAQn1F,WAAa2zB,EAAOwhE,QAAQn1F,UACxDm1F,EAAQQ,YAAcR,EAAQQ,aAAehiE,EAAOwhE,QAAQQ,YAC5DR,EAAQC,UAAYD,EAAQC,WAAazhE,EAAOwhE,QAAQC,UAGzD,OAAOziH,GAGE0rJ,oBAAV,WACC,MAAO,iBAGRA,gBAAA,SAAK3qG,EAAUqoG,EAAkBnxH,GAChC,GAAIA,GAAYz6B,KAAKouJ,KAAS7qG,EAAM,CACnCvjD,KAAKouJ,GAAO7qG,EAMZ,IAJA,IAAM8rG,EAAQrvJ,KAAKygB,SACb6uI,EAAcD,EAAM3uJ,OACpBotJ,EAAU9tJ,KAAK+tJ,GACfwB,EAAgBzB,EAAQptJ,OACrBa,EAAI,EAAGC,EAAOmI,KAAKC,IAAK2lJ,EAAeD,GAAe/tJ,EAAIC,IAAQD,EAAI,CAC9E,IAAM+sJ,EAAOe,EAAOC,EAAc/tJ,EAAI,GAChCirJ,EAAc+C,EAAgBhuJ,EAAI,EAClCiiD,EAASsqG,EAAStB,GACpByB,GAAYK,IACfA,EAAKhoJ,IAAKk9C,EAAO6oG,OAAQ9oG,EAAKipG,GAAeZ,EAAUY,EAAa/xH,GAItEz6B,KAAK4X,KAAM,MAAO2rC,EAAKqoG,EAAU5rJ,QAInCkuJ,kBAAA,WACC,QAAkB3rJ,IAAdvC,KAAKouJ,GAAqB,CAC7BpuJ,KAAKouJ,QAAO7rJ,EAGZ,IADA,IAAM8sJ,EAAQrvJ,KAAKygB,SACVlf,EAAI,EAAGC,EAAO6tJ,EAAM3uJ,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAM+sJ,EAAOe,EAAO9tJ,GAChB0sJ,GAAYK,IACfA,EAAKkB,QAIPxvJ,KAAK4X,KAAM,QAAS5X,WAhNb6tJ,mBCjCV,4DAQA,OAJU/tJ,OACC2vJ,oBAAV,WACC,MAAO,wBAFCvB,mBCJV,4DAQA,OAJUpuJ,OACC4vJ,oBAAV,WACC,MAAO,uBAFCxB,KHbV,SAAYN,GACXA,mBACAA,uBACAA,2BAHD,CAAYA,KAAAA,QAMZ,IAAM+B,GAAa,SAAElmI,EAAsBlqB,GAC1C,OAAOkqB,EAAG,GAAMlqB,EAAG,mBASnB,WAAaiT,EAA2B5K,EAAalF,GAArD,MACCoE,0BAEAG,EAAKywD,GAAQllD,EACbvL,EAAKgB,EAAW,IAAI2nJ,IACpB3oJ,EAAKy7F,GAAQ96F,EACbX,EAAKklB,GAAYzpB,IA+NnB,OA3O0C5C,OAezCN,sBAAIqwJ,wBAAJ,WACC,OAAO7vJ,KAAK03D,oCAGHm4F,qBAAV,WACC7vJ,KAAKmsB,KACLnsB,KAAK4X,KAAM,SAAU5X,OAGtB6vJ,mBAAA,SAAQjE,GACP,IAAMjjJ,EAAU3I,KAAKiI,EACjBU,EAAQmnJ,IAAKlE,GAChBjjJ,EAAQwoI,OAAQya,GAEhBjjJ,EAAQ6kB,IAAKo+H,GAEd5rJ,KAAK0C,YAGNmtJ,gBAAA,SAAKjE,GACJ,IAAMjjJ,EAAU3I,KAAKiI,EACf8nJ,EAAUpnJ,EAAQqM,KACxBrM,EAAQ6kB,IAAKo+H,GAETmE,IADYpnJ,EAAQqM,MAEvBhV,KAAK0C,YAIGmtJ,0BAAV,WACC,IAAMlnJ,EAAU3I,KAAKiI,EACrB,GAAI,EAAIU,EAAQqM,KAAO,CACtB,IAAI8tE,EAAiBt7E,IAMrB,OALAmB,EAAQu1B,SAAQ,SAAEt9B,GACbkiF,GAAWA,IACdA,EAASliF,MAGJkiF,EAER,OAAO,MAGE+sE,yBAAV,WACC,IAAMlnJ,EAAU3I,KAAKiI,EACrB,GAAI,EAAIU,EAAQqM,KAAO,CACtB,IAAIg7I,EAAiB,EAIrB,OAHArnJ,EAAQu1B,SAAQ,SAAEt9B,GACjBovJ,EAASpvJ,KAEHovJ,EAER,OAAO,MAGRH,kBAAA,SAAOjE,GACN,IAAMqE,EAAejwJ,KAAKkwJ,eACN,MAAhBD,GACHjwJ,KAAKkuC,SAAU+hH,GAAc,EAAOrE,GAAU,IAIhDiE,qBAAA,SAAU19I,EAAcg+I,EAAsBr4F,EAAYs4F,GACzD,IAAMznJ,EAAU3I,KAAKiI,EACf8nJ,EAAUpnJ,EAAQqM,KACxB,GAAI7C,EAAO2lD,EACV,IAAK,IAAIv2D,EAAI4Q,GAAQg+I,EAAc,EAAI,GAAI3uJ,EAAOs2D,GAAMs4F,EAAY,EAAI,GAAI7uJ,EAAIC,IAAQD,EACvFoH,EAAQ6kB,IAAKjsB,QAGd,IAASA,EAAIu2D,GAAMs4F,EAAY,EAAI,GAAI5uJ,EAAO2Q,GAAQg+I,EAAc,EAAI,GAAI5uJ,EAAIC,IAAQD,EACvFoH,EAAQ6kB,IAAKjsB,GAIXwuJ,IADYpnJ,EAAQqM,MAEvBhV,KAAK0C,YAIPmtJ,mBAAA,SAAQQ,GAGP,IAFA,IAAM1nJ,EAAU3I,KAAKiI,EACf8nJ,EAAUpnJ,EAAQqM,KACfzT,EAAI,EAAGC,EAAO6uJ,EAAW3vJ,OAAQa,EAAIC,IAAQD,EACrDoH,EAAQ6kB,IAAK6iI,EAAY9uJ,IAGtBwuJ,IADYpnJ,EAAQqM,MAEvBhV,KAAK0C,YAIPmtJ,qBAAA,SAAUjE,GACT,OAAO5rJ,KAAKiI,EAAS6nJ,IAAKlE,IAG3BiE,mBAAA,SAAQjE,GACH5rJ,KAAKiI,EAASkpI,OAAQya,IACzB5rJ,KAAK0C,YAIPmtJ,kBAAA,WACC,IAAMlnJ,EAAU3I,KAAKiI,EACjB,EAAIU,EAAQqM,OACfrM,EAAQ4U,QACRvd,KAAK0C,aAIPmtJ,wBAAA,SAAajE,GACZ,IAAMjjJ,EAAU3I,KAAKiI,EACfU,EAAQmnJ,IAAKlE,IAA+B,IAAjBjjJ,EAAQqM,OACxCrM,EAAQ4U,QACR5U,EAAQ6kB,IAAKo+H,GACb5rJ,KAAK0C,aAIPmtJ,2BAAA,SAAgBQ,GACf,IAAM1nJ,EAAU3I,KAAKiI,EACrB,GAAI,EAAIU,EAAQqM,MAAQ,EAAIq7I,EAAW3vJ,OAAS,CAC/CiI,EAAQ4U,QACR,IAAK,IAAIhc,EAAI,EAAGC,EAAO6uJ,EAAW3vJ,OAAQa,EAAIC,IAAQD,EACrDoH,EAAQ6kB,IAAK6iI,EAAY9uJ,IAE1BvB,KAAK0C,aAIPmtJ,kBAAA,SAAOjE,EAAkB9uG,GACxB,IAAMwzG,EAAoB,GACpB3nJ,EAAU3I,KAAKiI,EAOrB,GANAU,EAAQu1B,SAAQ,SAAEt9B,GACbgrJ,GAAYhrJ,GACf0vJ,EAAQ9vJ,KAAMI,MAIZ,EADkB0vJ,EAAQ5vJ,OACN,CACvB,IAAK,IAAIa,EAAI,EAAGC,EAAO8uJ,EAAQ5vJ,OAAQa,EAAIC,IAAQD,EAClDoH,EAAQwoI,OAAQmf,EAAS/uJ,IAE1B,IAASA,EAAI,EAAGC,EAAO8uJ,EAAQ5vJ,OAAQa,EAAIC,IAAQD,EAClDoH,EAAQ6kB,IAAK8iI,EAAS/uJ,GAAMu7C,GAE7B98C,KAAK0C,aAIPmtJ,iBAAA,WACC,OAAO7vJ,KAAKiI,EAAS+M,MAGtB66I,oBAAA,WACC,OAA8B,IAAvB7vJ,KAAKiI,EAAS+M,MAOtBxV,sBAAIqwJ,2BAAJ,WACC,IAAMrtJ,EAAmB,GAIzB,OAHAxC,KAAKiI,EAASi2B,SAAQ,SAAEt9B,GACvB4B,EAAOhC,KAAMI,MAEP4B,mCAORhD,sBAAIqwJ,wBAAJ,WACC,IAAMrtJ,EAAoB,GACpBoF,EAAO5H,KAAK0iG,GAIlB,OAHA1iG,KAAKiI,EAASi2B,SAAQ,SAAEt9B,GACvB4B,EAAOhC,KAAMoH,EAAMhH,OAEb4B,mCAORqtJ,oBAAA,WACC,IAAMrtJ,EAAqC,GACrCoF,EAAO5H,KAAK0iG,GAIlB,OAHA1iG,KAAKiI,EAASi2B,SAAQ,SAAEt9B,GACvB4B,EAAOhC,KAAK,CAAEI,EAAOgH,EAAMhH,QAErB4B,GAMRqtJ,0BAAA,WACC,OAAO7vJ,KAAK0kG,UAAUpqE,KAAMq1H,KAG7BE,qBAAA,WACC,IAAMrtJ,EAAqC,GACrCoF,EAAO5H,KAAK0iG,GAIlB,OAHA1iG,KAAKiI,EAASi2B,SAAQ,SAAEt9B,GACvB4B,EAAQ5B,GAAUgH,EAAMhH,MAElB4B,GAGRqtJ,kBAAA,WACC,IAAMrtJ,EAA+B,IAAI67B,IACnCz2B,EAAO5H,KAAK0iG,GAIlB,OAHA1iG,KAAKiI,EAASi2B,SAAQ,SAAEt9B,GACvB4B,EAAO8D,IAAK1F,EAAOgH,EAAMhH,OAEnB4B,MAzOiC84B,QAAMoU,6BIuF/C,WAAa9tC,UACZkF,YAAOlF,SA2bT,OA3cU9B,OAmBCywJ,iBAAV,SAAgB3uJ,GAAhB,WACCkF,YAAMwZ,eAAM1e,GAEZ,IAAMD,EAAQ3B,KAAK2B,MACb6uJ,EA9DgB,SAAE5uJ,GACzB,OAASA,EAAQ4zB,WAAuC,MAA1B5zB,EAAQ4zB,UAAUhjB,KAC7C3P,EAAcjB,EAAQ4zB,UAAUhjB,MAASo7I,GAAqBhsJ,EAAQ4zB,UAAUhjB,MAAS5Q,EAAQ4zB,UAAUhjB,KAC7Go7I,GAAoBvvI,KA2DEoyI,CAAiB7uJ,GACjC8uJ,EAxDa,SACpB/uJ,EACAC,EACA4uJ,GAEA,IAAM1C,EAAUlsJ,EAAQksJ,SAAW,GAC/BtrJ,EAASZ,EAAQ2hD,IAkBrB,OAjBc,MAAV/gD,GACkB,MAAjBA,EAAOmE,SACVnE,EAAOmE,OAAShF,EAAMgvJ,qBAEApuJ,IAAnBC,EAAOsrJ,UACVtrJ,EAAOsrJ,QAAUA,GAEd0C,IAAkB5C,GAAoBvvI,MAA8B,MAAtB7b,EAAO+b,cACxD/b,EAAO+b,YAAc,SAGtB/b,EAAS,CACRsrJ,UACAnnJ,OAAQhF,EAAMgvJ,eACdpyI,YAAeiyI,IAAkB5C,GAAoBvvI,KAAO,YAAS9b,GAGhEC,EAgCaouJ,CAAcjvJ,EAAOC,EAAS4uJ,GACjDxwJ,KAAK6wJ,GAAcH,EACnB1wJ,KAAK8wJ,GAAoC,MAArBJ,EAAW/pJ,OAAiB+pJ,EAAW/pJ,OAAShF,EAAMgvJ,eAC1E3wJ,KAAK+tJ,GAAW2C,EAAW5C,SAAW,GACtC9tJ,KAAK+wJ,GAAiB,EACtB/wJ,KAAKgxJ,GAAe,EACpBhxJ,KAAK0iG,GA/EQ,SAAO96F,GACrB,IAAMpF,EAAgB,GACtB,GAAY,MAARoF,EACH,IAAK,IAAIrG,EAAI,EAAGC,EAAOoG,EAAKlH,OAAQa,EAAIC,IAAQD,EAC/CiB,EAAOhC,KAAMoH,EAAMrG,IAGrB,OAAOiB,EAwEOyuJ,CAAQrvJ,EAAQgG,MAC7B5H,KAAKkxJ,GAAmB,EACxBlxJ,KAAKmxJ,IAAsB,EAC3BnxJ,KAAKoxJ,IAA8B,EACnCpxJ,KAAKqxJ,GAAY,GACjB,IAAM77H,EAAYx1B,KAAKy9I,GAAa,IAAIoS,GAAiBW,EAAexwJ,KAAK0iG,IAAO,WACnFz7F,EAAKqqJ,uBAGNtxJ,KAAKuqJ,GAAU,IAAIwC,GAA2B/sJ,MAAM,WACnDiH,EAAKsqJ,oBAEF3vJ,GAAWA,EAAQ4oJ,QACtBxqJ,KAAKuqJ,GAAQjkJ,IAAK1E,EAAQ4oJ,QAG3B,IAAMjR,EAAUv5I,KAAKu5I,QACrBA,EAAQ5oI,GAAI,QAAQ,WACnB1J,EAAK3F,YAENi4I,EAAQ5oI,GAAI,UAAU,WACrB1J,EAAK3F,YAENtB,KAAKsB,SAEDk0B,EAAUhjB,OAASo7I,GAAoBvvI,MAC1CvG,EAAiBiC,QAAS/Z,MAAM,SAAE4V,GACjC,GAAI3O,EAAK0Q,eAAiB,CACzB,IAAM84G,EAAQ8/B,EAAWiB,cACzB/gC,EAAMlqH,SAAUqP,EAAEhO,KAAKqR,QACvBsgI,EAAQ3rG,QAAS6iF,OAAOluH,EAAWkuH,GAAO,GAC1C,IAAMm7B,EAAWjiJ,KAAK6/B,MAAOinF,EAAMpqH,EAAIY,EAAK6pJ,IACtCnoJ,EAAU1B,EAAKsjJ,GAAQ5hJ,QACvBf,EAAOX,EAAKy7F,GACZ+uD,EAA0B,MAAX9oJ,EAAkBA,EAAQjI,OAASkH,EAAKlH,OAC7D,GAAI,GAAKkrJ,GAAYA,EAAW6F,EAAa,CAC5C,IAAMC,EAAal8H,EAAUhjB,OAASo7I,GAAoBlU,OACpDiY,GAAgBD,EAChB12I,EAAgBpF,EAAEhO,KAAKoT,cACvBjF,EAAUiF,EAAcjF,QACxBC,EAAWgF,EAAchF,SACzB47I,EAAiBjpJ,EAAUA,EAASijJ,GAAaA,EACnD8F,GAAYl8H,EAAUq8H,YAAiBF,IAAiB57I,IAAWC,EACtEwf,EAAUs8H,YAAaF,GACb77I,EACVyf,EAAU2sB,OAAQyvG,GACR57I,GACVwf,EAAUu8H,MAAOH,SAQvBrB,qBAAA,SAAUxuI,EAAkBC,EAAmBZ,EAAkBC,GAChEva,YAAM2a,mBAAUM,EAAUC,EAAWZ,EAAUC,GAC/CrhB,KAAKsB,UAGN9B,sBAAI+wJ,6BAAJ,WACC,OAAOvwJ,KAAKy9I,oCAGb8S,iBAAA,WACCvwJ,KAAKkxJ,IAAoB,EACK,IAA1BlxJ,KAAKkxJ,KACRlxJ,KAAKmxJ,IAAsB,EAC3BnxJ,KAAKoxJ,IAA8B,IAIrCb,mBAAA,SAAQyB,GACPhyJ,KAAKkxJ,IAAoB,EACK,IAA1BlxJ,KAAKkxJ,KACJc,GAAgBhyJ,KAAKmxJ,IACxBnxJ,KAAKsB,OAAQtB,KAAKoxJ,IAEnBpxJ,KAAKmxJ,IAAsB,EAC3BnxJ,KAAKoxJ,IAA8B,IAI3Bb,8BAAV,WACCvwJ,KAAKsB,UAGIivJ,2BAAV,WACCvwJ,KAAKsB,UASNivJ,mBAAA,SAAQ91H,GACP,GAAI,EAAIz6B,KAAKkxJ,GAKZ,OAJAlxJ,KAAKmxJ,IAAsB,OACvB12H,IACHz6B,KAAKoxJ,IAA8B,IAKrC,IAAM7X,EAAUv5I,KAAKu5I,QACf8T,EAAO9T,EAAQ94H,SACf9Z,EAAS3G,KAAK2G,OACdsrJ,EAAYjyJ,KAAK8wJ,GAEjBnoJ,EAAU3I,KAAKuqJ,GAAQ5hJ,QACvBf,EAAO5H,KAAK0iG,GACZ+uD,EAA0B,MAAX9oJ,EAAkBA,EAAQjI,OAASkH,EAAKlH,OAEvDwxJ,EAAmBlyJ,KAAK+wJ,GAC1BoB,EAAiBnyJ,KAAKgxJ,GACtBoB,EAAcD,EAAiBD,EAE7BG,EAAmB1oJ,KAAKG,IAAKnD,EAAQ8qJ,EAAaQ,GAClDK,EAAc3oJ,KAAKG,IAAKnD,EAAS0rJ,EAAkB9Y,EAAQ5kI,SAAStO,GAC1EkzI,EAAQ5kI,SAAStO,EAAIisJ,EACrB/Y,EAAQ5yI,OAAS0rJ,EAEjB,IAAME,EAAwB5oJ,KAAK6/B,OAAQ,EAAI8oH,GAAeL,GACxDO,EAAwB7oJ,KAAK6/B,OAAQ7iC,EAAS2rJ,GAAeL,GAC7DQ,EAAmBF,GAA0BA,EAAwB,GAAM,EAAI,EAAI,GACrFG,EAAiBF,IAA0BA,EAAwBC,EAAmB,GAAK,GAAM,EAAI,EAAI,GACzGE,EAAcD,EAAiBD,EAMnC,GALIE,EAAcP,GAAeA,EAAc,GAAKO,IAEnDD,EAAiBD,GADjBE,EAAcP,IAIXA,EAAcO,EAAc,CAC/B,IAAK,IAAIpxJ,EAAI6wJ,EAAa7wJ,EAAIoxJ,IAAepxJ,EAAI,CAChD,IAAMqxJ,EAAcV,EAAmB3wJ,EACjCsxJ,EAAS7yJ,KAAK6yJ,OAASD,EAAc,GAAO,GAClDrZ,EAAQ/4H,SAAUqyI,GAGnBV,EAAiBD,GADjBE,EAAcO,QAER,GAAIA,EAAcP,EAAc,CACtC,IAAS7wJ,EAAI6wJ,EAAc,EAAGO,GAAepxJ,IAAKA,EACjDg4I,EAAQ9kH,YAAa44H,EAAM9rJ,IAG5B4wJ,EAAiBD,GADjBE,EAAcO,GAIf3yJ,KAAK+wJ,GAAiB0B,EACtBzyJ,KAAKgxJ,GAAe0B,EAEpB,IAAMI,EAAqBL,EAAmBP,EACxCa,EAAwBppJ,KAAKwP,IAAI25I,GACjCxF,EAAaD,EAAK3sJ,OACxB,GAAI,EAAIqyJ,GAAyBA,EAAwBzF,EAAa,CACrE,IAAMnmI,EAAOnnB,KAAKqxJ,GAClB,GAAI,EAAIyB,EAAqB,CAC5B,IAASvxJ,EAAI,EAAGA,EAAIwxJ,IAAyBxxJ,EAC5C4lB,EAAK3mB,KAAMR,KAAKgzJ,SAAU3F,EAAM9rJ,KAEjC,IAASA,EAAIwxJ,EAAuBxxJ,EAAI+rJ,IAAc/rJ,EACrD8rJ,EAAM9rJ,EAAIwxJ,GAA0B1F,EAAM9rJ,GAE3C,IAASA,EAAI,EAAGA,EAAIwxJ,IAAyBxxJ,EAC5C8rJ,EAAMC,EAAayF,EAAwBxxJ,GAAM4lB,EAAM5lB,OAElD,CACN,IAASA,EAAI,EAAGA,EAAIwxJ,IAAyBxxJ,EAC5C4lB,EAAK3mB,KAAMR,KAAKgzJ,SAAU3F,EAAMC,EAAayF,EAAwBxxJ,KAEtE,IAASA,EAAI+rJ,EAAayF,EAAwB,EAAG,GAAKxxJ,IAAKA,EAC9D8rJ,EAAM9rJ,EAAIwxJ,GAA0B1F,EAAM9rJ,GAE3C,IAASA,EAAI,EAAGA,EAAIwxJ,IAAyBxxJ,EAC5C8rJ,EAAM9rJ,GAAM4lB,EAAM5lB,GAGpB4lB,EAAKzmB,OAAS,EAGf,IAAM80B,EAAYx1B,KAAKy9I,GACvB,GAAe,MAAX90I,EACH,IAASpH,EAAI,EAAGA,EAAI+rJ,IAAc/rJ,EAAI,CACrC,IAAMgiD,EAAM8pG,EAAM9rJ,GAEZqwJ,EAAejpJ,EADfijJ,EAAW6G,EAAmBlxJ,GAEpCgiD,EAAI5uC,SAAStO,EAAIulJ,EAAWqG,EAC5B1uG,EAAI64E,YAAawvB,EAAW,GAAK6F,GAAc7F,GAC/CroG,EAAIxsB,UAAWvB,EAAUxc,SAAU44I,IAC/B,GAAKhG,GAAYA,EAAW6F,EAC/BluG,EAAIj9C,IAAKsB,EAAMgqJ,GAAgBA,EAAcn3H,GAE7C8oB,EAAIisG,aAIN,IAASjuJ,EAAI,EAAGA,EAAI+rJ,IAAc/rJ,EAAI,CACrC,IACMqqJ,EAAW6G,EAAmBlxJ,GAD9BgiD,EAAM8pG,EAAM9rJ,IAEdoT,SAAStO,EAAIulJ,EAAWqG,EAC5B1uG,EAAI64E,YAAawvB,EAAW,GAAK6F,GAAc7F,GAC/CroG,EAAIxsB,UAAWvB,EAAUxc,SAAU4yI,IAC/B,GAAKA,GAAYA,EAAW6F,EAC/BluG,EAAIj9C,IAAKsB,EAAMgkJ,GAAYA,EAAUnxH,GAErC8oB,EAAIisG,UAMEe,qBAAV,SAAoBhtG,GACnBA,EAAIvjC,MAAM,GAEV,IADA,IAAMqvI,EAAQ9rG,EAAI9iC,SACTlf,EAAI,EAAGC,EAAO6tJ,EAAM3uJ,OAAQa,EAAIC,IAAQD,EAAI,CACpD,IAAM+sJ,EAAOe,EAAO9tJ,GAChB+sJ,aAAgB3tI,GACnB2tI,EAAKzrC,YAAY,GAGnB,OAAOt/D,GAGEgtG,mBAAV,SAAkB0C,GAAlB,WACOrxJ,EAAU5B,KAAK6wJ,GACfruJ,EAAWywJ,EAChB,IAAIxD,GAAwB7tJ,GAAY,IAAI8tJ,GAAuB9tJ,GASpE,OAPAY,EAAOmO,GAAI,UAAU,SAAEm7I,EAAuBC,EAAuBS,GACpE,IAAM5rJ,EAAQqG,EAAKsyI,QAAQK,cAAep3I,GAC1C,GAAI,GAAK5B,EAAQ,CAChB,IAAMgrJ,EAAW3kJ,EAAK8pJ,GAAiBnwJ,EACvCqG,EAAK2Q,KAAM,SAAUk0I,EAAcC,EAAcH,EAAUY,EAAavlJ,OAGnEzE,GAGR+tJ,uBAAA,SAAY36I,EAA4BmC,GACvC,IAAIvV,GAAS,EACb,GAAIxC,KAAK2X,gBAAkB3X,KAAKy9I,GAAWjrI,OAASo7I,GAAoBvvI,KAAO,CAC9E,IAAMoyG,EAAQ34G,EAAiBu5F,SAAUz7F,EAAGmC,EAAoBw4I,EAAWiB,eACrEjY,EAAUv5I,KAAKu5I,QACrBA,EAAQ3rG,QAAS6iF,OAAOluH,EAAWkuH,GAAO,GAC1C,IAAMrqH,EAAIqqH,EAAMrqH,EACVC,EAAIoqH,EAAMpqH,EACVulJ,EAAWjiJ,KAAK6/B,MAAOnjC,EAAIrG,KAAK8wJ,IAChCnoJ,EAAU3I,KAAKuqJ,GAAQ5hJ,QACvBf,EAAO5H,KAAK0iG,GACZ+uD,EAA0B,MAAX9oJ,EAAkBA,EAAQjI,OAASkH,EAAKlH,OAC7D,GAAI,GAAKkrJ,GAAYA,EAAW6F,EAAa,CAC5C,IAAM7wJ,EAAQgrJ,EAAW5rJ,KAAK+wJ,GACxB1D,EAAO9T,EAAQ94H,SACrB,GAAI,GAAK7f,GAASA,EAAQysJ,EAAK3sJ,OAM9B,IALA,IACM2uJ,EADMhC,EAAMzsJ,GACA6f,SACZ6uI,EAAcD,EAAM3uJ,OACpBotJ,EAAU9tJ,KAAK+tJ,GACfwB,EAAgBzB,EAAQptJ,OACrBa,EAAI,EAAGC,EAAOmI,KAAKC,IAAK0lJ,EAAaC,GAAiBhuJ,EAAIC,IAAQD,EAE1E,GADeusJ,EAASyB,EAAgBhuJ,EAAI,GACjCktJ,SAAW,CACrB,IAAMH,EAAOe,EAAOC,EAAc/tJ,EAAI,GAChC2X,EAAK9S,EAAIkoJ,EAAK35I,SAASvO,EACzB,GAAK8S,GAAMA,GAAMo1I,EAAKprJ,QACzBorJ,EAAKp5E,QACDo5E,aAAgB7rC,IACnB6rC,EAAKv0I,UAENvX,GAAS,KAQf,OADSsE,YAAMu4G,qBAAYzpG,EAAGmC,IAAwBvV,GAI7C+tJ,oBAAV,WACC,MAAO,cAQR/wJ,sBAAI+wJ,wBAAJ,WACC,OAAOvwJ,KAAK0iG,QAGb,SAAU2qD,GACLrtJ,KAAK0iG,KAAU2qD,IAClBrtJ,KAAK0iG,GAAQ2qD,EACbrtJ,KAAKkzJ,OACLlzJ,KAAKy9I,GAAWlgI,QAChBvd,KAAKuqJ,GAAQhtI,QACbvd,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,2CAIPivJ,kBAAA,WACC,IAAM3oJ,EAAO5H,KAAK0iG,GACd,EAAI96F,EAAKlH,SACZkH,EAAKlH,OAAS,EACdV,KAAKkzJ,OACLlzJ,KAAKy9I,GAAWlgI,QAChBvd,KAAKuqJ,GAAQhtI,QACbvd,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,WAIPivJ,wBAAA,SAAahtG,GACZ,IAAM37C,EAAO5H,KAAK0iG,GAClB96F,EAAKlH,OAAS,EACdkH,EAAKpH,KAAM+iD,GACXvjD,KAAKkzJ,OACLlzJ,KAAKy9I,GAAWlgI,QAChBvd,KAAKuqJ,GAAQhtI,QACbvd,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,UAGNivJ,2BAAA,SAAgBlD,GACf,IAAMzlJ,EAAO5H,KAAK0iG,GAClB96F,EAAKlH,OAAS,EACd,IAAK,IAAIa,EAAI,EAAGC,EAAO6rJ,EAAK3sJ,OAAQa,EAAIC,IAAQD,EAC/CqG,EAAKpH,KAAM6sJ,EAAM9rJ,IAElBvB,KAAKkzJ,OACLlzJ,KAAKy9I,GAAWlgI,QAChBvd,KAAKuqJ,GAAQhtI,QACbvd,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,UAGNivJ,gBAAA,SAAKhtG,EAAU3iD,GACd,IAAMgH,EAAO5H,KAAK0iG,GACZ8nD,EAASxqJ,KAAKuqJ,GACd/0H,EAAYx1B,KAAKy9I,GACV,MAAT78I,GACHgH,EAAKpH,KAAM+iD,GACXvjD,KAAKkzJ,OACL1I,EAAOh9H,IAAK5lB,EAAKlH,OAAS,EAAG,GAC7BV,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,UACK,GAAKV,GAASA,EAAQgH,EAAKlH,SACrCkH,EAAK2K,OAAQ3R,EAAO,EAAG2iD,GACvBvjD,KAAKkzJ,OACL19H,EAAU7e,MAAO/V,EAAO,GACxB4pJ,EAAO7zI,MAAO/V,EAAO,GAAG,GACxBZ,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,WAIPivJ,mBAAA,SAAQlD,EAAazsJ,GACpB,IAAMgH,EAAO5H,KAAK0iG,GACZ+uD,EAAa7pJ,EAAKlH,OAClB8pJ,EAASxqJ,KAAKuqJ,GACd/0H,EAAYx1B,KAAKy9I,GACvB,GAAa,MAAT78I,EAAgB,CAEnB,IADA,IACSW,EAAI,EAAGC,EADV8rJ,EAAaD,EAAK3sJ,OACWa,EAAIC,IAAQD,EAC9CqG,EAAKpH,KAAM6sJ,EAAM9rJ,IAElBvB,KAAKkzJ,OACL1I,EAAOh9H,IAAKikI,EAAa,EAAGnE,GAC5BttJ,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,cACC,GAAI,GAAKV,GAASA,EAAQ6wJ,EAAa,CAC7C,IAAMnE,EAAaD,EAAK3sJ,OACxB,IAASa,EAAI,EAAGA,EAAI+rJ,IAAc/rJ,EACjCqG,EAAK2K,OAAQ3R,EAAQW,EAAG,EAAG8rJ,EAAM9rJ,IAElCvB,KAAKkzJ,OACL19H,EAAU7e,MAAO/V,EAAO0sJ,GACxB9C,EAAO7zI,MAAO/V,EAAO0sJ,GAAY,GACjCttJ,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,WAIPivJ,gBAAA,SAAK3vJ,GACJ,IAAMgH,EAAO5H,KAAK0iG,GAClB,OAAI,GAAK9hG,GAASA,EAAQgH,EAAKlH,OACvBkH,EAAMhH,GAEP,MAGR2vJ,gBAAA,SAAK3vJ,EAAe2iD,GACnB,IAAM37C,EAAO5H,KAAK0iG,GAClB,GAAI,GAAK9hG,GAASA,EAAQgH,EAAKlH,OAAS,CACvC,IAAM8B,EAASoF,EAAMhH,GAGrB,OAFAgH,EAAMhH,GAAU2iD,EAChBvjD,KAAKsB,SACEkB,EAER,OAAO,MAGR+tJ,mBAAA,SAAQ3vJ,GACP,IAAMgH,EAAO5H,KAAK0iG,GAClB,GAAI,GAAK9hG,GAASA,EAAQgH,EAAKlH,OAAS,CACvC,IAAM8B,EAASoF,EAAK2K,OAAQ3R,EAAO,GAAK,GAMxC,OALAZ,KAAKkzJ,OACLlzJ,KAAKy9I,GAAWhwH,OAAQ7sB,GACxBZ,KAAKuqJ,GAAQ98H,OAAQ7sB,GACrBZ,KAAKmzJ,QAAQ,GACbnzJ,KAAKsB,SACEkB,EAER,OAAO,MAGR+tJ,iBAAA,WACC,OAAOvwJ,KAAK0iG,GAAMhiG,QAGnBlB,sBAAI+wJ,0BAAJ,WACC,OAAOvwJ,KAAKuqJ,oCAxcIgG,gBAAgB,IAAI3oI,WAD5BuzH,mBCrEV,4DAYA,OATUr7I,OACCszJ,iBAAV,SAAgBxxJ,GACfkF,YAAMwZ,eAAM1e,GACZ5B,KAAK0Q,SAAUpM,EAAWkf,aAAa,IAG9B4vI,oBAAV,WACC,MAAO,uBAPC7kI,kBCCT,WAAa3sB,UACZkF,YAAOlF,SAyCT,OA3CU9B,OAKCuzJ,iBAAV,SAAgBzxJ,GACfkF,YAAMwZ,eAAM1e,IAGHyxJ,oBAAV,SACC7vG,EACAgpG,EACAsB,EACAlsJ,GAEA,OAAO,IAAIwxJ,GAAkBpzJ,KAAKwuJ,cAAehrG,EAAQ5hD,KAGhDyxJ,0BAAV,SACC7vG,EACA5hD,GAEA,IAAM0lD,EAAS9D,EAAO8D,QAAU1lD,EAAQ0sJ,KACxC,GAAc,MAAVhnG,EAAiB,CACpBA,EAAOroC,OAASukC,EAAOvkC,OACvBqoC,EAAOpkD,MAAQsgD,EAAOtgD,MACtB,IAAM8lB,EAAOs+B,EAAOt+B,KAAOs+B,EAAOt+B,MAAQ,GAE1C,OADAA,EAAKyF,MAAQzF,EAAKyF,OAAS+0B,EAAO2jE,MAC3B7/D,EAEP,MAAO,CACNroC,OAAQukC,EAAOvkC,OACf/b,MAAOsgD,EAAOtgD,MACd8lB,KAAM,CACLyF,MAAO+0B,EAAO2jE,SAMRksC,oBAAV,WACC,MAAO,mBAzCCxF,ICQJyF,GAAmC,SAAE/vG,EAAU3iD,GACpD,OAAO2iD,EAAK3iD,IAGP2yJ,GAAmC,SAAEhwG,EAAU3iD,EAAe0tJ,GACnE/qG,EAAK3iD,GAAU0tJ,GAGVkF,GAAsD,SAAElF,GAC7D,OAAOA,GAyBFmF,GAAkB,SAAE7xJ,GACzB,OAAIA,EACI,CACNiuB,UAAWjuB,EAAQiuB,WAAawuB,GAChCmnE,YAAa5jH,EAAQ4jH,aAAeguC,GACpCvuC,UAAWrjH,EAAQqjH,WAGd,CACNp1F,UAAWwuB,GACXmnE,YAAaguC,KAITE,GAAe,SAAE9xJ,GACtB,OAAe,MAAXA,OACH,EACUA,aAAmBu+I,GACtBv+I,EAEA,IAAIu+I,GAAOv+I,IAId+xJ,GAAiB,SACtB/xJ,GAEA,OAAe,MAAXA,OACH,EACUA,aAAmBg+I,GACtBh+I,EAEA,IAAIg+I,GAAeh+I,IAItBgyJ,GAAgD,SAAErhG,GACvD,OAAOA,GAGFshG,GAAoB,SAAEjyJ,GAC3B,OAAIA,EACI,CACNyqJ,OAAQzqJ,EAAQyqJ,QAAUuH,GAC1BjzG,KAAM+yG,GAAc9xJ,EAAQ++C,MAC5Bk0E,OAAQ8+B,GAAgB/xJ,EAAQizH,QAChC63B,QAAS9qJ,EAAQ8qJ,SAGZ,CACNL,OAAQuH,KAIJE,GAAW,SAAOlyJ,GACvB,IAAMqd,EAA6B,MAAlBrd,EAAQqd,OAAiBrd,EAAQqd,OAC9B,MAAjBrd,EAAQsB,WAAgBX,EAAY,EAEjCW,EAAoB,MAAV+b,OAAiB1c,EACb,MAAjBX,EAAQsB,MAAgBtB,EAAQsB,MAAQ,IAErCsP,EAAyB,MAAhB5Q,EAAQ4Q,KACpB3P,EAAcjB,EAAQ4Q,MAAS43I,GAAkBxoJ,EAAQ4Q,MAAS5Q,EAAQ4Q,KAC5E43I,GAAiBx1H,KAEZxxB,EAvFe,SAAOxB,EAAmC4Q,GAC/D,GAAqB,MAAjB5Q,EAAQwB,MACX,OAAIP,EAAcjB,EAAQwB,OAClB+R,EAAkBvT,EAAQwB,OAE1BxB,EAAQwB,MAGjB,OAAQoP,GACR,KAAK43I,GAAiBx1H,KACrB,OAAOzf,EAAiB3I,KACzB,KAAK49I,GAAiB2E,KACtB,KAAK3E,GAAiB0E,QACrB,OAAO35I,EAAiBzI,MACzB,KAAK09I,GAAiByE,MACtB,KAAKzE,GAAiB8E,OACrB,OAAO/5I,EAAiBtB,OACzB,QACC,OAAOsB,EAAiB3I,MAqEXunJ,CAAenyJ,EAAS4Q,GAChCi8I,GAAkC,IAArB7sJ,EAAQ6sJ,SAC3B,MAAO,CACNxvI,SACA/b,QACAsP,OACA20G,MAAOvlH,EAAQulH,OAAS,GACxBklC,OAAQzqJ,EAAQyqJ,QAAUiH,GAC1BjF,OAAQzsJ,EAAQysJ,QAAUkF,GAC1B1jI,UAAWjuB,EAAQiuB,UACnBzsB,QAEAqrJ,WACAzpC,QAASyuC,GAAiB7xJ,EAAQojH,SAElC19D,OAAQ1lD,EAAQ0lD,OAChB9vC,KAAM5V,EAAQ4V,KAEd20I,UAAW0H,GAAmBjyJ,EAAQuqJ,4BA2DvC,WAAavqJ,UACZkF,YAAOlF,SAoCT,OAzCU9B,OAQCk0J,iBAAV,SAAgBpyJ,GACfkF,YAAMwZ,eAAM1e,GAEZ,IAAMksJ,EA9DU,SAAOlsJ,GAExB,IADA,IAAMY,EAAS,GACNjB,EAAI,EAAGC,EAAOI,EAAQlB,OAAQa,EAAIC,IAAQD,EAClDiB,EAAOhC,KAAMszJ,GAAUlyJ,EAASL,KAEjC,OAAOiB,EAyDUyxJ,CAAWryJ,EAAQksJ,SAE7BxmG,EAAStnD,KAAK8nD,UAAWlmD,EAASksJ,GACxC9tJ,KAAKwnD,GAAUF,EACftnD,KAAKwgB,SAAU8mC,GAEf,IAAM9vC,EAAOxX,KAAK+nD,QAASnmD,EAASksJ,GACpC9tJ,KAAK0nD,GAAQlwC,EACbxX,KAAKwgB,SAAUhJ,IAGNw8I,sBAAV,SAAqBpyJ,EAAkBksJ,GACtC,OAAO,IAAIuF,GAlEW,SACvBzxJ,EACAksJ,GAEA,OAAe,MAAXlsJ,QACqBW,IAApBX,EAAQksJ,UACXlsJ,EAAQksJ,QAAUA,GAEZlsJ,GAED,CACNksJ,WAuDyBoG,CAAiBtyJ,EAAQ0lD,OAAQwmG,KAGjDkG,oBAAV,SAAmBpyJ,EAAkBksJ,GACpC,OAAO,IAAIyC,GAvDS,SACrB3uJ,EACAksJ,EACAlmJ,GAEA,OAAe,MAAXhG,QACkBW,IAAjBX,EAAQgG,WAA+BrF,IAATqF,IACjChG,EAAQgG,KAAOA,QAEQrF,IAApBX,EAAQksJ,UACXlsJ,EAAQksJ,QAAUA,QAEIvrJ,IAAnBX,EAAQ+E,aAA2CpE,IAAnBX,EAAQqd,SAC3Crd,EAAQqd,OAAS,GAEXrd,GAED,CACNksJ,UACAlmJ,OACAqX,OAAQ,GAmCek1I,CAAevyJ,EAAQ4V,KAAMs2I,EAASlsJ,EAAQgG,QAG5DosJ,oBAAV,WACC,MAAO,UAGRx0J,sBAAIw0J,0BAAJ,WACC,OAAOh0J,KAAKwnD,oCAGbhoD,sBAAIw0J,wBAAJ,WACC,OAAOh0J,KAAK0nD,uCAvCJT,mBC5LV,4DAKA,OAFUnnD,UAAA6gB,yxECPT,WACC3gB,KAAKg4G,SAAWxwG,IAChBxH,KAAKsc,MAAQ,IAAIsL,y3JCRa,SAAKvf,EAAYomB,GAIhD,IAHA,IAAI4sB,EAAK,EACLC,EAAKjzC,EAAM3H,OAAS,EAEjB26C,GAAMC,GAAK,CACjB,IAAMC,EAAKF,GAAOC,EAAKD,GAAO,GACxBjyC,EAAKf,EAAOkzC,GAClB,GAAI9sB,EAAQrlB,EACXkyC,EAAKC,EAAK,MACJ,CAAA,KAAInyC,EAAKqlB,GAGf,OAAO8sB,EAFPF,EAAKE,EAAK,GAMZ,OAAO5xC,KAAKG,IAAKuxC,EAAIC,ifCbU,SAAEzQ,EAAazS,GAC9C,OAAO/L,UAAQla,KAAM05B,GAAchB,GAAO,CACzCzS,klC5GkB6B,SAAEx3B,GAChC,OAAOiqI,GAAoBjqI,EAAQiqI,GAAmBnqI,y2ByBtBd,qxP2CKmB,SAAEqhJ,EAAY7tF,EAAYC,GACrF,OAAI,GAAK4tF,EACD,6CAA6CA,MAAM7tF,MAAMC,SACtD,GAAK4tF,EACR,4CAA4CA,MAAM7tF,MAAMC,SAExD,uDAAuD4tF,MAAM7tF,MAAMC,gCAInB,SAAE4tF,EAAY7tF,EAAYC,GAClF,MAAO,WAAW,OAAQD,EAAKC,GAAO,8BAA6B4tF,MAAM7tF,MAAMC,woFyCdhF,IAAMl7C,GAASgC,OACfhC,GAAOm7I,UAAYn7I,GAAOm7I,WAAa,GACvCn7I,GAAOm7I,UAAUC,GAAKA"}