/*
 Winter Cardinal UI v0.204.3
 Copyright (C) 2019 Toshiba Corporation
 SPDX-License-Identifier: Apache-2.0

 Material Design icons by Google
 Apache license version 2.0.
*/
!function(t){"use strict";var n={},i={},r={CIRCLE:0,RECTANGLE:1,RECTANGLE_ROUNDED:2,TRIANGLE:3,TRIANGLE_ROUNDED:4,LINE:5,IMAGE:6,IMAGE_SDF:7,GROUP:8,BAR:9,LABEL:10,NULL:11,GROUP_SHADOWED:12,LINE_OF_CIRCLES:13,LINE_OF_RECTANGLES:14,LINE_OF_RECTANGLE_ROUNDEDS:15,LINE_OF_TRIANGLES:16,LINE_OF_TRIANGLE_ROUNDEDS:17,EMBEDDED:18,EMBEDDED_LAYER:19,BUTTON:20,RECTANGLE_PIVOTED:21,CONNECTOR_LINE:22,EXTENSION:1e3},e={},u=function(){function t(t,n,i,r,e,u){this.buffer=t,this.i=u,this.u=n,this.h=i,this.o=r,this.l=e}return t.prototype.init=function(t){t.uploaded=this;for(var n=this.buffer,i=this.i,r=0,e=i.length;r<e;++r)i[r].init(n);return this.update(t),this},t.prototype.update=function(t){for(var n=this.buffer,i=this.i,r=0,e=i.length;r<e;++r)i[r].update(n,t)},t.prototype.isCompatible=function(t){for(var n=this.i,i=0,r=n.length;i<r;++i)if(!n[i].isCompatible(t))return!1;return!0},t.prototype.getBuffer=function(){return this.buffer},t.prototype.getVertexOffset=function(){return this.u},t.prototype.getVertexCount=function(){return this.o},t.prototype.getIndexOffset=function(){return this.h},t.prototype.getIndexCount=function(){return this.l},t.prototype.buildUnit=function(t){for(var n=this.i,i=0,r=n.length;i<r;++i)n[i].buildUnit(t)},t}(),s={NONE:0,NON_EXPANDING_WIDTH:2,NON_SHRINKING_WIDTH:4,NON_SCALING_DOT_AND_DASH:8,NON_SCALING:14,NON_SCALING_MASK:14,DOTTED:16,DOTTED_DENSELY:32,DOTTED_LOOSELY:64,DOTTED_MASK:112,DASHED:128,DASHED_DENSELY:256,DASHED_LOOSELY:512,DASHED_MASK:896},h=function(t,n,i,r){return i&s.DOTTED_MASK?i&s.DOTTED?r.set(n,n):i&s.DOTTED_DENSELY?r.set(n,.5*n):r.set(n,2*n):i&s.DASHED_MASK?i&s.DASHED?r.set(2*n,n):i&s.DASHED_DENSELY?r.set(2*n,.5*n):r.set(2*n,2*n):r.set(2*t,0),r},o=function(t){var n=t&s.NON_EXPANDING_WIDTH?1:0,i=t&s.NON_SHRINKING_WIDTH?2:0;return t&(s.DOTTED_MASK||s.DASHED_MASK)?n|i|(t&s.NON_SCALING_DOT_AND_DASH?4:0):n|i},a=new t.Point,c=function(t,n){var i=3*n-1;t[++i]=1,t[++i]=0,t[++i]=3,t[++i]=0,t[++i]=1,t[++i]=5,t[++i]=1,t[++i]=0,t[++i]=3,t[++i]=0,t[++i]=1,t[++i]=5},f=function(t,n,i){var r=3*i-1;t[++r]=n,t[++r]=n+2,t[++r]=n+1,t[++r]=n+1,t[++r]=n+2,t[++r]=n+3},l=function(t,n,i,r,e,u,s,c,f){var l=f.a,v=f.b,b=f.c,d=f.d,g=f.tx,m=f.ty,w=e[0],p=e[1],O=l*w+b*p+g,D=v*w+d*p+m,E=e[2],M=e[3],S=l*E+b*M+g,j=v*E+d*M+m,T=S-O,N=j-D,I=Math.sqrt(T*T+N*N),C=I;if(0<=u&&1e-5<I){var A=u/I;S=O+(T*=A),j=D+(N*=A),C=u}var R=O-T,y=D-N,L=S+T,k=j+N,x=o(c),B=h(C,s,c,a),_=B.x,P=B.y,F=(r<<1)-1,U=(r<<2)-1,G=6*r-1;t[++F]=O,t[++F]=D,t[++F]=O,t[++F]=D,n[++G]=s,n[++G]=x,n[++G]=R,n[++G]=y,n[++G]=S,n[++G]=j,n[++G]=s,n[++G]=x,n[++G]=R,n[++G]=y,n[++G]=S,n[++G]=j,i[++U]=0,i[++U]=_,i[++U]=P,i[++U]=C,i[++U]=0,i[++U]=_,i[++U]=P,i[++U]=C,t[++F]=S,t[++F]=j,t[++F]=S,t[++F]=j,n[++G]=s,n[++G]=x,n[++G]=O,n[++G]=D,n[++G]=L,n[++G]=k,n[++G]=s,n[++G]=x,n[++G]=O,n[++G]=D,n[++G]=L,n[++G]=k,i[++U]=C,i[++U]=_,i[++U]=P,i[++U]=C,i[++U]=C,i[++U]=_,i[++U]=P,i[++U]=C},v=function(t,n,i){var r=(n<<1)-1;t[++r]=i.x0,t[++r]=i.y0,t[++r]=i.x3,t[++r]=i.y3,t[++r]=i.x1,t[++r]=i.y1,t[++r]=i.x2,t[++r]=i.y2},b=function(){function t(){this.target="",this.position=0}return t.prototype.init=function(t){this.target=t,this.position=0},t.prototype.hasNext=function(){return this.position<this.target.length},t.prototype.findNextBreak=function(t,n){for(var i=t.length,r=n;r<i;++r){var e=t.charCodeAt(r);if(!this.isLowSurrogate(e)&&!this.isVariationSelector(e))return r}return i},t.prototype.isHighSurrogate=function(t){return 55296<=t&&t<=56319},t.prototype.isLowSurrogate=function(t){return 56320<=t&&t<=57343},t.prototype.isVariationSelector=function(t){return 65024<=t&&t<=65039},t.prototype.next=function(){var t=this.target,n=this.position,i=this.findNextBreak(t,n+1),r=t.substring(n,i);return this.position=i,r},t.prototype.advance=function(t){var n=this.target,i=this.position,r=this.findNextBreak(n,i+1);return n.substring(i,r)!==t&&(this.position=r,!0)},t.prototype.close=function(){var t=this.target.length;return this.position<t&&(this.position=t,!0)},t.from=function(n){null==t.v&&(t.v=new t);var i=t.v;return i.init(n),i},t.v=null,t}(),d={NORMAL:0,BOLD:1},g={NORMAL:0,ITALIC:1},m={LEFT:0,CENTER:1,RIGHT:2,OUTSIDE_LEFT:3,OUTSIDE_RIGHT:4},w={TOP:0,MIDDLE:1,BOTTOM:2,OUTSIDE_TOP:3,OUTSIDE_BOTTOM:4},p={LEFT_TO_RIGHT:0,TOP_TO_BOTTOM:1,BOTTOM_TO_TOP:2},O=function(t,n,i,r){var e=i-t,u=r-n;return Math.sqrt(e*e+u*u)},D=1e-5,E=new t.Point,M=function(t){return 12*Math.ceil(t.text.value.length/12)},S=function(t,n,i){for(var r=3*n-1,e=3*(n+i)-1;r<e;)t[++r]=0,t[++r]=0,t[++r]=2},j=function(t,n,i,r){for(var e=3*i-1,u=3*(i+r)-1,s=n;e<u;)t[++e]=s,t[++e]=s+1,t[++e]=s+3,t[++e]=s+1,t[++e]=s+2,t[++e]=s+3,s+=4},T=function(t,n,i,r,e,u,h,a,c){var f=6*n-1,l=6*(n+i)-1,v=o(s.NONE);if(null!=r)for(var b=r.font.size/(e*(a+c)*.5),g=h===d.NORMAL?0:.05;f<l;)t[++f]=u,t[++f]=v,t[++f]=b,t[++f]=1,t[++f]=0,t[++f]=g;else for(;f<l;)t[++f]=0,t[++f]=v,t[++f]=0,t[++f]=1,t[++f]=0,t[++f]=0},N=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b,d,g,p,O,D,E){switch(t){case m.LEFT:switch(n){case w.TOP:E.x=o+g*(i+e)+O*(r+u),E.y=a+p*(i+e)+D*(r+u);break;case w.MIDDLE:E.x=.5*(o+b)+g*(i+e)+O*(r-.5*h),E.y=.5*(a+d)+p*(i+e)+D*(r-.5*h);break;case w.BOTTOM:E.x=b+g*(i+e)+O*(r-u-h),E.y=d+p*(i+e)+D*(r-u-h);break;case w.OUTSIDE_TOP:E.x=o+g*(i+e)+O*(r-u-h),E.y=a+p*(i+e)+D*(r-u-h);break;case w.OUTSIDE_BOTTOM:E.x=b+g*(i+e)+O*(r+u),E.y=d+p*(i+e)+D*(r+u)}break;case m.CENTER:switch(n){case w.TOP:E.x=.5*(o+c)+g*(i-.5*s)+O*(r+u),E.y=.5*(a+f)+p*(i-.5*s)+D*(r+u);break;case w.MIDDLE:E.x=.5*(o+l)+g*(i-.5*s)+O*(r-.5*h),E.y=.5*(a+v)+p*(i-.5*s)+D*(r-.5*h);break;case w.BOTTOM:E.x=.5*(b+l)+g*(i-.5*s)+O*(r-u-h),E.y=.5*(d+v)+p*(i-.5*s)+D*(r-u-h);break;case w.OUTSIDE_TOP:E.x=.5*(o+c)+g*(i-.5*s)+O*(r-u-h),E.y=.5*(a+f)+p*(i-.5*s)+D*(r-u-h);break;case w.OUTSIDE_BOTTOM:E.x=.5*(b+l)+g*(i-.5*s)+O*(r+u),E.y=.5*(d+v)+p*(i-.5*s)+D*(r+u)}break;case m.RIGHT:switch(n){case w.TOP:E.x=c+g*(i-e-s)+O*(r+u),E.y=f+p*(i-e-s)+D*(r+u);break;case w.MIDDLE:E.x=.5*(c+l)+g*(i-e-s)+O*(r-.5*h),E.y=.5*(f+v)+p*(i-e-s)+D*(r-.5*h);break;case w.BOTTOM:E.x=l+g*(i-e-s)+O*(r-u-h),E.y=v+p*(i-e-s)+D*(r-u-h);break;case w.OUTSIDE_TOP:E.x=c+g*(i-e-s)+O*(r-u-h),E.y=f+p*(i-e-s)+D*(r-u-h);break;case w.OUTSIDE_BOTTOM:E.x=l+g*(i-e-s)+O*(r+u),E.y=v+p*(i-e-s)+D*(r+u)}break;case m.OUTSIDE_LEFT:switch(n){case w.TOP:E.x=o+g*(i-e-s)+O*(r+u),E.y=a+p*(i-e-s)+D*(r+u);break;case w.MIDDLE:E.x=.5*(o+b)+g*(i-e-s)+O*(r-.5*h),E.y=.5*(a+d)+p*(i-e-s)+D*(r-.5*h);break;case w.BOTTOM:E.x=b+g*(i-e-s)+O*(r-u-h),E.y=d+p*(i-e-s)+D*(r-u-h);break;case w.OUTSIDE_TOP:E.x=o+g*(i-e-s)+O*(r-u-h),E.y=a+p*(i-e-s)+D*(r-u-h);break;case w.OUTSIDE_BOTTOM:E.x=b+g*(i-e-s)+O*(r+u),E.y=d+p*(i-e-s)+D*(r+u)}break;case m.OUTSIDE_RIGHT:switch(n){case w.TOP:E.x=c+g*(i+e)+O*(r+u),E.y=f+p*(i+e)+D*(r+u);break;case w.MIDDLE:E.x=.5*(c+l)+g*(i+e)+O*(r-.5*h),E.y=.5*(f+v)+p*(i+e)+D*(r-.5*h);break;case w.BOTTOM:E.x=l+g*(i+e)+O*(r-u-h),E.y=v+p*(i+e)+D*(r-u-h);break;case w.OUTSIDE_TOP:E.x=c+g*(i+e)+O*(r-u-h),E.y=f+p*(i+e)+D*(r-u-h);break;case w.OUTSIDE_BOTTOM:E.x=l+g*(i+e)+O*(r+u),E.y=v+p*(i+e)+D*(r+u)}}},I=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,d,M,S,j,T,I,R,y,L,x,B){var _=.5*s,P=.5*h,F=B.a,U=B.b,G=B.c,z=B.d,H=B.tx,V=B.ty,W=e-_,X=u-P,Y=e+_,K=u-P,J=e+_,Z=u+P,q=F*W+G*X+H,Q=U*W+z*X+V,$=F*Y+G*K+H,tt=U*Y+z*K+V,nt=F*J+G*Z+H,it=U*J+z*Z+V,rt=q+(nt-$),et=Q+(it-tt),ut=O(q,Q,$,tt),st=O(0,0,F,U),ht=1,ot=0;if(D<st){var at=1/st;ht=F*at,ot=U*at}var ct=O(q,Q,rt,et),ft=O(0,0,G,z),lt=0,vt=1;if(D<st){var bt=1/ft;lt=G*bt,vt=z*bt}var dt=E;switch(T){case p.LEFT_TO_RIGHT:break;case p.TOP_TO_BOTTOM:dt.set(lt,vt),lt=-ht,vt=-ot,ht=dt.x,ot=dt.y,dt.x=ft,ft=st,st=dt.x;break;case p.BOTTOM_TO_TOP:dt.set(lt,vt),lt=ht,vt=ot,ht=-dt.x,ot=-dt.y,dt.x=ft,ft=st,st=dt.x}for(var gt=0,mt=0,wt=0,pt=a*ft,Ot=Math.max(0,a+j)*ft,Dt=0,Et=o.characters,Mt=b.from(c),St=0;Mt.hasNext();)"\n"!==(hn=Mt.next())?(0<St&&(Dt+=Math.max(0,St+S)),(an=Et[hn])?(St=an.advance,wt=an.height):St=0):(Dt+=St,St=0,gt=Math.max(gt,Dt),Dt=0,mt+=Ot);var jt=a/o.font.size,Tt=st*jt,Nt=ft*jt;Dt+=St,gt=Math.max(gt,Dt)*Tt,Dt=0,wt*=Nt,mt+=pt;var It=0,Ct=0,At=NaN;switch(T){case p.LEFT_TO_RIGHT:if(N(l,v,d,M,I,R,gt,mt,q,Q,$,tt,nt,it,rt,et,ht,ot,lt,vt,dt),It=dt.x,Ct=dt.y,y)switch(l){case m.LEFT:case m.CENTER:case m.RIGHT:switch(v){case w.TOP:case w.MIDDLE:case w.BOTTOM:At=ut-2*I}}break;case p.TOP_TO_BOTTOM:if(N(function(t){switch(t){case w.TOP:return m.LEFT;case w.MIDDLE:return m.CENTER;case w.BOTTOM:return m.RIGHT;case w.OUTSIDE_TOP:return m.OUTSIDE_LEFT;case w.OUTSIDE_BOTTOM:return m.OUTSIDE_RIGHT}}(v),function(t){switch(t){case m.LEFT:return w.BOTTOM;case m.CENTER:return w.MIDDLE;case m.RIGHT:return w.TOP;case m.OUTSIDE_LEFT:return w.OUTSIDE_BOTTOM;case m.OUTSIDE_RIGHT:return w.OUTSIDE_TOP}}(l),M,d,R,I,gt,mt,$,tt,nt,it,rt,et,q,Q,ht,ot,lt,vt,dt),It=dt.x,Ct=dt.y,y)switch(v){case w.TOP:case w.MIDDLE:case w.BOTTOM:switch(l){case m.LEFT:case m.CENTER:case m.RIGHT:At=ct-2*R}}break;case p.BOTTOM_TO_TOP:if(N(function(t){switch(t){case w.TOP:return m.RIGHT;case w.MIDDLE:return m.CENTER;case w.BOTTOM:return m.LEFT;case w.OUTSIDE_TOP:return m.OUTSIDE_RIGHT;case w.OUTSIDE_BOTTOM:return m.OUTSIDE_LEFT}}(v),function(t){switch(t){case m.LEFT:return w.TOP;case m.CENTER:return w.MIDDLE;case m.RIGHT:return w.BOTTOM;case m.OUTSIDE_LEFT:return w.OUTSIDE_TOP;case m.OUTSIDE_RIGHT:return w.OUTSIDE_BOTTOM}}(l),M,d,R,I,gt,mt,rt,et,q,Q,$,tt,nt,it,ht,ot,lt,vt,dt),It=dt.x,Ct=dt.y,y)switch(v){case w.TOP:case w.MIDDLE:case w.BOTTOM:switch(l){case m.LEFT:case m.CENTER:case m.RIGHT:At=ct-2*R}}}if(At<gt){var Rt=.5*(gt-At);L[0]=It+ht*Rt,L[1]=Ct+ot*Rt,L[2]=ht,L[3]=ot,L[4]=lt,L[5]=vt,L[6]=At,L[7]=mt,L[8]=st,L[9]=ft}else L[0]=It,L[1]=Ct,L[2]=ht,L[3]=ot,L[4]=lt,L[5]=vt,L[6]=gt,L[7]=mt,L[8]=st,L[9]=ft;var yt=x.x0,Lt=x.x1,kt=x.x3,xt=x.y0,Bt=x.y1,_t=x.y3,Pt=Lt-yt,Ft=Bt-xt,Ut=kt-yt,Gt=_t-xt,zt=Ot*lt,Ht=Ot*vt,Vt=Tt*ht,Wt=Tt*ot,Xt=.5*(wt-pt),Yt=Xt*lt,Kt=Xt*vt,Jt=f===g.NORMAL?0:.25*a,Zt=It-Yt+Jt*Vt,qt=Ct-Kt+Jt*Wt,Qt=It+Yt+pt*lt,$t=Ct+Kt+pt*vt,tn=Zt,nn=qt,rn=Qt,en=$t;Dt=0,St=0,Mt.position=0;for(var un=0,sn=2*i;Mt.hasNext();sn+=8){var hn;if("\n"!==(hn=Mt.next())){var on=Dt;0<St&&(Dt+=Math.max(0,St+S));var an,cn=Dt*Vt,fn=Dt*Wt;if(tn=Zt+cn,nn=qt+fn,rn=Qt+cn,en=$t+fn,un+=1,an=Et[hn]){var ln=an.advance;if(At<(Dt+ln)*Tt){var vn=Et["..."];if(vn){if(1<un&&At<(Dt+vn.advance)*Tt){sn-=8,un-=1;var bn=(Dt=on)*Vt,dn=Dt*Wt;tn=Zt+bn,nn=qt+dn,rn=Qt+bn,en=$t+dn}for(St=vn.advance,A(t,n,sn,vn,o,Vt,Wt,tn,nn,rn,en,Pt,Ft,Ut,Gt,yt,xt),sn+=8;;sn+=8){if(!Mt.hasNext()||!Mt.advance("\n")){sn-=8;break}C(t,n,sn,tn,nn,rn,en,yt,xt,kt,_t),un+=1}}else St=ln,C(t,n,sn,tn,nn,rn,en,yt,xt,kt,_t)}else St=ln,A(t,n,sn,an,o,Vt,Wt,tn,nn,rn,en,Pt,Ft,Ut,Gt,yt,xt)}else St=0,C(t,n,sn,tn,nn,rn,en,yt,xt,kt,_t)}else Dt+=St,St=0,C(t,n,sn,tn=Zt+=zt,nn=qt+=Ht,rn=Qt+=zt,en=$t+=Ht,yt,xt,kt,_t),k(t,ht,ot,un,sn,gt-Dt*Tt,T,l,v),Dt=0,un=0}k(t,ht,ot,un,sn,gt-(Dt+=St)*Tt,T,l,v);for(var gn=2*(i+r);sn<gn;sn+=2)t[sn+0]=It,t[sn+1]=Ct,n[sn+0]=yt,n[sn+1]=xt},C=function(t,n,i,r,e,u,s,h,o,a,c){t[i+0]=r,t[i+1]=e,t[i+2]=r,t[i+3]=e,t[i+4]=u,t[i+5]=s,t[i+6]=u,t[i+7]=s,n[i+0]=h,n[i+1]=o,n[i+2]=h,n[i+3]=o,n[i+4]=a,n[i+5]=c,n[i+6]=a,n[i+7]=c},A=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b,d,g){var m=r.x-r.origin.x,w=r.width,p=m*u,O=m*s,D=(m+w)*u,E=(m+w)*s;t[i+0]=h+p,t[i+1]=o+O,t[i+2]=h+D,t[i+3]=o+E,t[i+4]=a+D,t[i+5]=c+E,t[i+6]=a+p,t[i+7]=c+O;var M=r.x/e.width,S=r.y/e.height,j=(r.x+r.width)/e.width,T=(r.y+r.height)/e.height,N=f*M,I=l*M,C=f*j,A=l*j,R=v*S,y=b*S,L=v*T,k=b*T;n[i+0]=d+N+R,n[i+1]=g+I+y,n[i+2]=d+C+R,n[i+3]=g+A+y,n[i+4]=d+C+L,n[i+5]=g+A+k,n[i+6]=d+N+L,n[i+7]=g+I+k},R=function(t,n,i,r,e){for(var u=n-8*i-1,s=0;s<i;++s)t[++u]+=r,t[++u]+=e,t[++u]+=r,t[++u]+=e,t[++u]+=r,t[++u]+=e,t[++u]+=r,t[++u]+=e},y=function(t,n,i,r,e,u){R(t,n,i,(r*=.5)*e,r*u)},L=function(t,n,i,r,e,u){R(t,n,i,r*e,r*u)},k=function(t,n,i,r,e,u,s,h,o){if(D<u)switch(s){case p.LEFT_TO_RIGHT:switch(h){case m.OUTSIDE_RIGHT:case m.LEFT:break;case m.CENTER:y(t,e,r,u,n,i);break;case m.OUTSIDE_LEFT:case m.RIGHT:L(t,e,r,u,n,i)}break;case p.TOP_TO_BOTTOM:switch(o){case w.OUTSIDE_BOTTOM:case w.TOP:break;case w.MIDDLE:y(t,e,r,u,n,i);break;case w.OUTSIDE_TOP:case w.BOTTOM:L(t,e,r,u,n,i)}break;case p.BOTTOM_TO_TOP:switch(o){case w.OUTSIDE_BOTTOM:case w.TOP:L(t,e,r,u,n,i);break;case w.MIDDLE:y(t,e,r,u,n,i)}}},x=function(t,n){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)};function B(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}x(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var _,P,F,U={NONE:0,CLOSED:1,NON_EXPANDING_WIDTH:2,NON_SHRINKING_WIDTH:4,NON_SCALING_DOT_AND_DASH:8,NON_SCALING_MASK:14,DOTTED:16,DOTTED_DENSELY:32,DOTTED_LOOSELY:64,DOTTED_MASK:112,DASHED:128,DASHED_DENSELY:256,DASHED_LOOSELY:512,DASHED_MASK:896,CURVE:1024,FORMATTER_MASK:1024},G=function(t,n,i,r,e){for(var u=(t>>16&255)/255*n,s=(t>>8&255)/255*n,h=(t>>0&255)/255*n,o=n,a=(i<<2)-1,c=(i+r<<2)-1;a<c;)e[++a]=u,e[++a]=s,e[++a]=h,e[++a]=o},z=function(){function n(t,n,i,r){this.vertexOffset=t,this.indexOffset=n,this.vertexCount=i,this.indexCount=r,this.sizeX=NaN,this.sizeY=NaN,this.transformLocalId=-1,this.strokeAlign=NaN,this.strokeWidth=NaN,this.strokeSide=NaN,this.strokeStyle=NaN,this.colorFill=NaN,this.alphaFill=-1,this.colorStroke=NaN,this.alphaStroke=-1,this.texture=null,this.textureTransformId=NaN}return n.prototype.isCompatible=function(t){return!0},n.prototype.updateColorFill=function(t,n){var i=n.fill,r=n.visible&&i.enable,e=i.color,u=r?i.alpha:0;e===this.colorFill&&u===this.alphaFill||(this.colorFill=e,this.alphaFill=u,t.updateColorFills(),G(e,u,this.vertexOffset,this.vertexCount,t.colorFills))},n.prototype.updateColorStroke=function(t,n){var i=n.stroke,r=n.visible&&i.enable&&0<i.width,e=i.color,u=r?i.alpha:0;e===this.colorStroke&&u===this.alphaStroke||(this.colorStroke=e,this.alphaStroke=u,t.updateColorStrokes(),G(e,u,this.vertexOffset,this.vertexCount,t.colorStrokes))},n.prototype.buildUnit=function(n){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;if(r!==n.baseTexture){n.baseTexture=r;var e=this.indexOffset;n.push(i,e)}},n}(),H=function(t){return t.updateTransform(),t.transform.getLocalId()},V=function(n){return n.texture||t.Texture.WHITE},W=function(t){var n=t;return null==n._uvs&&t.updateUvs(),n._updateID},X=function(t){return t._uvs},Y=function(){function t(){}return t.setDefaultThemeClass=function(t){this.DEFAULT_THEME_CLASS=t},t.getDefaultThemeClass=function(){return this.DEFAULT_THEME_CLASS},t.getInstance=function(){if(null==this.INSTANCE){var t=this.getDefaultThemeClass();if(null==t)throw new Error("No default theme class found");this.INSTANCE=new t}return this.INSTANCE},t.setInstance=function(t){var n=this.INSTANCE;return this.INSTANCE=t,n},t.DEFAULT_THEME_CLASS=null,t.INSTANCE=null,t}(),K=function(){function t(){}return Object.defineProperty(t,"THEME",{get:function(){var t=this.g;if(null!=t)return t;var n=Y.getInstance().get("EShape");return this.g=n,n},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILL_COLOR",{get:function(){return this.THEME.getFillColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILL_ALPHA",{get:function(){return this.THEME.getFillAlpha()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_COLOR",{get:function(){return this.THEME.getStrokeColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_ALPHA",{get:function(){return this.THEME.getStrokeAlpha()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_WIDTH",{get:function(){return this.THEME.getStrokeWidth()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_ALIGN",{get:function(){return this.THEME.getStrokeAlign()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_SIDE",{get:function(){return this.THEME.getStrokeSide()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"STROKE_STYLE",{get:function(){return this.THEME.getStrokeStyle()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_VALUE",{get:function(){return this.THEME.getTextValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_COLOR",{get:function(){return this.THEME.getTextColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_ALPHA",{get:function(){return this.THEME.getTextAlpha()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_FAMILY",{get:function(){return this.THEME.getTextFamily()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEXT_SIZE",{get:function(){return this.THEME.getTextSize()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CURSOR",{get:function(){return this.THEME.getCursor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"RADIUS",{get:function(){return this.THEME.getRadius()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SIZE_X",{get:function(){return this.THEME.getSizeX()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SIZE_Y",{get:function(){return this.THEME.getSizeY()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"HIGHLIGHT_COLOR",{get:function(){return this.THEME.getHighlightColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CURVE_SEGMENT_COUNT",{get:function(){return this.THEME.getCurveSegmentCount()},enumerable:!1,configurable:!0}),t}(),J={NONE:0,CIRCLE:1,TRIANGLE:2,RECTANGLE:3},Z=function(){function t(t,n,i,r){this.p=t,this.O=n,this.S=i,this.j=r}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.enable,t.color,t.alpha)},t.prototype.set=function(t,n,i){var r=!1;void 0!==t&&this.O!==t&&(this.O=t,r=!0),void 0!==n&&this.S!==n&&(this.S=n,r=!0),void 0!==i&&this.j!==i&&(this.j=i,r=!0),r&&this.p.updateUploaded()},t.prototype.clone=function(){return new t(this.p,this.O,this.S,this.j)},t.prototype.toObject=function(){return{enable:this.O,color:this.S,alpha:this.j}},t.prototype.serialize=function(t){var n="[".concat(this.O?1:0,",").concat(this.S,",").concat(this.j,"]");return t.addResource(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getFill(t);if(null!=r)this.set(!!r[0],r[1],r[2]);else{var e=JSON.parse(i[t]);n.setFill(t,e),this.set(!!e[0],e[1],e[2])}}},t}(),q=function(){function n(){}return n.prototype.lock=function(){return this},n.prototype.unlock=function(){return this},Object.defineProperty(n.prototype,"type",{get:function(){return J.NONE},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){var n=this.T;return null==n&&(n=new t.Point,this.T=n),n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"transform",{get:function(){var n=this.I;return null==n&&(n=new t.Matrix,this.I=n),n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){var t=this.C;return null==t&&(t=new Z(this,!0,K.FILL_COLOR,1),this.C=t),t},enumerable:!1,configurable:!0}),n.prototype.updateUploaded=function(){},n.prototype.copy=function(t){return this},n.prototype.set=function(t,n,i){return this},n.prototype.serialize=function(t){return-1},n.prototype.deserialize=function(t,n){},n}(),Q=function(){function t(){this.A=new q}return t.prototype.lock=function(){return this},t.prototype.unlock=function(){return this},Object.defineProperty(t.prototype,"head",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this.A},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return this},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t.getInstance=function(){var n=this.INSTANCE;return null==n&&(n=new t,this.INSTANCE=n),n},t}(),$={TOP:0,LEFT:1,RIGHT:2,BOTTOM:3},tt=function(){function n(t){this.p=t,this.R=0,this.L=[0,0,0,0],this.k=[],this.B=U.NONE,this.T=-1,this._=$.TOP,this.P=NaN,this.F=NaN,this.U=NaN,this.G=NaN}return n.prototype.getComputedSize=function(t,n,i,r){if(0<=t)return t;switch(n){case $.TOP:case $.BOTTOM:return Math.abs(r);case $.RIGHT:case $.LEFT:return Math.abs(i)}return 0},n.prototype.update=function(){var t=this.p.size,n=t.x,i=t.y,r=this._,e=this.T;if(this.P!==e||this.F!==n||this.U!==i||this.G!==r){this.R+=1,this.P=e,this.F=n,this.U=i,this.G=r;var u=.5*n,s=.5*i,h=this.getComputedSize(e,r,n,i),o=this.L;switch(r){case $.TOP:o[0]=0,o[1]=-s,o[2]=0,o[3]=-s+h;break;case $.RIGHT:o[0]=u,o[1]=0,o[2]=u-h,o[3]=0;break;case $.BOTTOM:o[0]=0,o[1]=s,o[2]=0,o[3]=s-h;break;case $.LEFT:o[0]=-u,o[1]=0,o[2]=-u+h,o[3]=0}}},Object.defineProperty(n.prototype,"length",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.update(),this.R},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this.update(),this.L},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"segments",{get:function(){return this.k},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.T},set:function(t){this.moveTo(void 0,t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this._},set:function(t){this.moveTo(t,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this.B},set:function(t){this.moveTo(void 0,void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"marker",{get:function(){var t=this.A;return null==t&&(t=Q.getInstance(),this.A=t),t},enumerable:!1,configurable:!0}),n.prototype.getMarker=function(){},Object.defineProperty(n.prototype,"formatter",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatted",{get:function(){return this},enumerable:!1,configurable:!0}),n.prototype.copy=function(t){return t instanceof n?this.moveTo(t.position,t.size,t.style):this.moveTo(void 0,void 0,t.style)},n.prototype.set=function(t,n,i){var r,e;if(null!=t){var u=t[0];if(0===u){var s=t[1];r=s<=0?$.TOP:$.BOTTOM,e=Math.abs(t[3]-s)}else r=u<=0?$.LEFT:$.RIGHT,e=Math.abs(t[2]-u)}return this.moveTo(r,e,i)},n.prototype.moveTo=function(t,n,i){var r=!1;return null!=i&&this.B!==i&&(this.B=i,r=!0),null!=t&&this._!==t&&(this._=t,r=!0),null!=n&&this.T!==n&&(this.T=n,r=!0),r&&this.p.updateUploaded(),this},n.prototype.clone=function(t){return new n(t).copy(this)},n.prototype.toPoints=function(n){for(var i=[],r=this.values,e=0,u=r.length;e<u;e+=2){var s=new t.Point(r[e+0],r[e+1]);i.push(n.apply(s,s))}return i},n.prototype.serialize=function(t){return t.addResource("[".concat(this._,",").concat(this.T,",").concat(this.B,"]"))},n.prototype.deserialize=function(t,n){if(0<=t&&t<n.resources.length){var i=n.resources[t],r=JSON.parse(i);this.moveTo(r[0],r[1],r[2])}},n.prototype.calcHitPointAbs=function(t,n,i,r,e,u,s,h){if(2<=this.length){var o=this.L;if(s(t,n,o[0],o[1],o[2],o[3],0,e,h))return!0}return!1},n}(),nt={NONE:0,LINE:1,MARKER_TAIL:2,MARKER_HEAD:3,TEXT:4,CHILDREN:5},it={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:4,BOTTOM_RIGHT:8,TOP:3,BOTTOM:12,LEFT:5,RIGHT:10,ALL:15},rt=function(){function t(){}return t.add=function(n){t.INSTANCES.push(n)},t.first=function(){var n=t.INSTANCES;if(0<n.length)return n[0];throw new Error("No application found.")},t.last=function(){var n=t.INSTANCES;if(0<n.length)return n[n.length-1];throw new Error("No application found.")},t.get=function(n){var i=t.INSTANCES;return 0<=n&&n<i.length?i[n]:null},t.indexOf=function(n){return t.INSTANCES.indexOf(n)},t.size=function(){return t.INSTANCES.length},t.getStage=function(t){for(var n=t;n.parent;)n=n.parent;return"application"in n&&"layer"in n?n:null},t.find=function(t){var n=this.getStage(t);return n?n.layer.application:null},t.getLayerBase=function(t){var n=this.getStage(t);return n?n.layer.application.getLayerBase():null},t.getLayerOverlay=function(t){var n=this.getStage(t);return n?n.layer.application.getLayerOverlay():null},t.getLayer=function(t){var n=this.getStage(t);return n?n.layer:null},t.getResolution=function(t){var n,i=this.getLayer(t);return i?i.renderer.resolution:null!==(n=window.devicePixelRatio)&&void 0!==n?n:1},t.update=function(n){if(n){var i=this.getStage(n);i&&i.layer.update()}else for(var r=t.INSTANCES,e=0,u=r.length;e<u;++e)r[e].update()},t.render=function(n){if(n){var i=this.getStage(n);i&&i.layer.render()}else for(var r=t.INSTANCES,e=0,u=r.length;e<u;++e)r[e].render()},t.INSTANCES=[],t}(),et=function(){function t(){this.values=[]}return t.prototype.add=function(t,n){var i=this.values;return null!=n?i.splice(n,0,t):i.push(t),this},t.prototype.addAll=function(t){for(var n=this.values,i=0,r=t.length;i<r;++i)n.push(t[i]);return this},t.prototype.clearAndAdd=function(t){return this.clear(),this.add(t),this},t.prototype.clearAndAddAll=function(t){return this.clear(),this.addAll(t),this},t.prototype.indexOf=function(t){for(var n=this.values,i=0,r=n.length;i<r;++i)if(n[i]===t)return i;for(i=0,r=n.length;i<r;++i)if(n[i].isEquals(t))return i;return-1},t.prototype.get=function(t){var n=this.values;return 0<=t||t<n.length?n[t]:null},t.prototype.set=function(t,n){var i=this.values;if(0<=t||t<i.length){var r=i[t];return i[t]=n,r}return null},t.prototype.remove=function(t){var n=this.values;return 0<=t||t<n.length?n.splice(t,1)[0]:null},t.prototype.clear=function(){return this.values.length=0,this},t.prototype.size=function(){return this.values.length},t.prototype.swap=function(t,n){var i=this.values,r=i[n];return i[n]=i[t],i[t]=r,this},t.prototype.serialize=function(t){for(var n=[],i=this.values,r=0,e=i.length;r<e;++r)n.push(i[r].serialize(t));return n},t}(),ut=function(){function t(t){this.p=t,this.V=new Set}return t.prototype.add=function(t){var n=this.V;return!n.has(t)&&(n.add(t),!0)},t.prototype.contains=function(t){return this.V.has(t)},t.prototype.size=function(){return this.V.size},t.prototype.remove=function(t){return this.V.delete(t)},t.prototype.clear=function(){return 0<this.V.size&&(this.V.clear(),!0)},t.prototype.copy=function(t){var n=this.V;return n.clear(),t.each((function(t){n.add(t)})),this},t.prototype.each=function(t){return this.V.forEach(t),this},t.prototype.fit=function(t){this.V.forEach(this.toOnFitBound(t))},t.prototype.toOnFitBound=function(t){var n;return t?(null==(n=this.W)&&(n=this.newOnFitBound(!0),this.W=n),n):(null==(n=this.K)&&(n=this.newOnFitBound(!1),this.K=n),n)},t.prototype.newOnFitBound=function(t){var n=this;return function(i){n.onFit(i,t)}},t.prototype.onFit=function(t,n){t.fit(n)},t.prototype.attach=function(){var t=this.p;return this.V.forEach((function(n){n.set(t)})),this},t.prototype.detach=function(){return this.V.forEach((function(t){t.set(null)})),this},t}(),st={NONE:0,TRANSFORM:1,SIZE:2,STYLE:4,ACTION:8,POINTS:16,STATE:32,IMAGE:64,DATA:128,TAG:128,CONNECTOR:256,ALL:511},ht={HOVERED:"HOVERED",ACTIVE:"ACTIVE",FOCUSED:"FOCUSED",UNFOCUSABLE:"UNFOCUSABLE",FOCUS_ROOT:"FOCUS_ROOT",FOCUS_REVERSE:"FOCUS_REVERSE",READ_ONLY:"READ_ONLY",DISABLED:"DISABLED",GESTURING:"GESTURING",PRESSED:"PRESSED",INVALID:"INVALID",SUCCEEDED:"SUCCEEDED",FAILED:"FAILED",WARNED:"WARNED",CHANGED:"CHANGED",ALTERNATED:"ALTERNATED",NEW_WINDOW:"NEW_WINDOW"},ot=function(t){return"function"==typeof t},at=function(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)},ct=function(){function t(){this.J=new Set,this.p=null}return t.prototype.is=function(t){return this.J.has(t)},t.prototype.in=function(t){return this.is(t)||this.under(t)},t.prototype.on=function(t){var n,i;return null!==(i=null===(n=this.p)||void 0===n?void 0:n.is(t))&&void 0!==i&&i},t.prototype.under=function(t){var n,i;return null!==(i=null===(n=this.p)||void 0===n?void 0:n.in(t))&&void 0!==i&&i},t.prototype.lock=function(t){return this},t.prototype.unlock=function(){return this},t.prototype.begin=function(){return this},t.prototype.end=function(){return this},t.prototype.checkAdded=function(t){return!this.J.has(t)},t.prototype.add=function(t){return this.checkAdded(t)&&(this.begin(),this.J.add(t),this.end()),this},t.prototype.checkAddeds=function(t){for(var n=this.J,i=0,r=t.length;i<r;++i)if(!n.has(t[i]))return!0;return!1},t.prototype.addAll=function(t){var n=at(t)?arguments:t;if(this.checkAddeds(n)){this.begin();for(var i=this.J,r=0,e=n.length;r<e;++r)i.add(n[r]);this.end()}return this},t.prototype.checkRemoved=function(t){return this.J.has(t)},t.prototype.remove=function(t){return this.checkRemoved(t)&&(this.begin(),this.J.delete(t),this.end()),this},t.prototype.checkRemoveds=function(t){for(var n=this.J,i=0,r=t.length;i<r;++i)if(n.has(t[i]))return!0;return!1},t.prototype.removeAll=function(t){var n=this,i=this.J;if(ot(t)){var r=!1;i.forEach((function(e){t(e)&&(r||(r=!0,n.begin()),i.delete(e))})),r&&this.end()}else{var e=at(t)?arguments:t;if(this.checkRemoveds(e)){this.begin();for(var u=0,s=e.length;u<s;++u)i.delete(e[u]);this.end()}}return this},t.prototype.clear=function(){var t=this.J;return 0<t.size&&(this.begin(),t.clear(),this.end()),this},t.prototype.set=function(t,n){if(!0===n)null!=t&&this.add(t);else if(!1===n)null!=t&&this.remove(t);else{var i=t,r=n;null!=i?null!=r?(this.checkAdded(i)||this.checkRemoved(r))&&(this.begin(),this.J.add(i).delete(r),this.end()):this.add(i):null!=r&&this.remove(r)}return this},t.prototype.setAll=function(t,n){if(!0===n)null!=t&&this.addAll(t);else if(!1===n)null!=t&&this.removeAll(t);else{var i=t,r=n;if(null!=i)if(null!=r){if(this.checkAddeds(i)||this.checkRemoveds(r)){this.begin();for(var e=this.J,u=0,s=i.length;u<s;++u)e.add(i[u]);for(u=0,s=r.length;u<s;++u)e.delete(r[u]);this.end()}}else this.addAll(i);else null!=r&&this.removeAll(r)}return this},t.prototype.each=function(t){return this.J.forEach((function(n){t(n)})),this},t.prototype.size=function(){return this.J.size},t.prototype.copy=function(n){if(n instanceof t){this.begin();var i=this.J;i.clear(),n.local.forEach((function(t){i.add(t)})),this.p=n.parent,this.end()}return this},Object.defineProperty(t.prototype,"local",{get:function(){return this.J},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.p},set:function(t){this.p!==t&&(this.begin(),this.p=t,this.end())},enumerable:!1,configurable:!0}),t.prototype.onParentChange=function(t,n){this.p=n,this.begin(),this.p=t,this.end()},Object.defineProperty(t.prototype,"isHovered",{get:function(){return this.is(ht.HOVERED)},set:function(t){this.set(ht.HOVERED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inHovered",{get:function(){return this.in(ht.HOVERED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHovered",{get:function(){return this.on(ht.HOVERED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underHovered",{get:function(){return this.under(ht.HOVERED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this.is(ht.ACTIVE)},set:function(t){this.set(ht.ACTIVE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inActive",{get:function(){return this.in(ht.ACTIVE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onActive",{get:function(){return this.on(ht.ACTIVE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underActive",{get:function(){return this.under(ht.ACTIVE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPressed",{get:function(){return this.is(ht.PRESSED)},set:function(t){this.set(ht.PRESSED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inPressed",{get:function(){return this.in(ht.PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onPressed",{get:function(){return this.on(ht.PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underPressed",{get:function(){return this.under(ht.PRESSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this.is(ht.READ_ONLY)},set:function(t){this.set(ht.READ_ONLY,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inReadOnly",{get:function(){return this.in(ht.READ_ONLY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onReadOnly",{get:function(){return this.on(ht.READ_ONLY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underReadOnly",{get:function(){return this.under(ht.READ_ONLY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return!this.is(ht.DISABLED)},set:function(t){this.set(ht.DISABLED,!t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inEnabled",{get:function(){return!this.in(ht.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onEnabled",{get:function(){return!this.on(ht.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underEnabled",{get:function(){return!this.under(ht.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this.is(ht.DISABLED)},set:function(t){this.set(ht.DISABLED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inDisabled",{get:function(){return this.in(ht.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDisabled",{get:function(){return this.on(ht.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underDisabled",{get:function(){return this.under(ht.DISABLED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActionable",{get:function(){return!this.in(ht.DISABLED)&&!this.in(ht.READ_ONLY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isGesturing",{get:function(){return this.is(ht.GESTURING)},set:function(t){this.set(ht.GESTURING,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inGesturing",{get:function(){return this.in(ht.GESTURING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onGesturing",{get:function(){return this.on(ht.GESTURING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underGesturing",{get:function(){return this.under(ht.GESTURING)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocused",{get:function(){return this.is(ht.FOCUSED)},set:function(t){this.set(ht.FOCUSED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFocused",{get:function(){return this.in(ht.FOCUSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocused",{get:function(){return this.on(ht.FOCUSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFocused",{get:function(){return this.under(ht.FOCUSED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusRoot",{get:function(){return this.is(ht.FOCUS_ROOT)},set:function(t){this.set(ht.FOCUS_ROOT,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFocusRoot",{get:function(){return this.in(ht.FOCUS_ROOT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocusRoot",{get:function(){return this.on(ht.FOCUS_ROOT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFocusRoot",{get:function(){return this.under(ht.FOCUS_ROOT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusReverse",{get:function(){return this.is(ht.FOCUS_REVERSE)},set:function(t){this.set(ht.FOCUS_REVERSE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFocusReverse",{get:function(){return this.in(ht.FOCUS_REVERSE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocusReverse",{get:function(){return this.on(ht.FOCUS_REVERSE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFocusReverse",{get:function(){return this.under(ht.FOCUS_REVERSE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFocusable",{get:function(){return!this.is(ht.UNFOCUSABLE)},set:function(t){this.set(ht.UNFOCUSABLE,!t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFocusable",{get:function(){return!this.in(ht.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocusable",{get:function(){return!this.on(ht.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFocusable",{get:function(){return!this.under(ht.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUnfocusable",{get:function(){return this.is(ht.UNFOCUSABLE)},set:function(t){this.set(ht.UNFOCUSABLE,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inUnfocusable",{get:function(){return this.in(ht.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUnfocusable",{get:function(){return this.on(ht.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underUnfocusable",{get:function(){return this.under(ht.UNFOCUSABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInvalid",{get:function(){return this.is(ht.INVALID)},set:function(t){this.set(ht.INVALID,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inInvalid",{get:function(){return this.in(ht.INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onInvalid",{get:function(){return this.on(ht.INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underInvalid",{get:function(){return this.on(ht.INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSucceeded",{get:function(){return this.is(ht.SUCCEEDED)},set:function(t){this.set(ht.SUCCEEDED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inSucceeded",{get:function(){return this.in(ht.SUCCEEDED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSucceeded",{get:function(){return this.on(ht.SUCCEEDED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underSucceeded",{get:function(){return this.under(ht.SUCCEEDED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFailed",{get:function(){return this.is(ht.FAILED)},set:function(t){this.set(ht.FAILED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inFailed",{get:function(){return this.in(ht.FAILED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFailed",{get:function(){return this.on(ht.FAILED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underFailed",{get:function(){return this.under(ht.FAILED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWarned",{get:function(){return this.is(ht.WARNED)},set:function(t){this.set(ht.WARNED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inWarned",{get:function(){return this.in(ht.WARNED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onWarned",{get:function(){return this.on(ht.WARNED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underWarned",{get:function(){return this.on(ht.WARNED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChanged",{get:function(){return this.is(ht.CHANGED)},set:function(t){this.set(ht.CHANGED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inChanged",{get:function(){return this.in(ht.CHANGED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onChanged",{get:function(){return this.on(ht.CHANGED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underChanged",{get:function(){return this.on(ht.CHANGED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAlternated",{get:function(){return this.is(ht.ALTERNATED)},set:function(t){this.set(ht.ALTERNATED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inAlternated",{get:function(){return this.in(ht.ALTERNATED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onAlternated",{get:function(){return this.on(ht.ALTERNATED)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underAlternated",{get:function(){return this.on(ht.ALTERNATED)},enumerable:!1,configurable:!0}),t.prototype.toObject=function(){var t=[];return this.J.forEach((function(n){t.push(n)})),{local:t}},t.prototype.toString=function(){return JSON.stringify(this.toObject())},t}(),ft=function(t){function n(n){var i=t.call(this)||this;return i.Z=n,i.q=0,i.$=!1,i.tt=!0,i}return B(n,t),n.prototype.lock=function(t){return this.q+=1,!1===t&&(this.tt=!1),this},n.prototype.unlock=function(){return this.q-=1,this.end()},Object.defineProperty(n.prototype,"saved",{get:function(){var t=this.nt;return null==t&&(t=new ct,this.nt=t),t},enumerable:!1,configurable:!0}),n.prototype.begin=function(){return this.tt&&!this.$&&(this.$=!0,this.saved.copy(this)),this},n.prototype.end=function(){return this.q<=0&&(this.tt=!0,this.$&&(this.$=!1,this.onChange(this,this.saved))),this},n.prototype.onChange=function(t,n){this.Z(t,n)},n}(ct),lt={CLICKED:"CLICKED",DOWN:"DOWN",UP:"UP",ACTIVATED:"ACTIVATED",DEACTIVATED:"DEACTIVATED"},vt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onChange=function(n,i){n.isActive?i.isActive||this.J.add(lt.ACTIVATED).delete(lt.DEACTIVATED):i.isActive&&this.J.add(lt.DEACTIVATED).delete(lt.ACTIVATED),t.prototype.onChange.call(this,n,i)},Object.defineProperty(n.prototype,"isClicked",{get:function(){return this.is(lt.CLICKED)},set:function(t){this.set(lt.CLICKED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inClicked",{get:function(){return this.in(lt.CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onClicked",{get:function(){return this.on(lt.CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underClicked",{get:function(){return this.under(lt.CLICKED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDown",{get:function(){return this.is(lt.DOWN)},set:function(t){this.set(lt.DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inDown",{get:function(){return this.in(lt.DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onDown",{get:function(){return this.on(lt.DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underDown",{get:function(){return this.under(lt.DOWN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUp",{get:function(){return this.is(lt.UP)},set:function(t){this.set(lt.UP,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inUp",{get:function(){return this.in(lt.UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onUp",{get:function(){return this.on(lt.UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underUp",{get:function(){return this.under(lt.UP)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isActivated",{get:function(){return this.is(lt.ACTIVATED)},set:function(t){this.set(lt.ACTIVATED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inActivated",{get:function(){return this.in(lt.ACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onActivated",{get:function(){return this.on(lt.ACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underActivated",{get:function(){return this.under(lt.ACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDeactivated",{get:function(){return this.is(lt.DEACTIVATED)},set:function(t){this.set(lt.DEACTIVATED,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inDeactivated",{get:function(){return this.in(lt.DEACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onDeactivated",{get:function(){return this.on(lt.DEACTIVATED)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"underDeactivated",{get:function(){return this.under(lt.DEACTIVATED)},enumerable:!1,configurable:!0}),n}(ft),bt=function(n){function i(i){var r=n.call(this)||this;return r.internalTransform=new t.Matrix,r.p=i,r}return B(i,n),i.prototype.onChange=function(){n.prototype.onChange.call(this),this.p.onTransformChange()},i.prototype.updateSkew=function(){n.prototype.updateSkew.call(this),this.p.onTransformChange()},i.prototype.getLocalIdCurrent=function(){return this._currentLocalID},i.prototype.getLocalId=function(){return this._localID},i.prototype.getParentId=function(){return this._parentID},i.prototype.getWorldId=function(){return this._worldID},i.prototype.updateTransform=function(t){var r=this._currentLocalID,e=this._worldID;n.prototype.updateTransform.call(this,t);var u=this._currentLocalID,s=this._worldID;if(r!==u){var h=this.localTransform,o=this.internalTransform;h.copyTo(o),t instanceof i&&o.prepend(t.internalTransform)}else e!==s&&(h=this.localTransform,o=this.internalTransform,t instanceof i&&(h.copyTo(o).prepend(t.internalTransform),this._currentLocalID+=1,this._localID=this._currentLocalID))},i}(t.Transform),dt=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0,this.strokeWidth=0,this.strokeScale=1,this.strokeAlign=0}return t.prototype.set=function(t,n,i,r,e,u,s){return this.x=t,this.y=n,this.width=i,this.height=r,this.strokeWidth=e,this.strokeScale=u,this.strokeAlign=s,this},t}(),gt=function(t,n,i,r){return-i<=t&&t<=+i&&-r<=n&&n<=+r},mt=function(t){for(var n=t.points,i="[".concat(t.direction),r=0,e=n.length,u=1;r<e;r+=1,u+=3){var s=n[r];i+=",".concat(s.color,",").concat(s.alpha,",").concat(s.position)}return i+"]"},wt=function(n){function i(t){var i=n.call(this)||this;return i.id="",i.uuid=0,i.type=t,i.transform=i.newTransform(),i.it=0,i.rt=!1,i.action=new et,i.et=!0,i.ut=0,i.st=!1,i.ht=!1,i.ot=NaN,i.ct=NaN,i.ft=NaN,i.interactive=!1,i.parent=null,i.children=[],i.selected=!1,i.index=0,i.reference=0,i}return B(i,n),i.prototype.newTransform=function(){return new bt(this)},i.prototype.onSizeChange=function(){var t;this.ot=NaN,this.ct=NaN,this.ft=NaN,this.lt(),this.updateUploaded(),null===(t=this.vt)||void 0===t||t.fit(!0)},i.prototype.onTransformChange=function(){this.lt(),this.onParentTransformChange()},i.prototype.onParentTransformChange=function(){var t;this.updateUploaded(),null===(t=this.vt)||void 0===t||t.fit(!0);for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].onParentTransformChange()},i.prototype.lt=function(){if(0===this.it){var t=this.parent;null!=t&&t.onChildTransformChange()}else this.rt=!0},i.prototype.disallowOnTransformChange=function(){this.it+=1,1===this.it&&(this.rt=!1)},i.prototype.allowOnTransformChange=function(t){this.it-=1,0===this.it&&this.rt&&(this.rt=!1,t&&this.onTransformChange())},i.prototype.onChildTransformChange=function(){},i.prototype.disallowUploadedUpdate=function(){this.ut+=1,1===this.ut&&(this.st=!1,this.ht=!1)},i.prototype.allowUploadedUpdate=function(){this.ut-=1,0===this.ut&&(this.ht?(this.ht=!1,this.st=!1,this.updateUploadedRecursively()):this.st&&(this.st=!1,this.updateUploaded()))},i.prototype.updateUploadedRecursively=function(){if(0===this.ut){this.updateUploaded();for(var t=this.children,n=0,i=t.length;n<i;++n)t[n].updateUploadedRecursively()}else this.ht=!0},i.prototype.updateUploaded=function(){if(0===this.ut){var t=this.uploaded;null!=t&&t.update(this)}else this.st=!0},Object.defineProperty(i.prototype,"image",{get:function(){return this.bt},set:function(t){this.bt=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){for(var t=this;t.parent instanceof i;)t=t.parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"connector",{get:function(){var t=this.vt;return null==t&&(t=new ut(this),this.vt=t),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){if(this.et){var t=this.parent;return!(t instanceof i)||t.visible}return!1},set:function(t){this.et!==t&&(this.et=t,this.updateUploadedRecursively())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldVisible",{get:function(){if(this.et){var t=this.parent;return!t||t.worldVisible}return!1},enumerable:!1,configurable:!0}),i.prototype.toDirty=function(){var t;null===(t=this.parent)||void 0===t||t.toDirty()},i.prototype.attach=function(t,n){this.detach(),this.parent=t;var i=t.children;return null!=n&&0<=n&&n<i.length?i.splice(n,0,this):i.push(this),this.uploaded=void 0,t.onChildTransformChange(),t.toDirty(),this.onAttach(),this},i.prototype.onAttach=function(){var t=this.vt;t&&(t.attach(),t.fit(!0));for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].onAttach()},i.prototype.detach=function(){var t=this.parent;if(t){this.parent=null,this.uploaded=void 0;var n=t.children,i=n.indexOf(this);0<=i&&(n.splice(i,1),t.onChildTransformChange(),t.toDirty(),this.onDetach())}return this},i.prototype.onDetach=function(){var t=this.vt;t&&t.detach();for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].onDetach()},i.prototype.updateTransform=function(){var n=this.parent;n?(n.parent&&n.updateTransform(),this.transform.updateTransform(n.transform)):this.transform.updateTransform(t.Transform.IDENTITY)},i.prototype.serializeChildren=function(t){for(var n=this.children,i=[],r=0,e=n.length;r<e;++r){var u=n[r];i.push(u.serialize(t))}return i},i.prototype.serializeImage=function(t){var n=this.bt;return null!=n?t.addResource(n.src):-1},i.prototype.serializeGradient=function(t){var n=this.gradient;return null!=n?(null==n.serialized&&(n.serialized=mt(n)),t.addResource(n.serialized)):-1},i.prototype.serializeState=function(t){var n=this.state;return(this.interactive?1:0)|(n.isFocusable?0:2)|(n.isActive?4:0)},i.prototype.serialize=function(t){var n=this.transform,i=n.position,r=n.pivot,e=this.size,u=this.shortcut,s=null!=u?t.addResource(u):-1,h=this.title,o=null!=h?t.addResource(h):-1;return[this.type,t.addResource(this.id),i.x,i.y,e.x,e.y,n.rotation,n.skew.x,this.fill.serialize(t),this.stroke.serialize(t),t.addResource(this.cursor.trim()),this.text.serialize(t),this.data.serialize(t),this.radius,this.corner,-1,-1,this.action.serialize(t),this.serializeImage(t),this.serializeGradient(t),this.serializeChildren(t),r.x,r.y,this.serializeState(t),s,o,this.uuid]},i.prototype.addUuid=function(t){this.uuid=t.addUuid(this.uuid);for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].addUuid(t)},i.prototype.updateUuid=function(t){this.uuid=t.updateUuid(this.uuid);for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].updateUuid(t)},i.prototype.getShapeScale=function(){var t=this.root.parent;return null!=t&&null!=t.getShapeScale?t.getShapeScale():1},i.prototype.getStrokeWidthScale=function(t){return t&s.NON_EXPANDING_WIDTH?t&s.NON_SHRINKING_WIDTH?this.getShapeScale():Math.min(1,this.getShapeScale()):t&s.NON_SHRINKING_WIDTH?Math.max(1,this.getShapeScale()):1},i.prototype.getHitTestSize=function(t){var n=this.size;return t.width=.5*n.x,t.height=.5*n.y,t},i.prototype.toHitTestData=function(t,n){var r,e=this.getHitTestSize(null!==(r=i.WORK_HIT_TEST_DATA)&&void 0!==r?r:i.WORK_HIT_TEST_DATA=new dt),u=e.width,s=e.height,h=this.transform.pivot,o=t-h.x,a=n-h.y,c=this.stroke,f=c.enable?c.width:0,l=this.getStrokeWidthScale(c.style),v=c.align,b=f*l*v;return e.set(0<=u?+o:-o,0<=s?+a:-a,Math.abs(u)+b,Math.abs(s)+b,f,l,v)},i.prototype.contains=function(t,n){var i=this.toHitTestData(t,n);return this.containsAbs(i.x,i.y,i.width,i.height,i.strokeWidth,i.strokeScale,i.strokeAlign)?this:this.containsText(t,n)||this.containsChildren(t,n)},i.prototype.containsText=function(t,n){var i=this.text;if(null!=i.atlas){var r=i.world;if(null!=r){var e=this.transform.internalTransform,u=e.a*t+e.c*n+e.tx-r[0],s=e.b*t+e.d*n+e.ty-r[1],h=r[2]*u+r[3]*s,o=r[4]*u+r[5]*s,a=r[6],c=r[7];if(0<=h&&h<=a&&0<=o&&o<=c)return this}}return null},i.prototype.containsChildren=function(t,n){for(var i=this.children,r=i.length-1;0<=r;--r){var e=i[r];e.updateTransform();var u=e.transform.localTransform,s=u.a,h=u.b,o=u.c,a=u.d,c=u.tx,f=u.ty,l=1/(s*a-o*h),v=(a*t-o*n+f*o-c*a)*l,b=(s*n-h*t-f*s+c*h)*l,d=e.contains(v,b);if(null!=d)return d}return null},i.prototype.containsBBox=function(t,n){var i=this.toHitTestData(t,n);return this.containsAbsBBox(i.x,i.y,i.width,i.height)},i.prototype.containsAbs=function(t,n,i,r,e,u,s){return this.containsAbsBBox(t,n,i,r)},i.prototype.containsAbsBBox=function(t,n,i,r){return gt(t,n,i,r)},i.prototype.select=function(t){return!1},i.prototype.toGlobal=function(t,n,i){return!0!==i&&this.updateTransform(),n.copyFrom(t),this.transform.worldTransform.apply(n,n),n},i.prototype.toLocal=function(n,i,r,e){return!0!==e&&this.updateTransform(),void 0===r&&(r=new t.Point),r.copyFrom(n),this.transform.worldTransform.applyInverse(r,r),r},i.prototype.getBounds=function(n,i){!0!==n&&this.updateTransform();var r=this._bounds||new t.Rectangle;this._bounds=r;var e=this.transform.getWorldId();return e!==this.ot&&(this.ot=e,this.wt(this.transform.worldTransform,r)),i.copyFrom(r),i},i.prototype.getBoundsInternal=function(n,i){!0!==n&&this.updateTransform();var r=this.Ot||new t.Rectangle;this.Ot=r;var e=this.transform.getLocalIdCurrent();return e!==this.ct&&(this.ct=e,this.wt(this.transform.internalTransform,r)),i.copyFrom(r),i},i.prototype.getBoundsLocal=function(n,i){!0!==n&&this.updateTransform();var r=this.Dt||new t.Rectangle;this.Dt=r;var e=this.transform.getLocalIdCurrent();return e!==this.ft&&(this.ft=e,this.wt(this.transform.localTransform,r)),i.copyFrom(r),i},i.prototype.getBoundsSize=function(){return this.size},i.prototype.wt=function(t,n){var i=this.transform.pivot,r=i.x,e=i.y,u=this.getBoundsSize(),s=.5*u.x,h=.5*u.y,o=t.a,a=t.b,c=t.c,f=t.d,l=-s+r,v=-h+e,b=o*l+c*v,d=a*l+f*v,g=o*(l=+s+r)+c*(v=-h+e),m=a*l+f*v,w=o*(l=-s+r)+c*(v=+h+e),p=a*l+f*v,O=o*(l=+s+r)+c*(v=+h+e),D=a*l+f*v,E=Math.min(b,g,w,O),M=Math.min(d,m,p,D),S=Math.max(b,g,w,O),j=Math.max(d,m,p,D);return n.x=E+t.tx,n.y=M+t.ty,n.width=S-E,n.height=j-M,n},i.prototype.destroy=function(){for(var t=this.children,n=t.length-1;0<=n;--n)t[n].destroy();t.length=0},i.prototype.onStateChange=function(t,n){var r;null===(r=this.runtime)||void 0===r||r.onStateChange(this,t,n);for(var e=this.children,u=0,s=e.length;u<s;++u){var h=e[u];h instanceof i&&h.state.onParentChange(t,n)}},Object.defineProperty(i.prototype,"state",{get:function(){var t=this,n=this.Et;return null==n&&(n=new vt((function(n,i){t.onStateChange(n,i)})),this.Et=n),n},enumerable:!1,configurable:!0}),i.prototype.focus=function(){return this.setFocused(!0),this},i.prototype.blur=function(){return this.setFocused(!1),this},i.prototype.setFocused=function(t){if(this.state.isFocused!==t){var n=rt.getLayer(this);n&&n.getFocusController().set(this,t)}},i.prototype.onKeyDown=function(t){var n=this.runtime;return!!n&&n.onKeyDown(this,t)},i.prototype.onKeyUp=function(t){var n=this.runtime;return!!n&&n.onKeyUp(this,t)},i.prototype.update=function(t){var n=this.runtime;n&&n.update(this,t)},i.prototype.onRender=function(t,n){var i=this.runtime;i&&i.onRender(this,t,n)},i.prototype.updateRecursively=function(t){this.update(t);for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].update(t)},i.prototype.copy=function(t,n){if(void 0===n&&(n=st.ALL),this.id=t.id,this.uuid=t.uuid,n&st.TRANSFORM){var r=this.transform,e=t.transform;r.position.copyFrom(e.position),r.rotation=e.rotation,r.skew.copyFrom(e.skew),r.pivot.copyFrom(e.pivot),r.scale.copyFrom(e.scale)}if(n&st.SIZE&&this.size.copyFrom(t.size),n&st.STYLE&&(this.fill.copy(t.fill),this.stroke.copy(t.stroke),this.text.copy(t.text),this.radius=t.radius,this.corner=t.corner),n&st.DATA&&this.data.copy(t.data),n&st.IMAGE&&(this.image=t.image),n&st.ACTION&&(this.action.clearAndAddAll(t.action.values),this.interactive=t.interactive,this.cursor=t.cursor,this.shortcut=t.shortcut),n&st.POINTS){var u=t.points;if(null!=u){var s=this.points;null!=s&&s.copy(u)}}if(n&st.STATE&&this.state.lock(!1).copy(t.state).unlock(),n&st.CONNECTOR)if(t instanceof i){var h=t.vt;h?this.connector.copy(h):(o=this.vt)&&o.clear()}else{var o;(o=this.vt)&&o.clear()}return this},i}(t.utils.EventEmitter),pt=function(){function t(t,n,i,r,e,u,s,h){this.p=t,this.O=n,this.S=i,this.j=r,this.Mt=e,this.St=u,this.jt=s,this.B=h}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.Mt},set:function(t){this.Mt!==t&&(this.Mt=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.St},set:function(t){this.St!==t&&(this.St=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){return this.jt},set:function(t){this.jt!==t&&(this.jt=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.B},set:function(t){this.B!==t&&(this.B=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.enable,t.color,t.alpha,t.width,t.align,t.side,t.style)},t.prototype.set=function(t,n,i,r,e,u,s){var h=!1;void 0!==t&&this.O!==t&&(this.O=t,h=!0),void 0!==n&&this.S!==n&&(this.S=n,h=!0),void 0!==i&&this.j!==i&&(this.j=i,h=!0),void 0!==r&&this.Mt!==r&&(this.Mt=r,h=!0),void 0!==e&&this.St!==e&&(this.St=e,h=!0),void 0!==u&&this.jt!==u&&(this.jt=u,h=!0),void 0!==s&&this.B!==s&&(this.B=s,h=!0),h&&this.p.updateUploaded()},t.prototype.clone=function(){return new t(this.p,this.O,this.S,this.j,this.Mt,this.St,this.jt,this.B)},t.prototype.toObject=function(){return{enable:this.O,color:this.S,alpha:this.j,width:this.Mt,align:this.St,side:this.jt,style:this.B}},t.prototype.serialize=function(t){var n=this.O?1:0,i="[".concat(n,",").concat(this.S,",").concat(this.j,",").concat(this.Mt,",").concat(this.St,",").concat(this.jt,",").concat(this.B,"]");return t.addResource(i)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getStroke(t);if(null!=r)this.set(!!r[0],r[1],r[2],r[3],r[4],r[5],r[6]);else{var e=JSON.parse(i[t]);n.setStroke(t,e),this.set(!!e[0],e[1],e[2],e[3],e[4],e[5],e[6])}}},t}(),Ot={NONE:0,FROM:1,TO:2,FROM_TO:3},Dt=function(){function t(){this.Tt=Ot.NONE,this.Nt=0,this.It=1}return Object.defineProperty(t.prototype,"type",{get:function(){return this.Tt},set:function(t){if(this.Tt!==t){this.Tt=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.Nt},set:function(t){if(this.Nt!==t){this.Nt=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.It},set:function(t){if(this.It!==t){this.It=t;var n=this.parent;null!=n&&(n.isChanged=!0)}},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;if(void 0!==t&&void 0!==n)if(null!==t&&null!==n){var r=this.Tt|Ot.FROM|Ot.TO;this.Tt===r&&this.Nt===t&&this.It===n||(this.Tt=r,this.Nt=t,this.It=n,i=!0)}else null!==t?(r=(this.Tt|Ot.FROM)&~Ot.TO,this.Tt===r&&this.Nt===t||(this.Tt=r,this.Nt=t,i=!0)):null!==n?(r=(this.Tt|Ot.TO)&~Ot.FROM,this.Tt===r&&this.Nt===t||(this.Tt=r,this.It=n,i=!0)):(r=this.Tt&~(Ot.TO|Ot.FROM),this.Tt!==r&&(this.Tt=r,i=!0));else void 0!==t?null!==t?(r=this.Tt|Ot.FROM,this.Tt===r&&this.Nt===t||(this.Tt=r,this.Nt=t,i=!0)):(r=this.Tt&~Ot.FROM,this.Tt!==r&&(this.Tt=r,i=!0)):void 0!==n&&(null!==n?(r=this.Tt|Ot.TO,this.Tt===r&&this.It===n||(this.Tt=r,this.It=n,i=!0)):(r=this.Tt&~Ot.TO,this.Tt!==r&&(this.Tt=r,i=!0)));if(i){var e=this.parent;null!=e&&(e.isChanged=!0)}return i},t.prototype.normalize=function(t){var n=this.Tt,i=this.Nt,r=this.It;switch(n){case Ot.FROM_TO:return(t-i)/(r-i);case Ot.FROM:return t-i;case Ot.TO:return r-t;case Ot.NONE:default:return t}},t.prototype.isEquals=function(t){return this.Tt===t.type&&this.Nt===t.from&&this.It===t.to},t.prototype.copy=function(t){return this.Ct(t.type,t.from,t.to)},t.prototype.Ct=function(t,n,i){var r=!1;if(this.Tt!==t&&(this.Tt=t,r=!0),this.Nt!==n&&(this.Nt=n,r=!0),this.It!==i&&(this.It=i,r=!0),r){var e=this.parent;null!=e&&(e.isChanged=!0)}return this},t.prototype.toObject=function(){return{type:this.type,from:this.from,to:this.to}},t.prototype.serialize=function(t){var n="[".concat(this.Tt,",").concat(this.Nt,",").concat(this.It,"]");return t.addResource(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getRange(t);if(null!=r)this.Ct(r[0],r[1],r[2]);else{var e=JSON.parse(i[t]);n.setRange(t,e),this.Ct(e[0],e[1],e[2])}}},t}(),Et={ASCENDING:0,DESCENDING:1},Mt={NUMBER:0,NUMBER_ARRAY:1,STRING:2,STRING_ARRAY:3,OBJECT:4,OBJECT_ARRAY:5,TICKER:6,EXTENSION:1e3},St={PRIVATE:0,PUBLIC:1,PROTECTED:2},jt={UNKOWN:-1,FOUND:0,NOT_FOUND:1,BAD_REQUEST:2,SERVER_ERROR:3,SERVICE_UNAVAILABLE:4,FORBIDDEN:5},Tt=function(t,n){return t-n},Nt=function(){function t(){this.id="",this.as="",this.type=Mt.NUMBER,this.scope=St.PUBLIC,this.initial="",this.format="",this.range=new Dt,this.At=0,this.Rt=0,this.Et=jt.UNKOWN,this.yt=0,this.Lt=Et.ASCENDING}return Object.defineProperty(t.prototype,"parent",{get:function(){return this.p},set:function(t){this.p!==t&&(this.p=t,this.range.parent=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.At},set:function(t){var n=this.formatter;null!=n&&(t=n(t));var i=this.yt;if(i<=0){if(this.At!==t){this.At=t;var r=this.parent;null!=r&&(r.isChanged=!0)}}else{var e=this.L;null==e&&(e=[],this.L=e),this.At=t;var u=this.Lt;u===Et.ASCENDING?e.push(t):e.unshift(t);var s=e.length-i;if(0<s)if(u===Et.ASCENDING)for(var h=0;h<s;++h)e.shift();else e.length=i;var o=this.parent;null!=o&&(o.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nvalue",{get:function(){return this.range.normalize(this.At)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var t=this.L;return null==t&&(t=[],this.L=t),t},set:function(t){var n=t.length;if(0<n){var i=this.yt;if(i<=0){var r=t[n-1];if(null!=(s=this.formatter)&&(r=s(r)),this.At!==r){this.At=r;var e=this.parent;null!=e&&(e.isChanged=!0)}}else{var u=this.L;null==u&&(u=[],this.L=u);var s,h=this.Lt;if(null!=(s=this.formatter))if(this.At=s(t[n-1]),h===Et.ASCENDING)for(var o=0;o<n;++o)u.push(s(t[o]));else for(o=0;o<n;++o)u.unshift(s(t[o]));else if(this.At=t[n-1],h===Et.ASCENDING)for(o=0;o<n;++o)u.push(t[o]);else for(o=0;o<n;++o)u.unshift(t[o]);var a=u.length-i;if(0<a)if(h===Et.ASCENDING)for(o=0;o<a;++o)u.shift();else u.length=i;var c=this.parent;null!=c&&(c.isChanged=!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.Rt},set:function(t){var n=this.yt;if(n<=0){if(this.Rt!==t){this.Rt=t;var i=this.parent;null!=i&&(i.isChanged=!0)}}else{var r=this.kt;null==r&&(r=[],this.kt=r),this.Rt=t;var e=this.Lt;e===Et.ASCENDING?r.push(t):r.unshift(t);var u=r.length-n;if(0<u)if(e===Et.ASCENDING)for(var s=0;s<u;++s)r.shift();else r.length=n;var h=this.parent;null!=h&&(h.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"times",{get:function(){var t=this.kt;return null==t&&(t=[],this.kt=t),t},set:function(t){var n=t.length;if(0<n){var i=this.yt;if(i<=0){var r=t[n-1];if(this.Rt!==r){this.Rt=r;var e=this.parent;null!=e&&(e.isChanged=!0)}}else{var u=this.kt;null==u&&(u=[],this.kt=u),this.Rt=t[n-1];var s=this.Lt;if(s===Et.ASCENDING)for(var h=0;h<n;++h)u.push(t[h]);else for(h=0;h<n;++h)u.unshift(t[h]);var o=u.length-i;if(0<o)if(s===Et.ASCENDING)for(h=0;h<o;++h)u.shift();else u.length=i;var a=this.parent;null!=a&&(a.isChanged=!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.Et},set:function(t){var n=this.yt;if(n<=0){if(this.Et!==t){this.Et=t;var i=this.parent;null!=i&&(i.isChanged=!0)}}else{var r=this.xt;null==r&&(r=[],this.xt=r),this.Et=t;var e=this.Lt;e===Et.ASCENDING?r.push(t):r.unshift(t);var u=r.length-n;if(0<u)if(e===Et.ASCENDING)for(var s=0;s<u;++s)r.shift();else r.length=n;var h=this.parent;null!=h&&(h.isChanged=!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){var t=this.xt;return null==t&&(t=[],this.xt=t),t},set:function(t){var n=t.length;if(0<n){var i=this.yt;if(i<=0){var r=t[n-1];if(this.Et!==r){this.Et=r;var e=this.parent;null!=e&&(e.isChanged=!0)}}else{var u=this.xt;null==u&&(u=[],this.xt=u),this.Et=t[n-1];var s=this.Lt;if(s===Et.ASCENDING)for(var h=0;h<n;++h)u.push(t[h]);else for(h=0;h<n;++h)u.unshift(t[h]);var o=u.length-i;if(0<o)if(s===Et.ASCENDING)for(h=0;h<o;++h)u.shift();else u.length=i;var a=this.parent;null!=a&&(a.isChanged=!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"capacity",{get:function(){return this.yt},set:function(t){if(this.yt<t)this.yt=t;else if(t<this.yt){this.yt=t;var n=!1,i=this.Lt,r=this.L;if(null!=r&&0<(s=r.length-t)){if(i===Et.ASCENDING)for(var e=0;e<s;++e)r.shift();else r.length=t;n=!0}var u=this.kt;if(null!=u&&0<(s=u.length-t)){if(i===Et.ASCENDING)for(e=0;e<s;++e)u.shift();else u.length=t;n=!0}var s,h=this.xt;if(null!=h&&0<(s=h.length-t)){if(i===Et.ASCENDING)for(e=0;e<s;++e)h.shift();else h.length=t;n=!0}if(n){var o=this.parent;null!=o&&(o.isChanged=!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this.Lt},set:function(t){this.Lt=t},enumerable:!1,configurable:!0}),t.prototype.remove=function(t){var n=!1,i=this.L;null!=i&&0<=t&&t<i.length&&(i.splice(t,1),n=!0);var r=this.kt;null!=r&&0<=t&&t<r.length&&(r.splice(t,1),n=!0);var e=this.xt;if(null!=e&&0<=t&&t<e.length&&(e.splice(t,1),n=!0),n){var u=this.parent;null!=u&&(u.isChanged=!0)}},t.prototype.removeAll=function(t){var n=!1,i=t.slice(0).sort(Tt),r=i.length,e=this.L;if(null!=e)for(var u=r-1;0<=u;--u)0<=(o=i[u])&&o<e.length&&(e.splice(o,1),n=!0);var s=this.kt;if(null!=s)for(u=r-1;0<=u;--u)0<=(o=i[u])&&o<s.length&&(s.splice(o,1),n=!0);var h=this.xt;if(null!=h)for(u=r-1;0<=u;--u){var o;0<=(o=i[u])&&o<h.length&&(h.splice(o,1),n=!0)}if(n){var a=this.parent;null!=a&&(a.isChanged=!0)}},t.prototype.clear=function(){var t=!1,n=this.L;null!=n&&(n.length=0,t=!0);var i=this.kt;null!=i&&(i.length=0,t=!0);var r=this.xt;if(null!=r&&(r.length=0,t=!0),t){var e=this.parent;null!=e&&(e.isChanged=!0)}},t.prototype.toDirty=function(){var t=this.parent;null!=t&&(t.isChanged=!0)},t.prototype.copy=function(t){return this.id=t.id,this.as=t.as,this.type=t.type,this.scope=t.scope,this.initial=t.initial,this.format=t.format,this.formatter=t.formatter,this.range.copy(t.range),this.At=t.value,this.Rt=t.time,this.Et=t.state,this.yt=t.capacity,this},t.prototype.isEquals=function(t){return this.id===t.id&&this.as===t.as&&this.type===t.type&&this.scope===t.scope&&this.initial===t.initial&&this.formatter===t.formatter&&this.range.isEquals(t.range)},t.prototype.serialize=function(t){var n=t.addData(this.id),i=t.addResource(this.as),r=t.addResource(this.initial),e=t.addResource(this.format.trim()),u=this.range.serialize(t);return t.addResource("[".concat(n,",").concat(r,",").concat(e,",").concat(u,",").concat(this.yt,",").concat(this.Lt,",").concat(this.type,",").concat(this.scope,",").concat(i,"]"))},t.prototype.deserialize=function(t,n){var i,r,e=n.resources;if(0<=t&&t<e.length){var u=n.getDataValue(t);null==u&&(u=JSON.parse(e[t]),n.setDataValue(t,u)),this.id=n.data[u[0]]||"";var s=u[8];this.as=null!=s&&e[s]||"",this.type=null!==(i=u[6])&&void 0!==i?i:Mt.NUMBER,this.scope=null!==(r=u[7])&&void 0!==r?r:St.PUBLIC,this.initial=e[u[1]]||"",this.format=e[u[2]]||"",this.range.deserialize(u[3],n),this.yt=u[4],this.Lt=u[5]}return this},t}(),It=function(){function t(){this.values=[]}return t.prototype.add=function(t,n){var i=this.values;return null!=n?i.splice(n,0,t):i.push(t),this},t.prototype.addAll=function(t){for(var n=this.values,i=0,r=t.length;i<r;++i)n.push(t[i]);return this},t.prototype.clearAndAdd=function(t){return this.clear(),this.add(t),this},t.prototype.clearAndAddAll=function(t){return this.clear(),this.addAll(t),this},t.prototype.indexOf=function(t){for(var n=this.values,i=0,r=n.length;i<r;++i)if((e=n[i])===t)return i;for(i=0,r=n.length;i<r;++i){var e;if((e=n[i])[0]===t[0]&&e[1]===t[1]&&e[2]===t[2])return i}return-1},t.prototype.get=function(t){var n=this.values;return 0<=t||t<n.length?n[t]:null},t.prototype.set=function(t,n){var i=this.values;if(0<=t||t<i.length){var r=i[t];return i[t]=n,r}return null},t.prototype.remove=function(t){var n=this.values;return 0<=t||t<n.length?n.splice(t,1)[0]:null},t.prototype.clear=function(){return this.values.length=0,this},t.prototype.size=function(){return this.values.length},t.prototype.swap=function(t,n){var i=this.values,r=i[n];return i[n]=i[t],i[t]=r,this},t.prototype.copy=function(t){this.clearAndAddAll(t.values)},t.prototype.serialize=function(t){for(var n="[",i="",r=this.values,e=0,u=r.length;e<u;++e){var s=r[e],h=t.addResource(s[0]),o=t.addResource(s[1]),a=t.addResource(s[2]);n+="".concat(i).concat(h,",").concat(o,",").concat(a),i=","}return n+="]",t.addResource(n)},t.prototype.deserialize=function(t,n){var i=this.values;i.length=0;var r=n.resources,e=r.length;if(0<=t&&t<e){var u=n.getDataMapping(t);null==u&&(u=JSON.parse(r[t]),n.setDataMapping(t,u));for(var s=0,h=u.length;s<h;s+=3){var o=u[s],a=u[s+1],c=u[s+2];i.push([0<=o&&o<e?r[o]:"",0<=a&&a<e?r[a]:"",0<=c&&c<e?r[c]:""])}}},t}(),Ct=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},At=function(){function t(){}return Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Bt;if(null==t)return[];var n=[];return t.forEach((function(t,i){n.push(i)})),n},enumerable:!1,configurable:!0}),t.prototype.add=function(t,n){var i,r=null!==(i=this.Bt)&&void 0!==i?i:this.Bt=new Map,e=r.get(t);null==e?r.set(t,[n]):e.push(n)},t.prototype.set=function(t,n,i,r,e,u){var s=this.Bt;if(null==s)return!1;var h=s.get(t);if(null==h)return!1;var o=h.length;if(o<=0)return!1;for(var a=0;a<o;++a){var c=h[a];c.range.set(e,u),void 0!==i&&(c.time=i),void 0!==r&&(c.state=r),c.value=n}return!0},t.prototype.toDirty=function(t){var n=this.Bt;if(null==n)return!1;var i=n.get(t);if(null==i)return!1;var r=i.length;if(r<=0)return!1;for(var e=0;e<r;++e)i[e].toDirty();return!0},t.prototype.each=function(t){var n=this.Bt;if(null==n)return null;var i=null;return n.forEach((function(n,r){null==i&&!1===t(r)&&(i=r)})),i},t}(),Rt=function(){function t(){this.L=[],this.Pt=!0}return Object.defineProperty(t.prototype,"values",{get:function(){return this.L},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChanged",{get:function(){return this.Pt},set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){var t=this.L;return 0<t.length?t[0].id:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"as",{get:function(){var t=this.L;return 0<t.length?t[0].as:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){var t=this.L;return 0<t.length?t[0].type:Mt.NUMBER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scope",{get:function(){var t=this.L;return 0<t.length?t[0].scope:St.PRIVATE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initial",{get:function(){var t=this.L;return 0<t.length?t[0].initial:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){var t=this.L;return 0<t.length?t[0].format:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){var t=this.L;return 0<t.length?t[0].range:null!=_?_:_=new Dt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this.L;return 0<t.length?t[0].value:0},set:function(t){var n=this.L;0<n.length&&(n[0].value=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nvalue",{get:function(){var t=this.L;return 0<t.length?t[0].nvalue:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var t=this.L;return 0<t.length?t[0].time:0},set:function(t){var n=this.L;0<n.length&&(n[0].time=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){var t=this.L;return 0<t.length?t[0].state:jt.UNKOWN},set:function(t){var n=this.L;0<n.length&&(n[0].state=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"capacity",{get:function(){var t=this.L;return 0<t.length?t[0].capacity:0},set:function(t){var n=this.L;0<n.length&&(n[0].capacity=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alias",{get:function(){var t=this.Ft;return null==t&&(t=this.newAlias(),this.Ft=t),t},enumerable:!1,configurable:!0}),t.prototype.newAlias=function(){var t=this.L,n=t.length;if(0<n){for(var i={},r=0;r<n;++r){var e=t[r];i[e.as||e.id]=e}return i}return null!=P?P:P={}},Object.defineProperty(t.prototype,"mapping",{get:function(){var t=this.Ut;return null==t&&(t=this.newMapping(),this.Ut=t),t},enumerable:!1,configurable:!0}),t.prototype.newMapping=function(){return new It},t.prototype.getMapping=function(){return this.Ut},Object.defineProperty(t.prototype,"private",{get:function(){var t=this.Gt;return null==t&&(t=this.newPrivate(),this.Gt=t),t},enumerable:!1,configurable:!0}),t.prototype.newPrivate=function(){return new At},t.prototype.getPrivate=function(){return this.Gt},t.prototype.add=function(t,n){var i=this.L;t.parent=this,void 0===n?i.push(t):i.splice(n,0,t)},t.prototype.set=function(t,n){var i=this.L;if(0<=t&&t<i.length){var r=i[t];return n.parent=this,i[t]=n,r.parent=void 0,r}return null},t.prototype.remove=function(t){var n=this.L;0<=t&&t<n.length&&(n.splice(t,1)[0].parent=void 0)},t.prototype.indexOf=function(t){for(var n=this.L,i=n.length,r=0;r<i;++r)if(n[r]===t)return r;for(r=0;r<i;++r)if(n[r].isEquals(t))return r;for(r=0;r<i;++r)if(n[r].id===t.id)return r;return-1},t.prototype.get=function(t){var n=this.L;return 0<=t&&t<n.length?n[t]:null},t.prototype.size=function(){return this.L.length},t.prototype.swap=function(t,n){var i=this.L,r=i[n];i[n]=i[t],i[t]=r},t.prototype.copy=function(t){var n=this.L;n.length=0;for(var i=0,r=t.size();i<r;++i){var e=t.get(i);if(null!=e){var u=(new Nt).copy(e);u.parent=this,n.push(u)}}var s=t.getMapping();return s&&this.mapping.copy(s),this},t.prototype.serialize=function(t){for(var n=this.L,i=[],r=0,e=n.length;r<e;++r)i.push(n[r].serialize(t));var u=this.Ut;return null!=u?(i.push(u.serialize(t)),t.addResource("[".concat(JSON.stringify(i),"]"))):t.addResource(JSON.stringify(i))},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getData(t);null==r&&(r=JSON.parse(i[t]),n.setData(t,r));var e=this.L;if(e.length=0,this.isMapped(r)){for(var u=r[0],s=u.length,h=0,o=s-1;h<o;++h){var a=u[h];(c=new Nt).parent=this,c.deserialize(a,n),e.push(c)}this.mapping.deserialize(u[s-1],n)}else for(h=0,o=r.length;h<o;++h){var c;a=r[h],(c=new Nt).parent=this,c.deserialize(a,n),e.push(c)}}},t.prototype.isMapped=function(t){return 0<t.length&&Ct(t[0])},t}(),yt=function(){function t(t,n,i){this.p=t,this.zt=n,this.Ht=i}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.zt},set:function(t){this.zt!==t&&(this.zt=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return this.Ht},set:function(t){this.Ht!==t&&(this.Ht=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.horizontal,t.vertical)},t.prototype.set=function(t,n){var i=!1;null!=t&&this.zt!==t&&(this.zt=t,i=!0),null!=n&&this.Ht!==n&&(this.Ht=n,i=!0),i&&this.p.updateUploaded()},t.prototype.toObject=function(){return{horizontal:this.zt,vertical:this.Ht}},t.prototype.serialize=function(t){return t.addResource("[".concat(this.zt,",").concat(this.Ht,"]"))},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getAlign(t);if(null!=r)this.set(r[0],r[1]);else{var e=JSON.parse(i[t]);n.setAlign(t,e),this.set(e[0],e[1])}}},t}(),Lt=function(){function t(t,n,i){this.p=t,this.zt=n,this.Ht=i}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.zt},set:function(t){this.zt!==t&&(this.zt=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return this.Ht},set:function(t){this.Ht!==t&&(this.Ht=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.horizontal,t.vertical)},t.prototype.set=function(t,n){var i=!1;null!=t&&this.zt!==t&&(this.zt=t,i=!0),null!=n&&this.Ht!==n&&(this.Ht=n,i=!0),i&&this.p.updateUploaded()},t.prototype.toObject=function(){return{horizontal:this.zt,vertical:this.Ht}},t.prototype.serialize=function(t){return t.addResource("[".concat(this.zt,",").concat(this.Ht,"]"))},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getMargin(t);if(null!=r)this.set(r[0],r[1]);else{var e=JSON.parse(i[t]);n.setMargin(t,e),this.set(e[0],e[1])}}},t}(),kt=function(){function t(t,n,i,r,e){this.p=t,this.O=n,this.S=i,this.j=r,this.Mt=e}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.Mt},set:function(t){this.Mt!==t&&(this.Mt=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){t&&this.set(t.enable,t.color,t.alpha,t.width)},t.prototype.set=function(t,n,i,r){var e=!1;void 0!==t&&this.O!==t&&(this.O=t,e=!0),void 0!==n&&this.S!==n&&(this.S=n,e=!0),void 0!==i&&this.j!==i&&(this.j=i,e=!0),void 0!==r&&this.Mt!==r&&(this.Mt=r,e=!0),e&&this.p.updateUploaded()},t.prototype.clone=function(){return new t(this.p,this.O,this.S,this.j,this.Mt)},t.prototype.toObject=function(){return{enable:this.O,color:this.S,alpha:this.j,width:this.Mt}},t.prototype.serialize=function(t){var n="[".concat(this.O?1:0,",").concat(this.S,",").concat(this.j,",").concat(this.Mt,"]");return t.addResource(n)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getTextOutline(t);if(null!=r)this.set(!!r[0],r[1],r[2],r[3]);else{var e=JSON.parse(i[t]);n.setTextOutline(t,e),this.set(!!e[0],e[1],e[2],e[3])}}},t}(),xt=function(){function t(t,n,i,r,e,u){this.p=t,this.O=!0,this.At=n,this.S=i,this.j=r,this.Vt=e,this.T=u,this.Wt=d.NORMAL,this.align=new yt(t,m.CENTER,w.MIDDLE),this.offset=new Lt(t,0,0),this.B=g.NORMAL,this.spacing=new Lt(t,0,0),this.outline=new kt(t,!1,16777215,1,.5),this.Xt=p.LEFT_TO_RIGHT,this.padding=new Lt(t,10,10),this.Yt=!1}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.At},set:function(t){if(this.At!==t){this.At=t;var n=this.p,i=n.uploaded;if(null==i||!i.isCompatible(n))return this.atlas=void 0,void n.toDirty();var r=this.atlas,e=r&&r.characters;if(null==e)return this.atlas=void 0,void n.toDirty();for(var u=0,s=t.length;u<s;++u)if(!(t[u]in e))return this.atlas=void 0,void n.toDirty();n.updateUploaded()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.Vt},set:function(t){this.Vt!==t&&(this.Vt=t,this.p.toDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this.Wt},set:function(t){this.Wt!==t&&(this.Wt=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.B},set:function(t){this.B!==t&&(this.B=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this.Xt},set:function(t){this.Xt!==t&&(this.Xt=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clipping",{get:function(){return this.Yt},set:function(t){this.Yt!==t&&(this.Yt=t,this.p.updateUploaded())},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return t&&(this.set(t.value,t.color,t.alpha,t.family,t.size,t.weight,t.style,t.direction,t.clipping),this.align.copy(t.align),this.offset.copy(t.offset),this.outline.copy(t.outline),this.spacing.copy(t.spacing),this.padding.copy(t.padding)),this},t.prototype.set=function(t,n,i,r,e,u,s,h,o){var a=!1,c=!1;return null!=t&&this.At!==t&&(this.At=t,a=!0),null!=n&&this.S!==n&&(this.S=n,c=!0),null!=i&&this.j!==i&&(this.j=i,c=!0),null!=r&&this.Vt!==r&&(this.Vt=r,a=!0),null!=e&&this.T!==e&&(this.T=e,c=!0),null!=u&&this.Wt!==u&&(this.Wt=u,c=!0),null!=s&&this.B!==s&&(this.B=s,c=!0),null!=h&&this.Xt!==h&&(this.Xt=h,c=!0),null!=o&&this.Yt!==o&&(this.Yt=o,c=!0),a?this.p.toDirty():c&&this.p.updateUploaded(),this},t.prototype.toObject=function(){return{value:this.At,color:this.S,alpha:this.j,family:this.Vt,size:this.T,weight:this.Wt,align:this.align.toObject(),offset:this.offset.toObject(),style:this.B,outline:this.outline.toObject(),direction:this.Xt,spacing:this.spacing.toObject(),padding:this.padding.toObject(),clipping:this.Yt}},t.prototype.serialize=function(t){var n=t.addResource(this.At),i=t.addResource(this.Vt),r=this.align.serialize(t),e=this.offset.serialize(t),u=this.outline.serialize(t),s=this.spacing.serialize(t),h=this.padding.serialize(t),o="[".concat(n,",").concat(this.S,",").concat(this.j,",").concat(i,",").concat(this.T,",")+"".concat(this.Wt,",").concat(r,",").concat(e,",").concat(this.B,",").concat(u,",")+"".concat(s,",").concat(this.Xt,",").concat(h,",").concat(this.Yt?1:0,"]");return t.addResource(o)},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getText(t);null==r&&(r=JSON.parse(i[t]),n.setText(t,r)),this.set(i[r[0]]||"",r[1],r[2],i[r[3]]||"auto",r[4],r[5],r[8],r[11],!!r[13]),this.align.deserialize(r[6],n),this.offset.deserialize(r[7],n),this.outline.deserialize(r[9],n),this.spacing.deserialize(r[10],n),this.padding.deserialize(r[12],n)}},t}(),Bt=function(n){function i(t){var i=n.call(this,t)||this;i.size=i.newSize(),i.fill=i.newFill(),i.stroke=i.newStroke(),i.Kt=K.RADIUS,i.Jt=it.ALL;var r=new Rt;return i.data=r,i.tag=r,i.text=i.newText(),i.cursor=K.CURSOR,i}return B(i,n),i.prototype.newSize=function(){var n=this;return new t.ObservablePoint((function(){n.onSizeChange()}),void 0,K.SIZE_X,K.SIZE_Y)},i.prototype.newFill=function(){return new Z(this,!0,K.FILL_COLOR,K.FILL_ALPHA)},i.prototype.newStroke=function(){return new pt(this,!0,K.STROKE_COLOR,K.STROKE_ALPHA,K.STROKE_WIDTH,K.STROKE_ALIGN,K.STROKE_SIDE,K.STROKE_STYLE)},i.prototype.newText=function(){return new xt(this,K.TEXT_VALUE,K.TEXT_COLOR,K.TEXT_ALPHA,K.TEXT_FAMILY,K.TEXT_SIZE)},Object.defineProperty(i.prototype,"corner",{get:function(){return this.Jt},set:function(t){this.Jt!==t&&(this.Jt=t,this.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this.Kt},set:function(t){this.Kt!==t&&(this.Kt=t,this.updateUploaded())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"image",{get:function(){return this.bt},set:function(t){if(this.bt!==t){null!=t?(this.bt=t,this.imageSrc=t.src):(this.bt=void 0,this.imageSrc=void 0);var n=this.parent;null!=n&&n.toDirty()}},enumerable:!1,configurable:!0}),i}(wt),_t=function(t,n,i,r,e,u,s){if(t.fill.enable){if((c=n*n)*(o=e*e)+(f=i*i)*(h=r*r)<=h*o)return!0}else if(0<u){var h,o,a=u*s,c=n*n,f=i*i,l=Math.max(0,r-a),v=Math.max(0,e-a),b=l*l,d=v*v;if(b*d<=c*d+f*b&&c*(o=e*e)+f*(h=r*r)<=h*o)return!0}return!1},Pt={NONE:0,TOP:1,RIGHT:2,BOTTOM:4,LEFT:8,TOP_OR_LEFT:9,TOP_OR_RIGHT:3,BOTTOM_OR_LEFT:12,BOTTOM_OR_RIGHT:6,ALL:15},Ft=function(t,n,i,r,e,u,s){if(gt(n,i,r,e)){if(t.fill.enable)return!0;var h=t.stroke.side;if(0<u&&h!==Pt.NONE){var o=u*s,a=Math.max(0,r-o),c=Math.max(0,e-o);if(!gt(n,i,a,c))return!(h!==Pt.ALL&&!(n<=-a?i<=-c?h&Pt.TOP_OR_LEFT:+c<=i?h&Pt.BOTTOM_OR_LEFT:h&Pt.LEFT:+a<=n?i<=-c?h&Pt.TOP_OR_RIGHT:+c<=i?h&Pt.BOTTOM_OR_RIGHT:h&Pt.RIGHT:i<=-c?h&Pt.TOP:+c<=i&&h&Pt.BOTTOM))}}return!1},Ut=function(t,n,i,r,e){return+i*t+r-n<=0&&-i*t+r-n<=0&&n<=e},Gt=function(t,n,i,r,e,u,s){var h=2*e/r;if(t.fill.enable){if(Ut(n,i,h,-e,+e))return!0}else if(0<u){var o=u*s;if(Ut(n,i,h,-e,+e)){var a=2*r*e/(r+Math.sqrt(r*r+4*e*e)),c=e-a,f=c+(-e-c)*Math.max(0,a-o)/a;if(!Ut(n,i,h,f,e-o))return!0}}return!1},zt=function(t,n,i){return.5*(i+t*n)},Ht=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getHitTestSize=function(n){var i=this.gt.formatted;if("boundary"in i){var r=i.boundary;n.width=Math.max(Math.abs(r[0]),Math.abs(r[2])),n.height=Math.max(Math.abs(r[1]),Math.abs(r[3]))}else t.prototype.getHitTestSize.call(this,n);return n},n.prototype.toMarkerSize=function(t){var n=0,i=t.getMarker();if(i){var r=i.head;if(r.type!==J.NONE){var e=r.size;n=Math.max(n,2*Math.max(Math.abs(e.x),Math.abs(e.y)))}var u=i.tail;u.type!==J.NONE&&(e=u.size,n=Math.max(n,2*Math.max(Math.abs(e.x),Math.abs(e.y))))}return n},n.prototype.containsAbsMarker=function(t,n,i,r,e,u){var s=t.type;if(s!==J.NONE){var h=t.transform,o=h.a,a=h.b,c=h.c,f=h.d,l=h.tx,v=h.ty,b=1/(o*f-c*a),d=(f*n-c*i+v*c-l*f)*b,g=(o*i-a*n-v*o+l*a)*b,m=t.size,w=.5*m.x,p=.5*m.y;w<0&&(w=-w,n=-n),p<0&&(p=-p,i=-i);var O=r*e*u;switch(w+=O,p+=O,s){case J.CIRCLE:return _t(this,d,g,w,p,r,e);case J.TRIANGLE:return Gt(this,d,g,w,p,r,e);case J.RECTANGLE:return Ft(this,d,g,w,p,r,e)}}return!1},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=this.gt,o=zt(e,u,0),a=o+this.toMarkerSize(h);if(this.containsAbsBBox(t,n,i+a,r+a)){var c=h.getMarker();if(c){if(this.containsAbsMarker(c.head,t,n,e,u,s))return!0;if(this.containsAbsMarker(c.tail,t,n,e,u,s))return!0}var f=this.calcHitPointAbsHitTester;return h.calcHitPointAbs(t,n,i,r,o,null,f,null)}return!1},n.prototype.calcHitPart=function(t,n){var i=this.toHitTestData(t,n),r=i.strokeWidth,e=i.strokeScale,u=zt(r,e,0),s=this.gt,h=u+this.toMarkerSize(s),o=i.x,a=i.y,c=i.width,f=i.height;if(this.containsAbsBBox(o,a,c+h,f+h)){var l=s.getMarker();if(l){var v=i.strokeAlign;if(this.containsAbsMarker(l.head,o,a,r,e,v))return nt.MARKER_HEAD;if(this.containsAbsMarker(l.tail,o,a,r,e,v))return nt.MARKER_TAIL}var b=this.calcHitPointAbsHitTester;if(s.calcHitPointAbs(o,a,c,f,u,null,b,null))return nt.LINE}return this.containsText(t,n)?nt.TEXT:this.containsChildren(t,n)?nt.CHILDREN:nt.NONE},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.gt,h=this.toHitTestData(t,n),o=(i||zt)(h.strokeWidth,h.strokeScale,0);return!!this.containsAbsBBox(h.x,h.y,h.width+o,h.height+o)&&s.calcHitPointAbs(h.x,h.y,h.width,h.height,o,r,e,u)},n.prototype.calcHitPointAbsHitTester=function(t,n,i,r,e,u,s,h,o){var a=e-i,c=u-r,f=t-i,l=n-r,v=a*a+c*c,b=a*f+c*l,d=f*f+l*l;if(1e-4<v){var g=Math.max(0,Math.min(1,b/v));if(v*g*g-2*b*g+d<h*h)return!0}return!1},n}(Bt),Vt=function(t){function n(n){void 0===n&&(n=r.BAR);var i=t.call(this,n)||this;return i.gt=new tt(i),i}return B(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbsBBox=function(n,i,r,e){var u=Math.max(0,this.gt.size);return t.prototype.containsAbsBBox.call(this,n,i,r+u,e+u)},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n);return i[15]=this.gt.serialize(n),i},n}(Ht),Wt=function(t){function n(n,i){var r=t.call(this,n,i,4,2)||this;return r.pointsId=NaN,r.pointsStyle=U.NONE,r}return B(n,t),n.prototype.init=function(t){var n=this.vertexOffset,i=this.indexOffset;t.updateClippings(),t.updateIndices(),c(t.clippings,n),f(t.indices,n,i)},n.prototype.update=function(t,n){this.updateVertexStepAndColorFill(t,n),this.updateColorStroke(t,n),this.updateUv(t,n)},n.prototype.updateVertexStepAndColorFill=function(t,n){if(n instanceof Vt){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=n.stroke,h=s.enable?s.width:0,o=s.style,a=h!==this.strokeWidth||o!==this.strokeStyle,c=H(n),f=this.transformLocalId!==c,v=n.points,b=v.id,d=b!==this.pointsId,g=v.style,m=g!==this.pointsStyle;(u||f||a||d||m)&&(this.sizeX=r,this.sizeY=e,this.strokeWidth=h,this.strokeStyle=o,this.transformLocalId=c,this.pointsId=b,this.pointsStyle=g,d&&(this.textureTransformId=NaN),t.updateVertices(),t.updateSteps(),t.updateColorFills(),l(t.vertices,t.steps,t.colorFills,this.vertexOffset,v.values,v.size,h,o,n.transform.internalTransform))}},n.prototype.updateUv=function(t,n){var i=V(n),r=W(i);i===this.texture&&r===this.textureTransformId||(this.texture=i,this.textureTransformId=r,t.updateUvs(),v(t.uvs,this.vertexOffset,X(i)))},n}(z),Xt=function(){function n(t,n,i,r){this.vertexOffset=t,this.indexOffset=n,this.vertexCount=i,this.indexCount=r,this.sizeX=NaN,this.sizeY=NaN,this.transformLocalId=NaN,this.scaleX=1,this.scaleY=1,this.size=NaN,this.family="auto",this.value="",this.texture=null,this.textureTransformId=NaN,this.color=NaN,this.alpha=NaN,this.weight=NaN,this.style=NaN,this.alignHorizontal=NaN,this.alignVertical=NaN,this.offsetHorizontal=NaN,this.offsetVertical=NaN,this.outlineWidth=NaN,this.outlineColor=NaN,this.outlineAlpha=NaN,this.spacingHorizontal=NaN,this.spacingVertical=NaN,this.direction=NaN,this.paddingHorizontal=NaN,this.paddingVertical=NaN,this.clipping=!1}return n.prototype.init=function(t){var n=this.vertexCount;if(0<n){var i=this.vertexOffset;t.updateClippings(),S(t.clippings,i,n),t.updateIndices(),j(t.indices,i,this.indexOffset,this.indexCount)}},n.prototype.isCompatible=function(t){return 4*M(t)===this.vertexCount},n.prototype.update=function(t,n){if(0<this.vertexCount){var i=n.text.atlas;null!=i&&(this.updateVertex(t,n,i),this.updateColorFill(t,n),this.updateColorStroke(t,n),this.updateStep(t,n))}},n.prototype.updateVertex=function(n,i,r){var e=i.size,u=e.x,s=e.y,h=u!==this.sizeX||s!==this.sizeY,o=H(i),a=this.transformLocalId!==o,c=i.text,f=c.size,l=c.family,v=c.value,b=c.style,d=c.align.horizontal,g=c.align.vertical,m=c.offset.horizontal,w=c.offset.vertical,p=c.spacing.horizontal,O=c.spacing.vertical,D=c.direction,E=c.padding.horizontal,M=c.padding.vertical,S=c.clipping,j=c.texture||t.Texture.WHITE,T=W(j),N=v!==this.value||l!==this.family,C=f!==this.size,A=b!==this.style,R=d!==this.alignHorizontal||g!==this.alignVertical,y=m!==this.offsetHorizontal||w!==this.offsetVertical,L=p!==this.spacingHorizontal||O!==this.spacingVertical||E!==this.paddingHorizontal||M!==this.paddingVertical,k=D!==this.direction,x=this.clipping!==S,B=j!==this.texture||T!==this.textureTransformId;if(h||a||N||C||A||R||y||L||k||x||B){this.size=f,this.family=l,this.value=v,this.style=b,this.alignHorizontal=d,this.alignVertical=g,this.offsetHorizontal=m,this.offsetVertical=w,this.spacingHorizontal=p,this.spacingVertical=O,this.direction=D,this.paddingHorizontal=E,this.paddingVertical=M,this.clipping=S,this.texture=j,this.textureTransformId=T,C&&(this.weight=NaN),n.updateVertices(),n.updateUvs();var _=i.size,P=c.world;null==P&&(P=[0,0,0,0,0,0,0,0],c.world=P),I(n.vertices,n.uvs,this.vertexOffset,this.vertexCount,0,0,_.x,_.y,r,f,v,b,d,g,m,w,p,O,D,E,M,S,P,X(j),i.transform.internalTransform)}},n.prototype.updateColorFill=function(t,n){var i=n.text,r=i.color,e=n.visible&&i.enable?i.alpha:0;r===this.color&&e===this.alpha||(this.color=r,this.alpha=e,t.updateColorFills(),G(r,e,this.vertexOffset,this.vertexCount,t.colorFills))},n.prototype.updateColorStroke=function(t,n){var i=n.text,r=i.outline,e=r.color,u=n.visible&&i.enable?r.alpha:0;e===this.outlineColor&&u===this.outlineAlpha||(this.outlineColor=e,this.outlineAlpha=u,t.updateColorStrokes(),G(e,u,this.vertexOffset,this.vertexCount,t.colorStrokes))},n.prototype.updateStep=function(t,n){var i=n.text,r=i.outline,e=r.enable?r.width:0,u=e!==this.outlineWidth,s=i.weight,h=s!==this.weight,o=1,a=1,c=i.world;null!=c&&(o=c[8],a=c[9]);var f=D<Math.abs(this.scaleX-o)||D<Math.abs(this.scaleY-a);(h||u||f)&&(this.weight=s,this.outlineWidth=e,this.scaleX=o,this.scaleY=a,t.updateSteps(),T(t.steps,this.vertexOffset,this.vertexCount,i.atlas,i.size,e,s,this.scaleX,this.scaleY))},n.prototype.buildUnit=function(n){if(0<this.vertexCount){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;r!==n.baseTexture&&(n.baseTexture=r,n.push(i,this.indexOffset))}},n}(),Yt=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=4+h,c=2+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Wt(i,r),new Xt(i+4,r+2,h,o)]).init(n):null},Kt=function(t,n,i){var r=t.length;if(n<r)return t;for(var e="",u=0,s=n-r;u<s;++u)e+=i;return e+t},Jt=function(){function t(){}return t.toCode=function(t){return Kt(t.toString(16).toUpperCase(),6,"0")},t.fromCode=function(t){var n=t.trim().toLowerCase();if(6===n.length){var i=Number("0x".concat(n));if(i==i)return i}return null},t.fromRgb=function(t,n,i){return 255*t<<16|255*n<<8|255*i|0},t.blend=function(t,n,i){var r=t>>16&255,e=t>>8&255,u=255&(0|t),s=n>>16&255,h=n>>8&255,o=255&(0|n),a=Math.max(0,Math.min(1,i)),c=1-a;return Math.max(0,Math.min(255,r*c+s*a))<<16|Math.max(0,Math.min(255,e*c+h*a))<<8|0|Math.max(0,Math.min(255,u*c+o*a))},t.brighten=function(t,n){return 0<=n?this.blend(t,16777215,n):this.blend(t,0,-n)},t.darken=function(t,n){return 0<=n?this.blend(t,0,n):this.blend(t,16777215,-n)},t.toGrayscale=function(t){var n=this.toLuma(t);return n<<16|n<<8|n},t.toLuma=function(t){return.2126*(t>>16&255)+.7152*(t>>8&255)+.0722*(255&(0|t))&255},t}(),Zt=function(){function t(){}return t.isActivateKey=function(t){return"Space"===t.key||"Enter"===t.key||32===t.which||13===t.which},t.isArrowUpKey=function(t){return"ArrowUp"===t.key||38===t.which},t.isArrowDownKey=function(t){return"ArrowDown"===t.key||40===t.which},t.isArrowLeftKey=function(t){return"ArrowLeft"===t.key||37===t.which},t.isArrowRightKey=function(t){return"ArrowRight"===t.key||39===t.which},t.isCancelKey=function(t){return"Esc"===t.key||27===t.which},t.isFocusKey=function(t){return"Tab"===t.key||9===t.which},t.isUndoKey=function(t){return t.ctrlKey&&("z"===t.key||90===t.which)},t.isRedoKey=function(t){return t.ctrlKey&&("y"===t.key||89===t.which)},t.isSaveKey=function(t){return t.ctrlKey&&!t.shiftKey&&("s"===t.key||83===t.which)},t.isSaveAsKey=function(t){return t.ctrlKey&&t.shiftKey&&("S"===t.key||83===t.which)},t.isDeleteKey=function(t){return"Delete"===t.key||46===t.which},t.isSelectAllKey=function(t){return t.ctrlKey&&!t.shiftKey&&("a"===t.key||65===t.which)},t.isOkKey=function(t){return"Enter"===t.key||13===t.which},t.getFocusDirection=function(t){return!0!==t.shiftKey},t.toShortcut=function(t){if(at(t)){var n,i=t,r=i.indexOf("->"),e=void 0;0<=r?(e=i.substring(0,r).trim(),n=i.substring(r+2).trim()):e=i.trim();var u=e.toLowerCase().split("+");return function(t){var n=t.key;if(n.length<=1){t.shift&&(t.key=n.toUpperCase());var i=n.charCodeAt(0);t.which=97<=i&&i<=122?i-32:i}else switch(n){case"Enter":t.which=13;break;case"Space":t.key=" ",t.which=32;break;case"Escape":t.which=27;break;case"F1":t.which=112;break;case"F2":t.which=113;break;case"F3":t.which=114;break;case"F4":t.which=115;break;case"F5":t.which=116;break;case"F6":t.which=117;break;case"F7":t.which=118;break;case"F8":t.which=119;break;case"F9":t.which=120;break;case"F10":t.which=121;break;case"F11":t.which=122;break;case"F12":t.which=123;break;case"CapsLock":t.shift?t.which=20:t.which=240;break;case"ArrowUp":t.which=38;break;case"ArrowDown":t.which=40;break;case"ArrowLeft":t.which=37;break;case"ArrowRight":t.which=39;break;case"Insert":t.which=45;break;case"Delete":t.which=46;break;case"PageUp":t.which=33;break;case"PageDown":t.which=34;break;case"Backspace":t.which=8;break;case";":t.which=187;break;case"Pause":t.which=19;break;case"ScrollLock":t.which=145;break;case"Tab":t.which=9}return t}({alt:0<=u.indexOf("alt"),ctrl:0<=u.indexOf("ctrl"),shift:0<=u.indexOf("shift"),key:u[u.length-1],which:0,event:n})}return t},t.toString=function(t){var n=[];return t.ctrl&&n.push("Ctrl"),t.shift&&n.push("Shift"),t.alt&&n.push("Alt"),n.push(t.key.toUpperCase()),n.join("+")},t.on=function(t,n,i){var r=this.toShortcut(n);document.body.addEventListener("keydown",(function(n){n.altKey!==r.alt||n.ctrlKey!==r.ctrl||n.shiftKey!==r.shift||n.key!==r.key&&n.which!==r.which||(t.state.isActionable&&(null!=r.event?t.emit(r.event):null!=i&&i(n)),n.preventDefault())}))},t.moveFocusVertically=function(n,i,r){if(i.state.isActionable){var e=t.isArrowUpKey(n),u=t.isArrowDownKey(n);if(e||u)return this.moveFocus(u,i,r)}return!1},t.moveFocusHorizontally=function(n,i,r){if(i.state.isActionable){var e=t.isArrowLeftKey(n),u=t.isArrowRightKey(n);if(e||u)return this.moveFocus(u,i,r)}return!1},t.moveFocus=function(t,n,i){var r,e=null!==(r=null==i?void 0:i.picked)&&void 0!==r?r:rt.getLayer(n);if(e){var u=e.getFocusController(),s=u.get();if(null!=s){var h=u.find(s,!1,s.state.isFocusRoot||t,t,n);if(null!=h)return u.focus(h),!0}}return!1},t}(),qt={NONE:0,POSITION_X:1,POSITION_Y:2,POSITION:3,ROTATION:4,COLOR_FILL:8,COLOR_STROKE:16,COLOR_FILL_AND_STROKE:24,COLOR_TEXT:32,COLOR_TEXT_OUTLINE:64,COLOR:120,VISIBILITY:128,HEIGHT:256,WIDTH:512,SIZE:768,TEXT:1024,CURSOR:2048},Qt=function(){function n(n){var i=n.transform,r=i.position;this.x=r.x,this.y=r.y;var e=n.size;this.size=new t.Point(e.x,e.y),this.rotation=i.rotation,this.actions=[],this.fill=n.fill.toObject(),this.stroke=n.stroke.toObject(),this.text=n.text.toObject(),this.cursor=n.cursor,this.reset=qt.NONE,this.written=qt.NONE,this.effect=NaN,this.isStateChanged=!1,this.interactive=!1}return n.prototype.initialize=function(t){t.disallowUploadedUpdate(),this.onInitialize(t),t.allowUploadedUpdate()},n.prototype.onInitialize=function(t){for(var n=this.actions,i=0,r=n.length;i<r;++i)n[i].initialize(t,this)},n.prototype.isActionable=function(){return 0<this.actions.length},n.prototype.onClick=function(t,n){var i=t.state;i.isActionable&&(i.isClicked=!0)},n.prototype.onDblClick=function(t,n,i){for(var r=this.actions,e=0,u=r.length;e<u;++e)r[e].onDblClick(t,this,n,i);return!1},n.prototype.onOver=function(t,n){t.state.isHovered=!0},n.prototype.onOut=function(t,n){t.state.isHovered=!1},n.prototype.onDown=function(t,n){for(var i=this.actions,r=0,e=i.length;r<e;++r)i[r].onDowning(t,this,n);if(!t.state.isDown){t.state.addAll(lt.DOWN,ht.PRESSED);var u=rt.getLayer(t);if(u){var s=u.getFocusController();s.focus(s.findParent(t))}}for(r=0,e=i.length;r<e;++r)i[r].onDown(t,this,n)},n.prototype.onUp=function(t,n){var i=t.state;i.isUp||i.set(lt.UP,ht.PRESSED)},n.prototype.onUpOutside=function(t,n){t.state.isPressed=!1},n.prototype.onMove=function(t,n){for(var i=this.actions,r=0,e=i.length;r<e;++r)i[r].onMove(t,this,n)},n.prototype.onKeyDown=function(t,n){return Zt.isActivateKey(n)&&this.onDown(t,n),!1},n.prototype.onKeyUp=function(t,n){if(Zt.isActivateKey(n)){var i=t.state;if(i.isPressed){var r=i.isUp;this.onUp(t,n),!r&&i.isUp&&this.onClick(t,n)}}return!1},n.prototype.onStateChange=function(t,n,i){this.isStateChanged=!0,rt.update(t),n.isFocused?i.isFocused||this.onFocus(t):i.isFocused&&this.onBlur(t)},n.prototype.onFocus=function(t){for(var n=this.actions,i=0,r=n.length;i<r;++i)n[i].onFocus(t,this)},n.prototype.onBlur=function(t){for(var n=this.actions,i=0,r=n.length;i<r;++i)n[i].onBlur(t,this)},n.prototype.update=function(t,n){var i=t.data,r=this.effect<=n;if(i.isChanged||this.isStateChanged||r){this.isStateChanged=!1,i.isChanged=!1,r&&(this.effect=NaN),t.disallowUploadedUpdate(),this.onUpdate(t,n),t.allowUploadedUpdate();var e=this.isStateChanged;t.state.removeAll(lt.CLICKED,lt.DOWN,lt.UP,lt.ACTIVATED,lt.DEACTIVATED),this.isStateChanged=e}},n.prototype.onRender=function(t,n,i){for(var r=this.actions,e=0,u=r.length;e<u;++e)r[e].onRender(t,this,n,i);this.update(t,n)},n.prototype.onUpdate=function(t,n){var i=this.actions;if(0<i.length){this.written=qt.NONE;for(var r=0,e=i.length;r<e;++r)i[r].execute(t,this,n);this.doReset(t)}},n.prototype.doReset=function(t){var n=~this.written&this.reset;if(n!==qt.NONE){if(n&qt.POSITION_X&&(t.transform.position.x=this.x),n&qt.POSITION_Y&&(t.transform.position.y=this.y),n&qt.VISIBILITY&&(t.visible=!0),n&qt.COLOR_FILL){var i=this.fill;t.fill.set(void 0,i.color,i.alpha)}if(n&qt.COLOR_STROKE){var r=this.stroke;t.stroke.set(void 0,r.color,r.alpha)}if(n&qt.COLOR_TEXT){var e=this.text;t.text.set(void 0,e.color,e.alpha)}if(n&qt.COLOR_TEXT_OUTLINE){var u=this.text.outline;t.text.outline.set(void 0,u.color,u.alpha)}n&qt.HEIGHT&&(t.size.y=this.size.y),n&qt.WIDTH&&(t.size.x=this.size.x),n&qt.ROTATION&&(t.transform.rotation=this.rotation),n&qt.TEXT&&(t.text.value=this.text.value),n&qt.CURSOR&&(t.cursor=this.cursor)}},n}(),$t=function(){function t(){}return t.toBaseFill=function(t,n){return(n.written&qt.COLOR_FILL?t:n).fill},t.toBaseStroke=function(t,n){return(n.written&qt.COLOR_STROKE?t:n).stroke},t.toBaseText=function(t,n){return(n.written&qt.COLOR_TEXT?t:n).text},t.toBaseTextOutline=function(t,n){return(n.written&qt.COLOR_TEXT_OUTLINE?t:n).text.outline},t}(),tn={isInitializing:!1},nn=function(){function t(){}return t.from=function(t,n,i,r,e,u){if(t.trim().length<=0)return i;try{var s="try {with (shape) {with (state) {with (data.alias) {with (environment) {"+(e?"var result = (".concat(t,");")+"return (result != null ? ".concat(n,"(result) : null);"):"return ".concat(n,"(").concat(t,");"))+"}}}}} catch (e) {"+"return ".concat(r,";")+"}";return null==u?Function("shape","time","environment",s):Function("shape","time","environment",u,s)}catch(t){return i}},t.ofNumberOrNull=function(t){return this.from(t,"Number",this.NULL,"null",!0)},t.ofStringOrNull=function(t){return this.from(t,"String",this.NULL,"null",!0)},t.ofUnknown=function(t){return this.from(t,"",this.NULL,"null",!1)},t.ofNumber=function(t){return this.from(t,"Number",this.ZERO,"0",!1)},t.ofNumberOrOne=function(t){return this.from(t,"Number",this.ONE,"1",!1)},t.ofNumberOrOneHundred=function(t){return this.from(t,"Number",this.ONE_HUNDRED,"100",!1)},t.ofString=function(t){return this.from(t,"String",this.EMPTY,'""',!1)},t.ofBoolean=function(t){return this.from(t,"Boolean",this.TRUE,"true",!1)},t.ofBooleanOrTrue=function(t){return this.from(t,"Boolean",this.TRUE,"true",!1)},t.ofBooleanOrFalse=function(t){return this.from(t,"Boolean",this.FALSE,"false",!1)},t.ofElementOrNull=function(t){return this.from(t,"",void 0,"null",!1,"container")},t.NULL=function(){return null},t.ZERO=function(){return 0},t.ONE=function(){return 1},t.ONE_HUNDRED=function(){return 100},t.EMPTY=function(){return""},t.TRUE=function(){return!0},t.FALSE=function(){return!1},t}(),rn=function(){function t(t){this.reset=t||qt.NONE}return t.prototype.initialize=function(t,n){},t.prototype.execute=function(t,n,i){},t.prototype.onFocus=function(t,n){},t.prototype.onBlur=function(t,n){},t.prototype.onDowning=function(t,n,i){},t.prototype.onDown=function(t,n,i){},t.prototype.onMove=function(t,n,i){},t.prototype.onDblClick=function(t,n,i,r){},t.prototype.onRender=function(t,n,i,r){},t}(),en=function(t){function n(n,i){var r=t.call(this,i)||this;return r.condition=nn.ofBoolean(n.condition),r}return B(n,t),n}(rn),un=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.interval=n.interval,r}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.interval,e=r<<1,u=i%e;u<r?(this.toOff(t,n),n.effect=i+(r-u)):(this.toOn(t,n),n.effect=i+(e-u))}},n.prototype.toOn=function(t,n){},n.prototype.toOff=function(t,n){},n}(en),sn=function(t){function n(n){return t.call(this,n,qt.COLOR)||this}return B(n,t),n.prototype.toOn=function(t,n){var i=$t.toBaseFill(t,n);t.fill.set(void 0,Jt.brighten(i.color,.5),i.alpha);var r=$t.toBaseStroke(t,n);t.stroke.set(void 0,Jt.brighten(r.color,.5),r.alpha);var e=$t.toBaseText(t,n);t.text.set(void 0,Jt.brighten(e.color,.5),e.alpha);var u=$t.toBaseTextOutline(t,n);t.text.outline.set(void 0,Jt.brighten(u.color,.5),u.alpha),n.written|=this.reset},n}(un),hn=function(t){function n(n){var i=t.call(this,n,qt.COLOR_FILL)||this;return i.color=n.color,i.alpha=n.alpha,i}return B(n,t),n.prototype.toOn=function(t,n){t.fill.set(void 0,this.color,this.alpha),n.written|=this.reset},n}(un),on=function(t){function n(n){var i=t.call(this,n,qt.COLOR_STROKE)||this;return i.color=n.color,i.alpha=n.alpha,i}return B(n,t),n.prototype.toOn=function(t,n){t.stroke.set(void 0,this.color,this.alpha),n.written|=this.reset},n}(un),an=function(t){function n(n){return t.call(this,n,qt.COLOR)||this}return B(n,t),n.prototype.toOn=function(t,n){var i=$t.toBaseFill(t,n);t.fill.set(void 0,Jt.darken(i.color,.5),i.alpha);var r=$t.toBaseStroke(t,n);t.stroke.set(void 0,Jt.darken(r.color,.5),r.alpha);var e=$t.toBaseText(t,n);t.text.set(void 0,Jt.darken(e.color,.5),e.alpha);var u=$t.toBaseTextOutline(t,n);t.text.outline.set(void 0,Jt.darken(u.color,.5),u.alpha),n.written|=this.reset},n}(un),cn=function(t){function n(n){return t.call(this,n,qt.COLOR_FILL_AND_STROKE)||this}return B(n,t),n.prototype.toOn=function(t,n){var i=$t.toBaseFill(t,n);t.fill.set(void 0,i.color,.5*i.alpha);var r=$t.toBaseStroke(t,n);t.stroke.set(void 0,r.color,.5*r.alpha),n.written|=this.reset},n}(un),fn=function(t){function n(n){return t.call(this,n,qt.VISIBILITY)||this}return B(n,t),n.prototype.toOn=function(t,n){t.visible=!0,n.written|=this.reset},n.prototype.toOff=function(t,n){t.visible=!1,n.written|=this.reset},n}(un),ln={VISIBILITY:0,BRIGHTEN:1,DARKEN:2,OPACITY:3,COLOR_FILL:4,COLOR_STROKE:5},vn=function(){function t(t,n){this.type=t,this.condition=n}return t.prototype.isEquals=function(t){return this.type===t.type&&this.condition===t.condition},t.prototype.toLabel=function(){return this.getTheme().toLabel(this)},t.prototype.getTheme=function(){var n;return null!==(n=t.THEME)&&void 0!==n?n:t.THEME=Y.getInstance().get("EShapeActionValue")},t}(),bn=function(t){function n(n,i,r){var e=t.call(this,n,i)||this;return e.subtype=r,e}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.subtype===i.subtype},n}(vn),dn={SHOW_HIDE:0,BLINK:1,TRANSFORM:2,OPEN:3,EMIT_EVENT:4,CHANGE_COLOR_LEGACY:5,CHANGE_TEXT:6,CHANGE_CURSOR:7,MISC:8,CHANGE_COLOR:9,GESTURE:10,EXTENSION:1e3},gn=function(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)},mn=function(){function t(){}return t.toResource=function(t,n,i){if(0<=t&&t<n.length){var r=n[t];if(gn(r)&&0<=r&&r<i.length)return i[r]}return""},t}(),wn=function(t){function n(n,i,r,e,u){var s=t.call(this,dn.BLINK,i,n)||this;return s.interval=r,s.color=e,s.alpha=u,s}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.interval===i.interval&&this.color===i.color&&this.alpha===i.alpha},n.prototype.toRuntime=function(){switch(this.subtype){case ln.BRIGHTEN:return new sn(this);case ln.COLOR_FILL:return new hn(this);case ln.COLOR_STROKE:return new on(this);case ln.DARKEN:return new an(this);case ln.OPACITY:return new cn(this);case ln.VISIBILITY:return new fn(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.interval,",").concat(this.color,",").concat(this.alpha,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources);return new n(t[2],r,t[3],t[4],t[5])},n}(bn),pn=function(){function t(){}return t.blend=function(t,n,i){var r=Math.max(0,Math.min(1,i));return Math.max(0,Math.min(1,t*(1-r)+n*r))},t}(),On=function(t){function n(n){return t.call(this,n,n.subtype<<3)||this}return B(n,t),n.prototype.set=function(t,n,i,r,e,u){var s=this.reset;if(null!=r){if(null!=e)if(null!=u){if(s&qt.COLOR_FILL){var h=$t.toBaseFill(t,n);t.fill.set(void 0,Jt.blend(h.color,r,u),pn.blend(h.alpha,e,u))}s&qt.COLOR_STROKE&&(h=$t.toBaseStroke(t,n),t.stroke.set(void 0,Jt.blend(h.color,r,u),pn.blend(h.alpha,e,u))),s&qt.COLOR_TEXT&&(h=$t.toBaseText(t,n),t.text.set(void 0,Jt.blend(h.color,r,u),pn.blend(h.alpha,e,u))),s&qt.COLOR_TEXT_OUTLINE&&(h=$t.toBaseTextOutline(t,n),t.text.outline.set(void 0,Jt.blend(h.color,r,u),pn.blend(h.alpha,e,u)))}else s&qt.COLOR_FILL&&t.fill.set(void 0,r,e),s&qt.COLOR_STROKE&&t.stroke.set(void 0,r,e),s&qt.COLOR_TEXT&&t.text.set(void 0,r,e),s&qt.COLOR_TEXT_OUTLINE&&t.text.outline.set(void 0,r,e);else null!=u?(s&qt.COLOR_FILL&&(h=$t.toBaseFill(t,n),t.fill.set(void 0,Jt.blend(h.color,r,u),h.alpha)),s&qt.COLOR_STROKE&&(h=$t.toBaseStroke(t,n),t.stroke.set(void 0,Jt.blend(h.color,r,u),h.alpha)),s&qt.COLOR_TEXT&&(h=$t.toBaseText(t,n),t.text.set(void 0,Jt.blend(h.color,r,u),h.alpha)),s&qt.COLOR_TEXT_OUTLINE&&(h=$t.toBaseTextOutline(t,n),t.text.outline.set(void 0,Jt.blend(h.color,r,u),h.alpha))):(s&qt.COLOR_FILL&&(h=$t.toBaseFill(t,n),t.fill.set(void 0,r,h.alpha)),s&qt.COLOR_STROKE&&(h=$t.toBaseStroke(t,n),t.stroke.set(void 0,r,h.alpha)),s&qt.COLOR_TEXT&&(h=$t.toBaseText(t,n),t.text.set(void 0,r,h.alpha)),s&qt.COLOR_TEXT_OUTLINE&&(h=$t.toBaseTextOutline(t,n),t.text.outline.set(void 0,r,h.alpha)));n.written|=s}else null!=e&&(null!=u?(s&qt.COLOR_FILL&&(h=$t.toBaseFill(t,n),t.fill.set(void 0,h.color,pn.blend(h.alpha,e,u))),s&qt.COLOR_STROKE&&(h=$t.toBaseStroke(t,n),t.stroke.set(void 0,h.color,pn.blend(h.alpha,e,u))),s&qt.COLOR_TEXT&&(h=$t.toBaseText(t,n),t.text.set(void 0,h.color,pn.blend(h.alpha,e,u))),s&qt.COLOR_TEXT_OUTLINE&&(h=$t.toBaseTextOutline(t,n),t.text.outline.set(void 0,h.color,pn.blend(h.alpha,e,u)))):(s&qt.COLOR_FILL&&(h=$t.toBaseFill(t,n),t.fill.set(void 0,h.color,e)),s&qt.COLOR_STROKE&&(h=$t.toBaseStroke(t,n),t.stroke.set(void 0,h.color,e)),s&qt.COLOR_TEXT&&(h=$t.toBaseText(t,n),t.text.set(void 0,h.color,e)),s&qt.COLOR_TEXT_OUTLINE&&(h=$t.toBaseTextOutline(t,n),t.text.outline.set(void 0,h.color,e))),n.written|=s)},n}(en),Dn={COLOR_AND_ALPHA:0,COLOR:1,ALPHA:2,CODE:3,BRIGHTNESS:4},En=function(t){function n(n){var i=t.call(this,n)||this;switch(n.target){case Dn.COLOR:i.color=n.color,i.alpha=null;break;case Dn.ALPHA:i.color=null,i.alpha=n.alpha;break;default:i.color=n.color,i.alpha=n.alpha}return i.blend=nn.ofNumberOrNull(n.blend),i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.color,e=this.alpha,u=this.blend(t,i,tn);this.set(t,n,i,r,e,u)}},n}(On),Mn={NONE:0,FILL:1,STROKE:2,TEXT:4,TEXT_OUTLINE:8,FILL_AND_STROKE:3,ALL:15},Sn={FILL:0,STROKE:1,FILL_AND_STROKE:2,TEXT:3,TEXT_OUTLINE:4,ALL:5},jn=function(){function t(){}return t.from=function(t){if(t[0]===dn.CHANGE_COLOR)return t[2];switch(t[2]){case Sn.FILL:return Mn.FILL;case Sn.STROKE:return Mn.STROKE;case Sn.FILL_AND_STROKE:return Mn.FILL_AND_STROKE;case Sn.TEXT:return Mn.TEXT;case Sn.TEXT_OUTLINE:return Mn.TEXT_OUTLINE;case Sn.ALL:return Mn.ALL}},t.unpack=function(t){var n=[];return t&Mn.FILL&&n.push(Mn.FILL),t&Mn.STROKE&&n.push(Mn.STROKE),t&Mn.TEXT&&n.push(Mn.TEXT),t&Mn.TEXT_OUTLINE&&n.push(Mn.TEXT_OUTLINE),n},t.pack=function(t){for(var n=Mn.NONE,i=0,r=t.length;i<r;++i)n|=t[i];return n},t}(),Tn=function(t){function n(n,i,r,e,u,s){var h=t.call(this,dn.CHANGE_COLOR,i,n)||this;return h.target=r,h.color=e,h.alpha=u,h.blend=s,h}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.color===i.color&&this.alpha===i.alpha&&this.blend===i.blend},n.prototype.toRuntime=function(){return new En(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.blend);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.target,",").concat(this.color,",").concat(this.alpha,",").concat(i,"]"))},n.deserialize=function(t,i){var r=jn.from(t),e=mn.toResource(1,t,i.resources),u=mn.toResource(6,t,i.resources);return new n(r,e,t[3],t[4],t[5],u)},n}(bn),Nn=function(t){function n(n){var i=t.call(this,n)||this;return i.brightness=nn.ofNumberOrNull(n.brightness),i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.brightness(t,i,tn);this.set(t,n,i,r)}},n.prototype.set=function(t,n,i,r){var e=this.reset;if(null!=r){var u=this.toAdjusted;if(e&qt.COLOR_FILL){var s=$t.toBaseFill(t,n);t.fill.set(void 0,u(s.color,r),s.alpha)}e&qt.COLOR_STROKE&&(s=$t.toBaseStroke(t,n),t.stroke.set(void 0,u(s.color,r),s.alpha)),e&qt.COLOR_TEXT&&(s=$t.toBaseText(t,n),t.text.set(void 0,u(s.color,r),s.alpha)),e&qt.COLOR_TEXT_OUTLINE&&(s=$t.toBaseTextOutline(t,n),t.text.outline.set(void 0,u(s.color,r),s.alpha)),n.written|=e}},n.prototype.toAdjusted=function(t,n){return 0<=n?Jt.brighten(t,+n):Jt.darken(t,-n)},n}(On),In=function(t){function n(n,i,r){var e=t.call(this,dn.CHANGE_COLOR,i,n)||this;return e.brightness=r,e}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.brightness===i.brightness},n.prototype.toRuntime=function(){return new Nn(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=Dn.BRIGHTNESS,r=t.addResource(this.brightness);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,"]"))},n.deserialize=function(t,i){return new n(jn.from(t),mn.toResource(1,t,i.resources),mn.toResource(4,t,i.resources))},n}(bn),Cn=function(t){function n(n){var i=t.call(this,n)||this;return i.color=nn.ofNumberOrNull(n.color),i.alpha=nn.ofNumberOrNull(n.alpha),i.blend=nn.ofNumberOrNull(n.blend),i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.color(t,i,tn),e=this.alpha(t,i,tn),u=this.blend(t,i,tn);this.set(t,n,i,r,e,u)}},n}(On),An=function(t){function n(n,i,r,e,u){var s=t.call(this,dn.CHANGE_COLOR,i,n)||this;return s.color=r,s.alpha=e,s.blend=u,s}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.color===i.color&&this.alpha===i.alpha&&this.blend===i.blend},n.prototype.toRuntime=function(){return new Cn(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=Dn.CODE,r=t.addResource(this.color),e=t.addResource(this.alpha),u=t.addResource(this.blend);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,",").concat(e,",").concat(u,"]"))},n.deserialize=function(t,i){return new n(jn.from(t),mn.toResource(1,t,i.resources),mn.toResource(4,t,i.resources),mn.toResource(5,t,i.resources),mn.toResource(6,t,i.resources))},n}(bn),Rn=function(t){function n(n){var i=t.call(this,n,qt.CURSOR)||this;return i.name=nn.ofStringOrNull(n.name),i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.name(t,i,tn);null!=r&&(t.cursor=r,n.written|=this.reset)}},n}(en),yn=function(t){function n(n,i){var r=t.call(this,dn.CHANGE_CURSOR,n)||this;return r.name=i,r}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.name===i.name},n.prototype.toRuntime=function(){return new Rn(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.name);return t.addResource("[".concat(this.type,",").concat(n,",").concat(i,"]"))},n.deserialize=function(t,i){return new n(mn.toResource(1,t,i.resources),mn.toResource(2,t,i.resources))},n}(vn),Ln=function(){function t(){}return t.prototype.format=function(t,n,i){return i.getHours()<12?"AM":"PM"},t}(),kn=function(){function t(){}return t.prototype.format=function(t,n,i){return i.getHours()<12?"am":"pm"},t}(),xn=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getDate())},t}(),Bn=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(0|t)},t}(),_n=function(t){this.precision=null!=t?+t.substring(1,t.length):void 0},Pn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.format=function(t,n,i){return t.toExponential(this.precision)},n}(_n),Fn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.format=function(t,n,i){return t.toFixed(this.precision)},n}(_n),Un=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.format=function(t,n,i){var r=this.toAbs(t,n,i);return r<1e-24?this.Zt(t,1,""):r<1e-21?this.Zt(t,1e24,"y"):r<1e-18?this.Zt(t,1e21,"z"):r<1e-15?this.Zt(t,1e18,"a"):r<1e-12?this.Zt(t,1e15,"f"):r<1e-9?this.Zt(t,1e12,"p"):r<1e-6?this.Zt(t,1e9,"n"):r<.001?this.Zt(t,1e6,"μ"):r<1?this.Zt(t,1e3,"m"):r<1e3?this.Zt(t,1,""):r<1e6?this.Zt(t,.001,"k"):r<1e9?this.Zt(t,1e-6,"M"):r<1e12?this.Zt(t,1e-9,"G"):r<1e15?this.Zt(t,1e-12,"T"):r<1e18?this.Zt(t,1e-15,"P"):r<1e21?this.Zt(t,1e-18,"E"):r<1e24?this.Zt(t,1e-21,"Z"):this.Zt(t,1e-24,"Y")},n.prototype.toAbs=function(t,n,i){return Math.abs(t)},n.prototype.Zt=function(t,n,i){return"".concat((t*n).toFixed(this.precision)).concat(i)},n}(_n),Gn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.format=function(t,n,i){return t.toPrecision(this.precision)},n}(_n),zn=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getHours())},t}(),Hn=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getHours()%12)},t}(),Vn=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMonth()+1)},t}(),Wn=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMinutes())},t}(),Xn=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getMilliseconds())},t}(),Yn=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(100*t|0,"%")},t}(),Kn=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(0|t,"%")},t}(),Jn=function(){function t(t,n,i){this.length=t,this.character=n,this.node=i}return t.prototype.format=function(t,n,i){return Kt(this.node.format(t,n,i),this.length,this.character)},t}(),Zn=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"===r[0]?"(".concat(r.substring(1,r.length),")"):r},t}(),qn=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"!==r[0]?"+".concat(r):r},t}(),Qn=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(Math.round(100*t),"%")},t}(),$n=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(Math.round(t),"%")},t}(),ti=function(){function t(t,n,i,r,e,u,s){this.Y=t,this.M=n,this.D=i,this.H=r,this.m=e,this.s=u,this.mi=s}return t.prototype.format=function(t,n,i){if(n<1e3)return"".concat(this.s.format(t,n,i),".").concat(this.mi.format(t,n,i));if(n<6e4)return"".concat(this.m.format(t,n,i),":").concat(this.s.format(t,n,i));if(n<36e5)return"".concat(this.H.format(t,n,i),":").concat(this.m.format(t,n,i));if(n<864e5){var r=this.M.format(t,n,i),e=this.D.format(t,n,i);return"".concat(r,"/").concat(e," ").concat(this.H.format(t,n,i))}return n<2592e6?"".concat(this.M.format(t,n,i),"/").concat(this.D.format(t,n,i)):"".concat(this.Y.format(t,n,i),"/").concat(this.M.format(t,n,i))},t}(),ni=function(){function t(t){this.node=t}return t.prototype.format=function(t,n,i){var r=this.node.format(t,n,i);return 0<r.length&&"-"!==r[0]?" ".concat(r):r},t}(),ii=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toAbs=function(t,n,i){return Math.abs(n)},n}(Un),ri=function(){function t(t){this.str=t}return t.prototype.format=function(t,n,i){return this.str},t}(),ei=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getFullYear())},t}(),ui=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getFullYear()%100)},t}(),si=function(){function t(){}return t.prototype.format=function(t,n,i){var r=i.getTimezoneOffset(),e=r<=0?"+":"-",u=Kt(String(Math.floor(Math.abs(r)/60)),2,"0"),s=Kt(String(Math.floor(Math.abs(r)%60)),2,"0");return"".concat(e).concat(u,":").concat(s)},t}(),hi=function(){function t(){}return t.prototype.format=function(t,n,i){return"".concat(Math.round(t))},t}(),oi=function(){function t(){}return t.prototype.format=function(t,n,i){return String(i.getSeconds())},t}(),ai=void 0,ci=function(t,n,i){switch(t){case"_":return new Jn(n," ",i);case"-":return i;default:return new Jn(n,"0",i)}},fi=function(t,n){switch(t){case"_":return new ni(n);case"+":return new qn(n);case"(":return new Zn(n);default:return n}},li=function(){function t(t){var n=function(t){for(var n=0,i=!1,r=[],e=function(){var t=ai;return t?t.lastIndex=0:ai=t=/%(0|_|-|\+|\()?(\.\d+)?(Y(?:MD?)?|y(?:MD?)?|MD?|D|H(?:ms?)?|h(?:ms?)?|m(?:i|s)?|a|A|s(?:s?i|dt)?|z|%|f(?:si)?|e|g|d|r(?:d|p)|p|P|RP)/g,t}();;){var u=e.exec(t);if(null==u){n<t.length&&r.push(new ri(t.substring(n,t.length)));break}var s=u.index;n<s&&r.push(new ri(t.substring(n,s))),n=s+u[0].length;var h=u[0],o=u[1],a=u[2];switch(u[3]){case"Y":i=!0,r.push(new ei);break;case"YM":i=!0,r.push(new ei,new ri("/"),ci(o,2,new Vn));break;case"YMD":i=!0,r.push(new ei,new ri("/"),ci(o,2,new Vn),new ri("/"),ci(o,2,new xn));break;case"y":i=!0,r.push(ci(o,2,new ui));break;case"yM":i=!0,r.push(ci(o,2,new ui),new ri("/"),ci(o,2,new Vn));break;case"yMD":r.push(ci(o,2,new ui),new ri("/"),ci(o,2,new Vn),new ri("/"),ci(o,2,new xn));break;case"M":i=!0,r.push(ci(o,2,new Vn));break;case"MD":i=!0,r.push(ci(o,2,new Vn),new ri("/"),ci(o,2,new xn));break;case"D":i=!0,r.push(ci(o,2,new xn));break;case"H":i=!0,r.push(ci(o,2,new zn));break;case"Hm":i=!0,r.push(ci(o,2,new zn),new ri(":"),ci(o,2,new Wn));break;case"Hms":i=!0,r.push(ci(o,2,new zn),new ri(":"),ci(o,2,new Wn),new ri(":"),ci(o,2,new oi));break;case"h":i=!0,r.push(ci(o,2,new Hn));break;case"hm":i=!0,r.push(ci(o,2,new Hn),new ri(":"),ci(o,2,new Wn));break;case"hms":i=!0,r.push(ci(o,2,new Hn),new ri(":"),ci(o,2,new Wn),new ri(":"),ci(o,2,new oi));break;case"m":i=!0,r.push(ci(o,2,new Wn));break;case"ms":i=!0,r.push(ci(o,2,new Wn),new ri(":"),ci(o,2,new oi));break;case"mi":i=!0,r.push(ci(o,3,new Xn));break;case"a":i=!0,r.push(new kn);break;case"A":i=!0,r.push(new Ln);break;case"s":i=!0,r.push(ci(o,2,new oi));break;case"sdt":i=!0,r.push(new ti(new ei,ci(o,2,new Vn),ci(o,2,new xn),ci(o,2,new zn),ci(o,2,new Wn),ci(o,2,new oi),ci(o,3,new Xn)));break;case"z":i=!0,r.push(new si);break;case"%":r.push(new ri("%"));break;case"f":r.push(fi(o,new Fn(a)));break;case"e":r.push(fi(o,new Pn(a)));break;case"g":r.push(fi(o,new Gn(a)));break;case"rd":r.push(fi(o,new hi));break;case"d":r.push(fi(o,new Bn));break;case"P":r.push(fi(o,new Yn));break;case"p":r.push(fi(o,new Kn));break;case"RP":r.push(fi(o,new Qn));break;case"rp":r.push(fi(o,new $n));break;case"fsi":r.push(fi(o,new Un(a)));break;case"ssi":r.push(fi(o,new ii(a)));break;default:r.push(new ri(h))}}return{nodes:r,date:i}}(t);this.date=n.date,this.nodes=n.nodes}return t.prototype.format=function(n,i){var r=this.nodes,e=t.DATE;null==e&&(e=new Date,t.DATE=e),this.date&&e.setTime(n);for(var u="",s=0,h=r.length;s<h;++s)u+=r[s].format(n,i,e);return u},t}(),vi=function(){function t(){}return t.create=function(t){return new li(t)},t}(),bi=function(t){function n(n){var i=t.call(this,n,qt.TEXT)||this;return i.number=nn.ofNumber(n.value),i.formatters=new Map,i}return B(n,t),n.prototype.getFormatter=function(t,n){var i=this.formatters,r=n.text.value,e=i.get(r);return void 0===e&&(e=this.newFormatter(r),i.set(r,e)),e},n.prototype.newFormatter=function(t){return 0<(t=t.trim()).length?vi.create(t):null},n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.number(t,i,tn),e=this.getFormatter(t,n);t.text.value=null!=e?e.format(r,0):String(r),n.written|=this.reset}},n}(en),di=function(t){function n(n){var i=t.call(this,n,qt.TEXT)||this;return i.text=nn.ofString(n.value),i}return B(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i,tn)&&(t.text.value=this.text(t,i,tn),n.written|=this.reset)},n}(en),gi={TEXT:0,NUMBER:1},mi=function(t){function n(n,i,r){var e=t.call(this,dn.CHANGE_TEXT,i,n)||this;return e.value=r,e}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.value===i.value},n.prototype.toRuntime=function(){switch(this.subtype){case gi.TEXT:return new di(this);case gi.NUMBER:return new bi(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.value);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources),e=mn.toResource(3,t,i.resources);return new n(t[2],r,e)},n}(bn),wi=function(){function t(t,n,i){this.qt=t,this.Qt=i;var r=null==n?void 0:n.background;r&&(this.S=r.color,this.j=r.alpha)}return t.prototype.getTheme=function(){return this.qt},t.prototype.setTheme=function(t){this.qt=t},t.prototype.getColor=function(t){var n=this.S;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getBackgroundColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.j;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getBackgroundAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.onChange=function(){var t=this.Qt;null!=t&&t()},t}(),pi={NONE:0,TOP:1,RIGHT:2,BOTTOM:4,LEFT:8,TOP_RIGHT:3,TOP_BOTTOM:5,TOP_LEFT:9,RIGHT_BOTTOM:6,RIGHT_LEFT:10,BOTTOM_LEFT:12,NOT_TOP:14,NOT_RIGHT:13,NOT_BOTTOM:11,NOT_LEFT:7,ALL:15},Oi=function(t,n){return at(t)?n[t]:t},Di=function(){function t(t,n,i){this.qt=t,this.Qt=i;var r=null==n?void 0:n.border;r&&(this.S=r.color,this.j=r.alpha,this.Mt=r.width,this.St=r.align,this.$t=Oi(r.mask,pi))}return t.prototype.getTheme=function(){return this.qt},t.prototype.setTheme=function(t){this.qt=t},t.prototype.getColor=function(t){var n=this.S;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getBorderColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.j;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getBorderAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getWidth=function(t){var n=this.Mt;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getBorderWidth(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.Mt},set:function(t){this.Mt!==t&&(this.Mt=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getAlign=function(t){var n=this.St;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getBorderAlign(t)},Object.defineProperty(t.prototype,"align",{get:function(){return this.St},set:function(t){this.St!==t&&(this.St=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.getMask=function(t){var n=this.$t;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getBorderMask(t)},Object.defineProperty(t.prototype,"mask",{get:function(){return this.$t},set:function(t){this.$t!==t&&(this.$t=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.onChange=function(){var t=this.Qt;null!=t&&t()},t}(),Ei={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:4,BOTTOM_RIGHT:8,TOP:3,BOTTOM:12,LEFT:5,RIGHT:10,ALL:15},Mi=function(){function t(t,n,i){this.qt=t,this.Qt=i;var r=null==n?void 0:n.corner;r&&(gn(r)?(this.Kt=r,this.$t=void 0):(this.Kt=r.radius,this.$t=Oi(r.mask,Ei)))}return t.prototype.getTheme=function(){return this.qt},t.prototype.setTheme=function(t){this.qt=t},t.prototype.getRadius=function(){var t;return null!==(t=this.Kt)&&void 0!==t?t:this.qt.getCornerRadius()},Object.defineProperty(t.prototype,"radius",{get:function(){return this.Kt},set:function(t){if(this.Kt!==t){this.Kt=t;var n=this.Qt;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getMask=function(){var t;return null!==(t=this.$t)&&void 0!==t?t:this.qt.getCornerMask()},Object.defineProperty(t.prototype,"mask",{get:function(){return this.$t},set:function(t){if(this.$t!==t){this.$t=t;var n=this.Qt;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;this.Kt!==t&&(this.Kt=t,i=!0),this.$t!==n&&(this.$t=n,i=!0);var r=this.Qt;i&&null!=r&&r()},t}(),Si={NONE:0,SELF:1,CHILDREN:2,BOTH:3},ji=function(){function t(t,n,i){this.qt=t,this.Qt=i;var r=null==n?void 0:n.outline;r&&(this.S=r.color,this.j=r.alpha,this.Mt=r.width,this.tn=r.offset,this.St=r.align,this.$t=Oi(r.mask,pi))}return t.prototype.getTheme=function(){return this.qt},t.prototype.setTheme=function(t){this.qt=t},t.prototype.getColor=function(t){var n=this.S;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getOutlineColor(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){if(this.S!==t){this.S=t;var n=this.Qt;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){var n=this.j;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getOutlineAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){if(this.j!==t){this.j=t;var n=this.Qt;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getWidth=function(t){var n=this.Mt;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getOutlineWidth(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.Mt},set:function(t){if(this.Mt!==t){this.Mt=t;var n=this.Qt;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getOffset=function(t){var n=this.tn;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getOutlineOffset(t)},Object.defineProperty(t.prototype,"offset",{get:function(){return this.tn},set:function(t){if(this.tn!==t){this.tn=t;var n=this.Qt;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getAlign=function(t){var n=this.St;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getOutlineAlign(t)},Object.defineProperty(t.prototype,"align",{get:function(){return this.St},set:function(t){if(this.St!==t){this.St=t;var n=this.Qt;null!=n&&n()}},enumerable:!1,configurable:!0}),t.prototype.getMask=function(t){var n=this.$t;if(void 0!==n){if(!ot(n))return n;var i=n(t);if(void 0!==i)return i}return this.qt.getOutlineMask(t)},Object.defineProperty(t.prototype,"mask",{get:function(){return this.$t},set:function(t){if(this.$t!==t){this.$t=t;var n=this.Qt;null!=n&&n()}},enumerable:!1,configurable:!0}),t}(),Ti=function(){function t(t,n,i){this.qt=t,this.Qt=i;var r=null==n?void 0:n.padding;null!=r&&(gn(r)?(this.nn=r,this.rn=r,this.en=r,this.un=r):(this.nn=r.left,this.rn=r.top,this.en=r.right,this.un=r.bottom))}return t.prototype.getTheme=function(){return this.qt},t.prototype.setTheme=function(t){this.qt=t},t.prototype.getCallback=function(){return this.Qt},t.prototype.getLeft=function(){var t;return null!==(t=this.nn)&&void 0!==t?t:this.qt.getPaddingLeft()},Object.defineProperty(t.prototype,"left",{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t,null!=this.Qt&&this.Qt())},enumerable:!1,configurable:!0}),t.prototype.getTop=function(){var t;return null!==(t=this.rn)&&void 0!==t?t:this.qt.getPaddingTop()},Object.defineProperty(t.prototype,"top",{get:function(){return this.rn},set:function(t){this.rn!==t&&(this.rn=t,null!=this.Qt&&this.Qt())},enumerable:!1,configurable:!0}),t.prototype.getRight=function(){var t;return null!==(t=this.en)&&void 0!==t?t:this.qt.getPaddingRight()},Object.defineProperty(t.prototype,"right",{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t,null!=this.Qt&&this.Qt())},enumerable:!1,configurable:!0}),t.prototype.getBottom=function(){var t;return null!==(t=this.un)&&void 0!==t?t:this.qt.getPaddingBottom()},Object.defineProperty(t.prototype,"bottom",{get:function(){return this.un},set:function(t){this.un!==t&&(this.un=t,null!=this.Qt&&this.Qt())},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r){null==n?(this.top=t,this.right=t,this.bottom=t,this.left=t):null==i?(this.top=t,this.right=n,this.bottom=t,this.left=n):null==r?(this.top=t,this.right=n,this.bottom=i,this.left=n):(this.top=t,this.right=n,this.bottom=i,this.left=r),null!=this.Qt&&this.Qt()},t}(),Ni=function(){function t(t,n){this.sn=t,this.Z=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this.sn.x},set:function(t){var n=this.sn,i=n.x;if(i!==t){n.x=t;var r=n.y;this.Z(t,r,i,r)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.sn.y},set:function(t){var n=this.sn,i=n.y;if(i!==t){n.y=t;var r=n.x;this.Z(r,t,r,i)}},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=this.sn,r=i.x,e=i.y;return r===t&&e===n||(i.set(t,n),this.Z(t,n,r,e)),this},t.prototype.copyFrom=function(t){var n=t.x,i=t.y,r=this.sn,e=r.x,u=r.y;return e===n&&u===i||(r.copyFrom(t),this.Z(n,i,e,u)),this},t.prototype.copyTo=function(t){return t.copyFrom(this.sn)},t.prototype.copy=function(){return this.copyFrom(arguments[0])},t.prototype.clone=function(n){return new t(this.sn,n||this.Z)},t.prototype.equals=function(t){return this.sn.equals(t)},t}(),Ii=function(t){function n(n,i,r){var e=t.call(this,n,i,r)||this;return e.Mt=100,e.hn=100,e.an=0,e.cn=Ei.NONE,e.fn=!0,e.ln=1,e.vn=e.getBuffer("aVertexPosition"),e.bn=e.vn.data,e.dn=e.getBuffer("aTextureCoord"),e._uvs=e.dn.data,e.gn=e.getIndex(),e.mn=e.gn.data,e}return B(n,t),Object.defineProperty(n.prototype,"width",{get:function(){return this.Mt},set:function(t){this.Mt!==t&&(this.Mt=t,this.fn=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.hn},set:function(t){this.hn!==t&&(this.hn=t,this.fn=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cornerRadius",{get:function(){return this.an},set:function(t){this.an!==t&&(this.an=t,this.fn=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cornerMask",{get:function(){return this.cn},set:function(t){this.cn!==t&&(this.cn=t,this.fn=!0)},enumerable:!1,configurable:!0}),n.prototype.getTables=function(){var t=n.TABLES;return null==t&&(t=this.newTables(n.N),n.TABLES=t),t},n.prototype.newTables=function(t){var n=1/(t-1)*.5;return[this.newTable(t,1,n),this.newTable(t,.5,n),this.newTable(t,0,n),this.newTable(t,1.5,n)]},n.prototype.newTable=function(t,n,i){for(var r=[],e=[],u=Math.PI,s=0,h=n;s<t;s+=1,h-=i){var o=h*u,a=+Math.cos(o),c=-Math.sin(o);r.push(a),e.push(c)}return{cos:r,sin:e}},n.N=4,n}(t.MeshGeometry),Ci=function(t){function n(){return t.call(this,new Float32Array(16*Ii.N),new Float32Array(16*Ii.N),new Uint16Array(3*(12*Ii.N-2)))||this}return B(n,t),n.prototype.fillVertices=function(t,n,i,r,e,u,s,h,o,a){for(var c=a.cos,f=a.sin,l=c[0],v=f[0],b=c[e-1],d=f[e-1],g=0;g<e;++g){var m=c[g],w=f[g],p=o,O=m*l+w*v;1e-4<O&&(p=Math.min(p,(1/O-1)*h));var D=m*b+w*d;1e-4<D&&(p=Math.min(p,(1/D-1)*h));var E=h+p;t[++i]=u+m*h,t[++i]=s+w*h,t[++i]=u+m*E,t[++i]=s+w*E,n[++r]=.5,n[++r]=.5,n[++r]=.5*(1+m),n[++r]=.5*(1+w)}},n.prototype.fillIndices=function(t,n,i,r){for(var e=0;e<r;++e)t[++i]=n+0,t[++i]=n+1,t[++i]=n+2,t[++i]=n+2,t[++i]=n+1,t[++i]=n+3,n+=2},n.prototype.fillIndicesEnd=function(t,n,i,r){for(var e=0,u=r-1;e<u;++e)t[++i]=n+0,t[++i]=n+1,t[++i]=n+2,t[++i]=n+2,t[++i]=n+1,t[++i]=n+3,n+=2;t[++i]=n+0,t[++i]=n+1,t[++i]=0,t[++i]=0,t[++i]=n+1,t[++i]=1,n+=2},n.prototype.update=function(t){var n=t.resolution;if(this.fn||this.ln!==n){this.fn=!1,this.ln=n;var i=this.bn,r=this._uvs,e=this.mn,u=this.Mt,s=this.hn,h=Math.min(.5*u,.5*s,this.an),o=1/n,a=h,c=u-h,f=u,l=h,v=s-h,b=s,d=this.cn,g=!(d&Ei.TOP_LEFT),m=!(d&Ei.TOP_RIGHT),w=!(d&Ei.BOTTOM_LEFT),p=!(d&Ei.BOTTOM_RIGHT),O=-1,D=-1,E=0,M=-1,S=Ii.N,j=S<<2,T=S<<1,N=6*S,I=this.getTables(),C=I[0],A=I[1],R=I[2],y=I[3];g?this.fillVertices(i,r,O,D,S,a,l,h,o,C):this.fillVertices(i,r,O,D,S,0,0,0,0,C),this.fillIndices(e,E,M,S),O+=j,D+=j,E+=T,M+=N,m?this.fillVertices(i,r,O,D,S,c,l,h,o,A):this.fillVertices(i,r,O,D,S,f,0,0,0,A),this.fillIndices(e,E,M,S),O+=j,D+=j,E+=T,M+=N,p?this.fillVertices(i,r,O,D,S,c,v,h,o,R):this.fillVertices(i,r,O,D,S,f,b,0,0,R),this.fillIndices(e,E,M,S),O+=j,D+=j,E+=T,M+=N,w?this.fillVertices(i,r,O,D,S,a,v,h,o,y):this.fillVertices(i,r,O,D,S,0,b,0,0,y),this.fillIndicesEnd(e,E,M,S),O+=j,D+=j,E+=T,M+=N,E=2;for(var L=1,k=4*S-1;L<k;L+=1,E+=2)e[++M]=0,e[++M]=E,e[++M]=E+2;this.vn.update(),this.dn.update(),this.gn.update()}},n}(Ii),Ai=function(n){function i(i){var r=n.call(this,new Ci,new t.MeshMaterial(i))||this;return i.on("update",(function(){rt.update(r)})),r}return B(i,n),Object.defineProperty(i.prototype,"width",{get:function(){return this.geometry.width},set:function(t){this.geometry.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.geometry.height},set:function(t){this.geometry.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cornerRadius",{get:function(){return this.geometry.cornerRadius},set:function(t){this.geometry.cornerRadius=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cornerMask",{get:function(){return this.geometry.cornerMask},set:function(t){this.geometry.cornerMask=t},enumerable:!1,configurable:!0}),i.prototype._render=function(t){this.geometry.update(t),n.prototype._render.call(this,t)},i}(t.Mesh),Ri=function(){function t(){}return t.prototype.get=function(t,n){var i=this.wn;return null==i&&((i=new Ai(n.getBackgroundTexture())).parent=t,this.wn=i),i},t.prototype.hide=function(){var t=this.wn;null!=t&&(t.visible=!1)},t.prototype.onReflow=function(t,n,i,r,e,u,s){var h=t.background,o=h.getColor(e);if(null!=o){var a=h.getAlpha(e);if(0<a){var c=this.get(t,r);c.tint=o,c.alpha=a,c.width=n,c.height=i,c.cornerRadius=u,c.cornerMask=s,c.visible=!0}else this.hide()}else this.hide()},t.prototype.render=function(t){var n;null===(n=this.wn)||void 0===n||n.render(t)},t.prototype.updateTransform=function(){var t;null===(t=this.wn)||void 0===t||t.updateTransform()},t}(),yi=function(t){function n(){var n=t.call(this,new Float32Array(32*Ii.N),new Float32Array(32*Ii.N),new Uint16Array(72*Ii.N))||this;return n.pn=0,n.On=pi.NONE,n}return B(n,t),Object.defineProperty(n.prototype,"borderWidth",{get:function(){return this.pn},set:function(t){this.pn!==t&&(this.pn=t,this.fn=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"borderMask",{get:function(){return this.On},set:function(t){this.On!==t&&(this.On=t,this.fn=!0)},enumerable:!1,configurable:!0}),n.prototype.fillVertices=function(t,n,i,r,e,u,s,h,o,a,c){for(var f=.5*a,l=h-f,v=h+f,b=c.cos,d=c.sin,g=b[0],m=d[0],w=b[e-1],p=d[e-1],O=u+(g+w)*l,D=s+(m+p)*l,E=0;E<e;++E){var M=b[E],S=d[E],j=o,T=o,N=M*g+S*m;if(1e-4<N){var I=1/N-1;j=Math.min(j,I*l),T=Math.min(T,I*v)}var C=M*w+S*p;if(1e-4<C){var A=1/C-1;j=Math.min(j,A*l),T=Math.min(T,A*v)}var R=l+j,y=v+T;0<l?(t[++i]=u+M*l,t[++i]=s+S*l,t[++i]=u+M*R,t[++i]=s+S*R):(t[++i]=O,t[++i]=D,t[++i]=O,t[++i]=D),t[++i]=u+M*v,t[++i]=s+S*v,t[++i]=u+M*y,t[++i]=s+S*y,n[++r]=.5*(1+M),n[++r]=.5*(1+S),n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5,n[++r]=.5*(1+M),n[++r]=.5*(1+S)}},n.prototype.fillIndices=function(t,n,i,r,e,u){for(var s=0,h=r-1;s<h;++s)t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=2;e?u?(t[++i]=n+0,t[++i]=n+1,t[++i]=0,t[++i]=0,t[++i]=n+1,t[++i]=1,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=1,t[++i]=1,t[++i]=n+1,t[++i]=2,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=2,t[++i]=2,t[++i]=n+1,t[++i]=3,n+=2):(t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=1,t[++i]=n+0,t[++i]=n+1,t[++i]=n+4,t[++i]=n+4,t[++i]=n+1,t[++i]=n+5,n+=2):(t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,n+=1,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,n+=1,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,t[++i]=n,n+=2)},n.prototype.update=function(t){var n=t.resolution;if(this.fn||this.ln!==n){this.fn=!1,this.ln=n;var i=this.bn,r=this._uvs,e=this.mn,u=this.Mt,s=this.hn,h=this.pn,o=Math.min(.5*u,.5*s,this.an),a=1/n,c=o,f=u-o,l=u,v=o,b=s-o,d=s,g=this.On,m=!(g&pi.TOP),w=!(g&pi.BOTTOM),p=!(g&pi.LEFT),O=!(g&pi.RIGHT),D=this.cn,E=!(D&Ei.TOP_LEFT),M=!(D&Ei.TOP_RIGHT),S=!(D&Ei.BOTTOM_LEFT),j=!(D&Ei.BOTTOM_RIGHT),T=-1,N=-1,I=0,C=-1,A=Ii.N,R=A<<2,y=A<<3,L=18*A,k=this.getTables(),x=k[0],B=k[1],_=k[2],P=k[3];E?p||m?this.fillVertices(i,r,T,N,A,c,v,o,a,h,x):this.fillVertices(i,r,T,N,A,c,v,o,0,0,x):p||m?this.fillVertices(i,r,T,N,A,0,0,0,0,h,x):this.fillVertices(i,r,T,N,A,0,0,0,0,0,x),this.fillIndices(e,I,C,A,m,!1),T+=y,N+=y,I+=R,C+=L,M?m||O?this.fillVertices(i,r,T,N,A,f,v,o,a,h,B):this.fillVertices(i,r,T,N,A,f,v,o,0,0,B):m||O?this.fillVertices(i,r,T,N,A,l,0,0,0,h,B):this.fillVertices(i,r,T,N,A,l,0,0,0,0,B),this.fillIndices(e,I,C,A,O,!1),T+=y,N+=y,I+=R,C+=L,j?O||w?this.fillVertices(i,r,T,N,A,f,b,o,a,h,_):this.fillVertices(i,r,T,N,A,f,b,o,0,0,_):O||w?this.fillVertices(i,r,T,N,A,l,d,0,0,h,_):this.fillVertices(i,r,T,N,A,l,d,0,0,0,_),this.fillIndices(e,I,C,A,w,!1),T+=y,N+=y,I+=R,C+=L,S?w||p?this.fillVertices(i,r,T,N,A,c,b,o,a,h,P):this.fillVertices(i,r,T,N,A,c,b,o,0,0,P):w||p?this.fillVertices(i,r,T,N,A,0,d,0,0,h,P):this.fillVertices(i,r,T,N,A,0,d,0,0,0,P),this.fillIndices(e,I,C,A,p,!0),T+=y,N+=y,I+=R,C+=L,this.vn.update(),this.dn.update(),this.gn.update()}},n}(Ii),Li=function(n){function i(i){var r=n.call(this,new yi,new t.MeshMaterial(i))||this;return i.on("update",(function(){rt.update(r)})),r}return B(i,n),Object.defineProperty(i.prototype,"width",{get:function(){return this.geometry.width},set:function(t){this.geometry.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.geometry.height},set:function(t){this.geometry.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cornerRadius",{get:function(){return this.geometry.cornerRadius},set:function(t){this.geometry.cornerRadius=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cornerMask",{get:function(){return this.geometry.cornerMask},set:function(t){this.geometry.cornerMask=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"borderWidth",{get:function(){return this.geometry.borderWidth},set:function(t){this.geometry.borderWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"borderMask",{get:function(){return this.geometry.borderMask},set:function(t){this.geometry.borderMask=t},enumerable:!1,configurable:!0}),i.prototype._render=function(t){this.geometry.update(t),n.prototype._render.call(this,t)},i}(t.Mesh),ki=function(){function t(){}return t.prototype.get=function(t,n){var i=this.wn;return null==i&&((i=new Li(n.getBorderTexture())).parent=t,this.wn=i),i},t.prototype.hide=function(){var t=this.wn;null!=t&&(t.visible=!1)},t.prototype.onReflow=function(t,n,i,r,e,u,s){var h=t.border,o=h.getColor(e);if(null!=o){var a=h.getAlpha(e);if(0<a){var c=h.getWidth(e),f=h.getMask(e),l=this.get(t,r),v=(h.getAlign(e)-.5)*c;l.tint=o,l.alpha=a,l.x=-v,l.y=-v,l.width=n+2*v,l.height=i+2*v,l.cornerRadius=u,l.cornerMask=s,l.borderWidth=c,l.borderMask=f,l.visible=!0}else this.hide()}else this.hide()},t.prototype.render=function(t){var n;null===(n=this.wn)||void 0===n||n.render(t)},t.prototype.updateTransform=function(){var t;null===(t=this.wn)||void 0===t||t.updateTransform()},t}(),xi=function(){function t(){}return t.prototype.get=function(t,n){var i=this.wn;return null==i&&((i=new Li(n.getBorderTexture())).parent=t,this.wn=i),i},t.prototype.hide=function(){var t=this.wn;null!=t&&(t.visible=!1)},t.prototype.onReflow=function(t,n,i,r,e,u,s){var h=t.outline,o=h.getColor(e);if(null!=o){var a=h.getAlpha(e);if(0<a){var c=h.getWidth(e),f=h.getMask(e),l=this.get(t,r),v=h.getOffset(e)+(h.getAlign(e)-.5)*c;l.tint=o,l.alpha=a,l.x=-v,l.y=-v,l.width=n+2*v,l.height=i+2*v,l.cornerRadius=u,l.cornerMask=s,l.borderWidth=c,l.borderMask=f,l.visible=!0}else this.hide()}else this.hide()},t.prototype.render=function(t){var n;null===(n=this.wn)||void 0===n||n.render(t)},t.prototype.updateTransform=function(){var t;null===(t=this.wn)||void 0===t||t.updateTransform()},t}(),Bi=function(){function t(t){var n=new Ri;this.Dn=n,t.snippet.add(n,!0);var i=new ki;this.En=i,t.snippet.add(i,!0);var r=new xi;this.Mn=r,t.snippet.add(r,!1),t.reflowable.add(this)}return t.prototype.onReflow=function(t,n,i){var r=t.theme,e=t.state,u=t.corner,s=u.getRadius(),h=u.getMask();this.Dn.onReflow(t,n,i,r,e,s,h),this.En.onReflow(t,n,i,r,e,s,h),this.Mn.onReflow(t,n,i,r,e,s,h)},t}(),_i={NONE:0,BEFORE:1,AFTER:2,BOTH:3},Pi={OPEN:0,CLOSE:1,PARENSESIS:2,ADD_OR_PLUS:3,SUB_OR_MINUS:4,PLUS:5,MINUS:6,ADD:7,SUB:8,MUL:9,DIV:10,MIN:11,MAX:12,COMMA:13,PARENT:14,SELF:15,PADDING:16,CURRENT:17,NUMBER:18},Fi=function(){function t(t){var n=this.toToken(t),i=0;do{i=this.toParensesis(n,i)}while(i<n.length);if(this.toUnary(n),this.toArithmetic(n,Pi.MUL,Pi.DIV),this.toArithmetic(n,Pi.ADD,Pi.SUB),1===n.length){var r=n[0];if(!gn(r))return void(this.Sn=r)}throw new Error("Failed to parse '".concat(t,"'"))}return t.prototype.toParensesis=function(t,n){for(var i=t.length,r=n;r<i;++r)if(t[r]===Pi.OPEN){var e=r,u=Pi.PARENSESIS;if(0<r){var s=t[r-1];s!==Pi.MIN&&s!==Pi.MAX||(e-=1,u=s)}for(var h=r+1;h<i;++h){var o=t[h];if(o===Pi.CLOSE)return t[e]=[u,this.toComma(t,r+1,h)],t.splice(e+1,h-e),e+1;o===Pi.OPEN&&(h=this.toParensesis(t,h)-1,i=t.length)}throw new Error("Malformed parensesis")}return i},t.prototype.toCommaOf=function(t,n,i){var r=i-n;if(r<=0)return[Pi.NUMBER,0];if(r<=1)return t[n];for(var e=[],u=n;u<i;++u)e.push(t[u]);return[Pi.PARENSESIS,e]},t.prototype.toComma=function(t,n,i){for(var r=null,e=n,u=n;u<i;++u)t[u]===Pi.COMMA&&((r=r||[]).push(this.toCommaOf(t,e,u)),e=u+1);if(e<i){if(null==r){var s=[];for(u=e;u<i;++u)s.push(t[u]);return s}r.push(this.toCommaOf(t,e,i))}return r||[]},t.prototype.toUnaryNode=function(t){gn(t)||t[0]!==Pi.PARENSESIS&&t[0]!==Pi.MIN&&t[0]!==Pi.MAX||this.toUnary(t[1])},t.prototype.toUnary=function(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(r===Pi.ADD_OR_PLUS||r===Pi.SUB_OR_MINUS)if(n<=0||gn(t[n-1])){if(!(n+1<i)||gn(t[n+1]))throw new Error("Malformed unary operator");var e=t.splice(n+1,1)[0],u=r===Pi.ADD_OR_PLUS?Pi.PLUS:Pi.MINUS;t[n]=[u,e],i=t.length,this.toUnaryNode(e)}else u=r===Pi.ADD_OR_PLUS?Pi.ADD:Pi.SUB,t[n]=u;else this.toUnaryNode(r),i=t.length}},t.prototype.toArithmeticNode=function(t,n,i){gn(t)||(t[0]===Pi.PARENSESIS||t[0]===Pi.MIN||t[0]===Pi.MAX?this.toArithmetic(t[1],n,i):t[0]===Pi.PLUS||t[0]===Pi.MINUS?this.toArithmeticNode(t[1],n,i):t[0]!==Pi.ADD&&t[0]!==Pi.SUB&&t[0]!==Pi.MUL&&t[0]!==Pi.DIV||(this.toArithmeticNode(t[1],n,i),this.toArithmeticNode(t[2],n,i)))},t.prototype.toArithmetic=function(t,n,i){for(var r=0,e=t.length;r<e;++r){var u=t[r];if(u===n||u===i){if(0<r&&r+1<e){var s=t[r-1],h=t[r+1];if(!gn(s)&&!gn(h)){t.splice(r,2),t[r-1]=[u,s,h],r-=1,e=t.length,this.toArithmeticNode(s,n,i),this.toArithmeticNode(h,n,i);continue}}throw new Error("Malformed operands for the operator ".concat(u))}this.toArithmeticNode(u,n,i),e=t.length}},t.prototype.toToken=function(n){for(var i=[];;){var r=t.TOKEN_REGEX.exec(n);if(null==r)break;var e=r[0],u=this.toTokenOperator(e);if(null!=u)i.push(u);else{var s=parseFloat(e);if(s!=s)throw new Error("Unexpected token '".concat(e,"' at ").concat(r.index," in '").concat(n,"'"));var h=this.toTokenLiteral(e);null!=h?i.push([h,.01*s]):i.push([Pi.NUMBER,s])}}return i},t.prototype.toTokenOperator=function(t){switch(t){case"+":return Pi.ADD_OR_PLUS;case"-":return Pi.SUB_OR_MINUS;case"*":return Pi.MUL;case"/":return Pi.DIV;case"(":return Pi.OPEN;case")":return Pi.CLOSE;case",":return Pi.COMMA;case"min":return Pi.MIN;case"max":return Pi.MAX}return null},t.prototype.toTokenLiteral=function(t){var n=t.length;if(0<n)switch(t[n-1]){case"%":return Pi.PARENT;case"s":return Pi.SELF;case"p":return Pi.PADDING;case"c":return Pi.CURRENT}return null},t.prototype.evaluate=function(t,n,i,r,e){switch(t[0]){case Pi.PARENSESIS:var u=t[1];return this.evaluate(u[u.length-1],n,i,r,e);case Pi.PLUS:return+this.evaluate(t[1],n,i,r,e);case Pi.MINUS:return-this.evaluate(t[1],n,i,r,e);case Pi.ADD:return this.evaluate(t[1],n,i,r,e)+this.evaluate(t[2],n,i,r,e);case Pi.SUB:return this.evaluate(t[1],n,i,r,e)-this.evaluate(t[2],n,i,r,e);case Pi.MUL:return this.evaluate(t[1],n,i,r,e)*this.evaluate(t[2],n,i,r,e);case Pi.DIV:return this.evaluate(t[1],n,i,r,e)/this.evaluate(t[2],n,i,r,e);case Pi.MIN:if(0<t[1].length){for(var s=t[1],h=this.evaluate(s[0],n,i,r,e),o=1,a=s.length;o<a;++o)h=Math.min(h,this.evaluate(s[o],n,i,r,e));return h}return 0;case Pi.MAX:if(0<t[1].length){for(s=t[1],h=this.evaluate(s[0],n,i,r,e),o=1,a=s.length;o<a;++o)h=Math.max(h,this.evaluate(s[o],n,i,r,e));return h}return 0;case Pi.PARENT:return t[1]*n;case Pi.SELF:return t[1]*i;case Pi.PADDING:return t[1]*r;case Pi.CURRENT:return t[1]*e;case Pi.NUMBER:return t[1]}return 0},t.prototype.calculate=function(t,n,i,r){return this.evaluate(this.Sn,t,n,i,r)},t.TOKEN_REGEX=/(?:\+|-|\*|\/|\(|\)|min|max|,|(?:\d+(?:\.\d*)?[%psc]?))/g,t}(),Ui=function(t,n){return.5*(t-n)},Gi=function(t,n,i){return i},zi=function(t){return t},Hi=function(t,n,i){return t-i},Vi=function(){function t(){}return t.position=function(t){if(null==t||gn(t))return null;if(at(t)){switch(t){case"center":case"CENTER":return Ui;case"padding":case"PADDING":return Gi}var n=new Fi(t);return function(t,i,r,e){return n.calculate(t,i,r,e)}}if(ot(t))return t;var i=t;return function(t,n,r,e){return i.calculate(t,n,r,e)}},t.size=function(t){if(null==t||gn(t))return null;if(at(t)){switch(t){case"100%":case"maximized":case"MAXIMIZED":return zi;case"padding":case"PADDING":return Hi}var n=new Fi(t);return function(t,i,r,e){return n.calculate(t,i,r,e)}}if(ot(t))return t;var i=t;return function(t,n,r,e){return i.calculate(t,n,r,e)}},t}(),Wi=function(){function t(){}return Object.defineProperty(t,"touchable",{get:function(){return"ontouchstart"in document},enumerable:!1,configurable:!0}),Object.defineProperty(t,"tap",{get:function(){return"pointertap"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"down",{get:function(){return"pointerdown"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"enter",{get:function(){return"pointerenter"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"leave",{get:function(){return"pointerleave"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"move",{get:function(){return"pointermove"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"out",{get:function(){return"pointerout"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"over",{get:function(){return"pointerover"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"up",{get:function(){return"pointerup"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"upoutside",{get:function(){return"pointerupoutside"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cancel",{get:function(){return"pointercancel"},enumerable:!1,configurable:!0}),t.toGlobal=function(t,n,i){if("touches"in t){var r=t.changedTouches,e=r[r.length-1];null!=e?n.mapPositionToPoint(i,e.clientX,e.clientY):n.mapPositionToPoint(i,0,0)}else n.mapPositionToPoint(i,t.clientX,t.clientY);return i},t.isValidDistance=function(t,n,i){var r=t.data.global,e=Math.abs(n-r.x),u=Math.abs(i-r.y),s=this.CLICK_DISTANCE_THRESHOLD;return e<s&&u<s},t.onClick=function(t,n){var i=this,r=!1,e=0,u=0,s=null,h=this.up,o=this.upoutside,a=this.cancel,c=function(){r=!1,s&&(s.off(h,f),s.off(o,l),s.off(a,l),s=null)};t.on("click",(function(t){r&&c(),n(t,!1)}));var f=function(s){r&&(c(),i.contains(t,s.target)&&i.isValidDistance(s,e,u)&&n(s,!0))},l=function(t){r&&c()};t.on(this.down,(function(n){if(r){var i=n.data.global;e=i.x,u=i.y}else{r=!0;var c=n.data.global;e=c.x,u=c.y,s&&(s.off(h,f),s.off(o,l),s.off(a,l),s=null);var v=rt.getLayer(t);v&&((s=v.renderer.plugins.interaction).once(h,f),s.once(o,l),s.once(a,l))}}))},t.onDblClick=function(t,n){var i=this;if(t.addEventListener("dblclick",(function(t){return n(t,!1)})),this.touchable){var r=0,e=0,u=0,s=0;t.addEventListener("touchstart",(function(t){if(0===r||2===r){var n=t.touches,i=n.length;if(i<=0)r=0;else{var s=n.item(i-1);null!=s?(r+=1,e=s.clientX,u=s.clientY):r=0}}else r=0})),t.addEventListener("touchend",(function(t){if(1===r||3===r){var h=t.changedTouches,o=h.length;if(o<=0)r=0;else{var a=h[o-1];if(null!=a){var c=e-a.clientX,f=u-a.clientY;i.CLICK_DISTANCE_THRESHOLD<=Math.abs(c)+Math.abs(f)?r=0:1===r?(s=t.timeStamp,r=2):t.timeStamp-s<i.DBLCLICK_INTERVAL_THRESHOLD?(r=0,n(t,!0)):(s=t.timeStamp,r=2)}else r=0}}else r=0})),t.addEventListener("touchcancel",(function(){r=0}))}},t.contains=function(t,n){for(var i=n;null!=i&&i!==t;)i=i.parent;return i===t},t.CLICK_DISTANCE_THRESHOLD=10,t.DBLCLICK_INTERVAL_THRESHOLD=333,t.LONG_CLICK_THRESHOLD=750,t}(),Xi=function(){function t(){this.jn=!1}return Object.defineProperty(t.prototype,"isOff",{get:function(){return!this.jn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOn",{get:function(){return this.jn},enumerable:!1,configurable:!0}),t.prototype.toCoordinate=function(t){return this.jn?"auto":t},t.prototype.from=function(t){return"auto"===t||"AUTO"===t?(this.jn=!0,!0):(this.jn=!1,!1)},t}(),Yi=function(){this.width=new Xi,this.height=new Xi},Ki=function(){function t(t){this.p=t,this.Tn=[],this.Nn=[],this.In=!0}return Object.defineProperty(t.prototype,"renderable",{get:function(){return this.In},set:function(t){this.In=t},enumerable:!1,configurable:!0}),t.prototype.add=function(t,n){(n?this.Tn:this.Nn).push(t),"parent"in t&&(t.parent=this.p)},t.prototype.addAt=function(t,n,i){var r=n?this.Tn:this.Nn;0===i?r.unshift(t):0<i&&i<r.length?r.splice(i,0,t):r.push(t),"parent"in t&&(t.parent=this.p)},t.prototype.remove=function(t,n){var i=n?this.Tn:this.Nn,r=i.indexOf(t);0<=r&&(i.splice(r,1),"parent"in t&&(t.parent=null))},t.prototype.render=function(t,n){if(this.In)for(var i=n?this.Tn:this.Nn,r=0,e=i.length;r<e;++r){var u=i[r];u.updateTransform(),u.render(t)}},t}(),Ji=function(){function t(){this.Cn=[]}return t.prototype.add=function(t){this.Cn.push(t)},t.prototype.remove=function(t){var n=this.Cn,i=n.indexOf(t);0<=i&&n.splice(i,1)},t.prototype.onReflow=function(t,n,i){for(var r=this.Cn,e=0,u=r.length;e<u;++e)r[e].onReflow(t,n,i)},t}(),Zi=function(n){function i(t){var r,e,u,s,h,o,a,c,f,l=this,v=(l=n.call(this)||this).transform;l._=new Ni(v.position,(function(t,n,i,r){l.onMove(t,n,i,r)})),l.An=new Ni(v.scale,(function(t,n,i,r){l.onScale(t,n,i,r)})),l.Rn=new Ni(v.skew,(function(t,n,i,r){l.onSkew(t,n,i,r)})),l.yn=t;var b=l.Ln={};l.kn=new Yi,l.fn=!0,l.xn=!1,l.Bn=!1,l._n=null,l.name=null!==(r=null==t?void 0:t.name)&&void 0!==r?r:"";var d=function(t){var n=null==t?void 0:t.theme;if(n)return at(n)?Y.getInstance().get(n):n}(t)||l.getThemeDefault();l.qt=d,l.Pn=new Ki(l),l.Fn=new Ji,l.Un=Oi(null!==(e=null==t?void 0:t.clear)&&void 0!==e?e:d.getClearType(),_i),l.Gn=new Ti(d,t,(function(){l.toParentResized(),l.toHierarchyDirty(),rt.update(l)}));var g=function(){l.toDirty(),rt.update(l)};l.Dn=new wi(d,t,g),l.En=new Di(d,t,g),l.Mn=new ji(d,t,g),l.Jt=new Mi(d,t,g);var m=v.position,w=null!==(u=null==t?void 0:t.x)&&void 0!==u?u:d.getX();gn(w)?m.x=w:(m.x=0,b.x=Vi.position(w));var p=null!==(s=null==t?void 0:t.y)&&void 0!==s?s:d.getY();gn(p)?m.y=p:(m.y=0,b.y=Vi.position(p));var O=null!==(h=null==t?void 0:t.width)&&void 0!==h?h:d.getWidth();l.kn.width.from(O)?l.Mt=100:gn(O)?l.Mt=O:(l.Mt=100,b.width=Vi.size(O));var D=null!==(o=null==t?void 0:t.height)&&void 0!==o?o:d.getHeight();l.kn.height.from(D)?l.hn=100:gn(D)?l.hn=D:(l.hn=100,b.height=Vi.size(D));var E=null==t?void 0:t.visible;null!=E&&(l.visible=E),l.Et=new ft((function(t,n){l.onStateChange(t,n)}));var M=Oi(null!==(a=null==t?void 0:t.interactive)&&void 0!==a?a:d.getInteractive(),Si);l.interactive=!!(M&Si.SELF),l.interactiveChildren=!!(M&Si.CHILDREN);var S=null==t?void 0:t.on;if(S)for(var j in S){var T=S[j];T&&l.on(j,T)}l.zn=null!==(c=null==t?void 0:t.title)&&void 0!==c?c:d.getTitle(),l.Wt=null!==(f=null==t?void 0:t.weight)&&void 0!==f?f:d.getWeight(),l.initReflowable(),l.Hn=function(){rt.update(l)};var N=null==t?void 0:t.shadow;if(void 0===N&&(N=d.getShadow()),N)if(at(N))switch(N){case"WEAK":l.shadow=d.newShadowWeak();break;case"DEFAULT":l.shadow=d.newShadow()}else l.shadow=N;l.on(Wi.over,(function(t){l.onOver(t)})),l.on(Wi.out,(function(t){l.onOut(t)})),l.on(Wi.down,(function(t){l.onDown(t)})),l.on(Wi.up,(function(t){l.onUp(t)})),l.on("added",(function(){l.toParentResized(),(l.isDirty()||l.hasDirty())&&l.toParentHasDirty(),l.Bn&&l.toParentHierarchyDirty();var t=l.parent;t instanceof i&&(l.state.parent=t.state),rt.update(l)})),l.on("removed",(function(){l.blur(!0),l.state.parent=null,rt.update(l)}));var I=function(t){if(t){var n=t.shortcut,i=t.shortcuts;if(null!=i||null!=n){var r=[];if(null!=n&&r.push(Zt.toShortcut(n)),null!=i)for(var e=0,u=i.length;e<u;++e)Zt.toShortcut(i[e]);return r}}}(t);if(l.Vn=I,null!=I)for(var C=function(t){l.onShortcut(t)},A=0,R=I.length;A<R;++A)Zt.on(l,I[A],C);l.init(t),d.newState(l.Et);var y=null==t?void 0:t.state;null!=y&&(at(y)?l.Et.add(y):l.Et.addAll(y));var L=null==t?void 0:t.parent;null!=L&&L.addChild(l);var k=null==t?void 0:t.children;if(null!=k)for(A=0,R=k.length;A<R;++A){var x=k[A];null!=x&&l.addChild(x)}var B=null==t?void 0:t.cursor;return l.Wn=B,l.cursor=l.toCursor(B,l.Et),l.emit("init",l),l}return B(i,n),i.prototype.toCursor=function(t,n){if(t)if(ot(t)){var i=t(n);if(void 0!==i)return i}else if(void 0!==t)return t;return this.theme.getCursor(n)},Object.defineProperty(i.prototype,"snippet",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"reflowable",{get:function(){return this.Fn},enumerable:!1,configurable:!0}),i.prototype.initReflowable=function(){new Bi(this)},i.prototype.onChildrenChange=function(){this.toHierarchyDirty(),n.prototype.onChildrenChange.call(this)},i.prototype.onShortcut=function(t){},i.prototype.init=function(t){},Object.defineProperty(i.prototype,"weight",{get:function(){return this.Wt},enumerable:!1,configurable:!0}),i.prototype.onMove=function(t,n,r,e){for(var u=this.children,s=0,h=u.length;s<h;++s){var o=u[s];o instanceof i&&o.onParentMove(t,n,r,e)}rt.update(this),this.emit("move",t,n,r,e,this)},i.prototype.resize=function(t,n){var i=this.Mt,r=this.hn,e=null!=t?t:i,u=null!=n?n:r,s=i!==e,h=r!==u;s&&(this.Mt=e),h&&(this.hn=u);var o,a=s||h;if(a&&this.onResize(e,u,i,r),s&&null!=(o=this.Ln).x){var c=this._,f=this.getParentOfSize();f&&(this._.x=o.x(f.width,e,f.padding.getLeft(),c.x))}if(h&&null!=(o=this.Ln).y){c=this._;var l=this.getParentOfSize();l&&(this._.y=o.y(l.height,u,l.padding.getTop(),c.y))}return a},i.prototype.getClearType=function(){return this.Un},i.prototype.onResize=function(t,n,r,e){this.toDirty(),this.toHierarchyDirty();for(var u=this.Gn,s=this.children,h=0,o=s.length;h<o;++h){var a=s[h];a instanceof i&&a.onParentResize(t,n,u)}rt.update(this),this.emit("resize",t,n,r,e,this)},i.prototype.onScale=function(t,n,i,r){rt.update(this),this.emit("scale",t,n,i,r,this)},i.prototype.onSkew=function(t,n,i,r){rt.update(this),this.emit("skew",t,n,i,r,this)},Object.defineProperty(i.prototype,"type",{get:function(){return this.getType()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._.x},set:function(t){this.setX(t)},enumerable:!1,configurable:!0}),i.prototype.getX=function(){var t=this.Ln;return null!=t.x?t.x:this._.x},i.prototype.setX=function(t){var n=this.Ln;if(gn(t)){var i=this._;i.x!==t?(n.x=void 0,i.x=t):void 0!==n.x&&(n.x=void 0,this.toParentResized())}else{var r=Vi.position(t);n.x!==r&&(n.x=r,this.toParentResized())}},Object.defineProperty(i.prototype,"y",{get:function(){return this._.y},set:function(t){this.setY(t)},enumerable:!1,configurable:!0}),i.prototype.getY=function(){var t=this.Ln;return null!=t.y?t.y:this._.y},i.prototype.setY=function(t){var n=this.Ln;if(gn(t)){var i=this._;i.y!==t?(n.y=void 0,i.y=t):void 0!==n.y&&(n.y=void 0,this.toParentResized())}else{var r=Vi.position(t);n.y!==r&&(n.y=r,this.toParentResized())}},Object.defineProperty(i.prototype,"width",{get:function(){return this.Mt},set:function(t){this.setWidth(t)},enumerable:!1,configurable:!0}),i.prototype.getWidth=function(){return this.kn.width.toCoordinate(this.Ln.width||this.Mt)},i.prototype.setWidth=function(t){var n=this.kn.width,i=n.isOn,r=n.from(t);if(n.isOn!==i&&(this.toHierarchyDirty(),rt.update(this)),!r){var e=this.Ln;if(gn(t)){var u=this.Mt;if(u!==t){e.width=void 0,this.Mt=t;var s=this.hn;if(this.onResize(t,s,u,s),null!=e.x){var h=this._,o=this.getParentOfSize();o&&(h.x=e.x(o.width,t,o.padding.getLeft(),h.x))}}else void 0!==e.width&&(e.width=void 0,this.toParentResized())}else{var a=Vi.size(t);e.width!==a&&(e.width=a,this.toParentResized())}}},Object.defineProperty(i.prototype,"height",{get:function(){return this.hn},set:function(t){this.setHeight(t)},enumerable:!1,configurable:!0}),i.prototype.getHeight=function(){return this.kn.height.toCoordinate(this.Ln.height||this.hn)},i.prototype.setHeight=function(t){var n=this.kn.height,i=n.isOn,r=n.from(t);if(n.isOn!==i&&(this.toHierarchyDirty(),rt.update(this)),!r){var e=this.Ln;if(gn(t)){var u=this.hn;if(u!==t){e.height=void 0,this.hn=t;var s=this.Mt;if(this.onResize(s,t,s,u),null!=e.y){var h=this._,o=this.getParentOfSize();o&&(h.y=e.y(o.height,t,o.padding.getTop(),h.y))}}else void 0!==e.height&&(e.height=void 0,this.toParentResized())}else{var a=Vi.size(t);e.height!==a&&(e.height=a,this.toParentResized())}}},Object.defineProperty(i.prototype,"position",{get:function(){return this._},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skew",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"corner",{get:function(){return this.Jt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"background",{get:function(){return this.Dn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"border",{get:function(){return this.En},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"outline",{get:function(){return this.Mn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"unsafe",{get:function(){return this.transform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this.zn},set:function(t){this.zn!==t&&(this.zn=t,this.state.isHovered&&this.applyTitle())},enumerable:!1,configurable:!0}),i.prototype.applyTitle=function(){var t=rt.getLayer(this);t&&(t.view.title=this.zn)},i.prototype.show=function(){return this.visible||(this.visible=!0,this.toParentHierarchyDirty(),rt.update(this)),this},i.prototype.isShown=function(){return this.visible},i.prototype.hide=function(){return this.visible&&(this.visible=!1,this.toParentHierarchyDirty(),this.blur(!0),rt.update(this)),this},i.prototype.isHidden=function(){return!this.visible},i.prototype.toDirty=function(){return!this.fn&&(this.fn=!0,this.toParentHasDirty(),!0)},i.prototype.toHasDirty=function(){return!this.xn&&(this.xn=!0,this.toParentHasDirty(),!0)},i.prototype.toParentHasDirty=function(){var t=this.parent;t instanceof i&&t.toHasDirty()},i.prototype.toHierarchyDirty=function(){return!this.Bn&&(this.Bn=!0,this.onHierarchyDirty(),this.toParentHierarchyDirty(),!0)},i.prototype.toParentHierarchyDirty=function(){var t=this.parent;t instanceof i&&t.toHierarchyDirty()},i.prototype.isHierarchyDirty=function(){return this.Bn},i.prototype.onHierarchyDirty=function(){},i.prototype.isDirty=function(){return this.fn},i.prototype.hasDirty=function(){return this.xn},i.prototype.setFocused=function(t){if(this.state.isFocused!==t){var n=rt.getLayer(this);n&&n.getFocusController().set(this,t)}return this},i.prototype.focus=function(){return this.setFocused(!0)},i.prototype.blur=function(t){if(t){var n=rt.getLayer(this);if(n){var r=n.getFocusController().get();if(r instanceof i)for(var e=r;e;){if(e===this){r.setFocused(!1);break}e=e.parent}}}else this.setFocused(!1);return this},i.prototype.onStateChange=function(t,n){this.toDirty(),rt.update(this),this.emit("statechange",t,n,this);for(var r=this.children,e=0,u=r.length;e<u;++e){var s=r[e];s instanceof i&&s.state.onParentChange(t,n)}t.isFocused?n.isFocused||this.onFocus():n.isFocused&&this.onBlur(),this.cursor=this.toCursor(this.Wn,t)},i.prototype.onChildFocus=function(t){var n=this.parent;n instanceof i&&n.onChildFocus(t)},i.prototype.onFocus=function(){var t=this.parent;t instanceof i&&t.onChildFocus(this)},i.prototype.onChildBlur=function(t){var n=this.parent;n instanceof i&&n.onChildBlur(t)},i.prototype.onBlur=function(){var t=this.parent;t instanceof i&&t.onChildBlur(this)},Object.defineProperty(i.prototype,"state",{get:function(){return this.Et},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this.yn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"theme",{get:function(){return this.qt},set:function(t){this.qt!==t&&(this.qt=t,this.Gn.setTheme(t),this.Dn.setTheme(t),this.En.setTheme(t),this.Mn.setTheme(t),this.Jt.setTheme(t),this.toDirty(),rt.update(this))},enumerable:!1,configurable:!0}),i.prototype.reflow=function(){var t=this.fn;t&&(this.onReflow(),this.fn=!1);var n=this.xn,r=this.Bn;if(n||r){this.xn=!1,this.Bn=!1;for(var e=this.children,u=0,s=e.length;u<s;++u){var h=e[u];h instanceof i&&h.reflow()}}(t||n||r)&&this.onRefit()},i.prototype.onRefit=function(){var t=this.kn,n=t.width.isOn,i=t.height.isOn;if(n&&i){for(var r=0,e=0,u=0,s=(o=this.children).length;u<s;++u)(a=o[u]).visible&&(this.hasRefitableWidth(a)&&(r=Math.max(r,a.x+a.width)),this.hasRefitableHeight(a)&&(e=Math.max(e,a.y+a.height)));var h=this.padding;this.resize(r+h.getRight(),e+h.getBottom())}else if(n){for(r=0,u=0,s=(o=this.children).length;u<s;++u)(a=o[u]).visible&&this.hasRefitableWidth(a)&&(r=Math.max(r,a.x+a.width));this.resize(r+this.padding.getRight(),void 0)}else if(i){var o;for(e=0,u=0,s=(o=this.children).length;u<s;++u){var a;(a=o[u]).visible&&this.hasRefitableHeight(a)&&(e=Math.max(e,a.y+a.height))}this.resize(void 0,e+this.padding.getBottom())}},i.prototype.isRefitable=function(t){return t instanceof i},i.prototype.hasRefitableHeight=function(t){return this.isRefitable(t)&&!(t instanceof i&&ot(t.getHeight()))},i.prototype.hasRefitableWidth=function(t){return this.isRefitable(t)&&!(t instanceof i&&ot(t.getWidth()))},i.prototype.onReflow=function(){this.Fn.onReflow(this,this.Mt,this.hn)},Object.defineProperty(i.prototype,"shadow",{get:function(){return this._n},set:function(t){var n=this._n;if(n!==t){var i=this.Fn,r=this.Pn,e=this.Hn;null!=n&&(n.off("update",e),i.remove(n),r.remove(n,!0)),this._n=t,null!=t&&(t.on("update",e),i.add(t),r.addAt(t,!0,0)),rt.update(this)}},enumerable:!1,configurable:!0}),i.prototype.toParentResized=function(){var t=this.getParentOfSize();t&&this.onParentResize(t.width,t.height,t.padding)},i.prototype.getParentOfSize=function(){var t=this.parent;return t instanceof i?t:rt.getLayer(this)},i.prototype.onParentResize=function(t,n,i){var r=this.Ln,e=this.transform.position,u=e.x,s=e.y,h=this.Mt,o=this.hn,a=i.getLeft()+i.getRight(),c=i.getTop()+i.getBottom(),f=null!=r.width?r.width(t,h,a,h):h,l=null!=r.height?r.height(n,o,c,o):o;this.resize(f,l);var v=null!=r.x?r.x(t,this.Mt,i.getLeft(),u):u,b=null!=r.y?r.y(n,this.hn,i.getTop(),s):s;this.position.set(v,b)},i.prototype.onParentMove=function(t,n,i,r){},i.prototype.onWheel=function(t,n,i){return this.emit("wheel",t,n,i,this),!1},i.prototype.onKeyDown=function(t){return this.emit("keydown",t,this),!1},i.prototype.onKeyUp=function(t){return this.emit("keyup",t,this),!1},i.prototype.isEventTarget=function(t){var n=t.target;if(n===this)return!0;if(null!=n&&!(n instanceof i&&n.interactive)){for(var r=n.parent;null!=r&&!(r instanceof i&&r.interactive);)r=r.parent;return r===this}return!1},i.prototype.onDown=function(t){this.isEventTarget(t)&&this.onDownThis(t),this.emit("down",t,this)},i.prototype.onDownThis=function(n){if("touches"in n.data.originalEvent){var i=this.Xn||new t.Point;this.Xn=i,i.copyFrom(n.data.global)}else this.focusOnClosest()},i.prototype.onUp=function(t){this.isEventTarget(t)&&this.onUpThis(t),this.emit("up",t,this)},i.prototype.onUpThis=function(t){if("touches"in t.data.originalEvent){var n=this.Xn;if(n){var i=t.data.global,r=Math.abs(i.x-n.x),e=Math.abs(i.y-n.y),u=Wi.CLICK_DISTANCE_THRESHOLD;r<u&&e<u&&this.focusOnClosest()}}},i.prototype.focusOnClosest=function(){var t=rt.getLayer(this);if(t){var n=t.getFocusController();n.focus(n.findParent(this))}},i.prototype.onOver=function(t){this.state.isHovered=!0,t.target===this&&this.applyTitle(),this.emit("over",t,this)},i.prototype.onOut=function(t){this.state.isHovered=!1,this.emit("out",t,this)},i.prototype.onDblClick=function(t,n){return this.emit("dblclick",t,n,this),!1},i.prototype.render=function(t){if(this.visible&&0<this.worldAlpha&&this.renderable){var i=this.Pn;i.render(t,!0),n.prototype.render.call(this,t),i.render(t,!1)}},i.prototype.getThemeDefault=function(){return Y.getInstance().get(this.getType())},i.prototype.getType=function(){return"DBase"},i.prototype._calculateBounds=function(){var t=this.transform.worldTransform,r=this._bounds,e=i.WORK_CONTAINS_POINT;e.set(0,0),t.apply(e,e),r.addPoint(e),e.set(this.Mt,this.hn),t.apply(e,e),r.addPoint(e),n.prototype._calculateBounds.call(this)},i.prototype.containsPoint=function(t){return this.containsGlobalPoint(t)||this.containsLocalPoint(this.worldTransform.applyInverse(t,i.WORK_CONTAINS_POINT))},i.prototype.containsGlobalPoint=function(t){return!1},i.prototype.containsLocalPoint=function(t){var n=t.x,i=t.y,r=this.Mt,e=this.hn;return 0<=n&&n<=r&&0<=i&&i<=e},i.prototype.getClippingRect=function(t,n){n.x=0,n.y=0,n.width=this.Mt,n.height=this.hn},i.prototype.destroy=function(){var t=this.Ln;t.x=null,t.y=null,t.width=null,t.height=null;var i=this._n;i&&(this._n=null,i.destroy());for(var r=this.children,e=r.length-1;0<=e;--e)r[e].destroy();r.length=0,n.prototype.destroy.call(this)},i.WORK_CONTAINS_POINT=new t.Point,i}(t.Container),qi=function(t){function n(n){var i=t.call(this)||this;return i.parent=n,i}return B(n,t),n.prototype.render=function(n){this.updateTransform(),t.prototype.render.call(this,n)},n.prototype.onReflow=function(t,n,i){var r=t.corner,e=Math.max(0,r.getRadius()-.5),u=r.getMask(),s=u&Ei.TOP_LEFT?0:e,h=u&Ei.TOP_RIGHT?0:e,o=u&Ei.BOTTOM_LEFT?0:e,a=u&Ei.BOTTOM_RIGHT?0:e;this.clear(),this.beginFill(16777215,1),this.lineStyle(0,0,0,0,!1),s<=0&&h<=0&&o<=0&&a<=0?this.drawRect(0,0,n,i):(this.moveTo(0+s,0),0<h?this.arcTo(0+n,0,0+n,0+i,h):this.lineTo(0+n,0),0<a?this.arcTo(0+n,0+i,0,0+i,a):this.lineTo(0+n,0+i),0<o?this.arcTo(0,0+i,0,0,o):this.lineTo(0,0+i),0<s?this.arcTo(0,0,0+n,0,s):this.lineTo(0,0)),this.endFill()},n}(t.Graphics),Qi={NONE:0,CTRL:1,SHIFT:2,ALT:4,AND:8,OR:16,NOT_NONE:23},$i=function(){function t(){}return t.from=function(t){var n="data"in t?t.data.originalEvent:t;return(n.ctrlKey?Qi.CTRL:Qi.NONE)|(n.altKey?Qi.ALT:Qi.NONE)|(n.shiftKey?Qi.SHIFT:Qi.NONE)},t.match=function(n,i){return i&Qi.OR?!!(t.from(n)&i):t.from(n)===i},t}(),tr={OFF:0,ON:1,TOUCH:2},nr=function(){function n(){this.pointers=new Map,this.center=new t.Point,this.scale=0,this.time=0}return n.prototype.start=function(t){var n=t.data.originalEvent;"pointerId"in n&&this.pointers.set(n.pointerId,n),this.doUpdate(t)},n.prototype.isUpdatable=function(t){var n=t.data.originalEvent;return!("pointerId"in n)||this.pointers.has(n.pointerId)},n.prototype.update=function(t){var n=t.data.originalEvent;"pointerId"in n&&this.pointers.set(n.pointerId,n),this.doUpdate(t)},n.prototype.end=function(t){var n=!0,i=t.data.originalEvent;if("touches"in i)n=i.touches.length<=0;else if("pointerId"in i){var r=this.pointers;r.delete(i.pointerId),n=r.size<=0}return this.doUpdate(t),n},n.prototype.bind=function(t){var n=this.interactionManager;if(n){var i=this.onMove;i&&n.on(Wi.move,i);var r=this.onEnd;r&&(n.on(Wi.up,r),n.on(Wi.upoutside,r),n.on(Wi.cancel,r))}},n.prototype.unbind=function(){var t=this.interactionManager;if(t){var n=this.onMove;n&&t.off(Wi.move,n);var i=this.onEnd;i&&(t.off(Wi.up,i),t.off(Wi.upoutside,i),t.off(Wi.cancel,i))}},n.prototype.doUpdate=function(t){var n=this.interactionManager,i=this.center,r=t.data.originalEvent;if(this.scale=0,this.time=r.timeStamp,"touches"in r){var e=r.touches,u=e.length;if(0<u){for(var s=0,h=0,o=0,a=e.length;o<a;++o)s+=(f=e[o]).clientX,h+=f.clientY;if(s/=u,h/=u,n?n.mapPositionToPoint(i,s,h):i.set(s,h),1<u){var c=0;for(o=1,a=e.length;o<a;++o){var f,l=(f=e[o]).clientX-s,v=f.clientY-h;c=Math.max(c,l*l+v*v)}this.scale=Math.sqrt(c)}}}else if("pointerId"in r){var b=this.pointers,d=b.size;if(0<d){var g=0,m=0;if(b.forEach((function(t){g+=t.clientX,m+=t.clientY})),g/=d,m/=d,n?n.mapPositionToPoint(i,g,m):i.set(g,m),1<d){var w=0;b.forEach((function(t){var n=t.clientX-g,i=t.clientY-m;w=Math.max(w,n*n+i*i)})),this.scale=Math.sqrt(w)}}}else i.copyFrom(t.data.global)},n}(),ir=function(){function t(){}return t.LINEAR=function(t){return t},t.ELASTIC=function(t){return t*(3*(1-t)*(1-t)+t*(3*(1-t)+t))},t.QUAD_IN_OUT=function(t){return t<.5?2*t*t:(4-2*t)*t-1},t}(),rr=function(t){function n(n){var i,r,e,u=this;(u=t.call(this)||this).R=null,u.Yn=null!==(i=null==n?void 0:n.target)&&void 0!==i?i:null,u.Kn=0,u.Jn=null!==(r=null==n?void 0:n.duration)&&void 0!==r?r:200,u.Zn=1/Math.max(1,u.Jn),u.qn=!1,u.Qn=null==n?void 0:n.onTime,u.$n=function(){u.onTimeBase()},u.ti=null==n?void 0:n.onStart,u.ni=null==n?void 0:n.onEnd,u.ii=null!==(e=null==n?void 0:n.timing)&&void 0!==e?e:ir.ELASTIC;var s=null==n?void 0:n.on;if(s)for(var h in s){var o=s[h];o&&u.on(h,o)}return u}return B(n,t),Object.defineProperty(n.prototype,"target",{get:function(){return this.Yn},set:function(t){this.Yn=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this.Jn},set:function(t){this.Jn=t,this.Zn=1/Math.max(1,t)},enumerable:!1,configurable:!0}),n.prototype.start=function(t){void 0===t&&(t=!1),this.stop(),this.Kn=Date.now(),this.qn=t,this.R=window.setTimeout(this.$n,0),this.onStart(t);var n=this.Jn,i=this.toTime(t?n:0);this.onTime(i,t,0)},n.prototype.onStart=function(t){var n=this.ti;null!=n&&n(t,this),this.emit("start",t,this)},n.prototype.onTime=function(t,n,i){var r=this.Qn;null!=r&&r(t,n,i,this),this.emit("time",t,n,i,this)},n.prototype.onEnd=function(t){var n=this.ni;null!=n&&n(t,this),this.emit("end",t,this)},n.prototype.isStarted=function(){return null!=this.R},n.prototype.isReverse=function(){return this.qn},n.prototype.onTimeBase=function(){if(null!=this.R){this.R=null;var t=Date.now()-this.Kn,n=this.Jn,i=this.qn;if(t<n){this.R=window.setTimeout(this.$n,0);var r=this.toTime(i?n-t:t);this.onTime(r,i,t)}else r=this.toTime(i?0:n),this.onTime(r,i,t),this.onEnd(i)}},n.prototype.toTime=function(t){return this.ii(t*this.Zn,this)},n.prototype.stop=function(){var t=this.R;null!=t&&(this.R=null,window.clearTimeout(t))},n.prototype.end=function(){var t=this.R;if(null!=t){this.R=null,window.clearTimeout(t);var n=this.qn,i=Date.now()-this.Kn,r=this.Jn,e=this.toTime(n?0:r);this.onTime(e,n,i),this.onEnd(n)}},n}(t.utils.EventEmitter),er=function(){function t(t,n,i,r){this.dx=t,this.dy=n,this.ds=i,this.dt=r}return t.prototype.set=function(t,n,i,r){this.dx=t,this.dy=n,this.ds=i,this.dt=r},t}(),ur=function(){function t(t,n,i){var r,e=this;this.ri=[],this.ei=[],this.si=0,this.hi=-1,this.oi=0,this.ai=0,this.ci=0,this.fi=0,this.li=0,this._t=0,this.vi=new rr({onTime:function(t){e.onEase(t)},onEnd:function(){e.onEaseEnd()},timing:ir.LINEAR,duration:333*(null!==(r=null==i?void 0:i.duration)&&void 0!==r?r:1)}),this.bi=t,this.ni=n}return t.prototype.onStart=function(){for(var n=this.ri,i=n.length,r=t.HISTORY_CAPACITY;i<r;++i)n.push(new er(0,0,1,0));this.si=0,this.hi=-1,this.vi.stop()},t.prototype.onMove=function(n,i,r,e){var u=t.HISTORY_CAPACITY,s=this.hi,h=(s+1)%u;this.hi=h;var o=this.si;(h<s||0<=s&&s<o)&&(this.si=(o+1)%u),this.ri[h].set(n,i,r,e)},t.prototype.updateHistoriesSorted=function(t){var n=this.ri,i=this.ei,r=this.si,e=this.hi,u=n.length;if(e<0)return i.length=0,t;if(e<r){var s=t;i.length=0;for(var h=e;0<=h;--h){var o=n[h];if(!(s+o.dt<160))return s;s+=o.dt,i.push(o)}for(h=u-1;r<=h;--h){var a=n[h];if(!(s+a.dt<160))return s;s+=a.dt,i.push(a)}return s}for(s=t,i.length=0,h=e;r<=h;--h){var c=n[h];if(!(s+c.dt<160))return s;s+=c.dt,i.push(c)}return s},t.prototype.onEnd=function(t){this.updateHistoriesSorted(t);var n=this.ei,i=n.length;if(i<=0)return this.onEaseEnd();for(var r=0,e=0,u=0,s=0,h=0;h<i;++h){var o=n[h];r+=o.dx,e+=o.dy,u+=o.ds,s+=o.dt}if(s<=0)return this.onEaseEnd();var a=1/i;r*=a,e*=a,u*=a,s*=a,this.oi=r,this.ai=e,this.ci=u,this.fi=s;var c=this.vi,f=c.duration;this._t=-t/f,this.li=f/s,c.start()},t.prototype.onEase=function(t){var n=this._t;this._t=t;var i=(1-.5*(t+n))*(t-n)*this.li;this.bi(this.oi*i,this.ai*i,1+(this.ci-1)*i,t)},t.prototype.onEaseEnd=function(){this.ni()},t.prototype.stop=function(){this.vi.stop()},t.HISTORY_CAPACITY=5,t}(),sr=function(){function t(t){var n,i,r,e=t.on;e&&(this.ti=e.start,this.bi=e.move,this.ni=e.end),this.di=null!==(n=null==t?void 0:t.modifier)&&void 0!==n?n:Qi.NONE;var u=t.checker,s=$i.match;this.gi=null!==(i=null==u?void 0:u.start)&&void 0!==i?i:s,this.wi=null!==(r=null==u?void 0:u.move)&&void 0!==r?r:s,this.pi=t.easing,this.Oi=!!t.touch,this.Di=[],this.Ei=new Map;var h=t.bind;null!=h&&this.bind(h)}return t.prototype.newData=function(t){var n=this.Ei,i=n.get(t);if(null!=i)return i;var r=this.Di.pop();if(null!=r)return n.set(t,r),r;var e=new nr;return e.easing=this.newEasing(e),e.onMove=this.newOnMove(e),e.onEnd=this.newOnEnd(e),n.set(t,e),e},t.prototype.newEasing=function(t){var n=this,i=this.pi;if(null==i||!1!==i)return new ur((function(i,r,e,u){n.onEasingMove(i,r,e,u,t)}),(function(){n.onEasingEnd(t)}),this.toEasingOptions(i))},t.prototype.toEasingOptions=function(t){return null==t||!0===t?void 0:t},t.prototype.deleteData=function(t){var n=t.target;n&&this.Ei.delete(n)&&(t.target=void 0,t.pointers.clear(),this.Di.push(t))},t.prototype.bind=function(t){var n=this;return t.on(Wi.down,(function(i){n.onDown(t,i)})),this},t.prototype.isTouch=function(t){var n=t.data.originalEvent;return"touches"in n||"pointerId"in n&&"mouse"!==n.pointerType},t.prototype.onDown=function(t,n){var i;if((!this.Oi||this.isTouch(n))&&this.gi(n,this.di,t)){var r=rt.getLayer(t);if(null!=r)if(n.stopPropagation(),t.state.isGesturing)null===(i=this.Ei.get(t))||void 0===i||i.start(n);else{var e=this.ti;null!=e&&e(t);var u=this.newData(t);u.target=t,t.state.isGesturing=!0;var s=r.renderer.plugins.interaction;u.interactionManager=s,u.start(n);var h=u.easing;h&&h.onStart(),u.bind(n)}}},t.prototype.newOnMove=function(t){var n=this;return function(i){n.onMove(i,t)}},t.prototype.newOnEnd=function(t){var n=this;return function(i){n.onEnd(i,t)}},t.prototype.onMove=function(t,n){var i=n.target;if(null!=i&&i.state.isGesturing&&n.isUpdatable(t)&&this.wi(t,this.di,i)){var r=n.center,e=r.x,u=r.y,s=n.scale,h=n.time;n.update(t);var o=r.x,a=r.y,c=n.scale,f=o-e,l=a-u,v=n.time-h,b=1e-5,d=b<s&&b<c?c/s:1,g=n.easing;g&&g.onMove(f,l,d,v);var m=this.bi;null!=m&&(0===f&&0===l&&1===d||m(i,f,l,o,a,d))}},t.prototype.onEnd=function(t,n){var i=n.target;if(null!=i&&i.state.isGesturing&&n.end(t)){i.state.isGesturing=!1;var r=n.interactionManager;if(n.interactionManager=void 0,r){var e=n.onMove;e&&r.off(Wi.move,e);var u=n.onEnd;u&&(r.off(Wi.up,u),r.off(Wi.cancel,u))}var s=this.ni;null!=s&&s(i);var h=n.easing;h?h.onEnd(t.data.originalEvent.timeStamp-n.time):this.deleteData(n)}},t.prototype.onEasingMove=function(t,n,i,r,e){if(null!=e.target){var u=this.bi;if(null!=u&&(0!==t||0!==n||1!==i)){var s=e.center,h=s.x+t,o=s.y+n;s.set(h,o),u(e.target,t,n,h,o,i)}}},t.prototype.onEasingEnd=function(t){this.deleteData(t)},t.prototype.stop=function(t){var n,i=this.Ei.get(t);null!=i&&(null===(n=i.easing)||void 0===n||n.stop(),this.deleteData(i))},t}(),hr=function(){function t(t,n,i,r,e,u){var s,h,o=this;this.p=t,this.Mi=i,this.Si=r;var a=Oi(null!==(s=null==u?void 0:u.mode)&&void 0!==s?s:e.getGestureMode(),tr),c=Oi(null!==(h=null==u?void 0:u.modifier)&&void 0!==h?h:e.getGestureModifier(),Qi);a!==tr.ON&&a!==tr.TOUCH||(this.ji=new sr({touch:a===tr.TOUCH,modifier:c,checker:u&&u.checker,easing:{duration:null==u?void 0:u.duration},on:{start:function(){o.Mi.stop()},move:function(i,r,e,u,s,h){o.onGestureMove(n(t),r,e,u,s,h)}}}))}return t.prototype.onGestureMove=function(t,n,i,r,e,u){if(t){var s=this.Mi,h=t.scale,o=h.x,a=h.y,c=s.toNormalizedScale(o*u),f=s.toNormalizedScale(a*u),l=c/o,v=f/a,b=u<1?Math.max(l,v):Math.min(l,v);c=b*o,f=b*a;var d=r-n,g=e-i,m=t.position,w=(m.x-d)*b+r,p=(m.y-g)*b+e;this.Si(t,w,p,c,f)}},t.prototype.stop=function(){var t;null===(t=this.ji)||void 0===t||t.stop(this.p)},t.prototype.onDown=function(t){var n;null===(n=this.ji)||void 0===n||n.onDown(this.p,t)},t}(),or=function(){function t(t,n,i,r,e){var u=this;this.p=t,this.Ti=n,this.Si=r,this.Ni=1,this.Ii=1,this.Ci=0,this.Ai=0,this.Ri=1,this.yi=1,this.Li=0,this.ki=0,this.vi=new rr({onTime:function(t){u.onTime(t)},duration:e}),this.Mi=i,this.Jn=e}return t.prototype.onTime=function(t){var n=1-t,i=t,r=this.Ri*n+this.Ni*i,e=this.yi*n+this.Ii*i,u=this.Li*n+this.Ci*i,s=this.ki*n+this.Ai*i,h=this.Ti(this.p);null!=h&&this.Si(h,u,s,r,e)},t.prototype.start=function(t,n,i,r,e,u,s){if(!1!==s&&this.Mi.stop(),null==u&&(u=this.Jn),u<=0)this.Si(t,n,i,r,e);else{var h=t.position,o=t.scale;this.Li=h.x,this.ki=h.y,this.Ri=o.x,this.yi=o.y,this.Ci=n,this.Ai=i,this.Ni=r,this.Ii=e,this.vi.duration=u,this.vi.start()}},t.prototype.stop=function(){this.vi.stop()},t}(),ar=function(){function n(i,r,e){var u,s,h,o,a,c,f,l,v,b,d,g,m,w,p,O,D;this.p=i,this.Ti=r,this.Si=e&&e.constraint||n.CONSTRAINT,this.xi=new t.Rectangle;var E=this.toTheme(e)||this.getThemeDefault(),M=null==e?void 0:e.zoom;this.Bi=new t.Point,this._i=null!==(u=null==M?void 0:M.min)&&void 0!==u?u:E.getZoomMin(),this.Pi=null!==(s=null==M?void 0:M.max)&&void 0!==s?s:E.getZoomMax(),this.Fi=null!==(h=null==M?void 0:M.keepRatio)&&void 0!==h?h:E.getZoomKeepRatio();var S=null==M?void 0:M.wheel;this.Ui=null!==(o=null==S?void 0:S.enable)&&void 0!==o?o:E.isWheelZoomEnabled(),this.Gi=null!==(a=null==S?void 0:S.speed)&&void 0!==a?a:E.getWheelZoomSpeed(),this.zi=Oi(null!==(c=null==S?void 0:S.modifier)&&void 0!==c?c:E.getWheelZoomModifier(),Qi),this.Hi=null!==(f=null==S?void 0:S.checker)&&void 0!==f?f:$i.match;var j=null==M?void 0:M.dblclick;this.Vi=null!==(l=null==j?void 0:j.enable)&&void 0!==l?l:E.isDblClickZoomEnabled(),this.Wi=null!==(v=null==j?void 0:j.amount)&&void 0!==v?v:E.getDblClickZoomSpeed(),this.Xi=Oi(null!==(b=null==j?void 0:j.modifier)&&void 0!==b?b:E.getDblClickZoomModifier(),Qi),this.Yi=null!==(d=null==j?void 0:j.checker)&&void 0!==d?d:$i.match,this.Ki=null!==(g=null==j?void 0:j.duration)&&void 0!==g?g:E.getDblClickZoomDuration();var T=null===(m=null==e?void 0:e.translation)||void 0===m?void 0:m.wheel;this.Ji=null!==(w=null==T?void 0:T.enable)&&void 0!==w?w:E.isWheelTranslationEnabled(),this.Zi=null!==(p=null==T?void 0:T.speed)&&void 0!==p?p:E.getWheelTranslationSpeed(),this.qi=Oi(null!==(O=null==T?void 0:T.modifier)&&void 0!==O?O:E.getWheelTranslationModifier(),Qi),this.Qi=null!==(D=null==T?void 0:T.checker)&&void 0!==D?D:$i.match,this.$i=new hr(i,r,this,this.Si,E,null==e?void 0:e.gesture),this.I=new or(i,r,this,this.Si,this.Ki)}return Object.defineProperty(n.prototype,"gesture",{get:function(){return this.$i},enumerable:!1,configurable:!0}),n.prototype.stop=function(){this.$i.stop(),this.I.stop()},n.prototype.reset=function(t,n){var i=this.p,r=this.Ti(i);if(r){var e=r.getLocalBounds(this.xi),u=.5*(i.width-e.width)-e.x,s=.5*(i.height-e.height)-e.y;this.I.start(r,u,s,1,1,t,n)}},n.prototype.fit=function(t,n){var i=this.p,r=this.Ti(i);if(r){var e=i.padding,u=i.width,s=i.height,h=r.getLocalBounds(this.xi),o=h.x,a=h.y,c=h.width,f=h.height,l=(u-e.getLeft()-e.getRight())/c,v=(s-e.getTop()-e.getBottom())/f;if(this.Fi){var b=this.toNormalizedScale(Math.min(l,v));l=b,v=b}else l=this.toNormalizedScale(l),v=this.toNormalizedScale(v);var d=.5*(u-c*l)-o*l,g=.5*(s-f*v)-a*v;this.I.start(r,d,g,l,v,t,n)}},n.prototype.zoomIn=function(t,n){var i=this.Ti(this.p);if(i){var r=this.Wi,e=i.scale;this.zoom(e.x*r,e.y*r,t,n)}},n.prototype.zoomOut=function(t,n){var i=this.Ti(this.p);if(i){var r=1/this.Wi,e=i.scale;this.zoom(e.x*r,e.y*r,t,n)}},n.prototype.zoomAt=function(t,n,i,r,e,u){var s=this.Ti(this.p);if(s){var h=s.scale.x,o=s.scale.y,a=this.toNormalizedScale(i),c=this.toNormalizedScale(r),f=a/h,l=c/o,v=(s.position.x-t)*f+t,b=(s.position.y-n)*l+n;this.I.start(s,v,b,a,c,e,u)}},n.prototype.zoomAtGlobal=function(t,n,i,r,e,u){var s=this.Bi;s.set(t,n),this.toLocal(s,s),this.zoomAt(s.x,s.y,i,r,e,u)},n.prototype.zoom=function(t,n,i,r){var e=this.p;this.zoomAt(.5*e.width,.5*e.height,t,n,i,r)},Object.defineProperty(n.prototype,"scale",{get:function(){var n=this.Ti(this.p);return n?n.scale:new t.Point(1,1)},set:function(t){var n=this.Ti(this.p);if(n){var i=this.toNormalizedScale(t.x),r=this.toNormalizedScale(t.y),e=n.position;this.Si(n,e.x,e.y,i,r)}},enumerable:!1,configurable:!0}),n.prototype.moveTo=function(t,n,i,r){var e=this.Ti(this.p);if(e){var u=e.scale;this.I.start(e,t,n,u.x,u.y,i,r)}},Object.defineProperty(n.prototype,"position",{get:function(){var n=this.Ti(this.p);return n?n.position:new t.Point(0,0)},set:function(t){var n=this.Ti(this.p);if(n){var i=n.scale;this.Si(n,t.x,t.y,i.x,i.y)}},enumerable:!1,configurable:!0}),n.prototype.transform=function(t,n,i,r,e,u){var s=this.Ti(this.p);s&&this.I.start(s,t,n,i,r,e,u)},n.prototype.toLocal=function(t,n,i){return this.p.toLocal(t,void 0,n,i)},n.prototype.toGlobal=function(t,n,i){return this.p.toGlobal(t,n,i)},n.prototype.toNormalizedScale=function(t){return Math.min(this.Pi,Math.max(this._i,t))},n.prototype.onWheel=function(t,n,i){var r;if(this.Ui&&this.Hi(t,this.zi,this.p)&&0!==n.deltaY&&(r=this.Ti(this.p))){var e=n.lowest*this.Gi,u=1+n.deltaY*e,s=r.scale;return this.zoomAtGlobal(i.x,i.y,s.x*u,s.y*u,0),!0}if(this.Ji&&this.Qi(t,this.qi,this.p)&&(r=this.Ti(this.p))){this.stop(),e=n.lowest*this.Zi;var h=r.position,o=h.x-n.deltaX*e,a=h.y+n.deltaY*e;return s=r.scale,this.Si(r,o,a,s.x,s.y),!0}return!1},n.prototype.onDown=function(t){this.$i.onDown(t)},n.prototype.onDblClick=function(t,n){if(this.Vi&&this.Yi(t,this.Xi,this.p)){var i=this.Ti(this.p);if(i){var r=this.Bi;Wi.toGlobal(t,n,r);var e=this.Wi,u=i.scale;return this.zoomAtGlobal(r.x,r.y,u.x*e,u.y*e,this.Ki),!0}}return!1},n.prototype.toTheme=function(t){if(t&&t.theme){var n=t.theme;return at(n)?Y.getInstance().get(n):n}return null},n.prototype.getThemeDefault=function(){return Y.getInstance().get(this.getType())},n.prototype.getType=function(){return"DView"},n.CONSTRAINT=function(t,n,i,r,e){t.scale.set(r,e),t.position.set(n,i)},n}(),cr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){var i,r=this;t.prototype.init.call(this,n),this.tr=null;var e=this.theme;this.nr=new ar(this,(function(){return r.tr}),null==n?void 0:n.view);var u=null==n?void 0:n.canvas;u&&(this.canvas=u),(null!==(i=null==n?void 0:n.mask)&&void 0!==i?i:e.isOverflowMaskEnabled())&&(this.mask=this.getOverflowMask())},n.prototype.getType=function(){return"DCanvasContainer"},n.prototype.onResize=function(n,i,r,e){t.prototype.onResize.call(this,n,i,r,e),this.updateContentSize(n,i,r,e)},Object.defineProperty(n.prototype,"canvas",{get:function(){return this.tr},set:function(t){var n=this.tr;null!=n&&(this.tr=null,this.removeChild(n),this.emit("unset",n,this),n.destroy()),this.tr=t,null!=t?(this.addChild(t),this.nr.reset(0),this.emit("set",t,this)):rt.update(this)},enumerable:!1,configurable:!0}),n.prototype.getOverflowMask=function(){return null==this.ir&&(this.ir=new qi(this),this.Fn.add(this.ir),this.toDirty()),this.ir},n.prototype.updateContentSize=function(t,n,i,r){var e=this.tr;if(null!=e){var u=e.x+.5*(t-i),s=e.y+.5*(n-r);e.position.set(u,s)}},Object.defineProperty(n.prototype,"view",{get:function(){return this.nr},enumerable:!1,configurable:!0}),n.prototype.onWheel=function(n,i,r){var e=this.nr.onWheel(n,i,r),u=t.prototype.onWheel.call(this,n,i,r);return e||u},n.prototype.onDblClick=function(n,i,r){if(!0!==r){var e=this.nr.onDblClick(n,i),u=t.prototype.onDblClick.call(this,n,i);return e||u}return t.prototype.onDblClick.call(this,n,i)},n.prototype.onDown=function(n,i){!0!==i&&this.nr.onDown(n),t.prototype.onDown.call(this,n)},n.prototype.destroy=function(){var n=this.ir;null!=n&&(this.ir=null,n.destroy()),this.mask=null,t.prototype.destroy.call(this)},n}(Zi),fr={DIAGRAM:0,PAGE:1,EXTENSION:1e3},lr=function(){function t(t){var n=this.newSources(t);this.rr=n,this.er=this.newSourceIndices(n),this.ur=[],this.sr=0}return t.prototype.map=function(n,i,r){var e=this.rr;if(null!=e){var u=n.id,s=u.toLowerCase();this.calcTargetIndices(s);var h=this.ur,o=this.sr,a=e.length;if(a+1===o){for(var c=0;c<a;++c){var f=e[c],l=h[c],v=h[c+1];if(f!==t.WILDCARD&&f!==s.substring(l+1,v))return}if(null!=i){var b=this.newValueId(i,u,h);null!=b&&(n.id=b)}0<r.length&&(n.initial=r)}}},t.prototype.newSources=function(n){return null==n||n.length<=0?null:n.toLowerCase().split(t.SEPARATOR)},t.prototype.newValueId=function(n,i,r){for(var e="",u="",s=t.WILDCARD,h=t.SEPARATOR,o=this.er,a=o.length,c=0,f=n.length;c<f;++c){var l=n[f-1-c];if(l===s){if(!(0<=(a-=1)))return null;var v=o[a],b=r[v],d=r[v+1];e=i.substring(b+1,d)+u+e}else e=l+u+e;u=h}return e},t.prototype.calcTargetIndices=function(n){var i=this.ur,r=1;i[0]=-1;for(var e=-1,u=-1;0<=(u=n.indexOf(t.SEPARATOR,e+1));)i[r]=u,e=u,r+=1;i[r]=n.length,r+=1,this.sr=r},t.prototype.newSourceIndices=function(n){var i=[];if(null!=n)for(var r=t.WILDCARD,e=0,u=n.length;e<u;++e)n[e]===r&&i.push(e);return i},t.split=function(t){return null==t||t.length<=0?null:t.split(this.SEPARATOR)},t.SEPARATOR=".",t.WILDCARD="*",t}(),vr=function(){function t(t,n,i,r){this.resources=t.resources,this.data=t.data||t.tags||t.resources,this.pieces=n,this.pieceData=i,this.isEditMode=r,this.hr=new Map,this.ar=new Map,this.cr=new Map,this.Bt=new Map,this.lr=new Map,this.vr=new Map,this.br=new Map,this.dr=new Map,this.gr=new Map,this.mr=new Map,this.wr=new Map,this.pr=new Map,this.Or=new Map,this.Dr=new Map}return t.prototype.getAction=function(t){return this.hr.get(t)},t.prototype.setAction=function(t,n){this.hr.set(t,n)},t.prototype.getFill=function(t){return this.ar.get(t)},t.prototype.setFill=function(t,n){this.ar.set(t,n)},t.prototype.getStroke=function(t){return this.cr.get(t)},t.prototype.setStroke=function(t,n){this.cr.set(t,n)},t.prototype.getData=function(t){return this.Bt.get(t)},t.prototype.setData=function(t,n){this.Bt.set(t,n)},t.prototype.getDataValue=function(t){return this.lr.get(t)},t.prototype.setDataValue=function(t,n){this.lr.set(t,n)},t.prototype.getDataMapping=function(t){return this.vr.get(t)},t.prototype.setDataMapping=function(t,n){this.vr.set(t,n)},t.prototype.getDataMapper=function(t){var n=this.br,i=n.get(t);return void 0===i&&(i=new lr(t),n.set(t,i)),i},t.prototype.getDataDestination=function(t){var n=this.dr,i=n.get(t);return void 0===i&&(i=lr.split(t),n.set(t,i)),i},t.prototype.getRange=function(t){return this.gr.get(t)},t.prototype.setRange=function(t,n){this.gr.set(t,n)},t.prototype.getAlign=function(t){return this.mr.get(t)},t.prototype.setAlign=function(t,n){this.mr.set(t,n)},t.prototype.getMargin=function(t){return this.wr.get(t)},t.prototype.setMargin=function(t,n){this.wr.set(t,n)},t.prototype.getText=function(t){return this.pr.get(t)},t.prototype.setText=function(t,n){this.pr.set(t,n)},t.prototype.getTextOutline=function(t){return this.Or.get(t)},t.prototype.setTextOutline=function(t,n){this.Or.set(t,n)},t.prototype.getExtension=function(t){return this.Dr.get(t)},t.prototype.setExtension=function(t,n){this.Dr.set(t,n)},t}(),br=function(){function t(t){this.p=t}return Object.defineProperty(t.prototype,"horizontal",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.align.horizontal:m.CENTER},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.align.horizontal=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.align.vertical:w.MIDDLE},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.align.vertical=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.align.copy(t)},t.prototype.set=function(t,n){for(var i=this.p.children,r=0,e=i.length;r<e;++r)i[r].text.align.set(t,n)},t.prototype.toObject=function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.align.toObject():{horizontal:m.CENTER,vertical:w.MIDDLE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),dr=function(){function t(t){this.p=t}return Object.defineProperty(t.prototype,"horizontal",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.offset.horizontal:0},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.offset.horizontal=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.offset.vertical:0},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.offset.vertical=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.offset.copy(t)},t.prototype.set=function(t,n){for(var i=this.p.children,r=0,e=i.length;r<e;++r)i[r].text.offset.set(t,n)},t.prototype.toObject=function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.offset.toObject():{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),gr=function(){function t(t){this.p=t}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.p.children;return 0<t.length&&t[t.length-1].text.outline.enable},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.outline.enable=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.outline.color:16777215},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.outline.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.outline.alpha:1},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.outline.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.outline.width:1},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.outline.width=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.outline.copy(t)},t.prototype.set=function(t,n,i,r){for(var e=this.p.children,u=0,s=e.length;u<s;++u)e[u].text.outline.set(t,n,i,r)},t.prototype.clone=function(){return new t(this.p)},t.prototype.toObject=function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.outline.toObject():{enable:!1,color:16777215,alpha:1,width:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),mr=function(){function t(t){this.p=t}return Object.defineProperty(t.prototype,"horizontal",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.padding.horizontal:0},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.padding.horizontal=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.padding.vertical:0},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.padding.vertical=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.padding.copy(t)},t.prototype.set=function(t,n){for(var i=this.p.children,r=0,e=i.length;r<e;++r)i[r].text.padding.set(t,n)},t.prototype.toObject=function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.padding.toObject():{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),wr=function(){function t(t){this.p=t}return Object.defineProperty(t.prototype,"horizontal",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.spacing.horizontal:0},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.spacing.horizontal=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.spacing.vertical:0},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.spacing.vertical=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.spacing.copy(t)},t.prototype.set=function(t,n){for(var i=this.p.children,r=0,e=i.length;r<e;++r)i[r].text.spacing.set(t,n)},t.prototype.toObject=function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.spacing.toObject():{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),pr=function(){function t(t){this.p=t,this.align=new br(t),this.offset=new dr(t),this.outline=new gr(t),this.spacing=new wr(t),this.padding=new mr(t)}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.p.children;return!(0<t.length)||t[t.length-1].text.enable},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.enable=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.value:""},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.color:0},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.alpha:1},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.family:"auto"},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.family=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.size:24},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.size=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.weight:d.NORMAL},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.weight=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.style:g.NORMAL},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.style=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.direction:0},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.direction=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clipping",{get:function(){var t=this.p.children;return 0<t.length&&t[t.length-1].text.clipping},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.clipping=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].text.copy(t);return this},t.prototype.set=function(t,n,i,r,e,u,s,h){for(var o=this.p.children,a=0,c=o.length;a<c;++a)o[a].text.set(t,n,i,r,e,u,s,h);return this},t.prototype.toObject=function(){var t=this.p.children;return 0<t.length?t[t.length-1].text.toObject():{value:"",color:0,alpha:1,family:"auto",size:24,weight:d.NORMAL,align:this.align.toObject(),offset:this.offset.toObject(),style:g.NORMAL,outline:this.outline.toObject(),spacing:this.spacing.toObject(),direction:p.LEFT_TO_RIGHT,padding:this.padding.toObject(),clipping:!1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Or=function(){function t(){}return Object.defineProperty(t.prototype,"enable",{get:function(){return!0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 16777215},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n,i){},t.prototype.clone=function(){return new t},t.prototype.toObject=function(){return{enable:!0,color:16777215,alpha:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Dr=function(){function n(n,i,r,e,u){this.p=n,this._x=i,this._y=r,this.Er=new t.Point(e,u)}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"base",{get:function(){return this.Er},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.Er.copyFrom(this),this.onChange()},n.prototype.clone=function(){var t=this.Er;return new n(this.p,this._x,this._y,t.x,t.y)},n.prototype.set=function(t,n){var i=!1;return null!=t&&this._x!==t&&(this._x=t,i=!0),null!=n&&this._y!==n&&(this._y=n,i=!0),i&&this.onChange(),this},n.prototype.copyFrom=function(t){return t instanceof n&&this.Er.copyFrom(t.base),this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.onChange()),this},n.prototype.copyTo=function(t){return t instanceof n&&this.Er.copyTo(t.base),t.set(this._x,this._y),t},n.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},n.prototype.fit=function(){},n.prototype.onChange=function(){var t=this.Er;this.p.transform.scale.set(this._x/t.x,this._y/t.y)},n}(),Er=function(){function t(){}return Object.defineProperty(t.prototype,"enable",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 16777215},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){return Pt.NONE},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return s.NONE},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n,i,r,e,u,s){},t.prototype.clone=function(){return new t},t.prototype.toObject=function(){return{enable:!1,color:16777215,alpha:1,width:1,align:0,side:Pt.NONE,style:s.NONE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Mr=function(){function t(){}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return m.CENTER},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return w.MIDDLE},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n){},t.prototype.toObject=function(){return{horizontal:m.CENTER,vertical:w.MIDDLE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Sr=function(){function t(){}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n){},t.prototype.toObject=function(){return{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),jr=function(){function t(){}return Object.defineProperty(t.prototype,"enable",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 16777215},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n,i,r){},t.prototype.clone=function(){return new t},t.prototype.toObject=function(){return{enable:!1,color:16777215,alpha:1,width:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Tr=function(){function t(){}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n){},t.prototype.toObject=function(){return{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Nr=function(){function t(){}return Object.defineProperty(t.prototype,"horizontal",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){},t.prototype.set=function(t,n){},t.prototype.toObject=function(){return{horizontal:0,vertical:0}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Ir=function(){function t(){this.align=new Mr,this.offset=new Sr,this.outline=new jr,this.spacing=new Nr,this.padding=new Tr}return Object.defineProperty(t.prototype,"enable",{get:function(){return!0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return""},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return 1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return"auto"},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return 24},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return d.NORMAL},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return g.NORMAL},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return p.LEFT_TO_RIGHT},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clipping",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return this},t.prototype.set=function(t,n,i,r,e,u,s,h,o){return this},t.prototype.toObject=function(){return{value:"",color:0,alpha:1,family:"auto",size:24,weight:d.NORMAL,align:this.align.toObject(),offset:this.offset.toObject(),style:g.NORMAL,outline:this.outline.toObject(),spacing:this.spacing.toObject(),direction:p.LEFT_TO_RIGHT,padding:this.padding.toObject(),clipping:!1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),Cr={NONE:0,ID:1,POSITION:2,WIDTH:4,HEIGHT:8,ROTATION:16,SKEW:32,ALIGN:0,REPLACING:64,GROUPING:128,UNGROUPING:256,FILL:512,STROKE:1024,STROKE_SIDE:2048,BORDER_RADIUS:4096,TEXT:8192,TEXTURE:16384,TAG:32768,DATA:32768,DATA_MAPPING:1048576,ACTION:65536,CURSOR:131072,ORDER_IN_LAYER:262144,CHILDREN:524288,COORDINATE:63,SHAPE:1728,LAYER:262144,PRIMITIVE:1042175,GROUP:1042431,EMBEDDED:1417471,CONNECTOR:1041985,ALL:2097151},Ar=function(){function t(){}return t.get=function(t){var n=this.mappings[t];return null!=n?n:Cr.PRIMITIVE},t.contains=function(t,n){if(null!=t){var i=this.get(t.type);if(i&n)return!0;if(i&Cr.CHILDREN)for(var r=t.children,e=0,u=r.length;e<u;++e)if(this.contains(r[e],n))return!0}return!1},t.set=function(t,n){this.mappings[t]=n},t.mappings={},t}(),Rr=function(){this.localTransform=new t.Matrix,this.internalTransform=new t.Matrix,this.internalTransformParentInverse=new t.Matrix,this.rotation=0,this.size=new t.Point},yr=function(t){return Math.abs(t)<.001?t<0?-.001:.001:t},Lr=function(){function t(){}return t.prepare=function(t){var n=t.editor||new Rr;t.editor=n,t.updateTransform();var i=t.parent;i instanceof wt?i.transform.internalTransform.copyTo(n.internalTransformParentInverse).invert():n.internalTransformParentInverse.identity(),t.transform.internalTransform.copyTo(n.internalTransform),n.rotation=t.transform.rotation,n.size.copyFrom(t.size),t.disallowOnTransformChange()},t.finalize=function(t){t.allowOnTransformChange(!0)},t.apply=function(t,n,i){var r=t.editor;if(null!=r){var e=r.localTransform;if(r.internalTransformParentInverse.copyTo(e).append(n).append(r.internalTransform),i)this.applyLocal(t,e);else{var u=r.size;this.applyLocal(t,e,u.x,u.y)}}},t.applyLocal=function(t,n,i,r){t.disallowUploadedUpdate();var e=n.a,u=n.b,s=n.c,h=n.d,o=n.tx,a=n.ty,c=t.transform,f=Math.atan2(-s,h),l=Math.atan2(+u,e);c.rotation=.5*(f+l);var v=.5*(l-f);c.skew.set(v,v);var b=c.pivot,d=b.x,g=b.y;if(c.position.set(o+(e*d+s*g),a+(u*d+h*g)),null!=i&&null!=r){var m=Math.sqrt(e*e+u*u),w=Math.sqrt(s*s+h*h);t.size.set(yr(i*m),yr(r*w))}t.allowUploadedUpdate()},t}(),kr=function(){function n(n,i,r){this.shape=n,this.base=new t.Point(i,r);var e=n.size;this.shapeBase=new t.Point(e.x,e.y),this.transform=new t.Matrix,n.updateTransform(),n.transform.localTransform.copyTo(this.transform),this.capable=Ar.contains(n,Cr.POSITION)&&Ar.contains(n,Cr.WIDTH)&&Ar.contains(n,Cr.HEIGHT)&&Ar.contains(n,Cr.ROTATION)&&Ar.contains(n,Cr.SKEW)}return n.prototype.isCompatible=function(t){return this.shape===t},n.prototype.reset=function(t,n,i){this.base.set(n,i);var r=t.size;this.shapeBase.copyFrom(r),t.updateTransform(),t.transform.localTransform.copyTo(this.transform)},n.prototype.update=function(t,i,r,e,u){if(this.capable){var s=i/this.base.x,h=r/this.base.y,o=this.shapeBase,a=n.WORK_TRANSFORM;a.identity().append(this.transform).translate(-e,-u).scale(s,h).translate(+e,+u),t.disallowOnTransformChange(),Lr.applyLocal(t,a,o.x,o.y),t.allowOnTransformChange(!1)}},n.WORK_TRANSFORM=new t.Matrix,n}(),xr=function(){function n(n,i,r,e){this.Mr=new t.Rectangle,this.Sr=new t.Rectangle,this.p=n,this.jr=[],this.T=new t.Point(i,r),this.Tr=e}return n.prototype.init=function(){},Object.defineProperty(n.prototype,"x",{get:function(){return this.T.x},set:function(t){var n=this.T;if(n.x!==t){var i=n.x;n.x=t,this.onChange(i,n.y)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.T.y},set:function(t){var n=this.T;if(n.y!==t){var i=n.y;n.y=t,this.onChange(n.x,i)}},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n){var i=!1,r=this.T,e=r.x,u=r.y;return null!=t&&e!==t&&(i=!0,r.x=t),null!=n&&u!==n&&(i=!0,r.y=n),i&&this.onChange(e,u),this},n.prototype.clone=function(){var t=this.T;return new n(this.p,t.x,t.y,this.Tr)},n.prototype.copy=function(){},n.prototype.copyFrom=function(t){var n=t.x,i=t.y,r=this.T,e=r.x,u=r.y;return e===n&&u===i||(r.x=n,r.y=i,this.onChange(e,u)),this},n.prototype.copyTo=function(t){return this.T.copyTo(t)},n.prototype.equals=function(t){return this.T.equals(t)},n.prototype.fit=function(){this.Tr&&this.doFit()},n.prototype.doFit=function(){var t=this.p;t.disallowOnTransformChange();var n=this.calcRect(this.Sr),i=this.T;i.set(n.width,n.height),t.updateTransform();var r=t.transform,e=n.x+.5*n.width,u=n.y+.5*n.height,s=r.position,h=r.localTransform,o=h.a,a=h.b,c=h.c,f=h.d,l=r.pivot;s.set(s.x+(o*e+c*u)-(o*l.x+c*l.y),s.y+(a*e+f*u)-(a*l.x+f*l.y)),l.set(e,u),this.reset(t.children,this.jr,i),t.allowOnTransformChange(!0)},n.prototype.reset=function(t,n,i){for(var r=0,e=Math.min(n.length,t.length);r<e;++r){var u=t[r],s=n[r];if(!s.isCompatible(u)){n.length=r;break}s.reset(u,i.x,i.y)}t.length<n.length&&(n.length=t.length)},n.prototype.calcRect=function(t){var n=this.p.children;if(n.length<=0)t.x=0,t.y=0,t.width=0,t.height=0;else{var i=this.Mr;n[0].getBoundsLocal(!1,t);for(var r=1,e=n.length;r<e;++r)n[r].getBoundsLocal(!1,i),t.enlarge(i)}return t},n.prototype.onChange=function(t,n){var i=this.p,r=this.T,e=i.transform.pivot;this.Nr(i.children,this.jr,r.x,r.y,e.x,e.y,t,n),i.onSizeChange()},n.prototype.Nr=function(t,n,i,r,e,u,s,h){for(var o=0,a=Math.min(n.length,t.length);o<a;++o){var c=t[o];if(!(f=n[o]).isCompatible(c)){n.length=o;break}f.update(c,i,r,e,u)}for(o=n.length,a=t.length;o<a;++o){var f;c=t[o],(f=this.newLayout(c,s,h)).update(c,i,r,e,u),n.push(f)}n.length!==t.length&&(n.length=t.length)},n.prototype.newLayout=function(t,n,i){return t.layout||new kr(t,n,i)},n}(),Br=function(t){function n(n,i){var r=t.call(this,i)||this;r.Ir=n;var e=r.newData();return r.data=e,r.tag=e,r.size=r.newGroupSize(n),r.fill=r.newGroupFill(),r.stroke=r.newGroupStroke(),r.text=r.newGroupText(),r}return B(n,t),Object.defineProperty(n.prototype,"isEditMode",{get:function(){return this.Ir},enumerable:!1,configurable:!0}),n.prototype.newGroupSize=function(t){var n=K.SIZE_X,i=K.SIZE_Y;return t?new xr(this,n,i,this.isGroupSizeFittable()):new Dr(this,n,i,n,i)},n.prototype.isGroupSizeFittable=function(){return!0},n.prototype.newData=function(){return new Rt},n.prototype.newGroupFill=function(){return new Or},n.prototype.newGroupStroke=function(){return new Er},n.prototype.newGroupText=function(){return new Ir},n.prototype.getBoundsSize=function(){var t=this.size;return t instanceof Dr?t.base:t},n.prototype.onChildTransformChange=function(){t.prototype.onChildTransformChange.call(this),this.size.fit()},Object.defineProperty(n.prototype,"corner",{get:function(){return it.NONE},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cursor",{get:function(){return""},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"gradient",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"image",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"points",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.containsAbs=function(t,n,i,r,e,u,s){return!1},n}(wt),_r=function(t){function n(n,i,e){void 0===e&&(e=r.EMBEDDED);var u=t.call(this,i,e)||this;return u.Cr=n,u}return B(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return this.Cr},enumerable:!1,configurable:!0}),n.prototype.newGroupText=function(){return new pr(this)},n.prototype.isGroupSizeFittable=function(){return!1},n.prototype.clone=function(){for(var t=this.newClone().copy(this),n=this.children,i=0,r=n.length;i<r;++i){var e=n[i].clone();e.parent=t,t.children.push(e)}return t.onChildTransformChange(),t.toDirty(),t},n.prototype.newClone=function(){return new(0,this.constructor)(this.Cr,this.Ir,this.type)},n.prototype.serializeChildren=function(t){return[]},n.prototype.serializeImage=function(t){return-1},n.prototype.serializeGradient=function(t){return-1},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n);return i[15]=n.addPiece(this.Cr),i},n.prototype.addUuid=function(t){this.uuid=t.addUuid(this.uuid)},n.prototype.updateUuid=function(t){this.uuid=t.updateUuid(this.uuid)},n}(Br),Pr=function(){function t(t){this.Ar=t}return t.prototype.find=function(t){return this.getUuidToShape().get(t)},t.prototype.getUuidToShape=function(){var t=this.Rr;return null==t&&(t=this.newUuidToShape(),this.Rr=t),t},t.prototype.newUuidToShape=function(){var t=new Map;return this.fillUuidToShape(this.Ar,t),t},t.prototype.fillUuidToShape=function(t,n){for(var i=0,r=t.length;i<r;++i){var e=t[i];if(n.set(e.uuid,e),e instanceof _r){var u=e.children;0<u.length&&this.fillUuidToShape(u,n)}}},t}(),Fr=function(t,i){var e=n[t[0]]||n[r.NULL];if(null!=e){var u=e(t,i);if(null!=u)return u}throw new Error("Missing shape deserializers")},Ur=function(t,n){for(var i=[],r=0,e=t.length;r<e;++r)i.push(Fr(t[r],n));return 0<i.length?Promise.all(i).then((function(i){return Gr(t,i,new Pr(i),n),i})):null},Gr=function(t,n,r,e){for(var u=0,s=t.length;u<s;++u){var h=t[u],o=n[u],a=i[h[0]];a&&a(h,o,r,e),Gr(h[20],o.children,r,e)}},zr=function(t,n,i,r){this.name=t,this.width=n,this.height=i,this.layer=r},Hr=function(){function t(){this.V=new Map}return t.prototype.add=function(t,n,i,r){return this.V.set(t,{type:n,x:i,y:r}),!0},t.prototype.remove=function(t){var n=this.V,i=n.get(t);return null!=i?(n.delete(t),i):null},t.prototype.size=function(){return this.V.size},t.prototype.get=function(t){return this.V.get(t)||null},t.prototype.each=function(t){return this.V.forEach(t),this},t.prototype.contains=function(t){return this.V.has(t)},t.prototype.clear=function(){var t=this.V;return 0<t.size&&(t.clear(),!0)},t}(),Vr={TAIL:1,HEAD:2,ALL:3},Wr=function(){function t(){}return t.set=function(t,n){var i=this.yr;null==i&&(i=new Map,this.yr=i),i.set(t,n)},t.get=function(t){var n;return(null===(n=this.yr)||void 0===n?void 0:n.get(t))||this.getDefault()},t.getDefault=function(){var t=this.Lr;return null==t&&(t=this.newDefault(),this.Lr=t),t},t.newDefault=function(){var t=new Hr;return t.add("TOP",Vr.ALL,0,-.5),t.add("LEFT",Vr.ALL,-.5,0),t.add("RIGHT",Vr.ALL,.5,0),t.add("BOTTOM",Vr.ALL,0,.5),t.add("CENTER",Vr.ALL,0,0),t.add("TOP_LEFT",Vr.ALL,-.5,-.5),t.add("TOP_RIGHT",Vr.ALL,.5,-.5),t.add("BOTTOM_LEFT",Vr.ALL,-.5,.5),t.add("BOTTOM_RIGHT",Vr.ALL,.5,.5),t},t}(),Xr=function(){function t(t){this.p=t,this.kr=null,this.Br=null}return Object.defineProperty(t.prototype,"shape",{get:function(){return this.kr},set:function(t){this.set(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"edge",{get:function(){return this.Br},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return this.set(t.shape,t.edge)},t.prototype.set=function(t,n){var i=!1;return void 0!==t&&this.kr!==t&&(this.kr=t,i=!0),void 0!==n&&this.Br!==n&&(this.Br=n,i=!0),i&&this.p.onAcceptorChange(),this},t}(),Yr=function(){function n(n,i){var r=this;this.p=n,this.Z=i,this._r=new Xr(this),this.J=new t.ObservablePoint((function(){r.onLocalChange()}),void 0),this.Pr=0,this.Fr=0,this.Ur=0,this.Gr=0,this.zr=!1,this.Hr=!1,this.Vr=!1}return n.prototype.lock=function(){this.Gr+=1,1===this.Gr&&(this.zr=!1,this.Hr=!1,this.Vr=!1)},n.prototype.unlock=function(){this.Gr-=1,0===this.Gr&&(this.Hr?this.onLocalChange():this.zr?this.onAcceptorChange():this.Vr&&this.onOtherChange())},Object.defineProperty(n.prototype,"acceptor",{get:function(){return this._r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"local",{get:function(){return this.J},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localId",{get:function(){return this.Fr},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"margin",{get:function(){return this.Ur},set:function(t){this.Ur!==t&&(this.Ur=t,this.onOtherChange())},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e){return this.lock(),this._r.set(t,n),null!=r&&(this.J.x=r),null!=e&&(this.J.y=e),null!=i&&(this.margin=i),this.unlock(),this},n.prototype.copy=function(t){return this.lock(),this._r.copy(t.acceptor),this.J.copyFrom(t.local),this.margin=t.margin,this.unlock(),this},n.prototype.serialize=function(t){var n=this._r,i=n.shape,r=i?i.uuid:null,e=n.edge,u=null!=e?t.addResource(e):-1,s=this.J;return t.addResource("[".concat(r,",").concat(u,",").concat(s.x,",").concat(s.y,",").concat(this.Ur,"]"))},n.prototype.deserialize=function(t,n,i){var r=i.resources;if(0<=t&&t<r.length){var e=i.getExtension(t);null==e&&(e=JSON.parse(r[t]),i.setExtension(t,e));var u=null,s=e[0];null!=s&&(u=n.find(s)||null),this.lock();var h=this._r;h.shape=u;var o=e[1];h.edge=0<=o&&o<r.length?r[o]:null,this.J.set(e[2],e[3]),this.margin=e[4]||0,this.unlock(),u&&u.connector.add(this)}},n.prototype.fit=function(i){var r;i&&(this.Pr+=1);var e=this.Pr;if(this.Fr!==e){this.Fr=e;var u=this._r,s=u.shape,h=u.edge;if(null!=s&&null!=h){var o=Wr.get(s.type).get(h);if(o){var a=null!==(r=n.WORK_UPDATE_LOCAL)&&void 0!==r?r:n.WORK_UPDATE_LOCAL=new t.Point,c=s.size,f=s.transform.pivot;a.set(f.x+c.x*o.x,f.y+c.y*o.y),s.toGlobal(a,a);var l=this.p,v=l.parent;v&&(l.updateTransform(),v.toLocal(a,void 0,a,!0)),this.J.copyFrom(a)}}}return this},n.prototype.onAcceptorChange=function(){0<this.Gr?this.zr=!0:(this.Pr+=1,this.fit())},n.prototype.onLocalChange=function(){0<this.Gr?this.Hr=!0:(this.Pr+=1,this.Fr=this.Pr,this.Z())},n.prototype.onOtherChange=function(){0<this.Gr?this.Vr=!0:this.Z()},n.prototype.attach=function(){var t=this._r.shape;return t&&t.connector.add(this),this},n.prototype.detach=function(){var t=this._r.shape;return t&&t.connector.remove(this),this},n}(),Kr=function(){function t(t,n){var i=this;this.p=t,this.Gr=0,this.Pt=!1,this.Z=n;var r=function(){i.onChange()};this.Wr=new Yr(t,r),this.Xr=new Yr(t,r)}return t.prototype.lock=function(){return this.Gr+=1,1===this.Gr&&(this.Pt=!1),this},t.prototype.unlock=function(){return this.Gr-=1,0===this.Gr&&this.Pt&&this.Z(),this},t.prototype.onChange=function(){0<this.Gr?this.Pt=!0:this.Z()},Object.defineProperty(t.prototype,"tail",{get:function(){return this.Wr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return this.Xr},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){return this.lock(),this.Wr.copy(t.tail),this.Xr.copy(t.head),this.unlock(),this},t.prototype.fit=function(t){return this.lock(),this.Wr.fit(t),this.Xr.fit(t),this.unlock(),this},t.prototype.serialize=function(t){var n=this.Wr.serialize(t),i=this.Xr.serialize(t);return t.addResource("[".concat(n,",").concat(i,"]"))},t.prototype.deserialize=function(t,n,i){var r=i.resources;if(0<=t&&t<r.length){var e=i.getExtension(t);null==e&&(e=JSON.parse(r[t]),i.setExtension(t,e)),this.lock(),this.Wr.deserialize(e[0],n,i),this.Xr.deserialize(e[1],n,i),this.unlock()}},t.prototype.attach=function(){this.lock();var t=this.Wr,n=this.Xr;return t.attach(),n.attach(),t.fit(!0),n.fit(!0),this.unlock(),this},t.prototype.detach=function(){return this.lock(),this.Wr.detach(),this.Xr.detach(),this.unlock(),this},t}(),Jr=function(t,n){for(var i=0,r=t.length-1;i<=r;){var e=i+(r-i>>1),u=t[e];if(n<u)r=e-1;else{if(!(u<n))return e;i=e+1}}return-1},Zr=2*Math.PI,qr=.5*Math.PI,Qr=function(t,n,i,r){return t*i+n*r},$r=function(t,n){return Math.sqrt(Qr(t,n,t,n))},te=function(t,n,i,r){return t*r-n*i},ne=function(t,n,i,r,e,u,s,h,o,a){var c=a.center;c[0]=t,c[1]=n;var f=a.axis1;f[0]=i,f[1]=r;var l=a.axis2;l[0]=e,l[1]=u;var v=a.angle;return v[0]=s,v[1]=h,v[2]=o,a},ie=function(t,n){var i=t.center,r=t.axis1,e=t.axis2,u=t.angle;return ne(i[0],i[1],r[0],r[1],e[0],e[1],u[0],u[1],u[2],n)},re=function(t,n){for(var i=t.length,r=0;r<i;++r)n[r]=t[r];return n.length!==i&&(n.length=i),n},ee=function(){function t(){}return t.set=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b){for(var d=Math.max(Math.abs(n-i),Math.abs(s-h)),g=f?Math.max(1,Math.round(c*(d/qr))):c,m=l?g+1:g,w=0;w<m;++w){var p=w/g,O=1-p,D=p,E=O*n+D*i,M=Math.cos(E),S=Math.sin(E),j=t[0]+M*r[0]+S*e[0],T=t[1]+M*r[1]+S*e[1],N=O*s+D*h,I=Math.cos(N),C=Math.sin(N),A=u[0]+I*o[0]+C*a[0],R=u[1]+I*o[1]+C*a[1],y=qr*p,L=Math.cos(y),k=Math.sin(y),x=L*L,B=k*k,_=x*j+B*A,P=x*T+B*R;v[++b]=_,v[++b]=P}return b},t.interpolate=function(t,n,i,r,e,u,s,h){var o=h.values,a=h.segments;if(t<=2)return re(n,o),re(i,a),h;var c=this.WORK_P0||{center:[0,0],axis1:[0,0],axis2:[0,0],angle:[0,0,0]},f=this.WORK_P1||{center:[0,0],axis1:[0,0],axis2:[0,0],angle:[0,0,0]},l=this.WORK_P2||{center:[0,0],axis1:[0,0],axis2:[0,0],angle:[0,0,0]};this.WORK_P0=c,this.WORK_P1=f,this.WORK_P2=l;var v=-1,b=-1;if(e){r(0,t,n,c),ie(c,f);for(var d=1;d<t;++d){if(r(d,t,n,l),0<=Jr(i,d)){var g=d-1<<1;o[++v]=n[g+0],o[++v]=n[g+1],a[++b]=v+1>>1}else v=this.set(f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,l.center,l.angle[0],l.angle[1],l.axis1,l.axis2,u,s,!1,o,v);var m=f;f=l,l=m}0<=Jr(i,0)?(g=t-1<<1,o[++v]=n[g+0],o[++v]=n[g+1],a.unshift(0),b+=1):v=this.set(f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,c.center,c.angle[0],c.angle[1],c.axis1,c.axis2,u,s,!1,o,v)}else{r(1,t,n,c),0<=Jr(i,1)?(o[++v]=n[0],o[++v]=n[1],a[++b]=1):v=this.set(c.center,c.angle[0],c.angle[1],c.axis1,c.axis2,c.center,c.angle[0],c.angle[1],c.axis1,c.axis2,u,s,!1,o,v),ie(c,f),d=2;for(var w=t-1;d<w;++d)r(d,t,n,l),0<=Jr(i,d)?(g=d-1<<1,o[++v]=n[g+0],o[++v]=n[g+1],a[++b]=v+1>>1):v=this.set(f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,l.center,l.angle[0],l.angle[1],l.axis1,l.axis2,u,s,!1,o,v),m=f,f=l,l=m;0<=Jr(i,t-1)?(g=t-2<<1,o[++v]=n[g+0],o[++v]=n[g+1],a[++b]=v+1>>1):v=this.set(f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,f.center,f.angle[1],f.angle[2],f.axis1,f.axis2,u,s,!0,o,v)}return v+=1,o.length!==v&&(o.length=v),b+=1,a.length!==b&&(a.length=b),h},t.toCircle=function(t,n,i,r){var e=(0<t?t-1:n-1)<<1,u=t<<1,s=(t<n-1?t+1:0)<<1,h=i[e+0],o=i[e+1],a=i[u+0],c=i[u+1],f=i[s+0],l=i[s+1],v=a-h,b=c-o,d=f-a,g=l-c,m=h+.5*v,w=o+.5*b,p=a+.5*d,O=c+.5*g,D=-b,E=+v,M=-g,S=+d,j=te(D,E,M,S);if(Math.abs(j)<.001){if(0<=Qr(v,b,d,g)||n<=2){var T=.01,N=Math.sin(T),I=$r(v,b),C=$r(d,g);return ne(a,c,0,0,d/N,g/N,-T*I/C,0,T,r)}j=.001}var A=(S*(p-m)+M*(w-O))/j,R=m+A*D,y=w+A*E,L=a-R,k=c-y,x=-k,B=+L,_=f-R,P=l-y,F=Math.atan2(Qr(x,B,_,P),Qr(L,k,_,P)),U=h-R,G=o-y,z=Math.atan2(Qr(x,B,U,G),Qr(L,k,U,G));return 0<z*F&&(Math.abs(z)<Math.abs(F)&&(0<F?F-=Zr:F+=Zr),Math.abs(F)<Math.abs(z)&&(0<z?z-=Zr:z+=Zr)),ne(R,y,L,k,x,B,z,0,F,r)},t.toEllipse=function(t,n,i,r){var e=(0<t?t-1:n-1)<<1,u=t<<1,s=(t<n-1?t+1:0)<<1,h=i[e+0],o=i[e+1],a=i[u+0],c=i[u+1],f=i[s+0],l=i[s+1],v=h-a,b=o-c,d=f-a,g=l-c;if(n<=2){var m=.01,w=Math.sin(m);return ne(a,c,0,0,d/w,g/w,-m,0,m,r)}for(var p=$r(v,b),O=$r(d,g),D=Qr(v,b,d,g)/(p*O),E=Math.acos(D),M=.5*E,S=.25*E,j=0,T=0,N=0,I=0,C=Math.max(p,O),A=Math.min(p,O),R=0;R<16;++R){var y=.5*M,L=E-y;j=C*Math.sin(y),T=C*Math.cos(y),N=A*Math.sin(L),1<(1-(I=A*Math.cos(L))/T)*(1-I/T)+N*N/(j*j)?M+=S:M-=S,S*=.5}var k=Math.asin(Math.min(N/j,1));if(p<O){var x=d/O,B=g/O,_=void 0,P=void 0;return 0<te(v,b,d,g)?(_=+B,P=-x):(_=-B,P=+x),ne(H=a-(G=(F=-T*T/O)*x+(U=-T*j/O)*_),V=c-(z=F*B+U*P),G,z,f-H,l-V,-k,0,qr,r)}var F,U,G,z,H,V,W=v/p,X=b/p;return _=void 0,P=void 0,te(v,b,d,g)<0?(_=+X,P=-W):(_=-X,P=+W),ne(H=a-(G=(F=-T*T/p)*W+(U=-T*j/p)*_),V=c-(z=F*X+U*P),G,z,-(h-H),-(o-V),-qr,0,k,r)},t.toHybrid=function(n,i,r,e){var u=t.toCircle(n,i,r,e),s=u.angle[0],h=u.angle[2],o=Math.min(s,h),a=Math.max(s,h);return o<-qr||qr<a?t.toEllipse(n,i,r,e):u},t}(),ue=function(t,n,i,r,e){return ee.interpolate(t,n,i,ee.toHybrid,!!(r&U.CLOSED),K.CURVE_SEGMENT_COUNT,!0,e),e.length=e.values.length>>1,e.style=r,e},se=function(t,n){if(2<=t.length){for(var i=t[0],r=t[1],e=i,u=r,s=2,h=t.length;s<h;s+=2){var o=t[s],a=t[s+1];i=Math.min(i,o),r=Math.min(r,a),e=Math.max(e,o),u=Math.max(u,a)}n[0]=i,n[1]=r,n[2]=e,n[3]=u}else n[0]=0,n[1]=0,n[2]=0,n[3]=0;return n},he=function(){function n(n){var i=this;this.p=n,this.Gr=0,this.Yr=!1,this.Kr=!1,this.Jr=!1,this.Tt=J.NONE,this.T=new t.ObservablePoint((function(){i.onSizeChange()}),void 0,.15*K.SIZE_X,.15*K.SIZE_Y),this.C=this.newFill(),this.Zr=0}return n.prototype.newFill=function(){return new Z(this,!0,K.FILL_COLOR,1)},n.prototype.lock=function(){return this.Gr+=1,1===this.Gr&&(this.Yr=!1,this.Kr=!1,this.Jr=!1),this},n.prototype.unlock=function(){return this.Gr-=1,0===this.Gr&&(this.Yr?this.onTypeChange():this.Kr?this.onSizeChange():this.Jr&&this.onFillChange(),this.Yr=!1,this.Kr=!1,this.Jr=!1),this},Object.defineProperty(n.prototype,"type",{get:function(){return this.Tt},set:function(t){this.Tt!==t&&(this.Tt=t,this.onTypeChange())},enumerable:!1,configurable:!0}),n.prototype.onTypeChange=function(){0<this.Gr?this.Yr=!0:this.p.onTypeChange()},Object.defineProperty(n.prototype,"size",{get:function(){return this.T},enumerable:!1,configurable:!0}),n.prototype.onSizeChange=function(){0<this.Gr?this.Kr=!0:this.p.onSizeChange()},Object.defineProperty(n.prototype,"transform",{get:function(){return this.updateTransform()},enumerable:!1,configurable:!0}),n.prototype.updateTransform=function(){var n=this.I;null==n&&(n=new t.Matrix,this.I=n);var i=this.p.parent,r=i.id;if(this.Zr!==r){this.Zr=r;var e=i.formatted;2<=e.length?this.toTransform(e.values,n):n.identity()}return n},n.prototype.toTransformMatrix=function(t,n,i,r,e){var u=t-i,s=n-r,h=u*u+s*s;if(1e-5<h){var o=1/Math.sqrt(h),a=u*o,c=s*o;e.set(c,-a,-a,-c,t,n)}else e.identity();return e},Object.defineProperty(n.prototype,"fill",{get:function(){return this.C},enumerable:!1,configurable:!0}),n.prototype.onFillChange=function(){0<this.Gr?this.Jr=!0:this.p.onFillChange()},n.prototype.updateUploaded=function(){this.onFillChange()},n.prototype.copy=function(t){var n=t.size;return this.set(t.type,n.x,n.y),this},n.prototype.set=function(t,n,i){return this.lock(),null!=t&&(this.type=t),this.size.set(n,i),this.unlock(),this},n.prototype.serialize=function(t){var n=this.T,i=this.C.serialize(t);return t.addResource("[".concat(this.Tt,",").concat(n.x,",").concat(n.y,",").concat(i,"]"))},n.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getExtension(t);null==r&&(r=JSON.parse(i[t]),n.setExtension(t,r)),this.lock(),this.type=r[0],this.T.set(r[1],r[2]),this.C.deserialize(r[3],n),this.unlock()}},n}(),oe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toTransform=function(t,n){var i=t.length;return 4<=i?this.toTransformMatrix(t[i-2],t[i-1],t[i-4],t[i-3],n):(n.identity(),n)},n}(he),ae=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toTransform=function(t,n){return 4<=t.length?this.toTransformMatrix(t[0],t[1],t[2],t[3],n):(n.identity(),n)},n}(he),ce=function(){function t(t){this.p=t,this.Gr=0,this.Yr=!1,this.Kr=!1,this.Jr=!1,this.Xr=new oe(this),this.Wr=new ae(this)}return t.prototype.lock=function(){return this.Gr+=1,1===this.Gr&&(this.Yr=!1,this.Kr=!1,this.Jr=!1),this},t.prototype.unlock=function(){return this.Gr-=1,0===this.Gr&&(this.Yr?this.onTypeChange():this.Kr?this.onSizeChange():this.Jr&&this.onFillChange(),this.Yr=!1,this.Kr=!1,this.Jr=!1),this},Object.defineProperty(t.prototype,"parent",{get:function(){return this.p},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return this.Xr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this.Wr},enumerable:!1,configurable:!0}),t.prototype.onTypeChange=function(){0<this.Gr?this.Yr=!0:this.p.onMarkerTypeChange()},t.prototype.onSizeChange=function(){0<this.Gr?this.Kr=!0:this.p.onMarkerSizeChange()},t.prototype.onFillChange=function(){0<this.Gr?this.Jr=!0:this.p.onMarkerFillChange()},t.prototype.copy=function(t){return this.lock(),this.Xr.copy(t.head),this.Wr.copy(t.tail),this.unlock(),this},t.prototype.serialize=function(t){var n=this.Xr.serialize(t),i=this.Wr.serialize(t);return t.addResource("[".concat(n,",").concat(i,"]"))},t.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getExtension(t);null==r&&(r=JSON.parse(i[t]),n.setExtension(t,r)),this.lock(),this.Xr.deserialize(r[0],n),this.Wr.deserialize(r[1],n),this.unlock()}},t}(),fe=function(){function n(n){this.p=n,this.qr=0,this.L=[],this.k=[];var i=n.size,r=i.x,e=i.y;this.Qr=new t.Point(r,e),this.$r=new t.Point(r,e),this.R=0,this.B=U.NONE,this.te=-1}return Object.defineProperty(n.prototype,"length",{get:function(){return this.L.length>>1},enumerable:!1,configurable:!0}),n.prototype.toFitted=function(){this.ne=void 0;var t=this.p.size;this.$r.copyFrom(t),this.Qr.copyFrom(t)},n.prototype.fit=function(){var t=this.$r,n=this.p.size,i=n.x,r=n.y,e=1e-5;if(e<Math.abs(i-t.x)||e<Math.abs(r-t.y)){t.set(i,r);var u=this.Qr,s=e<Math.abs(u.x),h=e<Math.abs(u.y);if(s||h){var o=s?i/u.x:1,a=h?r/u.y:1,c=this.L,f=this.ne;if(null==f){f=[],this.ne=f;for(var l=0,v=c.length;l<v;l+=2){var b=c[l],d=c[l+1];c[l]=b*o,c[l+1]=d*a,f.push(b,d)}}else for(l=0,v=c.length;l<v;l+=2)c[l]=f[l]*o,c[l+1]=f[l+1]*a;if(this.R===this.te){var g=this.ie;if(null!=g){var m=g.values,w=this.re;if(null==w)for(w=[],this.re=w,l=0,v=m.length;l<v;l+=2)b=m[l],d=m[l+1],m[l]=b*o,m[l+1]=d*a,w.push(b,d);else for(l=0,v=m.length;l<v;l+=2)m[l]=w[l]*o,m[l+1]=w[l+1]*a;var p=g.boundary,O=this.ee;if(null==O)for(O=[0,0,0,0],this.ee=O,l=0,v=p.length;l<v;l+=2)b=p[l],d=p[l+1],p[l]=b*o,p[l+1]=d*a,O[l]=b,O[l+1]=d;else for(l=0,v=p.length;l<v;l+=2)p[l]=O[l]*o,p[l+1]=O[l+1]*a;this.te+=1}}this.R+=1}}},Object.defineProperty(n.prototype,"id",{get:function(){return this.fit(),this.R},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this.fit(),this.L},set:function(t){this.set(t,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"segments",{get:function(){return this.k},set:function(t){this.set(void 0,t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this.B},set:function(t){this.set(void 0,void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"marker",{get:function(){var t=this.A;return null==t&&(t=this.newMarker(),this.A=t),t},enumerable:!1,configurable:!0}),n.prototype.getMarker=function(){return this.A},n.prototype.newMarker=function(){return new ce(this)},n.prototype.onMarkerTypeChange=function(){var t=this.p;t.uploaded=void 0,t.toDirty()},n.prototype.onMarkerSizeChange=function(){this.p.updateUploaded()},n.prototype.onMarkerFillChange=function(){this.p.updateUploaded()},Object.defineProperty(n.prototype,"formatter",{get:function(){return this.ue||null},set:function(t){this.ue!==t&&(this.te=-1,this.ue=t,this.toDirty(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatted",{get:function(){this.fit();var t=this.R,n=this.ie;if(this.te!==t){this.te=t;var i=this.B,r=this.ue;if(null==r&&i&U.CURVE&&(r=ue),null!=r){null==n&&(n={length:0,values:[],segments:[],boundary:[0,0,0,0],style:U.NONE});var e=this.ne,u=this.k;if(null!=e){r(e.length>>1,e,u,i,n),se(n.values,n.boundary);var s=n.values,h=s.splice(0);this.re=h;var o=n.boundary,a=[o[0],o[1],o[2],o[3]];this.ee=a,this.toScaled(s,h,o,a)}else{var c=this.L;r(c.length>>1,c,u,i,n),se(n.values,n.boundary),this.re=void 0,this.ee=void 0}}else n=void 0,this.re=void 0,this.ee=void 0;this.ie=n}return n||this},enumerable:!1,configurable:!0}),n.prototype.toScaled=function(t,n,i,r){var e=this.$r,u=this.Qr,s=1e-5,h=s<Math.abs(u.x),o=s<Math.abs(u.y);if(h||o){for(var a=h?e.x/u.x:1,c=o?e.y/u.y:1,f=0,l=n.length;f<l;f+=2)t[f]=n[f]*a,t[f+1]=n[f+1]*c;for(f=0,l=r.length;f<l;f+=2)i[f]=r[f]*a,i[f+1]=r[f+1]*c}},n.prototype.copy=function(t){this.set(t.values,t.segments,t.style);var n=t.getMarker();return n&&this.marker.copy(n),this},n.prototype.set=function(t,n,i){var r=!1,e=!1,u=this.B,s=u&U.FORMATTER_MASK,h=this.ue;if(null!=t){var o=this.L,a=this.qr,c=t.length,f=Math.min(c,a);if(this.toFitted(),o!==t){for(var l=0;l<f;++l)o[l]=t[l];for(l=f;l<c;++l)o.push(t[l]);a!==c?(o.length=c,this.qr=c,r=!0):null!=h||s?r=!0:e=!0}else a!==c?(this.qr=c,r=!0):null!=h||s?r=!0:e=!0}if(null!=n){var v=this.k;if(v!==n){var b=n.length;for(f=Math.min(v.length,b),l=0;l<f;++l)v[l]=n[l];for(l=f;l<b;++l)v.push(n[l]);v.length!==b&&(v.length=b)}null!=h||s?r=!0:e=!0}return null!=i&&u!==i&&(s!==(i&U.FORMATTER_MASK)||(null!=h||s)&&(u&U.CLOSED)!=(i&U.CLOSED)?r=!0:e=!0,this.B=i),(e||r)&&this.toDirty(r),this},n.prototype.toDirty=function(t){if(t){this.R+=1;var n=this.p,i=n.uploaded;i?i.isCompatible(n)?n.updateUploaded():(n.uploaded=void 0,n.toDirty()):n.updateUploaded()}else this.R+=1,this.p.updateUploaded()},n.prototype.clone=function(t){return new n(t).copy(this)},n.prototype.toPoints=function(n){for(var i=[],r=this.values,e=0,u=r.length;e<u;e+=2){var s=new t.Point(r[e+0],r[e+1]);i.push(n.apply(s,s))}return i},n.prototype.serialize=function(t){var n=JSON.stringify(this.L),i=JSON.stringify(this.k),r=this.B,e=-1,u=this.A;return u&&(e=u.serialize(t)),t.addResource("[".concat(n,",").concat(i,",").concat(r,",").concat(e,"]"))},n.prototype.deserialize=function(t,n){var i=n.resources;if(0<=t&&t<i.length){var r=n.getExtension(t);null==r&&(r=JSON.parse(i[t]),n.setExtension(t,r)),this.set(r[0],r[1],r[2]);var e=r[3];null!=e&&0<=e&&this.marker.deserialize(e,n)}},n.prototype.calcHitPointAbs=function(t,i,r,e,u,s,h,o){var a=this.formatted,c=a.length;if(2<=c){var f=a.values,l=a.segments,v=a.style,b=0,d=c;if(s){var g=n.WORK_RANGE;s(t,i,u,f,g),b=g[0],d=g[1]}for(var m=b,w=Math.min(d,c-1);m<w;++m){var p;if(Jr(l,m+1)<0&&h(t,i,f[0+(p=m<<1)],f[p+1],f[p+2],f[p+3],m,u,o))return!0}if(2<c&&c<=d&&v&U.CLOSED&&Jr(l,0)<0&&h(t,i,f[0+(p=(m=c-1)<<1)],f[p+1],f[0],f[1],m,u,o))return!0}return!1},n.WORK_RANGE=[0,0],n}(),le=function(){function t(t,n){this.p=t,this.R=0,this.L=[],this.Gr=0,this.Pt=!1,this.Z=n}return t.prototype.lock=function(){this.Gr+=1,1===this.Gr&&(this.Pt=!1)},t.prototype.unlock=function(){this.Gr-=1,0===this.Gr&&(this.Pt&&this.onChange(),this.Pt=!1)},Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this.L},set:function(t){this.set(t)},enumerable:!1,configurable:!0}),t.prototype.set=function(t){if(null!=t){if(this.R+=1,this.L!==t){for(var n=t.length,i=this.L,r=0;r<n;++r)i[r]=t[r];i.length=n}this.onChange()}return this},t.prototype.copy=function(t){return this.set(t.values)},t.prototype.serialize=function(t){return t.addResource(JSON.stringify(this.L))},t.prototype.deserialize=function(t,n,i){var r=i.resources;if(0<=t&&t<r.length){var e=i.getExtension(t);null==e&&(e=JSON.parse(r[t]),i.setExtension(t,e)),this.set(e)}},t.prototype.onChange=function(){0<this.Gr?this.Pt=!0:this.Z()},t}(),ve=function(t){function n(n){void 0===n&&(n=r.CONNECTOR_LINE);var i=t.call(this,n)||this;i.se=0,i.he=0,i.oe=0,i.ae=0,i.ce=0,i.Gr=0,i.Pt=!1;var e=.5*K.SIZE_X,u=.5*K.SIZE_Y;i.gt=new fe(i).set([-e,-u,+e,+u]);var s=function(){i.onChange()};return i.Br=new Kr(i,s),i.fe=new le(i,s),i}return B(n,t),n.prototype.lock=function(){this.Gr+=1,1===this.Gr&&(this.Pt=!1)},n.prototype.unlock=function(){this.Gr-=1,0===this.Gr&&(this.Pt&&this.onChange(),this.Pt=!1)},Object.defineProperty(n.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"edge",{get:function(){return this.Br},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"body",{get:function(){return this.fe},enumerable:!1,configurable:!0}),n.prototype.onAttach=function(){t.prototype.onAttach.call(this),this.Br.attach()},n.prototype.onDetach=function(){this.Br.detach(),t.prototype.onDetach.call(this)},n.prototype.onChange=function(){var t;if(0<this.Gr)this.Pt=!0;else{var i=this.Br,r=i.tail,e=r.localId,u=r.margin,s=i.head,h=s.localId,o=s.margin,a=this.fe,c=a.id;if(this.se!==e||this.he!==u||this.oe!==h||this.ae!==o||this.ce!==c){this.se=e,this.he=u,this.oe=h,this.ae=o,this.ce;var f=r.local,l=f.x,v=f.y,b=s.local,d=b.x,g=b.y,m=a.values,w=m.length,p=this.transform,O=p.position,D=O.x,E=O.y,M=this.gt,S=M.values;S.length<4&&(S[0]=0,S[1]=0);var j=1e-6,T=l-D,N=v-E,I=d-D,C=g-E;if(0<w)for(var A=.5*(I+T),R=.5*(C+N),y=I-T,L=C-N,k=Math.atan2(L,y),x=Math.cos(k),B=Math.sin(k),_=Math.sqrt(y*y+L*L),P=0;P<w;P+=2){var F=m[P+0],U=m[P+1];S[P+2]=A+(x*F-B*U)*_,S[P+3]=R+(x*U+B*F)*_}if(S[0]=T,S[1]=N,0!==u&&j<(y=S[2]-T)*y+(L=S[3]-N)*L){var G=u/Math.sqrt(y*y+L*L);S[0]=T+y*G,S[1]=N+L*G}S[2+w]=I,S[3+w]=C,0!==o&&j<(y=S[0+w]-I)*y+(L=S[1+w]-C)*L&&(G=o/Math.sqrt(y*y+L*L),S[2+w]=I+y*G,S[3+w]=C+L*G),S.length=w+4;var z=null!==(t=n.WORK_BOUNDARY)&&void 0!==t?t:n.WORK_BOUNDARY=[0,0,0,0];se(S,z);for(var H=.5*(z[2]+z[0]),V=.5*(z[3]+z[1]),W=z[2]-z[0],X=z[3]-z[1],Y=(P=0,S.length);P<Y;P+=2)S[P+0]-=H,S[P+1]-=V;this.disallowUploadedUpdate(),O.set(D+H,E+V),p.scale.set(1,1),p.rotation=0,p.skew.set(0,0),this.size.set(W,X),M.toFitted(),M.set(S),this.allowUploadedUpdate()}}},n.prototype.copy=function(i,r){return void 0===r&&(r=st.ALL),t.prototype.copy.call(this,i,r),i instanceof n&&(this.Br.copy(i.edge),this.fe.copy(i.body)),this},n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n),r=this.Br.serialize(n),e=this.fe.serialize(n),u=this.gt.serialize(n);return i[15]=n.addResource("[".concat(r,",").concat(u,",").concat(e,"]")),i},n}(Ht),be=function(){function t(){}return t.isConnector=function(t){return t instanceof ve},t.newMapping=function(n,i,r){var e;null==r&&(r=null!==(e=t.le)&&void 0!==e?e:t.le=new Map).clear();for(var u=0,s=n.length;u<s;++u){var h=n[u],o=i[u];r.set(h,o),this.newMapping(h.children,o.children,r)}return r},t.moveAll=function(t,n,i,r,e){for(var u=0,s=i.length;u<s;++u){var h=i[u],o=r[u];if(this.isConnector(h)&&this.isConnector(o)){var a=h.edge,c=o.edge,f=a.head,l=f.acceptor.shape;if(l){null==e&&(e=this.newMapping(t,n));var v=e.get(l);if(v){var b=c.head;b.detach(),b.set(v),b.attach(),v.connector.remove(f)}}var d=a.tail,g=d.acceptor.shape;if(g){null==e&&(e=this.newMapping(t,n));var m=e.get(g);if(m){var w=c.tail;w.detach(),w.set(m),w.attach(),m.connector.remove(d)}}}e=this.moveAll(t,n,h.children,o.children,e)}return e},t.move=function(t,n){var i=t.children,r=n.children;this.moveAll(i,r,i,r)},t}(),de=function(){function n(n,i,r,e,u){this.id=n,this.ref=0;var s=u.resolution;this.frame=new t.Rectangle(0,0,i*s,r*s),this.texture=new t.Texture(u,new t.Rectangle(0,0,1,1)),this.width=i,this.height=r,this.strokeWidth=e}return n.prototype.applyFrame=function(){var t=1/this.texture.baseTexture.resolution;this.texture.frame.x=this.frame.x*t,this.texture.frame.y=this.frame.y*t,this.texture.frame.width=this.width,this.texture.frame.height=this.height,this.texture.updateUvs(),this.texture.emit("update",this)},n.prototype.destroy=function(){this.texture.destroy()},n}(),ge=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.render=function(t){},n}(de),me=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.render=function(t){var n=this.frame;t.save(),t.fillStyle="#ffffff",t.fillRect(n.x-1,n.y-1,n.width+2,n.height+2),t.restore()},n}(de),we=function(){function n(n){var i=this.tr=document.createElement("canvas");i.width=i.height=256;var r=this.ve=t.BaseTexture.from(i,{mipmap:t.MIPMAP_MODES.OFF,resolution:n});this.be={},this.de=[],this.ge={empty:new ge("empty",10,10,0,r),white:new me("white",10,10,0,r)},this.fn=!0}return n.prototype.updateFrames=function(t,n){for(var i=4,r=4,e=0,u=0,s=n.length;u<s;++u){var h=n[u];t<i+h.frame.width+4&&(i=4,r+=e+4,e=0),h.frame.x=0|i,h.frame.y=0|r,i+=h.frame.width+4,e=Math.max(e,h.frame.height)}for(var o=r+e+4,a=256;a<o;)a<<=1;return Math.min(4096,a)},n.prototype.renderFrames=function(t,n,i){var r=this.tr;r.width=t,r.height=n;var e=r.getContext("2d");if(null!=e)for(var u=0,s=i.length;u<s;++u)i[u].render(e)},n.prototype.applyFrames=function(t){for(var n=0,i=t.length;n<i;++n)t[n].applyFrame()},n.prototype.calcCanvasWidth=function(t){for(var n=128,i=t.length-1;0<=i;--i)for(var r=t[i],e=Math.max(r.frame.width,r.frame.height);n<e;)n<<=1;return Math.min(4096,n<<1)},n.prototype.cleanup=function(t){t.sort(n.ITEM_COMPARATOR);for(var i=t.length-1;0<=i;--i)if(0<t[i].ref)return void(t.length=i+1);t.length=0},n.prototype.begin=function(){for(var t=this.de,n=0,i=t.length;n<i;++n)t[n].ref=0;this.fn=!1},n.prototype.end=function(){for(var t=this.be,n=this.de,i=0,r=n.length;i<r;++i){var e=n[i];e.ref<=0&&(e.id in this.ge||e.destroy(),delete t[e.id],this.fn=!0)}},n.prototype.repack=function(t){if(!0===t||this.fn){this.fn=!1;var n=this.de;this.cleanup(n);var i=this.calcCanvasWidth(n),r=this.updateFrames(i,n);this.renderFrames(i,r,n),this.ve.setRealSize(i,r),this.applyFrames(n)}},n.prototype.get=function(t){var n=this.be[t];if(null!=n)return n.ref+=1,n;var i=this.ge[t];return null!=i?(this.set(t,i),i):null},n.prototype.set=function(t,n){var i=this.be[t];return n.ref+=1,this.be[t]=n,this.de.push(n),this.fn=!0,i},n.prototype.toDirty=function(){this.fn=!0},n.prototype.getDefaultTexture=function(){return this.get("white").texture},n.prototype.getBaseTexture=function(){return this.ve},n.prototype.release=function(t){var n=this.be,i=n[t];null!=i&&(i.ref-=1,i.ref<=0&&(i.id in this.ge||i.destroy(),delete n[t],this.fn=!0))},n.ITEM_COMPARATOR=function(t,n){return t.ref<=0?n.ref<=0?0:1:n.ref<=0||t.frame.height<n.frame.height?-1:n.frame.height<t.frame.height?1:t.frame.width-n.frame.width},n}(),pe=function(t){function n(n,i){var r=t.call(this,n.id,n.width/i.resolution,n.height/i.resolution,0,i)||this;return r.canvas=n.canvas,r}return B(n,t),n.prototype.render=function(t){var n=this.canvas;if(null!=n){var i=this.frame;t.drawImage(n,i.x,i.y,i.width,i.height)}},n}(de),Oe="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",De=function(t,n){this.x=t,this.y=n},Ee=function(t,n,i,r,e){this.ref=1,this.life=10,this.character=t,this.x=0,this.y=0,this.width=i,this.height=r,this.advance=n,this.origin=new De(0,0),this.type=e},Me={RESERVED:1,NON_BREAKING:2,SPACE:4,SPACE_R:5,SPACE_NB:6,SPACE_RNB:7,LETTER:8,LETTER_R:9,LETTER_NB:10,LETTER_RNB:11},Se=function(){function t(){var t=this;this.me=null,this.we=null,this.pe=null,this.Oe=NaN,this.De=NaN,this.Ee=NaN,this.Me=NaN,this.Se=null,this.je=null;var n=this.tr=document.createElement("canvas");n.width=64,n.height=64,this.Te=function(t){t.preventDefault()},this.Ne=function(){t.restore()},this.Ie=function(){t.destroy()},n.addEventListener("webglcontextlost",this.Te,!1),n.addEventListener("webglcontextrestored",this.Ne,!1),window.addEventListener("unload",this.Ie,!1)}return t.prototype.init=function(){var t=this.tr;if(null!=t&&(null==this.me||this.me.isContextLost())){var n={alpha:!0,antialias:!1,depth:!1,stencil:!1,premultipliedAlpha:!1},i=t.getContext("webgl",n)||t.getContext("experimental-webgl",n);this.me=i,null!=i&&(i.clearColor(1,1,1,0),this.makeVertexBuffer(),this.makeUvBuffer(),this.makeShaders(),this.we=null)}return this},t.prototype.restore=function(){this.init()},t.prototype.getCanvas=function(){return this.tr},t.prototype.getShader=function(t,n,i){var r=i?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);return null==r||(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))?r:(console&&console.error("Failed to compile the shader: ".concat(t.getShaderInfoLog(r))),null)},t.prototype.makeShaders=function(){var t=this.me;if(null!=t&&!0!==t.isContextLost()){var n=this.getShader(t,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying mediump vec2 vTextureCoord;\nvoid main(void) {\n\tgl_Position = vec4(aVertexPosition, 0.0, 1.0);\n\tvTextureCoord = aTextureCoord;\n}\n",!1);if(null!=n){var i=this.getShader(t,"\nprecision mediump float;\n\nvarying mediump vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uSize;\n\nfloat calcDistance( float x, float y, float dx, float dy ) {\n\tfloat xd = x + dx;\n\tfloat yd = y + dy;\n\tfloat u = xd / uSize.x;\n\tfloat v = yd / uSize.y;\n\tfloat ul = (xd - 1.0) / uSize.x;\n\tfloat vt = (yd - 1.0) / uSize.y;\n\n\tfloat m = texture2D(uSampler, vec2(u , v )).a;\n\tfloat l = texture2D(uSampler, vec2(ul, v )).a;\n\tfloat t = texture2D(uSampler, vec2(u , vt)).a;\n\tfloat ddx = -(0.5 - m) / (l - m);\n\tfloat ddy = -(0.5 - m) / (t - m);\n\tbool bl = min(l,m) < 0.5 && 0.5 <= max(l,m);\n\tbool bt = min(t,m) < 0.5 && 0.5 <= max(t,m);\n\treturn (\n\t\tbl ?\n\t\t(bt ?\n\t\t\tlength(vec2(dx + ddx * 0.5, dy + ddy * 0.5)) :\n\t\t\tlength(vec2(dx + ddx, dy))\n\t\t) :\n\t\t(bt ?\n\t\t\tlength(vec2(dx, dy + ddy)) :\n\t\t\t100.0\n\t\t)\n\t);\n}\n\nfloat calcDistancesY( float x, float y, float dx ) {\n\tfloat d = 100.0;\n\tfor( float dy=-6.0; dy<6.5; dy++ ) {\n\t\td = min( d, calcDistance( x, y, dx, dy ) );\n\t}\n\treturn d;\n}\n\nfloat calcDistances( float x, float y ) {\n\tfloat d = 100.0;\n\tfor( float dx=-6.0; dx<6.5; dx++ ) {\n\t\td = min( d, calcDistancesY( x, y, dx ) );\n\t}\n\treturn d;\n}\n\nvoid main(void) {\n\tfloat t = texture2D(uSampler, vTextureCoord).a;\n\tfloat x = vTextureCoord.x * uSize.x;\n\tfloat y = vTextureCoord.y * uSize.y;\n\tfloat d = min( 6.0, calcDistances( x, y ) ) / 12.0;\n\td = clamp( mix( 0.5 - d, 0.5 + d, step( 0.5, t ) ), 0.0, 1.0 );\n\tgl_FragColor = vec4(1.0, 1.0, 1.0, d);\n}\n",!0);if(null!=i){var r=this.pe=t.createProgram();if(null!=r)return t.attachShader(r,n),t.attachShader(r,i),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?(t.deleteShader(n),t.deleteShader(i),t.useProgram(r),this.Oe=t.getAttribLocation(r,"aVertexPosition"),this.De=t.getAttribLocation(r,"aTextureCoord"),this.Ee=t.getUniformLocation(r,"uSampler"),this.Me=t.getUniformLocation(r,"uSize"),t.useProgram(null),r):(console&&console.error("Failed to link the program: ".concat(t.getError())),t.deleteShader(n),t.deleteShader(i),null);t.deleteShader(n),t.deleteShader(i)}else t.deleteShader(n)}}return null},t.prototype.destroyShaders=function(){var t=this.me;if(null!=t&&!0!==t.isContextLost()){var n=this.pe;null!=n&&(this.pe=null,t.useProgram(null),t.deleteProgram(n))}},t.prototype.updateTexture=function(t){var n=this.me,i=this.tr;if(null!=n&&!0!==n.isContextLost()&&null!=i){var r=t.width,e=t.height;i.width===r&&i.height===e||(i.width=r,i.height=e,n.viewport(0,0,r,e));var u=this.we;return null==u?(u=this.we=n.createTexture(),n.bindTexture(n.TEXTURE_2D,u),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.bindTexture(n.TEXTURE_2D,null)):(n.bindTexture(n.TEXTURE_2D,u),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.bindTexture(n.TEXTURE_2D,null)),u}return null},t.prototype.destroyTexture=function(){var t=this.me,n=this.we;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.we=null,t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(n))},t.prototype.makeVertexBuffer=function(){var t=this.me;if(null!=t&&!0!==t.isContextLost()){var n=this.Se=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),t.STATIC_DRAW),n}return null},t.prototype.destroyVertexBuffer=function(){var t=this.me,n=this.Se;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.Se=null,t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(n))},t.prototype.makeUvBuffer=function(){var t=this.me;if(null!=t&&!0!==t.isContextLost()){var n=this.je=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),t.STATIC_DRAW),n}return null},t.prototype.destroyUvBuffer=function(){var t=this.me,n=this.je;null!=t&&!0!==t.isContextLost()&&null!=n&&(this.je=null,t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(n))},t.prototype.render=function(){var t=this.me,n=this.tr,i=this.pe,r=this.Se,e=this.je,u=this.we;if(null!=t&&!0!==t.isContextLost()&&null!=n&&null!=i&&null!=r&&null!=e&&null!=u){t.clear(t.COLOR_BUFFER_BIT),t.useProgram(i),t.bindBuffer(t.ARRAY_BUFFER,r);var s=this.Oe;t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e);var h=this.De;t.enableVertexAttribArray(h),t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,u),t.uniform1i(this.Ee,0),t.uniform2f(this.Me,n.width,n.height),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.bindTexture(t.TEXTURE_2D,null),t.bindBuffer(t.ARRAY_BUFFER,null),t.useProgram(null)}},t.prototype.read=function(t){var n=this.me,i=this.tr;if(null!=n&&!0!==n.isContextLost()&&null!=i){var r=i.width,e=i.height;t.width=r,t.height=e;var u=t.getContext("2d");null!=u&&u.drawImage(i,0,0)}},t.prototype.destroy=function(){this.destroyVertexBuffer(),this.destroyUvBuffer(),this.destroyShaders();var t=this.tr;null!=t&&(this.tr=null,t.removeEventListener("webglcontextlost",this.Te,!1),t.removeEventListener("webglcontextrestored",this.Ne,!1),window.removeEventListener("unload",this.Ie,!1));var n=this.me;if(null!=n){this.me=null;var i=n.getExtension("WEBGL_lose_context");null!=i&&i.loseContext()}},t.getInstance=function(){return null==t.Ce&&(t.Ce=new t),t.Ce},t.Ce=null,t}(),je=function(){function t(n){this.R="font-atlas:".concat(n),this.Ae=Se.getInstance().init(),this.tr=document.createElement("canvas"),this.Re={family:t.toFontFamily(n),size:32,italic:!1},this.ye={},this.Le=0,this.Mt=1,this.hn=1,this.fn=!0}return Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.Re},set:function(t){this.Re.family=t.family,this.Re.size=t.size,this.Re.italic=t.italic},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this.tr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generator",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"characters",{get:function(){return this.ye},enumerable:!1,configurable:!0}),t.prototype.begin=function(){this.Le=0;var t=this.ye;for(var n in t)t[n].ref=0},t.prototype.end=function(){var t=this.ye;for(var n in t){var i=t[n];i.ref<=0&&(i.life-=1,i.life<=0&&(delete t[n],this.fn=!0))}},t.prototype.addAscii=function(){this.addChar(" "," ",Me.SPACE_R),this.addChar("\t","    ",Me.SPACE_R),this.addChar("...","...",Me.LETTER_RNB);for(var t=0,n=Oe.length;t<n;++t){var i=Oe[t];this.addChar(i,i,Me.LETTER_RNB)}},t.prototype.addChar=function(t,n,i){var r=this.ye;if(!this.isIgnored(n)){var e=r[t];null!=e?(e.ref<=0&&(this.Le+=1),e.ref+=1):(r[t]=new Ee(n,0,1,1,i),this.Le+=1,this.fn=!0)}},t.prototype.isIgnored=function(t){switch(t){case"\n":case"\r":case"\v":case"\f":case"":return!0}return!1},t.prototype.add=function(t,n){void 0===n&&(n=Me.LETTER);for(var i=b.from(t);i.hasNext();){var r=i.next();this.addChar(r,r,n)}},t.prototype.get=function(t){return this.ye[t]},t.prototype.update=function(){if(this.fn){var n=this.tr,i=this.Ae;if(null!=n&&null!=i){var r=n.getContext("2d");if(null!=r){this.fn=!1;var e=this.Re,u=this.ye,s=e.size+14,h=t.toPowerOf2(Math.ceil(Math.sqrt(this.Le))*s);this.Mt=h;var o=(e.italic?"italic ":"")+e.size+"px "+e.family;r.font=o,r.textAlign="left",r.textBaseline="middle",r.lineWidth=0,r.lineCap="round",r.lineJoin="miter",r.miterLimit=0,r.fillStyle="#FFFFFF";var a=s>>1,c=0,f=0;for(var l in u){var v=u[l],b=r.measureText(v.character).width,d=Math.ceil(7+b+7),g=s;h<=c+d&&(c=0,f+=s),v.x=c,v.y=f,v.width=d,v.height=g,v.advance=b,v.origin.x=c+7,v.origin.y=f+a,c+=d}var m=this.hn=f+s;for(var l in n.width=h,n.height=m,r.font=o,r.textAlign="left",r.textBaseline="middle",r.lineWidth=0,r.lineCap="round",r.lineJoin="miter",r.miterLimit=4,r.fillStyle="#FFFFFF",r.clearRect(0,0,h,m),u)v=u[l],r.fillText(v.character,v.origin.x,v.origin.y);return i.updateTexture(n),i.render(),i.read(n),!0}}}return!1},Object.defineProperty(t.prototype,"length",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.toJson=function(){return{width:this.Mt,height:this.hn,font:this.Re,characters:this.ye}},t.prototype.toString=function(){return JSON.stringify(this.toJson())},t.prototype.destroy=function(){null!=this.Ae&&(this.Ae=null),null!=this.tr&&(this.tr=null);var t=this.ye;for(var n in t)delete t[n]},t.toFontFamily=function(n){return"auto"===n?t.getAutoFontFamily():n},t.toPowerOf2=function(t){for(var n=32;n<t;)n<<=1;return n},t.getAutoFontFamily=function(){return null==t.FONT_FAMILY_AUTO&&(t.FONT_FAMILY_AUTO=Y.getInstance().get("DBase").getFontFamilly()),t.FONT_FAMILY_AUTO},t.FONT_FAMILY_AUTO=null,t}(),Te=function(){function t(){this.ke={}}return t.prototype.begin=function(){var t=this.ke;for(var n in t)t[n].begin()},t.prototype.end=function(){var t=this.ke;for(var n in t){var i=t[n];0<i.length&&i.addAscii(),i.end(),i.length<=0&&(i.destroy(),delete t[n])}},t.prototype.add=function(t,n){var i=this.ke[t];if(null!=i)i.add(n);else{var r=new je(t);r.add(n),this.ke[t]=r}},t.prototype.get=function(t){var n=this.ke[t];return null!=n?n:null},t.prototype.update=function(t){var n=this.ke,i=t.getBaseTexture();for(var r in n){var e=n[r];if(e.update()){var u=e.id,s=t.get(u);if(null!=s){var h=e.width,o=e.height,a=i.resolution;s.frame.width=h,s.frame.height=o,s.width=h/a,s.height=o/a,t.toDirty()}else t.set(u,new pe(e,i))}}},t.prototype.destroy=function(){var t=this.ke;for(var n in t)t[n].destroy();this.ke={}},t}(),Ne=function(t){function n(n,i){var r=t.call(this,n.src,n.width/i.resolution,n.height/i.resolution,0,i)||this;return r.image=n,r}return B(n,t),n.prototype.render=function(t){var n=this.frame,i=n.x,r=n.y,e=n.width,u=n.height,s=this.image;t.drawImage(s,i,r,e,u),t.drawImage(s,0,0,1,u,i-1,r-1,1,u+2),t.drawImage(s,0,0,e,1,i,r-1,e,1),t.drawImage(s,e-1,0,1,u,i+e,r-1,1,u+2),t.drawImage(s,0,u-1,e,1,i,r+u,e,1)},n}(de),Ie=function(t,n){this.texture=t,this.indexOffset=n},Ce=function(){function t(){this.index=0,this.baseTexture=null,this.units=[]}return t.prototype.begin=function(){this.index=0,this.baseTexture=null},t.prototype.push=function(t,n){if(this.index<this.units.length){var i=this.units[this.index];i.texture=t,i.indexOffset=n}else this.units.push(new Ie(t,n));this.index+=1},t.prototype.end=function(){this.units.length!==this.index&&(this.units.length=this.index)},t.prototype.destroy=function(){this.units.length=0},t}(),Ae=function(){function n(t,n){var i=3*t,r=i;this.vertices=new Float32Array(2*r),this.xe=r,this.o=0,this.vn=null,this.clippings=new Float32Array(3*r),this.Be=null,this.steps=new Float32Array(6*r),this._e=null,this.colorFills=new Float32Array(4*r),this.Pe=null,this.colorStrokes=new Float32Array(4*r),this.Fe=null,this.uvs=new Float32Array(2*r),this.dn=null;var e=r<=65535;this.indices=e?new Uint16Array(i):new Uint32Array(i),this.Ue=t,this.l=0,this.indexCountRequested=0,this.gn=null,this.Ge=n,this.ze=new Ce,this.He=null}return n.prototype.updateVertices=function(){var t=this.vn;t&&t.update()},n.prototype.updateClippings=function(){var t=this.Be;t&&t.update()},n.prototype.updateSteps=function(){var t=this._e;t&&t.update()},n.prototype.updateColorFills=function(){var t=this.Pe;t&&t.update()},n.prototype.updateColorStrokes=function(){var t=this.Fe;t&&t.update()},n.prototype.updateUvs=function(){var t=this.dn;t&&t.update()},n.prototype.updateIndices=function(){var t=this.gn;t&&t.update()},n.prototype.getGeometry=function(){var n=this.He;return null==n&&(this.vn=new t.Buffer(this.vertices,!1,!1),this.Be=new t.Buffer(this.clippings,!1,!1),this._e=new t.Buffer(this.steps,!1,!1),this.Pe=new t.Buffer(this.colorFills,!1,!1),this.Fe=new t.Buffer(this.colorStrokes,!1,!1),this.dn=new t.Buffer(this.uvs,!1,!1),this.gn=new t.Buffer(this.indices,!1,!0),this.He=n=(new t.Geometry).addIndex(this.gn).addAttribute("aPosition",this.vn,2).addAttribute("aClipping",this.Be,3).addAttribute("aStep",this._e,2).addAttribute("aAntialias",this._e,4).addAttribute("aColorFill",this.Pe,4).addAttribute("aColorStroke",this.Fe,4).addAttribute("aUv",this.dn,2)),n},n.prototype.upload=function(){this.Ge.geometry.bind(this.getGeometry())},n.prototype.render=function(n){var i=this.Ge;i.geometry.bind(this.getGeometry());var r=this.ze.units,e=r.length;if(0<e){for(var u=t.DRAW_MODES.TRIANGLES,s=null,h=r[0],o=0,a=3*h.indexOffset,c=0,f=t.Texture.WHITE,l=0,v=e-1;l<v;++l)s=h,o=a,c=(a=3*(h=r[l+1]).indexOffset)-o,f=s.texture||t.Texture.WHITE,0<c&&f.valid&&(n.uniforms.sampler=i.texture.bind(f),i.geometry.draw(u,c,o));c=3*this.l-a,f=h.texture||t.Texture.WHITE,0<c&&f.valid&&(n.uniforms.sampler=i.texture.bind(f),i.geometry.draw(u,c,a))}},n.prototype.isCompatible=function(t,n,i,r){return n.getBuffer()===this&&n.getVertexOffset()===i&&n.getIndexOffset()===r&&n.isCompatible(t)},n.prototype.update=function(t,n,i){var u=this.ze;u.begin();for(var s=0,h=0,o=t.get();null!=o&&null!=(a=o.uploaded)&&this.isCompatible(o,a,s,h);o=t.next())if(a.update(o),a.buildUnit(u),s+=a.getVertexCount(),h+=a.getIndexCount(),i)return t.next(),u.end(),this.o=s,this.l=h,0<u.units.length;for(;null!=o;o=t.next()){var a,c=e[o.type]||e[r.GROUP];if(null==c)break;if(null==(a=c(this,o,s,h,n)))break;if(a.buildUnit(u),s+=a.getVertexCount(),h+=a.getIndexCount(),i){t.next();break}}return u.end(),this.o=s,this.l=h,0<u.units.length},n.prototype.check=function(t,n,i,r){return this.indexCountRequested=r,t+i<=this.xe&&n+r<=this.Ue},n.prototype.destroy=function(){var t=this.He;t&&t.destroy(),this.ze.destroy()},n}(),Re=[],ye=function(){function t(){this.index=0,this.shapes=Re}return t.prototype.reset=function(t){this.index=-1,this.shapes=t},t.prototype.next=function(){var t=this.index+1;this.index=t;var n=this.shapes;return t<n.length?n[t]:null},t}(),Le=function(){function t(){this.Ve=-1,this.We=new ye,this.Bt=[this.We],this.Xe=null}return t.prototype.reset=function(t,n){this.Ve=0;var i=this.Bt[0];return this.We=i,i.reset(n),null!=t?(this.Xe=t,t):this.next()},t.prototype.get=function(){return this.Xe},t.prototype.next=function(){var t=this.We.next();if(null!=t){this.Xe=t;var n=t.children;if(0<n.length)if((r=this.Ve=this.Ve+1)<(e=this.Bt).length)(i=e[r]).reset(n),this.We=i;else{var i=new ye;e.push(i),i.reset(n),this.We=i}return t}var r=this.Ve=this.Ve-1,e=this.Bt;return 0<=r?(this.We=e[r],this.Xe=null,this.next()):(this.Xe=null,null)},t}(),ke=function(n){function i(r){var e=n.call(this,r)||this;return i.SHADER=i.SHADER||t.Shader.from("\nattribute vec2 aPosition;\nattribute vec3 aClipping;\nattribute vec2 aStep;\nattribute vec4 aAntialias;\nattribute vec4 aColorFill;\nattribute vec4 aColorStroke;\nattribute vec2 aUv;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mediump float shapeScale;\nuniform mediump float pixelScale;\nuniform mediump float antialiasWeight;\n\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nvec2 toInverse( in vec2 v ) {\n\treturn vec2( -v.y, v.x );\n}\n\nvec2 toTransformedPosition( in vec2 v ) {\n\treturn (projectionMatrix * translationMatrix * vec3(v, 1.0)).xy;\n}\n\nvec4 toAntialias01( in vec4 antialias ) {\n\t// Taylor series of 1 / ( 1 - a ) = 1 + a + a^2 + ....\n\treturn 1.0 + min( vec4( 1.0 ), antialias * pixelScale );\n}\n\nvec4 toAntialias2( in vec4 antialias, in float strokeWidth ) {\n\tfloat x = min( 0.4, 0.4 / 12.0 * antialias.x * pixelScale * antialiasWeight );\n\tfloat w = clamp( strokeWidth / antialias.y, 0.0, 1.0 ) * 0.4;\n\tfloat p = w * antialias.z + antialias.w;\n\tfloat y = 0.5 - p;\n\tfloat z = 0.5 - p - w;\n\treturn vec4( y, z, y - max( 0.01, y - x ), z - max( 0.01, z - x ) );\n}\n\nvec2 toPosition3456( in float type, in vec2 p, in vec2 pprev, in vec2 pnext, in float strokeWidth, out float shift ) {\n\tvec2 d0 = p - pprev;\n\tvec2 d1 = pnext - p;\n\tfloat l0 = dot( d0, d0 );\n\tfloat l1 = dot( d1, d1 );\n\tvec2 nd0 = normalize( toInverse( d0 ) );\n\tvec2 nd1 = normalize( toInverse( d1 ) );\n\tvec2 nd2 = 0.00001 < l1 ? nd1 : vec2(0.0, 0.0);\n\tvec2 n0 = 0.00001 < l0 ? nd0 : nd2;\n\tvec2 n1 = 0.00001 < l1 ? nd1 : n0;\n\tvec2 n0i = toInverse( n0 );\n\tvec2 n1i = toInverse( n1 );\n\tfloat direction = sign( 4.5 - type );\n\n\t// Offset\n\tfloat cross = dot( n0i, n1 );\n\tfloat crossInverse = ( 0.00001 < abs( cross ) ? 1.0 / cross : 0.0 );\n\tfloat b = dot(n1 - n0, n0) * crossInverse;\n\tfloat offsetSize = direction * strokeWidth * 0.5;\n\tvec2 offset = n1 + n1i * b;\n\n\t// Miter\n\tvec2 pmiter = p + offsetSize * offset;\n\tfloat miterAngle0 = dot( n0i, pmiter - pprev );\n\tfloat miterAngle1 = dot( n1i, pmiter - pnext );\n\tfloat miterLength = dot( offset, offset );\n\tfloat miterSide = direction * cross;\n\n\t// Bevel\n\tvec2 n = ( type == 4.0 || type == 6.0 ? n1 : n0 );\n\tvec2 pbevel = p + offsetSize * n;\n\n\t//\n\tvec2 presult = (\n\t\t0.0 <= miterSide ?\n\t\t( miterAngle0 < 0.0 && 0.0 <= miterAngle1 ? pmiter : pbevel ) :\n\t\t( miterLength < 6.0 ? pmiter : pbevel )\n\t);\n\tvec2 ni = ( type == 4.0 || type == 6.0 ? n1i : n0i );\n\tshift = dot( ni, p - presult );\n\treturn toTransformedPosition( presult );\n}\n\nvec2 toStep3456( in float type ) {\n\treturn ( type < 4.5 ? vec2( 1.0, 0.0 ) : vec2( 0.0, 1.0 ) );\n}\n\nvec4 toAntialias3456( in float strokeWidth ) {\n\tfloat a = antialiasWeight / max( 0.0001, strokeWidth );\n\treturn toAntialias01( vec4( a, a, a, a ) );\n}\n\nfloat toDotAndDashScale( in float scale, in float strokeWidthScale ) {\n\treturn (\n\t\tscale == 4.0 || scale == 5.0 || scale == 6.0 || scale == 7.0 ?\n\t\tstrokeWidthScale : 1.0\n\t);\n}\n\nvec4 toColorStroke3456( in float shift, in float scale ) {\n\tfloat x = aColorFill.x + shift;\n\tfloat y = scale * aColorFill.y;\n\tfloat z = scale * aColorFill.z;\n\tfloat w = aColorFill.w;\n\treturn vec4( x, y, z, w );\n}\n\nfloat toStrokeWidthScale( in float scale ) {\n\treturn (\n\t\tscale == 3.0 || scale == 7.0 ?\n\t\tshapeScale : (\n\t\t\tscale == 1.0 || scale == 5.0 ?\n\t\t\tmin( 1.0, shapeScale ) : (\n\t\t\t\tscale == 2.0 || scale == 6.0 ?\n\t\t\t\tmax( 1.0, shapeScale ) : 1.0\n\t\t\t)\n\t\t)\n\t);\n}\n\nvec2 toStep01(in vec2 size, in vec2 weight, in vec2 strokeWidth) {\n\treturn weight / max(vec2(0.00001), vec2(1.0) - strokeWidth / size);\n}\n\nvec4 toAntialias01b(in vec2 size, in vec2 strokeWidth) {\n\treturn antialiasWeight / max(vec4(0.00001), vec4(size - strokeWidth, size));\n}\n\nvoid main(void) {\n\tvec2 p012 = toTransformedPosition( aPosition );\n\n\tfloat type = aClipping.z;\n\tfloat strokeWidthScale = toStrokeWidthScale( aStep.y );\n\tfloat strokeWidth = strokeWidthScale * aStep.x;\n\n\t// type === 0 or 1\n\tvec2 size01 = aAntialias.xy;\n\tvec2 weight01 = abs(aAntialias.zw - sign(aAntialias.zw));\n\tvec2 strokeWidth01 = step(vec2(0.0), aAntialias.zw) * strokeWidth;\n\tvec2 step01 = toStep01( size01, weight01, strokeWidth01 );\n\tvec4 a01 = toAntialias01( toAntialias01b( size01, strokeWidth01 ) );\n\n\t// type === 2\n\tvec4 a2 = toAntialias2( aAntialias, strokeWidth );\n\n\t// type === 3, 4, 5 or 6\n\tfloat shift3456 = 0.0;\n\tvec2 p3456 = toPosition3456( type, aPosition, aAntialias.xy, aAntialias.zw, strokeWidth, shift3456 );\n\tvec2 step3456 = toStep3456( type );\n\tvec4 a3456 = toAntialias3456( strokeWidth );\n\tvec4 colorStroke3456 = toColorStroke3456( shift3456, toDotAndDashScale( aStep.y, strokeWidthScale ) );\n\n\t//\n\tgl_Position = vec4( ( 2.5 < type ? p3456 : p012 ), 0.0, 1.0 );\n\tvAntialias = ( 1.5 < type ? ( 2.5 < type ? a3456 : a2 ) : a01 );\n\tvClipping = aClipping;\n\tvStep = ( 2.5 < type ? step3456 : step01 );\n\tvColorFill = ( 2.5 < type ? aColorStroke : aColorFill );\n\tvColorStroke = ( 2.5 < type ? colorStroke3456 : aColorStroke );\n\tvUv = aUv;\n}","\nvarying mediump vec3 vClipping;\nvarying mediump vec2 vStep;\nvarying mediump vec4 vAntialias;\nvarying mediump vec4 vColorFill;\nvarying mediump vec4 vColorStroke;\nvarying mediump vec2 vUv;\n\nuniform sampler2D sampler;\nuniform mediump float pixelScale;\n\nvoid main(void) {\n\tvec4 texture = texture2D(sampler, vUv);\n\tfloat type = vClipping.z;\n\tvec2 v0 = vStep;\n\tvec2 v1 = vClipping.xy;\n\tvec2 v2 = v0 * vAntialias.xy;\n\tvec2 v3 = v1 * vAntialias.zw;\n\tvec2 d01 = ( v0.x < v0.y ? vec2( v0.y, v2.y ) : vec2( v0.x, v2.x ) );\n\tvec2 d02 = ( v1.x < v1.y ? vec2( v1.y, v3.y ) : vec2( v1.x, v3.x ) );\n\tvec4 d0 = vec4( d01.x, d02.x, d01.y, d02.y );\n\tvec4 d1 = vec4( dot( v0, v0 ), dot( v1, v1 ), dot( v2, v2 ), dot( v3, v3 ) );\n\tvec4 d = ( type == 1.0 ? d1 : d0 );\n\tvec2 s = smoothstep( 1.0 - (d.zw - d.xy), vec2( 1.0 ), d.xy );\n\tvec4 color01 = texture * (vColorStroke * (s.x - s.y) + vColorFill * (1.0 - s.x));\n\n\tfloat l = vColorStroke.x;\n\tfloat lp0 = vColorStroke.y;\n\tfloat lp1 = vColorStroke.z;\n\tfloat lt = vColorStroke.w;\n\tfloat ld = 0.5 * pixelScale;\n\tfloat lm = mod( l, lp0 + lp1 );\n\tfloat ls0 = ( 0.0 < lp1 ? smoothstep( 0.0, ld, lm ) - smoothstep( lp0, lp0 + ld, lm ) : 1.0 );\n\tfloat ls1 = ( 0.0 <= lt ? smoothstep( 0.0, ld, l ) - smoothstep( lt - ld, lt, l ) : 1.0 );\n\tvec4 color3456 = color01 * ls0 * ls1;\n\n\tvec2 a0 = vAntialias.xy;\n\tvec2 a1 = vAntialias.zw;\n\tvec2 a2 = vec2( texture.a );\n\tvec2 a = smoothstep( a0 - a1, a0 + a1, a2 );\n\tvec4 color2 = a.x * vColorFill + ( a.y - a.x ) * vColorStroke;\n\tgl_FragColor = ( type == 2.0 ? color2 : (2.5 < type ? color3456 : color01) );\n}"),e.Ye=i.SHADER,e.Ke=new Le,e.Je=e.getBufferSizeMax(r),e}return B(i,n),i.prototype.getBufferSizeMax=function(t){var n=t.context,i=n.extensions;return 1<n.webGLVersion||i.uint32ElementIndex?1431655765:21845},i.prototype.updateAtlas=function(t,n,i,r,e){var u=t.imageSrc;if(null!=u){var s=n.get(u);if(null!=s)t.texture=s.texture;else{var h=t.image;if(null!=h){var o=new Ne(h,e);t.texture=o.texture,n.set(o.id,o)}else t.texture=r}}else t.texture=r;var a=t.text,c=a.value;0<c.length&&i.add(a.family,c)},i.prototype.updateAtlases=function(t,n,i,r,e){for(var u=0,s=t.length;u<s;++u){var h=t[u];this.updateAtlas(h,n,i,r,e);for(var o=h.children,a=0,c=o.length;a<c;++a){var f=o[a];this.updateAtlas(f,n,i,r,e),this.updateAtlases(f.children,n,i,r,e)}}},i.prototype.updateFontAtlas=function(t,n,i,r){var e=t.text,u=i.get(e.family);if(null!=u){var s=n.get(u.id);null!=s?(e.atlas=u,e.texture=s.texture):(e.atlas=void 0,e.texture=r)}else e.atlas=void 0,e.texture=r},i.prototype.updateFontAtlases=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){var s=t[e];this.updateFontAtlas(s,n,i,r);for(var h=s.children,o=0,a=h.length;o<a;++o){var c=h[o];this.updateFontAtlas(c,n,i,r),this.updateFontAtlases(c.children,n,i,r)}}},i.prototype.Ze=function(n,i,r,e){var u=this.renderer,s=this.Ye;if(null!=s&&(null!=i||0<r.length)){var h=u.resolution,o=n.getBuffers(),a=n.getAntialiasWeight(h);if(e){var c=n.getAtlas(h),f=n.getFontAtlases();c.begin(),f.begin();var l=c.getDefaultTexture(),v=c.getBaseTexture();this.updateAtlases(r,c,f,l,v),f.end(),f.update(c),this.updateFontAtlases(r,c,f,l),c.end(),c.repack(),this.updateBuffers(i,r,o,u,a)}s.uniforms.shapeScale=n.toShapeScale(),s.uniforms.pixelScale=n.toPixelScale(h),s.uniforms.antialiasWeight=a,s.uniforms.translationMatrix=n.worldTransform.toArray(!0),u.shader.bind(s,!1),u.state.setBlendMode(t.utils.correctBlendMode(t.BLEND_MODES.NORMAL,!0));var b=o.length;if(1<b)for(var d=0;d<b;++d)o[d].upload();for(d=0;d<b;++d)o[d].render(s)}},i.prototype.updateBuffers=function(t,n,i,r,e){var u=this.Ke;u.reset(t,n);for(var s=0,h=0,o=5e3,a=this.Je;null!=u.get();){var c=null,f=!1;if(0<h?(c=new Ae(h,r),i.splice(s,0,c),f=!0):s<i.length?(c=i[s],f=!1):(c=new Ae(o,r),i.push(c),f=!1),c.update(u,e,f))h=0,s+=1;else{if(!((h=c.indexCountRequested)<=a))break;h=Math.ceil(h/o)*o,h=Math.min(h,a)}}if(s<i.length){for(var l=s,v=i.length;l<v;++l)i[l].destroy();i.length=s}},i.SHADER=null,i}(t.ObjectRenderer),xe=function(n){function i(){var i=n.call(this)||this;return i.qe=null,i.children=[],i.kr=null,i.Qe=0,i.$e=-1,i.tu=null,i.nu=new Te,i.iu=1,i.ru=NaN,i.eu=1,i.uu=NaN,i.su=new t.Point,i.hu=[],i}return B(i,n),i.prototype.calculateBounds=function(){this._bounds.clear()},i.prototype.onChildTransformChange=function(){},i.prototype.toDirty=function(){return this.Qe+=1},i.prototype.isDirty=function(){return this.$e<this.Qe},i.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var n=this.Qe,i=this.$e;this.$e=n;var r=i<n,e=this.qe;null==e&&(e=this.qe=new ke(t)),t.batch.setObjectRenderer(e);var u=this.mask,s=this.kr,h=this.children;u?(t.mask.push(this,u),e.Ze(this,s,h,r),t.mask.pop(this)):e.Ze(this,s,h,r)}},i.prototype.containsPoint=function(t){return!1},i.prototype.getFontAtlases=function(){return this.nu},i.prototype.getAtlas=function(t){var n=this.tu;return null==n&&(n=new we(t),this.tu=n),n},i.prototype.getBuffers=function(){return this.hu},i.prototype.toShapeScale=function(){this.updateTransform();var t=this.transform,n=t._worldID;if(n!==this.uu){this.uu=n;var i=t.worldTransform,r=i.a,e=i.b;this.eu=1/Math.sqrt(r*r+e*e)}return this.eu},i.prototype.getShapeScale=function(){return this.eu},i.prototype.toPixelScale=function(t){var n=this.toShapeScale(),i=this.uu;return this.ru!==i&&(this.ru=i,this.iu=1/t*n),this.iu},i.prototype.getPixelScale=function(){return this.iu},i.prototype.getAntialiasWeight=function(t){return 1.25/t},i.prototype.hitTest=function(t,n){for(var i=this.su,r=this.children,e=r.length-1;0<=e;--e){var u=r[e];if(u.visible){u.toLocal(t,void 0,i);var s=u.contains(i.x,i.y);if(null!=s&&(null==n||n(s)))return s}}return null},i.prototype.hitTestBBox=function(t,n){for(var i=this.su,r=this.children,e=r.length-1;0<=e;--e){var u=r[e];if(u.visible&&(u.toLocal(t,void 0,i),u.containsBBox(i.x,i.y)&&(null==n||n(u))))return u}return null},i.prototype.destroy=function(){var t=this.hu;if(null!=t)for(var i=0,r=t.length;i<r;++i)t[i].destroy();this.hu.length=0;var e=this.children;for(i=e.length-1;0<=i;--i)e[i].destroy();e.length=0,n.prototype.destroy.call(this)},i}(t.DisplayObject),Be=function(t){function n(n,i,e){void 0===e&&(e=r.EMBEDDED_LAYER);var u=t.call(this,i,e)||this;return u.Cr=n,u}return B(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return this.Cr},enumerable:!1,configurable:!0}),n.prototype.newGroupFill=function(){return new Z(this,!1,16777215,1)},n.prototype.isGroupSizeFittable=function(){return!1},n.prototype.clone=function(){for(var t=this.newClone().copy(this),n=this.children,i=0,r=n.length;i<r;++i){var e=n[i].clone();e.parent=t,t.children.push(e)}return t.onChildTransformChange(),t.toDirty(),t.size.init(),t},n.prototype.newClone=function(){return new(0,this.constructor)(this.Cr,this.Ir,this.type)},n.prototype.serializeChildren=function(t){return[]},n.prototype.serializeImage=function(t){return-1},n.prototype.serializeGradient=function(t){return-1},n}(Br),_e=function(){function t(){}return t.toLayers=function(t,n){var i=[],r=this.toLayer(t);if(r){var e=r.parent;if(e)for(var u=e.children,s=u.length,h=0,o=n.length;h<o;++h){var a=n[h];0<=a&&a<s&&i.push(u[a])}}return i},t.toLayer=function(t){for(var n=t.parent;null!=n;){if(n instanceof xe)return n;if(n instanceof Be)return n;n=n.parent}return null},t.show=function(t){return!t.visible&&(t.visible=!0,!0)},t.showAll=function(t){for(var n=!1,i=0,r=t.length;i<r;++i){var e=t[i];e.visible||(e.visible=!0,n=!0)}return n},t.hide=function(t){return!!t.visible&&(t.visible=!1,!0)},t.hideAll=function(t){for(var n=!1,i=0,r=t.length;i<r;++i){var e=t[i];e.visible&&(e.visible=!1,n=!0)}return n},t.bringToFront=function(t){var n=t.parent;return!!n&&this.doBringToFront(t,n.children,0)},t.bringAllToFront=function(t){var n=t.length;if(0<n){var i=t[0].parent;if(i){for(var r=!1,e=i.children,u=0;u<n;++u){var s=t[n-1-u];this.doBringToFront(s,e,u)&&(r=!0)}return r}}return!1},t.doBringToFront=function(t,n,i){for(var r=n.length-1-i,e=r;0<=e;--e){var u=n[e];if(u===t){if(e!==r){for(var s=e+1;s<=r;++s)n[s-1]=n[s];return n[r]=u,!0}return!1}}return!1},t}(),Pe={NONE:0,DRAG:1,PINCH:2,ALL:3},Fe=t.interaction.InteractionEvent,Ue=function(n){function i(t){var i=n.call(this,t,qt.NONE)||this;return i.ou=new Map,i.au=t.operationType,i.cu=t.scaleMin,i.fu=t.scaleMax,i}return B(i,n),i.prototype.initialize=function(t,i){if(n.prototype.initialize.call(this,t,i),null==this.ou.get(t)){var r=_e.toLayer(t);null!=r&&this.ou.set(t,r)}},i.prototype.onDown=function(t,i,r){if(n.prototype.onDown.call(this,t,i,r),r instanceof Fe){var e=this.ou.get(t),u=r.data.originalEvent.timeStamp;e&&this.condition(t,u,tn)&&this.getGestureUtil().onDown(e,r)}},i.prototype.getGestureUtil=function(){var t;return null!==(t=i.GESTURE_UTIL)&&void 0!==t?t:i.GESTURE_UTIL=this.newGestureUtil()},i.prototype.newGestureUtil=function(){var n=this,i=new t.Point;return new sr({on:{move:function(t,r,e,u,s,h){n.onGestureMove(t,r,e,u,s,h,i)}}})},i.prototype.onGestureMove=function(t,n,i,r,e,u,s){var h=t.parent;if(h){var o=t.transform,a=this.au,c=!1,f=1;if(a&Pe.PINCH){var l=o.scale,v=l.y,b=Math.min(this.fu,Math.max(this.cu,v*u));f=b/v,l.set(b,b),c=!0}if(a&Pe.DRAG){h.toLocal(s.set(r,e),void 0,s);var d=s.x,g=s.y,m=r-n,w=e-i;h.toLocal(s.set(m,w),void 0,s);var p=s.x,O=s.y,D=o.position,E=(D.x-p)*f+d,M=(D.y-O)*f+g;D.set(E,M),c=!0}c&&rt.update(t)}},i.prototype.toSize=function(t,n){return"size"in t?n.copyFrom(t.size):n.set(t.width,t.height),n},i}(en),Ge=t.interaction.InteractionEvent,ze=function(n){function i(t){var i=n.call(this,t,qt.NONE)||this;return i.au=t.operationType,i.cu=t.scaleMin,i.fu=t.scaleMax,i}return B(i,n),i.prototype.onDown=function(t,i,r){n.prototype.onDown.call(this,t,i,r),r instanceof Ge&&this.condition(t,r.data.originalEvent.timeStamp,tn)&&this.getGestureUtil().onDown(t,r)},i.prototype.getGestureUtil=function(){var t;return null!==(t=i.GESTURE_UTIL)&&void 0!==t?t:i.GESTURE_UTIL=this.newGestureUtil()},i.prototype.newGestureUtil=function(){var n=this,i=new t.Point;return new sr({on:{move:function(t,r,e,u,s,h){n.onGestureMove(t,r,e,u,s,h,i)}}})},i.prototype.onGestureMove=function(t,n,i,r,e,u,s){var h=t.parent;if(h){var o=t.transform,a=this.au,c=!1,f=1;if(a&Pe.PINCH){var l=o.scale,v=l.y,b=Math.min(this.fu,Math.max(this.cu,v*u));f=b/v,l.set(b,b),c=!0}if(a&Pe.DRAG){h.toLocal(s.set(r,e),void 0,s);var d=s.x,g=s.y,m=r-n,w=e-i;h.toLocal(s.set(m,w),void 0,s);var p=s.x,O=s.y,D=o.position,E=(D.x-p)*f+d,M=(D.y-O)*f+g;D.set(E,M),c=!0}c&&rt.update(t)}},i}(en),He={SHAPE:0,LAYER:1},Ve={INPUT_TEXT:0,INPUT_INTEGER:1,INPUT_REAL:2,EMIT_EVENT:3,WRITE_BOTH:4,WRITE_LOCAL:5,WRITE_REMOTE:6,HTML_ELEMENT:7,HTML_ELEMENT_WITHOUT_POINTER_EVENTS:8,SHOW_HIDE_LAYER:9,GESTURE_LAYER:10,GESTURE:11,EXECUTE:12},We=function(t){function n(n,i,r,e,u){void 0===n&&(n=""),void 0===e&&(e=.05),void 0===u&&(u=20);var s=t.call(this,dn.GESTURE,n,i)||this;return s.operationType=r,s.scaleMin=e,s.scaleMax=u,s}return B(n,t),n.prototype.toRuntime=function(){switch(this.subtype){case He.SHAPE:return new ze(this);case He.LAYER:return new Ue(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.operationType,",").concat(this.scaleMin,",").concat(this.scaleMax,"]"))},n.deserialize=function(t,i){return new n(mn.toResource(1,t,i.resources),this.toSubType(t),t[3],t[4],t[5])},n.toSubType=function(t){if(t[0]!==dn.MISC)return t[2];switch(t[2]){case Ve.GESTURE:return He.SHAPE;case Ve.GESTURE_LAYER:return He.LAYER}},n}(bn),Xe={INVISIBLE:"INVISIBLE",INTERACTIVE:"INTERACTIVE",DRAGGABLE:"DRAGGABLE",PINCHABLE:"PINCHABLE"},Ye=function(t,n,i,r,e){var u,s,h,o=function(t,n){if(at(t))return t;var i=n.resources;return 0<=t&&t<=i.length?i[t]:""}(t[0],n),a=e?e(o,n):new Be(o,n.isEditMode),c=t[1];null==c||2&c||(a.visible=!1,a.state.add(Xe.INVISIBLE));var f=-.5*i+(t[2]||0),l=-.5*r+(t[3]||0);a.transform.position.set(f,l);var v=null!==(u=t[4])&&void 0!==u?u:i,b=null!==(s=t[5])&&void 0!==s?s:r;a.size.set(v,b),a.size.init();var d=t[6];if(null!=d&&a.fill.deserialize(d,n),!n.isEditMode){var g=null!==(h=t[7])&&void 0!==h?h:1,m=1&g,w=2&g,p=4&g;if(w||p){var O=(w?Pe.DRAG:Pe.NONE)|(p?Pe.PINCH:Pe.NONE);a.action.add(new We("",He.LAYER,O))}(m||w||p)&&(a.interactive=!0)}return a},Ke=function(){function t(t,n,i){this.children=[],this.Mt=t,this.hn=n,this.Ir=i}return t.prototype.hasConnectors=function(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(r instanceof ve)return!0;var e=r.children;if(0<e.length&&this.hasConnectors(e))return!0}return!1},t.prototype.newHasConnectors=function(){for(var t=new Map,n=this.children,i=0,r=n.length;i<r;++i){var e=n[i];t.set(e,this.hasConnectors(e.children))}return t},t.prototype.copyTo=function(t){for(var n,i=null!==(n=this.lu)&&void 0!==n?n:this.lu=this.newHasConnectors(),r=this.children,e=t.children,u=0,s=r.length;u<s;++u){var h=r[u],o=h.clone();o.parent=t,e.push(o),i.get(h)&&be.move(h,o)}t.onChildTransformChange(),t.toDirty(),t.onAttach()},t.prototype.deserialize=function(t,n){var i=t.length;if(0<i)for(var r=this.Mt,e=this.hn,u=0;u<i;++u)this.children.push(Ye(t[u],n,r,e))},t}(),Je=function(){function t(){}return t.toSimple=function(t){return{version:t.version,id:t.id,name:t.name,thumbnail:t.thumbnail,data:JSON.stringify({width:t.width,height:t.height,background:t.background,tile:t.tile,resources:t.resources,data:t.data||t.tags,pieces:t.pieces,layers:t.layers,items:t.items,snap:t.snap})}},t.toSerialized=function(t){if(!("items"in t)){var n=JSON.parse(t.data),i={version:t.version,id:t.id,name:t.name,width:n.width,height:n.height,background:n.background,tile:n.tile,resources:n.resources,data:n.data||n.tags,pieces:n.pieces,layers:n.layers,items:n.items,snap:n.snap,thumbnail:t.thumbnail};if(null==i.data){var r=t.tags;null!=r&&(i.data=JSON.parse(r))}if(null==i.pieces){var e=t.pieces;null!=e&&(i.pieces=JSON.parse(e))}return i}return t},t.newLayer=function(t,n,i){n.deserialize(t.layers,i);var r=t.items,e=Ur(r,i);return null!=e?e.then((function(t){for(var i=n.children,e=0,u=t.length;e<u;++e){var s=r[e],h=t[e];null!=(o=i[s[16]])&&(h.parent=o,h.uploaded=void 0,o.children.push(h))}for(e=0,u=i.length;e<u;++e){var o;(o=i[e]).onChildTransformChange(),o.toDirty();for(var a=o.children,c=0,f=a.length;c<f;++c)a[c].onAttach()}return t})):Promise.resolve([])},t.toPieceData=function(t,n,i){var r=new Map,e=new Map,u=function(){return r};return this.vu(t,n,r,e,!1).then(u,u)},t.vu=function(t,n,i,r,e){var u=this,s=[];if(n&&0<n.length&&t)for(var h=function(h,o){var a=n[h],c=r.get(a);if(null!=c)s.push(c);else{var f=t.piece.getByName(a).then((function(n){return u.bu(t,a,n,e,i,r)}),(function(){return null}));r.set(a,f),s.push(f)}},o=0,a=n.length;o<a;++o)h(o);return Promise.all(s)},t.bu=function(t,n,i,r,e,u){var s=this,h=this.toSerialized(i),o=h.width,a=h.height,c=new Ke(o,a,r);e.set(n,new zr(n,o,a,c));var f=h.pieces;return this.vu(t,f,e,u,r).then((function(){return s.newLayer(h,c,new vr(h,f,e,r))}))},t}(),Ze={},qe=function(){function t(){}return t.isContainer=function(t){return t instanceof cr},t.isEmbedded=function(t){return t instanceof _r},t.toContainer=function(t){for(var n=t;null!=n;){if(this.isContainer(n))return n;n=n.parent}return null},t.open=function(t,n,i,r){var e=Ze[n];if(null!=e)e(i,r,t);else switch(n){case fr.DIAGRAM:var u=this.toContainer(t);if(u){var s=u.controller;s&&s.getByName(i).then((function(t){u.set(Je.toSerialized(t))}))}break;case fr.PAGE:r?window.open(i):window.location.href=i}},t.writeLocal=function(t,n,i,r,e){var u;void 0===e&&(e=jt.FOUND);for(var s=t;null!=s;){if(this.isContainer(s))return(s.data.private.set(n,i,r,e)||s.data.protected.set(n,i,r,e)||!!s.data.set(n,i,r,e))&&(rt.update(s),!0);if(this.isEmbedded(s)&&(null===(u=s.data.getPrivate())||void 0===u?void 0:u.set(n,i,r,e)))return rt.update(s),!0;s=s.parent}return!1},t.writeRemote=function(t,n,i){var r=this.toContainer(t);return!!r&&r.data.remote.set(n,i)},t.emit=function(n,i,r,e){var u=t.toContainer(n);void 0===e?(n.emit(i,n),u&&u.shape.emit(i,n)):(n.emit(i,r,e,n),u&&u.shape.emit(i,r,e,n))},t}(),Qe=function(t){function n(n){var i=t.call(this,n,qt.NONE)||this;return i.name=nn.ofStringOrNull(n.name),i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.name(t,i,tn);null!=r&&qe.emit(t,r)}},n}(en),$e=function(t){function n(n,i){var r=t.call(this,dn.EMIT_EVENT,n)||this;return r.name=i,r}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.name===i.name},n.prototype.toRuntime=function(){return new Qe(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.name);return t.addResource("[".concat(this.type,",").concat(n,",").concat(i,"]"))},n.deserialize=function(t,i){return new n(mn.toResource(1,t,i.resources),mn.toResource(2,t,i.resources))},n}(vn),tu=function(t){function n(n){var i=t.call(this,n,qt.NONE)||this;return i.target=nn.ofStringOrNull(n.target),i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.target(t,i,tn);null!=r&&qe.emit(t,r)}},n}(en),nu={NO_POINTER_EVENTS:"NO_POINTER_EVENTS"},iu=function(){function n(t){var n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg");i.setAttribute("style","position: absolute;"),i.setAttribute("width","0px"),i.setAttribute("height","0px");var r=document.createElementNS(n,"defs"),e=document.createElementNS(n,"clipPath"),u="clipper_ex_".concat(Math.random().toString(32).substring(2));e.setAttribute("id",u),e.setAttribute("clipPathUnits","objectBoundingBox");var s=document.createElementNS(n,"path");this.du=s,this.gu="",s.setAttribute("clip-rule","evenodd"),e.appendChild(s),r.appendChild(e),i.appendChild(r),this.R=u,t.appendChild(i)}return Object.defineProperty(n.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),n.prototype.update=function(t,n,i){var r=this.toD(t,n,i);this.gu!=r&&(this.du.setAttribute("d",r),this.gu=r)},n.prototype.toD=function(i,r,e){var u,s;if(null==i)return"";var h=i.width,o=i.height,a=1e-4;if(h<a||o<a)return"";if(e.size<=0)return"M0,0 h1 v1 h-1z";var c=null!==(u=n.WORK_MATRIX)&&void 0!==u?u:n.WORK_MATRIX=new t.Matrix;null!=r?(c.copyFrom(r),c.invert()):c.identity(),c.translate(-i.x,-i.y),c.scale(1/h,1/o);for(var f=-1,l=2,v=-1,b=2,d="",g=c.a,m=c.b,w=c.c,p=c.d,O=c.tx,D=c.ty,E=null!==(s=n.WORK_RECTS)&&void 0!==s?s:n.WORK_RECTS=[],M=this.toRects(e,E),S=0;S<M;S+=4){var j=E[S+0],T=E[S+1],N=E[S+2],I=E[S+3],C=g*j+w*T+O,A=m*j+p*T+D,R=g*N+w*T+O,y=m*N+p*T+D,L=g*N+w*I+O,k=m*N+p*I+D,x=g*j+w*I+O,B=m*j+p*I+D;f=Math.min(f,C,R,L,x),l=Math.max(l,C,R,L,x),v=Math.min(v,A,y,k,B),b=Math.max(b,A,y,k,B);var _=C.toFixed(5),P=A.toFixed(5),F=R.toFixed(5),U=y.toFixed(5),G=L.toFixed(5),z=k.toFixed(5),H=x.toFixed(5),V=B.toFixed(5);d+=" M".concat(_,",").concat(P," L").concat(F,",").concat(U," L").concat(G,",").concat(z," L").concat(H,",").concat(V,"Z")}return"M".concat(f,",").concat(v," L").concat(l,",").concat(v," L").concat(l,",").concat(b," L").concat(f,",").concat(b,"Z")+d},n.prototype.toRects=function(t,n){for(var i=t.data,r=t.size<<2,e=0;e<r;e+=4){var u=i[e+0],s=i[e+1],h=i[e+2],o=i[e+3];u<h?(n[e+0]=u,n[e+2]=h):(n[e+0]=h,n[e+2]=u),s<o?(n[e+1]=s,n[e+3]=o):(n[e+1]=o,n[e+3]=s)}for(e=4;e<r;e+=4){u=n[e+0],s=n[e+1],h=n[e+2],o=n[e+3];for(var a=0;a<e;a+=4){var c=n[a+0],f=n[a+1],l=n[a+2],v=n[a+3],b=0,d=0;if(u<=c)if(h<=l){if(h<=c)continue;b=2,d=1}else d=3;else if(h<=l)b=3;else{if(l<=u)continue;b=1,d=2}var g,m,w=0,p=0;if(s<=f)if(o<=v){if(o<=f)continue;w=2,p=1}else p=3;else if(o<=v)w=3;else{if(v<=s)continue;w=1,p=2}if(4==(g=0===b||0===w?0:1===b||2===b?3===w?2:1:3===w?4:2)){e+4<r&&(n[e+0]=n[r+0],n[e+1]=n[r+1],n[e+2]=n[r+2],n[e+3]=n[r+3]),e-=4,r-=4;break}if(4!=(m=0===d||0===p?0:1===d||2===d?3===p?2:1:3===p?4:2))if(0===g)if(0===m){for(O=r-4;a<O;O-=4)n[O+4]=n[O+0],n[O+5]=n[O+1],n[O+6]=n[O+2],n[O+7]=n[O+3];0===d?(n[a+3]=s,n[a+4]=c,n[a+5]=o,n[a+6]=l,n[a+7]=v):(n[a+2]=u,n[a+4]=h,n[a+5]=f,n[a+6]=l,n[a+7]=v),e+=4,r+=4,a+=4}else 2===m&&(1===d?n[a+0]=h:2===d?n[a+2]=u:1===p?n[a+1]=o:2===p&&(n[a+3]=s));else if(1===g){for(O=r-4;a<O;O-=4)n[O+4]=n[O+0],n[O+5]=n[O+1],n[O+6]=n[O+2],n[O+7]=n[O+3];1===d?1===p?(n[a+0]=h,n[a+4]=c,n[a+5]=o,n[a+6]=h,n[a+7]=v):(n[a+0]=h,n[a+4]=c,n[a+5]=f,n[a+6]=h,n[a+7]=s):1===p?(n[a+2]=u,n[a+4]=u,n[a+5]=o,n[a+6]=l,n[a+7]=v):(n[a+2]=u,n[a+4]=u,n[a+5]=f,n[a+6]=l,n[a+7]=s),e+=4,r+=4,a+=4}else 2===g&&(1===b?(n[e+0]=l,u=l):2===b?(n[e+2]=c,h=c):1===w?(n[e+1]=v,s=v):2===w&&(n[e+3]=f,o=f));else{for(var O=a+4;O<r;O+=4)n[O-4]=n[O+0],n[O-3]=n[O+1],n[O-2]=n[O+2],n[O-1]=n[O+3];e-=4,r-=4,a-=4}}}return r},n}(),ru=function(){function t(){this.Bt=[],this.T=0,this.Ve=0,this.fn=!0}return Object.defineProperty(t.prototype,"data",{get:function(){return this.Bt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.T},enumerable:!1,configurable:!0}),t.prototype.isDirty=function(){return this.fn},t.prototype.toClean=function(){this.fn=!1},t.prototype.begin=function(){return this.Ve=0,this},t.prototype.end=function(){var t=this.Ve;this.T=t;var n=this.Bt,i=t<<2;return n.length!==i&&(n.length=i,this.fn=!0),this},t.prototype.add=function(t,n,i,r){var e=this.Ve<<2;this.Ve+=1;var u=this.Bt;return e<u.length?u[e+0]===t&&u[e+1]===n&&u[e+2]===i&&u[e+3]===r||(u[e+0]=t,u[e+1]=n,u[e+2]=i,u[e+3]=r,this.fn=!0):(u.push(t,n,i,r),this.fn=!0),this},t}(),eu={CLICKED:0,DOUBLE_CLICKED:1,FOCUSED:2,ALWAYS:3},uu=function(){function n(t,n,i,r){var e=this;this.Yn=t,this.mu=n;var u=this.toData(i,r);this.Bt=u,this.wu=!1,this.pu=function(t){e.onElementFocus(t)},this.Ou=function(t){e.onBeforeFocus(t)},this.Du=function(t){e.onAfterFocus(t)},this.Eu=!1,this.Mu=!1,this.Su=function(){e.doSelect()},this.ju=this.Bt.when===eu.ALWAYS,this.Tu=function(){e.updateElement(e.Nu)}}return n.prototype.toData=function(t,n){var i,r;return{element:this.toElementData(t,null==n?void 0:n.element),clipper:this.toClipperData(t,null==n?void 0:n.clipper),before:this.toBeforeData(t,null==n?void 0:n.before),after:this.toAfterData(t,null==n?void 0:n.after),when:Oi(null!==(i=null==n?void 0:n.when)&&void 0!==i?i:t.getWhen(),eu),select:null!==(r=null==n?void 0:n.select)&&void 0!==r?r:t.getSelect()}},n.prototype.toElementData=function(t,n){var i,r;return{creator:null!==(i=null==n?void 0:n.creator)&&void 0!==i?i:t.getElementCreator(),styler:null!==(r=null==n?void 0:n.styler)&&void 0!==r?r:this.newElementStyler(t)}},n.prototype.newElementStyler=function(t){return function(n,i,r,e,u,s,h){return t.setElementStyle(n,i,r,e,u,s,h)}},n.prototype.toClipperData=function(t,n){var i,r,e;return{creator:null!==(i=null==n?void 0:n.creator)&&void 0!==i?i:t.getClipperCreator(),styler:null!==(r=null==n?void 0:n.styler)&&void 0!==r?r:this.newClipperStyler(t),extended:null!==(e=null==n?void 0:n.extended)&&void 0!==e?e:t.isClipperExEnabled()}},n.prototype.newClipperStyler=function(t){return function(n,i,r,e,u,s,h){return t.setClipperStyle(n,i,r,e,u,s,h)}},n.prototype.toBeforeData=function(t,n){var i,r;return{creator:null!==(i=null==n?void 0:n.creator)&&void 0!==i?i:t.getBeforeCreator(),styler:null!==(r=null==n?void 0:n.styler)&&void 0!==r?r:this.newBeforeStyler(t)}},n.prototype.newBeforeStyler=function(t){return function(n){t.setBeforeStyle(n)}},n.prototype.toAfterData=function(t,n){var i,r;return{creator:null!==(i=null==n?void 0:n.creator)&&void 0!==i?i:t.getAfterCreator(),styler:null!==(r=null==n?void 0:n.styler)&&void 0!==r?r:this.newAfterStyler(t)}},n.prototype.newAfterStyler=function(t){return function(n){t.setAfterStyle(n)}},Object.defineProperty(n.prototype,"element",{get:function(){var t;return null!==(t=this.Iu)&&void 0!==t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"when",{get:function(){return this.Bt.when},enumerable:!1,configurable:!0}),n.prototype.onDowning=function(t){switch(this.Mu=this.Eu,this.when){case eu.CLICKED:this.start();break;case eu.FOCUSED:this.Yn.state.isFocused&&this.start()}},n.prototype.onDown=function(t){!this.Mu&&this.Eu&&("data"in t?t.data.originalEvent.preventDefault():t.preventDefault())},n.prototype.onDblClick=function(t,n){switch(this.when){case eu.DOUBLE_CLICKED:this.start()}},n.prototype.onFocus=function(){var t;switch(this.when){case eu.FOCUSED:this.start();break;default:null===(t=this.Iu)||void 0===t||t.focus()}},n.prototype.onBlur=function(){var t;switch(this.when){case eu.CLICKED:case eu.DOUBLE_CLICKED:case eu.FOCUSED:this.onEndByBlur(),this.cancel();break;default:null===(t=this.Iu)||void 0===t||t.blur()}},n.prototype.isStartable=function(){switch(this.when){case eu.CLICKED:case eu.DOUBLE_CLICKED:case eu.FOCUSED:return this.Yn.state.isActionable;default:return!0}},n.prototype.start=function(){!this.Eu&&this.isStartable()&&(this.Eu=!0,this.Yn.worldVisible?this.doStart():this.ju=!0,rt.update(this.Yn))},n.prototype.isShown=function(){return this.wu},n.prototype.onRender=function(t){(this.ju||!this.wu&&this.when===eu.ALWAYS)&&(this.ju=!1,this.doStart(t)),this.Eu&&(this.Eu=!1)},n.prototype.getElementRect=function(n){var i=this.sn||new t.Point(0,0);this.sn=i;var r=this.Cu||new t.Rectangle;return this.Cu=r,this.mu.getElementRect(n,i,r)},n.prototype.getElementMatrix=function(){return this.mu.getElementMatrix()},n.prototype.getClipperRect=function(n){var i=this.sn||new t.Point(0,0);this.sn=i;var r=this.Au||new t.Rectangle;return this.Au=r,this.mu.getClipperRect(n,i,r)},n.prototype.fillClipperExRects=function(t,n){var i=this.mu;return i.getClipperExRects&&i.getClipperExRects(n),n.isDirty()},n.prototype.doStart=function(t){var n,i;if(!this.wu){this.wu=!0;var r=this.Nu;null!=r&&(this.Nu=void 0,r.off("postrender",this.Tu));var e=this.Yn;null==t&&(t=null===(n=rt.getLayer(e))||void 0===n?void 0:n.renderer),t&&(this.Nu=t,t.on("postrender",this.Tu)),this.onStart();var u=this.getClipper();if(u){var s=this.getBefore(u),h=this.getElement(u),o=this.getAfter(u),a=this.getClipperEx(u);if(h){var c=null!==(i=null==t?void 0:t.resolution)&&void 0!==i?i:rt.getResolution(e),f=this.getElementRect(c),l=this.getElementMatrix(),v=this.toClipperRectAdjusted(f,l,this.getClipperRect(c)),b=e.state,d=this.mu.getPadding(),g=this.Bt;if(g.clipper.styler(u,b,d,f,l,v,a),g.element.styler(h,b,d,f,l,v,a),s&&g.before.styler(s),o&&g.after.styler(o),this.onElementAttached(h,s,o),a){var m=this.getClipperExRects();m&&this.fillClipperExRects(c,m)&&(a.update(f,l,m),m.toClean())}u.style.display="",b.isFocused&&this.toElementFocused(h),u.scrollTop=0,u.scrollLeft=0,this.Bt.select&&setTimeout(this.Su,0)}}}},n.prototype.toElementFocused=function(t){t.focus({preventScroll:!0})},n.prototype.onStart=function(){this.mu.onStart()},n.prototype.doSelect=function(){var t=this.Iu;t&&(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&t.select()},n.prototype.cancel=function(){if(this.wu){this.wu=!1;var t=this.Nu;null!=t&&(this.Nu=void 0,t.off("postrender",this.Tu)),this.onCancel();var n=this.Yn,i=rt.getLayer(n);if(i){var r=i.view;switch(this.when){case eu.CLICKED:case eu.DOUBLE_CLICKED:case eu.FOCUSED:document.activeElement===this.Iu&&r.focus()}var e=n.state,u=i.renderer.plugins.interaction;this.mu.containsPoint(u.mouse.global)&&!e.isHovered&&(e.isHovered=!0,r.style.cursor=n.cursor),i.update()}var s=this.Iu;null!=s&&this.onElementDetached(s,this.Ru,this.yu);var h=this.Lu;null!=h&&(h.style.display="none")}},n.prototype.onCancel=function(){this.mu.onCancel()},n.prototype.onElementAttached=function(t,n,i){null==n||n.addEventListener("focus",this.Ou),null==i||i.addEventListener("focus",this.Du),t.addEventListener("focus",this.pu,!0)},n.prototype.onElementDetached=function(t,n,i){null==n||n.removeEventListener("focus",this.Ou),null==i||i.removeEventListener("focus",this.Du),t.removeEventListener("focus",this.pu,!0)},n.prototype.getClipper=function(){var t=this.Lu;if(null==t){var n=rt.getLayer(this.Yn);t=n?this.Bt.clipper.creator(n.getElementContainer()):null,this.Lu=t}return t},n.prototype.getClipperEx=function(t){var n=this.ku;return void 0===n&&(n=null!=this.getClipperExRects()?new iu(t):null,this.ku=n),n},n.prototype.getClipperExRects=function(){var t=this.xu;return void 0===t&&(t=this.Bt.clipper.extended?new ru:null,this.xu=t),t},n.prototype.getElement=function(t){var n=this.Iu;return null==n&&(n=this.Bt.element.creator(t),this.Iu=n),n},n.prototype.getBefore=function(t){var n=this.Ru;return null==n&&(n=this.Bt.before.creator(t),this.Ru=n),n},n.prototype.getAfter=function(t){var n=this.yu;return null==n&&(n=this.Bt.after.creator(t),this.yu=n),n},n.prototype.onBeforeFocus=function(t){var n=this.Yn,i=rt.getLayer(n);if(i){var r=i.getFocusController(),e=r.find(n,!1,!1,!1);i.view.focus(),r.focus(e),t.preventDefault(),t.stopImmediatePropagation()}},n.prototype.onAfterFocus=function(t){var n=this.Yn,i=rt.getLayer(n);if(i){var r=i.getFocusController(),e=r.find(n,!1,!1,!0);i.view.focus(),r.focus(e),t.preventDefault(),t.stopImmediatePropagation()}},n.prototype.onElementFocus=function(t){if(this.when===eu.ALWAYS){var n=this.Yn;n.state.isFocused||n.focus()}},n.prototype.onEndByBlur=function(){this.onEnd()},n.prototype.onEnd=function(){this.mu.onEnd()},n.prototype.end=function(){this.onEnd(),this.cancel()},n.prototype.select=function(){return this.wu&&this.Bt.select&&this.doSelect(),this},n.prototype.toClipperRectAdjusted=function(t,n,i){if(i&&t&&null==n){var r=t.x,e=t.y,u=r+t.width,s=e+t.height,h=i.x,o=i.y,a=h+i.width,c=o+i.height,f=Math.min(Math.max(h,r),a),l=Math.min(Math.max(h,u),a),v=Math.min(Math.max(o,e),c),b=Math.min(Math.max(o,s),c);i.x=f,i.y=v,i.width=l-f,i.height=b-v}return i},n.prototype.updateElement=function(t){if(this.wu){var n=this.Yn;if(n.worldVisible){var i=this.Iu,r=this.Lu,e=this.ku;if(i&&r){var u=t.resolution,s=this.getElementRect(u),h=this.getElementMatrix(),o=this.toClipperRectAdjusted(s,h,this.getClipperRect(u)),a=n.state,c=this.mu.getPadding(),f=this.Bt;if(f.clipper.styler(r,a,c,s,h,o,e),f.element.styler(i,a,c,s,h,o,e),e){var l=this.getClipperExRects();l&&this.fillClipperExRects(u,l)&&(e.update(s,h,l),l.toClean())}}}else switch(this.when){case eu.ALWAYS:(r=this.Lu)&&(r.style.display="none");break;default:this.cancel()}}},n.getClipperRect=function(t,n,i,r,e){for(var u=!0,s=0,h=0,o=0,a=0,c=t;c instanceof Zi;){c.getClippingRect(n,e),r.set(e.x,e.y),c.toGlobal(r,r,!1);var f=(r.x*i|0)/i,l=(r.y*i|0)/i;r.set(e.x+e.width,e.y+e.height),c.toGlobal(r,r,!0);var v=r.x,b=r.y,d=Math.min(f,v),g=Math.min(l,b),m=Math.max(f,v),w=Math.max(l,b);u?(u=!1,s=d,h=g,o=m,a=w):(s=Math.min(Math.max(s,d),m),h=Math.min(Math.max(h,g),w),o=Math.min(Math.max(o,d),m),a=Math.min(Math.max(a,g),w)),c=c.parent}return u?null:(e.x=s,e.y=h,e.width=o-s,e.height=a-h,e)},n}(),su=function(t){function n(n){return void 0===n&&(n=r.RECTANGLE),t.call(this,n)||this}return B(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&Ft(this,n,i,r,e,u,s)},n}(Bt),hu=function(t){function n(n){return void 0===n&&(n=r.RECTANGLE_PIVOTED),t.call(this,n)||this}return B(n,t),n.prototype.toHitTestData=function(n,i){var r=t.prototype.toHitTestData.call(this,n,i);return r.x-=r.width,r.y-=r.height,r},n}(su),ou=function(t){function n(n){var i=t.call(this)||this;i.name=n,i.interactive=!1,i.reference=0;var r=i.newShape();return r.parent=i,i.kr=r,i.interactives=[],i}return B(n,t),Object.defineProperty(n.prototype,"width",{get:function(){return this.kr.size.x},set:function(t){this.kr.size.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.kr.size.y},set:function(t){this.kr.size.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"background",{get:function(){return this.kr.fill},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.kr.state},enumerable:!1,configurable:!0}),n.prototype.newShape=function(){var t=new hu;return t.fill.set(!1,16777215,1),t.stroke.set(!1),t.state.add(Xe.INTERACTIVE),t},n.prototype.initialize=function(t){var n=this.interactives,i=this.kr,r=i.state.is(Xe.INTERACTIVE),e=i.state.is(Xe.DRAGGABLE),u=i.state.is(Xe.PINCHABLE);if(e||u){var s=new Qt(i);i.runtime=s;var h=(e?Pe.DRAG:Pe.NONE)|(u?Pe.PINCH:Pe.NONE);s.actions.push(new We("",He.LAYER,h).toRuntime()),t.push(i),s.initialize(i)}(r||e||u)&&(i.interactive=!0,n.push(i)),this.doInitialize(this.children,n)},n.prototype.doInitialize=function(t,n){for(var i=0,r=t.length;i<r;++i){var e=t[i],u=e.runtime;u&&(e.interactive||0<e.cursor.length||u.interactive)&&n.push(e);var s=e.children;0<s.length&&this.doInitialize(s,n)}},n.prototype.hitTestInteractives=function(t){for(var n=this.su,i=this.interactives,r=i.length-1;0<=r;--r){var e=i[r];if(e.visible&&(e.toLocal(t,void 0,n),null!=e.contains(n.x,n.y)))return e}return null},n.prototype.addUuid=function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].addUuid(t)},n.prototype.updateUuid=function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].updateUuid(t)},n.prototype.destroy=function(){if(!this._destroyed){for(var n=this.children,i=n.length-1;0<=i;--i)n[i].destroy();n.length=0,t.prototype.destroy.call(this)}},n.prototype.serialize=function(t,n,i){for(var r=this.children,e=0,u=r.length;e<u;++e){var s=r[e].serialize(n);s[16]=t,i.push(s)}var h=this.kr,o=n.addResource(this.name||""),a=(this.visible?1:0)|(h.state.is(Xe.INVISIBLE)?0:2),c=this.position,f=h.size,l=h.fill.serialize(n),v=h.state.is(Xe.INTERACTIVE)?1:0,b=h.state.is(Xe.DRAGGABLE)?2:0,d=h.state.is(Xe.PINCHABLE)?4:0;return[o,a,c.x,c.y,f.x,f.y,l,v|b|d]},n.deserialize=function(t,i,r,e){var u,s,h,o=new n(this.deserializeName(t[0],i)),a=o.kr,c=t[1];null!=c&&(!i.isEditMode||1&c||(o.visible=!1),2&c||(a.state.add(Xe.INVISIBLE),i.isEditMode||(o.visible=!1)));var f=t[2],l=t[3];o.position.set(f,l);var v=null!==(u=t[4])&&void 0!==u?u:r,b=null!==(s=t[5])&&void 0!==s?s:e;a.size.set(v,b);var d=t[6];null!=d&&a.fill.deserialize(d,i);var g=null!==(h=t[7])&&void 0!==h?h:1;return a.state.set(Xe.INTERACTIVE,!!(1&g)),a.state.set(Xe.DRAGGABLE,!!(2&g)),a.state.set(Xe.PINCHABLE,!!(4&g)),o},n.deserializeName=function(t,n){if(at(t))return t;var i=n.resources;return 0<=t&&t<=i.length?i[t]:""},n}(xe),au=!1,cu=function(){return au},fu=function(n){function i(t){var i=n.call(this)||this;return i.condition=nn.ofString(t.condition),i.utils=new Map,i}return B(i,n),i.prototype.getUtil=function(t,n){var i=this.utils,r=i.get(t);return null==r&&(r=this.newUtil(t,n),i.set(t,r)),r},i.prototype.newUtil=function(t,n){return new uu(t,this.newOperation(t,n),Y.getInstance().get("DHtmlElement"),this.newUtilOptions(t,n))},i.prototype.newOperation=function(t,n){var i=this;return{getElementRect:function(r,e,u){return i.getElementRect(t,n,r,e,u)},getElementMatrix:function(){return i.getElementMatrix(t,n)},getClipperRect:function(r,e,u){return i.getClipperToRect(t,n,r,e,u)},getClipperExRects:function(n){i.getClipperExRects(t,n)},getPadding:function(){return i.getPadding(t,n)},containsPoint:function(r){return i.containsPoint(t,n,r)},onStart:function(){},onCancel:function(){},onEnd:function(){}}},i.prototype.newUtilOptions=function(t,n){return{element:{creator:this.newElementCreator(t,n)},when:this.toWhen(t,n),clipper:{extended:cu()}}},i.prototype.toWhen=function(t,n){var i=this.condition(t,Date.now(),tn);if(null!=i&&i in eu)return eu[i]},i.prototype.containsPoint=function(n,r,e){var u;if(n.visible){var s=null!==(u=i.WORK)&&void 0!==u?u:i.WORK=new t.Point;return n.toLocal(e,void 0,s),null!=n.contains(s.x,s.y)}return!1},i.prototype.getPadding=function(t,n){return null},i.prototype.getElementRect=function(t,n,i,r,e){var u=t.transform.pivot,s=t.size,h=s.x,o=s.y;return e.x=-.5*h+u.x,e.y=-.5*o+u.y,e.width=h,e.height=o,e},i.prototype.getElementMatrix=function(t,n){return t.updateTransform(),t.transform.worldTransform},i.prototype.getClipperToRect=function(t,n,i,r,e){var u=qe.toContainer(t);return uu.getClipperRect(u,t,i,r,e)},i.prototype.getClipperExRects=function(t,n){n.begin();var i=t.root.parent;if(i instanceof ou){var r=i.parent;if(null!=r){var e=r.children,u=e.indexOf(i);if(0<=u)for(var s=u+1,h=e.length;s<h;++s){var o=e[s];if(o.visible){var a=o.width,c=o.height,f=o.transform.worldTransform,l=f.a,v=f.b,b=f.c,d=f.d,g=f.tx,m=f.ty;n.add(g,m,l*a+b*c+g,v*a+d*c+m)}}}}n.end()},i.prototype.onRender=function(t,n,i,r){this.getUtil(t,n).onRender(r)},i.prototype.onFocus=function(t,n){this.getUtil(t,n).onFocus()},i.prototype.onBlur=function(t,n){this.getUtil(t,n).onBlur()},i.prototype.onDowning=function(t,n,i){this.getUtil(t,n).onDowning(i)},i.prototype.onDown=function(t,n,i){this.getUtil(t,n).onDown(i)},i.prototype.onDblClick=function(t,n,i,r){this.getUtil(t,n).onDblClick(i,r)},i}(rn),lu=function(t){function n(n){var i=t.call(this,n)||this;return i.elementCreator=nn.ofElementOrNull(n.value),i.noPointerEvent=n.subtype===Ve.HTML_ELEMENT_WITHOUT_POINTER_EVENTS,i}return B(n,t),n.prototype.newUtil=function(n,i){return this.noPointerEvent&&n.state.add(nu.NO_POINTER_EVENTS),t.prototype.newUtil.call(this,n,i)},n.prototype.newElementCreator=function(t,n){var i=this.elementCreator;if(i)return function(n){return i(t,Date.now(),tn,n)}},n}(fu),vu=function(t){function n(n,i,r,e){var u,s,h,o,a,c,f=this;(f=t.call(this,n,i,r,e)||this).mu=i,f.Bu=function(t){f.onInputKeyDown(t)},f._u=function(){f.onInputChange()},f.Pu=function(t){f.onInputInput(t)},f.Fu=null!==(u=null==e?void 0:e.description)&&void 0!==u?u:"";var l=null==e?void 0:e.editing;return f.Uu=null!==(o=null!==(s=null==l?void 0:l.formatter)&&void 0!==s?s:null===(h=null==e?void 0:e.text)||void 0===h?void 0:h.formatter)&&void 0!==o?o:r.getEditingFormatter(),f.Gu=null!==(a=null==l?void 0:l.unformatter)&&void 0!==a?a:r.getEditingUnformatter(),f.zu=null!==(c=null==l?void 0:l.validator)&&void 0!==c?c:r.getEditingValidator(),f}return B(n,t),n.prototype.onEnd=function(){t.prototype.onEnd.call(this),this.onInputChange()},n.prototype.onElementAttached=function(n,i,r){n.value=this.fromValue(this.mu.getValue()),n.addEventListener("change",this._u),n.addEventListener("input",this.Pu),t.prototype.onElementAttached.call(this,n,i,r)},n.prototype.onElementDetached=function(n,i,r){t.prototype.onElementDetached.call(this,n,i,r),n.removeEventListener("change",this._u),n.removeEventListener("input",this.Pu)},n.prototype.onInputKeyDown=function(t){Zt.isOkKey(t)?(this.end(),this.mu.onEnter()):Zt.isCancelKey(t)&&this.cancel()},n.prototype.toElementFocused=function(n){t.prototype.toElementFocused.call(this,n),n.scrollTop=0,n.scrollLeft=0},n.prototype.onInputChange=function(){if(this.isShown()){var t=this.element;if(null!=t){var n=this.mu,i=this.toValue(t.value),r=n.getValue();r!==i&&n.onValueChange(i,r)}}},n.prototype.toValue=function(t){return this.Gu(t,this)},n.prototype.fromValue=function(t){return void 0!==t?this.Uu(t,this):""},n.prototype.onInputInput=function(t){var n=t.target;n instanceof HTMLInputElement&&this.mu.onValueInput(this.toValue(n.value))},n.prototype.validate=function(){var t=this.mu.getValue();if(void 0!==t){var n=this.zu(t,this);if(this.Hu!==n){this.Hu=n;var i=this.Yn.state;i.isInvalid=null!=n,i.isHovered&&this.mu.applyTitle()}return n}return null},n.prototype.applyTitle=function(){var t=this.Hu;if(at(t)){var n=rt.getLayer(this.Yn);return n&&(n.view.title=t),!0}return!1},n}(uu),bu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onElementAttached=function(n,i,r){n.addEventListener("keydown",this.Bu),t.prototype.onElementAttached.call(this,n,i,r)},n.prototype.onElementDetached=function(n,i,r){n.removeEventListener("keydown",this.Bu),t.prototype.onElementDetached.call(this,n,i,r)},n}(vu),du=function(t){function n(n,i,r,e){var u,s,h,o=this;return(o=t.call(this,n,i,r,e)||this).Vu=null!==(u=null==e?void 0:e.step)&&void 0!==u?u:r.getStep(),o.Wu=null!==(s=null==e?void 0:e.min)&&void 0!==s?s:r.getMin(),o.Xu=null!==(h=null==e?void 0:e.max)&&void 0!==h?h:r.getMax(),o}return B(n,t),Object.defineProperty(n.prototype,"step",{get:function(){return this.Vu},set:function(t){this.Vu!==t&&(this.Vu=t,this.onStepChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this.Wu},set:function(t){this.Wu!==t&&(this.Wu=t,this.onMinChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this.Xu},set:function(t){this.Xu!==t&&(this.Xu=t,this.onMaxChange())},enumerable:!1,configurable:!0}),n.prototype.toValue=function(n){var i=t.prototype.toValue.call(this,n);if(i==i){var r=this.Wu;if(null!=r&&i<r)return r;var e=this.Xu;return null!=e&&e<i?e:i}return 0},n.prototype.fromValue=function(t){return void 0!==t?this.Uu(t,this):"0"},n.prototype.onStepChange=function(){if(this.isShown()){var t=this.element;t&&this.updateStep(t)}},n.prototype.onMinChange=function(){if(this.isShown()){var t=this.element;t&&this.updateMin(t)}},n.prototype.onMaxChange=function(){if(this.isShown()){var t=this.element;t&&this.updateMax(t)}},n.prototype.updateStep=function(t){var n=this.step;t.step=null!=n?"".concat(n):"any"},n.prototype.updateMin=function(t){var n=this.min;null!=n?t.min="".concat(n):t.removeAttribute("min")},n.prototype.updateMax=function(t){var n=this.max;null!=n?t.max="".concat(n):t.removeAttribute("max")},n.prototype.onElementAttached=function(n,i,r){n.type="number",t.prototype.onElementAttached.call(this,n,i,r),this.updateStep(n),this.updateMin(n),this.updateMax(n)},n}(bu),gu={EMIT_EVENT:0,WRITE_BOTH:1,WRITE_LOCAL:2,WRITE_REMOTE:3},mu=function(){function t(){}return t.execute=function(t,n,i,r,e){switch(n){case gu.EMIT_EVENT:t.emit(i,t,r),qe.emit(t,i,r,e);break;case gu.WRITE_LOCAL:qe.writeLocal(t,i,r,e);break;case gu.WRITE_REMOTE:qe.writeRemote(t,i,r);break;case gu.WRITE_BOTH:qe.writeLocal(t,i,r,e),qe.writeRemote(t,i,r)}},t}(),wu=function(t){function n(n){var i=t.call(this,n)||this;return i.target=nn.ofStringOrNull(n.target),i.onInputAction=n.onInputAction,i}return B(n,t),n.prototype.newOperation=function(t,n){var i=this;return{getElementRect:function(r,e,u){return i.getElementRect(t,n,r,e,u)},getElementMatrix:function(){return i.getElementMatrix(t,n)},getClipperRect:function(r,e,u){return i.getClipperToRect(t,n,r,e,u)},getClipperExRects:function(n){i.getClipperExRects(t,n)},getPadding:function(){return i.getPadding(t,n)},containsPoint:function(r){return i.containsPoint(t,n,r)},onStart:function(){t.text.enable=!1},onCancel:function(){t.text.enable=!0},onEnd:function(){},getValue:function(){return i.getUtil(t,n).toValue(t.text.value)},onValueInput:function(t){},onValueChange:function(r,e){i.onValueChange(t,n,r,e)},onEnter:function(){},applyTitle:function(){}}},n.prototype.newElementCreator=function(t,n){},n.prototype.getPadding=function(t,n){return t.text.padding},n.prototype.onValueChange=function(t,n,i,r){t.text.value=this.getUtil(t,n).fromValue(i);var e=Date.now(),u=this.target(t,e,tn);null!=u&&mu.execute(t,this.onInputAction,u,i,e)},n}(fu),pu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n}(wu),Ou=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n}(pu),Du=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newUtil=function(t,n){return new du(t,this.newOperation(t,n),Y.getInstance().get("DInputInteger"),this.newUtilOptions(t,n))},n}(Ou),Eu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newUtil=function(t,n){return new du(t,this.newOperation(t,n),Y.getInstance().get("DInputReal"),this.newUtilOptions(t,n))},n}(Ou),Mu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onElementAttached=function(n,i,r){n.type="text",t.prototype.onElementAttached.call(this,n,i,r)},n}(bu),Su=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newUtil=function(t,n){return new Mu(t,this.newOperation(t,n),Y.getInstance().get("DInputText"),this.newUtilOptions(t,n))},n}(pu),ju=function(t){function n(n){var i=t.call(this,n,qt.NONE)||this;return i.target=nn.ofStringOrNull(n.target),i.value=nn.ofUnknown(n.value),i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.target(t,i,tn);null!=r&&this.write(t,r,this.value(t,i,tn),i)}},n}(en),Tu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.write=function(t,n,i,r){qe.writeLocal(t,n,i,r),qe.writeRemote(t,n,i)},n}(ju),Nu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.write=function(t,n,i,r){qe.writeLocal(t,n,i,r)},n}(ju),Iu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.write=function(t,n,i,r){qe.writeRemote(t,n,i)},n}(ju),Cu=function(t){function n(n,i,r,e,u){var s=t.call(this,dn.MISC,i,n)||this;return s.target=r,s.onInputAction=e,s.value=u,s}return B(n,t),n.prototype.toRuntime=function(){switch(this.subtype){case Ve.INPUT_TEXT:return new Su(this);case Ve.INPUT_INTEGER:return new Du(this);case Ve.INPUT_REAL:return new Eu(this);case Ve.EMIT_EVENT:return new tu(this);case Ve.WRITE_BOTH:return new Tu(this);case Ve.WRITE_LOCAL:return new Nu(this);case Ve.WRITE_REMOTE:return new Iu(this);case Ve.HTML_ELEMENT:case Ve.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:return new lu(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=t.addResource(this.value);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(this.onInputAction,",").concat(r,"]"))},n.deserialize=function(t,i){var r=i.resources,e=mn.toResource(1,t,r),u=mn.toResource(3,t,r),s=mn.toResource(5,t,r);return new n(t[2],e,u,t[4],s)},n}(bn),Au=function(t){function n(n){var i=t.call(this,n,qt.NONE)||this;return i.target=nn.ofUnknown(n.target),i}return B(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i,tn)&&this.target(t,i,tn)},n}(en),Ru=function(t){function n(n,i){var r=t.call(this,dn.MISC,n,Ve.EXECUTE)||this;return r.target=i,r}return B(n,t),n.prototype.toRuntime=function(){return new Au(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,"]"))},n.deserialize=function(t,i){var r=i.resources;return new n(mn.toResource(1,t,r),mn.toResource(3,t,r))},n}(bn),yu=function(t){function n(n,i){var r=t.call(this,n,qt.NONE)||this;return r.subtype=i,r.target=nn.ofStringOrNull(n.target),r.inNewWindow=n.inNewWindow,r}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.target(t,i,tn);null!=r&&qe.open(t,this.subtype,r,this.inNewWindow)}},n}(en),Lu={DIAGRAM_LEGACY:0,PAGE_LEGACY:1,PAGE_INPLACE_LEGACY:2,DIALOG_TEXT:3,DIALOG_INTEGER:4,DIALOG_REAL:5,DIALOG_BOOLEAN:6,DIALOG_DATE:7,DIALOG_TIME:8,DIALOG_DATETIME:9,DIAGRAM:10,PAGE:11,DIALOG:12,EXTENSION:fr.EXTENSION},ku=function(t){function n(n,i,r,e){var u=t.call(this,dn.OPEN,i,n)||this;return u.target=r,u.inNewWindow=e,u}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.inNewWindow===i.inNewWindow},n.prototype.toRuntime=function(){switch(this.subtype){case Lu.DIAGRAM:return new yu(this,fr.DIAGRAM);case Lu.PAGE:return new yu(this,fr.PAGE)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=this.inNewWindow?1:0;return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources),e=mn.toResource(3,t,i.resources);return new n(this.toSubType(t),r,e,this.inNewWindow(t))},n.toSubType=function(t){if(6!==t.length)return t[2];switch(t[2]){case Lu.DIAGRAM_LEGACY:return Lu.DIAGRAM;case Lu.PAGE_LEGACY:case Lu.PAGE_INPLACE_LEGACY:return Lu.PAGE}},n.inNewWindow=function(t){if(6!==t.length)return!!t[4];switch(t[2]){case Lu.DIAGRAM_LEGACY:return!1;case Lu.PAGE_LEGACY:return!0;case Lu.PAGE_INPLACE_LEGACY:return!1}},n}(bn),xu={TOP:0,TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,LEFT:4,LEFT_TOP:5,LEFT_MIDDLE:6,LEFT_BOTTOM:7,RIGHT:8,RIGHT_TOP:9,RIGHT_MIDDLE:10,RIGHT_BOTTOM:11,BOTTOM:12,BOTTOM_LEFT:13,BOTTOM_CENTER:14,BOTTOM_RIGHT:15,OVER:16},Bu=function(){function t(){}return t.attach=function(t,n,i,r,e,u,s){var h=t.width,o=t.height,a=0;switch(s){case xu.LEFT:case xu.LEFT_TOP:case xu.LEFT_MIDDLE:case xu.LEFT_BOTTOM:(a=n.left-h-i)<i&&e-i<(a=n.right+i)+h&&(a=i);break;case xu.RIGHT:case xu.RIGHT_TOP:case xu.RIGHT_MIDDLE:case xu.RIGHT_BOTTOM:e-i<(a=n.right+i)+h&&(a=n.left-h-i)<i&&(a=e-h-i);break;case xu.TOP:case xu.TOP_LEFT:case xu.BOTTOM:case xu.BOTTOM_LEFT:a=this.adjust(n.left,h,i,e);break;case xu.TOP_RIGHT:case xu.BOTTOM_RIGHT:a=this.adjust(n.right-h,h,i,e);break;case xu.TOP_CENTER:case xu.BOTTOM_CENTER:case xu.OVER:a=this.adjust(.5*(n.left+n.right-h),h,i,e)}var c=0;switch(s){case xu.LEFT:case xu.LEFT_TOP:case xu.RIGHT:case xu.RIGHT_TOP:c=this.adjust(n.top,o,r,u);break;case xu.LEFT_MIDDLE:case xu.RIGHT_MIDDLE:case xu.OVER:c=this.adjust(.5*(n.top+n.bottom-o),o,r,u);break;case xu.LEFT_BOTTOM:case xu.RIGHT_BOTTOM:c=this.adjust(n.bottom,o,r,u);break;case xu.TOP:case xu.TOP_LEFT:case xu.TOP_RIGHT:case xu.TOP_CENTER:(c=n.top-o-r)<r&&u<(c=n.bottom+r)+o&&(c=r);break;case xu.BOTTOM:case xu.BOTTOM_LEFT:case xu.BOTTOM_RIGHT:case xu.BOTTOM_CENTER:u-r<(c=n.bottom+r)+o&&(c=n.top-o-r)<r&&(c=u-o-r)}t.position.set(a,c)},t.adjust=function(t,n,i,r){return t<i?r-i<t+n?.5*(r-n):i:r-i<t+n?r<n?.5*(r-n):r-n-i:t},t}(),_u={NONE:0,ESC:1,CLICK_OUTSIDE:2},Pu={DIRTY:0,CLEAN:1},Fu=function(){function n(t,n){var i;this.p=t,this.yn=n,n.enable&&(this.Yu=this.newUtil()),this.Ku=Oi(null!==(i=n.mode)&&void 0!==i?i:Pu.DIRTY,Pu),this.Ju=!0,this.fn=!1}return Object.defineProperty(n.prototype,"parent",{get:function(){return this.p},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mode",{get:function(){return this.Ku},set:function(t){this.Ku=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"constraint",{get:function(){var t,n,i=this.Si;return null==i&&(i=null!==(n=null===(t=this.yn)||void 0===t?void 0:t.constraint)&&void 0!==n?n:this.newConstraint(),this.Si=i),i},set:function(t){this.Si=t},enumerable:!1,configurable:!0}),n.prototype.newConstraint=function(){var t=this;return function(n,i,r,e){t.toConstrained(n,i,r,e)}},n.prototype.isDirty=function(){return this.fn},n.prototype.isClean=function(){return!this.fn},n.prototype.toClean=function(){this.fn&&(this.fn=!1)},n.prototype.newUtil=function(){var n=this,i=new t.Point,r=this.p,e=r.position;return new sr({bind:r,checker:{start:function(t){if(t.target!==r)return!1;i.copyFrom(t.data.global),r.toLocal(i,void 0,i,!0);var n=i.x,e=i.y;return!(n<0||e<0||r.width<n||r.height<e)}},on:{start:function(){i.copyFrom(e)},move:function(t,u,s){i.set(i.x+u,i.y+s),n.fn||(n.fn=!0,r.setX(e.x),r.setY(e.y));var h=r.layer;null!=h&&n.constraint(r,h,i.x,i.y)}}})},n.prototype.toConstrained=function(i,r,e,u){var s,h=i.position;if(r){var o=i.getBounds(!1,null!==(s=n.WORK_BOUNDS)&&void 0!==s?s:n.WORK_BOUNDS=new t.Rectangle),a=o.x+e-h.x,c=o.y+u-h.y,f=Math.min(Math.max(0,a),r.width-o.width),l=Math.min(Math.max(0,c),r.height-o.height);h.set(e+f-a,u+l-c)}else h.set(e,u)},n}(),Uu={MODAL:0,MODELESS:1,MENU:2},Gu={MODAL:"MODAL",MODELESS:"MODELESS",MENU:"MENU"},zu=function(){function n(){}return n.apply=function(t,n){var i=this;t.on(Wi.down,(function(r){if(r.target===t){var e=i.point;e.copyFrom(r.data.global),t.toLocal(e,void 0,e,!0);var u=e.x,s=e.y;(u<0||s<0||t.width<u||t.height<s)&&setTimeout((function(){n(r)}),0)}}))},n.point=new t.Point,n}(),Hu=function(){function t(t){this.Zu=null,this.qu=null==(null==t?void 0:t.parent)?rt.last():null}return Object.defineProperty(t.prototype,"picked",{get:function(){return this.Zu},enumerable:!1,configurable:!0}),t.prototype.pick=function(t){var n=this.Zu;if(null==n){if(!(n=rt.getLayerOverlay(t))){var i=this.qu;n=i?i.getLayerOverlay():rt.last().getLayerOverlay()}this.Zu=n}return n},t}(),Vu=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(t){var i,r,e=this;n.prototype.init.call(this,t),this.Qu=function(){e.onPrerender()},this.Zu=null;var u=this.theme,s=Oi(null!==(i=null==t?void 0:t.mode)&&void 0!==i?i:u.getMode(),Uu);this.Ku=s,this.$u=null!==(r=null==t?void 0:t.sticky)&&void 0!==r?r:u.isSticky(s);var h=this.toCloseOn(s,u,t);switch(this.ts=h,this.St=this.toAlign(s,u,t),this.ns=new Hu,this.$i=new Fu(this,this.toGestureOptions(s,u,t)),this.visible=!1,s){case Uu.MODAL:this.state.addAll(ht.FOCUS_ROOT,Gu.MODAL);break;case Uu.MODELESS:this.state.add(Gu.MODELESS);break;case Uu.MENU:this.state.addAll(ht.FOCUS_ROOT,Gu.MENU)}h&_u.CLICK_OUTSIDE&&zu.apply(this,(function(){e.onCloseOn()}))},i.prototype.toCloseOn=function(t,n,i){var r=null==i?void 0:i.closeOn;if(null==r)return n.closeOn(t);if(Ct(r)){for(var e=_u.NONE,u=0,s=r.length;u<s;++u)e|=_u[r[u]];return e}return at(r)?_u[r]:r},i.prototype.toAlign=function(t,n,i){var r=null==i?void 0:i.align;return null===r?null:void 0===r?n.getAlign(t):Oi(r,xu)},Object.defineProperty(i.prototype,"mode",{get:function(){return this.Ku},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"algin",{set:function(t){this.St=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gesture",{get:function(){return this.$i},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layer",{get:function(){return this.Zu},enumerable:!1,configurable:!0}),i.prototype.toGestureOptions=function(t,n,i){var r=null==i?void 0:i.gesture;return!0===r?{enable:!0,mode:n.getGestureMode(t)}:!1===r?{enable:!1,mode:n.getGestureMode(t)}:null!=r?(void 0===r.enable&&(r.enable=n.isGestureEnabled(t)),void 0===r.mode&&(r.mode=n.getGestureMode(t)),r):{enable:n.isGestureEnabled(t),mode:n.getGestureMode(t)}},i.prototype.onParentResize=function(t,i,r){if(this.isOpened()){var e=this.Zu;if(null!=e){var u=this.$i;if(u.isDirty()){var s=this.position;u.constraint(this,e,s.x,s.y)}}}n.prototype.onParentResize.call(this,t,i,r)},i.prototype.getAnimation=function(){var t,n,i=this,r=this.vi;return void 0===r&&((r=null!==(n=null===(t=this.yn)||void 0===t?void 0:t.animation)&&void 0!==n?n:this.theme.newAnimation(this.Ku))&&(r.target=this,r.on("end",(function(t){i.onAnimationEnd(t)}))),this.vi=r),r},i.prototype.onAnimationEnd=function(t){if(t)if(this.Ku===Uu.MODELESS)this.hide();else{var n=this.parent;n&&n.removeChild(this)}else{var i=rt.getLayer(this);if(i){var r=i.getFocusController();this.rs=r.get(),r.focus(this.findFirstFocusable(r)||this)}}},i.prototype.findFirstFocusable=function(t){return t.find(this,!1,!0,!0)},i.prototype.open=function(t){var n=this,i=this.es;if(null==i){i=new Promise((function(t,i){n.us=t,n.ss=i})),this.es=i,this.hs=t;var r=null;switch(this.Ku){case Uu.MODAL:case Uu.MENU:(r=this.ns.pick(this)).stage.addChild(this);break;case Uu.MODELESS:r=rt.getLayer(this),this.show()}this.Zu=r;var e=this.$i;if(e.mode===Pu.CLEAN&&e.toClean(),null!=r)if(e.isClean()){var u=r.renderer,s=this.Qu;this.$u?u.on("prerender",s):u.once("prerender",s)}else{var h=this.position;e.constraint(this,r,h.x,h.y)}this.onOpen()}return i},i.prototype.onPrerender=function(){var n,r=this.Zu;if(null!=r){var e=this.St,u=this.hs;if(null!=e&&null!=u){var s=this.Ku,h=u.getBounds(!1,null!==(n=i.WORK_BOUNDS)&&void 0!==n?n:i.WORK_BOUNDS=new t.Rectangle),o=this.theme;Bu.attach(this,h,o.getOffsetX(s),o.getOffsetY(s),r.width,r.height,e)}else this.position.set(.5*(r.width-this.width),.5*(r.height-this.height))}},i.prototype.onOpen=function(){this.emit("open",this);var t=this.getAnimation();t?t.start():this.Ku===Uu.MENU&&(this.visible=!0,this.onAnimationEnd(!1))},i.prototype.isOpened=function(){return null!=this.es},i.prototype.close=function(){this.doReject()},i.prototype.doResolve=function(t){var n=this.us;n&&(this.es=void 0,this.us=void 0,this.ss=void 0,this.onClose(),n(t))},i.prototype.doReject=function(t){var n=this.ss;n&&(this.es=void 0,this.us=void 0,this.ss=void 0,this.onClose(),n(t))},i.prototype.onClose=function(){var t=this.Zu,n=this.rs;if(null!=n)if(this.rs=null,t){var i=rt.getLayer(n);null!=i&&t!==i&&i.view.focus(),t.getFocusController().focus(n)}else this.blur(!0);else this.blur(!0);t&&(t.renderer.off("prerender",this.Qu),this.Zu=null),this.hs=null;var r=this.getAnimation();r?r.start(!0):(this.visible=!1,this.onAnimationEnd(!0)),this.emit("close",this)},i.prototype.onKeyDown=function(t){return this.ts&_u.ESC&&Zt.isCancelKey(t)&&this.onCloseOn(),n.prototype.onKeyDown.call(this,t)},i.prototype.onCloseOn=function(){this.close()},i.prototype.containsGlobalPoint=function(t){switch(this.Ku){case Uu.MODAL:case Uu.MENU:return!0;case Uu.MODELESS:return n.prototype.containsGlobalPoint.call(this,t)}},i.prototype.getType=function(){return"DDialog"},i}(Zi),Wu={VERTICAL:0,HORIZONTAL:1},Xu=function(t){function n(n){var i=t.call(this,n)||this;return i.visible=!1,i}return B(n,t),n.prototype.getType=function(){return"DLayoutSpace"},n}(Zi),Yu=function(t){return t instanceof Zi&&(t.visible||t instanceof Xu)},Ku=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n);var i=this.theme;this.Ur=function(t,n){var i,r,e=null==n?void 0:n.margin;if(null!=e){if(gn(e))return{horizontal:e,vertical:e};var u=t.getMargin();return{horizontal:null!==(i=e.horizontal)&&void 0!==i?i:u,vertical:null!==(r=e.vertical)&&void 0!==r?r:u}}return{horizontal:u=t.getMargin(),vertical:u}}(i,n),this.Xt=function(t,n){var i=null==n?void 0:n.direction;return null!=i?at(i)?Wu[i]:i:t.getDirection()}(i,n),this.os=function(t,n){var i=null==n?void 0:n.corner;if(null!=i&&!gn(i)){var r=i.adjust;if(null!=r)return r}return t.getCornerAdjust()}(i,n),this.cs=function(t,n){if(n){var i=n.row;if(null!=i)return i;var r=n.column;if(null!=r)return r}return t.getMultiplicity()}(i,n),this.qn=function(t,n){var i;return null!==(i=null==n?void 0:n.reverse)&&void 0!==i?i:t.getReverse()}(i,n)},Object.defineProperty(n.prototype,"margin",{get:function(){return this.Ur},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"multiplicity",{get:function(){return this.cs},enumerable:!1,configurable:!0}),n.prototype.getWeightTotal=function(){for(var t=this.children,n=0,i=this.cs,r=this.qn,e=0,u=t.length;e<u;){for(var s=-1,h=0;h<i&&e+h<u;++h){var o=t[r?u-1-(e+h):e+h];if(Yu(o)){var a=o.getClearType();if(0!==h&&a&_i.BEFORE)break;if(s=Math.max(s,o.weight),a&&_i.AFTER){h+=1;break}}else e+=1,h-=1}e+=h,0<=s&&(n+=s)}return n},n.prototype.getSpaceLeft=function(t,n){var i=this.children,r=this.cs,e=this.qn;if(this.Xt===Wu.VERTICAL){for(var u=t,s=0,h=0,o=i.length;h<o;){for(var a=0,c=-1,f=0;f<r&&h+f<o;++f){var l=i[e?o-1-(h+f):h+f];if(Yu(l)){var v=l.getClearType();if(0!==f&&v&_i.BEFORE)break;if(a=(c=Math.max(c,l.weight))<0?Math.max(a,l.height+s):s,v&_i.AFTER){f+=1;break}}else h+=1,f-=1}h+=f,u-=a,s=n}return Math.max(0,u)}for(u=t,s=0,h=0,o=i.length;h<o;){var b=0;for(c=-1,f=0;f<r&&h+f<o;++f)if(l=i[e?o-1-(h+f):h+f],Yu(l)){if(v=l.getClearType(),0!==f&&v&_i.BEFORE)break;if(b=(c=Math.max(c,l.weight))<0?Math.max(b,l.width+s):s,v&_i.AFTER){f+=1;break}}else h+=1,f-=1;h+=f,u-=b,s=n}return Math.max(0,u)},n.prototype.calcSpaceLeft=function(t,n,i,r){return t?0:this.getSpaceLeft(n-i,r)},n.prototype.onRefit=function(){var i=this.children,r=this.Gn,e=r.getTop(),u=r.getBottom(),s=r.getLeft(),h=r.getRight(),o=this.Ur,a=o.vertical,c=o.horizontal,f=this.getWeightTotal(),l=this.cs,v=this.qn,b=this.kn,d=null;if(this.os){var g=4+(i.length<<1);(null==n.CORNER_ADJUST_WORK||n.CORNER_ADJUST_WORK.length<g)&&(n.CORNER_ADJUST_WORK=new Float32Array(g)),(d=n.CORNER_ADJUST_WORK)[0]=-2,d[1]=-2,d[g-2]=-3,d[g-1]=-3}if(this.Xt===Wu.VERTICAL){var m=0,w=e-a;if(0<f){for(var p=1/f,O=this.calcSpaceLeft(b.height.isOn,this.height,e+u,a),D=0,E=i.length;D<E;){for(var M=s-c,S=0,j=0;j<l&&D+j<E;++j){var T=i[v?E-1-(D+j):D+j];if(Yu(T)){var N=T.getClearType();if(0!==j&&N&_i.BEFORE)break;if(T.position.set(c+M,a+w),0<=(U=T.weight)&&(T.height=O*(U*p)),M+=c+T.width,S=Math.max(S,T.height),N&_i.AFTER){null!=d&&(d[0+(G=D+j+1<<1)]=j,d[G+1]=m),j+=1;break}null!=d&&(d[0+(G=D+j+1<<1)]=j,d[G+1]=m)}else null!=d&&(d[0+(G=D+j+1<<1)]=j-1,d[G+1]=m),D+=1,j-=1}w+=a+S,D+=j,m+=1}if(null!=d)for(D=0,E=i.length;D<E;++D)if(T=i[v?E-1-D:D],Yu(T)){var I=d[0+(z=2+(D<<1))],C=d[z+1],A=-2;if(!((N=T.getClearType())&_i.BEFORE)){var R=this.findRowIndexPrevious(z,C,d);this.hasClearTypeAfter(i,R)||(A=d[R])}var y=-2;if(!(N&_i.AFTER)){var L=this.findRowIndexNext(z,C,d);this.hasClearTypeBefore(i,L)||(y=d[L])}var k=this.countColumn(z,C,d);T.corner.mask=this.toCornerMaskColumn(A,I,y,k)}}else{for(D=0,E=i.length;D<E;){for(M=s-c,S=0,j=0;j<l&&D+j<E;++j)if(T=i[v?E-1-(D+j):D+j],Yu(T)){if(N=T.getClearType(),0!==j&&N&_i.BEFORE)break;if(T.position.set(c+M,a+w),0<=(U=T.weight)&&(T.height=0),M+=c+T.width,S=Math.max(S,T.height),N&_i.AFTER){null!=d&&(d[0+(G=D+j+1<<1)]=j,d[G+1]=m),j+=1;break}null!=d&&(d[0+(G=D+j+1<<1)]=j,d[G+1]=m)}else null!=d&&(d[0+(G=D+j+1<<1)]=j-1,d[G+1]=m),D+=1,j-=1;w+=a+S,D+=j,m+=1}if(null!=d)for(D=0,E=i.length;D<E;++D)T=i[v?E-1-D:D],Yu(T)&&(I=d[0+(z=2+(D<<1))],C=d[z+1],A=-2,(N=T.getClearType())&_i.BEFORE||(R=this.findRowIndexPrevious(z,C,d),this.hasClearTypeAfter(i,R)||(A=d[R])),y=-2,N&_i.AFTER||(L=this.findRowIndexNext(z,C,d),this.hasClearTypeBefore(i,L)||(y=d[L])),k=this.countColumn(z,C,d),T.corner.mask=this.toCornerMaskColumn(A,I,y,k))}}else{var x=0;if(M=s-c,0<f){for(p=1/f,O=this.calcSpaceLeft(b.width.isOn,this.width,s+h,c),D=0,E=i.length;D<E;){w=e-a;var B=0;for(j=0;j<l&&D+j<E;++j)if(T=i[v?E-1-(D+j):D+j],Yu(T)){if(N=T.getClearType(),0!==j&&N&_i.BEFORE)break;if(T.position.set(c+M,a+w),0<=(U=T.weight)&&(T.width=O*(U*p)),B=Math.max(B,T.width),w+=a+T.height,N&_i.AFTER){null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j),j+=1;break}null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j)}else null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j-1),D+=1,j-=1;M+=c+B,D+=j,x+=1}if(null!=d)for(D=0,E=i.length;D<E;++D)if(T=i[v?E-1-D:D],Yu(T)){I=d[0+(z=2+(D<<1))],C=d[z+1];var _=-2;(N=T.getClearType())&_i.BEFORE||(R=this.findColumnIndexPrevious(z,I,d),this.hasClearTypeAfter(i,R)||(_=d[R+1]));var P=-2;N&_i.AFTER||(L=this.findColumnIndexNext(z,I,d),this.hasClearTypeBefore(i,L)||(P=d[L+1]));var F=this.countRow(z,I,d);T.corner.mask=this.toCornerMaskRow(_,C,P,F)}}else{for(D=0,E=i.length;D<E;){for(w=e-a,B=0,j=0;j<l&&D+j<E;++j)if(T=i[v?E-1-(D+j):D+j],Yu(T)){var U;if(N=T.getClearType(),0!==j&&N&_i.BEFORE)break;if(T.position.set(c+M,a+w),0<=(U=T.weight)&&(T.width=0),B=Math.max(B,T.width),w+=a+T.height,N&_i.AFTER){null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j),j+=1;break}null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j)}else{var G;null!=d&&(d[0+(G=D+j+1<<1)]=x,d[G+1]=j-1),D+=1,j-=1}M+=c+B,D+=j,x+=1}if(null!=d)for(D=0,E=i.length;D<E;++D){var z;T=i[v?E-1-D:D],Yu(T)&&(I=d[0+(z=2+(D<<1))],C=d[z+1],_=-2,(N=T.getClearType())&_i.BEFORE||(R=this.findColumnIndexPrevious(z,I,d),this.hasClearTypeAfter(i,R)||(_=d[R+1])),P=-2,N&_i.AFTER||(L=this.findColumnIndexNext(z,I,d),this.hasClearTypeBefore(i,L)||(P=d[L+1])),F=this.countRow(z,I,d),T.corner.mask=this.toCornerMaskRow(_,C,P,F))}}}t.prototype.onRefit.call(this)},n.prototype.hasClearTypeBefore=function(t,n){return this.hasClearType(t,n,_i.BEFORE)},n.prototype.hasClearTypeAfter=function(t,n){return this.hasClearType(t,n,_i.AFTER)},n.prototype.hasClearType=function(t,n,i){if(2<=n){var r=n-2>>1;if(0<=r&&r<t.length){var e=t[r];if(e instanceof Zi)return!!(e.getClearType()&i)}}return!1},n.prototype.findColumnIndexPrevious=function(t,n,i){for(var r=t-2;0<=r;r-=2)if(i[r]!==n)return r;return 0},n.prototype.findColumnIndexNext=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2){var u=i[r];if(u!==n){for(var s=r+2;s<e;s+=2)if(i[s]!==u)return s-2;return r}}return i.length-2},n.prototype.countRow=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2)if(i[r]!==n)return i[r-2+1]+1;return 0},n.prototype.findRowIndexPrevious=function(t,n,i){for(var r=t-2;0<=r;r-=2)if(i[r+1]!==n)return r;return 0},n.prototype.findRowIndexNext=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2){var u=i[r+1];if(u!==n){for(var s=r+2;s<e;s+=2)if(i[s+1]!==u)return s-2;return r}}return i.length-2},n.prototype.countColumn=function(t,n,i){for(var r=t+2,e=i.length;r<e;r+=2)if(i[r+1]!==n)return i[r-2+0]+1;return 0},n.prototype.toCornerMaskColumn=function(t,n,i,r){var e=Ei.NONE;return t+1<n&&0===n&&(e|=Ei.TOP_LEFT),i+1<n&&0===n&&(e|=Ei.BOTTOM_LEFT),t<n&&n+1===r&&(e|=Ei.TOP_RIGHT),i<n&&n+1===r&&(e|=Ei.BOTTOM_RIGHT),Ei.ALL&~e},n.prototype.toCornerMaskRow=function(t,n,i,r){var e=Ei.NONE;return t+1<n&&0===n&&(e|=Ei.TOP_LEFT),i+1<n&&0===n&&(e|=Ei.TOP_RIGHT),t<n&&n+1===r&&(e|=Ei.BOTTOM_LEFT),i<n&&n+1===r&&(e|=Ei.BOTTOM_RIGHT),Ei.ALL&~e},n.prototype.addSpace=function(t){return this.addChild(new Xu(t))},n.prototype.getType=function(){return"DLayout"},n.CORNER_ADJUST_WORK=null,n}(Zi),Ju=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DLayoutVertical"},n}(Ku),Zu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogLayeredContent"},n}(Ju),qu={CLICKED:0,DOUBLE_CLICKED:1},Qu=function(){function t(t){this.qt=t}return t.prototype.getImageAlignHorizontal=function(){return this.qt.getSecondaryImageAlignHorizontal()},t.prototype.getImageAlignVertical=function(){return this.qt.getSecondaryImageAlignVertical()},t.prototype.getImageAlignWith=function(){return this.qt.getSecondaryImageAlignWith()},t.prototype.getImageMarginHorizontal=function(){return this.qt.getSecondaryImageMarginHorizontal()},t.prototype.getImageMarginVertial=function(){return this.qt.getSecondaryImageMarginVertial()},t.prototype.getImageTintColor=function(t){return this.qt.getSecondaryImageTintColor(t)},t.prototype.getImageTintAlpha=function(t){return this.qt.getSecondaryImageTintAlpha(t)},t.prototype.getImageSource=function(t){return this.qt.getSecondaryImageSource(t)},t}(),$u=function(){function t(t){this.qt=t}return t.prototype.getImageAlignHorizontal=function(){return this.qt.getTertiaryImageAlignHorizontal()},t.prototype.getImageAlignVertical=function(){return this.qt.getTertiaryImageAlignVertical()},t.prototype.getImageAlignWith=function(){return this.qt.getTertiaryImageAlignWith()},t.prototype.getImageMarginHorizontal=function(){return this.qt.getTertiaryImageMarginHorizontal()},t.prototype.getImageMarginVertial=function(){return this.qt.getTertiaryImageMarginVertial()},t.prototype.getImageTintColor=function(t){return this.qt.getTertiaryImageTintColor(t)},t.prototype.getImageTintAlpha=function(t){return this.qt.getTertiaryImageTintAlpha(t)},t.prototype.getImageSource=function(t){return this.qt.getTertiaryImageSource(t)},t}(),ts={LEFT:0,CENTER:1,RIGHT:2},ns={TOP:0,MIDDLE:1,BOTTOM:2},is={TEXT:0,PADDING:1,BORDER:2},rs=function(){function n(n,i,r,e){var u=this;this.p=n,this.qt=i,this.fs=r,this.bt=null,this.St=function(t,n){var i,r,e,u=null==n?void 0:n.align;return{with:Oi(null!==(i=null==u?void 0:u.with)&&void 0!==i?i:t.getImageAlignWith(),is),vertical:Oi(null!==(r=null==u?void 0:u.vertical)&&void 0!==r?r:t.getImageAlignVertical(),ns),horizontal:Oi(null!==(e=null==u?void 0:u.horizontal)&&void 0!==e?e:t.getImageAlignHorizontal(),ts)}}(i,e),this.Ur=function(t,n){var i,r,e=null==n?void 0:n.margin;return{vertical:null!==(i=null==e?void 0:e.vertical)&&void 0!==i?i:t.getImageMarginVertial(),horizontal:null!==(r=null==e?void 0:e.horizontal)&&void 0!==r?r:t.getImageMarginHorizontal()}}(i,e),this.ls=null==e?void 0:e.tint,this.vs=new t.Rectangle,this.bs=null==e?void 0:e.source,this.gs=null,this.ws=function(){u.onUpdate()}}return Object.defineProperty(n.prototype,"image",{get:function(){return this.bt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"margin",{get:function(){return this.Ur},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bound",{get:function(){return this.vs},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"source",{get:function(){return this.bs},set:function(t){this.bs!==t&&(this.bs=t,this.onUpdate())},enumerable:!1,configurable:!0}),n.prototype.computeSource=function(){var t=this.bs;if(void 0!==t){if(!ot(t))return t;var n=t(this.p.state);if(void 0!==n)return n}return this.qt.getImageSource(this.p.state)},n.prototype.onStateChange=function(t,n){this.updateTint()},n.prototype.updateBound=function(){var t=this.vs,n=this.bt;if(null!=n){n.updateTransform(),n.getLocalBounds(t);var i=t.left,r=t.top,e=t.right,u=t.bottom,s=n.localTransform,h=s.a,o=s.b,a=s.c,c=s.d,f=h*i+a*r,l=o*i+c*r,v=h*e+a*r,b=o*e+c*r,d=h*e+a*u,g=o*e+c*u,m=h*i+a*u,w=o*i+c*u,p=Math.min(f,v,d,m),O=Math.max(f,v,d,m),D=Math.min(l,b,g,w),E=Math.max(l,b,g,w);t.x=p+s.tx,t.y=D+s.ty,t.width=O-p,t.height=E-D}else t.x=0,t.y=0,t.width=0,t.height=0},n.prototype.isTintAware=function(t){return null!=t&&"tint"in t},n.prototype.toTintColor=function(t,n){var i=this.ls;if(i){var r=i.color;if(void 0!==r){if(!ot(r))return r;var e=r(n);if(void 0!==e)return e}}return t.getImageTintColor(n)},n.prototype.toTintAlpha=function(t,n){var i=this.ls;if(i){var r=i.alpha;if(void 0!==r){if(!ot(r))return r;var e=r(n);if(void 0!==e)return e}}return t.getImageTintAlpha(n)},n.prototype.updateTint=function(){var t=this.bt;if(t&&this.isTintAware(t)){var n=this.qt,i=this.p.state,r=this.toTintColor(n,i);if(null!=r){var e=!1;t.tint!==r&&(t.tint=r,e=!0);var u=this.toTintAlpha(n,i);return t.alpha!==u&&(t.alpha=u,e=!0),e}}return!1},n.prototype.updateSource=function(){var n=this.computeSource(),i=this.gs;if(n!==i){this.gs=n;var r,e=this.p,u=this.bt,s=this.ws;if(n instanceof t.Texture)if(i instanceof t.Texture)i.off("update",s),u instanceof t.Sprite&&(u.texture=n,n.on("update",s));else{null!=u&&e.removeChild(u);var h=new t.Sprite(n);(r=e.getOverflowMask())&&(h.mask=r),n.on("update",s),e.addChild(h),this.bt=h}else i instanceof t.Texture?(i.off("update",s),null!=u&&(e.removeChild(u),u.destroy())):null!=u&&e.removeChild(u),null!=n&&((r=e.getOverflowMask())&&(n.mask=r),e.addChild(n)),this.bt=n;return!0}return!1},n.prototype.isRefitable=function(t){return null!=t&&t===this.bt},n.prototype.destroy=function(){var n=this.bt;if(n){this.bt=null;var i=this.gs;i instanceof t.Texture&&(i.off("update",this.ws,this),n.destroy())}},n.prototype.onUpdate=function(){this.p.toDirty(),rt.update(this.p)},n}(),es=function(){function t(){this.ps=[],this.T=0,this.Ur=0}return t.prototype.clear=function(){this.ps.length=0,this.T=0,this.Ur=0,this.Os=void 0},t.prototype.add=function(t,n,i){this.ps.push(t),this.T+=i+n,this.Ur=i},t.prototype.set=function(t){this.Os=t},Object.defineProperty(t.prototype,"size",{get:function(){return this.T-(null===this.Os?this.Ur:0)},enumerable:!1,configurable:!0}),t}(),us=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.execute=function(t,n){var i=this.ps,r=n-t;if(void 0!==this.Os)for(var e=0,u=0,s=i.length;u<s;++u)r-=e+(h=i[u]).bound.height,h.image.y=r,e=h.margin.horizontal;else for(u=0,s=i.length;u<s;++u){var h;r-=(h=i[u]).margin.horizontal+h.bound.height,h.image.y=r}},n}(es),ss=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.add=function(t,n,i){this.ps.push(t),this.T=Math.max(this.size,n)},n.prototype.execute=function(t,n,i){for(var r=t+.5*(i-t-n),e=this.ps,u=0,s=e.length;u<s;++u){var h=e[u];h.image.x=r-.5*h.bound.width}},n}(es),hs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.execute=function(t){var n=this.ps,i=t;if(void 0!==this.Os)for(var r=0,e=n.length;r<e;++r)(u=n[r]).image.x=i,i+=u.bound.width+u.margin.horizontal;else for(r=0,e=n.length;r<e;++r){var u;i+=(u=n[r]).margin.horizontal,u.image.x=i,i+=u.bound.width}},n}(es),os=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.add=function(t,n,i){this.ps.push(t),this.T=Math.max(this.size,n)},n.prototype.execute=function(t,n,i){for(var r=t+.5*(i-t-n),e=this.ps,u=0,s=e.length;u<s;++u){var h=e[u];h.image.y=r-.5*h.bound.height}},n}(es),as=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.execute=function(t,n){var i=this.ps,r=n-t;if(void 0!==this.Os)for(var e=0,u=0,s=i.length;u<s;++u)r-=e+(h=i[u]).bound.width,h.image.x=r,e=h.margin.horizontal;else for(u=0,s=i.length;u<s;++u){var h;r-=(h=i[u]).margin.horizontal+h.bound.width,h.image.x=r}},n}(es),cs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.execute=function(t){var n=this.ps,i=t;if(void 0!==this.Os)for(var r=0,e=0,u=n.length;e<u;++e)(s=n[e]).image.y=r+i,i+=s.bound.height,r=s.margin.vertical;else for(e=0,u=n.length;e<u;++e){var s;i+=(s=n[e]).margin.vertical,s.image.y=i,i+=s.bound.height}},n}(es),fs=function(){function t(){this.left=new hs,this.center=new ss,this.right=new as,this.top=new cs,this.middle=new os,this.bottom=new us}return t.prototype.clear=function(){this.left.clear(),this.center.clear(),this.right.clear(),this.top.clear(),this.middle.clear(),this.bottom.clear(),this.text=void 0},t.prototype.add=function(t){if(null!=t.image){var n=t.bound,i=n.width,r=n.height,e=t.margin,u=e.horizontal,s=e.vertical,h=t.align;switch(h.horizontal){case ts.LEFT:this.left.add(t,i,u);break;case ts.CENTER:this.center.add(t,i,u);break;case ts.RIGHT:this.right.add(t,i,u)}switch(h.vertical){case ns.TOP:this.top.add(t,r,s);break;case ns.MIDDLE:this.middle.add(t,r,s);break;case ns.BOTTOM:this.bottom.add(t,r,s)}}},t.prototype.set=function(t){this.left.set(t),this.center.set(t),this.right.set(t),this.top.set(t),this.middle.set(t),this.bottom.set(t),this.text=t},Object.defineProperty(t.prototype,"width",{get:function(){var t=this.text,n=this.left.size,i=this.center.size,r=this.right.size;return void 0!==t?null!==t?Math.max(n+t.width+r,i):Math.max(n+r,i):Math.max(n,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.text,n=this.top.size,i=this.middle.size,r=this.bottom.size;return void 0!==t?null!==t?Math.max(n+t.height+r,i):Math.max(n+r,i):Math.max(n,r,i)},enumerable:!1,configurable:!0}),t.prototype.execute=function(t,n,i,r,e,u,s){var h=this.left,o=this.center,a=this.right,c=this.top,f=this.middle,l=this.bottom,v=this.text;if(void 0!==v){var b=h.size,d=a.size,g=c.size,m=l.size,w=0,p=0,O=0;switch(null!=v&&(p=v.width,O=v.height),e.horizontal){case ts.LEFT:w=t+b;break;case ts.CENTER:w=t+.5*(u-t-i-(b+p+d))+b;break;case ts.RIGHT:w=u-i-d-p}var D=0;switch(e.vertical){case ns.TOP:D=n+g;break;case ns.MIDDLE:D=n+.5*(s-n-r-(g+O+m))+g;break;case ns.BOTTOM:D=s-r-m-O}null!=v&&(v.position.set(w,D),v.setClippingDelta(b+d,g+m)),h.execute(w-b),o.execute(0,0,2*w+p),a.execute(0,w+p+d),c.execute(D-g),f.execute(0,0,2*D+O),l.execute(0,D+O+m)}else h.execute(t),o.execute(t,i,u),a.execute(i,u),c.execute(n),f.execute(n,r,s),l.execute(r,s)},t}(),ls=function(){function t(){this.text=new fs,this.padding=new fs,this.border=new fs}return t.prototype.clear=function(){this.text.clear(),this.padding.clear(),this.border.clear()},t.prototype.add=function(t){if(t.image)switch(t.align.with){case is.TEXT:this.text.add(t);break;case is.PADDING:this.padding.add(t);break;case is.BORDER:this.border.add(t)}},t.prototype.set=function(t){this.text.set(t)},t.prototype.execute=function(t,n,i,r){var e=t.getLeft(),u=t.getTop(),s=t.getRight(),h=t.getBottom();null==i&&(i=e+this.width+s),null==r&&(r=u+this.height+h),this.border.execute(0,0,0,0,n,i,r),this.padding.execute(e,u,s,h,n,i,r),this.text.execute(e,u,s,h,n,i,r)},Object.defineProperty(t.prototype,"width",{get:function(){return Math.max(this.border.width,this.padding.width,this.text.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.max(this.border.height,this.padding.height,this.text.height)},enumerable:!1,configurable:!0}),t}(),vs=function(t){function n(n){var i=t.call(this)||this;return i.parent=n,i}return B(n,t),n.prototype.render=function(n){this.updateTransform(),t.prototype.render.call(this,n)},n.prototype.onReflow=function(t,n,i){this.clear(),this.beginFill(16777215,1),this.drawRect(0,0,n,i),this.endFill()},n}(t.Graphics),bs=function(){function t(t,n,i,r){this.x=t,this.y=n,this.character=i,this.wrappable=r}return t.prototype.set=function(t,n,i,r){this.x=t,this.y=n,this.character=i,this.wrappable=r},t}(),ds=function(){function t(){this.count=0,this.countPerLine=0,this.width=0,this.height=0,this.characters=[],this.clipped=!1,this.x=0,this.y=0}return t.prototype.start=function(t,n){this.count=0,this.countPerLine=0,this.width=0,this.height=0,this.clipped=!1,this.x=0,this.y=.5*(t-n)},t.prototype.isPushable=function(t,n){return!(t<this.x+n.advance&&!(n.type&Me.SPACE))},t.prototype.isPushableAtNewLine=function(t,n,i){return this.y+1.5*n+.5*i<=t},t.prototype.push=function(t,n){var i=this.x;this.x+=t.advance;var r=this.y,e=this.count,u=this.characters;e<u.length?u[e].set(i,r,t,n):u.push(new bs(i,r,t,n)),this.count+=1,this.countPerLine+=1},t.prototype.newLine=function(t){this.width=Math.max(this.width,this.x),this.x=0,this.y+=t,this.countPerLine=0},t.prototype.wordWrap=function(t){var n=this.countPerLine,i=this.characters;if(0<n){for(var r=this.count,e=r-1,u=r-n;u<e;--e){var s=i[e];if(s.wrappable){var h=s.character.advance,o=s.y+t;s.x=0,s.y=o;for(var a=e+1;a<r;++a)(s=i[a]).x=h,s.y=o,h+=s.character.advance;return this.x=h,this.y=o,this.countPerLine=r-e,!0}}var c=i[r-1];return c.x=0,c.y=c.y+t,this.x=c.character.advance,this.y=c.y,this.countPerLine=1,!1}return!1},t.prototype.pop=function(){var t=this.countPerLine,n=this.characters;if(0<t){var i=n[this.count-1];return this.x-=i.character.advance,this.count-=1,this.countPerLine-=1,!0}return!1},t.prototype.end=function(t,n){this.newLine(t),this.y-=.5*(t-n),this.height=this.y},t}(),gs={NONE:0,NORMAL:1,BREAK_ALL:2},ms="\n",ws=function(){function t(){}return t.measure=function(n,i,r){var e=t.RESULT||new ds;if(t.RESULT=e,null!=i){var u=b.from(n),s=i.font.height,h=r.lineHeight,o=r.enable,a=r.width,c=r.height,f=r.wordWrap;switch(e.start(h,s),f){case gs.BREAK_ALL:o?this.measure1(u,a,c,s,h,i,e):this.measure2(u,a,h,i,e);break;case gs.NORMAL:var l=this.newLineBreaker(n);l?o?this.measure1a(l,u,a,c,s,h,i,e):this.measure2a(l,u,a,h,i,e):o?this.measure1b(u,a,c,s,h,i,e):this.measure2b(u,a,h,i,e);break;default:o?this.measure3(u,a,h,i,e):this.measure4(u,h,i,e)}e.end(h,s)}else e.start(0,0),e.end(0,0);return e},t.measure1a=function(t,n,i,r,e,u,s,h){for(var o=t.next();n.hasNext();){var a=n.position,c=n.next();if(c===ms)h.newLine(u);else{var f=s.get(c);if(null==f)continue;o=this.advance(a,o,t);var l=this.isWrappable1(a,o);h.isPushable(i,f)?h.push(f,l):h.isPushableAtNewLine(r,u,e)?(h.push(f,l),h.wordWrap(u)):this.measure5(n,i,u,s,h,!0)}}},t.measure1b=function(t,n,i,r,e,u,s){for(;t.hasNext();){var h=t.next();if(h===ms)s.newLine(e);else{var o=u.get(h);if(null==o)continue;var a=this.isWrappable2(s,o);s.isPushable(n,o)?s.push(o,a):s.isPushableAtNewLine(i,e,r)?(s.push(o,a),s.wordWrap(e)):this.measure5(t,n,e,u,s,!0)}}},t.measure1=function(t,n,i,r,e,u,s){for(;t.hasNext();){var h=t.next();if(h===ms)s.newLine(e);else{var o=u.get(h);if(null==o)continue;s.isPushable(n,o)?s.push(o,!0):s.isPushableAtNewLine(i,e,r)?(s.newLine(e),s.push(o,!0)):this.measure5(t,n,e,u,s,!0)}}},t.measure2a=function(t,n,i,r,e,u){for(var s=t.next();n.hasNext();){var h=n.position,o=n.next();if(o===ms)u.newLine(r);else{var a=e.get(o);if(null==a)continue;s=this.advance(h,s,t);var c=this.isWrappable1(h,s);u.isPushable(i,a)?u.push(a,c):(u.push(a,c),u.wordWrap(r))}}},t.measure2b=function(t,n,i,r,e){for(;t.hasNext();){var u=t.next();if(u===ms)e.newLine(i);else{var s=r.get(u);if(null==s)continue;var h=this.isWrappable2(e,s);e.isPushable(n,s)?e.push(s,h):(e.push(s,h),e.wordWrap(i))}}},t.measure2=function(t,n,i,r,e){for(;t.hasNext();){var u=t.next();if(u===ms)e.newLine(i);else{var s=r.get(u);if(null==s)continue;e.isPushable(n,s)||e.newLine(i),e.push(s,!1)}}},t.measure3=function(t,n,i,r,e){for(;t.hasNext();){var u=t.next();if(u===ms)e.newLine(i);else{var s=r.get(u);if(null==s)continue;e.isPushable(n,s)?e.push(s,!1):this.measure5(t,n,i,r,e,!1)}}},t.measure4=function(t,n,i,r){for(;t.hasNext();){var e=t.next();if(e===ms)r.newLine(n);else{var u=i.get(e);if(null==u)continue;r.push(u,!1)}}},t.measure5=function(t,n,i,r,e,u){e.clipped=!0;var s=r.get("...");if(null!=s){for(;!e.isPushable(n,s)&&e.pop(););e.isPushable(n,s)&&e.push(s,!1)}if(u)t.close();else for(;t.hasNext();)if(t.next()===ms){e.newLine(i);break}},t.isWrappable2=function(t,n){if(t.countPerLine<=0)return!1;var i=t.characters[t.count-1].character.type,r=n.type;return i&Me.SPACE?!(r&Me.SPACE||i&Me.NON_BREAKING):!(r&Me.SPACE||i&Me.NON_BREAKING&&r&Me.NON_BREAKING)},t.advance=function(t,n,i){return n.done||t<=n.value.end?n:n=i.next()},t.isWrappable1=function(t,n){if(n.done)return!1;var i=n.value;return i.start===t||i.end===t},t.newLineBreaker=function(t){return"css-line-break"in window?window["css-line-break"].LineBreaker(t,{lineBreak:"strict",wordBreak:"normal"}):null},t.RESULT=null,t}(),ps=function(t){function n(){var n=t.call(this,new Float32Array(64),new Float32Array(64),new Uint16Array(48))||this;return n.width=0,n.height=0,n.clipped=!1,n}return B(n,t),n.prototype.update=function(t,n,i){var r=this.getBuffer("aVertexPosition"),e=this.getBuffer("aTextureCoord"),u=this.getIndex(),s=ws.measure(t,n,i),h=Math.ceil(s.count/8)<<3,o=h<<3;r.data.length<o&&(r.data=new Float32Array(o),e.data=new Float32Array(o));var a=6*h;u.data.length<a&&(u.data=new Uint16Array(a));var c=r.data,f=e.data,l=u.data;if(null!=n){for(var v=s.count,b=s.characters,d=0;d<v;++d){var g=b[d],m=g.x,w=g.y,p=g.character,O=n.width,D=n.height;this.writeCharacter(c,f,l,d,m,w,p,O,D)}d=v;for(var E=c.length>>3;d<E;++d)this.writeCharacterEmpty(c,f,l,d);this.width=s.width,this.height=s.height,this.clipped=s.clipped}else{for(d=0,E=c.length>>3;d<E;++d)this.writeCharacterEmpty(c,f,l,d);this.width=0,this.height=0,this.clipped=!1}r.update(),e.update(),u.update()},n.prototype.writeCharacter=function(t,n,i,r,e,u,s,h,o){var a=s.x,c=s.y,f=s.width,l=s.height,v=e+(a-s.origin.x),b=u,d=v+f,g=b+l,m=r<<3;t[m+0]=v,t[m+1]=b,t[m+2]=d,t[m+3]=b,t[m+4]=d,t[m+5]=g,t[m+6]=v,t[m+7]=g;var w=a/h,p=c/o,O=(a+f)/h,D=(c+l)/o;n[m+0]=w,n[m+1]=p,n[m+2]=O,n[m+3]=p,n[m+4]=O,n[m+5]=D,n[m+6]=w,n[m+7]=D;var E=6*r,M=r<<2;i[E+0]=M+0,i[E+1]=M+1,i[E+2]=M+3,i[E+3]=M+1,i[E+4]=M+2,i[E+5]=M+3},n.prototype.writeCharacterEmpty=function(t,n,i,r){var e=r<<3;t[e+0]=0,t[e+1]=0,t[e+2]=0,t[e+3]=0,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=0,n[e+0]=0,n[e+1]=0,n[e+2]=0,n[e+3]=0,n[e+4]=0,n[e+5]=0,n[e+6]=0,n[e+7]=0;var u=6*r,s=r<<2;i[u+0]=s+0,i[u+1]=s+1,i[u+2]=s+3,i[u+3]=s+1,i[u+4]=s+2,i[u+5]=s+3},n}(t.MeshGeometry),Os=function(){function t(t,n){var i,r,e,u,s,h,o,a,c,f;this.R=0,this.Ds=-1;var l=this.getDefaultOptions();t?(this.St=null!==(i=t.align)&&void 0!==i?i:l.align,this.Es=null!==(r=t.fontFamily)&&void 0!==r?r:l.fontFamily,this.Ms=null!==(e=t.fontSize)&&void 0!==e?e:l.fontSize,this.Ss=null!==(u=t.fontStyle)&&void 0!==u?u:l.fontStyle,this.js=null!==(s=t.fontVariant)&&void 0!==s?s:l.fontVariant,this.Ts=null!==(h=t.fontWeight)&&void 0!==h?h:l.fontWeight,this.C=null!==(o=t.fill)&&void 0!==o?o:l.fill,this.Yt=null!==(a=t.clipping)&&void 0!==a?a:l.clipping,this.Ns=Oi(null!==(c=t.wordWrap)&&void 0!==c?c:l.wordWrap,gs),this.Is=null!==(f=t.lineHeight)&&void 0!==f?f:l.lineHeight):(this.St=l.align,this.Es=l.fontFamily,this.Ms=l.fontSize,this.Ss=l.fontStyle,this.js=l.fontVariant,this.Ts=l.fontWeight,this.C=l.fill,this.Yt=l.clipping,this.Ns=Oi(l.wordWrap,gs),this.Is=l.lineHeight),this.Cs=-1,this.As="",this.Rs="",this.ys=0,this.Z=n}return t.prototype.getDefaultOptions=function(){var n=t.DEFAULT_OPTIONS;return null==n&&(n=this.newDefaultOptions(),t.DEFAULT_OPTIONS=n),n},t.prototype.newDefaultOptions=function(){var t=Y.getInstance().get("DBase");return{align:"left",fontFamily:t.getFontFamilly(),fontSize:t.getFontSize(),fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fill:t.getColor(new ct),clipping:!0,wordWrap:gs.NONE,lineHeight:t.getLineHeight()}},Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"idApproved",{get:function(){return this.Ds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontId",{get:function(){return this.update(),this.As},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontIdApproved",{get:function(){return this.Rs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.onChange=function(){this.R+=1,this.Z()},Object.defineProperty(t.prototype,"fillApproved",{get:function(){return this.ys},enumerable:!1,configurable:!0}),t.prototype.approve=function(){this.update(),this.Ds=this.R,this.Rs=this.As,this.ys=this.C},Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.Es},set:function(t){this.Es!==t&&(this.Es=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.Ms},set:function(t){this.Ms!==t&&(this.Ms=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this.Ss},set:function(t){this.Ss!==t&&(this.Ss=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this.js},set:function(t){this.js!==t&&(this.js=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.Ts},set:function(t){this.Ts!==t&&(this.Ts=t,this.onChange())},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.Cs!==this.R&&(this.Cs=this.R,this.As=this.newFontId())},t.prototype.newFontId=function(){return"".concat(this.Ss," ").concat(this.js," ").concat(this.Ts," ").concat(this.Ms,"px ").concat(this.Es)},Object.defineProperty(t.prototype,"clipping",{get:function(){return this.Yt},set:function(t){this.Yt!==t&&(this.Yt=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this.Ns},set:function(t){this.Ns!==t&&(this.Ns=t,this.onChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this.Is},set:function(t){this.Is!==t&&(this.Is=t,this.onChange())},enumerable:!1,configurable:!0}),t}(),Ds=function(n){function i(i,r){var e=n.call(this,new ps,new t.MeshMaterial(t.Texture.EMPTY))||this;return e.B=new Os(r,(function(){e.fn=!0,e.Ls=!0,e.tu=null,e.ks()})),e.Os=i,e.xs="",e.fn=!0,e.Ls=!0,e.tu=null,e.Bs=0,e.Mt=0,e.hn=0,e.Yt={enable:!1,wordWrap:gs.NONE,width:0,height:0,lineHeight:0,delta:{width:0,height:0}},e.ks(),e}return B(i,n),i.prototype.ks=function(){var t=rt.getLayer(this);if(t){var n=this.B;if(this.fn){this.fn=!1;var i=this.Os,r=this.xs;this.xs=i;var e=n.fontId,u=n.fontIdApproved,s=n.fontSize,h=n.fill,o=n.fillApproved;n.approve();var a=t.getDynamicFontAtlases();i===r&&e===u&&h===o||(a.add(e,s,h,i),a.remove(u,o,r))}}},Object.defineProperty(i.prototype,"text",{get:function(){return this.Os},set:function(t){this.Os!==t&&(this.Os=t,this.fn=!0,this.Ls=!0,this.ks())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.update(),Math.abs(this.scale.x)*this.geometry.width},set:function(t){this.update();var n=this.geometry.width;if(1e-4<n){var i=t/n;this.scale.x=0<=this.scale.x?+i:-i}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.update(),Math.abs(this.scale.y)*this.geometry.height},set:function(t){this.update();var n=this.geometry.height;if(1e-4<n){var i=t/n;this.scale.y=0<=this.scale.y?+i:-i}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clipped",{get:function(){return this.geometry.clipped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this.B},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.ks();var t=this.tu;if(null==t){var n=rt.getLayer(this);if(n){var i=this.B;null!=(t=n.getDynamicFontAtlases().get(i.fontId,i.fill))&&(this.Bs=t.getRevisionUpdate(),this.tu=t,this.texture=t.texture,this.Ls=!0)}}else{var r=t.getRevisionUpdate();r!==this.Bs&&(this.Bs=r,this.Ls=!0)}var e=this.B,u=this.Yt;this.updateClipping(e,u)&&(this.Ls=!0),this.Ls&&(this.Ls=!1,this.geometry.update(this.Os,t,u))},i.prototype.updateClipping=function(t,n){var i=!1,r=t.clipping;n.enable!==r&&(n.enable=r,i=!0);var e=t.wordWrap;n.wordWrap!==e&&(n.wordWrap=e,i=!0);var u=t.lineHeight;if(n.lineHeight!==u&&(n.lineHeight=u,i=!0),r||e){var s=this.parent;if(s instanceof Zi){var h=s.width-s.padding.getLeft()-s.padding.getRight()-n.delta.width;n.width!==h&&(n.width=h,i=!0);var o=s.height-s.padding.getTop()-s.padding.getBottom()-n.delta.height;n.height!==o&&(n.height=o,i=!0)}}return i},i.prototype.setClippingDelta=function(t,n){var i=this.Yt.delta;i.width=t,i.height=n},i.prototype._calculateBounds=function(){this.update(),n.prototype._calculateBounds.call(this)},i.prototype._render=function(t){this.update(),n.prototype._render.call(this,t)},i}(t.Mesh),Es=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){var i,r,e,u;t.prototype.init.call(this,n);var s=this.theme;this._s=null!==(r=null===(i=null==n?void 0:n.text)||void 0===i?void 0:i.value)&&void 0!==r?r:s.newTextValue(),this.Ps=this.computeTextValue();var h=null==n?void 0:n.text;this.Fs=null==h?void 0:h.color,this.Us=null==h?void 0:h.alpha,this.Gs=function(t,n,i){var r,e,u,s,h,o,a,c,f,l,v=null===(r=null==n?void 0:n.text)||void 0===r?void 0:r.style;return null!=v?{fill:null!==(e=v.fill)&&void 0!==e?e:t.getColor(i),fontSize:null!==(u=v.fontSize)&&void 0!==u?u:t.getFontSize(),fontFamily:null!==(s=v.fontFamily)&&void 0!==s?s:t.getFontFamilly(),fontWeight:null!==(h=v.fontWeight)&&void 0!==h?h:t.getFontWeight(),fontStyle:null!==(o=v.fontStyle)&&void 0!==o?o:t.getFontStyle(),fontVariant:null!==(a=v.fontVariant)&&void 0!==a?a:t.getFontVariant(),clipping:null!==(c=v.clipping)&&void 0!==c?c:t.getTextStyleClipping(),wordWrap:null!==(f=v.wordWrap)&&void 0!==f?f:t.getTextStyleWordWrap(),lineHeight:null!==(l=v.lineHeight)&&void 0!==l?l:t.getLineHeight()}:{fill:t.getColor(i),fontSize:t.getFontSize(),fontFamily:t.getFontFamilly(),fontWeight:t.getFontWeight(),fontStyle:t.getFontStyle(),fontVariant:t.getFontVariant(),clipping:t.getTextStyleClipping(),wordWrap:t.getTextStyleWordWrap(),lineHeight:t.getLineHeight()}}(s,n,this.state),this.fs=function(t,n){var i,r,e,u=null===(i=null==n?void 0:n.text)||void 0===i?void 0:i.align;return{vertical:Oi(null!==(r=null==u?void 0:u.vertical)&&void 0!==r?r:t.getTextAlignVertical(),ns),horizontal:Oi(null!==(e=null==u?void 0:u.horizontal)&&void 0!==e?e:t.getTextAlignHorizontal(),ts)}}(s,n),this.zs=null!==(e=null==h?void 0:h.formatter)&&void 0!==e?e:s.getTextFormatter(),this.Hs=!0,this.Vs=null!==(u=null==n?void 0:n.mask)&&void 0!==u?u:s.isOverflowMaskEnabled(),this.onTextChange(),this.createOrUpdateText()},Object.defineProperty(n.prototype,"text",{get:function(){return this._s},set:function(t){this._s!==t&&(this._s=t,this.updateTextValue())},enumerable:!1,configurable:!0}),n.prototype.onTextChange=function(){},n.prototype.computeTextValue=function(){var t=this._s;if(void 0!==t){if(!ot(t))return t;var n=t(this.state);if(void 0!==n)return n}return this.theme.getTextValue(this.state)},n.prototype.createOrUpdateText=function(){var t=this.Ps;if(void 0!==t){var n=this.zs(t,this),i=this.Os;if(null==i){if(0<n.length){var r=this.createText(n);r.visible=this.Hs,this.Os=r,this.addChild(r),this.updateTextPosition(r);var e=this.getOverflowMask();e&&(r.mask=e),this.toDirty(),rt.update(this)}}else i.text=n,this.toDirty(),rt.update(this)}},n.prototype.createText=function(t){return new Ds(t,this.Gs)},n.prototype.getOverflowMask=function(){return this.Vs?(null==this.ir&&(this.ir=new vs(this),this.Fn.add(this.ir),this.toDirty()),this.ir):null},n.prototype.updateTextPosition=function(t){var n=this.fs,i=this.Gn,r=this.kn,e=0,u=i.getLeft(),s=n.horizontal;if(r.width.isOn||s===ts.LEFT)e=u;else{var h=this.width,o=t.width,a=i.getRight();e=s===ts.CENTER?u+.5*(h-u-a-o):h-o-a}var c=0,f=i.getTop(),l=n.vertical;if(r.height.isOn||l===ns.TOP)c=f;else{var v=this.height,b=t.height,d=i.getBottom();c=l===ns.MIDDLE?f+.5*(v-f-d-b):v-b-d}t.position.set(e,c)},n.prototype.getTextColor=function(t,n){var i=this.Fs;if(void 0!==i){if(!ot(i))return i;var r=i(n);if(void 0!==r)return r}return t.getColor(n)},n.prototype.getTextAlpha=function(t,n){var i=this.Us;if(void 0!==i){if(!ot(i))return i;var r=i(n);if(void 0!==r)return r}return t.getAlpha(n)},n.prototype.updateTextColor=function(t){var n=this.theme,i=this.state;t.style.fill=this.getTextColor(n,i),t.alpha=this.getTextAlpha(n,i)},n.prototype.updateTextValue=function(){var t=this.computeTextValue();this.Ps!==t&&(this.Ps=t,this.onTextChange(),this.createOrUpdateText())},n.prototype.updateText=function(){var t=this.Os;t&&(this.updateTextValue(),this.updateTextPosition(t),this.updateTextColor(t))},n.prototype.showText=function(){var t=this.Os;t&&(t.visible=!0),this.Hs=!0},n.prototype.hideText=function(){var t=this.Os;t&&(t.visible=!1),this.Hs=!1},n.prototype.onReflow=function(){t.prototype.onReflow.call(this),this.updateText()},n.prototype.isRefitable=function(n){return t.prototype.isRefitable.call(this,n)||null!=n&&n===this.Os},n.prototype.applyTitle=function(){var n=this.Os;if(this.zn.length<=0&&n&&"clipped"in n&&n.clipped){var i=rt.getLayer(this);i&&(i.view.title=n.text)}else t.prototype.applyTitle.call(this)},n.prototype.getType=function(){return"DTextBase"},n.prototype.destroy=function(){var n=this.Os;n&&(this.Os=null,n.destroy());var i=this.ir;i&&(this.ir=null,i.destroy()),t.prototype.destroy.call(this)},n}(Zi),Ms=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){this.Ws=this.newImages(this.theme,n),t.prototype.init.call(this,n)},n.prototype.newImages=function(t,n){var i=[];return i.push(this.newImage(t,this.toImageOptions(t,null==n?void 0:n.image))),function(t){return!!t.getSecondaryImageSource}(t)&&i.push(this.newImage(new Qu(t))),function(t){return!!t.getTertiaryImageSource}(t)&&i.push(this.newImage(new $u(t))),i},n.prototype.toImageOptions=function(t,n){return n},n.prototype.newImage=function(t,n){return new rs(this,t,this.fs,n)},Object.defineProperty(n.prototype,"image",{get:function(){return this.Ws[0].source},set:function(t){var n=this.Ws[0];n.source=t,n.updateSource()},enumerable:!1,configurable:!0}),n.prototype.onStateChange=function(n,i){t.prototype.onStateChange.call(this,n,i);for(var r=this.Ws,e=0,u=r.length;e<u;++e)r[e].onStateChange(n,i)},n.prototype.updateText=function(){this.updateTextValue(),this.updateTextAndImage()},n.prototype.updateTextAndImage=function(){for(var t,i=this.Ws,r=null!==(t=n.LAYOUTER)&&void 0!==t?t:n.LAYOUTER=new ls,e=0,u=i.length;e<u;++e){var s=i[e];s.updateSource(),s.updateTint(),s.updateBound(),r.add(s)}var h=this.Os;null!=h?(this.updateTextColor(h),r.set(h)):r.set(null);var o=this.kn;r.execute(this.Gn,this.fs,o.width.isOn?null:this.width,o.height.isOn?null:this.height),r.clear()},n.prototype.isRefitable=function(n){if(t.prototype.isRefitable.call(this,n))return!0;for(var i=this.Ws,r=0,e=i.length;r<e;++r)if(i[r].isRefitable(n))return!0;return!1},n.prototype.getType=function(){return"DImageBase"},n.prototype.destroy=function(){for(var n=this.Ws,i=0,r=n.length;i<r;++i)n[i].destroy();t.prototype.destroy.call(this)},n}(Es),Ss=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){var i,r;t.prototype.init.call(this,n);var e=this.theme;this.Xs=null!==(i=null==n?void 0:n.toggle)&&void 0!==i?i:e.isToggle();var u=Oi(null!==(r=null==n?void 0:n.when)&&void 0!==r?r:e.getWhen(),qu);this.Ys=u,this.initOnClick(u,e,n),this.initOnPress(u,e,n);var s=null==n?void 0:n.group;s&&s.add(this)},n.prototype.onShortcut=function(n){t.prototype.onShortcut.call(this,n),this.onClick(n)},Object.defineProperty(n.prototype,"isToggle",{get:function(){return this.Xs},enumerable:!1,configurable:!0}),n.prototype.initOnClick=function(t,n,i){var r=this;Wi.onClick(this,(function(n){t===qu.CLICKED&&r.onClick(n)}))},n.prototype.initOnPress=function(t,n,i){var r=this,e=null,u=function(){r.state.isPressed=!1,null!=e&&(e.off(Wi.up,u),e.off(Wi.upoutside,u),e.off(Wi.cancel,u),e=null)};this.on(Wi.down,(function(){r.state.isPressed=!0;var t=rt.getLayer(r);t&&((e=t.renderer.plugins.interaction).on(Wi.up,u),e.on(Wi.upoutside,u),e.on(Wi.cancel,u))}))},n.prototype.getType=function(){return"DButton"},n.prototype.onClick=function(t){this.state.isActionable&&(this.isToggle?(this.onToggleStart(t),this.onToggleEnd(t)):this.onActivate(t))},n.prototype.onDblClick=function(n,i){return this.Ys===qu.DOUBLE_CLICKED&&this.onClick(n),t.prototype.onDblClick.call(this,n,i)},n.prototype.onActivate=function(t){this.emit("active",this)},n.prototype.onInactivate=function(t){this.emit("inactive",this)},n.prototype.toggle=function(){this.state.isActionable&&this.isToggle&&(this.onToggleStart(),this.onToggleEnd())},n.prototype.onToggleStart=function(t){this.state.isActive=!this.state.isActive},n.prototype.onToggleEnd=function(t){this.state.isActive?this.onActivate(t):this.onInactivate(t)},n.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.isToggle?this.onToggleStart(t):this.state.isPressed=!0)},n.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.isToggle?this.onToggleEnd(t):(this.state.isPressed&&this.onActivate(t),this.state.isPressed=!1))},n.prototype.onKeyDown=function(n){return Zt.isActivateKey(n)&&this.onActivateKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return Zt.isActivateKey(n)&&this.onActivateKeyUp(n),t.prototype.onKeyUp.call(this,n)},n.prototype.destroy=function(){var n,i;null===(i=null===(n=this.yn)||void 0===n?void 0:n.group)||void 0===i||i.remove(this),t.prototype.destroy.call(this)},n}(Ms),js=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButton"},n}(Ss),Ts=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButtonPrimary"},n}(js),Ns=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DLayoutHorizontal"},n}(Ku),Is=function(t){function n(n,i){var r=t.call(this,i)||this;r.p=n;var e=r.buttonOk,u=r.buttonCancel;return null==e&&null==u||(r.addChild(r.newButtonSpace()),u&&r.addChild(u),e&&r.addChild(e),r.addChild(r.newButtonSpace())),r}return B(n,t),Object.defineProperty(n.prototype,"buttonCancel",{get:function(){var t=this.Ks;return void 0===t&&(t=this.newButtonCancel(),this.Ks=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonCancel=function(){var t,n,i=this,r=null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.cancel;return void 0===r&&(r=this.theme.getButtonCancel()),null!=r?new Ts({text:{value:r},on:{active:function(){i.p.cancel()}}}):null},Object.defineProperty(n.prototype,"buttonOk",{get:function(){var t=this.Js;return void 0===t&&(t=this.newButtonOk(),this.Js=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonOk=function(){var t,n,i=this,r=null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.ok;return void 0===r&&(r=this.theme.getButtonOk()),null!=r?null!=this.buttonCancel?new js({text:{value:r},on:{active:function(){i.p.ok()}}}):new Ts({text:{value:r},on:{active:function(){i.p.ok()}}}):null},n.prototype.newButtonSpace=function(){return new Xu({weight:1})},n.prototype.getType=function(){return"DDialogLayeredFooter"},n}(Ns),Cs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButtonAmbient"},n}(js),As=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogLayeredHeaderButtonClose"},n}(Cs),Rs=function(t){function n(n,i){var r=t.call(this,i)||this;r.p=n;var e=r.buttonClose;return e&&(r.addChild(e),e.on("active",(function(){r.p.cancel()}))),r}return B(n,t),Object.defineProperty(n.prototype,"buttonClose",{get:function(){var t=this.Zs;return void 0===t&&(t=this.newButtonClose(),this.Zs=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonClose=function(){var t,n;return!1!==(null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.close)?new As:null},n.prototype.getType=function(){return"DDialogLayeredHeader"},n}(Ms),ys=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.addChild(this.layout)},Object.defineProperty(n.prototype,"layout",{get:function(){var t=this.qs;return null==t&&(t=this.newLayout(),this.qs=t),t},enumerable:!1,configurable:!0}),n.prototype.newLayout=function(){return new Ju(this.toLayoutOptions(this.theme,this.yn))},n.prototype.toLayoutOptions=function(t,n){var i,r,e=null!==(r=null!==(i=null==n?void 0:n.layout)&&void 0!==i?i:t.getLayout())&&void 0!==r?r:this.newLayoutOptions(t,n);return void 0===e.children&&(e.children=this.newLayoutChildren(t,n)),e},n.prototype.newLayoutOptions=function(t,n){return{width:"padding",height:"auto",margin:0}},n.prototype.newLayoutChildren=function(t,n){return[this.header,this.content,this.footer]},Object.defineProperty(n.prototype,"header",{get:function(){var t=this.Qs;return void 0===t&&(t=this.newHeader(),this.Qs=t),t},enumerable:!1,configurable:!0}),n.prototype.newHeader=function(){var t=this.toHeaderOptions(this.theme,this.yn);return null!==t?new Rs(this,t):null},n.prototype.toHeaderOptions=function(t,n){if(n){var i=n.header;if(void 0!==i)return i}return t.getHeader()},Object.defineProperty(n.prototype,"content",{get:function(){var t=this.$s;return null==t&&(t=this.newContent(),this.$s=t),t},enumerable:!1,configurable:!0}),n.prototype.newContent=function(){return new Zu(this.toContentOptions(this.theme,this.yn))},n.prototype.toContentOptions=function(t,n){var i,r,e=null!==(r=null!==(i=null==n?void 0:n.content)&&void 0!==i?i:t.getContent())&&void 0!==r?r:{};return void 0===e.children&&(e.children=this.newContentChildren(t,n)),e},n.prototype.newContentChildren=function(t,n){return[]},Object.defineProperty(n.prototype,"footer",{get:function(){var t=this.th;return void 0===t&&(t=this.newFooter(),this.th=t),t},enumerable:!1,configurable:!0}),n.prototype.newFooter=function(){var t=this.toFooterOptions(this.theme,this.yn);return null!==t?new Is(this,t):null},n.prototype.toFooterOptions=function(t,n){if(n){var i=n.footer;if(void 0!==i)return i}return t.getFooter()},n.prototype.findFirstFocusable=function(t){return t.find(this.content,!1,!0,!0)},n.prototype.ok=function(){this.onOk(this.getResolvedValue())},n.prototype.onOk=function(t){this.doResolve(t),this.emit("ok",t,this)},n.prototype.cancel=function(){this.onCancel(this.getRejectReason())},n.prototype.onCancel=function(t){this.doReject(t),this.emit("cancel",t,this)},n.prototype.getRejectReason=function(){},n.prototype.getType=function(){return"DDialogLayered"},n}(Vu),Ls=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.inputLayout),r},n.prototype.toInputMargin=function(t,n){var i,r;return null!==(r=null===(i=null==n?void 0:n.input)||void 0===i?void 0:i.margin)&&void 0!==r?r:t.getInputMargin()},Object.defineProperty(n.prototype,"inputLayout",{get:function(){var t=this.nh;return null==t&&(t=this.newInputLayout(),this.nh=t),t},enumerable:!1,configurable:!0}),n.prototype.newInputLayout=function(){var t=this.toInputMargin(this.theme,this.yn);return new Ns({width:"padding",height:"auto",margin:0,children:[new Xu({width:t}),this.input,new Xu({width:t})]})},Object.defineProperty(n.prototype,"input",{get:function(){var t=this.ih;if(null==t){var n=this.yn;t=this.newInput(null==n?void 0:n.input),this.ih=t}return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.input.value},set:function(t){this.input.value=t},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.input.value},n.prototype.getType=function(){return"DDialogInput"},n}(ys),ks=function(t){function n(n){var i=t.call(this)||this;i.rh=[],i.eh=null,i.uh=function(t){i.active=t};var r=null==n?void 0:n.on;if(null!=r)for(var e in r){var u=r[e];u&&i.on(e,u)}return i.emit("init",i),i}return B(n,t),n.prototype.add=function(t){if(this.rh.indexOf(t)<0){this.rh.push(t);var n=this.Ju;null!=n&&(t.state.isEnabled=n),t.on("active",this.uh),t.state.isActive&&(this.active=t)}},Object.defineProperty(n.prototype,"active",{get:function(){return this.eh},set:function(t){if((null==t||t.isToggle)&&this.eh!==t){var n=this.eh;this.eh=null;for(var i=this.rh,r=0,e=i.length;r<e;++r){var u=i[r];u!==t&&u.isToggle&&u.state.isActive&&u.toggle()}this.emit("active",t,n,this)}},enumerable:!1,configurable:!0}),n.prototype.remove=function(t){var n=this.rh,i=n.indexOf(t);0<=i&&(n.splice(i,1),t.off("active",this.uh),this.eh===t&&(this.active=null))},n.prototype.contains=function(t){return 0<=this.rh.indexOf(t)},n.prototype.clear=function(){this.rh.length=0,this.active=null},n.prototype.size=function(){return this.rh.length},n.prototype.each=function(t){for(var n=this.rh,i=0,r=n.length;i<r&&!1!==t(n[i]);++i);},n.prototype.disable=function(){for(var t=this.rh,n=0,i=t.length;n<i;++n)t[n].state.isDisabled=!0;this.Ju=!1},n.prototype.enable=function(){for(var t=this.rh,n=0,i=t.length;n<i;++n)t[n].state.isDisabled=!1;this.Ju=!0},n.prototype.destroy=function(){this.clear()},n}(t.utils.EventEmitter),xs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DInputBooleanButtonOff"},n}(js),Bs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DInputBooleanButtonOn"},n}(js),_s=function(t){function n(n){var i=t.call(this,n)||this;i.addChild(i.getButtonOff()),i.addChild(i.getButtonOn());var r=null==n?void 0:n.value;return null!=r&&(i.value=r),i.getButtonGroup().on("active",(function(){var t=i.value;i.emit("change",t,!t,i)})),i}return B(n,t),n.prototype.getButtonGroup=function(){var t=this.sh;return null==t&&(t=this.newButtonGroup(),this.sh=t),t},n.prototype.newButtonGroup=function(){return new ks},n.prototype.getButtonOn=function(){var t=this.hh;return null==t&&(t=this.newButtonOn(),this.hh=t),t},n.prototype.newButtonOn=function(){return new Bs({weight:1,group:this.getButtonGroup()})},n.prototype.getButtonOff=function(){var t=this.oh;return null==t&&(t=this.newButtonOff(),this.oh=t),t},n.prototype.newButtonOff=function(){return new xs({weight:1,group:this.getButtonGroup(),state:ht.ACTIVE})},Object.defineProperty(n.prototype,"value",{get:function(){return this.getButtonOn().state.isActive},set:function(t){this.value!==t&&(t?this.getButtonOn().onClick():this.getButtonOff().onClick())},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DInputBoolean"},n}(Ns),Ps=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newInput=function(t){return new _s(this.toInputOptions(t))},n.prototype.toInputOptions=function(t){return t?(void 0===t.weight&&(t.weight=1),t):{weight:1}},n.prototype.getType=function(){return"DDialogInputBoolean"},n}(Ls),Fs=function(t){function n(n){var i=t.call(this,n,qt.NONE)||this;return i.target=nn.ofStringOrNull(n.target),i.onInputAction=n.onInputAction,i.isOpened=!1,i}return B(n,t),n.prototype.execute=function(t,n,i){var r=this;if(!this.isOpened&&this.condition(t,i,tn)){var e=this.target(t,i,tn);if(null!=e){var u=this.initial(t,i,tn);this.isOpened=!0,setTimeout((function(){r.open(t,e,u).then((function(n){r.isOpened=!1,mu.execute(t,r.onInputAction,e,n,i)}),(function(){r.isOpened=!1}))}),0)}}},n}(en),Us=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=nn.ofBooleanOrFalse(n.initial),i}return B(n,t),n.prototype.open=function(t,i,r){var e=n.DIALOG;if(null==e)e=new Ps({header:{text:{value:i},button:{close:!1}}}),n.DIALOG=e;else{var u=e.header;u&&(u.text=i)}return e.value=r,e.open(t)},n}(Fs),Gs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getUtil=function(){var t=this.Yu;return null==t&&(t=this.newUtil(),this.Yu=t),t},n.prototype.newUtil=function(){return new uu(this,this.newOperation(),this.theme,this.yn)},n.prototype.newOperation=function(){var t=this;return{getElementRect:function(n,i,r){return t.getElementRect(n,i,r)},getElementMatrix:function(){return null},getClipperRect:function(n,i,r){return t.getClipperRect(n,i,r)},getPadding:function(){return t.padding},containsPoint:function(n){return t.containsPoint(n)},onStart:function(){},onCancel:function(){},onEnd:function(){}}},Object.defineProperty(n.prototype,"element",{get:function(){return this.getUtil().element},enumerable:!1,configurable:!0}),n.prototype.onDownThis=function(n){var i=this.getUtil();i.onDowning(n),t.prototype.onDownThis.call(this,n),i.onDown(n)},n.prototype.onDblClick=function(n,i){return this.getUtil().onDblClick(n,i),t.prototype.onDblClick.call(this,n,i)},n.prototype.onFocus=function(){t.prototype.onFocus.call(this),this.getUtil().onFocus()},n.prototype.onBlur=function(){t.prototype.onBlur.call(this),this.getUtil().onBlur()},n.prototype.start=function(){this.getUtil().start()},n.prototype.render=function(n){this.getUtil().onRender(n),t.prototype.render.call(this,n)},n.prototype.getElementRect=function(t,n,i){return n.set(0,0),this.toGlobal(n,n,!1),i.x=n.x,i.y=n.y,n.set(this.width,this.height),this.toGlobal(n,n,!0),i.width=n.x-i.x,i.height=n.y-i.y,i},n.prototype.getClipperRect=function(t,n,i){return uu.getClipperRect(this.parent,this,t,n,i)},n.prototype.cancel=function(){this.getUtil().cancel()},n.prototype.end=function(){this.getUtil().end()},n.prototype.select=function(){return this.getUtil().select(),this},n.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.state.isPressed=!0)},n.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.state.isPressed&&this.start(),this.state.isPressed=!1)},n.prototype.onKeyDown=function(n){return Zt.isActivateKey(n)&&this.onActivateKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return Zt.isActivateKey(n)&&this.onActivateKeyUp(n),t.prototype.onKeyUp.call(this,n)},n.prototype.getType=function(){return"DHtmlElement"},n}(Ms),zs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newOperation=function(){var t=this;return{getElementRect:function(n,i,r){return t.getElementRect(n,i,r)},getElementMatrix:function(){return null},getClipperRect:function(n,i,r){return t.getClipperRect(n,i,r)},getPadding:function(){return t.padding},containsPoint:function(n){return t.containsPoint(n)},onStart:function(){t.hideText()},onCancel:function(){t.showText()},onEnd:function(){},getValue:function(){return t.Ps},onValueInput:function(n){t.onValueInput(n)},onValueChange:function(n,i){t.text=n,t.onValueChange(n,i)},onEnter:function(){t.onEnter()},applyTitle:function(){t.applyTitle()}}},Object.defineProperty(n.prototype,"value",{get:function(){return this.Ps},set:function(t){this.text=t},enumerable:!1,configurable:!0}),n.prototype.onTextChange=function(){t.prototype.onTextChange.call(this),this.validate()},n.prototype.onValueChange=function(t,n){this.emit("change",t,n,this)},n.prototype.onValueInput=function(t){this.emit("input",t,this)},n.prototype.onEnter=function(){this.emit("enter",this)},n.prototype.validate=function(){return this.getUtil().validate()},n.prototype.applyTitle=function(){this.getUtil().applyTitle()||t.prototype.applyTitle.call(this)},n.prototype.getType=function(){return"DInput"},n}(Gs),Hs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DInputInput"},n}(zs),Vs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newUtil=function(){return new du(this,this.newOperation(),this.theme,this.yn)},Object.defineProperty(n.prototype,"step",{get:function(){return this.getUtil().step},set:function(t){this.getUtil().step=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this.getUtil().min},set:function(t){this.getUtil().min=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this.getUtil().max},set:function(t){this.getUtil().max=t},enumerable:!1,configurable:!0}),n}(Hs),Ws=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DInputInteger"},n}(Vs),Xs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newInput=function(t){var n=this,i=new Ws(this.toInputOptions(t));return i.on("enter",(function(){n.ok()})),i},n.prototype.toInputOptions=function(t){return t?(void 0===t.weight&&(t.weight=1),t):{weight:1}},n.prototype.getType=function(){return"DDialogInputInteger"},n}(Ls),Ys=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=nn.ofNumber(n.initial),i}return B(n,t),n.prototype.open=function(t,i,r){var e=n.DIALOG;if(null==e)e=new Xs({header:{text:{value:i},button:{close:!1}}}),n.DIALOG=e;else{var u=e.header;u&&(u.text=i)}return e.value=r,e.open(t)},n}(Fs),Ks=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DInputReal"},n}(Vs),Js=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newInput=function(t){var n=this,i=new Ks(this.toInputOptions(t));return i.on("enter",(function(){n.ok()})),i},n.prototype.toInputOptions=function(t){return t?(void 0===t.weight&&(t.weight=1),t):{weight:1}},n.prototype.getType=function(){return"DDialogInputReal"},n}(Ls),Zs=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=nn.ofNumber(n.initial),i}return B(n,t),n.prototype.open=function(t,i,r){var e=n.DIALOG;if(null==e)e=new Js({header:{text:{value:i},button:{close:!1}}}),n.DIALOG=e;else{var u=e.header;u&&(u.text=i)}return e.value=r,e.open(t)},n}(Fs),qs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newUtil=function(){return new Mu(this,this.newOperation(),this.theme,this.yn)},n.prototype.getType=function(){return"DInputText"},n}(Hs),Qs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newInput=function(t){var n=this,i=new qs(this.toInputOptions(t));return i.on("enter",(function(){n.ok()})),i},n.prototype.toInputOptions=function(t){return t?(void 0===t.weight&&(t.weight=1),t):{weight:1}},n.prototype.getType=function(){return"DDialogInputText"},n}(Ls),$s=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=nn.ofString(n.initial),i}return B(n,t),n.prototype.open=function(t,i,r){var e=n.DIALOG;if(null==e)e=new Qs({header:{text:{value:i},button:{close:!1}}}),n.DIALOG=e;else{var u=e.header;u&&(u.text=i)}return e.value=r,e.open(t)},n}(Fs),th=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogFittedContent"},n}(Zu),nh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newLayoutOptions=function(t,n){return{width:"auto",height:"auto",margin:0}},n.prototype.newContent=function(){return new th(this.toContentOptions(this.theme,this.yn))},n.prototype.getType=function(){return"DDialogFitted"},n}(ys),ih=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPickerDatetimeButtonBack"},n}(Cs),rh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPickerDatetimeButtonDate"},n}(Cs),eh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPickerDatetimeButtonNext"},n}(Cs),uh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DText"},n}(Es),sh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPickerDatetimeLabel"},n}(uh),hh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPickerDatetimeLabelDate"},n}(uh),oh=function(t){function n(n){var i=t.call(this,n)||this;return i.renderable=!1,i}return B(n,t),n.prototype.getType=function(){return"DPickerDatetimeSpace"},n}(Zi),ah={NONE:0,DATE:1,HOURS:2,MINUTES:4,SECONDS:8,TIME:14,ALL:15},ch=function(){function t(){}return t.from=function(t,n){var i=null==n?void 0:n.mask;if(null==i){if(at(t)){var r=Y.getInstance().get(t);if(null!=r)return r.getMask()}else if(null!=t)return t.getMask();return ah.NONE}if(at(i))return ah[i];if(gn(i))return i;for(var e=ah.NONE,u=0,s=i.length;u<s;++u)e|=ah[i[u]];return e},t}(),fh=function(){function t(t,n){var i,r;this.ah=null!==(i=null==t?void 0:t.date)&&void 0!==i?i:null,this.fh=null!==(r=null==t?void 0:t.inclusive)&&void 0!==r&&r,this.Z=n}return Object.defineProperty(t.prototype,"date",{get:function(){return this.ah},set:function(t){this.ah!==t&&(this.ah=t,this.Z())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inclusive",{get:function(){return this.fh},set:function(t){this.fh!==t&&(this.fh=t,this.Z())},enumerable:!1,configurable:!0}),t}(),lh=function(){function t(t){this.p=t}return t.prototype.min=function(t){var n=this.p,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&ah.DATE){if(r.getFullYear()<t.getFullYear())return e.hour.min;if(r.getMonth()<t.getMonth())return e.hour.min;if(r.getDate()<t.getDate())return e.hour.min}var s=r.getHours();return i.inclusive||u&ah.SECONDS&&r.getSeconds()<e.second.max||u&ah.MINUTES&&r.getMinutes()<e.minute.max?s:s+1}return e.hour.min},t.prototype.max=function(t){var n=this.p,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&ah.DATE){if(t.getFullYear()<r.getFullYear())return e.hour.max;if(t.getMonth()<r.getMonth())return e.hour.max;if(t.getDate()<r.getDate())return e.hour.max}var s=r.getHours();return i.inclusive||u&ah.SECONDS&&e.second.min<r.getSeconds()||u&ah.MINUTES&&e.minute.min<r.getMinutes()?s:s-1}return e.hour.max},t}(),vh=function(){function t(t){this.p=t}return t.prototype.min=function(t){var n=this.p,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&ah.DATE){if(r.getFullYear()<t.getFullYear())return e.minute.min;if(r.getMonth()<t.getMonth())return e.minute.min;if(r.getDate()<t.getDate())return e.minute.min}if(u&ah.HOURS&&r.getHours()<t.getHours())return e.minute.min;var s=r.getMinutes();return i.inclusive||u&ah.SECONDS&&r.getSeconds()<e.second.max?s:s+1}return e.minute.min},t.prototype.max=function(t){var n=this.p,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&ah.DATE){if(t.getFullYear()<r.getFullYear())return e.minute.max;if(t.getMonth()<r.getMonth())return e.minute.max;if(t.getDate()<r.getDate())return e.minute.max}if(u&ah.HOURS&&t.getHours()<r.getHours())return e.minute.max;var s=r.getMinutes();return i.inclusive||u&ah.SECONDS&&e.second.min<r.getSeconds()?s:s-1}return e.minute.max},t}(),bh=function(){function t(t){this.p=t}return t.prototype.min=function(t){var n=this.p,i=n.lower,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&ah.DATE){if(r.getFullYear()<t.getFullYear())return e.second.min;if(r.getMonth()<t.getMonth())return e.second.min;if(r.getDate()<t.getDate())return e.second.min}return u&ah.HOURS&&r.getHours()<t.getHours()||u&ah.MINUTES&&r.getMinutes()<t.getMinutes()?e.second.min:r.getSeconds()+(i.inclusive?0:1)}return e.second.min},t.prototype.max=function(t){var n=this.p,i=n.upper,r=i.date,e=n.constant;if(null!=r){var u=n.mask;if(u&ah.DATE){if(t.getFullYear()<r.getFullYear())return e.second.max;if(t.getMonth()<r.getMonth())return e.second.max;if(t.getDate()<r.getDate())return e.second.max}return u&ah.HOURS&&t.getHours()<r.getHours()||u&ah.MINUTES&&t.getMinutes()<r.getMinutes()?e.second.max:r.getSeconds()-(i.inclusive?0:1)}return e.second.max},t}(),dh=function(){function t(t,n){this.constant=this.newConstant(),this.lower=new fh(t&&t.lower,n),this.upper=new fh(t&&t.upper,n),this.mask=ah.ALL,this.hours=new lh(this),this.minutes=new vh(this),this.seconds=new bh(this)}return t.prototype.newConstant=function(){return{second:{min:0,max:59},minute:{min:0,max:59},hour:{min:0,max:23}}},t.prototype.adjust=function(t){var n=this.test(t);if(n<0){var i=this.lower,r=i.date;if(r)return t.setTime(r.getTime()),i.inclusive||((e=this.mask)&ah.SECONDS?t.setSeconds(r.getSeconds()+1):e&ah.MINUTES?t.setMinutes(r.getMinutes()+1):e&ah.HOURS?t.setHours(r.getHours()+1):e&ah.DATE&&t.setDate(r.getDate()+1)),!0}else if(0<n){var e,u=this.upper,s=u.date;if(s)return t.setTime(s.getTime()),u.inclusive||((e=this.mask)&ah.SECONDS?t.setSeconds(s.getSeconds()-1):e&ah.MINUTES?t.setMinutes(s.getMinutes()-1):e&ah.HOURS?t.setHours(s.getHours()-1):e&ah.DATE&&t.setDate(s.getDate()-1)),!0}return!1},t.prototype.compare=function(t,n){var i=this.mask;if(i&ah.DATE){var r,e,u,s,h=t.getFullYear(),o=n.getFullYear();if(h!==o)return h<o?-1:1;if((r=t.getMonth())!==(e=n.getMonth()))return r<e?-1:1;if((u=t.getDate())!==(s=n.getDate()))return u<s?-1:1}if(i&ah.HOURS){var a=t.getHours(),c=n.getHours();if(a!==c)return a<c?-1:1}return i&ah.MINUTES&&(r=t.getMinutes())!==(e=n.getMinutes())?r<e?-1:1:i&ah.SECONDS&&(u=t.getSeconds())!==(s=n.getSeconds())?u<s?-1:1:0},t.prototype.test=function(t){var n=this.lower,i=n.date;if(null!=i){var r=this.compare(i,t);return n.inclusive?r<=0?0:-1:r<0?0:-1}var e=this.upper,u=e.date;return null!=u?(r=this.compare(t,u),e.inclusive?r<=0?0:1:r<0?0:1):0},t.prototype.contains=function(t){return 0===this.test(t)},t}(),gh=function(t,n,i){if(t){var r=t.date,e=t.inclusive;return{date:void 0!==r?r:n,inclusive:void 0!==e?e:i}}return{date:n,inclusive:i}},mh=function(t){function n(n){var i=t.call(this,n)||this;return i.onNewChange(),i}return B(n,t),n.prototype.init=function(n){var i,r=this;t.prototype.init.call(this,n);var e=this.theme;this.lh=new Date;var u=this.lh.getTime();this.bh=new Date(u),this.dh=new dh(function(t,n){return n?{lower:gh(n.lower,t.getLowerBound(),t.isLowerBoundInclusive()),upper:gh(n.upper,t.getUpperBound(),t.isUpperBoundInclusive())}:{lower:{date:t.getLowerBound(),inclusive:t.isLowerBoundInclusive()},upper:{date:t.getUpperBound(),inclusive:t.isUpperBoundInclusive()}}}(e,null==n?void 0:n.bounds),(function(){r.onNewChange()}));var s=null!==(i=null==n?void 0:n.margin)&&void 0!==i?i:e.getMargin();new Ju({parent:this,x:"padding",y:"padding",width:"auto",height:"auto",margin:s,children:this.newChildren(e,n,s)})},Object.defineProperty(n.prototype,"current",{get:function(){return this.lh},set:function(t){this.lh.getTime()!==t.getTime()&&(this.lh=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.bh},set:function(t){this.bh.getTime()!==t.getTime()&&(this.bh=t,this.onNewChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bounds",{get:function(){return this.dh},enumerable:!1,configurable:!0}),n.prototype.hasHours=function(){return null!=this.gh},n.prototype.hasMinutes=function(){return null!=this.mh},n.prototype.hasSeconds=function(){return null!=this.wh},n.prototype.reset=function(){var t=this.lh.getTime();this.bh.setTime(t),this.onReset()},n.prototype.onReset=function(){this.onNewChange()},n.prototype.onNewChange=function(){var t=this.bh,n=this.dh;n.adjust(this.bh);var i=this.gh;if(i){var r=n.hours;i.value=t.getHours(),i.min=r.min(t),i.max=r.max(t)}var e=this.mh;if(e){var u=n.minutes;e.value=t.getMinutes(),e.min=u.min(t),e.max=u.max(t)}var s=this.wh;if(s){var h=n.seconds;s.value=t.getSeconds(),s.min=h.min(t),s.max=h.max(t)}},n.prototype.newChildren=function(t,n,i){var r=ch.from(t,n);return this.dh.mask=r,this.gh=r&ah.HOURS?this.newInputHours(t,n):null,this.mh=r&ah.MINUTES?this.newInputMinutes(t,n):null,this.wh=r&ah.SECONDS?this.newInputSeconds(t,n):null,[this.newTimeLayout(this.gh,this.mh,this.wh,i)]},n.prototype.newTimeLayout=function(t,n,i,r){var e=this.newTimeLayoutChildren(t,n,i);return 0<e.length?new Ns({width:this.getTimeLayoutWidth(),height:this.getTimeLayoutHeight(),margin:r,children:e}):null},n.prototype.getTimeLayoutWidth=function(){return"auto"},n.prototype.getTimeLayoutHeight=function(){return"auto"},n.prototype.newTimeLayoutChildren=function(t,n,i){var r=[];return null!=t&&r.push(t),null!=n&&(0<r.length&&r.push(this.newMinuteSeparator()),r.push(n)),null!=i&&(0<r.length&&r.push(this.newSecondSeparator()),r.push(i)),r},n.prototype.newMinuteSeparator=function(){return new uh({width:"auto",text:{value:this.getMinuteSeparator()}})},n.prototype.getMinuteSeparator=function(){return":"},n.prototype.newSecondSeparator=function(){return new uh({width:"auto",text:{value:this.getSecondSeparator()}})},n.prototype.getSecondSeparator=function(){return":"},n.prototype.adjustInputOptions=function(t,n,i){return null==n.step&&(n.step=1),null==n.min&&(n.min=0),null==n.max&&(n.max=i),n},n.prototype.newInputHours=function(t,n){var i,r=this,e=null!==(i=null==n?void 0:n.hours)&&void 0!==i?i:t.getHoursOptions(),u=this.dh.constant.hour.max,s=new Ws(this.adjustInputOptions(t,e,u));return s.on("change",(function(t){r.onHoursChange(t)})),s},n.prototype.onHoursChange=function(t){this.bh.setHours(t),this.onNewChange()},n.prototype.newInputMinutes=function(t,n){var i=this,r=(null==n?void 0:n.minutes)||t.getMinutesOptions(),e=this.dh.constant.minute.max,u=new Ws(this.adjustInputOptions(t,r,e));return u.on("change",(function(t){i.onMinutesChange(t)})),u},n.prototype.onMinutesChange=function(t){this.bh.setMinutes(t),this.onNewChange()},n.prototype.newInputSeconds=function(t,n){var i=this,r=(null==n?void 0:n.seconds)||t.getSecondsOptions(),e=this.dh.constant.second.max,u=new Ws(this.adjustInputOptions(t,r,e));return u.on("change",(function(t){i.onSecondsChange(t)})),u},n.prototype.onSecondsChange=function(t){this.bh.setSeconds(t)},n.prototype.getType=function(){return"DPickerTime"},n}(Zi),wh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.ph=new Date(this.lh.getTime())},n.prototype.newChildren=function(n,i,r){var e,u;this.Oh=this.newDateButtons(n,i),this.Dh=null!==(u=null===(e=null==i?void 0:i.date)||void 0===e?void 0:e.decorator)&&void 0!==u?u:n.getDateDecorator(),this.Eh=this.newLabel(n,i);var s=t.prototype.newChildren.call(this,n,i,r);return s.unshift(new Ns({width:"100%",height:"auto",children:[this.newBackButton(n,i),this.Eh,this.newNextButton(n,i)]}),new Ns({width:"auto",height:"auto",margin:r,children:this.newDateLabels(n,i)}),new Ju({width:"auto",height:"auto",margin:r,column:7,children:this.Oh})),s},Object.defineProperty(n.prototype,"page",{get:function(){return this.ph},set:function(t){this.ph.getTime()!==t.getTime()&&(this.ph=t,this.onPageChange())},enumerable:!1,configurable:!0}),n.prototype.onReset=function(){this.ph.setTime(this.lh.getTime()),t.prototype.onReset.call(this)},n.prototype.next=function(){var t=this.ph;t.setFullYear(t.getFullYear(),t.getMonth()+1,1),t.setHours(0,0,0,0),this.onPageChange()},n.prototype.back=function(){var t=this.ph;t.setFullYear(t.getFullYear(),t.getMonth()-1,1),t.setHours(0,0,0,0),this.onPageChange()},n.prototype.onNewChange=function(){this.dh.adjust(this.ph),t.prototype.onNewChange.call(this),this.onPageChange()},n.prototype.onPageChange=function(){var t=this.Oh,n=this.dh,i=this.ph,r=this.bh,e=new Date(i.getTime());e.setDate(1),e.setHours(0,0,0,0);for(var u=this.theme,s=(e.getDay()-u.getDayStart()+7)%7,h=0;h<s;++h)t[h].show();for(h=s;h<7;++h)t[h].hide();var o=this.Dh;e.setFullYear(e.getFullYear(),e.getMonth()+1,0);var a=e.getDate(),c=r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth()?r.getDate():0;for(h=0;h<a;++h)e.setDate(h+1),(f=t[h+7]).state.isActive=c===h+1,f.state.isDisabled=!n.contains(e),f.show(),o(e,f);for(h=a;h<31;++h){var f;(f=t[h+7]).state.isActive=!1,f.hide()}e.setTime(i.getTime()),this.Eh.text=e},n.prototype.adjustInputOptions=function(n,i,r){return null==i.weight&&(i.weight=1),t.prototype.adjustInputOptions.call(this,n,i,r)},n.prototype.getTimeLayoutWidth=function(){return"100%"},n.prototype.toLabelOptions=function(t,n){var i=n&&n.label||{};void 0===i.weight&&(i.weight=1),void 0===i.padding&&(i.padding=0);var r=i.text=i.text||{},e=r.align=r.align||{};return void 0===e.horizontal&&(e.horizontal="CENTER"),void 0===r.formatter&&(r.formatter=t.getLabelFormatter()),i},n.prototype.newLabel=function(t,n){return new sh(this.toLabelOptions(t,n))},n.prototype.newBackButton=function(t,n){var i=this,r=null==n?void 0:n.back;if(void 0===r&&(r=t.getBackButtonOptions()),null!=r){var e=new ih(r);return e.on("active",(function(){i.back()})),e}return null},n.prototype.newNextButton=function(t,n){var i=this,r=null==n?void 0:n.next;if(void 0===r&&(r=t.getNextButtonOptions()),null!=r){var e=new eh(r);return e.on("active",(function(){i.next()})),e}return null},n.prototype.newDateLabels=function(t,n){for(var i=t.getDayLabels(),r=t.getDayStart(),e=[],u=0;u<7;++u){var s=i[(r+u)%7];e.push(this.newDateLabel(t,n,s))}return e},n.prototype.newDateLabel=function(t,n,i){return new hh({text:{value:i}})},n.prototype.newDateButtons=function(t,n){for(var i=[],r=0;r<7;++r)i.push(this.newSpace(t,n));for(r=1;r<=31;++r)i.push(this.newDateButton(t,n,r));return i},n.prototype.newSpace=function(t,n){return new oh},n.prototype.newDateButton=function(t,n,i){var r=this;return new rh({text:{value:String(i)},on:{active:function(){r.onDateButtonClicked(i)}}})},n.prototype.onDateButtonClicked=function(t){var n=this.bh;if(n.getDate()!==t){var i=this.ph;n.setFullYear(i.getFullYear()),n.setMonth(i.getMonth()),n.setDate(t),this.onNewChange()}},n.prototype.getType=function(){return"DPickerDatetime"},n}(mh),ph=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},Object.defineProperty(n.prototype,"current",{get:function(){return this.picker.current},set:function(t){this.picker.current=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.picker.new},set:function(t){this.picker.new=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"page",{get:function(){return this.picker.new},set:function(t){this.picker.page=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Mh;return null==n&&(n=new wh(null===(t=this.yn)||void 0===t?void 0:t.picker),this.Mh=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.new},n.prototype.getType=function(){return"DDialogDatetime"},n}(nh),Oh=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=nn.ofUnknown(n.initial),i}return B(n,t),n.prototype.open=function(t,i,r){var e=n.DIALOG;return null==e&&(e=new ph,n.DIALOG=e),e.new=e.current=this.toDate(r),e.open(t).then((function(t){return t.toISOString()}))},n.prototype.toDate=function(t){return at(t)||gn(t)?new Date(t):t instanceof Date?t:new Date},n}(Fs),Dh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},Object.defineProperty(n.prototype,"current",{get:function(){return this.picker.current},set:function(t){this.picker.current=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.picker.new},set:function(t){this.picker.new=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Mh;return null==n&&(n=new mh(null===(t=this.yn)||void 0===t?void 0:t.picker),this.Mh=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.new},n.prototype.getType=function(){return"DDialogTime"},n}(nh),Eh=function(t){return t!=t},Mh=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=nn.ofUnknown(n.initial),i}return B(n,t),n.prototype.open=function(t,i,r){var e=this,u=n.DIALOG;return null==u&&(u=new Dh,n.DIALOG=u),u.new=u.current=this.toDate(r),u.open(t).then((function(t){return e.getFormatter().format(t.getTime(),0)}))},n.prototype.toDate=function(t){if(gn(t))return new Date(t);if(at(t)){var n=new Date,i=this.getPattern().exec(t);if(null!=i){var r=this.toHours(i[1]);null!=r&&n.setHours(r);var e=this.toMinutes(i[2]);null!=e&&n.setMinutes(e);var u=this.toSeconds(i[3]);null!=u&&n.setSeconds(u);var s=this.toMilliseconds(i[4]);null!=s&&n.setMilliseconds(s)}return n}return t instanceof Date?t:new Date},n.prototype.toHours=function(t){return this.toNumber(t,0,23)},n.prototype.toMinutes=function(t){return this.toNumber(t,0,59)},n.prototype.toSeconds=function(t){return this.toNumber(t,0,59)},n.prototype.toMilliseconds=function(t){var n=this.toNumber(t,0,999);if(null!=n){var i=t.length;return 1===i?100*n:2===i?10*n:n}return n},n.prototype.toNumber=function(t,n,i){if(null!=t){var r=+t;if(!Eh(r))return Math.min(i,Math.max(n,r))}return null},n.prototype.getPattern=function(){var t=n.PATTERN;return null==t&&(t=this.newPattern(),n.PATTERN=t),t},n.prototype.newPattern=function(){return/^\s*(?:(\d+)(?::(\d+)(?::(\d+))?)?)?(?:\.(\d+))?\s*$/},n.prototype.getFormatter=function(){var t=n.FORMATTER;return null==t&&(t=this.newFormatter(),n.FORMATTER=t),t},n.prototype.newFormatter=function(){return vi.create("%Hm")},n}(Fs),Sh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPickerDate"},n}(wh),jh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},Object.defineProperty(n.prototype,"current",{get:function(){return this.picker.current},set:function(t){this.picker.current=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.picker.new},set:function(t){this.picker.new=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"page",{get:function(){return this.picker.new},set:function(t){this.picker.page=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Mh;return null==n&&(n=new Sh(null===(t=this.yn)||void 0===t?void 0:t.picker),this.Mh=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.new},n.prototype.getType=function(){return"DDialogDate"},n}(nh),Th=function(t){function n(n){var i=t.call(this,n)||this;return i.initial=nn.ofUnknown(n.initial),i}return B(n,t),n.prototype.open=function(t,i,r){var e=this,u=n.DIALOG;return null==u&&(u=new jh,n.DIALOG=u),u.new=u.current=this.toDate(r),u.open(t).then((function(t){return e.getFormatter().format(t.getTime(),0)}))},n.prototype.toDate=function(t){return at(t)||gn(t)?new Date(t):t instanceof Date?t:new Date},n.prototype.getFormatter=function(){var t=n.FORMATTER;return null==t&&(t=this.newFormatter(),n.FORMATTER=t),t},n.prototype.newFormatter=function(){return vi.create("%Y-%M-%D")},n}(Fs),Nh={TEXT:0,INTEGER:1,REAL:2,BOOLEAN:3,DATE:4,TIME:5,DATETIME:6,EXTENSION:1e3},Ih=function(t){function n(n,i,r,e,u){var s=t.call(this,dn.OPEN,n,Lu.DIALOG)||this;return s.target=i,s.onInputAction=r,s.initial=e,s.dialogType=u,s}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.dialogType===i.dialogType&&this.onInputAction===i.onInputAction&&this.initial===i.initial},n.prototype.toRuntime=function(){switch(this.dialogType){case Nh.TEXT:return new $s(this);case Nh.INTEGER:return new Ys(this);case Nh.REAL:return new Zs(this);case Nh.BOOLEAN:return new Us(this);case Nh.DATE:return new Th(this);case Nh.TIME:return new Mh(this);case Nh.DATETIME:return new Oh(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=t.addResource(this.initial);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(this.onInputAction,",").concat(r,",").concat(this.dialogType,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources),e=mn.toResource(3,t,i.resources),u=mn.toResource(5,t,i.resources);return new n(r,e,t[4],u,this.toDialogType(t))},n.toDialogType=function(t){if(t[2]===Lu.DIALOG)return t[6];switch(t[2]){case Lu.DIALOG_TEXT:return Nh.TEXT;case Lu.DIALOG_INTEGER:return Nh.INTEGER;case Lu.DIALOG_REAL:return Nh.REAL;case Lu.DIALOG_BOOLEAN:return Nh.BOOLEAN;case Lu.DIALOG_DATE:return Nh.DATE;case Lu.DIALOG_TIME:return Nh.TIME;case Lu.DIALOG_DATETIME:return Nh.DATETIME}},n}(bn),Ch=function(){function t(){}return t.add=function(t){var n,i;(null!==(n=this.Sh)&&void 0!==n?n:this.Sh=new Map).set(t.type,t),(null!==(i=this.Bt)&&void 0!==i?i:this.Bt=[]).push(t)},t.get=function(t){var n=this.Sh;if(null!=n)return n.get(t)},t.each=function(t){var n=this.Bt;if(null!=n)for(var i=0,r=n.length;i<r;++i)t(n[i])},t}(),Ah=function(t){function n(n){var i=t.call(this,n,qt.NONE)||this;i.target=nn.ofStringOrNull(n.target);var r=Ch.get(n.dialogType);return r&&(i.opener=r.opener),i}return B(n,t),n.prototype.execute=function(t,n,i){var r=this.opener;if(r&&this.condition(t,i,tn)){var e=this.target(t,i,tn);null!=e&&setTimeout((function(){r(e,t)}),0)}},n}(en),Rh=function(t){function n(n,i,r){var e=t.call(this,dn.OPEN,n,Lu.DIALOG)||this;return e.target=i,e.dialogType=r,e}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.dialogType===i.dialogType},n.prototype.toRuntime=function(){return new Ah(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",0,-1,").concat(this.dialogType,"]"))},n.deserialize=function(t,i){return new n(mn.toResource(1,t,i.resources),mn.toResource(3,t,i.resources),t[6])},n}(bn),yh=function(){function t(){}return t.add=function(t){var n,i;(null!==(n=this.Sh)&&void 0!==n?n:this.Sh=new Map).set(t.type,t),(null!==(i=this.Bt)&&void 0!==i?i:this.Bt=[]).push(t),Ze[t.type]=t.opener},t.get=function(t){var n=this.Sh;if(null!=n)return n.get(t)},t.each=function(t){var n=this.Bt;if(null!=n)for(var i=0,r=n.length;i<r;++i)t(n[i])},t}(),Lh=function(t){function n(n,i,r,e){var u=t.call(this,dn.OPEN,i,n)||this;return u.target=r,u.inNewWindow=e,u}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.target===i.target&&this.inNewWindow===i.inNewWindow},n.prototype.toRuntime=function(){return new yu(this,this.subtype)},n.prototype.toLabel=function(){var t=this.getTheme().toTypeLabel(this.type),n=yh.get(this.subtype);return"".concat(t,": ").concat(null!=n?n.label:"Unknown")},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.target),r=this.inNewWindow?1:0;return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources),e=mn.toResource(3,t,i.resources);return new n(t[2],r,e,!!t[4])},n}(bn),kh={SHAPE_SHOW:0,SHAPE_HIDE:1,SHAPE:2,LAYER:3},xh=function(t){function n(n){var i=t.call(this,n,qt.VISIBILITY)||this;return i.visibility=n.subtype===kh.SHAPE_SHOW,i}return B(n,t),n.prototype.execute=function(t,n,i){this.condition(t,i,tn)&&(t.visible=this.visibility,n.written|=this.reset)},n}(en),Bh=function(t){function n(n,i){return t.call(this,dn.SHOW_HIDE,i,n)||this}return B(n,t),n.prototype.toRuntime=function(){return new xh(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources);return new n(t[2],r)},n}(bn),_h=function(t){function n(n){var i=t.call(this,n,qt.NONE)||this;return i.Bt=new Map,i.ou=n.layers,i.jh=n.bringToFront,i}return B(n,t),n.prototype.initialize=function(n,i){t.prototype.initialize.call(this,n,i);var r=this.Bt.get(n);null==r&&null!=(r=this.newData(n))&&this.Bt.set(n,r)},n.prototype.execute=function(t,n,i){var r=this.Bt.get(t);if(r){var e=this.condition(t,i,tn);if(r.condition!==e){r.condition=e;var u=r.layers;e?r.bringToFront?(_e.bringAllToFront(u),_e.showAll(u)):_e.showAll(u):_e.hideAll(u)}}},n.prototype.newData=function(t){var n=_e.toLayers(t,this.ou);if(0<n.length)return{layers:n,bringToFront:this.jh,condition:null}},n}(en),Ph=function(t){function n(n,i,r){var e=t.call(this,dn.SHOW_HIDE,n,kh.LAYER)||this;return e.layers=i,e.bringToFront=r,e}return B(n,t),n.prototype.toRuntime=function(){return new _h(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=this.serializeLayers(t),r=this.bringToFront?1:0;return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(i,",").concat(r,"]"))},n.prototype.serializeLayers=function(t){for(var n=this.layers,i="[",r="",e=0,u=n.length;e<u;++e)i+=r+n[e],r=",";return i+="]",t.addResource(i)},n.deserialize=function(t,i){return new n(mn.toResource(1,t,i.resources),this.deserializeLayers(t[3],i),!!t[4])},n.deserializeLayers=function(t,n){var i=n.resources,r=i.length;return 0<=t&&t<r?JSON.parse(i[t]):[]},n}(bn),Fh=function(t){function n(n){return t.call(this,n,qt.VISIBILITY)||this}return B(n,t),n.prototype.initialize=function(n,i){t.prototype.initialize.call(this,n,i)},n.prototype.execute=function(t,n,i){t.visible=this.condition(t,i,tn),n.written|=this.reset},n}(en),Uh=function(t){function n(n){return t.call(this,dn.SHOW_HIDE,n,kh.SHAPE)||this}return B(n,t),n.prototype.toRuntime=function(){return new Fh(this)},n.prototype.serialize=function(t){var n=t.addResource(this.condition);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,"]"))},n.deserialize=function(t,i){return new n(mn.toResource(1,t,i.resources))},n}(bn),Gh=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.amount=nn.ofNumber(n.amount),r}return B(n,t),n}(en),zh=function(t){function n(n){return t.call(this,n,qt.POSITION_X)||this}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.amount(t,i,tn);t.transform.position.x=r,n.written|=this.reset}},n}(Gh),Hh=function(t){function n(n){return t.call(this,n,qt.POSITION_Y)||this}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.amount(t,i,tn);t.transform.position.y=r,n.written|=this.reset}},n}(Gh),Vh=function(t){function n(n){return t.call(this,n,qt.POSITION)||this}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.amount(t,i,tn),e=t.transform,u=e.position,s=!!(n.written&qt.POSITION_X),h=!!(n.written&qt.POSITION_Y),o=s?u.x:n.x,a=h?u.y:n.y;t.updateTransform();var c=e.localTransform;u.set(o-c.c*r,a-c.d*r),n.written|=this.reset}},n}(Gh),Wh=function(t){function n(n){return t.call(this,n,qt.POSITION)||this}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.amount(t,i,tn),e=t.transform,u=e.position,s=!!(n.written&qt.POSITION_X),h=!!(n.written&qt.POSITION_Y),o=s?u.x:n.x,a=h?u.y:n.y;t.updateTransform();var c=e.localTransform;u.set(o+c.a*r,a+c.b*r),n.written|=this.reset}},n}(Gh),Xh=function(t){function n(n){return t.call(this,n,qt.POSITION_X)||this}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.amount(t,i,tn),e=!!(n.written&qt.POSITION_X),u=t.transform.position,s=e?u.x:n.x;u.x=s+r,n.written|=this.reset}},n}(Gh),Yh=function(t){function n(n){return t.call(this,n,qt.POSITION_Y)||this}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.amount(t,i,tn),e=!!(n.written&qt.POSITION_Y),u=t.transform.position,s=e?u.y:n.y;u.y=s+r,n.written|=this.reset}},n}(Gh),Kh=function(t){function n(n,i,r,e){var u=t.call(this,n,i,r)||this;return u.opetype=e,u}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.opetype===i.opetype},n}(bn),Jh={RELATIVE_X:0,RELATIVE_Y:1,ABSOLUTE_X:2,ABSOLUTE_Y:3,FORWARD_OR_BACKWARD:4,LEFT_OR_RIGHT:5},Zh={RESIZE:0,MOVE:1,ROTATE:2},qh=function(t){function n(n,i,r){var e=t.call(this,dn.TRANSFORM,i,Zh.MOVE,n)||this;return e.amount=r,e}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case Jh.ABSOLUTE_X:return new zh(this);case Jh.ABSOLUTE_Y:return new Hh(this);case Jh.FORWARD_OR_BACKWARD:return new Vh(this);case Jh.LEFT_OR_RIGHT:return new Wh(this);case Jh.RELATIVE_X:return new Xh(this);case Jh.RELATIVE_Y:return new Yh(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.amount);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.opetype,",").concat(i,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources),e=mn.toResource(4,t,i.resources);return new n(t[3],r,e)},n}(Kh),Qh={RELATIVE_SIZE:0,RELATIVE_HEIGHT:1,RELATIVE_WIDTH:2,ABSOLUTE_SIZE:3,ABSOLUTE_HEIGHT:4,ABSOLUTE_WIDTH:5},$h=function(t){function n(n,i){var r=t.call(this,n,i)||this;switch(n.opetype){case Qh.RELATIVE_SIZE:r.size=nn.ofNumberOrOne(n.amount);break;case Qh.ABSOLUTE_SIZE:r.size=nn.ofNumberOrOneHundred(n.amount);break;case Qh.RELATIVE_HEIGHT:r.size=nn.ofNumberOrOne(n.amount);break;case Qh.ABSOLUTE_HEIGHT:r.size=nn.ofNumberOrOneHundred(n.amount);break;case Qh.RELATIVE_WIDTH:r.size=nn.ofNumberOrOne(n.amount);break;case Qh.ABSOLUTE_WIDTH:r.size=nn.ofNumberOrOneHundred(n.amount);break;default:r.size=nn.ONE}return r}return B(n,t),n.prototype.adjustPosition=function(t,n,i,r,e,u){var s=(-.5+e)*i,h=(-.5+u)*r;t.updateTransform();var o=t.transform,a=o.position,c=o.localTransform,f=!!(n.written&qt.POSITION_X),l=!!(n.written&qt.POSITION_Y),v=f?a.x:n.x,b=l?a.y:n.y;n.written|=qt.POSITION,a.set(v+s*c.a+h*c.c,b+s*c.b+h*c.d)},n}(en),to=function(t){function n(n){var i=t.call(this,n,qt.HEIGHT)||this;return i.origin=n.originY,i.reset|=qt.POSITION,i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.size(t,i,tn),e=t.size,u=n.written&qt.HEIGHT?e.y:n.size.y;e.y=yr(r),n.written|=qt.HEIGHT,this.adjustPosition(t,n,0,u-e.y,.5,this.origin)}},n}($h),no=function(t){function n(n){var i=t.call(this,n,qt.HEIGHT)||this;return i.origin=n.originY,i.reset|=qt.POSITION,i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.size(t,i,tn),e=t.size,u=n.written&qt.HEIGHT?e.y:n.size.y;e.y=yr(u*r),n.written|=qt.HEIGHT,this.adjustPosition(t,n,0,u-e.y,.5,this.origin)}},n}($h),io=function(t){function n(n){var i=t.call(this,n,qt.SIZE)||this;return i.originX=n.originX,i.originY=n.originY,i.reset|=qt.POSITION,i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=yr(this.size(t,i,tn)),e=t.size,u=!!(n.written&qt.WIDTH),s=!!(n.written&qt.HEIGHT),h=u?e.x:n.size.x,o=s?e.y:n.size.y;e.set(r,r),n.written|=qt.SIZE,this.adjustPosition(t,n,h-e.x,o-e.y,this.originX,this.originY)}},n}($h),ro=function(t){function n(n){var i=t.call(this,n,qt.SIZE)||this;return i.originX=n.originX,i.originY=n.originY,i.reset|=qt.POSITION,i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.size(t,i,tn),e=t.size,u=!!(n.written&qt.WIDTH),s=!!(n.written&qt.HEIGHT),h=u?e.x:n.size.x,o=s?e.y:n.size.y;e.set(yr(h*r),yr(o*r)),n.written|=qt.SIZE,this.adjustPosition(t,n,h-e.x,o-e.y,this.originX,this.originY)}},n}($h),eo=function(t){function n(n){var i=t.call(this,n,qt.WIDTH)||this;return i.origin=n.originX,i.reset|=qt.POSITION,i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.size(t,i,tn),e=t.size,u=n.written&qt.WIDTH?e.x:n.size.x;e.x=yr(r),n.written|=qt.WIDTH,this.adjustPosition(t,n,u-e.x,0,this.origin,.5)}},n}($h),uo=function(t){function n(n){var i=t.call(this,n,qt.WIDTH)||this;return i.origin=n.originX,i.reset|=qt.POSITION,i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.size(t,i,tn),e=t.size,u=n.written&qt.WIDTH?e.x:n.size.x;e.x=yr(u*r),n.written|=qt.WIDTH,this.adjustPosition(t,n,u-e.x,0,this.origin,.5)}},n}($h),so=function(t){function n(n,i,r,e,u){var s=t.call(this,dn.TRANSFORM,i,Zh.RESIZE,n)||this;return s.originX=r,s.originY=e,s.amount=u,s}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.originX===i.originX&&this.originY===i.originY&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case Qh.ABSOLUTE_HEIGHT:return new to(this);case Qh.ABSOLUTE_WIDTH:return new eo(this);case Qh.ABSOLUTE_SIZE:return new io(this);case Qh.RELATIVE_HEIGHT:return new no(this);case Qh.RELATIVE_WIDTH:return new uo(this);case Qh.RELATIVE_SIZE:return new ro(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.amount);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.opetype,",").concat(this.originX,",").concat(this.originY,",").concat(i,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources),e=mn.toResource(6,t,i.resources);return new n(t[3],r,t[4],t[5],e)},n}(Kh),ho=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.originX=n.originX,r.originY=n.originY,r.amount=nn.ofNumber("(".concat(n.amount,") * (Math.PI / 180)")),r}return B(n,t),n.prototype.adjustPosition=function(t,n,i,r,e,u){var s=!!(n.written&qt.WIDTH),h=!!(n.written&qt.HEIGHT),o=(-.5+e)*(s?t.size.x:n.size.x),a=(-.5+u)*(h?t.size.y:n.size.y),c=Math.sin(i)-Math.sin(r),f=Math.cos(i)-Math.cos(r),l=t.transform.position,v=!!(n.written&qt.POSITION_X),b=!!(n.written&qt.POSITION_Y),d=v?l.x:n.x,g=b?l.y:n.y;n.written|=qt.POSITION,l.set(d+o*f-a*c,g+o*c+a*f)},n}(en),oo=function(t){function n(n){var i=t.call(this,n,qt.ROTATION)||this;return i.reset|=qt.POSITION,i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.amount(t,i,tn),e=t.transform,u=n.written&qt.ROTATION?e.rotation:n.rotation;e.rotation=r,n.written|=qt.ROTATION,this.adjustPosition(t,n,u,r,this.originX,this.originY)}},n}(ho),ao=function(t){function n(n){var i=t.call(this,n,qt.ROTATION)||this;return i.reset|=qt.POSITION,i}return B(n,t),n.prototype.execute=function(t,n,i){if(this.condition(t,i,tn)){var r=this.amount(t,i,tn),e=t.transform,u=n.written&qt.ROTATION?e.rotation:n.rotation;e.rotation=u+r,n.written|=qt.ROTATION,this.adjustPosition(t,n,u,e.rotation,this.originX,this.originY)}},n}(ho),co={RELATIVE:0,ABSOLUTE:1},fo=function(t){function n(n,i,r,e,u){var s=t.call(this,dn.TRANSFORM,i,Zh.ROTATE,n)||this;return s.originX=r,s.originY=e,s.amount=u,s}return B(n,t),n.prototype.isEquals=function(i){return t.prototype.isEquals.call(this,i)&&i instanceof n&&this.originX===i.originX&&this.originY===i.originY&&this.amount===i.amount},n.prototype.toRuntime=function(){switch(this.opetype){case co.ABSOLUTE:return new oo(this);case co.RELATIVE:return new ao(this)}},n.prototype.serialize=function(t){var n=t.addResource(this.condition),i=t.addResource(this.amount);return t.addResource("[".concat(this.type,",").concat(n,",").concat(this.subtype,",").concat(this.opetype,",").concat(this.originX,",").concat(this.originY,",").concat(i,"]"))},n.deserialize=function(t,i){var r=mn.toResource(1,t,i.resources),e=mn.toResource(6,t,i.resources);return new n(t[3],r,t[4],t[5],e)},n}(Kh),lo=function(t,n){switch(t[0]){case dn.SHOW_HIDE:switch(t[2]){case kh.SHAPE_SHOW:case kh.SHAPE_HIDE:return Bh.deserialize(t,n);case kh.SHAPE:return Uh.deserialize(t,n);case kh.LAYER:return Ph.deserialize(t,n)}break;case dn.BLINK:return wn.deserialize(t,n);case dn.CHANGE_COLOR:case dn.CHANGE_COLOR_LEGACY:switch(t[3]){case Dn.COLOR_AND_ALPHA:case Dn.COLOR:case Dn.ALPHA:return Tn.deserialize(t,n);case Dn.CODE:return An.deserialize(t,n);case Dn.BRIGHTNESS:return In.deserialize(t,n)}break;case dn.CHANGE_TEXT:return mi.deserialize(t,n);case dn.CHANGE_CURSOR:return yn.deserialize(t,n);case dn.EMIT_EVENT:return $e.deserialize(t,n);case dn.OPEN:switch(t[2]){case Lu.DIALOG_TEXT:case Lu.DIALOG_INTEGER:case Lu.DIALOG_REAL:case Lu.DIALOG_BOOLEAN:case Lu.DIALOG_DATE:case Lu.DIALOG_TIME:case Lu.DIALOG_DATETIME:case Lu.DIALOG:return Nh.EXTENSION<=t[6]?Rh.deserialize(t,n):Ih.deserialize(t,n);case Lu.DIAGRAM_LEGACY:case Lu.PAGE_LEGACY:case Lu.PAGE_INPLACE_LEGACY:case Lu.DIAGRAM:case Lu.PAGE:return ku.deserialize(t,n);default:if(Lu.EXTENSION<=t[2])return Lh.deserialize(t,n)}break;case dn.TRANSFORM:switch(t[2]){case Zh.MOVE:return qh.deserialize(t,n);case Zh.RESIZE:return so.deserialize(t,n);case Zh.ROTATE:return fo.deserialize(t,n)}break;case dn.GESTURE:return We.deserialize(t,n);case dn.MISC:switch(t[2]){case Ve.GESTURE:return We.deserialize(t,n);case Ve.SHOW_HIDE_LAYER:return Ph.deserialize(t,n);case Ve.GESTURE_LAYER:return We.deserialize(t,n);case Ve.EXECUTE:return Ru.deserialize(t,n);default:return Cu.deserialize(t,n)}}return null},vo={},bo=function(t){try{var n=JSON.parse(t);return Ct(n)&&2<=n.length?n:null}catch(t){return null}},go=function(t,n,i){var r=n.resources;if(0<=t&&t<r.length){var e=r[t];at(e)&&(i.gradient=function(t){var n=function(t){try{return JSON.parse(t)}catch(t){return null}}(t);if(!(null==n||n.length<7)){for(var i=n[0],r=[],e=1,u=n.length;e<u;e+=3)r.push({color:n[e+0],alpha:n[e+1],position:n[e+2]});return{points:r,direction:i}}}(e))}},mo={},wo=function(t){var n=mo[t];if(null!=n)return n instanceof HTMLImageElement?Promise.resolve(n):n;var i=new Promise((function(n,i){var r=document.createElement("img");r.onload=function(){mo[t]=r,n(r)},r.onabort=r.onerror=function(){i()},r.src=t}));return mo[t]=i,i},po=function(t,n,i){var r=n.resources;i.id=r[t[1]]||"";var e=i.transform;e.position.set(t[2],t[3]),e.rotation=t[6],e.skew.set(t[7],t[7]),e.pivot.set(t[21],t[22]),i.size.set(yr(t[4]),yr(t[5])),i.fill.deserialize(t[8],n),i.stroke.deserialize(t[9],n),i.cursor=n.resources[t[10]]||"",i.text.deserialize(t[11],n),i.data.deserialize(t[12],n),i.radius=t[13],i.corner=t[14];var u=t[23];i.interactive=!!(1&u);var s=i.state;s.isFocusable=!(2&u),s.isActive=!!(4&u);var h=t[24];i.shortcut=0<=h?r[h]:void 0;var o=t[25];i.title=0<=o?r[o]:void 0;var a=t[26];i.uuid=null!=a?a:0;var c=function(t,n,i){if(0<t.length){for(var r=[],e=0,u=t.length;e<u;++e)r.push(Fr(t[e],n));return Promise.all(r).then((function(t){i.children=t;for(var n=0,r=t.length;n<r;++n)t[n].parent=i;return i.onChildTransformChange(),i.toDirty(),i}))}return null}(t[20],n,i);!function(t,n,i){for(var r=i.action,e=n.resources,u=0,s=t.length;u<s;++u){var h=t[u],o=n.getAction(h);if(null!=o)r.add(o);else{var a=e[h];if(null!=a){var c=bo(a);if(null!=c&&0<c.length){var f=c[0],l=dn.EXTENSION<=f?vo[f]:lo;if(null!=l){var v=l(c,n);null!=v&&(n.setAction(h,v),r.add(v))}}}}}}(t[17],n,i),go(t[19],n,i);var f=function(t,n,i){var r=n.resources;if(0<=t&&t<r.length){var e=r[t];if(at(e))return wo(e).then((function(t){return i.image=t,i}))}return null}(t[18],n,i);return null!=c?null!=f?Promise.all([c,f]).then((function(){return i})):c:null!=f?f:i},Oo=function(t,n,i){i=i||new Vt;var r=po(t,n,i);i.points.deserialize(t[15],n);var e=i.points.style,u=U.NON_SCALING_MASK|U.DOTTED_MASK|U.DASHED_MASK,s=e&u;return s&&(i.points.style&=~u,i.stroke.style|=s),r},Do=function(){e[r.BAR]=Yt,n[r.BAR]=Oo},Eo={},Mo=36,So=[0,0,0],jo=new t.Point,To=function(t,n,i){var r=3*i-1;t[++r]=n,t[++r]=n+1,t[++r]=n+2,t[++r]=n+1,t[++r]=n+3,t[++r]=n+2,t[++r]=n+4,t[++r]=n+5,t[++r]=n+6,t[++r]=n+5,t[++r]=n+7,t[++r]=n+6,t[++r]=n+8,t[++r]=n+9,t[++r]=n+10,t[++r]=n+9,t[++r]=n+11,t[++r]=n+10,t[++r]=n+12,t[++r]=n+13,t[++r]=n+14,t[++r]=n+13,t[++r]=n+15,t[++r]=n+14,t[++r]=n+16,t[++r]=n+17,t[++r]=n+20,t[++r]=n+17,t[++r]=n+21,t[++r]=n+20,t[++r]=n+17,t[++r]=n+18,t[++r]=n+21,t[++r]=n+18,t[++r]=n+22,t[++r]=n+21,t[++r]=n+19,t[++r]=n+21,t[++r]=n+24,t[++r]=n+21,t[++r]=n+25,t[++r]=n+24,t[++r]=n+21,t[++r]=n+23,t[++r]=n+26,t[++r]=n+23,t[++r]=n+27,t[++r]=n+26,t[++r]=n+24,t[++r]=n+25,t[++r]=n+28,t[++r]=n+25,t[++r]=n+30,t[++r]=n+28,t[++r]=n+26,t[++r]=n+27,t[++r]=n+30,t[++r]=n+27,t[++r]=n+32,t[++r]=n+30,t[++r]=n+29,t[++r]=n+30,t[++r]=n+33,t[++r]=n+30,t[++r]=n+34,t[++r]=n+33,t[++r]=n+30,t[++r]=n+31,t[++r]=n+34,t[++r]=n+31,t[++r]=n+35,t[++r]=n+34},No=function(t,n,i,r,e,u,s,h,o,a,c){var f=s*h,l=.5*e+(0<=e?+f:-f),v=.5*u+(0<=u?+f:-f),b=Math.abs(l),d=Math.abs(v),g=o*Math.min(b,d),m=g/b,w=g/d,p=jo;p.set(i-l,r-v),a.apply(p,p);var D=p.x,E=p.y;p.set(i,r-v),a.apply(p,p);var M=p.x,S=p.y,j=M-D,T=S-E,N=m*j,I=m*T,C=D+N,A=E+I,R=M+j,y=S+T,L=R-N,k=y-I;p.set(i,r),a.apply(p,p);var x=p.x,B=p.y,_=x-M,P=B-S,F=w*_,U=w*P,G=M+F,z=S+U,H=G-j,V=z-T,W=H+N,X=V+I,Y=G+j,K=z+T,J=Y-N,Z=K-I,q=x-j,Q=B-T,$=x+j,tt=B+T,nt=x+_,it=B+P,rt=nt-F,et=it-U,ut=rt-j,st=et-T,ht=ut+N,ot=st+I,at=rt+j,ct=et+T,ft=at-N,lt=ct-I,vt=nt-j,bt=it-T,dt=vt+N,gt=bt+I,mt=nt+j,wt=it+T,pt=mt-N,Ot=wt-I;c[0]=O(D,E,C,A),c[1]=O(D,E,M,S),c[2]=O(D,E,q,Q);var Dt=2*n-1;t[++Dt]=D,t[++Dt]=E,t[++Dt]=C,t[++Dt]=A,t[++Dt]=H,t[++Dt]=V,t[++Dt]=W,t[++Dt]=X,t[++Dt]=L,t[++Dt]=k,t[++Dt]=R,t[++Dt]=y,t[++Dt]=J,t[++Dt]=Z,t[++Dt]=Y,t[++Dt]=K,t[++Dt]=ut,t[++Dt]=st,t[++Dt]=ht,t[++Dt]=ot,t[++Dt]=vt,t[++Dt]=bt,t[++Dt]=dt,t[++Dt]=gt,t[++Dt]=ft,t[++Dt]=lt,t[++Dt]=at,t[++Dt]=ct,t[++Dt]=pt,t[++Dt]=Ot,t[++Dt]=mt,t[++Dt]=wt,t[++Dt]=C,t[++Dt]=A,t[++Dt]=M,t[++Dt]=S,t[++Dt]=L,t[++Dt]=k,t[++Dt]=H,t[++Dt]=V,t[++Dt]=W,t[++Dt]=X,t[++Dt]=G,t[++Dt]=z,t[++Dt]=J,t[++Dt]=Z,t[++Dt]=Y,t[++Dt]=K,t[++Dt]=q,t[++Dt]=Q,t[++Dt]=x,t[++Dt]=B,t[++Dt]=x,t[++Dt]=B,t[++Dt]=$,t[++Dt]=tt,t[++Dt]=ut,t[++Dt]=st,t[++Dt]=ht,t[++Dt]=ot,t[++Dt]=rt,t[++Dt]=et,t[++Dt]=ft,t[++Dt]=lt,t[++Dt]=at,t[++Dt]=ct,t[++Dt]=dt,t[++Dt]=gt,t[++Dt]=nt,t[++Dt]=it,t[++Dt]=pt,t[++Dt]=Ot},Io=function(t,n,i,r){var e=3*n-1,u=1-r[0]/r[1],s=1-r[0]/r[2];i&it.TOP_LEFT?(t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1):(t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=s,t[++e]=0,t[++e]=u,t[++e]=s,t[++e]=0),i&it.TOP_RIGHT?(t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1):(t[++e]=u,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=u,t[++e]=s,t[++e]=0,t[++e]=1,t[++e]=s,t[++e]=0),i&it.BOTTOM_LEFT?(t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1):(t[++e]=1,t[++e]=s,t[++e]=0,t[++e]=u,t[++e]=s,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0),i&it.BOTTOM_RIGHT?(t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=1):(t[++e]=u,t[++e]=s,t[++e]=0,t[++e]=1,t[++e]=s,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0),t[++e]=u,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=s,t[++e]=0,t[++e]=u,t[++e]=s,t[++e]=0,t[++e]=0,t[++e]=s,t[++e]=0,t[++e]=u,t[++e]=s,t[++e]=0,t[++e]=1,t[++e]=s,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=0,t[++e]=0,t[++e]=0,t[++e]=0,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=s,t[++e]=0,t[++e]=u,t[++e]=s,t[++e]=0,t[++e]=0,t[++e]=s,t[++e]=0,t[++e]=u,t[++e]=s,t[++e]=0,t[++e]=1,t[++e]=s,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0},Co=function(t,n,i,r,e,u,s){var h,a,c,f,l,v,b,d,g,m,w,p,O=o(e),D=s[0],E=s[1],M=s[2],S=Math.max(0,1-s[0]/s[1]),j=Math.max(0,1-s[0]/s[2]);r&Pt.TOP?(h=2,a=1,c=1+j):(h=-2,a=-1,c=-1-j),r&Pt.RIGHT?(f=2,l=1,v=1+S):(f=-2,l=-1,v=-1-S),r&Pt.BOTTOM?(b=2,d=1,g=1+j):(b=-2,d=-1,g=-1-j),r&Pt.LEFT?(m=2,w=1,p=1+S):(m=-2,w=-1,p=-1-S);var T=6*n-1;u&it.TOP_LEFT?(t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=m,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=w,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=m,t[++T]=a,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=w,t[++T]=a):(t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=m,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=p,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=m,t[++T]=c,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=p,t[++T]=c),u&it.TOP_RIGHT?(t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=l,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=f,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=l,t[++T]=a,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=f,t[++T]=a):(t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=v,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=f,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=v,t[++T]=c,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=f,t[++T]=c),u&it.BOTTOM_LEFT?(t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=m,t[++T]=d,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=w,t[++T]=d,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=m,t[++T]=b,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=w,t[++T]=b):(t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=m,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=p,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=m,t[++T]=b,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=p,t[++T]=b),u&it.BOTTOM_RIGHT?(t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=l,t[++T]=d,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=f,t[++T]=d,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=l,t[++T]=b,t[++T]=i,t[++T]=O,t[++T]=D,t[++T]=D,t[++T]=f,t[++T]=b):(t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=v,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=f,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=v,t[++T]=b,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=f,t[++T]=b),t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=p,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=w,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=v,t[++T]=h,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=m,t[++T]=c,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=p,t[++T]=c,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=w,t[++T]=c,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=v,t[++T]=c,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=f,t[++T]=c,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=m,t[++T]=a,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=w,t[++T]=a,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=l,t[++T]=d,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=f,t[++T]=d,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=m,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=p,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=d,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=v,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=f,t[++T]=g,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=p,t[++T]=b,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=d,t[++T]=b,t[++T]=i,t[++T]=O,t[++T]=E,t[++T]=M,t[++T]=v,t[++T]=b},Ao=function(t,n,i,r){var e=i.x0,u=i.x1,s=i.x2,h=i.x3,o=i.y0,a=i.y1,c=i.y2,f=i.y3,l=.5*(e+u),v=.5*(o+a),b=.5*(h+s),d=.5*(f+c),g=.5*r[0]/r[1],m=.5*r[0]/r[2],w=g*(u-e),p=g*(a-o),O=m*(h-e),D=m*(f-o),E=2*n-1;t[++E]=e,t[++E]=o,t[++E]=e+w,t[++E]=o+p,t[++E]=e+O,t[++E]=o+D,t[++E]=e+w+O,t[++E]=o+p+D,t[++E]=u-w,t[++E]=a-p,t[++E]=u,t[++E]=a,t[++E]=u-w+O,t[++E]=a-p+D,t[++E]=u+O,t[++E]=a+D,t[++E]=h-O,t[++E]=f-D,t[++E]=h+w-O,t[++E]=f+p-D,t[++E]=h,t[++E]=f,t[++E]=h+w,t[++E]=f+p,t[++E]=s-w-O,t[++E]=c-p-D,t[++E]=s-O,t[++E]=c-D,t[++E]=s-w,t[++E]=c-p,t[++E]=s,t[++E]=c,t[++E]=e+w,t[++E]=o+p,t[++E]=l,t[++E]=v,t[++E]=u-w,t[++E]=a-p,t[++E]=e+O,t[++E]=o+D,t[++E]=e+O+w,t[++E]=o+D+p,t[++E]=l+O,t[++E]=v+D,t[++E]=u+O-w,t[++E]=a+D-p,t[++E]=u+O,t[++E]=a+D;var M=.5*(e+s),S=.5*(o+c);t[++E]=.5*(e+h),t[++E]=.5*(o+f),t[++E]=M,t[++E]=S,t[++E]=M,t[++E]=S,t[++E]=.5*(u+s),t[++E]=.5*(a+c),t[++E]=h-O,t[++E]=f-D,t[++E]=h-O+w,t[++E]=f-D+p,t[++E]=b-O,t[++E]=d-D,t[++E]=s-O-w,t[++E]=c-D-p,t[++E]=s-O,t[++E]=c-D,t[++E]=h+w,t[++E]=f+p,t[++E]=b,t[++E]=d,t[++E]=s-w,t[++E]=c-p},Ro=function(t){function n(n,i,r,e){var u=t.call(this,n,i,r,e)||this;return u.radius=NaN,u.corner=NaN,u}return B(n,t),n.prototype.init=function(t){t.updateIndices(),To(t.indices,this.vertexOffset,this.indexOffset)},n.prototype.update=function(t,n){this.updateVertexClippingStepAndUv(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n)},n.prototype.updateVertexClippingStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=n.radius,s=r!==this.sizeX||e!==this.sizeY||u!==this.radius,h=H(n),o=this.transformLocalId!==h,a=n.stroke,c=a.align,f=a.enable?a.width:0,l=a.side,v=a.style,b=this.strokeAlign!==c||this.strokeWidth!==f||this.strokeSide!==l||this.strokeStyle!==v,d=n.corner,g=d!==this.corner,m=V(n),w=W(m),p=m!==this.texture||w!==this.textureTransformId,O=s||b;if(O||o||g||p){this.sizeX=r,this.sizeY=e,this.radius=u,this.transformLocalId=h,this.strokeAlign=c,this.strokeWidth=f,this.strokeSide=l,this.strokeStyle=v,this.corner=d,this.texture=m,this.textureTransformId=w;var D=this.vertexOffset;t.updateVertices(),No(t.vertices,D,0,0,r,e,c,f,u,n.transform.internalTransform,So),(O||g||o)&&(t.updateSteps(),Co(t.steps,D,f,l,v,d,So)),(O||g)&&(t.updateClippings(),Io(t.clippings,D,d,So)),(O||p)&&(t.updateUvs(),Ao(t.uvs,D,X(m),So))}},n}(z),yo=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=Mo+h,c=24+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Ro(i,r,a-h,c-o),new Xt(i+Mo,r+24,h,o)]).init(n):null},Lo=function(t,n,i,r,e){return yo(t,n,i,r)},ko=function(t,n,i,r,e,u){var s=-i+e;if(t<=s)return n<=(h=-r+e)&&u&it.TOP_LEFT?(a=t-s)*a+(c=n-h)*c<=e*e:(o=+r-e)<=n&&u&it.BOTTOM_LEFT?(a=t-s)*a+(c=n-o)*c<=e*e:-i<=t;var h,o,a,c,f=+i-e;return f<=t?n<=(h=-r+e)&&u&it.TOP_RIGHT?(a=t-f)*a+(c=n-h)*c<=e*e:(o=+r-e)<=n&&u&it.BOTTOM_RIGHT?(a=t-f)*a+(c=n-o)*c<=e*e:t<=+i:-r<=n&&n<=+r},xo=function(t,n,i,r,e,u,s){var h=t.fill;if(h.enable||0<u){var o=t.radius*Math.min(r,e),a=t.corner;if(ko(n,i,r,e,o,a)){if(h.enable)return!0;var c=u*s,f=Math.max(0,r-c),l=Math.max(0,e-c),v=Math.max(0,o-c);if(!ko(n,i,f,l,v,a)){var b=t.stroke.side;if(b===Pt.ALL)return!0;if(n<=-f+v){var d=!!(b&Pt.LEFT);return i<=-l+v?!(!(g=!!(b&Pt.TOP))||!d)||(g?-f<=i:!!d&&n<=-f):+l-v<=i?!(!(m=!!(b&Pt.BOTTOM))||!d)||(m?+f<=i:!!d&&n<=-f):d}if(+f-v<=n){var g,m,w=!!(b&Pt.RIGHT);return i<=-l+v?!(!(g=!!(b&Pt.TOP))||!w)||(g?-f<=i:!!w&&+f<=n):+l-v<=i?!(!(m=!!(b&Pt.BOTTOM))||!w)||(m?+f<=i:!!w&&+f<=n):w}return i<=-l+v?!!(b&Pt.TOP):+l-v<=i&&!!(b&Pt.BOTTOM)}}}return!1},Bo=function(t){function n(n){return void 0===n&&(n=r.RECTANGLE_ROUNDED),t.call(this,n)||this}return B(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&xo(this,n,i,r,e,u,s)},n}(Bt),_o=function(t){function n(n){void 0===n&&(n=r.BUTTON);var i=t.call(this,n)||this;return i.Xs=!1,i.Th=!1,i}return B(n,t),Object.defineProperty(n.prototype,"isToggle",{get:function(){return this.Xs},set:function(t){this.Xs=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isGrouped",{get:function(){return this.Th},set:function(t){this.Th=t},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n),r=this.Xs?1:0,e=this.Th?2:0;return i[15]=n.addResource("[".concat(r|e,"]")),i},n}(Bo),Po=function(t,n,i){i=i||new _o;var r=n.resources,e=t[15];if(0<=e&&e<r.length){var u=n.getExtension(e);null==u&&(u=JSON.parse(r[e]),n.setExtension(e,u)),i.isToggle=!!(1&u[0]),i.isGrouped=!!(2&u[0])}return po(t,n,i)},Fo=function(t){function n(n){var i=t.call(this,qt.COLOR_FILL_AND_STROKE|qt.COLOR_TEXT|qt.COLOR_TEXT_OUTLINE|qt.CURSOR)||this,r=n.fill,e=r.color,u=i.toOnHovered(e),s=2*u;i.Nh=e,i.Ih=Jt.toGrayscale(e),i.Ch=Jt.darken(e,s),i.Ah=Jt.darken(e,u);var h=r.alpha;i.Rh=h,i.yh=.5*h;var o=n.stroke,a=o.color,c=i.toOnHovered(a),f=2*c;i.Lh=a,i.kh=Jt.toGrayscale(a),i.xh=Jt.darken(a,f),i.Bh=Jt.darken(a,c);var l=o.alpha;i._h=l,i.Ph=.5*l;var v=n.text,b=v.color;i.Fs=b,i.Fh=Jt.toGrayscale(b);var d=v.alpha;i.Us=d,i.Uh=.5*d;var g=v.outline,m=g.color;i.Gh=m,i.zh=Jt.toGrayscale(m);var w=g.alpha;return i.Hh=w,i.Vh=.5*w,i}return B(n,t),n.prototype.toOnHovered=function(t){var n,i=Jt.toLuma(t);return 128<=i?.15*(1-(n=(i-128)/127))+.03*n:-.15*(1-(n=(127-i)/127))-.175*n},n.prototype.execute=function(t,n,i){var r=t.state;t.fill.set(void 0,this.getFillColor(r),this.getFillAlpha(r)),t.stroke.set(void 0,this.getStrokeColor(r),this.getStrokeAlpha(r)),t.text.set(void 0,this.getTextColor(r),this.getTextAlpha(r)),t.text.outline.set(void 0,this.getTextOutlineColor(r),this.getTextOutlineAlpha(r)),t.cursor=this.getCursor(r),n.written|=this.reset},n.prototype.getFillColor=function(t){return t.inDisabled?this.Ih:t.isPressed||t.isActive?this.Ch:t.isFocused||t.isHovered?this.Ah:this.Nh},n.prototype.getFillAlpha=function(t){return t.inDisabled?this.yh:this.Rh},n.prototype.getStrokeColor=function(t){return t.inDisabled?this.kh:t.isPressed||t.isActive?this.xh:t.isFocused||t.isHovered?this.Bh:this.Lh},n.prototype.getStrokeAlpha=function(t){return t.inDisabled?this.Ph:this._h},n.prototype.getTextColor=function(t){return t.inDisabled?this.Fh:this.Fs},n.prototype.getTextAlpha=function(t){return t.inDisabled?this.Uh:this.Us},n.prototype.getTextOutlineColor=function(t){return t.inDisabled?this.zh:this.Gh},n.prototype.getTextOutlineAlpha=function(t){return t.inDisabled?this.Vh:this.Hh},n.prototype.getCursor=function(t){return t.isActionable?"pointer":""},n}(rn),Uo=function(t){function n(n){var i=t.call(this,qt.COLOR_FILL_AND_STROKE|qt.COLOR_TEXT|qt.COLOR_TEXT_OUTLINE|qt.CURSOR)||this,r=n.fill,e=r.color;i.Wh=e;var u=i.toOnHovered(e),s=2*u;i.Xh=Jt.darken(e,s),i.Yh=Jt.darken(e,u);var h=15197671;i.Nh=h;var o=i.toOnHovered(h),a=2*o;i.Ch=Jt.darken(h,a),i.Ah=Jt.darken(h,o);var c=r.alpha;i.Rh=c,i.yh=.5*c;var f=n.stroke,l=f.color;i.Kh=l;var v=i.toOnHovered(l),b=2*v;i.Jh=Jt.darken(l,b),i.Zh=Jt.darken(l,v);var d=15197671;i.Lh=d;var g=i.toOnHovered(d),m=2*g;i.xh=Jt.darken(d,m),i.qh=Jt.darken(d,g);var w=f.alpha;i._h=w,i.Ph=.5*w;var p=n.text,O=p.color;i.Qh=O,i.Fh=Jt.toGrayscale(O),i.Fs=5197647;var D=p.alpha;i.Us=D,i.Uh=.5*D;var E=p.outline,M=E.color;i.Gh=M,i.zh=Jt.toGrayscale(M);var S=E.alpha;return i.Hh=S,i.Vh=.5*S,i}return B(n,t),n.prototype.toOnHovered=function(t){var n,i=Jt.toLuma(t);return 128<=i?.15*(1-(n=(i-128)/127))+.03*n:-.15*(1-(n=(127-i)/127))-.175*n},n.prototype.execute=function(t,n,i){var r=t.state;t.fill.set(void 0,this.getFillColor(r),this.getFillAlpha(r)),t.stroke.set(void 0,this.getStrokeColor(r),this.getStrokeAlpha(r)),t.text.set(void 0,this.getTextColor(r),this.getTextAlpha(r)),t.text.outline.set(void 0,this.getTextOutlineColor(r),this.getTextOutlineAlpha(r)),t.cursor=this.getCursor(r),n.written|=this.reset},n.prototype.getFillColor=function(t){return t.inDisabled?this.Nh:t.isActive?t.isPressed?this.Xh:t.isFocused||t.isHovered?this.Yh:this.Wh:t.isPressed?this.Ch:t.isFocused||t.isHovered?this.Ah:this.Nh},n.prototype.getFillAlpha=function(t){return t.inDisabled?this.yh:this.Rh},n.prototype.getStrokeColor=function(t){return t.inDisabled?this.Lh:t.isActive?t.isPressed?this.Jh:t.isFocused||t.isHovered?this.Zh:this.Kh:t.isPressed?this.xh:t.isFocused||t.isHovered?this.qh:this.Lh},n.prototype.getStrokeAlpha=function(t){return t.inDisabled?this.Ph:this._h},n.prototype.getTextColor=function(t){return t.inDisabled?this.Fh:t.isActive?this.Qh:this.Fs},n.prototype.getTextAlpha=function(t){return t.inDisabled?this.Uh:this.Us},n.prototype.getTextOutlineColor=function(t){return t.inDisabled?this.zh:this.Gh},n.prototype.getTextOutlineAlpha=function(t){return t.inDisabled?this.Vh:this.Hh},n.prototype.getCursor=function(t){return t.isActionable?"pointer":""},n}(rn),Go=function(t){function n(n){var i=t.call(this,n)||this;return n instanceof _o&&(i.Xs=n.isToggle,i.Th=n.isGrouped),i}return B(n,t),n.prototype.isActionable=function(){return!0},n.prototype.initialize=function(n){this.actions.unshift(this.Xs?new Uo(this):new Fo(this)),t.prototype.initialize.call(this,n)},n.prototype.onClick=function(n,i){var r=n.state,e=r.isClicked;r.lock(),t.prototype.onClick.call(this,n,i),!e&&r.isClicked&&(this.Xs?r.isActive=!r.isActive:r.isActive||(r.isActivated=!0)),r.unlock()},n.prototype.onStateChange=function(n,i,r){t.prototype.onStateChange.call(this,n,i,r),this.Xs&&this.Th&&i.is(lt.ACTIVATED)&&this.onActivated(n)},n.prototype.onActivated=function(t){var n=t.parent;if(null!=n)for(var i=n.children,r=0,e=i.length;r<e;++r){var u=i[r];u!==t&&u instanceof _o&&u.isToggle&&u.isGrouped&&(u.state.isActive=!1)}},n}(Qt),zo=function(){e[r.BUTTON]=Lo,n[r.BUTTON]=Po,Eo[r.BUTTON]=Go,Ar.set(r.BUTTON,Cr.PRIMITIVE|Cr.STROKE_SIDE|Cr.BORDER_RADIUS)},Ho=[0,0],Vo=new t.Point,Wo=function(t,n){var i=3*n-1;t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=0,t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=0,t[++i]=1,t[++i]=0,t[++i]=0,t[++i]=1,t[++i]=1,t[++i]=0,t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=0,t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=1,t[++i]=1},Xo=function(t,n,i){var r=3*i-1;t[++r]=n,t[++r]=n+1,t[++r]=n+3,t[++r]=n+1,t[++r]=n+4,t[++r]=n+3,t[++r]=n+1,t[++r]=n+2,t[++r]=n+4,t[++r]=n+2,t[++r]=n+5,t[++r]=n+4,t[++r]=n+3,t[++r]=n+4,t[++r]=n+6,t[++r]=n+4,t[++r]=n+7,t[++r]=n+6,t[++r]=n+4,t[++r]=n+5,t[++r]=n+7,t[++r]=n+5,t[++r]=n+8,t[++r]=n+7},Yo=function(t,n,i,r,e,u,s,h,o,a){var c=Vo,f=s*h,l=.5*e+(0<=e?+f:-f),v=.5*u+(0<=u?+f:-f);c.set(-l+i,-v+r),o.apply(c,c);var b=c.x,d=c.y;c.set(0+i,-v+r),o.apply(c,c);var g=c.x,m=c.y,w=g-b,p=m-d;c.set(i,r),o.apply(c,c);var D=c.x,E=c.y,M=D+(D-g),S=E+(E-m),j=D-w,T=E-p,N=2*n-1;t[++N]=b,t[++N]=d,t[++N]=g,t[++N]=m,t[++N]=g+w,t[++N]=m+p,t[++N]=j,t[++N]=T,t[++N]=D,t[++N]=E,t[++N]=D+w,t[++N]=E+p,t[++N]=M-w,t[++N]=S-p,t[++N]=M,t[++N]=S,t[++N]=M+w,t[++N]=S+p,a[0]=O(b,d,g,m),a[1]=O(b,d,j,T)},Ko=function(t,n,i,r,e,u){for(var s=o(e),h=6*i-1,a=3*i,c=0;c<9;c+=1,a+=3)t[++h]=r,t[++h]=s,t[++h]=u[0],t[++h]=u[1],t[++h]=1+n[a],t[++h]=1+n[a+1]},Jo=function(t,n,i){var r=i.x0,e=i.x1,u=i.x2,s=i.x3,h=i.y0,o=i.y1,a=i.y2,c=i.y3,f=2*n-1;t[++f]=r,t[++f]=h,t[++f]=.5*(r+e),t[++f]=.5*(h+o),t[++f]=e,t[++f]=o,t[++f]=.5*(r+s),t[++f]=.5*(h+c),t[++f]=.5*(r+u),t[++f]=.5*(h+a),t[++f]=.5*(e+u),t[++f]=.5*(o+a),t[++f]=s,t[++f]=c,t[++f]=.5*(s+u),t[++f]=.5*(c+a),t[++f]=u,t[++f]=a},Zo=function(t){function n(n,i){return t.call(this,n,i,9,8)||this}return B(n,t),n.prototype.init=function(t){t.updateClippings(),t.updateIndices();var n=this.vertexOffset;Wo(t.clippings,n),Xo(t.indices,n,this.indexOffset)},n.prototype.update=function(t,n){this.updateVertexAndStep(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n),this.updateUv(t,n)},n.prototype.updateVertexAndStep=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=H(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.style,l=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeStyle!==f;(u||h||l)&&(this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeStyle=f,t.updateVertices(),t.updateSteps(),Yo(t.vertices,this.vertexOffset,0,0,r,e,a,c,n.transform.internalTransform,Ho),Ko(t.steps,t.clippings,this.vertexOffset,c,f,Ho))},n.prototype.updateUv=function(t,n){var i=V(n),r=W(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r,t.updateUvs();var e=X(i);Jo(t.uvs,this.vertexOffset,e)}},n}(z),qo=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=9+h,c=8+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Zo(i,r),new Xt(i+9,r+8,h,o)]).init(n):null},Qo=function(t){function n(n){return void 0===n&&(n=r.CIRCLE),t.call(this,n)||this}return B(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&_t(this,n,i,r,e,u,s)},n}(Bt),$o=function(t,n,i){return po(t,n,i||new Qo)},ta=function(){e[r.CIRCLE]=qo,n[r.CIRCLE]=$o},na=new t.Point,ia=function(t){return t?t.formatted.length:0},ra=function(t){return 12*Math.ceil(ia(t)/12)},ea=function(t,n){return n?4*t+2:4*t},ua=function(t,n){return ea(t,n)-2},sa=function(t,n,i,r){for(var e=3*n-1,u=3*(n+i)-1,s=0;s<r;++s)t[++e]=1,t[++e]=0,t[++e]=3,t[++e]=0,t[++e]=1,t[++e]=5,t[++e]=1,t[++e]=0,t[++e]=4,t[++e]=0,t[++e]=1,t[++e]=6;for(;e<u;)t[++e]=1,t[++e]=0,t[++e]=3,t[++e]=0,t[++e]=1,t[++e]=5},ha=function(t,n,i,r){for(var e=3*i-1,u=3*(i+r)-1,s=n;e<u;)t[++e]=s+0,t[++e]=s+2,t[++e]=s+1,t[++e]=s+1,t[++e]=s+2,t[++e]=s+3,s+=2},oa=function(t,n,i,r,e,u){for(var s=1/Math.max(1e-5,u),h=e.x0,o=e.x1,a=e.x2,c=e.x3,f=e.y0,l=e.y1,v=e.y2,b=e.y3,d=o-h,g=l-f,m=a-c,w=v-b,p=(i<<1)-1,O=(i+r<<1)-1,D=(i<<2)-8;p<O;){var E=n[D+=8]*s;t[++p]=h+E*d,t[++p]=f+E*g,t[++p]=c+E*m,t[++p]=b+E*w}},aa=function(t,n,i,r,e,u,s,h,o,a,c,f){var l=F;null==l&&(F=l=[]);for(var v=f.a,b=f.b,d=f.c,g=f.d,m=f.tx,w=f.ty,p=0;p<u;++p){var O=p<<1,D=h[O],E=h[O+1];l[O]=v*D+d*E+m,l[O+1]=b*D+g*E+w}return fa(t,n,i,r,e,u,s,l,o,a,c)},ca=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b){n[++t]=s,n[++t]=h,r[++i]=o,r[++i]=a,r[++i]=c,r[++i]=f,r[++i]=l,r[++i]=v,u[e+=1]=b,n[++t]=s,n[++t]=h,r[++i]=o,r[++i]=a,r[++i]=c,r[++i]=f,r[++i]=l,r[++i]=v,u[e+=4]=b},fa=function(t,n,i,r,e,u,s,h,o,a,c){var f=o.length;if(0<f){if(s){for(var l=0,v=0,b=r,d=0,g=o[0],m=1;m<f;++m)2<=(d=o[m])-g&&(v=va(t,n,i,b,-1,h,g,d,u,a,c,v),l=Math.max(l,v),b+=ea(d-g,!1)),g=d;return 2<=(d=o[0]+u)-g?(v=va(t,n,i,b,r+e-b,h,g,d,u,a,c,v),l=Math.max(l,v),b+=ea(d-g,!1)):la(t,n,i,b,r+e-b,h,g,d,u,a,c,v),l}for(l=0,v=0,b=r,2<=(d=o[0])&&(v=va(t,n,i,b,-1,h,0,d,u,a,c,v),l=Math.max(l,v),b+=ea(d,!1)),g=d,m=1;m<f;++m)2<=(d=o[m])-g&&(v=va(t,n,i,b,-1,h,g,d,u,a,c,v),l=Math.max(l,v),b+=ea(d-g,!1)),g=d;return 2<=(d=u)-g?(v=va(t,n,i,b,r+e-b,h,g,d,u,a,c,v),l=Math.max(l,v),b+=ea(d-g,!1)):la(t,n,i,b,r+e-b,h,g,d,u,a,c,v),l}return s?ba(t,n,i,r,e,h,0,u,u,a,c):va(t,n,i,r,e,h,0,u,u,a,c,0)},la=function(t,n,i,r,e,u,s,h,a,c,f,l){if(0<=e)for(var v=o(f),b=(r<<1)-1,d=6*r-1,g=(r<<2)-1,m=(r+e<<1)-1,w=s%a<<1,p=u[w],O=u[w+1];b<m;)t[++b]=p,t[++b]=O,n[++d]=0,n[++d]=v,n[++d]=-1,n[++d]=0,n[++d]=1,n[++d]=0,i[++g]=l,i[++g]=0,i[++g]=0,i[++g]=l;return 0},va=function(t,n,i,r,e,u,s,a,c,f,l,v){var b=o(l),d=s%c<<1,g=u[d],m=u[d+1],w=(s+1)%c<<1,p=u[w],D=u[w+1],E=g-(p-g),M=m-(D-m),S=(r<<1)-1,j=6*r-1,T=(r<<2)-1,N=0;ca(S,t,j,n,T,i,g,m,f,b,E,M,p,D,v),ca(S+=4,t,j+=12,n,T+=8,i,g,m,f,b,E,M,p,D,N),S+=4,j+=12,T+=8;for(var I=s+1,C=a-1;I<C;++I){E=g,M=m,g=p,m=D;var A=(I+1)%c<<1;p=u[A],D=u[A+1],N+=O(E,M,g,m),ca(S,t,j,n,T,i,g,m,f,b,E,M,p,D,N),ca(S+=4,t,j+=12,n,T+=8,i,g,m,f,b,E,M,p,D,N),S+=4,j+=12,T+=8}E=g,M=m,p=(g=p)+(g-E),D=(m=D)+(m-M),N+=O(E,M,g,m),ca(S,t,j,n,T,i,g,m,f,b,E,M,p,D,N),ca(S+=4,t,j+=12,n,T+=8,i,g,m,f,b,E,M,p,D,N),S+=4,j+=12,T+=8;var R=h(N,f,l,na),y=R.x,L=R.y,k=(r<<2)-1;for(I=k,C=k+8;I<C;I+=4)i[I+2]=y,i[I+3]=L,i[I+4]=v;for(I=k+8;I<T;I+=4)i[I+2]=y,i[I+3]=L,i[I+4]=N;if(0<=e)for(var x=(r+e<<1)-1;S<x;)t[++S]=g,t[++S]=m,n[++j]=0,n[++j]=b,n[++j]=E,n[++j]=M,n[++j]=p,n[++j]=D,i[++T]=N,i[++T]=y,i[++T]=L,i[++T]=N;return N},ba=function(t,n,i,r,e,u,s,a,c,f,l){for(var v=o(l),b=(a-1)%c<<1,d=0,g=0,m=u[b],w=u[b+1],p=s%c<<1,D=u[p],E=u[p+1],M=0,S=(r<<1)-1,j=6*r-1,T=(r<<2)-1,N=s;N<a;++N){d=m,g=w,m=D,w=E;var I=(N+1)%c<<1;D=u[I],E=u[I+1],M+=O(d,g,m,w),ca(S,t,j,n,T,i,m,w,f,v,d,g,D,E,M),ca(S+=4,t,j+=12,n,T+=8,i,m,w,f,v,d,g,D,E,M),S+=4,j+=12,T+=8}d=m,g=w,m=D,w=E;var C=(s+1)%c<<1;D=u[C],E=u[C+1],M+=O(d,g,m,w),ca(S,t,j,n,T,i,m,w,f,v,d,g,D,E,M),S+=4,j+=12,T+=8;var A=h(M,f,l,na),R=A.x,y=A.y;for(N=(r<<2)-1;N<T;N+=4)i[N+2]=R,i[N+3]=y,i[N+4]=-1;if(0<=e)for(var L=(r+e<<1)-1;S<L;)t[++S]=m,t[++S]=w,n[++j]=f,n[++j]=v,n[++j]=d,n[++j]=g,n[++j]=D,n[++j]=E,i[++T]=M,i[++T]=R,i[++T]=y,i[++T]=-1;return M},da=function(t){function n(n,i,r,e){var u=t.call(this,n,i,r,e)||this;return u.pointId=-1,u.pointCount=0,u.pointsClosed=!1,u.length=1,u}return B(n,t),n.prototype.init=function(t){t.updateIndices(),ha(t.indices,this.vertexOffset,this.indexOffset,this.indexCount)},n.prototype.isCompatible=function(t){return ea(ra(t.points),!0)===this.vertexCount},n.prototype.update=function(t,n){this.updateLineClipping(t,n),this.updateLineVertexStepAndColorFill(t,n),this.updateColorStroke(t,n),this.updateLineUv(t,n)},n.prototype.updateLineClipping=function(t,n){var i=n.points;if(i){var r=i.formatted.length;this.pointCount!==r&&(this.pointCount=r,this.pointId=-1,t.updateClippings(),sa(t.clippings,this.vertexOffset,this.vertexCount,r))}},n.prototype.updateLineVertexStepAndColorFill=function(t,n){var i=n.points;if(i){var r=i.id,e=i.formatted,u=!!(e.style&U.CLOSED),s=r!==this.pointId||u!==this.pointsClosed,h=n.stroke,o=h.enable?h.width:0,a=h.style,c=this.strokeWidth!==o||this.strokeStyle!==a,f=H(n),l=this.transformLocalId!==f;(s||l||c)&&(this.pointId=r,this.pointsClosed=u,this.strokeWidth=o,this.strokeStyle=a,this.transformLocalId=f,s&&(this.textureTransformId=NaN),t.updateVertices(),t.updateSteps(),t.updateColorFills(),this.length=aa(t.vertices,t.steps,t.colorFills,this.vertexOffset,this.vertexCount,this.pointCount,this.pointsClosed,e.values,e.segments,o,a,n.transform.internalTransform))}},n.prototype.updateLineUv=function(t,n){var i=V(n),r=W(i);i===this.texture&&r===this.textureTransformId||(this.texture=i,this.textureTransformId=r,t.updateUvs(),oa(t.uvs,t.colorFills,this.vertexOffset,this.vertexCount,X(i),this.length))},n}(z),ga=[0,0,0],ma=new t.Point,wa=function(t,n){var i=3*n-1;t[++i]=0,t[++i]=0,t[++i]=0,t[++i]=1,t[++i]=0,t[++i]=0,t[++i]=1,t[++i]=0,t[++i]=0,t[++i]=0,t[++i]=1,t[++i]=0,t[++i]=0,t[++i]=1,t[++i]=0,t[++i]=1,t[++i]=0,t[++i]=0,t[++i]=1,t[++i]=0,t[++i]=0},pa=function(t,n,i){var r=3*i-1;t[++r]=n+0,t[++r]=n+1,t[++r]=n+2,t[++r]=n+0,t[++r]=n+3,t[++r]=n+4,t[++r]=n+0,t[++r]=n+5,t[++r]=n+6},Oa=function(t,n,i,r,e,u,s,h,o,a){var c=s*h,f=.5*e+(0<=e?+c:-c),l=.5*u+(0<=u?+c:-c),v=2*f*l/(f+Math.sqrt(f*f+4*l*l)),b=ma;b.set(i,r-l),o.apply(b,b);var d=b.x,g=b.y;b.set(i,r),o.apply(b,b);var m=b.x,w=b.y;b.set(i+f,r),o.apply(b,b);var p=m-d,D=w-g,E=b.x+p,M=b.y+D,S=m+(m-b.x)+p,j=w+(w-b.y)+D;b.set(i,r+l-v),o.apply(b,b);var T=b.x,N=b.y,I=m+p,C=w+D;a[0]=O(I,C,T,N),a[1]=O(E,M,I,C),a[2]=O(d,g,m,w);var A=(n<<1)-1;t[++A]=T,t[++A]=N,t[++A]=d,t[++A]=g,t[++A]=E,t[++A]=M,t[++A]=E,t[++A]=M,t[++A]=S,t[++A]=j,t[++A]=S,t[++A]=j,t[++A]=d,t[++A]=g},Da=function(t,n,i,r,e,u,s){for(var h=o(u),a=s[0],c=6*i-1,f=3*i,l=0;l<r;l+=1,f+=3)t[++c]=e,t[++c]=h,t[++c]=a,t[++c]=a,t[++c]=1+n[f],t[++c]=1+n[f+1]},Ea=function(t,n,i,r){var e=n.x0,u=n.x1,s=n.x2,h=n.x3,o=n.y0,a=n.y1,c=n.y2,f=n.y3,l=.5*(e+u),v=.5*(o+a),b=1-.5*r[0]/r[2],d=l+b*(h-e),g=v+b*(f-o),m=(i<<1)-1;t[++m]=d,t[++m]=g,t[++m]=l,t[++m]=v,t[++m]=s,t[++m]=c,t[++m]=s,t[++m]=c,t[++m]=h,t[++m]=f,t[++m]=h,t[++m]=f,t[++m]=l,t[++m]=v},Ma=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.updateColorFill=function(t,n){var i=n.points;if(null!=i){var r=i.getMarker();if(null!=r){var e=this.toMarker(r).fill,u=n.visible&&e.enable,s=e.color,h=u?e.alpha:0;s===this.colorFill&&h===this.alphaFill||(this.colorFill=s,this.alphaFill=h,t.updateColorFills(),G(s,h,this.vertexOffset,this.vertexCount,t.colorFills))}}},n}(z),Sa=function(n){function i(t,i){var r=n.call(this,t,i,7,3)||this;return r.pointId=-1,r}return B(i,n),i.prototype.init=function(t){t.updateClippings(),t.updateIndices(),wa(t.clippings,this.vertexOffset),pa(t.indices,this.vertexOffset,this.indexOffset)},i.prototype.update=function(t,n){this.updateVertexStepAndUv(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n)},i.prototype.updateVertexStepAndUv=function(n,r){var e,u=r.points;if(null!=u){var s=u.getMarker();if(null!=s){var h=this.toMarker(s),o=h.size,a=o.x,c=o.y,f=a!==this.sizeX||c!==this.sizeY,l=H(r),v=this.transformLocalId!==l,b=r.stroke,d=b.align,g=b.enable?b.width:0,m=b.style,w=this.strokeAlign!==d||this.strokeWidth!==g||this.strokeStyle!==m,p=V(r),O=W(p),D=p!==this.texture||O!==this.textureTransformId,E=f||w,M=u.id,S=M!==this.pointId;if(E||v||D||S){this.sizeX=a,this.sizeY=c,this.transformLocalId=l,this.strokeAlign=d,this.strokeWidth=g,this.strokeStyle=m,this.texture=p,this.textureTransformId=O,this.pointId=M;var j=this.vertexOffset,T=null!==(e=i.WORK)&&void 0!==e?e:i.WORK=new t.Matrix;T.copyFrom(h.transform).prepend(r.transform.internalTransform),n.updateVertices(),Oa(n.vertices,j,0,0,a,c,d,g,T,ga),(E||v)&&(n.updateSteps(),Da(n.steps,n.clippings,j,7,g,m,ga)),(E||D)&&(n.updateUvs(),Ea(n.uvs,X(p),j,ga))}}}},i}(Ma),ja=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMarker=function(t){return t.head},n}(Sa),Ta=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMarker=function(t){return t.tail},n}(Sa),Na=function(n){function i(t,i){var r=n.call(this,t,i,9,8)||this;return r.pointId=-1,r}return B(i,n),i.prototype.init=function(t){t.updateClippings(),t.updateIndices();var n=this.vertexOffset;Wo(t.clippings,n),Xo(t.indices,n,this.indexOffset)},i.prototype.update=function(t,n){this.updateVertexAndStep(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n),this.updateUv(t,n)},i.prototype.updateVertexAndStep=function(n,r){var e,u=r.points;if(null!=u){var s=u.getMarker();if(null!=s){var h=this.toMarker(s),o=h.size,a=o.x,c=o.y,f=a!==this.sizeX||c!==this.sizeY,l=H(r),v=this.transformLocalId!==l,b=r.stroke,d=b.align,g=b.enable?b.width:0,m=b.style,w=this.strokeAlign!==d||this.strokeWidth!==g||this.strokeStyle!==m,p=u.id,O=p!==this.pointId;if(f||v||w||O){this.sizeX=a,this.sizeY=c,this.transformLocalId=l,this.strokeAlign=d,this.strokeWidth=g,this.strokeStyle=m,this.pointId=p;var D=null!==(e=i.WORK)&&void 0!==e?e:i.WORK=new t.Matrix;D.copyFrom(h.transform).prepend(r.transform.internalTransform),n.updateVertices(),n.updateSteps(),Yo(n.vertices,this.vertexOffset,0,0,a,c,d,g,D,Ho),Ko(n.steps,n.clippings,this.vertexOffset,g,m,Ho)}}}},i.prototype.updateUv=function(t,n){var i=V(n),r=W(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r,t.updateUvs();var e=X(i);Jo(t.uvs,this.vertexOffset,e)}},i}(Ma),Ia=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMarker=function(t){return t.head},n}(Na),Ca=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMarker=function(t){return t.tail},n}(Na),Aa=function(){function n(t,n){this.vertexOffset=t,this.indexOffset=n,this.vertexCount=0,this.indexCount=0,this.texture=null}return n.prototype.init=function(t){},n.prototype.isCompatible=function(t){return!0},n.prototype.update=function(t,n){this.texture=V(n)},n.prototype.buildUnit=function(n){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;if(r!==n.baseTexture){n.baseTexture=r;var e=this.indexOffset;n.push(i,e)}},n}(),Ra=24,ya=16,La=[0,0,0,0],ka=new t.Point,xa=function(t,n,i){var r=1-i[0],e=1-i[1],u=3*n-1;t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=e,t[++u]=0,t[++u]=0,t[++u]=e,t[++u]=0,t[++u]=0,t[++u]=e,t[++u]=0,t[++u]=0,t[++u]=e,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=r,t[++u]=0,t[++u]=0,t[++u]=r,t[++u]=0,t[++u]=0,t[++u]=r,t[++u]=0,t[++u]=0,t[++u]=r,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0,t[++u]=1,t[++u]=0,t[++u]=0},Ba=function(t,n,i){var r=3*i-1;t[++r]=n+0,t[++r]=n+1,t[++r]=n+4,t[++r]=n+4,t[++r]=n+1,t[++r]=n+2,t[++r]=n+4,t[++r]=n+2,t[++r]=n+5,t[++r]=n+5,t[++r]=n+2,t[++r]=n+3,t[++r]=n+8,t[++r]=n+6,t[++r]=n+9,t[++r]=n+9,t[++r]=n+6,t[++r]=n+7,t[++r]=n+9,t[++r]=n+7,t[++r]=n+10,t[++r]=n+10,t[++r]=n+7,t[++r]=n+11,t[++r]=n+12,t[++r]=n+16,t[++r]=n+13,t[++r]=n+13,t[++r]=n+16,t[++r]=n+17,t[++r]=n+13,t[++r]=n+17,t[++r]=n+14,t[++r]=n+14,t[++r]=n+17,t[++r]=n+15,t[++r]=n+18,t[++r]=n+20,t[++r]=n+21,t[++r]=n+18,t[++r]=n+21,t[++r]=n+22,t[++r]=n+18,t[++r]=n+22,t[++r]=n+19,t[++r]=n+19,t[++r]=n+22,t[++r]=n+23},_a=function(t,n,i,r,e,u,s,h,o,a){var c=s*h,f=.5*e+(0<=e?+c:-c),l=.5*u+(0<=u?+c:-c),v=ka;v.set(i-f,r-l),o.apply(v,v);var b=v.x,d=v.y;v.set(i+f,r-l),o.apply(v,v);var g=v.x,m=v.y;v.set(i+f,r+l),o.apply(v,v);var w=v.x,p=v.y,D=b+(w-g),E=d+(p-m),M=.5*O(b,d,g,m),S=.5*O(g,m,w,p),j=1,T=1;M<=S?T=M/S:j=S/M,a[0]=j,a[1]=T,a[2]=M,a[3]=S;var N=j*(g-b)*.5,I=j*(m-d)*.5,C=T*(D-b)*.5,A=T*(E-d)*.5,R=(n<<1)-1;t[++R]=b,t[++R]=d,t[++R]=b+N,t[++R]=d+I,t[++R]=g-N,t[++R]=m-I,t[++R]=g,t[++R]=m,t[++R]=b+N+C,t[++R]=d+I+A,t[++R]=g-N+C,t[++R]=m-I+A,t[++R]=D+N-C,t[++R]=E+I-A,t[++R]=w-N-C,t[++R]=p-I-A,t[++R]=D,t[++R]=E,t[++R]=D+N,t[++R]=E+I,t[++R]=w-N,t[++R]=p-I,t[++R]=w,t[++R]=p,t[++R]=b,t[++R]=d,t[++R]=b+C,t[++R]=d+A,t[++R]=D-C,t[++R]=E-A,t[++R]=D,t[++R]=E,t[++R]=b+C+N,t[++R]=d+A+I,t[++R]=D-C+N,t[++R]=E-A+I,t[++R]=g+C-N,t[++R]=m+A-I,t[++R]=w-C-N,t[++R]=p-A-I,t[++R]=g,t[++R]=m,t[++R]=g+C,t[++R]=m+A,t[++R]=w-C,t[++R]=p-A,t[++R]=w,t[++R]=p},Pa=function(t,n,i,r,e,u){var s,h,a,c,f,l,v,b,d=o(e),g=u[0],m=u[1],w=Math.max(0,1-g),p=Math.max(0,1-m),O=u[2],D=u[3];r&Pt.TOP?(s=2,h=1+p):(s=-2,h=-1-p),r&Pt.RIGHT?(a=2,c=1+w):(a=-2,c=-1-w),r&Pt.BOTTOM?(f=2,l=1+p):(f=-2,l=-1-p),r&Pt.LEFT?(v=2,b=1+w):(v=-2,b=-1-w);var E=6*(t-1)-1;Fa(n,E+=6,i,d,O,D,v,s),Fa(n,E+=6,i,d,O,D,b,s),Fa(n,E+=6,i,d,O,D,c,s),Fa(n,E+=6,i,d,O,D,a,s),Fa(n,E+=6,i,d,O,D,b,h),Fa(n,E+=6,i,d,O,D,c,h),Fa(n,E+=6,i,d,O,D,b,l),Fa(n,E+=6,i,d,O,D,c,l),Fa(n,E+=6,i,d,O,D,v,f),Fa(n,E+=6,i,d,O,D,b,f),Fa(n,E+=6,i,d,O,D,c,f),Fa(n,E+=6,i,d,O,D,a,f),Fa(n,E+=6,i,d,O,D,v,s),Fa(n,E+=6,i,d,O,D,v,h),Fa(n,E+=6,i,d,O,D,v,l),Fa(n,E+=6,i,d,O,D,v,f),Fa(n,E+=6,i,d,O,D,b,h),Fa(n,E+=6,i,d,O,D,b,l),Fa(n,E+=6,i,d,O,D,c,h),Fa(n,E+=6,i,d,O,D,c,l),Fa(n,E+=6,i,d,O,D,a,s),Fa(n,E+=6,i,d,O,D,a,h),Fa(n,E+=6,i,d,O,D,a,l),Fa(n,E+=6,i,d,O,D,a,f)},Fa=function(t,n,i,r,e,u,s,h){t[++n]=i,t[++n]=r,t[++n]=e,t[++n]=u,t[++n]=s,t[++n]=h},Ua=function(t,n,i,r){var e=i.x0,u=i.y0,s=i.y1,h=i.x1,o=i.y2,a=i.x2,c=i.y3,f=i.x3,l=r[0],v=r[1],b=l*(h-e)*.5,d=l*(s-u)*.5,g=v*(f-e)*.5,m=v*(c-u)*.5,w=(n<<1)-1;t[++w]=e,t[++w]=u,t[++w]=e+b,t[++w]=u+d,t[++w]=h-b,t[++w]=s-d,t[++w]=h,t[++w]=s,t[++w]=e+b+g,t[++w]=u+d+m,t[++w]=h-b+g,t[++w]=s-d+m,t[++w]=f+b-g,t[++w]=c+d-m,t[++w]=a-b-g,t[++w]=o-d-m,t[++w]=f,t[++w]=c,t[++w]=f+b,t[++w]=c+d,t[++w]=a-b,t[++w]=o-d,t[++w]=a,t[++w]=o,t[++w]=e,t[++w]=u,t[++w]=e+g,t[++w]=u+m,t[++w]=f-g,t[++w]=c-m,t[++w]=f,t[++w]=c,t[++w]=e+g+b,t[++w]=u+m+d,t[++w]=f-g+b,t[++w]=c-m+d,t[++w]=h+g-b,t[++w]=s+m-d,t[++w]=a-g-b,t[++w]=o-m-d,t[++w]=h,t[++w]=s,t[++w]=h+g,t[++w]=s+m,t[++w]=a-g,t[++w]=o-m,t[++w]=a,t[++w]=o},Ga=function(n){function i(t,i){var r=n.call(this,t,i,Ra,ya)||this;return r.pointId=-1,r}return B(i,n),i.prototype.init=function(t){t.updateIndices(),Ba(t.indices,this.vertexOffset,this.indexOffset)},i.prototype.update=function(t,n){this.updateVertexClippingStepAndUv(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n)},i.prototype.updateVertexClippingStepAndUv=function(n,r){var e,u=r.points;if(null!=u){var s=u.getMarker();if(null!=s){var h=this.toMarker(s),o=h.size,a=o.x,c=o.y,f=a!==this.sizeX||c!==this.sizeY,l=H(r),v=this.transformLocalId!==l,b=r.stroke,d=b.align,g=b.enable?b.width:0,m=b.side,w=b.style,p=this.strokeAlign!==d||this.strokeWidth!==g||this.strokeSide!==m||this.strokeStyle!==w,O=V(r),D=W(O),E=O!==this.texture||D!==this.textureTransformId,M=f||p,S=u.id!==this.pointId;if(M||v||E||S){this.sizeX=a,this.sizeY=c,this.transformLocalId=l,this.strokeAlign=d,this.strokeWidth=g,this.strokeSide=m,this.strokeStyle=w,this.texture=O,this.textureTransformId=D;var j=this.vertexOffset,T=null!==(e=i.WORK)&&void 0!==e?e:i.WORK=new t.Matrix;T.copyFrom(h.transform).prepend(r.transform.internalTransform),n.updateVertices(),_a(n.vertices,j,0,0,a,c,d,g,T,La),(M||v)&&(n.updateSteps(),Pa(j,n.steps,g,m,w,La)),M&&(n.updateClippings(),xa(n.clippings,j,La)),(M||E)&&(n.updateUvs(),Ua(n.uvs,j,X(O),La))}}}},i}(Ma),za=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMarker=function(t){return t.tail},n}(Ga),Ha=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMarker=function(t){return t.head},n}(Ga),Va=function(t){switch(t){case J.NONE:return 0;case J.CIRCLE:return 9;case J.TRIANGLE:return 7;case J.RECTANGLE:return Ra}return 0},Wa=function(t){switch(t){case J.NONE:return 0;case J.CIRCLE:return 8;case J.TRIANGLE:return 3;case J.RECTANGLE:return ya}return 0},Xa=function(t,n,i){switch(t){case J.NONE:return new Aa(n,i);case J.CIRCLE:return new Ia(n,i);case J.TRIANGLE:return new ja(n,i);case J.RECTANGLE:return new Ha(n,i)}return new Aa(n,i)},Ya=function(t,n,i){switch(t){case J.NONE:return new Aa(n,i);case J.CIRCLE:return new Ca(n,i);case J.TRIANGLE:return new Ta(n,i);case J.RECTANGLE:return new za(n,i)}return new Aa(n,i)},Ka=function(t,n,i,r,e){var s=n.points,h=ra(s),o=ea(h,!0),a=ua(h,!0),c=J.NONE,f=J.NONE;if(s&&s instanceof fe){var l=s.getMarker();l&&(c=l.tail.type,f=l.head.type)}var v=Va(c),b=Wa(c),d=i+o,g=r+a,m=Va(f),w=Wa(f),p=d+v,O=g+b,D=M(n),E=4*D,S=2*D,j=p+m,T=O+w,N=o+m+v+E,I=a+w+b+S;return t.check(i,r,N,I)?new u(t,i,r,N,I,[new da(i,r,o,a),Ya(c,d,g),Xa(f,p,O),new Xt(j,T,E,S)]).init(n):null},Ja=function(){function t(){}return t.from=function(t,n,i){var r=[],e=t.length;if(4<e){var u=1e-6,s=t[0],h=t[1];0!==n&&u<(c=(o=s-t[2])*o+(a=h-t[3])*a)&&(s+=o*(f=n/Math.sqrt(c)),h+=a*f);var o,a,c,f,l=t[e-2],v=t[e-1];0!==i&&u<(c=(o=l-t[e-4])*o+(a=v-t[e-3])*a)&&(l+=o*(f=i/Math.sqrt(c)),v+=a*f);for(var b=.5*(l+s),d=.5*(v+h),g=l-s,m=v-h,w=Math.atan2(m,g),p=Math.cos(w),O=Math.sin(w),D=g*g+m*m,E=u<D?1/Math.sqrt(D):1,M=2,S=e-2;M<S;M+=2){var j=t[M+0]-b,T=t[M+1]-d;r.push((p*j+O*T)*E,(p*T-O*j)*E)}}return r},t}(),Za=function(t,n,i){return po(t,n,i||new ve)},qa=function(t,n,i,r){if(n instanceof ve){var e=r.resources,u=t[15];if(0<=u&&u<e.length){var s=r.getExtension(u);null==s&&(s=JSON.parse(e[u]),r.setExtension(u,s)),n.lock();var h=n.points;h.deserialize(s[1],r);var o=n.edge;o.deserialize(s[0],i,r);var a=n.body,c=s[2];null!=c?a.deserialize(c,i,r):a.set(Ja.from(h.values,o.tail.margin,o.head.margin)),n.unlock()}}},Qa=function(){e[r.CONNECTOR_LINE]=Ka,n[r.CONNECTOR_LINE]=Za,i[r.CONNECTOR_LINE]=qa,Ar.set(r.CONNECTOR_LINE,Cr.CONNECTOR)},$a=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(t){t.updateIndices(),Ba(t.indices,this.vertexOffset,this.indexOffset)},n.prototype.update=function(t,n){this.updateVertexClippingStepAndUv(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n)},n.prototype.updateVertexClippingStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=H(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.side,l=o.style,v=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeSide!==f||this.strokeStyle!==l,b=V(n),d=W(b),g=b!==this.texture||d!==this.textureTransformId,m=u||v;if(m||h||g){this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeSide=f,this.strokeStyle=l,this.texture=b,this.textureTransformId=d;var w=this.vertexOffset;t.updateVertices(),_a(t.vertices,w,.5*r,.5*e,r,e,a,c,n.transform.internalTransform,La),(m||h)&&(t.updateSteps(),Pa(w,t.steps,c,f,l,La)),m&&(t.updateClippings(),xa(t.clippings,w,La)),(m||g)&&(t.updateUvs(),Ua(t.uvs,w,X(b),La))}},n}(z),tc=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=Ra+h,c=ya+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new $a(i,r,a-h,c-o),new Xt(i+Ra,r+ya,h,o)]).init(n):null},nc=function(t,n,i,r){return new u(t,i,r,0,0,[new Aa(i,r)]).init(n)},ic=function(t,n){var i=t.data.getMapping();if(null!=i)for(var r=i.values,e=0,u=r.length;e<u;++e){var s=r[e],h=s[0],o=n.getDataMapper(h);if(null!=o){var a=t.children,c=n.getDataDestination(s[1]),f=s[2];rc(a,o,c,f)}}},rc=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){for(var s=t[e],h=s.data,o=0,a=h.size();o<a;++o){var c=h.get(o);c&&c.scope!==St.PRIVATE&&n.map(c,i,r)}var f=s.children;0<f.length&&rc(f,n,i,r)}},ec=function(t,n,i){var r=n.pieces,e=t[15];if(r&&0<=e&&e<r.length){var u=n.pieceData;if(u){var s=r[e],h=u.get(s),o=i&&i(s,n);return h?function(t,n,i,r,e,u,s){s=s||new _r(t,e.isEditMode);var h=po(u,e,s),o=s.size,a=o.x,c=o.y;return s.size.set(n,i),r.copyTo(s),s.size.init(),s.size.set(a,c),ic(s,e),h}(s,h.width,h.height,h.layer,n,t,o):function(t,n,i,r){r=r||new _r(t,n.isEditMode);var e=po(i,n,r),u=r.size,s=u.x,h=u.y,o=r.children,a=new Be("missing",n.isEditMode),c=.5*s,f=.5*s;a.transform.position.set(-c,-f),a.size.set(s,h),a.size.init(),a.parent=r;var l=new su;return l.stroke.color=16711680,l.transform.position.set(c,f),l.size.copyFrom(r.size),l.attach(a),o.push(a),r.onChildTransformChange(),r.toDirty(),r.onAttach(),r.size.init(),ic(r,n),e}(s,n,t,o)}}return null},uc=function(){e[r.EMBEDDED]=nc,n[r.EMBEDDED]=ec,Ar.set(r.EMBEDDED,Cr.EMBEDDED),e[r.EMBEDDED_LAYER]=tc},sc=function(){function t(t){this.p=t}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.p.children;return!(0<t.length)||t[t.length-1].fill.enable},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].fill.enable=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].fill.color:16777215},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].fill.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].fill.alpha:1},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].fill.alpha=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].fill.copy(t)},t.prototype.set=function(t,n,i){for(var r=this.p.children,e=0,u=r.length;e<u;++e)r[e].fill.set(t,n,i)},t.prototype.clone=function(){return new t(this.p)},t.prototype.toObject=function(){var t=this.p.children;return 0<t.length?t[t.length-1].fill.toObject():{enable:!0,color:16777215,alpha:1}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),hc=function(){function t(t){this.p=t}return Object.defineProperty(t.prototype,"length",{get:function(){var t=this.p.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.length}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){var t=this.p.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.id}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var t=this.p.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.values}return[]},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.values=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){var t=this.p.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.segments}return[]},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.segments=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){var t=this.p.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.style}return U.NONE},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.style=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){for(var t=this.p.children,n=0,i=t.length;n<i;++n){var r=t[n].points;if(null!=r)return r.marker}return Q.getInstance()},enumerable:!1,configurable:!0}),t.prototype.getMarker=function(){for(var t=this.p.children,n=0,i=t.length;n<i;++n){var r=t[n].points;if(null!=r)return r.getMarker()}},Object.defineProperty(t.prototype,"formatter",{get:function(){var t=this.p.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.formatter}return null},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&(e.formatter=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formatted",{get:function(){var t=this.p.children;if(0<t.length){var n=t[t.length-1].points;if(null!=n)return n.formatted}return this},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i){var e=n[i].points;null!=e&&e.copy(t)}return this},t.prototype.set=function(t,n,i){for(var r=this.p.children,e=0,u=r.length;e<u;++e){var s=r[e].points;null!=s&&s.set(t,n,i)}return this},t.prototype.clone=function(n){return new t(n)},t.prototype.toPoints=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i){var e=n[i].points;if(null!=e)return e.toPoints(t)}return[]},t.prototype.serialize=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i){var e=n[i].points;if(null!=e)return e.serialize(t)}return-1},t}(),oc=function(){function t(t){this.p=t}return Object.defineProperty(t.prototype,"enable",{get:function(){var t=this.p.children;return 0<t.length&&t[t.length-1].stroke.enable},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].stroke.enable=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].stroke.color:16777215},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].stroke.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].stroke.alpha:1},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].stroke.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].stroke.width:1},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].stroke.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].stroke.align:1},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].stroke.align=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"side",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].stroke.side:1},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].stroke.side=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){var t=this.p.children;return 0<t.length?t[t.length-1].stroke.style:s.NONE},set:function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].stroke.style=t},enumerable:!1,configurable:!0}),t.prototype.copy=function(t){for(var n=this.p.children,i=0,r=n.length;i<r;++i)n[i].stroke.copy(t)},t.prototype.set=function(t,n,i,r,e){for(var u=this.p.children,s=0,h=u.length;s<h;++s)u[s].stroke.set(t,n,i,r,e)},t.prototype.clone=function(){return new t(this.p)},t.prototype.toObject=function(){var t=this.p.children;return 0<t.length?t[t.length-1].stroke.toObject():{enable:!1,color:16777215,alpha:1,width:1,align:0,side:Pt.NONE,style:s.NONE}},t.prototype.serialize=function(t){return-1},t.prototype.deserialize=function(t,n){},t}(),ac=function(t){function n(n,i){void 0===i&&(i=r.GROUP);var e=t.call(this,i)||this;e.Ir=n;var u=new Rt;return e.data=u,e.tag=u,e.size=e.newGroupSize(n),e.fill=e.newGroupFill(),e.stroke=e.newGroupStroke(),e.text=e.newGroupText(),e.gt=e.newGroupPoints(),e}return B(n,t),Object.defineProperty(n.prototype,"isEditMode",{get:function(){return this.Ir},enumerable:!1,configurable:!0}),n.prototype.newGroupSize=function(t){var n=K.SIZE_X,i=K.SIZE_Y;return t?new xr(this,n,i,this.isGroupSizeFittable()):new Dr(this,n,i,n,i)},n.prototype.isGroupSizeFittable=function(){return!0},n.prototype.newGroupFill=function(){return new sc(this)},n.prototype.newGroupStroke=function(){return new oc(this)},n.prototype.newGroupText=function(){return new pr(this)},n.prototype.newGroupPoints=function(){return new hc(this)},n.prototype.getBoundsSize=function(){var t=this.size;return t instanceof Dr?t.base:t},n.prototype.onChildTransformChange=function(){t.prototype.onChildTransformChange.call(this),this.size.fit()},Object.defineProperty(n.prototype,"corner",{get:function(){var t=this.children;return 0<t.length?t[t.length-1].corner:it.ALL},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].corner=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cursor",{get:function(){var t=this.children;return 0<t.length?t[t.length-1].cursor:""},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].cursor=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"gradient",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n){var i=t[n].gradient;if(null!=i)return i}},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].gradient=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){var t=this.children;return 0<t.length?t[t.length-1].radius:.5},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].radius=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"image",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n){var i=t[n].image;if(null!=i)return i}},set:function(t){for(var n=this.children,i=0,r=n.length;i<r;++i)n[i].image=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"points",{get:function(){for(var t=this.children,n=t.length-1;0<=n;--n)if(null!=t[n].points)return this.gt},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.clone=function(){for(var t=this.newClone().copy(this),n=this.children,i=0,r=n.length;i<r;++i){var e=n[i].clone();e.parent=t,t.children.push(e)}return t.onChildTransformChange(),t.toDirty(),t},n.prototype.newClone=function(){return new(0,this.constructor)(this.Ir,this.type)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){return!1},n}(wt),cc=function(t,n,i){i=i||new ac(n.isEditMode);var r=po(t,n,i);return i.size.init(),r},fc=function(){e[r.GROUP]=nc,n[r.GROUP]=cc,Ar.set(r.GROUP,Cr.GROUP)},lc=function(){function n(n,i,r){this.p=n,this.T=new t.Point(i,r)}return n.prototype.init=function(){},Object.defineProperty(n.prototype,"x",{get:function(){return this.T.x},set:function(t){var n=this.T;if(n.x!==t){var i=n.x;n.x=t,this.onChange(i,n.y)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.T.y},set:function(t){var n=this.T;if(n.y!==t){var i=n.y;n.y=t,this.onChange(n.x,i)}},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n){var i=!1,r=this.T,e=r.x,u=r.y;return null!=t&&e!==t&&(i=!0,r.x=t),null!=n&&u!==n&&(i=!0,r.y=n),i&&this.onChange(e,u),this},n.prototype.clone=function(){var t=this.T;return new n(this.p,t.x,t.y)},n.prototype.copy=function(){},n.prototype.copyFrom=function(t){var n=t.x,i=t.y,r=this.T,e=r.x,u=r.y;return e===n&&u===i||(r.x=n,r.y=i,this.onChange(e,u)),this},n.prototype.copyTo=function(t){return this.T.copyTo(t)},n.prototype.equals=function(t){return this.T.equals(t)},n.prototype.fit=function(){},n.prototype.onChange=function(t,n){this.p.onSizeChange()},n}(),vc=function(t){function n(n,i){return void 0===i&&(i=r.GROUP_SHADOWED),t.call(this,n,i)||this}return B(n,t),n.prototype.newGroupSize=function(n){return n?new lc(this,K.SIZE_X,K.SIZE_Y):t.prototype.newGroupSize.call(this,n)},n}(ac),bc=function(t,n,i){i=i||new vc(n.isEditMode);var r=po(t,n,i);return i.size.init(),r},dc=function(){e[r.GROUP_SHADOWED]=nc,n[r.GROUP_SHADOWED]=bc,Ar.set(r.GROUP_SHADOWED,Cr.GROUP)},gc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(t){t.updateIndices(),Ba(t.indices,this.vertexOffset,this.indexOffset)},n.prototype.update=function(t,n){this.updateVertexClippingStepAndUv(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n)},n.prototype.updateVertexClippingStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=H(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.side,l=o.style,v=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeSide!==f||this.strokeStyle!==l,b=V(n),d=W(b),g=b!==this.texture||d!==this.textureTransformId,m=u||v;if(m||h||g){this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeSide=f,this.strokeStyle=l,this.texture=b,this.textureTransformId=d;var w=this.vertexOffset;t.updateVertices(),_a(t.vertices,w,0,0,r,e,a,c,n.transform.internalTransform,La),(m||h)&&(t.updateSteps(),Pa(w,t.steps,c,f,l,La)),m&&(t.updateClippings(),xa(t.clippings,w,La)),(m||g)&&(t.updateUvs(),Ua(t.uvs,w,X(b),La))}},n}(z),mc=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=Ra+h,c=ya+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new gc(i,r,a-h,c-o),new Xt(i+Ra,r+ya,h,o)]).init(n):null},wc=function(t){function n(n,i){void 0===i&&(i=r.IMAGE);var e=t.call(this,i)||this;return null!=n&&(e.image=n,e.size.set(n.width,n.height)),e.fill.alpha=1,e}return B(n,t),n.prototype.clone=function(){return new n(this.image,this.type).copy(this)},n}(su),pc=function(t,n,i){return po(t,n,i||new wc)},Oc=function(){e[r.IMAGE]=mc,n[r.IMAGE]=pc},Dc=[0,0],Ec=new t.Point,Mc=function(t,n){for(var i=3*n-1,r=3*(n+9)-1;i<r;)t[++i]=0,t[++i]=0,t[++i]=2},Sc=function(t,n,i){var r=3*i-1;t[++r]=n,t[++r]=n+1,t[++r]=n+3,t[++r]=n+1,t[++r]=n+4,t[++r]=n+3,t[++r]=n+1,t[++r]=n+2,t[++r]=n+4,t[++r]=n+2,t[++r]=n+5,t[++r]=n+4,t[++r]=n+3,t[++r]=n+4,t[++r]=n+6,t[++r]=n+4,t[++r]=n+7,t[++r]=n+6,t[++r]=n+4,t[++r]=n+5,t[++r]=n+7,t[++r]=n+5,t[++r]=n+8,t[++r]=n+7},jc=function(t,n,i,r,e,u,s,h){var a=o(e),c=u/h[0],f=s/h[1],l=.5*(c+f),v=12,b=-1+i,d=6*n-1;t[++d]=r,t[++d]=a,t[++d]=l,t[++d]=v,t[++d]=b,t[++d]=0,t[++d]=r,t[++d]=a,t[++d]=f,t[++d]=v,t[++d]=b,t[++d]=0,t[++d]=r,t[++d]=a,t[++d]=l,t[++d]=v,t[++d]=b,t[++d]=0,t[++d]=r,t[++d]=a,t[++d]=c,t[++d]=v,t[++d]=b,t[++d]=0,t[++d]=r,t[++d]=a,t[++d]=l,t[++d]=v,t[++d]=b,t[++d]=0,t[++d]=r,t[++d]=a,t[++d]=c,t[++d]=v,t[++d]=b,t[++d]=0,t[++d]=r,t[++d]=a,t[++d]=l,t[++d]=v,t[++d]=b,t[++d]=0,t[++d]=r,t[++d]=a,t[++d]=f,t[++d]=v,t[++d]=b,t[++d]=0,t[++d]=r,t[++d]=a,t[++d]=f,t[++d]=v,t[++d]=b,t[++d]=0},Tc=function(t,n,i,r,e,u,s,h){var o=Ec,a=.5*e,c=.5*u;o.set(i-a,r-c),s.apply(o,o);var f=o.x,l=o.y;o.set(i+a,r-c),s.apply(o,o);var v=o.x,b=o.y;o.set(i+a,r+c),s.apply(o,o);var d=o.x,g=o.y,m=f+(d-v),w=l+(g-b),p=(n<<1)-1;t[++p]=f,t[++p]=l,t[++p]=.5*(f+v),t[++p]=.5*(l+b),t[++p]=v,t[++p]=b,t[++p]=.5*(f+m),t[++p]=.5*(l+w),t[++p]=.5*(f+d),t[++p]=.5*(l+g),t[++p]=.5*(v+d),t[++p]=.5*(b+g),t[++p]=m,t[++p]=w,t[++p]=.5*(m+d),t[++p]=.5*(w+g),t[++p]=d,t[++p]=g,h[0]=.5*O(f,l,v,b),h[1]=.5*O(f,l,m,w)},Nc=function(t,n,i){var r=i.x0,e=i.y0,u=i.x1,s=i.y1,h=i.x2,o=i.y2,a=i.x3,c=i.y3,f=(n<<1)-1;t[++f]=r,t[++f]=e,t[++f]=.5*(u+r),t[++f]=.5*(s+e),t[++f]=u,t[++f]=s,t[++f]=.5*(r+a),t[++f]=.5*(e+c),t[++f]=.5*(r+h),t[++f]=.5*(e+o),t[++f]=.5*(u+h),t[++f]=.5*(s+o),t[++f]=a,t[++f]=c,t[++f]=.5*(a+h),t[++f]=.5*(c+o),t[++f]=h,t[++f]=o},Ic=function(t){function n(n,i){var r=t.call(this,n,i,9,8)||this;return r.textureWidth=-1,r.textureHeight=-1,r}return B(n,t),n.prototype.init=function(t){var n=this.vertexOffset;t.updateClippings(),t.updateIndices(),Mc(t.clippings,n),Sc(t.indices,n,this.indexOffset)},n.prototype.update=function(t,n){this.updateVertexAndStep(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n),this.updateUv(t,n)},n.prototype.updateVertexAndStep=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=H(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.style,l=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeStyle!==f,v=V(n),b=v.width*v.resolution,d=v.height*v.resolution,g=this.textureWidth!==b||this.textureHeight!==d;(u||h||l||g)&&(this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeStyle=f,this.textureWidth=b,this.textureHeight=d,t.updateVertices(),Tc(t.vertices,this.vertexOffset,0,0,r,e,n.transform.internalTransform,Dc),t.updateSteps(),jc(t.steps,this.vertexOffset,a,c,f,b,d,Dc))},n.prototype.updateUv=function(t,n){var i=V(n),r=W(i);i===this.texture&&r===this.textureTransformId||(this.texture=i,this.textureTransformId=r,t.updateUvs(),Nc(t.uvs,this.vertexOffset,X(i)))},n}(z),Cc=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=9+h,c=8+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Ic(i,r),new Xt(i+9,r+8,h,o)]).init(n):null},Ac=function(t){function n(n,i){return void 0===i&&(i=r.IMAGE_SDF),t.call(this,n,i)||this}return B(n,t),n.prototype.clone=function(){return new n(this.image,this.type).copy(this)},n}(wc),Rc=function(t,n,i){return po(t,n,i||new Ac)},yc=function(){function n(t,n,i,r){this.vertexOffset=t,this.indexOffset=n,this.vertexCount=i,this.indexCount=r,this.texture=null}return n.prototype.init=function(t){},n.prototype.isCompatible=function(t){return!0},n.prototype.update=function(t,n){this.texture=V(n)},n.prototype.buildUnit=function(n){var i=this.texture||t.Texture.WHITE,r=i.baseTexture;if(r!==n.baseTexture){n.baseTexture=r;var e=this.indexOffset;n.push(i,e)}},n}(),Lc=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=h,c=o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new yc(i,r,a-h,c-o),new Xt(i,r,h,o)]).init(n):null},kc=function(t){function n(n){return void 0===n&&(n=r.LABEL),t.call(this,n)||this}return B(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n}(Bt),xc=function(t,n,i){return po(t,n,i||new kc)},Bc=function(){e[r.LABEL]=Lc,n[r.LABEL]=xc},_c=function(t){function n(n){void 0===n&&(n=r.LINE);var i=t.call(this,n)||this;return i.gt=new fe(i),i}return B(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.serialize=function(n){var i=t.prototype.serialize.call(this,n);return i[15]=this.gt.serialize(n),i},n}(Ht),Pc=function(t,n,i){i=i||new _c;var r=po(t,n,i);i.points.deserialize(t[15],n);var e=i.points.style,u=U.NON_SCALING_MASK|U.DOTTED_MASK|U.DASHED_MASK,s=e&u;return s&&(i.points.style&=~u,i.stroke.style|=s),r},Fc=function(){e[r.LINE]=Ka,n[r.LINE]=Pc},Uc=function(t,n,i){for(var r=3*n,e=3*(n+i);r<e;r+=3)t[r+0]=0,t[r+1]=0,t[r+2]=0},Gc=function(t,n,i){for(var r=2*n,e=2*(n+i);r<e;r+=2)t[r+0]=0,t[r+1]=0},zc=function(t,n,i){for(var r=6*n,e=6*(n+i);r<e;r+=6)t[r+0]=0,t[r+1]=0,t[r+2]=0,t[r+3]=0,t[r+4]=0,t[r+5]=0},Hc=function(t,n,i){for(var r=2*n,e=2*(n+i);r<e;r+=2)t[r+0]=0,t[r+1]=0},Vc=function(t){return 12*Math.ceil(t/12)},Wc=function(t,n,i,r,e,u,s,h){if(u)if(i.isStaticColor()){var o=i.getColor(0,s);if(i.isStaticAlpha()){var a=i.getAlpha(0,h);G(o,a,t,n*r,e)}else for(var c=0,f=t;c<r;c+=1,f+=n)a=i.getAlpha(c,h),G(o,a,f,n,e)}else if(i.isStaticAlpha())for(a=i.getAlpha(0,h),c=0,f=t;c<r;c+=1,f+=n)o=i.getColor(c,s),G(o,a,f,n,e);else for(c=0,f=t;c<r;c+=1,f+=n)o=i.getColor(c,s),a=i.getAlpha(c,h),G(o,a,f,n,e);else if(i.isStaticColor())o=i.getColor(0,s),G(o,0,t,n*r,e);else for(c=0,f=t;c<r;c+=1,f+=n)o=i.getColor(c,s),G(o,0,f,n,e)},Xc=function(t){function n(n,i,r,e,u){var s=t.call(this,n,i,r,e)||this;return s.pointId=-1,s.pointCount=0,s.pointCountReserved=u,s.pointSizeId=-1,s.pointOffsetId=-1,s.pointFillId=-1,s.pointStrokeId=-1,s}return B(n,t),n.prototype.isCompatible=function(t){return Vc(ia(t.points))===this.pointCountReserved},n.prototype.updateLineOfAnyColorFill=function(t,n,i,r){var e=i.fill,u=e.id,s=u!==this.pointFillId,h=n.fill,o=n.visible&&h.enable,a=h.color,c=o?h.alpha:0,f=a!==this.colorFill||c!==this.alphaFill;(s||f)&&(this.colorFill=a,this.alphaFill=c,this.pointFillId=u,t.updateColorFills(),Wc(this.vertexOffset,r,e,this.pointCountReserved,t.colorFills,o,a,c))},n.prototype.updateLineOfAnyColorStroke=function(t,n,i,r){var e=i.stroke,u=e.id,s=u!==this.pointStrokeId,h=n.stroke,o=n.visible&&h.enable,a=h.color,c=o?h.alpha:0,f=a!==this.colorStroke||c!==this.alphaStroke;(s||f)&&(this.colorStroke=a,this.alphaStroke=c,this.pointStrokeId=u,t.updateColorStrokes(),Wc(this.vertexOffset,r,e,this.pointCountReserved,t.colorStrokes,o,a,c))},n}(z),Yc=function(t,n,i,r){for(var e=n+i,u=1;u<r;++u){for(var s=3*e,h=3*n,o=0;o<i;++o)t[s+0]=t[h+0],t[s+1]=t[h+1],t[s+2]=t[h+2],s+=3,h+=3;e+=i}},Kc=function(t,n,i,r,e){for(var u=n,s=i+r,h=1;h<e;++h){for(var o=3*s,a=3*i,c=0;c<r;++c)t[o+0]=t[a+0]+u,t[o+1]=t[a+1]+u,t[o+2]=t[a+2]+u,o+=3,a+=3;u+=n,s+=r}},Jc=function(t,n,i,r){for(var e=6*n,u=6*(n+i),s=1;s<r;++s)for(var h=e,o=0;o<i;++o)t[u+0]=t[h+0],t[u+1]=t[h+1],t[u+2]=t[h+2],t[u+3]=t[h+3],t[u+4]=t[h+4],t[u+5]=t[h+5],u+=6,h+=6},Zc=function(t,n,i,r){for(var e=n+i,u=1;u<r;++u){for(var s=e<<1,h=n<<1,o=0;o<i;++o)t[s]=t[h],t[s+1]=t[h+1],s+=2,h+=2;e+=i}},qc=function(t,n,i,r,e,u,s){var h=n.a,o=n.b,a=n.c,c=n.d,f=e-1,l=i+f*r;if(s.isStaticX()&&s.isStaticY())for(var v=s.getX(0),b=s.getY(0);0<=f;--f){for(var d=h*(D=u[O=f<<1]+v)+a*(E=u[O+1]+b),g=o*D+c*E,m=l<<1,w=i<<1,p=0;p<r;++p)t[m]=t[w]+d,t[m+1]=t[w+1]+g,m+=2,w+=2;l-=r}else for(;0<=f;--f){var O,D,E;for(d=h*(D=u[O=f<<1]+s.getX(f))+a*(E=u[O+1]+s.getY(f)),g=o*D+c*E,m=l<<1,w=i<<1,p=0;p<r;++p)t[m]=t[w]+d,t[m+1]=t[w+1]+g,m+=2,w+=2;l-=r}},Qc=function(t){return gn(t)||null==t},$c=function(t,n,i){return gn(n)?n:ot(n)?n(t):n?n[t%n.length]:i},tf=function(){function t(t){this.p=t,this.R=0,this.S=null,this.j=null}return Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.set(t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;void 0!==t&&this.S!==t&&(i=!0,this.S=t),void 0!==n&&this.j!==n&&(i=!0,this.j=n),i&&(this.R+=1,this.p.updateUploaded())},t.prototype.getColor=function(t,n){return $c(t,this.S,n)},t.prototype.getAlpha=function(t,n){return $c(t,this.j,n)},t.prototype.isStaticColor=function(){return Qc(this.S)},t.prototype.isStaticAlpha=function(){return Qc(this.j)},t.prototype.toDirty=function(){this.R+=1},t}(),nf=function(){function t(t,n,i){this.p=t,this.R=0,this._x=null,this._y=null,this.$h=n,this.no=i,this.io=null,this.ro=0,this.eo=-1,this.uo=0}return Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this.set(t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return this.io},set:function(t){this.io=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;void 0!==t&&this._x!==t&&(i=!0,this._x=t),void 0!==n&&this._y!==n&&(i=!0,this._y=n),i&&(this.R+=1,this.p.updateUploaded())},t.prototype.getX=function(t){return $c(t,this._x,this.$h)},t.prototype.getY=function(t){return $c(t,this._y,this.no)},t.prototype.getLimit=function(){var t=this.io;return null!=t?t:(this.updateLimitComputed(),this.ro)},t.prototype.updateLimitComputed=function(){var t=this.R,n=this.p.length;this.eo===t&&this.uo===n||(this.eo=t,this.uo=n,this.ro=Math.max(this.calcLimit(this._x,n,this.$h),this.calcLimit(this._y,n,this.no)))},t.prototype.calcLimit=function(t,n,i){if(gn(t))return Math.abs(t);if(ot(t)){if(0<n){for(var r=Math.abs(t(0)),e=1;e<n;++e)r=Math.max(r,Math.abs(t(e)));return r}return 0}if(null!=t){var u=t.length;if(0<u){for(r=t[0],e=1;e<u;++e)r=Math.max(r,Math.abs(t[e]));return r}return 0}return Math.abs(i)},t.prototype.isStaticX=function(){return Qc(this._x)},t.prototype.isStaticY=function(){return Qc(this._y)},t.prototype.toDirty=function(){this.R+=1},t}(),rf=function(){function t(t){this.p=t,this.R=0,this.S=null,this.j=null}return Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.set(t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;void 0!==t&&this.S!==t&&(i=!0,this.S=t),void 0!==n&&this.j!==n&&(i=!0,this.j=n),i&&(this.R+=1,this.p.updateUploaded())},t.prototype.getColor=function(t,n){return $c(t,this.S,n)},t.prototype.getAlpha=function(t,n){return $c(t,this.j,n)},t.prototype.isStaticColor=function(){return Qc(this.S)},t.prototype.isStaticAlpha=function(){return Qc(this.j)},t.prototype.toDirty=function(){this.R+=1},t}(),ef=function(){function n(t){this.p=t,this.L=[],this.so=0,this.k=[],this.T=new nf(this,K.SIZE_X,K.SIZE_Y),this.tn=new nf(this,0,0),this.C=new tf(t),this.ho=new rf(t),this.R=0}return Object.defineProperty(n.prototype,"length",{get:function(){return this.L.length>>1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this.L},set:function(t){this.set(t,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"segments",{get:function(){return this.k},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return U.NONE},set:function(t){this.set(void 0,void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"marker",{get:function(){var t=this.A;return null==t&&(t=Q.getInstance(),this.A=t),t},enumerable:!1,configurable:!0}),n.prototype.getMarker=function(){},Object.defineProperty(n.prototype,"size",{get:function(){return this.T},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offset",{get:function(){return this.tn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this.ho},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatter",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatted",{get:function(){return this},enumerable:!1,configurable:!0}),n.prototype.copy=function(t){return this.set(t.values,t.segments,t.style)},n.prototype.set=function(t,n,i){var r=!1,e=!1;if(null!=t){var u=this.L,s=this.so,h=t.length;if(u!==t){for(var o=Math.min(s,h),a=0;a<o;++a)u[a]=t[a];for(a=o;a<h;++a)u.push(t[a]);s!==h?(u.length=h,this.so=h,r=!0):e=!0}else s!==h?(this.so=h,r=!0):e=!0}if(r){this.R+=1;var c=this.p,f=c.uploaded;f?f.isCompatible(c)?c.updateUploaded():(c.uploaded=void 0,c.toDirty()):c.updateUploaded()}else e&&(this.R+=1,this.p.updateUploaded());return this},n.prototype.updateUploaded=function(){this.p.updateUploaded()},n.prototype.clone=function(t){return new n(t).copy(this)},n.prototype.toPoints=function(n){for(var i=[],r=this.values,e=0,u=r.length;e<u;e+=2){var s=new t.Point(r[e+0],r[e+1]);i.push(n.apply(s,s))}return i},n.prototype.serialize=function(t){return t.addResource("[]")},n.prototype.calcHitPointAbs=function(t,i,r,e,u,s,h,o,a){var c=this.formatted,f=c.length,l=c.values,v=this.T,b=this.tn,d=0,g=f;if(h){var m=.5*v.getLimit(),w=b.getLimit(),p=n.WORK_RANGE;h(t,i,m,m,w,w,s,l,p),d=p[0],g=p[1]}for(var O=d,D=Math.min(g,f);O<D;++O){var E=O<<1,M=l[E],S=l[E+1];if(o(t,i,.5*v.getX(O),.5*v.getY(O),b.getX(O),b.getY(O),M,S,r,e,u,O,s,a))return!0}return!1},n.WORK_RANGE=[0,0],n}(),uf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(t){t.updateClippings(),t.updateIndices();var n=t.clippings,i=t.indices,r=this.vertexOffset,e=this.indexOffset,u=this.pointCountReserved;0<u&&(Wo(n,r),Yc(n,r,9,u),Xo(i,r,e),Kc(i,9,e,8,u))},n.prototype.update=function(t,n){var i=n.points;i instanceof ef&&(this.updateVertexAndStep(t,n,i),this.updateLineOfAnyColorFill(t,n,i,9),this.updateLineOfAnyColorStroke(t,n,i,9),this.updateUv(t,n))},n.prototype.updateVertexAndStep=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=f!==this.sizeX||l!==this.sizeY,b=H(n),d=this.transformLocalId!==b,g=n.stroke,m=g.align,w=g.enable?g.width:0,p=g.style,O=this.strokeAlign!==m||this.strokeWidth!==w||this.strokeStyle!==p;if(s||a||v||d||O){this.pointId=r;var D=i.formatted;this.pointCount=D.length,this.pointOffsetId=u,this.pointSizeId=o,this.sizeX=f,this.sizeY=l,this.transformLocalId=b,this.strokeWidth=w,this.strokeAlign=m,this.strokeStyle=p,t.updateVertices(),t.updateSteps();var E=this.pointCount,M=D.values,S=this.vertexOffset,j=t.vertices,T=t.steps,N=t.clippings,I=n.transform.internalTransform;if(0<E&&h.isStaticX()&&h.isStaticY()){var C=h.getX(0),A=h.getY(0);Yo(j,S,0,0,C,A,m,w,I,Ho),qc(j,I,S,9,E,M,e),Ko(T,N,S,w,p,Ho),Jc(T,S,9,E)}else for(var R=0;R<E;++R){var y=R<<1,L=M[y]+e.getX(R),k=M[y+1]+e.getY(R),x=(C=h.getX(R),A=h.getY(R),S+9*R);Yo(j,x,L,k,C,A,m,w,I,Ho),Ko(T,N,x,w,p,Ho)}var B=S+9*E,_=9*(this.pointCountReserved-E);Gc(j,B,_),zc(T,B,_)}},n.prototype.updateUv=function(t,n){var i=V(n),r=W(i);if(i!==this.texture||r!==this.textureTransformId){this.texture=i,this.textureTransformId=r,t.updateUvs();var e=t.uvs,u=this.vertexOffset,s=X(i),h=this.pointCountReserved;0<h&&(Jo(e,u,s),Zc(e,u,9,h))}},n}(Xc),sf=function(t,n,i,r,e,s,h,o){var a=M(n),c=4*a,f=2*a,l=n.points,v=Vc(ia(l)),b=v*r,d=v*s,g=b+c,m=d+f;return t.check(i,e,g,m)?new u(t,i,e,g,m,[new o(i,e,b,d,v),new Xt(i+b,e+d,c,f)]).init(n):null},hf=function(t,n,i,r,e){return sf(t,n,i,9,r,8,0,uf)},of=function(t){function n(n){void 0===n&&(n=r.LINE_OF_CIRCLES);var i=t.call(this,n)||this;return i.gt=new ef(i),i.oo=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return B(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=zt(e,u,this.gt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.gt.calcHitPointAbs(t,n,e,u,s,h,null,this.oo,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||zt)(s.strokeWidth,s.strokeScale,this.gt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.gt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.oo,u)},n}(Qo),af=function(t,n,i){return po(t,n,i||new of)},cf=function(){e[r.LINE_OF_CIRCLES]=hf,n[r.LINE_OF_CIRCLES]=af},ff=function(t){function n(n,i,r,e,u){var s=t.call(this,n,i,r,e,u)||this;return s.radius=NaN,s.corner=NaN,s}return B(n,t),n.prototype.init=function(t){t.updateIndices();var n=t.indices,i=this.vertexOffset,r=this.indexOffset,e=this.pointCountReserved;0<e&&(To(n,i,r),Kc(n,Mo,r,24,e))},n.prototype.update=function(t,n){var i=n.points;i instanceof ef&&(this.updateVertexClippingStepAndUv(t,n,i),this.updateLineOfAnyColorFill(t,n,i,Mo),this.updateLineOfAnyColorStroke(t,n,i,Mo))},n.prototype.updateVertexClippingStepAndUv=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=n.radius,b=f!==this.sizeX||l!==this.sizeY||v!==this.radius,d=H(n),g=this.transformLocalId!==d,m=n.stroke,w=m.align,p=m.enable?m.width:0,O=m.side,D=m.style,E=this.strokeAlign!==w||this.strokeWidth!==p||this.strokeSide!==O||this.strokeStyle!==D,M=n.corner,S=M!==this.corner,j=V(n),T=W(j),N=j!==this.texture||T!==this.textureTransformId,I=s||a||b||E;if(I||g||S||N){this.pointId=r;var C=i.formatted;this.pointCount=C.length,this.pointOffsetId=u,this.pointSizeId=o,this.sizeX=f,this.sizeY=l,this.radius=v,this.transformLocalId=d,this.strokeAlign=w,this.strokeWidth=p,this.strokeSide=O,this.strokeStyle=D,this.corner=M,this.texture=j,this.textureTransformId=T,t.updateVertices(),(I||g)&&t.updateSteps(),(I||S)&&t.updateClippings(),(I||N)&&t.updateUvs();var A=this.pointCount,R=C.values,y=this.vertexOffset,L=t.vertices,k=t.clippings,x=t.steps,B=t.uvs,_=n.transform.internalTransform,P=X(j);if(0<A&&h.isStaticX()&&h.isStaticY()){var F=h.getX(0),U=h.getY(0);No(L,y,0,0,F,U,w,p,v,_,So),qc(L,_,y,Mo,A,R,e),(I||g)&&(Co(x,y,p,O,D,M,So),Jc(x,y,Mo,A)),(I||S)&&(Io(k,y,M,So),Yc(k,y,Mo,A)),(I||N)&&(Ao(B,y,P,So),Zc(B,y,Mo,A))}else for(var G=0;G<A;++G){var z=G<<1,Y=R[z]+e.getX(G),K=R[z+1]+e.getY(G),J=(F=h.getX(G),U=h.getY(G),y+G*Mo);No(L,J,Y,K,F,U,w,p,v,_,So),(I||g)&&Co(x,J,p,O,D,M,So),(I||S)&&Io(k,J,M,So),(I||N)&&Ao(B,J,P,So)}var Z=this.pointCountReserved,q=y+A*Mo,Q=Mo*(Z-A);Gc(L,q,Q),zc(x,q,Q),Uc(k,q,Q),Hc(B,q,Q)}},n}(Xc),lf=function(t,n,i,r,e){return sf(t,n,i,Mo,r,24,0,ff)},vf=function(t){function n(n){void 0===n&&(n=r.LINE_OF_RECTANGLE_ROUNDEDS);var i=t.call(this,n)||this;return i.gt=new ef(i),i.oo=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return B(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=zt(e,u,this.gt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.gt.calcHitPointAbs(t,n,h,e,u,s,null,this.oo,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||zt)(s.strokeWidth,s.strokeScale,this.gt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.gt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.oo,u)},n}(Bo),bf=function(t,n,i){return po(t,n,i||new vf)},df=function(){e[r.LINE_OF_RECTANGLE_ROUNDEDS]=lf,n[r.LINE_OF_RECTANGLE_ROUNDEDS]=bf,Ar.set(r.LINE_OF_RECTANGLE_ROUNDEDS,Cr.PRIMITIVE|Cr.STROKE_SIDE|Cr.BORDER_RADIUS)},gf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(t){t.updateIndices();var n=t.indices,i=this.vertexOffset,r=this.indexOffset,e=this.pointCountReserved;0<e&&(Ba(n,i,r),Kc(n,Ra,r,ya,e))},n.prototype.update=function(t,n){var i=n.points;i instanceof ef&&(this.updateVertexClippingStepAndUv(t,n,i),this.updateLineOfAnyColorFill(t,n,i,Ra),this.updateLineOfAnyColorStroke(t,n,i,Ra))},n.prototype.updateVertexClippingStepAndUv=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=f!==this.sizeX||l!==this.sizeY,b=H(n),d=this.transformLocalId!==b,g=n.stroke,m=g.align,w=g.enable?g.width:0,p=g.side,O=g.style,D=this.strokeAlign!==m||this.strokeWidth!==w||this.strokeSide!==p||this.strokeStyle!==O,E=V(n),M=W(E),S=E!==this.texture||M!==this.textureTransformId,j=s||a||v||D;if(j||d||S){this.pointId=r;var T=i.formatted;this.pointCount=T.length,this.pointOffsetId=u,this.pointSizeId=o,this.transformLocalId=b,this.strokeWidth=w,this.strokeAlign=m,this.strokeSide=p,this.strokeStyle=O,this.texture=E,this.textureTransformId=M,t.updateVertices(),(j||d)&&t.updateSteps(),j&&t.updateClippings(),(j||S)&&t.updateUvs();var N=this.pointCount,I=T.values,C=this.vertexOffset,A=t.vertices,R=t.clippings,y=t.steps,L=t.uvs,k=n.transform.internalTransform,x=X(E);if(0<N&&h.isStaticX()&&h.isStaticY()){var B=h.getX(0),_=h.getY(0);_a(A,C,0,0,B,_,m,w,k,La),qc(A,k,C,Ra,N,I,e),(j||d)&&(Pa(C,y,w,p,O,La),Jc(y,C,Ra,N)),j&&(xa(R,C,La),Yc(R,C,Ra,N)),(j||S)&&(Ua(L,C,x,La),Zc(L,C,Ra,N))}else for(var P=0;P<N;++P){var F=P<<1,U=I[F]+e.getX(P),G=I[F+1]+e.getY(P),z=(B=h.getX(P),_=h.getY(P),C+P*Ra);_a(A,z,U,G,B,_,m,w,k,La),(j||d)&&Pa(z,y,w,p,O,La),j&&xa(R,z,La),(j||S)&&Ua(L,z,x,La)}var Y=this.pointCountReserved,K=C+N*Ra,J=Ra*(Y-N);Gc(A,K,J),zc(y,K,J),Uc(R,K,J),Hc(L,K,J)}},n}(Xc),mf=function(t,n,i,r,e){return sf(t,n,i,Ra,r,ya,0,gf)},wf=function(t){function n(n){void 0===n&&(n=r.LINE_OF_RECTANGLES);var i=t.call(this,n)||this;return i.gt=new ef(i),i.oo=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return B(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=zt(e,u,this.gt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.gt.calcHitPointAbs(t,n,e,u,s,h,null,this.oo,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||zt)(s.strokeWidth,s.strokeScale,this.gt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.gt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.oo,u)},n}(su),pf=function(t,n,i){return po(t,n,i||new wf)},Of=function(){e[r.LINE_OF_RECTANGLES]=mf,n[r.LINE_OF_RECTANGLES]=pf,Ar.set(r.LINE_OF_RECTANGLES,Cr.PRIMITIVE|Cr.STROKE_SIDE)},Df=22,Ef=[0,0,0,0,0],Mf=new t.Point,Sf=function(t,n,i){var r=3*i-1;t[++r]=n+0,t[++r]=n+1,t[++r]=n+3,t[++r]=n+1,t[++r]=n+2,t[++r]=n+3,t[++r]=n+4,t[++r]=n+5,t[++r]=n+7,t[++r]=n+5,t[++r]=n+6,t[++r]=n+7,t[++r]=n+8,t[++r]=n+9,t[++r]=n+11,t[++r]=n+9,t[++r]=n+10,t[++r]=n+11,t[++r]=n+12,t[++r]=n+13,t[++r]=n+16,t[++r]=n+13,t[++r]=n+14,t[++r]=n+16,t[++r]=n+14,t[++r]=n+15,t[++r]=n+16,t[++r]=n+12,t[++r]=n+16,t[++r]=n+19,t[++r]=n+16,t[++r]=n+17,t[++r]=n+19,t[++r]=n+17,t[++r]=n+18,t[++r]=n+19,t[++r]=n+12,t[++r]=n+19,t[++r]=n+13,t[++r]=n+19,t[++r]=n+20,t[++r]=n+13,t[++r]=n+20,t[++r]=n+21,t[++r]=n+13},jf=function(t,n,i,r,e,u,s,h,o,a,c){var f=s*h,l=.5*e+(0<=e?+f:-f),v=.5*u+(0<=u?+f:-f),b=Math.sqrt(l*l+4*v*v),d=2*l*v/(l+b),g=d*o/(2*v),m=.5*(b-d)*o/b,w=g*b/(2*l),p=Mf;p.set(i,r-v),a.apply(p,p);var D=p.x,E=p.y;p.set(i,r),a.apply(p,p);var M=p.x,S=p.y;p.set(i+l,r),a.apply(p,p);var j=M-D,T=S-E,N=p.x+j,I=p.y+T,C=M+(M-p.x)+j,A=S+(S-p.y)+T,R=N-D,y=I-E,L=D+m*R,k=E+m*y,x=N-g*R,B=I-g*y,_=w*(C-N),P=w*(A-I),F=N+_,U=I+P,G=C-_,z=A-P,H=D-C,V=E-A,W=C+g*H,X=A+g*V,Y=D-m*H,K=E-m*V;p.set(i,r+v-d),a.apply(p,p);var J=p.x,Z=p.y,q=D+o*(J-D),Q=E+o*(Z-E),$=N+o*(J-N),tt=I+o*(Z-I),nt=C+o*(J-C),it=A+o*(Z-A),rt=M+j,et=S+T;c[0]=O(rt,et,J,Z),c[1]=w,c[2]=g,c[3]=m,c[4]=1-.5*d/v;var ut=2*n-1;t[++ut]=q,t[++ut]=Q,t[++ut]=Y,t[++ut]=K,t[++ut]=D,t[++ut]=E,t[++ut]=L,t[++ut]=k,t[++ut]=$,t[++ut]=tt,t[++ut]=x,t[++ut]=B,t[++ut]=N,t[++ut]=I,t[++ut]=F,t[++ut]=U,t[++ut]=nt,t[++ut]=it,t[++ut]=G,t[++ut]=z,t[++ut]=C,t[++ut]=A,t[++ut]=W,t[++ut]=X,t[++ut]=J,t[++ut]=Z,t[++ut]=q,t[++ut]=Q,t[++ut]=L,t[++ut]=k,t[++ut]=x,t[++ut]=B,t[++ut]=$,t[++ut]=tt,t[++ut]=F,t[++ut]=U,t[++ut]=G,t[++ut]=z,t[++ut]=nt,t[++ut]=it,t[++ut]=W,t[++ut]=X,t[++ut]=Y,t[++ut]=K},Tf=function(t,n,i,r){var e=3*n-1,u=1-r;i&it.TOP?(t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1):(t[++e]=u,t[++e]=u,t[++e]=0,t[++e]=1,t[++e]=u,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0),i&it.BOTTOM_RIGHT?(t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1):(t[++e]=u,t[++e]=u,t[++e]=0,t[++e]=1,t[++e]=u,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0),i&it.BOTTOM_LEFT?(t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=1,t[++e]=1):(t[++e]=u,t[++e]=u,t[++e]=0,t[++e]=1,t[++e]=u,t[++e]=0,t[++e]=1,t[++e]=1,t[++e]=0,t[++e]=u,t[++e]=1,t[++e]=0),t[++e]=0,t[++e]=0,t[++e]=0,t[++e]=u,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=u,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=u,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0,t[++e]=1,t[++e]=0,t[++e]=0},Nf=function(t,n,i,r,e,u,s){for(var h=o(e),a=s[0],c=u*a,f=3*i,l=6*i-1,v=0;v<Df;v+=1,f+=3)t[++l]=r,t[++l]=h,.5<n[f+2]?(t[++l]=c,t[++l]=c,t[++l]=1+n[f],t[++l]=1+n[f+1]):(t[++l]=a,t[++l]=a,t[++l]=1+n[f],t[++l]=1+n[f+1])},If=function(t,n,i,r,e){var u=i.x0,s=i.x1,h=i.x2,o=i.x3,a=i.y0,c=i.y1,f=i.y2,l=i.y3,v=.5*(u+s),b=.5*(a+c),d=e[4],g=v+d*(o-u),m=b+d*(l-a),w=e[1],p=e[2],O=e[3],D=v+O*(o-v),E=b+O*(l-b),M=v+r*(g-v),S=b+r*(m-b),j=v+O*(h-v),T=b+O*(f-b),N=h+p*(v-h),I=f+p*(b-f),C=h+r*(g-h),A=f+r*(m-f),R=h+w*(o-h),y=f+w*(l-f),L=o+w*(h-o),k=l+w*(f-l),x=o+r*(g-o),B=l+r*(m-l),_=o+p*(v-o),P=l+p*(b-l),F=2*n-1;t[++F]=M,t[++F]=S,t[++F]=D,t[++F]=E,t[++F]=v,t[++F]=b,t[++F]=j,t[++F]=T,t[++F]=C,t[++F]=A,t[++F]=N,t[++F]=I,t[++F]=h,t[++F]=f,t[++F]=R,t[++F]=y,t[++F]=x,t[++F]=B,t[++F]=L,t[++F]=k,t[++F]=o,t[++F]=l,t[++F]=_,t[++F]=P,t[++F]=g,t[++F]=m,t[++F]=M,t[++F]=S,t[++F]=j,t[++F]=T,t[++F]=N,t[++F]=I,t[++F]=C,t[++F]=A,t[++F]=R,t[++F]=y,t[++F]=L,t[++F]=k,t[++F]=x,t[++F]=B,t[++F]=_,t[++F]=P,t[++F]=D,t[++F]=E},Cf=function(t){function n(n,i,r,e,u){var s=t.call(this,n,i,r,e,u)||this;return s.radius=NaN,s.corner=NaN,s}return B(n,t),n.prototype.init=function(t){t.updateIndices();var n=this.vertexOffset,i=this.indexOffset,r=this.pointCountReserved;0<r&&(Sf(t.indices,n,i),Kc(t.indices,Df,i,15,r))},n.prototype.update=function(t,n){var i=n.points;i instanceof ef&&(this.updateVertexClippingStepAndUv(t,n,i),this.updateLineOfAnyColorFill(t,n,i,Df),this.updateLineOfAnyColorStroke(t,n,i,Df))},n.prototype.updateVertexClippingStepAndUv=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=f!==this.sizeX||l!==this.sizeY,b=n.radius,d=b!==this.radius,g=H(n),m=this.transformLocalId!==g,w=n.stroke,p=w.align,O=w.enable?w.width:0,D=w.style,E=this.strokeAlign!==p||this.strokeWidth!==O||this.strokeStyle!==D,M=n.corner,S=this.corner!==M,j=V(n),T=W(j),N=j!==this.texture||T!==this.textureTransformId,I=s||a||v||d||E;if(I||m||S||N){this.pointId=r;var C=i.formatted;this.pointCount=C.length,this.pointOffsetId=u,this.pointSizeId=o,this.sizeX=f,this.sizeY=l,this.radius=b,this.transformLocalId=g,this.strokeAlign=p,this.strokeWidth=O,this.strokeStyle=D,this.corner=M,this.texture=j,this.textureTransformId=T,t.updateVertices(),(I||S)&&t.updateClippings(),(I||m||S)&&t.updateSteps(),(I||N)&&t.updateUvs();var A=this.pointCount,R=C.values,y=this.vertexOffset,L=t.vertices,k=t.clippings,x=t.steps,B=t.uvs,_=n.transform.internalTransform,P=X(j);if(0<A&&h.isStaticX()&&h.isStaticY()){var F=h.getX(0),U=h.getY(0);jf(L,y,0,0,F,U,p,O,b,_,Ef),qc(L,_,y,Df,A,R,e),(I||S)&&(Tf(k,y,M,b),Yc(k,y,Df,A)),(I||m||S)&&(Nf(x,k,y,O,D,b,Ef),Jc(x,y,Df,A)),(I||N)&&(If(B,y,P,b,Ef),Zc(B,y,Df,A))}else for(var G=0;G<A;++G){var z=G<<1,Y=R[z]+e.getX(G),K=R[z+1]+e.getY(G),J=(F=h.getX(G),U=h.getY(G),y+G*Df);jf(L,J,Y,K,F,U,p,O,b,_,Ef),(I||S)&&Tf(k,J,M,b),(I||m||S)&&Nf(x,k,J,O,D,b,Ef),(I||N)&&If(B,J,P,b,Ef)}var Z=this.pointCountReserved,q=y+A*Df,Q=Df*(Z-A);Gc(L,q,Q),zc(x,q,Q),Uc(k,q,Q),Hc(B,q,Q)}},n}(Xc),Af=function(t,n,i,r,e){return sf(t,n,i,Df,r,15,0,Cf)},Rf=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v,b,d,g){var m=u+f*(h-u)-r,w=s+f*(o-s)-e,p=Math.sqrt(m*m+w*w),O=1e-5;if(O<p){var D=1/p,E=m*D,M=w*D,S=(u+l*(a-u)-r)*D,j=(s+l*(c-s)-e)*D,T=E*j-S*M;if(O<Math.abs(T)){var N=1/T,I=n-r,C=i-e;if(function(t,n,i,r,e,u,s){if(t.fill.enable){if(n*n+i*i<=r*r)return!0}else if(0<u){var h=n*n+i*i;if(h<=r*r){var o=Math.max(0,r*(1-u*s/e));if(o*o<=h)return!0}}return!1}(t,(+j*I-S*C)*N,(-M*I+E*C)*N,p,v*b,d,g))return!0}}return!1},yf=function(t,n,i,r,e,u,s){var h=2*e/r;if(Ut(n,i,h,-e,+e)){var o=Math.sqrt(r*r+4*e*e),a=2*r*e/(r+o),c=t.radius,f=e-a,l=-e,v=+r,b=+e,d=-v,g=+b,m=0+0*c,w=l+c*(f-l),p=v+c*(0-v),O=b+c*(f-b),D=+O,E=-p,M=-h*n+w-i<=0,S=+h*n+w-i<=0,j=i<=O,T=t.corner;if(!M&&!S&&T&it.TOP){var N=.5*(o-a)*c/o;if(Rf(t,n,i,m,w,0,l,d,g,v,b,N,N,a,c,u,s))return!0}else if(!M&&!j&&T&it.BOTTOM_LEFT){if(Rf(t,n,i,E,D,d,g,v,b,0,l,(I=a*c/(2*e))*o/(2*r),I,a,c,u,s))return!0}else if(!S&&!j&&T&it.BOTTOM_RIGHT){var I;if(Rf(t,n,i,p,O,v,b,0,l,d,g,I=a*c/(2*e),I*o/(2*r),a,c,u,s))return!0}else{if(t.fill.enable)return!0;if(0<u){var C=u*s,A=e-a,R=A+(-e-A)*Math.max(0,a-C)/a;if(!Ut(n,i,h,R,e-C))return!0}}}return!1},Lf=function(t){function n(n){return void 0===n&&(n=r.TRIANGLE_ROUNDED),t.call(this,n)||this}return B(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&yf(this,n,i,r,e,u,s)},n}(Bt),kf=function(t){function n(n){void 0===n&&(n=r.LINE_OF_TRIANGLE_ROUNDEDS);var i=t.call(this,n)||this;return i.gt=new ef(i),i.oo=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return B(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=zt(e,u,this.gt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.gt.calcHitPointAbs(t,n,e,u,s,h,null,this.oo,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||zt)(s.strokeWidth,s.strokeScale,this.gt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.gt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.oo,u)},n}(Lf),xf=function(t,n,i){return po(t,n,i||new kf)},Bf=function(){e[r.LINE_OF_TRIANGLE_ROUNDEDS]=Af,n[r.LINE_OF_TRIANGLE_ROUNDEDS]=xf,Ar.set(r.LINE_OF_TRIANGLE_ROUNDEDS,Cr.PRIMITIVE|Cr.STROKE_SIDE|Cr.BORDER_RADIUS)},_f=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(t){t.updateClippings(),t.updateIndices();var n=t.clippings,i=t.indices,r=this.vertexOffset,e=this.indexOffset,u=this.pointCountReserved;0<u&&(wa(n,r),Yc(n,r,7,u),pa(i,r,e),Kc(i,7,e,3,u))},n.prototype.update=function(t,n){var i=n.points;i instanceof ef&&(this.updateVertexStepAndUvs(t,n,i),this.updateLineOfAnyColorFill(t,n,i,7),this.updateLineOfAnyColorStroke(t,n,i,7))},n.prototype.updateVertexStepAndUvs=function(t,n,i){var r=i.id,e=i.offset,u=e.id,s=r!==this.pointId||u!==this.pointOffsetId,h=i.size,o=h.id,a=o!==this.pointSizeId,c=n.size,f=c.x,l=c.y,v=f!==this.sizeX||l!==this.sizeY,b=H(n),d=this.transformLocalId!==b,g=n.stroke,m=g.align,w=g.enable?g.width:0,p=g.style,O=this.strokeAlign!==m||this.strokeWidth!==w||this.strokeStyle!==p,D=V(n),E=W(D),M=D!==this.texture||E!==this.textureTransformId,S=s||a||v||O;if(S||d||M){this.pointId=r;var j=i.formatted;this.pointCount=j.length,this.pointOffsetId=u,this.pointSizeId=o,this.sizeX=f,this.sizeY=l,this.transformLocalId=b,this.strokeAlign=m,this.strokeWidth=w,this.strokeStyle=p,t.updateVertices(),(S||d)&&t.updateSteps(),(S||M)&&t.updateUvs();var T=this.pointCount,N=j.values,I=this.vertexOffset,C=t.vertices,A=t.steps,R=t.clippings,y=t.uvs,L=X(D),k=n.transform.internalTransform;if(0<T&&h.isStaticX()&&h.isStaticY()){var x=h.getX(0),B=h.getY(0);Oa(C,I,0,0,x,B,m,w,k,ga),qc(C,k,I,7,T,N,e),(S||d)&&(Da(A,R,I,7,w,p,ga),Jc(A,I,7,T)),(S||M)&&(Ea(y,L,I,ga),Zc(y,I,7,T))}else for(var _=0;_<T;++_){var P=_<<1,F=N[P]+e.getX(_),U=N[P+1]+e.getY(_),G=(x=h.getX(_),B=h.getY(_),I+7*_);Oa(C,G,F,U,x,B,m,w,k,ga),(S||d)&&Da(A,R,G,7,w,p,ga),(S||M)&&Ea(y,L,G,ga)}var z=I+7*T,Y=7*(this.pointCountReserved-T);Gc(C,z,Y),zc(A,z,Y),Hc(y,z,Y)}},n}(Xc),Pf=function(t,n,i,r,e){return sf(t,n,i,7,r,3,0,_f)},Ff=function(t){function n(n){return void 0===n&&(n=r.TRIANGLE),t.call(this,n)||this}return B(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(n,i,r,e,u,s,h){return!!t.prototype.containsAbsBBox.call(this,n,i,r,e)&&Gt(this,n,i,r,e,u,s)},n}(Bt),Uf=function(t){function n(n){void 0===n&&(n=r.LINE_OF_TRIANGLES);var i=t.call(this,n)||this;return i.gt=new ef(i),i.oo=function(t,n,r,e,u,s,h,o,a,c,f){return i.containsPointAbs(t,n,r,e,u,s,h,o,a,c,f)},i}return B(n,t),Object.defineProperty(n.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.type).copy(this)},n.prototype.containsAbs=function(t,n,i,r,e,u,s){var h=zt(e,u,this.gt.size.getLimit());return!!this.containsAbsBBox(t,n,i+h,r+h)&&this.gt.calcHitPointAbs(t,n,e,u,s,h,null,this.oo,null)},n.prototype.containsPointAbs=function(n,i,r,e,u,s,h,o,a,c,f){return t.prototype.containsAbs.call(this,n-h-u,i-o-s,r,e,a,c,f)},n.prototype.calcHitPoint=function(t,n,i,r,e,u){var s=this.toHitTestData(t,n),h=(i||zt)(s.strokeWidth,s.strokeScale,this.gt.size.getLimit());return!!this.containsAbsBBox(s.x,s.y,s.width+h,s.height+h)&&this.gt.calcHitPointAbs(s.x,s.y,s.strokeWidth,s.strokeScale,s.strokeAlign,h,r,e||this.oo,u)},n}(Ff),Gf=function(t,n,i){return po(t,n,i||new Uf)},zf=function(){e[r.LINE_OF_TRIANGLES]=Pf,n[r.LINE_OF_TRIANGLES]=Gf},Hf=function(t,n,i,r){return new u(t,i,r,0,0,[new Aa(i,r)]).init(n)},Vf=function(t){function n(n){return void 0===n&&(n=r.NULL),t.call(this,n)||this}return B(n,t),n.prototype.clone=function(){return new n(this.type).copy(this)},n}(Bt),Wf=function(t,n,i){return po(t,n,i||new Vf)},Xf=function(){e[r.NULL]=Hf,n[r.NULL]=Wf},Yf=function(t,n,i){return po(t,n,i||new su)},Kf=function(){e[r.RECTANGLE]=mc,n[r.RECTANGLE]=Yf,Ar.set(r.RECTANGLE,Cr.PRIMITIVE|Cr.STROKE_SIDE)},Jf=function(t,n,i){return po(t,n,i||new hu)},Zf=function(t,n,i){return po(t,n,i||new Bo)},qf=function(){e[r.RECTANGLE_ROUNDED]=yo,n[r.RECTANGLE_ROUNDED]=Zf,Ar.set(r.RECTANGLE_ROUNDED,Cr.PRIMITIVE|Cr.STROKE_SIDE|Cr.BORDER_RADIUS)},Qf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(t){t.updateClippings(),t.updateIndices(),wa(t.clippings,this.vertexOffset),pa(t.indices,this.vertexOffset,this.indexOffset)},n.prototype.update=function(t,n){this.updateVertexStepAndUv(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n)},n.prototype.updateVertexStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=H(n),h=this.transformLocalId!==s,o=n.stroke,a=o.align,c=o.enable?o.width:0,f=o.style,l=this.strokeAlign!==a||this.strokeWidth!==c||this.strokeStyle!==f,v=V(n),b=W(v),d=v!==this.texture||b!==this.textureTransformId,g=u||l;if(g||h||d){this.sizeX=r,this.sizeY=e,this.transformLocalId=s,this.strokeAlign=a,this.strokeWidth=c,this.strokeStyle=f,this.texture=v,this.textureTransformId=b;var m=this.vertexOffset;t.updateVertices(),Oa(t.vertices,m,0,0,r,e,a,c,n.transform.internalTransform,ga),(g||h)&&(t.updateSteps(),Da(t.steps,t.clippings,m,7,c,f,ga)),(g||d)&&(t.updateUvs(),Ea(t.uvs,X(v),m,ga))}},n}(z),$f=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=7+h,c=3+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new Qf(i,r,a-h,c-o),new Xt(i+7,r+3,h,o)]).init(n):null},tl=function(t,n,i){return po(t,n,i||new Ff)},nl=function(){e[r.TRIANGLE]=$f,n[r.TRIANGLE]=tl},il=function(t){function n(n,i,r,e){var u=t.call(this,n,i,r,e)||this;return u.radius=NaN,u.corner=NaN,u}return B(n,t),n.prototype.init=function(t){t.updateIndices(),Sf(t.indices,this.vertexOffset,this.indexOffset)},n.prototype.update=function(t,n){this.updateVertexClippingStepAndUv(t,n),this.updateColorFill(t,n),this.updateColorStroke(t,n)},n.prototype.updateVertexClippingStepAndUv=function(t,n){var i=n.size,r=i.x,e=i.y,u=r!==this.sizeX||e!==this.sizeY,s=n.radius,h=s!==this.radius,o=H(n),a=this.transformLocalId!==o,c=n.stroke,f=c.align,l=c.enable?c.width:0,v=c.style,b=this.strokeAlign!==f||this.strokeWidth!==l||this.strokeStyle!==v,d=n.corner,g=d!==this.corner,m=V(n),w=W(m),p=m!==this.texture||w!==this.textureTransformId,O=u||h||b;if(O||a||g||p){this.sizeX=r,this.sizeY=e,this.radius=s,this.transformLocalId=o,this.strokeAlign=f,this.strokeWidth=l,this.strokeStyle=v,this.corner=d,this.texture=m,this.textureTransformId=w;var D=this.vertexOffset;t.updateVertices(),jf(t.vertices,D,0,0,r,e,f,l,s,n.transform.internalTransform,Ef),(h||g)&&(t.updateClippings(),Tf(t.clippings,D,d,s)),(O||a||g)&&(t.updateSteps(),Nf(t.steps,t.clippings,D,l,v,n.radius,Ef)),(O||p)&&(t.updateUvs(),If(t.uvs,D,X(m),s,Ef))}},n}(z),rl=function(t,n,i,r,e){var s=M(n),h=4*s,o=2*s,a=Df+h,c=15+o;return t.check(i,r,a,c)?new u(t,i,r,a,c,[new il(i,r,a-h,c-o),new Xt(i+Df,r+15,h,o)]).init(n):null},el=function(t,n,i){return po(t,n,i||new Lf)},ul=function(){e[r.TRIANGLE_ROUNDED]=rl,n[r.TRIANGLE_ROUNDED]=el,Ar.set(r.TRIANGLE_ROUNDED,Cr.PRIMITIVE|Cr.STROKE_SIDE|Cr.BORDER_RADIUS)},sl=function(){Do(),zo(),ta(),Qa(),uc(),dc(),fc(),Oc(),e[r.IMAGE_SDF]=Cc,n[r.IMAGE_SDF]=Rc,Bc(),Fc(),Xf(),e[r.RECTANGLE_PIVOTED]=tc,n[r.RECTANGLE_PIVOTED]=Jf,Ar.set(r.RECTANGLE_PIVOTED,Cr.PRIMITIVE|Cr.STROKE_SIDE),qf(),Kf(),ul(),nl(),cf(),df(),Of(),Bf(),zf()},hl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DImage"},n}(Ms),ol=function(t){function n(n){var i,r=this;return(r=t.call(this,n)||this).At=null!==(i=null==n?void 0:n.value)&&void 0!==i?i:null,r}return B(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.initOnClick(n)},n.prototype.initOnClick=function(t){var n=this;Wi.onClick(this,(function(t){n.state.isActionable&&n.onSelect(t)}))},Object.defineProperty(n.prototype,"value",{get:function(){return this.At},set:function(t){this.At=t},enumerable:!1,configurable:!0}),n.prototype.hasSelection=function(t){return t&&t.selection&&t.selection.add},n.prototype.getSelection=function(){for(var t=this.parent;t;){if(this.hasSelection(t))return t.selection;t=t.parent}return null},n.prototype.onSelect=function(t){this.emit("select",this);var n=this.getSelection();n&&n.add(this)},n.prototype.onKeyDown=function(n){return Zt.isActivateKey(n)&&this.onKeyDownActivate(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownActivate=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.onSelect(t),0))},n.prototype.getType=function(){return"DMenuItemBase"},n}(hl),al=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getContext=function(){for(var t=this.parent;t;){if(t.getContext)return t.getContext();t=t.parent}return null},n.prototype.getCloseable=function(){for(var t=this.parent;t;){if(t.getCloseable)return t.getCloseable();t=t.parent}return null},n.prototype.getType=function(){return"DMenuItem"},n}(ol),cl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),this.initOnOver(n),this.initShortcuts(n)},n.prototype.initOnOver=function(t){var n=this;this.on(Wi.over,(function(){var t=n.getContext();null!=t&&n.parent instanceof Zi&&t.trim(n.getCloseable())}))},n.prototype.initShortcuts=function(t){var n=this.Vn;if(null!=n&&0<n.length){var i=n[0],r=Zt.toString(i);this.ao=this.createText(r),this.snippet.add(this.ao,!0)}else this.ao=null;this.co=this.theme.getShortcutTextMargin()},n.prototype.updateShortcutText=function(){var t=this.ao,n=this.co;if(null!=t&&null!=n){var i,r=this.kn;i=r.width.isOn?n:this.width-t.width-n;var e,u=this.Gn,s=u.getTop();e=r.height.isOn?s:s+.5*(this.height-s-u.getBottom()-t.height),t.position.set(i,e)}},n.prototype.updateTextColor=function(n){t.prototype.updateTextColor.call(this,n);var i=this.ao;if(null!=i){var r=this.theme,e=this.state;i.style.fill=r.getShortcutColor(e),i.alpha=r.getShortcutAlpha(e)}},n.prototype.updateText=function(){t.prototype.updateText.call(this),this.updateShortcutText()},n.prototype.getType=function(){return"DMenuItemText"},n.prototype.onSelect=function(n){t.prototype.onSelect.call(this,n);var i=this.getCloseable();null!=i&&i.emit("select",this.value,this,i)},n.prototype.onShortcut=function(n){t.prototype.onShortcut.call(this,n),this.onSelect(n)},n}(al),fl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){t.prototype.init.call(this,n),(null==n?void 0:n.check)&&(this.state.isActive=!0)},n.prototype.getType=function(){return"DMenuItemCheck"},n.prototype.onSelect=function(n){this.state.isActive=!this.state.isActive,t.prototype.onSelect.call(this,n)},n}(cl),ll=function(t){return"check"in t},vl={OPEN_LINK:0,OPEN_LINK_IN_NEW_WINDOW:1,COPY_LINK_ADDRESS:2},bl=function(){function n(){}return n.addItemCreator=function(t){this.CREATORS.push(t)},n.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},n.setMenuCreator=function(t){this.MENU_CREATOR=t},n.newItemOf=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){var s=t[e](i,r);if(null!=s)return s}return n?n(i,r):null},n.newItem=function(t,n){return this.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)},n.newItemsOf=function(n,i,r,e){for(var u=0,s=r.length;u<s;++u){var h=r[u];if(h instanceof t.DisplayObject)i.addChild(h);else if(null!=h){var o=n.newItem(h,e);if(null==o)throw new Error("No matching menu item creator found: ".concat(JSON.stringify(h)));i.addChild(o)}}},n.newItems=function(t,n,i){this.newItemsOf(this,t,n,i)},n.newMenu=function(t){if(null!=this.MENU_CREATOR)return this.MENU_CREATOR(t);throw new Error("Missing DMenu creator.")},n.CREATORS=[],n.CREATOR_DEFAULT=null,n}(),dl=function(){function n(t,n){this.p=t,this.yn=n,this.Ju=!0}return Object.defineProperty(n.prototype,"enable",{get:function(){return this.Ju},set:function(t){this.Ju=t},enumerable:!1,configurable:!0}),n.prototype.open=function(t){this.get().open(t)},n.prototype.get=function(){var t=this,n=this.fo;return null==n&&(n=this.toMenu(this.yn),this.fo=n,n.on("select",(function(n,i,r){t.onSelect(n,i,r)}))),n},n.prototype.toMenu=function(n){return n instanceof t.DisplayObject?n:this.newMenu(n)},n.prototype.newMenu=function(t){return bl.newMenu(t)},n.prototype.onSelect=function(t,n,i){var r=this.p;switch(t){case vl.OPEN_LINK:r.open(!1);break;case vl.OPEN_LINK_IN_NEW_WINDOW:r.open(!0);break;case vl.COPY_LINK_ADDRESS:r.copy()}},n}(),gl={AUTO:0,THIS_WINDOW:1,NEW_WINDOW:2},ml=function(t){var n=document.getSelection();if(n){var i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i)}return n},wl=function(t){return t.clipboardData||window.clipboardData},pl=function(t){function n(){var n=t.call(this)||this,i=document.body;return i.addEventListener("copy",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("copy",wl(t)))})),i.addEventListener("cut",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("cut",wl(t)))})),i.addEventListener("paste",(function(t){t.target===i&&(t.preventDefault(),t.stopPropagation(),n.emit("paste",wl(t)))})),n}return B(n,t),n.copy=function(t){var n=navigator.clipboard;n&&n.writeText?n.writeText(t):function(t,n){if("undefined"==typeof ClipboardEvent){var i=t.clipboardData;if(void 0!==i&&void 0!==i.setData)return i.setData("Text",n),!0}return!1}(window,t)||function(t){var n=document.createElement("div");n.setAttribute("style","-webkit-user-select: text !important"),n.textContent="Dummy",document.body.appendChild(n);var i=ml(n),r=!1;if(i){var e=function(i){if(i.target===n){var e=wl(i);e.setData("text/plain",t),r=e.getData("text/plain")===t,i.preventDefault()}};document.addEventListener("copy",e);try{document.execCommand("copy")}finally{document.removeEventListener("copy",e)}i.removeAllRanges()}return document.body.removeChild(n),r}(t)||navigator.userAgent.indexOf("Edge")<0&&function(t){var n=document.createElement("div");n.setAttribute("style","-webkit-user-select: text !important");var i=document.createElement("span");i.innerText=t,(n.attachShadow?n.attachShadow({mode:"open"}):n).appendChild(i),document.body.appendChild(n);var r=ml(n);r&&(document.execCommand("copy"),r.removeAllRanges()),document.body.removeChild(n)}(t)},n}(t.utils.EventEmitter),Ol=t.interaction.InteractionEvent,Dl=function(){function t(t){this.yn=t,this.lo=null==t?void 0:t.url,this.Yn=this.toNormalizedTarget(null==t?void 0:t.target),this.vo=null==t?void 0:t.checker,this.Ju=!0}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.Ju},set:function(t){this.Ju=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.lo},set:function(t){this.lo=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.Yn},set:function(t){this.Yn=this.toNormalizedTarget(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checker",{get:function(){return this.vo},set:function(t){this.vo=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"menu",{get:function(){var t=this.fo;return null==t&&(t=this.newMenu(),this.fo=t),t},enumerable:!1,configurable:!0}),t.prototype.newMenu=function(){var n=this.yn;if(n){var i=n.menu;if(i)return new dl(this,i)}var r=t.MENU;return null==r&&(r=new dl(this,Y.getInstance().get("DLink").getMenuOptions()),t.MENU=r),r},t.prototype.toStringifiedUrl=function(t,n){var i=ot(t)?t():t;null!=i&&(at(i)?n(i):i.then((function(t){null!=t&&n(t)})))},t.prototype.toNormalizedUrl=function(n){var i=t.ANCHOR_ELEMENT||document.createElement("a");return t.ANCHOR_ELEMENT=i,i.href=n,i.href},t.prototype.toNormalizedTarget=function(t){return Oi(null!=t?t:gl.AUTO,gl)},t.prototype.copy=function(){var t=this;this.toStringifiedUrl(this.lo,(function(n){pl.copy(t.toNormalizedUrl(n))}))},t.prototype.open=function(t){var n=this;this.toStringifiedUrl(this.lo,(function(i){var r=!0===t||!1===t?t:n.inNewWindow(t);n.check(i,r,(function(){n.exec(i,r)}))}))},t.prototype.check=function(t,n,i){var r=this.vo;if(r){var e=r();!0===e?i():!1===e||e.then((function(t){t&&i()}))}else i()},t.prototype.exec=function(t,n){if(n){var i=document.createElement("a");i.href=t,i.target="_blank",i.style.display="none",i.rel="noopener noreferrer",document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i)}),100)}else window.location.href=t},t.prototype.inNewWindow=function(t){switch(this.Yn){case gl.NEW_WINDOW:return!0;case gl.THIS_WINDOW:return!1;case gl.AUTO:if(null!=t){var n=t instanceof Ol?t.data.originalEvent:t;return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey||"button"in n&&0!==n.button}return!1}},t.prototype.add=function(t,n){var i=this;Wi.onClick(t,(function(r,e){i.onClick(t,e)||n(r)}))},t.prototype.onClick=function(t,n){if(this.Yn===gl.AUTO&&n){var i=this.menu;if(i.enable)return this.Ju&&t.state.isActionable&&i.open(t),!0}return!this.Ju||!t.state.isActionable},t}(),El=function(){function t(){}return t.toStateOptions=function(t,n){if(n&&(t===gl.NEW_WINDOW||"NEW_WINDOW"===t)){var i=n.state;null==i?n.state=ht.NEW_WINDOW:at(i)?i!==ht.NEW_WINDOW&&(n.state=[i,ht.NEW_WINDOW]):i.indexOf(ht.NEW_WINDOW)<0&&i.push(ht.NEW_WINDOW)}return n},t}(),Ml=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toLinkOptions=function(t){if(t)return{url:this.toUrl(t.url),target:t.target,checker:this.toChecker(t.checker),menu:t.menu}},n.prototype.toUrl=function(t){var n=this;return at(t)||null==t?t:function(){return t(n)}},n.prototype.toChecker=function(t){var n=this;if(null!=t)return function(){return t(n)}},n.prototype.init=function(n){this.bo=new Dl(this.toLinkOptions(n)),t.prototype.init.call(this,El.toStateOptions(null==n?void 0:n.target,n))},Object.defineProperty(n.prototype,"link",{get:function(){return this.bo},enumerable:!1,configurable:!0}),n.prototype.initOnClick=function(t){var n=this;this.bo.add(this,(function(t){return n.onSelect(t)}))},n.prototype.getType=function(){return"DMenuItemLink"},n.prototype.onSelect=function(n){t.prototype.onSelect.call(this,n),this.bo.open(n)},n.prototype.open=function(t){this.bo.open(t)},n.prototype.onShortcut=function(n){t.prototype.onShortcut.call(this,n),this.onSelect(n)},n}(cl),Sl=function(t){return"url"in t},jl=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(t){n.prototype.init.call(this,t),this.initHover(t)},i.prototype.initHover=function(t){var n=this;this.on(Wi.over,(function(){n.state.isActionable&&n.open()}))},i.prototype.toMenu=function(n){var i=null==n?void 0:n.menu;return i instanceof t.DisplayObject?i:this.newMenu(i)},i.prototype.newMenu=function(t){return bl.newMenu(t)},Object.defineProperty(i.prototype,"menu",{get:function(){var t=this,n=this.fo;return null==n&&((n=this.toMenu(this.yn)).on("select",(function(n,i,r){t.onMenuSelect(n,i,r)})),this.fo=n),n},enumerable:!1,configurable:!0}),i.prototype.getType=function(){return"DMenuItemMenu"},i.prototype.open=function(){var t=this.menu;t.isHidden()&&this.onOpen(t)},i.prototype.onOpen=function(t){var n=this.getContext();null!=n&&t.open(this,this.getCloseable(),n)},i.prototype.close=function(){this.menu.close()},i.prototype.toggle=function(){var t=this.menu;t.isHidden()?this.onOpen(t):t.close()},i.prototype.onSelect=function(t){this.open(),n.prototype.onSelect.call(this,t)},i.prototype.onMenuSelect=function(t,n,i){var r=this.getCloseable();null!=r&&r.emit("select",t,n,r)},i.prototype.onKeyDown=function(t){return Zt.isArrowRightKey(t)&&this.onKeyDownArrowRight(t),n.prototype.onKeyDown.call(this,t)},i.prototype.onKeyDownArrowRight=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.onSelect(t),0))},i}(al),Tl=function(t){return"menu"in t},Nl=function(n,i){var r=n.menu;return r instanceof t.DisplayObject||(null==r.sticky&&(r.sticky=i),null==r.align&&(r.align=xu.RIGHT)),n},Il=function(t){function n(n){var i=t.call(this)||this;return n.snippet.add(i,!0),n.reflowable.add(i),i}return B(n,t),n.prototype.onReflow=function(t,n,i){var r=t.state,e=t.border,u=e.getWidth(r),s=e.getColor(r);if(null!=s){var h=e.getAlpha(r),o=e.getAlign(r),a=t.padding,c=.5*i;this.clear(),this.lineStyle(u,s,h,o),this.moveTo(a.getLeft(),c),this.lineTo(n-a.getRight(),c),this.visible=!0}else this.clear(),this.visible=!1},n}(t.Graphics),Cl=function(t){return"separator"in t},Al=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.initReflowable=function(){new Il(this)},n.prototype.getType=function(){return"DMenuItemSeparator"},n}(ol),Rl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuItemSpace"},n}(Xu),yl=function(t){return"space"in t},Ll=function(){bl.addItemCreator((function(t){return ll(t)?new fl(t):null})),bl.addItemCreator((function(t){return Sl(t)?new Ml(t):null})),bl.addItemCreator((function(t,n){return Tl(t)?new jl(Nl(t,n)):null})),bl.addItemCreator((function(t){return Cl(t)?new Al(t):null})),bl.addItemCreator((function(t){return yl(t)?new Rl(t):null})),bl.setItemCreatorDefault((function(t){return new cl(t)}))},kl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuItemExpandableBody"},n}(Ju),xl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getSelection=function(){return null},n.prototype.getType=function(){return"DMenuItemExpandableHeader"},n}(ol),Bl=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return bl.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||bl.newItem(t,n)},t.newItems=function(t,n,i){bl.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),_l=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(t){var i,r=this;n.prototype.init.call(this,t);var e=this.theme,u=this.toHeader(e,t);this.Qs=u,u.on("select",(function(){r.toggle()})),this.addChild(u);var s=this.toBody(e,t);this.fe=s;var h=null!==(i=null==t?void 0:t.sticky)&&void 0!==i&&i;this.newItems(s,h,e,t),this.addChild(s),this.state.isActive?this.onActivated():this.onDeactivated()},i.prototype.newItems=function(t,n,i,r){var e=null==r?void 0:r.items;null!=e&&Bl.newItems(t,e,n)},i.prototype.toHeader=function(n,i){return i?i.header instanceof t.DisplayObject?i.header:this.newHeader(n,i.header):this.newHeader(n)},i.prototype.newHeader=function(t,n){return new xl(n)},i.prototype.toBody=function(n,i){var r=null==i?void 0:i.body;return r?r instanceof t.DisplayObject?r:this.newBody(n,r):this.newBody(n)},i.prototype.newBody=function(t,n){return new kl(n)},i.prototype.open=function(){this.state.isActive=!0},i.prototype.close=function(){this.state.isActive=!1},i.prototype.toggle=function(){this.state.isActive=!this.state.isActive},i.prototype.onActivated=function(){var t=this.fe;t instanceof Zi?t.show():t.visible=!0},i.prototype.onDeactivated=function(){var t=this.fe;t instanceof Zi?t.hide():t.visible=!1},i.prototype.onStateChange=function(t,i){n.prototype.onStateChange.call(this,t,i),t.isActive?i.isActive||this.onActivated():i.isActive&&this.onDeactivated()},i.prototype.onKeyDown=function(t){if(Zt.isArrowRightKey(t))this.state.isActionable&&!this.state.isActive&&(i=this.Qs)instanceof Zi&&i.state.isFocused&&(this.state.isActive=!0);else if(Zt.isArrowLeftKey(t)){var i;if(this.state.isActionable&&this.state.isActive)return(i=this.Qs)instanceof Zi?i.focus():this.focus(),this.state.isActive=!1,n.prototype.onKeyDown.call(this,t),!0}return n.prototype.onKeyDown.call(this,t)},i.prototype.getType=function(){return"DMenuItemExpandable"},i}(Ju),Pl=function(t){return"header"in t},Fl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemCheck"},n}(fl),Ul=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemLink"},n}(Ml),Gl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemSeparator"},n}(Al),zl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemSpace"},n}(Rl),Hl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemText"},n}(cl),Vl=function(){bl.addItemCreator((function(t){return Pl(t)?new _l(t):null})),Bl.addItemCreator((function(t){return ll(t)?new Fl(t):null})),Bl.addItemCreator((function(t){return Sl(t)?new Ul(t):null})),Bl.addItemCreator((function(t){return Cl(t)?new Gl(t):null})),Bl.addItemCreator((function(t){return yl(t)?new zl(t):null})),Bl.setItemCreatorDefault((function(t){return new Hl(t)}))},Wl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemCheck"},n}(fl),Xl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getSelection=function(){return null},n.prototype.getType=function(){return"DMenuSidedItemLink"},n}(Ml),Yl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.initHover=function(t){},n.prototype.onMenuSelect=function(n,i,r){t.prototype.onMenuSelect.call(this,n,i,r);var e=t.prototype.getSelection.call(this);e&&e.add(i)},n.prototype.onOpen=function(t){t.open(this,this)},n.prototype.getSelection=function(){return null},n.prototype.getType=function(){return"DMenuSidedItemMenu"},n}(jl),Kl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemSeparator"},n}(Al),Jl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemSpace"},n}(Rl),Zl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemText"},n}(cl),ql=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return bl.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||bl.newItem(t,n)},t.newItems=function(t,n,i){bl.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),Ql=function(){ql.setItemCreatorDefault((function(t){return new Zl(t)})),ql.addItemCreator((function(t){return yl(t)?new Jl(t):null})),ql.addItemCreator((function(t){return Cl(t)?new Kl(t):null})),ql.addItemCreator((function(t,n){return Tl(t)?new Yl(Nl(t,n)):null})),ql.addItemCreator((function(t){return Sl(t)?new Xl(t):null})),ql.addItemCreator((function(t){return ll(t)?new Wl(t):null}))},$l=function(){function t(){}return t.addItemCreator=function(t){this.CREATORS.push(t)},t.setItemCreatorDefault=function(t){this.CREATOR_DEFAULT=t},t.newItem=function(t,n){return bl.newItemOf(this.CREATORS,this.CREATOR_DEFAULT,t,n)||ql.newItem(t,n)},t.newItems=function(t,n,i){bl.newItemsOf(this,t,n,i)},t.CREATORS=[],t.CREATOR_DEFAULT=null,t}(),tv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newItems=function(t,n,i,r){null!=r&&null!=r.items&&$l.newItems(t,r.items,n)},n.prototype.getType=function(){return"DMenuSidedItemExpandable"},n}(_l),nv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemCheck"},n}(Fl),iv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemLink"},n}(Ml),rv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuItemExpandableItemMenu"},n}(jl),ev=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onOpen=function(t){t.open(this,this)},n.prototype.getType=function(){return"DMenuSidedItemExpandableItemMenu"},n}(rv),uv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemSeparator"},n}(Gl),sv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemSpace"},n}(zl),hv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DMenuSidedItemExpandableItemText"},n}(Hl),ov=function(){ql.addItemCreator((function(t){return Pl(t)?new tv(t):null})),$l.addItemCreator((function(t){return ll(t)?new nv(t):null})),$l.addItemCreator((function(t){return Sl(t)?new iv(t):null})),$l.addItemCreator((function(t,n){return Tl(t)?new ev(Nl(t,n)):null})),$l.addItemCreator((function(t){return Cl(t)?new uv(t):null})),$l.addItemCreator((function(t){return yl(t)?new sv(t):null})),$l.setItemCreatorDefault((function(t){return new hv(t)}))},av=function(){Ll(),Vl(),Ql(),ov()},cv=function(){av(),sl()},fv=function(t){function n(n,i){return t.call(this,Ve.EMIT_EVENT,n,i,gu.EMIT_EVENT,"")||this}return B(n,t),n}(Cu),lv=function(t){function n(n,i,r){return t.call(this,n,i,"",gu.EMIT_EVENT,r)||this}return B(n,t),n}(Cu),vv=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e,"")||this}return B(n,t),n}(Cu),bv=function(t){function n(n,i,r,e){return t.call(this,n,i,r,gu.EMIT_EVENT,e)||this}return B(n,t),n}(Cu),dv=function(t,n){return n?wo(t).then((function(t){var n=Se.getInstance().init();n.updateTexture(t),n.render();var i=document.createElement("canvas");return n.read(i),dv(i.toDataURL(),!1)})):wo(t).then((function(t){return new Ac(t)}))},gv=function(){function t(){}return t.from=function(t,n,i){var r=this,e=Je.toSerialized(t),u=e.pieces;return Je.toPieceData(n,u,i).then((function(t){return r.do(e,i,u,t)}))},t.do=function(t,n,i,r){var e=this,u=t.width,s=t.height,h=new Ke(u,s,!1),o=new vr(t,i,r,!1);return Je.newLayer(t,h,o).then((function(){return e.create(t.name,u,s,h,n)}))},t.create=function(t,n,i,r,e){var u=new _r(t,e);return u.size.set(n,i),r.copyTo(u),u.size.init(),u},t}(),mv=function(t){return"data:image/svg+xml;base64,".concat(btoa(t))},wv=function(t){return Math.round(100*t)/100},pv=function(){function t(){}return t.add=function(t){var n,i;(null!==(n=this.Sh)&&void 0!==n?n:this.Sh=new Map).set(t.type,t),(null!==(i=this.Bt)&&void 0!==i?i:this.Bt=[]).push(t)},t.get=function(t){var n=this.Sh;if(null!=n)return n.get(t)},t.each=function(t){var n=this.Bt;if(null!=n)for(var i=0,r=n.length;i<r;++i)t(n[i])},t}(),Ov=function(){function t(){}return t.toIndices=function(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].index);return n},t.toDepth=function(t){for(var n=0,i=t.parent;i instanceof wt;)n+=1,i=i.parent;return n},t.toSharedParent=function(t,n){if(this.toDepth(t)<this.toDepth(n)){for(var i=t.parent;i instanceof wt;){if(this.isParent(n,i))return i;i=i.parent}return i}for(var r=n.parent;r instanceof wt;){if(this.isParent(t,r))return r;r=r.parent}return r},t.toOfParent=function(t,n){for(var i=t.parent;i!==n&&i instanceof wt;)t=i,i=i.parent;return t},t.isParent=function(t,n){for(var i=t.parent;i instanceof wt;){if(i===n)return!0;i=i.parent}return!1},t.toSelected=function(t){for(var n=t;n instanceof wt;){if(n.selected)return n;n=n.parent}return null},t.findChildById=function(n,i,r){for(var e=n.children,u=0,s=e.length;u<s;++u){var h=e[u];if(h.id===i)return h;if(!0===r){var o=t.findChildById(h,i,r);if(null!=o)return o}}return null},t.findChildByType=function(n,i,r){for(var e=n.children,u=0,s=e.length;u<s;++u){var h=e[u];if(h.type===i)return h;if(!0===r){var o=t.findChildByType(h,i,r);if(null!=o)return o}}return null},t.findChild=function(n,i,r){for(var e=n.children,u=0,s=e.length;u<s;++u){var h=e[u];if(i(h))return h;if(!0===r){var o=t.findChild(h,i,r);if(null!=o)return o}}return null},t.findChildrenByType=function(n,i,r,e){e=e||[];for(var u=n.children,s=0,h=u.length;s<h;++s){var o=u[s];o.type===i&&e.push(o),!0===r&&t.findChildrenByType(o,i,r,e)}return e},t.findChildren=function(n,i,r,e){e=e||[];for(var u=n.children,s=0,h=u.length;s<h;++s){var o=u[s];i(o)&&e.push(o),!0===r&&t.findChildren(o,i,r,e)}return e},t.COMPARATOR_INDEX=function(t,n){return t.index-n.index},t}(),Dv=function(){function t(){}return t.delete=function(t,n,i){for(var r=t.children,e=r.length,u=0;u<e;++u)(o=r[u]).selected?o.index=e+u:o.index=u;if(r.sort(Ov.COMPARATOR_INDEX),!0===i){for(u=e-1;0<=u;--u){if(!(o=r[u]).selected){var s=r.length-(u+1);if(0<s){var h=r.splice(u+1,s);return null!=n&&(n.length=0),t.onChildTransformChange(),t.toDirty(),h}return null!=n&&(n.length=0),null}o.index-=e,o.parent=null,o.selected=!1,o.uploaded=void 0,o.onDetach()}return 0<r.length?(h=r.splice(0,r.length),null!=n&&(n.length=0),t.onChildTransformChange(),t.toDirty(),h):(null!=n&&(n.length=0),null)}for(u=e-1;0<=u;--u){var o;if(!(o=r[u]).selected)return r.length=u+1,null!=n&&(n.length=0),t.onChildTransformChange(),t.toDirty(),null;o.parent=null,o.selected=!1,o.uploaded=void 0,o.onDetach()}return 0<r.length?(r.length=0,null!=n&&(n.length=0),t.onChildTransformChange(),t.toDirty()):null!=n&&(n.length=0),null},t}(),Ev=function(){function t(){}return t.from=function(t){if(at(t))return U[t];if(gn(t))return t;if(null!=t){for(var n=U.NONE,i=0,r=t.length;i<r;++i)n|=U[t[i]];return n}return U.NONE},t}(),Mv=function(){function t(){this.resources=[],this.resourceToIndex=new Map,this.data=[],this.dataToIndex=new Map,this.pieces=[],this.pieceToIndex=new Map,this.uuids=new Set,this.uuidNext=0}return t.prototype.addResource=function(t){return this.mo(t,this.resources,this.resourceToIndex)},t.prototype.addData=function(t){return this.mo(t,this.data,this.dataToIndex)},t.prototype.addPiece=function(t){return this.mo(t,this.pieces,this.pieceToIndex)},t.prototype.addUuid=function(t){if(0!==t){var n=this.uuids;return n.has(t)?0:(n.add(t),t)}return 0},t.prototype.updateUuid=function(t){var n=this.uuids;if(0!==t)return t;var i=this.newUuid();return n.add(i),i},t.prototype.newUuid=function(){for(var t=this.uuids,n=this.uuidNext;;)if(0!==(n+=1)&&!t.has(n))return this.uuidNext=n,n},t.prototype.mo=function(t,n,i){var r=i.get(t);if(null!=r)return r;var e=n.length;return n.push(t),i.set(t,e),e},t}(),Sv=function(t){function n(){var n=t.call(this)||this;return n.wo=!0,n.Ju=!0,n.T=10,n}return B(n,t),Object.defineProperty(n.prototype,"visible",{get:function(){return this.wo},set:function(t){this.wo!==t&&(this.wo=t,this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"enable",{get:function(){return this.Ju},set:function(t){this.Ju!==t&&(this.Ju=t,this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t,this.emit("change",t,this))},enumerable:!1,configurable:!0}),n.prototype.snap=function(t,n){if(this.Ju){var i=this.T;n.set(t,Math.round(t/i)*i)}},n.prototype.reset=function(){this.Ju=!0,this.T=10,this.emit("change",this)},n.prototype.serialize=function(){return[this.Ju?1:0,this.wo?1:0,this.T]},n.prototype.deserialize=function(t){this.enable=!!t[0],2 in t?(this.visible=!!t[1],this.size=t[2]):(this.visible=!1,this.size=t[1])},n}(t.utils.EventEmitter),jv=function(){function t(){this.distance=NaN,this.result=0,this.threshold=10}return t.prototype.reset=function(t,n){this.distance=NaN,this.result=t,this.threshold=1e-4<n?10/n:10},t.prototype.set=function(t,n){var i=Math.abs(n-t);if(i<=this.threshold){var r=this.distance;(r!=r||i<r)&&(this.distance=i,this.result=n)}},t}(),Tv={HORIZONTAL:0,VERTICAL:1},Nv=function(){function t(t,n){this.type=t,this.position=n}return t.prototype.serialize=function(){return[this.type,this.position]},t}(),Iv=function(t){function n(){var n=t.call(this)||this;return n.values=[],n.wo=!0,n.Ju=!0,n}return B(n,t),Object.defineProperty(n.prototype,"enable",{get:function(){return this.Ju},set:function(t){this.Ju!==t&&(this.Ju=t,this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this.wo},set:function(t){this.wo!==t&&(this.wo=t,this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.values.length},enumerable:!1,configurable:!0}),n.prototype.add=function(t,n){null!=n?this.values.splice(n,0,t):this.values.push(t),this.emit("change",this)},n.prototype.remove=function(t){var n=this.values;0<=t&&t<n.length&&(n.splice(t,1),this.emit("change",this))},n.prototype.replace=function(t,n){var i=this.values;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.emit("change",this),r}return null},n.prototype.swap=function(t,n){if(t!==n){var i=this.values,r=i[t];i[t]=i[n],i[n]=r,this.emit("change",this)}},n.prototype.snap=function(t,n,i,r){if(this.Ju)for(var e=this.values,u=0,s=e.length;u<s;++u){var h=e[u];h.type===Tv.VERTICAL?i.set(t,h.position):r.set(n,h.position)}},n.prototype.reset=function(){this.Ju=!0,this.wo=!0,this.values.length=0,this.emit("change",this)},n.prototype.serialize=function(){for(var t=[],n=this.values,i=0,r=n.length;i<r;++i)t.push(n[i].serialize());return[this.Ju?1:0,this.wo?1:0,t]},n.prototype.deserialize=function(t){this.Ju=!!t[0],this.wo=!!t[1];var n=t[2],i=this.values;i.length=0;for(var r=0,e=n.length;r<e;++r){var u=n[r];i.push(new Nv(u[0],u[1]))}this.emit("change",this)},n}(t.utils.EventEmitter),Cv=1e-5,Av={NONE:0,TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,MIDDLE_LEFT:4,MIDDLE_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8,ROTATION:9},Rv=function(n){function i(i){var r=n.call(this)||this;return r.gt=[new t.Point,new t.Point,new t.Point,new t.Point,new t.Point],r.po=[new t.Point,new t.Point],r.Oo=[1,1],r.Do=new t.Point,r.Eo=new jv,r.Mo=new jv,r.So={distance:0,scale:new t.Point},r.jo=new t.Point,r.To=new t.Rectangle,r.No=new t.Point,r.grid=new Sv,r.target=new Iv,r.p=i,r.Ju=!0,r}return B(i,n),Object.defineProperty(i.prototype,"enable",{get:function(){return this.Ju},set:function(t){this.Ju!==t&&(this.Ju=t,this.emit("change",this))},enumerable:!1,configurable:!0}),i.prototype.prepare=function(t){t.updateTransform();var n=t.transform.localTransform,i=t.width,r=t.height,e=this.gt;e[0].set(0,0),e[1].set(i,0),e[2].set(i,r),e[3].set(0,r),e[4].set(.5*i,.5*r),n.apply(e[0],e[0]),n.apply(e[1],e[1]),n.apply(e[2],e[2]),n.apply(e[3],e[3]),n.apply(e[4],e[4])},i.prototype.prepareForTranslate=function(t){this.Ju&&this.prepare(t)},i.prototype.snap=function(t,n){var i=t.x,r=t.y,e=this.p.canvas,u=this.Eo,s=this.Mo;if(null!=e){var h=Math.max(e.scale.x,e.scale.y);u.reset(i,h),s.reset(r,h),u.set(i,0),u.set(i,e.width),s.set(r,0),s.set(r,e.height)}else u.reset(i,1),s.reset(r,1);return this.target.snap(i,r,u,s),this.grid.snap(i,u),this.grid.snap(r,s),n.x=Eh(u.distance)?NaN:u.result,n.y=Eh(s.distance)?NaN:s.result,n},i.prototype.toSnapped=function(t,n){var i=t.x,r=t.y;if(this.Ju){this.snap(t,n);var e=n.x,u=n.y;n.set(Eh(e)?i:e,Eh(u)?r:u)}else n.set(i,r);return n},i.prototype.toTranslationSnapped=function(t,n){var i=t.x,r=t.y,e=NaN,u=NaN;if(this.Ju)for(var s=this.jo,h=this.gt,o=0,a=h.length;o<a;++o){var c=h[o];if(s.set(c.x+i,c.y+r),this.snap(s,s),!Eh(s.x)){var f=s.x-c.x;(Eh(e)||Math.abs(f-i)<Math.abs(e-i))&&(e=f)}if(!Eh(s.y)){var l=s.y-c.y;(Eh(u)||Math.abs(l-r)<Math.abs(u-r))&&(u=l)}}return n.x=Eh(e)?i:e,n.y=Eh(u)?r:u,n},i.prototype.prepareForRotate=function(t){},i.prototype.getGridSizeRotation=function(){return 5},i.prototype.toRadian=function(t){return t/180*Math.PI},i.prototype.toDegree=function(t){return t/Math.PI*180},i.prototype.toRotationSnapped=function(t,n){if(this.Ju){var i=this.getGridSizeRotation(),r=t+n,e=Math.round(this.toDegree(r)),u=e%90;return Math.abs(u)<=i?this.toRadian(e-u)-t:90-i<=u?this.toRadian(e+(90-u))-t:u<=-90+i?this.toRadian(e-(90+u))-t:n}return n},i.prototype.calcNormalizedVector=function(t,n,i){var r=n.x-t.x,e=n.y-t.y,u=Math.sqrt(r*r+e*e);if(Cv<u){var s=1/u;i.x=r*s,i.y=e*s}else i.x=1,i.y=0;return u},i.prototype.prepareForScale=function(t,n){if(this.Ju){this.prepare(t);var i=this.gt,r=this.po,e=this.Oo;switch(n){case Av.TOP_LEFT:e[0]=this.calcNormalizedVector(i[1],i[0],r[0]),e[1]=this.calcNormalizedVector(i[3],i[0],r[1]);break;case Av.TOP_CENTER:e[0]=this.calcNormalizedVector(i[3],i[0],r[0]);break;case Av.TOP_RIGHT:e[0]=this.calcNormalizedVector(i[0],i[1],r[0]),e[1]=this.calcNormalizedVector(i[2],i[1],r[1]);break;case Av.MIDDLE_LEFT:e[0]=this.calcNormalizedVector(i[1],i[0],r[0]);break;case Av.NONE:break;case Av.MIDDLE_RIGHT:e[0]=this.calcNormalizedVector(i[0],i[1],r[0]);break;case Av.BOTTOM_LEFT:e[0]=this.calcNormalizedVector(i[2],i[3],r[0]),e[1]=this.calcNormalizedVector(i[0],i[3],r[1]);break;case Av.BOTTOM_CENTER:e[0]=this.calcNormalizedVector(i[0],i[3],r[0]);break;case Av.BOTTOM_RIGHT:e[0]=this.calcNormalizedVector(i[3],i[2],r[0]),e[1]=this.calcNormalizedVector(i[1],i[2],r[1])}}},i.prototype.setScaleSnappedResult=function(t,n,i,r,e){if(Cv<n&&(Eh(e.distance)||t<e.distance)){e.distance=t;var u=1+i/n;r?e.scale.x=u:e.scale.y=u}},i.prototype.calcScaleSnapped1D=function(t,n,i,r,e,u){var s=this.Do;t.apply(n,s);var h=s.x,o=s.y;this.snap(s,s);var a=s.x,c=s.y;if(!Eh(a)){var f=Math.abs(i.x);if(Cv<f){var l=(a-h)/i.x,v=Math.abs(l),b=(a-n.x)/i.x;this.setScaleSnappedResult(v,r,b,e,u)}}if(!Eh(c)){var d=Math.abs(i.y);if(Cv<d){var g=(c-o)/i.y,m=(v=Math.abs(g),(c-n.y)/i.y);this.setScaleSnappedResult(v,r,m,e,u)}}},i.prototype.calcScaleSnappedX=function(t,n,i,r,e){this.calcScaleSnapped1D(t,n,i,r,!0,e)},i.prototype.calcScaleSnappedY=function(t,n,i,r,e){this.calcScaleSnapped1D(t,n,i,r,!1,e)},i.prototype.calcScaleSnapped2D=function(t,n,i,r,e){var u=this.Do;t.apply(n,u);var s=u.x,h=u.y;this.snap(u,u);var o=u.x,a=u.y;if(Eh(o)){if(Eh(a))return;o=s}else Eh(a)&&(a=h);var c=i[0].x*i[1].y-i[1].x*i[0].y;if(Cv<Math.abs(c)){var f=o-s,l=a-h,v=Math.abs(f*f+l*l);if(Eh(e.distance)||v<e.distance){e.distance=v;var b=o-n.x,d=a-n.y,g=(+i[1].y*b-i[1].x*d)/c,m=(-i[0].y*b+i[0].x*d)/c;e.scale.set(1+g/r[0],1+m/r[1])}}},i.prototype.calcScaleSnappedXY=function(t,n,i,r,e,u,s){this.calcScaleSnapped2D(t,n,e,u,s),this.calcScaleSnappedX(t,r,e[0],u[0],s),this.calcScaleSnappedY(t,i,e[1],u[1],s)},i.prototype.toScaleSnapped=function(t,n,i,r){if(this.Ju){var e=this.gt,u=this.po,s=this.Oo,h=this.So;switch(h.distance=NaN,h.scale.set(r.x,r.y),n){case Av.TOP_LEFT:this.calcScaleSnappedXY(t,e[0],e[1],e[3],u,s,h);break;case Av.TOP_CENTER:this.calcScaleSnappedY(t,e[0],u[0],s[0],h),this.calcScaleSnappedY(t,e[1],u[0],s[0],h);break;case Av.TOP_RIGHT:this.calcScaleSnappedXY(t,e[1],e[0],e[2],u,s,h);break;case Av.MIDDLE_LEFT:this.calcScaleSnappedX(t,e[0],u[0],s[0],h),this.calcScaleSnappedX(t,e[3],u[0],s[0],h);break;case Av.NONE:break;case Av.MIDDLE_RIGHT:this.calcScaleSnappedX(t,e[1],u[0],s[0],h),this.calcScaleSnappedX(t,e[2],u[0],s[0],h);break;case Av.BOTTOM_LEFT:this.calcScaleSnappedXY(t,e[3],e[2],e[0],u,s,h);break;case Av.BOTTOM_CENTER:this.calcScaleSnappedY(t,e[2],u[0],s[0],h),this.calcScaleSnappedY(t,e[3],u[0],s[0],h);break;case Av.BOTTOM_RIGHT:this.calcScaleSnappedXY(t,e[2],e[3],e[1],u,s,h)}if(!Eh(h.distance)){if(r.copyFrom(h.scale),i)switch(n){case Av.TOP_LEFT:case Av.TOP_RIGHT:case Av.BOTTOM_LEFT:case Av.BOTTOM_RIGHT:r.x=r.y=Math.max(r.x,r.y);break;case Av.TOP_CENTER:case Av.BOTTOM_CENTER:r.x=r.y;break;case Av.MIDDLE_LEFT:case Av.MIDDLE_RIGHT:r.y=r.x}return!0}}return!1},i.prototype.reset=function(){this.enable=!0,this.target.reset(),this.grid.reset()},i.prototype.serialize=function(){return[this.Ju?1:0,this.target.serialize(),this.grid.serialize()]},i.prototype.deserialize=function(t){this.enable=!!t[0],this.target.deserialize(t[1]),this.grid.deserialize(t[2])},i}(t.utils.EventEmitter),yv=function(t){function n(n,i,r){var e=t.call(this,n,i.width,i.height,0,r)||this;return e.Os=i,e}return B(n,t),n.prototype.render=function(t){var n=this.frame;t.drawImage(this.Os.canvas,n.x,n.y,n.width,n.height)},n}(de),Lv=function(){function t(){}return t.measure=function(t){var n=this.Io;null==n&&(n=new Map,this.Io=n);var i=n.get(t);if(null!=i)return i;var r=this.Co;null==r&&((r=document.createElement("span")).innerText="|ÉqÅ",r.style.border="none",r.style.margin="0px",this.Co=r);var e=this.Ao;null==e&&((e=document.createElement("div")).style.display="inline-block",e.style.width="0px",e.style.height="0px",e.style.border="none",e.style.margin="0px",e.style.verticalAlign="baseline",this.Ao=e);var u=this.Ro;null==u&&((u=document.createElement("div")).style.position="absolute",u.style.padding="0px",u.style.margin="0px",u.style.visibility="hidden",u.appendChild(r),u.appendChild(e),document.body.appendChild(u),this.Ro=u),r.style.font=t;var s=e.getBoundingClientRect().top,h=r.getBoundingClientRect();return i={ascent:s-h.top,descent:h.bottom-s},n.set(t,i),i},t}(),kv=function(n,i,r,e){this.id=n,this.size=i,this.color=t.utils.hex2string(r),this.height=i+2*e;var u=Lv.measure(n);this.ascent=u.ascent,this.descent=u.descent},xv=function(){function n(n,i,r,e){this.R=n,this.tr=document.createElement("canvas"),this.yo=null;var u=this.toPadding(i);this.Gn=u,this.Re=new kv(n,i,r,u),this.ye={},this.Le=0,this.Lo=0,this.Mt=1,this.hn=1,this.ko=0,this.xo=0,this.we=t.Texture.from(this.tr,{mipmap:t.MIPMAP_MODES.OFF,resolution:e,scaleMode:t.SCALE_MODES.NEAREST});var s=this.ye;this.mo(" "," ",s,Me.SPACE_R),this.mo("\t","    ",s,Me.SPACE_R),this.mo("...","...",s,Me.LETTER_RNB);for(var h=0,o=Oe.length;h<o;++h){var a=Oe[h];this.mo(a,a,s,Me.LETTER_RNB)}}return n.prototype.toPadding=function(t){return Math.max(3,Math.ceil(.2*t))},Object.defineProperty(n.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.hn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvas",{get:function(){return this.tr},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"characters",{get:function(){return this.ye},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this.we},enumerable:!1,configurable:!0}),n.prototype.mo=function(t,n,i,r){if(!this.isIgnored(n)){var e=i[t];if(null!=e)e.type&Me.RESERVED||(0===e.ref&&(this.Lo-=1),e.ref+=1);else{var u=this.getAdvance(n),s=this.Gn,h=Math.ceil(s+u+s),o=this.font.height;i[t]=new Ee(n,u,h,o,r),this.Le+=1,this.ko+=1}}},n.prototype.isIgnored=function(t){switch(t){case"\n":case"\r":case"\v":case"\f":case"":return!0}return!1},n.prototype.Bo=function(t,n){var i=n[t];null!=i&&!(i.type&Me.RESERVED)&&0<i.ref&&(i.ref-=1,0===i.ref&&(this.Lo+=1))},n.prototype._o=function(){if(this.Le>>1<=this.Lo){var t=this.ye;for(var n in t)t[n].ref<=0&&delete t[n];this.Le-=this.Lo,this.ko+=1,this.Lo=0}},n.prototype.add=function(t,n){void 0===n&&(n=Me.LETTER);for(var i=this.ye,r=b.from(t);r.hasNext();){var e=r.next();this.mo(e,e,i,n)}},n.prototype.remove=function(t){for(var n=this.ye,i=b.from(t);i.hasNext();)this.Bo(i.next(),n)},n.prototype.get=function(t){return this.ye[t]},n.prototype.getAdvance=function(t){var n=this.getContext();return null!=n?n.measureText(t).width:0},n.prototype.getContext=function(){var t=this.yo;if(null==t){var n=this.tr;if(null==n)return null;if(null==(t=this.yo=n.getContext("2d",{alpha:!0})))return null}var i=this.Re;return t.font!==i.id&&(t.font=i.id,i.id=t.font,t.textAlign="left",t.textBaseline="alphabetic",t.lineWidth=0,t.lineCap="round",t.lineJoin="miter",t.miterLimit=0,t.fillStyle=i.color,t.strokeStyle="#0000ff"),t},n.prototype.update=function(){if(this._o(),this.xo<this.ko){this.xo=this.ko;var t=this.tr;if(null!=t){var n=this.Re,i=n.height,r=this.ye,e=this.Mt=this.toPowerOf2(Math.ceil(Math.sqrt(this.Le))*i),u=this.Gn,s=Math.round(.5*(i-(n.ascent+n.descent))+n.ascent),h=0,o=0;for(var a in r)e<=h+(g=r[a]).width&&(h=0,o+=i),g.x=h,g.y=o,g.origin.x=h+u,g.origin.y=o+s,h+=g.width;var c=this.hn=o+i,f=this.we.baseTexture,l=f.resolution,v=Math.ceil(e*l),b=Math.ceil(c*l);t.width=v,t.height=b;var d=this.getContext();if(null!=d){for(var a in d.save(),d.scale(l,l),d.clearRect(0,0,e,c),r){var g=r[a];d.fillText(a,g.origin.x,g.origin.y)}d.restore()}return f.setRealSize(v,b),!0}}return!1},n.prototype.getRevision=function(){return this.ko},n.prototype.getRevisionUpdate=function(){return this.xo},Object.defineProperty(n.prototype,"length",{get:function(){return this.Le},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){null!=this.tr&&(this.tr=null);var t=this.ye;for(var n in t)delete t[n]},n.prototype.toPowerOf2=function(t){for(var n=32;n<t;)n<<=1;return n},n}(),Bv=function(t){t.update()},_v=function(t){t.forEach(Bv)},Pv=function(t){t.update()},Fv=function(t){t.forEach(Pv)},Uv=function(){function t(t){var n=this;this.ke=new Map,this.ln=t.renderer.resolution,t.renderer.on("prerender",(function(){n.update()}))}return t.prototype.add=function(t,n,i,r){var e=this.ke,u=e.get(t);null==u&&(u=new Map,e.set(t,u));var s=u.get(i);null==s&&(s=new xv(t,n,i,this.ln),u.set(i,s)),s.add(r)},t.prototype.remove=function(t,n,i){var r=this.ke.get(t);if(null!=r){var e=r.get(n);null!=e&&e.remove(i)}},t.prototype.get=function(t,n){var i=this.ke.get(t);if(null==i)return null;var r=i.get(n);return null==r?null:r},t.prototype.update=function(){this.ke.forEach(_v)},t.prototype.destroy=function(){var t=this.ke;t.forEach(Fv),t.clear()},t}(),Gv=function(t){if("object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)){var n=Object.getPrototypeOf(t);return null==n||n===Object.prototype}return!1},zv=function(){function t(t,n,i){var r=this;this.instance=null,this.newInstance=t,this.options=n,null!=i&&(i.state.isActive&&setTimeout((function(){r.get()}),0),i.on("active",(function(){r.get()})))}return t.prototype.get=function(){var t=this.instance;return null==t&&(t=new this.newInstance(this.options),this.instance=t),t},t}(),Hv=function(t,n,i,r){for(var e=0,u=Math.floor(t.length/i)-1;e<=u;){var s=e+(u-e>>1),h=t[s*i+r];if(n<h)u=s-1;else{if(!(h<n))return s;e=s+1}}return Math.max(e,u)},Vv=function(t){return Ct(t)?function(t){for(var n=[],i=0,r=t.length;i<r;++i)n[i]=t[i];return n}(t):Gv(t)?function(t){var n={};for(var i in t)Object.hasOwnProperty.call(t,i)&&(n[i]=Vv(t[i]));return n}(t):t},Wv=function(t){if(null!=t){if(at(t))return t;if(gn(t))return String(t);if("name"in t)return t.name;if("label"in t)return t.label;if("id"in t)return t.id}return""},Xv=function(t,n){if(null!=t){var i=Vv(t);if(null!=n)for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var e=n[r];if(Gv(e))if(Object.prototype.hasOwnProperty.call(i,r)){var u=i[r];Gv(u)&&Xv(u,e)}else i[r]=Vv(e);else Object.prototype.hasOwnProperty.call(i,r)||(i[r]=e)}return i}return null!=n?Vv(n):{}},Yv=function(){function n(t,n,i){this.Mt=t,this.Po=n,this.Ur=i,this.Fo={},this.Uo="",this.Go=0,this.zo=0,this.hn=0}return Object.defineProperty(n.prototype,"width",{get:function(){return this.Mt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ratio",{get:function(){return this.Po},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"margin",{get:function(){return this.Ur},enumerable:!1,configurable:!0}),n.prototype.add=function(n,i,r,e){var u=this.Fo;if(!(n in u)){var s=this.Ur,h=this.Go,o=this.zo;this.Mt<=h+i?(h=0,o=this.zo+this.hn+s,this.hn=r,this.zo=o):this.hn=Math.max(this.hn,r),this.Go=h+i+s,u[n]=new t.Rectangle(h,o,i,r);var a=this.Po;return this.Uo+='<g transform="translate('.concat(h*a,",").concat(o*a,')">').concat(e,"</g>"),!0}return!1},n.prototype.has=function(t){return t in this.Fo},Object.defineProperty(n.prototype,"mappings",{get:function(){return this.build()},enumerable:!1,configurable:!0}),n.prototype.build=function(n){var i,r,e,u=this.Ho;if(null==u||(null==n?void 0:n.force)){var s=null!==(r=null!==(i=null==n?void 0:n.resolution)&&void 0!==i?i:window.devicePixelRatio)&&void 0!==r?r:1,h=this.Mt,o=Math.pow(2,Math.ceil(Math.log(this.zo+this.hn)/Math.LN2)),a=h*s,c=o*s,f=this.Po,l='width="'.concat(a,'"'),v='height="'.concat(c,'"'),b='viewBox="0 0 '.concat(h*f," ").concat(o*f,'"'),d=mv("<svg ".concat(l," ").concat(v," ").concat(b," ").concat('xmlns="http://www.w3.org/2000/svg"',">").concat(this.Uo,"</svg>")),g=null!==(e=null==n?void 0:n.scaling)&&void 0!==e?e:t.SCALE_MODES.NEAREST,m=t.BaseTexture.from(d,{resolution:s,scaleMode:g}),w=this.Fo;for(var p in u=this.Ho={},w)u[p]=new t.Texture(m,w[p])}return u},n}(),Kv=function(){function n(){}return n.toTexture=function(n,i,r,e){var u=n.transform.scale,s=t.RenderTexture.create({width:n.width*u.x,height:n.height*u.y,scaleMode:t.SCALE_MODES.LINEAR,resolution:i}),h=new t.Matrix(void 0,void 0,void 0,void 0,-n.position.x,-n.position.y),o=rt.getLayer(n);return o&&o.renderer.render(n,s,r,h,e),s},n.toPixels=function(t,n){var i=t.resolution,r=t.frame,e=Math.floor(r.width*i),u=Math.floor(r.height*i),s=new Uint8Array(4*e*u);n.renderTexture.bind(t);var h=n.gl;return h.readPixels(r.x*i,r.y*i,e,u,h.RGBA,h.UNSIGNED_BYTE,s),{width:e,height:u,array:s}},n.toCanvas=function(n,i,r){var e=n.width,u=n.height,s=n.array,h=new t.utils.CanvasRenderTarget(e,u,1),o=h.context.getImageData(0,0,e,u);if(r?o.data.set(s):t.Extract.arrayPostDivide(s,o.data),h.context.putImageData(o,0,0),null!=i&&1!==i){h.context.scale(i,i),h.context.drawImage(h.canvas,0,0);var a=Math.floor(e*i),c=Math.floor(u*i),f=h.context.getImageData(0,0,a,c);h.resize(a,c),h.context.putImageData(f,0,0)}return h},n.toBase64=function(t,n,i){return t.toDataURL(n,i)},n}(),Jv=function(){function t(){}return t.downloadUrl=function(t,n){var i=document.createElement("a");"download"in i?(i.href=n,i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i)}),66)):window.open(n)||(location.href=n)},t.download=function(t,n,i){var r=new Blob(!1!==i?["\ufeff",n]:[n],{type:"text/plain"}),e=window.navigator;"msSaveBlob"in e?e.msSaveBlob(r,t):this.downloadUrl(t,URL.createObjectURL(r))},t}(),Zv=function(){function t(){}return t.texture=function(t){var n,i=t.target,r=function(t){var n,i=t.target,r=t.resolution;if(null!=r){if(gn(r))return r;var e=i.transform.scale,u=Math.max(i.width*e.x,i.height*e.y);return Math.min(1,r.size/u)}return null!==(n=window.devicePixelRatio)&&void 0!==n?n:1}(t),e=null===(n=t.transform)||void 0===n?void 0:n.update;return Kv.toTexture(i,r,t.clear,e)},t.pixels=function(t){var n=function(t){var n=t.renderer;if(n)return n;var i=t.application;if(i)return i.getLayerBase().renderer;var r=t.layer||rt.getLayer(t.target);if(r)return r.renderer;throw new Error("No renderer / application / layer found.")}(t),i=this.texture(t);try{return Kv.toPixels(i,n)}finally{i&&i.destroy()}},t.canvas=function(t){var n,i,r=this.pixels(t),e=null===(i=null===(n=t.alpha)||void 0===n?void 0:n.premultiplied)||void 0===i?void 0:i.ignore,u=function(t,n){var i=n.scale;if(null!=i){if(gn(i))return i;var r=i.size;return Math.min(1,r/t.width,r/t.height)}}(r,t);return Kv.toCanvas(r,u,e)},t.base64=function(t){var n=this.canvas(t);try{return Kv.toBase64(n.canvas,t.format,t.quality)}finally{n&&n.destroy()}},t.file=function(t){Jv.downloadUrl(t.filename,this.base64(t))},t}(),qv={TEXT:0,DATA_URL:1,BINARY_STRING:2,ARRAY_BUTTER:3,FILE:4},Qv=function(){function t(t,n){this.ih=null,this.Vo=t,this.Wo=n}return t.prototype.open=function(){var t=this.getOrCreateInput();null!=t?t.click():this.onCancel()},t.prototype.getOrCreateInput=function(){var t=this;if("FileReader"in window&&null==this.ih){var n=document.createElement("input");this.ih=n,n.setAttribute("type","file"),n.setAttribute("style","display:none"),n.addEventListener("change",(function(i){t.onInputChange(n),n.value="",i.stopImmediatePropagation(),i.preventDefault()})),document.body.appendChild(n)}return this.ih},t.prototype.onInputChange=function(t){var n=this,i=t.files;if(null!=i&&0<i.length){var r=i[0];if(this.Vo===qv.FILE)this.onOpen(r,r);else{var e=new FileReader;switch(e.onload=function(t){if(null!=t.target){var i=t.target;n.onOpen(i.result,r)}},e.onabort=function(t){n.onAboart(t)},this.Vo){case qv.TEXT:e.readAsText(r);break;case qv.DATA_URL:e.readAsDataURL(r);break;case qv.BINARY_STRING:e.readAsBinaryString(r);break;case qv.ARRAY_BUTTER:e.readAsArrayBuffer(r);break;default:e.readAsText(r)}}}else this.onCancel()},t.prototype.onOpen=function(t,n){var i=this.Wo;i.emit("open",t,n,i)},t.prototype.onAboart=function(t){var n=this.Wo;n.emit("abort",t,n)},t.prototype.onCancel=function(){var t=this.Wo;t.emit("cancel",t)},t}(),$v=function(){function t(){}return t.fromRgb=function(t){var n=(16711680&t)>>16,i=(65280&t)>>8,r=255&t|0,e=Math.max(n,i,r),u=e-Math.min(n,i,r),s=0;return 0<u&&(n===e?s=60*(i-r)/u:i===e?s=60*(r-n)/u+120:r===e&&(s=60*(n-i)/u+240),s<0&&(s+=360)),[s,u/e*255,e]},t.toRgb=function(t,n,i){var r=i-n/255*i,e=i-r,u=0,s=0,h=0;return t<=60?(u=i,s=t/60*e+r,h=r):t<=120?(u=(120-t)/60*e+r,s=i,h=r):t<=180?(u=r,s=i,h=(t-120)/60*e+r):t<=240?(u=r,s=(240-t)/60*e+r,h=i):t<=300?(u=(t-240)/60*e+r,s=r,h=i):(u=i,s=r,h=(360-t)/60*e+r),(u=Math.max(0,Math.min(255,u)))<<16|(s=Math.max(0,Math.min(255,s)))<<8|Math.max(0,Math.min(255,h))},t}(),tb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onElementAttached=function(n,i,r){n.addEventListener("keydown",this.Bu),t.prototype.onElementAttached.call(this,n,i,r)},n.prototype.onElementDetached=function(n,i,r){n.removeEventListener("keydown",this.Bu),t.prototype.onElementDetached.call(this,n,i,r)},n.prototype.onInputKeyDown=function(t){Zt.isOkKey(t)&&this.mu.onEnter()},n}(vu),nb=function(){function t(){}return t.create=function(t){var n=this.Ut;return t in n?"".concat(t," ").concat(++n[t]):(n[t]=1,"".concat(t," 1"))},t.Ut={},t}(),ib=function(){function t(){}return t.toCode=function(t,n){var i=t>>8&255,r=255&t;return"rgba(".concat(t>>16&255,",").concat(i,",").concat(r,",").concat(n,")")},t}(),rb=function(){function t(t,n,i){var r=this;this.jn=!0,this.Xo=new Set,this.Et=t,this.Yo=n,this.Ko=i,this.Jo=null;var e=function(){r.advance(),r.update(),r.Jo=window.setTimeout(e,i)};this.Zo=e}return t.prototype.start=function(){return null==this.Jo&&(this.Jo=window.setTimeout(this.Zo,this.Yo)),this},t.prototype.stop=function(){var t=this.Jo;return null!=t&&(this.Jo=null,clearTimeout(t)),this},t.prototype.add=function(t){return this.Xo.add(t),t.state.set(this.Et,this.isOn()),this},t.prototype.remove=function(t){return!!this.Xo.delete(t)&&(t.state.remove(this.Et),!0)},t.prototype.contains=function(t){return this.Xo.has(t)},t.prototype.clear=function(){return this.Xo.clear(),this},t.prototype.isOn=function(){return this.jn},t.prototype.isOff=function(){return!this.jn},t.prototype.advance=function(){return this.jn=!this.jn,this},t.prototype.update=function(){var t=this.isOn(),n=this.Et;return this.Xo.forEach((function(i){i.state.set(n,t)})),this},t}(),eb=function(){function t(t){var n;this.Jn=null!==(n=null==t?void 0:t.duration)&&void 0!==n?n:300,this.Xe=null,this.qo=0,this.Qo=null}return t.prototype.show=function(t,n){var i=this,r=this.Qo;null!=r&&clearTimeout(r);var e=this.Xe;if(t!==e){var u=this.Jn,s=this.qo,h=Date.now(),o=s+u-h;!0===n||o<=0?this.update(h,t):this.Qo=window.setTimeout((function(){i.update(Date.now(),t)}),o)}},t.prototype.update=function(t,n){var i=this.Xe;i!==n&&(this.qo=t,null!=i&&i.hide(),this.Xe=n,null!=n&&n.show())},t.prototype.hide=function(){this.show(null)},t}(),ub=function(){function t(){this.$o=null,this.ta=0,this.Is=null,this.na=null}return t.prototype.getNames=function(){var t=this.ia;return null==t&&(t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DOMMouseScroll","MozMousePixelScroll"],this.ia=t),t},t.prototype.on=function(t,n,i){void 0===i&&(i=!1);for(var r=this.getNames(),e=r.length-1;0<=e;--e){var u=r[e];t.addEventListener(u,n,i)}},t.prototype.off=function(t,n,i){void 0===i&&(i=!1);for(var r=this.getNames(),e=r.length-1;0<=e;--e){var u=r[e];t.removeEventListener(u,n,i)}},t.prototype.getLineHeight=function(){if(null==this.Is){var t=Y.getInstance().get("DBase");this.Is=t.getLineHeight()}return this.Is},t.prototype.getPageHeight=function(){return null==this.na&&(this.na=12*this.getLineHeight()),this.na},t.prototype.normalize=function(t){var n=0,i=0;if("detail"in t&&(i=-1*t.detail),"wheelDelta"in t&&(i=t.wheelDelta),"wheelDeltaY"in t&&(i=t.wheelDeltaY),"wheelDeltaX"in t&&(n=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(n=-1*i,i=0),"deltaY"in t&&(i=-1*t.deltaY),"deltaX"in t&&(n=t.deltaX),0===i&&0===n)return null;var r=Math.max(Math.abs(i),Math.abs(n)),e=Date.now();this.ta+200<=e&&(this.$o=null),this.ta=e;var u="mousewheel"===t.type&&r%120==0;(!this.$o||r<this.$o)&&(this.$o=r,u&&(this.$o/=40)),u&&(r/=40,n/=40,i/=40);var s=this.$o;r=Math.floor(r/s),n=Math[1<=n?"floor":"ceil"](n/s),i=Math[1<=i?"floor":"ceil"](i/s);var h=t.deltaMode||0;if(0!==h){var o=1===h?this.getLineHeight():this.getPageHeight();r*=o,n*=o,i*=o}return{mode:h,delta:r,deltaX:n,deltaY:i,lowest:s}},t.getInstance=function(){return null==this.INSTANCE&&(this.INSTANCE=new t),this.INSTANCE},t}(),sb=function(t){function n(n){var i,r=this;return(r=t.call(this)||this).Yn=null!==(i=null==n?void 0:n.target)&&void 0!==i?i:null,r.qn=!1,r.Eu=!1,r.Qn=null==n?void 0:n.onTime,r.ti=null==n?void 0:n.onStart,r.ni=null==n?void 0:n.onEnd,r}return B(n,t),Object.defineProperty(n.prototype,"target",{get:function(){return this.Yn},set:function(t){this.Yn=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.start=function(t){void 0===t&&(t=!1),this.stop(),this.Eu=!0,this.qn=t,this.onStart(t),this.Eu&&(this.onTime(t?1:0,t,0),this.Eu&&(this.onTime(t?0:1,t,0),this.Eu||this.onEnd(t)))},n.prototype.onStart=function(t){var n=this.ti;null!=n&&n(t,this),this.emit("start",t,this)},n.prototype.onTime=function(t,n,i){var r=this.Qn;null!=r&&r(t,n,i,this),this.emit("time",t,n,i,this)},n.prototype.onEnd=function(t){var n=this.ni;null!=n&&n(t,this),this.emit("end",t,this)},n.prototype.isStarted=function(){return this.Eu},n.prototype.isReverse=function(){return this.qn},n.prototype.stop=function(){this.Eu=!1},n.prototype.end=function(){if(this.Eu){this.Eu=!1;var t=this.qn,n=t?0:1;this.onTime(n,t,0),this.onEnd(t)}},n}(t.utils.EventEmitter),hb=function(t){function n(n){var i,r,e=this;(e=t.call(this,n)||this).ra=0,e.ea=0,e.ua=0,e.sa=0,e.ha=null,e.Zu=null;var u=null==n?void 0:n.shift;return e.oa=null!==(i=null==u?void 0:u.x)&&void 0!==i?i:0,e.aa=null!==(r=null==u?void 0:u.y)&&void 0!==r?r:15,e.Qu=function(){e.onPrerender()},e.ca=function(){e.onPostrender()},e}return B(n,t),n.prototype.stop=function(){this.sa=0,this.removeEventListeners(),t.prototype.stop.call(this)},n.prototype.addEventListeners=function(t){var n=rt.getLayer(t);if(n){this.Zu=n;var i=n.renderer;i.on("prerender",this.Qu),i.on("postrender",this.ca)}},n.prototype.removeEventListeners=function(){var t=this.Zu;if(t){this.Zu=null;var n=t.renderer;n.off("prerender",this.Qu),n.off("postrender",this.ca)}},n.prototype.onStart=function(n){var i=this.ha=this.Yn;null!=i&&(this.sa=0,this.removeEventListeners(),this.addEventListeners(i),n||(i.visible=!0),t.prototype.onStart.call(this,n))},n.prototype.onTime=function(n,i,r){if(null!=this.ha){var e=this.Zu;e?(this.sa=n,t.prototype.onTime.call(this,n,i,r),e.update()):(this.sa=n,t.prototype.onTime.call(this,n,i,r))}},n.prototype.onEnd=function(n){var i=this.ha;null!=i&&(this.removeEventListeners(),n&&(i.visible=!1),t.prototype.onEnd.call(this,n))},n.prototype.onPrerender=function(){var t=this.ha;if(null!=t){var n=this.sa,i=t.unsafe.position;this.ra=i.x,this.ea=i.y,i.set(i.x-this.oa*(1-n),i.y-this.aa*(1-n)),this.ua=t.alpha,t.alpha=n}},n.prototype.onPostrender=function(){var t=this.ha;null!=t&&(t.unsafe.position.set(this.ra,this.ea),t.alpha=this.ua)},n}(rr),ob=function(){function t(t){var n,i,r,e;gn(t)?(this.top=t,this.right=t,this.bottom=t,this.left=t):null!=t?(this.top=null!==(n=t.top)&&void 0!==n?n:6,this.right=null!==(i=t.right)&&void 0!==i?i:6,this.bottom=null!==(r=t.bottom)&&void 0!==r?r:6,this.left=null!==(e=t.left)&&void 0!==e?e:6):(this.top=6,this.right=6,this.bottom=6,this.left=6)}return t.prototype.getTheme=function(){throw new Error("Not supported")},t.prototype.setTheme=function(t){throw new Error("Not supported")},t.prototype.getTop=function(){return this.left},t.prototype.getRight=function(){return this.right},t.prototype.getBottom=function(){return this.bottom},t.prototype.getLeft=function(){return this.left},t.prototype.set=function(t,n,i,r){null==n?(this.top=t,this.right=t,this.bottom=t,this.left=t):null==i?(this.top=t,this.right=n,this.bottom=t,this.left=n):null==r?(this.top=t,this.right=n,this.bottom=i,this.left=n):(this.top=t,this.right=n,this.bottom=i,this.left=r)},t}(),ab=function(){function t(t){var n,i=t.root;this.fa=i,this.ns=t.overlay,this.Gn=new ob(null==t?void 0:t.padding);var r=100,e=100;if(t)if(null!=t.width)r=t.width,e=null!=t.height?t.height:i.getBoundingClientRect().height;else if(null!=t.height)r=i.getBoundingClientRect().width,e=t.height;else{var u;r=(u=i.getBoundingClientRect()).width,e=u.height}else r=(u=i.getBoundingClientRect()).width,e=u.height;var s=null==t?void 0:t.background,h=0,o=!0;if(null!=s){var a=s.color;null!=a&&(h=a,o=!1)}var c=t.resolution,f=null!==(n=null==t?void 0:t.antialias)&&void 0!==n&&n;this.la={width:r,height:e,autoStart:!1,backgroundColor:h,transparent:o,resolution:c,antialias:f}}return t.prototype.getRootElement=function(){return this.fa},t.prototype.setRootElement=function(t,n){if(this.fa!==t&&(this.fa=t,!1!==n)){var i=t.getBoundingClientRect(),r=this.la;r.width=i.width,r.height=i.height}return this},t.prototype.getWidth=function(){return this.la.width},t.prototype.setWidth=function(t){return this.la.width=t,this},t.prototype.getHeight=function(){return this.la.height},t.prototype.setHeight=function(t){return this.la.height=t,this},t.prototype.getPadding=function(){return this.Gn},t.prototype.setPadding=function(t,n,i,r){var e=this.Gn;return e.left=t,e.top=n,e.right=i,e.bottom=r,this},t.prototype.getBackgroundColor=function(){return this.la.backgroundColor},t.prototype.setBackgroundColor=function(t){return this.la.backgroundColor=t,this},t.prototype.getAntialias=function(){return this.la.antialias},t.prototype.setAntialias=function(t){return this.la.antialias=t,this},t.prototype.isOverlay=function(){return this.ns},t.prototype.getPixiApplicationOptions=function(){return this.la},t}(),cb={NONE:0,UNSTORABLE:1,CLEAR:2,CLEAN:4},fb=function(){function t(){}return t.prototype.execute=function(){return!0},t.prototype.redo=function(){throw new Error("Method not implemented.")},t.prototype.undo=function(){throw new Error("Method not implemented.")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return cb.UNSTORABLE|cb.CLEAR},t}(),lb=function(){function t(){}return t.prototype.execute=function(){throw new Error("Not supported")},t.prototype.redo=function(){throw new Error("Not supported")},t.prototype.undo=function(){throw new Error("Not supported")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return cb.UNSTORABLE},t}(),vb=function(){function t(){}return t.prototype.execute=function(){throw new Error("Not supported")},t.prototype.redo=function(){throw new Error("Not supported")},t.prototype.undo=function(){throw new Error("Not supported")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return cb.UNSTORABLE},t}(),bb=function(t){return!(t.getFlag()&cb.UNSTORABLE)},db=function(t){return!!(t.getFlag()&cb.CLEAN)},gb=function(t){function n(){var n=t.call(this)||this;return n._=0,n.va=[],n.ba=[],n.da=null,n}return B(n,t),n.prototype.last=function(){var t=this.va,n=this.ba;return n.length<=0?0<t.length?t[t.length-1]:null:n[n.length-1]},n.prototype.push=function(t){this.ba.push(t),this.next()},n.prototype.next=function(){if(null==this.da){var t=this.ba;if(!(t.length<=0)){var n=t.shift();null!=n&&(n instanceof vb?this.executeUndo(n):n instanceof lb?this.executeRedo(n):this.execute(n))}}},n.prototype.executeUndo=function(t){var n=this,i=this.va;if(this._<i.length){var r=i[i.length-1-this._];this._+=1,this.emit("change",this);var e=r.undo();!0===e?this.onSuccessUndo(r):!1===e?this.onFail(t):this.da=e.then((function(){n.onSuccessUndo(r)}),(function(){n.onFail(t)}))}},n.prototype.executeRedo=function(t){var n=this,i=this.va;if(0<this._){var r=i[i.length-this._];this._-=1,this.emit("change",this);var e=r.redo();!0===e?this.onSuccessRedo(r):!1===e?this.onFail(t):this.da=e.then((function(){n.onSuccessRedo(r)}),(function(){n.onFail(t)}))}},n.prototype.execute=function(t){var n=this,i=function(t){return!!(t.getFlag()&cb.CLEAR)}(t),r=bb(t);if(i||r){var e=i?this.va.length:this._;0<e&&(this.remove(e),this._=0,this.emit("change",this)),this.cleanup()}var u=t.execute();!0===u?this.onSuccess(t):!1===u?this.onFail(t):this.da=u.then((function(){n.onSuccess(t)}),(function(){n.onFail(t)}))},n.prototype.cleanup=function(){var t=this.va,n=t.length-100;if(0<n)for(var i=0;i<n;++i)t[i].destroy(),t.shift()},n.prototype.remove=function(t){var n=this.va;if(0<t){var i=Math.max(0,n.length-t);if(0<(t=n.length-i)){for(var r=i,e=n.length;r<e;++r)n[r].destroy();return n.splice(i,n.length-i),!0}}return!1},n.prototype.onSuccess=function(t){this.da=null,bb(t)&&(this.va.push(t),db(t)||this.emit("dirty",this)),this.emit("change",this),this.next()},n.prototype.onSuccessUndo=function(t){this.da=null,db(t)||this.emit("dirty",this),this.emit("change",this),this.next()},n.prototype.onSuccessRedo=function(t){this.da=null,db(t)||this.emit("dirty",this),this.emit("change",this),this.next()},n.prototype.onFail=function(t){this.da=null;var n=this.ba;t.destroy();for(var i=0,r=n.length;i<r;++i)n[i].destroy();n.length=0,this.emit("change",this)},n.prototype.size=function(){return this.va.length},n.prototype.clear=function(){this.push(new fb)},n.prototype.redo=function(){this.isRedoable()&&(this.ba.push(new lb),this.next())},n.prototype.undo=function(){this.isUndoable()&&(this.ba.push(new vb),this.next())},n.prototype.isRedoable=function(){return 0<this._&&null==this.da},n.prototype.isUndoable=function(){return this._<this.va.length&&null==this.da},n}(t.utils.EventEmitter),mb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(t,n,i){var r=this;t.addEventListener("keydown",(function(t){r.emit("keydown",t);var e=i.get();if(null!=e)for(var u=e;null!=u;){if(r.hasOnKeyDown(u)&&u.onKeyDown(t))return;u=u.parent}if(Zt.isFocusKey(t)){var s=Zt.getFocusDirection(t),h=null!=e?i.find(e,!1,e.state.isFocusRoot||s,s):i.find(n,!1,!0,s);null!=h&&(i.focus(h),t.preventDefault(),t.stopImmediatePropagation())}})),t.addEventListener("keyup",(function(t){r.emit("keyup",t);var n=i.get();if(null!=n)for(var e=n;null!=e;){if(r.hasOnKeyUp(e)&&e.onKeyUp(t))return;e=e.parent}}))},n.prototype.hasOnKeyDown=function(t){return"onKeyDown"in t},n.prototype.hasOnKeyUp=function(t){return"onKeyUp"in t},n}(t.utils.EventEmitter),wb=function(){function t(){}return t.getKeyboardController=function(){return null==this.KEYBOARD&&(this.KEYBOARD=new mb),this.KEYBOARD},t.setKeyboardController=function(t){var n=this.KEYBOARD;return this.KEYBOARD=t,n},t.getCommandController=function(){return null==this.COMMAND&&(this.COMMAND=new gb),this.COMMAND},t.setCommandController=function(t){var n=this.COMMAND;return this.COMMAND=t,n},t.getDocumentController=function(){if(null==this.DOCUMENT)throw new Error("Not supported");return this.DOCUMENT},t.setDocumentController=function(t){var n=this.DOCUMENT;return this.DOCUMENT=t,n},t}(),pb=function(n){function i(t,i){var r=n.call(this,i.getPixiApplicationOptions())||this;return r.ga=null,r.ma=null,r.yn=i,r.q=!1,r.wo=!0,r.wa=i.isOverlay(),r.Gn=i.getPadding(),r.pa=i.getRootElement(),r.Oa=5,r.Da=r.newElementContainer(),r.application=t,r.Ea=function(){null!=r.ga&&r.render()},r.initStage(),r.initView(),r.initRootElement(),r.initFocusHandling(),r.initResizeHandling(),r.initWheelHandling(),r.initDoubleClickHandling(),r}return B(i,n),i.prototype.newElementContainer=function(){var t=document.createElement("div");return t.setAttribute("style","position: absolute; top: 0; left: 0; width: 0; height: 0;margin: 0; padding: 0; outline: none;"),t},i.prototype.initStage=function(){var t=this.stage;t.layer=this,t.application=this.application,t.interactive=!0},i.prototype.initView=function(){var t=this.view.style;t.position="absolute",t.top="0",t.left="0",t.width="100%",t.height="100%",t.display="block",t.outline="none",t.webkitTapHighlightColor="rgba(255,255,255,0)",t.webkitUserSelect="none",t.setProperty("-khtml-user-select","none"),t.setProperty("-moz-user-select","none"),t.setProperty("-ms-user-select","none"),t.userSelect="none"},i.prototype.initRootElement=function(){var t=this,n=this.view,i=this.wa,r=this.pa,e=this.Da,u=i?2:0,s=r.children;if(u<s.length){var h=s[u];r.insertBefore(n,h),r.insertBefore(e,h)}else r.appendChild(n),r.appendChild(e);if(i){var o=this.stage,a=o.onChildrenChange;o.onChildrenChange=function(){t.onStageDirty(),a.call(o)}}var c=r.style;r!==document.body&&"static"===window.getComputedStyle(r).position&&(c.position="relative"),c.margin="0",c.padding="0",c.overflow="hidden"},i.prototype.initFocusHandling=function(){var t=this.view,n=this.stage,i=this.getFocusController();t.setAttribute("tabindex","0"),wb.getKeyboardController().init(t,n,i),this.renderer.plugins.interaction.on(Wi.down,(function(t){null!=t.target&&t.target!==n||i.clear()}))},i.prototype.initResizeHandling=function(){var t=this,n=function(){t.onResize()};window.addEventListener("resize",n),window.addEventListener("orientationchange",n)},i.prototype.onResize=function(){var t=this.pa.getBoundingClientRect(),n=t.width,i=t.height;this.renderer.resize(n,i);for(var r=this.Gn,e=this.stage.children,u=0,s=e.length;u<s;++u){var h=e[u];h instanceof Zi&&h.onParentResize(n,i,r)}this.update()},i.prototype.initWheelHandling=function(){var n=new t.Point,i=ub.getInstance(),r=this.renderer.plugins.interaction;i.on(this.view,(function(t){var e=t;Wi.toGlobal(e,r,n);var u,s=r.hitTest(n),h=i.normalize(t);if(null!=h)for(;null!=s;){if(null!=(u=s)&&null!=u.onWheel&&s.onWheel(e,h,n)){e.preventDefault();break}s=s.parent}}))},i.prototype.initDoubleClickHandling=function(){var t=this.getFocusController(),n=this.renderer.plugins.interaction;Wi.onDblClick(this.view,(function(i){var r,e=t.get();if(null!=e)for(var u=e;null!=u&&(null==(r=u)||null==r.onDblClick||!u.onDblClick(i,n));)u=u.parent}))},i.prototype.lock=function(){this.q=!0},i.prototype.unlock=function(){this.q=!1},i.prototype.update=function(){this.q||null!=this.ga||(this.ga=requestAnimationFrame(this.Ea))},i.prototype.onStageDirty=function(){this.wa&&(0<this.stage.children.length?this.wo||(this.wo=!0,this.view.style.display="block"):this.wo&&(this.wo=!1,this.view.style.display="none"))},i.prototype.render=function(){this.reflow(),this.ga=null,n.prototype.render.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this.screen.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.screen.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),i.prototype.reflow=function(){for(var t=this.stage.children,n=0,i=this.Oa;n<i;++n){for(var r=!1,e=0,u=t.length;e<u;++e){var s=t[e];s instanceof Zi&&(s.reflow(),r=r||s.isDirty()||s.hasDirty()||s.isHierarchyDirty())}if(!r)break}},i.prototype.getFocusController=function(){return this.application.getFocusController()},i.prototype.getRootElement=function(){return this.pa},i.prototype.getElementContainer=function(){return this.Da},i.prototype.getDynamicFontAtlases=function(){return null==this.ma&&(this.ma=new Uv(this)),this.ma},i}(t.Application),Ob=function(){function t(){this.rs=null}return t.prototype.focus=function(t){var n=this.rs;return n!==t?(null!=n&&(n.state.isFocused=!1),this.rs=t,this.isFocusable(t)&&(t.state.isFocused=!0),n):null},t.prototype.blur=function(t){return null!=t&&this.rs===t?(this.rs=null,t.state.isFocused=!1,t):null},t.prototype.clear=function(){return this.focus(null)},t.prototype.set=function(t,n){return n?this.focus(t):this.blur(t)},t.prototype.get=function(){return this.rs},t.prototype.findParent=function(t){for(var n=t;null!=n;){if(this.isFocusable(n))return n;n=n.parent}return null},t.prototype.find=function(t,n,i,r,e){if(r){if(null!=(o=this.findNext(t,n,i)))return o;if(this.isFocusRoot(t,e))return null;var u=t.parent;if(null!=u&&0<=(c=(a=u.children).indexOf(t))){var s=a.length;if(this.isFocusReverse(u)){for(var h=c-1;0<=h;--h)if(null!=(l=this.findNext(a[h],!0,!0)))return l;if(!this.isFocusRoot(u,e)&&null!=(l=this.find(u,!1,!1,!0,e)))return l;for(h=s-1;c<=h;--h)if(null!=(l=this.findNext(a[h],!0,!0)))return l}else{for(h=c+1;h<s;++h)if(null!=(l=this.findNext(a[h],!0,!0)))return l;if(!this.isFocusRoot(u,e)&&null!=(l=this.find(u,!1,!1,!0,e)))return l;for(h=0;h<=c;++h)if(null!=(l=this.findNext(a[h],!0,!0)))return l}}}else{var o;if(null!=(o=this.findPrevious(t,n,i)))return o;var a,c,f=t.parent;if(null!=f&&0<=(c=(a=f.children).indexOf(t)))if(s=a.length,this.isFocusReverse(f)){for(h=c+1;h<s;++h)if(null!=(l=this.findPrevious(a[h],!0,!0)))return l;if(!this.isFocusRoot(f,e)&&null!=(l=this.find(f,!0,!1,!1,e)))return l;for(h=0;h<=c;++h)if(null!=(l=this.findPrevious(a[h],!0,!0)))return l}else{for(h=c-1;0<=h;--h)if(null!=(l=this.findPrevious(a[h],!0,!0)))return l;if(!this.isFocusRoot(f,e)&&null!=(l=this.find(f,!0,!1,!1,e)))return l;for(h=s-1;c<=h;--h){var l;if(null!=(l=this.findPrevious(a[h],!0,!0)))return l}}}return null},t.prototype.findNext=function(t,n,i){if(n&&this.isFocusable(t))return t;if(i&&this.isFocusableContainer(t)&&t.visible){var r=t.children,e=r.length;if(this.isFocusReverse(t)){for(var u=e-1;0<=u;--u)if(null!=(s=this.findNext(r[u],!0,!0)))return s}else for(u=0;u<e;++u){var s;if(null!=(s=this.findNext(r[u],!0,!0)))return s}}return null},t.prototype.findPrevious=function(t,n,i){if(i&&this.isFocusableContainer(t)&&t.visible){var r=t.children,e=r.length;if(this.isFocusReverse(t)){for(var u=0;u<e;++u)if(null!=(s=this.findPrevious(r[u],!0,!0)))return s}else for(u=e-1;0<=u;--u){var s;if(null!=(s=this.findPrevious(r[u],!0,!0)))return s}}return n&&this.isFocusable(t)?t:null},t.prototype.isFocusable=function(t){return null!=t&&"state"in t&&t.state.inEnabled&&t.state.isFocusable&&t.visible},t.prototype.isFocusableContainer=function(t){return null!=t&&"children"in t},t.prototype.isFocusRoot=function(t,n){return t===n||null!=t&&"state"in t&&t.state.isFocusRoot&&t.visible},t.prototype.isFocusReverse=function(t){return null!=t&&"state"in t&&t.state.isFocusReverse},t}(),Db=function(){function n(n){var i,r;rt.add(this);var e=this.toRootElement(n);this.fa=e,this.initFocusHandling(e);var u=null!==(r=null!==(i=null==n?void 0:n.resolution)&&void 0!==i?i:window.devicePixelRatio)&&void 0!==r?r:1;this.ln=u,delete t.Renderer.__plugins.accessibility,this.yn=n;var s=this.newLayerBase(n);this.Er=s,this.Ma=!!(null==n?void 0:n.overlay),this.Ma||(this.ns=s)}return Object.defineProperty(n.prototype,"stage",{get:function(){return this.Er.stage},enumerable:!1,configurable:!0}),n.prototype.getRootElement=function(){return this.fa},n.prototype.getResolution=function(){return this.ln},n.prototype.toRootElement=function(t){var n=null==t?void 0:t.root;if(null!=n){if(!at(n))return n;var i=document.querySelector(n);if(i)return i}return document.body},n.prototype.toLayerBaseOptions=function(t){var n=this.fa,i=this.ln;return new ab(t?{root:n,padding:t.padding,width:t.width,height:t.height,background:t.background,resolution:i,antialias:t.antialias,overlay:!1}:{root:n,resolution:i,overlay:!1})},n.prototype.getFocusController=function(){return null==this.Sa&&(this.Sa=new Ob),this.Sa},n.prototype.initFocusHandling=function(t){var n=this,i=!1,r=function(){i||n.getFocusController().clear()};t.addEventListener("focus",(function(){i=!0}),!0),t.addEventListener("blur",(function(){i=!1,setTimeout(r,0)}),!0)},n.prototype.newLayerBase=function(t){return new pb(this,this.toLayerBaseOptions(t))},n.prototype.getLayerBase=function(){return this.Er},n.prototype.toLayerOverlayOptions=function(t){var n=this.fa,i=this.ln;return new ab(t?{root:n,padding:t.padding,width:t.width,height:t.height,background:{color:null},resolution:i,antialias:t.antialias,overlay:!0}:{root:n,resolution:i,overlay:!0})},n.prototype.newLayerOverlay=function(t){return new pb(this,this.toLayerOverlayOptions(t))},n.prototype.getLayerOverlay=function(){return this.Ma?(null==this.ns&&(this.ns=this.newLayerOverlay(this.yn)),this.ns):this.Er},n.prototype.update=function(){if(!this.Ma)return this.Er.update();this.Er.update();var t=this.ns;t&&t.update()},n.prototype.render=function(){if(!this.Ma)return this.Er.render();this.Er.render();var t=this.ns;t&&t.render()},n}(),Eb=function(){function t(t){this.Yn=t,this.rn=0,this.en=0,this.un=0,this.nn=0,t instanceof Ti&&(this.Qt=t.getCallback())}return t.prototype.getTheme=function(){return this.Yn.getTheme()},t.prototype.setTheme=function(t){this.Yn.setTheme(t)},t.prototype.getLeft=function(){return this.Yn.getLeft()+this.nn},t.prototype.adjLeft=function(t){if(this.nn!==t){this.nn=t;var n=this.Qt;n&&n()}},Object.defineProperty(t.prototype,"left",{get:function(){return this.Yn.left},set:function(t){this.Yn.left=t},enumerable:!1,configurable:!0}),t.prototype.getTop=function(){return this.Yn.getTop()+this.rn},t.prototype.adjTop=function(t){if(this.rn!==t){this.rn=t;var n=this.Qt;n&&n()}},Object.defineProperty(t.prototype,"top",{get:function(){return this.Yn.top},set:function(t){this.Yn.top=t},enumerable:!1,configurable:!0}),t.prototype.getRight=function(){return this.Yn.getRight()+this.en},t.prototype.adjRight=function(t){if(this.en!==t){this.en=t;var n=this.Qt;n&&n()}},Object.defineProperty(t.prototype,"right",{get:function(){return this.Yn.right},set:function(t){this.Yn.right=t},enumerable:!1,configurable:!0}),t.prototype.getBottom=function(){return this.Yn.getBottom()+this.un},t.prototype.adjBottom=function(t){if(this.un!==t){this.un=t;var n=this.Qt;n&&n()}},Object.defineProperty(t.prototype,"bottom",{get:function(){return this.Yn.bottom},set:function(t){this.Yn.bottom=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r){var e=this.Yn;null==n?e.set(t):null==i?e.set(t,n):null==r?e.set(t,n,i):e.set(t,n,i,r)},t}(),Mb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DBoard"},n}(Zi),Sb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButtonCheck"},n}(Ss),jb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButtonCheckRight"},n}(Sb),Tb=function(){function t(t,n,i,r,e){this.S=t,this.j=n,this._=i,this.Qt=e,this.ja=r}return t.prototype.set=function(t,n,i,r){this.S===t&&this.j===n&&this._===i&&this.ja===r||(this.S=t,this.j=n,this._=i,this.ja=r,this.Qt(this))},Object.defineProperty(t.prototype,"color",{get:function(){return this.S},set:function(t){this.S!==t&&(this.S=t,this.Qt(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.Qt(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._},set:function(t){this._!==t&&(this._=t,this.Qt(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.ja},set:function(t){this.ja!==t&&(this.ja=t,this.Qt(this))},enumerable:!1,configurable:!0}),t.prototype.toObject=function(){return{color:this.S,alpha:this.j,position:this._}},t}(),Nb=function(t,n){return t.position-n.position},Ib=function(n){function i(){var t=n.call(this)||this,i=function(n){t.onChange(n)};t.Ta=i;var r=new Tb(16777215,1,0,!1,i),e=new Tb(8421504,1,1,!0,i);return t.gt=[r,e],t.Xt=-90,t.ja=e,t.Na=[0,0,0],t}return B(i,n),i.prototype.onChange=function(t){var n=t.selected&&this.ja!==t;if(n){var i=this.ja;null!=i&&(i.ja=!1),this.ja=t}this.gt.sort(Nb),n&&this.emit("selectionchange",this.ja,this),this.emit("change",this)},Object.defineProperty(i.prototype,"points",{get:function(){return this.gt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this.Xt},set:function(t){this.Xt!==t&&(this.Xt=t,this.emit("directionchange",t,this),this.emit("change",this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.ja},enumerable:!1,configurable:!0}),i.prototype.size=function(){return this.gt.length},i.prototype.get=function(t){var n=this.gt;return 0<=t&&t<n.length?n[t]:null},i.prototype.addAt=function(n){for(var i=this.gt,r=null,e=0,u=i.length;e<u;++e){var s=i[e];if(n<=s.position){if(null==r)return this.add(s.color,s.alpha,n,!0);var h=s.position-r.position;if(.001<h){var o=t.utils.hex2rgb(s.color,this.Na),a=o[0],c=o[1],f=o[2],l=t.utils.hex2rgb(r.color,this.Na),v=l[0],b=l[1],d=l[2],g=(n-r.position)/h,m=a*g+v*(1-g),w=c*g+b*(1-g),p=f*g+d*(1-g),O=this.Na;O[0]=m,O[1]=w,O[2]=p;var D=t.utils.rgb2hex(O),E=s.alpha*g+r.alpha*(1-g);return this.add(D,E,n,!0)}}r=s}return null!=r?this.add(r.color,r.alpha,n,!0):this.add(16777215,1,n,!0)},i.prototype.add=function(t,n,i,r){var e=this.Ta,u=new Tb(t,n,i,r,e);return this.gt.push(u),e(u),u},i.prototype.remove=function(t){var n=this.gt;if(2<n.length)for(var i=0,r=n.length;i<r;++i)if(n[i]===t){n.splice(i,1);var e=this.ja===t;return e&&(this.ja=i+1<r?n[i]:n[i-1]),e&&this.emit("selectionchange",this.ja,this),this.emit("change",this),!0}return!1},i.prototype.reset=function(){var t=this.Xt;this.Xt=-90;var n=this.gt,i=this.ja,r=i?n.indexOf(i):-1;n.length=0;var e=this.Ta;if(n.push(new Tb(16777215,0,0,!1,e)),n.push(new Tb(16777215,0,1,!1,e)),0<=r&&r<n.length)(u=n[r]).ja=!0,this.ja=u;else if(0<n.length){var u;(u=n[n.length-1]).ja=!0,this.ja=u}else this.ja=null;return i!==this.ja&&this.emit("selectionchange",this.ja,this),t!==this.Xt&&this.emit("directionchange",this.Xt,this),this.emit("change",this),this},i.prototype.toObject=function(){for(var t=[],n=this.gt,i=0,r=n.length;i<r;++i)t.push(n[i].toObject());return{points:t,direction:this.Xt}},i.prototype.fromObject=function(t){var n=this.Xt;this.Xt=t.direction;var i=this.gt,r=this.ja,e=r?i.indexOf(r):-1;i.length=0;for(var u=this.Ta,s=0,h=t.points.length;s<h;++s){var o=t.points[s],a=new Tb(o.color,o.alpha,o.position,!1,u);i.push(a)}return i.sort(Nb),0<=e&&e<i.length?((a=i[e]).ja=!0,this.ja=a):0<i.length?((a=i[i.length-1]).ja=!0,this.ja=a):this.ja=null,r!==this.ja&&this.emit("selectionchange",this.ja,this),n!==this.Xt&&this.emit("directionchange",this.Xt,this),this.emit("change",this),this},i}(t.utils.EventEmitter),Cb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DInputLabel"},n}(uh),Ab=function(t){function n(n){var i=t.call(this,n)||this;i.addChild(i.Eh=new Cb(null==n?void 0:n.label)),i.addChild(i.ih=i.createInput(null==n?void 0:n.input));var r=null==n?void 0:n.space;return null!=r&&i.addChild(new Xu(r)),i}return B(n,t),Object.defineProperty(n.prototype,"input",{get:function(){return this.ih},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.Eh},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DInputAndLabel"},n}(Ns),Rb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.createInput=function(t){return new Ks(t)},n}(Ab),yb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.createInput=function(t){return new qs(t)},n}(Ab),Lb=function(){function t(t,n,i){this.Ia=t,this.Ca=n,this.Aa=i}return Object.defineProperty(t.prototype,"color",{get:function(){return this.Ia.color},set:function(t){if(this.Ia.color!==t){var n=this.Ca;null!=n&&n(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.Ia.alpha},set:function(t){if(this.Ia.alpha!==t){var n=this.Aa;null!=n&&n(t)}},enumerable:!1,configurable:!0}),t}(),kb=function(t){function n(n,i){var r=t.call(this)||this;return r.Ra=n,r.yt=i,r}return B(n,t),n.prototype.get=function(t){var n=this.Ra;return 0<=t&&t<n.length?n[n.length-1-t]:null},n.prototype.set=function(t,n){var i=this.Ra;if(0<=t&&t<i.length){var r=i[i.length-1-t];return i[i.length-1-t]={color:n.color,alpha:n.alpha},this.emit("change",this),r}return null},n.prototype.contains=function(t){for(var n=this.Ra,i=0,r=n.length;i<r;++i){var e=n[i];if(e.color===t.color&&e.alpha===t.alpha)return!0}return!1},n.prototype.add=function(t){var n=this.Ra;return n.push({color:t.color,alpha:t.alpha}),this.yt<n.length&&n.shift(),this.emit("change",this),this},n.prototype.pop=function(){var t=this.Ra.shift();return null!=t?(this.emit("change",this),t):null},n.prototype.size=function(){return this.Ra.length},n}(t.utils.EventEmitter),xb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),Object.defineProperty(i.prototype,"current",{get:function(){return this.ya},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"new",{get:function(){return this.La},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"recent",{get:function(){return this.ka},enumerable:!1,configurable:!0}),i.prototype.init=function(r){var e=this;n.prototype.init.call(this,r),this.Er=16711680,this.xa={color:16777215,alpha:1},this.La=new Lb(this.xa,(function(t){e.setColorNew(t)}),(function(t){e.setAlphaNew(t)})),this.Xe={color:16777215,alpha:1},this.ya=new Lb(this.Xe,(function(t){e.setColorCurrent(t)}),(function(t){e.setAlphaCurrent(t)}));var u=this.theme,s=this.Gn,h=s.getTop(),o=s.getRight(),a=s.getBottom(),c=s.getLeft();this.Ba=new t.Point;var f=u.getMainWidth(),l=u.getMainHeight(),v=new t.Sprite(t.Texture.WHITE);this.Pa=v,v.x=c,v.y=h,v.width=f,v.height=l,v.interactive=!0,this.addChild(v);var b=new t.Sprite(u.getMainTexture());this.Fa=b,b.x=c,b.y=h,b.tint=this.Er,b.interactive=!1,this.addChild(b),this.Ua=function(t){e.onMainMove(t)},this.Ga=function(t){e.onMainUp(t)},v.on(Wi.down,(function(t){e.onMainDown(t)}));var d=new t.Sprite(u.getBaseTexture());this.za=d,d.x=c,d.y=v.y+v.height+u.getBaseMargin(),d.interactive=!0,this.addChild(d),this.Ha=function(t){e.onBaseMove(t)},this.Va=function(t){e.onBaseUp(t)},d.on(Wi.down,(function(t){e.onBaseDown(t)}));var g=new t.Sprite(u.getAlphaCheckerboardTexture());this.Wa=g,g.x=s.getLeft(),g.y=d.y+u.getBaseHeight()+u.getBaseMargin(),g.interactive=!1,this.addChild(g);var m=new t.Sprite(u.getAlphaTexture());m.tint=this.xa.color,m.interactive=!0,g.addChild(m),this.Xa=function(t){e.onAlphaMove(t)},this.Ya=function(t){e.onAlphaUp(t)},m.on(Wi.down,(function(t){e.onAlphaDown(t)}));var w=new t.Sprite(u.getMainPointerTexture());this.Ka=w,w.x=c,w.y=h,w.anchor.x=.5,w.anchor.y=.5,w.tint=u.getMainPointerColor(),w.alpha=u.getMainPointerAlpha(),w.interactive=!1,this.addChild(w);var p=new t.Sprite(u.getAlphaPointerTexture());this.Ja=p,p.x=f,p.y=.5*g.height,p.tint=u.getAlphaPointerColor(),p.alpha=u.getAlphaPointerAlpha(),p.anchor.set(.5,.5),p.interactive=!1,g.addChild(p);var O=new t.Sprite(u.getBasePointerTexture());this.Za=O,O.x=0,O.y=.5*d.height,O.tint=u.getBasePointerColor(),O.alpha=u.getBasePointerAlpha(),O.anchor.set(.5,.5),O.interactive=!1,d.addChild(O),this.qa=[];var D=this.qa,E=u.getRecentColorCount(),M=u.getRecentColorWidth(),S=u.getRecentColorHeight(),j=.5*M,T=.5*S,N=u.getRecentColorMargin(),I=g.y+u.getAlphaHeight()+u.getRecentMargin(),C=u.getRecentCheckerboardTexture();null==i.RECENT_COLORS&&(i.RECENT_COLORS=new kb(u.getRecents().slice(0),E));var A=this.ka=i.RECENT_COLORS;A.on("change",(function(){e.onRecentChange()}));for(var R=function(n){var i=n.currentTarget;if(i instanceof t.Container){var r=i.children[0];r instanceof t.Sprite&&(e.setColorNew(r.tint),e.setAlphaNew(r.alpha))}},y=0;y<E;++y){var L=c+y*(M+N),k=new t.Sprite(C);k.x=L+j,k.y=I+T,k.anchor.x=.5,k.anchor.y=.5,k.buttonMode=!0,k.interactive=!0,Wi.onClick(k,R),this.addChild(k);var x=new t.Sprite(t.Texture.WHITE),B=A.get(y);null!=B?(x.tint=B.color,x.alpha=B.alpha):(x.tint=16777215,x.alpha=0),x.width=M,x.height=S,x.anchor.x=.5,x.anchor.y=.5,x.interactive=!1,k.addChild(x),D.push(x)}var _=u.getInputMargin(),P=u.getInputLabelWidth(),F=I+S+_,U=.5*(f-_),G=new yb({parent:this,x:c,y:F,width:U,label:{width:P,text:{value:"#"},interactive:Si.NONE},input:{weight:1,text:{value:"FFFFFF"},on:{input:function(t){var n=Jt.fromCode(t);null!=n&&e.setColorNew(n)}}}});this.Qa=G;var z=G.height,H=new Rb({parent:this,x:c,y:F+z+_,width:U,label:{width:P,text:{value:"A"},interactive:Si.NONE},input:{weight:1,text:{value:1},min:0,max:1,on:{input:function(t){e.setAlphaNew(t)}}}});this.$a=H;var V=.5*(U-P-_),W=z+_+z,X=c+.5*(f-_)+_,Y=F+.5*(z+_+H.height-W),K=new t.Sprite(u.getSampleCheckerboardTexture());this.tc=K,K.x=X,K.y=Y,K.width=V,K.height=W,K.interactive=!1,this.addChild(K);var J=this.Xe,Z=new t.Sprite(t.Texture.WHITE);this.nc=Z,Z.x=X,Z.y=Y,Z.tint=J.color,Z.alpha=J.alpha,Z.width=V,Z.height=W,Z.interactive=!0,Z.buttonMode=!0,Wi.onClick(Z,(function(){e.setColorNew(J.color),e.setAlphaNew(J.alpha)})),this.addChild(Z);var q=new t.Sprite(u.getSampleCheckerboardTexture());this.ic=q,q.x=X+V,q.y=Y,q.width=V,q.height=W,q.interactive=!1,this.addChild(q);var Q=new t.Sprite(t.Texture.WHITE);this.rc=Q,Q.x=X+V,Q.y=Y,Q.tint=this.xa.color,Q.alpha=this.xa.alpha,Q.width=V,Q.height=W,Q.interactive=!1,this.addChild(Q),null!=r&&null!=r.width||(this.width=c+f+o),null!=r&&null!=r.height||(this.height=F+G.height+_+H.height+a)},i.prototype.onMainDown=function(t){this.onMainPick(t.data.global);var n=rt.getLayer(this);if(n){var i=n.stage;i.on(Wi.move,this.Ua),i.on(Wi.up,this.Ga)}},i.prototype.onMainMove=function(t){this.onMainPick(t.data.global)},i.prototype.onMainUp=function(t){var n=rt.getLayer(this);if(n){var i=n.stage;i.off(Wi.move,this.Ua),i.off(Wi.up,this.Ga)}},i.prototype.toMainHex=function(t,n,i,r){return Math.max(0,Math.min(255,255*n+i*(t>>r&255)))<<r},i.prototype.toMainColor=function(t,n,i,r,e){var u=.5*r,s=Math.max(0,Math.min(1,((n-u)*(1-i/e)+u)/r)),h=Math.max(0,Math.min(1,i/e)),o=Math.abs(.5*h-s),a=1-o-h;return this.toMainHex(t,a,o,16)|this.toMainHex(t,a,o,8)|this.toMainHex(t,a,o,0)},i.prototype.onMainPick=function(t){var n=this.Ba,i=this.Gn,r=i.getLeft(),e=i.getTop(),u=this.theme,s=u.getMainWidth(),h=u.getMainHeight();this.toLocal(t,void 0,n);var o=Math.max(0,Math.min(s,n.x-r)),a=Math.max(0,Math.min(h,n.y-e));this.Ka.position.set(r+o,e+a),this.onColorNew(this.toMainColor(this.Er,o,a,s,h))},i.prototype.setColorCurrent=function(t){this.nc.tint=this.Xe.color=t},i.prototype.setAlphaCurrent=function(t){this.nc.alpha=this.Xe.alpha=t},i.prototype.setColorNew=function(t){var n=this.theme,i=n.getMainWidth(),r=n.getMainHeight(),e=this.Gn,u=$v.fromRgb(t);this.Fa.tint=this.Er=$v.toRgb(u[0],255,255),this.Za.x=Math.max(0,Math.min(1,u[0]/360))*i;var s=Math.max(0,Math.min(1,u[1]/255)),h=Math.max(0,Math.min(1,1-u[2]/255)),o=this.Ka;o.tint=h<.45?n.getMainPointerColor():16777215,o.position.set(e.getLeft()+s*i,e.getTop()+h*r),this.onColorNew(t)},i.prototype.onColorNew=function(t){var n=rt.getLayer(this);n&&n.lock(),this.rc.tint=this.xa.color=t,this.Qa.input.value=Jt.toCode(t),this.emit("newcolorchange",t,this),n&&(n.unlock(),n.update())},i.prototype.onBaseDown=function(t){this.onBasePick(t.data.global);var n=rt.getLayer(this);if(n){var i=n.stage;i.on(Wi.move,this.Ha),i.on(Wi.up,this.Va)}},i.prototype.onBaseMove=function(t){this.onBasePick(t.data.global)},i.prototype.onBaseUp=function(t){var n=rt.getLayer(this);if(n){var i=n.stage;i.off(Wi.move,this.Ha),i.off(Wi.up,this.Va)}},i.prototype.toBaseHex=function(t,n){return Math.max(0,Math.min(255,6*t*255))<<n},i.prototype.toBaseColor=function(t){return t<=.167?16711680+this.toBaseHex(t,8):t<=.333?(t=.333-t,65280+this.toBaseHex(t,16)):t<=.5?(t-=.333,65280+this.toBaseHex(t,0)):t<.667?(t=.667-t,255+this.toBaseHex(t,8)):t<.883?(t-=.667,255+this.toBaseHex(t,16)):(t=.883-t,16711680+this.toBaseHex(t,0))},i.prototype.onBasePick=function(t){var n=this.Ba,i=this.Gn,r=this.theme.getMainWidth();this.toLocal(t,void 0,n);var e=Math.max(0,Math.min(r,n.x-i.getLeft()));this.Za.x=e,this.onColorBase(this.toBaseColor(e/r))},i.prototype.setColorBase=function(t){var n=this.theme.getMainWidth();this.Za.x=Math.max(0,Math.min(1,t/360))*n,this.onColorBase($v.toRgb(t,255,255))},i.prototype.onColorBase=function(t){this.Fa.tint=this.Er=t;var n=this.Ka,i=this.theme,r=i.getMainWidth(),e=i.getMainHeight(),u=this.Gn;this.onColorNew(this.toMainColor(this.Er,n.x-u.getLeft(),n.y-u.getTop(),r,e))},i.prototype.onAlphaDown=function(t){this.onAlphaPick(t.data.global);var n=rt.getLayer(this);if(n){var i=n.stage;i.on(Wi.move,this.Xa),i.on(Wi.up,this.Ya)}},i.prototype.onAlphaMove=function(t){this.onAlphaPick(t.data.global)},i.prototype.onAlphaUp=function(t){var n=rt.getLayer(this);if(n){var i=n.stage;i.off(Wi.move,this.Xa),i.off(Wi.up,this.Ya)}},i.prototype.onAlphaPick=function(t){var n=this.Ba,i=this.Gn,r=this.theme.getMainWidth();this.toLocal(t,void 0,n);var e=Math.max(0,Math.min(r,n.x-i.getLeft()));this.Ja.x=e,this.onAlphaNew(e/r)},i.prototype.setAlphaNew=function(t){var n=this.theme.getMainWidth();this.Ja.x=Math.max(0,Math.min(1,t))*n,this.onAlphaNew(t)},i.prototype.onAlphaNew=function(t){var n=rt.getLayer(this);n&&n.lock(),this.rc.alpha=this.xa.alpha=t,this.$a.input.value=Number(t.toFixed(2)),this.emit("newalphachange",t,this),n&&(n.unlock(),n.update())},i.prototype.onRecentChange=function(){for(var t=this.qa,n=this.ka,i=0,r=t.length;i<r;++i){var e=t[i],u=n.get(i);null!=u?(e.tint=u.color,e.alpha=u.alpha):(e.tint=16777215,e.alpha=0)}},i.prototype.getType=function(){return"DPickerColor"},i.RECENT_COLORS=null,i}(Zi),Bb=function(t,n){if(t.direction!==n.direction)return!1;var i=t.points,r=n.points;if(i.length!==r.length)return!1;for(var e=0,u=i.length;e<u;++e){var s=i[e],h=r[e];if(s.color!==h.color||s.alpha!==h.alpha||s.position!==h.position)return!1}return!0},_b=function(t){function n(n,i){var r=t.call(this)||this;return r.Ra=n,r.yt=i,r}return B(n,t),n.prototype.getCapacity=function(){return this.yt},n.prototype.get=function(t){var n=this.Ra;return 0<=t&&t<n.length?n[n.length-1-t]:null},n.prototype.set=function(t,n){var i=this.Ra;if(0<=t&&t<i.length){var r=i[i.length-1-t];return i[i.length-1-t]=n,this.emit("change",this),r}return null},n.prototype.contains=function(t){for(var n=this.Ra,i=0,r=n.length;i<r;++i)if(Bb(n[i],t))return!0;return!1},n.prototype.add=function(t){var n=this.Ra;return n.push(t),this.yt<n.length&&n.shift(),this.emit("change",this),this},n.prototype.pop=function(){var t=this.Ra.shift();return null!=t?(this.emit("change",this),t):null},n.prototype.size=function(){return this.Ra.length},n}(t.utils.EventEmitter),Pb=function(n){function i(i,r,e,u,s,h,o,a){var c=n.call(this,o,a)||this;return c.interactive=!0,c.interactiveChildren=!1,c.cursor="pointer",c.ec=i,c.bn=r,c._uvs=e,c.uc=u,c.mn=s,c.sc=-1,c.Na=[0,0,0],c.hc=new t.Point,c.oc=h,a.uniforms.uSampler.on("update",(function(){c.update(),rt.update(c)})),c.update(),c}return B(i,n),i.prototype.getRectangle=function(t){var n=this.oc;return 0<=t&&t<n.length?n[t].rect:null},i.prototype.setRectangle=function(t,n,i,r,e){var u=this.oc;if(0<=t&&t<u.length){var s=u[t].rect;s.x=n,s.y=i,s.width=r,s.height=e}},i.prototype.getData=function(t){var n=this.oc;return 0<=t&&t<n.length?n[t].data:null},i.prototype.setData=function(t,n){var i=this.oc;0<=t&&t<i.length&&(i[t].data=n)},i.prototype.getLastHitIndex=function(){return this.sc},i.prototype.setColors=function(t,n,i,r){n[t+0]=i[0],n[t+1]=i[1],n[t+2]=i[2],n[t+3]=r,n[t+4]=i[0],n[t+5]=i[1],n[t+6]=i[2],n[t+7]=r},i.prototype.setColorsHex=function(n,i,r,e){var u=t.utils.hex2rgb(r,this.Na);this.setColors(n,i,u,e)},i.prototype.setColorsWhite=function(t,n){var i=this.Na;i[0]=1,i[1]=1,i[2]=1,this.setColors(t,n,i,0)},i.prototype.setColorsPoint=function(t,n,i,r){var e=n.points[i];null!=e?this.setColorsHex(t,r,e.color,e.alpha):this.setColorsWhite(t,r)},i.prototype.setVertices=function(t,n,i,r){var e=r.y+r.height*i;n[t+0]=r.x,n[t+1]=e,n[t+2]=r.x+r.width,n[t+3]=e},i.prototype.setUvs=function(t,n,i,r){var e=r.x0+(r.x3-r.x0)*i,u=r.y0+(r.y3-r.y0)*i,s=r.x1+(r.x2-r.x1)*i,h=r.y1+(r.y2-r.y1)*i;n[t+0]=e,n[t+1]=u,n[t+2]=s,n[t+3]=h},i.prototype.newIndices=function(t,n,i,r){for(var e=0;e<i;++e)r[t+0]=n+0,r[t+1]=n+1,r[t+2]=n+2,r[t+3]=n+2,r[t+4]=n+1,r[t+5]=n+3,t+=6,n+=2;return r},i.prototype._calculateBounds=function(){var t=this.transform.worldTransform,n=this.oc[0].rect,i=this._bounds,r=this.hc;r.set(n.x,n.y),t.apply(r,r),i.addPoint(r),r.set(n.x+n.width,n.y+n.height),t.apply(r,r),i.addPoint(r)},i.prototype.update=function(){var t=this.bn,n=this._uvs,i=this.uc,r=this.mn,e=this.shader.uniforms.uSampler;null==e._uvs&&e.updateUvs();for(var u=e._uvs,s=0,h=0,o=0,a=0,c=this.oc,f=0,l=c.length;f<l;++f){var v=c[f].data,b=c[f].rect;if(null==v)this.setVertices(s,t,0,b),this.setUvs(s,n,0,u),this.setColorsWhite(o,i),this.setVertices(s+4,t,1,b),this.setUvs(s,n,1,u),this.setColorsWhite(o+8,i),this.newIndices(a,h,1,r),s+=8,o+=16,h+=4,a+=6;else{this.setVertices(s,t,0,b),this.setUvs(s,n,0,u),this.setColorsPoint(o,v,0,i),s+=4,o+=8;for(var d=v.points.length,g=0,m=Math.min(d,this.ec);g<m;++g){var w=v.points[g];this.setVertices(s,t,w.position,b),this.setUvs(s,n,w.position,u),this.setColorsHex(o,i,w.color,w.alpha),s+=4,o+=8}this.setVertices(s,t,1,b),this.setUvs(s,n,1,u),this.setColorsPoint(o,v,d-1,i),s+=4,o+=8,this.newIndices(a,h,d+1,r),a+=6*(d+1),h+=2*(d+2)}}this.size=a;var p=this.geometry;p.getBuffer("aPosition").update(),p.getBuffer("aUv").update(),p.getBuffer("aColor").update(),p.getIndex().update()},i.prototype.containsPoint=function(t){for(var n=this.toLocal(t,void 0,this.hc),i=this.oc,r=0,e=i.length;r<e;++r)if(i[r].rect.contains(n.x,n.y))return this.sc=r,!0;return!1},i.from=function(n,r,e,u){void 0===u&&(u=t.Texture.WHITE);for(var s=new Float32Array(n*(r+2)*2*2),h=new Float32Array(n*(r+2)*2*2),o=new Float32Array(n*(r+2)*2*4),a=new Uint16Array(n*(r+1)*6),c=[],f=0;f<n;++f)c.push({data:null,rect:new t.Rectangle});return new i(r,s,h,o,a,c,(new t.Geometry).addIndex(new t.Buffer(a,!1,!0)).addAttribute("aPosition",new t.Buffer(s,!1,!1),2).addAttribute("aUv",new t.Buffer(h,!1,!1),2).addAttribute("aColor",new t.Buffer(o,!1,!1),4),t.Shader.from("\nattribute vec2 aPosition;\nattribute vec2 aUv;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nvoid main(void) {\n\tvec3 position = vec3(aPosition.x, aPosition.y, 1.0);\n\tgl_Position = vec4((projectionMatrix * translationMatrix * position).xy, 0.0, 1.0);\n\tvUv = aUv;\n\tvColor = aColor;\n}\n","\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform vec2 uCheckerColors;\n\nvoid main(void) {\n\tvec4 texture = texture2D(uSampler, vUv);\n\tfloat cy = step( 1.0, mod( gl_FragCoord.y / 10.0, 2.0 ) );\n\tfloat cx = step( 1.0, mod( gl_FragCoord.x / 10.0 + cy, 2.0 ) );\n\tfloat c = mix( uCheckerColors.x, uCheckerColors.y, cx );\n\tgl_FragColor = texture * vec4( mix( vec3( c ), vColor.xyz, vColor.a ), 1.0 );\n}",{uSampler:u,uCheckerColors:e}))},i}(t.Mesh),Fb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(r){var e=this;n.prototype.init.call(this,r);var u=this.theme,s=this.Gn,h=s.getTop(),o=s.getRight(),a=s.getBottom(),c=s.getLeft();this.su=new t.Point;var f=u.getGradientPointsWidth(),l=u.getGradientPointsMargin(),v=new xb({x:c+f+l,y:h});this.Mh=v,v.on("newcolorchange",(function(t){e.onAnchorColorChange(t)})),v.on("newalphachange",(function(t){e.onAnchorAlphaChange(t)})),this.addChild(v);var b=this.nr=Pb.from(17,10,u.getGradientCheckerColors());b.setRectangle(0,c,h,f,v.height),this.addChild(b),b.on(Wi.down,(function(t){0===b.getLastHitIndex()&&e.onViewDown(t)})),this.ac=function(t){e.onAnchorDown(t)},this.cc=function(t){e.onAnchorMove(t)},this.fc=function(t){e.onAnchorUp(t)},this.lc=[];var d=u.getGradientRecentColumn(),g=u.getGradientRecentWidth(),m=u.getGradientRecentMargin(),w=g+m,p=v.theme.getInputLabelWidth(),O=g*d+m*(d-1),D=u.getGradientDirectionMargin(),E=u.getGradientDirectionTexture(),M=v.x+v.width+D,S=new Ks({parent:this,x:M+p+5,y:h,width:O-2*(p+5),step:1,image:{source:E,align:{with:is.BORDER},margin:{horizontal:-E.width-5}},on:{change:function(t){e.At.Xt=t}}}),j=M,T=S.y+S.height+D;null==i.RECENT_COLOR_GRADIENT&&(i.RECENT_COLOR_GRADIENT=new _b(u.getGradientRecents(),u.getGradientRecentCount())),this.ka=i.RECENT_COLOR_GRADIENT;for(var N=this.ka,I=0,C=N.getCapacity();I<C;++I){var A=j+I%d*w,R=T+(I/d|0)*w;b.setRectangle(1+I,A,R,g,g)}N.on("change",(function(){e.onRecentUpdate()})),Wi.onClick(b,(function(t){var n=b.getLastHitIndex();1<=n&&e.onRecentClick(b.getData(n))}));var y=new Ib;this.At=y,y.on("change",(function(){e.updateAnchors(),b.update()})),y.on("selectionchange",(function(t){e.onAnchorSelect(t)})),y.on("directionchange",(function(t){S.value=t})),b.setData(0,y),b.update(),S.value=y.direction,this.updateAnchors();var L=y.selected;null!=L&&this.onAnchorSelect(L),null!=r&&null!=r.width||(this.width=c+f+l+v.width+D+(d-1)*m+d*g+o),null!=r&&null!=r.height||(this.height=h+v.height+a)},Object.defineProperty(i.prototype,"value",{get:function(){return this.At},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"recent",{get:function(){return this.ka},enumerable:!1,configurable:!0}),i.prototype.onRecentClick=function(t){var n=this.At;null!=t?n.fromObject(t):n.reset()},i.prototype.onRecentUpdate=function(){for(var t=this.ka,n=this.nr,i=0,r=t.size();i<r;++i)n.setData(1+i,t.get(i));n.update(),rt.update(this)},i.prototype.toAnchorPosition=function(t){var n=this.toLocal(t.data.global,void 0,this.su);return Math.max(0,Math.min(1,(n.y-this.padding.getTop())/this.Mh.height))},i.prototype.onViewDown=function(t){this.At.addAt(this.toAnchorPosition(t)),this.onAnchorDragStart()},i.prototype.onAnchorDown=function(n){var i=n.target;if(i instanceof t.Sprite){var r=this.At,e=this.lc.indexOf(i);0<=e&&e<r.points.length&&(r.points[e].selected=!0,this.onAnchorDragStart())}},i.prototype.onAnchorSelect=function(t){var n=this.Mh;n.current.color=t.color,n.current.alpha=t.alpha,n.new.color=t.color,n.new.alpha=t.alpha},i.prototype.onAnchorColorChange=function(t){var n=this.At;if(null!=n){var i=n.selected;null!=i&&(i.color=t)}},i.prototype.onAnchorAlphaChange=function(t){var n=this.At;if(null!=n){var i=n.selected;null!=i&&(i.alpha=t)}},i.prototype.onAnchorDragStart=function(){var t=rt.getLayer(this);if(t){var n=t.stage;n.on(Wi.move,this.cc),n.on(Wi.up,this.fc)}},i.prototype.onAnchorMove=function(t){var n=this.At;if(null!=n){var i=n.selected;null!=i&&(i.position=this.toAnchorPosition(t))}},i.prototype.onAnchorUp=function(t){var n=rt.getLayer(this);if(n){var i=n.stage;i.off(Wi.move,this.cc),i.off(Wi.up,this.fc)}},i.prototype.updateAnchors=function(){for(var n=this.theme,i=n.getGradientAnchorTexture(),r=n.getGradientAnchorOutlinedTexture(),e=n.getGradientPointsWidth(),u=this.At,s=u.points.length,h=this.lc,o=h.length,a=o;a<s;++a){var c=new t.Sprite(i);c.anchor.set(.5,.5),c.cursor="pointer",c.interactive=!0,c.on(Wi.down,this.ac),h.push(c),this.addChild(c)}for(a=o-1;s<=a;--a){var f=h[a];f.off(Wi.down,this.ac),f.destroy()}h.length=s;var l=this.padding.getTop(),v=this.padding.getLeft()+e,b=this.Mh.height;for(a=0;a<s;++a){var d=u.points[a],g=h[a];g.tint=d.color,g.position.set(v,l+b*d.position),g.texture=d.selected?r:i}rt.update(this)},i.prototype.onKeyDown=function(t){if(Zt.isDeleteKey(t)){var i=this.At;if(null!=i){var r=i.selected;if(null!=r)return i.remove(r),n.prototype.onKeyDown.call(this,t),!0}}return n.prototype.onKeyDown.call(this,t)},i.prototype.getType=function(){return"DPickerColorGradient"},i.RECENT_COLOR_GRADIENT=null,i}(Zi),Ub=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},n.prototype.onOk=function(n){t.prototype.onOk.call(this,n);var i=this.picker,r=i.value,e=i.recent;e.contains(r)||e.add(r.toObject())},Object.defineProperty(n.prototype,"value",{get:function(){return this.picker.value},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"recent",{get:function(){return this.picker.recent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Mh;return null==n&&(n=new Fb(null===(t=this.yn)||void 0===t?void 0:t.picker),this.Mh=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.value},n.prototype.onKeyDown=function(n){return this.picker.onKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DDialogColorGradient"},n}(nh),Gb=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(i){var r;if(n.prototype.init.call(this,i),void 0===(null===(r=null==i?void 0:i.image)||void 0===r?void 0:r.source)){var e=this.theme,u=e.getViewBaseTexture();if(u instanceof t.Texture){var s=e.getCheckerColors(),h=Pb.from(1,10,s,u);this.nr=h,h.setRectangle(0,0,0,u.width,u.height),h.setData(0,this.Ps),h.update(),this.image=h}}},i.prototype.onActivate=function(t){var i=this;n.prototype.onActivate.call(this,t);var r=this.Ps,e=this.dialog;null!=r&&e.value.fromObject(r),e.open(this).then((function(t){i.onValueChange(t,i.toClone(r))}))},i.prototype.toClone=function(t){var n=new Ib;return null!=t&&n.fromObject(t),n},i.prototype.onValueChange=function(t,n){var i=this.Ps;null!=i&&i.fromObject(t);var r=this.nr;null!=r&&r.update(),this.onTextChange(),this.createOrUpdateText(),rt.update(this),this.emit("change",t,n,this)},Object.defineProperty(i.prototype,"dialog",{get:function(){var t,n=this.vc;if(null==n){var r=null===(t=this.yn)||void 0===t?void 0:t.dialog;r?n=this.newDialog(r):(null==i.DIALOG&&(i.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),n=i.DIALOG),this.vc=n}return n},enumerable:!1,configurable:!0}),i.prototype.newDialog=function(t){return new Ub(t)},Object.defineProperty(i.prototype,"value",{get:function(){return this.Ps},enumerable:!1,configurable:!0}),i.prototype.getType=function(){return"DButtonColorGradient"},i}(js),zb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.picker),r},n.prototype.onOk=function(n){t.prototype.onOk.call(this,n);var i=this.picker,r=i.recent;r.contains(i.new)||r.add(i.new)},Object.defineProperty(n.prototype,"current",{get:function(){return this.picker.current},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"new",{get:function(){return this.picker.new},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"recent",{get:function(){return this.picker.recent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"picker",{get:function(){var t,n=this.Mh;return null==n&&(n=new xb(null===(t=this.yn)||void 0===t?void 0:t.picker),this.Mh=n),n},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){return this.picker.new},n.prototype.getType=function(){return"DDialogColor"},n}(nh),Hb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onActivate=function(n){var i=this;t.prototype.onActivate.call(this,n);var r=this.dialog,e=this.Ps;if(null!=e){var u=r.current;u.color=e.color,u.alpha=e.alpha;var s=r.new;s.color=e.color,s.alpha=e.alpha}r.open(this).then((function(){i.onValueChange(i.toClone(r.new),i.toClone(r.current))}))},n.prototype.toClone=function(t){return{color:t.color,alpha:t.alpha}},n.prototype.onValueChange=function(t,n){var i=this.Ps;null!=i&&(i.color=t.color,i.alpha=t.alpha),this.onColorChange(),this.emit("change",t,n,this)},n.prototype.toImageTintOptions=function(t){var n=this,i=function(){return n.Ps.color};return t?{color:t.color||i,alpha:t.alpha}:{color:i}},n.prototype.toImageOptions=function(t,n){return n?{source:n.source,tint:this.toImageTintOptions(n.tint),align:n.align,margin:n.margin}:{tint:this.toImageTintOptions()}},n.prototype.onColorChange=function(){this.Ws[0].updateTint()&&rt.update(this),this.updateTextForcibly()},n.prototype.updateTextForcibly=function(){this.onTextChange(),this.createOrUpdateText()},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,i=this.vc;if(null==i){var r=null===(t=this.yn)||void 0===t?void 0:t.dialog;r?i=this.newDialog(r):(null==n.DIALOG&&(n.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),i=n.DIALOG),this.vc=i}return i},enumerable:!1,configurable:!0}),n.prototype.newDialog=function(t){return new zb(t)},Object.defineProperty(n.prototype,"value",{get:function(){var t=this.At;return null==t&&(t=this.newValue(),this.At=t),t},enumerable:!1,configurable:!0}),n.prototype.newValue=function(){var t=this,n=this.Ps;return new Lb(n,(function(i){n.color=i,t.onColorChange()}),(function(i){n.alpha=i,t.updateTextForcibly()}))},n.prototype.getType=function(){return"DButtonColor"},n}(js),Vb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButtonDanger"},n}(js),Wb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onActivate=function(n){var i,r,e=this;t.prototype.onActivate.call(this,n);var u=null!==(r=null===(i=this.Ps)||void 0===i?void 0:i.getTime())&&void 0!==r?r:Date.now(),s=this.dialog;s.current=new Date(u),s.new=new Date(u),s.page=new Date(u),s.open(this).then((function(){e.onValueChange(s.new,s.current)}))},n.prototype.onValueChange=function(t,n){this.text=new Date(t.getTime()),this.emit("change",t,n,this)},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,i=this.vc;if(null==i){var r=null===(t=this.yn)||void 0===t?void 0:t.dialog;r?i=this.newDialog(r):(null==n.DIALOG&&(n.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),i=n.DIALOG),this.vc=i}return i},enumerable:!1,configurable:!0}),n.prototype.newDialog=function(t){return new jh(t)},Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.Ps)&&void 0!==t?t:new Date},set:function(t){var n=this.Ps;void 0!==n&&n.getTime()===t.getTime()||(this.text=t)},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DButtonDate"},n}(js),Xb=function(){function t(){}return t.format=function(t){var n=Kt(String(t.getFullYear()),4,"0"),i=Kt(String(t.getMonth()+1),2,"0"),r=Kt(String(t.getDate()),2,"0");return"".concat(n,"/").concat(i,"/").concat(r)},t}(),Yb=function(){function t(){}return t.format=function(t,n){var i="";return n&ah.HOURS&&(i+=Kt(String(t.getHours()),2,"0")),n&ah.MINUTES&&(0<i.length&&(i+=":"),i+=Kt(String(t.getMinutes()),2,"0")),n&ah.SECONDS&&(0<i.length&&(i+=":"),i+=Kt(String(t.getSeconds()),2,"0")),i},t.toMask=function(t){return ch.from("DPickerTime",t)},t}(),Kb=function(){function t(){}return t.format=function(t,n){var i=Yb.format(t,n);return 0<i.length?"".concat(Xb.format(t)," ").concat(i):"".concat(Xb.format(t))},t.toMask=function(t){return ch.from("DPickerDatetime",t)},t}(),Jb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onActivate=function(n){var i,r,e=this;t.prototype.onActivate.call(this,n);var u=null!==(r=null===(i=this.Ps)||void 0===i?void 0:i.getTime())&&void 0!==r?r:Date.now(),s=this.dialog;s.current=new Date(u),s.new=new Date(u),s.page=new Date(u),s.open(this).then((function(){e.onValueChange(s.new,s.current)}))},n.prototype.onValueChange=function(t,n){this.text=new Date(t.getTime()),this.emit("change",t,n,this)},n.prototype.getDatetimeMask=function(){var t,n,i=this.bc;return null==i&&(i=Kb.toMask(null===(n=null===(t=this.yn)||void 0===t?void 0:t.dialog)||void 0===n?void 0:n.picker),this.bc=i),i},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,i=this.vc;if(null==i){var r=null===(t=this.yn)||void 0===t?void 0:t.dialog;r?i=this.newDialog(r):(null==n.DIALOG&&(n.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),i=n.DIALOG),this.vc=i}return i},enumerable:!1,configurable:!0}),n.prototype.newDialog=function(t){return new ph(t)},Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.Ps)&&void 0!==t?t:new Date},set:function(t){var n=this.Ps;void 0!==n&&n.getTime()===t.getTime()||(this.text=t)},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DButtonDatetime"},n}(js),Zb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getChecker=function(){var t,n,i=this.vo;return void 0===i&&(i=null!==(n=null===(t=this.yn)||void 0===t?void 0:t.checker)&&void 0!==n?n:null,this.vo=i),i},n.prototype.getOpener=function(){var t=this.hs;return null==t&&(t=this.newOpener(),this.hs=t),t},n.prototype.newOpener=function(){var t,n;return new Qv(Oi(null!==(n=null===(t=this.yn)||void 0===t?void 0:t.as)&&void 0!==n?n:qv.TEXT,qv),this)},n.prototype.onActivate=function(n){var i=this;t.prototype.onActivate.call(this,n),this.check((function(){i.open()}))},n.prototype.check=function(t){var n=this.getChecker();if(null!=n){var i=n();!0===i?t():!1===i||i.then((function(){t()}))}else t()},n.prototype.open=function(){this.getOpener().open()},n.prototype.getType=function(){return"DButtonFile"},n}(js),qb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.initOnClick=function(t,n,i){var r=this,e=new Dl(i);this.bo=e,e.add(this,(function(n){t===qu.CLICKED&&r.onClick(n)}))},Object.defineProperty(n.prototype,"link",{get:function(){return this.bo},enumerable:!1,configurable:!0}),n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.bo.open(n)},n.prototype.open=function(t){this.bo.open(t)},n.prototype.getType=function(){return"DButtonLink"},n}(Ss),Qb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButtonRadio"},n}(Ss),$b=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButtonRadioRight"},n}(Qb),td=function(t){function n(n){var i=t.call(this,n)||this,r=i.state,e=wb.getCommandController();return r.isDisabled=!e.isRedoable(),e.on("change",(function(){r.isDisabled=!e.isRedoable()})),i}return B(n,t),n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),wb.getCommandController().redo()},n}(js),nd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DButtonSecondary"},n}(js),id={NONE:0,SINGLE:1,MULTIPLE:2},rd=function(t){function n(n,i){var r=t.call(this,i)||this;return r.Bt=n,r.initOnClick(n,i),r}return B(n,t),n.prototype.initOnClick=function(t,n){var i=this,r=t.accessor.link;if(r){var e=new Dl(this.toLinkOptions(r));e.add(this,(function(t){var n=i.At;void 0!==n&&i.onSelect(t,n)})),this.bo=e}else Wi.onClick(this,(function(t){if(i.state.isActionable){var n=i.At;void 0!==n&&i.onSelect(t,n)}}))},n.prototype.toLinkOptions=function(t){return{url:this.toLinkUrl(t.toUrl),target:t.target,checker:this.toLinkChecker(t.checker)}},n.prototype.toLinkUrl=function(t){var n=this;return function(){var i=n.At;if(void 0!==i)return t(i)}},n.prototype.toLinkChecker=function(t){var n=this;if(t)return function(){var i=n.At;return null!=i&&t(i)}},Object.defineProperty(n.prototype,"value",{get:function(){return this.At},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.Ve},enumerable:!1,configurable:!0}),n.prototype.onSelect=function(t,n){var i,r=this.Bt,e=r.selection;if(e.type!==id.MULTIPLE)e.clearAndAdd(n);else{var u=t&&"data"in t?t.data.originalEvent:t;if(null==u?void 0:u.ctrlKey)e.toggle(n);else if(null==u?void 0:u.shiftKey){var s=r.mapped,h=e.last;if(n===h)e.clearAndAdd(n);else{var o=!1,a=!1,c=[];s.each((function(t){if(o){if(a){if(c.unshift(t),t===n)return!1}else if(c.push(t),t===h)return!1}else t===n?(o=!0,a=!1,c.push(t)):t===h&&(o=!0,a=!0,c.push(t))})),e.clearAndAddAll(c)}}else e.clearAndAdd(n)}null===(i=this.bo)||void 0===i||i.open(t)},n.prototype.set=function(t,n,i){var r=this.Bt,e=i||this.At!==t;if(e){this.At=t,this.Ve=n;var u=r.accessor;this.text=u.toLabel(t),this.title=u.toTitle(t)||"",this.image=u.toImage(t)}var s=this.state;s.lock(),s.set(ht.ACTIVE,r.selection.contains(t)),s.remove(ht.DISABLED),s.unlock(),e&&this.emit("set",t,n,this)},n.prototype.unset=function(){if(void 0!==this.At){this.At=void 0,this.Ve=void 0,this.text=void 0,this.title="",this.image=void 0;var t=this.state;t.lock(),t.add(ht.DISABLED),t.remove(ht.ACTIVE),t.unlock(),this.emit("unset",this)}},n.prototype.onKeyDown=function(n){return Zt.isActivateKey(n)&&this.onKeyDownActivate(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownActivate=function(t){if(this.state.isActionable&&this.state.isFocused){var n=this.At;return void 0!==n&&this.onSelect(t,n),!0}return!1},n.prototype.getType=function(){return"DListItem"},n}(Ms),ed=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogSelectListItem"},n}(rd),ud=function(){function t(t,n,i,r){this.dc=0,this.gc=!1,this.mc=!1,this.wc=-1,this.Oc=-1,this.cs=1,this.Dc=0,this.Ec=0,this.Mc=[],this.Bt=t,this.$s=n,this.Sc=i,this.jc=this.toNewItem(r),this.Tc=this.toInitItem(r)}return t.prototype.toNewItem=function(t){return(null==t?void 0:t.newItem)||this.newItem},t.prototype.toInitItem=function(t){return t?t.initItem||(!1!==t.stripe?this.initItem:this.initItemNoStriping):this.initItem},t.prototype.initItem=function(t,n,i){return t.state.isAlternated=n%2==1,t},t.prototype.initItemNoStriping=function(t,n,i){return t},Object.defineProperty(t.prototype,"multiplicity",{get:function(){return this.cs},enumerable:!1,configurable:!0}),t.prototype.lock=function(){this.dc+=1,1===this.dc&&(this.gc=!1,this.mc=!1)},t.prototype.unlock=function(t){this.dc-=1,0===this.dc&&(t&&this.gc&&this.update(this.mc),this.gc=!1,this.mc=!1)},t.prototype.update=function(t){var n=this;if(0<this.dc)return this.gc=!0,void(t&&(this.mc=!0));var i=this.$s,r=i.parent;if(null!=r){var e=this.Sc,u=e.children,s=r.height,h=this.Bt,o=this.toMapped(h),a=o.size(),c=this.Dc,f=this.Ec,l=f-c,v=this.jc,b=this.Tc,d=this.wc,g=this.Oc;if(this.wc<0){var m=void 0;0<u.length?m=u[0]:(m=b(v(h),c,h),e.addChild(m),f+=1,l+=1),d=Math.max(1,m.height),gn(m.getWidth())&&(g=Math.max(1,m.width)),this.wc=d,this.Oc=g}var w=i.padding,p=w.getTop(),O=w.getBottom(),D=w.getLeft(),E=w.getRight(),M=Math.max(0,i.width-D-E),S=0<g?Math.max(1,Math.floor(M/g)):1;this.cs=S;var j=i!==e?e.transform.position.y:p,T=Math.ceil(a/S)*d,N=Math.max(s,p+T+O),I=Math.max(s-N,i.position.y),C=Math.floor((0-(I+j))*S/d),A=Math.floor((s-(I+j))*S/d),R=C-S;R%2!=0&&(R-=1);var y=A+S+S;y%2!=0&&(y+=1);var L=y-R;if(L<l&&l-2<=L&&(y=R+(L=l)),l<L){for(var k=l;k<L;++k){var x=c+k;m=b(v(h),x,h),e.addChild(m)}f=c+(l=L)}else if(L<l){for(k=l-1;L<=k;--k)e.removeChild(u[k]);f=c+(l=L)}this.Dc=R,this.Ec=y;var B=R-c,_=Math.abs(B),P=u.length;if(0<_&&_<P){var F=this.Mc;if(0<B){for(k=0;k<_;++k)m=u[k],this.reset(m),F.push(m);for(k=_;k<P;++k)u[k-_]=u[k];for(k=0;k<_;++k)u[P-_+k]=F[k]}else{for(k=0;k<_;++k)m=u[P-_+k],this.reset(m),F.push(m);for(k=P-_-1;0<=k;--k)u[k+_]=u[k];for(k=0;k<_;++k)u[k]=F[k]}F.length=0}var U=0,G=0;for(i===e&&(U=D,G=p),o.each((function(i,r){var e=u[r-R],s=r%S,h=Math.floor(r/S);e.position.set(U+s*g,G+h*d),n.set(e,i,r,t)}),R,R+P),k=0;R+k<0&&k<P;++k){m=u[k];var z=(V=R+k)%S,H=Math.floor(V/S);m.position.set(U+z*g,G+H*d),this.unset(m)}for(k=P-1;a<=R+k&&0<=k;--k){var V;m=u[k],z=(V=R+k)%S,H=Math.floor(V/S),m.position.set(U+z*g,G+H*d),this.unset(m)}this.lock(),i.position.y=I,i.height=N,i!==e&&(e.height=T),this.unlock(!1)}},t.prototype.set=function(t,n,i,r){t.set(n,i,r)},t.prototype.unset=function(t){t.unset()},t.prototype.reset=function(t){t.blur(!0);for(var n=t.children,i=0,r=n.length;i<r;++i){var e=n[i];if(e instanceof Zi){var u=e.state;u.lock(),u.isPressed=!1,u.isHovered=!1,u.unlock()}}return t.state.isHovered=!1,t},t.prototype.moveFocus=function(t,n,i,r){if(!i&&!r)return!1;var e=i&&Zt.isArrowUpKey(t),u=i&&Zt.isArrowDownKey(t),s=r&&Zt.isArrowLeftKey(t),h=r&&Zt.isArrowRightKey(t);if(!(e||u||s||h))return!1;if(!n.state.isActionable)return!1;var o=rt.getLayer(n);if(null==o)return!1;var a=o.getFocusController(),c=a.get();if(null==c)return!1;var f=this.Sc;if(c.parent!==f)return!1;var l=c,v=l.index;if(null==v)return!1;var b=this.cs,d=this.Bt,g=this.toMapped(d).size(),m=v;if((s||h)&&(s?0<=m-1&&(m-=1):m+1<g&&(m+=1)),(e||u)&&(e?0<=m-b&&(m-=b):m+b<g&&(m+=b)),m===v)return!1;var w=f.children,p=w.indexOf(l);if(p<0)return!1;var O=p+(m-v);if(O<0||w.length<=O)return!1;var D=w[O];return a.focus(D),!0},t}(),sd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMapped=function(t){return t.mapped},n.prototype.newItem=function(t){return new rd(t)},n}(ud),hd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newItem=function(t){return new ed(t)},n}(sd),od=function(){function t(t){this.p=t}return t.prototype.size=function(){var t=this.p;return t.before.length+t.items.length+t.after.length},t.prototype.each=function(t,n,i){var r=this.p,e=this.Nc(t,r.before,0,n,i);if(!(e<0)){var u=this.Nc(t,r.items,e,n,i);u<0||this.Nc(t,r.after,u,n,i)}},t.prototype.Nc=function(t,n,i,r,e){for(var u=i+n.length,s=null!=r?Math.max(i,r):i,h=null!=e?Math.min(u,e):u,o=s;o<h;++o)if(!1===t(n[o-i],o))return-1;return h},t}(),ad=function(t){function n(n,i,r){var e=t.call(this)||this;e.p=n,e.Ic=i,e.Cc=new Set;var u=null==r?void 0:r.on;if(u)for(var s in u){var h=u[s];h&&e.on(s,h)}return e}return B(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return id.MULTIPLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this.get(this.size()-1)},enumerable:!1,configurable:!0}),n.prototype.get=function(t){var n=this.Cc;if(0<=t&&t<n.size){var i=0,r=null;return n.forEach((function(n){i===t&&(r=n),i+=1})),r}return null},n.prototype.add=function(t){var n=this.Cc;return!n.has(t)&&(n.add(t),this.onChange(),!0)},n.prototype.remove=function(t){var n=this.Cc;return!!n.has(t)&&(n.delete(t),this.onChange(),!0)},n.prototype.toggle=function(t){var n=this.Cc;return n.has(t)?n.delete(t):n.add(t),this.onChange(),!0},n.prototype.clear=function(){var t=this.Cc;0<t.size&&(t.clear(),this.onChange())},n.prototype.clearAndAdd=function(t){var n=this.Cc;return 1===n.size?!n.has(t)&&(n.clear(),n.add(t),this.onChange(),!0):(n.clear(),n.add(t),this.onChange(),!0)},n.prototype.clearAndAddAll=function(t){for(var n=!1,i=new Set,r=this.Cc,e=0,u=t.length;e<u;++e){var s=t[e];r.has(s)||(n=!0),i.add(s)}return n||r.forEach((function(t){i.has(t)||(n=!0)})),n&&(this.Cc=i,this.onChange()),n},n.prototype.contains=function(t){return this.Cc.has(t)},n.prototype.size=function(){return this.Cc.size},n.prototype.isEmpty=function(){return this.size()<=0},n.prototype.each=function(t){var n=!1;this.Cc.forEach((function(i){n||!1===t(i)&&(n=!0)}))},n.prototype.toArray=function(){var t=[];return this.Cc.forEach((function(n){t.push(n)})),t},n.prototype.onChange=function(){this.p.update(),this.emit("change",this)},n.prototype.toItemIdMap=function(t,n,i){for(var r=0,e=t.length;r<e;++r){var u=t[r];i.set(n(u),u)}},n.prototype.toItemSet=function(t,n){for(var i=0,r=t.length;i<r;++i)n.add(t[i])},n.prototype.onItemChange=function(t,n,i){var r=this.Cc,e=new Set,u=this.Ic.toId;if(u){var s=new Map;this.toItemIdMap(t,u,s),this.toItemIdMap(n,u,s),this.toItemIdMap(i,u,s),r.forEach((function(t){var n=u(t),i=s.get(n);null!=i&&e.add(i)})),this.Cc=e,this.onChange()}else{var h=new Set;this.toItemSet(t,h),this.toItemSet(n,h),this.toItemSet(i,h),r.forEach((function(t){h.has(t)&&e.add(t)})),r.size!==e.size&&(this.Cc=e,this.onChange())}},n.prototype.newItems=function(t,n,i){for(var r=0,e=t.length;r<e;++r){var u=t[r];n.has(u)&&i.add(u)}return i},n}(t.utils.EventEmitter),cd=function(t){function n(n,i,r){var e=t.call(this)||this;e.p=n;var u=null==r?void 0:r.on;if(u)for(var s in u){var h=u[s];h&&e.on(s,h)}return e}return B(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return id.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return null},enumerable:!1,configurable:!0}),n.prototype.get=function(t){return null},n.prototype.add=function(t){return!1},n.prototype.remove=function(t){return!1},n.prototype.toggle=function(t){return!1},n.prototype.clear=function(){},n.prototype.clearAndAdd=function(t){return!1},n.prototype.clearAndAddAll=function(t){return!1},n.prototype.contains=function(t){return!1},n.prototype.size=function(){return 0},n.prototype.isEmpty=function(){return!0},n.prototype.each=function(t){},n.prototype.toArray=function(){return[]},n.prototype.onChange=function(){this.p.update(),this.emit("change",this)},n.prototype.onItemChange=function(t,n,i){},n}(t.utils.EventEmitter),fd=function(t){function n(n,i,r){var e=t.call(this)||this;e.p=n,e.Ic=i,e.Ac=null;var u=null==r?void 0:r.on;if(u)for(var s in u){var h=u[s];h&&e.on(s,h)}return e}return B(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return id.SINGLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return this.Ac},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this.get(this.size()-1)},enumerable:!1,configurable:!0}),n.prototype.get=function(t){return 0===t?this.Ac:null},n.prototype.add=function(t){return this.Ac!==t&&(this.Ac=t,this.onChange(),!0)},n.prototype.remove=function(t){return this.Ac===t&&(this.Ac=null,this.onChange(),!0)},n.prototype.toggle=function(t){return this.Ac===t?this.Ac=null:this.Ac=t,this.onChange(),!0},n.prototype.clear=function(){null!=this.Ac&&(this.Ac=null,this.onChange())},n.prototype.clearAndAdd=function(t){return this.Ac!==t&&(this.Ac=t,this.onChange(),!0)},n.prototype.clearAndAddAll=function(t){var n=t.length;if(0<n){var i=t[n-1];if(this.Ac!==i)return this.Ac=i,this.onChange(),!0}else if(null!=this.Ac)return this.Ac=null,this.onChange(),!0;return!1},n.prototype.contains=function(t){return this.Ac===t},n.prototype.size=function(){return null!=this.Ac?1:0},n.prototype.isEmpty=function(){return this.size()<=0},n.prototype.each=function(t){var n=this.Ac;null!=n&&t(n)},n.prototype.toArray=function(){var t=this.Ac;return null!=t?[t]:[]},n.prototype.onChange=function(){this.p.update(),this.emit("change",this)},n.prototype.findById=function(t,n,i){for(var r=0,e=i.length;r<e;++r){var u=i[r];if(t===n(u))return u}return null},n.prototype.find=function(t,n){for(var i=0,r=n.length;i<r;++i){var e=n[i];if(t===e)return e}return null},n.prototype.onItemChange=function(t,n,i){var r=this.Ac;if(null!=r){var e=null,u=this.Ic.toId;if(u){var s=u(r);e=this.findById(s,u,t)||this.findById(s,u,n)||this.findById(s,u,i)}else e=this.find(r,t)||this.find(r,n)||this.find(r,i);r!==e&&(this.Ac=e,this.onChange())}},n}(t.utils.EventEmitter),ld=function(t){return t.image},vd=function(t){return t.title},bd=function(t){return t.url},dd=function(){function t(t){this.toLabel=(null==t?void 0:t.toLabel)||Wv,this.toTitle=(null==t?void 0:t.toTitle)||vd,this.toImage=(null==t?void 0:t.toImage)||ld,this.toId=null==t?void 0:t.toId,this.link=this.toLink(t)}return t.prototype.toLink=function(t){if(t){var n=t.link;if(n){var i=n.toUrl,r=n.target,e=n.checker;if(void 0!==i||void 0!==r||void 0!==e)return{toUrl:i||bd,target:r,checker:e}}}},t}(),gd=function(){function t(t,n){this.p=t,n?(this.Ru=n.before||[],this.Cc=n.items||[],this.yu=n.after||[]):(this.Ru=[],this.Cc=[],this.yu=[]);var i=new dd(n);this.Ic=i,this.Rc=this.toSelection(i,n),this.yc=new od(this)}return t.prototype.toSelection=function(t,n){var i=null==n?void 0:n.selection;switch(null==i?void 0:i.type){case id.NONE:case"NONE":return new cd(this,t,i);case id.MULTIPLE:case"MULTIPLE":return new ad(this,t,i);default:return new fd(this,t,i)}},Object.defineProperty(t.prototype,"before",{get:function(){return this.Ru},set:function(t){this.Ru=t,this.Rc.onItemChange(t,this.Cc,this.yu),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.Cc},set:function(t){this.Cc=t,this.Rc.onItemChange(this.Ru,t,this.yu),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.yu},set:function(t){this.yu=t,this.Rc.onItemChange(this.Ru,this.Cc,t),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapped",{get:function(){return this.yc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessor",{get:function(){return this.Ic},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this.Rc},enumerable:!1,configurable:!0}),t.prototype.update=function(t){this.p.update(t)},t.prototype.size=function(){return this.Cc.length},t.prototype.clear=function(){var t=this.Cc;return 0<t.length&&(t.length=0,this.onChange(),!0)},t.prototype.clearAndAdd=function(t){var n=this.Cc;return 1===n.length?n[0]!==t&&(n[0]=t,this.onChange(),!0):(n.length=0,n.push(t),this.onChange(),!0)},t.prototype.clearAndAddAll=function(t){var n=!1,i=this.Cc;if(0<i.length&&(i.length=0,n=!0),0<t.length){for(var r=0,e=t.length;r<e;++r)i.push(t[r]);n=!0}return!!n&&(this.onChange(),!0)},t.prototype.add=function(t,n){var i=this.Cc;return null==n?(i.push(t),this.onChange(),!0):0<=n&&n<i.length&&(i.splice(n,0,t),this.onChange(),!0)},t.prototype.addAll=function(t,n){if(0<t.length){var i=this.Cc,r=i.length;if(null==n){for(var e=0,u=t.length;e<u;++e)i.push(t[e]);return this.onChange(),!0}if(0<=n&&n<r){for(e=0,u=t.length;e<u;++e)i.splice(n+e,0,t[e]);return this.onChange(),!0}}return!1},t.prototype.get=function(t){var n=this.Cc;return 0<=t&&t<n.length?n[t]:null},t.prototype.set=function(t,n){var i=this.Cc;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.onChange(),r}return null},t.prototype.remove=function(t){var n=this.Cc;if(0<=t&&t<n.length){var i=n.splice(t,1)[0];return this.onChange(),i}return null},t.prototype.each=function(t,n,i){for(var r=this.Cc,e=r.length,u=null!=n?Math.max(0,n):0,s=null!=i?Math.min(e,i):e,h=u;h<s&&!1!==t(r[h],h);++h);},t.prototype.onChange=function(){this.update()},t}(),md=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.initReflowable=function(){},n.prototype.getType=function(){return"DContent"},n}(Zi),wd=function(t){function n(n){var i,r,e=this;(e=t.call(this,n)||this).Lc=0,e.kc=1,e.visible=!1,e.xc=-1,e.Bc=!1,e._c=null,e.Pc=null!==(r=null===(i=null==n?void 0:n.fadeOut)||void 0===i?void 0:i.delay)&&void 0!==r?r:e.theme.getFadeOutDelay(),e.Fc=!0,e.Uc=function(){e.onFadeOutTimeout()};var u=e.newThumb(null==n?void 0:n.thumb);return u.on("statechange",(function(t,n){e.onThumbStateChange(t,n)})),e.Gc=u,e.addChild(u),e}return B(n,t),Object.defineProperty(n.prototype,"thumb",{get:function(){return this.Gc},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"start",{get:function(){return this.Lc},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.kc},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r){i<1?(t=0,n=1):(t=Math.max(0,Math.min(1,t/i)),n=Math.max(t,Math.min(1,n/i))),this.Lc===t&&this.kc===n||(this.Lc=t,this.kc=n,this.onChange(r))},n.prototype.onChange=function(t){this.updateThumb(this.width,this.height),t&&(this.Fc=!0),this.Bc||(this.Bc=!0,rt.update(this))},n.prototype.isRegionVisible=function(){return 0<this.Lc||this.kc<1},n.prototype.render=function(n){if(this.Bc)if(this.Bc=!1,!this.Fc&&this.isRegionVisible()){var i=this.Pc;0<=i&&(this.xc=Date.now(),null==this._c&&(this._c=window.setTimeout(this.Uc,i))),this.visible||(this.visible=!0)}else this.Pc<0&&this.visible&&(this.visible=!1);this.Fc&&(this.Fc=!1),t.prototype.render.call(this,n)},n.prototype.onResize=function(n,i,r,e){t.prototype.onResize.call(this,n,i,r,e),this.updateThumb(n,i)},n.prototype.onFadeOutTimeout=function(){this._c=null;var t=this.Pc,n=this.Uc,i=this.state;if(i.isGesturing||i.isHovered||i.isPressed)this._c=window.setTimeout(n,t);else{var r=this.Gc.state;if(r.isGesturing||r.isHovered||r.isPressed)this._c=window.setTimeout(n,t);else{var e=t-(Date.now()-this.xc);0<e?this._c=window.setTimeout(n,e):this.visible&&(this.visible=!1,rt.update(this))}}},n.prototype.onThumbStateChange=function(t,n){t.isGesturing||t.isHovered||t.isPressed||(n.isGesturing||n.isHovered||n.isPressed)&&(this.xc=Date.now())},n.prototype.onStateChange=function(n,i){t.prototype.onStateChange.call(this,n,i),n.isGesturing||n.isHovered||n.isPressed||(i.isGesturing||i.isHovered||i.isPressed)&&(this.xc=Date.now())},n.prototype.getType=function(){return"DScrollBar"},n}(Zi),pd=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(i){var r=this;n.prototype.init.call(this,i);var e=new t.Point;this.ji=new sr({bind:this,on:{start:function(){e.copyFrom(r.position)},move:function(t,n,i){e.set(e.x+n,e.y+i),r.onGestureMove(e.x,e.y)}}})},i.prototype.getMinimumLength=function(){return this.theme.getThumbMinimumLength()},i.prototype.getType=function(){return"DScrollBarThumb"},i}(Zi),Od=function(t){function n(n){var i=t.call(this)||this;return n.snippet.add(i,!0),n.reflowable.add(i),i}return B(n,t),n.prototype.onReflow=function(t,n,i){this.clear();var r=t.state,e=t.border,u=e.getColor(r);if(null!=u){var s=e.getAlpha(r),h=e.getWidth(r),o=e.getAlign(r);this.beginFill(u,s),this.lineStyle(0,0,0,0),this.drawRect(0,o*(i-h),n,h),this.endFill(),this.visible=!0}else this.visible=!1},n}(t.Graphics),Dd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onGestureMove=function(t,n){this.emit("regionmove",t,this)},n.prototype.initReflowable=function(){new Od(this)},n}(pd),Ed=function(t){function n(n){var i=t.call(this,n)||this;return i.Gc.on("regionmove",(function(t){i.onThumbRegionMove(t)})),i}return B(n,t),n.prototype.onThumbRegionMove=function(t){var n=this.width;if(0<n){var i=this.kc-this.Lc,r=Math.min(1-i,Math.max(0,t/n));this.Lc!==r&&this.emit("regionmove",r,this)}},n.prototype.onDownThis=function(n){t.prototype.onDownThis.call(this,n);var i=this.width;if(0<i){var r=this.kc-this.Lc,e=n.data.getLocalPosition(this),u=Math.min(1-r,Math.max(0,e.x/i-.5*r));this.Lc!==u&&this.emit("regionmove",u,this)}},n.prototype.newThumb=function(t){return new Dd(t)},n.prototype.updateThumb=function(t,n){var i=this.Gc,r=Math.min(.5*t,i.getMinimumLength()),e=t-r,u=e*this.Lc,s=e*this.kc+r-u;i.position.set(u,0),i.resize(s,n)},n}(wd),Md=function(t){function n(n){var i=t.call(this)||this;return n.snippet.add(i,!0),n.reflowable.add(i),i}return B(n,t),n.prototype.onReflow=function(t,n,i){this.clear();var r=t.state,e=t.border,u=e.getColor(r);if(null!=u){var s=e.getAlpha(r),h=e.getWidth(r),o=e.getAlign(r);this.beginFill(u,s),this.lineStyle(0,0,0,0),this.drawRect(o*(n-h),0,h,i),this.endFill(),this.visible=!0}else this.visible=!1},n}(t.Graphics),Sd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onGestureMove=function(t,n){this.emit("regionmove",n,this)},n.prototype.initReflowable=function(){new Md(this)},n}(pd),jd=function(t){function n(n){var i=t.call(this,n)||this;return i.Gc.on("regionmove",(function(t){i.onThumbRegionMove(t)})),i}return B(n,t),n.prototype.onThumbRegionMove=function(t){var n=this.height;if(0<n){var i=this.kc-this.Lc,r=Math.min(1-i,Math.max(0,t/n));this.Lc!==r&&this.emit("regionmove",r,this)}},n.prototype.onDownThis=function(n){t.prototype.onDownThis.call(this,n);var i=this.height;if(0<i){var r=this.kc-this.Lc,e=n.data.getLocalPosition(this),u=Math.min(1-r,Math.max(0,e.y/i-.5*r));this.Lc!==u&&this.emit("regionmove",u,this)}},n.prototype.newThumb=function(t){return new Sd(t)},n.prototype.updateThumb=function(t,n){var i=this.Gc,r=Math.min(.5*n,i.getMinimumLength()),e=n-r,u=e*this.Lc,s=e*this.kc+r-u;i.position.set(0,u),i.resize(t,s)},n}(wd),Td=function(){function t(t,n,i){this.p=t,this.zc=i,this.q=0,this.Hc=!1,this.vertical=new jd(null==n?void 0:n.vertical),this.horizontal=new Ed(null==n?void 0:n.horizontal)}return t.prototype.lock=function(){this.q+=1,1===this.q&&(this.Hc=!1,this.Vc=void 0)},t.prototype.unlock=function(t){this.q-=1,0===this.q&&(t&&this.Hc&&this.update(this.Vc),this.Hc=!1,this.Vc=void 0)},t.prototype.update=function(t){if(0<this.q)return this.Hc=!0,void(null!=t&&(this.Vc||(this.Vc=t)));var n=this.p,i=n.width,r=n.height,e=n.content,u=-e.x,s=-e.y,h=this.vertical,o=h.width,a=this.getOffsetVerticalStart(o),c=this.getOffsetVerticalEnd(o);h.set(s,s+r,e.height,t),h.position.set(i-o,a),h.height=r-a-c;var f=this.horizontal,l=f.height,v=this.getOffsetHorizontalStart(l),b=this.getOffsetHorizontalEnd(l);f.set(u,u+i,e.width,t),f.position.set(v,r-l),f.width=i-v-b,this.zc(h.isRegionVisible()||f.isRegionVisible())},t.prototype.getOffsetHorizontalStart=function(t){return.5*t},t.prototype.getOffsetHorizontalEnd=function(t){return.5*t},t.prototype.getOffsetVerticalStart=function(t){return.5*t},t.prototype.getOffsetVerticalEnd=function(t){return.5*t},t}(),Nd=function(n){function i(t){var i,r=this,e=(r=n.call(this,t)||this).theme;(null!==(i=null==t?void 0:t.mask)&&void 0!==i?i:e.isOverflowMaskEnabled())&&(r.mask=r.getOverflowMask()),r.addChild(r.content);var u=r.scrollbar;return r.addChild(u.vertical),r.addChild(u.horizontal),u.update(),r.initGesture(e,t),r}return B(i,n),i.prototype.initGesture=function(n,i){var r,e,u=this,s=Oi(null!==(e=null===(r=null==i?void 0:i.gesture)||void 0===r?void 0:r.mode)&&void 0!==e?e:n.getGestureMode(),tr);if(s===tr.ON||s===tr.TOUCH){var h=new t.Point,o=this.content;this.ji=new sr({bind:this,touch:s===tr.TOUCH,on:{start:function(){h.copyFrom(o.position)},move:function(t,n,i){h.set(h.x+n,h.y+i),o.position.set(u.toContentX(o,h.x),u.toContentY(o,h.y))}}})}},Object.defineProperty(i.prototype,"scrollbar",{get:function(){var t,n=this.Wc;return null==n&&(n=this.newScrollBar(null===(t=this.yn)||void 0===t?void 0:t.scrollbar),this.initScrollBar(n),this.Wc=n),n},enumerable:!1,configurable:!0}),i.prototype.newScrollBar=function(t){var n=this;return new Td(this,t,(function(t){n.onScrollBarUpdate(t)}))},i.prototype.onScrollBarUpdate=function(t){var n=this.ir;if(null!=n){var i=this.content;t?i.mask!==n&&(i.mask=n,rt.update(this)):i.mask&&(i.mask=null,rt.update(this))}},i.prototype.initScrollBar=function(t){var n=this;t.vertical.on("regionmove",(function(t){n.onScrollBarMoveY(t)})),t.horizontal.on("regionmove",(function(t){n.onScrollBarMoveX(t)}))},i.prototype.onScrollBarMoveX=function(t){var n=this.ji;null!=n&&n.stop(this);var i=this.content;i.x=-i.width*t},i.prototype.onScrollBarMoveY=function(t){var n=this.ji;null!=n&&n.stop(this);var i=this.content;i.y=-i.height*t},i.prototype.getType=function(){return"DPane"},Object.defineProperty(i.prototype,"content",{get:function(){var t=this.$s;return null==t&&(t=this.toContent(this.yn),this.initContent(t),this.$s=t),t},enumerable:!1,configurable:!0}),i.prototype.toContent=function(t){var n=null==t?void 0:t.content;return n?n instanceof Zi?n:this.newContent(n):this.newContent()},i.prototype.newContent=function(t){return new md(t)},i.prototype.initContent=function(t){var n=this;t.on("move",(function(){n.onContentChange()})),t.on("resize",(function(){n.onContentChange()}))},i.prototype.getOverflowMask=function(){var t=this.ir;return null==t&&(t=new qi(this),this.ir=t,this.reflowable.add(t),this.toDirty()),t},i.prototype.onWheel=function(t,n,i){var r=this.content,e=this.getWheelContentX(r,n.deltaX*n.lowest),u=this.getWheelContentY(r,n.deltaY*n.lowest);if(r.x!==e||r.y!==u){var s=this.ji;return null!=s&&s.stop(this),r.position.set(e,u),!0}return!1},i.prototype.getWheelContentX=function(t,n){if(0<n||n<0){var i=this.theme.getWheelSpeed();return this.toContentX(t,t.x-n*i)}return t.x},i.prototype.getWheelContentY=function(t,n){if(0<n||n<0){var i=this.theme.getWheelSpeed();return this.toContentY(t,t.y+n*i)}return t.y},i.prototype.toContentX=function(t,n){return Math.min(0,Math.max(this.width-t.width,n))},i.prototype.toContentY=function(t,n){return Math.min(0,Math.max(this.height-t.height,n))},i.prototype.isRefitable=function(t){return n.prototype.isRefitable.call(this,t)&&!(t instanceof wd)},i.prototype.onResize=function(t,i,r,e){var u=this.scrollbar;u.lock(),n.prototype.onResize.call(this,t,i,r,e),u.update(),u.unlock(!0)},i.prototype.onContentChange=function(){this.scrollbar.update()},i.prototype.getFocusedChildClippingRect=function(t,n,i,r,e,u,s,h){return h.x=0,h.y=0,h.width=u,h.height=s,h},i.prototype.onChildFocus=function(r){var e=i.WORK_POINT||new t.Point;i.WORK_POINT=e;var u=this.content,s=u.x,h=u.y,o=u.width,a=u.height;e.set(0,0),r.toGlobal(e,e,!1),u.toLocal(e,void 0,e,!1);var c=s+Math.min(o,Math.max(0,e.x)),f=h+Math.min(a,Math.max(0,e.y));e.set(r.width,r.height),r.toGlobal(e,e,!0),u.toLocal(e,void 0,e,!0);var l=s+Math.min(o,Math.max(0,e.x)),v=h+Math.min(a,Math.max(0,e.y)),b=this.width,d=this.height,g=i.WORK_RECTANGLE||new t.Rectangle;i.WORK_RECTANGLE=g,this.getFocusedChildClippingRect(r,s,h,o,a,b,d,g);var m=g.x,w=g.y,p=m,O=w,D=m+g.width,E=w+g.height,M=null;c<p?l<=D&&(M=s+Math.min(p-c,D-l),M=Math.max(b-o,Math.min(0,M))):D<l&&(M=s-Math.min(c-p,l-D),M=Math.max(b-o,Math.min(0,M)));var S=null;f<O?v<=E&&(S=h+Math.min(O-f,E-v),S=Math.max(d-a,Math.min(0,S))):E<v&&(S=h-Math.min(f-O,v-E),S=Math.max(d-a,Math.min(0,S)));var j=u.position;null!=M?null!=S?j.set(M,S):j.x=M:null!=S&&(j.y=S),n.prototype.onChildFocus.call(this,r)},i.prototype.destroy=function(){var t=this.ir;null!=t&&(this.ir=null,t.destroy()),this.mask=null,n.prototype.destroy.call(this)},i}(Zi),Id=function(t){function n(n){var i=t.call(this,n)||this;return i.update(),i}return B(n,t),Object.defineProperty(n.prototype,"updater",{get:function(){var t=this.Xc;return null==t&&(t=this.newUpdater(this.data,this.content,this.yn),this.Xc=t),t},enumerable:!1,configurable:!0}),n.prototype.newUpdater=function(t,n,i){return new sd(t,n,n,null==i?void 0:i.updater)},Object.defineProperty(n.prototype,"data",{get:function(){var t=this.Bt;return null==t&&(t=this.toData(this.yn),this.Bt=t),t},enumerable:!1,configurable:!0}),n.prototype.toData=function(t){var n=t&&(t.data||t.items),i=null==t?void 0:t.selection;return null==n?i?new gd(this,{selection:i}):new gd(this):Ct(n)?new gd(this,i?{items:n,selection:i}:{items:n}):"each"in n?n:i?(void 0===n.selection&&(n.selection=i),new gd(this,n)):new gd(this,n)},n.prototype.onContentChange=function(){t.prototype.onContentChange.call(this),this.update()},n.prototype.onResize=function(n,i,r,e){var u=this.updater;u.lock(),t.prototype.onResize.call(this,n,i,r,e),u.update(),u.unlock(!0)},Object.defineProperty(n.prototype,"selection",{get:function(){return this.data.selection},enumerable:!1,configurable:!0}),n.prototype.lock=function(){this.updater.lock()},n.prototype.unlock=function(t){this.updater.unlock(t)},n.prototype.update=function(t){this.updater.update(t)},n.prototype.onKeyDown=function(n){return this.updater.moveFocus(n,this,!0,!0),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DList"},n}(Nd),Cd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newUpdater=function(t,n,i){return new hd(t,n,n,null==i?void 0:i.updater)},n.prototype.getType=function(){return"DDialogSelectList"},n}(Id),Ad=function(t){function n(n){var i=t.call(this)||this;return i.Yc=n||function(t){return Promise.resolve([])},i.R=0,i.Kc=0,i.Jc=null,i}return B(n,t),n.prototype.create=function(t){var n=this,i=++this.R;this.Yc(t[0]).then((function(t){n.R===i&&(n.Kc=i,n.Jc=t,n.emit("success",n,t),n.emit("change",n))}),(function(){n.R===i&&(n.Kc=i,n.Jc=null,n.emit("fail",n),n.emit("change",n))})),this.emit("change",this)},n.prototype.isDone=function(){return this.R===this.Kc},n.prototype.getResult=function(){return this.Jc},n}(t.utils.EventEmitter),Rd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DInputSearch"},n}(qs),yd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DNote"},n}(Ms),Ld=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DNoteSmall"},n}(yd),kd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DNoteSmallError"},n}(Ld),xd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DNoteSmallNoItemsFound"},n}(Ld),Bd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DNoteSmallSearching"},n}(Ld),_d=function(t){function n(n){var i=t.call(this,n)||this;i.At=null;var r=i.search;r.on("success",(function(t,n){i.onSearched(n)})),r.on("fail",(function(){i.onSearched([])}));var e=new eb;return r.on("change",(function(){if(r.isDone()){var t=r.getResult();null!=t?0<t.length?e.hide():e.show(i.noteNoItemsFound):e.show(i.noteError)}else{var n=i.noteSearching;n&&e.show(n)}})),i}return B(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.inputLayout,this.list),r},Object.defineProperty(n.prototype,"inputLayout",{get:function(){var t=this.nh;return null==t&&(t=this.newInputLayout(this.input,this.theme,this.yn),this.nh=t),t},enumerable:!1,configurable:!0}),n.prototype.newInputLayout=function(t,n,i){return new Ns(this.toInputLayoutOptions(t,n,i))},n.prototype.toInputLayoutOptions=function(t,n,i){var r=this.toInputMargin(n,i);return{width:"padding",height:"auto",children:[new Xu({width:r}),t,new Xu({width:r})]}},Object.defineProperty(n.prototype,"input",{get:function(){var t=this.ih;return null==t&&(t=this.newInput(),this.ih=t),t},enumerable:!1,configurable:!0}),n.prototype.newInput=function(){var t=this,n=new Rd(this.toInputOptions(this.theme,this.yn));return n.on("input",(function(n){t.search.create([n])})),n},n.prototype.toInputOptions=function(t,n){var i=(null==n?void 0:n.input)||{};return void 0===i.width&&void 0===i.weight&&(i.weight=1),i},n.prototype.toInputMargin=function(t,n){var i,r;return null!==(r=null===(i=null==n?void 0:n.input)||void 0===i?void 0:i.margin)&&void 0!==r?r:t.getInputMargin()},Object.defineProperty(n.prototype,"list",{get:function(){var t=this.Cn;return null==t&&(t=this.newList(),this.Cn=t),t},enumerable:!1,configurable:!0}),n.prototype.newList=function(){var t=this,n=new Cd(this.toListOptions(this.theme,this.yn));return n.selection.on("change",(function(n){var i=n.first;null!=i&&(t.At=i,t.onOk(i))})),n},n.prototype.toListOptions=function(t,n){var i=(null==n?void 0:n.list)||{};return void 0===i.width&&(i.width="padding"),i},Object.defineProperty(n.prototype,"noteError",{get:function(){var t=this.Zc;return null==t&&(t=this.newNoteError(),this.Zc=t),t},enumerable:!1,configurable:!0}),n.prototype.newNoteError=function(){var t,n,i=null===(n=null===(t=this.yn)||void 0===t?void 0:t.note)||void 0===n?void 0:n.error;return null!==i?new kd(this.toNoteOptions(this.list,i)):null},Object.defineProperty(n.prototype,"noteNoItemsFound",{get:function(){var t=this.qc;return null==t&&(t=this.newNoteNoItemsFound(),this.qc=t),t},enumerable:!1,configurable:!0}),n.prototype.newNoteNoItemsFound=function(){var t,n,i=null===(n=null===(t=this.yn)||void 0===t?void 0:t.note)||void 0===n?void 0:n.noItemsFound;return null!==i?new xd(this.toNoteOptions(this.list,i)):null},Object.defineProperty(n.prototype,"noteSearching",{get:function(){var t=this.Qc;return null==t&&(t=this.newNoteSearching(),this.Qc=t),t},enumerable:!1,configurable:!0}),n.prototype.newNoteSearching=function(){var t,n,i=null===(n=null===(t=this.yn)||void 0===t?void 0:t.note)||void 0===n?void 0:n.searching;return null!=i?new Bd(this.toNoteOptions(this.list,i)):null},n.prototype.toNoteOptions=function(t,n){return null!=n?(null==n.parent&&(n.parent=t),null==n.visible&&(n.visible=!1),n):{parent:t,visible:!1}},Object.defineProperty(n.prototype,"search",{get:function(){var t=this.Yc;return null==t&&(t=this.newSearch(),this.Yc=t),t},enumerable:!1,configurable:!0}),n.prototype.newSearch=function(){var t=this.yn;if(t){var n=t.controller;if(n){var i=n.search;return"create"in i?i:new Ad(i)}}return new Ad},Object.defineProperty(n.prototype,"value",{get:function(){return this.At},enumerable:!1,configurable:!0}),n.prototype.onSearched=function(t){this.list.data.items=t},n.prototype.getResolvedValue=function(){return this.At},n.prototype.getType=function(){return"DDialogSelect"},n.prototype.onOpen=function(){t.prototype.onOpen.call(this),this.list.selection.clear(),this.search.create([this.input.value])},n.prototype.onOk=function(n){this.emit("select",n,this),t.prototype.onOk.call(this,n)},n.prototype.destroy=function(){var n=this.ih;n&&n.destroy();var i=this.Zc;i&&i.destroy();var r=this.qc;r&&(null==r||r.destroy());var e=this.Qc;e&&(null==e||e.destroy());var u=this.Cn;u&&u.destroy(),t.prototype.destroy.call(this)},n}(ys),Pd=function(t){return t.value},Fd=function(){},Ud=function(t){function n(n){var i,r,e=this;return(e=t.call(this,function(t){var n,i,r;if(t){var e,u=null===(n=t.text)||void 0===n?void 0:n.formatter;if(void 0!==u){if(!(e=t.dialog)||!("open"in e)){var s=(e=e||{}).item=e.item||{};void 0===(o=s.text=s.text||{}).formatter&&(o.formatter=u)}}else if(!(e=t.dialog)||!("open"in e)){var h=null===(r=null===(i=null==e?void 0:e.item)||void 0===i?void 0:i.text)||void 0===r?void 0:r.formatter;if(void 0!==h){var o=t.text||{};t.text=o,void 0===o.formatter&&(o.formatter=h)}}}return t}(n))||this).$c=null!==(i=null==n?void 0:n.getter)&&void 0!==i?i:Pd,e.tf=null!==(r=null==n?void 0:n.setter)&&void 0!==r?r:Fd,e}return B(n,t),n.prototype.onActivate=function(n){var i,r=this;t.prototype.onActivate.call(this,n);var e=this.dialog,u=null!==(i=this.Ps)&&void 0!==i?i:null;this.tf(e,u),e.open(this).then((function(){var t=r.$c(e);t!==u&&(r.text=t,r.emit("change",t,u,r))}))},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,n=this.vc;if(null==n){var i=null===(t=this.yn)||void 0===t?void 0:t.dialog;n=i&&"open"in i?i:new _d(i),this.vc=n}return n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.Ps)&&void 0!==t?t:null},set:function(t){this.text=t},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DButtonSelect"},n}(js),Gd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onActivate=function(n){var i,r,e=this;t.prototype.onActivate.call(this,n);var u=null!==(r=null===(i=this.Ps)||void 0===i?void 0:i.getTime())&&void 0!==r?r:Date.now(),s=this.dialog;s.current=new Date(u),s.new=new Date(u),s.open(this).then((function(){e.onValueChange(s.new,s.current)}))},n.prototype.onValueChange=function(t,n){this.text=new Date(t.getTime()),this.emit("change",t,n,this)},n.prototype.getDatetimeMask=function(){var t,n,i=this.bc;return null==i&&(i=Yb.toMask(null===(n=null===(t=this.yn)||void 0===t?void 0:t.dialog)||void 0===n?void 0:n.picker),this.bc=i),i},Object.defineProperty(n.prototype,"dialog",{get:function(){var t,i=this.vc;if(null==i){var r=null===(t=this.yn)||void 0===t?void 0:t.dialog;r?i=this.newDialog(r):(null==n.DIALOG&&(n.DIALOG=this.newDialog({mode:"MENU",sticky:!0})),i=n.DIALOG),this.vc=i}return i},enumerable:!1,configurable:!0}),n.prototype.newDialog=function(t){return new Dh(t)},Object.defineProperty(n.prototype,"value",{get:function(){var t;return null!==(t=this.Ps)&&void 0!==t?t:new Date},set:function(t){var n=this.Ps;void 0!==n&&n.getTime()===t.getTime()||(this.text=t)},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DButtonTime"},n}(js),zd=function(t){function n(n){var i=t.call(this,n)||this,r=i.state,e=wb.getCommandController();return r.isDisabled=!e.isUndoable(),e.on("change",(function(){r.isDisabled=!e.isUndoable()})),i}return B(n,t),n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),wb.getCommandController().undo()},n}(js),Hd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DCanvas"},n}(Zi),Vd={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},Wd={INSIDE:0,OUTSIDE:1},Xd=function(){function t(t,n){var i,r;this.nf=null!==(i=null==n?void 0:n.coordinate)&&void 0!==i?i:0,this._=this.toPosition(t,n),this.if=this.toTickContainer(t,n),this.Eh=this.toLabel(t,n),this.Gn=null!==(r=null==n?void 0:n.padding)&&void 0!==r?r:t.getPadding(),this.rf=this.toBar(t,n)}return Object.defineProperty(t.prototype,"coordinateIndex",{get:function(){return this.nf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bar",{get:function(){return this.rf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tick",{get:function(){return this.if},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.Eh},enumerable:!1,configurable:!0}),t.prototype.toPosition=function(t,n){var i=null==n?void 0:n.position;return at(i)?Vd[i]:null!=i?i:t.getPosition()},t.prototype.toBar=function(t,n){var i;return{style:null!==(i=null==n?void 0:n.style)&&void 0!==i?i:t.getStyle(),stroke:this.toBarStroke(t,null==n?void 0:n.stroke),shape:void 0}},t.prototype.toTickContainer=function(t,n){var i,r=null==n?void 0:n.tick;return{enable:null!==(i=null==r?void 0:r.enable)&&void 0!==i?i:t.getTickEnable(),major:this.toTickMajor(t,r),minor:this.toMinorTick(t,r)}},t.prototype.toTickMajor=function(t,n){var i,r,e,u,s,h,o,a=null==n?void 0:n.major,c=null!==(r=null!==(i=null==a?void 0:a.position)&&void 0!==i?i:null==n?void 0:n.position)&&void 0!==r?r:t.getMajorTickPosition(),f=null==n?void 0:n.style,l=Ev.from(null!==(u=null!==(e=null==a?void 0:a.style)&&void 0!==e?e:f)&&void 0!==u?u:t.getMajorTickStyle()),v=null==n?void 0:n.stroke,b=this.toTickMajorStroke(t,null==a?void 0:a.stroke,v);return{count:null!==(s=null==a?void 0:a.count)&&void 0!==s?s:t.getMajorTickCount(),step:null!==(h=null==a?void 0:a.step)&&void 0!==h?h:t.getMajorTickStep(),size:null!==(o=null==a?void 0:a.size)&&void 0!==o?o:t.getMajorTickSize(),position:this.toTickPosition(c),style:l,stroke:b,text:this.toMajorTickText(t,null==a?void 0:a.text),formatter:this.toMajorTickFormatter(t,a),shapes:void 0,gridline:this.toTickMajorGridline(t,null==a?void 0:a.gridline,f,v)}},t.prototype.toTickMajorGridline=function(t,n,i,r){var e,u,s,h=Ev.from(null!==(u=null!==(e=null==n?void 0:n.style)&&void 0!==e?e:i)&&void 0!==u?u:t.getMajorTickGridlineStyle());return{enable:null!==(s=null==n?void 0:n.enable)&&void 0!==s?s:t.getMajorTickGridlineEnable(),style:h,stroke:this.toTickMajorGridlineStroke(t,null==n?void 0:n.stroke,r),shapes:void 0}},t.prototype.toTickPosition=function(t){var n=this._;if(t===Wd.OUTSIDE||"OUTSIDE"===t)switch(n){case Vd.TOP:return $.BOTTOM;case Vd.BOTTOM:return $.TOP;case Vd.LEFT:return $.RIGHT;case Vd.RIGHT:return $.LEFT;default:return $.TOP}else switch(n){case Vd.TOP:return $.TOP;case Vd.BOTTOM:return $.BOTTOM;case Vd.LEFT:return $.LEFT;case Vd.RIGHT:return $.RIGHT;default:return $.TOP}},t.prototype.toMinorTick=function(t,n){var i,r,e,u,s,h,o,a=null==n?void 0:n.minor,c=null!==(r=null!==(i=null==a?void 0:a.position)&&void 0!==i?i:null==n?void 0:n.position)&&void 0!==r?r:t.getMinorTickPosition(),f=Ev.from(null!==(u=null!==(e=null==a?void 0:a.style)&&void 0!==e?e:null==n?void 0:n.style)&&void 0!==u?u:t.getMinorTickStyle());return{count:null!==(s=null==a?void 0:a.count)&&void 0!==s?s:t.getMinorTickCount(),step:null!==(h=null==a?void 0:a.step)&&void 0!==h?h:t.getMinorTickStep(),size:null!==(o=null==a?void 0:a.size)&&void 0!==o?o:t.getMinorTickSize(),position:this.toTickPosition(c),style:f,stroke:this.toTickMinorStroke(t,null==a?void 0:a.stroke,null==n?void 0:n.stroke),shapes:void 0}},t.prototype.toBarStroke=function(t,n){return this.toStroke(n,void 0,t.getStrokeEnable(),t.getStrokeColor(),t.getStrokeAlpha(),t.getStrokeWidth(),t.getStrokeAlign(),t.getStrokeSide(),t.getStrokeStyle())},t.prototype.toTickMajorStroke=function(t,n,i){return this.toStroke(n,i,t.getMajorTickStrokeEnable(),t.getMajorTickStrokeColor(),t.getMajorTickStrokeAlpha(),t.getMajorTickStrokeWidth(),t.getMajorTickStrokeAlign(),t.getMajorTickStrokeSide(),t.getMajorTickStrokeStyle())},t.prototype.toTickMajorGridlineStroke=function(t,n,i){return this.toStroke(n,i,t.getMajorTickGridlineStrokeEnable(),t.getMajorTickGridlineStrokeColor(),t.getMajorTickGridlineStrokeAlpha(),t.getMajorTickGridlineStrokeWidth(),t.getMajorTickGridlineStrokeAlign(),t.getMajorTickGridlineStrokeSide(),t.getMajorTickGridlineStrokeStyle())},t.prototype.toTickMinorStroke=function(t,n,i){return this.toStroke(n,i,t.getMinorTickStrokeEnable(),t.getMinorTickStrokeColor(),t.getMinorTickStrokeAlpha(),t.getMinorTickStrokeWidth(),t.getMinorTickStrokeAlign(),t.getMinorTickStrokeSide(),t.getMinorTickStrokeStyle())},t.prototype.toStroke=function(t,n,i,r,e,u,s,h,o){var a,c,f,l,v,b,d,g,m,w,p,O,D,E,M,S,j,T,N,I,C,A,R,y,L,k,x,B;return t?n?{enable:null!==(c=null!==(a=t.enable)&&void 0!==a?a:n.enable)&&void 0!==c?c:i,color:null!==(l=null!==(f=t.color)&&void 0!==f?f:n.color)&&void 0!==l?l:r,alpha:null!==(b=null!==(v=t.alpha)&&void 0!==v?v:n.alpha)&&void 0!==b?b:e,width:null!==(g=null!==(d=t.width)&&void 0!==d?d:n.width)&&void 0!==g?g:u,align:null!==(w=null!==(m=t.align)&&void 0!==m?m:n.align)&&void 0!==w?w:s,side:null!==(O=null!==(p=t.side)&&void 0!==p?p:n.side)&&void 0!==O?O:h,style:null!==(E=null!==(D=t.style)&&void 0!==D?D:n.style)&&void 0!==E?E:o}:{enable:null!==(M=t.enable)&&void 0!==M?M:i,color:null!==(S=t.color)&&void 0!==S?S:r,alpha:null!==(j=t.alpha)&&void 0!==j?j:e,width:null!==(T=t.width)&&void 0!==T?T:u,align:null!==(N=t.align)&&void 0!==N?N:s,side:null!==(I=t.side)&&void 0!==I?I:h,style:null!==(C=t.style)&&void 0!==C?C:o}:n?{enable:null!==(A=n.enable)&&void 0!==A?A:i,color:null!==(R=n.color)&&void 0!==R?R:r,alpha:null!==(y=n.alpha)&&void 0!==y?y:e,width:null!==(L=n.width)&&void 0!==L?L:u,align:null!==(k=n.align)&&void 0!==k?k:s,side:null!==(x=n.side)&&void 0!==x?x:h,style:null!==(B=n.style)&&void 0!==B?B:o}:{enable:i,color:r,alpha:e,width:u,align:s,side:h,style:o}},t.prototype.toMajorTickFormatter=function(t,n){var i=null==n?void 0:n.text;if(i){var r=i.format;if(null!=r)return vi.create(r);var e=i.formatter;if(e)return{format:e}}return vi.create(t.getMajorTickTextFormat())},t.prototype.toMajorTickText=function(t,n){return{format:(n=n||{}).format,color:this.toMajorTickTextColor(t,n.color),alpha:n.alpha,family:n.family,size:n.size,weight:n.weight,align:this.toMajorTickTextAlign(t,n.align),offset:this.toMajorTickTextOffset(t,n.offset),style:n.style,outline:this.toMajorTickTextOutline(t,n.outline),spacing:this.toMajorTickTextSpacing(t,n.spacing),direction:this.toTickMajorTextDirection(t,n.direction),padding:this.toMajorTickTextPadding(t,n.padding),clipping:n.clipping}},t.prototype.toMajorTickTextOutline=function(t,n){if(n)return{enable:n.enable,color:n.color,alpha:n.alpha,width:n.width}},t.prototype.toMajorTickTextAlign=function(t,n){var i,r,e=this._;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getMajorTickTextAlignHorizontal(e),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getMajorTickTextAlignVertical(e)}},t.prototype.toMajorTickTextOffset=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toMajorTickTextSpacing=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toMajorTickTextPadding=function(t,n){var i,r;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getMajorTickTextPaddingHorizontal(),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getMajorTickTextPaddingVertical()}},t.prototype.toTickMajorTextDirection=function(t,n){return null!=n?n:t.getMajorTickTextDirection()},t.prototype.toMajorTickTextColor=function(t,n){return null!=n?n:t.getMajorTickTextColor()},t.prototype.toLabel=function(t,n){var i=null==n?void 0:n.label;if(i)return{value:i.value,color:this.toLabelColor(t,i.color),alpha:i.alpha,family:i.family,size:i.size,weight:i.weight,align:this.toLabelAlign(t,i.align),offset:this.toLabelOffset(t,i.offset),style:i.style,outline:this.toLabelOutline(t,i.outline),spacing:this.toLabelSpacing(t,i.spacing),direction:this.toLabelDirection(t,i.direction),padding:this.toLabelPadding(t,i.padding),clipping:i.clipping}},t.prototype.toLabelOutline=function(t,n){if(n)return{enable:n.enable,color:n.color,alpha:n.alpha,width:n.width}},t.prototype.toLabelAlign=function(t,n){var i,r,e=this._;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getLabelAlignHorizontal(e),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getLabelAlignVertical(e)}},t.prototype.toLabelOffset=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toLabelSpacing=function(t,n){if(n)return{horizontal:n.horizontal,vertical:n.vertical}},t.prototype.toLabelPadding=function(t,n){var i,r;return{horizontal:null!==(i=null==n?void 0:n.horizontal)&&void 0!==i?i:t.getLabelPaddingHorizontal(),vertical:null!==(r=null==n?void 0:n.vertical)&&void 0!==r?r:t.getLabelPaddingVertical()}},t.prototype.toLabelDirection=function(t,n){return null!=n?n:t.getLabelDirection()},t.prototype.toLabelColor=function(t,n){return null!=n?n:t.getLabelColor()},t}(),Yd=function(){function t(t){var n=this.toTheme(t);this.qt=n,this.Ve=0;var i=new Xd(n,t);this.nf=i.coordinateIndex,this.Gn=i.padding,this._=i.position;var r=i.tick;this.if=r,this.Eh=i.label,this.rf=i.bar;var e=r.major.count,u=r.minor.count;this.ef=new Float64Array(3*e),this.uf=new Float64Array((e+1)*u*3)}return Object.defineProperty(t.prototype,"position",{get:function(){return this._},enumerable:!1,configurable:!0}),t.prototype.updateBar=function(t){var n=this.rf.shape;if(n){var i=t.plotArea,r=i.width,e=i.height,u=this.Gn*this.Ve;n.disallowUploadedUpdate();var s=n.transform.position,h=n.size;switch(this._){case Vd.TOP:s.set(.5*r,0-u),h.set(r,0);break;case Vd.BOTTOM:s.set(.5*r,e+u),h.set(r,0);break;case Vd.LEFT:s.set(0-u,.5*e),h.set(0,e);break;case Vd.RIGHT:s.set(r+u,.5*e),h.set(0,e)}n.allowUploadedUpdate()}},t.prototype.updateTicksX=function(t,n,i,r,e,u,s,h,o){var a=this.if,c=a.major,f=c.count,l=c.step,v=c.formatter,b=a.minor,d=b.count,g=(f+1)*d,m=b.step,w=this.ef,p=this.uf;i.ticks(t,n,f,l,d,g,m,w,p);for(var O=h.a,D=h.tx,E=0;E<f;++E){var M=r[E],S=3*E,j=w[S+0];if(Eh(j))M.visible=!1,u&&(u[E].visible=!1);else{var T=O*w[S+1]+D,N=w[S+2];if(M.disallowUploadedUpdate(),M.visible=!0,M.transform.position.set(T,s),M.text.value=v.format(j,N),M.allowUploadedUpdate(),u){var I=u[E];I.disallowUploadedUpdate(),I.visible=!0,I.transform.position.set(T,.5*o),I.size.set(0,o),I.allowUploadedUpdate()}}}for(E=0;E<g;++E){var C=e[E],A=3*E,R=p[A+0],y=p[A+1];Eh(R)?C.visible=!1:(C.disallowUploadedUpdate(),C.visible=!0,C.transform.position.set(O*y+D,s),C.allowUploadedUpdate())}},t.prototype.updateTicksY=function(t,n,i,r,e,u,s,h,o){var a=this.if,c=a.major,f=c.count,l=c.step,v=c.formatter,b=a.minor,d=b.count,g=(f+1)*d,m=b.step,w=this.ef,p=this.uf;i.ticks(t,n,f,l,d,g,m,w,p);for(var O=h.d,D=h.ty,E=0;E<f;++E){var M=r[E],S=3*E,j=w[S+0];if(Eh(j))M.visible=!1,u&&(u[E].visible=!1);else{var T=O*w[S+1]+D,N=w[S+2];if(M.disallowUploadedUpdate(),M.visible=!0,M.transform.position.set(s,T),M.text.value=v.format(j,N),M.allowUploadedUpdate(),u){var I=u[E];I.disallowUploadedUpdate(),I.visible=!0,I.transform.position.set(.5*o,T),I.size.set(o,0),I.allowUploadedUpdate()}}}for(E=0;E<g;++E){var C=e[E],A=3*E,R=p[A+0],y=p[A+1];Eh(R)?C.visible=!1:(C.disallowUploadedUpdate(),C.visible=!0,C.transform.position.set(s,O*y+D),C.allowUploadedUpdate())}},t.prototype.updateTicks=function(t){var n=this.if,i=n.major.shapes,r=n.minor.shapes;if(i&&r){var e=t.plotArea,u=e.getBoundsInContainer(),s=e.container.transform.localTransform,h=n.major.gridline.shapes,o=this.nf,a=this.Gn*this.Ve,c=void 0;switch(this._){case Vd.TOP:if(c=e.coordinate.x.get(o)){var f=c.unmap(c.transform.unmap(u.x)),l=c.unmap(c.transform.unmap(u.x+u.width)),v=e.height;this.updateTicksX(f,l,c,i,r,h,0-a,s,v)}break;case Vd.BOTTOM:(c=e.coordinate.x.get(o))&&(f=c.unmap(c.transform.unmap(u.x)),l=c.unmap(c.transform.unmap(u.x+u.width)),v=e.height,this.updateTicksX(f,l,c,i,r,h,v+a,s,v));break;case Vd.LEFT:if(c=e.coordinate.y.get(o)){f=c.unmap(c.transform.unmap(u.y)),l=c.unmap(c.transform.unmap(u.y+u.height));var b=e.width;this.updateTicksY(f,l,c,i,r,h,0-a,s,b)}break;case Vd.RIGHT:(c=e.coordinate.y.get(o))&&(f=c.unmap(c.transform.unmap(u.y)),l=c.unmap(c.transform.unmap(u.y+u.height)),b=e.width,this.updateTicksY(f,l,c,i,r,h,b+a,s,b))}}},t.prototype.bind=function(t,n){this.Sc=t,this.Ve=n;var i=t.container,r=this.rf,e=r.shape;if(!e){var u=(f=this._)===Vd.LEFT||f===Vd.RIGHT?$.TOP:$.LEFT,s=r.style||U.NONE;(e=new Vt).points.position=u,e.points.style=s,e.stroke.copy(r.stroke),e.text.copy(this.Eh),this.rf.shape=e}e.attach(t.container);var h=this.if,o=h.major,a=o.gridline,c=a.shapes;if(!c&&h.enable&&a.enable){c=[],a.shapes=c;for(var f,l=(f=this._)===Vd.LEFT||f===Vd.RIGHT?$.LEFT:$.TOP,v=o.count,b=a.style||U.NONE,d=0;d<v;++d){var g=new Vt;g.points.position=l,g.points.style=b,g.stroke.copy(a.stroke),c.push(g)}}if(c){d=0;for(var m=c.length;d<m;++d)c[d].attach(i)}var w=o.shapes;if(!w&&h.enable){w=[],o.shapes=w;var p=o.count,O=o.size,D=o.position,E=o.style||U.NONE;for(d=0;d<p;++d){var M=new Vt;M.points.position=D,M.points.size=O,M.points.style=E,M.stroke.copy(o.stroke),M.text.copy(o.text),M.size.set(0,0),w.push(M)}}if(w)for(d=0,m=w.length;d<m;++d)w[d].attach(i);var S=h.minor,j=S.shapes;if(!j&&h.enable){j=[],S.shapes=j;var T=S.count,N=S.size,I=S.position,C=S.style||U.NONE;for(d=0,m=(o.count+1)*T;d<m;++d){var A=new Vt;A.points.position=I,A.points.size=N,A.points.style=C,A.stroke.copy(S.stroke),A.size.set(0,0),j.push(A)}}if(j)for(d=0,m=j.length;d<m;++d)j[d].attach(i)},t.prototype.unbind=function(){var t=this.rf.shape;t&&t.detach();var n=this.if,i=n.major.shapes;if(i)for(var r=0,e=i.length;r<e;++r)i[r].detach();var u=n.major.gridline.shapes;if(u)for(r=0,e=u.length;r<e;++r)u[r].detach();var s=n.minor.shapes;if(s)for(r=0,e=s.length;r<e;++r)s[r].detach();this.Sc=void 0},t.prototype.update=function(){var t=this.Sc;t&&(this.updateBar(t),this.updateTicks(t))},t.prototype.destroy=function(){var t=this.rf.shape;t&&t.destroy();var n=this.if,i=n.major.shapes;if(i)for(var r=0,e=i.length;r<e;++r)i[r].destroy();var u=n.major.gridline.shapes;if(u)for(r=0,e=u.length;r<e;++r)u[r].destroy();var s=n.minor.shapes;if(s)for(r=0,e=s.length;r<e;++r)s[r].destroy();this.Sc=void 0},t.prototype.toTheme=function(t){return t&&t.theme||this.getThemeDefault()},t.prototype.getThemeDefault=function(){return Y.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartAxisBase"},t}(),Kd=function(){function t(t,n){this.sf=t,this.Sc=new xe,this.Cn=new Map;var i=n&&n.list;if(i)for(var r=0,e=i.length;r<e;++r)this.add(i[r])}return Object.defineProperty(t.prototype,"container",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.sf},enumerable:!1,configurable:!0}),t.prototype.add=function(t){var n=this.Cn,i=n.get(t.position);null==i&&(i=[],n.set(t.position,i)),i.push(t),t.bind(this,i.length-1)},t.prototype.get=function(t,n){var i=this.Cn.get(t);return i&&0<=n&&n<i.length?i[n]:null},t.prototype.indexOf=function(t){var n=this.Cn.get(t.position);return n?n.indexOf(t):-1},t.prototype.clear=function(t){var n=this.Cn.get(t);if(n){for(var i=0,r=n.length;i<r;++i)n[i].destroy();n.length=0}return this},t.prototype.size=function(t){var n=this.Cn.get(t);return n?n.length:0},t.prototype.update=function(){this.Cn.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].update()}))},t.prototype.destroy=function(){this.Cn.forEach((function(t){for(var n=0,i=t.length;n<i;++n)t[n].destroy();t.length=0}))},t}(),Jd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DChartAxisX"},n}(Yd),Zd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DChartAxisXDatetime"},n}(Jd),qd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DChartAxisY"},n}(Yd),Qd=[1095651,16667680,15778578,1858929],$d=[Qd[0],Jt.brighten(Qd[0],.4),Qd[1],Jt.brighten(Qd[1],.4),Qd[2],Jt.brighten(Qd[2],.4),Qd[3],Jt.brighten(Qd[3],.4)],tg=function(t){return $d[t%$d.length]},ng={X:0,Y:1},ig=function(){function t(t,n){this.Sc=t,this.Xt=n,this.Cn=[]}return Object.defineProperty(t.prototype,"container",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),t.prototype.add=function(t,n){var i=this.Cn;return null==n?i.push(t):0<=n&&n<i.length?i.splice(n,0,t):i.push(t),t.bind(this,this.Xt),this},t.prototype.get=function(t){var n=this.Cn;return 0<=t&&t<n.length?n[t]:null},t.prototype.indexOf=function(t){return this.Cn.indexOf(t)},t.prototype.remove=function(t){var n=this.Cn;if(gn(t)){if(0<=(r=t)&&r<n.length){var i=n.splice(r,1)[0];return i.unbind(),i}}else{var r,e=t;if(0<=(r=n.indexOf(e)))return n.splice(r,1),e.unbind(),e}return null},t.prototype.clear=function(){for(var t=this.Cn,n=0,i=t.length;n<i;++n)t[n].unbind();return t.length=0,this},t.prototype.destroy=function(){return this.clear()},t.prototype.size=function(){return this.Cn.length},t.prototype.fit=function(t,n){for(var i=this.Cn,r=0,e=i.length;r<e;++r)i[r].fit(t,n);return this},t.prototype.mark=function(t,n){for(var i=this.Cn,r=0,e=i.length;r<e;++r)i[r].mark(t,n);return this},t.prototype.blend=function(t){for(var n=this.Cn,i=0,r=n.length;i<r;++i)n[i].blend(t);return this},t}(),rg=function(){function t(t,n){this.sf=t;var i=new ig(this,ng.X);this._x=i;var r=new ig(this,ng.Y);if(this._y=r,n){var e=n.x;if(e)if(Ct(e))for(var u=0,s=e.length;u<s;++u)i.add(e[u]);else i.add(e);var h=n.y;if(h)if(Ct(h))for(u=0,s=h.length;u<s;++u)r.add(h[u]);else r.add(h)}}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.sf},enumerable:!1,configurable:!0}),t.prototype.fit=function(t,n,i,r){return this._x.fit(t,n),this._y.fit(i,r),this},t.prototype.mark=function(t,n,i,r){return this._x.mark(t,n),this._y.mark(i,r),this},t.prototype.blend=function(t){return this._x.blend(t),this._y.blend(t),this},t}(),eg=function(){function t(t){this.qt=this.toTheme(t)}return t.prototype.toMajorStep=function(t,n,i,r){return null==r?0<i?this.calcStepMajor(t,n,i):-1:gn(r)?r:r(t,n,i)},t.prototype.calcStepMajor=function(t,n,i){var r=Math.abs(n-t)/i,e=Math.floor(Math.log(r)/Math.LN10),u=Math.pow(10,e);return this.qt.toStepScale(r/u)*u},t.prototype.toMinorStep=function(t,n,i){return null==i?0<=t?this.calcStepMinor(t,n):-1:gn(i)?i:i(t,n)},t.prototype.calcStepMinor=function(t,n){return t/(n+1)},t.prototype.calcTickMinorPositions=function(t,n,i,r,e,u,s){for(var h=0;h<n;h+=1){var o=i+(h+1)*t;r<=o&&o<=e&&(s[u++]=o)}},t.prototype.calculate=function(t,n,i,r,e,u,s,h,o,a){if(!(i<=0)){var c=a.transform,f=Math.min(t,n),l=Math.max(t,n),v=this.toMajorStep(f,l,i,r);if(v<=0){h[0]=f,h[1]=c.map(a.map(f)),h[2]=0;for(var b=1;b<i;++b)h[0+(C=3*b)]=NaN,h[C+1]=NaN,h[C+2]=NaN;for(b=0;b<u;++b)o[0+(A=3*b)]=NaN,o[A+1]=NaN,o[A+2]=NaN}else{var d=Math.floor(f/v)-1,g=Math.ceil(l/v)+1,m=c.map(a.map(f)),w=c.map(a.map(l)),p=Math.min(m,w)-.5,O=Math.max(m,w)+.5,D=this.toMinorStep(v,e,s),E=0,M=0;for(b=d;b<=g;++b){var S=b*v;if(E<i){var j=c.map(a.map(S));p<=j&&j<=O&&(h[0+(C=3*E)]=S,h[C+1]=j,h[C+2]=v,E+=1)}for(var T=0;T<e;T+=1)if(M<u){var N=S+(T+1)*D,I=c.map(a.map(N));p<=I&&I<=O&&(o[0+(A=3*M)]=N,o[A+1]=I,o[A+2]=D,M+=1)}}for(b=E;b<i;++b){var C;h[0+(C=3*b)]=NaN,h[C+1]=NaN,h[C+2]=NaN}for(b=M;b<u;++b){var A;o[0+(A=3*b)]=NaN,o[A+1]=NaN,o[A+2]=NaN}}}},t.prototype.toTheme=function(t){return t&&t.theme||this.getThemeDefault()},t.prototype.getThemeDefault=function(){return Y.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinateTick"},t}(),ug=function(){function t(t){this.qt=this.toTheme(t),this.R=0,this.hf=null==t?void 0:t.translation,this.af=0,this.cf=null==t?void 0:t.scaling,this.An=1,this.ff=0,this.lf=1}return Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"translate",{get:function(){return this.af},set:function(t){this.set(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.An},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.bind=function(t,n){this.set(0,n===ng.X?1:-1)},t.prototype.unbind=function(){},t.prototype.set=function(t,n){var i=!1;null!=t&&!1!==this.hf&&this.af!==t&&(i=!0,this.af=t),null!=n&&!1!==this.cf&&this.An!==n&&(i=!0,this.An=n),i&&(this.R+=1,this.lf=this.qt.isZero(this.An)?0:1/this.An,this.ff=-this.af*this.lf)},t.prototype.blend=function(t,n){var i=1-t,r=n.newTranslate*t+n.oldTranslate*i,e=n.newScale*t+n.oldScale*i;this.set(r,e)},t.prototype.map=function(t){return this.af+this.An*t},t.prototype.mapAll=function(t,n,i,r,e){for(var u=this.af,s=this.An,h=n+e;h<i;h+=r)t[h]=u+s*t[h]},t.prototype.unmap=function(t){return this.ff+this.lf*t},t.prototype.unmapAll=function(t,n,i,r,e){for(var u=this.ff,s=this.lf,h=n+e;h<i;h+=r)t[h]=u+s*t[h]},t.prototype.toTheme=function(t){return t&&t.theme||this.getThemeDefault()},t.prototype.getThemeDefault=function(){return Y.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinateTransform"},t}(),sg=function(){function t(){this.oldTranslate=0,this.oldScale=1,this.newTranslate=0,this.newScale=1}return t.prototype.set=function(t,n){null!=t&&(this.newTranslate=t),null!=n&&(this.newScale=n)},t}(),hg=function(){function t(t,n){this.from=t,this.to=n}return t.prototype.set=function(t,n){return null!=t&&(this.from=t),null!=n&&(this.to=n),this},t.prototype.add=function(t,n){return Eh(t)||(this.from=Eh(this.from)?t:Math.min(this.from,t)),Eh(n)||(this.to=Eh(this.to)?n:Math.max(this.to,n)),this},t.prototype.clear=function(){return this.from=NaN,this.to=NaN,this},t}(),og=function(){function t(t){this.R=0,this.Xt=ng.X,this.qt=this.toTheme(t),this.I=new ug(null==t?void 0:t.transform),this.if=new eg(null==t?void 0:t.tick),this.su=new hg(NaN,NaN),this.vf=new sg,this.Nt=null==t?void 0:t.from,this.It=null==t?void 0:t.to}return Object.defineProperty(t.prototype,"from",{get:function(){return this.Nt},set:function(t){this.Nt=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.It},set:function(t){this.It=t},enumerable:!1,configurable:!0}),t.prototype.bind=function(t,n){this.Sc=t,this.Xt=n,this.I.bind(t,n)},t.prototype.unbind=function(){this.Sc=void 0,this.I.unbind()},t.prototype.fit=function(t,n){this.doFit(t,n,this.I)},t.prototype.mark=function(t,n){var i=this.vf,r=this.I;i.oldTranslate=r.translate,i.oldScale=r.scale,this.doFit(t,n,i)},t.prototype.blend=function(t){this.I.blend(t,this.vf)},t.prototype.doFit=function(t,n,i){var r=this.Sc;if(r){var e=r.container.plotArea,u=e.padding,s=this.su;switch(this.Xt){case ng.X:this.bf(u.getLeft(),e.width-u.getRight(),this.toFitDomain(t,n,e,s),i);break;case ng.Y:this.bf(e.height-u.getBottom(),u.getTop(),this.toFitRange(t,n,e,s),i)}}},t.prototype.toFitDomain=function(t,n,i,r){return null==t&&(t=this.Nt),null==n&&(n=this.It),null!=t&&null!=n||i.series.getDomain(this,r),r.set(t,n),r},t.prototype.toFitRange=function(t,n,i,r){return null==t&&(t=this.Nt),null==n&&(n=this.It),null!=t&&null!=n||i.series.getRange(this,r),r.set(t,n),r},t.prototype.bf=function(t,n,i,r){var e=i.from,u=i.to;if(!Eh(e)&&!Eh(u)){var s,h=u-e,o=t-e*(s=this.qt.isZero(h)?n<t?-1:1:(n-t)/h);r.set(o,s)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this.I},enumerable:!1,configurable:!0}),t.prototype.map=function(t){return t},t.prototype.mapAll=function(t,n,i,r,e){},t.prototype.unmap=function(t){return t},t.prototype.unmapAll=function(t,n,i,r,e){},t.prototype.ticks=function(t,n,i,r,e,u,s,h,o){this.if.calculate(t,n,i,r,e,u,s,h,o,this)},t.prototype.toTheme=function(t){return t&&t.theme||this.getThemeDefault()},t.prototype.getThemeDefault=function(){return Y.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinate"},t}(),ag=function(){function t(t){this.qt=this.toTheme(t)}return t.prototype.toMajorStep=function(t,n,i,r){return null==r?0<i?this.calcStepMajor(t,n,i):-1:gn(r)?r:r(t,n,i)},t.prototype.calcStepMajor=function(t,n,i){var r=Math.abs(n-t)/i,e=Math.floor(Math.log(r)/Math.LN10),u=Math.pow(10,e);return this.qt.toStepScale(r/u)*u},t.prototype.toMinorStep=function(t,n,i){return null==i?0<=t?this.calcStepMinor(t,n):-1:gn(i)?i:i(t,n)},t.prototype.calcStepMinor=function(t,n){return t/(n+1)},t.prototype.calcTickMinorPositions=function(t,n,i,r,e,u,s){for(var h=0;h<n;h+=1){var o=i+(h+1)*t;r<=o&&o<=e&&(s[u++]=o)}},t.prototype.calculate=function(t,n,i,r,e,u,s,h,o,a){if(!(i<=0)){var c=a.transform,f=a.map(t),l=a.map(n),v=Math.min(f,l),b=Math.max(f,l),d=this.toMajorStep(v,b,i,r);if(d<=0){var g=Math.min(t,n);h[0]=g,h[1]=c.map(a.map(g)),h[2]=0;for(var m=1;m<i;++m)h[0+(T=3*m)]=NaN,h[T+1]=NaN,h[T+2]=NaN;for(m=0;m<u;++m)o[0+(N=3*m)]=NaN,o[N+1]=NaN,o[N+2]=NaN}else{var w=Math.floor(v/d)-1,p=Math.ceil(b/d)+1,O=this.toMinorStep(d,e,s),D=0,E=0;for(m=w;m<=p;++m){var M=m*d;D<i&&v<=M&&M<=b&&(h[0+(T=3*D)]=a.unmap(M),h[T+1]=c.map(M),h[T+2]=a.unmap(M-1),D+=1);for(var S=0;S<e;S+=1)if(E<u){var j=M+(S+1)*O;v<=j&&j<=b&&(o[0+(N=3*E)]=a.unmap(j),o[N+1]=c.map(j),o[N+2]=a.unmap(j-1),E+=1)}}for(m=D;m<i;++m){var T;h[0+(T=3*m)]=NaN,h[T+1]=NaN,h[T+2]=NaN}for(m=E;m<u;++m){var N;o[0+(N=3*m)]=NaN,o[N+1]=NaN,o[N+2]=NaN}}}},t.prototype.toTheme=function(t){return t&&t.theme||this.getThemeDefault()},t.prototype.getThemeDefault=function(){return Y.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinateTick"},t}(),cg=function(){function t(t){this.R=0,this.Xt=ng.X,this.qt=this.toTheme(t),this.I=new ug(null==t?void 0:t.transform),this.if=new ag(null==t?void 0:t.tick),this.su=new hg(NaN,NaN),this.vf=new sg,this.Nt=null==t?void 0:t.from,this.It=null==t?void 0:t.to}return Object.defineProperty(t.prototype,"from",{get:function(){return this.Nt},set:function(t){this.Nt=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.It},set:function(t){this.It=t},enumerable:!1,configurable:!0}),t.prototype.bind=function(t,n){this.Sc=t,this.Xt=n},t.prototype.unbind=function(){this.Sc=void 0},t.prototype.fit=function(t,n){this.doFit(t,n,this.I)},t.prototype.mark=function(t,n){var i=this.vf,r=this.I;i.oldTranslate=r.translate,i.oldScale=r.scale,this.doFit(t,n,i)},t.prototype.blend=function(t){this.I.blend(t,this.vf)},t.prototype.doFit=function(t,n,i){var r=this.Sc;if(r){var e=r.container.plotArea,u=e.padding,s=this.su;switch(this.Xt){case ng.X:this.bf(u.getLeft(),e.width-u.getRight(),this.toFitDomain(t,n,e,s),i);break;case ng.Y:this.bf(e.height-u.getBottom(),u.getTop(),this.toFitRange(t,n,e,s),i)}}},t.prototype.toFitDomain=function(t,n,i,r){return null==t&&(t=this.Nt),null==n&&(n=this.It),null!=t&&null!=n||i.series.getDomain(this,r),r.set(t,n),r},t.prototype.toFitRange=function(t,n,i,r){return null==t&&(t=this.Nt),null==n&&(n=this.It),null!=t&&null!=n||i.series.getRange(this,r),r.set(t,n),r},t.prototype.bf=function(t,n,i,r){var e=i.from,u=i.to;if(!Eh(e)&&!Eh(u)){var s,h=this.map(e),o=this.map(u)-h,a=t-h*(s=this.qt.isZero(o)?n<t?-1:1:(n-t)/o);r.set(a,s)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this.I},enumerable:!1,configurable:!0}),t.prototype.map=function(t){return Math.log(Math.max(0,t))/Math.LN10},t.prototype.mapAll=function(t,n,i,r,e){for(var u=1/Math.LN10,s=n+e;s<i;s+=r){var h=t[s];t[s]=Math.log(Math.max(0,h))*u}},t.prototype.unmap=function(t){return Math.pow(10,t)},t.prototype.unmapAll=function(t,n,i,r,e){for(var u=n+e;u<i;u+=r)t[u]=Math.pow(10,t[u])},t.prototype.ticks=function(t,n,i,r,e,u,s,h,o){this.if.calculate(t,n,i,r,e,u,s,h,o,this)},t.prototype.toTheme=function(t){return t&&t.theme||this.getThemeDefault()},t.prototype.getThemeDefault=function(){return Y.getInstance().get(this.getType())},t.prototype.getType=function(){return"DChartCoordinate"},t}(),fg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DChartLegendItem"},n}(Zi),lg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DChartLegend"},n}(Zi),vg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DChartOverview"},n}(Zi),bg=function(n){function i(i){var r=n.call(this)||this,e=r.transform;return r._=new Ni(e.position,i),r.An=new Ni(e.scale,i),r.xi=new t.Rectangle,r}return B(i,n),Object.defineProperty(i.prototype,"position",{get:function(){return this._},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.An},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(t,i){return this._lastBoundsID=-1,n.prototype.getBounds.call(this,t,i)},i.prototype.calculateBounds=function(){var t=this._bounds,n=this.su,i=this.xi,r=this.transform.worldTransform,e=0,u=0,s=0,h=0,o=this.children;if(0<o.length)for(var a=!0,c=0,f=o.length;c<f;++c){var l=o[c];l.visible&&(l.getBoundsInternal(!1,i),a?(a=!1,e=i.x,s=i.y,u=i.x+i.width,h=i.y+i.height):(e=Math.min(e,i.x),s=Math.min(s,i.y),u=Math.max(u,i.x+i.width),h=Math.max(h,i.y+i.height)))}t.clear(),n.set(e,s),r.apply(n,n),t.addPoint(n),n.set(u,h),r.apply(n,n),t.addPoint(n)},i}(xe),dg=function(){function t(){this.shape=null,this.x=0,this.y=0,this.p0x=0,this.p0y=0,this.p1x=0,this.p1y=0,this.index=0,this.t=0,this.distance=0}return t.prototype.copyFrom=function(t){return this.shape=t.shape,this.x=t.x,this.y=t.y,this.p0x=t.p0x,this.p0y=t.p0y,this.p1x=t.p1x,this.p1y=t.p1y,this.index=t.index,this.t=t.t,this.distance=t.distance,this},t}(),gg=function(){function t(t,n,i){this.enable=t,this.color=n,this.alpha=i}return t.from=function(n,i,r){var e,u,s;return new t(null!==(e=null==r?void 0:r.enable)&&void 0!==e?e:n.enable(i),null!==(u=null==r?void 0:r.color)&&void 0!==u?u:n.color(i),null!==(s=null==r?void 0:r.alpha)&&void 0!==s?s:n.alpha(i))},t}(),mg=function(){function t(){}return t.from=function(t,n){return Ct(t)?function(n){return t[n%t.length]}:ot(t)?t:null!=t?function(){return t}:Ct(n)?function(t){return n[t%n.length]}:ot(n)?n:function(){return n}},t}(),wg=function(t){this.enable=mg.from(null==t?void 0:t.enable,!0),this.color=mg.from(null==t?void 0:t.color,tg),this.alpha=mg.from(null==t?void 0:t.alpha,K.FILL_ALPHA)},pg=function(){function t(t,n){this.outer=t,this.inner=n}return t.from=function(n,i,r){var e,u;return new t(null!==(e=null==r?void 0:r.outer)&&void 0!==e?e:n.outer(i),null!==(u=null==r?void 0:r.inner)&&void 0!==u?u:n.inner(i))},t}(),Og=function(t){this.outer=mg.from(null==t?void 0:t.outer,.2),this.inner=mg.from(null==t?void 0:t.inner,.1)},Dg=function(){function t(t,n){this.x=t,this.y=n}return t.from=function(n,i,r,e,u){var s,h;return new t(null!==(s=null==r?void 0:r.x)&&void 0!==s?s:null!=n.x?n.x(i):e,null!==(h=null==r?void 0:r.y)&&void 0!==h?h:null!=n.y?n.y(i):u)},t}(),Eg=function(t){t&&(null!=t.x&&(this.x=mg.from(t.x,0)),null!=t.y&&(this.y=mg.from(t.y,0)))},Mg=function(){function t(t,n,i,r,e,u,s){this.enable=t,this.color=n,this.alpha=i,this.width=r,this.align=e,this.side=u,this.style=s}return t.from=function(n,i,r){var e,u,s,h,o,a,c;return new t(null!==(e=null==r?void 0:r.enable)&&void 0!==e?e:n.enable(i),null!==(u=null==r?void 0:r.color)&&void 0!==u?u:n.color(i),null!==(s=null==r?void 0:r.alpha)&&void 0!==s?s:n.alpha(i),null!==(h=null==r?void 0:r.width)&&void 0!==h?h:n.width(i),null!==(o=null==r?void 0:r.align)&&void 0!==o?o:n.align(i),null!==(a=null==r?void 0:r.side)&&void 0!==a?a:n.side(i),null!==(c=null==r?void 0:r.style)&&void 0!==c?c:n.style(i))},t}(),Sg=function(t){this.enable=mg.from(null==t?void 0:t.enable,!0),this.color=mg.from(null==t?void 0:t.color,tg),this.alpha=mg.from(null==t?void 0:t.alpha,K.STROKE_ALPHA),this.width=mg.from(null==t?void 0:t.width,K.STROKE_WIDTH),this.align=mg.from(null==t?void 0:t.width,K.STROKE_ALIGN),this.side=mg.from(null==t?void 0:t.side,Pt.ALL),this.style=mg.from(null==t?void 0:t.style,s.NON_SCALING)},jg=function(){function t(t,n){var i;this.sf=t,this.df=new hg(NaN,NaN),this.gf=new hg(NaN,NaN),this.Rc=null!==(i=null==n?void 0:n.selection)&&void 0!==i?i:null,this.C=new wg(null==n?void 0:n.fill),this.ho=new Sg(null==n?void 0:n.stroke),this.T=new Eg(null==n?void 0:n.size),this.tn=new Eg(null==n?void 0:n.offset),this.Gn=new Og(null==n?void 0:n.padding),this.Cn=[];var r=n&&n.list;if(r){var e=r.length;if(0<e){for(var u=0;u<e;++u)this.add(r[u]);this.update()}}}return t.prototype.newFill=function(t,n){return gg.from(this.C,t,n)},t.prototype.newStroke=function(t,n){return Mg.from(this.ho,t,n)},t.prototype.newSize=function(t,n,i,r){return Dg.from(this.T,t,n,i,r)},t.prototype.newOffset=function(t,n,i,r){return Dg.from(this.tn,t,n,i,r)},t.prototype.newPadding=function(t,n){return pg.from(this.Gn,t,n)},Object.defineProperty(t.prototype,"plotArea",{get:function(){return this.sf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this.Rc},enumerable:!1,configurable:!0}),t.prototype.update=function(){for(var t=this.Cn,n=0,i=t.length;n<i;++n)t[n].update();var r=this.Rc;r&&r.update()},t.prototype.add=function(t){var n=this.Cn;t.bind(this,n.length),n.push(t)},t.prototype.get=function(t){var n=this.Cn;return 0<=t&&t<n.length?n[t]:null},t.prototype.indexOf=function(t){return this.Cn.indexOf(t)},t.prototype.clear=function(){for(var t=this.Cn,n=0,i=t.length;n<i;++n)t[n].destroy();return t.length=0,this},t.prototype.size=function(){return this.Cn.length},t.prototype.destroy=function(){this.clear();var t=this.Rc;t&&t.unbind()},t.prototype.getDomain=function(t,n){n.clear();for(var i=this.Cn,r=0,e=i.length;r<e;++r){var u=i[r];if(u.coordinate.x===t){var s=u.domain;n.add(s.from,s.to)}}return n},t.prototype.getRange=function(t,n){n.clear();for(var i=this.Cn,r=0,e=i.length;r<e;++r){var u=i[r];if(u.coordinate.y===t){var s=u.range;n.add(s.from,s.to)}}return n},Object.defineProperty(t.prototype,"domain",{get:function(){var t=this.df;t.clear();for(var n=this.Cn,i=0,r=n.length;i<r;++i){var e=n[i].domain;t.add(e.from,e.to)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){var t=this.gf;t.clear();for(var n=this.Cn,i=0,r=n.length;i<r;++i){var e=n[i].range;t.add(e.from,e.to)}return t},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,n){for(var i=this.Cn,r=i.length-1;0<=r;--r){var e=i[r];if(e.hitTest(t,n))return e}return null},t.prototype.calcHitPoint=function(n,i,r){var e=r,u=t.WORK_CALCHITPOINT,s=this.Cn,h=null;u.distance=1/0;for(var o=s.length-1;0<=o;--o){var a=s[o];if(a.calcHitPoint(n,i,e)&&e.distance<u.distance){h=a;var c=e;e=u,u=c}}return h&&u!==r&&r.copyFrom(u),h},t.WORK_CALCHITPOINT=new dg,t}(),Tg=function(n){function i(t,i){var r=n.call(this,i)||this;return r.mf=t,r.wf=0,r.pf=1e3,r.Of=null,r.Df=function(){r.onBlend()},r}return B(i,n),i.prototype.init=function(i){var r,e=this;n.prototype.init.call(this,i);var u=new bg((function(){e.Ef=!0,e.Mf=!0,rt.update(e)}));this.Sc=u,this.Sf=new rg(this,null==i?void 0:i.coordinate);var s=new jg(this,null==i?void 0:i.series);this.jf=s;var h=new Kd(this,null==i?void 0:i.axis);this.Tf=h,this.Ef=!0,this.Mf=!0,this.Nf=new t.Rectangle,this.hc=new t.Point,this.addChild(u),this.addChild(h.container),this.nr=new ar(this,(function(){return u}),null==i?void 0:i.view);var o=s.selection;o&&o.bind(s),(null!==(r=null==i?void 0:i.mask)&&void 0!==r?r:this.theme.isOverflowMaskEnabled())&&(u.mask=this.getOverflowMask())},i.prototype.onResize=function(t,i,r,e){this.Ef=!0,this.Mf=!0,n.prototype.onResize.call(this,t,i,r,e)},i.prototype.getOverflowMask=function(){return null==this.ir&&(this.ir=new qi(this),this.reflowable.add(this.ir),this.toDirty()),this.ir},Object.defineProperty(i.prototype,"coordinate",{get:function(){return this.Sf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"chart",{get:function(){return this.mf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"series",{get:function(){return this.jf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"container",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"axis",{get:function(){return this.Tf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this.nr},enumerable:!1,configurable:!0}),i.prototype.onWheel=function(t,i,r){var e=this.nr.onWheel(t,i,r),u=n.prototype.onWheel.call(this,t,i,r);return e||u},i.prototype.onDblClick=function(t,i){var r=this.nr.onDblClick(t,i),e=n.prototype.onDblClick.call(this,t,i);return r||e},i.prototype.onDown=function(t){this.nr.onDown(t),n.prototype.onDown.call(this,t)},i.prototype.render=function(t){if(this.Ef){this.Ef=!1,this.Tf.update();var i=this.jf.selection;i&&i.update()}n.prototype.render.call(this,t)},i.prototype.destroy=function(){this.Sc.destroy(),this.jf.destroy(),this.Tf.destroy()},i.prototype.getType=function(){return"DChartPlotArea"},i.prototype.getBoundsInContainer=function(){var t=this.Nf;if(this.Mf){this.Mf=!1;var n=this.container;n.updateTransform();var i=n.transform.localTransform,r=this.hc;r.set(0,0),i.applyInverse(r,r),t.x=r.x,t.y=r.y,r.set(this.width,this.height),i.applyInverse(r,r),t.width=r.x-t.x,t.height=r.y-t.y}return t},i.prototype.fit=function(t,n,i,r,e){var u=this.Sf,s=this.Tf,h=this.jf;if(null!=t&&t<=0)u.fit(n,i,r,e),s.update(),h.update();else{this.pf=null!=t?t:200,this.wf=Date.now(),u.mark(n,i,r,e);var o=this.Of;null!=o&&window.clearTimeout(o),this.Of=window.setTimeout(this.Df,0)}return this},i.prototype.onBlend=function(){var t=(Date.now()-this.wf)/this.pf;t<1?this.Of=window.setTimeout(this.Df,0):(this.Of=null,t=1),this.Sf.blend(ir.ELASTIC(t)),this.Tf.update(),this.jf.update()},i}(Zi),Ng=function(){function t(t,n,i){this.Nt=t,this.It=n,this.Z=i}return Object.defineProperty(t.prototype,"from",{get:function(){return this.Nt},set:function(t){this.set(t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.It},set:function(t){this.set(void 0,t)},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=!1;return null!=t&&this.Nt!==t&&(Eh(this.Nt)&&Eh(t)||(this.Nt=t,i=!0)),null!=n&&this.It!==n&&(Eh(this.It)&&Eh(n)||(this.It=n,i=!0)),i&&this.Z(),this},t.prototype.add=function(t,n){var i,r;return Eh(t)||(i=Eh(this.from)?t:Math.min(this.from,t)),Eh(n)||(r=Eh(this.to)?n:Math.max(this.to,n)),this.set(i,r)},t.prototype.clear=function(){return this.set(NaN,NaN)},t}(),Ig=function(){function t(t){var n,i,r,e=this.toTheme(t);this.qt=e;var u=(new ct).add(null!==(n=null==t?void 0:t.state)&&void 0!==n?n:ht.HOVERED);this.Et=u,this.Ju=null!==(i=null==t?void 0:t.enable)&&void 0!==i?i:e.isEnabled(u),this.kr=null==t?void 0:t.shape,this.B=null!==(r=null==t?void 0:t.style)&&void 0!==r?r:this.setStyle}return t.prototype.bind=function(t){if(this.Ju){var n=this.kr||this.newShape(this.qt);this.kr=n,n.attach(t.plotArea.axis.container),n.visible=!1}},t.prototype.unbind=function(){var t=this.kr;t&&t.detach()},t.prototype.newShape=function(t){return t.newShape(this.Et)},t.prototype.set=function(t,n,i){this.update(t,n);var r=this.kr;r&&this.B(r,i)},t.prototype.setStyle=function(t,n){var i=n.shape;i&&(t.stroke.color=i.stroke.color)},t.prototype.unset=function(){var t=this.kr;t&&(t.visible=!1)},t.prototype.toTheme=function(t){var n=null==t?void 0:t.theme;return at(n)?this.getTheme(n):null!=n?n:this.getTheme(this.getType())},t.prototype.getTheme=function(t){return Y.getInstance().get(t)},t}(),Cg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.update=function(t,n){var i=this.kr;if(i){var r=n.x,e=t.plotArea.height;i.transform.position.set(r,.5*e),i.size.set(0,e),i.visible=this.isVisible(t,r)}},n.prototype.isVisible=function(t,n){return 0<=n&&n<=t.plotArea.width},n.prototype.getType=function(){return"DChartSelectionGridlineX"},n}(Ig),Ag=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.update=function(t,n){var i=this.kr;if(i){var r=n.y,e=t.plotArea.width;i.transform.position.set(.5*e,r),i.size.set(e,0),i.visible=this.isVisible(t,r)}},n.prototype.isVisible=function(t,n){return 0<=n&&n<=t.plotArea.height},n.prototype.getType=function(){return"DChartSelectionGridlineY"},n}(Ig),Rg=function(){function t(t){this._x=new Cg(null==t?void 0:t.x),this._y=new Ag(null==t?void 0:t.y)}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),t.prototype.bind=function(t){this._x.bind(t),this._y.bind(t)},t.prototype.unbind=function(){this._x.unbind(),this._y.unbind()},t.prototype.set=function(t,n,i){this._x.set(t,n,i),this._y.set(t,n,i)},t.prototype.unset=function(){this._x.unset(),this._y.unset()},t.prototype.update=function(t,n){this._x.update(t,n),this._y.update(t,n)},t}(),yg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.update=function(t,n){var i=this.kr;i&&(i.transform.position.copyFrom(n),i.visible=this.isVisible(t,n))},n.prototype.isVisible=function(t,n){var i=n.x,r=n.y,e=t.plotArea;return 0<=i&&i<=e.width&&0<=r&&r<=e.height},n.prototype.getType=function(){return"DChartSelectionMarker"},n}(Ig),Lg={PREVIOUS:0,NEXT:1,CLOSER:2,INTERSECTION:3},kg=function(n){function i(i){var r,e,u,s=this;(s=n.call(this)||this).Sc=null,s.jf=null,s.Ju=null===(r=i.enable)||void 0===r||r,s.If=new Rg(i.gridline),s.A=new yg(i.marker),s.Et=null!==(e=i.state)&&void 0!==e?e:ht.HOVERED,s.Cf=null,s.Af=null,s._=new t.Point,s.sn=null!==(u=i.point)&&void 0!==u?u:Lg.CLOSER,s.su=new t.Point;var h=i.on;if(h)for(var o in h){var a=h[o];a&&s.on(o,a)}return s}return B(i,n),i.prototype.bind=function(t){this.Ju&&(this.Sc=t,this.If.bind(t),this.A.bind(t))},i.prototype.unbind=function(){this.A.unbind(),this.If.unbind(),this.Sc=null,this.Cf=null,this.Af=null},Object.defineProperty(i.prototype,"series",{get:function(){return this.jf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gridline",{get:function(){return this.If},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"marker",{get:function(){return this.A},enumerable:!1,configurable:!0}),i.prototype.set=function(t,n){var i=this.Sc,r=this.Cf=t.coordinate.x,e=this.Af=t.coordinate.y;if(i&&r&&e){var u=i.plotArea.container.localTransform,s=this._,h=this.su;if(n instanceof dg){var o=n.x,a=n.y;switch(this.sn){case Lg.PREVIOUS:o=n.p0x,a=n.p0y;break;case Lg.NEXT:o=n.p1x,a=n.p1y;break;case Lg.CLOSER:Math.abs(n.p0x-n.x)<Math.abs(n.p1x-n.x)?(o=n.p0x,a=n.p0y):(o=n.p1x,a=n.p1y)}h.set(o,a),u.apply(h,h),s.set(r.unmap(r.transform.unmap(o)),e.unmap(e.transform.unmap(a)))}else s.copyFrom(n.position),h.set(r.transform.map(r.map(s.x)),e.transform.map(e.map(s.y))),u.apply(h,h);this.If.set(i,h,t),this.A.set(i,h,t),rt.update(i.plotArea)}var c=this.jf;if(c!==t){var f=this.Et;c&&c.state.remove(f),this.jf=t,t.state.add(f)}this.emit("change",this)},i.prototype.setStyle=function(t,n){var i=n.shape;i&&(t.stroke.color=i.stroke.color)},i.prototype.unset=function(){var t=this.jf;t&&(this.jf=null,this.Cf=null,this.Af=null,t.state.remove(this.Et),this.If.unset(),this.A.unset(),this.emit("change",this))},i.prototype.update=function(){var t=this.Sc,n=this.Cf,i=this.Af;if(t&&n&&i){var r=this._,e=this.su;e.set(n.transform.map(n.map(r.x)),i.transform.map(i.map(r.y))),t.plotArea.container.localTransform.apply(e,e),this.If.update(t,e),this.A.update(t,e)}},i}(t.utils.EventEmitter),xg=function(t){function n(n){var i,r=this;(r=t.call(this)||this).Sc=null;var e=Oi(null!==(i=null==n?void 0:n.point)&&void 0!==i?i:Lg.CLOSER,Lg);r.ja=r.newSelected(e,null==n?void 0:n.selected),r.Rf=r.newHovered(e,null==n?void 0:n.hovered);var u=null==n?void 0:n.on;if(null!=u)for(var s in u){var h=u[s];h&&r.on(s,h)}return r.yf=function(t){r.onMove(t)},r.Lf=function(t){r.onClick(t)},r}return B(n,t),n.prototype.newSelected=function(t,n){return new kg(this.toSubOptions(t,n,ht.ACTIVE))},n.prototype.newHovered=function(t,n){return new kg(this.toSubOptions(t,n,ht.HOVERED))},n.prototype.toSubOptions=function(t,n,i){null==(n=n||{}).point&&(n.point=t),null==n.state&&(n.state=i);var r=n.gridline||{},e=r.x||{};null==e.state&&(e.state=i);var u=r.y||{};null==u.state&&(u.state=i);var s=n.marker||{};return null==s.state&&(s.state=i),n},n.prototype.onClick=function(t){var n=this.Sc;if(n&&t.target===n.plotArea){var i=this.Rf,r=i.series,e=this.ja;r?e.set(r,i):e.unset()}},n.prototype.onMove=function(t){var i=this.Sc;if(i){var r=this.Rf;if(t.target===i.plotArea){var e=n.WORK_SELECT,u=t.data.global,s=i.calcHitPoint(u.x,u.y,e);s?r.set(s,e):r.unset()}else r.unset()}},n.prototype.bind=function(t){this.Sc=t,this.ja.bind(t),this.Rf.bind(t);var n=t.plotArea;n.on(Wi.move,this.yf),Wi.onClick(n,this.Lf)},n.prototype.unbind=function(){var t=this.Sc;this.Sc=null,t&&t.plotArea.off(Wi.move,this.yf),this.ja.unbind(),this.Rf.unbind()},Object.defineProperty(n.prototype,"selected",{get:function(){return this.ja},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hovered",{get:function(){return this.Rf},enumerable:!1,configurable:!0}),n.prototype.update=function(){this.ja.update(),this.Rf.update()},n.WORK_SELECT=new dg,n}(t.utils.EventEmitter),Bg=function(){function t(t,n){var i,r;this.p=t,this.kf=null!==(i=null==n?void 0:n.x)&&void 0!==i?i:0,this.xf=null!==(r=null==n?void 0:n.y)&&void 0!==r?r:0,this.Bf=NaN,this._f=NaN,this.Pf=NaN,this.Ff=NaN}return Object.defineProperty(t.prototype,"x",{get:function(){var t=this.p.container;return t?t.plotArea.coordinate.x.get(this.kf):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){var t=this.p.container;return t?t.plotArea.coordinate.y.get(this.xf):null},enumerable:!1,configurable:!0}),t.prototype.isDirty=function(t,n){var i=t.id,r=n.id,e=i!==this.Bf,u=r!==this._f;return this.Bf=i,this._f=r,e||u},t.prototype.isTransformDirty=function(t,n){var i=t.transform.id,r=n.transform.id,e=i!==this.Pf,u=r!==this.Ff;return this.Pf=i,this.Ff=r,e||u},t.prototype.reset=function(){this.Bf=NaN,this._f=NaN},t.prototype.destroy=function(){this.reset()},t}(),_g=function(t){function n(n){var i=t.call(this)||this;i.Sf=new Bg(i,null==n?void 0:n.coordinate),i.Ve=0,i.df=new hg(NaN,NaN),i.gf=new hg(NaN,NaN),i.Uf=NaN,i.Et=new ft((function(t,n){i.onStateChange(t,n)}));var r=null==n?void 0:n.on;if(null!=r)for(var e in r){var u=r[e];u&&i.on(e,u)}return i}return B(n,t),n.prototype.bind=function(t,n){this.Sc=t,this.Sf.reset(),this.Ve=n;var i=t.plotArea.chart;i&&(this.Et.parent=i.state)},n.prototype.unbind=function(){this.Sc=void 0},Object.defineProperty(n.prototype,"domain",{get:function(){return this.updateRegion(),this.df},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"range",{get:function(){return this.updateRegion(),this.gf},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"container",{get:function(){return this.Sc||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.Ve},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.Sf},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.Et},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){this.Sc=void 0,this.Sf.destroy()},n.prototype.hitTest=function(t,n){return!1},n.prototype.calcHitPoint=function(t,n,i){return!1},n.prototype.onStateChange=function(t,n){var i;this.toDirty();var r=null===(i=this.Sc)||void 0===i?void 0:i.plotArea.chart;rt.update(r),this.emit("statechange",t,n,this)},n}(t.utils.EventEmitter),Pg=function(n){function i(t){var i=n.call(this,t)||this;return i.Gf=null,i.yn=t,i.gt=t&&t.points||[],i.zf=0,i.Hf=NaN,i}return B(i,n),i.prototype.getSizeDefault=function(){return 10},i.prototype.getOffsetDefault=function(){return 0},i.prototype.bind=function(t,i){var r=this.Gf;if(!r){r=this.Gf=this.newLineOfAny();var e=this.yn;this.initLine(r,e,t,i)}r.attach(t.plotArea.container,i),this.Hf=NaN,n.prototype.bind.call(this,t,i)},i.prototype.initLine=function(t,n,i,r){var e=i.newFill(r,null==n?void 0:n.fill);this.C=e,t.fill.copy(e);var u=i.newStroke(r,null==n?void 0:n.stroke);this.ho=u,t.stroke.copy(u);var s=this.getSizeDefault(),h=i.newSize(r,null==n?void 0:n.size,s,s);this.T=h,t.points.size.set(h.x,h.y);var o=this.getOffsetDefault(),a=i.newOffset(r,n&&n.offset,o,o);this.tn=a,t.points.offset.set(a.x,a.y)},i.prototype.unbind=function(){var t=this.Gf;t&&t.detach(),n.prototype.unbind.call(this)},Object.defineProperty(i.prototype,"shape",{get:function(){return this.Gf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"points",{get:function(){return this.gt},set:function(t){this.gt=t,this.zf+=1},enumerable:!1,configurable:!0}),i.prototype.toDirty=function(){this.zf+=1},i.prototype.update=function(){var t=this.Gf;if(t){var n=this.Sf,i=n.x,r=n.y;if(i&&r){var e=this.zf,u=e!==this.Hf,s=n.isDirty(i,r),h=n.isTransformDirty(i,r);(u||s||h)&&(this.Hf=e,this.updateLine(t,i,r))}}},i.prototype.updateLine=function(t,n,r){for(var e=t.points.values,u=e.length,s=0,h=this.gt,o=NaN,a=NaN,c=NaN,f=NaN,l=0,v=h.length;l<v;l+=2){var b=h[l],d=h[l+1];null!=b&&null!=d&&(s<u?(e[s]=b,e[s+1]=d):e.push(b,d),s+=2,o!=o?(o=b,a=b,c=d,f=d):(o=Math.min(o,b),a=Math.max(a,b),c=Math.min(c,d),f=Math.max(f,d)))}e.length!==s&&(e.length=s),n.mapAll(e,0,s,2,0),r.mapAll(e,0,s,2,1),n.transform.mapAll(e,0,s,2,0),r.transform.mapAll(e,0,s,2,1),o!=o&&(o=0,a=0,c=0,f=0);var g=i.WORK_REGION||{xmin:0,xmax:0,ymin:0,ymax:0};i.WORK_REGION=g,this.adjustLineRegion(o,a,c,f,g),o=n.transform.map(n.map(g.xmin)),a=n.transform.map(n.map(g.xmax)),c=r.transform.map(r.map(g.ymin)),f=r.transform.map(r.map(g.ymax));var m=Math.abs(a-o),w=Math.abs(f-c),p=.5*(o+a),O=.5*(c+f);for(l=0,v=e.length;l<v;l+=2)e[l+0]-=p,e[l+1]-=O;t.disallowUploadedUpdate(),this.applyLine(t,n,r,m,w,p,O,e),t.allowUploadedUpdate(),rt.update(t)},i.prototype.adjustLineRegion=function(t,n,i,r,e){return e.xmin=t,e.xmax=n,e.ymin=i,e.ymax=r,e},i.prototype.applyLine=function(t,n,i,r,e,u,s,h){t.points.set(h),t.size.set(r,e),t.transform.position.set(u,s)},i.prototype.updateRegion=function(){var t=this.zf;if(this.Uf!==t){this.Uf=t;var n=this.gt,i=this.df,r=this.gf;i.clear(),r.clear(),this.calcRegion(n,i,r)}},i.prototype.calcRegion=function(t,n,i){for(var r=0,e=t.length;r<e;r+=2){var u=t[r];null!=u&&n.add(u,u);var s=t[r+1];null!=s&&i.add(s,s)}},i.prototype.destroy=function(){var t=this.Gf;t&&(this.Gf=null,t.detach(),t.destroy()),this.gt.length=0,this.zf=0,this.Hf=NaN,n.prototype.destroy.call(this)},i.prototype.hitTest=function(t,n){var r=this.Gf;if(r){var e=i.WORK;return e.set(t,n),r.toLocal(e,void 0,e),null!=r.contains(e.x,e.y)}return!1},i.prototype.calcHitPoint=function(t,n,r){var e=this.Gf;if(e){var u=i.WORK;return u.set(t,n),e.toLocal(u,void 0,u),r.shape=e,e.calcHitPoint(u.x,u.y,null,this.calcHitPointTestRange,this.calcHitPointHitTester,r)}return!1},i.prototype.calcHitPointTestRange=function(t,n,i,r,e,u,s,h,o){for(var a=Hv(h,t+i+e,2,0),c=0,f=a-1,l=f<<1;0<=f;f-=1,l-=2)if(h[l]<=t-i){c=f;break}return o[0]=c,o[1]=c!==a?a:Math.min(h.length<<1,a+1),o},i.prototype.calcHitPointHitTester=function(t,n,i,r,e,u,s,h,o,a,c,f,l,v){var b=v.shape;if(b.containsPointAbs(t,n,i,r,e,u,s,h,o,a,c)){var d=b.transform,g=d.position,m=d.scale;v.x=v.p0x=v.p1x=g.x+m.x*s,v.y=v.p0y=v.p1y=g.y+m.y*h,v.t=l,v.index=f;var w=t-(s+e),p=n-(h+u);return v.distance=Math.sqrt(w*w+p*p),!0}return!1},i.WORK=new t.Point,i}(_g),Fg=function(t){function n(n){var i=t.call(this,n)||this;return i.Vf=-1,i.Wf=-1,i.Xf=-1,i.Yf=-1,i.Kf=!1!==(n&&n.size&&n.size.auto),i}return B(n,t),n.prototype.bind=function(n,i){this.Vf=-1,this.Wf=-1,this.Xf=-1,this.Yf=-1,t.prototype.bind.call(this,n,i)},n.prototype.initLine=function(n,i,r,e){t.prototype.initLine.call(this,n,i,r,e),this.Gn=r.newPadding(e,i&&i.padding)},n.prototype.newLineOfAny=function(){return new wf},n.prototype.getSizeDefault=function(){return 1},n.prototype.adjustLineRegion=function(n,i,r,e,u){return t.prototype.adjustLineRegion.call(this,n,i,Math.min(0,r),Math.max(0,e),u)},n.prototype.updateBarCountAndIndex=function(){if(this.Wf<0||this.Vf<0){var t=0,i=0,r=this.Sc;if(r)for(var e=0,u=r.size();e<u;++e){var s=r.get(e);s===this&&(t=i),s instanceof n&&(i+=1)}return i=Math.max(1,i),this.Vf=i,this.Wf=t,!0}return!1},n.prototype.applyLine=function(n,i,r,e,u,s,h,o){var a=n.points,c=a.offset,f=a.size,l=this.T,v=this.tn,b=this.Gn;if(l&&v&&b){var d=i.id,g=i.transform.id;if(this.updateBarCountAndIndex()||this.Xf!==d||this.Yf!==g){var m=this.Vf,w=this.Wf;this.Xf=d,this.Yf=g;var p=i.transform.map(i.map(0)),O=i.transform.map(i.map(l.x)),D=Math.abs(p-O)*(1-b.outer);if(m<=1)c.x=v.x,f.x=D;else{var E=D*(1-b.inner),M=E/m,S=M*(w+.5)+w*((D-E)/(m-1));c.x=v.x+S-.5*D,f.x=M}}}var j=f.y;Ct(j)||(j=[]);var T=j.length,N=c.y;Ct(N)||(N=[]);for(var I=N.length,C=0,A=r.transform.map(r.map(0))-h,R=0,y=o.length;R<y;R+=2,C+=1){var L=o[R+1]-A,k=Math.abs(L);C<T?j[C]=k:j.push(k);var x=-.5*L;C<I?N[C]=x:N.push(x)}j.length!==C&&(j.length=C),N.length!==C&&(N.length=C),c.y=N,f.y=j,t.prototype.applyLine.call(this,n,i,r,e,u,s,h,o)},n.prototype.calcSizeX=function(t){var n=this.gt;if(2<n.length)for(var i=n.length,r=n[i-2],e=i-4;0<=e;e-=2){var u=n[e];if(null!=r&&null!=u)return Math.abs(r-u);r=u}return t},n.prototype.calcRegion=function(n,i,r){t.prototype.calcRegion.call(this,n,i,r);var e=this.T;if(e){var u=e.x;this.Kf&&(u=this.calcSizeX(u),e.x=u);var s=.5*u;i.set(i.from-s,i.to+s)}r.add(0,0)},n}(Pg),Ug=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newLineOfAny=function(){return new of},n}(Pg),Gg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newLineOfAny=function(){return new vf},n}(Pg),zg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newLineOfAny=function(){return new wf},n}(Pg),Hg=function(t){function n(n){var i=t.call(this,n)||this;return i.Jf=0,i}return B(n,t),n.prototype.newLineOfAny=function(){return new Uf},n.prototype.applyLine=function(n,i,r,e,u,s,h,o){var a=this.T,c=this.tn;a&&c&&this.Jf!==a.y&&(this.Jf=a.y,n.points.offset.y=c.y-.2*a.y),t.prototype.applyLine.call(this,n,i,r,e,u,s,h,o)},n}(Pg),Vg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newLineOfAny=function(){return new kf},n}(Hg),Wg=function(n){function i(t){var i,r=this;return(r=n.call(this,t)||this).Gf=null,r.yn=t,r.gt=null!==(i=null==t?void 0:t.points)&&void 0!==i?i:[],r.zf=0,r.Hf=NaN,r.Zf=0,r.qf=0,r}return B(i,n),i.prototype.bind=function(t,i){var r,e=this.Gf;if(!e){var u=t.newStroke(i,null===(r=this.yn)||void 0===r?void 0:r.stroke);this.ho=u,(e=new _c).stroke.copy(u),this.Gf=e}e.attach(t.plotArea.container,i),this.Hf=NaN,n.prototype.bind.call(this,t,i)},i.prototype.unbind=function(){var t=this.Gf;t&&t.detach(),n.prototype.unbind.call(this)},Object.defineProperty(i.prototype,"shape",{get:function(){return this.Gf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"points",{get:function(){return this.gt},set:function(t){this.gt=t,this.zf+=1},enumerable:!1,configurable:!0}),i.prototype.toDirty=function(){this.zf+=1},i.prototype.update=function(){var t=this.Gf;if(t){var n=this.Sf,i=n.x,r=n.y;if(i&&r){var e=this.zf,u=e!==this.Hf,s=n.isDirty(i,r),h=n.isTransformDirty(i,r);(u||s||h)&&(this.Hf=e,this.updateLine(t,i,r,u||s))}}},i.prototype.updateLine=function(t,n,i,r){if(t.disallowUploadedUpdate(),r){for(var e=t.points.values,u=t.points.segments,s=e.length,h=u.length,o=0,a=0,c=this.gt,f=NaN,l=NaN,v=NaN,b=NaN,d=0,g=c.length;d<g;d+=2){var m=c[d],w=c[d+1];if(null!=m&&null!=w)o<s?(e[o]=m,e[o+1]=w):e.push(m,w),o+=2,f!=f?(f=m,l=m,v=w,b=w):(f=Math.min(f,m),l=Math.max(l,m),v=Math.min(v,w),b=Math.max(b,w));else{var p=(d>>1)-a;a<h?u[a]=p:u.push(p),a+=1}}e.length!==o&&(e.length=o),u.length!==a&&(u.length=a),n.mapAll(e,0,o,2,0),i.mapAll(e,0,o,2,1),f!=f&&(f=0,l=0,v=0,b=0),f=n.map(f),l=n.map(l),v=i.map(v),b=i.map(b);var O=Math.abs(l-f),D=Math.abs(b-v),E=.5*(f+l),M=.5*(v+b);for(d=0,g=e.length;d<g;d+=2)e[d+0]-=E,e[d+1]-=M;t.size.set(O,D),t.points.set(e,u),this.Zf=E,this.qf=M}t.transform.position.set(n.transform.map(this.Zf),i.transform.map(this.qf)),t.transform.scale.set(n.transform.scale,i.transform.scale),t.allowUploadedUpdate(),rt.update(t)},i.prototype.updateRegion=function(){var t=this.zf;if(this.Uf!==t){this.Uf=t;var n=this.gt,i=this.df,r=this.gf;if(i.clear(),r.clear(),null!=n)for(var e=0,u=n.length;e<u;e+=2){var s=n[e];null!=s&&i.add(s,s);var h=n[e+1];null!=h&&r.add(h,h)}}},i.prototype.destroy=function(){var t=this.Gf;t&&(this.Gf=null,t.detach(),t.destroy()),this.gt.length=0,this.zf=0,this.Hf=NaN,n.prototype.destroy.call(this)},i.prototype.hitTest=function(t,n){var r=this.Gf;if(r){var e=i.WORK;return e.set(t,n),r.toLocal(e,void 0,e),null!=r.contains(e.x,e.y)}return!1},i.prototype.calcHitPoint=function(t,n,r){var e=this.Gf;if(e){var u=i.WORK;return u.set(t,n),e.toLocal(u,void 0,u),r.shape=e,e.calcHitPoint(u.x,u.y,this.toThreshold,this.calcHitPointTestRange,this.calcHitPointHitTester,r)}return!1},i.prototype.toThreshold=function(t,n){return 1/0},i.prototype.calcHitPointTestRange=function(t,n,i,r,e){var u=Hv(r,t,2,0);return e[0]=Math.max(0,u-1),e[1]=u,e},i.prototype.calcHitPointHitTester=function(t,n,i,r,e,u,s,h,o){if(i<=t&&t<e){var a=e-i;if(1e-4<Math.abs(a)){var c=(t-i)/a,f=t,l=r+c*(u-r),v=Math.abs(l-n);if(v<h){var b=o.shape.transform,d=b.position,g=d.x,m=d.y,w=b.scale,p=w.x,O=w.y;return o.x=g+p*f,o.y=m+O*l,o.p0x=g+p*i,o.p0y=m+O*r,o.p1x=g+p*e,o.p1y=m+O*u,o.t=c,o.index=s,o.distance=v,!0}}}return!1},i.WORK=new t.Point,i}(_g),Xg=function(){function t(t,n,i,r){this.R=0,this.Qf=NaN,this._a=t,this._b=n,this._x0=i,this._y0=r}return Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(t){this._a!==t&&(this.R+=1,this._a=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(t){this._b!==t&&(this.R+=1,this._b=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x0",{get:function(){return this._x0},set:function(t){this._x0!==t&&(this.R+=1,this._x0=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y0",{get:function(){return this._y0},set:function(t){this._y0!==t&&(this.R+=1,this._y0=t)},enumerable:!1,configurable:!0}),t.prototype.toDirty=function(){this.R+=1},t.prototype.isDirty=function(){return this.R!==this.Qf},t.prototype.toClean=function(){this.Qf=this.R},t.from=function(n){var i,r,e,u;return new t(null!==(i=null==n?void 0:n.a)&&void 0!==i?i:1,null!==(r=null==n?void 0:n.b)&&void 0!==r?r:1,null!==(e=null==n?void 0:n.x0)&&void 0!==e?e:0,null!==(u=null==n?void 0:n.y0)&&void 0!==u?u:0)},t}(),Yg=function(n){function i(t){var i=n.call(this,t)||this;return i.Gf=null,i.yn=t,i.$f=NaN,i.tl=NaN,i.nl=Xg.from(t),i}return B(i,n),i.prototype.bind=function(t,i){var r,e=this.Gf;if(!e){var u=t.newStroke(i,null===(r=this.yn)||void 0===r?void 0:r.stroke);this.ho=u,(e=new _c).stroke.copy(u),this.Gf=e}e.attach(t.plotArea.container,i),this.nl.toDirty(),this.$f=NaN,this.tl=NaN,n.prototype.bind.call(this,t,i)},i.prototype.unbind=function(){var t=this.Gf;t&&t.detach(),n.prototype.unbind.call(this)},Object.defineProperty(i.prototype,"shape",{get:function(){return this.Gf},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parameters",{get:function(){return this.nl},enumerable:!1,configurable:!0}),i.prototype.toDirty=function(){this.nl.toDirty()},i.prototype.update=function(){var t=this.Gf,n=this.Sc;if(t&&n){var i=n.plotArea,r=this.Sf,e=r.x,u=r.y;if(e&&u){var s=i.width,h=i.height,o=this.nl,a=o.isDirty(),c=r.isDirty(e,u),f=r.isTransformDirty(e,u),l=s!==this.$f||h!==this.tl;(a||c||f||l)&&(o.toClean(),this.$f=s,this.tl=h,this.updateLine(t,e,u,s,h))}}},i.prototype.updateLine=function(t,n,i,r,e){var u=t.points.values,s=t.points.segments,h=this.nl,o=h.a,a=h.b,c=h.x0,f=h.y0,l=Math.abs(o),v=Math.abs(a),b=NaN,d=NaN,g=NaN,m=NaN,w=1e-5;if(v<=l){var p=n.unmap(n.transform.unmap(0)),O=n.unmap(n.transform.unmap(r));b=Math.min(p,O),g=Math.max(p,O);var D=i.unmap(i.transform.unmap(0)),E=i.unmap(i.transform.unmap(e));if(d=Math.min(D,E),m=Math.max(D,E),w<v){var M=(N=a/o)*(D-f)+c,S=N*(E-f)+c,j=Math.min(M,S),T=Math.max(M,S);d=(I=1/N)*((b=Math.max(b,j))-c)+a*f,m=I*((g=Math.min(g,T))-c)+a*f}else b=c,g=c}else if(D=i.unmap(i.transform.unmap(0)),E=i.unmap(i.transform.unmap(e)),d=Math.min(D,E),m=Math.max(D,E),p=n.unmap(n.transform.unmap(0)),O=n.unmap(n.transform.unmap(r)),b=Math.min(p,O),g=Math.max(p,O),w<l){var N,I,C=(N=o/a)*(p-c)+f,A=N*(O-c)+f,R=Math.min(C,A),y=Math.max(C,A);b=(I=1/N)*((d=Math.max(d,R))-f)+o*c,g=I*((m=Math.min(m,y))-f)+o*c}else d=f,m=f;b=n.transform.map(n.map(b)),d=i.transform.map(i.map(d));var L=.5*(b+(g=n.transform.map(n.map(g)))),k=.5*(d+(m=i.transform.map(i.map(m)))),x=Math.abs(g-b),B=Math.abs(m-d);b-=L,d-=k,g-=L,m-=k,4!==u.length?(u.length=0,u.push(b,d,g,m)):(u[0]=b,u[1]=d,u[2]=g,u[3]=m),0<s.length&&(s.length=0),t.disallowUploadedUpdate(),t.points.set(u,s),t.size.set(x,B),t.points.toFitted(),t.transform.position.set(L,k),t.allowUploadedUpdate(),rt.update(t)},i.prototype.updateRegion=function(){},i.prototype.destroy=function(){var t=this.Gf;t&&(this.Gf=null,t.detach(),t.destroy()),n.prototype.destroy.call(this)},i.prototype.hitTest=function(t,n){var r=this.Gf;if(r){var e=i.WORK;return e.set(t,n),r.toLocal(e,void 0,e),null!=r.contains(e.x,e.y)}return!1},i.prototype.calcHitPoint=function(t,n,r){var e=this.Gf;if(e){var u=i.WORK;return u.set(t,n),e.toLocal(u,void 0,u),r.shape=e,e.calcHitPoint(u.x,u.y,this.toThreshold,null,this.calcHitPointHitTester,r)}return!1},i.prototype.toThreshold=function(t,n){return 1/0},i.prototype.calcHitPointHitTester=function(t,n,i,r,e,u,s,h,o){if(i<=t&&t<e){var a=e-i;if(1e-4<Math.abs(a)){var c=(t-i)/a,f=t,l=r+c*(u-r),v=Math.abs(l-n);if(v<h){var b=o.shape.transform,d=b.position,g=d.x,m=d.y,w=b.scale,p=w.x,O=w.y;return o.x=o.p0x=o.p1x=g+p*f,o.y=o.p0y=o.p1y=m+O*l,o.t=c,o.index=s,o.distance=v,!0}}}return!1},i.WORK=new t.Point,i}(_g),Kg=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){var i;t.prototype.init.call(this,n);var r=this.plotArea;this.addChild(r),(null!==(i=null==n?void 0:n.mask)&&void 0!==i?i:this.theme.isOverflowMaskEnabled())&&(r.axis.container.mask=this.getOverflowMask())},n.prototype.getOverflowMask=function(){return null==this.ir&&(this.ir=new qi(this),this.reflowable.add(this.ir),this.toDirty()),this.ir},Object.defineProperty(n.prototype,"plotArea",{get:function(){var t=this.sf;return null==t&&(t=this.newPlotArea(),this.sf=t),t},enumerable:!1,configurable:!0}),n.prototype.newPlotArea=function(){var t;return new Tg(this,null===(t=this.yn)||void 0===t?void 0:t.plotArea)},n.prototype.getType=function(){return"DChart"},n.prototype.destroy=function(){var n;this._destroyed||(null===(n=this.sf)||void 0===n||n.destroy(),t.prototype.destroy.call(this))},n}(Zi),Jg=function(){function t(){}return t.prototype.redo=function(){throw new Error("Method not implemented.")},t.prototype.undo=function(){throw new Error("Method not implemented.")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return cb.UNSTORABLE|cb.CLEAR},t}(),Zg=function(){function t(){}return t.prototype.execute=function(){return wb.getDocumentController().delete()},t.prototype.redo=function(){throw new Error("Method not implemented.")},t.prototype.undo=function(){throw new Error("Method not implemented.")},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return cb.UNSTORABLE|cb.CLEAR},t}(),qg=function(){function t(t){this.Cr=t}return t.prototype.execute=function(){return wb.getDocumentController().saveAs(this.Cr)},t.prototype.redo=function(){return!0},t.prototype.undo=function(){return!0},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return cb.UNSTORABLE},t}(),Qg=function(){function t(){}return t.prototype.execute=function(){return wb.getDocumentController().save()},t.prototype.redo=function(){return!0},t.prototype.undo=function(){return!0},t.prototype.destroy=function(){},t.prototype.getFlag=function(){return cb.UNSTORABLE},t}(),$g=function(t){function n(n,i){var r=t.call(this)||this;r.p=n;var e=null==i?void 0:i.on;if(e)for(var u in e){var s=e[u];s&&r.on(u,s)}return r}return B(n,t),n.prototype.createAsUrl=function(t){return null==t||gn(t)?this.create({size:t,extractor:function(t){return Zv.base64({target:t})}}):this.create({size:t.size,cleanup:t.cleanup,extractor:function(t){return Zv.base64({target:t})}})},n.prototype.createAsFile=function(t,n){at(t)?this.create({extractor:function(n){Zv.file({target:n,filename:t})}}):null===t||gn(t)?this.create({size:t,extractor:function(t){Zv.file({target:t,filename:n})}}):this.create({size:t.size,cleanup:t.cleanup,extractor:function(n){Zv.file({target:n,filename:t.filename})}})},n.prototype.toScale=function(t,n){return null==t?1:t/rt.getResolution(n)/Math.max(n.width,n.height)},n.prototype.toCleanupSnap=function(t){if(null==t)return!0;var n=t.cleanup;return null==n||!0===n||!1!==n&&!1!==n.snap},n.prototype.toCleanupBackground=function(t){if(null==t)return!1;var n=t.cleanup;return null!=n&&!1!==n&&(!0===n||!0===n.background)},n.prototype.toCleanupReflow=function(t){if(null==t)return!0;var n=t.cleanup;return null==n||!0===n||!1!==n&&!1!==n.reflow},n.prototype.create=function(t){var n=this.p,i=n.canvas;if(i){var r=n.view,e=r.position,u=r.scale,s=e.x,h=e.y,o=u.x,a=u.y,c=this.toScale(t.size,i);r.transform(0,0,c,c,0);var f=void 0;if(this.toCleanupSnap(t)&&"snap"in i){var l=i.snap;null!=l&&((f=l.container).renderable?f.renderable=!1:f=void 0)}var v=void 0;if(this.toCleanupBackground(t)&&((v=i.snippet).renderable?v.renderable=!1:v=void 0),this.toCleanupReflow(t)){var b=rt.getLayer(i);b&&b.reflow()}this.emit("taking",i,this);var d=t.extractor(i);return this.emit("took",i,null,this),v&&(v.renderable=!0),null!=f&&(f.renderable=!0),r.transform(s,h,o,a,0),d}},n}(t.utils.EventEmitter),tm=function(t){function n(n){var i,r=this;return(r=t.call(this,n)||this).il=null,r.rl=null==n?void 0:n.tile,r.el=null==n?void 0:n.controller,r.ul=null!==(i=null==n?void 0:n.ambient)&&void 0!==i?i:r.theme.isAmbient(),r.sl=new $g(r,null==n?void 0:n.snapshot),r}return B(n,t),Object.defineProperty(n.prototype,"snapshot",{get:function(){return this.sl},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"controller",{get:function(){return this.el||null},enumerable:!1,configurable:!0}),n.prototype.set=function(t){var n=this,i=this.il;if(i!==t){if(i&&(this.il=null,this.canvas&&(this.canvas=null),this.onUnset()),this.il=t,t){var r=this.newCanvas(t),e=t.pieces,u=this.isEditMode(),s=Je.toPieceData(this.el,e,u).then((function(i){return n.newLayer(t,r,u,e,i)}));return this.onSet(t,r),this.canvas=r,s}return Promise.resolve(null)}return Promise.resolve(this.canvas)},n.prototype.onSet=function(t,n){},n.prototype.newLayer=function(t,n,i,r,e){var u=this,s=new vr(t,r,e,i),h=Je.newLayer(t,n.layer,s).then((function(t){return u.initLayer(n,t)}));if(this.ul){var o=this.toCanvasBaseBackgroundOptions(t,this.theme,!1);this.background.color=o.color,this.background.alpha=o.alpha}return h},n.prototype.initLayer=function(t,n,i){return t.layer.init(),t.initialize(n,i),rt.update(this),this.emit("ready",this),t},n.prototype.toCanvasBaseOptions=function(t){var n,i=this.theme,r=this.ul;return{name:t.name,width:t.width,height:t.height,background:this.toCanvasBaseBackgroundOptions(t,i,r),border:r?{color:null}:void 0,outline:r?{color:null}:void 0,shadow:r?null:i.getCanvasShadow(),tile:{factory:this.rl,mapping:null===(n=t.tile)||void 0===n?void 0:n.mapping},ambient:r}},n.prototype.toCanvasBaseBackgroundOptions=function(t,n,i){var r,e;if(i)return{color:null};var u=t.background;return{color:null!==(r=null==u?void 0:u.color)&&void 0!==r?r:n.getCanvasBackgroundColor(),alpha:null!==(e=null==u?void 0:u.alpha)&&void 0!==e?e:n.getCanvasBackgroundAlpha()}},n.prototype.onUnset=function(){},n.prototype.get=function(){return this.il},Object.defineProperty(n.prototype,"layer",{get:function(){var t=this.canvas;return t?t.layer.active:null},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DDiagramBase"},n}(cr),nm=function(){function t(t,n){this.Yn=t,this.Er=n}return t.prototype.getTheme=function(){return this.Yn.getTheme()},t.prototype.setTheme=function(t){this.Yn.setTheme(t)},t.prototype.getBaseColor=function(){return this.Er},t.prototype.setBaseColor=function(t){this.Er=t},t.prototype.getColor=function(t){var n=this.Yn,i=this.Er,r=n.getColor(t);return null!=i?null!=r?Jt.blend(i,r,n.getAlpha(t)):i:r},Object.defineProperty(t.prototype,"color",{get:function(){return this.Yn.color},set:function(t){this.Yn.color=t},enumerable:!1,configurable:!0}),t.prototype.getAlpha=function(t){return null!=this.Er?1:this.Yn.getAlpha(t)},Object.defineProperty(t.prototype,"alpha",{get:function(){return this.Yn.alpha},set:function(t){this.Yn.alpha=t},enumerable:!1,configurable:!0}),t}(),im=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),Object.defineProperty(n.prototype,"lon",{get:function(){return this.x},set:function(t){this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lat",{get:function(){return this.y},set:function(t){this.y=t},enumerable:!1,configurable:!0}),n.prototype.toObject=function(){return{lon:this.x,lat:this.y}},n}(t.ObservablePoint),rm=function(){function t(t,n,i,r,e,u){if(this.hl=t,!0===n||!1===n)this.O=n,this.Nt=new im(t,null,i,r),this.It=new im(t,null,e,u);else if(null!=n){this.O=n.enable;var s=n.from,h=n.to;this.Nt=new im(t,null,s.lon,s.lat),this.It=new im(t,null,h.lon,h.lat)}else this.O=!1,this.Nt=new im(t,null,-180,85.05112877980659),this.It=new im(t,null,180,-85.05112877980659)}return Object.defineProperty(t.prototype,"enable",{get:function(){return this.O},set:function(t){this.O!==t&&(this.O=t,this.hl())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{enable:this.O,from:this.Nt.toObject(),to:this.It.toObject()}},t}(),em=function(){function t(t,n){var i=this;this.tr=t,this.ol=null==n?void 0:n.factory,this.Ut=new rm((function(){i.onMappingChange()}),null==n?void 0:n.mapping)}return t.prototype.init=function(){this.onMappingChange()},t.prototype.onMappingChange=function(){var t=this.ol;if(t){var n,i=this.Ut;i.enable?(n=this.al)?n.mapping=i:this.al=t(this.tr).fit():(n=this.al)&&(this.al=void 0,n.destroy())}},Object.defineProperty(t.prototype,"pyramid",{get:function(){return this.al},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"factory",{get:function(){return this.ol},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapping",{get:function(){return this.Ut},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{mapping:this.Ut.serialize()}},t.prototype.destroy=function(){var t=this.al;null!=t&&(this.al=void 0,t.destroy())},t}(),um=function(t){function n(n,i){var r=t.call(this)||this;return r.eh=null,r.Mt=n,r.hn=i,r.interactive=!1,r.interactiveChildren=!1,r}return B(n,t),n.prototype.init=function(){if(null==this.eh){var t=this.children,n=t.length;0<n&&(this.eh=t[n-1])}},Object.defineProperty(n.prototype,"active",{get:function(){return this.eh},set:function(t){this.eh!==t&&(null==t||0<=this.children.indexOf(t))&&(this.eh=t,this.onLayerChange())},enumerable:!1,configurable:!0}),n.prototype.create=function(t,n){var i=new ou(t);return this.attach(i,n),i},n.prototype.attach=function(t,n){this.addChild(t),!0===n&&(this.eh=t),this.onLayerChange(),rt.update(this)},n.prototype.attachAt=function(t,n,i){this.addChildAt(t,n),!0===i&&(this.eh=t),this.onLayerChange(),rt.update(this)},n.prototype.detach=function(t,n){var i=this.children,r=i.indexOf(t);0<=r&&(this.eh=n,i.splice(r,1),t.parent=void 0,this.onLayerChange(),rt.update(this))},n.prototype.delete=function(t,n){var i=this.children,r=i.indexOf(t);return 0<=r&&(i.splice(r,1),t.parent=void 0,this.eh===t&&(!0===n?r<i.length?this.eh=i[r]:0<i.length?this.eh=i[r-1]:this.eh=null:this.eh=null),this.onLayerChange(),rt.update(this)),r},n.prototype.get=function(t){var n=this.children[t];return null!=n?n:null},n.prototype.clear=function(){var t=this.children;if(0<t.length){for(var n=t.length-1;0<=n;--n){var i=t[n];i.parent=null,i.destroy()}t.length=0,this.onLayerChange(),rt.update(this)}},n.prototype.destroy=function(){this._destroyed||(this.clear(),t.prototype.destroy.call(this))},n.prototype.size=function(){return this.children.length},n.prototype.onLayerChange=function(){this.emit("change",this)},n.prototype.serialize=function(t,n){for(var i=[],r=this.children,e=0,u=r.length;e<u;++e)r[e].addUuid(t);for(e=0,u=r.length;e<u;++e)r[e].updateUuid(t);for(e=0,u=r.length;e<u;++e)i.push(r[e].serialize(e,t,n));return i},n.prototype.deserialize=function(t,n){var i=t.length;if(0<i){for(var r=this.Mt,e=this.hn,u=0;u<i;++u)this.addChild(ou.deserialize(t[u],n,r,e));this.onLayerChange(),rt.update(this)}},n}(t.Container),sm=function(t){function n(n){var i=t.call(this,n)||this,r=i.theme;i.isAmbient(r,n)||(i.Dn=new nm(i.Dn,i.toBackgroundBase(r,n)));var e=new um(i.width,i.height);i.Zu=e,i.addChild(e);var u=new em(i,null==n?void 0:n.tile);return i.cl=u,u.init(),i}return B(n,t),n.prototype.isAmbient=function(t,n){var i;return null!==(i=null==n?void 0:n.ambient)&&void 0!==i?i:t.isAmbient()},n.prototype.toBackgroundBase=function(t,n){var i,r;return null!==(r=null===(i=null==n?void 0:n.background)||void 0===i?void 0:i.base)&&void 0!==r?r:t.getBackgroundBase()},Object.defineProperty(n.prototype,"tile",{get:function(){return this.cl},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"layer",{get:function(){return this.Zu},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,n){},n.prototype.destroy=function(){this._destroyed||(this.onDestroy(),t.prototype.destroy.call(this))},n.prototype.onDestroy=function(){this.cl.destroy(),this.Zu.destroy()},n.prototype.hitTest=function(t,n){for(var i=this.Zu.children,r=i.length-1;0<=r;--r){var e=i[r];if(e.visible){var u=e.hitTest(t,n);if(null!=u)return u}}return null},n.prototype.getType=function(){return"DDiagramCanvasBase"},n}(Hd),hm=function(){function t(){}return Object.defineProperty(t.prototype,"private",{get:function(){var t=this.Gt;return null==t&&(t=this.newPrivate(),this.Gt=t),t},enumerable:!1,configurable:!0}),t.prototype.newPrivate=function(){return new At},Object.defineProperty(t.prototype,"protected",{get:function(){var t=this.fl;return null==t&&(t=this.newProtected(),this.fl=t),t},enumerable:!1,configurable:!0}),t.prototype.newProtected=function(){return new At},Object.defineProperty(t.prototype,"extended",{get:function(){var t=this.ll;return null==t&&(t=this.newExtended(),this.ll=t),t},enumerable:!1,configurable:!0}),t.prototype.newExtended=function(){return new At},Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Bt;if(null==t)return[];var n=[];return t.forEach((function(t,i){n.push(i)})),n},enumerable:!1,configurable:!0}),t.prototype.each=function(t){var n=this.Bt;if(null==n)return null;var i=null;return n.forEach((function(n,r){null==i&&!1===t(r)&&(i=r)})),i},t.prototype.add=function(t,n){var i,r=null!==(i=this.Bt)&&void 0!==i?i:this.Bt=new Map,e=r.get(t);null==e?r.set(t,[n]):e.push(n)},t.prototype.set=function(t,n,i,r,e,u){var s=this.Bt;if(null==s)return!1;var h=s.get(t);if(null==h)return!1;var o=h.length;if(o<=0)return!1;for(var a=0;a<o;++a){var c=h[a];c.range.set(e,u),void 0!==i&&(c.time=i),void 0!==r&&(c.state=r),c.value=n}return!0},t.prototype.clear=function(t){var n=this.Bt;if(null==n)return!1;var i=n.get(t);if(null==i)return!1;var r=i.length;if(r<=0)return!1;for(var e=0;e<r;++e)i[e].clear();return!0},t.prototype.toDirty=function(t){var n=this.Bt;if(null==n)return!1;var i=n.get(t);if(null==i)return!1;var r=i.length;if(r<=0)return!1;for(var e=0;e<r;++e)i[e].toDirty();return!0},t.prototype.setAll=function(t,n,i,r,e,u){var s=this.Bt;if(null==s)return!1;var h=s.get(t);if(null==h)return!1;var o=h.length;if(o<=0)return!1;for(var a=0;a<o;++a){var c=h[a];c.range.set(e,u),void 0!==i&&(c.times=i),void 0!==r&&(c.states=r),c.values=n}return!0},t.prototype.setValue=function(t,n){var i=this.Bt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].value=n;return!0},t.prototype.setValues=function(t,n){var i=this.Bt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].values=n;return!0},t.prototype.setTime=function(t,n){var i=this.Bt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].time=n;return!0},t.prototype.setTimes=function(t,n){var i=this.Bt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].times=n;return!0},t.prototype.setState=function(t,n){var i=this.Bt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].state=n;return!0},t.prototype.setStates=function(t,n){var i=this.Bt;if(null==i)return!1;var r=i.get(t);if(null==r)return!1;var e=r.length;if(e<=0)return!1;for(var u=0;u<e;++u)r[u].states=n;return!0},t.prototype.setRange=function(t,n,i){var r=this.Bt;if(null==r)return!1;var e=r.get(t);if(null==e)return!1;var u=e.length;if(u<=0)return!1;for(var s=0;s<u;++s){var h=e[s].range;void 0!==n&&(null!==n?(h.type|=Ot.FROM,h.from=n):h.type&=~Ot.FROM),void 0!==i&&(null!==i?(h.type|=Ot.TO,h.to=i):h.type&=~Ot.TO)}return!0},t}(),om=function(){function t(t,n,i){var r=this;this.p=t;var e=i.controller;this.el=e;var u=function(){r.onChange()};e.grid.on("change",u),e.target.on("change",u);var s=new xe;s.visible=!1,this.Sc=s,t.addChildAt(s,t.children.length-1),this.vl=this.toGrid(n,i.grid),this.Yn=this.toTarget(n,i.target)}return t.prototype.toGrid=function(t,n){var i;return{major:this.toGridMajor(t,null==n?void 0:n.major),minor:this.toGridMinor(t,null==n?void 0:n.minor),size:null!==(i=null==n?void 0:n.size)&&void 0!==i?i:t.getSnapGridSize()}},t.prototype.toGridMajor=function(t,n){var i,r,e,u,s;return{interval:null!==(i=null==n?void 0:n.interval)&&void 0!==i?i:t.getSnapGridMajorInterval(),color:null!==(r=null==n?void 0:n.color)&&void 0!==r?r:t.getSnapGridMajorColor(),alpha:null!==(e=null==n?void 0:n.alpha)&&void 0!==e?e:t.getSnapGridMajorAlpha(),width:null!==(u=null==n?void 0:n.width)&&void 0!==u?u:t.getSnapGridMajorWidth(),style:null!==(s=null==n?void 0:n.style)&&void 0!==s?s:t.getSnapGridMajorStyle()}},t.prototype.toGridMinor=function(t,n){var i,r,e,u;return{color:null!==(i=null==n?void 0:n.color)&&void 0!==i?i:t.getSnapGridMinorColor(),alpha:null!==(r=null==n?void 0:n.alpha)&&void 0!==r?r:t.getSnapGridMinorAlpha(),width:null!==(e=null==n?void 0:n.width)&&void 0!==e?e:t.getSnapGridMinorWidth(),style:null!==(u=null==n?void 0:n.style)&&void 0!==u?u:t.getSnapGridMinorStyle()}},t.prototype.toTarget=function(t,n){var i,r,e,u;return{color:null!==(i=null==n?void 0:n.color)&&void 0!==i?i:t.getSnapTargetColor(),alpha:null!==(r=null==n?void 0:n.alpha)&&void 0!==r?r:t.getSnapTargetAlpha(),width:null!==(e=null==n?void 0:n.width)&&void 0!==e?e:t.getSnapTargetWidth(),style:null!==(u=null==n?void 0:n.style)&&void 0!==u?u:t.getSnapTargetStyle()}},t.prototype.onChange=function(){var t=this.p;t.toDirty(),rt.update(t)},Object.defineProperty(t.prototype,"container",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return this.el.serialize()},t.prototype.onReflow=function(){var t=this.p,n=this.Sc,i=this.el,r=i.grid.visible,e=i.target.visible;if(r||e){var u=t.width,s=t.height,h=.5*u,o=.5*s,a=$.TOP,c=$.LEFT,f=n.children,l=0;if(r){for(var v=this.vl,b=v.major,d=v.minor,g=b.interval,m=v.size(i.grid.size,u,s),w=m,p=1;w<u;w+=m,p+=1,l+=1){var O=p%g==0?b:d;this.update(n,f,l,w,o,a,u,s,O)}for(var D=m,E=1;D<s;D+=m,E+=1,l+=1)O=E%g==0?b:d,this.update(n,f,l,h,D,c,u,s,O)}if(e)for(var M=i.target.values,S=this.Yn,j=0,T=M.length;j<T;j+=1,l+=1){var N=M[j],I=N.position;N.type===Tv.VERTICAL?this.update(n,f,l,I,o,a,u,s,S):this.update(n,f,l,h,I,c,u,s,S)}for(j=l,T=f.length;j<T;++j)f[j].visible=!1;n.visible=!0}else n.visible=!1},t.prototype.update=function(t,n,i,r,e,u,s,h,o){var a=null;i<n.length?((a=n[i]).disallowUploadedUpdate(),a.points.position=u,a.transform.position.set(r,e),a.stroke.set(!0,o.color,o.alpha,o.width,void 0,void 0,o.style),a.size.set(s,h),a.visible=!0,a.allowUploadedUpdate()):((a=new Vt).disallowUploadedUpdate(),a.points.position=u,a.transform.position.set(r,e),a.stroke.set(!0,o.color,o.alpha,o.width,void 0,void 0,o.style),a.size.set(s,h),a.visible=!0,a.allowUploadedUpdate(),a.attach(t))},t}(),am=function(t){function n(n){var i=t.call(this,n)||this;return i.bl=i.toSnap(i.theme,n.snap),i}return B(n,t),n.prototype.toSnap=function(t,n){return n?new om(this,t,n):null},Object.defineProperty(n.prototype,"snap",{get:function(){return this.bl},enumerable:!1,configurable:!0}),n.prototype.serialize=function(t,n){var i,r=new Mv,e=[],u=this.Dn,s=u.color,h=u.alpha;return{version:1,id:t,name:this.name,width:this.width,height:this.height,background:{color:gn(s)?s:16777215,alpha:gn(h)?h:0},tile:this.cl.serialize(),resources:r.resources,data:r.data,pieces:r.pieces,layers:this.Zu.serialize(r,e),items:e,snap:null===(i=this.bl)||void 0===i?void 0:i.serialize(),thumbnail:null==n?void 0:n.serialize()}},n.prototype.onReflow=function(){var n;t.prototype.onReflow.call(this),null===(n=this.bl)||void 0===n||n.onReflow()},n.prototype.getType=function(){return"DDiagramCanvasEditor"},n}(sm),cm=function(){function t(){this.Bt=new Map}return t.prototype.add=function(t,n){var i=this.Bt,r=i.get(t);null==r?i.set(t,[n]):r.push(n)},t.prototype.get=function(t){var n=this.Bt.get(t);return n&&0<n.length?n[0]:null},t.prototype.getAll=function(t){return this.Bt.get(t)||[]},t}(),fm=function(){function t(t,n){var i=this;this.p=t,this.L=[],this.Ko=n,this.dl=function(){i.onTime()}}return t.prototype.add=function(t){this.L.push(t)},t.prototype.start=function(){null==this.ml&&this.onTime()},t.prototype.getInterval=function(){var t=Date.now(),n=this.Ko;return Math.max(0,n-t%n)},t.prototype.onTime=function(){var t=this.L;if(0<t.length){for(var n=Date.now()/this.Ko,i=0,r=t.length;i<r;++i)t[i].value=n;rt.update(this.p)}this.ml=window.setTimeout(this.dl,this.getInterval())},t.prototype.stop=function(){var t=this.ml;null!=t&&(clearTimeout(t),this.ml=void 0)},t}(),lm=function(){function t(t){this.p=t,this.Bt=new Map}return t.prototype.add=function(t){var n=this.Bt,i=this.toNormalized(t),r=n.get(i);if(null!=r)return r;var e=new fm(this.p,i);return n.set(i,e),e},t.prototype.toNormalized=function(t){return gn(t)?Math.max(1,Math.round(t)):1e3},t.prototype.start=function(){this.Bt.forEach((function(t){t.start()}))},t.prototype.stop=function(){this.Bt.forEach((function(t){t.stop()}))},t}(),vm=function(n){function i(t){var i=n.call(this,t)||this;return i.Bt=new hm,i.kr=new cm,i.wl=new lm(i),i.pl=[],i.Ol=new Set,i.Zo=function(){rt.update(i)},i}return B(i,n),Object.defineProperty(i.prototype,"data",{get:function(){return this.Bt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shape",{get:function(){return this.kr},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ticker",{get:function(){return this.wl},enumerable:!1,configurable:!0}),i.prototype.initialize=function(t,n){var i=Date.now(),r=this.pl;this.Dl(t,null,null,n,new Map,new Map,new Map,this.wl,this.kr,this.Bt,r);for(var e=this.Zu.children,u=0,s=e.length;u<s;++u)e[u].initialize(r);for(tn.isInitializing=!0,u=0,s=e.length;u<s;++u)for(var h=e[u].children,o=0,a=h.length;o<a;++o)h[o].update(i);tn.isInitializing=!1,this.wl.start()},i.prototype.Dl=function(t,n,i,r,e,u,s,h,o,a,c){for(var f=function(f,v){var b=t[f],d=b.id;0<d.length&&o.add(d,b),l.initData(b,n,i,r,e,u,h,a);var g=new(Eo[b.type]||Qt)(b);b.runtime=g,l.initActions(b,g,s),g.isActionable()&&c.push(b);var m=b.shortcut;null!=m&&Zt.on(b,m,(function(t){g.onClick(b,t)})),g.initialize(b);var w=b.children;if(0<w.length){var p=n,O=i;b instanceof _r&&(null==p&&(p=b),O=b),l.Dl(w,p,O,r,e,u,s,h,o,a,c)}},l=this,v=0,b=t.length;v<b;++v)f(v)},i.prototype.initData=function(t,n,i,r,e,u,s,h){for(var o=t.data,a="",c="",f=0,l=o.size();f<l;++f){var v=o.get(f);if(null!=v)switch(v.type){case Mt.NUMBER:case Mt.NUMBER_ARRAY:case Mt.STRING:case Mt.STRING_ARRAY:case Mt.OBJECT:case Mt.OBJECT_ARRAY:if(v.scope===St.PRIVATE)0<(b=v.id).length&&(i?i.data.private.add(b,v):h.private.add(b,v));else if(v.scope===St.PROTECTED)0<(b=v.id).length&&h.protected.add(b,v);else{var b;r&&r(v,n||t),0<(b=v.id).length&&h.add(b,v)}if(a=v.format,c=v.initial,e.has(a))v.formatter=e.get(a);else if(0<a.length)try{var d=this.calcFormatter(v,a,c);e.set(a,d),v.formatter=d}catch(t){}if(u.has(c))v.value=u.get(c);else if(0<c.length)try{var g=this.calcInitial(v,c);u.set(c,g),v.value=g}catch(t){}break;case Mt.TICKER:if(c=v.initial,u.has(c))v.value=0,s.add(u.get(c)).add(v);else if(0<c.length)try{g=this.calcInitial(v,c),u.set(c,g),v.value=0,s.add(g).add(v)}catch(t){}break;default:var m=pv.get(v.type);m&&(h.extended.add(m.id,v),v.value=m.initial)}}},i.prototype.initActions=function(t,n,i){for(var r=t.action.values,e=n.actions,u=0,s=r.length;u<s;++u){var h=r[u],o=i.get(h);null==o?null!=(o=h.toRuntime())&&(i.set(h,o),e.push(o),n.reset|=o.reset):(e.push(o),n.reset|=o.reset)}},i.prototype.calcFormatter=function(t,n,i){var r=this.toInitial(t);return Function("value","try {"+"return (".concat(n,");")+"} catch( e1 ) {try {"+"return (".concat(0<i.length?i:r,");")+"} catch( e2 ) {"+"return ".concat(r,";")+"}}")},i.prototype.calcInitial=function(t,n){return Function("try {"+"return (".concat(n,");")+"} catch( e ) {"+"return ".concat(this.toInitial(t),";")+"}")()},i.prototype.toInitial=function(t){switch(t.type){case Mt.NUMBER:return"0";case Mt.NUMBER_ARRAY:return"[]";case Mt.STRING:return'""';case Mt.STRING_ARRAY:return"[]";case Mt.OBJECT:return"{}";case Mt.OBJECT_ARRAY:return"[]";case Mt.TICKER:default:return"0"}},i.prototype.onDestroy=function(){this.wl.stop(),n.prototype.onDestroy.call(this)},i.prototype.hitTestInteractives=function(t){for(var n=this.Zu.children,i=n.length-1;0<=i;--i){var r=n[i];if(r.visible){var e=r.hitTestInteractives(t);if(null!=e)return e}}return null},i.prototype.onShapeMove=function(t){var n=this.hitTestInteractives(t.data.global),i=rt.getLayer(this);if(i){var r=i.view,e=this.toShapeCursor(n),u=r.style;u.cursor!==e&&(u.cursor=e);var s=this.toShapeTitle(n);r.title!==s&&(r.title=s)}var h=this.El;if(this.El=n,n===h){if(null!=n){var o=n.runtime;o&&o.onMove(n,t)}}else this.onShapeOut(t,h,n),this.onShapeOver(t,n);return null!=n},i.prototype.toShapeCursor=function(t){if(null!=t){var n=t.cursor;if(0<n.length)return n}return"auto"},i.prototype.toShapeTitle=function(t){return null!=t&&t.title||""},i.prototype.onShapeOut=function(t,n,i){for(;null!=n&&n!==i&&n instanceof wt;){var r=n.runtime;r&&r.onOut(n,t),n=n.parent}},i.prototype.onShapeOver=function(t,n,i){for(;null!=n&&n!==i&&n instanceof wt;){var r=n.runtime;r&&r.onOver(n,t),n=n.parent}},i.prototype.onShapeDown=function(t){var n=this.hitTestInteractives(t.data.global);if(this.Ml=n,n){this.Ol.add(n);for(var i=n;;){var r=i.runtime;r&&r.onDown(i,t);var e=i.parent;if(!(e instanceof wt))break;i=e}return!0}return!1},i.prototype.onShapeUp=function(t){var n=this.Ol,i=this.hitTestInteractives(t.data.global);if(i){n.delete(i);for(var r=i;;){var e=r.runtime;e&&e.onUp(r,t);var u=r.parent;if(!(u instanceof wt))break;r=u}}return this.onShapeCancel(t),null!=i},i.prototype.onShapeCancel=function(t){var n=this.Ol;return 0<n.size&&(n.forEach((function(n){for(var i=n;;){var r=i.runtime;r&&r.onUpOutside(i,t);var e=i.parent;if(!(e instanceof wt))break;i=e}})),n.clear(),!0)},i.prototype.onShapeClick=function(t){var n=this.hitTestInteractives(t.data.global);if(n&&this.Ml===n){for(var i=n;;){var r=i.runtime;r&&r.onClick(i,t);var e=i.parent;if(!(e instanceof wt))break;i=e}return!0}return!1},i.prototype.onShapeDblClick=function(n,r){var e,u=null!==(e=i.WORK_DBLCLICK)&&void 0!==e?e:i.WORK_DBLCLICK=new t.Point;Wi.toGlobal(n,r,u);var s=this.hitTestInteractives(u);if(s){for(var h=s;;){var o=h.runtime;o&&o.onDblClick(h,n,r);var a=h.parent;if(!(a instanceof wt))break;h=a}return!0}return!1},i.prototype.update=function(){var t=this.pl;if(0<t.length){for(var n=-1,i=Date.now(),r=0,e=t.length;r<e;++r){var u=t[r];u.update(i);var s=u.runtime;if(s&&i<s.effect){var h=s.effect;i<h&&(n=n<0?h:Math.min(n,h))}}0<=n&&window.setTimeout(this.Zo,n-Date.now())}},i.prototype.onRender=function(t){var n=this.pl;if(0<n.length){for(var i=-1,r=Date.now(),e=0,u=n.length;e<u;++e){var s=n[e];s.onRender(r,t);var h=s.runtime;if(h&&r<h.effect){var o=h.effect;r<o&&(i=i<0?o:Math.min(i,o))}}0<=i&&window.setTimeout(this.Zo,i-Date.now())}},i.prototype.getType=function(){return"DDiagramCanvas"},i}(sm),bm=function(){function t(t){this.Sl=t}return Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Sl.canvas;return null!=t?t.data.private.ids:[]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r,e,u){var s=this.Sl.canvas;return null!=s&&s.data.private.set(t,n,i,r,e,u)},t.prototype.toDirty=function(t){var n=this.Sl.canvas;return null!=n&&n.data.private.toDirty(t)},t.prototype.each=function(t){var n=this.Sl.canvas;return null!=n?n.data.private.each(t):null},t}(),dm=function(){function t(t){this.Sl=t}return Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Sl.canvas;return null!=t?t.data.protected.ids:[]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r,e,u){var s=this.Sl.canvas;return null!=s&&s.data.protected.set(t,n,i,r,e,u)},t.prototype.toDirty=function(t){var n=this.Sl.canvas;return null!=n&&n.data.protected.toDirty(t)},t.prototype.each=function(t){var n=this.Sl.canvas;return null!=n?n.data.protected.each(t):null},t}(),gm=function(){function t(t){this.el=t&&t.controller}return t.prototype.set=function(t,n){var i=this.el;return!!i&&(i.write(t,n),!0)},t}(),mm=function(){function t(t){this.Sl=t}return Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Sl.canvas;return null!=t?t.data.extended.ids:[]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n,i,r,e,u){var s=this.Sl.canvas;return null!=s&&s.data.extended.set(t,n,i,r,e,u)},t.prototype.toDirty=function(t){var n=this.Sl.canvas;return null!=n&&n.data.extended.toDirty(t)},t.prototype.each=function(t){var n=this.Sl.canvas;return null!=n?n.data.extended.each(t):null},t}(),wm=function(){function t(t,n){this.Sl=t,this.jl=n&&n.mapper||null,this.Tl=new gm(n&&n.remote),this.Gt=new bm(t),this.fl=new dm(t),this.ll=new mm(t)}return t.prototype.update=function(){},Object.defineProperty(t.prototype,"mapper",{get:function(){return this.jl},set:function(t){this.jl=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remote",{get:function(){return this.Tl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"private",{get:function(){return this.Gt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"protected",{get:function(){return this.fl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"extended",{get:function(){return this.ll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ids",{get:function(){var t=this.Sl.canvas;return t?t.data.ids:[]},enumerable:!1,configurable:!0}),t.prototype.each=function(t){var n=this.Sl.canvas;return null!=n?n.data.each(t):null},t.prototype.set=function(t,n,i,r,e,u){var s=this.Sl.canvas;return null!=s&&s.data.set(t,n,i,r,e,u)},t.prototype.clear=function(t){var n=this.Sl.canvas;return null!=n&&n.data.clear(t)},t.prototype.toDirty=function(t){var n=this.Sl.canvas;return null!=n&&n.data.toDirty(t)},t.prototype.setAll=function(t,n,i,r,e,u){var s=this.Sl.canvas;return null!=s&&s.data.setAll(t,n,i,r,e,u)},t.prototype.setValue=function(t,n){var i=this.Sl.canvas;return null!=i&&i.data.setValue(t,n)},t.prototype.setValues=function(t,n){var i=this.Sl.canvas;return null!=i&&i.data.setValues(t,n)},t.prototype.setTime=function(t,n){var i=this.Sl.canvas;return null!=i&&i.data.setTime(t,n)},t.prototype.setTimes=function(t,n){var i=this.Sl.canvas;return null!=i&&i.data.setTimes(t,n)},t.prototype.setState=function(t,n){var i=this.Sl.canvas;return null!=i&&i.data.setState(t,n)},t.prototype.setStates=function(t,n){var i=this.Sl.canvas;return null!=i&&i.data.setStates(t,n)},t.prototype.setRange=function(t,n,i){var r=this.Sl.canvas;return null!=r&&r.data.setRange(t,n,i)},t}(),pm=function(){function t(t,n,i){this.sl=t,this.Ju=this.toIsEnabled(n,i),this.yn=this.toCreateAsUrlOptions(n,i)}return t.prototype.toIsEnabled=function(t,n){var i;return null!==(i=null==n?void 0:n.enable)&&void 0!==i?i:t.isThumbnailEnabled()},t.prototype.toSize=function(t,n){return void 0!==n?n:t.getThumbnailSize()},t.prototype.toCleanup=function(t,n){var i,r;return null==n||!0===n?{snap:!0,background:!0}:!1===n?{snap:!1,background:!1}:{snap:null===(i=n.snap)||void 0===i||i,background:null===(r=n.background)||void 0===r||r}},t.prototype.toCreateAsUrlOptions=function(t,n){return{size:this.toSize(t,null==n?void 0:n.size),cleanup:this.toCleanup(t,null==n?void 0:n.cleanup)}},Object.defineProperty(t.prototype,"enable",{get:function(){return this.Ju},set:function(t){this.Ju=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.yn.size},set:function(t){this.yn.size=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cleanup",{get:function(){return this.yn.cleanup},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){if(this.Ju)return this.sl.createAsUrl(this.yn)},t}(),Om=function(t){function n(n){var i=t.call(this,n)||this;return i.Pt=!1,i.Pt=!1,wb.getCommandController().on("dirty",(function(){!0!==i.Pt&&(i.Pt=!0,i.emit("change",i))})),i.Nl=new Rv(i),i.Il=new pm(i.sl,i.theme,null==n?void 0:n.thumbnail),i}return B(n,t),Object.defineProperty(n.prototype,"thumbnail",{get:function(){return this.Il},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"snapper",{get:function(){return this.Nl},enumerable:!1,configurable:!0}),n.prototype.isEditMode=function(){return!0},n.prototype.newCanvas=function(t){return new am(this.toCanvasOptions(t))},n.prototype.toCanvasOptions=function(t){var n=this.toCanvasBaseOptions(t),i=this.Nl,r=n.snap;return null==r?n.snap={controller:i}:null==r.controller&&(r.controller=i),n},n.prototype.serialize=function(){var t=this.canvas,n=this.il;if(null!=t&&null!=n){this.emit("serializing",t,this);try{var i=t.serialize(n.id,this.Il);return this.emit("serialized",t,null,this),i}catch(n){return this.emit("serialized",t,"exception",this),null}}return null},n.prototype.save=function(){var t=this,n=this.serialize();if(null!=n){var i=this.el;if(i){var r=Je.toSimple(n);return this.emit("saving",r,this),i.save(r).then((function(i){t.Pt=!1,n.id=i,t.il=n,t.emit("change",t),t.emit("saved",null,t)}),(function(n){t.emit("saved",n,t)}))}return this.emit("saved","no-controller",this),Promise.reject()}return this.emit("saved",null,this),Promise.resolve()},n.prototype.saveAs=function(t){var n=this,i=this.serialize();if(null!=i){var r=this.el;if(r){i.id=void 0,i.name=t;var e=Je.toSimple(i);return this.emit("saving",e,this),r.save(e).then((function(r){n.Pt=!1,i.id=r,n.il=i;var e=n.canvas;null!=e&&(e.name=t),n.emit("change",n),n.emit("saved",null,n)}),(function(t){n.emit("saved",t,n)}))}return this.emit("saved","no-controller",this),Promise.reject("no-controller")}return this.emit("saved",null,this),Promise.resolve()},n.prototype.delete=function(){var t=this,n=this.il;if(n&&null!=n.id){var i=this.el;return i?(this.emit("deleting",this),i.delete(n.id).then((function(){t.set(null),t.emit("deleted",t)}),(function(n){t.emit("deleted",n,t)}))):(this.emit("deleted","no-controller",this),Promise.reject("no-controller"))}return this.set(null),this.emit("deleted",null,this),Promise.resolve()},n.prototype.create=function(t,n,i){this.set({version:1,id:void 0,name:t,width:n,height:i,resources:[],data:[],layers:[["Default layer"]],items:[],snap:void 0})},n.prototype.onSet=function(n,i){t.prototype.onSet.call(this,n,i);var r=n.snap,e=this.Nl;null!=r?e.deserialize(r):e.reset(),this.ul&&(e.target.visible=!1,e.grid.visible=!1),this.Pt=!1,this.emit("change",this)},n.prototype.onUnset=function(){t.prototype.onUnset.call(this),this.Pt=!1,this.emit("change",this)},n.prototype.open=function(t){var n=this,i=this.el;return i?(this.emit("opening",this),i.get(t).then((function(t){n.set(Je.toSerialized(t)),n.emit("opened",null,n)}),(function(t){n.emit("opened",t,n)}))):(this.emit("opened","no-controller",this),Promise.reject("no-controller"))},n.prototype.close=function(){this.set(null)},n.prototype.isChanged=function(){return this.Pt||this.isNew()},n.prototype.isNew=function(){var t=this.il;return null!=t&&null==t.id},n.prototype.getName=function(){var t=this.il;return null!=t?t.name:null},n.prototype.getType=function(){return"DDiagramEditor"},n}(tm),Dm=function(t){function n(n){var i=t.call(this)||this;return i.Sl=n,i.Zo=function(){rt.update(n)},i}return B(n,t),n.prototype.update=function(){var t=this.Sl.canvas;t&&t.update()},n.prototype.onRender=function(t){var n=this.Sl.canvas;n&&n.onRender(t)},n.prototype.get=function(t){var n=this.Sl.canvas;return n?n.shape.get(t):null},n.prototype.getAll=function(t){var n=this.Sl.canvas;return n?n.shape.getAll(t):[]},n.prototype.each=function(t,n){void 0===n&&(n=!1);var i=this.Sl.canvas;if(null!=i){var r=i.layer.children;if(n){for(e=r.length-1;0<=e;--e)for(h=(s=r[e].children).length-1;0<=h;--h)if(!1===t(a=s[h]))return a}else for(var e=0,u=r.length;e<u;++e)for(var s,h=0,o=(s=r[e].children).length;h<o;++h){var a;if(!1===t(a=s[h]))return a}}return null},n}(t.utils.EventEmitter),Em=function(t){function n(n){var i=t.call(this,n)||this;i.on(Wi.move,(function(t){var n=i.canvas;n&&n.onShapeMove(t)})),i.on(Wi.up,(function(t){var n=i.canvas;n&&n.onShapeUp(t)})),i.on(Wi.upoutside,(function(t){var n=i.canvas;n&&n.onShapeCancel(t)})),i.on(Wi.cancel,(function(t){var n=i.canvas;n&&n.onShapeCancel(t)})),Wi.onClick(i,(function(t){var n=i.canvas;n&&n.onShapeClick(t)}));var r=new wm(i,n&&(n.data||n.tag));return i.data=r,i.tag=r,i.shape=new Dm(i),i}return B(n,t),n.prototype.initLayer=function(n,i,r){return t.prototype.initLayer.call(this,n,i,r||this.data.mapper)},n.prototype.isEditMode=function(){return!1},n.prototype.newCanvas=function(t){return new vm(this.toCanvasOptions(t))},n.prototype.toCanvasOptions=function(t){return this.toCanvasBaseOptions(t)},n.prototype.onDown=function(n){var i;t.prototype.onDown.call(this,n,null===(i=this.canvas)||void 0===i?void 0:i.onShapeDown(n))},n.prototype.onDblClick=function(n,i){var r;return t.prototype.onDblClick.call(this,n,i,null===(r=this.canvas)||void 0===r?void 0:r.onShapeDblClick(n,i))},n.prototype.render=function(n){this.shape.onRender(n),t.prototype.render.call(this,n)},n.prototype.getType=function(){return"DDiagram"},n}(tm),Mm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogConfirmMessage"},n}(hl),Sm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newContentChildren=function(n,i){var r=t.prototype.newContentChildren.call(this,n,i);return r.push(this.message),r},n.prototype.toMessage=function(t,n){var i=null==n?void 0:n.message;return null!=i?at(i)||ot(i)?this.newMessage(this.toMessageOptions(i)):i instanceof Zi?i:this.newMessage(this.toMessageOptionsMerged(i,t.getMessage())):this.newMessage(this.toMessageOptions(t.getMessage()))},n.prototype.toMessageOptionsMerged=function(t,n){var i=t.text;return null==i&&(i={},t.text=i),void 0===i.value&&(i.value=n),t},n.prototype.toMessageOptions=function(t){return{text:{value:t}}},n.prototype.newMessage=function(t){return new Mm(t)},Object.defineProperty(n.prototype,"message",{get:function(){var t=this.Cl;return null==t&&(t=this.toMessage(this.theme,this.yn),this.Cl=t),t},enumerable:!1,configurable:!0}),n.prototype.getResolvedValue=function(){},n.prototype.getType=function(){return"DDialogConfirm"},n}(ys),jm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogConfirmDelete"},n}(Sm),Tm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogConfirmDiscard"},n}(Sm),Nm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogMessage"},n}(Sm),Im=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDialogProcessingMessage"},n}(Mm),Cm=function(t){function n(n){var i,r=this;(r=t.call(this,n)||this).Al=!0,r.Kn=0;var e=null==n?void 0:n.delay;r.Rl=null!==(i=null==e?void 0:e.done)&&void 0!==i?i:r.theme.getDoneDelay();var u=null==e?void 0:e.close;return r.yl=void 0!==u?u:r.theme.getCloseDelay(),r.Ll=r.message.text,r}return B(n,t),n.prototype.newMessage=function(t){return new Im(t)},n.prototype.onOpen=function(){this.Al=!1,this.Kn=Date.now();var n=this.ml;null!=n&&clearTimeout(n);var i=this.kl;null!=i&&clearTimeout(i);var r=this.message;r.text=this.Ll,r.state.removeAll(ht.SUCCEEDED,ht.FAILED);var e=this.th;null!=e&&e.hide(),t.prototype.onOpen.call(this)},n.prototype.onDone=function(t){var n=this;null!=t?this.kl=window.setTimeout((function(){n.close()}),t):this.close()},n.prototype.onResolved=function(t){null!=t&&(this.message.text=t),this.message.state.set(ht.SUCCEEDED,ht.FAILED);var n=this.yl;if(null!=n)this.onDone(n);else{var i=this.th;null!=i?i.show():this.close()}},n.prototype.onRejected=function(t){null!=t&&(this.message.text=t),this.message.state.set(ht.FAILED,ht.SUCCEEDED);var n=this.th;null!=n?n.show():this.onDone(this.yl)},n.prototype.resolve=function(t){var n=this;if(!this.Al){this.Al=!0;var i=Date.now()-this.Kn,r=this.Rl-i;0<r?this.ml=window.setTimeout((function(){n.ml=void 0,n.onResolved(t)}),r):this.onResolved(t)}},n.prototype.reject=function(t){var n=this;if(!this.Al){this.Al=!0;var i=Date.now()-this.Kn,r=this.Rl-i;0<r?this.ml=window.setTimeout((function(){n.ml=void 0,n.onRejected(t)}),r):this.onRejected(t)}},n.prototype.onCloseOn=function(){this.Al&&t.prototype.onCloseOn.call(this)},n.prototype.getType=function(){return"DDialogProcessing"},n}(Sm),Am=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onOpen=function(){var n=wb.getDocumentController().getName();null!=n&&(this.input.value=n),t.prototype.onOpen.call(this)},n.prototype.onOk=function(n){t.prototype.onOk.call(this,n);var i=wb.getCommandController();at(n)?i.push(new qg(n)):n.then((function(t){i.push(new qg(t))}))},n.prototype.getType=function(){return"DDialogSaveAs"},n}(Qs),Rm=function(){function t(t){this.xl=t,this.Bl=[]}return t.prototype.indexOf=function(t){return this.Bl.indexOf(t)},t.prototype.close=function(t){for(var n=this.Bl,i=Math.max(0,t),r=n.length-1;i<=r;--r)n[r].close()},t.prototype.add=function(t){this.Bl.push(t)},t.prototype.trim=function(t){this.close(this.indexOf(t)+1)},t.prototype.remove=function(t){var n=this.indexOf(t);0<=n&&(this.close(n+1),this.Bl.splice(n,1))},t}(),ym=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){var i,r,e,u=this;t.prototype.init.call(this,n),this.Qu=function(){u.onPrerender()},this.St=Oi(null!==(i=null==n?void 0:n.align)&&void 0!==i?i:xu.BOTTOM,xu),this._l=null!==(r=null==n?void 0:n.fit)&&void 0!==r&&r,this.$u=null!==(e=null==n?void 0:n.sticky)&&void 0!==e&&e,this.Pl=!1,this.xl=null,this.yo=null,this.visible=!1,zu.apply(this,(function(){u.close()})),this.on("select",(function(){u.close()}));var s=null==n?void 0:n.items;s&&bl.newItems(this,s,this.$u),this.ns=new Hu(n)},n.prototype.findItem=function(t){for(var n=this.children,i=0,r=n.length;i<r;++i){var e=n[i];if(e instanceof al&&e.value===t)return e}return null},n.prototype.getType=function(){return"DMenu"},n.prototype.getContext=function(){return this.yo},n.prototype.getCloseable=function(){return this},n.prototype.open=function(n,i,r){if(this.isHidden()){var e=this.ns.pick(this);this.xl=n;for(var u=this.children,s=0,h=u.length;s<h;++s){var o=u[s];o instanceof Zi&&o.state.removeAll(ht.FOCUSED,ht.HOVERED)}var a=e.renderer,c=this.Qu;if(this.$u?a.on("prerender",c):a.once("prerender",c),this._l){var f=n.getBounds();null!=f&&(this.width=f.width)}this.Pl=null!=r,r=r||new Rm(n),null!=i&&r.trim(i),r.add(this),this.yo=r,e.stage.addChild(this),this.rs=e.getFocusController().get(),this.focus(),t.prototype.show.call(this),this.emit("open",this)}return this},n.prototype.onPrerender=function(){var t=this.xl;if(t){var n=t.getBounds();if(n){this._l&&(this.width=n.width);var i=this.ns.picked;if(i){var r=this.theme;Bu.attach(this,n,r.getOffsetX(),r.getOffsetY(),i.width,i.height,this.St)}}}},n.prototype.close=function(){if(this.isShown()){var n=this.yo;n&&n.remove(this);var i=this.ns.picked;i&&i.renderer.off("prerender",this.Qu),this.xl=null;var r=this.rs;if(null!=r)if(this.rs=null,i){var e=rt.getLayer(r);null!=e&&i!==e&&e.view.focus(),i.getFocusController().focus(r)}else this.blur(!0);else this.blur(!0);t.prototype.hide.call(this);var u=this.parent;u&&u.removeChild(this),this.emit("close",this)}return this},n.prototype.onKeyDown=function(n){return Zt.moveFocusVertically(n,this,this.ns),this.state.isActionable&&(Zt.isArrowLeftKey(n)||Zt.isCancelKey(n))&&this.close(),t.prototype.onKeyDown.call(this,n)},n.prototype.containsGlobalPoint=function(t){return!this.Pl},n}(Ju);bl.setMenuCreator((function(t){return new ym(t)}));var Lm=function(t){function n(n){return t.call(this,n)||this}return B(n,t),n.prototype.onMenuSelect=function(t,n,i){this.emit("select",t,n,this)},n.prototype.onMenuClose=function(t){if(t){var n=this.Fl;n&&t.off("select",n);var i=this.Ul;i&&t.off("close",i)}},n.prototype.toMenu=function(t,n){var i=null==n?void 0:n.menu;return i instanceof ym?i:new ym(this.toMenuOptions(t,i))},n.prototype.toMenuOptions=function(t,n){return n?(null==n.fit&&(n.fit=!0),n):{fit:!0}},Object.defineProperty(n.prototype,"menu",{get:function(){var t=this.fo;return null==t&&(t=this.toMenu(this.theme,this.yn),this.fo=t),t},set:function(t){var n=this.fo;n!=t&&(this.fo=t,this.onMenuReplaced(t,n))},enumerable:!1,configurable:!0}),n.prototype.onMenuReplaced=function(t,n){null!=n&&this.onMenuClose(n)},n.prototype.getType=function(){return"DDropdownBase"},n.prototype.onKeyDown=function(n){return Zt.isArrowDownKey(n)&&this.onKeyDownArrowDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownArrowDown=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.onClick(t),0))},n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.start()},n.prototype.start=function(){var t=this,n=this.menu;if(n.isHidden()){var i=this.Fl;null==i&&(i=function(n,i,r){t.onMenuSelect(n,i,r)},this.Fl=i);var r=this.Ul;null==r&&(r=function(){t.onMenuClose(t.fo)}),n.on("select",i),n.on("close",r),n.open(this)}},n.prototype.close=function(){this.menu.close()},n}(Ss),km=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DDropdown"},n}(Lm),xm=function(t){function n(n){var i=t.call(this,n)||this;return i.on(Wi.down,(function(t){i.state.isActionable&&i.onSelect(t)})),i}return B(n,t),n.prototype.onSelect=function(t){this.emit("select",this)},n.prototype.onKeyDown=function(n){return Zt.isActivateKey(n)&&this.onKeyDownActivate(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownActivate=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.onSelect(t),0))},n.prototype.getType=function(){return"DExpandableHeader"},n}(hl),Bm=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(t){var i=this;n.prototype.init.call(this,t);var r=this.theme,e=this.toHeader(r,t);this.Qs=e,e.on("select",(function(){i.toggle()})),this.addChild(e);var u=this.toBody(r,t);this.fe=u,this.addChild(u),this.state.isActive?this.onActivated():this.onDeactivated()},i.prototype.toHeader=function(n,i){return i&&i.header?i.header instanceof t.DisplayObject?i.header:this.newHeader(n,i.header):this.newHeader(n)},i.prototype.newHeader=function(t,n){return new xm(n)},i.prototype.toBody=function(t,n){return n.body},i.prototype.open=function(){this.state.isActive=!0},i.prototype.close=function(){this.state.isActive=!1},i.prototype.toggle=function(){this.state.isActive=!this.state.isActive},i.prototype.onActivated=function(){var t=this.fe;t instanceof Zi?t.show():t.visible=!0},i.prototype.onDeactivated=function(){var t=this.fe;t instanceof Zi?t.hide():t.visible=!1},i.prototype.onStateChange=function(t,i){n.prototype.onStateChange.call(this,t,i),t.isActive?i.isActive||this.onActivated():i.isActive&&this.onDeactivated()},i.prototype.getType=function(){return"DExpandable"},i}(Ju),_m=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.createInput=function(t){return new Ws(t)},n}(Ab),Pm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.newUtil=function(){return new tb(this,this.newOperation(),this.theme,this.yn)},n.prototype.getType=function(){return"DInputTextArea"},n}(zs),Fm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DListItemAmbient"},n}(rd),Um=function(){function t(t){void 0===t&&(t=256),this.Gl=t}return t.prototype.getTileSize=function(){return this.Gl},t.prototype.lonLatToMeters=function(n,i){var r=t.CIRCUMFERENCE_HALF;return i.x=n.x*r/180,i.y=Math.log(Math.tan((90+n.y)*Math.PI/360))*r/Math.PI,i},t.prototype.metersToLonLat=function(n,i){var r=t.CIRCUMFERENCE_HALF;return i.x=n.x/r*180,i.y=360*Math.atan(Math.exp(n.y*Math.PI/r))/Math.PI-90,i},t.prototype.pixelsToMeters=function(n,i,r,e){var u=this.toResolution(i,r),s=t.CIRCUMFERENCE_HALF;return e.x=n.x*u-s,e.y=s-n.y*u,e},t.prototype.metersToPixels=function(n,i,r,e){var u=this.toResolution(i,r),s=t.CIRCUMFERENCE_HALF;return e.x=(n.x+s)/u,e.y=(s-n.y)/u,e},t.prototype.pixelsToTile=function(t,n,i){return i.x=Math.ceil(t.x/n)-1,i.y=Math.ceil(t.y/n)-1,i},t.prototype.metersToTile=function(n,i,r){var e=t.CIRCUMFERENCE_HALF,u=1<<i;return r.x=Math.ceil(.5*(n.x/e+1)*u)-1,r.y=Math.ceil(.5*(1-n.y/e)*u)-1,r},t.prototype.lonLatToTile=function(t,n,i){return this.metersToTile(this.lonLatToMeters(t,i),n,i)},t.prototype.lonLatToPixels=function(t,n,i,r){return this.metersToPixels(this.lonLatToMeters(t,r),n,i,r)},t.prototype.pixelsToLonLat=function(t,n,i,r){return this.metersToLonLat(this.pixelsToMeters(t,n,i,r),r)},t.prototype.tileToPixels=function(t,n,i){return i.x=t.x*n,i.y=t.y*n,i},t.prototype.tileToMeters=function(n,i,r){var e=this.toResolutionMeter(i),u=t.CIRCUMFERENCE_HALF;return r.x=n.x*e+u,r.y=u-n.y*e,r},t.prototype.toResolutionMeter=function(n){return 2*t.CIRCUMFERENCE_HALF/(1<<n)},t.prototype.toResolution=function(n,i){return 2*t.CIRCUMFERENCE_HALF/(i<<n)},t.prototype.toTileCount=function(t){return 1<<t},t.prototype.toTileCode=function(t,n,i){return(n<<t)+i},t.CIRCUMFERENCE_HALF=6378137*Math.PI,t}(),Gm=function(){function t(){}return Object.defineProperty(t,"DEFAULT",{get:function(){return null==this.Lr&&(this.Lr=new Um),this.Lr},enumerable:!1,configurable:!0}),t}(),zm=function(){function n(n,i,r,e,u,s){this.tx=i,this.ty=r;var h=new t.Sprite(t.Texture.EMPTY);h.parent=n,h.position.set(e,u),h.scale.set(s,s),this.zl=h}return n.prototype.load=function(n,i){var r=t.Texture.from(n,{resolution:1});this.zl.texture=r,r.valid?i():r.on("update",i)},n.prototype.transform=function(t,n,i){var r=this.zl;r.position.set(t,n),r.scale.set(i,i)},Object.defineProperty(n.prototype,"loaded",{get:function(){return this.zl.texture.valid},enumerable:!1,configurable:!0}),n.prototype.render=function(t){var n=this.zl;n.updateTransform(),n.render(t)},n.prototype.destroy=function(){var n=this.zl,i=n.texture,r=i.baseTexture.resource,e=null;r instanceof t.resources.BaseImageResource&&r.source instanceof HTMLImageElement&&(e=r.source),i.destroy(!0),n.destroy(),e&&(e.src="")},n}(),Hm=function(){function n(t,n,i,r,e,u){var s=this;this.p=t,this.ze=n,this.Hl=u,this.Vl=!1,this.Wl=!0,this.Xl=function(){s.onLoaded()},this.Yl=i,this._lon0=NaN,this._lat0=NaN,this._lon1=NaN,this._lat1=NaN,this.Kl=new Map,this.Jl=function(t){s.renderTile(t)},this.Zl=NaN,this.ql=NaN,this.Ql=NaN,this.$l=NaN,this.tv=function(t,n,i){s.deleteTile(t,n,i)},this.nv=function(t){s.destroyTile(t)},this.iv=function(t){t.loaded||(s.rv=!1)},this.ev=e.toTileCount(i),this.uv=1/this.ev,this.sv=r.scale*this.uv,this.Gl=e.getTileSize()*r.scale,this.Ut=r,this.Sf=e,this.rv=!0}return n.prototype.newTile=function(t,n,i,r,e){return new zm(this.p,t,n,i,r,e)},n.prototype.renderTile=function(t){t.render(this.Ge)},Object.defineProperty(n.prototype,"tz",{get:function(){return this.Yl},enumerable:!1,configurable:!0}),n.prototype.render=function(t){this.Ge=t,this.Kl.forEach(this.Jl)},n.prototype.move=function(t,i,r,e){var u=this._lon0,s=this._lat0,h=this._lon1,o=this._lat1;if(u!==t||s!==i||h!==r||o!==e){this._lon0=t,this._lat0=i,this._lon1=r,this._lat1=e;var a=this.Yl,c=this.Sf,f=n.WORK;f.set(t,i),c.lonLatToTile(f,a,f);var l=f.x,v=f.y;f.set(r,e),c.lonLatToTile(f,a,f);var b=f.x,d=f.y,g=this.ev,m=Math.max(0,l),w=Math.min(g-1,b),p=Math.max(0,v),O=Math.min(g-1,d),D=m-this.Zl,E=w-this.ql,M=p-this.Ql,S=O-this.$l,j=D!=D||D<0||1<D,T=E!=E||0<E||E<-1,N=M!=M||M<0||1<M,I=S!=S||0<S||S<-1;if(j||T||N||I){j?this.Zl=m:m=this.Zl,T?this.ql=w:w=this.ql,N?this.Ql=p:p=this.Ql,I?this.$l=O:O=this.$l,this.Kl.forEach(this.tv);var C=m+w>>1,A=p+O>>1,R=Math.max(C-m,w-C),y=Math.max(A-p,O-A),L=Math.max(R,y);this.toOffset(f);var k=f.x,x=f.y;this.Vl=!1,this.Wl=!1,this.loadTile(a,C,A,k,x,f);for(var B=1;B<=L;++B){var _=C-B;m<=_&&this.loadTilesY(a,_,A,B,p,O,k,x,f);var P=C+B;P<=w&&this.loadTilesY(a,P,A,B,p,O,k,x,f);var F=A-B;p<=F&&this.loadTilesX(a,C,B-1,m,w,F,k,x,f);var U=A+B;U<=O&&this.loadTilesX(a,C,B-1,m,w,U,k,x,f)}this.Wl=!0,this.Vl&&this.onLoaded()}}},n.prototype.loadTilesX=function(t,n,i,r,e,u,s,h,o){this.loadTile(t,n,u,s,h,o);for(var a=1;a<=i;++a){var c=n-a;r<=c&&this.loadTile(t,c,u,s,h,o);var f=n+a;f<=e&&this.loadTile(t,f,u,s,h,o)}},n.prototype.loadTilesY=function(t,n,i,r,e,u,s,h,o){this.loadTile(t,n,i,s,h,o);for(var a=1;a<=r;++a){var c=i-a;e<=c&&this.loadTile(t,n,c,s,h,o);var f=i+a;f<=u&&this.loadTile(t,n,f,s,h,o)}},n.prototype.loadTile=function(t,n,i,r,e,u){var s=this.Sf.toTileCode(t,n,i),h=this.Kl,o=h.get(s);null==o&&(this.toTilePosition(n,i,r,e,u),o=this.newTile(n,i,u.x,u.y,this.sv),h.set(s,o),o.load(this.ze(t,n,i),this.Xl),this.rv=!1)},n.prototype.toTilePosition=function(t,n,i,r,e){var u=this.Gl,s=this.uv;return e.set(t,n),this.Sf.tileToPixels(e,u,e),e.set(e.x*s+i,e.y*s+r),e},n.prototype.toOffset=function(t){var n=this.p,i=this.Ut,r=this.Gl;return t.set(-i.x*r+.5*n.width,-i.y*r+.5*n.height),t},n.prototype.deleteTile=function(t,n,i){var r=t.tx,e=t.ty;(r<this.Zl||this.ql<r||e<this.Ql||this.$l<e)&&(i.delete(n),t.destroy())},n.prototype.destroy=function(){var t=this.Kl;t.forEach(this.nv),t.clear()},n.prototype.destroyTile=function(t){t.destroy()},n.prototype.updateLoadingState=function(){this.rv=!0,this.Kl.forEach(this.iv)},n.prototype.onLoaded=function(){this.Wl?this.Hl():this.Vl=!0},Object.defineProperty(n.prototype,"loaded",{get:function(){return this.rv||this.updateLoadingState(),this.rv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mapping",{get:function(){return this.Ut},set:function(t){var i=this,r=this.Sf,e=t.scale*this.uv,u=r.getTileSize()*t.scale;this.sv=e,this.Gl=u,this.Ut=t;var s=n.WORK;this.toOffset(s);var h=s.x,o=s.y;this.Kl.forEach((function(t){i.toTilePosition(t.tx,t.ty,h,o,s),t.transform(s.x,s.y,e)}))},enumerable:!1,configurable:!0}),n.WORK=new t.Point,n}(),Vm=function(n){function i(t){var i=n.call(this)||this,r=t.canvas;i.tr=r,i.ze=t.builder;var e=t.mapping;i.Ut=e;var u=t.coordinate;i.Sf=u,i.hv=i.toMapping(r,e,u),i._z=NaN,i.Yl=NaN,i.ov=t.plane.min,i.av=t.plane.max,i.cv=[],i.Xl=function(){i.onLoaded()},i.fv=function(){i.lv=void 0,i.fit()},i.vv=t.plane.throttle;var s=function(){i.fitThrottled()};return i.bv=s,r.on("scale",s),r.on("move",s),r.snippet.add(i,!0),i}return B(i,n),Object.defineProperty(i.prototype,"coordinate",{get:function(){return this.Sf},enumerable:!1,configurable:!0}),i.prototype.fitThrottled=function(){null==this.lv&&(this.lv=window.setTimeout(this.fv,this.vv))},i.prototype.toMapping=function(t,n,r){var e=i.WORK_LONLAT,u=r.getTileSize();e.set(n.from.lon,n.from.lat),r.lonLatToPixels(e,0,u,e);var s=e.x,h=e.y;e.set(n.to.lon,n.to.lat),r.lonLatToPixels(e,0,u,e);var o=e.x,a=e.y,c=Math.abs(o-s),f=Math.abs(a-h),l=1e-7,v=1;return l<c?v=l<f?Math.max(t.width/c,t.height/f):t.width/c:l<f&&(v=t.height/f),{scale:v,x:.5*(o+s)/u,y:.5*(a+h)/u}},Object.defineProperty(i.prototype,"mapping",{get:function(){return this.Ut},set:function(t){var n=this.hv,i=this.toMapping(this.tr,t,this.Sf),r=1e-7;if(r<Math.abs(n.scale-i.scale)||r<Math.abs(n.x-i.x)||r<Math.abs(n.y-i.y)){this.hv=i;for(var e=this.cv,u=0,s=e.length;u<s;++u){var h=e[u];h&&(h.mapping=i)}rt.update(this.tr),this.bv()}},enumerable:!1,configurable:!0}),i.prototype.newPlane=function(t){return new Hm(this.tr,this.ze,t,this.hv,this.Sf,this.Xl)},i.prototype.render=function(t){for(var n=this.Yl,i=this.cv,r=0;r<n;++r)null!=(e=i[r])&&e.render(t);for(r=i.length-1;n<r;--r){var e;null!=(e=i[r])&&e.render(t)}var u=i[n];null!=u&&u.render(t)},i.prototype.toTileZ=function(t){return Math.min(this.av,Math.max(this.ov,Math.floor(t)))},i.prototype.updateTransform=function(){},i.prototype.toZ=function(t){return Math.log(this.hv.scale*t)/Math.log(2)},i.prototype.move=function(t,n,i,r,e){var u=this.cv,s=this.toZ(t);if(this._z!==s){this._z=s;var h=this.toTileZ(s);if(this.Yl!==h){this.Yl=h;var o=u[h];null==o&&(o=this.newPlane(h),u[h]=o)}}var a=u[this.Yl];return null!=a&&a.move(n,i,r,e),this},i.prototype.fit=function(){var t=this.tr;if(null!=t){var n=t.parent;if(null!=n){var r=t.scale,e=r.x,u=r.y,s=t.x,h=t.y,o=this.Sf,a=this.hv,c=o.getTileSize()*a.scale,f=a.x*c-(s/e+.5*t.width),l=f+n.width/e,v=a.y*c-(h/u+.5*t.height),b=v+n.height/u,d=i.WORK_LONLAT;d.set(f,v),o.pixelsToLonLat(d,0,c,d);var g=d.x,m=d.y;d.set(l,b),o.pixelsToLonLat(d,0,c,d);var w=d.x,p=d.y;this.move(e,g,m,w,p)}}return this},i.prototype.destroyPlanesBefore=function(t,n){for(var i=0;i<t;++i){var r=n[i];r&&(r.destroy(),n[i]=void 0)}},i.prototype.destroyPlanesAfter=function(t,n){for(var i=t+1,r=n.length;i<r;++i){var e=n[i];e&&(e.destroy(),n[i]=void 0)}},i.prototype.cleanup=function(){var t=this.Yl,n=this.cv,i=n[t];if(i&&i.loaded)return this.destroyPlanesBefore(t,n),void this.destroyPlanesAfter(t,n);for(var r=t+1,e=n.length;r<e;++r)if((u=n[r])&&u.loaded)return this.destroyPlanesBefore(t,n),void this.destroyPlanesAfter(r,n);for(r=t-1;0<=r;--r){var u;if((u=n[r])&&u.loaded)return void this.destroyPlanesBefore(r,n)}},i.prototype.onLoaded=function(){this.cleanup(),rt.update(this.tr)},i.prototype.destroy=function(){for(var t=this.cv,n=0,i=t.length;n<i;++n){var r=t[n];r&&(r.destroy(),t[n]=void 0)}var e=this.tr,u=this.bv;return e.off("scale",u),e.off("move",u),e.snippet.remove(this,!0),this},i.WORK_LONLAT=new t.Point,i}(t.utils.EventEmitter),Wm=function(t,n,i){return"https://j.tile.openstreetmap.jp/".concat(t,"/").concat(n,"/").concat(i,".png")},Xm=function(){function t(){}return t.toPlaneOptions=function(t){var n,i,r,e=t.plane;return{min:null!==(n=null==e?void 0:e.min)&&void 0!==n?n:this.MIN,max:null!==(i=null==e?void 0:e.max)&&void 0!==i?i:this.MAX,throttle:null!==(r=null==e?void 0:e.throttle)&&void 0!==r?r:this.THROTTLE}},t.from=function(t){return new Vm({canvas:t.canvas,builder:t.builder||Wm,mapping:t.canvas.tile.mapping,coordinate:t.coordinate||Gm.DEFAULT,plane:this.toPlaneOptions(t)})},t.MIN=0,t.MAX=18,t.THROTTLE=333,t}(),Ym=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMenu=function(t,n){var i=null==n?void 0:n.menu;return i instanceof ym?i:new ym(this.toMenuOptions(t,i))},n.prototype.newMenu=function(t,n){return new ym(this.toMenuOptions(t,n))},n.prototype.toMenuOptions=function(t,n){return n?(null==n.fit&&(n.fit=!1),n):{fit:!1}},n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.open()},n.prototype.open=function(){this.menu.open(this)},n.prototype.close=function(){this.menu.close()},Object.defineProperty(n.prototype,"menu",{get:function(){var t=this,n=this.fo;return null==n&&((n=this.toMenu(this.theme,this.yn)).on("select",(function(n,i,r){t.onMenuSelect(n,i,r)})),this.fo=n),n},enumerable:!1,configurable:!0}),n.prototype.onMenuSelect=function(t,n,i){this.emit("select",t,n,this);var r=this.parent;r&&r.emit("select",t,n,r)},n.prototype.onKeyDown=function(n){return Zt.isArrowDownKey(n)&&this.onKeyDownArrowDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownArrowDown=function(t){return!(!this.state.isActionable||!this.state.isFocused||(this.onActivate(t),0))},n.prototype.getType=function(){return"DMenuBarItem"},n}(js),Km=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(t){n.prototype.init.call(this,t);var i=null==t?void 0:t.items;if(i)for(var r=0,e=i.length;r<e;++r){var u=this.toItem(i[r]);u&&this.addChild(u)}},i.prototype.toItem=function(n){return null==n?null:n instanceof t.DisplayObject?n:"space"in n?new Xu(n):new Ym(n)},i.prototype.onKeyDown=function(t){return Zt.moveFocusHorizontally(t,this),n.prototype.onKeyDown.call(this,t)},i.prototype.getType=function(){return"DMenuBar"},i}(Ns),Jm=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.initReflowable=function(){},n.prototype.getType=function(){return"DMenuSidedContent"},n}(Ns),Zm={NONE:0,SINGLE:1,SINGLE_ONCE:2},qm=function(){return!0},Qm=function(n){function i(t,i){var r,e,u,s=this;(s=n.call(this)||this).$s=t,s.Ac=null,s.fn=!0,s.Tt=Oi(null!==(e=null!==(r=null==i?void 0:i.mode)&&void 0!==r?r:null==i?void 0:i.type)&&void 0!==e?e:Zm.SINGLE_ONCE,Zm),s.dv=null!==(u=null==i?void 0:i.filter)&&void 0!==u?u:s.getFilterDefault();var h=null==i?void 0:i.on;if(h)for(var o in h){var a=h[o];a&&s.on(o,a)}return s}return B(i,n),i.prototype.first=function(){return this.Ac},i.prototype.toDirty=function(){this.fn=!0},i.prototype.update=function(){this.fn&&(this.fn=!1,this.ks(this.$s))},i.prototype.hasMenu=function(t){return t&&t.menu instanceof ym},i.prototype.ks=function(n){for(var i=n.children,r=0,e=i.length;r<e;++r){var u=i[r];u instanceof ol&&u.state.isActive&&this.gv(u,!1),u instanceof t.Container&&this.ks(u),this.hasMenu(u)&&this.ks(u.menu)}},i.prototype.add=function(t){this.update(),this.gv(t,!0)},i.prototype.set=function(t){this.update(),this.gv(t,!0)},i.prototype.get=function(t){return this.update(),this.Ac},i.prototype.getIndex=function(t){return null},i.prototype.size=function(){return this.Ac?1:0},i.prototype.isEmpty=function(){return null==this.Ac},i.prototype.remove=function(t){this.update(),this.Ac===t&&this.gv(null,!0)},i.prototype.clear=function(){this.update(),this.gv(null,!0)},i.prototype.getFilterDefault=function(){return qm},i.prototype.gv=function(t,n){var i=this.Ac,r=this.Tt;r!==Zm.NONE&&this.dv(t)&&i!==t&&(this.setState(i,r,!1),this.Ac=t,this.setState(t,r,!0),n&&this.emit("change",this))},i.prototype.setState=function(t,n,i){t&&(n===Zm.SINGLE?t.state.isActive=i:i?t.state.addAll(ht.ACTIVE,ht.READ_ONLY):t.state.removeAll(ht.ACTIVE,ht.READ_ONLY))},i}(t.utils.EventEmitter),$m=function(t){function n(n){var i,r=this;r=t.call(this,n)||this;var e=new Rm(r);r.yo=e,e.add(r);var u=null==n?void 0:n.items;if(null!=u){var s=null!==(i=null==n?void 0:n.sticky)&&void 0!==i&&i;r.newItems(u,s)}var h=null==n?void 0:n.selection;return r.Rc=h instanceof Qm?h:r.newSelection(h),r}return B(n,t),n.prototype.newSelection=function(t){return new Qm(this.content,t)},n.prototype.onHierarchyDirty=function(){var n=this.Rc;null!=n&&n.toDirty(),t.prototype.onHierarchyDirty.call(this)},n.prototype.newItems=function(t,n){ql.newItems(this.content,t,n)},n.prototype.newContent=function(t){return new Jm(t)},Object.defineProperty(n.prototype,"selection",{get:function(){return this.Rc},enumerable:!1,configurable:!0}),n.prototype.getContext=function(){return this.yo},n.prototype.getCloseable=function(){return this},n.prototype.open=function(){},n.prototype.close=function(){},n.prototype.onKeyDown=function(n){return Zt.moveFocusVertically(n,this),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DMenuSided"},n}(Nd),tw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DNoteError"},n}(yd),nw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DNoteNoItemsFound"},n}(yd),iw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DNoteSearching"},n}(yd),rw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n}(Zi),ew=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPaginationButtonLast"},n}(Cs),uw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPaginationButtonNext"},n}(Cs),sw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPaginationButtonPage"},n}(Cs),hw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPaginationButtonPrevious"},n}(Cs),ow=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPaginationButtonTop"},n}(Cs),aw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPaginationDots"},n}(Ms),cw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DPaginationPage"},n}(Ms),fw=function(t){function n(n){var i,r,e,u,s=this;s=t.call(this,n)||this,null!=n?(s.T=null!==(r=null!==(i=n.size)&&void 0!==i?i:n.total)&&void 0!==r?r:10,s.At=null!==(u=null!==(e=n.value)&&void 0!==e?e:n.selected)&&void 0!==u?u:0):(s.T=10,s.At=0);var h=s.buttonTop,o=s.buttonPrevious;null!=h&&s.addChild(h),null!=o&&s.addChild(o),null==h&&null==o||s.addChild(s.newSpace());var a=s.buttonPages0,c=a.length;s.addChild(a[c-1]),s.addChild(s.dots0);for(var f=c-2;0<=f;--f)s.addChild(a[f]);s.addChild(s.page);for(var l=s.buttonPages1,v=l.length,b=(f=0,v-1);f<b;++f)s.addChild(l[f]);s.addChild(s.dots1),s.addChild(l[v-1]);var d=s.buttonNext,g=s.buttonLast;return null==d&&null==g||s.addChild(s.newSpace()),null!=d&&s.addChild(d),null!=g&&s.addChild(g),s.update(),s}return B(n,t),n.prototype.newSpace=function(){var t,n,i;return new Xu({width:null!==(i=null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.space)&&void 0!==i?i:this.theme.getButtonSpace()})},Object.defineProperty(n.prototype,"value",{get:function(){return this.At},set:function(t){0<=t&&t<this.T&&this.At!==t&&(this.At=t,this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.value},set:function(t){this.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.T},set:function(t){0<=t&&this.T!==t&&(this.T=t,this.At=0===t?-1:Math.max(0,Math.min(this.T-1,this.At)),this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"total",{get:function(){return this.size},set:function(t){this.size=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dots0",{get:function(){var t=this._dots0;return null==t&&(t=this.newDots(),this._dots0=t),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dots1",{get:function(){var t=this._dots1;return null==t&&(t=this.newDots(),this._dots1=t),t},enumerable:!1,configurable:!0}),n.prototype.newDots=function(){return new aw},Object.defineProperty(n.prototype,"buttonLast",{get:function(){var t=this.mv;return void 0===t&&(t=this.newButtonLast(),this.mv=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonLast=function(){var t,n,i=this,r=null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.last;if(null!==r&&!1!==r&&void 0!==r){var e=new ew(!0!==r?r:void 0);return e.on("active",(function(){i.onButtonLastActive()})),e}return null},n.prototype.onButtonLastActive=function(){this.moveTo(this.T-1)},n.prototype.moveTo=function(t){if(0<=t&&t<this.T&&this.At!==t){var n=this.At;this.At=t,this.emit("change",t,n,this),this.update()}},Object.defineProperty(n.prototype,"buttonNext",{get:function(){var t=this.wv;return void 0===t&&(t=this.newButtonNext(),this.wv=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonNext=function(){var t,n,i=this,r=null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.next;if(null!==r&&!1!==r){var e=new uw(!0!==r?r:void 0);return e.on("active",(function(){i.onButtonNextActive()})),e}return null},n.prototype.onButtonNextActive=function(){this.moveTo(this.At+1)},Object.defineProperty(n.prototype,"buttonPrevious",{get:function(){var t=this.pv;return void 0===t&&(t=this.newButtonPrevious(),this.pv=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonPrevious=function(){var t,n,i=this,r=null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.previous;if(null!==r&&!1!==r){var e=new hw(!0!==r?r:void 0);return e.on("active",(function(){i.onButtonPreviousActive()})),e}return null},n.prototype.onButtonPreviousActive=function(){this.moveTo(this.At-1)},Object.defineProperty(n.prototype,"buttonTop",{get:function(){var t=this.Ov;return void 0===t&&(t=this.newButtonTop(),this.Ov=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonTop=function(){var t,n,i=this,r=null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.top;if(null!==r&&!1!==r&&void 0!==r){var e=new ow(!0!==r?r:void 0);return e.on("active",(function(){i.onButtonTopActive()})),e}return null},n.prototype.onButtonTopActive=function(){this.moveTo(0)},n.prototype.newButtonPage=function(){var t,n,i=this,r=new sw(null===(n=null===(t=this.yn)||void 0===t?void 0:t.button)||void 0===n?void 0:n.page);return r.on("active",(function(){i.onButtonPageActive(r)})),r},Object.defineProperty(n.prototype,"buttonPages0",{get:function(){var t=this._buttonPages0;return null==t&&(t=this.newButtonPages0(),this._buttonPages0=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonPages0=function(){return[this.newButtonPage(),this.newButtonPage(),this.newButtonPage(),this.newButtonPage()]},Object.defineProperty(n.prototype,"buttonPages1",{get:function(){var t=this._buttonPages1;return null==t&&(t=this.newButtonPages1(),this._buttonPages1=t),t},enumerable:!1,configurable:!0}),n.prototype.newButtonPages1=function(){return[this.newButtonPage(),this.newButtonPage(),this.newButtonPage(),this.newButtonPage()]},Object.defineProperty(n.prototype,"page",{get:function(){var t=this.Dv;return null==t&&(t=this.newPage(),this.Dv=t),t},enumerable:!1,configurable:!0}),n.prototype.newPage=function(){var t;return new cw(null===(t=this.yn)||void 0===t?void 0:t.page)},n.prototype.onButtonPageActive=function(t){var n=t.text;gn(n)&&(this.moveTo(n-1),t.state.isFocused&&(t.state.isHovered=!1,this.page.focus()))},n.prototype.update=function(){var t=this.T,n=this.At;if(t<=0){null!=(o=this.buttonTop)&&(o.state.isEnabled=!1),null!=(a=this.buttonPrevious)&&(a.state.isEnabled=!1),this.dots0.hide();for(var i=0,r=(l=this.buttonPages0).length;i<r;++i)l[i].hide();for(this.page.hide(),i=0,r=(v=this.buttonPages1).length;i<r;++i)v[i].hide();this.dots1.hide(),null!=(c=this.buttonNext)&&(c.state.isEnabled=!1),(f=this.buttonLast)&&(f.state.isEnabled=!1)}else{var e=n-2,u=n+2;if(e<0)u-=e,e=0;else if(t<=u){var s=u-t+1;u-=s,e-=s}var h=!1;0<e&&(h=!0,e=Math.min(e+1,n));var o,a,c,f,l,v,b=!1;for(u<t-1&&(b=!0,u=Math.max(u-1,n)),null!=(o=this.buttonTop)&&(o.state.isEnabled=0<n),null!=(a=this.buttonPrevious)&&(a.state.isEnabled=0<n),h?this.dots0.show():this.dots0.hide(),i=0,r=(l=this.buttonPages0).length;i<r;++i){var d=n-i-1,g=l[i];e<=d&&d<=u?(g.text=d+1,g.show()):h&&i===r-1?(g.text=1,g.show()):g.hide()}for(this.page.text=n+1,i=0,r=(v=this.buttonPages1).length;i<r;++i)d=n+i+1,g=v[i],e<=d&&d<=u?(g.text=d+1,g.show()):b&&i===r-1?(g.text=t,g.show()):g.hide();b?this.dots1.show():this.dots1.hide(),null!=(c=this.buttonNext)&&(c.state.isEnabled=n<t-1),null!=(f=this.buttonLast)&&(f.state.isEnabled=n<t-1)}},n.prototype.getType=function(){return"DPagination"},n}(Ns),lw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n}(Zi),vw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n}(Zi),bw=function(t){function n(n){var i=t.call(this,n)||this;i.L=[];var r=null==n?void 0:n.values;return r&&(i.values=r),i}return B(n,t),n.prototype.onMenuSelect=function(n,i,r){if(t.prototype.onMenuSelect.call(this,n,i,r),i instanceof fl){var e=this.L,u=[],s=[];i.state.isActive?this.updateMenuItems(r,e,n,void 0,u,s):this.updateMenuItems(r,e,void 0,n,u,s),this.L=u,this.text=s,this.onValueChange(u,e,s)}},n.prototype.onMenuReplaced=function(n,i){t.prototype.onMenuReplaced.call(this,n,i);var r=this.L,e=[],u=[];this.updateMenuItems(n,r,void 0,void 0,e,u),this.L=e,this.text=u},n.prototype.onValueChange=function(t,n,i){this.emit("change",t,n,i,this)},n.prototype.start=function(){this.updateMenuItems(this.menu,this.L),t.prototype.start.call(this)},Object.defineProperty(n.prototype,"values",{get:function(){return this.L},set:function(t){var n=this.L;if(!this.isSameValues(t,n)){var i=[],r=[];this.updateMenuItems(this.menu,t,void 0,void 0,i,r),this.L=i,this.text=r}},enumerable:!1,configurable:!0}),n.prototype.isSameValues=function(t,n){if(t.length===n.length)for(var i=0,r=t.length;i<r;++i)if(n.indexOf(t[i])<0)return!1;return!1},n.prototype.updateMenuItems=function(t,n,i,r,e,u){for(var s=t.children,h=0,o=s.length;h<o;++h){var a=s[h];if(a instanceof jl)this.updateMenuItems(a.menu,n,i,r,e,u);else if(a instanceof fl){var c=a.value;void 0!==r&&r===c?a.state.isActive=!1:void 0!==i&&a.value===i||0<=n.indexOf(a.value)?(e&&e.push(a.value),u&&u.push(a),a.state.isActive=!0):a.state.isActive=!1}}},n.prototype.getType=function(){return"DSelectMultiple"},n}(Lm),dw=function(t){function n(n){var i=t.call(this,n)||this;i.At=null;var r=null==n?void 0:n.value;return null!=r&&(i.value=r),i}return B(n,t),n.prototype.onMenuSelect=function(n,i,r){t.prototype.onMenuSelect.call(this,n,i,r);var e=this.At;e!==n&&(this.At=n,this.text=i,this.onValueChange(n,e,i))},n.prototype.onMenuReplaced=function(n,i){t.prototype.onMenuReplaced.call(this,n,i);var r=this.At;if(null!=r){var e=this.findMenuItem(n,r);null!=e?(this.At=r,this.text=e):(this.At=null,this.text=null)}else this.At=null,this.text=null},n.prototype.onValueChange=function(t,n,i){this.emit("change",t,n,i,this)},n.prototype.findMenuItem=function(t,n){for(var i=t.children,r=0,e=i.length;r<e;++r){var u=i[r];if(u instanceof jl){var s=this.findMenuItem(u.menu,n);if(null!=s)return s}else if(u instanceof al&&u.value===n)return u}return null},Object.defineProperty(n.prototype,"value",{get:function(){return this.At},set:function(t){if(this.At!==t){var n=this.findMenuItem(this.menu,t);null!=n?(this.At=t,this.text=n):(this.At=null,this.text=null)}},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DSelect"},n}(Lm),gw=function(t){function n(n,i,r,e,u){var s=t.call(this,n,i,r,i,r)||this;return s.Ev=e,s.Mv=u,s.oa=.5*i,s.aa=.5*r,s.interactive=!1,s.interactiveChildren=!1,n.on("update",(function(){s.onTextureUpdate()})),s}return B(n,t),n.prototype.onTextureUpdate=function(){this.emit("update",this)},n.prototype.onReflow=function(t,n,i){var r=this.oa,e=this.aa;this.x=-r+this.Ev,this.y=-e+this.Mv,this.width=r+n+r,this.height=e+i+e},n}(t.NineSlicePlane),mw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){var i;t.prototype.init.call(this,n),this.At=null!==(i=null==n?void 0:n.value)&&void 0!==i?i:0},Object.defineProperty(n.prototype,"value",{get:function(){return this.At},set:function(t){this.At=t},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DSliderLabel"},n}(Es),ww=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DSliderThumb"},n}(js),pw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){var i;t.prototype.init.call(this,n),this.At=null!==(i=null==n?void 0:n.value)&&void 0!==i?i:0,this.Sv=this.toRounder(n)},n.prototype.toRounder=function(t){var n,i=null==t?void 0:t.rounder;if(i)return i;var r=null!==(n=null==t?void 0:t.precision)&&void 0!==n?n:this.theme.getPrecision();return function(t){var n=Math.pow(10,r);return Math.round(t*n)/n}},Object.defineProperty(n.prototype,"value",{get:function(){return this.At},set:function(t){this.At=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rounder",{get:function(){return this.Sv},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DSliderValue"},n}(Es),Ow=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.init=function(n){var i=this;t.prototype.init.call(this,n),this.jv=0,this.Tv=this.newTrack(n),this.addChild(this.Tv),this.Nv=this.newTrackSelected(n),this.Nv.state.isActive=!0,this.addChild(this.Nv),this.Gc=this.newThumb(n),this.addChild(this.Gc),this.Wu=this.newLabelMin(n),this.addChild(this.Wu),this.Xu=this.newLabelMax(n),this.addChild(this.Xu),this.At=this.newValue(n),this.addChild(this.At),this.Tv.on(Wi.down,(function(t){i.At.visible=i.state.inEnabled,i.onTrackDown(t.data.global)})),this.Nv.on(Wi.down,(function(t){i.At.visible=i.state.inEnabled,i.onTrackSelectedDown(t.data.global)})),this.Iv=function(t){i.onTrackUpBound(t),i.At.visible=!1},this.Cv=function(t){i.onTrackSelectedUpBound(t),i.At.visible=!1},this.Gc.on(Wi.down,(function(t){i.At.visible=!0,i.onThumbDown(t)})),this.Av=function(t){i.onThumbMove(t)},this.Rv=function(t){i.onThumbUp(t),i.At.visible=!1},this.onValuesChange()},n.prototype.newThumb=function(t){return new ww(null==t?void 0:t.thumb)},n.prototype.newValue=function(t){return new pw(this.toValueOptions(null==t?void 0:t.value))},n.prototype.toValueOptions=function(t){null==(t=t||{}).value&&(t.value=0);var n=t.text||{};return t.text=n,null==n.value&&(n.value=t.value),null==t.visible&&(t.visible=!1),t},n.prototype.newLabelMin=function(t){return new mw(this.toLabelMinOptions(null==t?void 0:t.min))},n.prototype.toLabelMinOptions=function(t){null==(t=t||{}).value&&(t.value=0);var n=t.text||{};return t.text=n,null==n.value&&(n.value="".concat(t.value)),t},n.prototype.newLabelMax=function(t){return new mw(this.toLabelMaxOptions(null==t?void 0:t.max))},n.prototype.toLabelMaxOptions=function(t){null==(t=t||{}).value&&(t.value=1);var n=t.text||{};return t.text=n,null==n.value&&(n.value="".concat(t.value)),t},n.prototype.getValueMargin=function(){return 14},n.prototype.onTrackDown=function(t){if(!this.state.inDisabled){var n=rt.getLayer(this);if(n){var i=n.renderer.plugins.interaction;this.yv=i;var r=this.Iv;i.on(Wi.up,r),i.on(Wi.upoutside,r),i.on(Wi.cancel,r)}this.onPick(t)}},n.prototype.onTrackSelectedDown=function(t){if(!this.state.inDisabled){var n=rt.getLayer(this);if(n){var i=n.renderer.plugins.interaction;this.yv=i;var r=this.Cv;i.on(Wi.up,r),i.on(Wi.upoutside,r),i.on(Wi.cancel,r)}this.onPick(t)}},n.prototype.onTrackUpBound=function(t){var n=this.yv;if(n){this.yv=void 0;var i=this.Iv;n.off(Wi.up,i),n.off(Wi.upoutside,i),n.off(Wi.cancel,i)}},n.prototype.onTrackSelectedUpBound=function(t){var n=this.yv;if(n){this.yv=void 0;var i=this.Cv;n.off(Wi.up,i),n.off(Wi.upoutside,i),n.off(Wi.cancel,i)}},n.prototype.onThumbMove=function(t){this.state.inDisabled||this.onPick(t.data.global)},n.prototype.onThumbDown=function(t){var n=rt.getLayer(this);if(n){var i=n.renderer.plugins.interaction;this.yv=i;var r=this.Av;i.on(Wi.move,r);var e=this.Rv;i.on(Wi.up,e),i.on(Wi.upoutside,e),i.on(Wi.cancel,e)}},n.prototype.onThumbUp=function(t){var n=this.yv;if(n){this.yv=void 0;var i=this.Av;n.off(Wi.move,i);var r=this.Rv;n.off(Wi.up,r),n.off(Wi.upoutside,r),n.off(Wi.cancel,r)}},n.prototype.updateValue=function(){var t=this.Wu.value,n=this.Xu.value,i=this.At,r=i.rounder(t+this.jv*(n-t)),e=i.value;r!==e&&(i.value=r,i.text=i.value,this.emit("change",r,e,this))},n.prototype.onResize=function(n,i,r,e){t.prototype.onResize.call(this,n,i,r,e),this.onValuesChange()},Object.defineProperty(n.prototype,"value",{get:function(){return this.At.value},set:function(t){t=Math.max(this.Wu.value,Math.min(this.Xu.value,t)),this.At.value!==t&&(this.At.value=t,this.onValuesChange())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this.Wu.value},set:function(t){var n=this.Wu;if(t=Math.min(this.Xu.value,t),n.value!==t){var i=this.At;n.text=n.value=t,i.value=Math.max(t,i.value),this.onValuesChange()}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this.Xu.value},set:function(t){var n=this.Xu;if(t=Math.max(this.Wu.value,t),n.value!==t){var i=this.At;n.text=n.value=t,i.value=Math.min(t,i.value),this.onValuesChange()}},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DSlider"},n}(Zi),Dw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DSliderTrack"},n}(js),Ew=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DSliderTrackHorizontal"},n}(Dw),Mw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.newTrack=function(t){return new Ew(null==t?void 0:t.track)},i.prototype.newTrackSelected=function(t){return new Ew(null==t?void 0:t.track)},i.prototype.toValueOptions=function(t){var i=this;return null==(t=n.prototype.toValueOptions.call(this,t)).y&&(t.y=function(t,n){return.5*t-n-i.getValueMargin()}),t},i.prototype.toLabelMinOptions=function(t){return null==(t=n.prototype.toLabelMinOptions.call(this,t)).x&&(t.x=function(t,n){return.5*-n}),null==t.y&&(t.y=function(t,n){return-n}),t},i.prototype.toLabelMaxOptions=function(t){return null==(t=n.prototype.toLabelMaxOptions.call(this,t)).x&&(t.x=function(t,n){return t-.5*n}),null==t.y&&(t.y=function(t,n){return-n}),t},i.prototype.onPick=function(n){var i=new t.Point(0,0);this.toLocal(n,void 0,i);var r=Math.max(0,Math.min(this.Tv.width,i.x));this.jv=r/this.Tv.width,this.moveThumbPosition(r)},i.prototype.onValuesChange=function(){var t=this.Wu.value,n=this.Xu.value,i=this.At.value;this.jv=(i-t)/(n-t);var r=this.jv*this.Tv.width;this.moveThumbPosition(r)},i.prototype.moveThumbPosition=function(t){var n=this.Gc;n.x=t-.5*n.width,this.Nv.width=t;var i=this.At;i.x=t-.5*i.width,this.updateValue()},i.prototype.toThumbCoordinate=function(t){return t-.5*this.Gc.width},i.prototype.getType=function(){return"DSliderHorizontal"},i}(Ow),Sw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DSliderTrackVertical"},n}(Dw),jw=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.newTrack=function(t){return new Sw(null==t?void 0:t.track)},i.prototype.newTrackSelected=function(t){return new Sw(null==t?void 0:t.track)},i.prototype.toLabelMinOptions=function(t){null==(t=n.prototype.toLabelMinOptions.call(this,t)).x&&(t.x=function(t,n){return-n}),null==t.y&&(t.y=function(t,n){return t-.5*n});var i=t.text||{};t.text=i;var r=i.align||{};return i.align=r,null==r.horizontal&&(r.horizontal=ts.RIGHT),t},i.prototype.toLabelMaxOptions=function(t){null==(t=n.prototype.toLabelMaxOptions.call(this,t)).x&&(t.x=function(t,n){return-n}),null==t.y&&(t.y=function(t,n){return.5*-n});var i=t.text||{};t.text=i;var r=i.align||{};return i.align=r,null==r.horizontal&&(r.horizontal=ts.RIGHT),t},i.prototype.onPick=function(n){var i=new t.Point(0,0);this.toLocal(n,void 0,i);var r=this.height,e=Math.max(0,Math.min(r,i.y));this.jv=(r-e)/r,this.moveThumbPosition(e)},i.prototype.onValuesChange=function(){var t=this.Wu.value,n=this.Xu.value,i=this.At.value;this.jv=(i-t)/(n-t);var r=this.height*(1-this.jv);this.moveThumbPosition(r)},i.prototype.moveThumbPosition=function(t){var n=this.Gc;n.y=t-.5*n.height;var i=this.Nv;i.y=t,i.height=this.height-t;var r=this.At;r.y=t-r.height-this.getValueMargin(),this.updateValue()},i.prototype.getType=function(){return"DSliderVertical"},i}(Ow),Tw=function(){function t(){}return t.set=function(t,n,i,r,e){var u,s=this.toRenderable(n,i,r);t.renderable=s;var h=t.state;h.lock(),h.isDisabled=!s,!1!==e&&(h.isReadOnly=this.toReadOnly(n,i,r));var o=null===(u=r.state)||void 0===u?void 0:u.modifier;o&&o(n,i,t.state),h.unlock()},t.toReadOnly=function(t,n,i){var r=i.editing.enable;return!0!==r&&(!1===r||!r(t,n))},t.toRenderable=function(t,n,i){var r=i.renderable;return!0===r||!1!==r&&r(t,n)},t}(),Nw=function(t){function n(n,i,r,e){var u,s=this;return(s=t.call(this,e)||this).Lv=-1,s.kv=n,s.xv=i,s.Z=r,s.Bv=null!==(u=null==e?void 0:e.sync)&&void 0!==u?u:s.theme.isSyncEnabled(),s}return B(n,t),n.prototype.onActivate=function(n){var i,r=this;t.prototype.onActivate.call(this,n);var e=this.xv.selecting,u=e.dialog;if(u){var s=null!==(i=this.Ps)&&void 0!==i?i:null;e.setter(u,s),u.open(this).then((function(){var t=e.getter(u);r.Bv?t!==s&&(r.text=t,r.onValueChange(t,s)):r.onValueChange(t,null)}))}},n.prototype.onValueChange=function(t,n){var i=this._v;if(void 0!==i){var r=this.Lv,e=this.kv;this.xv.setter(i,e,t),this.emit("change",t,n,this),this.Z(t,n,i,r,e,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var t=this.Ps;return void 0!==t?t:null},set:function(t){this.text=t},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,u?(this._s=t,this.Ps=t,this.onTextChange(),this.createOrUpdateText()):this.text=t,Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellSelectDialog"},n}(js),Iw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DTableBodyCellActionDialog"},n}(Nw),Cw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onMenuSelect=function(n,i,r){var e=this._v;if(void 0!==e){var u=this.Lv,s=this.kv;this.xv.setter(e,s,n),t.prototype.onMenuSelect.call(this,n,i,r),this.Z(n,null,e,u,s,this)}},n.prototype.onKeyDownArrowDown=function(t){return!1},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.text=t,Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellActionMenu"},n}(km),Aw=function(t){function n(n,i,r,e){var u,s=this;return(s=t.call(this,e)||this).Lv=-1,s.kv=n,s.xv=i,s.Z=r,s.Bv=null!==(u=null==e?void 0:e.sync)&&void 0!==u?u:s.theme.isSyncEnabled(),s}return B(n,t),n.prototype.onActivate=function(n){var i=this;t.prototype.onActivate.call(this,n);var r=this.xv.selecting.promise;r&&r().then((function(t){var n;if(i.Bv){var r=null!==(n=i.Ps)&&void 0!==n?n:null;t!==r&&(i.text=t,i.onValueChange(t,r))}else i.onValueChange(t,null)}))},n.prototype.onValueChange=function(t,n){var i=this._v;if(void 0!==i){var r=this.Lv,e=this.kv;this.xv.setter(i,e,t),this.emit("change",t,n,this),this.Z(t,n,i,r,e,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var t=this.Ps;return void 0!==t?t:null},set:function(t){this.text=t},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,u?(this._s=t,this.Ps=t,this.onTextChange(),this.createOrUpdateText()):this.text=t,Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellSelectPromise"},n}(js),Rw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DTableBodyCellActionPromise"},n}(Aw),yw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.text=t,Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellText"},n}(Ms),Lw=function(t){function n(n,i,r,e){var u,s=this;s=t.call(this,n,i,r,e)||this;var h=Oi(null!==(u=null==e?void 0:e.when)&&void 0!==u?u:qu.CLICKED,qu);return s.Ys=h,s.initOnClick(h,s.theme,e),s}return B(n,t),n.prototype.initOnClick=function(t,n,i){var r=this;Wi.onClick(this,(function(n){t===qu.CLICKED&&r.onClick(n)}))},n.prototype.onClick=function(t){this.state.isActionable&&this.onActivate(t)},n.prototype.onDblClick=function(n,i){return this.Ys===qu.DOUBLE_CLICKED&&this.onClick(n),t.prototype.onDblClick.call(this,n,i)},n.prototype.onActivate=function(t){this.emit("active",this);var n=this._v;if(void 0!==n){var i=this.Lv,r=this.kv;this.emit("change",null,null,this),this.Z(null,null,n,i,r,this)}},n.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.state.isPressed=!0)},n.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.state.isPressed&&this.onActivate(t),this.state.isPressed=!1)},n.prototype.onKeyDown=function(n){return Zt.isActivateKey(n)&&this.onActivateKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return Zt.isActivateKey(n)&&this.onActivateKeyUp(n),t.prototype.onKeyUp.call(this,n)},n.prototype.getType=function(){return"DTableBodyCellButton"},n}(yw),kw={INDEX:0,TEXT:1,INTEGER:2,REAL:3,CHECK:4,CHECK_SINGLE:5,COLOR:6,BUTTON:7,SELECT:8,DATE:9,DATETIME:10,TIME:11,ACTION:12,LINK:13,TREE:14},xw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.onValueChange(!0,!1)},n.prototype.onInactivate=function(n){t.prototype.onInactivate.call(this,n),this.onValueChange(!1,!0)},n.prototype.onValueChange=function(t,n){var i=this._v;if(void 0!==i){var r=this.Lv,e=this.kv,u=this.xv;u.setter(i,e,t),this.emit("change",t,n,this);var s=this.Z;s(t,n,i,r,e,this),t&&u.type===kw.CHECK_SINGLE&&this.onChangeSingle(r,e,u,s)}},n.prototype.onChangeSingle=function(t,n,i,r){var e=this,u=this.parent;if(u){var s=u.parent;if(s){var h=!1,o=i.getter,a=i.setter;s.data.each((function(i,u){return t===u||!o(i,n)||(a(i,n,!1),h=!0,r(!1,!0,i,u,n,e),!1)})),h&&s.update(!0)}}},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.state.isActive=!!t,Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellCheck"},n}(Sb),Bw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i){var r=this._v;if(void 0!==r){var e=this.Lv,u=this.kv;this.xv.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.Z(n,i,r,e,u,this)}else t.prototype.onValueChange.call(this,n,i)},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r;var s=this.value;if(gn(t))s.color=t,s.alpha=1;else if(at(t)){var h=Number(t);s.color=h==h?h:16777215,s.alpha=1}else if(null!=t){var o=t.color,a=t.alpha;s.color=gn(o)?o:16777215,s.alpha=gn(a)?a:1}else s.color=16777215,s.alpha=1;Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellColor"},n}(Hb),_w=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i){var r=this._v;if(void 0!==r){var e=this.Lv,u=this.kv;this.xv.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.Z(n,i,r,e,u,this)}else t.prototype.onValueChange.call(this,n,i)},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){if(this._v=n,this.Lv=r,t instanceof Date)u?(this._s=t,this.Ps=t,this.onTextChange(),this.createOrUpdateText()):this.text=t;else if(gn(t)){var s=this.Ps;void 0===s?this.text=new Date(t):s.getTime()!==t&&(s.setTime(t),this.onTextChange(),this.createOrUpdateText())}Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellDate"},n}(Wb),Pw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i){var r=this._v;if(void 0!==r){var e=this.Lv,u=this.kv;this.xv.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.Z(n,i,r,e,u,this)}else t.prototype.onValueChange.call(this,n,i)},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){if(this._v=n,this.Lv=r,t instanceof Date)u?(this._s=t,this.Ps=t,this.onTextChange(),this.createOrUpdateText()):this.text=t;else if(gn(t)){var s=this.Ps;null==s?this.text=new Date(t):s.getTime()!==t&&(s.setTime(t),this.onTextChange(),this.createOrUpdateText())}Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellDatetime"},n}(Jb),Fw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.text=r,Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellIndex"},n}(Ms),Uw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i){var r=this._v;if(void 0!==r){var e=this.Lv,u=this.kv;this.xv.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.Z(n,i,r,e,u,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.text=Number(t),Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellInputInteger"},n}(Ws),Gw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i){var r=this._v;if(void 0!==r){var e=this.Lv,u=this.kv;this.xv.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.Z(n,i,r,e,u,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.text=Number(t),Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellInputReal"},n}(Ks),zw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i){var r=this._v;if(void 0!==r){var e=this.Lv,u=this.kv;this.xv.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.Z(n,i,r,e,u,this)}},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.text=String(t),Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellInputText"},n}(qs),Hw=function(t){function n(n){var i=t.call(this,n)||this;return i.Gn=new Eb(i.Gn),i}return B(n,t),Object.defineProperty(n.prototype,"padding",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DTableBodyCellInputTreeInput"},n}(qs),Vw=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DTableBodyCellInputTreeMarker"},n}(Ss),Ww={START:"START",END:"END",FROZEN:"FROZEN",FROZEN_END:"FROZEN_END",SORTABLE:"SORTABLE",SORTED_ASCENDING:"SORTED_ASCENDING",SORTED_DESCENDING:"SORTED_DESCENDING",HAS_CHILDREN:"HAS_CHILDREN",OPENED:"OPENED",CHECKABLE:"CHECKABLE",SELECTABLE:"SELECTABLE"},Xw=function(t){function n(n,i,r,e){var u=t.call(this,function(t){if(null!=t)return{weight:t.weight,width:t.width}}(e))||this;u.Lv=-1,u.kv=n,u.xv=i,u.Z=r;var s=u.newInput(e);u.ih=s,u.addChild(s);var h=u.newMarker(e);return u.A=h,u.addChild(h),u}return B(n,t),n.prototype.newInput=function(t){return new Hw(this.toInputOptions(t))},n.prototype.toInputOptions=function(t){var n=this;return{weight:1,text:null==t?void 0:t.text,editing:null==t?void 0:t.editing,when:null==t?void 0:t.when,cursor:null==t?void 0:t.cursor,on:{change:function(t,i){n.onInputChange(t,i)}}}},n.prototype.onInputChange=function(t,n){var i=this._v;if(void 0!==i){var r=this.Lv,e=this.kv;this.xv.setter(i,e,t),this.emit("change",t,n,this),this.Z(t,n,i,r,e,this)}},n.prototype.newMarker=function(t){var n=this;return new Vw({visible:!1,on:{active:function(){n.onMarkerActive()}}})},n.prototype.onMarkerActive=function(){if(this.A.state.is(Ww.HAS_CHILDREN)){var t=this.parent;if(t){var n=t.parent;if(n){var i=n.data;i&&i.toggle&&(i.toggle(this._v),this.emit("cellchange",null,null,this._v,this.Lv,this.kv,this))}}}},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.onRowSelect=function(t,n){return n.x<=this.position.x+this.ih.padding.getLeft()},n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r;var s=this.ih;s.visible=!0,s.text=String(t);var h=this.A;if(gn(i)){var o=!!(1&i),a=!!(2&i),c=i>>2,f=h.state;f.lock(),f.set(Ww.HAS_CHILDREN,a),f.set(ht.DISABLED,!a),f.set(Ww.OPENED,o),f.unlock();var l=this.theme.getLevelPadding(c);h.width=l,a?h.show():h.hide(),s.padding.adjLeft(l)}else h.state.removeAll(Ww.OPENED,Ww.HAS_CHILDREN),h.hide(),s.padding.adjLeft(0);Tw.set(this.ih,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1,this.ih.visible=!1,this.A.hide()},n.prototype.getType=function(){return"DTableBodyCellInputTree"},n}(Zi),Yw=function(t,n){if(n)return{url:Kw(t,n.url),target:n.target,checker:Jw(t,n.checker),menu:n.menu}},Kw=function(t,n){return at(n)||null==n?n:function(){var i=t.row;return void 0!==i?n(i,t.rowIndex,t.columnIndex,t):null}},Jw=function(t,n){if(null!=n)return function(){var i=t.row;return void 0!==i&&n(i,t.rowIndex,t.columnIndex,t)}},Zw=function(t){function n(n,i,r,e){var u;return t.call(this,n,i,r,El.toStateOptions(null===(u=null==e?void 0:e.link)||void 0===u?void 0:u.target,e))||this}return B(n,t),n.prototype.initOnClick=function(t,n,i){var r=this;this.link.add(this,(function(n){t===qu.CLICKED&&r.onClick(n)}))},Object.defineProperty(n.prototype,"link",{get:function(){var t,n=this.bo;return null==n&&(n=new Dl(Yw(this,null===(t=this.yn)||void 0===t?void 0:t.link)),this.bo=n),n},enumerable:!1,configurable:!0}),n.prototype.getType=function(){return"DTableBodyCellLink"},n.prototype.onActivate=function(n){t.prototype.onActivate.call(this,n),this.link.open(n)},n.prototype.open=function(t){this.link.open(t)},n}(Lw),qw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i,r){var e=this._v;if(void 0!==e){var u=this.Lv,s=this.kv;this.xv.setter(e,s,n),t.prototype.onValueChange.call(this,n,i,r),this.Z(n,i,e,u,s,this)}},n.prototype.onKeyDownArrowDown=function(t){return!1},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.value=t,Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellSelectMenu"},n}(dw),Qw=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i,r){var e=this._v;if(void 0!==e){var u=this.Lv,s=this.kv;this.xv.setter(e,s,n),t.prototype.onValueChange.call(this,n,i,r),this.Z(n,i,e,u,s,this)}},n.prototype.onKeyDownArrowDown=function(t){return!1},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.values=t,Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellSelectMultiple"},n}(bw),$w=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Lv=-1,u.kv=n,u.xv=i,u.Z=r,u}return B(n,t),n.prototype.onValueChange=function(n,i){var r=this._v;if(void 0!==r){var e=this.Lv,u=this.kv;this.xv.setter(r,u,n),t.prototype.onValueChange.call(this,n,i),this.Z(n,i,r,e,u,this)}else t.prototype.onValueChange.call(this,n,i)},Object.defineProperty(n.prototype,"row",{get:function(){return this._v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowIndex",{get:function(){return this.Lv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),n.prototype.set=function(t,n,i,r,e,u){if(this._v=n,this.Lv=r,t instanceof Date)u?(this._s=t,this.Ps=t,this.onTextChange(),this.createOrUpdateText()):this.text=t;else if(gn(t)){var s=this.Ps;null==s?this.text=new Date(t):s.getTime()!==t&&(s.setTime(t),this.onTextChange(),this.createOrUpdateText())}Tw.set(this,n,e,this.xv)},n.prototype.unset=function(){this._v=void 0,this.Lv=-1},n.prototype.getType=function(){return"DTableBodyCellTime"},n}(Gd),tp=function(t){function n(n,i,r,e){var u,s=this;return(s=t.call(this,n,i,r,El.toStateOptions(null===(u=null==e?void 0:e.link)||void 0===u?void 0:u.target,e))||this).Gn=new Eb(s.Gn),s}return B(n,t),n.prototype.initOnClick=function(n,i,r){var e=this,u=this.link;u?u.add(this,(function(t){n===qu.CLICKED&&e.onClick(t)})):t.prototype.initOnClick.call(this,n,i,r)},Object.defineProperty(n.prototype,"link",{get:function(){var t=this.bo;return void 0===t&&(t=this.newLink(),this.bo=t),t},enumerable:!1,configurable:!0}),n.prototype.newLink=function(){var t,n=null===(t=this.yn)||void 0===t?void 0:t.link;return n?new Dl(Yw(this,n)):null},n.prototype.onActivate=function(n){var i;t.prototype.onActivate.call(this,n),this.state.is(Ww.HAS_CHILDREN)?this.toggle():null===(i=this.link)||void 0===i||i.open(n)},n.prototype.toggle=function(){var t=this._v;if(void 0!==t){var n=this.parent;if(null!=n){var i=n.parent;if(null!=i){var r=i.data;r&&r.toggle&&r.toggle(t)}}}},n.prototype.onRowSelect=function(t,n){return n.x<=this.position.x+this.padding.getLeft()&&(this.toggle(),!0)},n.prototype.set=function(t,n,i,r,e,u){this._v=n,this.Lv=r,this.text=t,Tw.set(this,n,e,this.xv,!1);var s=this.link,h=this.Gn;if(gn(i)){var o=!!(1&i),a=!!(2&i),c=i>>2,f=this.state;f.lock(),f.set(Ww.HAS_CHILDREN,a),f.set(Ww.OPENED,o),f.unlock(),h.adjLeft(this.theme.getLevelPadding(c)),s&&(s.menu.enable=!a)}else this.state.removeAll(Ww.OPENED,Ww.HAS_CHILDREN),h.adjLeft(0),s&&(s.menu.enable=!1)},n.prototype.getType=function(){return"DTableBodyCellTree"},n}(Lw),np={NONE:0,SINGLE:1,MULTIPLE:2},ip=function(t){function n(n){var i,r,e=this;return(e=t.call(this,n)||this).qn=!0,e.Pv=null!==(i=n.frozen)&&void 0!==i?i:0,e.Fv=null!==(r=n.columns)&&void 0!==r?r:[],e}return B(n,t),n.prototype.initCells=function(t,n,i){for(var r=this.toIndexEnd(n),e=n.length-1;0<=e;--e){var u=this.newCell(e,n[e],n,t),s=u.state;s.lock(!1),0===e&&s.add(Ww.START),e===r&&s.add(Ww.END),e<i&&s.add(Ww.FROZEN),e===i-1&&s.add(Ww.FROZEN_END),s.unlock(),this.addChild(u)}},n.prototype.toIndexEnd=function(t){for(var n=t.length,i=0;i<n;++i)if(void 0!==t[i].weight)return n-1;return n},n.prototype.onRefit=function(){t.prototype.onRefit.call(this),this.resetFrozenCellPosition()},n.prototype.updateFrozenCellPosition=function(t){for(var n=this.Fv,i=this.children,r=i.length,e=this.Pv,u=0;u<e;++u){var s=n[u];i[r-1-u].position.x=-t+s.offset}},n.prototype.resetFrozenCellPosition=function(){for(var t=this.Fv,n=this.children,i=n.length,r=this.Pv,e=this.getContentPositionX(),u=0;u<r;++u){var s=t[u],h=n[i-1-u];s.offset=h.position.x,h.position.x=-e+s.offset}},n.prototype.getClippingRect=function(n,i){t.prototype.getClippingRect.call(this,n,i);var r=this.Pv;if(0<r){var e=n;if(e&&e.parent===this){var u=this.children,s=u.indexOf(e);if(0<=s&&r<=u.length-1-s){var h=u[s+1],o=h.position.x+h.width;i.x+=o,i.width-=o}}}},n.prototype.getType=function(){return"DTableRow"},n}(Ns),rp=function(t){function n(n,i,r,e){var u=t.call(this,e)||this;return u.Ve=-1,u.Uv=function(t,i,r,e,s){u.emit("change",t,i,r,e,s,u),n(t,i,r,e,s,u)},u.Gv=r,u.state.isAlternated=!i,u.initCells(e,u.Fv,u.Pv),u}return B(n,t),n.prototype.newCell=function(t,n,i,r){var e=this.Uv,u=this.Gv,s=u.get(t);if(null==s&&(s=this.toCellOptions(t,n,r),u.set(t,s)),!1!==n.editing.enable)return this.newCellEditable(t,n,e,s);var h=this.newCellUnediable(t,n,e,s);return n.type!==kw.TREE&&(h.state.isReadOnly=!0),h},n.prototype.newCellEditable=function(t,n,i,r){switch(n.type){case kw.INDEX:return new Fw(t,n,i,r);case kw.TEXT:return new zw(t,n,i,r);case kw.TREE:return new Xw(t,n,i,r);case kw.INTEGER:return new Uw(t,n,i,r);case kw.REAL:return new Gw(t,n,i,r);case kw.CHECK:case kw.CHECK_SINGLE:return new xw(t,n,i,r);case kw.COLOR:return new Bw(t,n,i,r);case kw.BUTTON:return new Lw(t,n,i,r);case kw.LINK:return new Zw(t,n,i,r);case kw.SELECT:return this.newCellSelect(t,n,i,r);case kw.ACTION:return this.newCellAction(t,n,i,r);case kw.DATE:return new _w(t,n,i,r);case kw.DATETIME:return new Pw(t,n,i,r);case kw.TIME:return new $w(t,n,i,r);default:return new yw(t,n,i,r)}},n.prototype.newCellUnediable=function(t,n,i,r){switch(n.type){case kw.INDEX:return new Fw(t,n,i,r);case kw.TEXT:return new yw(t,n,i,r);case kw.TREE:return new tp(t,n,i,r);case kw.INTEGER:case kw.REAL:return new yw(t,n,i,r);case kw.CHECK:case kw.CHECK_SINGLE:return new xw(t,n,i,r);case kw.COLOR:return new Bw(t,n,i,r);case kw.BUTTON:return new Lw(t,n,i,r);case kw.LINK:return new Zw(t,n,i,r);case kw.SELECT:return this.newCellSelect(t,n,i,r);case kw.ACTION:return this.newCellAction(t,n,i,r);case kw.DATE:return new _w(t,n,i,r);case kw.DATETIME:return new Pw(t,n,i,r);case kw.TIME:return new $w(t,n,i,r);default:return new yw(t,n,i,r)}},n.prototype.newCellSelect=function(t,n,i,r){var e=n.selecting;return null!=e.menu?new qw(t,n,i,r):null!=e.multiple?new Qw(t,n,i,r):null!=e.dialog?new Nw(t,n,i,r):null!=e.promise?new Aw(t,n,i,r):new yw(t,n,i,r)},n.prototype.newCellAction=function(t,n,i,r){var e=n.selecting;return null!=e.menu?new Cw(t,n,i,r):null!=e.dialog?new Iw(t,n,i,r):null!=e.promise?new Rw(t,n,i,r):new yw(t,n,i,r)},n.prototype.toCellOptions=function(t,n,i){var r,e,u,s,h,o,a,c,f,l,v,b,d,g,m=Xv(n.body,i.cell);m.weight=n.weight,m.width=n.width,null!==(r=m.state)&&void 0!==r||(m.state=n.state.initial);var w=n.formatter;null!=w&&(null!==(u=(O=null!==(e=m.text)&&void 0!==e?e:m.text={}).formatter)&&void 0!==u||(O.formatter=w));var p=n.align;if(null!=p){var O,D=null!==(h=(O=null!==(s=m.text)&&void 0!==s?s:m.text={}).align)&&void 0!==h?h:O.align={};null!==(o=D.horizontal)&&void 0!==o||(D.horizontal=p)}var E=n.editing;if(!1!==E.enable){var M=null!==(a=(g=m).editing)&&void 0!==a?a:g.editing={};null!==(c=M.formatter)&&void 0!==c||(M.formatter=E.formatter),null!==(f=M.unformatter)&&void 0!==f||(M.unformatter=E.unformatter),null!==(l=M.validator)&&void 0!==l||(M.validator=E.validator)}var S=n.link;void 0!==S&&(m.link=S);var j=n.selecting,T=null!==(v=j.menu)&&void 0!==v?v:j.multiple;return void 0!==T&&(m.menu=T),(null!==(d=null===(b=null==i?void 0:i.selection)||void 0===b?void 0:b.type)&&void 0!==d?d:np.NONE)!==np.NONE&&(m.when="DOUBLE_CLICKED",m.cursor=function(t){if(t.in(Ww.SELECTABLE))return"pointer"}),m},n.prototype.getType=function(){return"DTableBodyRow"},Object.defineProperty(n.prototype,"value",{get:function(){return this.At},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.Ve},enumerable:!1,configurable:!0}),n.prototype.isCell=function(t){return null!=t&&"set"in t},n.prototype.set=function(t,n,i,r){if(r||this.At!==t||this.Ve!==i){this.At=t,this.Ve=i;for(var e=this.children,u=e.length,s=this.Fv,h=s.length,o=0;o<u;++o){var a=e[o],c=h-1-o,f=s[c];this.isCell(a)&&a.set(f.getter(t,c),t,n,i,c,r)}this.onSet(t,i)}},n.prototype.onSet=function(t,n){this.emit("set",t,n,this)},n.prototype.unset=function(){if(void 0!==this.At){this.At=void 0,this.Ve=-1;for(var t=this.children,n=t.length,i=0;i<n;++i){var r=t[i];this.isCell(r)&&r.unset()}this.onUnset()}},n.prototype.onUnset=function(){this.emit("unset",this)},n.prototype.getContentPositionX=function(){var t=this.parent;if(t){var n=t.parent;if(n)return n.position.x}return 0},n}(ip),ep=function(t){function n(n){var i=t.call(this)||this;return i.R=0,i.Qf=-1,i.zv=!1,i.Hv=-1,i.p=n,i.dv=null,i.Vv=null,i}return B(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),n.prototype.apply=function(){this.zv=!0,this.R+=1,this.p.update()},n.prototype.unapply=function(){this.zv&&(this.zv=!1,this.R+=1,this.p.update())},n.prototype.isApplied=function(){return this.zv},n.prototype.newFiltered=function(){var t=this.dv;if(null!=t){var n,i=[],r=this.p,e=r.sorter,u=r.rows;if(ot(t))if(n=e.indices)for(var s=0,h=n.length;s<h;++s)t(u[o=n[s]],o)&&i.push(s);else for(s=0,h=u.length;s<h;++s)t(u[s],s)&&i.push(s);else if(n=e.indices)for(s=0,h=n.length;s<h;++s){var o=n[s];t.test(u[o],o)&&i.push(s)}else for(s=0,h=u.length;s<h;++s)t.test(u[s],s)&&i.push(s);return i}return null},n.prototype.get=function(){return this.dv},n.prototype.set=function(t){this.dv!==t&&(this.dv=t)},n.prototype.toDirty=function(){this.R+=1},n.prototype.update=function(){this.R===this.Qf&&this.p.sorter.id===this.Hv||(this.Qf=this.R,this.Hv=this.p.sorter.id,this.zv?(this.Vv=this.newFiltered(),this.emit("change",this)):null!=this.Vv&&(this.Vv=null,this.emit("change",this)))},Object.defineProperty(n.prototype,"indices",{get:function(){return this.update(),this.Vv},enumerable:!1,configurable:!0}),n.prototype.map=function(t){var n=t,i=this.indices;if(i){var r=i.indexOf(n);if(!(0<=r))return null;n=r}return n},n.prototype.unmap=function(t){var n=t,i=this.indices;return i&&(n=i[n]),n},n}(t.utils.EventEmitter),up=function(){function t(t){this.p=t}return t.prototype.map=function(t){var n=this.p,i=n.sorter.map(t);return null!=i?n.filter.map(i):null},t.prototype.unmap=function(t){var n=this.p;return n.sorter.unmap(n.filter.unmap(t))},t.prototype.size=function(){var t=this.p,n=t.filter.indices;return null!=n?n.length:t.size()},t.prototype.get=function(t){return this.p.get(this.unmap(t))},t.prototype.each=function(t,n,i){var r=this.p,e=r.rows,u=r.supplimentals,s=r.filter.indices,h=r.sorter.indices;if(n=null!=n?Math.max(0,n):0,s){var o=s.length;if(i=null!=i?Math.min(o,i):o,h)for(var a=n;a<i&&!1!==t(e[c=h[s[a]]],u?u[c]:null,a,c);++a);else for(a=n;a<i&&!1!==t(e[c=s[a]],u?u[c]:null,a,c);++a);}else if(o=e.length,i=null!=i?Math.min(o,i):o,h)for(a=n;a<i;++a){var c;if(!1===t(e[c=h[a]],u?u[c]:null,a,c))break}else for(a=n;a<i&&!1!==t(e[a],u?u[a]:null,a,a);++a);},t}(),sp=function(t,n){return t[0]-n[0]},hp=function(t){function n(n,i){var r,e=this;return(e=t.call(this)||this).p=n,e.Tt=Oi(null!==(r=null==i?void 0:i.type)&&void 0!==r?r:np.NONE,np),e.mn=new Set,e}return B(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return this.Tt},enumerable:!1,configurable:!0}),n.prototype.onChange=function(){this.p.update(),this.emit("change",this)},n.prototype.toggle=function(t){var n=this.mn;n.has(t)?n.delete(t):n.add(t),this.onChange()},n.prototype.add=function(t){var n=this.mn,i=n.size;n.add(t),i!==n.size&&this.onChange()},Object.defineProperty(n.prototype,"first",{get:function(){var t=this.mn;if(0<t.size){var n=NaN;return t.forEach((function(t){n!=n&&(n=t)})),n}return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var t=this.mn;if(0<t.size){var n=0;return t.forEach((function(t){n=t})),n}return null},enumerable:!1,configurable:!0}),n.prototype.addTo=function(t){var n=this.last;null!=n&&this.addRange(n,!1,t,!0)},n.prototype.addRange=function(t,n,i,r){var e=this.mn,u=e.size;if(t<i)for(var s=i+(r?1:0),h=t+(n?0:1);h<s;++h)e.add(h);else for(s=t+(n?1:0),h=i+(r?0:1);h<s;++h)e.add(h);u!==e.size&&this.onChange()},n.prototype.addAll=function(t){for(var n=this.mn,i=n.size,r=0,e=t.length;r<e;++r)n.add(t[r]);i!==n.size&&this.onChange()},n.prototype.contains=function(t){return this.mn.has(t)},n.prototype.remove=function(t){this.mn.delete(t)&&this.onChange()},n.prototype.clear=function(){var t=this.mn;0<t.size&&(t.clear(),this.onChange())},n.prototype.clearAndAdd=function(t){var n=this.mn;n.has(t)&&1===n.size||(n.clear(),n.add(t),this.onChange())},n.prototype.clearAndAddAll=function(t){var n=this.mn;if(0<n.size||0<t.length){n.clear();for(var i=0,r=t.length;i<r;++i)n.add(t[i]);this.onChange()}},n.prototype.shift=function(t,n){var i=[],r=this.mn;if(r.forEach((function(n){t<=n&&i.push(n)})),0<i.length){for(var e=0,u=i.length;e<u;++e)r.delete(i[e]);for(e=0,u=i.length;e<u;++e)r.add(i[e]+n);this.onChange()}},n.prototype.size=function(){return this.mn.size},n.prototype.isEmpty=function(){return 0===this.mn.size},Object.defineProperty(n.prototype,"indices",{get:function(){var t=[];return this.mn.forEach((function(n){t.push(n)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){var t=[],n=this.p;return this.mn.forEach((function(i){t.push(n.get(i))})),t},enumerable:!1,configurable:!0}),n.prototype.toArray=function(){var t=[],n=this.p;return this.mn.forEach((function(i){t.push([i,n.get(i)])})),t},n.prototype.toSortedArray=function(){return this.toArray().sort(sp)},n.prototype.toObject=function(){var t={},n=this.p;return this.mn.forEach((function(i){t[i]=n.get(i)})),t},n.prototype.toMap=function(){var t=new Map,n=this.p;return this.mn.forEach((function(i){t.set(i,n.get(i))})),t},n}(t.utils.EventEmitter),op={ASCENDING:0,DESCENDING:1},ap=function(t){function n(n){var i=t.call(this)||this;return i.R=0,i.Qf=-1,i.zv=!1,i.p=n,i.Wv=null,i.Xv=null,i.Lt=op.ASCENDING,i}return B(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"order",{get:function(){return this.Lt},set:function(t){this.Lt=t},enumerable:!1,configurable:!0}),n.prototype.apply=function(){this.zv=!0,this.R+=1,this.p.update()},n.prototype.unapply=function(){this.zv&&(this.zv=!1,this.R+=1,this.p.update())},n.prototype.isApplied=function(){return this.zv},n.prototype.newSorted=function(){var t=this.Wv;if(null!=t){for(var n=[],i=this.p.rows,r=0,e=i.length;r<e;++r)n.push(r);return n.sort(this.toComparator(i,t)),n}return null},n.prototype.toComparator=function(t,n){var i=this.Lt;return ot(n)?i===op.ASCENDING?function(i,r){return n(t[i],t[r],i,r)}:function(i,r){return n(t[r],t[i],r,i)}:i===op.ASCENDING?function(i,r){return n.compare(t[i],t[r],i,r)}:function(i,r){return n.compare(t[r],t[i],r,i)}},n.prototype.get=function(){return this.Wv},n.prototype.set=function(t){this.Wv!==t&&(this.Wv=t)},n.prototype.toDirty=function(){this.R+=1},n.prototype.update=function(){this.R!==this.Qf&&(this.Qf=this.R,this.zv?(this.Xv=this.newSorted(),this.emit("change",this)):null!=this.Xv&&(this.Xv=null,this.emit("change",this)))},Object.defineProperty(n.prototype,"indices",{get:function(){return this.update(),this.Xv},enumerable:!1,configurable:!0}),n.prototype.map=function(t){var n=t,i=this.indices;if(i){var r=i.indexOf(n);if(!(0<=r))return null;n=r}return n},n.prototype.unmap=function(t){var n=t,i=this.indices;return i&&(n=i[n]),n},n}(t.utils.EventEmitter),cp=function(n){function i(t){var i=n.call(this)||this;if(i.p=null,i.Yv=i.toRows(null==t?void 0:t.rows),i.yc=new up(i),i.Rc=i.toSelection(null==t?void 0:t.selection),i.dv=new ep(i),i.Kv=new ap(i),t){var r=t.filter;r&&i.dv.set(r);var e=t.comparator;e&&i.Kv.set(e);var u=t.on;if(u)for(var s in u){var h=u[s];h&&i.on(s,h)}}return i}return B(i,n),i.prototype.toSelection=function(n){return n instanceof t.utils.EventEmitter?n:ot(n)?n(this):this.newSelection(n)},i.prototype.newSelection=function(t){return new hp(this,t)},i.prototype.bind=function(t){this.p=t},i.prototype.toRows=function(t){var n=[];if(null!=t)for(var i=0,r=t.length;i<r;++i)n.push(t[i]);return n},Object.defineProperty(i.prototype,"rows",{get:function(){return this.Yv},enumerable:!1,configurable:!0}),i.prototype.update=function(){var t=this.p;t&&t.update()},i.prototype.lock=function(){var t=this.p;t&&t.lock()},i.prototype.unlock=function(){var t=this.p;t&&(t.unlock(!1),t.update())},i.prototype.size=function(){return this.Yv.length},i.prototype.clear=function(){var t=this.Yv;0<t.length&&(t.length=0,this.lock(),this.Rc.clear(),this.Kv.toDirty(),this.dv.toDirty(),this.unlock())},i.prototype.clearAndAdd=function(t){var n=this.Yv;n.length=0,n.push(t),this.lock(),this.Rc.clear(),this.Kv.toDirty(),this.dv.toDirty(),this.unlock()},i.prototype.clearAndAddAll=function(t){var n=this.Yv;n.length=0;for(var i=0,r=t.length;i<r;++i)n.push(t[i]);this.lock(),this.Rc.clear(),this.Kv.toDirty(),this.dv.toDirty(),this.unlock()},i.prototype.add=function(t,n){var i=this.Yv,r=this.Rc,e=this.Kv,u=this.dv;null==n?(i.push(t),this.lock(),e.toDirty(),u.toDirty(),this.unlock()):0<=n&&n<i.length&&(i.splice(n,0,t),this.lock(),r.shift(n,1),e.toDirty(),u.toDirty(),this.unlock())},i.prototype.addAll=function(t,n){var i=this.Yv,r=i.length,e=this.Rc,u=this.Kv,s=this.dv;if(null==n){for(var h=0,o=a=t.length;h<o;++h)i.push(t[h]);this.lock(),u.toDirty(),s.toDirty(),this.unlock()}else if(0<=n&&n<r){var a=t.length;for(h=0;h<a;++h)i.splice(n+h,0,t[h]);this.lock(),e.shift(n,a),u.toDirty(),s.toDirty(),this.unlock()}},i.prototype.get=function(t){var n=this.Yv;return 0<=t&&t<n.length?n[t]:null},i.prototype.set=function(t,n){var i=this.Yv;if(0<=t&&t<i.length){var r=i[t];return i[t]=n,this.lock(),this.Kv.toDirty(),this.dv.toDirty(),this.unlock(),r}return null},i.prototype.remove=function(t){var n=this.Yv;if(0<=t&&t<n.length){var i=n.splice(t,1)[0];return this.lock(),this.Rc.remove(t),this.Kv.toDirty(),this.dv.toDirty(),this.unlock(),i}return null},i.prototype.each=function(t,n,i){var r=this.Yv;n=null!=n?Math.max(0,n):0,i=null!=i?Math.min(r.length,i):r.length;for(var e=n;e<i&&!1!==t(r[e],e);++e);},Object.defineProperty(i.prototype,"selection",{get:function(){return this.Rc},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filter",{get:function(){return this.dv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorter",{get:function(){return this.Kv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mapped",{get:function(){return this.yc},enumerable:!1,configurable:!0}),i}(t.utils.EventEmitter),fp=function(n){function i(t){var i,r=this;(r=n.call(this,t)||this).transform.position.y=null!==(i=t.offset)&&void 0!==i?i:0;var e=r.toData(t.data);r.Bt=e,e.bind(r);var u=r.theme,s=function(t,n,i){var r=n.columns||[],e=n.row;return null!=e?(null==e.height&&(e.height=t.getRowHeight()),void 0===e.columns&&(e.columns=r),null==e.frozen&&(e.frozen=n.frozen),void 0===e.selection?e.selection={type:i}:void 0===e.selection.type&&(e.selection.type=i)):e={columns:r,height:t.getRowHeight(),frozen:n.frozen,selection:{type:i}},e}(u,t,e.selection.type);return r.Jv=s,r.Zv=null!=s.height?s.height:u.getRowHeight(),r.Fv=s.columns||[],r.qv=0,r.Qv=0,r.$v=0,r.tb=!1,r.nb=!1,r.ib=[],r.rb=function(t,n,i,r,u){e.emit("change",t,n,i,r,u,e)},r.Gv=new Map,r.Bt.emit("init",r.Bt),r}return B(i,n),i.prototype.toData=function(t){return this.isData(t)?t:new cp(t)},i.prototype.isData=function(t){return null!=t&&"mapped"in t},i.prototype.onResize=function(t,i,r,e){n.prototype.onResize.call(this,t,i,r,e),this.update()},Object.defineProperty(i.prototype,"selection",{get:function(){return this.Bt.selection},enumerable:!1,configurable:!0}),i.prototype.lock=function(){this.$v+=1,1===this.$v&&(this.tb=!1,this.nb=!1)},i.prototype.unlock=function(t){this.$v-=1,0===this.$v&&(t&&this.tb&&this.update(this.nb),this.tb=!1,this.nb=!1)},i.prototype.update=function(t){if(0<this.$v)return this.tb=!0,void(t&&(this.nb=!0));var n=this.parent;if(null!=n){var i=n.parent;if(null!=i){var r=this.children,e=i.height,u=this.Zv,s=this.Bt,h=s.mapped.size(),o=this.qv,a=this.Qv,c=a-o,f=this.transform.position.y,l=f+h*u,v=Math.max(e,l),b=Math.max(e-v,n.position.y),d=Math.floor((0-(b+f))/u),g=Math.floor((e-(b+f))/u),m=d-(d%2==0?2:1),w=g+((g-m+1)%2==0?3:2),p=w-m;if(p<c&&c-2<=p&&(w=m+(p=c)),c<p){for(var O=c;O<p;++O){var D=o+O,E=this.newRow(D%2==0);this.addChild(E)}a=o+(c=p)}else if(p<c){for(O=c-1;p<=O;--O)this.removeChild(r[O]);a=o+(c=p)}this.qv=m,this.Qv=w;var M=m-o,S=Math.abs(M),j=r.length;if(0<S&&S<j){var T=this.ib;if(0<M){for(O=0;O<S;++O)T.push(this.resetRow(r[O]));for(O=S;O<j;++O)r[O-S]=r[O];for(O=0;O<S;++O)r[j-S+O]=T[O]}else{for(O=0;O<S;++O)T.push(this.resetRow(r[j-S+O]));for(O=j-S-1;0<=O;--O)r[O+S]=r[O];for(O=0;O<S;++O)r[O]=T[O]}T.length=0}var N=s.selection,I=N.type!==np.NONE;for(s.mapped.each((function(n,i,e,s){var h=r[e-m];h.position.y=e*u;var o=h.state;o.lock(),o.set(Ww.SELECTABLE,I),o.set(ht.ACTIVE,N.contains(s)),o.remove(ht.DISABLED),o.unlock(),h.set(n,i,s,t)}),m,m+j),O=0;m+O<0&&O<j;++O)(C=r[O]).position.y=(m+O)*u,(A=C.state).lock(),A.add(ht.DISABLED),A.removeAll(Ww.SELECTABLE,ht.ACTIVE),A.unlock(),C.unset();for(O=j-1;h<=m+O&&0<=O;--O){var C,A;(C=r[O]).position.y=(m+O)*u,(A=C.state).lock(),A.add(ht.DISABLED),A.removeAll(Ww.SELECTABLE,ht.ACTIVE),A.unlock(),C.unset()}this.lock(),n.position.y=b,n.height=v,this.height=l,this.unlock(!1)}}},i.prototype.resetRow=function(t){t.blur(!0);for(var n=t.children,i=0,r=n.length;i<r;++i){var e=n[i];e instanceof Zi&&(e.state.isPressed=!1)}return t},i.prototype.newRow=function(t){return new rp(this.rb,t,this.Gv,this.Jv)},i.prototype.onParentMove=function(t,i,r,e){n.prototype.onParentMove.call(this,t,i,r,e),this.updateFrozenCellPosition(t)},i.prototype.updateFrozenCellPosition=function(t){var n=this.Jv.frozen;if(null!=n&&0<n)for(var i=this.children,r=0,e=i.length;r<e;++r)i[r].updateFrozenCellPosition(t)},i.prototype.getClippingRect=function(t,i){n.prototype.getClippingRect.call(this,t,i);var r=this.parent;if(r){var e=-r.transform.position.y;i.y+=e,i.height-=e}},i.prototype.toRowIndexMapped=function(t){return 0<=this.parent.position.y+t.y?Math.floor(t.y/this.Zv):-1},i.prototype.toRow=function(t){var n=t-this.qv,i=this.children;return 0<=n&&n<i.length?i[n]:null},i.prototype.toCell=function(t,n){for(var i=t.children,r=i.length,e=this.Fv.length,u=0,s=Math.min(r,e);u<s;++u){var h=i[r-u-1],o=n.x-h.position.x;if(0<=o&&o<=h.width)return h}return null},i.prototype.onRowClick=function(t){if(this.state.isActionable){var n=i.WORK_ON_CLICK;n.copyFrom(t.data.global),this.toLocal(n,void 0,n,!1);var r=this.toRowIndexMapped(n);if(0<=r&&r<this.Bt.mapped.size()){var e=this.toRow(r);if(e){var u=this.toCell(e,n);if(u&&u.onRowSelect&&u.onRowSelect(t,n))return}this.onRowSelect(t,r)}}},i.prototype.onRowSelect=function(t,n){var i=this.Bt,r=i.selection,e=r.type===np.SINGLE,u=!e,s=i.mapped.unmap(n),h=t.data.originalEvent,o=h.ctrlKey,a=h.shiftKey;if(e||r.isEmpty()||!u||!o&&!a)r.clearAndAdd(s);else if(o)r.toggle(s);else if(a){var c=r.last;if(null!=c){var f=i.sorter,l=i.filter,v=f.map(s),b=f.map(c);if(null!=v&&null!=b){var d=b+1,g=v+1;if(v<b&&(d=v,g=b),d<g){var m=[],w=l.indices,p=f.indices;if(w)if(p)for(var O=0,D=w.length;O<D;++O)d<=(E=w[O])&&E<g&&m.push(p[E]);else for(O=0,D=w.length;O<D;++O){var E;d<=(E=w[O])&&E<g&&m.push(E)}else if(p)for(O=d;O<g;++O)m.push(p[O]);else for(O=d;O<g;++O)m.push(O);r.addAll(m)}}}}},i.prototype.getType=function(){return"DTableBody"},Object.defineProperty(i.prototype,"data",{get:function(){return this.Bt},enumerable:!1,configurable:!0}),i.WORK_ON_CLICK=new t.Point,i}(Zi),lp=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getType=function(){return"DTableCategoryCell"},n}(hl),vp=function(t){function n(n){var i,r=this;r=t.call(this,n)||this;var e=null!==(i=n.offset)&&void 0!==i?i:0;return r.tn=e,r.transform.position.y=e,r.initCells(n,r.Fv,r.Pv),r}return B(n,t),n.prototype.onParentMove=function(n,i,r,e){t.prototype.onParentMove.call(this,n,i,r,e),this.transform.position.y=-i+this.tn,this.updateFrozenCellPosition(n)},n.prototype.getContentPositionX=function(){var t=this.parent;return t?t.position.x:0},n.prototype.newCell=function(t,n,i,r){return new lp(this.toCellOptions(t,n,r))},n.prototype.toCellOptions=function(t,n,i){var r=i.cell;if(r){r.weight=n.weight,r.width=n.width;var e=r.text||{};return r.text=e,e.value=e.value||n.label,r}return{weight:n.weight,width:n.width,text:{value:n.label}}},n.prototype.getType=function(){return"DTableCategory"},n}(ip),bp=function(t){function n(n){var i=t.call(this)||this;return i.R=0,i.Qf=-1,i.zv=!1,i.p=n,i.dv=null,i.Vv=null,i}return B(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.R},enumerable:!1,configurable:!0}),n.prototype.apply=function(){this.zv=!0,this.R+=1,this.p.update()},n.prototype.unapply=function(){this.zv&&(this.zv=!1,this.R+=1,this.p.update())},n.prototype.isApplied=function(){return this.zv},n.prototype.isFiltered=function(t,n,i){return ot(i)?i(t,n):i.test(t,n)},n.prototype.hasFiltered=function(t,n,i){for(var r=this.p.accessor.toChildren,e=0,u=n.length;e<u;++e){var s=n[e];if(this.isFiltered(s,-1,i))return!0;var h=r(s);if(null!=h&&0<h.length&&this.hasFiltered(t,h,i))return!0}return!1},n.prototype.addAllToFiltered=function(t,n,i,r){for(var e=this.p.accessor.toChildren,u=0,s=n.length;u<s;++u){var h=n[u];i.push(r[0]),r[0]+=1;var o=e(h);null!=o&&0<o.length&&t.isOpened(h)&&this.addAllToFiltered(t,o,i,r)}},n.prototype.newFilteredSub=function(t,n,i,r,e){for(var u=!1,s=this.p.accessor.toChildren,h=0,o=n.length;h<o;++h){var a=n[h],c=e[0];e[0]+=1;var f=this.isFiltered(a,c,i),l=s(a);if(null!=l&&0<l.length)if(t.isOpened(a))if(f)r.push(c),u=!0,this.addAllToFiltered(t,l,r,e);else{var v=r.length;this.newFilteredSub(t,l,i,r,e)&&(r.splice(v,0,c),u=!0)}else(f||this.hasFiltered(t,l,i))&&(r.push(c),u=!0);else f&&(r.push(c),u=!0)}return u},n.prototype.newFiltered=function(){var t=this.dv;if(null!=t){var n=[],i=this.p,r=i.nodes;return r&&this.newFilteredSub(i,r,t,n,[0]),n}return null},n.prototype.get=function(){return this.dv},n.prototype.set=function(t){this.dv!==t&&(this.dv=t)},n.prototype.toDirty=function(){this.R+=1},n.prototype.update=function(){this.R!==this.Qf&&(this.Qf=this.R,this.zv?(this.Vv=this.newFiltered(),this.emit("change",this)):null!=this.Vv&&(this.Vv=null,this.emit("change",this)))},Object.defineProperty(n.prototype,"indices",{get:function(){return this.update(),this.Vv},enumerable:!1,configurable:!0}),n.prototype.map=function(t){var n=t,i=this.indices;if(i){var r=i.indexOf(n);if(!(0<=r))return null;n=r}return n},n.prototype.unmap=function(t){var n=t,i=this.indices;return i&&(n=i[n]),n},n}(t.utils.EventEmitter),dp=function(t){return t.parent},gp=function(t){return t.children},mp=function(t){var n,i;this.toParent=null!==(n=null==t?void 0:t.toParent)&&void 0!==n?n:dp,this.toChildren=null!==(i=null==t?void 0:t.toChildren)&&void 0!==i?i:gp},wp=function(t,n){return t[0]-n[0]},pp=function(t){function n(n,i){var r,e=this;return(e=t.call(this)||this).p=n,e.Tt=Oi(null!==(r=null==i?void 0:i.type)&&void 0!==r?r:np.NONE,np),e.Yv=new Set,e}return B(n,t),n.prototype.onNodeChange=function(t){if(null!=t){var n=this.p.accessor.toChildren,i=this.Yv,r=this.newRows(t,n,i,new Set);i.size!==r.size&&(this.Yv=r,this.onChange())}else{var e=this.Yv;0<e.size&&(e.clear(),this.onChange())}},n.prototype.newRows=function(t,n,i,r){for(var e=0,u=t.length;e<u;++e){var s=t[e];i.has(s)&&r.add(s);var h=n(s);null!=h&&this.newRows(h,n,i,r)}return r},Object.defineProperty(n.prototype,"indices",{get:function(){var t=this.Yv,n=[];return this.p.each((function(i,r){t.has(i)&&n.push(r)})),n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){var t=[];return this.Yv.forEach((function(n){t.push(n)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this.Tt},enumerable:!1,configurable:!0}),n.prototype.getFirst=function(){var t=this.Yv;if(0<t.size){var n=null;return t.forEach((function(t){null==n&&(n=t)})),n}return null},n.prototype.getLast=function(){var t=this.Yv;if(0<t.size){var n=null;return t.forEach((function(t){n=t})),n}return null},n.prototype.toIndex=function(t){var n=null;return this.p.each((function(i,r){return t!==i||(n=r,!1)})),n},Object.defineProperty(n.prototype,"first",{get:function(){var t=this.getFirst();return t?this.toIndex(t):null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var t=this.getLast();return t?this.toIndex(t):null},enumerable:!1,configurable:!0}),n.prototype.onChange=function(){this.p.update(),this.emit("change",this)},n.prototype.toggle=function(t){var n=this.p.get(t);if(n){var i=this.Yv;i.has(n)?i.delete(n):i.add(n),this.onChange()}},n.prototype.add=function(t){var n=this.p.get(t);if(n){var i=this.Yv;i.has(n)||(i.add(n),this.onChange())}},n.prototype.addTo=function(t){var n=this.last;null!=n&&this.addRange(n,!1,t,!0)},n.prototype.addRange=function(t,n,i,r){var e=this.Yv,u=e.size,s=this.p;t<i?s.each((function(t){e.add(t)}),t+(n?0:1),i+(r?1:0)):s.each((function(t){e.add(t)}),i+(r?0:1),t+(n?1:0)),u!==e.size&&this.onChange()},n.prototype.addAll=function(t){if(0<t.length){for(var n=this.Yv,i=this.p,r=0,e=t.length;r<e;++r){var u=i.get(t[r]);u&&n.add(u)}this.onChange()}},n.prototype.contains=function(t){var n=this.p.get(t);return!!n&&this.Yv.has(n)},n.prototype.remove=function(t){var n=this.p.get(t);if(n){var i=this.Yv;i.has(n)&&(i.delete(n),this.onChange())}},n.prototype.clear=function(){var t=this.Yv;0<t.size&&(t.clear(),this.onChange())},n.prototype.clearAndAdd=function(t){var n=this.p.get(t);if(n){var i=this.Yv;i.has(n)?1<i.size&&(i.clear(),i.add(n),this.onChange()):(i.clear(),i.add(n),this.onChange())}},n.prototype.clearAndAddAll=function(t){var n=this.Yv;if(0<n.size||0<t.length){n.clear();for(var i=this.p,r=0,e=t.length;r<e;++r){var u=i.get(t[r]);u&&n.add(u)}this.onChange()}},n.prototype.shift=function(t,n){},n.prototype.size=function(){return this.Yv.size},n.prototype.isEmpty=function(){return this.Yv.size<=0},n.prototype.toArray=function(){var t=this.Yv,n=[];return this.p.each((function(i,r){t.has(i)&&n.push([r,i])})),n},n.prototype.toSortedArray=function(){return this.toArray().sort(wp)},n.prototype.toObject=function(){var t=this.Yv,n={};return this.p.each((function(i,r){t.has(i)&&(n[r]=i)})),n},n.prototype.toMap=function(){var t=this.Yv,n=new Map;return this.p.each((function(i,r){t.has(i)&&n.set(r,i)})),n},n}(t.utils.EventEmitter),Op=function(t){function n(){return t.call(this)||this}return B(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"order",{get:function(){return op.ASCENDING},set:function(t){},enumerable:!1,configurable:!0}),n.prototype.apply=function(){},n.prototype.unapply=function(){},n.prototype.isApplied=function(){return!1},n.prototype.get=function(){return null},n.prototype.set=function(t){},n.prototype.toDirty=function(){},n.prototype.update=function(){},Object.defineProperty(n.prototype,"indices",{get:function(){return null},enumerable:!1,configurable:!0}),n.prototype.map=function(t){return t},n.prototype.unmap=function(t){return t},n}(t.utils.EventEmitter),Dp=function(n){function i(t){var i=n.call(this)||this;if(i.p=null,i.Ic=i.toAccessor(t),i.yc=new up(i),i.Yv=[],i.eb=!1,i.ub=[],i.sb=new WeakMap,i.qn=!!(null==t?void 0:t.reverse),i.Rc=i.toSelection(null==t?void 0:t.selection),i.dv=new bp(i),i.Kv=new Op,t){var r=t.filter;r&&i.dv.set(r);var e=t.on;if(e)for(var u in e){var s=e[u];s&&i.on(u,s)}}return i.nodes=null==t?void 0:t.nodes,i}return B(i,n),i.prototype.toSelection=function(n){return n instanceof t.utils.EventEmitter?n:ot(n)?n(this):this.newSelection(n)},i.prototype.newSelection=function(t){return new pp(this,t)},i.prototype.toAccessor=function(t){return new mp(t)},i.prototype.bind=function(t){this.p=t},Object.defineProperty(i.prototype,"nodes",{get:function(){return this.hb},set:function(t){this.hb=t,this.eb=!0,this.Rc.onNodeChange(t),this.dv.toDirty(),this.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this.eb&&(this.eb=!1,this.updateRows(this.hb)),this.Yv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"supplimentals",{get:function(){return this.ub},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"accessor",{get:function(){return this.Ic},enumerable:!1,configurable:!0}),i.prototype.updateRows=function(t){var n=this.Yv,i=this.ub,r=this.sb;if(null!=t){var e=this.newRows(t,0,0,n,i,r,this.qn,this.Ic.toChildren);e!==n.length&&(n.length=e,i.length=e)}else n.length=0,i.length=0},i.prototype.toSupplimental=function(t,n,i){return t<<2|(n?2:0)|(i?1:0)},i.prototype.newRows=function(t,n,i,r,e,u,s,h){for(var o=t.length,a=s?-1:1,c=s?o-1:0;0<=c&&c<o;c+=a){var f=t[c],l=h(f),v=u.has(f),b=this.toSupplimental(i,!!(l&&0<l.length),v);n<r.length?(r[n]=f,e[n]=b):(r.push(f),e.push(b)),n+=1,v&&l&&(n=this.newRows(l,n,i+1,r,e,u,s,h))}return n},i.prototype.update=function(t){var n=this.p;n&&n.update(t)},i.prototype.size=function(){return this.rows.length},i.prototype.get=function(t){var n=this.rows;return 0<=t&&t<n.length?n[t]:null},i.prototype.open=function(t){var n=this.sb;n.has(t)||(n.set(t,1),this.eb=!0,this.dv.toDirty(),this.update(!0))},i.prototype.close=function(t){var n=this.sb;n.has(t)&&(n.delete(t),this.eb=!0,this.dv.toDirty(),this.update(!0))},i.prototype.isOpened=function(t){return this.sb.has(t)},i.prototype.toggle=function(t){var n=this.sb;n.has(t)?n.delete(t):n.set(t,1),this.eb=!0,this.dv.toDirty(),this.update(!0)},i.prototype.each=function(t,n,i){var r=this.rows;n=null!=n?Math.max(0,n):0,i=null!=i?Math.min(r.length,i):r.length;for(var e=n;e<i&&!1!==t(r[e],e);++e);},Object.defineProperty(i.prototype,"selection",{get:function(){return this.Rc},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filter",{get:function(){return this.dv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorter",{get:function(){return this.Kv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mapped",{get:function(){return this.yc},enumerable:!1,configurable:!0}),i}(t.utils.EventEmitter),Ep=function(){function t(t,n){var i,r,e;this.p=t,this.Ju=null!==(i=null==n?void 0:n.enable)&&void 0!==i&&i,this.ob=null===(r=null==n?void 0:n.filterable)||void 0===r||r,this.ab=null===(e=null==n?void 0:n.emittable)||void 0===e||e}return Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.Ju},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFilterable",{get:function(){return this.ob},set:function(t){this.ob=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmittable",{get:function(){return this.ab},set:function(t){this.ab=t},enumerable:!1,configurable:!0}),t.prototype.newIteratee=function(t,n){var i=this.p,r=i.column,e=i.columnIndex;if(null!=r&&null!=e){var u=r.getter,s=r.setter;if(this.ab){var h=t.data;return function(t,i){return u(t,e)!==n&&(s(t,e,n),h.emit("change",n,!n,t,i,e,h),!0)}}return function(t){return u(t,e)!==n&&(s(t,e,n),!0)}}return null},t.prototype.execute=function(t){var n,i=null===(n=this.p.header)||void 0===n?void 0:n.table;if(i){var r=this.newIteratee(i,t);if(r){var e=!1;this.ob?i.data.mapped.each((function(t,n,i,u){r(t,u)&&(e=!0)})):i.data.each((function(t,n){r(t,n)&&(e=!0)})),e&&i.body.update(!0)}}},t}(),Mp=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return B(i,n),i.prototype.init=function(t){null!=t?(this.Qs=t.header,this.xv=t.column,this.kv=t.columnIndex,this.cb=new Ep(this,t.check)):this.cb=new Ep(this),n.prototype.init.call(this,t),this.initOnClick(t)},Object.defineProperty(i.prototype,"column",{get:function(){return this.xv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnIndex",{get:function(){return this.kv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this.Qs},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"check",{get:function(){return this.cb},enumerable:!1,configurable:!0}),i.prototype.initOnClick=function(t){var n=this,i=this.xv;if(i){var r=i.sorting.enable,e=this.cb.isEnabled;if(e||r){Wi.onClick(this,(function(t){n.onClick(t)}));var u=this.state;u.lock(),u.set(Ww.SORTABLE,r),u.set(Ww.CHECKABLE,e),u.unlock()}}},Object.defineProperty(i.prototype,"sorter",{get:function(){var t=this,n=this.Kv;if(null==n){var i=this.Qs;if(!i)return null;var r=i.table;if(!r)return null;n=r.data.sorter,this.Kv=n,this.fb=this.fb||function(){t.onSorterChange()},n.on("change",this.fb)}return n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"comparator",{get:function(){var t=this.xv;return t&&t.sorting.comparator||null},enumerable:!1,configurable:!0}),i.prototype.onSorterChange=function(){var t=this.comparator;if(t){var n=this.Kv;if(n){var i=Ww.SORTED_ASCENDING,r=Ww.SORTED_DESCENDING;n.isApplied()&&n.get()===t?n.order===op.ASCENDING?this.state.set(i,r):this.state.set(r,i):this.state.removeAll(i,r)}}},i.prototype.toClickPosition=function(n){var i=this.lb||new t.Point;return this.lb=i,n.data.getLocalPosition(this,i).x},i.prototype.isCheckClicked=function(t){if(this.cb.isEnabled){if(!this.isSortable)return!0;var n=this.Ws[1];if(n&&null!=n.image){var i=this.toClickPosition(t),r=n.bound,e=n.margin.horizontal;return r.left-e<=i&&i<=r.right+e}}return!1},i.prototype.onClick=function(t){this.state.isActionable&&(this.isCheckClicked(t)?(this.onToggleStart(),this.onToggleEnd()):this.onActivate(t))},i.prototype.onActivate=function(t){this.doSort(t),this.emit("active",this)},i.prototype.doSort=function(t){if(this.isSortable){var n=this.comparator;if(n){var i=this.sorter;i&&(i.get()===n?i.order===op.ASCENDING?(i.order=op.DESCENDING,i.apply()):(i.set(null),i.apply()):(i.set(n),i.order=op.ASCENDING,i.apply()))}}},Object.defineProperty(i.prototype,"isSortable",{get:function(){var t=this.xv;return!!t&&t.sorting.enable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isToggle",{get:function(){return this.cb.isEnabled},enumerable:!1,configurable:!0}),i.prototype.toggle=function(){this.state.isActionable&&this.isToggle&&(this.onToggleStart(),this.onToggleEnd())},i.prototype.onToggleStart=function(){this.state.isActive=!this.state.isActive},i.prototype.onToggleEnd=function(){this.state.isActive?(this.cb.execute(!0),this.emit("active",this)):(this.cb.execute(!1),this.emit("inactive",this))},i.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.isToggle?this.onToggleStart():this.state.isPressed=!0)},i.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.isToggle?this.onToggleEnd():(this.state.isPressed&&this.onActivate(t),this.state.isPressed=!1))},i.prototype.onKeyDown=function(t){return Zt.isActivateKey(t)&&this.onActivateKeyDown(t),n.prototype.onKeyDown.call(this,t)},i.prototype.onKeyUp=function(t){return Zt.isActivateKey(t)&&this.onActivateKeyUp(t),n.prototype.onKeyUp.call(this,t)},i.prototype.getType=function(){return"DTableHeaderCell"},i.prototype.destroy=function(){var t=this.Kv,i=this.fb;t&&i&&t.off("change",i),this.Kv=void 0,this.fb=void 0,n.prototype.destroy.call(this)},i}(hl),Sp=function(t){function n(n){var i,r,e=this;(e=t.call(this,n)||this).vb=null!==(i=n.table)&&void 0!==i?i:null;var u=null!==(r=n.offset)&&void 0!==r?r:0;return e.tn=u,e.transform.position.y=u,e.initCells(n,e.Fv,e.Pv),e}return B(n,t),Object.defineProperty(n.prototype,"table",{get:function(){return this.vb},enumerable:!1,configurable:!0}),n.prototype.onParentMove=function(n,i,r,e){t.prototype.onParentMove.call(this,n,i,r,e),this.transform.position.y=-i+this.tn,this.updateFrozenCellPosition(n)},n.prototype.getContentPositionX=function(){var t=this.parent;return t?t.position.x:0},n.prototype.newCell=function(t,n,i,r){return new Mp(this.toCellOptions(t,n,r))},n.prototype.toCellOptions=function(t,n,i){var r=n.header||i.cell;return null!=r?(void 0===r.weight&&(r.weight=n.weight),void 0===r.width&&(r.width=n.width),void 0===r.text?r.text={value:n.label}:void 0===r.text.value&&(r.text.value=n.label),void 0===r.header&&(r.header=this),void 0===r.column&&(r.column=n),void 0===r.columnIndex&&(r.columnIndex=t),r):{weight:n.weight,width:n.width,text:{value:n.label},header:this,column:n,columnIndex:t}},n.prototype.getType=function(){return"DTableHeader"},n}(ip),jp=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.getOffsetVerticalStart=function(t){return.5*t+this.p.body.position.y},n}(Td),Tp=function(t,n){return t[n]},Np=function(t,n,i){t[n]=i},Ip=function(){return""},Cp=function(){},Ap=function(t){if(null!=t){var n=t.length;if(n<=1){var i=t[0];return function(t){return i in t}}return function(i){for(var r=0;r<n;++r){var e=t[r];if(!(e in i))return!1;i=i[e]}return!0}}return function(t,n){return n<t.length}},Rp=function(t,n){return at(t)?Ap(n):null!=t&&t},yp=function(t,n){var i,r=t.editing,e=t.editable;return r?{enable:Rp(null!==(i=r.enable)&&void 0!==i?i:e,n),formatter:r.formatter,unformatter:r.unformatter,validator:r.validator}:{enable:Rp(e,n)}},Lp=function(t,n){return function(i,r){var e=t(i,n),u=t(r,n);return e<u?-1:u<e?1:0}},kp=function(t,n,i){var r=i.sorting,e=i.sortable;return r?r.enable||e?{enable:!0,comparator:r.comparator||Lp(t,n)}:{enable:!1}:e?{enable:!0,comparator:Lp(t,n)}:{enable:!1}},xp=function(t){return null==t?void 0:t instanceof ym?t:new ym(t)},Bp=function(t){return null==t?void 0:"open"in t?t:new _d(t)},_p=function(t){return t.value},Pp=function(){},Fp=function(t){return t?{getter:t.getter||_p,setter:t.setter||Pp,menu:xp(t.menu),multiple:xp(t.multiple),dialog:Bp(t.dialog),promise:t.promise}:{getter:_p,setter:Pp}},Up=function(t){var n=t.state;return null!=n?at(n)||Ct(n)?{initial:n,modifier:void 0}:{initial:void 0,modifier:n}:{initial:void 0,modifier:void 0}},Gp=function(t,n){var i=t.renderable;return at(i)?Ap(n):null==i||i},zp=function(t,n){var i,r=n.weight,e=n.width;null!=r?null!=e&&(e=void 0):null==e&&(r=1);var u=Oi(null!==(i=n.type)&&void 0!==i?i:kw.TEXT,kw),s=function(t,n){var i=t.align;if(null!=i)return at(i)?ts[i]:i;switch(n){case kw.TEXT:return ts.LEFT;case kw.REAL:case kw.INTEGER:return ts.RIGHT;case kw.BUTTON:case kw.INDEX:case kw.SELECT:case kw.ACTION:case kw.LINK:case kw.CHECK:case kw.CHECK_SINGLE:case kw.COLOR:return ts.CENTER;default:return ts.LEFT}}(n,u),h=n.label||"",o=function(t){return null!=t.path?t.path.split("."):null}(n),a=function(t,n,i){var r=t.getter;if(r)return r;switch(n){case kw.ACTION:case kw.LINK:return Ip;default:return null==i?Tp:function(t,n){if(t.length<=1){var i=t[0];return void 0===n?function(t){return t[i]}:function(t){return i in t?t[i]:n}}return void 0===n?function(n){for(var i=0,r=t.length-1;i<r;++i)n=n[t[i]];return n[t[t.length-1]]}:function(i){for(var r=0,e=t.length-1;r<e;++r)i=i[t[r]];var u=t[t.length-1];return u in i?i[u]:n}}(i,t.default)}}(n,u,o);return{weight:r,width:e,type:u,label:h,getter:a,setter:function(t,n,i){var r=t.setter;if(r)return r;switch(n){case kw.BUTTON:case kw.ACTION:case kw.LINK:return Cp;default:return null==i?Np:function(t){if(t.length<=1){var n=t[0];return function(t,i,r){t[n]=r}}return function(n,i,r){for(var e=0,u=t.length-1;e<u;++e)n=n[t[e]]||{};n[t[t.length-1]]=r}}(i)}}(n,u,o),formatter:n.formatter,renderable:Gp(n,o),align:s,state:Up(n),editing:yp(n,o),sorting:kp(a,t,n),header:n.header,body:n.body,selecting:Fp(n.selecting),category:n.category,frozen:n.frozen,offset:0,link:n.link}},Hp=function(t){function n(n){var i=t.call(this,n)||this,r=i.content;r.setWidth(i.toContentWidth(n));var e=i.body;r.addChild(e),e.data.selection.type!==np.NONE&&Wi.onClick(i,(function(t){e.onRowClick(t)}));var u=i.header;u&&r.addChild(u);for(var s=i.categories,h=s.length-1;0<=h;--h)r.addChild(s[h]);return e.update(),i}return B(n,t),Object.defineProperty(n.prototype,"columns",{get:function(){var t=this.Fv;if(null==t){var n=this.yn;t=n?function(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(zp(i,t[i]));return n}(n.columns):[],this.Fv=t}return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frozen",{get:function(){var t=this.Pv;return null==t&&(t=function(t){for(var n=t.length-1;0<=n;--n)if(!0===t[n].frozen)return n+1;return 0}(this.columns),this.Pv=t),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"categories",{get:function(){var t=this.bb;return null==t&&(t=this.newCategories(this.yn,this.columns,this.frozen),this.bb=t),t},enumerable:!1,configurable:!0}),n.prototype.initContent=function(n){t.prototype.initContent.call(this,n),n.state.isFocusReverse=!0},n.prototype.onContentChange=function(){t.prototype.onContentChange.call(this),this.body.update()},n.prototype.onResize=function(n,i,r,e){var u=this.scrollbar;u.lock();var s=this.body;s.lock(),t.prototype.onResize.call(this,n,i,r,e),s.update(),s.unlock(!0),u.unlock(!0)},n.prototype.getCategoryCount=function(t){for(var n=0,i=0,r=t.length;i<r;++i){var e=t[i].category;if(null!=e){var u=at(e)?1:e.length;n=Math.max(n,u)}}return n},n.prototype.toCategoryLabel=function(t,n){if(n)if(at(n)){if(0===t)return n}else if(t<n.length)return n[t]},n.prototype.isSameCategory=function(t,n,i){if(null!=n){if(null!=i){if(at(n))return at(i)?0<t||n===i:0<t?i.length<=t:1===i.length&&n===i[0];if(at(i))return 0<t?n.length<=t:1===n.length&&n[0]===i;if(n.length<=t&&i.length<=t)return!0;if(i.length===n.length){for(var r=t,e=n.length;r<e;++r)if(n[r]!==i[r])return!1;return!0}return!1}return at(n)?0<t:n.length<=t}return null==i||(at(i)?0<t:i.length<=t)},n.prototype.toCategoryColumns=function(t,n,i){for(var r=[],e=null,u=null,s=0,h=n.length;s<h;++s){var o=n[s];s!==i&&u&&e&&this.isSameCategory(t,e.category,o.category)?null!=u.weight&&null!=o.weight?u.weight+=o.weight:null!=u.width&&null!=o.width?u.width+=o.width:(e=o,u={label:this.toCategoryLabel(t,o.category),weight:o.weight,width:o.width,offset:0},r.push(u)):(e=o,u={label:this.toCategoryLabel(t,o.category),weight:o.weight,width:o.width,offset:0},r.push(u))}return r},n.prototype.toCategoryOptions=function(t,n,i,r,e){return n?(void 0===n.columns&&(n.columns=this.toCategoryColumns(t,i,r)),null==n.frozen&&(n.frozen=r),null==n.offset&&(n.offset=e),n):{columns:this.toCategoryColumns(t,i,r),frozen:r,offset:e}},n.prototype.newCategories=function(t,n,i){for(var r=[],e=0,u=this.getCategoryCount(n)-1;0<=u;--u){var s=new vp(this.toCategoryOptions(u,null==t?void 0:t.category,n,i,e));r.push(s),e+=s.height}return r},n.prototype.onDblClick=function(n,i){var r=this.body.onDblClick(n,i);return t.prototype.onDblClick.call(this,n,i)||r},n.prototype.newScrollBar=function(t){var n=this;return new jp(this,t,(function(t){n.onScrollBarUpdate(t)}))},n.prototype.toContentWidth=function(t){var n=0,i=null==t?void 0:t.columns;if(i)for(var r=0,e=i.length;r<e;++r){var u=i[r].width;null!=u&&(n+=u)}return 0<n?function(t){return Math.max(t,n)}:"100%"},Object.defineProperty(n.prototype,"headerOffset",{get:function(){var t=this.gb;return null==t&&(t=this.newHeaderOffset(),this.gb=t),t},enumerable:!1,configurable:!0}),n.prototype.newHeaderOffset=function(){for(var t=0,n=this.categories,i=0,r=n.length;i<r;++i)t+=n[i].height;return t},Object.defineProperty(n.prototype,"header",{get:function(){var t=this.Qs;return void 0===t&&(t=this.newHeader(this.yn,this.columns,this.frozen,this.headerOffset),this.Qs=t),t},enumerable:!1,configurable:!0}),n.prototype.hasHeader=function(t){if(t)for(var n=t.columns,i=0,r=n.length;i<r;++i)if(null!=n[i].label)return!0;return!1},n.prototype.newHeader=function(t,n,i,r){return this.hasHeader(t)?new Sp(this.toHeaderOptions(null==t?void 0:t.header,n,i,r)):null},n.prototype.toHeaderOptions=function(t,n,i,r){return t?(void 0===t.columns&&(t.columns=n),null==t.frozen&&(t.frozen=i),void 0===t.offset&&(t.offset=r),void 0===t.table&&(t.table=this),t):{columns:n,frozen:i,offset:r,table:this}},Object.defineProperty(n.prototype,"bodyOffset",{get:function(){var t=this.mb;return null==t&&(t=this.newBodyOffset(),this.mb=t),t},enumerable:!1,configurable:!0}),n.prototype.newBodyOffset=function(){var t,n;return this.headerOffset+(null!==(n=null===(t=this.header)||void 0===t?void 0:t.height)&&void 0!==n?n:0)},Object.defineProperty(n.prototype,"body",{get:function(){var t=this.fe;return null==t&&(t=this.newBody(this.yn,this.columns,this.frozen,this.bodyOffset),this.fe=t),t},enumerable:!1,configurable:!0}),n.prototype.newBody=function(t,n,i,r){return new fp(this.toBodyOptions(null==t?void 0:t.body,n,i,r,null==t?void 0:t.data))},n.prototype.toBodyOptions=function(t,n,i,r,e){return null!=t?(void 0===t.columns&&(t.columns=n),null==t.frozen&&(t.frozen=i),void 0===t.offset&&(t.offset=r),void 0===t.data&&void 0!==e&&(Ct(e)?t.data={rows:e}:t.data=e),void 0===t.height&&void 0===t.weight&&(t.weight=1),t):Ct(e)?{columns:n,frozen:i,offset:r,data:{rows:e},weight:1}:{columns:n,frozen:i,offset:r,data:e,weight:1}},Object.defineProperty(n.prototype,"data",{get:function(){return this.body.data},enumerable:!1,configurable:!0}),n.prototype.getFocusedChildClippingRect=function(n,i,r,e,u,s,h,o){t.prototype.getFocusedChildClippingRect.call(this,n,i,r,e,u,s,h,o);var a=this.toCell(n);if(a){var c=i+this.toFrozenCellX(a)-o.x;if(0<c&&(o.x+=c,o.width-=c),a.parent.parent===this.body){var f=this.bodyOffset;o.y+=f,o.height-=f}}return o},n.prototype.toFrozenCellX=function(t){var n=this.frozen;if(0<n){var i=t.parent.children,r=i.indexOf(t);if(0<=r){var e=i.length;if(n<=e-1-r){var u=i[e-n];return u.position.x+u.width}}}return 0},n.prototype.onKeyDown=function(n){Zt.moveFocusHorizontally(n,this);var i=Zt.isArrowUpKey(n),r=Zt.isArrowDownKey(n);return(i||r)&&this.onKeyDownArrowUpOrDown(n,r),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownArrowUpOrDown=function(t,n){var i=rt.getLayer(this);if(null==i)return!1;var r=i.getFocusController(),e=r.get();if(null==e)return!1;var u=this.toCell(e);if(null==u)return!1;var s=u.parent;if(null==s)return!1;var h=r.find(s,!1,!1,n,this);if(null==h)return!1;var o=this.toCell(h);if(null==o)return!1;var a=o.parent;if(null==a)return!1;var c=s.children.indexOf(u);if(c<0)return!1;var f=a.children[c];if(null==f||f===u||!("state"in f))return!1;var l=r.find(f,!0,!0,n,this);return null!=l&&(r.focus(l),!0)},n.prototype.toCell=function(t){for(var n=t;null!=n;){var i=n.parent;if(i instanceof ip)return n instanceof Zi?n:null;n=i}return null},n.prototype.getType=function(){return"DTable"},n}(Nd),Vp=function(t){var n=t.text;if(at(n))return n;var i=t.label;if(at(i))return i;var r=t.name;return at(r)?r:void 0},Wp=function(t){var n=t.title;if(at(n))return n},Xp=function(t){return t.image},Yp=function(t){return t.children},Kp=function(t){return t.children=[]},Jp=function(t){var n,i,r,e,u;this.toLabel=null!==(n=null==t?void 0:t.toLabel)&&void 0!==n?n:Vp,this.toTitle=null!==(i=null==t?void 0:t.toTitle)&&void 0!==i?i:Wp,this.toImage=null!==(r=null==t?void 0:t.toImage)&&void 0!==r?r:Xp,this.toChildren=null!==(e=null==t?void 0:t.toChildren)&&void 0!==e?e:Yp,this.newChildren=null!==(u=null==t?void 0:t.newChildren)&&void 0!==u?u:Kp},Zp={NONE:0,SINGLE:1,MULTIPLE:2},qp=function(){function t(t,n){this.p=t,this.hb=[],this.wb=[],this.qn=n,this.fn=!1}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this.update(),this.hb},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this.update(),this.wb},enumerable:!1,configurable:!0}),t.prototype.toDirty=function(){this.fn=!0},t.prototype.size=function(){return this.update(),this.hb.length},t.prototype.each=function(t,n,i){this.update();for(var r=this.hb,e=null!=n?Math.max(0,n):0,u=null!=i?Math.min(r.length,i):r.length,s=e;s<u&&!1!==t(r[s],s);++s);},t.prototype.update=function(){if(this.fn){this.fn=!1;var t=this.p,n=t.nodes,i=t.accessor.toChildren,r=this.hb,e=this.wb,u=this.newNodes(t,n,0,0,r,e,this.qn,i);r.length!==u&&(r.length=u,e.length=u)}},t.prototype.newNodes=function(t,n,i,r,e,u,s,h){for(var o=n.length,a=s?-1:1,c=s?o-1:0;0<=c&&c<o;c+=a){var f=n[c];i<e.length?(e[i]=f,u[i]=r):(e.push(f),u.push(r)),i+=1;var l=h(f);l&&t.isExpanded(f)&&(i=this.newNodes(t,l,i,r+1,e,u,s,h))}return i},t}(),Qp=function(t){function n(n,i){var r=t.call(this)||this;r.p=n,r.hb=new Set;var e=null==i?void 0:i.on;if(e)for(var u in e){var s=e[u];s&&r.on(u,s)}return r}return B(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return Zp.MULTIPLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){var t=this.hb;if(0<t.size){var n=null;return t.forEach((function(t){null==n&&(n=t)})),n}return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var t=this.hb;if(0<t.size){var n=null;return t.forEach((function(t){n=t})),n}return null},enumerable:!1,configurable:!0}),n.prototype.get=function(t){var n=this.hb;if(0<=t&&t<n.size){var i=0,r=null;return n.forEach((function(n){i===t&&(r=n),i+=1})),r}return null},n.prototype.add=function(t){var n=this.hb;return!n.has(t)&&(n.add(t),this.onChange(),!0)},n.prototype.remove=function(t){var n=this.hb;return!!n.has(t)&&(n.delete(t),this.onChange(),!0)},n.prototype.toggle=function(t){var n=this.hb;return n.has(t)?n.delete(t):n.add(t),this.onChange(),!0},n.prototype.clear=function(){var t=this.hb;return 0<t.size&&(t.clear(),this.onChange(),!0)},n.prototype.clearAndAdd=function(t){var n=this.hb;return 1===n.size?!n.has(t)&&(n.clear(),n.add(t),this.onChange(),!0):(n.clear(),n.add(t),this.onChange(),!0)},n.prototype.clearAndAddAll=function(t){for(var n=!1,i=new Set,r=this.hb,e=0,u=t.length;e<u;++e){var s=t[e];r.has(s)||(n=!0),i.add(s)}return n||r.forEach((function(t){i.has(t)||(n=!0)})),n&&(this.hb=i,this.onChange()),n},n.prototype.contains=function(t){return this.hb.has(t)},n.prototype.size=function(){return this.hb.size},n.prototype.isEmpty=function(){return this.hb.size<=0},n.prototype.each=function(t){var n=!1;this.hb.forEach((function(i){n||!1===t(i)&&(n=!0)}))},n.prototype.toArray=function(){var t=[];return this.hb.forEach((function(n){t.push(n)})),t},n.prototype.onChange=function(){this.p.update(),this.emit("change",this)},n.prototype.onNodeChange=function(t){var n=this.hb,i=this.newNodes(t,n,new Set);n.size!==i.size&&(this.hb=i,this.onChange())},n.prototype.newNodes=function(t,n,i){for(var r=this.p.accessor.toChildren,e=0,u=t.length;e<u;++e){var s=t[e];n.has(s)&&i.add(s);var h=r(s);h&&this.newNodes(h,n,i)}return i},n}(t.utils.EventEmitter),$p=function(t){function n(n,i){var r=t.call(this)||this;r.p=n,r.Sn=null;var e=null==i?void 0:i.on;if(e)for(var u in e){var s=e[u];s&&r.on(u,s)}return r}return B(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return Zp.SINGLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return this.Sn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this.Sn},enumerable:!1,configurable:!0}),n.prototype.get=function(t){return 0===t?this.Sn:null},n.prototype.add=function(t){return this.Sn!==t&&(this.Sn=t,this.onChange(),!0)},n.prototype.remove=function(t){return this.Sn===t&&(this.Sn=null,this.onChange(),!0)},n.prototype.toggle=function(t){return this.Sn===t?this.Sn=null:this.Sn=t,this.onChange(),!0},n.prototype.clear=function(){return null!=this.Sn&&(this.Sn=null,this.onChange(),!0)},n.prototype.clearAndAdd=function(t){return this.Sn!==t&&(this.Sn=t,this.onChange(),!0)},n.prototype.clearAndAddAll=function(t){if(0<t.length){var n=t[t.length-1];return this.clearAndAdd(n)}return this.clear()},n.prototype.contains=function(t){return this.Sn===t},n.prototype.size=function(){return null!=this.Sn?1:0},n.prototype.isEmpty=function(){return null==this.Sn},n.prototype.each=function(t){var n=this.Sn;null!=n&&t(n)},n.prototype.toArray=function(){var t=this.Sn;return null!=t?[t]:[]},n.prototype.onChange=function(){this.p.update(),this.emit("change",this)},n.prototype.onNodeChange=function(t){var n=this.Sn,i=this.newNode(t,n);n!==i&&(this.Sn=i,this.onChange())},n.prototype.newNode=function(t,n){for(var i=this.p.accessor.toChildren,r=0,e=t.length;r<e;++r){var u=t[r];if(n===u)return u;var s=i(u);if(s){var h=this.newNode(s,n);if(null!=h)return h}}return null},n}(t.utils.EventEmitter),tO=function(t){function n(n,i){var r=t.call(this)||this;r.p=n;var e=null==i?void 0:i.on;if(e)for(var u in e){var s=e[u];s&&r.on(u,s)}return r}return B(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return Zp.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return null},enumerable:!1,configurable:!0}),n.prototype.get=function(t){return null},n.prototype.add=function(t){return!1},n.prototype.remove=function(t){return!1},n.prototype.toggle=function(t){return!1},n.prototype.clear=function(){return!1},n.prototype.clearAndAdd=function(t){return!1},n.prototype.clearAndAddAll=function(t){return!1},n.prototype.contains=function(t){return!1},n.prototype.size=function(){return 0},n.prototype.isEmpty=function(){return!0},n.prototype.each=function(t){},n.prototype.toArray=function(){return[]},n.prototype.onNodeChange=function(t){},n}(t.utils.EventEmitter),nO=function(){function t(t,n){this.p=t,this.pb=new WeakMap,this.Rc=this.toSelection(n),this.Ic=new Jp(n);var i=new qp(this,!!(null==n?void 0:n.reverse));this.yc=i;var r=null==n?void 0:n.nodes;null!=r?(this.hb=r,i.toDirty()):this.hb=[]}return t.prototype.toSelection=function(t){var n=null==t?void 0:t.selection;switch(null==n?void 0:n.type){case Zp.NONE:case"NONE":return new tO(this,n);case Zp.MULTIPLE:case"MULTIPLE":return new Qp(this,n);default:return new $p(this,n)}},Object.defineProperty(t.prototype,"nodes",{get:function(){return this.hb},set:function(t){this.hb=t,this.yc.toDirty(),this.Rc.onNodeChange(t),this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapped",{get:function(){return this.yc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessor",{get:function(){return this.Ic},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this.Rc},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.p.update()},t.prototype.toggle=function(t){var n=this.pb;return n.has(t)?n.delete(t):n.set(t,1),this.yc.toDirty(),this.update(),!0},t.prototype.expand=function(t){var n=this.pb;return!n.has(t)&&(n.set(t,1),this.yc.toDirty(),this.update(),!0)},t.prototype.collapse=function(t){var n=this.pb;return!!n.has(t)&&(n.delete(t),this.yc.toDirty(),this.update(),!0)},t.prototype.expandAll=function(){var t=!1,n=this.pb;return this.each((function(i){n.has(i)||(n.set(i,1),t=!0)})),!!t&&(this.yc.toDirty(),this.update(),!0)},t.prototype.collapseAll=function(){var t=!1,n=this.pb;return this.each((function(i){n.has(i)&&(n.delete(i),t=!0)})),!!t&&(this.yc.toDirty(),this.update(),!0)},t.prototype.isCollapsed=function(t){return!this.isExpanded(t)},t.prototype.isExpanded=function(t){return this.pb.has(t)},t.prototype.clear=function(){var t=this.hb;return 0<t.length&&(t.length=0,this.yc.toDirty(),this.Rc.clear(),this.update(),!0)},t.prototype.remove=function(t){var n=!1;return this.each((function(i,r,e){return i!==t||(e.splice(r,1),n=!0,!1)})),!!n&&(this.yc.toDirty(),this.Rc.remove(t),this.update(),!0)},t.prototype.add=function(t,n){var i=!1;if(n){var r=this.Ic,e=r.toChildren(n);if(e)e.push(t),i=!0;else{var u=r.newChildren(n);u&&(u.push(t),i=!0)}}else{var s=this.hb;s?s.push(t):this.hb=[t],i=!0}return i&&(this.yc.toDirty(),this.update()),!0},t.prototype.addBefore=function(t,n){var i=!1;return this.each((function(r,e,u){return r!==n||(u.splice(e,0,t),i=!0,!1)})),i&&(this.yc.toDirty(),this.update()),i},t.prototype.addAfter=function(t,n){var i=!1;return this.each((function(r,e,u){return r!==n||(u.splice(e+1,0,t),i=!0,!1)})),i&&(this.yc.toDirty(),this.update()),i},t.prototype.each=function(t){var n=this.hb;n&&this.Nc(n,null,t)},t.prototype.Nc=function(t,n,i){for(var r=this.Ic.toChildren,e=0,u=t.length;e<u;++e){var s=t[e];if(!1===i(s,e,t,n))return;var h=r(s);h&&this.Nc(h,s,i)}},t}(),iO={HAS_CHILDREN:"HAS_CHILDREN",OPENED:"OPENED"},rO=function(t){function n(n,i){var r=t.call(this,i)||this;return r.Gn=new Eb(r.Gn),r.Bt=n,r}return B(n,t),Object.defineProperty(n.prototype,"node",{get:function(){return this.Sn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.Sn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.Ve},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this.Bt},enumerable:!1,configurable:!0}),n.prototype.toggle=function(){var t=this.Sn;void 0!==t&&this.Bt.toggle(t)},n.prototype.set=function(t,n,i){var r,e=this.Bt,u=i||this.Sn!==t;if(u){this.Sn=t,this.Ve=n;var s=e.accessor;this.text=s.toLabel(t),this.title=null!==(r=s.toTitle(t))&&void 0!==r?r:"",this.image=s.toImage(t)}var h=e.mapped.levels[n];this.Gn.adjLeft(this.theme.getLevelPadding(h));var o=e.accessor.toChildren(t),a=!!(o&&0<o.length),c=this.state;c.lock(),c.set(ht.ACTIVE,e.selection.contains(t)),c.remove(ht.DISABLED),c.set(iO.HAS_CHILDREN,a),c.set(iO.OPENED,e.isExpanded(t)),c.unlock(),u&&this.emit("set",t,n,this)},n.prototype.unset=function(){if(void 0!==this.Sn){this.Sn=void 0,this.Ve=void 0,this.text=void 0,this.title="",this.image=void 0;var t=this.state;t.lock(),t.add(ht.DISABLED),t.remove(ht.ACTIVE),t.unlock(),this.emit("unset",this)}},n.prototype.onSelect=function(t,n){var i=this.Bt,r=i.selection;if(r.type!==Zp.MULTIPLE)r.clearAndAdd(n);else{var e=t&&"data"in t?t.data.originalEvent:t;if(null==e?void 0:e.ctrlKey)r.toggle(n);else if(null==e?void 0:e.shiftKey){var u=i.mapped,s=r.last;if(n===s)r.clearAndAdd(n);else{var h=!1,o=!1,a=[];u.each((function(t){if(h){if(o){if(a.unshift(t),t===n)return!1}else if(a.push(t),t===s)return!1}else t===n?(h=!0,o=!1,a.push(t)):t===s&&(h=!0,o=!0,a.push(t))})),r.clearAndAddAll(a)}}else r.clearAndAdd(n)}},n.prototype.onKeyDown=function(n){var i;return Zt.isActivateKey(n)&&this.onKeyDownActivate(n),Zt.isArrowRightKey(n)&&void 0!==(i=this.Sn)&&this.state.is(iO.HAS_CHILDREN)&&this.Bt.expand(i),Zt.isArrowLeftKey(n)&&void 0!==(i=this.Sn)&&this.state.is(iO.HAS_CHILDREN)&&this.Bt.collapse(i),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyDownActivate=function(t){if(this.state.isActionable&&this.state.isFocused){var n=this.Sn;return void 0!==n&&this.onSelect(t,n),!0}return!1},n.prototype.getType=function(){return"DTreeItemText"},n}(Ms),eO=function(t){function n(n,i){var r,e=this;e=t.call(this,n,i)||this;var u=Oi(null!==(r=null==i?void 0:i.when)&&void 0!==r?r:qu.CLICKED,qu);return e.Ys=u,e.initOnClick(u,e.theme,i),e}return B(n,t),n.prototype.initOnClick=function(t,n,i){var r=this;Wi.onClick(this,(function(n){t===qu.CLICKED&&r.onClick(n)}))},n.prototype.onClick=function(t){this.state.isActionable&&this.onActivate(t)},n.prototype.onDblClick=function(n,i){return this.Ys===qu.DOUBLE_CLICKED&&this.onClick(n),t.prototype.onDblClick.call(this,n,i)},n.prototype.onActivate=function(t){this.emit("active",this)},n.prototype.onActivateKeyDown=function(t){this.state.isActionable&&(this.state.isPressed=!0)},n.prototype.onActivateKeyUp=function(t){this.state.isActionable&&(this.state.isPressed&&this.onActivate(t),this.state.isPressed=!1)},n.prototype.onKeyDown=function(n){return Zt.isActivateKey(n)&&this.onActivateKeyDown(n),t.prototype.onKeyDown.call(this,n)},n.prototype.onKeyUp=function(n){return Zt.isActivateKey(n)&&this.onActivateKeyUp(n),t.prototype.onKeyUp.call(this,n)},n.prototype.getType=function(){return"DTreeItemButton"},n}(rO),uO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.onActivate=function(i){t.prototype.onActivate.call(this,i);var r=this.Sn;void 0!==r&&(this.state.is(iO.HAS_CHILDREN)?i&&"data"in i&&(this.toLocal(i.data.global,void 0,n.WORK_CONTAINS_POINT).x<=this.padding.getLeft()?this.toggle():this.onSelect(i,r)):this.onSelect(i,r))},n.prototype.getType=function(){return"DTreeItemNonEditable"},n}(eO),sO=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B(n,t),n.prototype.toMapped=function(t){return t.mapped},n.prototype.newItem=function(t){return new uO(t)},n}(ud),hO=function(t){function n(n){var i=t.call(this,n)||this;return i.update(),i}return B(n,t),n.prototype.onContentChange=function(){t.prototype.onContentChange.call(this),this.update()},n.prototype.onResize=function(n,i,r,e){var u=this.updater;u.lock(),t.prototype.onResize.call(this,n,i,r,e),u.update(),u.unlock(!0)},Object.defineProperty(n.prototype,"updater",{get:function(){var t=this.Xc;return null==t&&(t=this.newUpdater(this.data,this.content,this.yn),this.Xc=t),t},enumerable:!1,configurable:!0}),n.prototype.newUpdater=function(t,n,i){return new sO(t,n,n,null==i?void 0:i.updater)},Object.defineProperty(n.prototype,"data",{get:function(){var t=this.Bt;return null==t&&(t=this.toData(this.yn),this.Bt=t),t},enumerable:!1,configurable:!0}),n.prototype.toData=function(t){var n=t&&(t.data||t.nodes||t.value)||[];return Ct(n)?new nO(this,{nodes:n}):"add"in n?n:new nO(this,n)},n.prototype.update=function(t){this.updater.update(t)},n.prototype.lock=function(){this.updater.lock()},n.prototype.unlock=function(t){this.updater.unlock(t)},Object.defineProperty(n.prototype,"selection",{get:function(){return this.data.selection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.data.nodes},set:function(t){this.data.nodes=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nodes",{get:function(){return this.data.nodes},set:function(t){this.data.nodes=t},enumerable:!1,configurable:!0}),n.prototype.toggle=function(t){return this.data.toggle(t)},n.prototype.expand=function(t){return this.data.expand(t)},n.prototype.collapse=function(t){return this.data.collapse(t)},n.prototype.expandAll=function(){return this.data.expandAll()},n.prototype.collapseAll=function(){return this.data.collapseAll()},n.prototype.isCollapsed=function(t){return this.data.isCollapsed(t)},n.prototype.isExpanded=function(t){return this.data.isExpanded(t)},n.prototype.clear=function(){return this.data.clear()},n.prototype.remove=function(t){return this.data.remove(t)},n.prototype.add=function(t,n){return this.data.add(t,n)},n.prototype.addBefore=function(t,n){return this.data.addBefore(t,n)},n.prototype.addAfter=function(t,n){return this.data.addAfter(t,n)},n.prototype.each=function(t){return this.data.each(t)},n.prototype.onKeyDown=function(n){return this.updater.moveFocus(n,this,!0,!1),t.prototype.onKeyDown.call(this,n)},n.prototype.getType=function(){return"DTree"},n}(Nd),oO={__proto__:null,loadAll:cv,loadMenuItemAll:av,loadMenuItemExpandable:Vl,loadMenuItem:Ll,loadMenuSidedItemExpandable:ov,loadMenuSidedItem:Ql,deserializeActionValue:lo,EShapeActionBases:$t,EShapeActionEnvironment:tn,EShapeActionExpressions:nn,EShapeActionOpenDialogExtensions:Ch,EShapeActionOpenExtensions:yh,EShapeActionOpenOpeners:Ze,EShapeActionRuntimeBlinkBrighten:sn,EShapeActionRuntimeBlinkColorFill:hn,EShapeActionRuntimeBlinkColorStroke:on,EShapeActionRuntimeBlinkDarken:an,EShapeActionRuntimeBlinkOpacity:cn,EShapeActionRuntimeBlinkVisibility:fn,EShapeActionRuntimeBlink:un,EShapeActionRuntimeChangeColorBrightness:Nn,EShapeActionRuntimeChangeColorCode:Cn,EShapeActionRuntimeChangeColor:En,EShapeActionRuntimeChangeCursor:Rn,EShapeActionRuntimeChangeTextNumber:bi,EShapeActionRuntimeChangeTextText:di,EShapeActionRuntimeConditional:en,EShapeActionRuntimeEmitEvent:Qe,EShapeActionRuntimeGestureLayer:Ue,EShapeActionRuntimeGestureShape:ze,EShapeActionRuntimeMiscEmitEvent:tu,EShapeActionRuntimeMiscExecute:Au,EShapeActionRuntimeMiscHtmlElement:lu,EShapeActionRuntimeMiscInputInput:pu,EShapeActionRuntimeMiscInputInteger:Du,EShapeActionRuntimeMiscInputNumber:Ou,EShapeActionRuntimeMiscInputReal:Eu,EShapeActionRuntimeMiscInputText:Su,EShapeActionRuntimeMiscInput:wu,EShapeActionRuntimeMiscWriteBoth:Tu,EShapeActionRuntimeMiscWriteLocal:Nu,EShapeActionRuntimeMiscWriteRemote:Iu,EShapeActionRuntimeMiscWrite:ju,EShapeActionRuntimeOpenDialogBoolean:Us,EShapeActionRuntimeOpenDialogDate:Th,EShapeActionRuntimeOpenDialogDatetime:Oh,EShapeActionRuntimeOpenDialogExtension:Ah,EShapeActionRuntimeOpenDialogInteger:Ys,EShapeActionRuntimeOpenDialogReal:Zs,EShapeActionRuntimeOpenDialogText:$s,EShapeActionRuntimeOpenDialogTime:Mh,EShapeActionRuntimeOpenDialog:Fs,EShapeActionRuntimeOpen:yu,EShapeActionRuntimeShowHideLayer:_h,EShapeActionRuntimeShowHideShape:Fh,EShapeActionRuntimeShowHide:xh,EShapeActionRuntimeTransformMoveAbsoluteX:zh,EShapeActionRuntimeTransformMoveAbsoluteY:Hh,EShapeActionRuntimeTransformMoveForwardOrBackward:Vh,EShapeActionRuntimeTransformMoveLeftOrRight:Wh,EShapeActionRuntimeTransformMoveRelativeX:Xh,EShapeActionRuntimeTransformMoveRelativeY:Yh,EShapeActionRuntimeTransformMove:Gh,EShapeActionRuntimeTransformResizeHeightAbsolute:to,EShapeActionRuntimeTransformResizeHeightRelative:no,EShapeActionRuntimeTransformResizeSizeAbsolute:io,EShapeActionRuntimeTransformResizeSizeRelative:ro,EShapeActionRuntimeTransformResizeWidthAbsolute:eo,EShapeActionRuntimeTransformResizeWidthRelative:uo,EShapeActionRuntimeTransformResize:$h,EShapeActionRuntimeTransformRotateAbsolute:oo,EShapeActionRuntimeTransformRotateRelative:ao,EShapeActionRuntimeTransformRotate:ho,EShapeActionRuntime:rn,EShapeActionRuntimes:qe,EShapeActionValueBase:vn,EShapeActionValueBlinkType:ln,EShapeActionValueBlink:wn,EShapeActionValueChangeColorBrightness:In,EShapeActionValueChangeColorCode:An,EShapeActionValueChangeColorTarget:Dn,EShapeActionValueChangeColorTypeLegacy:Sn,EShapeActionValueChangeColorType:Mn,EShapeActionValueChangeColorTypes:jn,EShapeActionValueChangeColor:Tn,EShapeActionValueChangeCursor:yn,EShapeActionValueChangeTextType:gi,EShapeActionValueChangeText:mi,EShapeActionValueDeserializers:vo,EShapeActionValueEmitEvent:$e,EShapeActionValueGestureOperationType:Pe,EShapeActionValueGestureType:He,EShapeActionValueGesture:We,EShapeActionValueMiscEmitEvent:fv,EShapeActionValueMiscExecute:Ru,EShapeActionValueMiscHtmlElement:lv,EShapeActionValueMiscInput:vv,EShapeActionValueMiscType:Ve,EShapeActionValueMiscWrite:bv,EShapeActionValueMisc:Cu,EShapeActionValueOnInputAction:gu,EShapeActionValueOnInputActions:mu,EShapeActionValueOpenDialogExtension:Rh,EShapeActionValueOpenDialogType:Nh,EShapeActionValueOpenDialog:Ih,EShapeActionValueOpenExtension:Lh,EShapeActionValueOpenType:Lu,EShapeActionValueOpen:ku,EShapeActionValueOpetyped:Kh,EShapeActionValueShowHideLayer:Ph,EShapeActionValueShowHideShape:Uh,EShapeActionValueShowHideType:kh,EShapeActionValueShowHide:Bh,EShapeActionValueSubtyped:bn,EShapeActionValueTransformMoveType:Jh,EShapeActionValueTransformMove:qh,EShapeActionValueTransformResizeType:Qh,EShapeActionValueTransformResize:so,EShapeActionValueTransformRotateType:co,EShapeActionValueTransformRotate:fo,EShapeActionValueTransformType:Zh,EShapeActionValueType:dn,EShapeActionValues:mn,EShapeAction:et,loadShapeAll:sl,loadShapeBar:Do,loadShapeButton:zo,loadShapeCircle:ta,loadShapeClipperEx:function(){au=!0},isShapeClipperExLoaded:cu,loadShapeConnectorLine:Qa,loadShapeEmbedded:uc,loadShapeGroupShadowed:dc,loadShapeGroup:fc,loadShapeImage:Oc,loadShapeLabel:Bc,loadShapeLineOfCircles:cf,loadShapeLineOfRectangleRoundeds:df,loadShapeLineOfRectangles:Of,loadShapeLineOfTriangleRoundeds:Bf,loadShapeLineOfTriangles:zf,loadShapeLine:Fc,loadShapeNull:Xf,loadShapeRectangleRounded:qf,loadShapeRectangle:Kf,loadShapeTriangleRounded:ul,loadShapeTriangle:nl,BAR_VERTEX_COUNT:4,BAR_INDEX_COUNT:2,buildBarClipping:c,buildBarIndex:f,buildBarVertexStepAndColorFill:l,buildBarUv:v,CIRCLE_VERTEX_COUNT:9,CIRCLE_INDEX_COUNT:8,CIRCLE_WORLD_SIZE:Ho,buildCircleClipping:Wo,buildCircleIndex:Xo,buildCircleVertex:Yo,buildCircleStep:Ko,buildCircleUv:Jo,buildColor:G,IMAGE_SDF_VERTEX_COUNT:9,IMAGE_SDF_INDEX_COUNT:8,IMAGE_SDF_WORLD_SIZE:Dc,buildImageSdfClipping:Mc,buildImageSdfIndex:Sc,buildImageSdfStep:jc,buildImageSdfVertex:Tc,buildImageSdfUv:Nc,toLineOfAnyPointCount:Vc,buildLineOfAnyColor:Wc,toPointsCount:ia,toLinePointCount:ra,toLineVertexCount:ea,toLineIndexCount:ua,buildLineClipping:sa,buildLineIndex:ha,buildLineUv:oa,buildLineVertexStepAndColorFill:aa,buildNullClipping:Uc,buildNullIndex:function(t,n,i,r){for(var e=3*i,u=3*(i+r);e<u;e+=3)t[e+0]=n,t[e+1]=n,t[e+2]=n},buildNullVertex:Gc,buildNullStep:zc,buildNullUv:Hc,RECTANGLE_ROUNDED_VERTEX_COUNT:Mo,RECTANGLE_ROUNDED_INDEX_COUNT:24,RECTANGLE_ROUNDED_WORLD_SIZE:So,buildRectangleRoundedIndex:To,buildRectangleRoundedVertex:No,buildRectangleRoundedClipping:Io,buildRectangleRoundedStep:Co,buildRectangleRoundedUv:Ao,RECTANGLE_VERTEX_COUNT:Ra,RECTANGLE_INDEX_COUNT:ya,RECTANGLE_WORLD_SIZE:La,buildRectangleClipping:xa,buildRectangleIndex:Ba,buildRectangleVertex:_a,buildRectangleStep:Pa,buildRectangleUv:Ua,TEXT_VERTEX_COUNT:4,TEXT_INDEX_COUNT:2,TEXT_FMIN:D,toTextBufferCount:M,buildTextClipping:S,buildTextIndex:j,buildTextStep:T,buildTextVertex:I,TRIANGLE_ROUNDED_VERTEX_COUNT:Df,TRIANGLE_ROUNDED_INDEX_COUNT:15,TRIANGLE_ROUNDED_WORLD_SIZE:Ef,buildTriangleRoundedIndex:Sf,buildTriangleRoundedVertex:jf,buildTriangleRoundedClipping:Tf,buildTriangleRoundedStep:Nf,buildTriangleRoundedUv:If,TRIANGLE_VERTEX_COUNT:7,TRIANGLE_INDEX_COUNT:3,TRIANGLE_WORLD_SIZE:ga,buildTriangleClipping:wa,buildTriangleIndex:pa,buildTriangleVertex:Oa,buildTriangleStep:Da,buildTriangleUv:Ea,BuilderBar:Wt,BuilderBase:z,BuilderCircle:Zo,BuilderImageSdf:Ic,BuilderLabel:yc,BuilderLineOfAny:Xc,BuilderLineOfCircles:uf,BuilderLineOfRectangleRoundeds:ff,BuilderLineOfRectangles:gf,BuilderLineOfTriangleRoundeds:Cf,BuilderLineOfTriangles:_f,BuilderLine:da,BuilderMarkerCircleHead:Ia,BuilderMarkerCircleTail:Ca,BuilderMarkerCircle:Na,BuilderMarkerRectangleHead:Ha,BuilderMarkerRectangleTail:za,BuilderMarkerRectangle:Ga,BuilderMarkerTriangleHead:ja,BuilderMarkerTriangleTail:Ta,BuilderMarkerTriangle:Sa,BuilderNull:Aa,BuilderRectanglePivoted:$a,BuilderRectangleRounded:Ro,BuilderRectangle:gc,BuilderText:Xt,BuilderTriangleRounded:il,BuilderTriangle:Qf,toTransformLocalId:H,toTexture:V,toTextureTransformId:W,toTextureUvs:X,copyClipping:Yc,copyIndex:Kc,copyStep:Jc,copyUvs:Zc,copyVertex:qc,createBarUploaded:Yt,createButtonUploaded:Lo,createCircleUploaded:qo,createRectanglePivotedUploaded:tc,createGroupUploaded:nc,createImageSdfUploaded:Cc,createImageSdf:dv,createImage:function(t){return wo(t).then((function(t){return new wc(t)}))},createLabelUploaded:Lc,createLineOfAnyUploaded:sf,createLineOfCirclesUploaded:hf,createLineOfRectangleRoundedsUploaded:lf,createLineOfRectanglesUploaded:mf,createLineOfTriangleRoundedsUploaded:Af,createLineOfTrianglesUploaded:Pf,createLineUploaded:Ka,createLine:function(t,n,i,r){for(var e=se(t,[0,0,0,0]),u=.5*(e[2]+e[0]),s=.5*(e[3]+e[1]),h=e[2]-e[0],o=e[3]-e[1],a=[],c=0,f=t.length;c<f;c+=2)a.push(t[c]-u,t[c+1]-s);var l=new _c;return l.stroke.set(!0,void 0,void 0,i),l.transform.position.set(u,s),l.size.set(h,o),l.points.set(a,n,r),l},createNullUploaded:Hf,createRectangleRoundedUploaded:yo,createRectangleUploaded:mc,createTriangleRoundedUploaded:rl,createTriangleUploaded:$f,deserializeAll:Ur,deserializeBar:Oo,deserializeBase:po,deserializeButton:Po,deserializeCircle:$o,deserializeConnectorLine:Za,onDeserializedConnectorLine:qa,deserializeEmbedded:ec,deserializeEmbeddedLayer:Ye,deserializeGradient:go,deserializeGroupShadowed:bc,deserializeGroup:cc,deserializeImageSdf:Rc,deserializeImage:pc,deserializeLabel:xc,deserializeLineOfCircles:af,deserializeLineOfRectangleRoundeds:bf,deserializeLineOfRectangles:pf,deserializeLineOfTriangleRoundeds:xf,deserializeLineOfTriangles:Gf,deserializeLine:Pc,deserializeNull:Wf,deserializeRectanglePivoted:Jf,deserializeRectangleRounded:Zf,deserializeRectangle:Yf,deserializeTriangleRounded:el,deserializeTriangle:tl,deserialize:Fr,EShapeBarPoints:tt,EShapeBarPosition:$,EShapeBar:Vt,EShapeBaseHitTestData:dt,EShapeBase:wt,EShapeButtonRuntimeActionToggle:Uo,EShapeButtonRuntimeAction:Fo,EShapeButtonRuntime:Go,EShapeButton:_o,EShapeCircle:Qo,EShapeConnectorLine:ve,EShapeEmbeddedDatum:zr,EShapeEmbeddedLayerContainer:Ke,EShapeEmbeddedLayer:Be,EShapeEmbedded:_r,EShapeEmbeddeds:gv,EShapeFillImpl:Z,EShapeGroupFillEditor:sc,EShapeGroupFillViewer:Or,EShapeGroupPoints:hc,EShapeGroupShadowed:vc,EShapeGroupSizeEditor:xr,EShapeGroupSizeLayout:kr,EShapeGroupSizeShadowed:lc,EShapeGroupSizeViewer:Dr,EShapeGroupStrokeEditor:oc,EShapeGroupStrokeViewer:Er,EShapeGroupTextAlignEditor:br,EShapeGroupTextAlignViewer:Mr,EShapeGroupTextEditor:pr,EShapeGroupTextOffsetEditor:dr,EShapeGroupTextOffsetViewer:Sr,EShapeGroupTextOutlineEditor:gr,EShapeGroupTextOutlineViewer:jr,EShapeGroupTextPaddingEditor:mr,EShapeGroupTextPaddingViewer:Tr,EShapeGroupTextSpacingEditor:wr,EShapeGroupTextSpacingViewer:Nr,EShapeGroupTextViewer:Ir,EShapeGroupViewer:Br,EShapeGroup:ac,EShapeImageSdf:Ac,EShapeImage:wc,EShapeLabel:kc,EShapeLineBaseHitPart:nt,EShapeLineBase:Ht,EShapeLineOfAnyPointsFillImpl:tf,EShapeLineOfAnyPointsImpl:ef,EShapeLineOfAnyPointsPointImpl:nf,EShapeLineOfAnyPointsStrokeImpl:rf,EShapeLineOfCircles:of,EShapeLineOfRectangleRoundeds:vf,EShapeLineOfRectangles:wf,EShapeLineOfTriangleRoundeds:kf,EShapeLineOfTriangles:Uf,EShapeLinePoints:fe,EShapeLine:_c,EShapeNull:Vf,EShapePrimitive:Bt,EShapeRectanglePivoted:hu,EShapeRectangleRounded:Bo,EShapeRectangle:su,EShapeStrokeImpl:pt,EShapeTextAlignImpl:yt,EShapeTextImpl:xt,EShapeTextOffsetImpl:Lt,EShapeTextOutlineImpl:kt,EShapeTriangleRounded:Lf,EShapeTriangle:Ff,hitTestBBox:gt,hitTestCircle:_t,hitTestRectangleRounded:xo,hitTestRectangle:Ft,hitTestTriangleRounded:yf,hitTestTriangleFilled:Ut,hitTestTriangle:Gt,isStatic:Qc,toComputed:$c,toDash:h,toGradientImageUrl:function(t){for(var n=t.direction,i=t.points,r="",e=0,u=i.length;e<u;++e){var s=i[e],h=Jt.toCode(s.color),o=s.alpha,a=100*s.position;r+='<stop offset="'.concat(a,'%" stop-color="#').concat(h,'" stop-opacity="').concat(o,'" />')}var c=n*Math.PI/180,f=.5*Math.cos(c),l=-.5*Math.sin(c);return mv('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><defs>'+'<linearGradient id="o2glkm3aeu2oio" x1="'.concat(.5-f,'" x2="').concat(.5+f,'" y1="').concat(.5-l,'" y2="').concat(.5+l,'">')+r+'</linearGradient></defs><rect x="0" y="0" width="32" height="32" stroke="none" fill="url(#o2glkm3aeu2oio)" /></svg>')},toGradientSerialized:mt,toImageElement:wo,toLength:O,toResized:function(t,n,i,r,e){t.disallowUploadedUpdate();var u=t.transform.position;if(r){var s=Math.abs(i.x-n.x),h=Math.abs(i.y-n.y);if(e){var o=(f=Math.max(s,h))+f;t.size.set(yr(o),yr(o)),u.set(wv(n.x),wv(n.y))}else t.size.set(yr(s+s),yr(h+h)),u.set(wv(n.x),wv(n.y))}else if(e){s=i.x-n.x,h=i.y-n.y,o=Math.max(Math.abs(s),Math.abs(h));var a=n.x+(s<0?-o:+o),c=n.y+(h<0?-o:+o),f=.5*o,l=Math.min(n.x,a)+f,v=Math.min(n.y,c)+f;t.size.set(yr(o),yr(o)),u.set(wv(l),wv(v))}else{var b=Math.min(n.x,i.x),d=Math.min(n.y,i.y),g=Math.max(n.x,i.x)-b,m=Math.max(n.y,i.y)-d,w=.5*g,p=.5*m;t.size.set(yr(g),yr(m)),u.set(wv(b+w),wv(d+p))}t.allowUploadedUpdate()},toScaleInvariant:o,toSizeNormalized:yr,toSizeRounded:wv,toThresholdDefault:zt,EShapeAcceptorImpl:Hr,EShapeAcceptorType:Vr,EShapeAcceptors:Wr,EShapeBufferUnitBuilder:Ce,EShapeBufferUnit:Ie,EShapeBuffer:Ae,EShapeCapabilities:Ar,EShapeCapability:Cr,EShapeConnectorBodies:Ja,EShapeConnectorBodyImpl:le,EShapeConnectorContainerImpl:ut,EShapeConnectorEdgeAcceptorImpl:Xr,EShapeConnectorEdgeContainerImpl:Kr,EShapeConnectorEdgeImpl:Yr,EShapeConnectors:be,EShapeContainer:xe,EShapeCopyPart:st,EShapeCorner:it,EShapeDataImpl:Rt,EShapeDataMapperImpl:lr,EShapeDataMappingImpl:It,EShapeDataScopedImpl:At,EShapeDataValueExtensions:pv,EShapeDataValueImpl:Nt,EShapeDataValueOrder:Et,EShapeDataValueRangeImpl:Dt,EShapeDataValueRangeType:Ot,EShapeDataValueScope:St,EShapeDataValueState:jt,EShapeDataValueType:Mt,EShapeDefaults:K,EShapeDeleter:Dv,EShapeDeserializers:n,EShapeOnDeserializeds:i,EShapeEditor:Rr,EShapeLayerState:Xe,toPointsBoundary:se,eShapePointsFormatterCurve:ue,EShapePointsMarkerBase:he,EShapePointsMarkerContainerImplNoop:Q,EShapePointsMarkerContainerImpl:ce,EShapePointsMarkerHead:oe,EShapePointsMarkerNoop:q,EShapePointsMarkerTail:ae,EShapePointsMarkerType:J,EShapePointsStyle:U,EShapePointsStyles:Ev,EShapeRendererIteratorDatum:ye,EShapeRendererIterator:Le,EShapeRenderer:ke,EShapeResourceManagerDeserialization:vr,EShapeResourceManagerSerialization:Mv,EShapeRuntimeReset:qt,EShapeRuntime:Qt,EShapeRuntimes:Eo,EShapeSearch:Ov,EShapeStateSetImplObservable:vt,EShapeState:lt,EShapeStrokeSide:Pt,EShapeStrokeStyle:s,EShapeTextAlignHorizontal:m,EShapeTextAlignVertical:w,EShapeTextDirection:p,EShapeTextWeight:d,EShapeTextStyle:g,EShapeTransformImpl:bt,EShapeTransforms:Lr,EShapeType:r,EShapeUploadedImpl:u,EShapeUploadeds:e,EShapeUuidMappingImpl:Pr,ESnapperGrid:Sv,ESnapperResultScale:function(){this.distance=NaN,this.scale=new t.Point},ESnapperResult:jv,ESnapperTargetValueType:Tv,ESnapperTargetValue:Nv,ESnapperTarget:Iv,ESnapperModifierAnchor:Av,ESnapper:Rv,DThemes:Y,FormatNodeA:Ln,FormatNodea:kn,FormatNodeD:xn,FormatNoded:Bn,FormatNodee:Pn,FormatNodef:Fn,FormatNodefsi:Un,FormatNodeg:Gn,FormatNodeH:zn,FormatNodeh:Hn,FormatNodeM:Vn,FormatNodem:Wn,FormatNodemi:Xn,FormatNodeP:Yn,FormatNodep:Kn,FormatNodePadding:Jn,FormatNodeParenthesis:Zn,FormatNodePlus:qn,FormatNodePrecision:_n,FormatNoderd:hi,FormatNodeRP:Qn,FormatNoderp:$n,FormatNodesdt:ti,FormatNodeSpace:ni,FormatNodessi:ii,FormatNodeString:ri,FormatNodeY:ei,FormatNodey:ui,FormatNodez:si,FormatNodes:oi,DynamicAtlasItemEmpty:ge,DynamicAtlasItemFontAtlas:pe,DynamicAtlasItemImage:Ne,DynamicAtlasItemText:yv,DynamicAtlasItemWhite:me,DynamicAtlasItem:de,DynamicAtlas:we,DynamicFontAtlasCharacterOrigin:De,DynamicFontAtlasCharacterType:Me,DynamicFontAtlasCharacter:Ee,DynamicFontAtlasFont:kv,DynamicFontAtlas:xv,DynamicFontAtlases:Uv,DynamicSDFFontAtlas:je,DynamicSDFFontAtlases:Te,DynamicSDFFontGenerator:Se,isArray:Ct,isFunction:ot,isNaN:Eh,isNumber:gn,isObject:Gv,isString:at,Lazy:zv,NumberFormatterImpl:li,NumberFormatters:vi,toCeilingIndex:Hv,toCloned:Vv,toEnum:Oi,toIndexOf:Jr,toLabel:Wv,toMerged:Xv,toPadded:Kt,toString:function(t){return null!=t?String(t):""},toSvgTexture:function(n,i){return t.Texture.from(mv(n),{resolution:i})},toSvgUrl:mv,UtilAlpha:pn,UtilSvgAtlasBuilder:Yv,UtilAttachAlign:xu,UtilAttach:Bu,UtilCharacterIterator:b,UtilClickOutside:zu,UtilClipboard:pl,UtilGestureData:nr,UtilGestureEasingHistory:er,UtilGestureEasing:ur,UtilGestureMode:tr,UtilGestureModifier:Qi,UtilGestureModifiers:$i,UtilGesture:sr,UtilExtract:Zv,UtilExtractor:Kv,UtilFileDownloader:Jv,UtilFileAs:qv,UtilFileOpener:Qv,UtilFont:Lv,UtilHsv:$v,UtilHtmlElementClipperExImpl:iu,UtilHtmlElementClipperExRectsImpl:ru,UtilHtmlElementWhen:eu,UtilHtmlElement:uu,UtilInputInput:bu,UtilInputNumber:du,UtilInputTextArea:tb,UtilInputText:Mu,UtilInput:vu,UtilKeyboardEvent:Zt,UtilName:nb,UtilOverlay:Hu,UtilPointerEvent:Wi,UtilRgb:Jt,UtilRgba:ib,UtilStateBlinker:rb,UtilTransition:eb,UtilWheelEvent:ub,DAlignHorizontal:ts,DAlignVertical:ns,DAlignWith:is,DAnimationBase:rr,DAnimationEmpty:sb,DAnimationFadeIn:hb,DAnimationTimings:ir,DApplicationLayerOptions:ab,DApplicationLayer:pb,DApplicationPadding:ob,DApplication:Db,DApplications:rt,DBaseAutoSet:Yi,DBaseAuto:Xi,DBaseBackgroundMeshGeometry:Ci,DBaseBackgroundMesh:Ai,DBaseBackgroundSnippet:Ri,DBaseBackground:wi,DBaseBorderMeshGeometry:yi,DBaseBorderMesh:Li,DBaseBorderSnippet:ki,DBaseBorder:Di,DBaseCorner:Mi,DBaseInteractive:Si,DBaseMeshGeometry:Ii,DBaseOutlineSnippet:xi,DBaseOutline:ji,DBaseOverflowMaskSimple:vs,DBaseOverflowMask:qi,DBasePaddingAdjustable:Eb,DBasePadding:Ti,DBasePoint:Ni,DBaseReflowableContainer:Ji,DBaseReflowableImpl:Bi,DBaseSnippetContainer:Ki,DBaseStateSetImplObservable:ft,DBaseStateSetImpl:ct,DBaseState:ht,DBase:Zi,DBoard:Mb,DBorderMask:pi,DButtonAmbient:Cs,DButtonBaseWhen:qu,DButtonBase:Ss,DButtonCheckRight:jb,DButtonCheck:Sb,DButtonColorGradient:Gb,DButtonColor:Hb,DButtonDanger:Vb,DButtonDate:Wb,DButtonDatetime:Jb,DButtonFileAs:qv,DButtonFile:Zb,DButtonGroup:ks,DButtonLink:qb,DButtonPrimary:Ts,DButtonRadioRight:$b,DButtonRadio:Qb,DButtonRedo:td,DButtonSecondary:nd,DButtonSelect:Ud,DButtonTime:Gd,DButtonUndo:zd,DButton:js,DCanvasContainer:cr,DCanvas:Hd,DChartAxisBaseOptionParser:Xd,DChartAxisBase:Yd,DChartAxisContainerImpl:Kd,DChartAxisPosition:Vd,DChartAxisTickPosition:Wd,DChartAxisXDatetime:Zd,DChartAxisX:Jd,DChartAxisY:qd,DChartColorSet1:function(t){return Qd[t%Qd.length]},DChartColorSet2:tg,DChartCoordinateContainerImpl:rg,DChartCoordinateContainerSubImpl:ig,DChartCoordinateDirection:ng,DChartCoordinateLinearTick:eg,DChartCoordinateLinear:og,DChartCoordinateLogTick:ag,DChartCoordinateLog:cg,DChartCoordinateTransformImpl:ug,DChartCoordinateTransformMarkImpl:sg,DChartLegendItem:fg,DChartLegend:lg,DChartOverview:vg,DChartPlotAreaContainer:bg,DChartPlotAreaImpl:Tg,DChartRegionImplObservable:Ng,DChartRegionImpl:hg,DChartSelectionGridlineContainerImpl:Rg,DChartSelectionGridlineX:Cg,DChartSelectionGridlineY:Ag,DChartSelectionMarker:yg,DChartSelectionShapeBase:Ig,DChartSelectionSimple:xg,DChartSelectionSubImpl:kg,DChartSelectionPoint:Lg,DChartSeriesBar:Fg,DChartSeriesBaseCoordinateContainer:Bg,DChartSeriesBase:_g,DChartSeriesContainerImpl:jg,DChartSeriesFillComputedImpl:gg,DChartSeriesFillImpl:wg,DChartSeriesLineOfAny:Pg,DChartSeriesLineOfCircles:Ug,DChartSeriesLineOfRectangleRoundeds:Gg,DChartSeriesLineOfRectangles:zg,DChartSeriesLineOfTriangleRoundeds:Vg,DChartSeriesLineOfTriangles:Hg,DChartSeriesLine:Wg,DChartSeriesExpressionParametersImpl:Xg,DChartSeriesLinear:Yg,DChartSeriesPaddingComputedImpl:pg,DChartSeriesPaddingImpl:Og,DChartSeriesPointComputedImpl:Dg,DChartSeriesPointImpl:Eg,DChartSeriesScalars:mg,DChartSeriesStrokeComputedImpl:Mg,DChartSeriesStrokeImpl:Sg,DChartSeriesHitResult:dg,DChart:Kg,DColorGradientObservable:Ib,DColorGradientPointObservable:Tb,DCommandClear:fb,DCommandCreate:Jg,DCommandDelete:Zg,DCommandFlag:cb,DCommandRedo:lb,DCommandSaveAs:qg,DCommandSave:Qg,DCommandUndo:vb,DContent:md,DControllerCommandImpl:gb,DControllerFocusImpl:Ob,DControllerKeyboard:mb,DControllers:wb,DCornerMask:Ei,DDiagramBaseControllerOpenType:fr,DDiagramBase:tm,DDiagramCanvasBase:sm,DDiagramCanvasDataImpl:hm,DDiagramCanvasEditorBackground:nm,DDiagramCanvasEditorSnap:om,DDiagramCanvasEditor:am,DDiagramCanvasTileMappingImpl:rm,DDiagramCanvasTileMappingPointImpl:im,DDiagramCanvasShapeImpl:cm,DDiagramCanvasTickerImpl:lm,DDiagramCanvasTile:em,DDiagramCanvas:vm,DDiagramDataImpl:wm,DDiagramDataPrivateImpl:bm,DDiagramDataRemoteImpl:gm,DDiagramEditorThumbnail:pm,DDiagramEditor:Om,DDiagramLayerContainer:um,DDiagramLayer:ou,DDiagramLayers:_e,DDiagramSerializedVersion:1,DDiagramShape:Dm,DDiagramSnapshot:$g,DDiagramTicker:fm,DDiagram:Em,DDiagrams:Je,DDialogAlign:xu,DDialogCloseOn:_u,DDialogColorGradient:Ub,DDialogColor:zb,DDialogConfirmDelete:jm,DDialogConfirmDiscard:Tm,DDialogConfirmMessage:Mm,DDialogConfirm:Sm,DDialogDate:jh,DDialogDatetime:ph,DDialogFittedContent:th,DDialogFitted:nh,DDialogGestureImpl:Fu,DDialogGestureMode:Pu,DDialogInputBoolean:Ps,DDialogInputInteger:Xs,DDialogInputReal:Js,DDialogInputText:Qs,DDialogInput:Ls,DDialogLayeredContent:Zu,DDialogLayeredFooter:Is,DDialogLayeredHeaderButtonClose:As,DDialogLayeredHeader:Rs,DDialogLayered:ys,DDialogMessage:Nm,DDialogMode:Uu,DDialogProcessingMessage:Im,DDialogProcessing:Cm,DDialogSaveAs:Am,DDialogSelectListItemUpdater:hd,DDialogSelectListItem:ed,DDialogSelectList:Cd,DDialogSelectSearh:Ad,DDialogSelect:_d,DDialogState:Gu,DDialogTime:Dh,DDialog:Vu,DDropdownBase:Lm,DDropdown:km,DDynamicTextGeometry:ps,DDynamicTextMeasureResultCharacter:bs,DDynamicTextMeasureResult:ds,DDynamicTextMeasure:ws,DDynamicTextStyleWordWrap:gs,DDynamicTextStyle:Os,DDynamicText:Ds,DExpandableHeader:xm,DExpandable:Bm,DHtmlElementState:nu,DHtmlElement:Gs,DImageBaseThemeWrapperSecondary:Qu,DImageBaseThemeWrapperTertiary:$u,DImageBase:Ms,DImagePieceLayouterPartBottom:us,DImagePieceLayouterPartCenter:ss,DImagePieceLayouterPartContainer:fs,DImagePieceLayouterPartLeft:hs,DImagePieceLayouterPartMiddle:os,DImagePieceLayouterPartRight:as,DImagePieceLayouterPartTop:cs,DImagePieceLayouterPart:es,DImagePieceLayouter:ls,DImagePiece:rs,DImage:hl,DInputAndLabel:Ab,DInputBooleanButtonOff:xs,DInputBooleanButtonOn:Bs,DInputBoolean:_s,DInputInput:Hs,DInputIntegerAndLabel:_m,DInputInteger:Ws,DInputLabel:Cb,DInputNumber:Vs,DInputRealAndLabel:Rb,DInputReal:Ks,DInputSearch:Rd,DInputTextAndLabel:yb,DInputTextArea:Pm,DInputText:qs,DInput:zs,DItemUpdater:ud,DLayoutClearType:_i,DLayoutDirection:Wu,DLayoutHorizontal:Ns,DLayoutSpace:Xu,DLayoutVertical:Ju,DLayout:Ku,DLinkMenuItemId:vl,DLinkMenu:dl,DLinkTarget:gl,DLink:Dl,DLinks:El,DListDataImpl:gd,DListDataMappedImpl:od,DListDataSelectionMultiple:ad,DListDataSelectionNone:cd,DListDataSelectionSingle:fd,DListDataSelectionType:id,DListItemAccessorImpl:dd,DListItemAmbient:Fm,DListItemUpdater:sd,DListItem:rd,DList:Id,DMapCoordinateEPSG3857:Um,DMapCoordinates:Gm,DMapTilePlane:Hm,DMapTilePyramidImpl:Vm,DMapTileUrlBuilderKokudo:function(t,n,i){return 5<=t?"https://cyberjapandata.gsi.go.jp/xyz/pale/".concat(t,"/").concat(n,"/").concat(i,".png"):2<=t?"https://cyberjapandata.gsi.go.jp/xyz/std/".concat(t,"/").concat(n,"/").concat(i,".png"):"https://cyberjapandata.gsi.go.jp/xyz/earthhillshade/".concat(t,"/").concat(n,"/").concat(i,".png")},DMapTileUrlBuilderOsm:function(t,n,i){return"https://".concat("abc"[(n+i)%3],".tile.openstreetmap.org/").concat(t,"/").concat(n,"/").concat(i,".png")},DMapTileUrlBuilderOsmfj:Wm,DMapTilePyramids:Xm,DMapTile:zm,DMenuAlign:xu,DMenuBarItem:Ym,DMenuBar:Km,DMenuContext:Rm,DMenuItemBase:ol,DMenuItemCheckIsCompatible:ll,DMenuItemCheck:fl,DMenuItemExpandableBody:kl,DMenuItemExpandableHeader:xl,DMenuItemExpandableIsCompatible:Pl,DMenuItemExpandableItemCheck:Fl,DMenuItemExpandableItemLink:Ul,DMenuItemExpandableItemMenu:rv,DMenuItemExpandableItemSeparator:Gl,DMenuItemExpandableItemSpace:zl,DMenuItemExpandableItemText:Hl,DMenuItemExpandable:_l,DMenuItemExpandables:Bl,DMenuItemLinkIsCompatible:Sl,DMenuItemLink:Ml,DMenuItemMenuIsCompatible:Tl,DMenuItemMenuToSubMenuOptions:Nl,DMenuItemMenu:jl,DMenuItemSeparatorReflowable:Il,DMenuItemSeparatorIsCompatible:Cl,DMenuItemSeparator:Al,DMenuItemSpaceIsCompatible:yl,DMenuItemSpace:Rl,DMenuItemText:cl,DMenuItem:al,DMenuSidedContent:Jm,DMenuSidedItemCheck:Wl,DMenuSidedItemExpandableItemCheck:nv,DMenuSidedItemExpandableItemLink:iv,DMenuSidedItemExpandableItemMenu:ev,DMenuSidedItemExpandableItemSeparator:uv,DMenuSidedItemExpandableItemSpace:sv,DMenuSidedItemExpandableItemText:hv,DMenuSidedItemExpandable:tv,DMenuSidedItemExpandables:$l,DMenuSidedItemLink:Xl,DMenuSidedItemMenu:Yl,DMenuSidedItemSeparator:Kl,DMenuSidedItemSpace:Jl,DMenuSidedItemText:Zl,DMenuSidedSelectionType:Zm,DMenuSidedSelection:Qm,DMenuSided:$m,DMenuSideds:ql,DMenu:ym,DMenus:bl,DNoteError:tw,DNoteNoItemsFound:nw,DNoteSearching:iw,DNoteSmallError:kd,DNoteSmallNoItemsFound:xd,DNoteSmallSearching:Bd,DNoteSmall:Ld,DNote:yd,DNotification:rw,DPaginationButtonLast:ew,DPaginationButtonNext:uw,DPaginationButtonPage:sw,DPaginationButtonPrevious:hw,DPaginationButtonTop:ow,DPaginationDots:aw,DPaginationPage:cw,DPagination:fw,DPaneScrollBar:Td,DPane:Nd,DPickerColorAndAlpha:Lb,DPickerColorGradientRecent:_b,DPickerColorGradientView:Pb,DPickerColorGradient:Fb,DPickerColorRecent:kb,DPickerColor:xb,DPickerDate:Sh,DPickerDates:Xb,DPickerDatetimeButtonBack:ih,DPickerDatetimeButtonDate:rh,DPickerDatetimeButtonNext:eh,DPickerDatetimeLabelDate:hh,DPickerDatetimeLabel:sh,DPickerDatetimeMask:ah,DPickerDatetimeMasks:ch,DPickerDatetimeRange:lw,DPickerDatetimeSpace:oh,DPickerDatetime:wh,DPickerDatetimes:Kb,DPickerTimeBoundHours:lh,DPickerTimeBoundMinutes:vh,DPickerTimeBoundSeconds:bh,DPickerTimeBound:fh,DPickerTimeBounds:dh,DPickerTimeRange:vw,DPickerTime:mh,DPickerTimes:Yb,DScalarExpressionNodeType:Pi,DScalarExpression:Fi,DScalarFunctions:Vi,DScrollBarHorizontal:Ed,DScrollBarThumbHorizontal:Dd,DScrollBarThumbReflowableHorizontal:Od,DScrollBarThumbReflowableVertical:Md,DScrollBarThumbVertical:Sd,DScrollBarThumb:pd,DScrollBarVertical:jd,DScrollBar:wd,DSelectMultiple:bw,DSelect:dw,DShadowImpl:gw,DSliderHorizontal:Mw,DSliderLabel:mw,DSliderThumb:ww,DSliderTrackHorizontal:Ew,DSliderTrackVertical:Sw,DSliderTrack:Dw,DSliderValue:pw,DSliderVertical:jw,DSlider:Ow,DTableBodyCellActionDialog:Iw,DTableBodyCellActionMenu:Cw,DTableBodyCellActionPromise:Rw,DTableBodyCellButton:Lw,DTableBodyCellCheck:xw,DTableBodyCellColor:Bw,DTableBodyCellDate:_w,DTableBodyCellDatetime:Pw,DTableBodyCellIndex:Fw,DTableBodyCellInputInteger:Uw,DTableBodyCellInputReal:Gw,DTableBodyCellInputText:zw,DTableBodyCellInputTreeInput:Hw,DTableBodyCellInputTreeMarker:Vw,DTableBodyCellInputTree:Xw,toLinkOptions:Yw,toUrl:Kw,toChecker:Jw,DTableBodyCellLink:Zw,DTableBodyCellSelectDialog:Nw,DTableBodyCellSelectMenu:qw,DTableBodyCellSelectMultiple:Qw,DTableBodyCellSelectPromise:Aw,DTableBodyCellText:yw,DTableBodyCellTime:$w,DTableBodyCellTree:tp,DTableBodyCells:Tw,DTableBodyRow:rp,DTableBody:fp,DTableCategoryCell:lp,DTableCategory:vp,DTableColumnType:kw,DTableDataListFilter:ep,DTableDataListMapped:up,DTableDataListSelection:hp,DTableDataListSorter:ap,DTableDataList:cp,DTableDataSelectionType:np,DTableDataOrder:op,DTableDataTreeFilter:bp,DTableDataTreeItemAccessor:mp,DTableDataTreeSelectionImpl:pp,DTableDataTreeSorter:Op,DTableDataTree:Dp,DTableHeaderCellCheck:Ep,DTableHeaderCell:Mp,DTableHeader:Sp,DTableRow:ip,DTableScrollBar:jp,DTableState:Ww,DTable:Hp,DTextBase:Es,DText:uh,DTreeDataImpl:nO,DTreeDataMappedImpl:qp,DTreeDataSelectionMultiple:Qp,DTreeDataSelectionNone:tO,DTreeDataSelectionSingle:$p,DTreeDataSelectionType:Zp,DTreeItemButton:eO,DTreeItemNonEditable:uO,DTreeItemState:iO,DTreeItemText:rO,DTreeItemUpdater:sO,DTreeNodeAccessorImpl:Jp,DTree:hO,DViewGestureImpl:hr,DViewImpl:ar,DViewTransformImpl:or};cv();var aO=window;aO.wcardinal=aO.wcardinal||{},aO.wcardinal.ui=oO}(PIXI);
//# sourceMappingURL=wcardinal-ui.min.js.map
